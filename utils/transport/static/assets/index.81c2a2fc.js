(function(){const ht=document.createElement("link").relList;if(ht&&ht.supports&&ht.supports("modulepreload"))return;for(const V of document.querySelectorAll('link[rel="modulepreload"]'))B(V);new MutationObserver(V=>{for(const f of V)if(f.type==="childList")for(const l of f.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&B(l)}).observe(document,{childList:!0,subtree:!0});function e(V){const f={};return V.integrity&&(f.integrity=V.integrity),V.referrerpolicy&&(f.referrerPolicy=V.referrerpolicy),V.crossorigin==="use-credentials"?f.credentials="include":V.crossorigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function B(V){if(V.ep)return;V.ep=!0;const f=e(V);fetch(V.href,f)}})();function C0(j,ht){const e=Object.create(null),B=j.split(",");for(let V=0;V<B.length;V++)e[B[V]]=!0;return ht?V=>!!e[V.toLowerCase()]:V=>!!e[V]}const gw="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",mw=C0(gw);function My(j){return!!j||j===""}function E0(j){if(Aa(j)){const ht={};for(let e=0;e<j.length;e++){const B=j[e],V=Fs(B)?xw(B):E0(B);if(V)for(const f in V)ht[f]=V[f]}return ht}else{if(Fs(j))return j;if(Wo(j))return j}}const yw=/;(?![^(]*\))/g,bw=/:(.+)/;function xw(j){const ht={};return j.split(yw).forEach(e=>{if(e){const B=e.split(bw);B.length>1&&(ht[B[0].trim()]=B[1].trim())}}),ht}function L0(j){let ht="";if(Fs(j))ht=j;else if(Aa(j))for(let e=0;e<j.length;e++){const B=L0(j[e]);B&&(ht+=B+" ")}else if(Wo(j))for(const e in j)j[e]&&(ht+=e+" ");return ht.trim()}const ip=j=>Fs(j)?j:j==null?"":Aa(j)||Wo(j)&&(j.toString===Dy||!Ra(j.toString))?JSON.stringify(j,Cy,2):String(j),Cy=(j,ht)=>ht&&ht.__v_isRef?Cy(j,ht.value):Ch(ht)?{[`Map(${ht.size})`]:[...ht.entries()].reduce((e,[B,V])=>(e[`${B} =>`]=V,e),{})}:Ey(ht)?{[`Set(${ht.size})`]:[...ht.values()]}:Wo(ht)&&!Aa(ht)&&!Py(ht)?String(ht):ht,Lo={},Mh=[],lu=()=>{},ww=()=>!1,_w=/^on[^a-z]/,Vp=j=>_w.test(j),D0=j=>j.startsWith("onUpdate:"),Ol=Object.assign,P0=(j,ht)=>{const e=j.indexOf(ht);e>-1&&j.splice(e,1)},kw=Object.prototype.hasOwnProperty,to=(j,ht)=>kw.call(j,ht),Aa=Array.isArray,Ch=j=>Gp(j)==="[object Map]",Ey=j=>Gp(j)==="[object Set]",Ra=j=>typeof j=="function",Fs=j=>typeof j=="string",I0=j=>typeof j=="symbol",Wo=j=>j!==null&&typeof j=="object",Ly=j=>Wo(j)&&Ra(j.then)&&Ra(j.catch),Dy=Object.prototype.toString,Gp=j=>Dy.call(j),Tw=j=>Gp(j).slice(8,-1),Py=j=>Gp(j)==="[object Object]",z0=j=>Fs(j)&&j!=="NaN"&&j[0]!=="-"&&""+parseInt(j,10)===j,yp=C0(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Yp=j=>{const ht=Object.create(null);return e=>ht[e]||(ht[e]=j(e))},Aw=/-(\w)/g,Ou=Yp(j=>j.replace(Aw,(ht,e)=>e?e.toUpperCase():"")),Sw=/\B([A-Z])/g,Uh=Yp(j=>j.replace(Sw,"-$1").toLowerCase()),Wp=Yp(j=>j.charAt(0).toUpperCase()+j.slice(1)),Nv=Yp(j=>j?`on${Wp(j)}`:""),yd=(j,ht)=>!Object.is(j,ht),Uv=(j,ht)=>{for(let e=0;e<j.length;e++)j[e](ht)},Tp=(j,ht,e)=>{Object.defineProperty(j,ht,{configurable:!0,enumerable:!1,value:e})},Mw=j=>{const ht=parseFloat(j);return isNaN(ht)?j:ht};let ym;const Cw=()=>ym||(ym=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let Du;class Iy{constructor(ht=!1){this.active=!0,this.effects=[],this.cleanups=[],!ht&&Du&&(this.parent=Du,this.index=(Du.scopes||(Du.scopes=[])).push(this)-1)}run(ht){if(this.active){const e=Du;try{return Du=this,ht()}finally{Du=e}}}on(){Du=this}off(){Du=this.parent}stop(ht){if(this.active){let e,B;for(e=0,B=this.effects.length;e<B;e++)this.effects[e].stop();for(e=0,B=this.cleanups.length;e<B;e++)this.cleanups[e]();if(this.scopes)for(e=0,B=this.scopes.length;e<B;e++)this.scopes[e].stop(!0);if(this.parent&&!ht){const V=this.parent.scopes.pop();V&&V!==this&&(this.parent.scopes[this.index]=V,V.index=this.index)}this.active=!1}}}function zy(j){return new Iy(j)}function Ew(j,ht=Du){ht&&ht.active&&ht.effects.push(j)}const R0=j=>{const ht=new Set(j);return ht.w=0,ht.n=0,ht},Ry=j=>(j.w&mf)>0,Fy=j=>(j.n&mf)>0,Lw=({deps:j})=>{if(j.length)for(let ht=0;ht<j.length;ht++)j[ht].w|=mf},Dw=j=>{const{deps:ht}=j;if(ht.length){let e=0;for(let B=0;B<ht.length;B++){const V=ht[B];Ry(V)&&!Fy(V)?V.delete(j):ht[e++]=V,V.w&=~mf,V.n&=~mf}ht.length=e}},t0=new WeakMap;let dd=0,mf=1;const e0=30;let au;const Nf=Symbol(""),r0=Symbol("");class F0{constructor(ht,e=null,B){this.fn=ht,this.scheduler=e,this.active=!0,this.deps=[],this.parent=void 0,Ew(this,B)}run(){if(!this.active)return this.fn();let ht=au,e=pf;for(;ht;){if(ht===this)return;ht=ht.parent}try{return this.parent=au,au=this,pf=!0,mf=1<<++dd,dd<=e0?Lw(this):bm(this),this.fn()}finally{dd<=e0&&Dw(this),mf=1<<--dd,au=this.parent,pf=e,this.parent=void 0,this.deferStop&&this.stop()}}stop(){au===this?this.deferStop=!0:this.active&&(bm(this),this.onStop&&this.onStop(),this.active=!1)}}function bm(j){const{deps:ht}=j;if(ht.length){for(let e=0;e<ht.length;e++)ht[e].delete(j);ht.length=0}}let pf=!0;const Oy=[];function Hh(){Oy.push(pf),pf=!1}function Vh(){const j=Oy.pop();pf=j===void 0?!0:j}function yc(j,ht,e){if(pf&&au){let B=t0.get(j);B||t0.set(j,B=new Map);let V=B.get(e);V||B.set(e,V=R0()),By(V)}}function By(j,ht){let e=!1;dd<=e0?Fy(j)||(j.n|=mf,e=!Ry(j)):e=!j.has(au),e&&(j.add(au),au.deps.push(j))}function ju(j,ht,e,B,V,f){const l=t0.get(j);if(!l)return;let m=[];if(ht==="clear")m=[...l.values()];else if(e==="length"&&Aa(j))l.forEach((x,t)=>{(t==="length"||t>=B)&&m.push(x)});else switch(e!==void 0&&m.push(l.get(e)),ht){case"add":Aa(j)?z0(e)&&m.push(l.get("length")):(m.push(l.get(Nf)),Ch(j)&&m.push(l.get(r0)));break;case"delete":Aa(j)||(m.push(l.get(Nf)),Ch(j)&&m.push(l.get(r0)));break;case"set":Ch(j)&&m.push(l.get(Nf));break}if(m.length===1)m[0]&&n0(m[0]);else{const x=[];for(const t of m)t&&x.push(...t);n0(R0(x))}}function n0(j,ht){const e=Aa(j)?j:[...j];for(const B of e)B.computed&&xm(B);for(const B of e)B.computed||xm(B)}function xm(j,ht){(j!==au||j.allowRecurse)&&(j.scheduler?j.scheduler():j.run())}const Pw=C0("__proto__,__v_isRef,__isVue"),Ny=new Set(Object.getOwnPropertyNames(Symbol).filter(j=>j!=="arguments"&&j!=="caller").map(j=>Symbol[j]).filter(I0)),Iw=O0(),zw=O0(!1,!0),Rw=O0(!0),wm=Fw();function Fw(){const j={};return["includes","indexOf","lastIndexOf"].forEach(ht=>{j[ht]=function(...e){const B=ho(this);for(let f=0,l=this.length;f<l;f++)yc(B,"get",f+"");const V=B[ht](...e);return V===-1||V===!1?B[ht](...e.map(ho)):V}}),["push","pop","shift","unshift","splice"].forEach(ht=>{j[ht]=function(...e){Hh();const B=ho(this)[ht].apply(this,e);return Vh(),B}}),j}function O0(j=!1,ht=!1){return function(B,V,f){if(V==="__v_isReactive")return!j;if(V==="__v_isReadonly")return j;if(V==="__v_isShallow")return ht;if(V==="__v_raw"&&f===(j?ht?Qw:Yy:ht?Gy:Vy).get(B))return B;const l=Aa(B);if(!j&&l&&to(wm,V))return Reflect.get(wm,V,f);const m=Reflect.get(B,V,f);return(I0(V)?Ny.has(V):Pw(V))||(j||yc(B,"get",V),ht)?m:ps(m)?l&&z0(V)?m:m.value:Wo(m)?j?$y(m):Xp(m):m}}const Ow=Uy(),Bw=Uy(!0);function Uy(j=!1){return function(e,B,V,f){let l=e[B];if(zh(l)&&ps(l)&&!ps(V))return!1;if(!j&&(!Ap(V)&&!zh(V)&&(l=ho(l),V=ho(V)),!Aa(e)&&ps(l)&&!ps(V)))return l.value=V,!0;const m=Aa(e)&&z0(B)?Number(B)<e.length:to(e,B),x=Reflect.set(e,B,V,f);return e===ho(f)&&(m?yd(V,l)&&ju(e,"set",B,V):ju(e,"add",B,V)),x}}function Nw(j,ht){const e=to(j,ht);j[ht];const B=Reflect.deleteProperty(j,ht);return B&&e&&ju(j,"delete",ht,void 0),B}function Uw(j,ht){const e=Reflect.has(j,ht);return(!I0(ht)||!Ny.has(ht))&&yc(j,"has",ht),e}function Hw(j){return yc(j,"iterate",Aa(j)?"length":Nf),Reflect.ownKeys(j)}const Hy={get:Iw,set:Ow,deleteProperty:Nw,has:Uw,ownKeys:Hw},Vw={get:Rw,set(j,ht){return!0},deleteProperty(j,ht){return!0}},Gw=Ol({},Hy,{get:zw,set:Bw}),B0=j=>j,$p=j=>Reflect.getPrototypeOf(j);function ap(j,ht,e=!1,B=!1){j=j.__v_raw;const V=ho(j),f=ho(ht);e||(ht!==f&&yc(V,"get",ht),yc(V,"get",f));const{has:l}=$p(V),m=B?B0:e?H0:bd;if(l.call(V,ht))return m(j.get(ht));if(l.call(V,f))return m(j.get(f));j!==V&&j.get(ht)}function op(j,ht=!1){const e=this.__v_raw,B=ho(e),V=ho(j);return ht||(j!==V&&yc(B,"has",j),yc(B,"has",V)),j===V?e.has(j):e.has(j)||e.has(V)}function sp(j,ht=!1){return j=j.__v_raw,!ht&&yc(ho(j),"iterate",Nf),Reflect.get(j,"size",j)}function _m(j){j=ho(j);const ht=ho(this);return $p(ht).has.call(ht,j)||(ht.add(j),ju(ht,"add",j,j)),this}function km(j,ht){ht=ho(ht);const e=ho(this),{has:B,get:V}=$p(e);let f=B.call(e,j);f||(j=ho(j),f=B.call(e,j));const l=V.call(e,j);return e.set(j,ht),f?yd(ht,l)&&ju(e,"set",j,ht):ju(e,"add",j,ht),this}function Tm(j){const ht=ho(this),{has:e,get:B}=$p(ht);let V=e.call(ht,j);V||(j=ho(j),V=e.call(ht,j)),B&&B.call(ht,j);const f=ht.delete(j);return V&&ju(ht,"delete",j,void 0),f}function Am(){const j=ho(this),ht=j.size!==0,e=j.clear();return ht&&ju(j,"clear",void 0,void 0),e}function lp(j,ht){return function(B,V){const f=this,l=f.__v_raw,m=ho(l),x=ht?B0:j?H0:bd;return!j&&yc(m,"iterate",Nf),l.forEach((t,a)=>B.call(V,x(t),x(a),f))}}function cp(j,ht,e){return function(...B){const V=this.__v_raw,f=ho(V),l=Ch(f),m=j==="entries"||j===Symbol.iterator&&l,x=j==="keys"&&l,t=V[j](...B),a=e?B0:ht?H0:bd;return!ht&&yc(f,"iterate",x?r0:Nf),{next(){const{value:i,done:r}=t.next();return r?{value:i,done:r}:{value:m?[a(i[0]),a(i[1])]:a(i),done:r}},[Symbol.iterator](){return this}}}}function hf(j){return function(...ht){return j==="delete"?!1:this}}function Yw(){const j={get(f){return ap(this,f)},get size(){return sp(this)},has:op,add:_m,set:km,delete:Tm,clear:Am,forEach:lp(!1,!1)},ht={get(f){return ap(this,f,!1,!0)},get size(){return sp(this)},has:op,add:_m,set:km,delete:Tm,clear:Am,forEach:lp(!1,!0)},e={get(f){return ap(this,f,!0)},get size(){return sp(this,!0)},has(f){return op.call(this,f,!0)},add:hf("add"),set:hf("set"),delete:hf("delete"),clear:hf("clear"),forEach:lp(!0,!1)},B={get(f){return ap(this,f,!0,!0)},get size(){return sp(this,!0)},has(f){return op.call(this,f,!0)},add:hf("add"),set:hf("set"),delete:hf("delete"),clear:hf("clear"),forEach:lp(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(f=>{j[f]=cp(f,!1,!1),e[f]=cp(f,!0,!1),ht[f]=cp(f,!1,!0),B[f]=cp(f,!0,!0)}),[j,e,ht,B]}const[Ww,$w,Xw,jw]=Yw();function N0(j,ht){const e=ht?j?jw:Xw:j?$w:Ww;return(B,V,f)=>V==="__v_isReactive"?!j:V==="__v_isReadonly"?j:V==="__v_raw"?B:Reflect.get(to(e,V)&&V in B?e:B,V,f)}const Zw={get:N0(!1,!1)},Kw={get:N0(!1,!0)},Jw={get:N0(!0,!1)},Vy=new WeakMap,Gy=new WeakMap,Yy=new WeakMap,Qw=new WeakMap;function qw(j){switch(j){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function t_(j){return j.__v_skip||!Object.isExtensible(j)?0:qw(Tw(j))}function Xp(j){return zh(j)?j:U0(j,!1,Hy,Zw,Vy)}function Wy(j){return U0(j,!1,Gw,Kw,Gy)}function $y(j){return U0(j,!0,Vw,Jw,Yy)}function U0(j,ht,e,B,V){if(!Wo(j)||j.__v_raw&&!(ht&&j.__v_isReactive))return j;const f=V.get(j);if(f)return f;const l=t_(j);if(l===0)return j;const m=new Proxy(j,l===2?B:e);return V.set(j,m),m}function vf(j){return zh(j)?vf(j.__v_raw):!!(j&&j.__v_isReactive)}function zh(j){return!!(j&&j.__v_isReadonly)}function Ap(j){return!!(j&&j.__v_isShallow)}function Xy(j){return vf(j)||zh(j)}function ho(j){const ht=j&&j.__v_raw;return ht?ho(ht):j}function Vf(j){return Tp(j,"__v_skip",!0),j}const bd=j=>Wo(j)?Xp(j):j,H0=j=>Wo(j)?$y(j):j;function jy(j){pf&&au&&(j=ho(j),By(j.dep||(j.dep=R0())))}function Zy(j,ht){j=ho(j),j.dep&&n0(j.dep)}function ps(j){return!!(j&&j.__v_isRef===!0)}function Gf(j){return Ky(j,!1)}function e_(j){return Ky(j,!0)}function Ky(j,ht){return ps(j)?j:new r_(j,ht)}class r_{constructor(ht,e){this.__v_isShallow=e,this.dep=void 0,this.__v_isRef=!0,this._rawValue=e?ht:ho(ht),this._value=e?ht:bd(ht)}get value(){return jy(this),this._value}set value(ht){const e=this.__v_isShallow||Ap(ht)||zh(ht);ht=e?ht:ho(ht),yd(ht,this._rawValue)&&(this._rawValue=ht,this._value=e?ht:bd(ht),Zy(this))}}function qa(j){return ps(j)?j.value:j}const n_={get:(j,ht,e)=>qa(Reflect.get(j,ht,e)),set:(j,ht,e,B)=>{const V=j[ht];return ps(V)&&!ps(e)?(V.value=e,!0):Reflect.set(j,ht,e,B)}};function Jy(j){return vf(j)?j:new Proxy(j,n_)}function i_(j){const ht=Aa(j)?new Array(j.length):{};for(const e in j)ht[e]=o_(j,e);return ht}class a_{constructor(ht,e,B){this._object=ht,this._key=e,this._defaultValue=B,this.__v_isRef=!0}get value(){const ht=this._object[this._key];return ht===void 0?this._defaultValue:ht}set value(ht){this._object[this._key]=ht}}function o_(j,ht,e){const B=j[ht];return ps(B)?B:new a_(j,ht,e)}var Qy;class s_{constructor(ht,e,B,V){this._setter=e,this.dep=void 0,this.__v_isRef=!0,this[Qy]=!1,this._dirty=!0,this.effect=new F0(ht,()=>{this._dirty||(this._dirty=!0,Zy(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!V,this.__v_isReadonly=B}get value(){const ht=ho(this);return jy(ht),(ht._dirty||!ht._cacheable)&&(ht._dirty=!1,ht._value=ht.effect.run()),ht._value}set value(ht){this._setter(ht)}}Qy="__v_isReadonly";function l_(j,ht,e=!1){let B,V;const f=Ra(j);return f?(B=j,V=lu):(B=j.get,V=j.set),new s_(B,V,f||!V,e)}function gf(j,ht,e,B){let V;try{V=B?j(...B):j()}catch(f){jp(f,ht,e)}return V}function cu(j,ht,e,B){if(Ra(j)){const f=gf(j,ht,e,B);return f&&Ly(f)&&f.catch(l=>{jp(l,ht,e)}),f}const V=[];for(let f=0;f<j.length;f++)V.push(cu(j[f],ht,e,B));return V}function jp(j,ht,e,B=!0){const V=ht?ht.vnode:null;if(ht){let f=ht.parent;const l=ht.proxy,m=e;for(;f;){const t=f.ec;if(t){for(let a=0;a<t.length;a++)if(t[a](j,l,m)===!1)return}f=f.parent}const x=ht.appContext.config.errorHandler;if(x){gf(x,null,10,[j,l,m]);return}}c_(j,e,V,B)}function c_(j,ht,e,B=!0){console.error(j)}let xd=!1,i0=!1;const _l=[];let zu=0;const Eh=[];let $u=null,Ff=0;const qy=Promise.resolve();let V0=null;function Zp(j){const ht=V0||qy;return j?ht.then(this?j.bind(this):j):ht}function u_(j){let ht=zu+1,e=_l.length;for(;ht<e;){const B=ht+e>>>1;wd(_l[B])<j?ht=B+1:e=B}return ht}function G0(j){(!_l.length||!_l.includes(j,xd&&j.allowRecurse?zu+1:zu))&&(j.id==null?_l.push(j):_l.splice(u_(j.id),0,j),t1())}function t1(){!xd&&!i0&&(i0=!0,V0=qy.then(r1))}function f_(j){const ht=_l.indexOf(j);ht>zu&&_l.splice(ht,1)}function h_(j){Aa(j)?Eh.push(...j):(!$u||!$u.includes(j,j.allowRecurse?Ff+1:Ff))&&Eh.push(j),t1()}function Sm(j,ht=xd?zu+1:0){for(;ht<_l.length;ht++){const e=_l[ht];e&&e.pre&&(_l.splice(ht,1),ht--,e())}}function e1(j){if(Eh.length){const ht=[...new Set(Eh)];if(Eh.length=0,$u){$u.push(...ht);return}for($u=ht,$u.sort((e,B)=>wd(e)-wd(B)),Ff=0;Ff<$u.length;Ff++)$u[Ff]();$u=null,Ff=0}}const wd=j=>j.id==null?1/0:j.id,d_=(j,ht)=>{const e=wd(j)-wd(ht);if(e===0){if(j.pre&&!ht.pre)return-1;if(ht.pre&&!j.pre)return 1}return e};function r1(j){i0=!1,xd=!0,_l.sort(d_);const ht=lu;try{for(zu=0;zu<_l.length;zu++){const e=_l[zu];e&&e.active!==!1&&gf(e,null,14)}}finally{zu=0,_l.length=0,e1(),xd=!1,V0=null,(_l.length||Eh.length)&&r1()}}function p_(j,ht,...e){if(j.isUnmounted)return;const B=j.vnode.props||Lo;let V=e;const f=ht.startsWith("update:"),l=f&&ht.slice(7);if(l&&l in B){const a=`${l==="modelValue"?"model":l}Modifiers`,{number:i,trim:r}=B[a]||Lo;r&&(V=e.map(n=>n.trim())),i&&(V=e.map(Mw))}let m,x=B[m=Nv(ht)]||B[m=Nv(Ou(ht))];!x&&f&&(x=B[m=Nv(Uh(ht))]),x&&cu(x,j,6,V);const t=B[m+"Once"];if(t){if(!j.emitted)j.emitted={};else if(j.emitted[m])return;j.emitted[m]=!0,cu(t,j,6,V)}}function n1(j,ht,e=!1){const B=ht.emitsCache,V=B.get(j);if(V!==void 0)return V;const f=j.emits;let l={},m=!1;if(!Ra(j)){const x=t=>{const a=n1(t,ht,!0);a&&(m=!0,Ol(l,a))};!e&&ht.mixins.length&&ht.mixins.forEach(x),j.extends&&x(j.extends),j.mixins&&j.mixins.forEach(x)}return!f&&!m?(Wo(j)&&B.set(j,null),null):(Aa(f)?f.forEach(x=>l[x]=null):Ol(l,f),Wo(j)&&B.set(j,l),l)}function Kp(j,ht){return!j||!Vp(ht)?!1:(ht=ht.slice(2).replace(/Once$/,""),to(j,ht[0].toLowerCase()+ht.slice(1))||to(j,Uh(ht))||to(j,ht))}let kl=null,Jp=null;function Sp(j){const ht=kl;return kl=j,Jp=j&&j.type.__scopeId||null,ht}function v_(j){Jp=j}function g_(){Jp=null}const m_=j=>es;function es(j,ht=kl,e){if(!ht||j._n)return j;const B=(...V)=>{B._d&&Om(-1);const f=Sp(ht),l=j(...V);return Sp(f),B._d&&Om(1),l};return B._n=!0,B._c=!0,B._d=!0,B}function Hv(j){const{type:ht,vnode:e,proxy:B,withProxy:V,props:f,propsOptions:[l],slots:m,attrs:x,emit:t,render:a,renderCache:i,data:r,setupState:n,ctx:d,inheritAttrs:s}=j;let o,y;const g=Sp(j);try{if(e.shapeFlag&4){const v=V||B;o=Iu(a.call(v,v,i,f,n,r,d)),y=x}else{const v=ht;o=Iu(v.length>1?v(f,{attrs:x,slots:m,emit:t}):v(f,null)),y=ht.props?x:y_(x)}}catch(v){gd.length=0,jp(v,j,1),o=Ya(yf)}let b=o;if(y&&s!==!1){const v=Object.keys(y),{shapeFlag:_}=b;v.length&&_&7&&(l&&v.some(D0)&&(y=b_(y,l)),b=Rh(b,y))}return e.dirs&&(b=Rh(b),b.dirs=b.dirs?b.dirs.concat(e.dirs):e.dirs),e.transition&&(b.transition=e.transition),o=b,Sp(g),o}const y_=j=>{let ht;for(const e in j)(e==="class"||e==="style"||Vp(e))&&((ht||(ht={}))[e]=j[e]);return ht},b_=(j,ht)=>{const e={};for(const B in j)(!D0(B)||!(B.slice(9)in ht))&&(e[B]=j[B]);return e};function x_(j,ht,e){const{props:B,children:V,component:f}=j,{props:l,children:m,patchFlag:x}=ht,t=f.emitsOptions;if(ht.dirs||ht.transition)return!0;if(e&&x>=0){if(x&1024)return!0;if(x&16)return B?Mm(B,l,t):!!l;if(x&8){const a=ht.dynamicProps;for(let i=0;i<a.length;i++){const r=a[i];if(l[r]!==B[r]&&!Kp(t,r))return!0}}}else return(V||m)&&(!m||!m.$stable)?!0:B===l?!1:B?l?Mm(B,l,t):!0:!!l;return!1}function Mm(j,ht,e){const B=Object.keys(ht);if(B.length!==Object.keys(j).length)return!0;for(let V=0;V<B.length;V++){const f=B[V];if(ht[f]!==j[f]&&!Kp(e,f))return!0}return!1}function w_({vnode:j,parent:ht},e){for(;ht&&ht.subTree===j;)(j=ht.vnode).el=e,ht=ht.parent}const __=j=>j.__isSuspense;function k_(j,ht){ht&&ht.pendingBranch?Aa(j)?ht.effects.push(...j):ht.effects.push(j):h_(j)}function T_(j,ht){if(js){let e=js.provides;const B=js.parent&&js.parent.provides;B===e&&(e=js.provides=Object.create(B)),e[j]=ht}}function Uf(j,ht,e=!1){const B=js||kl;if(B){const V=B.parent==null?B.vnode.appContext&&B.vnode.appContext.provides:B.parent.provides;if(V&&j in V)return V[j];if(arguments.length>1)return e&&Ra(ht)?ht.call(B.proxy):ht}}function A_(j,ht){return Y0(j,null,ht)}const Cm={};function bp(j,ht,e){return Y0(j,ht,e)}function Y0(j,ht,{immediate:e,deep:B,flush:V,onTrack:f,onTrigger:l}=Lo){const m=js;let x,t=!1,a=!1;if(ps(j)?(x=()=>j.value,t=Ap(j)):vf(j)?(x=()=>j,B=!0):Aa(j)?(a=!0,t=j.some(y=>vf(y)||Ap(y)),x=()=>j.map(y=>{if(ps(y))return y.value;if(vf(y))return Bf(y);if(Ra(y))return gf(y,m,2)})):Ra(j)?ht?x=()=>gf(j,m,2):x=()=>{if(!(m&&m.isUnmounted))return i&&i(),cu(j,m,3,[r])}:x=lu,ht&&B){const y=x;x=()=>Bf(y())}let i,r=y=>{i=o.onStop=()=>{gf(y,m,4)}};if(kd)return r=lu,ht?e&&cu(ht,m,3,[x(),a?[]:void 0,r]):x(),lu;let n=a?[]:Cm;const d=()=>{if(!!o.active)if(ht){const y=o.run();(B||t||(a?y.some((g,b)=>yd(g,n[b])):yd(y,n)))&&(i&&i(),cu(ht,m,3,[y,n===Cm?void 0:n,r]),n=y)}else o.run()};d.allowRecurse=!!ht;let s;V==="sync"?s=d:V==="post"?s=()=>ec(d,m&&m.suspense):(d.pre=!0,m&&(d.id=m.uid),s=()=>G0(d));const o=new F0(x,s);return ht?e?d():n=o.run():V==="post"?ec(o.run.bind(o),m&&m.suspense):o.run(),()=>{o.stop(),m&&m.scope&&P0(m.scope.effects,o)}}function S_(j,ht,e){const B=this.proxy,V=Fs(j)?j.includes(".")?i1(B,j):()=>B[j]:j.bind(B,B);let f;Ra(ht)?f=ht:(f=ht.handler,e=ht);const l=js;Fh(this);const m=Y0(V,f.bind(B),e);return l?Fh(l):Hf(),m}function i1(j,ht){const e=ht.split(".");return()=>{let B=j;for(let V=0;V<e.length&&B;V++)B=B[e[V]];return B}}function Bf(j,ht){if(!Wo(j)||j.__v_skip||(ht=ht||new Set,ht.has(j)))return j;if(ht.add(j),ps(j))Bf(j.value,ht);else if(Aa(j))for(let e=0;e<j.length;e++)Bf(j[e],ht);else if(Ey(j)||Ch(j))j.forEach(e=>{Bf(e,ht)});else if(Py(j))for(const e in j)Bf(j[e],ht);return j}function Qp(j){return Ra(j)?{setup:j,name:j.name}:j}const pd=j=>!!j.type.__asyncLoader,a1=j=>j.type.__isKeepAlive;function M_(j,ht){o1(j,"a",ht)}function C_(j,ht){o1(j,"da",ht)}function o1(j,ht,e=js){const B=j.__wdc||(j.__wdc=()=>{let V=e;for(;V;){if(V.isDeactivated)return;V=V.parent}return j()});if(qp(ht,B,e),e){let V=e.parent;for(;V&&V.parent;)a1(V.parent.vnode)&&E_(B,ht,e,V),V=V.parent}}function E_(j,ht,e,B){const V=qp(ht,j,B,!0);W0(()=>{P0(B[ht],V)},e)}function qp(j,ht,e=js,B=!1){if(e){const V=e[j]||(e[j]=[]),f=ht.__weh||(ht.__weh=(...l)=>{if(e.isUnmounted)return;Hh(),Fh(e);const m=cu(ht,e,j,l);return Hf(),Vh(),m});return B?V.unshift(f):V.push(f),f}}const Zu=j=>(ht,e=js)=>(!kd||j==="sp")&&qp(j,ht,e),L_=Zu("bm"),s1=Zu("m"),D_=Zu("bu"),P_=Zu("u"),l1=Zu("bum"),W0=Zu("um"),I_=Zu("sp"),z_=Zu("rtg"),R_=Zu("rtc");function F_(j,ht=js){qp("ec",j,ht)}function O_(j,ht){const e=kl;if(e===null)return j;const B=ev(e)||e.proxy,V=j.dirs||(j.dirs=[]);for(let f=0;f<ht.length;f++){let[l,m,x,t=Lo]=ht[f];Ra(l)&&(l={mounted:l,updated:l}),l.deep&&Bf(m),V.push({dir:l,instance:B,value:m,oldValue:void 0,arg:x,modifiers:t})}return j}function Df(j,ht,e,B){const V=j.dirs,f=ht&&ht.dirs;for(let l=0;l<V.length;l++){const m=V[l];f&&(m.oldValue=f[l].value);let x=m.dir[B];x&&(Hh(),cu(x,e,8,[j.el,m,j,ht]),Vh())}}const c1="components",B_="directives";function u1(j,ht){return f1(c1,j,!0,ht)||j}const N_=Symbol();function U_(j){return f1(B_,j)}function f1(j,ht,e=!0,B=!1){const V=kl||js;if(V){const f=V.type;if(j===c1){const m=b3(f,!1);if(m&&(m===ht||m===Ou(ht)||m===Wp(Ou(ht))))return f}const l=Em(V[j]||f[j],ht)||Em(V.appContext[j],ht);return!l&&B?f:l}}function Em(j,ht){return j&&(j[ht]||j[Ou(ht)]||j[Wp(Ou(ht))])}function H_(j,ht,e,B){let V;const f=e&&e[B];if(Aa(j)||Fs(j)){V=new Array(j.length);for(let l=0,m=j.length;l<m;l++)V[l]=ht(j[l],l,void 0,f&&f[l])}else if(typeof j=="number"){V=new Array(j);for(let l=0;l<j;l++)V[l]=ht(l+1,l,void 0,f&&f[l])}else if(Wo(j))if(j[Symbol.iterator])V=Array.from(j,(l,m)=>ht(l,m,void 0,f&&f[m]));else{const l=Object.keys(j);V=new Array(l.length);for(let m=0,x=l.length;m<x;m++){const t=l[m];V[m]=ht(j[t],t,m,f&&f[m])}}else V=[];return e&&(e[B]=V),V}function Lh(j,ht,e={},B,V){if(kl.isCE||kl.parent&&pd(kl.parent)&&kl.parent.isCE)return Ya("slot",ht==="default"?null:{name:ht},B&&B());let f=j[ht];f&&f._c&&(f._d=!1),ou();const l=f&&h1(f(e)),m=Ru(zc,{key:e.key||l&&l.key||`_${ht}`},l||(B?B():[]),l&&j._===1?64:-2);return!V&&m.scopeId&&(m.slotScopeIds=[m.scopeId+"-s"]),f&&f._c&&(f._d=!0),m}function h1(j){return j.some(ht=>Ep(ht)?!(ht.type===yf||ht.type===zc&&!h1(ht.children)):!0)?j:null}const a0=j=>j?k1(j)?ev(j)||j.proxy:a0(j.parent):null,Mp=Ol(Object.create(null),{$:j=>j,$el:j=>j.vnode.el,$data:j=>j.data,$props:j=>j.props,$attrs:j=>j.attrs,$slots:j=>j.slots,$refs:j=>j.refs,$parent:j=>a0(j.parent),$root:j=>a0(j.root),$emit:j=>j.emit,$options:j=>$0(j),$forceUpdate:j=>j.f||(j.f=()=>G0(j.update)),$nextTick:j=>j.n||(j.n=Zp.bind(j.proxy)),$watch:j=>S_.bind(j)}),V_={get({_:j},ht){const{ctx:e,setupState:B,data:V,props:f,accessCache:l,type:m,appContext:x}=j;let t;if(ht[0]!=="$"){const n=l[ht];if(n!==void 0)switch(n){case 1:return B[ht];case 2:return V[ht];case 4:return e[ht];case 3:return f[ht]}else{if(B!==Lo&&to(B,ht))return l[ht]=1,B[ht];if(V!==Lo&&to(V,ht))return l[ht]=2,V[ht];if((t=j.propsOptions[0])&&to(t,ht))return l[ht]=3,f[ht];if(e!==Lo&&to(e,ht))return l[ht]=4,e[ht];o0&&(l[ht]=0)}}const a=Mp[ht];let i,r;if(a)return ht==="$attrs"&&yc(j,"get",ht),a(j);if((i=m.__cssModules)&&(i=i[ht]))return i;if(e!==Lo&&to(e,ht))return l[ht]=4,e[ht];if(r=x.config.globalProperties,to(r,ht))return r[ht]},set({_:j},ht,e){const{data:B,setupState:V,ctx:f}=j;return V!==Lo&&to(V,ht)?(V[ht]=e,!0):B!==Lo&&to(B,ht)?(B[ht]=e,!0):to(j.props,ht)||ht[0]==="$"&&ht.slice(1)in j?!1:(f[ht]=e,!0)},has({_:{data:j,setupState:ht,accessCache:e,ctx:B,appContext:V,propsOptions:f}},l){let m;return!!e[l]||j!==Lo&&to(j,l)||ht!==Lo&&to(ht,l)||(m=f[0])&&to(m,l)||to(B,l)||to(Mp,l)||to(V.config.globalProperties,l)},defineProperty(j,ht,e){return e.get!=null?j._.accessCache[ht]=0:to(e,"value")&&this.set(j,ht,e.value,null),Reflect.defineProperty(j,ht,e)}};let o0=!0;function G_(j){const ht=$0(j),e=j.proxy,B=j.ctx;o0=!1,ht.beforeCreate&&Lm(ht.beforeCreate,j,"bc");const{data:V,computed:f,methods:l,watch:m,provide:x,inject:t,created:a,beforeMount:i,mounted:r,beforeUpdate:n,updated:d,activated:s,deactivated:o,beforeDestroy:y,beforeUnmount:g,destroyed:b,unmounted:v,render:_,renderTracked:u,renderTriggered:T,errorCaptured:c,serverPrefetch:A,expose:k,inheritAttrs:p,components:w,directives:h,filters:D}=ht;if(t&&Y_(t,B,null,j.appContext.config.unwrapInjectedRef),l)for(const L in l){const R=l[L];Ra(R)&&(B[L]=R.bind(e))}if(V){const L=V.call(e,e);Wo(L)&&(j.data=Xp(L))}if(o0=!0,f)for(const L in f){const R=f[L],z=Ra(R)?R.bind(e,e):Ra(R.get)?R.get.bind(e,e):lu,P=!Ra(R)&&Ra(R.set)?R.set.bind(e):lu,I=Dp({get:z,set:P});Object.defineProperty(B,L,{enumerable:!0,configurable:!0,get:()=>I.value,set:U=>I.value=U})}if(m)for(const L in m)d1(m[L],B,e,L);if(x){const L=Ra(x)?x.call(e):x;Reflect.ownKeys(L).forEach(R=>{T_(R,L[R])})}a&&Lm(a,j,"c");function M(L,R){Aa(R)?R.forEach(z=>L(z.bind(e))):R&&L(R.bind(e))}if(M(L_,i),M(s1,r),M(D_,n),M(P_,d),M(M_,s),M(C_,o),M(F_,c),M(R_,u),M(z_,T),M(l1,g),M(W0,v),M(I_,A),Aa(k))if(k.length){const L=j.exposed||(j.exposed={});k.forEach(R=>{Object.defineProperty(L,R,{get:()=>e[R],set:z=>e[R]=z})})}else j.exposed||(j.exposed={});_&&j.render===lu&&(j.render=_),p!=null&&(j.inheritAttrs=p),w&&(j.components=w),h&&(j.directives=h)}function Y_(j,ht,e=lu,B=!1){Aa(j)&&(j=s0(j));for(const V in j){const f=j[V];let l;Wo(f)?"default"in f?l=Uf(f.from||V,f.default,!0):l=Uf(f.from||V):l=Uf(f),ps(l)&&B?Object.defineProperty(ht,V,{enumerable:!0,configurable:!0,get:()=>l.value,set:m=>l.value=m}):ht[V]=l}}function Lm(j,ht,e){cu(Aa(j)?j.map(B=>B.bind(ht.proxy)):j.bind(ht.proxy),ht,e)}function d1(j,ht,e,B){const V=B.includes(".")?i1(e,B):()=>e[B];if(Fs(j)){const f=ht[j];Ra(f)&&bp(V,f)}else if(Ra(j))bp(V,j.bind(e));else if(Wo(j))if(Aa(j))j.forEach(f=>d1(f,ht,e,B));else{const f=Ra(j.handler)?j.handler.bind(e):ht[j.handler];Ra(f)&&bp(V,f,j)}}function $0(j){const ht=j.type,{mixins:e,extends:B}=ht,{mixins:V,optionsCache:f,config:{optionMergeStrategies:l}}=j.appContext,m=f.get(ht);let x;return m?x=m:!V.length&&!e&&!B?x=ht:(x={},V.length&&V.forEach(t=>Cp(x,t,l,!0)),Cp(x,ht,l)),Wo(ht)&&f.set(ht,x),x}function Cp(j,ht,e,B=!1){const{mixins:V,extends:f}=ht;f&&Cp(j,f,e,!0),V&&V.forEach(l=>Cp(j,l,e,!0));for(const l in ht)if(!(B&&l==="expose")){const m=W_[l]||e&&e[l];j[l]=m?m(j[l],ht[l]):ht[l]}return j}const W_={data:Dm,props:Rf,emits:Rf,methods:Rf,computed:Rf,beforeCreate:Fl,created:Fl,beforeMount:Fl,mounted:Fl,beforeUpdate:Fl,updated:Fl,beforeDestroy:Fl,beforeUnmount:Fl,destroyed:Fl,unmounted:Fl,activated:Fl,deactivated:Fl,errorCaptured:Fl,serverPrefetch:Fl,components:Rf,directives:Rf,watch:X_,provide:Dm,inject:$_};function Dm(j,ht){return ht?j?function(){return Ol(Ra(j)?j.call(this,this):j,Ra(ht)?ht.call(this,this):ht)}:ht:j}function $_(j,ht){return Rf(s0(j),s0(ht))}function s0(j){if(Aa(j)){const ht={};for(let e=0;e<j.length;e++)ht[j[e]]=j[e];return ht}return j}function Fl(j,ht){return j?[...new Set([].concat(j,ht))]:ht}function Rf(j,ht){return j?Ol(Ol(Object.create(null),j),ht):ht}function X_(j,ht){if(!j)return ht;if(!ht)return j;const e=Ol(Object.create(null),j);for(const B in ht)e[B]=Fl(j[B],ht[B]);return e}function j_(j,ht,e,B=!1){const V={},f={};Tp(f,tv,1),j.propsDefaults=Object.create(null),p1(j,ht,V,f);for(const l in j.propsOptions[0])l in V||(V[l]=void 0);e?j.props=B?V:Wy(V):j.type.props?j.props=V:j.props=f,j.attrs=f}function Z_(j,ht,e,B){const{props:V,attrs:f,vnode:{patchFlag:l}}=j,m=ho(V),[x]=j.propsOptions;let t=!1;if((B||l>0)&&!(l&16)){if(l&8){const a=j.vnode.dynamicProps;for(let i=0;i<a.length;i++){let r=a[i];if(Kp(j.emitsOptions,r))continue;const n=ht[r];if(x)if(to(f,r))n!==f[r]&&(f[r]=n,t=!0);else{const d=Ou(r);V[d]=l0(x,m,d,n,j,!1)}else n!==f[r]&&(f[r]=n,t=!0)}}}else{p1(j,ht,V,f)&&(t=!0);let a;for(const i in m)(!ht||!to(ht,i)&&((a=Uh(i))===i||!to(ht,a)))&&(x?e&&(e[i]!==void 0||e[a]!==void 0)&&(V[i]=l0(x,m,i,void 0,j,!0)):delete V[i]);if(f!==m)for(const i in f)(!ht||!to(ht,i)&&!0)&&(delete f[i],t=!0)}t&&ju(j,"set","$attrs")}function p1(j,ht,e,B){const[V,f]=j.propsOptions;let l=!1,m;if(ht)for(let x in ht){if(yp(x))continue;const t=ht[x];let a;V&&to(V,a=Ou(x))?!f||!f.includes(a)?e[a]=t:(m||(m={}))[a]=t:Kp(j.emitsOptions,x)||(!(x in B)||t!==B[x])&&(B[x]=t,l=!0)}if(f){const x=ho(e),t=m||Lo;for(let a=0;a<f.length;a++){const i=f[a];e[i]=l0(V,x,i,t[i],j,!to(t,i))}}return l}function l0(j,ht,e,B,V,f){const l=j[e];if(l!=null){const m=to(l,"default");if(m&&B===void 0){const x=l.default;if(l.type!==Function&&Ra(x)){const{propsDefaults:t}=V;e in t?B=t[e]:(Fh(V),B=t[e]=x.call(null,ht),Hf())}else B=x}l[0]&&(f&&!m?B=!1:l[1]&&(B===""||B===Uh(e))&&(B=!0))}return B}function v1(j,ht,e=!1){const B=ht.propsCache,V=B.get(j);if(V)return V;const f=j.props,l={},m=[];let x=!1;if(!Ra(j)){const a=i=>{x=!0;const[r,n]=v1(i,ht,!0);Ol(l,r),n&&m.push(...n)};!e&&ht.mixins.length&&ht.mixins.forEach(a),j.extends&&a(j.extends),j.mixins&&j.mixins.forEach(a)}if(!f&&!x)return Wo(j)&&B.set(j,Mh),Mh;if(Aa(f))for(let a=0;a<f.length;a++){const i=Ou(f[a]);Pm(i)&&(l[i]=Lo)}else if(f)for(const a in f){const i=Ou(a);if(Pm(i)){const r=f[a],n=l[i]=Aa(r)||Ra(r)?{type:r}:r;if(n){const d=Rm(Boolean,n.type),s=Rm(String,n.type);n[0]=d>-1,n[1]=s<0||d<s,(d>-1||to(n,"default"))&&m.push(i)}}}const t=[l,m];return Wo(j)&&B.set(j,t),t}function Pm(j){return j[0]!=="$"}function Im(j){const ht=j&&j.toString().match(/^\s*function (\w+)/);return ht?ht[1]:j===null?"null":""}function zm(j,ht){return Im(j)===Im(ht)}function Rm(j,ht){return Aa(ht)?ht.findIndex(e=>zm(e,j)):Ra(ht)&&zm(ht,j)?0:-1}const g1=j=>j[0]==="_"||j==="$stable",X0=j=>Aa(j)?j.map(Iu):[Iu(j)],K_=(j,ht,e)=>{if(ht._n)return ht;const B=es((...V)=>X0(ht(...V)),e);return B._c=!1,B},m1=(j,ht,e)=>{const B=j._ctx;for(const V in j){if(g1(V))continue;const f=j[V];if(Ra(f))ht[V]=K_(V,f,B);else if(f!=null){const l=X0(f);ht[V]=()=>l}}},y1=(j,ht)=>{const e=X0(ht);j.slots.default=()=>e},J_=(j,ht)=>{if(j.vnode.shapeFlag&32){const e=ht._;e?(j.slots=ho(ht),Tp(ht,"_",e)):m1(ht,j.slots={})}else j.slots={},ht&&y1(j,ht);Tp(j.slots,tv,1)},Q_=(j,ht,e)=>{const{vnode:B,slots:V}=j;let f=!0,l=Lo;if(B.shapeFlag&32){const m=ht._;m?e&&m===1?f=!1:(Ol(V,ht),!e&&m===1&&delete V._):(f=!ht.$stable,m1(ht,V)),l=ht}else ht&&(y1(j,ht),l={default:1});if(f)for(const m in V)!g1(m)&&!(m in l)&&delete V[m]};function b1(){return{app:null,config:{isNativeTag:ww,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let q_=0;function t3(j,ht){return function(B,V=null){Ra(B)||(B=Object.assign({},B)),V!=null&&!Wo(V)&&(V=null);const f=b1(),l=new Set;let m=!1;const x=f.app={_uid:q_++,_component:B,_props:V,_container:null,_context:f,_instance:null,version:w3,get config(){return f.config},set config(t){},use(t,...a){return l.has(t)||(t&&Ra(t.install)?(l.add(t),t.install(x,...a)):Ra(t)&&(l.add(t),t(x,...a))),x},mixin(t){return f.mixins.includes(t)||f.mixins.push(t),x},component(t,a){return a?(f.components[t]=a,x):f.components[t]},directive(t,a){return a?(f.directives[t]=a,x):f.directives[t]},mount(t,a,i){if(!m){const r=Ya(B,V);return r.appContext=f,a&&ht?ht(r,t):j(r,t,i),m=!0,x._container=t,t.__vue_app__=x,ev(r.component)||r.component.proxy}},unmount(){m&&(j(null,x._container),delete x._container.__vue_app__)},provide(t,a){return f.provides[t]=a,x}};return x}}function c0(j,ht,e,B,V=!1){if(Aa(j)){j.forEach((r,n)=>c0(r,ht&&(Aa(ht)?ht[n]:ht),e,B,V));return}if(pd(B)&&!V)return;const f=B.shapeFlag&4?ev(B.component)||B.component.proxy:B.el,l=V?null:f,{i:m,r:x}=j,t=ht&&ht.r,a=m.refs===Lo?m.refs={}:m.refs,i=m.setupState;if(t!=null&&t!==x&&(Fs(t)?(a[t]=null,to(i,t)&&(i[t]=null)):ps(t)&&(t.value=null)),Ra(x))gf(x,m,12,[l,a]);else{const r=Fs(x),n=ps(x);if(r||n){const d=()=>{if(j.f){const s=r?a[x]:x.value;V?Aa(s)&&P0(s,f):Aa(s)?s.includes(f)||s.push(f):r?(a[x]=[f],to(i,x)&&(i[x]=a[x])):(x.value=[f],j.k&&(a[j.k]=x.value))}else r?(a[x]=l,to(i,x)&&(i[x]=l)):n&&(x.value=l,j.k&&(a[j.k]=l))};l?(d.id=-1,ec(d,e)):d()}}}const ec=k_;function e3(j){return r3(j)}function r3(j,ht){const e=Cw();e.__VUE__=!0;const{insert:B,remove:V,patchProp:f,createElement:l,createText:m,createComment:x,setText:t,setElementText:a,parentNode:i,nextSibling:r,setScopeId:n=lu,cloneNode:d,insertStaticContent:s}=j,o=(F,H,et,q=null,W=null,K=null,nt=!1,it=null,ot=!!H.dynamicChildren)=>{if(F===H)return;F&&!hd(F,H)&&(q=X(F),O(F,W,K,!0),F=null),H.patchFlag===-2&&(ot=!1,H.dynamicChildren=null);const{type:ct,ref:bt,shapeFlag:ut}=H;switch(ct){case Z0:y(F,H,et,q);break;case yf:g(F,H,et,q);break;case Vv:F==null&&b(H,et,q,nt);break;case zc:h(F,H,et,q,W,K,nt,it,ot);break;default:ut&1?u(F,H,et,q,W,K,nt,it,ot):ut&6?D(F,H,et,q,W,K,nt,it,ot):(ut&64||ut&128)&&ct.process(F,H,et,q,W,K,nt,it,ot,st)}bt!=null&&W&&c0(bt,F&&F.ref,K,H||F,!H)},y=(F,H,et,q)=>{if(F==null)B(H.el=m(H.children),et,q);else{const W=H.el=F.el;H.children!==F.children&&t(W,H.children)}},g=(F,H,et,q)=>{F==null?B(H.el=x(H.children||""),et,q):H.el=F.el},b=(F,H,et,q)=>{[F.el,F.anchor]=s(F.children,H,et,q,F.el,F.anchor)},v=({el:F,anchor:H},et,q)=>{let W;for(;F&&F!==H;)W=r(F),B(F,et,q),F=W;B(H,et,q)},_=({el:F,anchor:H})=>{let et;for(;F&&F!==H;)et=r(F),V(F),F=et;V(H)},u=(F,H,et,q,W,K,nt,it,ot)=>{nt=nt||H.type==="svg",F==null?T(H,et,q,W,K,nt,it,ot):k(F,H,W,K,nt,it,ot)},T=(F,H,et,q,W,K,nt,it)=>{let ot,ct;const{type:bt,props:ut,shapeFlag:pt,transition:yt,patchFlag:Tt,dirs:kt}=F;if(F.el&&d!==void 0&&Tt===-1)ot=F.el=d(F.el);else{if(ot=F.el=l(F.type,K,ut&&ut.is,ut),pt&8?a(ot,F.children):pt&16&&A(F.children,ot,null,q,W,K&&bt!=="foreignObject",nt,it),kt&&Df(F,null,q,"created"),ut){for(const Rt in ut)Rt!=="value"&&!yp(Rt)&&f(ot,Rt,null,ut[Rt],K,F.children,q,W,Z);"value"in ut&&f(ot,"value",null,ut.value),(ct=ut.onVnodeBeforeMount)&&Lu(ct,q,F)}c(ot,F,F.scopeId,nt,q)}kt&&Df(F,null,q,"beforeMount");const zt=(!W||W&&!W.pendingBranch)&&yt&&!yt.persisted;zt&&yt.beforeEnter(ot),B(ot,H,et),((ct=ut&&ut.onVnodeMounted)||zt||kt)&&ec(()=>{ct&&Lu(ct,q,F),zt&&yt.enter(ot),kt&&Df(F,null,q,"mounted")},W)},c=(F,H,et,q,W)=>{if(et&&n(F,et),q)for(let K=0;K<q.length;K++)n(F,q[K]);if(W){let K=W.subTree;if(H===K){const nt=W.vnode;c(F,nt,nt.scopeId,nt.slotScopeIds,W.parent)}}},A=(F,H,et,q,W,K,nt,it,ot=0)=>{for(let ct=ot;ct<F.length;ct++){const bt=F[ct]=it?df(F[ct]):Iu(F[ct]);o(null,bt,H,et,q,W,K,nt,it)}},k=(F,H,et,q,W,K,nt)=>{const it=H.el=F.el;let{patchFlag:ot,dynamicChildren:ct,dirs:bt}=H;ot|=F.patchFlag&16;const ut=F.props||Lo,pt=H.props||Lo;let yt;et&&Pf(et,!1),(yt=pt.onVnodeBeforeUpdate)&&Lu(yt,et,H,F),bt&&Df(H,F,et,"beforeUpdate"),et&&Pf(et,!0);const Tt=W&&H.type!=="foreignObject";if(ct?p(F.dynamicChildren,ct,it,et,q,Tt,K):nt||z(F,H,it,null,et,q,Tt,K,!1),ot>0){if(ot&16)w(it,H,ut,pt,et,q,W);else if(ot&2&&ut.class!==pt.class&&f(it,"class",null,pt.class,W),ot&4&&f(it,"style",ut.style,pt.style,W),ot&8){const kt=H.dynamicProps;for(let zt=0;zt<kt.length;zt++){const Rt=kt[zt],Gt=ut[Rt],wt=pt[Rt];(wt!==Gt||Rt==="value")&&f(it,Rt,Gt,wt,W,F.children,et,q,Z)}}ot&1&&F.children!==H.children&&a(it,H.children)}else!nt&&ct==null&&w(it,H,ut,pt,et,q,W);((yt=pt.onVnodeUpdated)||bt)&&ec(()=>{yt&&Lu(yt,et,H,F),bt&&Df(H,F,et,"updated")},q)},p=(F,H,et,q,W,K,nt)=>{for(let it=0;it<H.length;it++){const ot=F[it],ct=H[it],bt=ot.el&&(ot.type===zc||!hd(ot,ct)||ot.shapeFlag&70)?i(ot.el):et;o(ot,ct,bt,null,q,W,K,nt,!0)}},w=(F,H,et,q,W,K,nt)=>{if(et!==q){for(const it in q){if(yp(it))continue;const ot=q[it],ct=et[it];ot!==ct&&it!=="value"&&f(F,it,ct,ot,nt,H.children,W,K,Z)}if(et!==Lo)for(const it in et)!yp(it)&&!(it in q)&&f(F,it,et[it],null,nt,H.children,W,K,Z);"value"in q&&f(F,"value",et.value,q.value)}},h=(F,H,et,q,W,K,nt,it,ot)=>{const ct=H.el=F?F.el:m(""),bt=H.anchor=F?F.anchor:m("");let{patchFlag:ut,dynamicChildren:pt,slotScopeIds:yt}=H;yt&&(it=it?it.concat(yt):yt),F==null?(B(ct,et,q),B(bt,et,q),A(H.children,et,bt,W,K,nt,it,ot)):ut>0&&ut&64&&pt&&F.dynamicChildren?(p(F.dynamicChildren,pt,et,W,K,nt,it),(H.key!=null||W&&H===W.subTree)&&j0(F,H,!0)):z(F,H,et,bt,W,K,nt,it,ot)},D=(F,H,et,q,W,K,nt,it,ot)=>{H.slotScopeIds=it,F==null?H.shapeFlag&512?W.ctx.activate(H,et,q,nt,ot):S(H,et,q,W,K,nt,ot):M(F,H,ot)},S=(F,H,et,q,W,K,nt)=>{const it=F.component=p3(F,q,W);if(a1(F)&&(it.ctx.renderer=st),v3(it),it.asyncDep){if(W&&W.registerDep(it,L),!F.el){const ot=it.subTree=Ya(yf);g(null,ot,H,et)}return}L(it,F,H,et,W,K,nt)},M=(F,H,et)=>{const q=H.component=F.component;if(x_(F,H,et))if(q.asyncDep&&!q.asyncResolved){R(q,H,et);return}else q.next=H,f_(q.update),q.update();else H.el=F.el,q.vnode=H},L=(F,H,et,q,W,K,nt)=>{const it=()=>{if(F.isMounted){let{next:bt,bu:ut,u:pt,parent:yt,vnode:Tt}=F,kt=bt,zt;Pf(F,!1),bt?(bt.el=Tt.el,R(F,bt,nt)):bt=Tt,ut&&Uv(ut),(zt=bt.props&&bt.props.onVnodeBeforeUpdate)&&Lu(zt,yt,bt,Tt),Pf(F,!0);const Rt=Hv(F),Gt=F.subTree;F.subTree=Rt,o(Gt,Rt,i(Gt.el),X(Gt),F,W,K),bt.el=Rt.el,kt===null&&w_(F,Rt.el),pt&&ec(pt,W),(zt=bt.props&&bt.props.onVnodeUpdated)&&ec(()=>Lu(zt,yt,bt,Tt),W)}else{let bt;const{el:ut,props:pt}=H,{bm:yt,m:Tt,parent:kt}=F,zt=pd(H);if(Pf(F,!1),yt&&Uv(yt),!zt&&(bt=pt&&pt.onVnodeBeforeMount)&&Lu(bt,kt,H),Pf(F,!0),ut&&lt){const Rt=()=>{F.subTree=Hv(F),lt(ut,F.subTree,F,W,null)};zt?H.type.__asyncLoader().then(()=>!F.isUnmounted&&Rt()):Rt()}else{const Rt=F.subTree=Hv(F);o(null,Rt,et,q,F,W,K),H.el=Rt.el}if(Tt&&ec(Tt,W),!zt&&(bt=pt&&pt.onVnodeMounted)){const Rt=H;ec(()=>Lu(bt,kt,Rt),W)}(H.shapeFlag&256||kt&&pd(kt.vnode)&&kt.vnode.shapeFlag&256)&&F.a&&ec(F.a,W),F.isMounted=!0,H=et=q=null}},ot=F.effect=new F0(it,()=>G0(ct),F.scope),ct=F.update=()=>ot.run();ct.id=F.uid,Pf(F,!0),ct()},R=(F,H,et)=>{H.component=F;const q=F.vnode.props;F.vnode=H,F.next=null,Z_(F,H.props,q,et),Q_(F,H.children,et),Hh(),Sm(),Vh()},z=(F,H,et,q,W,K,nt,it,ot=!1)=>{const ct=F&&F.children,bt=F?F.shapeFlag:0,ut=H.children,{patchFlag:pt,shapeFlag:yt}=H;if(pt>0){if(pt&128){I(ct,ut,et,q,W,K,nt,it,ot);return}else if(pt&256){P(ct,ut,et,q,W,K,nt,it,ot);return}}yt&8?(bt&16&&Z(ct,W,K),ut!==ct&&a(et,ut)):bt&16?yt&16?I(ct,ut,et,q,W,K,nt,it,ot):Z(ct,W,K,!0):(bt&8&&a(et,""),yt&16&&A(ut,et,q,W,K,nt,it,ot))},P=(F,H,et,q,W,K,nt,it,ot)=>{F=F||Mh,H=H||Mh;const ct=F.length,bt=H.length,ut=Math.min(ct,bt);let pt;for(pt=0;pt<ut;pt++){const yt=H[pt]=ot?df(H[pt]):Iu(H[pt]);o(F[pt],yt,et,null,W,K,nt,it,ot)}ct>bt?Z(F,W,K,!0,!1,ut):A(H,et,q,W,K,nt,it,ot,ut)},I=(F,H,et,q,W,K,nt,it,ot)=>{let ct=0;const bt=H.length;let ut=F.length-1,pt=bt-1;for(;ct<=ut&&ct<=pt;){const yt=F[ct],Tt=H[ct]=ot?df(H[ct]):Iu(H[ct]);if(hd(yt,Tt))o(yt,Tt,et,null,W,K,nt,it,ot);else break;ct++}for(;ct<=ut&&ct<=pt;){const yt=F[ut],Tt=H[pt]=ot?df(H[pt]):Iu(H[pt]);if(hd(yt,Tt))o(yt,Tt,et,null,W,K,nt,it,ot);else break;ut--,pt--}if(ct>ut){if(ct<=pt){const yt=pt+1,Tt=yt<bt?H[yt].el:q;for(;ct<=pt;)o(null,H[ct]=ot?df(H[ct]):Iu(H[ct]),et,Tt,W,K,nt,it,ot),ct++}}else if(ct>pt)for(;ct<=ut;)O(F[ct],W,K,!0),ct++;else{const yt=ct,Tt=ct,kt=new Map;for(ct=Tt;ct<=pt;ct++){const Nt=H[ct]=ot?df(H[ct]):Iu(H[ct]);Nt.key!=null&&kt.set(Nt.key,ct)}let zt,Rt=0;const Gt=pt-Tt+1;let wt=!1,It=0;const $t=new Array(Gt);for(ct=0;ct<Gt;ct++)$t[ct]=0;for(ct=yt;ct<=ut;ct++){const Nt=F[ct];if(Rt>=Gt){O(Nt,W,K,!0);continue}let Pt;if(Nt.key!=null)Pt=kt.get(Nt.key);else for(zt=Tt;zt<=pt;zt++)if($t[zt-Tt]===0&&hd(Nt,H[zt])){Pt=zt;break}Pt===void 0?O(Nt,W,K,!0):($t[Pt-Tt]=ct+1,Pt>=It?It=Pt:wt=!0,o(Nt,H[Pt],et,null,W,K,nt,it,ot),Rt++)}const Qt=wt?n3($t):Mh;for(zt=Qt.length-1,ct=Gt-1;ct>=0;ct--){const Nt=Tt+ct,Pt=H[Nt],Yt=Nt+1<bt?H[Nt+1].el:q;$t[ct]===0?o(null,Pt,et,Yt,W,K,nt,it,ot):wt&&(zt<0||ct!==Qt[zt]?U(Pt,et,Yt,2):zt--)}}},U=(F,H,et,q,W=null)=>{const{el:K,type:nt,transition:it,children:ot,shapeFlag:ct}=F;if(ct&6){U(F.component.subTree,H,et,q);return}if(ct&128){F.suspense.move(H,et,q);return}if(ct&64){nt.move(F,H,et,st);return}if(nt===zc){B(K,H,et);for(let ut=0;ut<ot.length;ut++)U(ot[ut],H,et,q);B(F.anchor,H,et);return}if(nt===Vv){v(F,H,et);return}if(q!==2&&ct&1&&it)if(q===0)it.beforeEnter(K),B(K,H,et),ec(()=>it.enter(K),W);else{const{leave:ut,delayLeave:pt,afterLeave:yt}=it,Tt=()=>B(K,H,et),kt=()=>{ut(K,()=>{Tt(),yt&&yt()})};pt?pt(K,Tt,kt):kt()}else B(K,H,et)},O=(F,H,et,q=!1,W=!1)=>{const{type:K,props:nt,ref:it,children:ot,dynamicChildren:ct,shapeFlag:bt,patchFlag:ut,dirs:pt}=F;if(it!=null&&c0(it,null,et,F,!0),bt&256){H.ctx.deactivate(F);return}const yt=bt&1&&pt,Tt=!pd(F);let kt;if(Tt&&(kt=nt&&nt.onVnodeBeforeUnmount)&&Lu(kt,H,F),bt&6)tt(F.component,et,q);else{if(bt&128){F.suspense.unmount(et,q);return}yt&&Df(F,null,H,"beforeUnmount"),bt&64?F.type.remove(F,H,et,W,st,q):ct&&(K!==zc||ut>0&&ut&64)?Z(ct,H,et,!1,!0):(K===zc&&ut&384||!W&&bt&16)&&Z(ot,H,et),q&&G(F)}(Tt&&(kt=nt&&nt.onVnodeUnmounted)||yt)&&ec(()=>{kt&&Lu(kt,H,F),yt&&Df(F,null,H,"unmounted")},et)},G=F=>{const{type:H,el:et,anchor:q,transition:W}=F;if(H===zc){$(et,q);return}if(H===Vv){_(F);return}const K=()=>{V(et),W&&!W.persisted&&W.afterLeave&&W.afterLeave()};if(F.shapeFlag&1&&W&&!W.persisted){const{leave:nt,delayLeave:it}=W,ot=()=>nt(et,K);it?it(F.el,K,ot):ot()}else K()},$=(F,H)=>{let et;for(;F!==H;)et=r(F),V(F),F=et;V(H)},tt=(F,H,et)=>{const{bum:q,scope:W,update:K,subTree:nt,um:it}=F;q&&Uv(q),W.stop(),K&&(K.active=!1,O(nt,F,H,et)),it&&ec(it,H),ec(()=>{F.isUnmounted=!0},H),H&&H.pendingBranch&&!H.isUnmounted&&F.asyncDep&&!F.asyncResolved&&F.suspenseId===H.pendingId&&(H.deps--,H.deps===0&&H.resolve())},Z=(F,H,et,q=!1,W=!1,K=0)=>{for(let nt=K;nt<F.length;nt++)O(F[nt],H,et,q,W)},X=F=>F.shapeFlag&6?X(F.component.subTree):F.shapeFlag&128?F.suspense.next():r(F.anchor||F.el),J=(F,H,et)=>{F==null?H._vnode&&O(H._vnode,null,null,!0):o(H._vnode||null,F,H,null,null,null,et),Sm(),e1(),H._vnode=F},st={p:o,um:O,m:U,r:G,mt:S,mc:A,pc:z,pbc:p,n:X,o:j};let at,lt;return ht&&([at,lt]=ht(st)),{render:J,hydrate:at,createApp:t3(J,at)}}function Pf({effect:j,update:ht},e){j.allowRecurse=ht.allowRecurse=e}function j0(j,ht,e=!1){const B=j.children,V=ht.children;if(Aa(B)&&Aa(V))for(let f=0;f<B.length;f++){const l=B[f];let m=V[f];m.shapeFlag&1&&!m.dynamicChildren&&((m.patchFlag<=0||m.patchFlag===32)&&(m=V[f]=df(V[f]),m.el=l.el),e||j0(l,m))}}function n3(j){const ht=j.slice(),e=[0];let B,V,f,l,m;const x=j.length;for(B=0;B<x;B++){const t=j[B];if(t!==0){if(V=e[e.length-1],j[V]<t){ht[B]=V,e.push(B);continue}for(f=0,l=e.length-1;f<l;)m=f+l>>1,j[e[m]]<t?f=m+1:l=m;t<j[e[f]]&&(f>0&&(ht[B]=e[f-1]),e[f]=B)}}for(f=e.length,l=e[f-1];f-- >0;)e[f]=l,l=ht[l];return e}const i3=j=>j.__isTeleport,vd=j=>j&&(j.disabled||j.disabled===""),Fm=j=>typeof SVGElement<"u"&&j instanceof SVGElement,u0=(j,ht)=>{const e=j&&j.to;return Fs(e)?ht?ht(e):null:e},a3={__isTeleport:!0,process(j,ht,e,B,V,f,l,m,x,t){const{mc:a,pc:i,pbc:r,o:{insert:n,querySelector:d,createText:s,createComment:o}}=t,y=vd(ht.props);let{shapeFlag:g,children:b,dynamicChildren:v}=ht;if(j==null){const _=ht.el=s(""),u=ht.anchor=s("");n(_,e,B),n(u,e,B);const T=ht.target=u0(ht.props,d),c=ht.targetAnchor=s("");T&&(n(c,T),l=l||Fm(T));const A=(k,p)=>{g&16&&a(b,k,p,V,f,l,m,x)};y?A(e,u):T&&A(T,c)}else{ht.el=j.el;const _=ht.anchor=j.anchor,u=ht.target=j.target,T=ht.targetAnchor=j.targetAnchor,c=vd(j.props),A=c?e:u,k=c?_:T;if(l=l||Fm(u),v?(r(j.dynamicChildren,v,A,V,f,l,m),j0(j,ht,!0)):x||i(j,ht,A,k,V,f,l,m,!1),y)c||up(ht,e,_,t,1);else if((ht.props&&ht.props.to)!==(j.props&&j.props.to)){const p=ht.target=u0(ht.props,d);p&&up(ht,p,null,t,0)}else c&&up(ht,u,T,t,1)}},remove(j,ht,e,B,{um:V,o:{remove:f}},l){const{shapeFlag:m,children:x,anchor:t,targetAnchor:a,target:i,props:r}=j;if(i&&f(a),(l||!vd(r))&&(f(t),m&16))for(let n=0;n<x.length;n++){const d=x[n];V(d,ht,e,!0,!!d.dynamicChildren)}},move:up,hydrate:o3};function up(j,ht,e,{o:{insert:B},m:V},f=2){f===0&&B(j.targetAnchor,ht,e);const{el:l,anchor:m,shapeFlag:x,children:t,props:a}=j,i=f===2;if(i&&B(l,ht,e),(!i||vd(a))&&x&16)for(let r=0;r<t.length;r++)V(t[r],ht,e,2);i&&B(m,ht,e)}function o3(j,ht,e,B,V,f,{o:{nextSibling:l,parentNode:m,querySelector:x}},t){const a=ht.target=u0(ht.props,x);if(a){const i=a._lpa||a.firstChild;if(ht.shapeFlag&16)if(vd(ht.props))ht.anchor=t(l(j),ht,m(j),e,B,V,f),ht.targetAnchor=i;else{ht.anchor=l(j);let r=i;for(;r;)if(r=l(r),r&&r.nodeType===8&&r.data==="teleport anchor"){ht.targetAnchor=r,a._lpa=ht.targetAnchor&&l(ht.targetAnchor);break}t(i,ht,a,e,B,V,f)}}return ht.anchor&&l(ht.anchor)}const s3=a3,zc=Symbol(void 0),Z0=Symbol(void 0),yf=Symbol(void 0),Vv=Symbol(void 0),gd=[];let su=null;function ou(j=!1){gd.push(su=j?null:[])}function l3(){gd.pop(),su=gd[gd.length-1]||null}let _d=1;function Om(j){_d+=j}function x1(j){return j.dynamicChildren=_d>0?su||Mh:null,l3(),_d>0&&su&&su.push(j),j}function c3(j,ht,e,B,V,f){return x1(Lp(j,ht,e,B,V,f,!0))}function Ru(j,ht,e,B,V){return x1(Ya(j,ht,e,B,V,!0))}function Ep(j){return j?j.__v_isVNode===!0:!1}function hd(j,ht){return j.type===ht.type&&j.key===ht.key}const tv="__vInternal",w1=({key:j})=>j!=null?j:null,xp=({ref:j,ref_key:ht,ref_for:e})=>j!=null?Fs(j)||ps(j)||Ra(j)?{i:kl,r:j,k:ht,f:!!e}:j:null;function Lp(j,ht=null,e=null,B=0,V=null,f=j===zc?0:1,l=!1,m=!1){const x={__v_isVNode:!0,__v_skip:!0,type:j,props:ht,key:ht&&w1(ht),ref:ht&&xp(ht),scopeId:Jp,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:f,patchFlag:B,dynamicProps:V,dynamicChildren:null,appContext:null};return m?(J0(x,e),f&128&&j.normalize(x)):e&&(x.shapeFlag|=Fs(e)?8:16),_d>0&&!l&&su&&(x.patchFlag>0||f&6)&&x.patchFlag!==32&&su.push(x),x}const Ya=u3;function u3(j,ht=null,e=null,B=0,V=null,f=!1){if((!j||j===N_)&&(j=yf),Ep(j)){const m=Rh(j,ht,!0);return e&&J0(m,e),_d>0&&!f&&su&&(m.shapeFlag&6?su[su.indexOf(j)]=m:su.push(m)),m.patchFlag|=-2,m}if(x3(j)&&(j=j.__vccOpts),ht){ht=f3(ht);let{class:m,style:x}=ht;m&&!Fs(m)&&(ht.class=L0(m)),Wo(x)&&(Xy(x)&&!Aa(x)&&(x=Ol({},x)),ht.style=E0(x))}const l=Fs(j)?1:__(j)?128:i3(j)?64:Wo(j)?4:Ra(j)?2:0;return Lp(j,ht,e,B,V,l,f,!0)}function f3(j){return j?Xy(j)||tv in j?Ol({},j):j:null}function Rh(j,ht,e=!1){const{props:B,ref:V,patchFlag:f,children:l}=j,m=ht?_1(B||{},ht):B;return{__v_isVNode:!0,__v_skip:!0,type:j.type,props:m,key:m&&w1(m),ref:ht&&ht.ref?e&&V?Aa(V)?V.concat(xp(ht)):[V,xp(ht)]:xp(ht):V,scopeId:j.scopeId,slotScopeIds:j.slotScopeIds,children:l,target:j.target,targetAnchor:j.targetAnchor,staticCount:j.staticCount,shapeFlag:j.shapeFlag,patchFlag:ht&&j.type!==zc?f===-1?16:f|16:f,dynamicProps:j.dynamicProps,dynamicChildren:j.dynamicChildren,appContext:j.appContext,dirs:j.dirs,transition:j.transition,component:j.component,suspense:j.suspense,ssContent:j.ssContent&&Rh(j.ssContent),ssFallback:j.ssFallback&&Rh(j.ssFallback),el:j.el,anchor:j.anchor}}function K0(j=" ",ht=0){return Ya(Z0,null,j,ht)}function Bm(j="",ht=!1){return ht?(ou(),Ru(yf,null,j)):Ya(yf,null,j)}function Iu(j){return j==null||typeof j=="boolean"?Ya(yf):Aa(j)?Ya(zc,null,j.slice()):typeof j=="object"?df(j):Ya(Z0,null,String(j))}function df(j){return j.el===null||j.memo?j:Rh(j)}function J0(j,ht){let e=0;const{shapeFlag:B}=j;if(ht==null)ht=null;else if(Aa(ht))e=16;else if(typeof ht=="object")if(B&65){const V=ht.default;V&&(V._c&&(V._d=!1),J0(j,V()),V._c&&(V._d=!0));return}else{e=32;const V=ht._;!V&&!(tv in ht)?ht._ctx=kl:V===3&&kl&&(kl.slots._===1?ht._=1:(ht._=2,j.patchFlag|=1024))}else Ra(ht)?(ht={default:ht,_ctx:kl},e=32):(ht=String(ht),B&64?(e=16,ht=[K0(ht)]):e=8);j.children=ht,j.shapeFlag|=e}function _1(...j){const ht={};for(let e=0;e<j.length;e++){const B=j[e];for(const V in B)if(V==="class")ht.class!==B.class&&(ht.class=L0([ht.class,B.class]));else if(V==="style")ht.style=E0([ht.style,B.style]);else if(Vp(V)){const f=ht[V],l=B[V];l&&f!==l&&!(Aa(f)&&f.includes(l))&&(ht[V]=f?[].concat(f,l):l)}else V!==""&&(ht[V]=B[V])}return ht}function Lu(j,ht,e,B=null){cu(j,ht,7,[e,B])}const h3=b1();let d3=0;function p3(j,ht,e){const B=j.type,V=(ht?ht.appContext:j.appContext)||h3,f={uid:d3++,vnode:j,type:B,parent:ht,appContext:V,root:null,next:null,subTree:null,effect:null,update:null,scope:new Iy(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:ht?ht.provides:Object.create(V.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:v1(B,V),emitsOptions:n1(B,V),emit:null,emitted:null,propsDefaults:Lo,inheritAttrs:B.inheritAttrs,ctx:Lo,data:Lo,props:Lo,attrs:Lo,slots:Lo,refs:Lo,setupState:Lo,setupContext:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return f.ctx={_:f},f.root=ht?ht.root:f,f.emit=p_.bind(null,f),j.ce&&j.ce(f),f}let js=null;const Cd=()=>js||kl,Fh=j=>{js=j,j.scope.on()},Hf=()=>{js&&js.scope.off(),js=null};function k1(j){return j.vnode.shapeFlag&4}let kd=!1;function v3(j,ht=!1){kd=ht;const{props:e,children:B}=j.vnode,V=k1(j);j_(j,e,V,ht),J_(j,B);const f=V?g3(j,ht):void 0;return kd=!1,f}function g3(j,ht){const e=j.type;j.accessCache=Object.create(null),j.proxy=Vf(new Proxy(j.ctx,V_));const{setup:B}=e;if(B){const V=j.setupContext=B.length>1?y3(j):null;Fh(j),Hh();const f=gf(B,j,0,[j.props,V]);if(Vh(),Hf(),Ly(f)){if(f.then(Hf,Hf),ht)return f.then(l=>{Nm(j,l,ht)}).catch(l=>{jp(l,j,0)});j.asyncDep=f}else Nm(j,f,ht)}else T1(j,ht)}function Nm(j,ht,e){Ra(ht)?j.type.__ssrInlineRender?j.ssrRender=ht:j.render=ht:Wo(ht)&&(j.setupState=Jy(ht)),T1(j,e)}let Um;function T1(j,ht,e){const B=j.type;if(!j.render){if(!ht&&Um&&!B.render){const V=B.template||$0(j).template;if(V){const{isCustomElement:f,compilerOptions:l}=j.appContext.config,{delimiters:m,compilerOptions:x}=B,t=Ol(Ol({isCustomElement:f,delimiters:m},l),x);B.render=Um(V,t)}}j.render=B.render||lu}Fh(j),Hh(),G_(j),Vh(),Hf()}function m3(j){return new Proxy(j.attrs,{get(ht,e){return yc(j,"get","$attrs"),ht[e]}})}function y3(j){const ht=B=>{j.exposed=B||{}};let e;return{get attrs(){return e||(e=m3(j))},slots:j.slots,emit:j.emit,expose:ht}}function ev(j){if(j.exposed)return j.exposeProxy||(j.exposeProxy=new Proxy(Jy(Vf(j.exposed)),{get(ht,e){if(e in ht)return ht[e];if(e in Mp)return Mp[e](j)}}))}function b3(j,ht=!0){return Ra(j)?j.displayName||j.name:j.name||ht&&j.__name}function x3(j){return Ra(j)&&"__vccOpts"in j}const Dp=(j,ht)=>l_(j,ht,kd);function Oh(j,ht,e){const B=arguments.length;return B===2?Wo(ht)&&!Aa(ht)?Ep(ht)?Ya(j,null,[ht]):Ya(j,ht):Ya(j,null,ht):(B>3?e=Array.prototype.slice.call(arguments,2):B===3&&Ep(e)&&(e=[e]),Ya(j,ht,e))}const w3="3.2.39",_3="http://www.w3.org/2000/svg",Of=typeof document<"u"?document:null,Hm=Of&&Of.createElement("template"),k3={insert:(j,ht,e)=>{ht.insertBefore(j,e||null)},remove:j=>{const ht=j.parentNode;ht&&ht.removeChild(j)},createElement:(j,ht,e,B)=>{const V=ht?Of.createElementNS(_3,j):Of.createElement(j,e?{is:e}:void 0);return j==="select"&&B&&B.multiple!=null&&V.setAttribute("multiple",B.multiple),V},createText:j=>Of.createTextNode(j),createComment:j=>Of.createComment(j),setText:(j,ht)=>{j.nodeValue=ht},setElementText:(j,ht)=>{j.textContent=ht},parentNode:j=>j.parentNode,nextSibling:j=>j.nextSibling,querySelector:j=>Of.querySelector(j),setScopeId(j,ht){j.setAttribute(ht,"")},cloneNode(j){const ht=j.cloneNode(!0);return"_value"in j&&(ht._value=j._value),ht},insertStaticContent(j,ht,e,B,V,f){const l=e?e.previousSibling:ht.lastChild;if(V&&(V===f||V.nextSibling))for(;ht.insertBefore(V.cloneNode(!0),e),!(V===f||!(V=V.nextSibling)););else{Hm.innerHTML=B?`<svg>${j}</svg>`:j;const m=Hm.content;if(B){const x=m.firstChild;for(;x.firstChild;)m.appendChild(x.firstChild);m.removeChild(x)}ht.insertBefore(m,e)}return[l?l.nextSibling:ht.firstChild,e?e.previousSibling:ht.lastChild]}};function T3(j,ht,e){const B=j._vtc;B&&(ht=(ht?[ht,...B]:[...B]).join(" ")),ht==null?j.removeAttribute("class"):e?j.setAttribute("class",ht):j.className=ht}function A3(j,ht,e){const B=j.style,V=Fs(e);if(e&&!V){for(const f in e)f0(B,f,e[f]);if(ht&&!Fs(ht))for(const f in ht)e[f]==null&&f0(B,f,"")}else{const f=B.display;V?ht!==e&&(B.cssText=e):ht&&j.removeAttribute("style"),"_vod"in j&&(B.display=f)}}const Vm=/\s*!important$/;function f0(j,ht,e){if(Aa(e))e.forEach(B=>f0(j,ht,B));else if(e==null&&(e=""),ht.startsWith("--"))j.setProperty(ht,e);else{const B=S3(j,ht);Vm.test(e)?j.setProperty(Uh(B),e.replace(Vm,""),"important"):j[B]=e}}const Gm=["Webkit","Moz","ms"],Gv={};function S3(j,ht){const e=Gv[ht];if(e)return e;let B=Ou(ht);if(B!=="filter"&&B in j)return Gv[ht]=B;B=Wp(B);for(let V=0;V<Gm.length;V++){const f=Gm[V]+B;if(f in j)return Gv[ht]=f}return ht}const Ym="http://www.w3.org/1999/xlink";function M3(j,ht,e,B,V){if(B&&ht.startsWith("xlink:"))e==null?j.removeAttributeNS(Ym,ht.slice(6,ht.length)):j.setAttributeNS(Ym,ht,e);else{const f=mw(ht);e==null||f&&!My(e)?j.removeAttribute(ht):j.setAttribute(ht,f?"":e)}}function C3(j,ht,e,B,V,f,l){if(ht==="innerHTML"||ht==="textContent"){B&&l(B,V,f),j[ht]=e==null?"":e;return}if(ht==="value"&&j.tagName!=="PROGRESS"&&!j.tagName.includes("-")){j._value=e;const x=e==null?"":e;(j.value!==x||j.tagName==="OPTION")&&(j.value=x),e==null&&j.removeAttribute(ht);return}let m=!1;if(e===""||e==null){const x=typeof j[ht];x==="boolean"?e=My(e):e==null&&x==="string"?(e="",m=!0):x==="number"&&(e=0,m=!0)}try{j[ht]=e}catch{}m&&j.removeAttribute(ht)}const[A1,E3]=(()=>{let j=Date.now,ht=!1;if(typeof window<"u"){Date.now()>document.createEvent("Event").timeStamp&&(j=performance.now.bind(performance));const e=navigator.userAgent.match(/firefox\/(\d+)/i);ht=!!(e&&Number(e[1])<=53)}return[j,ht]})();let h0=0;const L3=Promise.resolve(),D3=()=>{h0=0},P3=()=>h0||(L3.then(D3),h0=A1());function I3(j,ht,e,B){j.addEventListener(ht,e,B)}function z3(j,ht,e,B){j.removeEventListener(ht,e,B)}function R3(j,ht,e,B,V=null){const f=j._vei||(j._vei={}),l=f[ht];if(B&&l)l.value=B;else{const[m,x]=F3(ht);if(B){const t=f[ht]=O3(B,V);I3(j,m,t,x)}else l&&(z3(j,m,l,x),f[ht]=void 0)}}const Wm=/(?:Once|Passive|Capture)$/;function F3(j){let ht;if(Wm.test(j)){ht={};let B;for(;B=j.match(Wm);)j=j.slice(0,j.length-B[0].length),ht[B[0].toLowerCase()]=!0}return[j[2]===":"?j.slice(3):Uh(j.slice(2)),ht]}function O3(j,ht){const e=B=>{const V=B.timeStamp||A1();(E3||V>=e.attached-1)&&cu(B3(B,e.value),ht,5,[B])};return e.value=j,e.attached=P3(),e}function B3(j,ht){if(Aa(ht)){const e=j.stopImmediatePropagation;return j.stopImmediatePropagation=()=>{e.call(j),j._stopped=!0},ht.map(B=>V=>!V._stopped&&B&&B(V))}else return ht}const $m=/^on[a-z]/,N3=(j,ht,e,B,V=!1,f,l,m,x)=>{ht==="class"?T3(j,B,V):ht==="style"?A3(j,e,B):Vp(ht)?D0(ht)||R3(j,ht,e,B,l):(ht[0]==="."?(ht=ht.slice(1),!0):ht[0]==="^"?(ht=ht.slice(1),!1):U3(j,ht,B,V))?C3(j,ht,B,f,l,m,x):(ht==="true-value"?j._trueValue=B:ht==="false-value"&&(j._falseValue=B),M3(j,ht,B,V))};function U3(j,ht,e,B){return B?!!(ht==="innerHTML"||ht==="textContent"||ht in j&&$m.test(ht)&&Ra(e)):ht==="spellcheck"||ht==="draggable"||ht==="translate"||ht==="form"||ht==="list"&&j.tagName==="INPUT"||ht==="type"&&j.tagName==="TEXTAREA"||$m.test(ht)&&Fs(e)?!1:ht in j}const H3=Ol({patchProp:N3},k3);let Xm;function V3(){return Xm||(Xm=e3(H3))}const G3=(...j)=>{const ht=V3().createApp(...j),{mount:e}=ht;return ht.mount=B=>{const V=Y3(B);if(!V)return;const f=ht._component;!Ra(f)&&!f.render&&!f.template&&(f.template=V.innerHTML),V.innerHTML="";const l=e(V,!1,V instanceof SVGElement);return V instanceof Element&&(V.removeAttribute("v-cloak"),V.setAttribute("data-v-app","")),l},ht};function Y3(j){return Fs(j)?document.querySelector(j):j}var W3=!1;/*!
  * pinia v2.0.22
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */let S1;const rv=j=>S1=j,M1=Symbol();function d0(j){return j&&typeof j=="object"&&Object.prototype.toString.call(j)==="[object Object]"&&typeof j.toJSON!="function"}var md;(function(j){j.direct="direct",j.patchObject="patch object",j.patchFunction="patch function"})(md||(md={}));function $3(){const j=zy(!0),ht=j.run(()=>Gf({}));let e=[],B=[];const V=Vf({install(f){rv(V),V._a=f,f.provide(M1,V),f.config.globalProperties.$pinia=V,B.forEach(l=>e.push(l)),B=[]},use(f){return!this._a&&!W3?B.push(f):e.push(f),this},_p:e,_a:null,_e:j,_s:new Map,state:ht});return V}const C1=()=>{};function jm(j,ht,e,B=C1){j.push(ht);const V=()=>{const f=j.indexOf(ht);f>-1&&(j.splice(f,1),B())};return!e&&Cd()&&W0(V),V}function _h(j,...ht){j.slice().forEach(e=>{e(...ht)})}function p0(j,ht){j instanceof Map&&ht instanceof Map&&ht.forEach((e,B)=>j.set(B,e)),j instanceof Set&&ht instanceof Set&&ht.forEach(j.add,j);for(const e in ht){if(!ht.hasOwnProperty(e))continue;const B=ht[e],V=j[e];d0(V)&&d0(B)&&j.hasOwnProperty(e)&&!ps(B)&&!vf(B)?j[e]=p0(V,B):j[e]=B}return j}const X3=Symbol();function j3(j){return!d0(j)||!j.hasOwnProperty(X3)}const{assign:Xu}=Object;function Z3(j){return!!(ps(j)&&j.effect)}function K3(j,ht,e,B){const{state:V,actions:f,getters:l}=ht,m=e.state.value[j];let x;function t(){m||(e.state.value[j]=V?V():{});const a=i_(e.state.value[j]);return Xu(a,f,Object.keys(l||{}).reduce((i,r)=>(i[r]=Vf(Dp(()=>{rv(e);const n=e._s.get(j);return l[r].call(n,n)})),i),{}))}return x=E1(j,t,ht,e,B,!0),x.$reset=function(){const i=V?V():{};this.$patch(r=>{Xu(r,i)})},x}function E1(j,ht,e={},B,V,f){let l;const m=Xu({actions:{}},e),x={deep:!0};let t,a,i=Vf([]),r=Vf([]),n;const d=B.state.value[j];!f&&!d&&(B.state.value[j]={}),Gf({});let s;function o(T){let c;t=a=!1,typeof T=="function"?(T(B.state.value[j]),c={type:md.patchFunction,storeId:j,events:n}):(p0(B.state.value[j],T),c={type:md.patchObject,payload:T,storeId:j,events:n});const A=s=Symbol();Zp().then(()=>{s===A&&(t=!0)}),a=!0,_h(i,c,B.state.value[j])}const y=C1;function g(){l.stop(),i=[],r=[],B._s.delete(j)}function b(T,c){return function(){rv(B);const A=Array.from(arguments),k=[],p=[];function w(S){k.push(S)}function h(S){p.push(S)}_h(r,{args:A,name:T,store:_,after:w,onError:h});let D;try{D=c.apply(this&&this.$id===j?this:_,A)}catch(S){throw _h(p,S),S}return D instanceof Promise?D.then(S=>(_h(k,S),S)).catch(S=>(_h(p,S),Promise.reject(S))):(_h(k,D),D)}}const v={_p:B,$id:j,$onAction:jm.bind(null,r),$patch:o,$reset:y,$subscribe(T,c={}){const A=jm(i,T,c.detached,()=>k()),k=l.run(()=>bp(()=>B.state.value[j],p=>{(c.flush==="sync"?a:t)&&T({storeId:j,type:md.direct,events:n},p)},Xu({},x,c)));return A},$dispose:g},_=Xp(Xu({},v));B._s.set(j,_);const u=B._e.run(()=>(l=zy(),l.run(()=>ht())));for(const T in u){const c=u[T];if(ps(c)&&!Z3(c)||vf(c))f||(d&&j3(c)&&(ps(c)?c.value=d[T]:p0(c,d[T])),B.state.value[j][T]=c);else if(typeof c=="function"){const A=b(T,c);u[T]=A,m.actions[T]=c}}return Xu(_,u),Xu(ho(_),u),Object.defineProperty(_,"$state",{get:()=>B.state.value[j],set:T=>{o(c=>{Xu(c,T)})}}),B._p.forEach(T=>{Xu(_,l.run(()=>T({store:_,app:B._a,pinia:B,options:m})))}),d&&f&&e.hydrate&&e.hydrate(_.$state,d),t=!0,a=!0,_}function J3(j,ht,e){let B,V;const f=typeof ht=="function";typeof j=="string"?(B=j,V=f?e:ht):(V=j,B=j.id);function l(m,x){const t=Cd();return m=m||t&&Uf(M1),m&&rv(m),m=S1,m._s.has(B)||(f?E1(B,ht,V,m):K3(B,V,m)),m._s.get(B)}return l.$id=B,l}const za={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,safari10:!1,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,cssVarShim:!1,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,dynamicImportShim:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0};let kh,L1,nv,D1=!1,Pp=!1,Q0=!1,gc=!1,Zm=null,v0=!1;const Gh=typeof window<"u"?window:{};za.cssVarShim&&Gh.CSS;const uu=Gh.document||{head:{}},Bl=Gh.HTMLElement||class{},ol={$flags$:0,$resourcesUrl$:"",jmp:j=>j(),raf:j=>requestAnimationFrame(j),ael:(j,ht,e,B)=>j.addEventListener(ht,e,B),rel:(j,ht,e,B)=>j.removeEventListener(ht,e,B),ce:(j,ht)=>new CustomEvent(j,ht)},Q3=j=>{Object.assign(ol,j)},Ip=za.shadowDomShim&&za.shadowDom?(()=>(uu.head.attachShadow+"").indexOf("[native")>-1)():!0,q3=(()=>{let j=!1;try{uu.addEventListener("e",null,Object.defineProperty({},"passive",{get(){j=!0}}))}catch{}return j})(),tk=j=>Promise.resolve(j),ek=za.constructableCSS?(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})():!1,rk={},P1=(j,ht,e,B)=>{e&&e.map(([V,f,l])=>{const m=ik(j,V),x=nk(ht,l),t=ak(V);ol.ael(m,f,x,t),(ht.$rmListeners$=ht.$rmListeners$||[]).push(()=>ol.rel(m,f,x,t))})},nk=(j,ht)=>e=>{try{za.lazyLoad||j.$hostElement$[ht](e)}catch(B){Ed(B)}},ik=(j,ht)=>ht&4?uu:ht&8?Gh:ht&16?uu.body:j,ak=j=>q3?{passive:(j&1)!==0,capture:(j&2)!==0}:(j&2)!==0,Km="http://www.w3.org/1999/xlink",Yf=(j,ht="")=>()=>{},Jm=new WeakMap,ok=(j,ht,e)=>{let B=Fp.get(j);ek&&e?(B=B||new CSSStyleSheet,typeof B=="string"?B=ht:B.replaceSync(ht)):B=ht,Fp.set(j,B)},sk=(j,ht,e,B)=>{let V=I1(ht,e);const f=Fp.get(V);if(j=j.nodeType===11?j:uu,f)if(typeof f=="string"){j=j.head||j;let l=Jm.get(j),m;l||Jm.set(j,l=new Set),l.has(V)||(m=uu.createElement("style"),m.innerHTML=f,j.insertBefore(m,j.querySelector("link")),l&&l.add(V))}else j.adoptedStyleSheets.includes(f)||(j.adoptedStyleSheets=[...j.adoptedStyleSheets,f]);return V},lk=j=>{const ht=j.$cmpMeta$,e=j.$hostElement$,B=ht.$flags$,V=Yf("attachStyles",ht.$tagName$),f=sk(Ip&&e.shadowRoot?e.shadowRoot:e.getRootNode(),ht,j.$modeName$);B&10&&(e["s-sc"]=f,e.classList.add(f+"-h"),B&2&&e.classList.add(f+"-s")),V()},I1=(j,ht)=>"sc-"+(ht&&j.$flags$&32?j.$tagName$+"-"+ht:j.$tagName$),ck=j=>W1.map(ht=>ht(j)).find(ht=>!!ht),uk=j=>W1.push(j),fk=j=>Xf(j).$modeName$,Qm={},hk="http://www.w3.org/2000/svg",dk="http://www.w3.org/1999/xhtml",pk=j=>j!=null,q0=j=>(j=typeof j,j==="object"||j==="function"),zi=(j,ht,...e)=>{let B=null,V=null,f=null,l=!1,m=!1;const x=[],t=i=>{for(let r=0;r<i.length;r++)B=i[r],Array.isArray(B)?t(B):B!=null&&typeof B!="boolean"&&((l=typeof j!="function"&&!q0(B))&&(B=String(B)),l&&m?x[x.length-1].$text$+=B:x.push(l?zp(null,B):B),m=l)};if(t(e),ht&&(za.isDev&&j==="input"&&mk(ht),za.vdomKey&&ht.key&&(V=ht.key),za.slotRelocation&&ht.name&&(f=ht.name),za.vdomClass)){const i=ht.className||ht.class;i&&(ht.class=typeof i!="object"?i:Object.keys(i).filter(r=>i[r]).join(" "))}if(za.isDev&&x.some(z1)&&Nk(`The <Host> must be the single root component. Make sure:
- You are NOT using hostData() and <Host> in the same component.
- <Host> is used once, and it's the single root component of the render() function.`),za.vdomFunctional&&typeof j=="function")return j(ht===null?{}:ht,x,vk);const a=zp(j,null);return a.$attrs$=ht,x.length>0&&(a.$children$=x),za.vdomKey&&(a.$key$=V),za.slotRelocation&&(a.$name$=f),a},zp=(j,ht)=>{const e={$flags$:0,$tag$:j,$text$:ht,$elm$:null,$children$:null};return za.vdomAttribute&&(e.$attrs$=null),za.vdomKey&&(e.$key$=null),za.slotRelocation&&(e.$name$=null),e},Tl={},z1=j=>j&&j.$tag$===Tl,vk={forEach:(j,ht)=>j.map(qm).forEach(ht),map:(j,ht)=>j.map(qm).map(ht).map(gk)},qm=j=>({vattrs:j.$attrs$,vchildren:j.$children$,vkey:j.$key$,vname:j.$name$,vtag:j.$tag$,vtext:j.$text$}),gk=j=>{if(typeof j.vtag=="function"){const e=Object.assign({},j.vattrs);return j.vkey&&(e.key=j.vkey),j.vname&&(e.name=j.vname),zi(j.vtag,e,...j.vchildren||[])}const ht=zp(j.vtag,j.vtext);return ht.$attrs$=j.vattrs,ht.$children$=j.vchildren,ht.$key$=j.vkey,ht.$name$=j.vname,ht},mk=j=>{const ht=Object.keys(j),e=ht.indexOf("value");if(e===-1)return;const B=ht.indexOf("type"),V=ht.indexOf("min"),f=ht.indexOf("max"),l=ht.indexOf("step");(e<B||e<V||e<f||e<l)&&Y1('The "value" prop of <input> should be set after "min", "max", "type" and "step"')},ty=(j,ht,e,B,V,f)=>{if(e!==B){let l=iy(j,ht),m=ht.toLowerCase();if(ht==="class"){const x=j.classList,t=ey(e),a=ey(B);x.remove(...t.filter(i=>i&&!a.includes(i))),x.add(...a.filter(i=>i&&!t.includes(i)))}else if(ht==="style"){for(const x in e)(!B||B[x]==null)&&(x.includes("-")?j.style.removeProperty(x):j.style[x]="");for(const x in B)(!e||B[x]!==e[x])&&(x.includes("-")?j.style.setProperty(x,B[x]):j.style[x]=B[x])}else if(ht!=="key")if(ht==="ref")B&&B(j);else if(!j.__lookupSetter__(ht)&&ht[0]==="o"&&ht[1]==="n")ht[2]==="-"?ht=ht.slice(3):iy(Gh,m)?ht=m.slice(2):ht=m[2]+ht.slice(3),e&&ol.rel(j,ht,e,!1),B&&ol.ael(j,ht,B,!1);else{const x=q0(B);if((l||x&&B!==null)&&!V)try{if(j.tagName.includes("-"))j[ht]=B;else{const a=B==null?"":B;ht==="list"?l=!1:(e==null||j[ht]!=a)&&(j[ht]=a)}}catch{}let t=!1;m!==(m=m.replace(/^xlink\:?/,""))&&(ht=m,t=!0),B==null||B===!1?(B!==!1||j.getAttribute(ht)==="")&&(t?j.removeAttributeNS(Km,ht):j.removeAttribute(ht)):(!l||f&4||V)&&!x&&(B=B===!0?"":B,t?j.setAttributeNS(Km,ht,B):j.setAttribute(ht,B))}}},yk=/\s/,ey=j=>j?j.split(yk):[],R1=(j,ht,e,B)=>{const V=ht.$elm$.nodeType===11&&ht.$elm$.host?ht.$elm$.host:ht.$elm$,f=j&&j.$attrs$||Qm,l=ht.$attrs$||Qm;for(B in f)B in l||ty(V,B,f[B],void 0,e,ht.$flags$);for(B in l)ty(V,B,f[B],l[B],e,ht.$flags$)},Rp=(j,ht,e,B)=>{const V=ht.$children$[e];let f=0,l,m,x;if(D1||(Q0=!0,V.$tag$==="slot"&&(kh&&B.classList.add(kh+"-s"),V.$flags$|=V.$children$?2:1)),V.$text$!==null)l=V.$elm$=uu.createTextNode(V.$text$);else if(V.$flags$&1)l=V.$elm$=uu.createTextNode("");else{if(gc||(gc=V.$tag$==="svg"),l=V.$elm$=uu.createElementNS(gc?hk:dk,V.$flags$&2?"slot-fb":V.$tag$),gc&&V.$tag$==="foreignObject"&&(gc=!1),R1(null,V,gc),pk(kh)&&l["s-si"]!==kh&&l.classList.add(l["s-si"]=kh),V.$children$)for(f=0;f<V.$children$.length;++f)m=Rp(j,V,f,l),m&&l.appendChild(m);V.$tag$==="svg"?gc=!1:l.tagName==="foreignObject"&&(gc=!0)}return l["s-hn"]=nv,V.$flags$&3&&(l["s-sr"]=!0,l["s-cr"]=L1,l["s-sn"]=V.$name$||"",x=j&&j.$children$&&j.$children$[e],x&&x.$tag$===V.$tag$&&j.$elm$&&Td(j.$elm$,!1)),l},Td=(j,ht)=>{ol.$flags$|=1;const e=j.childNodes;for(let B=e.length-1;B>=0;B--){const V=e[B];V["s-hn"]!==nv&&V["s-ol"]&&(B1(V).insertBefore(V,tg(V)),V["s-ol"].remove(),V["s-ol"]=void 0,Q0=!0),ht&&Td(V,ht)}ol.$flags$&=-2},F1=(j,ht,e,B,V,f)=>{let l=j["s-cr"]&&j["s-cr"].parentNode||j,m;for(l.shadowRoot&&l.tagName===nv&&(l=l.shadowRoot);V<=f;++V)B[V]&&(m=Rp(null,e,V,j),m&&(B[V].$elm$=m,l.insertBefore(m,tg(ht))))},O1=(j,ht,e,B,V)=>{for(;ht<=e;++ht)(B=j[ht])&&(V=B.$elm$,H1(B),Pp=!0,V["s-ol"]?V["s-ol"].remove():Td(V,!0),V.remove())},bk=(j,ht,e,B)=>{let V=0,f=0,l=0,m=0,x=ht.length-1,t=ht[0],a=ht[x],i=B.length-1,r=B[0],n=B[i],d,s;for(;V<=x&&f<=i;)if(t==null)t=ht[++V];else if(a==null)a=ht[--x];else if(r==null)r=B[++f];else if(n==null)n=B[--i];else if(fp(t,r))Th(t,r),t=ht[++V],r=B[++f];else if(fp(a,n))Th(a,n),a=ht[--x],n=B[--i];else if(fp(t,n))(t.$tag$==="slot"||n.$tag$==="slot")&&Td(t.$elm$.parentNode,!1),Th(t,n),j.insertBefore(t.$elm$,a.$elm$.nextSibling),t=ht[++V],n=B[--i];else if(fp(a,r))(t.$tag$==="slot"||n.$tag$==="slot")&&Td(a.$elm$.parentNode,!1),Th(a,r),j.insertBefore(a.$elm$,t.$elm$),a=ht[--x],r=B[++f];else{for(l=-1,m=V;m<=x;++m)if(ht[m]&&ht[m].$key$!==null&&ht[m].$key$===r.$key$){l=m;break}l>=0?(s=ht[l],s.$tag$!==r.$tag$?d=Rp(ht&&ht[f],e,l,j):(Th(s,r),ht[l]=void 0,d=s.$elm$),r=B[++f]):(d=Rp(ht&&ht[f],e,f,j),r=B[++f]),d&&B1(t.$elm$).insertBefore(d,tg(t.$elm$))}V>x?F1(j,B[i+1]==null?null:B[i+1].$elm$,e,B,f,i):f>i&&O1(ht,V,x)},fp=(j,ht)=>j.$tag$===ht.$tag$?j.$tag$==="slot"?j.$name$===ht.$name$:j.$key$===ht.$key$:!1,tg=j=>j&&j["s-ol"]||j,B1=j=>(j["s-ol"]?j["s-ol"]:j).parentNode,Th=(j,ht)=>{const e=ht.$elm$=j.$elm$,B=j.$children$,V=ht.$children$,f=ht.$tag$,l=ht.$text$;let m;l===null?(gc=f==="svg"?!0:f==="foreignObject"?!1:gc,f==="slot"||R1(j,ht,gc),B!==null&&V!==null?bk(e,B,ht,V):V!==null?(j.$text$!==null&&(e.textContent=""),F1(e,null,ht,V,0,V.length-1)):B!==null&&O1(B,0,B.length-1),gc&&f==="svg"&&(gc=!1)):(m=e["s-cr"])?m.parentNode.textContent=l:j.$text$!==l&&(e.data=l)},N1=j=>{const ht=j.childNodes;let e,B,V,f,l,m;for(B=0,V=ht.length;B<V;B++)if(e=ht[B],e.nodeType===1){if(e["s-sr"]){for(l=e["s-sn"],e.hidden=!1,f=0;f<V;f++)if(m=ht[f].nodeType,ht[f]["s-hn"]!==e["s-hn"]||l!==""){if(m===1&&l===ht[f].getAttribute("slot")){e.hidden=!0;break}}else if(m===1||m===3&&ht[f].textContent.trim()!==""){e.hidden=!0;break}}N1(e)}},iu=[],U1=j=>{let ht,e,B,V,f,l,m=0;const x=j.childNodes,t=x.length;for(;m<t;m++){if(ht=x[m],ht["s-sr"]&&(e=ht["s-cr"])&&e.parentNode)for(B=e.parentNode.childNodes,V=ht["s-sn"],l=B.length-1;l>=0;l--)e=B[l],!e["s-cn"]&&!e["s-nr"]&&e["s-hn"]!==ht["s-hn"]&&(ry(e,V)?(f=iu.find(a=>a.$nodeToRelocate$===e),Pp=!0,e["s-sn"]=e["s-sn"]||V,f?f.$slotRefNode$=ht:iu.push({$slotRefNode$:ht,$nodeToRelocate$:e}),e["s-sr"]&&iu.map(a=>{ry(a.$nodeToRelocate$,e["s-sn"])&&(f=iu.find(i=>i.$nodeToRelocate$===e),f&&!a.$slotRefNode$&&(a.$slotRefNode$=f.$slotRefNode$))})):iu.some(a=>a.$nodeToRelocate$===e)||iu.push({$nodeToRelocate$:e}));ht.nodeType===1&&U1(ht)}},ry=(j,ht)=>j.nodeType===1?j.getAttribute("slot")===null&&ht===""||j.getAttribute("slot")===ht:j["s-sn"]===ht?!0:ht==="",H1=j=>{j.$attrs$&&j.$attrs$.ref&&j.$attrs$.ref(null),j.$children$&&j.$children$.map(H1)},xk=(j,ht)=>{const e=j.$hostElement$,B=j.$cmpMeta$,V=j.$vnode$||zp(null,null),f=z1(ht)?ht:zi(null,null,ht);nv=e.tagName,B.$attrsToReflect$&&(f.$attrs$=f.$attrs$||{},B.$attrsToReflect$.map(([l,m])=>f.$attrs$[m]=e[l])),f.$tag$=null,f.$flags$|=4,j.$vnode$=f,f.$elm$=V.$elm$=e.shadowRoot||e,kh=e["s-sc"],L1=e["s-cr"],D1=Ip&&(B.$flags$&1)!==0,Pp=!1,Th(V,f);{if(ol.$flags$|=1,Q0){U1(f.$elm$);let l,m,x,t,a,i,r=0;for(;r<iu.length;r++)l=iu[r],m=l.$nodeToRelocate$,m["s-ol"]||(x=uu.createTextNode(""),x["s-nr"]=m,m.parentNode.insertBefore(m["s-ol"]=x,m));for(r=0;r<iu.length;r++)if(l=iu[r],m=l.$nodeToRelocate$,l.$slotRefNode$){for(t=l.$slotRefNode$.parentNode,a=l.$slotRefNode$.nextSibling,x=m["s-ol"];x=x.previousSibling;)if(i=x["s-nr"],i&&i["s-sn"]===m["s-sn"]&&t===i.parentNode&&(i=i.nextSibling,!i||!i["s-nr"])){a=i;break}(!a&&t!==m.parentNode||m.nextSibling!==a)&&m!==a&&(!m["s-hn"]&&m["s-ol"]&&(m["s-hn"]=m["s-ol"].parentNode.nodeName),t.insertBefore(m,a))}else m.nodeType===1&&(m.hidden=!0)}Pp&&N1(f.$elm$),ol.$flags$&=-2,iu.length=0}},wk=j=>za.lazyLoad?Xf(j).$hostElement$:j,Zs=(j,ht,e)=>{const B=wk(j);return{emit:V=>(za.isDev&&!B.isConnected&&Y1(`The "${ht}" event was emitted, but the dispatcher node is no longer connected to the dom.`),_k(B,ht,{bubbles:!!(e&4),composed:!!(e&2),cancelable:!!(e&1),detail:V}))}},_k=(j,ht,e)=>{const B=ol.ce(ht,e);return j.dispatchEvent(B),B},kk=(j,ht)=>{},eg=(j,ht)=>(za.taskQueue&&za.updatable&&(j.$flags$|=16),kk(j,j.$ancestorComponent$),Op(()=>Tk(j,ht))),Tk=(j,ht)=>{const e=j.$hostElement$,B=Yf("scheduleUpdate",j.$cmpMeta$.$tagName$),V=e;let f;return ht?f=Dh(V,"componentWillLoad"):f=Dh(V,"componentWillUpdate"),f=ny(f,()=>Dh(V,"componentWillRender")),B(),ny(f,()=>Ak(j,V,ht))},Ak=async(j,ht,e)=>{const B=j.$hostElement$,V=Yf("update",j.$cmpMeta$.$tagName$);B["s-rc"],e&&lk(j);const f=Yf("render",j.$cmpMeta$.$tagName$);Sk(j,ht,B),f(),V(),Mk(j)},Sk=(j,ht,e)=>{try{Zm=ht,ht=ht.render&&ht.render(),j.$flags$&=-17,j.$flags$|=2,(za.hasRenderFn||za.reflect)&&(za.vdomRender||za.reflect)&&(za.hydrateServerSide||xk(j,ht))}catch(m){Ed(m,j.$hostElement$)}return Zm=null,null},Mk=j=>{const ht=j.$cmpMeta$.$tagName$,e=j.$hostElement$,B=Yf("postUpdate",ht),V=e;j.$ancestorComponent$,Dh(V,"componentDidRender"),j.$flags$&64?(Dh(V,"componentDidUpdate"),B()):(j.$flags$|=64,Dh(V,"componentDidLoad"),B())},Bh=j=>{if(za.updatable){const ht=Xf(j),e=ht.$hostElement$.isConnected;return e&&(ht.$flags$&18)===2&&eg(ht,!1),e}return!1},Dh=(j,ht,e)=>{if(j&&j[ht])try{return j[ht](e)}catch(B){Ed(B)}},ny=(j,ht)=>j&&j.then?j.then(ht):ht(),Ck=(j,ht)=>j!=null&&!q0(j)?ht&4?j==="false"?!1:j===""||!!j:ht&2?parseFloat(j):ht&1?String(j):j:j,Ek=(j,ht)=>Xf(j).$instanceValues$.get(ht),Lk=(j,ht,e,B)=>{const V=Xf(j),f=j,l=V.$instanceValues$.get(ht),m=V.$flags$,x=f;e=Ck(e,B.$members$[ht][0]);const t=Number.isNaN(l)&&Number.isNaN(e);if(e!==l&&!t){V.$instanceValues$.set(ht,e);{if(B.$watchers$&&m&128){const i=B.$watchers$[ht];i&&i.map(r=>{try{x[r](e,l,ht)}catch(n){Ed(n,f)}})}if((m&18)===2){if(x.componentShouldUpdate&&x.componentShouldUpdate(e,l,ht)===!1)return;eg(V,!1)}}}},Dk=(j,ht,e)=>{if(ht.$members$){j.watchers&&(ht.$watchers$=j.watchers);const B=Object.entries(ht.$members$),V=j.prototype;B.map(([f,[l]])=>{(l&31||l&32)&&Object.defineProperty(V,f,{get(){return Ek(this,f)},set(m){Lk(this,f,m,ht)},configurable:!0,enumerable:!0})});{const f=new Map;V.attributeChangedCallback=function(l,m,x){ol.jmp(()=>{const t=f.get(l);if(this.hasOwnProperty(t))x=this[t],delete this[t];else if(V.hasOwnProperty(t)&&typeof this[t]=="number"&&this[t]==x)return;this[t]=x===null&&typeof this[t]=="boolean"?!1:x})},j.observedAttributes=B.filter(([l,m])=>m[0]&15).map(([l,m])=>{const x=m[1]||l;return f.set(x,l),m[0]&512&&ht.$attrsToReflect$.push([l,x]),x})}}return j},Pk=async(j,ht,e,B,V)=>{if((ht.$flags$&32)===0&&(V=j.constructor,ht.$flags$|=32,customElements.whenDefined(e.$tagName$).then(()=>ht.$flags$|=128),V.style)){let l=V.style;typeof l!="string"&&(l=l[ht.$modeName$=ck(j)]);const m=I1(e,ht.$modeName$);if(!Fp.has(m)){const x=Yf("registerStyles",e.$tagName$);ok(m,l,!!(e.$flags$&1)),x()}}ht.$ancestorComponent$,(()=>eg(ht,!0))()},Ik=j=>{},zk=j=>{if((ol.$flags$&1)===0){const ht=Xf(j),e=ht.$cmpMeta$,B=Yf("connectedCallback",e.$tagName$);ht.$flags$&1?(P1(j,ht,e.$listeners$),Ik(ht.$lazyInstance$)):(ht.$flags$|=1,e.$flags$&12&&Rk(j),e.$members$&&Object.entries(e.$members$).map(([V,[f]])=>{if(f&31&&j.hasOwnProperty(V)){const l=j[V];delete j[V],j[V]=l}}),Pk(j,ht,e)),B()}},Rk=j=>{const ht=j["s-cr"]=uu.createComment("");ht["s-cn"]=!0,j.insertBefore(ht,j.firstChild)},Fk=j=>{if((ol.$flags$&1)===0){const ht=Xf(j);ht.$rmListeners$&&(ht.$rmListeners$.map(e=>e()),ht.$rmListeners$=void 0)}},Nl=(j,ht)=>{const e={$flags$:ht[0],$tagName$:ht[1]};za.member&&(e.$members$=ht[2]),za.hostListener&&(e.$listeners$=ht[3]),za.watchCallback&&(e.$watchers$=j.$watchers$),za.reflect&&(e.$attrsToReflect$=[]),za.shadowDom&&!Ip&&e.$flags$&1&&(e.$flags$|=8);const B=j.prototype.connectedCallback,V=j.prototype.disconnectedCallback;return Object.assign(j.prototype,{__registerHost(){Bk(this,e)},connectedCallback(){zk(this),za.connectedCallback&&B&&B.call(this)},disconnectedCallback(){Fk(this),za.disconnectedCallback&&V&&V.call(this)},__attachShadow(){Ip?za.shadowDelegatesFocus?this.attachShadow({mode:"open",delegatesFocus:!!(e.$flags$&16)}):this.attachShadow({mode:"open"}):this.shadowRoot=this}}),j.is=e.$tagName$,Dk(j,e)},Ok=j=>{const ht=new URL(j,ol.$resourcesUrl$);return ht.origin!==Gh.location.origin?ht.href:ht.pathname},V1=new WeakMap,Xf=j=>V1.get(j),Bk=(j,ht)=>{const e={$flags$:0,$hostElement$:j,$cmpMeta$:ht,$instanceValues$:new Map};return za.isDev&&(e.$renderCount$=0),za.method&&za.lazyLoad&&(e.$onInstancePromise$=new Promise(B=>e.$onInstanceResolve$=B)),za.asyncLoading&&(e.$onReadyPromise$=new Promise(B=>e.$onReadyResolve$=B),j["s-p"]=[],j["s-rc"]=[]),P1(j,e,ht.$listeners$),V1.set(j,e)},iy=(j,ht)=>ht in j,Ed=(j,ht)=>(0,console.error)(j,ht),G1=za.isTesting?["STENCIL:"]:["%cstencil","color: white;background:#4c47ff;font-weight: bold; font-size:10px; padding:2px 6px; border-radius: 5px"],Nk=(...j)=>console.error(...G1,...j),Y1=(...j)=>console.warn(...G1,...j),Fp=new Map,W1=[],g0=[],$1=[],X1=(j,ht)=>e=>{j.push(e),v0||(v0=!0,ht&&ol.$flags$&4?Uk(m0):ol.raf(m0))},ay=j=>{for(let ht=0;ht<j.length;ht++)try{j[ht](performance.now())}catch(e){Ed(e)}j.length=0},m0=()=>{ay(g0),ay($1),(v0=g0.length>0)&&ol.raf(m0)},Uk=j=>tk().then(j),y0=X1(g0,!1),Op=X1($1,!0),oy={isDev:!!za.isDev,isBrowser:!0,isServer:!1,isTesting:!!za.isTesting};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const sy="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><title>Chevron Forward</title><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M184 112l144 144-144 144' class='ionicon-fill-none'/></svg>";/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */class Hk{constructor(){this.m=new Map}reset(ht){this.m=new Map(Object.entries(ht))}get(ht,e){const B=this.m.get(ht);return B!==void 0?B:e}getBoolean(ht,e=!1){const B=this.m.get(ht);return B===void 0?e:typeof B=="string"?B==="true":!!B}getNumber(ht,e){const B=parseFloat(this.m.get(ht));return isNaN(B)?e!==void 0?e:NaN:B}set(ht,e){this.m.set(ht,e)}}const mc=new Hk,Vk=j=>{try{const ht=j.sessionStorage.getItem(j1);return ht!==null?JSON.parse(ht):{}}catch{return{}}},Gk=(j,ht)=>{try{j.sessionStorage.setItem(j1,JSON.stringify(ht))}catch{return}},Yk=j=>{const ht={};return j.location.search.slice(1).split("&").map(e=>e.split("=")).map(([e,B])=>[decodeURIComponent(e),decodeURIComponent(B)]).filter(([e])=>Wk(e,ly)).map(([e,B])=>[e.slice(ly.length),B]).forEach(([e,B])=>{ht[e]=B}),ht},Wk=(j,ht)=>j.substr(0,ht.length)===ht,ly="ionic:",j1="ionic-persist-config",$k=j=>K1(j),Z1=(j,ht)=>(typeof j=="string"&&(ht=j,j=void 0),$k(j).includes(ht)),K1=(j=window)=>{if(typeof j>"u")return[];j.Ionic=j.Ionic||{};let ht=j.Ionic.platforms;return ht==null&&(ht=j.Ionic.platforms=Xk(j),ht.forEach(e=>j.document.documentElement.classList.add(`plt-${e}`))),ht},Xk=j=>{const ht=mc.get("platform");return Object.keys(cy).filter(e=>{const B=ht==null?void 0:ht[e];return typeof B=="function"?B(j):cy[e](j)})},jk=j=>iv(j)&&!Q1(j),rg=j=>!!(Wf(j,/iPad/i)||Wf(j,/Macintosh/i)&&iv(j)),Zk=j=>Wf(j,/iPhone/i),Kk=j=>Wf(j,/iPhone|iPod/i)||rg(j),J1=j=>Wf(j,/android|sink/i),Jk=j=>J1(j)&&!Wf(j,/mobile/i),Qk=j=>{const ht=j.innerWidth,e=j.innerHeight,B=Math.min(ht,e),V=Math.max(ht,e);return B>390&&B<520&&V>620&&V<800},qk=j=>{const ht=j.innerWidth,e=j.innerHeight,B=Math.min(ht,e),V=Math.max(ht,e);return rg(j)||Jk(j)||B>460&&B<820&&V>780&&V<1400},iv=j=>n5(j,"(any-pointer:coarse)"),t5=j=>!iv(j),Q1=j=>q1(j)||tb(j),q1=j=>!!(j.cordova||j.phonegap||j.PhoneGap),tb=j=>{const ht=j.Capacitor;return!!(ht!=null&&ht.isNative)},e5=j=>Wf(j,/electron/i),r5=j=>{var ht;return!!(((ht=j.matchMedia)===null||ht===void 0?void 0:ht.call(j,"(display-mode: standalone)").matches)||j.navigator.standalone)},Wf=(j,ht)=>ht.test(j.navigator.userAgent),n5=(j,ht)=>{var e;return(e=j.matchMedia)===null||e===void 0?void 0:e.call(j,ht).matches},cy={ipad:rg,iphone:Zk,ios:Kk,android:J1,phablet:Qk,tablet:qk,cordova:q1,capacitor:tb,electron:e5,pwa:r5,mobile:iv,mobileweb:jk,desktop:t5,hybrid:Q1};let Ah;const Ms=j=>j&&fk(j)||Ah,i5=(j={})=>{if(typeof window>"u")return;const ht=window.document,e=window;rk.config=mc;const B=e.Ionic=e.Ionic||{},V={};j._ael&&(V.ael=j._ael),j._rel&&(V.rel=j._rel),j._ce&&(V.ce=j._ce),Q3(V);const f=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Vk(e)),{persistConfig:!1}),B.config),Yk(e)),j);mc.reset(f),mc.getBoolean("persistConfig")&&Gk(e,f),K1(e),B.config=mc,B.mode=Ah=mc.get("mode",ht.documentElement.getAttribute("mode")||(Z1(e,"ios")?"ios":"md")),mc.set("mode",Ah),ht.documentElement.setAttribute("mode",Ah),ht.documentElement.classList.add(Ah),mc.getBoolean("_testing")&&mc.set("animated",!1);const l=x=>{var t;return(t=x.tagName)===null||t===void 0?void 0:t.startsWith("ION-")},m=x=>["ios","md"].includes(x);uk(x=>{for(;x;){const t=x.mode||x.getAttribute("mode");if(t){if(m(t))return t;l(x)&&console.warn('Invalid ionic mode: "'+t+'", expected: "ios" or "md"')}x=x.parentElement}return Ah})};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const b0=(j,ht)=>{j.componentOnReady?j.componentOnReady().then(e=>ht(e)):Pu(()=>ht(j))},eb=(j,ht=[])=>{const e={};return ht.forEach(B=>{j.hasAttribute(B)&&(j.getAttribute(B)!==null&&(e[B]=j.getAttribute(B)),j.removeAttribute(B))}),e},a5=["role","aria-activedescendant","aria-atomic","aria-autocomplete","aria-braillelabel","aria-brailleroledescription","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colindextext","aria-colspan","aria-controls","aria-current","aria-describedby","aria-description","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowindextext","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"],rb=j=>eb(j,a5),o5=(j,ht,e,B)=>{var V;if(typeof window<"u"){const f=window,l=(V=f==null?void 0:f.Ionic)===null||V===void 0?void 0:V.config;if(l){const m=l.get("_ael");if(m)return m(j,ht,e,B);if(l._ael)return l._ael(j,ht,e,B)}}return j.addEventListener(ht,e,B)},s5=(j,ht,e,B)=>{var V;if(typeof window<"u"){const f=window,l=(V=f==null?void 0:f.Ionic)===null||V===void 0?void 0:V.config;if(l){const m=l.get("_rel");if(m)return m(j,ht,e,B);if(l._rel)return l._rel(j,ht,e,B)}}return j.removeEventListener(ht,e,B)},l5=(j,ht=j)=>j.shadowRoot||ht,Pu=j=>typeof __zone_symbol__requestAnimationFrame=="function"?__zone_symbol__requestAnimationFrame(j):typeof requestAnimationFrame=="function"?requestAnimationFrame(j):setTimeout(j),c5=j=>!!j.shadowRoot&&!!j.attachShadow,u5=j=>{const ht=j.closest("ion-item");return ht?ht.querySelector("ion-label"):null},f5=j=>{if(j.focus(),j.classList.contains("ion-focusable")){const ht=j.closest("ion-app");ht&&ht.setFocus([j])}};const h5=(j,ht)=>{const e=j._original||j;return{_original:j,emit:d5(e.emit.bind(e),ht)}},d5=(j,ht=0)=>{let e;return(...B)=>{clearTimeout(e),e=setTimeout(j,ht,...B)}};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */let Yv;const p5=()=>{if(typeof window>"u")return new Map;if(!Yv){const j=window;j.Ionicons=j.Ionicons||{},Yv=j.Ionicons.map=j.Ionicons.map||new Map}return Yv},v5=j=>{let ht=Wv(j.src);return ht||(ht=nb(j.name,j.icon,j.mode,j.ios,j.md),ht?g5(ht):j.icon&&(ht=Wv(j.icon),ht||(ht=Wv(j.icon[j.mode]),ht))?ht:null)},g5=j=>{const ht=p5().get(j);return ht||Ok(`svg/${j}.svg`)},nb=(j,ht,e,B,V)=>(e=(e&&hp(e))==="ios"?"ios":"md",B&&e==="ios"?j=hp(B):V&&e==="md"?j=hp(V):(!j&&ht&&!ib(ht)&&(j=ht),Bp(j)&&(j=hp(j))),!Bp(j)||j.trim()===""||j.replace(/[a-z]|-|\d/gi,"")!==""?null:j),Wv=j=>Bp(j)&&(j=j.trim(),ib(j))?j:null,ib=j=>j.length>0&&/(\/|\.)/.test(j),Bp=j=>typeof j=="string",hp=j=>j.toLowerCase(),m5=(j,ht=[])=>{const e={};return ht.forEach(B=>{j.hasAttribute(B)&&(j.getAttribute(B)!==null&&(e[B]=j.getAttribute(B)),j.removeAttribute(B))}),e},y5=j=>{const ht=document.createElement("div");ht.innerHTML=j;for(let B=ht.childNodes.length-1;B>=0;B--)ht.childNodes[B].nodeName.toLowerCase()!=="svg"&&ht.removeChild(ht.childNodes[B]);const e=ht.firstElementChild;if(e&&e.nodeName.toLowerCase()==="svg"){const B=e.getAttribute("class")||"";if(e.setAttribute("class",(B+" s-ion-icon").trim()),ab(e))return ht.innerHTML}return""},ab=j=>{if(j.nodeType===1){if(j.nodeName.toLowerCase()==="script")return!1;for(let ht=0;ht<j.attributes.length;ht++){const e=j.attributes[ht].name;if(Bp(e)&&e.toLowerCase().indexOf("on")===0)return!1}for(let ht=0;ht<j.childNodes.length;ht++)if(!ab(j.childNodes[ht]))return!1}return!0},Ph=new Map,uy=new Map,b5=(j,ht)=>{let e=uy.get(j);if(!e)if(typeof fetch<"u"&&typeof document<"u")e=fetch(j).then(B=>{if(B.ok)return B.text().then(V=>{V&&ht!==!1&&(V=y5(V)),Ph.set(j,V||"")});Ph.set(j,"")}),uy.set(j,e);else return Ph.set(j,""),Promise.resolve();return e},x5=":host{display:inline-block;width:1em;height:1em;contain:strict;fill:currentColor;-webkit-box-sizing:content-box !important;box-sizing:content-box !important}:host .ionicon{stroke:currentColor}.ionicon-fill-none{fill:none}.ionicon-stroke-width{stroke-width:32px;stroke-width:var(--ionicon-stroke-width, 32px)}.icon-inner,.ionicon,svg{display:block;height:100%;width:100%}:host(.flip-rtl) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}:host(.icon-small){font-size:18px !important}:host(.icon-large){font-size:32px !important}:host(.ion-color){color:var(--ion-color-base) !important}:host(.ion-color-primary){--ion-color-base:var(--ion-color-primary, #3880ff)}:host(.ion-color-secondary){--ion-color-base:var(--ion-color-secondary, #0cd1e8)}:host(.ion-color-tertiary){--ion-color-base:var(--ion-color-tertiary, #f4a942)}:host(.ion-color-success){--ion-color-base:var(--ion-color-success, #10dc60)}:host(.ion-color-warning){--ion-color-base:var(--ion-color-warning, #ffce00)}:host(.ion-color-danger){--ion-color-base:var(--ion-color-danger, #f14141)}:host(.ion-color-light){--ion-color-base:var(--ion-color-light, #f4f5f8)}:host(.ion-color-medium){--ion-color-base:var(--ion-color-medium, #989aa2)}:host(.ion-color-dark){--ion-color-base:var(--ion-color-dark, #222428)}",w5=Nl(class extends Bl{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.iconName=null,this.inheritedAttributes={},this.isVisible=!1,this.mode=_5(),this.lazy=!1,this.sanitize=!0,this.hasAriaHidden=()=>{const{el:j}=this;return j.hasAttribute("aria-hidden")&&j.getAttribute("aria-hidden")==="true"}}componentWillLoad(){this.inheritedAttributes=m5(this.el,["aria-label"])}connectedCallback(){this.waitUntilVisible(this.el,"50px",()=>{this.isVisible=!0,this.loadIcon()})}disconnectedCallback(){this.io&&(this.io.disconnect(),this.io=void 0)}waitUntilVisible(j,ht,e){if(this.lazy&&typeof window<"u"&&window.IntersectionObserver){const B=this.io=new window.IntersectionObserver(V=>{V[0].isIntersecting&&(B.disconnect(),this.io=void 0,e())},{rootMargin:ht});B.observe(j)}else e()}loadIcon(){if(this.isVisible){const ht=v5(this);ht&&(Ph.has(ht)?this.svgContent=Ph.get(ht):b5(ht,this.sanitize).then(()=>this.svgContent=Ph.get(ht)))}const j=this.iconName=nb(this.name,this.icon,this.mode,this.ios,this.md);j&&(this.ariaLabel=j.replace(/\-/g," "))}render(){const{iconName:j,ariaLabel:ht,inheritedAttributes:e}=this,B=this.mode||"md",V=this.flipRtl||j&&(j.indexOf("arrow")>-1||j.indexOf("chevron")>-1)&&this.flipRtl!==!1;return zi(Tl,Object.assign({"aria-label":ht!==void 0&&!this.hasAriaHidden()?ht:null,role:"img",class:Object.assign(Object.assign({[B]:!0},k5(this.color)),{[`icon-${this.size}`]:!!this.size,"flip-rtl":!!V&&this.el.ownerDocument.dir==="rtl"})},e),this.svgContent?zi("div",{class:"icon-inner",innerHTML:this.svgContent}):zi("div",{class:"icon-inner"}))}static get assetsDirs(){return["svg"]}get el(){return this}static get watchers(){return{name:["loadIcon"],src:["loadIcon"],icon:["loadIcon"]}}static get style(){return x5}},[1,"ion-icon",{mode:[1025],color:[1],ios:[1],md:[1],flipRtl:[4,"flip-rtl"],name:[513],src:[1],icon:[8],size:[1],lazy:[4],sanitize:[4],svgContent:[32],isVisible:[32],ariaLabel:[32]}]),_5=()=>typeof document<"u"&&document.documentElement.getAttribute("mode")||"md",k5=j=>j?{"ion-color":!0,[`ion-color-${j}`]:!0}:null;function T5(){if(typeof customElements>"u")return;["ion-icon"].forEach(ht=>{switch(ht){case"ion-icon":customElements.get(ht)||customElements.define(ht,w5);break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 */class A5{constructor(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}createGesture(ht){return new S5(this,this.newID(),ht.name,ht.priority||0,!!ht.disableScroll)}createBlocker(ht={}){return new M5(this,this.newID(),ht.disable,!!ht.disableScroll)}start(ht,e,B){return this.canStart(ht)?(this.requestedStart.set(e,B),!0):(this.requestedStart.delete(e),!1)}capture(ht,e,B){if(!this.start(ht,e,B))return!1;const V=this.requestedStart;let f=-1e4;if(V.forEach(l=>{f=Math.max(f,l)}),f===B){this.capturedId=e,V.clear();const l=new CustomEvent("ionGestureCaptured",{detail:{gestureName:ht}});return document.dispatchEvent(l),!0}return V.delete(e),!1}release(ht){this.requestedStart.delete(ht),this.capturedId===ht&&(this.capturedId=void 0)}disableGesture(ht,e){let B=this.disabledGestures.get(ht);B===void 0&&(B=new Set,this.disabledGestures.set(ht,B)),B.add(e)}enableGesture(ht,e){const B=this.disabledGestures.get(ht);B!==void 0&&B.delete(e)}disableScroll(ht){this.disabledScroll.add(ht),this.disabledScroll.size===1&&document.body.classList.add(fy)}enableScroll(ht){this.disabledScroll.delete(ht),this.disabledScroll.size===0&&document.body.classList.remove(fy)}canStart(ht){return!(this.capturedId!==void 0||this.isDisabled(ht))}isCaptured(){return this.capturedId!==void 0}isScrollDisabled(){return this.disabledScroll.size>0}isDisabled(ht){const e=this.disabledGestures.get(ht);return!!(e&&e.size>0)}newID(){return this.gestureId++,this.gestureId}}class S5{constructor(ht,e,B,V,f){this.id=e,this.name=B,this.disableScroll=f,this.priority=V*1e6+e,this.ctrl=ht}canStart(){return this.ctrl?this.ctrl.canStart(this.name):!1}start(){return this.ctrl?this.ctrl.start(this.name,this.id,this.priority):!1}capture(){if(!this.ctrl)return!1;const ht=this.ctrl.capture(this.name,this.id,this.priority);return ht&&this.disableScroll&&this.ctrl.disableScroll(this.id),ht}release(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}destroy(){this.release(),this.ctrl=void 0}}class M5{constructor(ht,e,B,V){this.id=e,this.disable=B,this.disableScroll=V,this.ctrl=ht}block(){if(!!this.ctrl){if(this.disable)for(const ht of this.disable)this.ctrl.disableGesture(ht,this.id);this.disableScroll&&this.ctrl.disableScroll(this.id)}}unblock(){if(!!this.ctrl){if(this.disable)for(const ht of this.disable)this.ctrl.enableGesture(ht,this.id);this.disableScroll&&this.ctrl.enableScroll(this.id)}}destroy(){this.unblock(),this.ctrl=void 0}}const fy="backdrop-no-scroll",ob=new A5;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const C5=":host{left:0;right:0;top:0;bottom:0;display:block;position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0);contain:strict;cursor:pointer;opacity:0.01;-ms-touch-action:none;touch-action:none;z-index:2}:host(.backdrop-hide){background:transparent}:host(.backdrop-no-tappable){cursor:auto}:host{background-color:var(--ion-backdrop-color, #000)}",E5=":host{left:0;right:0;top:0;bottom:0;display:block;position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0);contain:strict;cursor:pointer;opacity:0.01;-ms-touch-action:none;touch-action:none;z-index:2}:host(.backdrop-hide){background:transparent}:host(.backdrop-no-tappable){cursor:auto}:host{background-color:var(--ion-backdrop-color, #000)}",L5=Nl(class extends Bl{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionBackdropTap=Zs(this,"ionBackdropTap",7),this.blocker=ob.createBlocker({disableScroll:!0}),this.visible=!0,this.tappable=!0,this.stopPropagation=!0}connectedCallback(){this.stopPropagation&&this.blocker.block()}disconnectedCallback(){this.blocker.unblock()}onMouseDown(j){this.emitTap(j)}emitTap(j){this.stopPropagation&&(j.preventDefault(),j.stopPropagation()),this.tappable&&this.ionBackdropTap.emit()}render(){const j=Ms(this);return zi(Tl,{tabindex:"-1","aria-hidden":"true",class:{[j]:!0,"backdrop-hide":!this.visible,"backdrop-no-tappable":!this.tappable}})}static get style(){return{ios:C5,md:E5}}},[33,"ion-backdrop",{visible:[4],tappable:[4],stopPropagation:[4,"stop-propagation"]},[[2,"click","onMouseDown"]]]);function D5(){if(typeof customElements>"u")return;["ion-backdrop"].forEach(ht=>{switch(ht){case"ion-backdrop":customElements.get(ht)||customElements.define(ht,L5);break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Ad=(j,ht)=>ht.closest(j)!==null,jf=(j,ht)=>typeof j=="string"&&j.length>0?Object.assign({"ion-color":!0,[`ion-color-${j}`]:!0},ht):ht,P5=j=>j!==void 0?(Array.isArray(j)?j:j.split(" ")).filter(e=>e!=null).map(e=>e.trim()).filter(e=>e!==""):[],Ih=j=>{const ht={};return P5(j).forEach(e=>ht[e]=!0),ht},I5=/^[a-z][a-z0-9+\-.]*:/,sb=async(j,ht,e,B)=>{if(j!=null&&j[0]!=="#"&&!I5.test(j)){const V=document.querySelector("ion-router");if(V)return ht!=null&&ht.preventDefault(),V.push(j,e,B)}return!1};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const z5=":host{left:0;right:0;top:0;bottom:0;position:absolute;contain:strict;pointer-events:none}:host(.unbounded){contain:layout size style}.ripple-effect{border-radius:50%;position:absolute;background-color:currentColor;color:inherit;contain:strict;opacity:0;-webkit-animation:225ms rippleAnimation forwards, 75ms fadeInAnimation forwards;animation:225ms rippleAnimation forwards, 75ms fadeInAnimation forwards;will-change:transform, opacity;pointer-events:none}.fade-out{-webkit-transform:translate(var(--translate-end)) scale(var(--final-scale, 1));transform:translate(var(--translate-end)) scale(var(--final-scale, 1));-webkit-animation:150ms fadeOutAnimation forwards;animation:150ms fadeOutAnimation forwards}@-webkit-keyframes rippleAnimation{from{-webkit-animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);-webkit-transform:scale(1);transform:scale(1)}to{-webkit-transform:translate(var(--translate-end)) scale(var(--final-scale, 1));transform:translate(var(--translate-end)) scale(var(--final-scale, 1))}}@keyframes rippleAnimation{from{-webkit-animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);-webkit-transform:scale(1);transform:scale(1)}to{-webkit-transform:translate(var(--translate-end)) scale(var(--final-scale, 1));transform:translate(var(--translate-end)) scale(var(--final-scale, 1))}}@-webkit-keyframes fadeInAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0}to{opacity:0.16}}@keyframes fadeInAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0}to{opacity:0.16}}@-webkit-keyframes fadeOutAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0.16}to{opacity:0}}@keyframes fadeOutAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0.16}to{opacity:0}}",R5=Nl(class extends Bl{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.type="bounded"}async addRipple(j,ht){return new Promise(e=>{y0(()=>{const B=this.el.getBoundingClientRect(),V=B.width,f=B.height,l=Math.sqrt(V*V+f*f),m=Math.max(f,V),x=this.unbounded?m:l+O5,t=Math.floor(m*B5),a=x/t;let i=j-B.left,r=ht-B.top;this.unbounded&&(i=V*.5,r=f*.5);const n=i-t*.5,d=r-t*.5,s=V*.5-i,o=f*.5-r;Op(()=>{const y=document.createElement("div");y.classList.add("ripple-effect");const g=y.style;g.top=d+"px",g.left=n+"px",g.width=g.height=t+"px",g.setProperty("--final-scale",`${a}`),g.setProperty("--translate-end",`${s}px, ${o}px`),(this.el.shadowRoot||this.el).appendChild(y),setTimeout(()=>{e(()=>{F5(y)})},225+100)})})})}get unbounded(){return this.type==="unbounded"}render(){const j=Ms(this);return zi(Tl,{role:"presentation",class:{[j]:!0,unbounded:this.unbounded}})}get el(){return this}static get style(){return z5}},[1,"ion-ripple-effect",{type:[1],addRipple:[64]}]),F5=j=>{j.classList.add("fade-out"),setTimeout(()=>{j.remove()},200)},O5=10,B5=.5;function ng(){if(typeof customElements>"u")return;["ion-ripple-effect"].forEach(ht=>{switch(ht){case"ion-ripple-effect":customElements.get(ht)||customElements.define(ht,R5);break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const N5=':host{--overflow:hidden;--ripple-color:currentColor;--border-width:initial;--border-color:initial;--border-style:initial;--color-activated:var(--color);--color-focused:var(--color);--color-hover:var(--color);--box-shadow:none;display:inline-block;width:auto;color:var(--color);font-family:var(--ion-font-family, inherit);text-align:center;text-decoration:none;text-overflow:ellipsis;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:top;vertical-align:-webkit-baseline-middle;-webkit-font-kerning:none;font-kerning:none}:host(.button-disabled){cursor:default;opacity:0.5;pointer-events:none}:host(.button-solid){--background:var(--ion-color-primary, #3880ff);--color:var(--ion-color-primary-contrast, #fff)}:host(.button-outline){--border-color:var(--ion-color-primary, #3880ff);--background:transparent;--color:var(--ion-color-primary, #3880ff)}:host(.button-clear){--border-width:0;--background:transparent;--color:var(--ion-color-primary, #3880ff)}:host(.button-block){display:block}:host(.button-block) .button-native{margin-left:0;margin-right:0;display:block;width:100%;clear:both;contain:content}:host(.button-block) .button-native::after{clear:both}:host(.button-full){display:block}:host(.button-full) .button-native{margin-left:0;margin-right:0;display:block;width:100%;contain:content}:host(.button-full:not(.button-round)) .button-native{border-radius:0;border-right-width:0;border-left-width:0}.button-native{border-radius:var(--border-radius);-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:var(--padding-start);padding-right:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:block;position:relative;width:100%;height:100%;-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:var(--background);line-height:1;-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);contain:layout style;cursor:pointer;opacity:var(--opacity);overflow:var(--overflow);z-index:0;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-appearance:none;-moz-appearance:none;appearance:none}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){.button-native{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end)}}.button-native::-moz-focus-inner{border:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;z-index:1}::slotted(ion-icon){font-size:1.4em;pointer-events:none}::slotted(ion-icon[slot=start]){margin-left:-0.3em;margin-right:0.3em;margin-top:0;margin-bottom:0}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){::slotted(ion-icon[slot=start]){margin-left:unset;margin-right:unset;-webkit-margin-start:-0.3em;margin-inline-start:-0.3em;-webkit-margin-end:0.3em;margin-inline-end:0.3em}}::slotted(ion-icon[slot=end]){margin-left:0.3em;margin-right:-0.2em;margin-top:0;margin-bottom:0}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){::slotted(ion-icon[slot=end]){margin-left:unset;margin-right:unset;-webkit-margin-start:0.3em;margin-inline-start:0.3em;-webkit-margin-end:-0.2em;margin-inline-end:-0.2em}}::slotted(ion-icon[slot=icon-only]){font-size:1.8em}ion-ripple-effect{color:var(--ripple-color)}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}:host(.ion-activated){color:var(--color-activated)}:host(.ion-activated) .button-native::after{background:var(--background-activated);opacity:var(--background-activated-opacity)}:host(.ion-focused){color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){:host(:hover){color:var(--color-hover)}:host(:hover) .button-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}}:host(.button-solid.ion-color) .button-native{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.button-outline.ion-color) .button-native{border-color:var(--ion-color-base);background:transparent;color:var(--ion-color-base)}:host(.button-clear.ion-color) .button-native{background:transparent;color:var(--ion-color-base)}:host(.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{color:var(--ion-toolbar-color, var(--color))}:host(.button-outline.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{border-color:var(--ion-toolbar-color, var(--color, var(--border-color)))}:host(.button-solid.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{background:var(--ion-toolbar-color, var(--background));color:var(--ion-toolbar-background, var(--color))}:host{--border-radius:10px;--padding-top:0;--padding-bottom:0;--padding-start:1em;--padding-end:1em;--transition:background-color, opacity 100ms linear;margin-left:2px;margin-right:2px;margin-top:4px;margin-bottom:4px;height:2.8em;font-size:16px;font-weight:500;letter-spacing:-0.03em}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host{margin-left:unset;margin-right:unset;-webkit-margin-start:2px;margin-inline-start:2px;-webkit-margin-end:2px;margin-inline-end:2px}}:host(.button-solid){--background-activated:var(--ion-color-primary-shade, #3171e0);--background-focused:var(--ion-color-primary-shade, #3171e0);--background-hover:var(--ion-color-primary-tint, #4c8dff);--background-activated-opacity:1;--background-focused-opacity:1;--background-hover-opacity:1}:host(.button-outline){--border-radius:10px;--border-width:1px;--border-style:solid;--background-activated:var(--ion-color-primary, #3880ff);--background-focused:var(--ion-color-primary, #3880ff);--background-hover:transparent;--background-focused-opacity:.1;--color-activated:var(--ion-color-primary-contrast, #fff)}:host(.button-clear){--background-activated:transparent;--background-focused:var(--ion-color-primary, #3880ff);--background-hover:transparent;--background-focused-opacity:.1;font-size:17px;font-weight:normal;letter-spacing:0}:host(.button-large){--border-radius:12px;--padding-top:0;--padding-start:1em;--padding-end:1em;--padding-bottom:0;height:2.8em;font-size:20px}:host(.button-small){--border-radius:6px;--padding-top:0;--padding-start:0.9em;--padding-end:0.9em;--padding-bottom:0;height:2.1em;font-size:13px}:host(.button-round){--border-radius:64px;--padding-top:0;--padding-start:26px;--padding-end:26px;--padding-bottom:0}:host(.button-strong){font-weight:600}:host(.button-clear.ion-activated){opacity:0.4}:host(.button-outline.ion-activated.ion-color) .button-native{color:var(--ion-color-contrast)}:host(.button-outline.ion-activated.ion-color) .button-native::after{background:var(--ion-color-base)}:host(.button-solid.ion-color.ion-activated) .button-native::after{background:var(--ion-color-shade)}:host(.button-outline.ion-focused.ion-color) .button-native,:host(.button-clear.ion-focused.ion-color) .button-native{color:var(--ion-color-base)}:host(.button-outline.ion-focused.ion-color) .button-native::after,:host(.button-clear.ion-focused.ion-color) .button-native::after{background:var(--ion-color-base)}:host(.button-solid.ion-color.ion-focused) .button-native::after{background:var(--ion-color-shade)}@media (any-hover: hover){:host(.button-clear:hover),:host(.button-outline:hover){opacity:0.6}:host(.button-clear.ion-color:hover) .button-native,:host(.button-outline.ion-color:hover) .button-native{color:var(--ion-color-base)}:host(.button-clear.ion-color:hover) .button-native::after,:host(.button-outline.ion-color:hover) .button-native::after{background:transparent}:host(.button-solid.ion-color:hover) .button-native::after{background:var(--ion-color-tint)}:host(:hover.button-solid.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native::after{background:#fff;opacity:0.1}}',U5=`:host{--overflow:hidden;--ripple-color:currentColor;--border-width:initial;--border-color:initial;--border-style:initial;--color-activated:var(--color);--color-focused:var(--color);--color-hover:var(--color);--box-shadow:none;display:inline-block;width:auto;color:var(--color);font-family:var(--ion-font-family, inherit);text-align:center;text-decoration:none;text-overflow:ellipsis;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:top;vertical-align:-webkit-baseline-middle;-webkit-font-kerning:none;font-kerning:none}:host(.button-disabled){cursor:default;opacity:0.5;pointer-events:none}:host(.button-solid){--background:var(--ion-color-primary, #3880ff);--color:var(--ion-color-primary-contrast, #fff)}:host(.button-outline){--border-color:var(--ion-color-primary, #3880ff);--background:transparent;--color:var(--ion-color-primary, #3880ff)}:host(.button-clear){--border-width:0;--background:transparent;--color:var(--ion-color-primary, #3880ff)}:host(.button-block){display:block}:host(.button-block) .button-native{margin-left:0;margin-right:0;display:block;width:100%;clear:both;contain:content}:host(.button-block) .button-native::after{clear:both}:host(.button-full){display:block}:host(.button-full) .button-native{margin-left:0;margin-right:0;display:block;width:100%;contain:content}:host(.button-full:not(.button-round)) .button-native{border-radius:0;border-right-width:0;border-left-width:0}.button-native{border-radius:var(--border-radius);-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:var(--padding-start);padding-right:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:block;position:relative;width:100%;height:100%;-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:var(--background);line-height:1;-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);contain:layout style;cursor:pointer;opacity:var(--opacity);overflow:var(--overflow);z-index:0;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-appearance:none;-moz-appearance:none;appearance:none}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){.button-native{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end)}}.button-native::-moz-focus-inner{border:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;z-index:1}::slotted(ion-icon){font-size:1.4em;pointer-events:none}::slotted(ion-icon[slot=start]){margin-left:-0.3em;margin-right:0.3em;margin-top:0;margin-bottom:0}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){::slotted(ion-icon[slot=start]){margin-left:unset;margin-right:unset;-webkit-margin-start:-0.3em;margin-inline-start:-0.3em;-webkit-margin-end:0.3em;margin-inline-end:0.3em}}::slotted(ion-icon[slot=end]){margin-left:0.3em;margin-right:-0.2em;margin-top:0;margin-bottom:0}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){::slotted(ion-icon[slot=end]){margin-left:unset;margin-right:unset;-webkit-margin-start:0.3em;margin-inline-start:0.3em;-webkit-margin-end:-0.2em;margin-inline-end:-0.2em}}::slotted(ion-icon[slot=icon-only]){font-size:1.8em}ion-ripple-effect{color:var(--ripple-color)}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}:host(.ion-activated){color:var(--color-activated)}:host(.ion-activated) .button-native::after{background:var(--background-activated);opacity:var(--background-activated-opacity)}:host(.ion-focused){color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){:host(:hover){color:var(--color-hover)}:host(:hover) .button-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}}:host(.button-solid.ion-color) .button-native{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.button-outline.ion-color) .button-native{border-color:var(--ion-color-base);background:transparent;color:var(--ion-color-base)}:host(.button-clear.ion-color) .button-native{background:transparent;color:var(--ion-color-base)}:host(.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{color:var(--ion-toolbar-color, var(--color))}:host(.button-outline.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{border-color:var(--ion-toolbar-color, var(--color, var(--border-color)))}:host(.button-solid.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{background:var(--ion-toolbar-color, var(--background));color:var(--ion-toolbar-background, var(--color))}:host{--border-radius:4px;--padding-top:0;--padding-bottom:0;--padding-start:1.1em;--padding-end:1.1em;--transition:box-shadow 280ms cubic-bezier(.4, 0, .2, 1),
                background-color 15ms linear,
                color 15ms linear;margin-left:2px;margin-right:2px;margin-top:4px;margin-bottom:4px;height:36px;font-size:14px;font-weight:500;letter-spacing:0.06em;text-transform:uppercase}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host{margin-left:unset;margin-right:unset;-webkit-margin-start:2px;margin-inline-start:2px;-webkit-margin-end:2px;margin-inline-end:2px}}:host(.button-solid){--background-activated:transparent;--background-hover:var(--ion-color-primary-contrast, #fff);--background-focused:var(--ion-color-primary-contrast, #fff);--background-activated-opacity:0;--background-focused-opacity:.24;--background-hover-opacity:.08;--box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12)}:host(.button-solid.ion-activated){--box-shadow:0 5px 5px -3px rgba(0, 0, 0, 0.2), 0 8px 10px 1px rgba(0, 0, 0, 0.14), 0 3px 14px 2px rgba(0, 0, 0, 0.12)}:host(.button-outline){--border-width:2px;--border-style:solid;--box-shadow:none;--background-activated:transparent;--background-focused:var(--ion-color-primary, #3880ff);--background-hover:var(--ion-color-primary, #3880ff);--background-activated-opacity:0;--background-focused-opacity:.12;--background-hover-opacity:.04}:host(.button-outline.ion-activated.ion-color) .button-native{background:transparent}:host(.button-clear){--background-activated:transparent;--background-focused:var(--ion-color-primary, #3880ff);--background-hover:var(--ion-color-primary, #3880ff);--background-activated-opacity:0;--background-focused-opacity:.12;--background-hover-opacity:.04}:host(.button-round){--border-radius:64px;--padding-top:0;--padding-start:26px;--padding-end:26px;--padding-bottom:0}:host(.button-large){--padding-top:0;--padding-start:1em;--padding-end:1em;--padding-bottom:0;height:2.8em;font-size:20px}:host(.button-small){--padding-top:0;--padding-start:0.9em;--padding-end:0.9em;--padding-bottom:0;height:2.1em;font-size:13px}:host(.button-strong){font-weight:bold}::slotted(ion-icon[slot=icon-only]){padding-left:0;padding-right:0;padding-top:0;padding-bottom:0}:host(.button-solid.ion-color.ion-focused) .button-native::after{background:var(--ion-color-contrast)}:host(.button-clear.ion-color.ion-focused) .button-native::after,:host(.button-outline.ion-color.ion-focused) .button-native::after{background:var(--ion-color-base)}@media (any-hover: hover){:host(.button-solid.ion-color:hover) .button-native::after{background:var(--ion-color-contrast)}:host(.button-clear.ion-color:hover) .button-native::after,:host(.button-outline.ion-color:hover) .button-native::after{background:var(--ion-color-base)}}`,H5=Nl(class extends Bl{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionFocus=Zs(this,"ionFocus",7),this.ionBlur=Zs(this,"ionBlur",7),this.inItem=!1,this.inListHeader=!1,this.inToolbar=!1,this.inheritedAttributes={},this.buttonType="button",this.disabled=!1,this.routerDirection="forward",this.strong=!1,this.type="button",this.handleClick=j=>{if(this.type==="button")sb(this.href,j,this.routerDirection,this.routerAnimation);else if(c5(this.el)){const ht=this.el.closest("form");if(ht){j.preventDefault();const e=document.createElement("button");e.type=this.type,e.style.display="none",ht.appendChild(e),e.click(),e.remove()}}},this.onFocus=()=>{this.ionFocus.emit()},this.onBlur=()=>{this.ionBlur.emit()}}componentWillLoad(){this.inToolbar=!!this.el.closest("ion-buttons"),this.inListHeader=!!this.el.closest("ion-list-header"),this.inItem=!!this.el.closest("ion-item")||!!this.el.closest("ion-item-divider"),this.inheritedAttributes=rb(this.el)}get hasIconOnly(){return!!this.el.querySelector('[slot="icon-only"]')}get rippleType(){return(this.fill===void 0||this.fill==="clear")&&this.hasIconOnly&&this.inToolbar?"unbounded":"bounded"}render(){const j=Ms(this),{buttonType:ht,type:e,disabled:B,rel:V,target:f,size:l,href:m,color:x,expand:t,hasIconOnly:a,shape:i,strong:r,inheritedAttributes:n}=this,d=l===void 0&&this.inItem?"small":l,s=m===void 0?"button":"a",o=s==="button"?{type:e}:{download:this.download,href:m,rel:V,target:f};let y=this.fill;return y===void 0&&(y=this.inToolbar||this.inListHeader?"clear":"solid"),zi(Tl,{onClick:this.handleClick,"aria-disabled":B?"true":null,class:jf(x,{[j]:!0,[ht]:!0,[`${ht}-${t}`]:t!==void 0,[`${ht}-${d}`]:d!==void 0,[`${ht}-${i}`]:i!==void 0,[`${ht}-${y}`]:!0,[`${ht}-strong`]:r,"in-toolbar":Ad("ion-toolbar",this.el),"in-toolbar-color":Ad("ion-toolbar[color]",this.el),"button-has-icon-only":a,"button-disabled":B,"ion-activatable":!0,"ion-focusable":!0})},zi(s,Object.assign({},o,{class:"button-native",part:"native",disabled:B,onFocus:this.onFocus,onBlur:this.onBlur},n),zi("span",{class:"button-inner"},zi("slot",{name:"icon-only"}),zi("slot",{name:"start"}),zi("slot",null),zi("slot",{name:"end"})),j==="md"&&zi("ion-ripple-effect",{type:this.rippleType})))}get el(){return this}static get style(){return{ios:N5,md:U5}}},[33,"ion-button",{color:[513],buttonType:[1025,"button-type"],disabled:[516],expand:[513],fill:[1537],routerDirection:[1,"router-direction"],routerAnimation:[16],download:[1],href:[1],rel:[1],shape:[513],size:[513],strong:[4],target:[1],type:[1]}]);function V5(){if(typeof customElements>"u")return;["ion-button","ion-ripple-effect"].forEach(ht=>{switch(ht){case"ion-button":customElements.get(ht)||customElements.define(ht,H5);break;case"ion-ripple-effect":customElements.get(ht)||ng();break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const G5=V5;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Y5={xs:"(min-width: 0px)",sm:"(min-width: 576px)",md:"(min-width: 768px)",lg:"(min-width: 992px)",xl:"(min-width: 1200px)"},W5=j=>{if(j===void 0||j==="")return!0;if(window.matchMedia){const ht=Y5[j];return window.matchMedia(ht).matches}return!1},$5=":host{padding-left:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));padding-right:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));padding-top:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));padding-bottom:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;width:100%;max-width:100%;min-height:1px}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));padding-inline-start:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));-webkit-padding-end:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));padding-inline-end:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px))}}@media (min-width: 576px){:host{padding-left:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px));padding-right:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px));padding-top:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px));padding-bottom:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px))}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px));padding-inline-start:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px));-webkit-padding-end:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px));padding-inline-end:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px))}}}@media (min-width: 768px){:host{padding-left:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px));padding-right:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px));padding-top:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px));padding-bottom:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px))}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px));padding-inline-start:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px));-webkit-padding-end:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px));padding-inline-end:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px))}}}@media (min-width: 992px){:host{padding-left:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px));padding-right:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px));padding-top:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px));padding-bottom:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px))}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px));padding-inline-start:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px));-webkit-padding-end:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px));padding-inline-end:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px))}}}@media (min-width: 1200px){:host{padding-left:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px));padding-right:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px));padding-top:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px));padding-bottom:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px))}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px));padding-inline-start:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px));-webkit-padding-end:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px));padding-inline-end:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px))}}}",dp=typeof window<"u"?window:void 0,hy=dp&&!!(dp.CSS&&dp.CSS.supports&&dp.CSS.supports("--a: 0")),X5=["","xs","sm","md","lg","xl"],j5=Nl(class extends Bl{constructor(){super(),this.__registerHost(),this.__attachShadow()}onResize(){Bh(this)}getColumns(j){let ht;for(const e of X5){const B=W5(e),V=this[j+e.charAt(0).toUpperCase()+e.slice(1)];B&&V!==void 0&&(ht=V)}return ht}calculateSize(){const j=this.getColumns("size");if(!j||j==="")return;const ht=j==="auto"?"auto":hy?`calc(calc(${j} / var(--ion-grid-columns, 12)) * 100%)`:j/12*100+"%";return{flex:`0 0 ${ht}`,width:`${ht}`,"max-width":`${ht}`}}calculatePosition(j,ht){const e=this.getColumns(j);if(!e)return;const B=hy?`calc(calc(${e} / var(--ion-grid-columns, 12)) * 100%)`:e>0&&e<12?e/12*100+"%":"auto";return{[ht]:B}}calculateOffset(j){return this.calculatePosition("offset",j?"margin-right":"margin-left")}calculatePull(j){return this.calculatePosition("pull",j?"left":"right")}calculatePush(j){return this.calculatePosition("push",j?"right":"left")}render(){const j=document.dir==="rtl",ht=Ms(this);return zi(Tl,{class:{[ht]:!0},style:Object.assign(Object.assign(Object.assign(Object.assign({},this.calculateOffset(j)),this.calculatePull(j)),this.calculatePush(j)),this.calculateSize())},zi("slot",null))}static get style(){return $5}},[1,"ion-col",{offset:[1],offsetXs:[1,"offset-xs"],offsetSm:[1,"offset-sm"],offsetMd:[1,"offset-md"],offsetLg:[1,"offset-lg"],offsetXl:[1,"offset-xl"],pull:[1],pullXs:[1,"pull-xs"],pullSm:[1,"pull-sm"],pullMd:[1,"pull-md"],pullLg:[1,"pull-lg"],pullXl:[1,"pull-xl"],push:[1],pushXs:[1,"push-xs"],pushSm:[1,"push-sm"],pushMd:[1,"push-md"],pushLg:[1,"push-lg"],pushXl:[1,"push-xl"],size:[1],sizeXs:[1,"size-xs"],sizeSm:[1,"size-sm"],sizeMd:[1,"size-md"],sizeLg:[1,"size-lg"],sizeXl:[1,"size-xl"]},[[9,"resize","onResize"]]]);function Z5(){if(typeof customElements>"u")return;["ion-col"].forEach(ht=>{switch(ht){case"ion-col":customElements.get(ht)||customElements.define(ht,j5);break}})}const K5=Z5;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const J5=j=>j&&j.dir!==""?j.dir.toLowerCase()==="rtl":(document==null?void 0:document.dir.toLowerCase())==="rtl";/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Q5=':host{--background:var(--ion-background-color, #fff);--color:var(--ion-text-color, #000);--padding-top:0px;--padding-bottom:0px;--padding-start:0px;--padding-end:0px;--keyboard-offset:0px;--offset-top:0px;--offset-bottom:0px;--overflow:auto;display:block;position:relative;-ms-flex:1;flex:1;width:100%;height:100%;margin:0 !important;padding:0 !important;font-family:var(--ion-font-family, inherit);contain:size style}:host(.ion-color) .inner-scroll{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.outer-content){--background:var(--ion-color-step-50, #f2f2f2)}#background-content{left:0px;right:0px;top:calc(var(--offset-top) * -1);bottom:calc(var(--offset-bottom) * -1);position:absolute;background:var(--background)}.inner-scroll{left:0px;right:0px;top:calc(var(--offset-top) * -1);bottom:calc(var(--offset-bottom) * -1);padding-left:var(--padding-start);padding-right:var(--padding-end);padding-top:calc(var(--padding-top) + var(--offset-top));padding-bottom:calc(var(--padding-bottom) + var(--keyboard-offset) + var(--offset-bottom));position:absolute;color:var(--color);-webkit-box-sizing:border-box;box-sizing:border-box;overflow:hidden;-ms-touch-action:pan-x pan-y pinch-zoom;touch-action:pan-x pan-y pinch-zoom}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){.inner-scroll{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end)}}.scroll-y,.scroll-x{-webkit-overflow-scrolling:touch;z-index:0;will-change:scroll-position}.scroll-y{overflow-y:var(--overflow);overscroll-behavior-y:contain}.scroll-x{overflow-x:var(--overflow);overscroll-behavior-x:contain}.overscroll::before,.overscroll::after{position:absolute;width:1px;height:1px;content:""}.overscroll::before{bottom:-1px}.overscroll::after{top:-1px}:host(.content-sizing){display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;min-height:0;contain:none}:host(.content-sizing) .inner-scroll{position:relative;top:0;bottom:0;margin-top:calc(var(--offset-top) * -1);margin-bottom:calc(var(--offset-bottom) * -1)}.transition-effect{display:none;position:absolute;width:100%;height:100vh;opacity:0;pointer-events:none}:host(.content-ltr) .transition-effect{left:-100%;}:host(.content-rtl) .transition-effect{right:-100%;}.transition-cover{position:absolute;right:0;width:100%;height:100%;background:black;opacity:0.1}.transition-shadow{display:block;position:absolute;width:10px;height:100%;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAgCAYAAAAIXrg4AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MTE3MDgzRkQ5QTkyMTFFOUEwNzQ5MkJFREE1NUY2MjQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MTE3MDgzRkU5QTkyMTFFOUEwNzQ5MkJFREE1NUY2MjQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDoxMTcwODNGQjlBOTIxMUU5QTA3NDkyQkVEQTU1RjYyNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDoxMTcwODNGQzlBOTIxMUU5QTA3NDkyQkVEQTU1RjYyNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PmePEuQAAABNSURBVHjaYvz//z8DIxAwMDAwATGMhmFmPDQuOSZks0AMmoJBaQHjkPfB0Lfg/2gQjVow+HPy/yHvg9GiYjQfjMbBqAWjFgy/4hogwADYqwdzxy5BuwAAAABJRU5ErkJggg==);background-repeat:repeat-y;background-size:10px 16px}:host(.content-ltr) .transition-shadow{right:0;}:host(.content-rtl) .transition-shadow{left:0;-webkit-transform:scaleX(-1);transform:scaleX(-1)}::slotted([slot=fixed]){position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0)}',q5=Nl(class extends Bl{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionScrollStart=Zs(this,"ionScrollStart",7),this.ionScroll=Zs(this,"ionScroll",7),this.ionScrollEnd=Zs(this,"ionScrollEnd",7),this.isScrolling=!1,this.lastScroll=0,this.queued=!1,this.cTop=-1,this.cBottom=-1,this.isMainContent=!0,this.detail={scrollTop:0,scrollLeft:0,type:"scroll",event:void 0,startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,data:void 0,isScrolling:!0},this.fullscreen=!1,this.scrollX=!1,this.scrollY=!0,this.scrollEvents=!1}connectedCallback(){this.isMainContent=this.el.closest("ion-menu, ion-popover, ion-modal")===null}disconnectedCallback(){this.onScrollEnd()}onAppLoad(){this.resize()}shouldForceOverscroll(){const{forceOverscroll:j}=this,ht=Ms(this);return j===void 0?ht==="ios"&&Z1("ios"):j}resize(){this.fullscreen?y0(()=>this.readDimensions()):(this.cTop!==0||this.cBottom!==0)&&(this.cTop=this.cBottom=0,Bh(this))}readDimensions(){const j=eT(this.el),ht=Math.max(this.el.offsetTop,0),e=Math.max(j.offsetHeight-ht-this.el.offsetHeight,0);(ht!==this.cTop||e!==this.cBottom)&&(this.cTop=ht,this.cBottom=e,Bh(this))}onScroll(j){const ht=Date.now(),e=!this.isScrolling;this.lastScroll=ht,e&&this.onScrollStart(),!this.queued&&this.scrollEvents&&(this.queued=!0,y0(B=>{this.queued=!1,this.detail.event=j,rT(this.detail,this.scrollEl,B,e),this.ionScroll.emit(this.detail)}))}async getScrollElement(){return this.scrollEl||await new Promise(j=>b0(this.el,j)),Promise.resolve(this.scrollEl)}async getBackgroundElement(){return this.backgroundContentEl||await new Promise(j=>b0(this.el,j)),Promise.resolve(this.backgroundContentEl)}scrollToTop(j=0){return this.scrollToPoint(void 0,0,j)}async scrollToBottom(j=0){const ht=await this.getScrollElement(),e=ht.scrollHeight-ht.clientHeight;return this.scrollToPoint(void 0,e,j)}async scrollByPoint(j,ht,e){const B=await this.getScrollElement();return this.scrollToPoint(j+B.scrollLeft,ht+B.scrollTop,e)}async scrollToPoint(j,ht,e=0){const B=await this.getScrollElement();if(e<32){ht!=null&&(B.scrollTop=ht),j!=null&&(B.scrollLeft=j);return}let V,f=0;const l=new Promise(r=>V=r),m=B.scrollTop,x=B.scrollLeft,t=ht!=null?ht-m:0,a=j!=null?j-x:0,i=r=>{const n=Math.min(1,(r-f)/e)-1,d=Math.pow(n,3)+1;t!==0&&(B.scrollTop=Math.floor(d*t+m)),a!==0&&(B.scrollLeft=Math.floor(d*a+x)),d<1?requestAnimationFrame(i):V()};return requestAnimationFrame(r=>{f=r,i(r)}),l}onScrollStart(){this.isScrolling=!0,this.ionScrollStart.emit({isScrolling:!0}),this.watchDog&&clearInterval(this.watchDog),this.watchDog=setInterval(()=>{this.lastScroll<Date.now()-120&&this.onScrollEnd()},100)}onScrollEnd(){clearInterval(this.watchDog),this.watchDog=null,this.isScrolling&&(this.isScrolling=!1,this.ionScrollEnd.emit({isScrolling:!1}))}render(){const{isMainContent:j,scrollX:ht,scrollY:e,el:B}=this,V=J5(B)?"rtl":"ltr",f=Ms(this),l=this.shouldForceOverscroll(),m=f==="ios",x=j?"main":"div";return this.resize(),zi(Tl,{class:jf(this.color,{[f]:!0,"content-sizing":Ad("ion-popover",this.el),overscroll:l,[`content-${V}`]:!0}),style:{"--offset-top":`${this.cTop}px`,"--offset-bottom":`${this.cBottom}px`}},zi("div",{ref:t=>this.backgroundContentEl=t,id:"background-content",part:"background"}),zi(x,{class:{"inner-scroll":!0,"scroll-x":ht,"scroll-y":e,overscroll:(ht||e)&&l},ref:t=>this.scrollEl=t,onScroll:this.scrollEvents?t=>this.onScroll(t):void 0,part:"scroll"},zi("slot",null)),m?zi("div",{class:"transition-effect"},zi("div",{class:"transition-cover"}),zi("div",{class:"transition-shadow"})):null,zi("slot",{name:"fixed"}))}get el(){return this}static get style(){return Q5}},[1,"ion-content",{color:[513],fullscreen:[4],forceOverscroll:[1028,"force-overscroll"],scrollX:[4,"scroll-x"],scrollY:[4,"scroll-y"],scrollEvents:[4,"scroll-events"],getScrollElement:[64],getBackgroundElement:[64],scrollToTop:[64],scrollToBottom:[64],scrollByPoint:[64],scrollToPoint:[64]},[[8,"appload","onAppLoad"]]]),tT=j=>{var ht;return j.parentElement?j.parentElement:!((ht=j.parentNode)===null||ht===void 0)&&ht.host?j.parentNode.host:null},eT=j=>{const ht=j.closest("ion-tabs");if(ht)return ht;const e=j.closest("ion-app, ion-page, .ion-page, page-inner, .popover-content");return e||tT(j)},rT=(j,ht,e,B)=>{const V=j.currentX,f=j.currentY,l=j.currentTime,m=ht.scrollLeft,x=ht.scrollTop,t=e-l;if(B&&(j.startTime=e,j.startX=m,j.startY=x,j.velocityX=j.velocityY=0),j.currentTime=e,j.currentX=j.scrollLeft=m,j.currentY=j.scrollTop=x,j.deltaX=m-j.startX,j.deltaY=x-j.startY,t>0&&t<100){const a=(m-V)/t,i=(x-f)/t;j.velocityX=a*.7+j.velocityX*.3,j.velocityY=i*.7+j.velocityY*.3}};function nT(){if(typeof customElements>"u")return;["ion-content"].forEach(ht=>{switch(ht){case"ion-content":customElements.get(ht)||customElements.define(ht,q5);break}})}const iT=nT;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const aT=(j,...ht)=>console.error(`[Ionic Error]: ${j}`,...ht);/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const lb=j=>{const ht=j.getTimezoneOffset();return j.setMinutes(j.getMinutes()-ht),j},G4=lb(new Date("2022T01:00")),Y4=lb(new Date("2022T13:00"));/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const oT=":host{color:var(--color);font-family:var(--ion-font-family, inherit);-webkit-box-sizing:border-box;box-sizing:border-box}:host(.ion-color){color:var(--ion-color-base)}:host{--color:var(--ion-color-step-350, #a6a6a6)}",sT=":host{color:var(--color);font-family:var(--ion-font-family, inherit);-webkit-box-sizing:border-box;box-sizing:border-box}:host(.ion-color){color:var(--ion-color-base)}:host{--color:var(--ion-color-step-600, #666666);font-size:14px}",lT=Nl(class extends Bl{constructor(){super(),this.__registerHost(),this.__attachShadow()}render(){const j=Ms(this);return zi(Tl,{class:jf(this.color,{[j]:!0})},zi("slot",null))}static get style(){return{ios:oT,md:sT}}},[33,"ion-note",{color:[513]}]);function cT(){if(typeof customElements>"u")return;["ion-note"].forEach(ht=>{switch(ht){case"ion-note":customElements.get(ht)||customElements.define(ht,lT);break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const uT=':host{--border-radius:0px;--border-width:0px;--border-style:solid;--padding-top:0px;--padding-bottom:0px;--padding-end:0px;--padding-start:0px;--inner-border-width:0px;--inner-padding-top:0px;--inner-padding-bottom:0px;--inner-padding-start:0px;--inner-padding-end:0px;--inner-box-shadow:none;--show-full-highlight:0;--show-inset-highlight:0;--detail-icon-color:initial;--detail-icon-font-size:20px;--detail-icon-opacity:0.25;--color-activated:var(--color);--color-focused:var(--color);--color-hover:var(--color);--ripple-color:currentColor;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:block;position:relative;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;outline:none;color:var(--color);font-family:var(--ion-font-family, inherit);text-align:initial;text-decoration:none;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.ion-color:not(.item-fill-solid):not(.item-fill-outline)) .item-native{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.ion-color:not(.item-fill-solid):not(.item-fill-outline)) .item-native,:host(.ion-color:not(.item-fill-solid):not(.item-fill-outline)) .item-inner{border-color:var(--ion-color-shade)}:host(.ion-activated) .item-native{color:var(--color-activated)}:host(.ion-activated) .item-native::after{background:var(--background-activated);opacity:var(--background-activated-opacity)}:host(.ion-color.ion-activated) .item-native{color:var(--ion-color-contrast)}:host(.ion-focused) .item-native{color:var(--color-focused)}:host(.ion-focused) .item-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}:host(.ion-color.ion-focused) .item-native{color:var(--ion-color-contrast)}:host(.ion-color.ion-focused) .item-native::after{background:var(--ion-color-contrast)}@media (any-hover: hover){:host(.ion-activatable:not(.ion-focused):hover) .item-native{color:var(--color-hover)}:host(.ion-activatable:not(.ion-focused):hover) .item-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}:host(.ion-color.ion-activatable:not(.ion-focused):hover) .item-native{color:var(--ion-color-contrast)}:host(.ion-color.ion-activatable:not(.ion-focused):hover) .item-native::after{background:var(--ion-color-contrast)}}:host(.item-interactive-disabled:not(.item-multiple-inputs)){cursor:default;pointer-events:none}:host(.item-disabled){cursor:default;opacity:0.3;pointer-events:none}.item-native{border-radius:var(--border-radius);margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));padding-right:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;min-height:var(--min-height);-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:var(--background);overflow:inherit;-webkit-box-sizing:border-box;box-sizing:border-box;z-index:1}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){.item-native{padding-left:unset;padding-right:unset;-webkit-padding-start:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));padding-inline-start:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end)}}.item-native::-moz-focus-inner{border:0}.item-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0;-webkit-transition:var(--transition);transition:var(--transition);z-index:-1}button,a{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-drag:none}.item-inner{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:var(--inner-padding-start);padding-right:calc(var(--ion-safe-area-right, 0px) + var(--inner-padding-end));padding-top:var(--inner-padding-top);padding-bottom:var(--inner-padding-bottom);display:-ms-flexbox;display:flex;position:relative;-ms-flex:1;flex:1;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-item-align:stretch;align-self:stretch;min-height:inherit;border-width:var(--inner-border-width);border-style:var(--border-style);border-color:var(--border-color);-webkit-box-shadow:var(--inner-box-shadow);box-shadow:var(--inner-box-shadow);overflow:inherit;-webkit-box-sizing:border-box;box-sizing:border-box}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){.item-inner{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--inner-padding-start);padding-inline-start:var(--inner-padding-start);-webkit-padding-end:calc(var(--ion-safe-area-right, 0px) + var(--inner-padding-end));padding-inline-end:calc(var(--ion-safe-area-right, 0px) + var(--inner-padding-end))}}.item-bottom{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));padding-right:var(--inner-padding-end);padding-top:0;padding-bottom:0;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){.item-bottom{padding-left:unset;padding-right:unset;-webkit-padding-start:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));padding-inline-start:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));-webkit-padding-end:var(--inner-padding-end);padding-inline-end:var(--inner-padding-end)}}.item-detail-icon{color:var(--detail-icon-color);font-size:var(--detail-icon-font-size);opacity:var(--detail-icon-opacity)}::slotted(ion-icon){font-size:1.6em}::slotted(ion-button){--margin-top:0;--margin-bottom:0;--margin-start:0;--margin-end:0;z-index:1}::slotted(ion-label:not([slot=end])){-ms-flex:1;flex:1}:host(.item-input){-ms-flex-align:center;align-items:center}.input-wrapper{display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-item-align:stretch;align-self:stretch;text-overflow:ellipsis;overflow:inherit;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.item-label-stacked),:host(.item-label-floating){-ms-flex-align:start;align-items:start}:host(.item-label-stacked) .input-wrapper,:host(.item-label-floating) .input-wrapper{-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column}.item-highlight,.item-inner-highlight{left:0;right:0;top:0;bottom:0;border-radius:inherit;position:absolute;width:100%;height:100%;-webkit-transform:scaleX(0);transform:scaleX(0);-webkit-transition:border-bottom-width 200ms, -webkit-transform 200ms;transition:border-bottom-width 200ms, -webkit-transform 200ms;transition:transform 200ms, border-bottom-width 200ms;transition:transform 200ms, border-bottom-width 200ms, -webkit-transform 200ms;z-index:2;-webkit-box-sizing:border-box;box-sizing:border-box;pointer-events:none}:host(.item-interactive.ion-focused),:host(.item-interactive.item-has-focus),:host(.item-interactive.ion-touched.ion-invalid){--full-highlight-height:calc(var(--highlight-height) * var(--show-full-highlight));--inset-highlight-height:calc(var(--highlight-height) * var(--show-inset-highlight))}:host(.item-interactive.ion-focused),:host(.item-interactive.item-has-focus){--highlight-background:var(--highlight-color-focused)}:host(.item-interactive.ion-valid){--highlight-background:var(--highlight-color-valid)}:host(.item-interactive.ion-invalid){--highlight-background:var(--highlight-color-invalid)}:host(.item-interactive.ion-invalid) ::slotted([slot=helper]){display:none}::slotted([slot=error]){display:none;color:var(--highlight-color-invalid)}:host(.item-interactive.ion-invalid) ::slotted([slot=error]){display:block}:host(:not(.item-label)) ::slotted(ion-select){--padding-start:0;max-width:none}:host(.item-label-stacked) ::slotted(ion-select),:host(.item-label-floating) ::slotted(ion-select){--padding-top:8px;--padding-bottom:8px;--padding-start:0;-ms-flex-item-align:stretch;align-self:stretch;width:100%;max-width:100%}:host(:not(.item-label)) ::slotted(ion-datetime){--padding-start:0}:host(.item-label-stacked) ::slotted(ion-datetime),:host(.item-label-floating) ::slotted(ion-datetime){--padding-start:0;width:100%}:host(.item-multiple-inputs) ::slotted(ion-checkbox),:host(.item-multiple-inputs) ::slotted(ion-datetime),:host(.item-multiple-inputs) ::slotted(ion-radio),:host(.item-multiple-inputs) ::slotted(ion-select){position:relative}:host(.item-textarea){-ms-flex-align:stretch;align-items:stretch}::slotted(ion-reorder[slot]){margin-top:0;margin-bottom:0}ion-ripple-effect{color:var(--ripple-color)}:host(.item-fill-solid) ::slotted([slot=start]),:host(.item-fill-solid) ::slotted([slot=end]),:host(.item-fill-outline) ::slotted([slot=start]),:host(.item-fill-outline) ::slotted([slot=end]){-ms-flex-item-align:center;align-self:center}::slotted([slot=helper]),::slotted([slot=error]),.item-counter{padding-top:5px;font-size:12px;z-index:1}.item-counter{margin-left:auto;color:var(--ion-color-step-550, #737373);white-space:nowrap;-webkit-padding-start:16px;padding-inline-start:16px}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){.item-counter{margin-left:unset;-webkit-margin-start:auto;margin-inline-start:auto}}@media (prefers-reduced-motion: reduce){.item-highlight,.item-inner-highlight{-webkit-transition:none;transition:none}}:host{--min-height:44px;--transition:background-color 200ms linear, opacity 200ms linear;--padding-start:20px;--inner-padding-end:10px;--inner-border-width:0px 0px 0.55px 0px;--background:var(--ion-item-background, var(--ion-background-color, #fff));--background-activated:#000;--background-focused:#000;--background-hover:currentColor;--background-activated-opacity:.12;--background-focused-opacity:.15;--background-hover-opacity:.04;--border-color:var(--ion-item-border-color, var(--ion-border-color, var(--ion-color-step-250, #c8c7cc)));--color:var(--ion-item-color, var(--ion-text-color, #000));--highlight-height:0px;--highlight-color-focused:var(--ion-color-primary, #3880ff);--highlight-color-valid:var(--ion-color-success, #2dd36f);--highlight-color-invalid:var(--ion-color-danger, #eb445a);--bottom-padding-start:0px;font-size:17px}:host(.ion-activated){--transition:none}:host(.ion-color.ion-focused) .item-native::after{background:#000;opacity:0.15}:host(.ion-color.ion-activated) .item-native::after{background:#000;opacity:0.12}:host(.item-interactive){--show-full-highlight:0;--show-inset-highlight:1}:host(.item-lines-full){--border-width:0px 0px 0.55px 0px;--show-full-highlight:1;--show-inset-highlight:0}:host(.item-lines-inset){--inner-border-width:0px 0px 0.55px 0px;--show-full-highlight:0;--show-inset-highlight:1}:host(.item-lines-inset),:host(.item-lines-none){--border-width:0px;--show-full-highlight:0}:host(.item-lines-full),:host(.item-lines-none){--inner-border-width:0px;--show-inset-highlight:0}.item-highlight,.item-inner-highlight{-webkit-transition:none;transition:none}:host(.item-has-focus) .item-inner-highlight,:host(.item-has-focus) .item-highlight{border-top:none;border-right:none;border-left:none}::slotted([slot=start]){margin-left:0;margin-right:20px;margin-top:2px;margin-bottom:2px}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){::slotted([slot=start]){margin-left:unset;margin-right:unset;-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:20px;margin-inline-end:20px}}::slotted([slot=end]){margin-left:10px;margin-right:10px}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){::slotted([slot=end]){margin-left:unset;margin-right:unset;-webkit-margin-start:10px;margin-inline-start:10px;-webkit-margin-end:10px;margin-inline-end:10px}}::slotted(ion-icon[slot=start]),::slotted(ion-icon[slot=end]){margin-top:7px;margin-bottom:7px}::slotted(ion-toggle[slot=start]),::slotted(ion-toggle[slot=end]){margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}:host(.item-label-stacked) ::slotted([slot=end]),:host(.item-label-floating) ::slotted([slot=end]){margin-top:7px;margin-bottom:7px}::slotted(.button-small){--padding-top:0px;--padding-bottom:0px;--padding-start:.5em;--padding-end:.5em;height:24px;font-size:13px}::slotted(ion-avatar){width:36px;height:36px}::slotted(ion-thumbnail){width:56px;height:56px}::slotted(ion-avatar[slot=end]),::slotted(ion-thumbnail[slot=end]){margin-left:10px;margin-right:10px;margin-top:10px;margin-bottom:10px}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){::slotted(ion-avatar[slot=end]),::slotted(ion-thumbnail[slot=end]){margin-left:unset;margin-right:unset;-webkit-margin-start:10px;margin-inline-start:10px;-webkit-margin-end:10px;margin-inline-end:10px}}:host(.item-radio) ::slotted(ion-label),:host(.item-toggle) ::slotted(ion-label){margin-left:0px}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host(.item-radio) ::slotted(ion-label),:host(.item-toggle) ::slotted(ion-label){margin-left:unset;-webkit-margin-start:0px;margin-inline-start:0px}}::slotted(ion-label){margin-left:0;margin-right:8px;margin-top:10px;margin-bottom:10px}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){::slotted(ion-label){margin-left:unset;margin-right:unset;-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:8px;margin-inline-end:8px}}:host(.item-label-floating),:host(.item-label-stacked){--min-height:68px}:host(.item-label-stacked) ::slotted(ion-select),:host(.item-label-floating) ::slotted(ion-select){--padding-top:8px;--padding-bottom:8px;--padding-start:0px}:host(.item-label-fixed) ::slotted(ion-select),:host(.item-label-fixed) ::slotted(ion-datetime){--padding-start:0}',fT=':host{--border-radius:0px;--border-width:0px;--border-style:solid;--padding-top:0px;--padding-bottom:0px;--padding-end:0px;--padding-start:0px;--inner-border-width:0px;--inner-padding-top:0px;--inner-padding-bottom:0px;--inner-padding-start:0px;--inner-padding-end:0px;--inner-box-shadow:none;--show-full-highlight:0;--show-inset-highlight:0;--detail-icon-color:initial;--detail-icon-font-size:20px;--detail-icon-opacity:0.25;--color-activated:var(--color);--color-focused:var(--color);--color-hover:var(--color);--ripple-color:currentColor;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:block;position:relative;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;outline:none;color:var(--color);font-family:var(--ion-font-family, inherit);text-align:initial;text-decoration:none;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.ion-color:not(.item-fill-solid):not(.item-fill-outline)) .item-native{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.ion-color:not(.item-fill-solid):not(.item-fill-outline)) .item-native,:host(.ion-color:not(.item-fill-solid):not(.item-fill-outline)) .item-inner{border-color:var(--ion-color-shade)}:host(.ion-activated) .item-native{color:var(--color-activated)}:host(.ion-activated) .item-native::after{background:var(--background-activated);opacity:var(--background-activated-opacity)}:host(.ion-color.ion-activated) .item-native{color:var(--ion-color-contrast)}:host(.ion-focused) .item-native{color:var(--color-focused)}:host(.ion-focused) .item-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}:host(.ion-color.ion-focused) .item-native{color:var(--ion-color-contrast)}:host(.ion-color.ion-focused) .item-native::after{background:var(--ion-color-contrast)}@media (any-hover: hover){:host(.ion-activatable:not(.ion-focused):hover) .item-native{color:var(--color-hover)}:host(.ion-activatable:not(.ion-focused):hover) .item-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}:host(.ion-color.ion-activatable:not(.ion-focused):hover) .item-native{color:var(--ion-color-contrast)}:host(.ion-color.ion-activatable:not(.ion-focused):hover) .item-native::after{background:var(--ion-color-contrast)}}:host(.item-interactive-disabled:not(.item-multiple-inputs)){cursor:default;pointer-events:none}:host(.item-disabled){cursor:default;opacity:0.3;pointer-events:none}.item-native{border-radius:var(--border-radius);margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));padding-right:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;min-height:var(--min-height);-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:var(--background);overflow:inherit;-webkit-box-sizing:border-box;box-sizing:border-box;z-index:1}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){.item-native{padding-left:unset;padding-right:unset;-webkit-padding-start:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));padding-inline-start:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end)}}.item-native::-moz-focus-inner{border:0}.item-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0;-webkit-transition:var(--transition);transition:var(--transition);z-index:-1}button,a{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-drag:none}.item-inner{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:var(--inner-padding-start);padding-right:calc(var(--ion-safe-area-right, 0px) + var(--inner-padding-end));padding-top:var(--inner-padding-top);padding-bottom:var(--inner-padding-bottom);display:-ms-flexbox;display:flex;position:relative;-ms-flex:1;flex:1;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-item-align:stretch;align-self:stretch;min-height:inherit;border-width:var(--inner-border-width);border-style:var(--border-style);border-color:var(--border-color);-webkit-box-shadow:var(--inner-box-shadow);box-shadow:var(--inner-box-shadow);overflow:inherit;-webkit-box-sizing:border-box;box-sizing:border-box}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){.item-inner{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--inner-padding-start);padding-inline-start:var(--inner-padding-start);-webkit-padding-end:calc(var(--ion-safe-area-right, 0px) + var(--inner-padding-end));padding-inline-end:calc(var(--ion-safe-area-right, 0px) + var(--inner-padding-end))}}.item-bottom{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));padding-right:var(--inner-padding-end);padding-top:0;padding-bottom:0;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){.item-bottom{padding-left:unset;padding-right:unset;-webkit-padding-start:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));padding-inline-start:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));-webkit-padding-end:var(--inner-padding-end);padding-inline-end:var(--inner-padding-end)}}.item-detail-icon{color:var(--detail-icon-color);font-size:var(--detail-icon-font-size);opacity:var(--detail-icon-opacity)}::slotted(ion-icon){font-size:1.6em}::slotted(ion-button){--margin-top:0;--margin-bottom:0;--margin-start:0;--margin-end:0;z-index:1}::slotted(ion-label:not([slot=end])){-ms-flex:1;flex:1}:host(.item-input){-ms-flex-align:center;align-items:center}.input-wrapper{display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-item-align:stretch;align-self:stretch;text-overflow:ellipsis;overflow:inherit;-webkit-box-sizing:border-box;box-sizing:border-box}:host(.item-label-stacked),:host(.item-label-floating){-ms-flex-align:start;align-items:start}:host(.item-label-stacked) .input-wrapper,:host(.item-label-floating) .input-wrapper{-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column}.item-highlight,.item-inner-highlight{left:0;right:0;top:0;bottom:0;border-radius:inherit;position:absolute;width:100%;height:100%;-webkit-transform:scaleX(0);transform:scaleX(0);-webkit-transition:border-bottom-width 200ms, -webkit-transform 200ms;transition:border-bottom-width 200ms, -webkit-transform 200ms;transition:transform 200ms, border-bottom-width 200ms;transition:transform 200ms, border-bottom-width 200ms, -webkit-transform 200ms;z-index:2;-webkit-box-sizing:border-box;box-sizing:border-box;pointer-events:none}:host(.item-interactive.ion-focused),:host(.item-interactive.item-has-focus),:host(.item-interactive.ion-touched.ion-invalid){--full-highlight-height:calc(var(--highlight-height) * var(--show-full-highlight));--inset-highlight-height:calc(var(--highlight-height) * var(--show-inset-highlight))}:host(.item-interactive.ion-focused),:host(.item-interactive.item-has-focus){--highlight-background:var(--highlight-color-focused)}:host(.item-interactive.ion-valid){--highlight-background:var(--highlight-color-valid)}:host(.item-interactive.ion-invalid){--highlight-background:var(--highlight-color-invalid)}:host(.item-interactive.ion-invalid) ::slotted([slot=helper]){display:none}::slotted([slot=error]){display:none;color:var(--highlight-color-invalid)}:host(.item-interactive.ion-invalid) ::slotted([slot=error]){display:block}:host(:not(.item-label)) ::slotted(ion-select){--padding-start:0;max-width:none}:host(.item-label-stacked) ::slotted(ion-select),:host(.item-label-floating) ::slotted(ion-select){--padding-top:8px;--padding-bottom:8px;--padding-start:0;-ms-flex-item-align:stretch;align-self:stretch;width:100%;max-width:100%}:host(:not(.item-label)) ::slotted(ion-datetime){--padding-start:0}:host(.item-label-stacked) ::slotted(ion-datetime),:host(.item-label-floating) ::slotted(ion-datetime){--padding-start:0;width:100%}:host(.item-multiple-inputs) ::slotted(ion-checkbox),:host(.item-multiple-inputs) ::slotted(ion-datetime),:host(.item-multiple-inputs) ::slotted(ion-radio),:host(.item-multiple-inputs) ::slotted(ion-select){position:relative}:host(.item-textarea){-ms-flex-align:stretch;align-items:stretch}::slotted(ion-reorder[slot]){margin-top:0;margin-bottom:0}ion-ripple-effect{color:var(--ripple-color)}:host(.item-fill-solid) ::slotted([slot=start]),:host(.item-fill-solid) ::slotted([slot=end]),:host(.item-fill-outline) ::slotted([slot=start]),:host(.item-fill-outline) ::slotted([slot=end]){-ms-flex-item-align:center;align-self:center}::slotted([slot=helper]),::slotted([slot=error]),.item-counter{padding-top:5px;font-size:12px;z-index:1}.item-counter{margin-left:auto;color:var(--ion-color-step-550, #737373);white-space:nowrap;-webkit-padding-start:16px;padding-inline-start:16px}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){.item-counter{margin-left:unset;-webkit-margin-start:auto;margin-inline-start:auto}}@media (prefers-reduced-motion: reduce){.item-highlight,.item-inner-highlight{-webkit-transition:none;transition:none}}:host{--min-height:48px;--background:var(--ion-item-background, var(--ion-background-color, #fff));--background-activated:transparent;--background-focused:currentColor;--background-hover:currentColor;--background-activated-opacity:0;--background-focused-opacity:.12;--background-hover-opacity:.04;--border-color:var(--ion-item-border-color, var(--ion-border-color, var(--ion-color-step-150, rgba(0, 0, 0, 0.13))));--color:var(--ion-item-color, var(--ion-text-color, #000));--transition:opacity 15ms linear, background-color 15ms linear;--padding-start:16px;--inner-padding-end:16px;--inner-border-width:0 0 1px 0;--highlight-height:1px;--highlight-color-focused:var(--ion-color-primary, #3880ff);--highlight-color-valid:var(--ion-color-success, #2dd36f);--highlight-color-invalid:var(--ion-color-danger, #eb445a);font-size:16px;font-weight:normal;text-transform:none}:host(.item-fill-outline){--highlight-height:2px}:host(.item-fill-none.item-interactive.ion-focus) .item-highlight,:host(.item-fill-none.item-interactive.item-has-focus) .item-highlight,:host(.item-fill-none.item-interactive.ion-touched.ion-invalid) .item-highlight{-webkit-transform:scaleX(1);transform:scaleX(1);border-width:0 0 var(--full-highlight-height) 0;border-style:var(--border-style);border-color:var(--highlight-background)}:host(.item-fill-none.item-interactive.ion-focus) .item-native,:host(.item-fill-none.item-interactive.item-has-focus) .item-native,:host(.item-fill-none.item-interactive.ion-touched.ion-invalid) .item-native{border-bottom-color:var(--highlight-background)}:host(.item-fill-outline.item-interactive.ion-focus) .item-highlight,:host(.item-fill-outline.item-interactive.item-has-focus) .item-highlight{-webkit-transform:scaleX(1);transform:scaleX(1)}:host(.item-fill-outline.item-interactive.ion-focus) .item-highlight,:host(.item-fill-outline.item-interactive.item-has-focus) .item-highlight,:host(.item-fill-outline.item-interactive.ion-touched.ion-invalid) .item-highlight{border-width:var(--full-highlight-height);border-style:var(--border-style);border-color:var(--highlight-background)}:host(.item-fill-outline.item-interactive.ion-touched.ion-invalid) .item-native{border-color:var(--highlight-background)}:host(.item-fill-solid.item-interactive.ion-focus) .item-highlight,:host(.item-fill-solid.item-interactive.item-has-focus) .item-highlight,:host(.item-fill-solid.item-interactive.ion-touched.ion-invalid) .item-highlight{-webkit-transform:scaleX(1);transform:scaleX(1);border-width:0 0 var(--full-highlight-height) 0;border-style:var(--border-style);border-color:var(--highlight-background)}:host(.item-fill-solid.item-interactive.ion-focus) .item-native,:host(.item-fill-solid.item-interactive.item-has-focus) .item-native,:host(.item-fill-solid.item-interactive.ion-touched.ion-invalid) .item-native{border-bottom-color:var(--highlight-background)}:host(.ion-color.ion-activated) .item-native::after{background:transparent}:host(.item-has-focus) .item-native{caret-color:var(--highlight-background)}:host(.item-interactive){--border-width:0 0 1px 0;--inner-border-width:0;--show-full-highlight:1;--show-inset-highlight:0}:host(.item-lines-full){--border-width:0 0 1px 0;--show-full-highlight:1;--show-inset-highlight:0}:host(.item-lines-inset){--inner-border-width:0 0 1px 0;--show-full-highlight:0;--show-inset-highlight:1}:host(.item-lines-inset),:host(.item-lines-none){--border-width:0;--show-full-highlight:0}:host(.item-lines-full),:host(.item-lines-none){--inner-border-width:0;--show-inset-highlight:0}:host(.item-fill-outline) .item-highlight{--position-offset:calc(-1 * var(--border-width));left:var(--position-offset);top:var(--position-offset);width:calc(100% + 2 * var(--border-width));height:calc(100% + 2 * var(--border-width));-webkit-transition:none;transition:none}:host-context([dir=rtl]):host(.item-fill-outline) .item-highlight,:host-context([dir=rtl]).item-fill-outline .item-highlight{left:unset;right:unset;right:var(--position-offset)}:host(.item-fill-outline.ion-focused) .item-native,:host(.item-fill-outline.item-has-focus) .item-native{border-color:transparent}:host(.item-multi-line) ::slotted([slot=start]),:host(.item-multi-line) ::slotted([slot=end]){margin-top:16px;margin-bottom:16px;-ms-flex-item-align:start;align-self:flex-start}::slotted([slot=start]){margin-right:32px}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){::slotted([slot=start]){margin-right:unset;-webkit-margin-end:32px;margin-inline-end:32px}}::slotted([slot=end]){margin-left:32px}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){::slotted([slot=end]){margin-left:unset;-webkit-margin-start:32px;margin-inline-start:32px}}:host(.item-fill-solid) ::slotted([slot=start]),:host(.item-fill-solid) ::slotted([slot=end]),:host(.item-fill-outline) ::slotted([slot=start]),:host(.item-fill-outline) ::slotted([slot=end]){-ms-flex-item-align:center;align-self:center}::slotted(ion-icon){color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.54);font-size:24px}:host(.ion-color:not(.item-fill-solid):not(.item-fill-outline)) ::slotted(ion-icon){color:var(--ion-color-contrast)}::slotted(ion-icon[slot]){margin-top:12px;margin-bottom:12px}::slotted(ion-icon[slot=start]){margin-right:32px}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){::slotted(ion-icon[slot=start]){margin-right:unset;-webkit-margin-end:32px;margin-inline-end:32px}}::slotted(ion-icon[slot=end]){margin-left:16px}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){::slotted(ion-icon[slot=end]){margin-left:unset;-webkit-margin-start:16px;margin-inline-start:16px}}:host(.item-fill-solid) ::slotted(ion-icon[slot=start]),:host(.item-fill-outline) ::slotted(ion-icon[slot=start]){margin-right:8px}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host(.item-fill-solid) ::slotted(ion-icon[slot=start]),:host(.item-fill-outline) ::slotted(ion-icon[slot=start]){margin-right:unset;-webkit-margin-end:8px;margin-inline-end:8px}}::slotted(ion-toggle[slot=start]),::slotted(ion-toggle[slot=end]){margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}::slotted(ion-note){margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-ms-flex-item-align:start;align-self:flex-start;font-size:11px}::slotted(ion-note[slot]:not([slot=helper]):not([slot=error])){padding-left:0;padding-right:0;padding-top:18px;padding-bottom:10px}::slotted(ion-note[slot=start]){padding-right:16px}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){::slotted(ion-note[slot=start]){padding-right:unset;-webkit-padding-end:16px;padding-inline-end:16px}}::slotted(ion-note[slot=end]){padding-left:16px}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){::slotted(ion-note[slot=end]){padding-left:unset;-webkit-padding-start:16px;padding-inline-start:16px}}::slotted(ion-avatar){width:40px;height:40px}::slotted(ion-thumbnail){width:56px;height:56px}::slotted(ion-avatar),::slotted(ion-thumbnail){margin-top:8px;margin-bottom:8px}::slotted(ion-avatar[slot=start]),::slotted(ion-thumbnail[slot=start]){margin-right:16px}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){::slotted(ion-avatar[slot=start]),::slotted(ion-thumbnail[slot=start]){margin-right:unset;-webkit-margin-end:16px;margin-inline-end:16px}}::slotted(ion-avatar[slot=end]),::slotted(ion-thumbnail[slot=end]){margin-left:16px}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){::slotted(ion-avatar[slot=end]),::slotted(ion-thumbnail[slot=end]){margin-left:unset;-webkit-margin-start:16px;margin-inline-start:16px}}::slotted(ion-label){margin-left:0;margin-right:0;margin-top:10px;margin-bottom:10px}:host(.item-label-stacked) ::slotted([slot=end]),:host(.item-label-floating) ::slotted([slot=end]){margin-top:7px;margin-bottom:7px}:host(.item-label-fixed) ::slotted(ion-select),:host(.item-label-fixed) ::slotted(ion-datetime){--padding-start:8px}:host(.item-toggle) ::slotted(ion-label),:host(.item-radio) ::slotted(ion-label){margin-left:0}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host(.item-toggle) ::slotted(ion-label),:host(.item-radio) ::slotted(ion-label){margin-left:unset;-webkit-margin-start:0;margin-inline-start:0}}::slotted(.button-small){--padding-top:0;--padding-bottom:0;--padding-start:.6em;--padding-end:.6em;height:25px;font-size:12px}:host(.item-label-floating),:host(.item-label-stacked){--min-height:55px}:host(.item-label-stacked) ::slotted(ion-select),:host(.item-label-floating) ::slotted(ion-select){--padding-top:8px;--padding-bottom:8px;--padding-start:0}:host(.ion-focused:not(.ion-color)) ::slotted(.label-stacked),:host(.ion-focused:not(.ion-color)) ::slotted(.label-floating),:host(.item-has-focus:not(.ion-color)) ::slotted(.label-stacked),:host(.item-has-focus:not(.ion-color)) ::slotted(.label-floating){color:var(--ion-color-primary, #3880ff)}:host(.ion-color){--highlight-color-focused:var(--ion-color-contrast)}:host(.item-label-color){--highlight-color-focused:var(--ion-color-base)}:host(.item-fill-solid.ion-color),:host(.item-fill-outline.ion-color){--highlight-color-focused:var(--ion-color-base)}:host(.item-fill-solid){--background:var(--ion-color-step-50, #f2f2f2);--background-hover:var(--ion-color-step-100, #e6e6e6);--background-focused:var(--ion-color-step-150, #d9d9d9);--border-width:0 0 1px 0;--inner-border-width:0;border-top-left-radius:4px;border-top-right-radius:4px;border-bottom-right-radius:0;border-bottom-left-radius:0}:host-context([dir=rtl]):host(.item-fill-solid),:host-context([dir=rtl]).item-fill-solid{border-top-left-radius:4px;border-top-right-radius:4px;border-bottom-right-radius:0;border-bottom-left-radius:0}:host(.item-fill-solid) .item-native{--border-color:var(--ion-color-step-500, gray)}:host(.item-fill-solid.ion-focused) .item-native,:host(.item-fill-solid.item-has-focus) .item-native{--background:var(--background-focused)}:host(.item-fill-solid.item-shape-round){border-top-left-radius:16px;border-top-right-radius:16px;border-bottom-right-radius:0;border-bottom-left-radius:0}:host-context([dir=rtl]):host(.item-fill-solid.item-shape-round),:host-context([dir=rtl]).item-fill-solid.item-shape-round{border-top-left-radius:16px;border-top-right-radius:16px;border-bottom-right-radius:0;border-bottom-left-radius:0}@media (any-hover: hover){:host(.item-fill-solid:hover) .item-native{--background:var(--background-hover);--border-color:var(--ion-color-step-750, #404040)}}:host(.item-fill-outline){--ripple-color:transparent;--background-focused:transparent;--background-hover:transparent;--border-color:var(--ion-color-step-500, gray);--border-width:1px;border:none;overflow:visible}:host(.item-fill-outline) .item-native{--native-padding-left:16px;border-radius:4px}:host(.item-fill-outline.item-shape-round) .item-native{--inner-padding-start:16px;border-radius:28px}:host(.item-fill-outline.item-shape-round) .item-bottom{padding-left:32px}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host(.item-fill-outline.item-shape-round) .item-bottom{padding-left:unset;-webkit-padding-start:32px;padding-inline-start:32px}}:host(.item-fill-outline.item-label-floating.ion-focused) .item-native ::slotted(ion-input:not(:first-child)),:host(.item-fill-outline.item-label-floating.ion-focused) .item-native ::slotted(ion-textarea:not(:first-child)),:host(.item-fill-outline.item-label-floating.item-has-focus) .item-native ::slotted(ion-input:not(:first-child)),:host(.item-fill-outline.item-label-floating.item-has-focus) .item-native ::slotted(ion-textarea:not(:first-child)),:host(.item-fill-outline.item-label-floating.item-has-value) .item-native ::slotted(ion-input:not(:first-child)),:host(.item-fill-outline.item-label-floating.item-has-value) .item-native ::slotted(ion-textarea:not(:first-child)){-webkit-transform:translateY(-14px);transform:translateY(-14px)}@media (any-hover: hover){:host(.item-fill-outline:hover) .item-native{--border-color:var(--ion-color-step-750, #404040)}}.item-counter{letter-spacing:0.0333333333em}',hT=Nl(class extends Bl{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.labelColorStyles={},this.itemStyles=new Map,this.multipleInputs=!1,this.focusable=!0,this.button=!1,this.detailIcon=sy,this.disabled=!1,this.counter=!1,this.routerDirection="forward",this.type="button"}counterFormatterChanged(){this.updateCounterOutput(this.getFirstInput())}handleIonChange(j){this.counter&&j.target===this.getFirstInput()&&this.updateCounterOutput(j.target)}labelColorChanged(j){const{color:ht}=this;ht===void 0&&(this.labelColorStyles=j.detail)}itemStyle(j){j.stopPropagation();const ht=j.target.tagName,e=j.detail,B={},V=this.itemStyles.get(ht)||{};let f=!1;Object.keys(e).forEach(l=>{if(e[l]){const m=`item-${l}`;V[m]||(f=!0),B[m]=!0}}),!f&&Object.keys(B).length!==Object.keys(V).length&&(f=!0),f&&(this.itemStyles.set(ht,B),Bh(this))}connectedCallback(){this.counter&&this.updateCounterOutput(this.getFirstInput()),this.hasStartEl()}componentDidUpdate(){const j=this.getFirstInput();j&&!this.clickListener&&(this.clickListener=ht=>this.delegateFocus(ht,j),this.el.addEventListener("click",this.clickListener))}disconnectedCallback(){this.getFirstInput()&&this.clickListener&&(this.el.removeEventListener("click",this.clickListener),this.clickListener=void 0)}componentDidLoad(){Pu(()=>{this.setMultipleInputs(),this.focusable=this.isFocusable()})}setMultipleInputs(){const j=this.el.querySelectorAll("ion-checkbox, ion-datetime, ion-select, ion-radio"),ht=this.el.querySelectorAll("ion-input, ion-range, ion-searchbar, ion-segment, ion-textarea, ion-toggle"),e=this.el.querySelectorAll("ion-anchor, ion-button, a, button");this.multipleInputs=j.length+ht.length>1||j.length+e.length>1||j.length>0&&this.isClickable()}hasCover(){return this.el.querySelectorAll("ion-checkbox, ion-datetime, ion-select, ion-radio").length===1&&!this.multipleInputs}isClickable(){return this.href!==void 0||this.button}canActivate(){return this.isClickable()||this.hasCover()}isFocusable(){const j=this.el.querySelector(".ion-focusable");return this.canActivate()||j!==null}getFirstInput(){return this.el.querySelectorAll("ion-input, ion-textarea")[0]}delegateFocus(j,ht){const e=j.target.tagName==="ION-ITEM";let B=!1;document.activeElement&&(B=ht.querySelector("input, textarea")===document.activeElement),e&&(B||!this.multipleInputs)&&(ht.fireFocusEvents=!1,ht.setBlur(),ht.setFocus(),Pu(()=>{ht.fireFocusEvents=!0}))}updateCounterOutput(j){var ht,e;const{counter:B,counterFormatter:V,defaultCounterFormatter:f}=this;if(B&&!this.multipleInputs&&(j==null?void 0:j.maxlength)!==void 0){const l=(e=(ht=j==null?void 0:j.value)===null||ht===void 0?void 0:ht.toString().length)!==null&&e!==void 0?e:0;if(V===void 0)this.counterString=f(l,j.maxlength);else try{this.counterString=V(l,j.maxlength)}catch(m){aT("Exception in provided `counterFormatter`.",m),this.counterString=f(l,j.maxlength)}}}defaultCounterFormatter(j,ht){return`${j} / ${ht}`}hasStartEl(){this.el.querySelector('[slot="start"]')!==null&&this.el.classList.add("item-has-start-slot")}render(){const{counterString:j,detail:ht,detailIcon:e,download:B,fill:V,labelColorStyles:f,lines:l,disabled:m,href:x,rel:t,shape:a,target:i,routerAnimation:r,routerDirection:n}=this,d={},s=Ms(this),o=this.isClickable(),y=this.canActivate(),g=o?x===void 0?"button":"a":"div",b=g==="button"?{type:this.type}:{download:B,href:x,rel:t,target:i},v=o?{onClick:A=>{sb(x,A,n,r)}}:{},_=ht!==void 0?ht:s==="ios"&&o;this.itemStyles.forEach(A=>{Object.assign(d,A)});const u=m||d["item-interactive-disabled"]?"true":null,T=V||"none",c=Ad("ion-list",this.el);return zi(Tl,{"aria-disabled":u,class:Object.assign(Object.assign(Object.assign({},d),f),jf(this.color,{item:!0,[s]:!0,[`item-lines-${l}`]:l!==void 0,[`item-fill-${T}`]:!0,[`item-shape-${a}`]:a!==void 0,"item-disabled":m,"in-list":c,"item-multiple-inputs":this.multipleInputs,"ion-activatable":y,"ion-focusable":this.focusable,"item-rtl":document.dir==="rtl"})),role:c?"listitem":null},zi(g,Object.assign({},b,{class:"item-native",part:"native",disabled:m},v),zi("slot",{name:"start"}),zi("div",{class:"item-inner"},zi("div",{class:"input-wrapper"},zi("slot",null)),zi("slot",{name:"end"}),_&&zi("ion-icon",{icon:e,lazy:!1,class:"item-detail-icon",part:"detail-icon","aria-hidden":"true","flip-rtl":e===sy}),zi("div",{class:"item-inner-highlight"})),y&&s==="md"&&zi("ion-ripple-effect",null),zi("div",{class:"item-highlight"})),zi("div",{class:"item-bottom"},zi("slot",{name:"error"}),zi("slot",{name:"helper"}),j&&zi("ion-note",{class:"item-counter"},j)))}static get delegatesFocus(){return!0}get el(){return this}static get watchers(){return{counterFormatter:["counterFormatterChanged"]}}static get style(){return{ios:uT,md:fT}}},[49,"ion-item",{color:[513],button:[4],detail:[4],detailIcon:[1,"detail-icon"],disabled:[4],download:[1],fill:[1],shape:[1],href:[1],rel:[1],lines:[1],counter:[4],routerAnimation:[16],routerDirection:[1,"router-direction"],target:[1],type:[1],counterFormatter:[16],multipleInputs:[32],focusable:[32],counterString:[32]},[[0,"ionChange","handleIonChange"],[0,"ionColor","labelColorChanged"],[0,"ionStyle","itemStyle"]]]);function dT(){if(typeof customElements>"u")return;["ion-item","ion-icon","ion-note","ion-ripple-effect"].forEach(ht=>{switch(ht){case"ion-item":customElements.get(ht)||customElements.define(ht,hT);break;case"ion-icon":customElements.get(ht)||T5();break;case"ion-note":customElements.get(ht)||cT();break;case"ion-ripple-effect":customElements.get(ht)||ng();break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const pT=".item.sc-ion-label-ios-h,.item .sc-ion-label-ios-h{--color:initial;display:block;color:var(--color);font-family:var(--ion-font-family, inherit);font-size:inherit;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}.ion-color.sc-ion-label-ios-h{color:var(--ion-color-base)}.ion-text-wrap.sc-ion-label-ios-h,[text-wrap].sc-ion-label-ios-h{white-space:normal}.item-interactive-disabled.sc-ion-label-ios-h:not(.item-multiple-inputs),.item-interactive-disabled:not(.item-multiple-inputs) .sc-ion-label-ios-h{cursor:default;opacity:0.3;pointer-events:none}.item-input.sc-ion-label-ios-h,.item-input .sc-ion-label-ios-h{-ms-flex:initial;flex:initial;max-width:200px;pointer-events:none}.item-textarea.sc-ion-label-ios-h,.item-textarea .sc-ion-label-ios-h{-ms-flex-item-align:baseline;align-self:baseline}.label-fixed.sc-ion-label-ios-h{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}.label-stacked.sc-ion-label-ios-h,.label-floating.sc-ion-label-ios-h{margin-bottom:0;-ms-flex-item-align:stretch;align-self:stretch;width:auto;max-width:100%}.label-no-animate.label-floating.sc-ion-label-ios-h{-webkit-transition:none;transition:none}.sc-ion-label-ios-s h1,.sc-ion-label-ios-s h2,.sc-ion-label-ios-s h3,.sc-ion-label-ios-s h4,.sc-ion-label-ios-s h5,.sc-ion-label-ios-s h6{text-overflow:inherit;overflow:inherit}.ion-text-wrap.sc-ion-label-ios-h,[text-wrap].sc-ion-label-ios-h{font-size:14px;line-height:1.5}.label-stacked.sc-ion-label-ios-h{margin-bottom:4px;font-size:14px}.label-floating.sc-ion-label-ios-h{margin-bottom:0;-webkit-transform:translate(0, 29px);transform:translate(0, 29px);-webkit-transform-origin:left top;transform-origin:left top;-webkit-transition:-webkit-transform 150ms ease-in-out;transition:-webkit-transform 150ms ease-in-out;transition:transform 150ms ease-in-out;transition:transform 150ms ease-in-out, -webkit-transform 150ms ease-in-out}[dir=rtl].sc-ion-label-ios-h -no-combinator.label-floating.sc-ion-label-ios-h,[dir=rtl] .sc-ion-label-ios-h -no-combinator.label-floating.sc-ion-label-ios-h,[dir=rtl].label-floating.sc-ion-label-ios-h,[dir=rtl] .label-floating.sc-ion-label-ios-h{-webkit-transform-origin:right top;transform-origin:right top}.item-textarea.label-floating.sc-ion-label-ios-h,.item-textarea .label-floating.sc-ion-label-ios-h{-webkit-transform:translate(0, 28px);transform:translate(0, 28px)}.item-has-focus.label-floating.sc-ion-label-ios-h,.item-has-focus .label-floating.sc-ion-label-ios-h,.item-has-placeholder.sc-ion-label-ios-h:not(.item-input).label-floating,.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-ios-h,.item-has-value.label-floating.sc-ion-label-ios-h,.item-has-value .label-floating.sc-ion-label-ios-h{-webkit-transform:scale(0.82);transform:scale(0.82)}.sc-ion-label-ios-s h1{margin-left:0;margin-right:0;margin-top:3px;margin-bottom:2px;font-size:22px;font-weight:normal}.sc-ion-label-ios-s h2{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:17px;font-weight:normal}.sc-ion-label-ios-s h3,.sc-ion-label-ios-s h4,.sc-ion-label-ios-s h5,.sc-ion-label-ios-s h6{margin-left:0;margin-right:0;margin-top:0;margin-bottom:3px;font-size:14px;font-weight:normal;line-height:normal}.sc-ion-label-ios-s p{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:14px;line-height:normal;text-overflow:inherit;overflow:inherit}.sc-ion-label-ios-s>p{color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.4)}.sc-ion-label-ios-h.in-item-color.sc-ion-label-ios-s>p{color:inherit}.sc-ion-label-ios-s h2:last-child,.sc-ion-label-ios-s h3:last-child,.sc-ion-label-ios-s h4:last-child,.sc-ion-label-ios-s h5:last-child,.sc-ion-label-ios-s h6:last-child,.sc-ion-label-ios-s p:last-child{margin-bottom:0}",vT='.item.sc-ion-label-md-h,.item .sc-ion-label-md-h{--color:initial;display:block;color:var(--color);font-family:var(--ion-font-family, inherit);font-size:inherit;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}.ion-color.sc-ion-label-md-h{color:var(--ion-color-base)}.ion-text-wrap.sc-ion-label-md-h,[text-wrap].sc-ion-label-md-h{white-space:normal}.item-interactive-disabled.sc-ion-label-md-h:not(.item-multiple-inputs),.item-interactive-disabled:not(.item-multiple-inputs) .sc-ion-label-md-h{cursor:default;opacity:0.3;pointer-events:none}.item-input.sc-ion-label-md-h,.item-input .sc-ion-label-md-h{-ms-flex:initial;flex:initial;max-width:200px;pointer-events:none}.item-textarea.sc-ion-label-md-h,.item-textarea .sc-ion-label-md-h{-ms-flex-item-align:baseline;align-self:baseline}.label-fixed.sc-ion-label-md-h{-ms-flex:0 0 100px;flex:0 0 100px;width:100px;min-width:100px;max-width:200px}.label-stacked.sc-ion-label-md-h,.label-floating.sc-ion-label-md-h{margin-bottom:0;-ms-flex-item-align:stretch;align-self:stretch;width:auto;max-width:100%}.label-no-animate.label-floating.sc-ion-label-md-h{-webkit-transition:none;transition:none}.sc-ion-label-md-s h1,.sc-ion-label-md-s h2,.sc-ion-label-md-s h3,.sc-ion-label-md-s h4,.sc-ion-label-md-s h5,.sc-ion-label-md-s h6{text-overflow:inherit;overflow:inherit}.ion-text-wrap.sc-ion-label-md-h,[text-wrap].sc-ion-label-md-h{line-height:1.5}.label-stacked.sc-ion-label-md-h,.label-floating.sc-ion-label-md-h{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-transform-origin:top left;transform-origin:top left}.label-stacked.label-rtl.sc-ion-label-md-h,.label-floating.label-rtl.sc-ion-label-md-h{-webkit-transform-origin:top right;transform-origin:top right}.label-stacked.sc-ion-label-md-h{-webkit-transform:translateY(50%) scale(0.75);transform:translateY(50%) scale(0.75);-webkit-transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.label-floating.sc-ion-label-md-h{-webkit-transform:translateY(96%);transform:translateY(96%);-webkit-transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 150ms cubic-bezier(0.4, 0, 0.2, 1)}.ion-focused.label-floating.sc-ion-label-md-h,.ion-focused .label-floating.sc-ion-label-md-h,.item-has-focus.label-floating.sc-ion-label-md-h,.item-has-focus .label-floating.sc-ion-label-md-h,.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating,.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h,.item-has-value.label-floating.sc-ion-label-md-h,.item-has-value .label-floating.sc-ion-label-md-h{-webkit-transform:translateY(50%) scale(0.75);transform:translateY(50%) scale(0.75)}.item-fill-outline.ion-focused.label-floating.sc-ion-label-md-h,.item-fill-outline.ion-focused .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-focus.label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-focus .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating,.item-fill-outline.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-value.label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-value .label-floating.sc-ion-label-md-h{-webkit-transform:translateY(-6px) scale(0.75);transform:translateY(-6px) scale(0.75);position:relative;max-width:-webkit-min-content;max-width:-moz-min-content;max-width:min-content;background-color:var(--ion-item-background, var(--ion-background-color, #fff));overflow:visible;z-index:3}.item-fill-outline.ion-focused.label-floating.sc-ion-label-md-h::before,.item-fill-outline.ion-focused .label-floating.sc-ion-label-md-h::before,.item-fill-outline.ion-focused.label-floating.sc-ion-label-md-h::after,.item-fill-outline.ion-focused .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-focus.label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-focus .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-focus.label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-focus .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating::before,.item-fill-outline.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating::after,.item-fill-outline.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-value.label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-value .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-value.label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-value .label-floating.sc-ion-label-md-h::after{position:absolute;width:4px;height:100%;background-color:var(--ion-item-background, var(--ion-background-color, #fff));content:""}.item-fill-outline.ion-focused.label-floating.sc-ion-label-md-h::before,.item-fill-outline.ion-focused .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-focus.label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-focus .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating::before,.item-fill-outline.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-value.label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-value .label-floating.sc-ion-label-md-h::before{left:calc(-1 * 4px)}.item-fill-outline.ion-focused.label-floating.sc-ion-label-md-h::after,.item-fill-outline.ion-focused .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-focus.label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-focus .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating::after,.item-fill-outline.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-value.label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-value .label-floating.sc-ion-label-md-h::after{right:calc(-1 * 4px)}.item-fill-outline.ion-focused.item-has-start-slot.label-floating.sc-ion-label-md-h,.item-fill-outline.ion-focused.item-has-start-slot .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-focus.item-has-start-slot.label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-focus.item-has-start-slot .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).item-has-start-slot.label-floating,.item-fill-outline.item-has-placeholder:not(.item-input).item-has-start-slot .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-value.item-has-start-slot.label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-value.item-has-start-slot .label-floating.sc-ion-label-md-h{-webkit-transform:translateX(-32px) translateY(-6px) scale(0.75);transform:translateX(-32px) translateY(-6px) scale(0.75)}.item-fill-outline.ion-focused.item-has-start-slot.label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.ion-focused.item-has-start-slot .label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.item-has-focus.item-has-start-slot.label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.item-has-focus.item-has-start-slot .label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).item-has-start-slot.label-floating.label-rtl,.item-fill-outline.item-has-placeholder:not(.item-input).item-has-start-slot .label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.item-has-value.item-has-start-slot.label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.item-has-value.item-has-start-slot .label-floating.label-rtl.sc-ion-label-md-h{-webkit-transform:translateX(calc(-1 * -32px)) translateY(-6px) scale(0.75);transform:translateX(calc(-1 * -32px)) translateY(-6px) scale(0.75)}.ion-focused.label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-focused .label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-focused.label-floating.sc-ion-label-md-h:not(.ion-color),.ion-focused .label-floating.sc-ion-label-md-h:not(.ion-color),.item-has-focus.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-has-focus .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-has-focus.label-floating.sc-ion-label-md-h:not(.ion-color),.item-has-focus .label-floating.sc-ion-label-md-h:not(.ion-color){color:var(--ion-color-primary, #3880ff)}.ion-focused.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-focused.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-focused.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.ion-focused.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color),.item-has-focus.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-has-focus.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-has-focus.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.item-has-focus.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color){color:var(--ion-color-contrast)}.item-fill-solid.ion-focused.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.ion-focused.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.ion-focused.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.ion-focused.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.ion-focused.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.ion-focused.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.ion-focused.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.ion-focused.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.item-has-focus.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.item-has-focus.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.item-has-focus.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.item-has-focus.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.item-has-focus.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.item-has-focus.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.item-has-focus.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.item-has-focus.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color){color:var(--ion-color-base)}.ion-invalid.ion-touched.label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-invalid.ion-touched .label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-invalid.ion-touched.label-floating.sc-ion-label-md-h:not(.ion-color),.ion-invalid.ion-touched .label-floating.sc-ion-label-md-h:not(.ion-color){color:var(--highlight-color-invalid)}.sc-ion-label-md-s h1{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:24px;font-weight:normal}.sc-ion-label-md-s h2{margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:16px;font-weight:normal}.sc-ion-label-md-s h3,.sc-ion-label-md-s h4,.sc-ion-label-md-s h5,.sc-ion-label-md-s h6{margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:14px;font-weight:normal;line-height:normal}.sc-ion-label-md-s p{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:14px;line-height:20px;text-overflow:inherit;overflow:inherit}.sc-ion-label-md-s>p{color:var(--ion-color-step-600, #666666)}.sc-ion-label-md-h.in-item-color.sc-ion-label-md-s>p{color:inherit}',gT=Nl(class extends Bl{constructor(){super(),this.__registerHost(),this.ionColor=Zs(this,"ionColor",7),this.ionStyle=Zs(this,"ionStyle",7),this.inRange=!1,this.noAnimate=!1}componentWillLoad(){this.inRange=!!this.el.closest("ion-range"),this.noAnimate=this.position==="floating",this.emitStyle(),this.emitColor()}componentDidLoad(){this.noAnimate&&setTimeout(()=>{this.noAnimate=!1},1e3)}colorChanged(){this.emitColor()}positionChanged(){this.emitStyle()}emitColor(){const{color:j}=this;this.ionColor.emit({"item-label-color":j!==void 0,[`ion-color-${j}`]:j!==void 0})}emitStyle(){const{inRange:j,position:ht}=this;j||this.ionStyle.emit({label:!0,[`label-${ht}`]:ht!==void 0})}render(){const j=this.position,ht=Ms(this);return zi(Tl,{class:jf(this.color,{[ht]:!0,"in-item-color":Ad("ion-item.ion-color",this.el),[`label-${j}`]:j!==void 0,["label-no-animate"]:this.noAnimate,"label-rtl":document.dir==="rtl"})})}get el(){return this}static get watchers(){return{color:["colorChanged"],position:["positionChanged"]}}static get style(){return{ios:pT,md:vT}}},[34,"ion-label",{color:[513],position:[1],noAnimate:[32]}]);function mT(){if(typeof customElements>"u")return;["ion-label"].forEach(ht=>{switch(ht){case"ion-label":customElements.get(ht)||customElements.define(ht,gT);break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const ig={getEngine(){var j;const ht=window;return ht.TapticEngine||((j=ht.Capacitor)===null||j===void 0?void 0:j.isPluginAvailable("Haptics"))&&ht.Capacitor.Plugins.Haptics},available(){return!!this.getEngine()},isCordova(){return!!window.TapticEngine},isCapacitor(){return!!window.Capacitor},impact(j){const ht=this.getEngine();if(!ht)return;const e=this.isCapacitor()?j.style.toUpperCase():j.style;ht.impact({style:e})},notification(j){const ht=this.getEngine();if(!ht)return;const e=this.isCapacitor()?j.style.toUpperCase():j.style;ht.notification({style:e})},selection(){this.impact({style:"light"})},selectionStart(){const j=this.getEngine();!j||(this.isCapacitor()?j.selectionStart():j.gestureSelectionStart())},selectionChanged(){const j=this.getEngine();!j||(this.isCapacitor()?j.selectionChanged():j.gestureSelectionChanged())},selectionEnd(){const j=this.getEngine();!j||(this.isCapacitor()?j.selectionEnd():j.gestureSelectionEnd())}};const yT=()=>{ig.selectionStart()},bT=()=>{ig.selectionChanged()},xT=()=>{ig.selectionEnd()};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const wT=100;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */let x0=0;const w0=new WeakMap,_T=j=>({create(ht){return AT(j,ht)},dismiss(ht,e,B){return ET(document,ht,e,j,B)},async getTop(){return Md(document,j)}}),kT=_T("ion-alert");const TT=j=>{typeof document<"u"&&CT(document);const ht=x0++;j.overlayIndex=ht,j.hasAttribute("id")||(j.id=`ion-overlay-${ht}`)},AT=(j,ht)=>typeof window<"u"&&typeof window.customElements<"u"?window.customElements.whenDefined(j).then(()=>{const e=document.createElement(j);return e.classList.add("overlay-hidden"),Object.assign(e,Object.assign(Object.assign({},ht),{hasController:!0})),ub(document).appendChild(e),new Promise(B=>b0(e,B))}):Promise.resolve(),Sd='[tabindex]:not([tabindex^="-"]), input:not([type=hidden]):not([tabindex^="-"]), textarea:not([tabindex^="-"]), button:not([tabindex^="-"]), select:not([tabindex^="-"]), .ion-focusable:not([tabindex^="-"])',dy=(j,ht)=>{let e=j.querySelector(Sd);const B=e==null?void 0:e.shadowRoot;B&&(e=B.querySelector(Sd)||e),e?f5(e):ht.focus()},ST=j=>j.classList.contains("overlay-hidden"),py=(j,ht)=>{const e=Array.from(j.querySelectorAll(Sd));let B=e.length>0?e[e.length-1]:null;const V=B==null?void 0:B.shadowRoot;V&&(B=V.querySelector(Sd)||B),B?B.focus():ht.focus()},MT=(j,ht)=>{const e=Md(ht,"ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover"),B=j.target;if(!e||!B||e.classList.contains("ion-disable-focus-trap"))return;const V=()=>{if(e===B)e.lastFocus=void 0;else{const l=l5(e);if(!l.contains(B))return;const m=l.querySelector(".ion-overlay-wrapper");if(!m)return;if(m.contains(B))e.lastFocus=B;else{const x=e.lastFocus;dy(m,e),x===ht.activeElement&&py(m,e),e.lastFocus=ht.activeElement}}},f=()=>{if(e.contains(B))e.lastFocus=B;else{const l=e.lastFocus;dy(e,e),l===ht.activeElement&&py(e,e),e.lastFocus=ht.activeElement}};e.shadowRoot?f():V()},CT=j=>{x0===0&&(x0=1,j.addEventListener("focus",ht=>{MT(ht,j)},!0),j.addEventListener("ionBackButton",ht=>{const e=Md(j);e!=null&&e.backdropDismiss&&ht.detail.register(wT,()=>e.dismiss(void 0,Np))}),j.addEventListener("keyup",ht=>{if(ht.key==="Escape"){const e=Md(j);e!=null&&e.backdropDismiss&&e.dismiss(void 0,Np)}}))},ET=(j,ht,e,B,V)=>{const f=Md(j,B,V);return f?f.dismiss(ht,e):Promise.reject("overlay does not exist")},LT=(j,ht)=>(ht===void 0&&(ht="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast"),Array.from(j.querySelectorAll(ht)).filter(e=>e.overlayIndex>0)),Md=(j,ht,e)=>{const B=LT(j,ht).filter(V=>!ST(V));return e===void 0?B[B.length-1]:B.find(V=>V.id===e)},cb=(j=!1)=>{const e=ub(document).querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");!e||(j?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden"))},DT=async(j,ht,e,B,V)=>{var f,l;if(j.presented)return;cb(!0),j.presented=!0,j.willPresent.emit(),(f=j.willPresentShorthand)===null||f===void 0||f.emit();const m=Ms(j),x=j.enterAnimation?j.enterAnimation:mc.get(ht,m==="ios"?e:B);await fb(j,x,j.el,V)&&(j.didPresent.emit(),(l=j.didPresentShorthand)===null||l===void 0||l.emit()),j.el.tagName!=="ION-TOAST"&&PT(j.el),j.keyboardClose&&(document.activeElement===null||!j.el.contains(document.activeElement))&&j.el.focus()},PT=async j=>{let ht=document.activeElement;if(!ht)return;const e=ht==null?void 0:ht.shadowRoot;e&&(ht=e.querySelector(Sd)||ht),await j.onDidDismiss(),ht.focus()},IT=async(j,ht,e,B,V,f,l)=>{var m,x;if(!j.presented)return!1;cb(!1),j.presented=!1;try{j.el.style.setProperty("pointer-events","none"),j.willDismiss.emit({data:ht,role:e}),(m=j.willDismissShorthand)===null||m===void 0||m.emit({data:ht,role:e});const t=Ms(j),a=j.leaveAnimation?j.leaveAnimation:mc.get(B,t==="ios"?V:f);e!=="gesture"&&await fb(j,a,j.el,l),j.didDismiss.emit({data:ht,role:e}),(x=j.didDismissShorthand)===null||x===void 0||x.emit({data:ht,role:e}),w0.delete(j),j.el.classList.add("overlay-hidden"),j.el.style.removeProperty("pointer-events")}catch(t){console.error(t)}return j.el.remove(),!0},ub=j=>j.querySelector("ion-app")||j.body,fb=async(j,ht,e,B)=>{e.classList.remove("overlay-hidden");const V=j.el,f=ht(V,B);(!j.animated||!mc.getBoolean("animated",!0))&&f.duration(0),j.keyboardClose&&f.beforeAddWrite(()=>{const m=e.ownerDocument.activeElement;m!=null&&m.matches("input,ion-input, ion-textarea")&&m.blur()});const l=w0.get(j)||[];return w0.set(j,[...l,f]),await f.play(),!0},vy=(j,ht)=>{let e;const B=new Promise(V=>e=V);return zT(j,ht,V=>{e(V.detail)}),B},zT=(j,ht,e)=>{const B=V=>{s5(j,ht,B),e(V)};o5(j,ht,B)},gy=j=>j==="cancel"||j===Np,RT=j=>j(),$v=(j,ht)=>{if(typeof j=="function")return mc.get("_zoneGate",RT)(()=>{try{return j(ht)}catch(B){throw B}})},Np="backdrop",FT="ionViewWillEnter",OT="ionViewDidEnter",BT="ionViewWillLeave",NT="ionViewDidLeave";/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */let Xv;const UT=j=>(j.forEach(ht=>{for(const e in ht)if(ht.hasOwnProperty(e)){const B=ht[e];if(e==="easing"){const V="animation-timing-function";ht[V]=B,delete ht[e]}else{const V=HT(e);V!==e&&(ht[V]=B,delete ht[e])}}}),j),HT=j=>j.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ag=j=>{if(Xv===void 0){const ht=j.style.animationName!==void 0,e=j.style.webkitAnimationName!==void 0;Xv=!ht&&e?"-webkit-":""}return Xv},Yo=(j,ht,e)=>{const B=ht.startsWith("animation")?ag(j):"";j.style.setProperty(B+ht,e)},nu=(j,ht)=>{const e=ht.startsWith("animation")?ag(j):"";j.style.removeProperty(e+ht)},VT=(j,ht)=>{let e;const B={passive:!0},V=()=>{e&&e()},f=l=>{j===l.target&&(V(),ht(l))};return j&&(j.addEventListener("webkitAnimationEnd",f,B),j.addEventListener("animationend",f,B),e=()=>{j.removeEventListener("webkitAnimationEnd",f,B),j.removeEventListener("animationend",f,B)}),V},GT=(j=[])=>j.map(ht=>{const e=ht.offset,B=[];for(const V in ht)ht.hasOwnProperty(V)&&V!=="offset"&&B.push(`${V}: ${ht[V]};`);return`${e*100}% { ${B.join(" ")} }`}).join(" "),my=[],YT=j=>{let ht=my.indexOf(j);return ht<0&&(ht=my.push(j)-1),`ion-animation-${ht}`},WT=j=>{const ht=j.getRootNode();return ht.head||ht},$T=(j,ht,e)=>{const B=WT(e),V=ag(e),f=B.querySelector("#"+j);if(f)return f;const l=(e.ownerDocument||document).createElement("style");return l.id=j,l.textContent=`@${V}keyframes ${j} { ${ht} } @${V}keyframes ${j}-alt { ${ht} }`,B.appendChild(l),l},pp=(j=[],ht)=>{if(ht!==void 0){const e=Array.isArray(ht)?ht:[ht];return[...j,...e]}return j},Rc=j=>{let ht,e,B,V,f,l,m=[],x=[],t=[],a=!1,i,r={},n=[],d=[],s={},o=0,y=!1,g=!1,b,v,_,u,T=!0,c=!1,A=!0,k,p,w=!1;const h=j,D=[],S=[],M=[],L=[],R=[],z=[],P=[],I=[],U=[],O=[],G=typeof AnimationEffect=="function"||typeof window.AnimationEffect=="function",$=typeof Element=="function"&&typeof Element.prototype.animate=="function"&&G,tt=100,Z=()=>O,X=Ht=>(L.forEach(te=>{te.destroy(Ht)}),J(Ht),M.length=0,L.length=0,m.length=0,F(),a=!1,A=!0,p),J=Ht=>{H(),Ht&&et()},st=()=>{y=!1,g=!1,A=!0,v=void 0,_=void 0,u=void 0,o=0,c=!1,T=!0,w=!1},at=()=>o!==0&&!w,lt=(Ht,te)=>((te!=null&&te.oneTimeCallback?S:D).push({c:Ht,o:te}),p),F=()=>(D.length=0,S.length=0,p),H=()=>{if($)O.forEach(Ht=>{Ht.cancel()}),O.length=0;else{const Ht=M.slice();Pu(()=>{Ht.forEach(te=>{nu(te,"animation-name"),nu(te,"animation-duration"),nu(te,"animation-timing-function"),nu(te,"animation-iteration-count"),nu(te,"animation-delay"),nu(te,"animation-play-state"),nu(te,"animation-fill-mode"),nu(te,"animation-direction")})})}},et=()=>{R.forEach(Ht=>{Ht!=null&&Ht.parentNode&&Ht.parentNode.removeChild(Ht)}),R.length=0},q=Ht=>(z.push(Ht),p),W=Ht=>(P.push(Ht),p),K=Ht=>(I.push(Ht),p),nt=Ht=>(U.push(Ht),p),it=Ht=>(x=pp(x,Ht),p),ot=Ht=>(t=pp(t,Ht),p),ct=(Ht={})=>(r=Ht,p),bt=(Ht=[])=>{for(const te of Ht)r[te]="";return p},ut=Ht=>(n=pp(n,Ht),p),pt=Ht=>(d=pp(d,Ht),p),yt=(Ht={})=>(s=Ht,p),Tt=(Ht=[])=>{for(const te of Ht)s[te]="";return p},kt=()=>f!==void 0?f:i?i.getFill():"both",zt=()=>v!==void 0?v:l!==void 0?l:i?i.getDirection():"normal",Rt=()=>y?"linear":B!==void 0?B:i?i.getEasing():"linear",Gt=()=>g?0:_!==void 0?_:e!==void 0?e:i?i.getDuration():0,wt=()=>V!==void 0?V:i?i.getIterations():1,It=()=>u!==void 0?u:ht!==void 0?ht:i?i.getDelay():0,$t=()=>m,Qt=Ht=>(l=Ht,me(!0),p),Nt=Ht=>(f=Ht,me(!0),p),Pt=Ht=>(ht=Ht,me(!0),p),Yt=Ht=>(B=Ht,me(!0),p),ve=Ht=>(!$&&Ht===0&&(Ht=1),e=Ht,me(!0),p),Re=Ht=>(V=Ht,me(!0),p),ir=Ht=>(i=Ht,p),Ie=Ht=>{if(Ht!=null)if(Ht.nodeType===1)M.push(Ht);else if(Ht.length>=0)for(let te=0;te<Ht.length;te++)M.push(Ht[te]);else console.error("Invalid addElement value");return p},Be=Ht=>{if(Ht!=null)if(Array.isArray(Ht))for(const te of Ht)te.parent(p),L.push(te);else Ht.parent(p),L.push(Ht);return p},Ye=Ht=>{const te=m!==Ht;return m=Ht,te&&ze(m),p},ze=Ht=>{$?Z().forEach(te=>{if(te.effect.setKeyframes)te.effect.setKeyframes(Ht);else{const ne=new KeyframeEffect(te.effect.target,Ht,te.effect.getTiming());te.effect=ne}}):Xt()},Ee=()=>{z.forEach(_e=>_e()),P.forEach(_e=>_e());const Ht=x,te=t,ne=r;M.forEach(_e=>{const Pe=_e.classList;Ht.forEach(Et=>Pe.add(Et)),te.forEach(Et=>Pe.remove(Et));for(const Et in ne)ne.hasOwnProperty(Et)&&Yo(_e,Et,ne[Et])})},Wt=()=>{hr(),I.forEach(Pe=>Pe()),U.forEach(Pe=>Pe());const Ht=T?1:0,te=n,ne=d,_e=s;M.forEach(Pe=>{const Et=Pe.classList;te.forEach(Mt=>Et.add(Mt)),ne.forEach(Mt=>Et.remove(Mt));for(const Mt in _e)_e.hasOwnProperty(Mt)&&Yo(Pe,Mt,_e[Mt])}),D.forEach(Pe=>Pe.c(Ht,p)),S.forEach(Pe=>Pe.c(Ht,p)),S.length=0,A=!0,T&&(c=!0),T=!0},ee=()=>{o!==0&&(o--,o===0&&(Wt(),i&&i.animationFinish()))},Xt=(Ht=!0)=>{et();const te=UT(m);M.forEach(ne=>{if(te.length>0){const _e=GT(te);k=j!==void 0?j:YT(_e);const Pe=$T(k,_e,ne);R.push(Pe),Yo(ne,"animation-duration",`${Gt()}ms`),Yo(ne,"animation-timing-function",Rt()),Yo(ne,"animation-delay",`${It()}ms`),Yo(ne,"animation-fill-mode",kt()),Yo(ne,"animation-direction",zt());const Et=wt()===1/0?"infinite":wt().toString();Yo(ne,"animation-iteration-count",Et),Yo(ne,"animation-play-state","paused"),Ht&&Yo(ne,"animation-name",`${Pe.id}-alt`),Pu(()=>{Yo(ne,"animation-name",Pe.id||null)})}})},St=()=>{M.forEach(Ht=>{const te=Ht.animate(m,{id:h,delay:It(),duration:Gt(),easing:Rt(),iterations:wt(),fill:kt(),direction:zt()});te.pause(),O.push(te)}),O.length>0&&(O[0].onfinish=()=>{ee()})},Vt=(Ht=!0)=>{Ee(),m.length>0&&($?St():Xt(Ht)),a=!0},Zt=Ht=>{if(Ht=Math.min(Math.max(Ht,0),.9999),$)O.forEach(te=>{te.currentTime=te.effect.getComputedTiming().delay+Gt()*Ht,te.pause()});else{const te=`-${Gt()*Ht}ms`;M.forEach(ne=>{m.length>0&&(Yo(ne,"animation-delay",te),Yo(ne,"animation-play-state","paused"))})}},qt=Ht=>{O.forEach(te=>{te.effect.updateTiming({delay:It(),duration:Gt(),easing:Rt(),iterations:wt(),fill:kt(),direction:zt()})}),Ht!==void 0&&Zt(Ht)},Te=(Ht=!0,te)=>{Pu(()=>{M.forEach(ne=>{Yo(ne,"animation-name",k||null),Yo(ne,"animation-duration",`${Gt()}ms`),Yo(ne,"animation-timing-function",Rt()),Yo(ne,"animation-delay",te!==void 0?`-${te*Gt()}ms`:`${It()}ms`),Yo(ne,"animation-fill-mode",kt()||null),Yo(ne,"animation-direction",zt()||null);const _e=wt()===1/0?"infinite":wt().toString();Yo(ne,"animation-iteration-count",_e),Ht&&Yo(ne,"animation-name",`${k}-alt`),Pu(()=>{Yo(ne,"animation-name",k||null)})})})},me=(Ht=!1,te=!0,ne)=>(Ht&&L.forEach(_e=>{_e.update(Ht,te,ne)}),$?qt(ne):Te(te,ne),p),Ne=(Ht=!1,te)=>(L.forEach(ne=>{ne.progressStart(Ht,te)}),Xe(),y=Ht,a||Vt(),me(!1,!0,te),p),Ke=Ht=>(L.forEach(te=>{te.progressStep(Ht)}),Zt(Ht),p),He=(Ht,te,ne)=>(y=!1,L.forEach(_e=>{_e.progressEnd(Ht,te,ne)}),ne!==void 0&&(_=ne),c=!1,T=!0,Ht===0?(v=zt()==="reverse"?"normal":"reverse",v==="reverse"&&(T=!1),$?(me(),Zt(1-te)):(u=(1-te)*Gt()*-1,me(!1,!1))):Ht===1&&($?(me(),Zt(te)):(u=te*Gt()*-1,me(!1,!1))),Ht!==void 0&&(lt(()=>{_=void 0,v=void 0,u=void 0},{oneTimeCallback:!0}),i||Qe()),p),Xe=()=>{a&&($?O.forEach(Ht=>{Ht.pause()}):M.forEach(Ht=>{Yo(Ht,"animation-play-state","paused")}),w=!0)},er=()=>(L.forEach(Ht=>{Ht.pause()}),Xe(),p),We=()=>{b=void 0,ee()},hr=()=>{b&&clearTimeout(b)},Wr=()=>{if(hr(),Pu(()=>{M.forEach(Ht=>{m.length>0&&Yo(Ht,"animation-play-state","running")})}),m.length===0||M.length===0)ee();else{const Ht=It()||0,te=Gt()||0,ne=wt()||1;isFinite(ne)&&(b=setTimeout(We,Ht+te*ne+tt)),VT(M[0],()=>{hr(),Pu(()=>{dn(),Pu(ee)})})}},dn=()=>{M.forEach(Ht=>{nu(Ht,"animation-duration"),nu(Ht,"animation-delay"),nu(Ht,"animation-play-state")})},Qr=()=>{O.forEach(Ht=>{Ht.play()}),(m.length===0||M.length===0)&&ee()},le=()=>{$?(Zt(0),qt()):Te()},Qe=Ht=>new Promise(te=>{Ht!=null&&Ht.sync&&(g=!0,lt(()=>g=!1,{oneTimeCallback:!0})),a||Vt(),c&&(le(),c=!1),A&&(o=L.length+1,A=!1),lt(()=>te(),{oneTimeCallback:!0}),L.forEach(ne=>{ne.play()}),$?Qr():Wr(),w=!1}),Ze=()=>{L.forEach(Ht=>{Ht.stop()}),a&&(H(),a=!1),st()},Ve=(Ht,te)=>{const ne=m[0];return ne!==void 0&&(ne.offset===void 0||ne.offset===0)?ne[Ht]=te:m=[{offset:0,[Ht]:te},...m],p};return p={parentAnimation:i,elements:M,childAnimations:L,id:h,animationFinish:ee,from:Ve,to:(Ht,te)=>{const ne=m[m.length-1];return ne!==void 0&&(ne.offset===void 0||ne.offset===1)?ne[Ht]=te:m=[...m,{offset:1,[Ht]:te}],p},fromTo:(Ht,te,ne)=>Ve(Ht,te).to(Ht,ne),parent:ir,play:Qe,pause:er,stop:Ze,destroy:X,keyframes:Ye,addAnimation:Be,addElement:Ie,update:me,fill:Nt,direction:Qt,iterations:Re,duration:ve,easing:Yt,delay:Pt,getWebAnimations:Z,getKeyframes:$t,getFill:kt,getDirection:zt,getDelay:It,getIterations:wt,getEasing:Rt,getDuration:Gt,afterAddRead:K,afterAddWrite:nt,afterClearStyles:Tt,afterStyles:yt,afterRemoveClass:pt,afterAddClass:ut,beforeAddRead:q,beforeAddWrite:W,beforeClearStyles:bt,beforeStyles:ct,beforeRemoveClass:ot,beforeAddClass:it,onFinish:lt,isRunning:at,progressStart:Ne,progressStep:Ke,progressEnd:He}};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const XT="ion-content",jT=".ion-content-scroll-host",W4=`${XT}, ${jT}`;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Ic=typeof window<"u"?window:void 0;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const ZT=j=>{let ht,e,B;const V=()=>{ht=()=>{B=!0,j&&j(!0)},e=()=>{B=!1,j&&j(!1)},Ic==null||Ic.addEventListener("keyboardWillShow",ht),Ic==null||Ic.addEventListener("keyboardWillHide",e)},f=()=>{Ic==null||Ic.removeEventListener("keyboardWillShow",ht),Ic==null||Ic.removeEventListener("keyboardWillHide",e),ht=e=void 0},l=()=>B;return V(),{init:V,destroy:f,isKeyboardVisible:l}};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const KT=":host{padding-left:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));padding-right:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));padding-top:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));padding-bottom:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));margin-left:auto;margin-right:auto;display:block;-ms-flex:1;flex:1}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));padding-inline-start:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));-webkit-padding-end:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));padding-inline-end:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px))}}@media (min-width: 576px){:host{padding-left:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));padding-right:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));padding-top:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));padding-bottom:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px))}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));padding-inline-start:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));-webkit-padding-end:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));padding-inline-end:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px))}}}@media (min-width: 768px){:host{padding-left:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));padding-right:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));padding-top:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));padding-bottom:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px))}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));padding-inline-start:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));-webkit-padding-end:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));padding-inline-end:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px))}}}@media (min-width: 992px){:host{padding-left:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));padding-right:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));padding-top:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));padding-bottom:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px))}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));padding-inline-start:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));-webkit-padding-end:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));padding-inline-end:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px))}}}@media (min-width: 1200px){:host{padding-left:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));padding-right:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));padding-top:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));padding-bottom:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px))}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));padding-inline-start:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));-webkit-padding-end:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));padding-inline-end:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px))}}}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host{margin-left:unset;margin-right:unset;-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto}}:host(.grid-fixed){width:var(--ion-grid-width-xs, var(--ion-grid-width, 100%));max-width:100%}@media (min-width: 576px){:host(.grid-fixed){width:var(--ion-grid-width-sm, var(--ion-grid-width, 540px))}}@media (min-width: 768px){:host(.grid-fixed){width:var(--ion-grid-width-md, var(--ion-grid-width, 720px))}}@media (min-width: 992px){:host(.grid-fixed){width:var(--ion-grid-width-lg, var(--ion-grid-width, 960px))}}@media (min-width: 1200px){:host(.grid-fixed){width:var(--ion-grid-width-xl, var(--ion-grid-width, 1140px))}}:host(.ion-no-padding){--ion-grid-column-padding:0;--ion-grid-column-padding-xs:0;--ion-grid-column-padding-sm:0;--ion-grid-column-padding-md:0;--ion-grid-column-padding-lg:0;--ion-grid-column-padding-xl:0}",JT=Nl(class extends Bl{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.fixed=!1}render(){const j=Ms(this);return zi(Tl,{class:{[j]:!0,"grid-fixed":this.fixed}},zi("slot",null))}static get style(){return KT}},[1,"ion-grid",{fixed:[4]}]);function QT(){if(typeof customElements>"u")return;["ion-grid"].forEach(ht=>{switch(ht){case"ion-grid":customElements.get(ht)||customElements.define(ht,JT);break}})}const qT=QT;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const tA=j=>{try{if(j instanceof iA)return j.value;if(!eA()||typeof j!="string"||j==="")return j;const ht=document.createDocumentFragment(),e=document.createElement("div");ht.appendChild(e),e.innerHTML=j,nA.forEach(l=>{const m=ht.querySelectorAll(l);for(let x=m.length-1;x>=0;x--){const t=m[x];t.parentNode?t.parentNode.removeChild(t):ht.removeChild(t);const a=k0(t);for(let i=0;i<a.length;i++)_0(a[i])}});const B=k0(ht);for(let l=0;l<B.length;l++)_0(B[l]);const V=document.createElement("div");V.appendChild(ht);const f=V.querySelector("div");return f!==null?f.innerHTML:V.innerHTML}catch(ht){return console.error(ht),""}},_0=j=>{if(j.nodeType&&j.nodeType!==1)return;for(let e=j.attributes.length-1;e>=0;e--){const B=j.attributes.item(e),V=B.name;if(!rA.includes(V.toLowerCase())){j.removeAttribute(V);continue}const f=B.value;f!=null&&f.toLowerCase().includes("javascript:")&&j.removeAttribute(V)}const ht=k0(j);for(let e=0;e<ht.length;e++)_0(ht[e])},k0=j=>j.children!=null?j.children:j.childNodes,eA=()=>{var j;const ht=window,e=(j=ht==null?void 0:ht.Ionic)===null||j===void 0?void 0:j.config;return e?e.get?e.get("sanitizerEnabled",!0):e.sanitizerEnabled===!0||e.sanitizerEnabled===void 0:!0},rA=["class","id","href","src","name","slot"],nA=["script","style","iframe","meta","link","object","embed"];class iA{constructor(ht){this.value=ht}}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const aA=`.sc-ion-input-ios-h{--placeholder-color:initial;--placeholder-font-style:initial;--placeholder-font-weight:initial;--placeholder-opacity:.5;--padding-top:0;--padding-end:0;--padding-bottom:0;--padding-start:0;--background:transparent;--color:initial;display:-ms-flexbox;display:flex;position:relative;-ms-flex:1;flex:1;-ms-flex-align:center;align-items:center;width:100%;padding:0 !important;background:var(--background);color:var(--color);font-family:var(--ion-font-family, inherit);z-index:2}ion-item.sc-ion-input-ios-h:not(.item-label),ion-item:not(.item-label) .sc-ion-input-ios-h{--padding-start:0}.ion-color.sc-ion-input-ios-h{color:var(--ion-color-base)}.native-input.sc-ion-input-ios{border-radius:var(--border-radius);padding-left:var(--padding-start);padding-right:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:inline-block;-ms-flex:1;flex:1;width:100%;max-width:100%;max-height:100%;border:0;outline:none;background:transparent;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-appearance:none;-moz-appearance:none;appearance:none}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){.native-input.sc-ion-input-ios{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end)}}.native-input.sc-ion-input-ios::-webkit-input-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-ios::-moz-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-ios:-ms-input-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-ios::-ms-input-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-ios::placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-ios:-webkit-autofill{background-color:transparent}.native-input.sc-ion-input-ios:invalid{-webkit-box-shadow:none;box-shadow:none}.native-input.sc-ion-input-ios::-ms-clear{display:none}.native-input[disabled].sc-ion-input-ios{opacity:0.4}.cloned-input.sc-ion-input-ios{left:0;top:0;position:absolute;pointer-events:none}[dir=rtl].sc-ion-input-ios .cloned-input.sc-ion-input-ios,[dir=rtl].sc-ion-input-ios-h .cloned-input.sc-ion-input-ios,[dir=rtl] .sc-ion-input-ios-h .cloned-input.sc-ion-input-ios{left:unset;right:unset;right:0}.input-clear-icon.sc-ion-input-ios{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;background-position:center;border:0;outline:none;background-color:transparent;background-repeat:no-repeat;visibility:hidden;-webkit-appearance:none;-moz-appearance:none;appearance:none}.input-clear-icon.sc-ion-input-ios:focus{opacity:0.5}.has-value.sc-ion-input-ios-h .input-clear-icon.sc-ion-input-ios{visibility:visible}.has-focus.sc-ion-input-ios-h{pointer-events:none}.has-focus.sc-ion-input-ios-h input.sc-ion-input-ios,.has-focus.sc-ion-input-ios-h a.sc-ion-input-ios,.has-focus.sc-ion-input-ios-h button.sc-ion-input-ios{pointer-events:auto}.item-label-floating.item-has-placeholder.sc-ion-input-ios-h:not(.item-has-value),.item-label-floating.item-has-placeholder:not(.item-has-value) .sc-ion-input-ios-h{opacity:0}.item-label-floating.item-has-placeholder.sc-ion-input-ios-h:not(.item-has-value).item-has-focus,.item-label-floating.item-has-placeholder:not(.item-has-value).item-has-focus .sc-ion-input-ios-h{-webkit-transition:opacity 0.15s cubic-bezier(0.4, 0, 0.2, 1);transition:opacity 0.15s cubic-bezier(0.4, 0, 0.2, 1);opacity:1}.sc-ion-input-ios-h{--padding-top:10px;--padding-end:10px;--padding-bottom:10px;--padding-start:0;font-size:inherit}.item-label-stacked.sc-ion-input-ios-h,.item-label-stacked .sc-ion-input-ios-h,.item-label-floating.sc-ion-input-ios-h,.item-label-floating .sc-ion-input-ios-h{--padding-top:8px;--padding-bottom:8px;--padding-start:0px}.input-clear-icon.sc-ion-input-ios{background-image:url("data:image/svg+xml;charset=utf-8,<svg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20512%20512'><path%20fill='var(--ion-color-step-600,%20%23666666)'%20d='M403.1,108.9c-81.2-81.2-212.9-81.2-294.2,0s-81.2,212.9,0,294.2c81.2,81.2,212.9,81.2,294.2,0S484.3,190.1,403.1,108.9z%20M352,340.2L340.2,352l-84.4-84.2l-84,83.8L160,339.8l84-83.8l-84-83.8l11.8-11.8l84,83.8l84.4-84.2l11.8,11.8L267.6,256L352,340.2z'/></svg>");width:30px;height:30px;background-size:18px}`,oA=`.sc-ion-input-md-h{--placeholder-color:initial;--placeholder-font-style:initial;--placeholder-font-weight:initial;--placeholder-opacity:.5;--padding-top:0;--padding-end:0;--padding-bottom:0;--padding-start:0;--background:transparent;--color:initial;display:-ms-flexbox;display:flex;position:relative;-ms-flex:1;flex:1;-ms-flex-align:center;align-items:center;width:100%;padding:0 !important;background:var(--background);color:var(--color);font-family:var(--ion-font-family, inherit);z-index:2}ion-item.sc-ion-input-md-h:not(.item-label),ion-item:not(.item-label) .sc-ion-input-md-h{--padding-start:0}.ion-color.sc-ion-input-md-h{color:var(--ion-color-base)}.native-input.sc-ion-input-md{border-radius:var(--border-radius);padding-left:var(--padding-start);padding-right:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:inline-block;-ms-flex:1;flex:1;width:100%;max-width:100%;max-height:100%;border:0;outline:none;background:transparent;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-appearance:none;-moz-appearance:none;appearance:none}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){.native-input.sc-ion-input-md{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end)}}.native-input.sc-ion-input-md::-webkit-input-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-md::-moz-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-md:-ms-input-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-md::-ms-input-placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-md::placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-md:-webkit-autofill{background-color:transparent}.native-input.sc-ion-input-md:invalid{-webkit-box-shadow:none;box-shadow:none}.native-input.sc-ion-input-md::-ms-clear{display:none}.native-input[disabled].sc-ion-input-md{opacity:0.4}.cloned-input.sc-ion-input-md{left:0;top:0;position:absolute;pointer-events:none}[dir=rtl].sc-ion-input-md .cloned-input.sc-ion-input-md,[dir=rtl].sc-ion-input-md-h .cloned-input.sc-ion-input-md,[dir=rtl] .sc-ion-input-md-h .cloned-input.sc-ion-input-md{left:unset;right:unset;right:0}.input-clear-icon.sc-ion-input-md{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;background-position:center;border:0;outline:none;background-color:transparent;background-repeat:no-repeat;visibility:hidden;-webkit-appearance:none;-moz-appearance:none;appearance:none}.input-clear-icon.sc-ion-input-md:focus{opacity:0.5}.has-value.sc-ion-input-md-h .input-clear-icon.sc-ion-input-md{visibility:visible}.has-focus.sc-ion-input-md-h{pointer-events:none}.has-focus.sc-ion-input-md-h input.sc-ion-input-md,.has-focus.sc-ion-input-md-h a.sc-ion-input-md,.has-focus.sc-ion-input-md-h button.sc-ion-input-md{pointer-events:auto}.item-label-floating.item-has-placeholder.sc-ion-input-md-h:not(.item-has-value),.item-label-floating.item-has-placeholder:not(.item-has-value) .sc-ion-input-md-h{opacity:0}.item-label-floating.item-has-placeholder.sc-ion-input-md-h:not(.item-has-value).item-has-focus,.item-label-floating.item-has-placeholder:not(.item-has-value).item-has-focus .sc-ion-input-md-h{-webkit-transition:opacity 0.15s cubic-bezier(0.4, 0, 0.2, 1);transition:opacity 0.15s cubic-bezier(0.4, 0, 0.2, 1);opacity:1}.sc-ion-input-md-h{--padding-top:10px;--padding-end:0;--padding-bottom:10px;--padding-start:8px;font-size:inherit}.item-label-stacked.sc-ion-input-md-h,.item-label-stacked .sc-ion-input-md-h,.item-label-floating.sc-ion-input-md-h,.item-label-floating .sc-ion-input-md-h{--padding-top:8px;--padding-bottom:8px;--padding-start:0}.input-clear-icon.sc-ion-input-md{background-image:url("data:image/svg+xml;charset=utf-8,<svg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20512%20512'><polygon%20fill='var(--ion-color-step-600,%20%23666666)'%20points='405,136.798%20375.202,107%20256,226.202%20136.798,107%20107,136.798%20226.202,256%20107,375.202%20136.798,405%20256,285.798%20375.202,405%20405,375.202%20285.798,256'/></svg>");width:30px;height:30px;background-size:22px}`,sA=Nl(class extends Bl{constructor(){super(),this.__registerHost(),this.ionInput=Zs(this,"ionInput",7),this.ionChange=Zs(this,"ionChange",7),this.ionBlur=Zs(this,"ionBlur",7),this.ionFocus=Zs(this,"ionFocus",7),this.ionStyle=Zs(this,"ionStyle",7),this.inputId=`ion-input-${lA++}`,this.didBlurAfterEdit=!1,this.inheritedAttributes={},this.isComposing=!1,this.fireFocusEvents=!0,this.hasFocus=!1,this.autocapitalize="off",this.autocomplete="off",this.autocorrect="off",this.autofocus=!1,this.clearInput=!1,this.debounce=0,this.disabled=!1,this.name=this.inputId,this.readonly=!1,this.required=!1,this.spellcheck=!1,this.type="text",this.value="",this.onInput=j=>{const ht=j.target;ht&&(this.value=ht.value||""),this.ionInput.emit(j)},this.onBlur=j=>{this.hasFocus=!1,this.focusChanged(),this.emitStyle(),this.fireFocusEvents&&this.ionBlur.emit(j)},this.onFocus=j=>{this.hasFocus=!0,this.focusChanged(),this.emitStyle(),this.fireFocusEvents&&this.ionFocus.emit(j)},this.onKeydown=j=>{this.shouldClearOnEdit()&&(this.didBlurAfterEdit&&this.hasValue()&&j.key!=="Enter"&&this.clearTextInput(),this.didBlurAfterEdit=!1)},this.onCompositionStart=()=>{this.isComposing=!0},this.onCompositionEnd=()=>{this.isComposing=!1},this.clearTextInput=j=>{this.clearInput&&!this.readonly&&!this.disabled&&j&&(j.preventDefault(),j.stopPropagation(),this.setFocus()),this.value="",this.nativeInput&&(this.nativeInput.value="")}}debounceChanged(){this.ionChange=h5(this.ionChange,this.debounce)}disabledChanged(){this.emitStyle()}placeholderChanged(){this.emitStyle()}valueChanged(){const j=this.nativeInput,ht=this.getValue();j&&j.value!==ht&&!this.isComposing&&(j.value=ht),this.emitStyle(),this.ionChange.emit({value:this.value==null?this.value:this.value.toString()})}componentWillLoad(){this.inheritedAttributes=Object.assign(Object.assign({},rb(this.el)),eb(this.el,["tabindex","title","data-form-type"]))}connectedCallback(){this.emitStyle(),this.debounceChanged(),oy.isBrowser&&document.dispatchEvent(new CustomEvent("ionInputDidLoad",{detail:this.el}))}componentDidLoad(){const j=this.nativeInput;j&&(j.addEventListener("compositionstart",this.onCompositionStart),j.addEventListener("compositionend",this.onCompositionEnd))}disconnectedCallback(){oy.isBrowser&&document.dispatchEvent(new CustomEvent("ionInputDidUnload",{detail:this.el}));const j=this.nativeInput;j&&(j.removeEventListener("compositionstart",this.onCompositionStart),j.removeEventListener("compositionEnd",this.onCompositionEnd))}async setFocus(){this.nativeInput&&this.nativeInput.focus()}async setBlur(){this.nativeInput&&this.nativeInput.blur()}getInputElement(){return Promise.resolve(this.nativeInput)}shouldClearOnEdit(){const{type:j,clearOnEdit:ht}=this;return ht===void 0?j==="password":ht}getValue(){return typeof this.value=="number"?this.value.toString():(this.value||"").toString()}emitStyle(){this.ionStyle.emit({interactive:!0,input:!0,"has-placeholder":this.placeholder!==void 0,"has-value":this.hasValue(),"has-focus":this.hasFocus,"interactive-disabled":this.disabled})}focusChanged(){!this.hasFocus&&this.shouldClearOnEdit()&&this.hasValue()&&(this.didBlurAfterEdit=!0)}hasValue(){return this.getValue().length>0}render(){const j=Ms(this),ht=this.getValue(),e=this.inputId+"-lbl",B=u5(this.el);return B&&(B.id=e),zi(Tl,{"aria-disabled":this.disabled?"true":null,class:jf(this.color,{[j]:!0,"has-value":this.hasValue(),"has-focus":this.hasFocus})},zi("input",Object.assign({class:"native-input",ref:V=>this.nativeInput=V,"aria-labelledby":B?e:null,disabled:this.disabled,accept:this.accept,autoCapitalize:this.autocapitalize,autoComplete:this.autocomplete,autoCorrect:this.autocorrect,autoFocus:this.autofocus,enterKeyHint:this.enterkeyhint,inputMode:this.inputmode,min:this.min,max:this.max,minLength:this.minlength,maxLength:this.maxlength,multiple:this.multiple,name:this.name,pattern:this.pattern,placeholder:this.placeholder||"",readOnly:this.readonly,required:this.required,spellcheck:this.spellcheck,step:this.step,size:this.size,type:this.type,value:ht,onInput:this.onInput,onBlur:this.onBlur,onFocus:this.onFocus,onKeyDown:this.onKeydown},this.inheritedAttributes)),this.clearInput&&!this.readonly&&!this.disabled&&zi("button",{"aria-label":"reset",type:"button",class:"input-clear-icon",onPointerDown:V=>{V.preventDefault()},onClick:this.clearTextInput}))}get el(){return this}static get watchers(){return{debounce:["debounceChanged"],disabled:["disabledChanged"],placeholder:["placeholderChanged"],value:["valueChanged"]}}static get style(){return{ios:aA,md:oA}}},[34,"ion-input",{fireFocusEvents:[4,"fire-focus-events"],color:[513],accept:[1],autocapitalize:[1],autocomplete:[1],autocorrect:[1],autofocus:[4],clearInput:[4,"clear-input"],clearOnEdit:[4,"clear-on-edit"],debounce:[2],disabled:[4],enterkeyhint:[1],inputmode:[1],max:[8],maxlength:[2],min:[8],minlength:[2],multiple:[4],name:[1],pattern:[1],placeholder:[1],readonly:[4],required:[4],spellcheck:[4],step:[1],size:[2],type:[1],value:[1032],hasFocus:[32],setFocus:[64],setBlur:[64],getInputElement:[64]}]);let lA=0;function cA(){if(typeof customElements>"u")return;["ion-input"].forEach(ht=>{switch(ht){case"ion-input":customElements.get(ht)||customElements.define(ht,sA);break}})}const uA=cA;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const fA=dT;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const hA=mT;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const dA="ion-list{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;display:block;contain:content;list-style-type:none}ion-list.list-inset{-webkit-transform:translateZ(0);transform:translateZ(0);overflow:hidden}.list-ios{background:var(--ion-item-background, var(--ion-background-color, #fff))}.list-ios.list-inset{margin-left:16px;margin-right:16px;margin-top:16px;margin-bottom:16px;border-radius:10px}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){.list-ios.list-inset{margin-left:unset;margin-right:unset;-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:16px;margin-inline-end:16px}}.list-ios.list-inset ion-item{--border-width:0 0 1px 0;--inner-border-width:0}.list-ios.list-inset ion-item:last-child{--border-width:0;--inner-border-width:0}.list-ios.list-inset+ion-list.list-inset{margin-top:0}.list-ios-lines-none .item{--border-width:0;--inner-border-width:0}.list-ios-lines-full .item,.list-ios .item-lines-full{--border-width:0 0 0.55px 0}.list-ios-lines-full .item{--inner-border-width:0}.list-ios-lines-inset .item,.list-ios .item-lines-inset{--inner-border-width:0 0 0.55px 0}.list-ios .item-lines-inset{--border-width:0}.list-ios .item-lines-full{--inner-border-width:0}.list-ios .item-lines-none{--border-width:0;--inner-border-width:0}ion-card .list-ios{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}",pA="ion-list{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;display:block;contain:content;list-style-type:none}ion-list.list-inset{-webkit-transform:translateZ(0);transform:translateZ(0);overflow:hidden}.list-md{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:8px;padding-bottom:8px;background:var(--ion-item-background, var(--ion-background-color, #fff))}.list-md>.input:last-child::after{left:0}[dir=rtl] .list-md>.input:last-child::after,:host-context([dir=rtl]) .list-md>.input:last-child::after{left:unset;right:unset;right:0}.list-md.list-inset{margin-left:16px;margin-right:16px;margin-top:16px;margin-bottom:16px;border-radius:2px}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){.list-md.list-inset{margin-left:unset;margin-right:unset;-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:16px;margin-inline-end:16px}}.list-md.list-inset ion-item:first-child{--border-radius:2px 2px 0 0;--border-width:0 0 1px 0}.list-md.list-inset ion-item:last-child{--border-radius:0 0 2px, 2px;--border-width:0}.list-md.list-inset .item-interactive{--padding-start:0;--padding-end:0}.list-md.list-inset+ion-list.list-inset{margin-top:0}.list-md-lines-none .item{--border-width:0;--inner-border-width:0}.list-md-lines-full .item,.list-md .item-lines-full{--border-width:0 0 1px 0}.list-md-lines-full .item{--inner-border-width:0}.list-md-lines-inset .item,.list-md .item-lines-inset{--inner-border-width:0 0 1px 0}.list-md .item-lines-inset{--border-width:0}.list-md .item-lines-full{--inner-border-width:0}.list-md .item-lines-none{--border-width:0;--inner-border-width:0}ion-card .list-md{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}",vA=Nl(class extends Bl{constructor(){super(),this.__registerHost(),this.inset=!1}async closeSlidingItems(){const j=this.el.querySelector("ion-item-sliding");return j!=null&&j.closeOpened?j.closeOpened():!1}render(){const j=Ms(this),{lines:ht,inset:e}=this;return zi(Tl,{role:"list",class:{[j]:!0,[`list-${j}`]:!0,"list-inset":e,[`list-lines-${ht}`]:ht!==void 0,[`list-${j}-lines-${ht}`]:ht!==void 0}})}get el(){return this}static get style(){return{ios:dA,md:pA}}},[32,"ion-list",{lines:[1],inset:[4],closeSlidingItems:[64]}]);function gA(){if(typeof customElements>"u")return;["ion-list"].forEach(ht=>{switch(ht){case"ion-list":customElements.get(ht)||customElements.define(ht,vA);break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const mA=gA;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const yA=":host{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}",bA=Nl(class extends Bl{constructor(){super(),this.__registerHost(),this.__attachShadow()}render(){return zi(Tl,{class:Ms(this)},zi("slot",null))}static get style(){return yA}},[1,"ion-row"]);function xA(){if(typeof customElements>"u")return;["ion-row"].forEach(ht=>{switch(ht){case"ion-row":customElements.get(ht)||customElements.define(ht,bA);break}})}const wA=xA;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const If=(j,ht,e,B)=>{const V=_A(j)?{capture:!!B.capture,passive:!!B.passive}:!!B.capture;let f,l;return j.__zone_symbol__addEventListener?(f="__zone_symbol__addEventListener",l="__zone_symbol__removeEventListener"):(f="addEventListener",l="removeEventListener"),j[f](ht,e,V),()=>{j[l](ht,e,V)}},_A=j=>{if(vp===void 0)try{const ht=Object.defineProperty({},"passive",{get:()=>{vp=!0}});j.addEventListener("optsTest",()=>{},ht)}catch{vp=!1}return!!vp};let vp;const kA=2e3,TA=(j,ht,e,B,V)=>{let f,l,m,x,t,a,i,r=0;const n=u=>{r=Date.now()+kA,ht(u)&&(!l&&e&&(l=If(j,"touchmove",e,V)),m||(m=If(u.target,"touchend",s,V)),x||(x=If(u.target,"touchcancel",s,V)))},d=u=>{r>Date.now()||!ht(u)||(!a&&e&&(a=If(yy(j),"mousemove",e,V)),i||(i=If(yy(j),"mouseup",o,V)))},s=u=>{y(),B&&B(u)},o=u=>{g(),B&&B(u)},y=()=>{l&&l(),m&&m(),x&&x(),l=m=x=void 0},g=()=>{a&&a(),i&&i(),a=i=void 0},b=()=>{y(),g()},v=(u=!0)=>{u?(f||(f=If(j,"touchstart",n,V)),t||(t=If(j,"mousedown",d,V))):(f&&f(),t&&t(),f=t=void 0,b())};return{enable:v,stop:b,destroy:()=>{v(!1),B=e=ht=void 0}}},yy=j=>j instanceof Document?j:j.ownerDocument,AA=(j,ht,e)=>{const B=e*(Math.PI/180),V=j==="x",f=Math.cos(B),l=ht*ht;let m=0,x=0,t=!1,a=0;return{start(i,r){m=i,x=r,a=0,t=!0},detect(i,r){if(!t)return!1;const n=i-m,d=r-x,s=n*n+d*d;if(s<l)return!1;const o=Math.sqrt(s),y=(V?n:d)/o;return y>f?a=1:y<-f?a=-1:a=0,t=!1,!0},isGesture(){return a!==0},getDirection(){return a}}},SA=j=>{let ht=!1,e=!1,B=!0,V=!1;const f=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},j),l=f.canStart,m=f.onWillStart,x=f.onStart,t=f.onEnd,a=f.notCaptured,i=f.onMove,r=f.threshold,n=f.passive,d=f.blurOnStart,s={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},o=AA(f.direction,f.threshold,f.maxAngle),y=ob.createGesture({name:j.gestureName,priority:j.gesturePriority,disableScroll:j.disableScroll}),g=w=>{const h=db(w);return e||!B||(hb(w,s),s.startX=s.currentX,s.startY=s.currentY,s.startTime=s.currentTime=h,s.velocityX=s.velocityY=s.deltaX=s.deltaY=0,s.event=w,l&&l(s)===!1)||(y.release(),!y.start())?!1:(e=!0,r===0?_():(o.start(s.startX,s.startY),!0))},b=w=>{if(ht){!V&&B&&(V=!0,jv(s,w),requestAnimationFrame(v));return}jv(s,w),o.detect(s.currentX,s.currentY)&&(!o.isGesture()||!_())&&p()},v=()=>{!ht||(V=!1,i&&i(s))},_=()=>y&&!y.capture()?!1:(ht=!0,B=!1,s.startX=s.currentX,s.startY=s.currentY,s.startTime=s.currentTime,m?m(s).then(T):T(),!0),u=()=>{if(typeof document<"u"){const w=document.activeElement;w!=null&&w.blur&&w.blur()}},T=()=>{d&&u(),x&&x(s),B=!0},c=()=>{ht=!1,e=!1,V=!1,B=!0,y.release()},A=w=>{const h=ht,D=B;if(c(),!!D){if(jv(s,w),h){t&&t(s);return}a&&a(s)}},k=TA(f.el,g,b,A,{capture:!1,passive:n}),p=()=>{c(),k.stop(),a&&a(s)};return{enable(w=!0){w||(ht&&A(void 0),c()),k.enable(w)},destroy(){y.destroy(),k.destroy()}}},jv=(j,ht)=>{if(!ht)return;const e=j.currentX,B=j.currentY,V=j.currentTime;hb(ht,j);const f=j.currentX,l=j.currentY,x=(j.currentTime=db(ht))-V;if(x>0&&x<100){const t=(f-e)/x,a=(l-B)/x;j.velocityX=t*.7+j.velocityX*.3,j.velocityY=a*.7+j.velocityY*.3}j.deltaX=f-j.startX,j.deltaY=l-j.startY,j.event=ht},hb=(j,ht)=>{let e=0,B=0;if(j){const V=j.changedTouches;if(V&&V.length>0){const f=V[0];e=f.clientX,B=f.clientY}else j.pageX!==void 0&&(e=j.pageX,B=j.pageY)}ht.currentX=e,ht.currentY=B},db=j=>j.timeStamp||Date.now();/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const MA=(j,ht)=>{let e,B;const V=(m,x,t)=>{if(typeof document>"u")return;const a=document.elementFromPoint(m,x);if(!a||!ht(a)){l();return}a!==e&&(l(),f(a,t))},f=(m,x)=>{e=m,B||(B=e);const t=e;Op(()=>t.classList.add("ion-activated")),x()},l=(m=!1)=>{if(!e)return;const x=e;Op(()=>x.classList.remove("ion-activated")),m&&B!==e&&e.click(),e=void 0};return SA({el:j,gestureName:"buttonActiveDrag",threshold:0,onStart:m=>V(m.currentX,m.currentY,yT),onMove:m=>V(m.currentX,m.currentY,bT),onEnd:()=>{l(!0),xT(),B=void 0}})};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const CA=j=>{const ht=Rc(),e=Rc(),B=Rc();return e.addElement(j.querySelector("ion-backdrop")).fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),B.addElement(j.querySelector(".alert-wrapper")).keyframes([{offset:0,opacity:"0.01",transform:"scale(1.1)"},{offset:1,opacity:"1",transform:"scale(1)"}]),ht.addElement(j).easing("ease-in-out").duration(200).addAnimation([e,B])},EA=j=>{const ht=Rc(),e=Rc(),B=Rc();return e.addElement(j.querySelector("ion-backdrop")).fromTo("opacity","var(--backdrop-opacity)",0),B.addElement(j.querySelector(".alert-wrapper")).keyframes([{offset:0,opacity:.99,transform:"scale(1)"},{offset:1,opacity:0,transform:"scale(0.9)"}]),ht.addElement(j).easing("ease-in-out").duration(200).addAnimation([e,B])},LA=j=>{const ht=Rc(),e=Rc(),B=Rc();return e.addElement(j.querySelector("ion-backdrop")).fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),B.addElement(j.querySelector(".alert-wrapper")).keyframes([{offset:0,opacity:"0.01",transform:"scale(0.9)"},{offset:1,opacity:"1",transform:"scale(1)"}]),ht.addElement(j).easing("ease-in-out").duration(150).addAnimation([e,B])},DA=j=>{const ht=Rc(),e=Rc(),B=Rc();return e.addElement(j.querySelector("ion-backdrop")).fromTo("opacity","var(--backdrop-opacity)",0),B.addElement(j.querySelector(".alert-wrapper")).fromTo("opacity",.99,0),ht.addElement(j).easing("ease-in-out").duration(150).addAnimation([e,B])},PA=".sc-ion-alert-ios-h{--min-width:250px;--width:auto;--min-height:auto;--height:auto;--max-height:90%;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:absolute;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;outline:none;font-family:var(--ion-font-family, inherit);contain:strict;-ms-touch-action:none;touch-action:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:1001}.overlay-hidden.sc-ion-alert-ios-h{display:none}.alert-top.sc-ion-alert-ios-h{padding-top:50px;-ms-flex-align:start;align-items:flex-start}.alert-wrapper.sc-ion-alert-ios{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);background:var(--background);contain:content;opacity:0;z-index:10}.alert-title.sc-ion-alert-ios{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0}.alert-sub-title.sc-ion-alert-ios{margin-left:0;margin-right:0;margin-top:5px;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;font-weight:normal}.alert-message.sc-ion-alert-ios{-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-overflow-scrolling:touch;overflow-y:auto;overscroll-behavior-y:contain}.alert-checkbox-group.sc-ion-alert-ios::-webkit-scrollbar,.alert-radio-group.sc-ion-alert-ios::-webkit-scrollbar,.alert-message.sc-ion-alert-ios::-webkit-scrollbar{display:none}.alert-input.sc-ion-alert-ios{padding-left:0;padding-right:0;padding-top:10px;padding-bottom:10px;width:100%;border:0;background:inherit;font:inherit;-webkit-box-sizing:border-box;box-sizing:border-box}.alert-button-group.sc-ion-alert-ios{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;width:100%}.alert-button-group-vertical.sc-ion-alert-ios{-ms-flex-direction:column;flex-direction:column;-ms-flex-wrap:nowrap;flex-wrap:nowrap}.alert-button.sc-ion-alert-ios{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;display:block;border:0;font-size:14px;line-height:20px;z-index:0}.alert-button.ion-focused.sc-ion-alert-ios,.alert-tappable.ion-focused.sc-ion-alert-ios{background:var(--ion-color-step-100, #e6e6e6)}.alert-button-inner.sc-ion-alert-ios{display:-ms-flexbox;display:flex;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%}.alert-input-disabled.sc-ion-alert-ios,.alert-checkbox-button-disabled.sc-ion-alert-ios .alert-button-inner.sc-ion-alert-ios,.alert-radio-button-disabled.sc-ion-alert-ios .alert-button-inner.sc-ion-alert-ios{cursor:default;opacity:0.5;pointer-events:none}.alert-tappable.sc-ion-alert-ios{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;display:-ms-flexbox;display:flex;width:100%;border:0;background:transparent;font-size:inherit;line-height:initial;text-align:start;-webkit-appearance:none;-moz-appearance:none;appearance:none;contain:strict}.alert-button.sc-ion-alert-ios,.alert-checkbox.sc-ion-alert-ios,.alert-input.sc-ion-alert-ios,.alert-radio.sc-ion-alert-ios{outline:none}.alert-radio-icon.sc-ion-alert-ios,.alert-checkbox-icon.sc-ion-alert-ios,.alert-checkbox-inner.sc-ion-alert-ios{-webkit-box-sizing:border-box;box-sizing:border-box}textarea.alert-input.sc-ion-alert-ios{min-height:37px;resize:none}.sc-ion-alert-ios-h{--background:var(--ion-overlay-background-color, var(--ion-color-step-100, #f9f9f9));--max-width:270px;--backdrop-opacity:var(--ion-backdrop-opacity, 0.3);font-size:14px}.alert-wrapper.sc-ion-alert-ios{border-radius:13px;-webkit-box-shadow:none;box-shadow:none;overflow:hidden}.alert-button.sc-ion-alert-ios .alert-button-inner.sc-ion-alert-ios{pointer-events:none}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){.alert-translucent.sc-ion-alert-ios-h .alert-wrapper.sc-ion-alert-ios{background:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.9);-webkit-backdrop-filter:saturate(180%) blur(20px);backdrop-filter:saturate(180%) blur(20px)}}.alert-head.sc-ion-alert-ios{padding-left:16px;padding-right:16px;padding-top:12px;padding-bottom:7px;text-align:center}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){.alert-head.sc-ion-alert-ios{padding-left:unset;padding-right:unset;-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px}}.alert-title.sc-ion-alert-ios{margin-top:8px;color:var(--ion-text-color, #000);font-size:17px;font-weight:600}.alert-sub-title.sc-ion-alert-ios{color:var(--ion-color-step-600, #666666);font-size:14px}.alert-message.sc-ion-alert-ios,.alert-input-group.sc-ion-alert-ios{padding-left:16px;padding-right:16px;padding-top:0;padding-bottom:21px;color:var(--ion-text-color, #000);font-size:13px;text-align:center}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){.alert-message.sc-ion-alert-ios,.alert-input-group.sc-ion-alert-ios{padding-left:unset;padding-right:unset;-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px}}.alert-message.sc-ion-alert-ios{max-height:240px}.alert-message.sc-ion-alert-ios:empty{padding-left:0;padding-right:0;padding-top:0;padding-bottom:12px}.alert-input.sc-ion-alert-ios{border-radius:4px;margin-top:10px;padding-left:6px;padding-right:6px;padding-top:6px;padding-bottom:6px;border:0.55px solid var(--ion-color-step-250, #bfbfbf);background-color:var(--ion-background-color, #fff);-webkit-appearance:none;-moz-appearance:none;appearance:none}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){.alert-input.sc-ion-alert-ios{padding-left:unset;padding-right:unset;-webkit-padding-start:6px;padding-inline-start:6px;-webkit-padding-end:6px;padding-inline-end:6px}}.alert-input.sc-ion-alert-ios::-webkit-input-placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, #999999));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-ios::-moz-placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, #999999));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-ios:-ms-input-placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, #999999));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-ios::-ms-input-placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, #999999));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-ios::placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, #999999));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-ios::-ms-clear{display:none}.alert-radio-group.sc-ion-alert-ios,.alert-checkbox-group.sc-ion-alert-ios{-ms-scroll-chaining:none;overscroll-behavior:contain;max-height:240px;border-top:0.55px solid rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.2);overflow-y:auto;-webkit-overflow-scrolling:touch}.alert-tappable.sc-ion-alert-ios{height:44px}.alert-radio-label.sc-ion-alert-ios{padding-left:13px;padding-right:13px;padding-top:13px;padding-bottom:13px;-ms-flex:1;flex:1;-ms-flex-order:0;order:0;color:var(--ion-text-color, #000);text-overflow:ellipsis;white-space:nowrap;overflow:hidden}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){.alert-radio-label.sc-ion-alert-ios{padding-left:unset;padding-right:unset;-webkit-padding-start:13px;padding-inline-start:13px;-webkit-padding-end:13px;padding-inline-end:13px}}[aria-checked=true].sc-ion-alert-ios .alert-radio-label.sc-ion-alert-ios{color:var(--ion-color-primary, #3880ff)}.alert-radio-icon.sc-ion-alert-ios{position:relative;-ms-flex-order:1;order:1;min-width:30px}[aria-checked=true].sc-ion-alert-ios .alert-radio-inner.sc-ion-alert-ios{left:7px;top:-7px;position:absolute;width:6px;height:12px;-webkit-transform:rotate(45deg);transform:rotate(45deg);border-width:2px;border-top-width:0;border-left-width:0;border-style:solid;border-color:var(--ion-color-primary, #3880ff)}[dir=rtl].sc-ion-alert-ios [aria-checked=true].sc-ion-alert-ios .alert-radio-inner.sc-ion-alert-ios,[dir=rtl].sc-ion-alert-ios-h [aria-checked=true].sc-ion-alert-ios .alert-radio-inner.sc-ion-alert-ios,[dir=rtl] .sc-ion-alert-ios-h [aria-checked=true].sc-ion-alert-ios .alert-radio-inner.sc-ion-alert-ios{left:unset;right:unset;right:7px}.alert-checkbox-label.sc-ion-alert-ios{padding-left:13px;padding-right:13px;padding-top:13px;padding-bottom:13px;-ms-flex:1;flex:1;color:var(--ion-text-color, #000);text-overflow:ellipsis;white-space:nowrap;overflow:hidden}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){.alert-checkbox-label.sc-ion-alert-ios{padding-left:unset;padding-right:unset;-webkit-padding-start:13px;padding-inline-start:13px;-webkit-padding-end:13px;padding-inline-end:13px}}.alert-checkbox-icon.sc-ion-alert-ios{border-radius:50%;margin-left:16px;margin-right:6px;margin-top:10px;margin-bottom:10px;position:relative;width:24px;height:24px;border-width:1px;border-style:solid;border-color:var(--ion-item-border-color, var(--ion-border-color, var(--ion-color-step-250, #c8c7cc)));background-color:var(--ion-item-background, var(--ion-background-color, #fff));contain:strict}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){.alert-checkbox-icon.sc-ion-alert-ios{margin-left:unset;margin-right:unset;-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:6px;margin-inline-end:6px}}[aria-checked=true].sc-ion-alert-ios .alert-checkbox-icon.sc-ion-alert-ios{border-color:var(--ion-color-primary, #3880ff);background-color:var(--ion-color-primary, #3880ff)}[aria-checked=true].sc-ion-alert-ios .alert-checkbox-inner.sc-ion-alert-ios{left:9px;top:4px;position:absolute;width:5px;height:12px;-webkit-transform:rotate(45deg);transform:rotate(45deg);border-width:1px;border-top-width:0;border-left-width:0;border-style:solid;border-color:var(--ion-background-color, #fff)}[dir=rtl].sc-ion-alert-ios [aria-checked=true].sc-ion-alert-ios .alert-checkbox-inner.sc-ion-alert-ios,[dir=rtl].sc-ion-alert-ios-h [aria-checked=true].sc-ion-alert-ios .alert-checkbox-inner.sc-ion-alert-ios,[dir=rtl] .sc-ion-alert-ios-h [aria-checked=true].sc-ion-alert-ios .alert-checkbox-inner.sc-ion-alert-ios{left:unset;right:unset;right:9px}.alert-button-group.sc-ion-alert-ios{margin-right:-0.55px;-ms-flex-wrap:wrap;flex-wrap:wrap}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){.alert-button-group.sc-ion-alert-ios{margin-right:unset;-webkit-margin-end:-0.55px;margin-inline-end:-0.55px}}.alert-button.sc-ion-alert-ios{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;border-radius:0;-ms-flex:1 1 auto;flex:1 1 auto;min-width:50%;height:44px;border-top:0.55px solid rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.2);border-right:0.55px solid rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.2);background-color:transparent;color:var(--ion-color-primary, #3880ff);font-size:17px;overflow:hidden}[dir=rtl].sc-ion-alert-ios .alert-button.sc-ion-alert-ios:first-child,[dir=rtl].sc-ion-alert-ios-h .alert-button.sc-ion-alert-ios:first-child,[dir=rtl] .sc-ion-alert-ios-h .alert-button.sc-ion-alert-ios:first-child{border-right:0}.alert-button.sc-ion-alert-ios:last-child{border-right:0;font-weight:bold}[dir=rtl].sc-ion-alert-ios .alert-button.sc-ion-alert-ios:last-child,[dir=rtl].sc-ion-alert-ios-h .alert-button.sc-ion-alert-ios:last-child,[dir=rtl] .sc-ion-alert-ios-h .alert-button.sc-ion-alert-ios:last-child{border-right:0.55px solid rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.2)}.alert-button.ion-activated.sc-ion-alert-ios{background-color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.1)}.alert-button-role-destructive.sc-ion-alert-ios,.alert-button-role-destructive.ion-activated.sc-ion-alert-ios,.alert-button-role-destructive.ion-focused.sc-ion-alert-ios{color:var(--ion-color-danger, #eb445a)}",IA=".sc-ion-alert-md-h{--min-width:250px;--width:auto;--min-height:auto;--height:auto;--max-height:90%;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:absolute;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;outline:none;font-family:var(--ion-font-family, inherit);contain:strict;-ms-touch-action:none;touch-action:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:1001}.overlay-hidden.sc-ion-alert-md-h{display:none}.alert-top.sc-ion-alert-md-h{padding-top:50px;-ms-flex-align:start;align-items:flex-start}.alert-wrapper.sc-ion-alert-md{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);background:var(--background);contain:content;opacity:0;z-index:10}.alert-title.sc-ion-alert-md{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0}.alert-sub-title.sc-ion-alert-md{margin-left:0;margin-right:0;margin-top:5px;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;font-weight:normal}.alert-message.sc-ion-alert-md{-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-overflow-scrolling:touch;overflow-y:auto;overscroll-behavior-y:contain}.alert-checkbox-group.sc-ion-alert-md::-webkit-scrollbar,.alert-radio-group.sc-ion-alert-md::-webkit-scrollbar,.alert-message.sc-ion-alert-md::-webkit-scrollbar{display:none}.alert-input.sc-ion-alert-md{padding-left:0;padding-right:0;padding-top:10px;padding-bottom:10px;width:100%;border:0;background:inherit;font:inherit;-webkit-box-sizing:border-box;box-sizing:border-box}.alert-button-group.sc-ion-alert-md{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;width:100%}.alert-button-group-vertical.sc-ion-alert-md{-ms-flex-direction:column;flex-direction:column;-ms-flex-wrap:nowrap;flex-wrap:nowrap}.alert-button.sc-ion-alert-md{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;display:block;border:0;font-size:14px;line-height:20px;z-index:0}.alert-button.ion-focused.sc-ion-alert-md,.alert-tappable.ion-focused.sc-ion-alert-md{background:var(--ion-color-step-100, #e6e6e6)}.alert-button-inner.sc-ion-alert-md{display:-ms-flexbox;display:flex;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%}.alert-input-disabled.sc-ion-alert-md,.alert-checkbox-button-disabled.sc-ion-alert-md .alert-button-inner.sc-ion-alert-md,.alert-radio-button-disabled.sc-ion-alert-md .alert-button-inner.sc-ion-alert-md{cursor:default;opacity:0.5;pointer-events:none}.alert-tappable.sc-ion-alert-md{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;display:-ms-flexbox;display:flex;width:100%;border:0;background:transparent;font-size:inherit;line-height:initial;text-align:start;-webkit-appearance:none;-moz-appearance:none;appearance:none;contain:strict}.alert-button.sc-ion-alert-md,.alert-checkbox.sc-ion-alert-md,.alert-input.sc-ion-alert-md,.alert-radio.sc-ion-alert-md{outline:none}.alert-radio-icon.sc-ion-alert-md,.alert-checkbox-icon.sc-ion-alert-md,.alert-checkbox-inner.sc-ion-alert-md{-webkit-box-sizing:border-box;box-sizing:border-box}textarea.alert-input.sc-ion-alert-md{min-height:37px;resize:none}.sc-ion-alert-md-h{--background:var(--ion-overlay-background-color, var(--ion-background-color, #fff));--max-width:280px;--backdrop-opacity:var(--ion-backdrop-opacity, 0.32);font-size:14px}.alert-wrapper.sc-ion-alert-md{border-radius:4px;-webkit-box-shadow:0 11px 15px -7px rgba(0, 0, 0, 0.2), 0 24px 38px 3px rgba(0, 0, 0, 0.14), 0 9px 46px 8px rgba(0, 0, 0, 0.12);box-shadow:0 11px 15px -7px rgba(0, 0, 0, 0.2), 0 24px 38px 3px rgba(0, 0, 0, 0.14), 0 9px 46px 8px rgba(0, 0, 0, 0.12)}.alert-head.sc-ion-alert-md{padding-left:23px;padding-right:23px;padding-top:20px;padding-bottom:15px;text-align:start}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){.alert-head.sc-ion-alert-md{padding-left:unset;padding-right:unset;-webkit-padding-start:23px;padding-inline-start:23px;-webkit-padding-end:23px;padding-inline-end:23px}}.alert-title.sc-ion-alert-md{color:var(--ion-text-color, #000);font-size:20px;font-weight:500}.alert-sub-title.sc-ion-alert-md{color:var(--ion-text-color, #000);font-size:16px}.alert-message.sc-ion-alert-md,.alert-input-group.sc-ion-alert-md{padding-left:24px;padding-right:24px;padding-top:20px;padding-bottom:20px;color:var(--ion-color-step-550, #737373)}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){.alert-message.sc-ion-alert-md,.alert-input-group.sc-ion-alert-md{padding-left:unset;padding-right:unset;-webkit-padding-start:24px;padding-inline-start:24px;-webkit-padding-end:24px;padding-inline-end:24px}}.alert-message.sc-ion-alert-md{max-height:266px;font-size:16px}.alert-message.sc-ion-alert-md:empty{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0}.alert-head.sc-ion-alert-md+.alert-message.sc-ion-alert-md{padding-top:0}.alert-input.sc-ion-alert-md{margin-left:0;margin-right:0;margin-top:5px;margin-bottom:5px;border-bottom:1px solid var(--ion-color-step-150, #d9d9d9);color:var(--ion-text-color, #000)}.alert-input.sc-ion-alert-md::-webkit-input-placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, #999999));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-md::-moz-placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, #999999));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-md:-ms-input-placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, #999999));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-md::-ms-input-placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, #999999));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-md::placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, #999999));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-md::-ms-clear{display:none}.alert-input.sc-ion-alert-md:focus{margin-bottom:4px;border-bottom:2px solid var(--ion-color-primary, #3880ff)}.alert-radio-group.sc-ion-alert-md,.alert-checkbox-group.sc-ion-alert-md{position:relative;max-height:266px;border-top:1px solid var(--ion-color-step-150, #d9d9d9);border-bottom:1px solid var(--ion-color-step-150, #d9d9d9);overflow:auto}.alert-tappable.sc-ion-alert-md{position:relative;height:48px;overflow:hidden}.alert-radio-label.sc-ion-alert-md{padding-left:52px;padding-right:26px;padding-top:13px;padding-bottom:13px;-ms-flex:1;flex:1;color:var(--ion-color-step-850, #262626);font-size:16px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){.alert-radio-label.sc-ion-alert-md{padding-left:unset;padding-right:unset;-webkit-padding-start:52px;padding-inline-start:52px;-webkit-padding-end:26px;padding-inline-end:26px}}.alert-radio-icon.sc-ion-alert-md{left:26px;top:0;border-radius:50%;display:block;position:relative;width:20px;height:20px;border-width:2px;border-style:solid;border-color:var(--ion-color-step-550, #737373)}[dir=rtl].sc-ion-alert-md .alert-radio-icon.sc-ion-alert-md,[dir=rtl].sc-ion-alert-md-h .alert-radio-icon.sc-ion-alert-md,[dir=rtl] .sc-ion-alert-md-h .alert-radio-icon.sc-ion-alert-md{left:unset;right:unset;right:26px}.alert-radio-inner.sc-ion-alert-md{left:3px;top:3px;border-radius:50%;position:absolute;width:10px;height:10px;-webkit-transform:scale3d(0, 0, 0);transform:scale3d(0, 0, 0);-webkit-transition:-webkit-transform 280ms cubic-bezier(0.4, 0, 0.2, 1);transition:-webkit-transform 280ms cubic-bezier(0.4, 0, 0.2, 1);transition:transform 280ms cubic-bezier(0.4, 0, 0.2, 1);transition:transform 280ms cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 280ms cubic-bezier(0.4, 0, 0.2, 1);background-color:var(--ion-color-primary, #3880ff)}[dir=rtl].sc-ion-alert-md .alert-radio-inner.sc-ion-alert-md,[dir=rtl].sc-ion-alert-md-h .alert-radio-inner.sc-ion-alert-md,[dir=rtl] .sc-ion-alert-md-h .alert-radio-inner.sc-ion-alert-md{left:unset;right:unset;right:3px}[aria-checked=true].sc-ion-alert-md .alert-radio-label.sc-ion-alert-md{color:var(--ion-color-step-850, #262626)}[aria-checked=true].sc-ion-alert-md .alert-radio-icon.sc-ion-alert-md{border-color:var(--ion-color-primary, #3880ff)}[aria-checked=true].sc-ion-alert-md .alert-radio-inner.sc-ion-alert-md{-webkit-transform:scale3d(1, 1, 1);transform:scale3d(1, 1, 1)}.alert-checkbox-label.sc-ion-alert-md{padding-left:53px;padding-right:26px;padding-top:13px;padding-bottom:13px;-ms-flex:1;flex:1;color:var(--ion-color-step-850, #262626);font-size:16px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){.alert-checkbox-label.sc-ion-alert-md{padding-left:unset;padding-right:unset;-webkit-padding-start:53px;padding-inline-start:53px;-webkit-padding-end:26px;padding-inline-end:26px}}.alert-checkbox-icon.sc-ion-alert-md{left:26px;top:0;border-radius:2px;position:relative;width:16px;height:16px;border-width:2px;border-style:solid;border-color:var(--ion-color-step-550, #737373);contain:strict}[dir=rtl].sc-ion-alert-md .alert-checkbox-icon.sc-ion-alert-md,[dir=rtl].sc-ion-alert-md-h .alert-checkbox-icon.sc-ion-alert-md,[dir=rtl] .sc-ion-alert-md-h .alert-checkbox-icon.sc-ion-alert-md{left:unset;right:unset;right:26px}[aria-checked=true].sc-ion-alert-md .alert-checkbox-icon.sc-ion-alert-md{border-color:var(--ion-color-primary, #3880ff);background-color:var(--ion-color-primary, #3880ff)}[aria-checked=true].sc-ion-alert-md .alert-checkbox-inner.sc-ion-alert-md{left:3px;top:0;position:absolute;width:6px;height:10px;-webkit-transform:rotate(45deg);transform:rotate(45deg);border-width:2px;border-top-width:0;border-left-width:0;border-style:solid;border-color:var(--ion-color-primary-contrast, #fff)}[dir=rtl].sc-ion-alert-md [aria-checked=true].sc-ion-alert-md .alert-checkbox-inner.sc-ion-alert-md,[dir=rtl].sc-ion-alert-md-h [aria-checked=true].sc-ion-alert-md .alert-checkbox-inner.sc-ion-alert-md,[dir=rtl] .sc-ion-alert-md-h [aria-checked=true].sc-ion-alert-md .alert-checkbox-inner.sc-ion-alert-md{left:unset;right:unset;right:3px}.alert-button-group.sc-ion-alert-md{padding-left:8px;padding-right:8px;padding-top:8px;padding-bottom:8px;-webkit-box-sizing:border-box;box-sizing:border-box;-ms-flex-wrap:wrap-reverse;flex-wrap:wrap-reverse;-ms-flex-pack:end;justify-content:flex-end}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){.alert-button-group.sc-ion-alert-md{padding-left:unset;padding-right:unset;-webkit-padding-start:8px;padding-inline-start:8px;-webkit-padding-end:8px;padding-inline-end:8px}}.alert-button.sc-ion-alert-md{border-radius:2px;margin-left:0;margin-right:8px;margin-top:0;margin-bottom:0;padding-left:10px;padding-right:10px;padding-top:10px;padding-bottom:10px;position:relative;background-color:transparent;color:var(--ion-color-primary, #3880ff);font-weight:500;text-align:end;text-transform:uppercase;overflow:hidden}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){.alert-button.sc-ion-alert-md{margin-left:unset;margin-right:unset;-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:8px;margin-inline-end:8px}}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){.alert-button.sc-ion-alert-md{padding-left:unset;padding-right:unset;-webkit-padding-start:10px;padding-inline-start:10px;-webkit-padding-end:10px;padding-inline-end:10px}}.alert-button-inner.sc-ion-alert-md{-ms-flex-pack:end;justify-content:flex-end}",zA=Nl(class extends Bl{constructor(){super(),this.__registerHost(),this.didPresent=Zs(this,"ionAlertDidPresent",7),this.willPresent=Zs(this,"ionAlertWillPresent",7),this.willDismiss=Zs(this,"ionAlertWillDismiss",7),this.didDismiss=Zs(this,"ionAlertDidDismiss",7),this.processedInputs=[],this.processedButtons=[],this.presented=!1,this.keyboardClose=!0,this.buttons=[],this.inputs=[],this.backdropDismiss=!0,this.translucent=!1,this.animated=!0,this.onBackdropTap=()=>{this.dismiss(void 0,Np)},this.dispatchCancelHandler=j=>{const ht=j.detail.role;if(gy(ht)){const e=this.processedButtons.find(B=>B.role==="cancel");this.callButtonHandler(e)}}}onKeydown(j){if(!new Set(this.processedInputs.map(l=>l.type)).has("radio")||j.target&&!this.el.contains(j.target)||j.target.classList.contains("alert-button"))return;const e=this.el.querySelectorAll(".alert-radio"),B=Array.from(e).filter(l=>!l.disabled),V=B.findIndex(l=>l.id===j.target.id);let f;if(["ArrowDown","ArrowRight"].includes(j.code)&&(f=V===B.length-1?B[0]:B[V+1]),["ArrowUp","ArrowLeft"].includes(j.code)&&(f=V===0?B[B.length-1]:B[V-1]),f&&B.includes(f)){const l=this.processedInputs.find(m=>m.id===(f==null?void 0:f.id));l&&(this.rbClick(l),f.focus())}}buttonsChanged(){const j=this.buttons;this.processedButtons=j.map(ht=>typeof ht=="string"?{text:ht,role:ht.toLowerCase()==="cancel"?"cancel":void 0}:ht)}inputsChanged(){const j=this.inputs,ht=j.find(f=>!f.disabled),B=j.find(f=>f.checked&&!f.disabled)||ht,V=new Set(j.map(f=>f.type));V.has("checkbox")&&V.has("radio")&&console.warn(`Alert cannot mix input types: ${Array.from(V.values()).join("/")}. Please see alert docs for more info.`),this.inputType=V.values().next().value,this.processedInputs=j.map((f,l)=>({type:f.type||"text",name:f.name||`${l}`,placeholder:f.placeholder||"",value:f.value,label:f.label,checked:!!f.checked,disabled:!!f.disabled,id:f.id||`alert-input-${this.overlayIndex}-${l}`,handler:f.handler,min:f.min,max:f.max,cssClass:f.cssClass||"",attributes:f.attributes||{},tabindex:f.type==="radio"&&f!==B?-1:0}))}connectedCallback(){TT(this.el)}componentWillLoad(){this.inputsChanged(),this.buttonsChanged()}disconnectedCallback(){this.gesture&&(this.gesture.destroy(),this.gesture=void 0)}componentDidLoad(){this.gesture||Ms(this)==="md"||!this.wrapperEl||(this.gesture=MA(this.wrapperEl,j=>j.classList.contains("alert-button")),this.gesture.enable(!0))}present(){return DT(this,"alertEnter",CA,LA)}dismiss(j,ht){return IT(this,j,ht,"alertLeave",EA,DA)}onDidDismiss(){return vy(this.el,"ionAlertDidDismiss")}onWillDismiss(){return vy(this.el,"ionAlertWillDismiss")}rbClick(j){for(const ht of this.processedInputs)ht.checked=ht===j,ht.tabindex=ht===j?0:-1;this.activeId=j.id,$v(j.handler,j),Bh(this)}cbClick(j){j.checked=!j.checked,$v(j.handler,j),Bh(this)}buttonClick(j){const ht=j.role,e=this.getValues();if(gy(ht))return this.dismiss({values:e},ht);const B=this.callButtonHandler(j,e);return B!==!1?this.dismiss(Object.assign({values:e},B),j.role):Promise.resolve(!1)}callButtonHandler(j,ht){if(j!=null&&j.handler){const e=$v(j.handler,ht);if(e===!1)return!1;if(typeof e=="object")return e}return{}}getValues(){if(this.processedInputs.length===0)return;if(this.inputType==="radio"){const ht=this.processedInputs.find(e=>!!e.checked);return ht?ht.value:void 0}if(this.inputType==="checkbox")return this.processedInputs.filter(ht=>ht.checked).map(ht=>ht.value);const j={};return this.processedInputs.forEach(ht=>{j[ht.name]=ht.value||""}),j}renderAlertInputs(){switch(this.inputType){case"checkbox":return this.renderCheckbox();case"radio":return this.renderRadio();default:return this.renderInput()}}renderCheckbox(){const j=this.processedInputs,ht=Ms(this);return j.length===0?null:zi("div",{class:"alert-checkbox-group"},j.map(e=>zi("button",{type:"button",onClick:()=>this.cbClick(e),"aria-checked":`${e.checked}`,id:e.id,disabled:e.disabled,tabIndex:e.tabindex,role:"checkbox",class:Object.assign(Object.assign({},Ih(e.cssClass)),{"alert-tappable":!0,"alert-checkbox":!0,"alert-checkbox-button":!0,"ion-focusable":!0,"alert-checkbox-button-disabled":e.disabled||!1})},zi("div",{class:"alert-button-inner"},zi("div",{class:"alert-checkbox-icon"},zi("div",{class:"alert-checkbox-inner"})),zi("div",{class:"alert-checkbox-label"},e.label)),ht==="md"&&zi("ion-ripple-effect",null))))}renderRadio(){const j=this.processedInputs;return j.length===0?null:zi("div",{class:"alert-radio-group",role:"radiogroup","aria-activedescendant":this.activeId},j.map(ht=>zi("button",{type:"button",onClick:()=>this.rbClick(ht),"aria-checked":`${ht.checked}`,disabled:ht.disabled,id:ht.id,tabIndex:ht.tabindex,class:Object.assign(Object.assign({},Ih(ht.cssClass)),{"alert-radio-button":!0,"alert-tappable":!0,"alert-radio":!0,"ion-focusable":!0,"alert-radio-button-disabled":ht.disabled||!1}),role:"radio"},zi("div",{class:"alert-button-inner"},zi("div",{class:"alert-radio-icon"},zi("div",{class:"alert-radio-inner"})),zi("div",{class:"alert-radio-label"},ht.label)))))}renderInput(){const j=this.processedInputs;return j.length===0?null:zi("div",{class:"alert-input-group"},j.map(ht=>{var e,B,V,f;return ht.type==="textarea"?zi("div",{class:"alert-input-wrapper"},zi("textarea",Object.assign({placeholder:ht.placeholder,value:ht.value,id:ht.id,tabIndex:ht.tabindex},ht.attributes,{disabled:(B=(e=ht.attributes)===null||e===void 0?void 0:e.disabled)!==null&&B!==void 0?B:ht.disabled,class:by(ht),onInput:l=>{var m;ht.value=l.target.value,!((m=ht.attributes)===null||m===void 0)&&m.onInput&&ht.attributes.onInput(l)}}))):zi("div",{class:"alert-input-wrapper"},zi("input",Object.assign({placeholder:ht.placeholder,type:ht.type,min:ht.min,max:ht.max,value:ht.value,id:ht.id,tabIndex:ht.tabindex},ht.attributes,{disabled:(f=(V=ht.attributes)===null||V===void 0?void 0:V.disabled)!==null&&f!==void 0?f:ht.disabled,class:by(ht),onInput:l=>{var m;ht.value=l.target.value,!((m=ht.attributes)===null||m===void 0)&&m.onInput&&ht.attributes.onInput(l)}})))}))}renderAlertButtons(){const j=this.processedButtons,ht=Ms(this),e={"alert-button-group":!0,"alert-button-group-vertical":j.length>2};return zi("div",{class:e},j.map(B=>zi("button",{type:"button",id:B.id,class:RA(B),tabIndex:0,onClick:()=>this.buttonClick(B)},zi("span",{class:"alert-button-inner"},B.text),ht==="md"&&zi("ion-ripple-effect",null))))}render(){const{overlayIndex:j,header:ht,subHeader:e,message:B,htmlAttributes:V}=this,f=Ms(this),l=`alert-${j}-hdr`,m=`alert-${j}-sub-hdr`,x=`alert-${j}-msg`,t=this.inputs.length>0||this.buttons.length>0?"alertdialog":"alert";return zi(Tl,Object.assign({role:t,"aria-modal":"true","aria-labelledby":ht?l:e?m:null,"aria-describedby":B?x:null,tabindex:"-1"},V,{style:{zIndex:`${2e4+j}`},class:Object.assign(Object.assign({},Ih(this.cssClass)),{[f]:!0,"overlay-hidden":!0,"alert-translucent":this.translucent}),onIonAlertWillDismiss:this.dispatchCancelHandler,onIonBackdropTap:this.onBackdropTap}),zi("ion-backdrop",{tappable:this.backdropDismiss}),zi("div",{tabindex:"0"}),zi("div",{class:"alert-wrapper ion-overlay-wrapper",ref:i=>this.wrapperEl=i},zi("div",{class:"alert-head"},ht&&zi("h2",{id:l,class:"alert-title"},ht),e&&zi("h2",{id:m,class:"alert-sub-title"},e)),zi("div",{id:x,class:"alert-message",innerHTML:tA(B)}),this.renderAlertInputs(),this.renderAlertButtons()),zi("div",{tabindex:"0"}))}get el(){return this}static get watchers(){return{buttons:["buttonsChanged"],inputs:["inputsChanged"]}}static get style(){return{ios:PA,md:IA}}},[34,"ion-alert",{overlayIndex:[2,"overlay-index"],keyboardClose:[4,"keyboard-close"],enterAnimation:[16],leaveAnimation:[16],cssClass:[1,"css-class"],header:[1],subHeader:[1,"sub-header"],message:[1],buttons:[16],inputs:[1040],backdropDismiss:[4,"backdrop-dismiss"],translucent:[4],animated:[4],htmlAttributes:[16],present:[64],dismiss:[64],onDidDismiss:[64],onWillDismiss:[64]},[[4,"keydown","onKeydown"]]]),by=j=>{var ht,e,B;return Object.assign(Object.assign({"alert-input":!0,"alert-input-disabled":((e=(ht=j.attributes)===null||ht===void 0?void 0:ht.disabled)!==null&&e!==void 0?e:j.disabled)||!1},Ih(j.cssClass)),Ih(j.attributes?(B=j.attributes.class)===null||B===void 0?void 0:B.toString():""))},RA=j=>Object.assign({"alert-button":!0,"ion-focusable":!0,"ion-activatable":!0,[`alert-button-role-${j.role}`]:j.role!==void 0},Ih(j.cssClass));function FA(){if(typeof customElements>"u")return;["ion-alert","ion-backdrop","ion-ripple-effect"].forEach(ht=>{switch(ht){case"ion-alert":customElements.get(ht)||customElements.define(ht,zA);break;case"ion-backdrop":customElements.get(ht)||D5();break;case"ion-ripple-effect":customElements.get(ht)||ng();break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const OA=FA;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 */var xy;(function(j){j.Dark="DARK",j.Light="LIGHT",j.Default="DEFAULT"})(xy||(xy={}));/*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 *//*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const BA=":host{padding-left:var(--ion-safe-area-left);padding-right:var(--ion-safe-area-right);display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:auto;padding-bottom:var(--ion-safe-area-bottom, 0);border-top:var(--border);background:var(--background);color:var(--color);text-align:center;contain:strict;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:10;-webkit-box-sizing:content-box !important;box-sizing:content-box !important}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--ion-safe-area-left);padding-inline-start:var(--ion-safe-area-left);-webkit-padding-end:var(--ion-safe-area-right);padding-inline-end:var(--ion-safe-area-right)}}:host(.ion-color) ::slotted(ion-tab-button){--background-focused:var(--ion-color-shade);--color-selected:var(--ion-color-contrast)}:host(.ion-color) ::slotted(.tab-selected){color:var(--ion-color-contrast)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){color:rgba(var(--ion-color-contrast-rgb), 0.7)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){background:var(--ion-color-base)}:host(.ion-color) ::slotted(ion-tab-button.ion-focused),:host(.tab-bar-translucent) ::slotted(ion-tab-button.ion-focused){background:var(--background-focused)}:host(.tab-bar-translucent) ::slotted(ion-tab-button){background:transparent}:host([slot=top]){padding-top:var(--ion-safe-area-top, 0);padding-bottom:0;border-top:0;border-bottom:var(--border)}:host(.tab-bar-hidden){display:none !important}:host{--background:var(--ion-tab-bar-background, var(--ion-color-step-50, #f7f7f7));--background-focused:var(--ion-tab-bar-background-focused, #e0e0e0);--border:0.55px solid var(--ion-tab-bar-border-color, var(--ion-border-color, var(--ion-color-step-150, rgba(0, 0, 0, 0.2))));--color:var(--ion-tab-bar-color, var(--ion-color-step-400, #999999));--color-selected:var(--ion-tab-bar-color-selected, var(--ion-color-primary, #3880ff));height:50px}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){:host(.tab-bar-translucent){--background:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.8);-webkit-backdrop-filter:saturate(210%) blur(20px);backdrop-filter:saturate(210%) blur(20px)}:host(.ion-color.tab-bar-translucent){background:rgba(var(--ion-color-base-rgb), 0.8)}:host(.tab-bar-translucent) ::slotted(ion-tab-button.ion-focused){background:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.6)}}",NA=":host{padding-left:var(--ion-safe-area-left);padding-right:var(--ion-safe-area-right);display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:auto;padding-bottom:var(--ion-safe-area-bottom, 0);border-top:var(--border);background:var(--background);color:var(--color);text-align:center;contain:strict;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:10;-webkit-box-sizing:content-box !important;box-sizing:content-box !important}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--ion-safe-area-left);padding-inline-start:var(--ion-safe-area-left);-webkit-padding-end:var(--ion-safe-area-right);padding-inline-end:var(--ion-safe-area-right)}}:host(.ion-color) ::slotted(ion-tab-button){--background-focused:var(--ion-color-shade);--color-selected:var(--ion-color-contrast)}:host(.ion-color) ::slotted(.tab-selected){color:var(--ion-color-contrast)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){color:rgba(var(--ion-color-contrast-rgb), 0.7)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){background:var(--ion-color-base)}:host(.ion-color) ::slotted(ion-tab-button.ion-focused),:host(.tab-bar-translucent) ::slotted(ion-tab-button.ion-focused){background:var(--background-focused)}:host(.tab-bar-translucent) ::slotted(ion-tab-button){background:transparent}:host([slot=top]){padding-top:var(--ion-safe-area-top, 0);padding-bottom:0;border-top:0;border-bottom:var(--border)}:host(.tab-bar-hidden){display:none !important}:host{--background:var(--ion-tab-bar-background, var(--ion-background-color, #fff));--background-focused:var(--ion-tab-bar-background-focused, #e0e0e0);--border:1px solid var(--ion-tab-bar-border-color, var(--ion-border-color, var(--ion-color-step-150, rgba(0, 0, 0, 0.07))));--color:var(--ion-tab-bar-color, var(--ion-color-step-600, #666666));--color-selected:var(--ion-tab-bar-color-selected, var(--ion-color-primary, #3880ff));height:56px}",UA=Nl(class extends Bl{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionTabBarChanged=Zs(this,"ionTabBarChanged",7),this.keyboardCtrl=null,this.keyboardVisible=!1,this.translucent=!1}selectedTabChanged(){this.selectedTab!==void 0&&this.ionTabBarChanged.emit({tab:this.selectedTab})}componentWillLoad(){this.selectedTabChanged()}connectedCallback(){this.keyboardCtrl=ZT(j=>{this.keyboardVisible=j})}disconnectedCallback(){this.keyboardCtrl&&this.keyboardCtrl.destroy()}render(){const{color:j,translucent:ht,keyboardVisible:e}=this,B=Ms(this),V=e&&this.el.getAttribute("slot")!=="top";return zi(Tl,{role:"tablist","aria-hidden":V?"true":null,class:jf(j,{[B]:!0,"tab-bar-translucent":ht,"tab-bar-hidden":V})},zi("slot",null))}get el(){return this}static get watchers(){return{selectedTab:["selectedTabChanged"]}}static get style(){return{ios:BA,md:NA}}},[33,"ion-tab-bar",{color:[513],selectedTab:[1,"selected-tab"],translucent:[4],keyboardVisible:[32]}]),HA=UA;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const $f={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,safari10:!1,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,cssVarShim:!1,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,dynamicImportShim:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0};const og=typeof window<"u"?window:{};$f.cssVarShim&&og.CSS;const VA=og.document||{head:{}},$4=og.HTMLElement||class{};const X4=$f.shadowDomShim&&$f.shadowDom?(()=>(VA.head.attachShadow+"").indexOf("[native")>-1)():!0;const j4=$f.constructableCSS?(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replace=="function"}catch{}return!1})():!1;const Z4=$f.isTesting?["STENCIL:"]:["%cstencil","color: white;background:#4c47ff;font-weight: bold; font-size:10px; padding:2px 6px; border-radius: 5px"];const K4={isDev:!!$f.isDev,isBrowser:!0,isServer:!1,isTesting:!!$f.isTesting};const wy="update:modelValue",Zv="modelValue",GA="routerLink",_y="navManager",YA="router",Sh=Symbol(),Kv={default:Sh},ky=j=>(j==null?void 0:j.split(" "))||[],WA=(j,ht,e=[])=>{var B;return[...Array.from(((B=j.value)===null||B===void 0?void 0:B.classList)||[]),...e].filter((V,f,l)=>!ht.has(V)&&l.indexOf(V)===f)},Ku=(j,ht,e=[],B,V,f)=>{ht!==void 0&&ht();const l=Qp((m,{attrs:x,slots:t,emit:a})=>{var i;let r=m[B];const n=Gf(),d=new Set(ky(x.class)),s=v=>{v.el&&(Array.isArray(V)?V:[V]).forEach(u=>{v.el.addEventListener(u.toLowerCase(),T=>{r=(T==null?void 0:T.target)[B],a(wy,r),f&&a(f,T)})})},o=Cd(),g=((i=o==null?void 0:o.appContext)===null||i===void 0?void 0:i.provides[_y])?Uf(_y):void 0,b=v=>{const{routerLink:_}=m;if(_!==Sh)if(g!==void 0){let u={event:v};for(const T in m){const c=m[T];m.hasOwnProperty(T)&&T.startsWith(YA)&&c!==Sh&&(u[T]=c)}g.navigate(u)}else console.warn("Tried to navigate, but no router was found. Make sure you have mounted Vue Router.")};return()=>{r=m[B],ky(x.class).forEach(T=>{d.add(T)});const v=m.onClick,_=T=>{v!==void 0&&v(T),T.defaultPrevented||b(T)};let u={ref:n,class:WA(n,d),onClick:_,onVnodeBeforeMount:V?s:void 0};for(const T in m){const c=m[T];m.hasOwnProperty(T)&&c!==Sh&&(u[T]=c)}return B&&(m[Zv]!==Sh?u=Object.assign(Object.assign({},u),{[B]:m[Zv]}):r!==Sh&&(u=Object.assign(Object.assign({},u),{[B]:r}))),Oh(j,u,t.default&&t.default())}});return l.displayName=j,l.props={[GA]:Kv},e.forEach(m=>{l.props[m]=Kv}),B&&(l.props[Zv]=Kv,l.emits=[wy,f]),l},$A=Ku("ion-button",G5,["color","buttonType","disabled","expand","fill","routerDirection","routerAnimation","download","href","rel","shape","size","strong","target","type","ionFocus","ionBlur"]),zf=Ku("ion-col",K5,["offset","offsetXs","offsetSm","offsetMd","offsetLg","offsetXl","pull","pullXs","pullSm","pullMd","pullLg","pullXl","push","pushXs","pushSm","pushMd","pushLg","pushXl","size","sizeXs","sizeSm","sizeMd","sizeLg","sizeXl"]),XA=Ku("ion-content",iT,["color","fullscreen","forceOverscroll","scrollX","scrollY","scrollEvents","ionScrollStart","ionScroll","ionScrollEnd"]),jA=Ku("ion-grid",qT,["fixed"]),ZA=Ku("ion-input",uA,["fireFocusEvents","color","accept","autocapitalize","autocomplete","autocorrect","autofocus","clearInput","clearOnEdit","debounce","disabled","enterkeyhint","inputmode","max","maxlength","min","minlength","multiple","name","pattern","placeholder","readonly","required","spellcheck","step","size","type","value","ionInput","ionChange","ionBlur","ionFocus","ionStyle"],"value","v-ion-change","ionChange"),Ty=Ku("ion-item",fA,["color","button","detail","detailIcon","disabled","download","fill","shape","href","rel","lines","counter","routerAnimation","routerDirection","target","type","counterFormatter"]),KA=Ku("ion-label",hA,["color","position","ionColor","ionStyle"]),JA=Ku("ion-list",mA,["lines","inset"]),gp=Ku("ion-row",wA);var Fu;(function(j){j.WillEnter="onIonViewWillEnter",j.DidEnter="onIonViewDidEnter",j.WillLeave="onIonViewWillLeave",j.DidLeave="onIonViewDidLeave"})(Fu||(Fu={}));FT+"",Fu.WillEnter,OT+"",Fu.DidEnter,BT+"",Fu.WillLeave,NT+"",Fu.DidLeave;const QA=(j,ht)=>{typeof customElements>"u"||customElements.get(j)||customElements.define(j,ht)},qA=(j,ht,e)=>{if(e){const B=e,V=B.proxy[j]||(B.proxy[j]=[]);B.exposed&&(B.exposed[j]=V);const f=(...l)=>{if(!B.isUnmounted)return l?ht(...l):ht()};return V.push(f),f}else console.warn("[@ionic/vue]: Ionic Lifecycle Hooks can only be used during execution of setup().")},av=j=>(ht,e=Cd())=>qA(j,ht,e);av(Fu.WillEnter);av(Fu.DidEnter);av(Fu.WillLeave);av(Fu.DidLeave);const Jv=j=>j==="ionChange"?"v-ion-change":j.replace(/([a-z0-9]|(?=[A-Z]))([A-Z])/g,"$1-$2").toLowerCase(),t4=()=>({ael:(j,ht,e,B)=>j.addEventListener(Jv(ht),e,B),rel:(j,ht,e,B)=>j.removeEventListener(Jv(ht),e,B),ce:(j,ht)=>new CustomEvent(Jv(j),ht)}),e4={async install(j,ht={}){typeof document<"u"&&document.documentElement.classList.add("ion-ce");const{ael:e,rel:B,ce:V}=t4();i5(Object.assign(Object.assign({},ht),{_ael:e,_rel:B,_ce:V}))}},r4=Qp({name:"IonPage",props:{registerIonPage:{type:Function,default:()=>{}}},mounted(){this.$props.registerIonPage(this.$refs.ionPage)},setup(j,{attrs:ht,slots:e}){return()=>Oh("div",Object.assign(Object.assign({},ht),{class:"ion-page",ref:"ionPage"}),e.default&&e.default())}}),pb=j=>{var ht;return((ht=j.type)===null||ht===void 0?void 0:ht.name)==="IonTabButton"},vb=j=>{let ht=[];return j.forEach(e=>{if(pb(e))ht.push(e);else if(Array.isArray(e.children)&&e.children.length>1){const B=vb(e.children);ht=[...ht,...B]}}),ht};Qp({name:"IonTabBar",props:{_tabsWillChange:{type:Function,default:()=>{}},_tabsDidChange:{type:Function,default:()=>{}}},data(){return{tabState:{activeTab:void 0,tabs:{}},tabVnodes:[]}},updated(){this.setupTabState(Uf("navManager"))},methods:{setupTabState(j){const ht=this.$data.tabState,e=Cd();(this.$data.tabVnodes=vb(e.subTree.children||[])).forEach(V=>{ht.tabs[V.props.tab]={originalHref:V.props.href,currentHref:V.props.href,ref:V},V.component.props._getTabState=()=>ht}),this.checkActiveTab(j)},checkActiveTab(j){const ht=j.getCurrentRouteInfo(),e=this.$data.tabVnodes,{tabs:B,activeTab:V}=this.$data.tabState,f=this.$data.tabState,m=Object.keys(B).find(i=>{const r=B[i].originalHref;return ht.pathname.startsWith(r)});if(e.forEach(i=>{const r=B[i.props.tab];(!r||r.originalHref!==i.props.href)&&(B[i.props.tab]={originalHref:i.props.href,currentHref:i.props.href,ref:i})}),m&&V){const i=this.$data.tabState.tabs[V].currentHref;if(m!==V||i!==ht.pathname){const r=ht.search?`?${ht.search}`:"";B[m]=Object.assign(Object.assign({},B[m]),{currentHref:ht.pathname+r})}ht.routerAction==="pop"&&m!==V&&(B[V]=Object.assign(Object.assign({},B[V]),{currentHref:B[V].originalHref}))}const x=e.find(i=>{var r;return pb(i)&&((r=i.props)===null||r===void 0?void 0:r.tab)===m}),t=this.$refs.ionTabBar,a=m!==V;t&&(x?(a&&this.$props._tabsWillChange(m),j.handleSetCurrentTab(m),t.selectedTab=f.activeTab=m,a&&this.$props._tabsDidChange(m)):t.selectedTab=f.activeTab="")}},mounted(){const j=Uf("navManager");this.setupTabState(j),j.registerHistoryChangeListener(()=>this.checkActiveTab(j))},setup(j,{slots:ht}){return QA("ion-tab-bar",HA),()=>Oh("ion-tab-bar",{ref:"ionTabBar"},ht.default&&ht.default())}});const Up=e_([]),n4=j=>{Up.value=[...Up.value,j]},i4=j=>{Up.value=Up.value.filter(ht=>ht!==j)},a4=(j=n4,ht=i4)=>{let e;return{attachViewToDom:(f,l,m={},x)=>{delete m.modal,delete m.popover;const t=document.createElement("div");return x&&t.classList.add(...x),f.appendChild(t),e=Oh(s3,{to:t},Oh(l,Object.assign({},m))),j(e),Promise.resolve(t)},removeViewFromDom:()=>(e&&ht(e),Promise.resolve())}},J4=Symbol();const o4=(j,ht,e=!1)=>{const B=e?a4():void 0,V=ht.create.bind(ht);return ht.create=f=>(j(),V(Object.assign(Object.assign({},f),{delegate:B}))),ht},s4=o4(OA,kT);function l4(){var j=window.navigator.userAgent,ht=j.indexOf("MSIE ");if(ht>0)return parseInt(j.substring(ht+5,j.indexOf(".",ht)),10);var e=j.indexOf("Trident/");if(e>0){var B=j.indexOf("rv:");return parseInt(j.substring(B+3,j.indexOf(".",B)),10)}var V=j.indexOf("Edge/");return V>0?parseInt(j.substring(V+5,j.indexOf(".",V)),10):-1}let wp;function T0(){T0.init||(T0.init=!0,wp=l4()!==-1)}var ov={name:"ResizeObserver",props:{emitOnMount:{type:Boolean,default:!1},ignoreWidth:{type:Boolean,default:!1},ignoreHeight:{type:Boolean,default:!1}},emits:["notify"],mounted(){T0(),Zp(()=>{this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitOnMount&&this.emitSize()});const j=document.createElement("object");this._resizeObject=j,j.setAttribute("aria-hidden","true"),j.setAttribute("tabindex",-1),j.onload=this.addResizeHandlers,j.type="text/html",wp&&this.$el.appendChild(j),j.data="about:blank",wp||this.$el.appendChild(j)},beforeUnmount(){this.removeResizeHandlers()},methods:{compareAndNotify(){(!this.ignoreWidth&&this._w!==this.$el.offsetWidth||!this.ignoreHeight&&this._h!==this.$el.offsetHeight)&&(this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitSize())},emitSize(){this.$emit("notify",{width:this._w,height:this._h})},addResizeHandlers(){this._resizeObject.contentDocument.defaultView.addEventListener("resize",this.compareAndNotify),this.compareAndNotify()},removeResizeHandlers(){this._resizeObject&&this._resizeObject.onload&&(!wp&&this._resizeObject.contentDocument&&this._resizeObject.contentDocument.defaultView.removeEventListener("resize",this.compareAndNotify),this.$el.removeChild(this._resizeObject),this._resizeObject.onload=null,this._resizeObject=null)}}};const c4=m_();v_("data-v-b329ee4c");const u4={class:"resize-observer",tabindex:"-1"};g_();const f4=c4((j,ht,e,B,V,f)=>(ou(),Ru("div",u4)));ov.render=f4;ov.__scopeId="data-v-b329ee4c";ov.__file="src/components/ResizeObserver.vue";function _p(j){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_p=function(ht){return typeof ht}:_p=function(ht){return ht&&typeof Symbol=="function"&&ht.constructor===Symbol&&ht!==Symbol.prototype?"symbol":typeof ht},_p(j)}function h4(j,ht){if(!(j instanceof ht))throw new TypeError("Cannot call a class as a function")}function Ay(j,ht){for(var e=0;e<ht.length;e++){var B=ht[e];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(j,B.key,B)}}function d4(j,ht,e){return ht&&Ay(j.prototype,ht),e&&Ay(j,e),j}function Sy(j){return p4(j)||v4(j)||g4(j)||m4()}function p4(j){if(Array.isArray(j))return A0(j)}function v4(j){if(typeof Symbol<"u"&&Symbol.iterator in Object(j))return Array.from(j)}function g4(j,ht){if(!!j){if(typeof j=="string")return A0(j,ht);var e=Object.prototype.toString.call(j).slice(8,-1);if(e==="Object"&&j.constructor&&(e=j.constructor.name),e==="Map"||e==="Set")return Array.from(j);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return A0(j,ht)}}function A0(j,ht){(ht==null||ht>j.length)&&(ht=j.length);for(var e=0,B=new Array(ht);e<ht;e++)B[e]=j[e];return B}function m4(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function y4(j){var ht;return typeof j=="function"?ht={callback:j}:ht=j,ht}function b4(j,ht){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},B,V,f,l=function(x){for(var t=arguments.length,a=new Array(t>1?t-1:0),i=1;i<t;i++)a[i-1]=arguments[i];if(f=a,!(B&&x===V)){var r=e.leading;typeof r=="function"&&(r=r(x,V)),(!B||x!==V)&&r&&j.apply(void 0,[x].concat(Sy(f))),V=x,clearTimeout(B),B=setTimeout(function(){j.apply(void 0,[x].concat(Sy(f))),B=0},ht)}};return l._clear=function(){clearTimeout(B),B=null},l}function gb(j,ht){if(j===ht)return!0;if(_p(j)==="object"){for(var e in j)if(!gb(j[e],ht[e]))return!1;return!0}return!1}var x4=function(){function j(ht,e,B){h4(this,j),this.el=ht,this.observer=null,this.frozen=!1,this.createObserver(e,B)}return d4(j,[{key:"createObserver",value:function(e,B){var V=this;if(this.observer&&this.destroyObserver(),!this.frozen){if(this.options=y4(e),this.callback=function(m,x){V.options.callback(m,x),m&&V.options.once&&(V.frozen=!0,V.destroyObserver())},this.callback&&this.options.throttle){var f=this.options.throttleOptions||{},l=f.leading;this.callback=b4(this.callback,this.options.throttle,{leading:function(x){return l==="both"||l==="visible"&&x||l==="hidden"&&!x}})}this.oldResult=void 0,this.observer=new IntersectionObserver(function(m){var x=m[0];if(m.length>1){var t=m.find(function(i){return i.isIntersecting});t&&(x=t)}if(V.callback){var a=x.isIntersecting&&x.intersectionRatio>=V.threshold;if(a===V.oldResult)return;V.oldResult=a,V.callback(a,x)}},this.options.intersection),Zp(function(){V.observer&&V.observer.observe(V.el)})}}},{key:"destroyObserver",value:function(){this.observer&&(this.observer.disconnect(),this.observer=null),this.callback&&this.callback._clear&&(this.callback._clear(),this.callback=null)}},{key:"threshold",get:function(){return this.options.intersection&&typeof this.options.intersection.threshold=="number"?this.options.intersection.threshold:0}}]),j}();function mb(j,ht,e){var B=ht.value;if(!!B)if(typeof IntersectionObserver>"u")console.warn("[vue-observe-visibility] IntersectionObserver API is not available in your browser. Please install this polyfill: https://github.com/w3c/IntersectionObserver/tree/master/polyfill");else{var V=new x4(j,B,e);j._vue_visibilityState=V}}function w4(j,ht,e){var B=ht.value,V=ht.oldValue;if(!gb(B,V)){var f=j._vue_visibilityState;if(!B){yb(j);return}f?f.createObserver(B,e):mb(j,{value:B},e)}}function yb(j){var ht=j._vue_visibilityState;ht&&(ht.destroyObserver(),delete j._vue_visibilityState)}var _4={beforeMount:mb,updated:w4,unmounted:yb};function k4(j){return{all:j=j||new Map,on:function(ht,e){var B=j.get(ht);B&&B.push(e)||j.set(ht,[e])},off:function(ht,e){var B=j.get(ht);B&&B.splice(B.indexOf(e)>>>0,1)},emit:function(ht,e){(j.get(ht)||[]).slice().map(function(B){B(e)}),(j.get("*")||[]).slice().map(function(B){B(ht,e)})}}}var bb={itemsLimit:1e3},T4=/(auto|scroll)/;function xb(j,ht){return j.parentNode===null?ht:xb(j.parentNode,ht.concat([j]))}var Qv=function(ht,e){return getComputedStyle(ht,null).getPropertyValue(e)},A4=function(ht){return Qv(ht,"overflow")+Qv(ht,"overflow-y")+Qv(ht,"overflow-x")},S4=function(ht){return T4.test(A4(ht))};function M4(j){if(j instanceof HTMLElement||j instanceof SVGElement){for(var ht=xb(j.parentNode,[]),e=0;e<ht.length;e+=1)if(S4(ht[e]))return ht[e];return document.scrollingElement||document.documentElement}}function kp(j){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?kp=function(ht){return typeof ht}:kp=function(ht){return ht&&typeof Symbol=="function"&&ht.constructor===Symbol&&ht!==Symbol.prototype?"symbol":typeof ht},kp(j)}var wb={items:{type:Array,required:!0},keyField:{type:String,default:"id"},direction:{type:String,default:"vertical",validator:function(ht){return["vertical","horizontal"].includes(ht)}}};function _b(){return this.items.length&&kp(this.items[0])!=="object"}var S0=!1;if(typeof window<"u"){S0=!1;try{var C4=Object.defineProperty({},"passive",{get:function(){S0=!0}});window.addEventListener("test",null,C4)}catch{}}let E4=0;var Nh={name:"RecycleScroller",components:{ResizeObserver:ov},directives:{ObserveVisibility:_4},props:{...wb,itemSize:{type:Number,default:null},minItemSize:{type:[Number,String],default:null},sizeField:{type:String,default:"size"},typeField:{type:String,default:"type"},buffer:{type:Number,default:200},pageMode:{type:Boolean,default:!1},prerender:{type:Number,default:0},emitUpdate:{type:Boolean,default:!1}},emits:["resize","visible","hidden","update"],data(){return{pool:[],totalSize:0,ready:!1,hoverKey:null}},computed:{sizes(){if(this.itemSize===null){const j={"-1":{accumulator:0}},ht=this.items,e=this.sizeField,B=this.minItemSize;let V=1e4,f=0,l;for(let m=0,x=ht.length;m<x;m++)l=ht[m][e]||B,l<V&&(V=l),f+=l,j[m]={accumulator:f,size:l};return this.$_computedMinItemSize=V,j}return[]},simpleArray:_b},watch:{items(){this.updateVisibleItems(!0)},pageMode(){this.applyPageMode(),this.updateVisibleItems(!1)},sizes:{handler(){this.updateVisibleItems(!1)},deep:!0}},created(){this.$_startIndex=0,this.$_endIndex=0,this.$_views=new Map,this.$_unusedViews=new Map,this.$_scrollDirty=!1,this.$_lastUpdateScrollPosition=0,this.prerender&&(this.$_prerender=!0,this.updateVisibleItems(!1))},mounted(){this.applyPageMode(),this.$nextTick(()=>{this.$_prerender=!1,this.updateVisibleItems(!0),this.ready=!0})},beforeUnmount(){this.removeListeners()},methods:{addView(j,ht,e,B,V){const f=Vf({id:E4++,index:ht,used:!0,key:B,type:V}),l=Wy({item:e,position:0,nr:f});return j.push(l),l},unuseView(j,ht=!1){const e=this.$_unusedViews,B=j.nr.type;let V=e.get(B);V||(V=[],e.set(B,V)),V.push(j),ht||(j.nr.used=!1,j.position=-9999,this.$_views.delete(j.nr.key))},handleResize(){this.$emit("resize"),this.ready&&this.updateVisibleItems(!1)},handleScroll(j){this.$_scrollDirty||(this.$_scrollDirty=!0,requestAnimationFrame(()=>{this.$_scrollDirty=!1;const{continuous:ht}=this.updateVisibleItems(!1,!0);ht||(clearTimeout(this.$_refreshTimout),this.$_refreshTimout=setTimeout(this.handleScroll,100))}))},handleVisibilityChange(j,ht){this.ready&&(j||ht.boundingClientRect.width!==0||ht.boundingClientRect.height!==0?(this.$emit("visible"),requestAnimationFrame(()=>{this.updateVisibleItems(!1)})):this.$emit("hidden"))},updateVisibleItems(j,ht=!1){const e=this.itemSize,B=this.$_computedMinItemSize,V=this.typeField,f=this.simpleArray?null:this.keyField,l=this.items,m=l.length,x=this.sizes,t=this.$_views,a=this.$_unusedViews,i=this.pool;let r,n,d;if(!m)r=n=d=0;else if(this.$_prerender)r=0,n=this.prerender,d=null;else{const u=this.getScroll();if(ht){let c=u.start-this.$_lastUpdateScrollPosition;if(c<0&&(c=-c),e===null&&c<B||c<e)return{continuous:!0}}this.$_lastUpdateScrollPosition=u.start;const T=this.buffer;if(u.start-=T,u.end+=T,e===null){let c,A=0,k=m-1,p=~~(m/2),w;do w=p,c=x[p].accumulator,c<u.start?A=p:p<m-1&&x[p+1].accumulator>u.start&&(k=p),p=~~((A+k)/2);while(p!==w);for(p<0&&(p=0),r=p,d=x[m-1].accumulator,n=p;n<m&&x[n].accumulator<u.end;n++);n===-1?n=l.length-1:(n++,n>m&&(n=m))}else r=~~(u.start/e),n=Math.ceil(u.end/e),r<0&&(r=0),n>m&&(n=m),d=m*e}n-r>bb.itemsLimit&&this.itemsLimitError(),this.totalSize=d;let s;const o=r<=this.$_endIndex&&n>=this.$_startIndex;if(this.$_continuous!==o){if(o){t.clear(),a.clear();for(let u=0,T=i.length;u<T;u++)s=i[u],this.unuseView(s)}this.$_continuous=o}else if(o)for(let u=0,T=i.length;u<T;u++)s=i[u],s.nr.used&&(j&&(s.nr.index=l.findIndex(c=>f?c[f]===s.item[f]:c===s.item)),(s.nr.index===-1||s.nr.index<r||s.nr.index>=n)&&this.unuseView(s));const y=o?null:new Map;let g,b,v,_;for(let u=r;u<n;u++){g=l[u];const T=f?g[f]:g;if(T==null)throw new Error(`Key is ${T} on item (keyField is '${f}')`);if(s=t.get(T),!e&&!x[u].size){s&&this.unuseView(s);continue}s?(s.nr.used=!0,s.item=g):(b=g[V],v=a.get(b),o?v&&v.length?(s=v.pop(),s.item=g,s.nr.used=!0,s.nr.index=u,s.nr.key=T,s.nr.type=b):s=this.addView(i,u,g,T,b):(_=y.get(b)||0,(!v||_>=v.length)&&(s=this.addView(i,u,g,T,b),this.unuseView(s,!0),v=a.get(b)),s=v[_],s.item=g,s.nr.used=!0,s.nr.index=u,s.nr.key=T,s.nr.type=b,y.set(b,_+1),_++),t.set(T,s)),e===null?s.position=x[u-1].accumulator:s.position=u*e}return this.$_startIndex=r,this.$_endIndex=n,this.emitUpdate&&this.$emit("update",r,n),clearTimeout(this.$_sortTimer),this.$_sortTimer=setTimeout(this.sortViews,300),{continuous:o}},getListenerTarget(){let j=M4(this.$el);return window.document&&(j===window.document.documentElement||j===window.document.body)&&(j=window),j},getScroll(){const{$el:j,direction:ht}=this,e=ht==="vertical";let B;if(this.pageMode){const V=j.getBoundingClientRect(),f=e?V.height:V.width;let l=-(e?V.top:V.left),m=e?window.innerHeight:window.innerWidth;l<0&&(m+=l,l=0),l+m>f&&(m=f-l),B={start:l,end:l+m}}else e?B={start:j.scrollTop,end:j.scrollTop+j.clientHeight}:B={start:j.scrollLeft,end:j.scrollLeft+j.clientWidth};return B},applyPageMode(){this.pageMode?this.addListeners():this.removeListeners()},addListeners(){this.listenerTarget=this.getListenerTarget(),this.listenerTarget.addEventListener("scroll",this.handleScroll,S0?{passive:!0}:!1),this.listenerTarget.addEventListener("resize",this.handleResize)},removeListeners(){!this.listenerTarget||(this.listenerTarget.removeEventListener("scroll",this.handleScroll),this.listenerTarget.removeEventListener("resize",this.handleResize),this.listenerTarget=null)},scrollToItem(j){let ht;this.itemSize===null?ht=j>0?this.sizes[j-1].accumulator:0:ht=j*this.itemSize,this.scrollToPosition(ht)},scrollToPosition(j){this.direction==="vertical"?this.$el.scrollTop=j:this.$el.scrollLeft=j},itemsLimitError(){throw setTimeout(()=>{console.log("It seems the scroller element isn't scrolling, so it tries to render all the items at once.","Scroller:",this.$el),console.log("Make sure the scroller has a fixed height (or width) and 'overflow-y' (or 'overflow-x') set to 'auto' so it can scroll correctly and only render the items visible in the scroll viewport.")}),new Error("Rendered items limit reached")},sortViews(){this.pool.sort((j,ht)=>j.index-ht.index)}}};const L4={key:0,class:"vue-recycle-scroller__slot"},D4={key:1,class:"vue-recycle-scroller__slot"};function P4(j,ht,e,B,V,f){const l=u1("ResizeObserver"),m=U_("observe-visibility");return O_((ou(),Ru("div",{class:["vue-recycle-scroller",{ready:V.ready,"page-mode":e.pageMode,[`direction-${j.direction}`]:!0}],onScrollPassive:ht[2]||(ht[2]=(...x)=>f.handleScroll&&f.handleScroll(...x))},[j.$slots.before?(ou(),Ru("div",L4,[Lh(j.$slots,"before")])):Bm("v-if",!0),Ya("div",{ref:"wrapper",style:{[j.direction==="vertical"?"minHeight":"minWidth"]:V.totalSize+"px"},class:"vue-recycle-scroller__item-wrapper"},[(ou(!0),Ru(zc,null,H_(V.pool,x=>(ou(),Ru("div",{key:x.nr.id,style:V.ready?{transform:`translate${j.direction==="vertical"?"Y":"X"}(${x.position}px)`}:null,class:["vue-recycle-scroller__item-view",{hover:V.hoverKey===x.nr.key}],onMouseenter:t=>V.hoverKey=x.nr.key,onMouseleave:ht[1]||(ht[1]=t=>V.hoverKey=null)},[Lh(j.$slots,"default",{item:x.item,index:x.nr.index,active:x.nr.used})],46,["onMouseenter"]))),128))],4),j.$slots.after?(ou(),Ru("div",D4,[Lh(j.$slots,"after")])):Bm("v-if",!0),Ya(l,{onNotify:f.handleResize},null,8,["onNotify"])],34)),[[m,f.handleVisibilityChange]])}Nh.render=P4;Nh.__file="src/components/RecycleScroller.vue";var Hp={name:"DynamicScroller",components:{RecycleScroller:Nh},provide(){return typeof ResizeObserver<"u"&&(this.$_resizeObserver=new ResizeObserver(j=>{for(const ht of j)if(ht.target){const e=new CustomEvent("resize",{detail:{contentRect:ht.contentRect}});ht.target.dispatchEvent(e)}})),{vscrollData:this.vscrollData,vscrollParent:this,vscrollResizeObserver:this.$_resizeObserver}},inheritAttrs:!1,props:{...wb,minItemSize:{type:[Number,String],required:!0}},emits:["resize","visible"],data(){return{vscrollData:{active:!0,sizes:{},validSizes:{},keyField:this.keyField,simpleArray:!1}}},computed:{simpleArray:_b,itemsWithSize(){const j=[],{items:ht,keyField:e,simpleArray:B}=this,V=this.vscrollData.sizes;for(let f=0;f<ht.length;f++){const l=ht[f],m=B?f:l[e];let x=V[m];typeof x>"u"&&!this.$_undefinedMap[m]&&(x=0),j.push({item:l,id:m,size:x})}return j}},watch:{items(){this.forceUpdate(!1)},simpleArray:{handler(j){this.vscrollData.simpleArray=j},immediate:!0},direction(j){this.forceUpdate(!0)}},created(){this.$_updates=[],this.$_undefinedSizes=0,this.$_undefinedMap={},this.$_events=k4()},activated(){this.vscrollData.active=!0},deactivated(){this.vscrollData.active=!1},unmounted(){this.$_events.all.clear()},methods:{onScrollerResize(){this.$refs.scroller&&this.forceUpdate(),this.$emit("resize")},onScrollerVisible(){this.$_events.emit("vscroll:update",{force:!1}),this.$emit("visible")},forceUpdate(j=!0){(j||this.simpleArray)&&(this.vscrollData.validSizes={}),this.$_events.emit("vscroll:update",{force:!0})},scrollToItem(j){const ht=this.$refs.scroller;ht&&ht.scrollToItem(j)},getItemSize(j,ht=void 0){const e=this.simpleArray?ht!=null?ht:this.items.indexOf(j):j[this.keyField];return this.vscrollData.sizes[e]||0},scrollToBottom(){if(this.$_scrollingToBottom)return;this.$_scrollingToBottom=!0;const j=this.$el;this.$nextTick(()=>{j.scrollTop=j.scrollHeight+5e3;const ht=()=>{j.scrollTop=j.scrollHeight+5e3,requestAnimationFrame(()=>{j.scrollTop=j.scrollHeight+5e3,this.$_undefinedSizes===0?this.$_scrollingToBottom=!1:requestAnimationFrame(ht)})};requestAnimationFrame(ht)})}}};function I4(j,ht,e,B,V,f){const l=u1("RecycleScroller");return ou(),Ru(l,_1({ref:"scroller",items:f.itemsWithSize,"min-item-size":e.minItemSize,direction:j.direction,"key-field":"id"},j.$attrs,{onResize:f.onScrollerResize,onVisible:f.onScrollerVisible}),{default:es(({item:m,index:x,active:t})=>[Lh(j.$slots,"default",{item:m.item,index:x,active:t,itemWithSize:m})]),before:es(()=>[Lh(j.$slots,"before")]),after:es(()=>[Lh(j.$slots,"after")]),_:1},16,["items","min-item-size","direction","onResize","onVisible"])}Hp.render=I4;Hp.__file="src/components/DynamicScroller.vue";var M0={name:"DynamicScrollerItem",inject:["vscrollData","vscrollParent","vscrollResizeObserver"],props:{item:{required:!0},watchData:{type:Boolean,default:!1},active:{type:Boolean,required:!0},index:{type:Number,default:void 0},sizeDependencies:{type:[Array,Object],default:null},emitResize:{type:Boolean,default:!1},tag:{type:String,default:"div"}},emits:["resize"],computed:{id(){return this.vscrollData.simpleArray?this.index:this.item[this.vscrollData.keyField]},size(){return this.vscrollData.validSizes[this.id]&&this.vscrollData.sizes[this.id]||0},finalActive(){return this.active&&this.vscrollData.active}},watch:{watchData:"updateWatchData",id(){this.size||this.onDataUpdate()},finalActive(j){this.size||(j?this.vscrollParent.$_undefinedMap[this.id]||(this.vscrollParent.$_undefinedSizes++,this.vscrollParent.$_undefinedMap[this.id]=!0):this.vscrollParent.$_undefinedMap[this.id]&&(this.vscrollParent.$_undefinedSizes--,this.vscrollParent.$_undefinedMap[this.id]=!1)),this.vscrollResizeObserver?j?this.observeSize():this.unobserveSize():j&&this.$_pendingVScrollUpdate===this.id&&this.updateSize()}},created(){if(!this.$isServer&&(this.$_forceNextVScrollUpdate=null,this.updateWatchData(),!this.vscrollResizeObserver)){for(const j in this.sizeDependencies)this.$watch(()=>this.sizeDependencies[j],this.onDataUpdate);this.vscrollParent.$_events.on("vscroll:update",this.onVscrollUpdate)}},mounted(){this.vscrollData.active&&(this.updateSize(),this.observeSize())},beforeUnmount(){this.vscrollParent.$_events.off("vscroll:update",this.onVscrollUpdate),this.unobserveSize()},methods:{updateSize(){this.finalActive?this.$_pendingSizeUpdate!==this.id&&(this.$_pendingSizeUpdate=this.id,this.$_forceNextVScrollUpdate=null,this.$_pendingVScrollUpdate=null,this.computeSize(this.id)):this.$_forceNextVScrollUpdate=this.id},updateWatchData(){this.watchData?this.$_watchData=this.$watch("data",()=>{this.onDataUpdate()},{deep:!0}):this.$_watchData&&(this.$_watchData(),this.$_watchData=null)},onVscrollUpdate({force:j}){!this.finalActive&&j&&(this.$_pendingVScrollUpdate=this.id),(this.$_forceNextVScrollUpdate===this.id||j||!this.size)&&this.updateSize()},onDataUpdate(){this.updateSize()},computeSize(j){this.$nextTick(()=>{if(this.id===j){const ht=this.$el.offsetWidth,e=this.$el.offsetHeight;this.applySize(ht,e)}this.$_pendingSizeUpdate=null})},applySize(j,ht){const e=Math.round(this.vscrollParent.direction==="vertical"?ht:j);e&&this.size!==e&&(this.vscrollParent.$_undefinedMap[this.id]&&(this.vscrollParent.$_undefinedSizes--,this.vscrollParent.$_undefinedMap[this.id]=void 0),this.vscrollData.sizes[this.id]=e,this.vscrollData.validSizes[this.id]=!0,this.emitResize&&this.$emit("resize",this.id))},observeSize(){!this.vscrollResizeObserver||(this.vscrollResizeObserver.observe(this.$el.parentNode),this.$el.parentNode.addEventListener("resize",this.onResize))},unobserveSize(){!this.vscrollResizeObserver||(this.vscrollResizeObserver.unobserve(this.$el.parentNode),this.$el.parentNode.removeEventListener("resize",this.onResize))},onResize(j){const{width:ht,height:e}=j.detail.contentRect;this.applySize(ht,e)}},render(){return Oh(this.tag,this.$slots.default())}};M0.__file="src/components/DynamicScrollerItem.vue";function z4(j,ht){j.component("".concat(ht,"recycle-scroller"),Nh),j.component("".concat(ht,"RecycleScroller"),Nh),j.component("".concat(ht,"dynamic-scroller"),Hp),j.component("".concat(ht,"DynamicScroller"),Hp),j.component("".concat(ht,"dynamic-scroller-item"),M0),j.component("".concat(ht,"DynamicScrollerItem"),M0)}var R4={version:"2.0.0-alpha.1",install:function(ht,e){var B=Object.assign({},{installComponents:!0,componentsPrefix:""},e);for(var V in B)typeof B[V]<"u"&&(bb[V]=B[V]);B.installComponents&&z4(ht,B.componentsPrefix)}};const F4=J3("counter",()=>{const j=Gf([]);function ht(e){j.value.push({time:new Date,message:e})}return{messages:j,putMessage:ht}});var zo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function O4(j){return j&&j.__esModule&&Object.prototype.hasOwnProperty.call(j,"default")?j.default:j}function mp(j){throw new Error('Could not dynamically require "'+j+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var kb={exports:{}};(function(j,ht){(function(e){j.exports=e()})(function(){return function(){function e(B,V,f){function l(t,a){if(!V[t]){if(!B[t]){var i=typeof mp=="function"&&mp;if(!a&&i)return i(t,!0);if(m)return m(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var n=V[t]={exports:{}};B[t][0].call(n.exports,function(d){var s=B[t][1][d];return l(s||d)},n,n.exports,e,B,V,f)}return V[t].exports}for(var m=typeof mp=="function"&&mp,x=0;x<f.length;x++)l(f[x]);return l}return e}()({1:[function(e,B,V){var f=e("../src/lib"),l={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var m in l){var x=m.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");f.addStyleRule(x,l[m])}},{"../src/lib":515}],2:[function(e,B,V){B.exports=e("../src/transforms/aggregate")},{"../src/transforms/aggregate":1127}],3:[function(e,B,V){B.exports=e("../src/traces/bar")},{"../src/traces/bar":665}],4:[function(e,B,V){B.exports=e("../src/traces/barpolar")},{"../src/traces/barpolar":678}],5:[function(e,B,V){B.exports=e("../src/traces/box")},{"../src/traces/box":688}],6:[function(e,B,V){B.exports=e("../src/components/calendars")},{"../src/components/calendars":365}],7:[function(e,B,V){B.exports=e("../src/traces/candlestick")},{"../src/traces/candlestick":697}],8:[function(e,B,V){B.exports=e("../src/traces/carpet")},{"../src/traces/carpet":716}],9:[function(e,B,V){B.exports=e("../src/traces/choropleth")},{"../src/traces/choropleth":730}],10:[function(e,B,V){B.exports=e("../src/traces/choroplethmapbox")},{"../src/traces/choroplethmapbox":737}],11:[function(e,B,V){B.exports=e("../src/traces/cone")},{"../src/traces/cone":743}],12:[function(e,B,V){B.exports=e("../src/traces/contour")},{"../src/traces/contour":758}],13:[function(e,B,V){B.exports=e("../src/traces/contourcarpet")},{"../src/traces/contourcarpet":769}],14:[function(e,B,V){B.exports=e("../src/core")},{"../src/core":493}],15:[function(e,B,V){B.exports=e("../src/traces/densitymapbox")},{"../src/traces/densitymapbox":777}],16:[function(e,B,V){B.exports=e("../src/transforms/filter")},{"../src/transforms/filter":1128}],17:[function(e,B,V){B.exports=e("../src/traces/funnel")},{"../src/traces/funnel":787}],18:[function(e,B,V){B.exports=e("../src/traces/funnelarea")},{"../src/traces/funnelarea":796}],19:[function(e,B,V){B.exports=e("../src/transforms/groupby")},{"../src/transforms/groupby":1129}],20:[function(e,B,V){B.exports=e("../src/traces/heatmap")},{"../src/traces/heatmap":809}],21:[function(e,B,V){B.exports=e("../src/traces/heatmapgl")},{"../src/traces/heatmapgl":820}],22:[function(e,B,V){B.exports=e("../src/traces/histogram")},{"../src/traces/histogram":832}],23:[function(e,B,V){B.exports=e("../src/traces/histogram2d")},{"../src/traces/histogram2d":838}],24:[function(e,B,V){B.exports=e("../src/traces/histogram2dcontour")},{"../src/traces/histogram2dcontour":842}],25:[function(e,B,V){B.exports=e("../src/traces/icicle")},{"../src/traces/icicle":848}],26:[function(e,B,V){B.exports=e("../src/traces/image")},{"../src/traces/image":861}],27:[function(e,B,V){var f=e("./core");f.register([e("./bar"),e("./box"),e("./heatmap"),e("./histogram"),e("./histogram2d"),e("./histogram2dcontour"),e("./contour"),e("./scatterternary"),e("./violin"),e("./funnel"),e("./waterfall"),e("./image"),e("./pie"),e("./sunburst"),e("./treemap"),e("./icicle"),e("./funnelarea"),e("./scatter3d"),e("./surface"),e("./isosurface"),e("./volume"),e("./mesh3d"),e("./cone"),e("./streamtube"),e("./scattergeo"),e("./choropleth"),e("./scattergl"),e("./splom"),e("./pointcloud"),e("./heatmapgl"),e("./parcoords"),e("./parcats"),e("./scattermapbox"),e("./choroplethmapbox"),e("./densitymapbox"),e("./sankey"),e("./indicator"),e("./table"),e("./carpet"),e("./scattercarpet"),e("./contourcarpet"),e("./ohlc"),e("./candlestick"),e("./scatterpolar"),e("./scatterpolargl"),e("./barpolar"),e("./scattersmith"),e("./aggregate"),e("./filter"),e("./groupby"),e("./sort"),e("./calendars")]),B.exports=f},{"./aggregate":2,"./bar":3,"./barpolar":4,"./box":5,"./calendars":6,"./candlestick":7,"./carpet":8,"./choropleth":9,"./choroplethmapbox":10,"./cone":11,"./contour":12,"./contourcarpet":13,"./core":14,"./densitymapbox":15,"./filter":16,"./funnel":17,"./funnelarea":18,"./groupby":19,"./heatmap":20,"./heatmapgl":21,"./histogram":22,"./histogram2d":23,"./histogram2dcontour":24,"./icicle":25,"./image":26,"./indicator":28,"./isosurface":29,"./mesh3d":30,"./ohlc":31,"./parcats":32,"./parcoords":33,"./pie":34,"./pointcloud":35,"./sankey":36,"./scatter3d":37,"./scattercarpet":38,"./scattergeo":39,"./scattergl":40,"./scattermapbox":41,"./scatterpolar":42,"./scatterpolargl":43,"./scattersmith":44,"./scatterternary":45,"./sort":46,"./splom":47,"./streamtube":48,"./sunburst":49,"./surface":50,"./table":51,"./treemap":52,"./violin":53,"./volume":54,"./waterfall":55}],28:[function(e,B,V){B.exports=e("../src/traces/indicator")},{"../src/traces/indicator":869}],29:[function(e,B,V){B.exports=e("../src/traces/isosurface")},{"../src/traces/isosurface":875}],30:[function(e,B,V){B.exports=e("../src/traces/mesh3d")},{"../src/traces/mesh3d":880}],31:[function(e,B,V){B.exports=e("../src/traces/ohlc")},{"../src/traces/ohlc":885}],32:[function(e,B,V){B.exports=e("../src/traces/parcats")},{"../src/traces/parcats":894}],33:[function(e,B,V){B.exports=e("../src/traces/parcoords")},{"../src/traces/parcoords":905}],34:[function(e,B,V){B.exports=e("../src/traces/pie")},{"../src/traces/pie":916}],35:[function(e,B,V){B.exports=e("../src/traces/pointcloud")},{"../src/traces/pointcloud":925}],36:[function(e,B,V){B.exports=e("../src/traces/sankey")},{"../src/traces/sankey":931}],37:[function(e,B,V){B.exports=e("../src/traces/scatter3d")},{"../src/traces/scatter3d":969}],38:[function(e,B,V){B.exports=e("../src/traces/scattercarpet")},{"../src/traces/scattercarpet":976}],39:[function(e,B,V){B.exports=e("../src/traces/scattergeo")},{"../src/traces/scattergeo":984}],40:[function(e,B,V){B.exports=e("../src/traces/scattergl")},{"../src/traces/scattergl":998}],41:[function(e,B,V){B.exports=e("../src/traces/scattermapbox")},{"../src/traces/scattermapbox":1008}],42:[function(e,B,V){B.exports=e("../src/traces/scatterpolar")},{"../src/traces/scatterpolar":1016}],43:[function(e,B,V){B.exports=e("../src/traces/scatterpolargl")},{"../src/traces/scatterpolargl":1024}],44:[function(e,B,V){B.exports=e("../src/traces/scattersmith")},{"../src/traces/scattersmith":1031}],45:[function(e,B,V){B.exports=e("../src/traces/scatterternary")},{"../src/traces/scatterternary":1039}],46:[function(e,B,V){B.exports=e("../src/transforms/sort")},{"../src/transforms/sort":1131}],47:[function(e,B,V){B.exports=e("../src/traces/splom")},{"../src/traces/splom":1049}],48:[function(e,B,V){B.exports=e("../src/traces/streamtube")},{"../src/traces/streamtube":1057}],49:[function(e,B,V){B.exports=e("../src/traces/sunburst")},{"../src/traces/sunburst":1065}],50:[function(e,B,V){B.exports=e("../src/traces/surface")},{"../src/traces/surface":1074}],51:[function(e,B,V){B.exports=e("../src/traces/table")},{"../src/traces/table":1082}],52:[function(e,B,V){B.exports=e("../src/traces/treemap")},{"../src/traces/treemap":1093}],53:[function(e,B,V){B.exports=e("../src/traces/violin")},{"../src/traces/violin":1106}],54:[function(e,B,V){B.exports=e("../src/traces/volume")},{"../src/traces/volume":1114}],55:[function(e,B,V){B.exports=e("../src/traces/waterfall")},{"../src/traces/waterfall":1122}],56:[function(e,B,V){(function(f,l){typeof V=="object"&&typeof B<"u"?l(V,e("d3-array"),e("d3-collection"),e("d3-shape"),e("elementary-circuits-directed-graph")):l(f.d3=f.d3||{},f.d3,f.d3,f.d3,null)})(this,function(f,l,m,x,t){t=t&&t.hasOwnProperty("default")?t.default:t;function a(ut){return ut.target.depth}function i(ut){return ut.depth}function r(ut,pt){return pt-1-ut.height}function n(ut,pt){return ut.sourceLinks.length?ut.depth:pt-1}function d(ut){return ut.targetLinks.length?ut.depth:ut.sourceLinks.length?l.min(ut.sourceLinks,a)-1:0}function s(ut){return function(){return ut}}var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ut){return typeof ut}:function(ut){return ut&&typeof Symbol=="function"&&ut.constructor===Symbol&&ut!==Symbol.prototype?"symbol":typeof ut};function y(ut,pt){return b(ut.source,pt.source)||ut.index-pt.index}function g(ut,pt){return b(ut.target,pt.target)||ut.index-pt.index}function b(ut,pt){return ut.partOfCycle===pt.partOfCycle?ut.y0-pt.y0:ut.circularLinkType==="top"||pt.circularLinkType==="bottom"?-1:1}function v(ut){return ut.value}function _(ut){return(ut.y0+ut.y1)/2}function u(ut){return _(ut.source)}function T(ut){return _(ut.target)}function c(ut){return ut.index}function A(ut){return ut.nodes}function k(ut){return ut.links}function p(ut,pt){var yt=ut.get(pt);if(!yt)throw new Error("missing: "+pt);return yt}function w(ut,pt){return pt(ut)}var h=25,D=10,S=.3;function M(){var ut=0,pt=0,yt=1,Tt=1,kt=24,zt,Rt=c,Gt=n,wt=A,It=k,$t=32,Qt=2,Nt,Pt=null;function Yt(){var Ee={nodes:wt.apply(null,arguments),links:It.apply(null,arguments)};ve(Ee),L(Ee,Rt,Pt),Re(Ee),Be(Ee),R(Ee,Rt),Ye(Ee,$t,Rt),ze(Ee);for(var Wt=4,ee=0;ee<Wt;ee++)K(Ee,Tt,Rt),nt(Ee,Tt,Rt),et(Ee,pt,Tt,Rt),K(Ee,Tt,Rt),nt(Ee,Tt,Rt);return bt(Ee,pt,Tt),G(Ee,Qt,Tt,Rt),Ee}Yt.nodeId=function(Ee){return arguments.length?(Rt=typeof Ee=="function"?Ee:s(Ee),Yt):Rt},Yt.nodeAlign=function(Ee){return arguments.length?(Gt=typeof Ee=="function"?Ee:s(Ee),Yt):Gt},Yt.nodeWidth=function(Ee){return arguments.length?(kt=+Ee,Yt):kt},Yt.nodePadding=function(Ee){return arguments.length?(zt=+Ee,Yt):zt},Yt.nodes=function(Ee){return arguments.length?(wt=typeof Ee=="function"?Ee:s(Ee),Yt):wt},Yt.links=function(Ee){return arguments.length?(It=typeof Ee=="function"?Ee:s(Ee),Yt):It},Yt.size=function(Ee){return arguments.length?(ut=pt=0,yt=+Ee[0],Tt=+Ee[1],Yt):[yt-ut,Tt-pt]},Yt.extent=function(Ee){return arguments.length?(ut=+Ee[0][0],yt=+Ee[1][0],pt=+Ee[0][1],Tt=+Ee[1][1],Yt):[[ut,pt],[yt,Tt]]},Yt.iterations=function(Ee){return arguments.length?($t=+Ee,Yt):$t},Yt.circularLinkGap=function(Ee){return arguments.length?(Qt=+Ee,Yt):Qt},Yt.nodePaddingRatio=function(Ee){return arguments.length?(Nt=+Ee,Yt):Nt},Yt.sortNodes=function(Ee){return arguments.length?(Pt=Ee,Yt):Pt},Yt.update=function(Ee){return R(Ee,Rt),ze(Ee),Ee.links.forEach(function(Wt){Wt.circular&&(Wt.circularLinkType=Wt.y0+Wt.y1<Tt?"top":"bottom",Wt.source.circularLinkType=Wt.circularLinkType,Wt.target.circularLinkType=Wt.circularLinkType)}),K(Ee,Tt,Rt,!1),nt(Ee,Tt,Rt),G(Ee,Qt,Tt,Rt),Ee};function ve(Ee){Ee.nodes.forEach(function(ee,Xt){ee.index=Xt,ee.sourceLinks=[],ee.targetLinks=[]});var Wt=m.map(Ee.nodes,Rt);return Ee.links.forEach(function(ee,Xt){ee.index=Xt;var St=ee.source,Vt=ee.target;(typeof St>"u"?"undefined":o(St))!=="object"&&(St=ee.source=p(Wt,St)),(typeof Vt>"u"?"undefined":o(Vt))!=="object"&&(Vt=ee.target=p(Wt,Vt)),St.sourceLinks.push(ee),Vt.targetLinks.push(ee)}),Ee}function Re(Ee){Ee.nodes.forEach(function(Wt){Wt.partOfCycle=!1,Wt.value=Math.max(l.sum(Wt.sourceLinks,v),l.sum(Wt.targetLinks,v)),Wt.sourceLinks.forEach(function(ee){ee.circular&&(Wt.partOfCycle=!0,Wt.circularLinkType=ee.circularLinkType)}),Wt.targetLinks.forEach(function(ee){ee.circular&&(Wt.partOfCycle=!0,Wt.circularLinkType=ee.circularLinkType)})})}function ir(Ee){var Wt=0,ee=0,Xt=0,St=0,Vt=l.max(Ee.nodes,function(Zt){return Zt.column});return Ee.links.forEach(function(Zt){Zt.circular&&(Zt.circularLinkType=="top"?Wt=Wt+Zt.width:ee=ee+Zt.width,Zt.target.column==0&&(St=St+Zt.width),Zt.source.column==Vt&&(Xt=Xt+Zt.width))}),Wt=Wt>0?Wt+h+D:Wt,ee=ee>0?ee+h+D:ee,Xt=Xt>0?Xt+h+D:Xt,St=St>0?St+h+D:St,{top:Wt,bottom:ee,left:St,right:Xt}}function Ie(Ee,Wt){var ee=l.max(Ee.nodes,function(me){return me.column}),Xt=yt-ut,St=Tt-pt,Vt=Xt+Wt.right+Wt.left,Zt=St+Wt.top+Wt.bottom,qt=Xt/Vt,Te=St/Zt;return ut=ut*qt+Wt.left,yt=Wt.right==0?yt:yt*qt,pt=pt*Te+Wt.top,Tt=Tt*Te,Ee.nodes.forEach(function(me){me.x0=ut+me.column*((yt-ut-kt)/ee),me.x1=me.x0+kt}),Te}function Be(Ee){var Wt,ee,Xt;for(Wt=Ee.nodes,ee=[],Xt=0;Wt.length;++Xt,Wt=ee,ee=[])Wt.forEach(function(St){St.depth=Xt,St.sourceLinks.forEach(function(Vt){ee.indexOf(Vt.target)<0&&!Vt.circular&&ee.push(Vt.target)})});for(Wt=Ee.nodes,ee=[],Xt=0;Wt.length;++Xt,Wt=ee,ee=[])Wt.forEach(function(St){St.height=Xt,St.targetLinks.forEach(function(Vt){ee.indexOf(Vt.source)<0&&!Vt.circular&&ee.push(Vt.source)})});Ee.nodes.forEach(function(St){St.column=Math.floor(Gt.call(null,St,Xt))})}function Ye(Ee,Wt,ee){var Xt=m.nest().key(function(me){return me.column}).sortKeys(l.ascending).entries(Ee.nodes).map(function(me){return me.values});Zt(ee),Te();for(var St=1,Vt=Wt;Vt>0;--Vt)qt(St*=.99,ee),Te();function Zt(me){if(Nt){var Ne=1/0;Xt.forEach(function(er){var We=Tt*Nt/(er.length+1);Ne=We<Ne?We:Ne}),zt=Ne}var Ke=l.min(Xt,function(er){return(Tt-pt-(er.length-1)*zt)/l.sum(er,v)});Ke=Ke*S,Ee.links.forEach(function(er){er.width=er.value*Ke});var He=ir(Ee),Xe=Ie(Ee,He);Ke=Ke*Xe,Ee.links.forEach(function(er){er.width=er.value*Ke}),Xt.forEach(function(er){var We=er.length;er.forEach(function(hr,Wr){hr.depth==Xt.length-1&&We==1||hr.depth==0&&We==1?(hr.y0=Tt/2-hr.value*Ke,hr.y1=hr.y0+hr.value*Ke):hr.partOfCycle?I(hr,me)==0?(hr.y0=Tt/2+Wr,hr.y1=hr.y0+hr.value*Ke):hr.circularLinkType=="top"?(hr.y0=pt+Wr,hr.y1=hr.y0+hr.value*Ke):(hr.y0=Tt-hr.value*Ke-Wr,hr.y1=hr.y0+hr.value*Ke):He.top==0||He.bottom==0?(hr.y0=(Tt-pt)/We*Wr,hr.y1=hr.y0+hr.value*Ke):(hr.y0=(Tt-pt)/2-We/2+Wr,hr.y1=hr.y0+hr.value*Ke)})})}function qt(me,Ne){var Ke=Xt.length;Xt.forEach(function(He){var Xe=He.length,er=He[0].depth;He.forEach(function(We){var hr;if((We.sourceLinks.length||We.targetLinks.length)&&!(We.partOfCycle&&I(We,Ne)>0))if(er==0&&Xe==1)hr=We.y1-We.y0,We.y0=Tt/2-hr/2,We.y1=Tt/2+hr/2;else if(er==Ke-1&&Xe==1)hr=We.y1-We.y0,We.y0=Tt/2-hr/2,We.y1=Tt/2+hr/2;else{var Wr=0,dn=l.mean(We.sourceLinks,T),Qr=l.mean(We.targetLinks,u);dn&&Qr?Wr=(dn+Qr)/2:Wr=dn||Qr;var le=(Wr-_(We))*me;We.y0+=le,We.y1+=le}})})}function Te(){Xt.forEach(function(me){var Ne,Ke,He=pt,Xe=me.length,er;for(me.sort(b),er=0;er<Xe;++er)Ne=me[er],Ke=He-Ne.y0,Ke>0&&(Ne.y0+=Ke,Ne.y1+=Ke),He=Ne.y1+zt;if(Ke=He-zt-Tt,Ke>0)for(He=Ne.y0-=Ke,Ne.y1-=Ke,er=Xe-2;er>=0;--er)Ne=me[er],Ke=Ne.y1+zt-He,Ke>0&&(Ne.y0-=Ke,Ne.y1-=Ke),He=Ne.y0})}}function ze(Ee){Ee.nodes.forEach(function(Wt){Wt.sourceLinks.sort(g),Wt.targetLinks.sort(y)}),Ee.nodes.forEach(function(Wt){var ee=Wt.y0,Xt=ee,St=Wt.y1,Vt=St;Wt.sourceLinks.forEach(function(Zt){Zt.circular?(Zt.y0=St-Zt.width/2,St=St-Zt.width):(Zt.y0=ee+Zt.width/2,ee+=Zt.width)}),Wt.targetLinks.forEach(function(Zt){Zt.circular?(Zt.y1=Vt-Zt.width/2,Vt=Vt-Zt.width):(Zt.y1=Xt+Zt.width/2,Xt+=Zt.width)})})}return Yt}function L(ut,pt,yt){var Tt=0;if(yt===null){for(var kt=[],zt=0;zt<ut.links.length;zt++){var Rt=ut.links[zt],Gt=Rt.source.index,wt=Rt.target.index;kt[Gt]||(kt[Gt]=[]),kt[wt]||(kt[wt]=[]),kt[Gt].indexOf(wt)===-1&&kt[Gt].push(wt)}var It=t(kt);It.sort(function(Pt,Yt){return Pt.length-Yt.length});var $t={};for(zt=0;zt<It.length;zt++){var Qt=It[zt],Nt=Qt.slice(-2);$t[Nt[0]]||($t[Nt[0]]={}),$t[Nt[0]][Nt[1]]=!0}ut.links.forEach(function(Pt){var Yt=Pt.target.index,ve=Pt.source.index;Yt===ve||$t[ve]&&$t[ve][Yt]?(Pt.circular=!0,Pt.circularLinkID=Tt,Tt=Tt+1):Pt.circular=!1})}else ut.links.forEach(function(Pt){Pt.source[yt]<Pt.target[yt]?Pt.circular=!1:(Pt.circular=!0,Pt.circularLinkID=Tt,Tt=Tt+1)})}function R(ut,pt){var yt=0,Tt=0;ut.links.forEach(function(kt){kt.circular&&(kt.source.circularLinkType||kt.target.circularLinkType?kt.circularLinkType=kt.source.circularLinkType?kt.source.circularLinkType:kt.target.circularLinkType:kt.circularLinkType=yt<Tt?"top":"bottom",kt.circularLinkType=="top"?yt=yt+1:Tt=Tt+1,ut.nodes.forEach(function(zt){(w(zt,pt)==w(kt.source,pt)||w(zt,pt)==w(kt.target,pt))&&(zt.circularLinkType=kt.circularLinkType)}))}),ut.links.forEach(function(kt){kt.circular&&(kt.source.circularLinkType==kt.target.circularLinkType&&(kt.circularLinkType=kt.source.circularLinkType),ct(kt,pt)&&(kt.circularLinkType=kt.source.circularLinkType))})}function z(ut){var pt=Math.abs(ut.y1-ut.y0),yt=Math.abs(ut.target.x0-ut.source.x1);return Math.atan(yt/pt)}function P(ut,pt){return ut.source.column<pt.target.column?!1:!(ut.target.column>pt.source.column)}function I(ut,pt){var yt=0;ut.sourceLinks.forEach(function(kt){yt=kt.circular&&!ct(kt,pt)?yt+1:yt});var Tt=0;return ut.targetLinks.forEach(function(kt){Tt=kt.circular&&!ct(kt,pt)?Tt+1:Tt}),yt+Tt}function U(ut){var pt=ut.source.sourceLinks,yt=0;pt.forEach(function(zt){yt=zt.circular?yt+1:yt});var Tt=ut.target.targetLinks,kt=0;return Tt.forEach(function(zt){kt=zt.circular?kt+1:kt}),!(yt>1||kt>1)}function O(ut,pt,yt){return ut.sort(tt),ut.forEach(function(Tt,kt){var zt=0;if(ct(Tt,yt)&&U(Tt))Tt.circularPathData.verticalBuffer=zt+Tt.width/2;else{var Rt=0;for(Rt;Rt<kt;Rt++)if(P(ut[kt],ut[Rt])){var Gt=ut[Rt].circularPathData.verticalBuffer+ut[Rt].width/2+pt;zt=Gt>zt?Gt:zt}Tt.circularPathData.verticalBuffer=zt+Tt.width/2}}),ut}function G(ut,pt,yt,Tt){var kt=5,zt=l.min(ut.links,function(wt){return wt.source.y0});ut.links.forEach(function(wt){wt.circular&&(wt.circularPathData={})});var Rt=ut.links.filter(function(wt){return wt.circularLinkType=="top"});O(Rt,pt,Tt);var Gt=ut.links.filter(function(wt){return wt.circularLinkType=="bottom"});O(Gt,pt,Tt),ut.links.forEach(function(wt){if(wt.circular){if(wt.circularPathData.arcRadius=wt.width+D,wt.circularPathData.leftNodeBuffer=kt,wt.circularPathData.rightNodeBuffer=kt,wt.circularPathData.sourceWidth=wt.source.x1-wt.source.x0,wt.circularPathData.sourceX=wt.source.x0+wt.circularPathData.sourceWidth,wt.circularPathData.targetX=wt.target.x0,wt.circularPathData.sourceY=wt.y0,wt.circularPathData.targetY=wt.y1,ct(wt,Tt)&&U(wt))wt.circularPathData.leftSmallArcRadius=D+wt.width/2,wt.circularPathData.leftLargeArcRadius=D+wt.width/2,wt.circularPathData.rightSmallArcRadius=D+wt.width/2,wt.circularPathData.rightLargeArcRadius=D+wt.width/2,wt.circularLinkType=="bottom"?(wt.circularPathData.verticalFullExtent=wt.source.y1+h+wt.circularPathData.verticalBuffer,wt.circularPathData.verticalLeftInnerExtent=wt.circularPathData.verticalFullExtent-wt.circularPathData.leftLargeArcRadius,wt.circularPathData.verticalRightInnerExtent=wt.circularPathData.verticalFullExtent-wt.circularPathData.rightLargeArcRadius):(wt.circularPathData.verticalFullExtent=wt.source.y0-h-wt.circularPathData.verticalBuffer,wt.circularPathData.verticalLeftInnerExtent=wt.circularPathData.verticalFullExtent+wt.circularPathData.leftLargeArcRadius,wt.circularPathData.verticalRightInnerExtent=wt.circularPathData.verticalFullExtent+wt.circularPathData.rightLargeArcRadius);else{var It=wt.source.column,$t=wt.circularLinkType,Qt=ut.links.filter(function(Yt){return Yt.source.column==It&&Yt.circularLinkType==$t});wt.circularLinkType=="bottom"?Qt.sort(X):Qt.sort(Z);var Nt=0;Qt.forEach(function(Yt,ve){Yt.circularLinkID==wt.circularLinkID&&(wt.circularPathData.leftSmallArcRadius=D+wt.width/2+Nt,wt.circularPathData.leftLargeArcRadius=D+wt.width/2+ve*pt+Nt),Nt=Nt+Yt.width}),It=wt.target.column,Qt=ut.links.filter(function(Yt){return Yt.target.column==It&&Yt.circularLinkType==$t}),wt.circularLinkType=="bottom"?Qt.sort(st):Qt.sort(J),Nt=0,Qt.forEach(function(Yt,ve){Yt.circularLinkID==wt.circularLinkID&&(wt.circularPathData.rightSmallArcRadius=D+wt.width/2+Nt,wt.circularPathData.rightLargeArcRadius=D+wt.width/2+ve*pt+Nt),Nt=Nt+Yt.width}),wt.circularLinkType=="bottom"?(wt.circularPathData.verticalFullExtent=Math.max(yt,wt.source.y1,wt.target.y1)+h+wt.circularPathData.verticalBuffer,wt.circularPathData.verticalLeftInnerExtent=wt.circularPathData.verticalFullExtent-wt.circularPathData.leftLargeArcRadius,wt.circularPathData.verticalRightInnerExtent=wt.circularPathData.verticalFullExtent-wt.circularPathData.rightLargeArcRadius):(wt.circularPathData.verticalFullExtent=zt-h-wt.circularPathData.verticalBuffer,wt.circularPathData.verticalLeftInnerExtent=wt.circularPathData.verticalFullExtent+wt.circularPathData.leftLargeArcRadius,wt.circularPathData.verticalRightInnerExtent=wt.circularPathData.verticalFullExtent+wt.circularPathData.rightLargeArcRadius)}wt.circularPathData.leftInnerExtent=wt.circularPathData.sourceX+wt.circularPathData.leftNodeBuffer,wt.circularPathData.rightInnerExtent=wt.circularPathData.targetX-wt.circularPathData.rightNodeBuffer,wt.circularPathData.leftFullExtent=wt.circularPathData.sourceX+wt.circularPathData.leftLargeArcRadius+wt.circularPathData.leftNodeBuffer,wt.circularPathData.rightFullExtent=wt.circularPathData.targetX-wt.circularPathData.rightLargeArcRadius-wt.circularPathData.rightNodeBuffer}if(wt.circular)wt.path=$(wt);else{var Pt=x.linkHorizontal().source(function(Yt){var ve=Yt.source.x0+(Yt.source.x1-Yt.source.x0),Re=Yt.y0;return[ve,Re]}).target(function(Yt){var ve=Yt.target.x0,Re=Yt.y1;return[ve,Re]});wt.path=Pt(wt)}})}function $(ut){var pt="";return ut.circularLinkType=="top"?pt="M"+ut.circularPathData.sourceX+" "+ut.circularPathData.sourceY+" L"+ut.circularPathData.leftInnerExtent+" "+ut.circularPathData.sourceY+" A"+ut.circularPathData.leftLargeArcRadius+" "+ut.circularPathData.leftSmallArcRadius+" 0 0 0 "+ut.circularPathData.leftFullExtent+" "+(ut.circularPathData.sourceY-ut.circularPathData.leftSmallArcRadius)+" L"+ut.circularPathData.leftFullExtent+" "+ut.circularPathData.verticalLeftInnerExtent+" A"+ut.circularPathData.leftLargeArcRadius+" "+ut.circularPathData.leftLargeArcRadius+" 0 0 0 "+ut.circularPathData.leftInnerExtent+" "+ut.circularPathData.verticalFullExtent+" L"+ut.circularPathData.rightInnerExtent+" "+ut.circularPathData.verticalFullExtent+" A"+ut.circularPathData.rightLargeArcRadius+" "+ut.circularPathData.rightLargeArcRadius+" 0 0 0 "+ut.circularPathData.rightFullExtent+" "+ut.circularPathData.verticalRightInnerExtent+" L"+ut.circularPathData.rightFullExtent+" "+(ut.circularPathData.targetY-ut.circularPathData.rightSmallArcRadius)+" A"+ut.circularPathData.rightLargeArcRadius+" "+ut.circularPathData.rightSmallArcRadius+" 0 0 0 "+ut.circularPathData.rightInnerExtent+" "+ut.circularPathData.targetY+" L"+ut.circularPathData.targetX+" "+ut.circularPathData.targetY:pt="M"+ut.circularPathData.sourceX+" "+ut.circularPathData.sourceY+" L"+ut.circularPathData.leftInnerExtent+" "+ut.circularPathData.sourceY+" A"+ut.circularPathData.leftLargeArcRadius+" "+ut.circularPathData.leftSmallArcRadius+" 0 0 1 "+ut.circularPathData.leftFullExtent+" "+(ut.circularPathData.sourceY+ut.circularPathData.leftSmallArcRadius)+" L"+ut.circularPathData.leftFullExtent+" "+ut.circularPathData.verticalLeftInnerExtent+" A"+ut.circularPathData.leftLargeArcRadius+" "+ut.circularPathData.leftLargeArcRadius+" 0 0 1 "+ut.circularPathData.leftInnerExtent+" "+ut.circularPathData.verticalFullExtent+" L"+ut.circularPathData.rightInnerExtent+" "+ut.circularPathData.verticalFullExtent+" A"+ut.circularPathData.rightLargeArcRadius+" "+ut.circularPathData.rightLargeArcRadius+" 0 0 1 "+ut.circularPathData.rightFullExtent+" "+ut.circularPathData.verticalRightInnerExtent+" L"+ut.circularPathData.rightFullExtent+" "+(ut.circularPathData.targetY+ut.circularPathData.rightSmallArcRadius)+" A"+ut.circularPathData.rightLargeArcRadius+" "+ut.circularPathData.rightSmallArcRadius+" 0 0 1 "+ut.circularPathData.rightInnerExtent+" "+ut.circularPathData.targetY+" L"+ut.circularPathData.targetX+" "+ut.circularPathData.targetY,pt}function tt(ut,pt){return at(ut)==at(pt)?ut.circularLinkType=="bottom"?X(ut,pt):Z(ut,pt):at(pt)-at(ut)}function Z(ut,pt){return ut.y0-pt.y0}function X(ut,pt){return pt.y0-ut.y0}function J(ut,pt){return ut.y1-pt.y1}function st(ut,pt){return pt.y1-ut.y1}function at(ut){return ut.target.column-ut.source.column}function lt(ut){return ut.target.x0-ut.source.x1}function F(ut,pt){var yt=z(ut),Tt=lt(pt)/Math.tan(yt),kt=ot(ut)=="up"?ut.y1+Tt:ut.y1-Tt;return kt}function H(ut,pt){var yt=z(ut),Tt=lt(pt)/Math.tan(yt),kt=ot(ut)=="up"?ut.y1-Tt:ut.y1+Tt;return kt}function et(ut,pt,yt,Tt){ut.links.forEach(function(kt){if(!kt.circular&&kt.target.column-kt.source.column>1){var zt=kt.source.column+1,Rt=kt.target.column-1,Gt=1,wt=Rt-zt+1;for(Gt=1;zt<=Rt;zt++,Gt++)ut.nodes.forEach(function(It){if(It.column==zt){var $t=Gt/(wt+1),Qt=Math.pow(1-$t,3),Nt=3*$t*Math.pow(1-$t,2),Pt=3*Math.pow($t,2)*(1-$t),Yt=Math.pow($t,3),ve=Qt*kt.y0+Nt*kt.y0+Pt*kt.y1+Yt*kt.y1,Re=ve-kt.width/2,ir=ve+kt.width/2,Ie;Re>It.y0&&Re<It.y1?(Ie=It.y1-Re+10,Ie=It.circularLinkType=="bottom"?Ie:-Ie,It=W(It,Ie,pt,yt),ut.nodes.forEach(function(Be){w(Be,Tt)==w(It,Tt)||Be.column!=It.column||q(It,Be)&&W(Be,Ie,pt,yt)})):ir>It.y0&&ir<It.y1?(Ie=ir-It.y0+10,It=W(It,Ie,pt,yt),ut.nodes.forEach(function(Be){w(Be,Tt)==w(It,Tt)||Be.column!=It.column||Be.y0<It.y1&&Be.y1>It.y1&&W(Be,Ie,pt,yt)})):Re<It.y0&&ir>It.y1&&(Ie=ir-It.y0+10,It=W(It,Ie,pt,yt),ut.nodes.forEach(function(Be){w(Be,Tt)==w(It,Tt)||Be.column!=It.column||Be.y0<It.y1&&Be.y1>It.y1&&W(Be,Ie,pt,yt)}))}})}})}function q(ut,pt){return ut.y0>pt.y0&&ut.y0<pt.y1||ut.y1>pt.y0&&ut.y1<pt.y1?!0:ut.y0<pt.y0&&ut.y1>pt.y1}function W(ut,pt,yt,Tt){return ut.y0+pt>=yt&&ut.y1+pt<=Tt&&(ut.y0=ut.y0+pt,ut.y1=ut.y1+pt,ut.targetLinks.forEach(function(kt){kt.y1=kt.y1+pt}),ut.sourceLinks.forEach(function(kt){kt.y0=kt.y0+pt})),ut}function K(ut,pt,yt,Tt){ut.nodes.forEach(function(kt){Tt&&kt.y+(kt.y1-kt.y0)>pt&&(kt.y=kt.y-(kt.y+(kt.y1-kt.y0)-pt));var zt=ut.links.filter(function(wt){return w(wt.source,yt)==w(kt,yt)}),Rt=zt.length;Rt>1&&zt.sort(function(wt,It){if(!wt.circular&&!It.circular){if(wt.target.column==It.target.column)return wt.y1-It.y1;if(it(wt,It)){if(wt.target.column>It.target.column){var $t=H(It,wt);return wt.y1-$t}if(It.target.column>wt.target.column){var Qt=H(wt,It);return Qt-It.y1}}else return wt.y1-It.y1}if(wt.circular&&!It.circular)return wt.circularLinkType=="top"?-1:1;if(It.circular&&!wt.circular)return It.circularLinkType=="top"?1:-1;if(wt.circular&&It.circular)return wt.circularLinkType===It.circularLinkType&&wt.circularLinkType=="top"?wt.target.column===It.target.column?wt.target.y1-It.target.y1:It.target.column-wt.target.column:wt.circularLinkType===It.circularLinkType&&wt.circularLinkType=="bottom"?wt.target.column===It.target.column?It.target.y1-wt.target.y1:wt.target.column-It.target.column:wt.circularLinkType=="top"?-1:1});var Gt=kt.y0;zt.forEach(function(wt){wt.y0=Gt+wt.width/2,Gt=Gt+wt.width}),zt.forEach(function(wt,It){if(wt.circularLinkType=="bottom"){var $t=It+1,Qt=0;for($t;$t<Rt;$t++)Qt=Qt+zt[$t].width;wt.y0=kt.y1-Qt-wt.width/2}})})}function nt(ut,pt,yt){ut.nodes.forEach(function(Tt){var kt=ut.links.filter(function(Gt){return w(Gt.target,yt)==w(Tt,yt)}),zt=kt.length;zt>1&&kt.sort(function(Gt,wt){if(!Gt.circular&&!wt.circular){if(Gt.source.column==wt.source.column)return Gt.y0-wt.y0;if(it(Gt,wt)){if(wt.source.column<Gt.source.column){var It=F(wt,Gt);return Gt.y0-It}if(Gt.source.column<wt.source.column){var $t=F(Gt,wt);return $t-wt.y0}}else return Gt.y0-wt.y0}if(Gt.circular&&!wt.circular)return Gt.circularLinkType=="top"?-1:1;if(wt.circular&&!Gt.circular)return wt.circularLinkType=="top"?1:-1;if(Gt.circular&&wt.circular)return Gt.circularLinkType===wt.circularLinkType&&Gt.circularLinkType=="top"?Gt.source.column===wt.source.column?Gt.source.y1-wt.source.y1:Gt.source.column-wt.source.column:Gt.circularLinkType===wt.circularLinkType&&Gt.circularLinkType=="bottom"?Gt.source.column===wt.source.column?Gt.source.y1-wt.source.y1:wt.source.column-Gt.source.column:Gt.circularLinkType=="top"?-1:1});var Rt=Tt.y0;kt.forEach(function(Gt){Gt.y1=Rt+Gt.width/2,Rt=Rt+Gt.width}),kt.forEach(function(Gt,wt){if(Gt.circularLinkType=="bottom"){var It=wt+1,$t=0;for(It;It<zt;It++)$t=$t+kt[It].width;Gt.y1=Tt.y1-$t-Gt.width/2}})})}function it(ut,pt){return ot(ut)==ot(pt)}function ot(ut){return ut.y0-ut.y1>0?"up":"down"}function ct(ut,pt){return w(ut.source,pt)==w(ut.target,pt)}function bt(ut,pt,yt){var Tt=ut.nodes,kt=ut.links,zt=!1,Rt=!1;if(kt.forEach(function(Nt){Nt.circularLinkType=="top"?zt=!0:Nt.circularLinkType=="bottom"&&(Rt=!0)}),zt==!1||Rt==!1){var Gt=l.min(Tt,function(Nt){return Nt.y0}),wt=l.max(Tt,function(Nt){return Nt.y1}),It=wt-Gt,$t=yt-pt,Qt=$t/It;Tt.forEach(function(Nt){var Pt=(Nt.y1-Nt.y0)*Qt;Nt.y0=(Nt.y0-Gt)*Qt,Nt.y1=Nt.y0+Pt}),kt.forEach(function(Nt){Nt.y0=(Nt.y0-Gt)*Qt,Nt.y1=(Nt.y1-Gt)*Qt,Nt.width=Nt.width*Qt})}}f.sankeyCircular=M,f.sankeyCenter=d,f.sankeyLeft=i,f.sankeyRight=r,f.sankeyJustify=n,Object.defineProperty(f,"__esModule",{value:!0})})},{"d3-array":107,"d3-collection":108,"d3-shape":119,"elementary-circuits-directed-graph":130}],57:[function(e,B,V){(function(f,l){typeof V=="object"&&typeof B<"u"?l(V,e("d3-array"),e("d3-collection"),e("d3-shape")):l(f.d3=f.d3||{},f.d3,f.d3,f.d3)})(this,function(f,l,m,x){function t(D){return D.target.depth}function a(D){return D.depth}function i(D,S){return S-1-D.height}function r(D,S){return D.sourceLinks.length?D.depth:S-1}function n(D){return D.targetLinks.length?D.depth:D.sourceLinks.length?l.min(D.sourceLinks,t)-1:0}function d(D){return function(){return D}}function s(D,S){return y(D.source,S.source)||D.index-S.index}function o(D,S){return y(D.target,S.target)||D.index-S.index}function y(D,S){return D.y0-S.y0}function g(D){return D.value}function b(D){return(D.y0+D.y1)/2}function v(D){return b(D.source)*D.value}function _(D){return b(D.target)*D.value}function u(D){return D.index}function T(D){return D.nodes}function c(D){return D.links}function A(D,S){var M=D.get(S);if(!M)throw new Error("missing: "+S);return M}var k=function(){var D=0,S=0,M=1,L=1,R=24,z=8,P=u,I=r,U=T,O=c,G=32,$=2/3;function tt(){var lt={nodes:U.apply(null,arguments),links:O.apply(null,arguments)};return Z(lt),X(lt),J(lt),st(lt),at(lt),lt}tt.update=function(lt){return at(lt),lt},tt.nodeId=function(lt){return arguments.length?(P=typeof lt=="function"?lt:d(lt),tt):P},tt.nodeAlign=function(lt){return arguments.length?(I=typeof lt=="function"?lt:d(lt),tt):I},tt.nodeWidth=function(lt){return arguments.length?(R=+lt,tt):R},tt.nodePadding=function(lt){return arguments.length?(z=+lt,tt):z},tt.nodes=function(lt){return arguments.length?(U=typeof lt=="function"?lt:d(lt),tt):U},tt.links=function(lt){return arguments.length?(O=typeof lt=="function"?lt:d(lt),tt):O},tt.size=function(lt){return arguments.length?(D=S=0,M=+lt[0],L=+lt[1],tt):[M-D,L-S]},tt.extent=function(lt){return arguments.length?(D=+lt[0][0],M=+lt[1][0],S=+lt[0][1],L=+lt[1][1],tt):[[D,S],[M,L]]},tt.iterations=function(lt){return arguments.length?(G=+lt,tt):G};function Z(lt){lt.nodes.forEach(function(H,et){H.index=et,H.sourceLinks=[],H.targetLinks=[]});var F=m.map(lt.nodes,P);lt.links.forEach(function(H,et){H.index=et;var q=H.source,W=H.target;typeof q!="object"&&(q=H.source=A(F,q)),typeof W!="object"&&(W=H.target=A(F,W)),q.sourceLinks.push(H),W.targetLinks.push(H)})}function X(lt){lt.nodes.forEach(function(F){F.value=Math.max(l.sum(F.sourceLinks,g),l.sum(F.targetLinks,g))})}function J(lt){var F,H,et;for(F=lt.nodes,H=[],et=0;F.length;++et,F=H,H=[])F.forEach(function(W){W.depth=et,W.sourceLinks.forEach(function(K){H.indexOf(K.target)<0&&H.push(K.target)})});for(F=lt.nodes,H=[],et=0;F.length;++et,F=H,H=[])F.forEach(function(W){W.height=et,W.targetLinks.forEach(function(K){H.indexOf(K.source)<0&&H.push(K.source)})});var q=(M-D-R)/(et-1);lt.nodes.forEach(function(W){W.x1=(W.x0=D+Math.max(0,Math.min(et-1,Math.floor(I.call(null,W,et))))*q)+R})}function st(lt){var F=m.nest().key(function(it){return it.x0}).sortKeys(l.ascending).entries(lt.nodes).map(function(it){return it.values});q(),nt();for(var H=1,et=G;et>0;--et)K(H*=.99),nt(),W(H),nt();function q(){var it=l.max(F,function(bt){return bt.length}),ot=$*(L-S)/(it-1);z>ot&&(z=ot);var ct=l.min(F,function(bt){return(L-S-(bt.length-1)*z)/l.sum(bt,g)});F.forEach(function(bt){bt.forEach(function(ut,pt){ut.y1=(ut.y0=pt)+ut.value*ct})}),lt.links.forEach(function(bt){bt.width=bt.value*ct})}function W(it){F.forEach(function(ot){ot.forEach(function(ct){if(ct.targetLinks.length){var bt=(l.sum(ct.targetLinks,v)/l.sum(ct.targetLinks,g)-b(ct))*it;ct.y0+=bt,ct.y1+=bt}})})}function K(it){F.slice().reverse().forEach(function(ot){ot.forEach(function(ct){if(ct.sourceLinks.length){var bt=(l.sum(ct.sourceLinks,_)/l.sum(ct.sourceLinks,g)-b(ct))*it;ct.y0+=bt,ct.y1+=bt}})})}function nt(){F.forEach(function(it){var ot,ct,bt=S,ut=it.length,pt;for(it.sort(y),pt=0;pt<ut;++pt)ot=it[pt],ct=bt-ot.y0,ct>0&&(ot.y0+=ct,ot.y1+=ct),bt=ot.y1+z;if(ct=bt-z-L,ct>0)for(bt=ot.y0-=ct,ot.y1-=ct,pt=ut-2;pt>=0;--pt)ot=it[pt],ct=ot.y1+z-bt,ct>0&&(ot.y0-=ct,ot.y1-=ct),bt=ot.y0})}}function at(lt){lt.nodes.forEach(function(F){F.sourceLinks.sort(o),F.targetLinks.sort(s)}),lt.nodes.forEach(function(F){var H=F.y0,et=H;F.sourceLinks.forEach(function(q){q.y0=H+q.width/2,H+=q.width}),F.targetLinks.forEach(function(q){q.y1=et+q.width/2,et+=q.width})})}return tt};function p(D){return[D.source.x1,D.y0]}function w(D){return[D.target.x0,D.y1]}var h=function(){return x.linkHorizontal().source(p).target(w)};f.sankey=k,f.sankeyCenter=n,f.sankeyLeft=a,f.sankeyRight=i,f.sankeyJustify=r,f.sankeyLinkHorizontal=h,Object.defineProperty(f,"__esModule",{value:!0})})},{"d3-array":107,"d3-collection":108,"d3-shape":119}],58:[function(e,B,V){(function(){var f={version:"3.8.0"},l=[].slice,m=function(ft){return l.call(ft)},x=self.document;function t(ft){return ft&&(ft.ownerDocument||ft.document||ft).documentElement}function a(ft){return ft&&(ft.ownerDocument&&ft.ownerDocument.defaultView||ft.document&&ft||ft.defaultView)}if(x)try{m(x.documentElement.childNodes)[0].nodeType}catch{m=function(_t){for(var Lt=_t.length,Ut=new Array(Lt);Lt--;)Ut[Lt]=_t[Lt];return Ut}}if(Date.now||(Date.now=function(){return+new Date}),x)try{x.createElement("DIV").style.setProperty("opacity",0,"")}catch{var i=this.Element.prototype,r=i.setAttribute,n=i.setAttributeNS,d=this.CSSStyleDeclaration.prototype,s=d.setProperty;i.setAttribute=function(_t,Lt){r.call(this,_t,Lt+"")},i.setAttributeNS=function(_t,Lt,Ut){n.call(this,_t,Lt,Ut+"")},d.setProperty=function(_t,Lt,Ut){s.call(this,_t,Lt+"",Ut)}}f.ascending=o;function o(ft,_t){return ft<_t?-1:ft>_t?1:ft>=_t?0:NaN}f.descending=function(ft,_t){return _t<ft?-1:_t>ft?1:_t>=ft?0:NaN},f.min=function(ft,_t){var Lt=-1,Ut=ft.length,Bt,Jt;if(arguments.length===1){for(;++Lt<Ut;)if((Jt=ft[Lt])!=null&&Jt>=Jt){Bt=Jt;break}for(;++Lt<Ut;)(Jt=ft[Lt])!=null&&Bt>Jt&&(Bt=Jt)}else{for(;++Lt<Ut;)if((Jt=_t.call(ft,ft[Lt],Lt))!=null&&Jt>=Jt){Bt=Jt;break}for(;++Lt<Ut;)(Jt=_t.call(ft,ft[Lt],Lt))!=null&&Bt>Jt&&(Bt=Jt)}return Bt},f.max=function(ft,_t){var Lt=-1,Ut=ft.length,Bt,Jt;if(arguments.length===1){for(;++Lt<Ut;)if((Jt=ft[Lt])!=null&&Jt>=Jt){Bt=Jt;break}for(;++Lt<Ut;)(Jt=ft[Lt])!=null&&Jt>Bt&&(Bt=Jt)}else{for(;++Lt<Ut;)if((Jt=_t.call(ft,ft[Lt],Lt))!=null&&Jt>=Jt){Bt=Jt;break}for(;++Lt<Ut;)(Jt=_t.call(ft,ft[Lt],Lt))!=null&&Jt>Bt&&(Bt=Jt)}return Bt},f.extent=function(ft,_t){var Lt=-1,Ut=ft.length,Bt,Jt,we;if(arguments.length===1){for(;++Lt<Ut;)if((Jt=ft[Lt])!=null&&Jt>=Jt){Bt=we=Jt;break}for(;++Lt<Ut;)(Jt=ft[Lt])!=null&&(Bt>Jt&&(Bt=Jt),we<Jt&&(we=Jt))}else{for(;++Lt<Ut;)if((Jt=_t.call(ft,ft[Lt],Lt))!=null&&Jt>=Jt){Bt=we=Jt;break}for(;++Lt<Ut;)(Jt=_t.call(ft,ft[Lt],Lt))!=null&&(Bt>Jt&&(Bt=Jt),we<Jt&&(we=Jt))}return[Bt,we]};function y(ft){return ft===null?NaN:+ft}function g(ft){return!isNaN(ft)}f.sum=function(ft,_t){var Lt=0,Ut=ft.length,Bt,Jt=-1;if(arguments.length===1)for(;++Jt<Ut;)g(Bt=+ft[Jt])&&(Lt+=Bt);else for(;++Jt<Ut;)g(Bt=+_t.call(ft,ft[Jt],Jt))&&(Lt+=Bt);return Lt},f.mean=function(ft,_t){var Lt=0,Ut=ft.length,Bt,Jt=-1,we=Ut;if(arguments.length===1)for(;++Jt<Ut;)g(Bt=y(ft[Jt]))?Lt+=Bt:--we;else for(;++Jt<Ut;)g(Bt=y(_t.call(ft,ft[Jt],Jt)))?Lt+=Bt:--we;if(we)return Lt/we},f.quantile=function(ft,_t){var Lt=(ft.length-1)*_t+1,Ut=Math.floor(Lt),Bt=+ft[Ut-1],Jt=Lt-Ut;return Jt?Bt+Jt*(ft[Ut]-Bt):Bt},f.median=function(ft,_t){var Lt=[],Ut=ft.length,Bt,Jt=-1;if(arguments.length===1)for(;++Jt<Ut;)g(Bt=y(ft[Jt]))&&Lt.push(Bt);else for(;++Jt<Ut;)g(Bt=y(_t.call(ft,ft[Jt],Jt)))&&Lt.push(Bt);if(Lt.length)return f.quantile(Lt.sort(o),.5)},f.variance=function(ft,_t){var Lt=ft.length,Ut=0,Bt,Jt,we=0,pe=-1,De=0;if(arguments.length===1)for(;++pe<Lt;)g(Bt=y(ft[pe]))&&(Jt=Bt-Ut,Ut+=Jt/++De,we+=Jt*(Bt-Ut));else for(;++pe<Lt;)g(Bt=y(_t.call(ft,ft[pe],pe)))&&(Jt=Bt-Ut,Ut+=Jt/++De,we+=Jt*(Bt-Ut));if(De>1)return we/(De-1)},f.deviation=function(){var ft=f.variance.apply(this,arguments);return ft&&Math.sqrt(ft)};function b(ft){return{left:function(_t,Lt,Ut,Bt){for(arguments.length<3&&(Ut=0),arguments.length<4&&(Bt=_t.length);Ut<Bt;){var Jt=Ut+Bt>>>1;ft(_t[Jt],Lt)<0?Ut=Jt+1:Bt=Jt}return Ut},right:function(_t,Lt,Ut,Bt){for(arguments.length<3&&(Ut=0),arguments.length<4&&(Bt=_t.length);Ut<Bt;){var Jt=Ut+Bt>>>1;ft(_t[Jt],Lt)>0?Bt=Jt:Ut=Jt+1}return Ut}}}var v=b(o);f.bisectLeft=v.left,f.bisect=f.bisectRight=v.right,f.bisector=function(ft){return b(ft.length===1?function(_t,Lt){return o(ft(_t),Lt)}:ft)},f.shuffle=function(ft,_t,Lt){(Ut=arguments.length)<3&&(Lt=ft.length,Ut<2&&(_t=0));for(var Ut=Lt-_t,Bt,Jt;Ut;)Jt=Math.random()*Ut--|0,Bt=ft[Ut+_t],ft[Ut+_t]=ft[Jt+_t],ft[Jt+_t]=Bt;return ft},f.permute=function(ft,_t){for(var Lt=_t.length,Ut=new Array(Lt);Lt--;)Ut[Lt]=ft[_t[Lt]];return Ut},f.pairs=function(ft){for(var _t=0,Lt=ft.length-1,Ut=ft[0],Bt=new Array(Lt<0?0:Lt);_t<Lt;)Bt[_t]=[Ut,Ut=ft[++_t]];return Bt},f.transpose=function(ft){if(!(Jt=ft.length))return[];for(var _t=-1,Lt=f.min(ft,_),Ut=new Array(Lt);++_t<Lt;)for(var Bt=-1,Jt,we=Ut[_t]=new Array(Jt);++Bt<Jt;)we[Bt]=ft[Bt][_t];return Ut};function _(ft){return ft.length}f.zip=function(){return f.transpose(arguments)},f.keys=function(ft){var _t=[];for(var Lt in ft)_t.push(Lt);return _t},f.values=function(ft){var _t=[];for(var Lt in ft)_t.push(ft[Lt]);return _t},f.entries=function(ft){var _t=[];for(var Lt in ft)_t.push({key:Lt,value:ft[Lt]});return _t},f.merge=function(ft){for(var _t=ft.length,Lt,Ut=-1,Bt=0,Jt,we;++Ut<_t;)Bt+=ft[Ut].length;for(Jt=new Array(Bt);--_t>=0;)for(we=ft[_t],Lt=we.length;--Lt>=0;)Jt[--Bt]=we[Lt];return Jt};var u=Math.abs;f.range=function(ft,_t,Lt){if(arguments.length<3&&(Lt=1,arguments.length<2&&(_t=ft,ft=0)),(_t-ft)/Lt===1/0)throw new Error("infinite range");var Ut=[],Bt=T(u(Lt)),Jt=-1,we;if(ft*=Bt,_t*=Bt,Lt*=Bt,Lt<0)for(;(we=ft+Lt*++Jt)>_t;)Ut.push(we/Bt);else for(;(we=ft+Lt*++Jt)<_t;)Ut.push(we/Bt);return Ut};function T(ft){for(var _t=1;ft*_t%1;)_t*=10;return _t}function c(ft,_t){for(var Lt in _t)Object.defineProperty(ft.prototype,Lt,{value:_t[Lt],enumerable:!1})}f.map=function(ft,_t){var Lt=new A;if(ft instanceof A)ft.forEach(function(pe,De){Lt.set(pe,De)});else if(Array.isArray(ft)){var Ut=-1,Bt=ft.length,Jt;if(arguments.length===1)for(;++Ut<Bt;)Lt.set(Ut,ft[Ut]);else for(;++Ut<Bt;)Lt.set(_t.call(ft,Jt=ft[Ut],Ut),Jt)}else for(var we in ft)Lt.set(we,ft[we]);return Lt};function A(){this._=Object.create(null)}var k="__proto__",p="\0";c(A,{has:D,get:function(ft){return this._[w(ft)]},set:function(ft,_t){return this._[w(ft)]=_t},remove:S,keys:M,values:function(){var ft=[];for(var _t in this._)ft.push(this._[_t]);return ft},entries:function(){var ft=[];for(var _t in this._)ft.push({key:h(_t),value:this._[_t]});return ft},size:L,empty:R,forEach:function(ft){for(var _t in this._)ft.call(this,h(_t),this._[_t])}});function w(ft){return(ft+="")===k||ft[0]===p?p+ft:ft}function h(ft){return(ft+="")[0]===p?ft.slice(1):ft}function D(ft){return w(ft)in this._}function S(ft){return(ft=w(ft))in this._&&delete this._[ft]}function M(){var ft=[];for(var _t in this._)ft.push(h(_t));return ft}function L(){var ft=0;for(var _t in this._)++ft;return ft}function R(){for(var ft in this._)return!1;return!0}f.nest=function(){var ft={},_t=[],Lt=[],Ut,Bt;function Jt(pe,De,je){if(je>=_t.length)return Bt?Bt.call(ft,De):Ut?De.sort(Ut):De;for(var tr=-1,rr=De.length,Sr=_t[je++],qr,cn,Pr,Ur=new A,Zr;++tr<rr;)(Zr=Ur.get(qr=Sr(cn=De[tr])))?Zr.push(cn):Ur.set(qr,[cn]);return pe?(cn=pe(),Pr=function(on,ln){cn.set(on,Jt(pe,ln,je))}):(cn={},Pr=function(on,ln){cn[on]=Jt(pe,ln,je)}),Ur.forEach(Pr),cn}function we(pe,De){if(De>=_t.length)return pe;var je=[],tr=Lt[De++];return pe.forEach(function(rr,Sr){je.push({key:rr,values:we(Sr,De)})}),tr?je.sort(function(rr,Sr){return tr(rr.key,Sr.key)}):je}return ft.map=function(pe,De){return Jt(De,pe,0)},ft.entries=function(pe){return we(Jt(f.map,pe,0),0)},ft.key=function(pe){return _t.push(pe),ft},ft.sortKeys=function(pe){return Lt[_t.length-1]=pe,ft},ft.sortValues=function(pe){return Ut=pe,ft},ft.rollup=function(pe){return Bt=pe,ft},ft},f.set=function(ft){var _t=new z;if(ft)for(var Lt=0,Ut=ft.length;Lt<Ut;++Lt)_t.add(ft[Lt]);return _t};function z(){this._=Object.create(null)}c(z,{has:D,add:function(ft){return this._[w(ft+="")]=!0,ft},remove:S,values:M,size:L,empty:R,forEach:function(ft){for(var _t in this._)ft.call(this,h(_t))}}),f.behavior={};function P(ft){return ft}f.rebind=function(ft,_t){for(var Lt=1,Ut=arguments.length,Bt;++Lt<Ut;)ft[Bt=arguments[Lt]]=I(ft,_t,_t[Bt]);return ft};function I(ft,_t,Lt){return function(){var Ut=Lt.apply(_t,arguments);return Ut===_t?ft:Ut}}function U(ft,_t){if(_t in ft)return _t;_t=_t.charAt(0).toUpperCase()+_t.slice(1);for(var Lt=0,Ut=O.length;Lt<Ut;++Lt){var Bt=O[Lt]+_t;if(Bt in ft)return Bt}}var O=["webkit","ms","moz","Moz","o","O"];function G(){}f.dispatch=function(){for(var ft=new $,_t=-1,Lt=arguments.length;++_t<Lt;)ft[arguments[_t]]=tt(ft);return ft};function $(){}$.prototype.on=function(ft,_t){var Lt=ft.indexOf("."),Ut="";if(Lt>=0&&(Ut=ft.slice(Lt+1),ft=ft.slice(0,Lt)),ft)return arguments.length<2?this[ft].on(Ut):this[ft].on(Ut,_t);if(arguments.length===2){if(_t==null)for(ft in this)this.hasOwnProperty(ft)&&this[ft].on(Ut,null);return this}};function tt(ft){var _t=[],Lt=new A;function Ut(){for(var Bt=_t,Jt=-1,we=Bt.length,pe;++Jt<we;)(pe=Bt[Jt].on)&&pe.apply(this,arguments);return ft}return Ut.on=function(Bt,Jt){var we=Lt.get(Bt),pe;return arguments.length<2?we&&we.on:(we&&(we.on=null,_t=_t.slice(0,pe=_t.indexOf(we)).concat(_t.slice(pe+1)),Lt.remove(Bt)),Jt&&_t.push(Lt.set(Bt,{on:Jt})),ft)},Ut}f.event=null;function Z(){f.event.preventDefault()}function X(){for(var ft=f.event,_t;_t=ft.sourceEvent;)ft=_t;return ft}function J(ft){for(var _t=new $,Lt=0,Ut=arguments.length;++Lt<Ut;)_t[arguments[Lt]]=tt(_t);return _t.of=function(Bt,Jt){return function(we){try{var pe=we.sourceEvent=f.event;we.target=ft,f.event=we,_t[we.type].apply(Bt,Jt)}finally{f.event=pe}}},_t}f.requote=function(ft){return ft.replace(st,"\\$&")};var st=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,at={}.__proto__?function(ft,_t){ft.__proto__=_t}:function(ft,_t){for(var Lt in _t)ft[Lt]=_t[Lt]};function lt(ft){return at(ft,q),ft}var F=function(ft,_t){return _t.querySelector(ft)},H=function(ft,_t){return _t.querySelectorAll(ft)},et=function(ft,_t){var Lt=ft.matches||ft[U(ft,"matchesSelector")];return et=function(Ut,Bt){return Lt.call(Ut,Bt)},et(ft,_t)};typeof Sizzle=="function"&&(F=function(ft,_t){return Sizzle(ft,_t)[0]||null},H=Sizzle,et=Sizzle.matchesSelector),f.selection=function(){return f.select(x.documentElement)};var q=f.selection.prototype=[];q.select=function(ft){var _t=[],Lt,Ut,Bt,Jt;ft=W(ft);for(var we=-1,pe=this.length;++we<pe;){_t.push(Lt=[]),Lt.parentNode=(Bt=this[we]).parentNode;for(var De=-1,je=Bt.length;++De<je;)(Jt=Bt[De])?(Lt.push(Ut=ft.call(Jt,Jt.__data__,De,we)),Ut&&"__data__"in Jt&&(Ut.__data__=Jt.__data__)):Lt.push(null)}return lt(_t)};function W(ft){return typeof ft=="function"?ft:function(){return F(ft,this)}}q.selectAll=function(ft){var _t=[],Lt,Ut;ft=K(ft);for(var Bt=-1,Jt=this.length;++Bt<Jt;)for(var we=this[Bt],pe=-1,De=we.length;++pe<De;)(Ut=we[pe])&&(_t.push(Lt=m(ft.call(Ut,Ut.__data__,pe,Bt))),Lt.parentNode=Ut);return lt(_t)};function K(ft){return typeof ft=="function"?ft:function(){return H(ft,this)}}var nt="http://www.w3.org/1999/xhtml",it={svg:"http://www.w3.org/2000/svg",xhtml:nt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};f.ns={prefix:it,qualify:function(ft){var _t=ft.indexOf(":"),Lt=ft;return _t>=0&&(Lt=ft.slice(0,_t))!=="xmlns"&&(ft=ft.slice(_t+1)),it.hasOwnProperty(Lt)?{space:it[Lt],local:ft}:ft}},q.attr=function(ft,_t){if(arguments.length<2){if(typeof ft=="string"){var Lt=this.node();return ft=f.ns.qualify(ft),ft.local?Lt.getAttributeNS(ft.space,ft.local):Lt.getAttribute(ft)}for(_t in ft)this.each(ot(_t,ft[_t]));return this}return this.each(ot(ft,_t))};function ot(ft,_t){ft=f.ns.qualify(ft);function Lt(){this.removeAttribute(ft)}function Ut(){this.removeAttributeNS(ft.space,ft.local)}function Bt(){this.setAttribute(ft,_t)}function Jt(){this.setAttributeNS(ft.space,ft.local,_t)}function we(){var De=_t.apply(this,arguments);De==null?this.removeAttribute(ft):this.setAttribute(ft,De)}function pe(){var De=_t.apply(this,arguments);De==null?this.removeAttributeNS(ft.space,ft.local):this.setAttributeNS(ft.space,ft.local,De)}return _t==null?ft.local?Ut:Lt:typeof _t=="function"?ft.local?pe:we:ft.local?Jt:Bt}function ct(ft){return ft.trim().replace(/\s+/g," ")}q.classed=function(ft,_t){if(arguments.length<2){if(typeof ft=="string"){var Lt=this.node(),Ut=(ft=ut(ft)).length,Bt=-1;if(_t=Lt.classList){for(;++Bt<Ut;)if(!_t.contains(ft[Bt]))return!1}else for(_t=Lt.getAttribute("class");++Bt<Ut;)if(!bt(ft[Bt]).test(_t))return!1;return!0}for(_t in ft)this.each(pt(_t,ft[_t]));return this}return this.each(pt(ft,_t))};function bt(ft){return new RegExp("(?:^|\\s+)"+f.requote(ft)+"(?:\\s+|$)","g")}function ut(ft){return(ft+"").trim().split(/^|\s+/)}function pt(ft,_t){ft=ut(ft).map(yt);var Lt=ft.length;function Ut(){for(var Jt=-1;++Jt<Lt;)ft[Jt](this,_t)}function Bt(){for(var Jt=-1,we=_t.apply(this,arguments);++Jt<Lt;)ft[Jt](this,we)}return typeof _t=="function"?Bt:Ut}function yt(ft){var _t=bt(ft);return function(Lt,Ut){if(Bt=Lt.classList)return Ut?Bt.add(ft):Bt.remove(ft);var Bt=Lt.getAttribute("class")||"";Ut?(_t.lastIndex=0,_t.test(Bt)||Lt.setAttribute("class",ct(Bt+" "+ft))):Lt.setAttribute("class",ct(Bt.replace(_t," ")))}}q.style=function(ft,_t,Lt){var Ut=arguments.length;if(Ut<3){if(typeof ft!="string"){Ut<2&&(_t="");for(Lt in ft)this.each(Tt(Lt,ft[Lt],_t));return this}if(Ut<2){var Bt=this.node();return a(Bt).getComputedStyle(Bt,null).getPropertyValue(ft)}Lt=""}return this.each(Tt(ft,_t,Lt))};function Tt(ft,_t,Lt){function Ut(){this.style.removeProperty(ft)}function Bt(){this.style.setProperty(ft,_t,Lt)}function Jt(){var we=_t.apply(this,arguments);we==null?this.style.removeProperty(ft):this.style.setProperty(ft,we,Lt)}return _t==null?Ut:typeof _t=="function"?Jt:Bt}q.property=function(ft,_t){if(arguments.length<2){if(typeof ft=="string")return this.node()[ft];for(_t in ft)this.each(kt(_t,ft[_t]));return this}return this.each(kt(ft,_t))};function kt(ft,_t){function Lt(){delete this[ft]}function Ut(){this[ft]=_t}function Bt(){var Jt=_t.apply(this,arguments);Jt==null?delete this[ft]:this[ft]=Jt}return _t==null?Lt:typeof _t=="function"?Bt:Ut}q.text=function(ft){return arguments.length?this.each(typeof ft=="function"?function(){var _t=ft.apply(this,arguments);this.textContent=_t==null?"":_t}:ft==null?function(){this.textContent=""}:function(){this.textContent=ft}):this.node().textContent},q.html=function(ft){return arguments.length?this.each(typeof ft=="function"?function(){var _t=ft.apply(this,arguments);this.innerHTML=_t==null?"":_t}:ft==null?function(){this.innerHTML=""}:function(){this.innerHTML=ft}):this.node().innerHTML},q.append=function(ft){return ft=zt(ft),this.select(function(){return this.appendChild(ft.apply(this,arguments))})};function zt(ft){function _t(){var Ut=this.ownerDocument,Bt=this.namespaceURI;return Bt===nt&&Ut.documentElement.namespaceURI===nt?Ut.createElement(ft):Ut.createElementNS(Bt,ft)}function Lt(){return this.ownerDocument.createElementNS(ft.space,ft.local)}return typeof ft=="function"?ft:(ft=f.ns.qualify(ft)).local?Lt:_t}q.insert=function(ft,_t){return ft=zt(ft),_t=W(_t),this.select(function(){return this.insertBefore(ft.apply(this,arguments),_t.apply(this,arguments)||null)})},q.remove=function(){return this.each(Rt)};function Rt(){var ft=this.parentNode;ft&&ft.removeChild(this)}q.data=function(ft,_t){var Lt=-1,Ut=this.length,Bt,Jt;if(!arguments.length){for(ft=new Array(Ut=(Bt=this[0]).length);++Lt<Ut;)(Jt=Bt[Lt])&&(ft[Lt]=Jt.__data__);return ft}function we(tr,rr){var Sr,qr=tr.length,cn=rr.length,Pr=Math.min(qr,cn),Ur=new Array(cn),Zr=new Array(cn),on=new Array(qr),ln,Kr;if(_t){var Vn=new A,ii=new Array(qr),ki;for(Sr=-1;++Sr<qr;)(ln=tr[Sr])&&(Vn.has(ki=_t.call(ln,ln.__data__,Sr))?on[Sr]=ln:Vn.set(ki,ln),ii[Sr]=ki);for(Sr=-1;++Sr<cn;)(ln=Vn.get(ki=_t.call(rr,Kr=rr[Sr],Sr)))?ln!==!0&&(Ur[Sr]=ln,ln.__data__=Kr):Zr[Sr]=Gt(Kr),Vn.set(ki,!0);for(Sr=-1;++Sr<qr;)Sr in ii&&Vn.get(ii[Sr])!==!0&&(on[Sr]=tr[Sr])}else{for(Sr=-1;++Sr<Pr;)ln=tr[Sr],Kr=rr[Sr],ln?(ln.__data__=Kr,Ur[Sr]=ln):Zr[Sr]=Gt(Kr);for(;Sr<cn;++Sr)Zr[Sr]=Gt(rr[Sr]);for(;Sr<qr;++Sr)on[Sr]=tr[Sr]}Zr.update=Ur,Zr.parentNode=Ur.parentNode=on.parentNode=tr.parentNode,pe.push(Zr),De.push(Ur),je.push(on)}var pe=Qt([]),De=lt([]),je=lt([]);if(typeof ft=="function")for(;++Lt<Ut;)we(Bt=this[Lt],ft.call(Bt,Bt.parentNode.__data__,Lt));else for(;++Lt<Ut;)we(Bt=this[Lt],ft);return De.enter=function(){return pe},De.exit=function(){return je},De};function Gt(ft){return{__data__:ft}}q.datum=function(ft){return arguments.length?this.property("__data__",ft):this.property("__data__")},q.filter=function(ft){var _t=[],Lt,Ut,Bt;typeof ft!="function"&&(ft=wt(ft));for(var Jt=0,we=this.length;Jt<we;Jt++){_t.push(Lt=[]),Lt.parentNode=(Ut=this[Jt]).parentNode;for(var pe=0,De=Ut.length;pe<De;pe++)(Bt=Ut[pe])&&ft.call(Bt,Bt.__data__,pe,Jt)&&Lt.push(Bt)}return lt(_t)};function wt(ft){return function(){return et(this,ft)}}q.order=function(){for(var ft=-1,_t=this.length;++ft<_t;)for(var Lt=this[ft],Ut=Lt.length-1,Bt=Lt[Ut],Jt;--Ut>=0;)(Jt=Lt[Ut])&&(Bt&&Bt!==Jt.nextSibling&&Bt.parentNode.insertBefore(Jt,Bt),Bt=Jt);return this},q.sort=function(ft){ft=It.apply(this,arguments);for(var _t=-1,Lt=this.length;++_t<Lt;)this[_t].sort(ft);return this.order()};function It(ft){return arguments.length||(ft=o),function(_t,Lt){return _t&&Lt?ft(_t.__data__,Lt.__data__):!_t-!Lt}}q.each=function(ft){return $t(this,function(_t,Lt,Ut){ft.call(_t,_t.__data__,Lt,Ut)})};function $t(ft,_t){for(var Lt=0,Ut=ft.length;Lt<Ut;Lt++)for(var Bt=ft[Lt],Jt=0,we=Bt.length,pe;Jt<we;Jt++)(pe=Bt[Jt])&&_t(pe,Jt,Lt);return ft}q.call=function(ft){var _t=m(arguments);return ft.apply(_t[0]=this,_t),this},q.empty=function(){return!this.node()},q.node=function(){for(var ft=0,_t=this.length;ft<_t;ft++)for(var Lt=this[ft],Ut=0,Bt=Lt.length;Ut<Bt;Ut++){var Jt=Lt[Ut];if(Jt)return Jt}return null},q.size=function(){var ft=0;return $t(this,function(){++ft}),ft};function Qt(ft){return at(ft,Nt),ft}var Nt=[];f.selection.enter=Qt,f.selection.enter.prototype=Nt,Nt.append=q.append,Nt.empty=q.empty,Nt.node=q.node,Nt.call=q.call,Nt.size=q.size,Nt.select=function(ft){for(var _t=[],Lt,Ut,Bt,Jt,we,pe=-1,De=this.length;++pe<De;){Bt=(Jt=this[pe]).update,_t.push(Lt=[]),Lt.parentNode=Jt.parentNode;for(var je=-1,tr=Jt.length;++je<tr;)(we=Jt[je])?(Lt.push(Bt[je]=Ut=ft.call(Jt.parentNode,we.__data__,je,pe)),Ut.__data__=we.__data__):Lt.push(null)}return lt(_t)},Nt.insert=function(ft,_t){return arguments.length<2&&(_t=Pt(this)),q.insert.call(this,ft,_t)};function Pt(ft){var _t,Lt;return function(Ut,Bt,Jt){var we=ft[Jt].update,pe=we.length,De;for(Jt!=Lt&&(Lt=Jt,_t=0),Bt>=_t&&(_t=Bt+1);!(De=we[_t])&&++_t<pe;);return De}}f.select=function(ft){var _t;return typeof ft=="string"?(_t=[F(ft,x)],_t.parentNode=x.documentElement):(_t=[ft],_t.parentNode=t(ft)),lt([_t])},f.selectAll=function(ft){var _t;return typeof ft=="string"?(_t=m(H(ft,x)),_t.parentNode=x.documentElement):(_t=m(ft),_t.parentNode=null),lt([_t])},q.on=function(ft,_t,Lt){var Ut=arguments.length;if(Ut<3){if(typeof ft!="string"){Ut<2&&(_t=!1);for(Lt in ft)this.each(Yt(Lt,ft[Lt],_t));return this}if(Ut<2)return(Ut=this.node()["__on"+ft])&&Ut._;Lt=!1}return this.each(Yt(ft,_t,Lt))};function Yt(ft,_t,Lt){var Ut="__on"+ft,Bt=ft.indexOf("."),Jt=Re;Bt>0&&(ft=ft.slice(0,Bt));var we=ve.get(ft);we&&(ft=we,Jt=ir);function pe(){var tr=this[Ut];tr&&(this.removeEventListener(ft,tr,tr.$),delete this[Ut])}function De(){var tr=Jt(_t,m(arguments));pe.call(this),this.addEventListener(ft,this[Ut]=tr,tr.$=Lt),tr._=_t}function je(){var tr=new RegExp("^__on([^.]+)"+f.requote(ft)+"$"),rr;for(var Sr in this)if(rr=Sr.match(tr)){var qr=this[Sr];this.removeEventListener(rr[1],qr,qr.$),delete this[Sr]}}return Bt?_t?De:pe:_t?G:je}var ve=f.map({mouseenter:"mouseover",mouseleave:"mouseout"});x&&ve.forEach(function(ft){"on"+ft in x&&ve.remove(ft)});function Re(ft,_t){return function(Lt){var Ut=f.event;f.event=Lt,_t[0]=this.__data__;try{ft.apply(this,_t)}finally{f.event=Ut}}}function ir(ft,_t){var Lt=Re(ft,_t);return function(Ut){var Bt=this,Jt=Ut.relatedTarget;(!Jt||Jt!==Bt&&!(Jt.compareDocumentPosition(Bt)&8))&&Lt.call(Bt,Ut)}}var Ie,Be=0;function Ye(ft){var _t=".dragsuppress-"+ ++Be,Lt="click"+_t,Ut=f.select(a(ft)).on("touchmove"+_t,Z).on("dragstart"+_t,Z).on("selectstart"+_t,Z);if(Ie==null&&(Ie="onselectstart"in ft?!1:U(ft.style,"userSelect")),Ie){var Bt=t(ft).style,Jt=Bt[Ie];Bt[Ie]="none"}return function(we){if(Ut.on(_t,null),Ie&&(Bt[Ie]=Jt),we){var pe=function(){Ut.on(Lt,null)};Ut.on(Lt,function(){Z(),pe()},!0),setTimeout(pe,0)}}}f.mouse=function(ft){return Ee(ft,X())};var ze=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function Ee(ft,_t){_t.changedTouches&&(_t=_t.changedTouches[0]);var Lt=ft.ownerSVGElement||ft;if(Lt.createSVGPoint){var Ut=Lt.createSVGPoint();if(ze<0){var Bt=a(ft);if(Bt.scrollX||Bt.scrollY){Lt=f.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var Jt=Lt[0][0].getScreenCTM();ze=!(Jt.f||Jt.e),Lt.remove()}}return ze?(Ut.x=_t.pageX,Ut.y=_t.pageY):(Ut.x=_t.clientX,Ut.y=_t.clientY),Ut=Ut.matrixTransform(ft.getScreenCTM().inverse()),[Ut.x,Ut.y]}var we=ft.getBoundingClientRect();return[_t.clientX-we.left-ft.clientLeft,_t.clientY-we.top-ft.clientTop]}f.touch=function(ft,_t,Lt){if(arguments.length<3&&(Lt=_t,_t=X().changedTouches),_t){for(var Ut=0,Bt=_t.length,Jt;Ut<Bt;++Ut)if((Jt=_t[Ut]).identifier===Lt)return Ee(ft,Jt)}},f.behavior.drag=function(){var ft=J(Bt,"drag","dragstart","dragend"),_t=null,Lt=Jt(G,f.mouse,a,"mousemove","mouseup"),Ut=Jt(Wt,f.touch,P,"touchmove","touchend");function Bt(){this.on("mousedown.drag",Lt).on("touchstart.drag",Ut)}function Jt(we,pe,De,je,tr){return function(){var rr=this,Sr=f.event.target.correspondingElement||f.event.target,qr=rr.parentNode,cn=ft.of(rr,arguments),Pr=0,Ur=we(),Zr=".drag"+(Ur==null?"":"-"+Ur),on,ln=f.select(De(Sr)).on(je+Zr,ii).on(tr+Zr,ki),Kr=Ye(Sr),Vn=pe(qr,Ur);_t?(on=_t.apply(rr,arguments),on=[on.x-Vn[0],on.y-Vn[1]]):on=[0,0],cn({type:"dragstart"});function ii(){var si=pe(qr,Ur),Ci,ui;!si||(Ci=si[0]-Vn[0],ui=si[1]-Vn[1],Pr|=Ci|ui,Vn=si,cn({type:"drag",x:si[0]+on[0],y:si[1]+on[1],dx:Ci,dy:ui}))}function ki(){!pe(qr,Ur)||(ln.on(je+Zr,null).on(tr+Zr,null),Kr(Pr),cn({type:"dragend"}))}}}return Bt.origin=function(we){return arguments.length?(_t=we,Bt):_t},f.rebind(Bt,ft,"on")};function Wt(){return f.event.changedTouches[0].identifier}f.touches=function(ft,_t){return arguments.length<2&&(_t=X().touches),_t?m(_t).map(function(Lt){var Ut=Ee(ft,Lt);return Ut.identifier=Lt.identifier,Ut}):[]};var ee=1e-6,Xt=ee*ee,St=Math.PI,Vt=2*St,Zt=Vt-ee,qt=St/2,Te=St/180,me=180/St;function Ne(ft,_t,Lt){return(_t[0]-ft[0])*(Lt[1]-ft[1])-(_t[1]-ft[1])*(Lt[0]-ft[0])}function Ke(ft){return ft>1?qt:ft<-1?-qt:Math.asin(ft)}function He(ft){return((ft=Math.exp(ft))-1/ft)/2}function Xe(ft){return((ft=Math.exp(ft))+1/ft)/2}function er(ft){return((ft=Math.exp(2*ft))-1)/(ft+1)}var We=Math.SQRT2,hr=2,Wr=4;f.interpolateZoom=function(ft,_t){var Lt=ft[0],Ut=ft[1],Bt=ft[2],Jt=_t[0],we=_t[1],pe=_t[2],De=Jt-Lt,je=we-Ut,tr=De*De+je*je,rr,Sr;if(tr<Xt)Sr=Math.log(pe/Bt)/We,rr=function(on){return[Lt+on*De,Ut+on*je,Bt*Math.exp(We*on*Sr)]};else{var qr=Math.sqrt(tr),cn=(pe*pe-Bt*Bt+Wr*tr)/(2*Bt*hr*qr),Pr=(pe*pe-Bt*Bt-Wr*tr)/(2*pe*hr*qr),Ur=Math.log(Math.sqrt(cn*cn+1)-cn),Zr=Math.log(Math.sqrt(Pr*Pr+1)-Pr);Sr=(Zr-Ur)/We,rr=function(on){var ln=on*Sr,Kr=Xe(Ur),Vn=Bt/(hr*qr)*(Kr*er(We*ln+Ur)-He(Ur));return[Lt+Vn*De,Ut+Vn*je,Bt*Kr/Xe(We*ln+Ur)]}}return rr.duration=Sr*1e3,rr},f.behavior.zoom=function(){var ft={x:0,y:0,k:1},_t,Lt,Ut,Bt=[960,500],Jt=dn,we=250,pe=0,De="mousedown.zoom",je="mousemove.zoom",tr="mouseup.zoom",rr,Sr="touchstart.zoom",qr,cn=J(ln,"zoomstart","zoom","zoomend"),Pr,Ur,Zr,on;le||(le="onwheel"in x?(Qr=function(){return-f.event.deltaY*(f.event.deltaMode?120:1)},"wheel"):"onmousewheel"in x?(Qr=function(){return f.event.wheelDelta},"mousewheel"):(Qr=function(){return-f.event.detail},"MozMousePixelScroll"));function ln(hi){hi.on(De,ea).on(le+".zoom",wo).on("dblclick.zoom",Ua).on(Sr,xa)}ln.event=function(hi){hi.each(function(){var sa=cn.of(this,arguments),Zi=ft;Xi?f.select(this).transition().each("start.zoom",function(){ft=this.__chart__||{x:0,y:0,k:1},ui(sa)}).tween("zoom:zoom",function(){var La=Bt[0],ua=Bt[1],go=Lt?Lt[0]:La/2,oo=Lt?Lt[1]:ua/2,So=f.interpolateZoom([(go-ft.x)/ft.k,(oo-ft.y)/ft.k,La/ft.k],[(go-Zi.x)/Zi.k,(oo-Zi.y)/Zi.k,La/Zi.k]);return function(ns){var Zo=So(ns),is=La/Zo[2];this.__chart__=ft={x:go-Zo[0]*is,y:oo-Zo[1]*is,k:is},Vi(sa)}}).each("interrupt.zoom",function(){Ii(sa)}).each("end.zoom",function(){Ii(sa)}):(this.__chart__=ft,ui(sa),Vi(sa),Ii(sa))})},ln.translate=function(hi){return arguments.length?(ft={x:+hi[0],y:+hi[1],k:ft.k},Ci(),ln):[ft.x,ft.y]},ln.scale=function(hi){return arguments.length?(ft={x:ft.x,y:ft.y,k:null},ii(+hi),Ci(),ln):ft.k},ln.scaleExtent=function(hi){return arguments.length?(Jt=hi==null?dn:[+hi[0],+hi[1]],ln):Jt},ln.center=function(hi){return arguments.length?(Ut=hi&&[+hi[0],+hi[1]],ln):Ut},ln.size=function(hi){return arguments.length?(Bt=hi&&[+hi[0],+hi[1]],ln):Bt},ln.duration=function(hi){return arguments.length?(we=+hi,ln):we},ln.x=function(hi){return arguments.length?(Ur=hi,Pr=hi.copy(),ft={x:0,y:0,k:1},ln):Ur},ln.y=function(hi){return arguments.length?(on=hi,Zr=hi.copy(),ft={x:0,y:0,k:1},ln):on};function Kr(hi){return[(hi[0]-ft.x)/ft.k,(hi[1]-ft.y)/ft.k]}function Vn(hi){return[hi[0]*ft.k+ft.x,hi[1]*ft.k+ft.y]}function ii(hi){ft.k=Math.max(Jt[0],Math.min(Jt[1],hi))}function ki(hi,sa){sa=Vn(sa),ft.x+=hi[0]-sa[0],ft.y+=hi[1]-sa[1]}function si(hi,sa,Zi,La){hi.__chart__={x:ft.x,y:ft.y,k:ft.k},ii(Math.pow(2,La)),ki(Lt=sa,Zi),hi=f.select(hi),we>0&&(hi=hi.transition().duration(we)),hi.call(ln.event)}function Ci(){Ur&&Ur.domain(Pr.range().map(function(hi){return(hi-ft.x)/ft.k}).map(Pr.invert)),on&&on.domain(Zr.range().map(function(hi){return(hi-ft.y)/ft.k}).map(Zr.invert))}function ui(hi){pe++||hi({type:"zoomstart"})}function Vi(hi){Ci(),hi({type:"zoom",scale:ft.k,translate:[ft.x,ft.y]})}function Ii(hi){--pe||(hi({type:"zoomend"}),Lt=null)}function ea(){var hi=this,sa=cn.of(hi,arguments),Zi=0,La=f.select(a(hi)).on(je,oo).on(tr,So),ua=Kr(f.mouse(hi)),go=Ye(hi);zn.call(hi),ui(sa);function oo(){Zi=1,ki(f.mouse(hi),ua),Vi(sa)}function So(){La.on(je,null).on(tr,null),go(Zi),Ii(sa)}}function xa(){var hi=this,sa=cn.of(hi,arguments),Zi={},La=0,ua,go=".zoom-"+f.event.changedTouches[0].identifier,oo="touchmove"+go,So="touchend"+go,ns=[],Zo=f.select(hi),is=Ye(hi);Wa(),ui(sa),Zo.on(De,null).on(Sr,Wa);function Ka(){var Eo=f.touches(hi);return ua=ft.k,Eo.forEach(function(co){co.identifier in Zi&&(Zi[co.identifier]=Kr(co))}),Eo}function Wa(){var Eo=f.event.target;f.select(Eo).on(oo,Oi).on(So,Ki),ns.push(Eo);for(var co=f.event.changedTouches,Vo=0,eo=co.length;Vo<eo;++Vo)Zi[co[Vo].identifier]=null;var as=Ka(),zs=Date.now();if(as.length===1){if(zs-qr<500){var hc=as[0];si(hi,hc,Zi[hc.identifier],Math.floor(Math.log(ft.k)/Math.LN2)+1),Z()}qr=zs}else if(as.length>1){var hc=as[0],ro=as[1],Qu=hc[0]-ro[0],Kl=hc[1]-ro[1];La=Qu*Qu+Kl*Kl}}function Oi(){var Eo=f.touches(hi),co,Vo,eo,as;zn.call(hi);for(var zs=0,hc=Eo.length;zs<hc;++zs,as=null)if(eo=Eo[zs],as=Zi[eo.identifier]){if(Vo)break;co=eo,Vo=as}if(as){var ro=(ro=eo[0]-co[0])*ro+(ro=eo[1]-co[1])*ro,Qu=La&&Math.sqrt(ro/La);co=[(co[0]+eo[0])/2,(co[1]+eo[1])/2],Vo=[(Vo[0]+as[0])/2,(Vo[1]+as[1])/2],ii(Qu*ua)}qr=null,ki(co,Vo),Vi(sa)}function Ki(){if(f.event.touches.length){for(var Eo=f.event.changedTouches,co=0,Vo=Eo.length;co<Vo;++co)delete Zi[Eo[co].identifier];for(var eo in Zi)return void Ka()}f.selectAll(ns).on(go,null),Zo.on(De,ea).on(Sr,xa),is(),Ii(sa)}}function wo(){var hi=cn.of(this,arguments);rr?clearTimeout(rr):(zn.call(this),_t=Kr(Lt=Ut||f.mouse(this)),ui(hi)),rr=setTimeout(function(){rr=null,Ii(hi)},50),Z(),ii(Math.pow(2,Qr()*.002)*ft.k),ki(Lt,_t),Vi(hi)}function Ua(){var hi=f.mouse(this),sa=Math.log(ft.k)/Math.LN2;si(this,hi,Kr(hi),f.event.shiftKey?Math.ceil(sa)-1:Math.floor(sa)+1)}return f.rebind(ln,cn,"on")};var dn=[0,1/0],Qr,le;f.color=Qe;function Qe(){}Qe.prototype.toString=function(){return this.rgb()+""},f.hsl=Ze;function Ze(ft,_t,Lt){return this instanceof Ze?(this.h=+ft,this.s=+_t,void(this.l=+Lt)):arguments.length<2?ft instanceof Ze?new Ze(ft.h,ft.s,ft.l):Gr(""+ft,ar,Ze):new Ze(ft,_t,Lt)}var Ve=Ze.prototype=new Qe;Ve.brighter=function(ft){return ft=Math.pow(.7,arguments.length?ft:1),new Ze(this.h,this.s,this.l/ft)},Ve.darker=function(ft){return ft=Math.pow(.7,arguments.length?ft:1),new Ze(this.h,this.s,ft*this.l)},Ve.rgb=function(){return _r(this.h,this.s,this.l)};function _r(ft,_t,Lt){var Ut,Bt;ft=isNaN(ft)?0:(ft%=360)<0?ft+360:ft,_t=isNaN(_t)||_t<0?0:_t>1?1:_t,Lt=Lt<0?0:Lt>1?1:Lt,Bt=Lt<=.5?Lt*(1+_t):Lt+_t-Lt*_t,Ut=2*Lt-Bt;function Jt(pe){return pe>360?pe-=360:pe<0&&(pe+=360),pe<60?Ut+(Bt-Ut)*pe/60:pe<180?Bt:pe<240?Ut+(Bt-Ut)*(240-pe)/60:Ut}function we(pe){return Math.round(Jt(pe)*255)}return new Ge(we(ft+120),we(ft),we(ft-120))}f.hcl=oe;function oe(ft,_t,Lt){return this instanceof oe?(this.h=+ft,this.c=+_t,void(this.l=+Lt)):arguments.length<2?ft instanceof oe?new oe(ft.h,ft.c,ft.l):ft instanceof ne?de(ft.l,ft.a,ft.b):de((ft=xr((ft=f.rgb(ft)).r,ft.g,ft.b)).l,ft.a,ft.b):new oe(ft,_t,Lt)}var Ht=oe.prototype=new Qe;Ht.brighter=function(ft){return new oe(this.h,this.c,Math.min(100,this.l+_e*(arguments.length?ft:1)))},Ht.darker=function(ft){return new oe(this.h,this.c,Math.max(0,this.l-_e*(arguments.length?ft:1)))},Ht.rgb=function(){return te(this.h,this.c,this.l).rgb()};function te(ft,_t,Lt){return isNaN(ft)&&(ft=0),isNaN(_t)&&(_t=0),new ne(Lt,Math.cos(ft*=Te)*_t,Math.sin(ft)*_t)}f.lab=ne;function ne(ft,_t,Lt){return this instanceof ne?(this.l=+ft,this.a=+_t,void(this.b=+Lt)):arguments.length<2?ft instanceof ne?new ne(ft.l,ft.a,ft.b):ft instanceof oe?te(ft.h,ft.c,ft.l):xr((ft=Ge(ft)).r,ft.g,ft.b):new ne(ft,_t,Lt)}var _e=18,Pe=.95047,Et=1,Mt=1.08883,se=ne.prototype=new Qe;se.brighter=function(ft){return new ne(Math.min(100,this.l+_e*(arguments.length?ft:1)),this.a,this.b)},se.darker=function(ft){return new ne(Math.max(0,this.l-_e*(arguments.length?ft:1)),this.a,this.b)},se.rgb=function(){return ce(this.l,this.a,this.b)};function ce(ft,_t,Lt){var Ut=(ft+16)/116,Bt=Ut+_t/500,Jt=Ut-Lt/200;return Bt=Se(Bt)*Pe,Ut=Se(Ut)*Et,Jt=Se(Jt)*Mt,new Ge(Ae(3.2404542*Bt-1.5371385*Ut-.4985314*Jt),Ae(-.969266*Bt+1.8760108*Ut+.041556*Jt),Ae(.0556434*Bt-.2040259*Ut+1.0572252*Jt))}function de(ft,_t,Lt){return ft>0?new oe(Math.atan2(Lt,_t)*me,Math.sqrt(_t*_t+Lt*Lt),ft):new oe(NaN,NaN,ft)}function Se(ft){return ft>.206893034?ft*ft*ft:(ft-4/29)/7.787037}function ye(ft){return ft>.008856?Math.pow(ft,1/3):7.787037*ft+4/29}function Ae(ft){return Math.round(255*(ft<=.00304?12.92*ft:1.055*Math.pow(ft,1/2.4)-.055))}f.rgb=Ge;function Ge(ft,_t,Lt){return this instanceof Ge?(this.r=~~ft,this.g=~~_t,void(this.b=~~Lt)):arguments.length<2?ft instanceof Ge?new Ge(ft.r,ft.g,ft.b):Gr(""+ft,Ge,_r):new Ge(ft,_t,Lt)}function sr(ft){return new Ge(ft>>16,ft>>8&255,ft&255)}function Er(ft){return sr(ft)+""}var kr=Ge.prototype=new Qe;kr.brighter=function(ft){ft=Math.pow(.7,arguments.length?ft:1);var _t=this.r,Lt=this.g,Ut=this.b,Bt=30;return!_t&&!Lt&&!Ut?new Ge(Bt,Bt,Bt):(_t&&_t<Bt&&(_t=Bt),Lt&&Lt<Bt&&(Lt=Bt),Ut&&Ut<Bt&&(Ut=Bt),new Ge(Math.min(255,_t/ft),Math.min(255,Lt/ft),Math.min(255,Ut/ft)))},kr.darker=function(ft){return ft=Math.pow(.7,arguments.length?ft:1),new Ge(ft*this.r,ft*this.g,ft*this.b)},kr.hsl=function(){return ar(this.r,this.g,this.b)},kr.toString=function(){return"#"+Mr(this.r)+Mr(this.g)+Mr(this.b)};function Mr(ft){return ft<16?"0"+Math.max(0,ft).toString(16):Math.min(255,ft).toString(16)}function Gr(ft,_t,Lt){var Ut=0,Bt=0,Jt=0,we,pe,De;if(we=/([a-z]+)\((.*)\)/.exec(ft=ft.toLowerCase()),we)switch(pe=we[2].split(","),we[1]){case"hsl":return Lt(parseFloat(pe[0]),parseFloat(pe[1])/100,parseFloat(pe[2])/100);case"rgb":return _t(Hr(pe[0]),Hr(pe[1]),Hr(pe[2]))}return(De=Cr.get(ft))?_t(De.r,De.g,De.b):(ft!=null&&ft.charAt(0)==="#"&&!isNaN(De=parseInt(ft.slice(1),16))&&(ft.length===4?(Ut=(De&3840)>>4,Ut=Ut>>4|Ut,Bt=De&240,Bt=Bt>>4|Bt,Jt=De&15,Jt=Jt<<4|Jt):ft.length===7&&(Ut=(De&16711680)>>16,Bt=(De&65280)>>8,Jt=De&255)),_t(Ut,Bt,Jt))}function ar(ft,_t,Lt){var Ut=Math.min(ft/=255,_t/=255,Lt/=255),Bt=Math.max(ft,_t,Lt),Jt=Bt-Ut,we,pe,De=(Bt+Ut)/2;return Jt?(pe=De<.5?Jt/(Bt+Ut):Jt/(2-Bt-Ut),ft==Bt?we=(_t-Lt)/Jt+(_t<Lt?6:0):_t==Bt?we=(Lt-ft)/Jt+2:we=(ft-_t)/Jt+4,we*=60):(we=NaN,pe=De>0&&De<1?0:we),new Ze(we,pe,De)}function xr(ft,_t,Lt){ft=Ir(ft),_t=Ir(_t),Lt=Ir(Lt);var Ut=ye((.4124564*ft+.3575761*_t+.1804375*Lt)/Pe),Bt=ye((.2126729*ft+.7151522*_t+.072175*Lt)/Et),Jt=ye((.0193339*ft+.119192*_t+.9503041*Lt)/Mt);return ne(116*Bt-16,500*(Ut-Bt),200*(Bt-Jt))}function Ir(ft){return(ft/=255)<=.04045?ft/12.92:Math.pow((ft+.055)/1.055,2.4)}function Hr(ft){var _t=parseFloat(ft);return ft.charAt(ft.length-1)==="%"?Math.round(_t*2.55):_t}var Cr=f.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Cr.forEach(function(ft,_t){Cr.set(ft,sr(_t))});function ae(ft){return typeof ft=="function"?ft:function(){return ft}}f.functor=ae,f.xhr=Le(P);function Le(ft){return function(_t,Lt,Ut){return arguments.length===2&&typeof Lt=="function"&&(Ut=Lt,Lt=null),$e(_t,Lt,ft,Ut)}}function $e(ft,_t,Lt,Ut){var Bt={},Jt=f.dispatch("beforesend","progress","load","error"),we={},pe=new XMLHttpRequest,De=null;self.XDomainRequest&&!("withCredentials"in pe)&&/^(http(s)?:)?\/\//.test(ft)&&(pe=new XDomainRequest),"onload"in pe?pe.onload=pe.onerror=je:pe.onreadystatechange=function(){pe.readyState>3&&je()};function je(){var tr=pe.status,rr;if(!tr&&Dr(pe)||tr>=200&&tr<300||tr===304){try{rr=Lt.call(Bt,pe)}catch(Sr){Jt.error.call(Bt,Sr);return}Jt.load.call(Bt,rr)}else Jt.error.call(Bt,pe)}return pe.onprogress=function(tr){var rr=f.event;f.event=tr;try{Jt.progress.call(Bt,pe)}finally{f.event=rr}},Bt.header=function(tr,rr){return tr=(tr+"").toLowerCase(),arguments.length<2?we[tr]:(rr==null?delete we[tr]:we[tr]=rr+"",Bt)},Bt.mimeType=function(tr){return arguments.length?(_t=tr==null?null:tr+"",Bt):_t},Bt.responseType=function(tr){return arguments.length?(De=tr,Bt):De},Bt.response=function(tr){return Lt=tr,Bt},["get","post"].forEach(function(tr){Bt[tr]=function(){return Bt.send.apply(Bt,[tr].concat(m(arguments)))}}),Bt.send=function(tr,rr,Sr){if(arguments.length===2&&typeof rr=="function"&&(Sr=rr,rr=null),pe.open(tr,ft,!0),_t!=null&&!("accept"in we)&&(we.accept=_t+",*/*"),pe.setRequestHeader)for(var qr in we)pe.setRequestHeader(qr,we[qr]);return _t!=null&&pe.overrideMimeType&&pe.overrideMimeType(_t),De!=null&&(pe.responseType=De),Sr!=null&&Bt.on("error",Sr).on("load",function(cn){Sr(null,cn)}),Jt.beforesend.call(Bt,pe),pe.send(rr==null?null:rr),Bt},Bt.abort=function(){return pe.abort(),Bt},f.rebind(Bt,Jt,"on"),Ut==null?Bt:Bt.get(or(Ut))}function or(ft){return ft.length===1?function(_t,Lt){ft(_t==null?Lt:null)}:ft}function Dr(ft){var _t=ft.responseType;return _t&&_t!=="text"?ft.response:ft.responseText}f.dsv=function(ft,_t){var Lt=new RegExp('["'+ft+`
]`),Ut=ft.charCodeAt(0);function Bt(je,tr,rr){arguments.length<3&&(rr=tr,tr=null);var Sr=$e(je,_t,tr==null?Jt:we(tr),rr);return Sr.row=function(qr){return arguments.length?Sr.response((tr=qr)==null?Jt:we(qr)):tr},Sr}function Jt(je){return Bt.parse(je.responseText)}function we(je){return function(tr){return Bt.parse(tr.responseText,je)}}Bt.parse=function(je,tr){var rr;return Bt.parseRows(je,function(Sr,qr){if(rr)return rr(Sr,qr-1);var cn=function(Pr){for(var Ur={},Zr=Sr.length,on=0;on<Zr;++on)Ur[Sr[on]]=Pr[on];return Ur};rr=tr?function(Pr,Ur){return tr(cn(Pr),Ur)}:cn})},Bt.parseRows=function(je,tr){var rr={},Sr={},qr=[],cn=je.length,Pr=0,Ur=0,Zr,on;function ln(){if(Pr>=cn)return Sr;if(on)return on=!1,rr;var Vn=Pr;if(je.charCodeAt(Vn)===34){for(var ii=Vn;ii++<cn;)if(je.charCodeAt(ii)===34){if(je.charCodeAt(ii+1)!==34)break;++ii}Pr=ii+2;var ki=je.charCodeAt(ii+1);return ki===13?(on=!0,je.charCodeAt(ii+2)===10&&++Pr):ki===10&&(on=!0),je.slice(Vn+1,ii).replace(/""/g,'"')}for(;Pr<cn;){var ki=je.charCodeAt(Pr++),si=1;if(ki===10)on=!0;else if(ki===13)on=!0,je.charCodeAt(Pr)===10&&(++Pr,++si);else if(ki!==Ut)continue;return je.slice(Vn,Pr-si)}return je.slice(Vn)}for(;(Zr=ln())!==Sr;){for(var Kr=[];Zr!==rr&&Zr!==Sr;)Kr.push(Zr),Zr=ln();tr&&(Kr=tr(Kr,Ur++))==null||qr.push(Kr)}return qr},Bt.format=function(je){if(Array.isArray(je[0]))return Bt.formatRows(je);var tr=new z,rr=[];return je.forEach(function(Sr){for(var qr in Sr)tr.has(qr)||rr.push(tr.add(qr))}),[rr.map(De).join(ft)].concat(je.map(function(Sr){return rr.map(function(qr){return De(Sr[qr])}).join(ft)})).join(`
`)},Bt.formatRows=function(je){return je.map(pe).join(`
`)};function pe(je){return je.map(De).join(ft)}function De(je){return Lt.test(je)?'"'+je.replace(/\"/g,'""')+'"':je}return Bt},f.csv=f.dsv(",","text/csv"),f.tsv=f.dsv("	","text/tab-separated-values");var Nr,Fr,Ar,Xr,Tn=this[U(this,"requestAnimationFrame")]||function(ft){setTimeout(ft,17)};f.timer=function(){un.apply(this,arguments)};function un(ft,_t,Lt){var Ut=arguments.length;Ut<2&&(_t=0),Ut<3&&(Lt=Date.now());var Bt=Lt+_t,Jt={c:ft,t:Bt,n:null};return Fr?Fr.n=Jt:Nr=Jt,Fr=Jt,Ar||(Xr=clearTimeout(Xr),Ar=1,Tn(Un)),Jt}function Un(){var ft=Dn(),_t=Xn()-ft;_t>24?(isFinite(_t)&&(clearTimeout(Xr),Xr=setTimeout(Un,_t)),Ar=0):(Ar=1,Tn(Un))}f.timer.flush=function(){Dn(),Xn()};function Dn(){for(var ft=Date.now(),_t=Nr;_t;)ft>=_t.t&&_t.c(ft-_t.t)&&(_t.c=null),_t=_t.n;return ft}function Xn(){for(var ft,_t=Nr,Lt=1/0;_t;)_t.c?(_t.t<Lt&&(Lt=_t.t),_t=(ft=_t).n):_t=ft?ft.n=_t.n:Nr=_t.n;return Fr=ft,Lt}f.round=function(ft,_t){return _t?Math.round(ft*(_t=Math.pow(10,_t)))/_t:Math.round(ft)},f.geom={};function Gn(ft){return ft[0]}function yi(ft){return ft[1]}f.geom.hull=function(ft){var _t=Gn,Lt=yi;if(arguments.length)return Ut(ft);function Ut(Bt){if(Bt.length<3)return[];var Jt=ae(_t),we=ae(Lt),pe,De=Bt.length,je=[],tr=[];for(pe=0;pe<De;pe++)je.push([+Jt.call(this,Bt[pe],pe),+we.call(this,Bt[pe],pe),pe]);for(je.sort(pa),pe=0;pe<De;pe++)tr.push([je[pe][0],-je[pe][1]]);var rr=Pi(je),Sr=Pi(tr),qr=Sr[0]===rr[0],cn=Sr[Sr.length-1]===rr[rr.length-1],Pr=[];for(pe=rr.length-1;pe>=0;--pe)Pr.push(Bt[je[rr[pe]][2]]);for(pe=+qr;pe<Sr.length-cn;++pe)Pr.push(Bt[je[Sr[pe]][2]]);return Pr}return Ut.x=function(Bt){return arguments.length?(_t=Bt,Ut):_t},Ut.y=function(Bt){return arguments.length?(Lt=Bt,Ut):Lt},Ut};function Pi(ft){for(var _t=ft.length,Lt=[0,1],Ut=2,Bt=2;Bt<_t;Bt++){for(;Ut>1&&Ne(ft[Lt[Ut-2]],ft[Lt[Ut-1]],ft[Bt])<=0;)--Ut;Lt[Ut++]=Bt}return Lt.slice(0,Ut)}function pa(ft,_t){return ft[0]-_t[0]||ft[1]-_t[1]}f.geom.polygon=function(ft){return at(ft,Wi),ft};var Wi=f.geom.polygon.prototype=[];Wi.area=function(){for(var ft=-1,_t=this.length,Lt,Ut=this[_t-1],Bt=0;++ft<_t;)Lt=Ut,Ut=this[ft],Bt+=Lt[1]*Ut[0]-Lt[0]*Ut[1];return Bt*.5},Wi.centroid=function(ft){var _t=-1,Lt=this.length,Ut=0,Bt=0,Jt,we=this[Lt-1],pe;for(arguments.length||(ft=-1/(6*this.area()));++_t<Lt;)Jt=we,we=this[_t],pe=Jt[0]*we[1]-we[0]*Jt[1],Ut+=(Jt[0]+we[0])*pe,Bt+=(Jt[1]+we[1])*pe;return[Ut*ft,Bt*ft]},Wi.clip=function(ft){for(var _t,Lt=Tr(ft),Ut=-1,Bt=this.length-Tr(this),Jt,we,pe=this[Bt-1],De,je,tr;++Ut<Bt;){for(_t=ft.slice(),ft.length=0,De=this[Ut],je=_t[(we=_t.length-Lt)-1],Jt=-1;++Jt<we;)tr=_t[Jt],Ji(tr,pe,De)?(Ji(je,pe,De)||ft.push(ji(je,tr,pe,De)),ft.push(tr)):Ji(je,pe,De)&&ft.push(ji(je,tr,pe,De)),je=tr;Lt&&ft.push(ft[0]),pe=De}return ft};function Ji(ft,_t,Lt){return(Lt[0]-_t[0])*(ft[1]-_t[1])<(Lt[1]-_t[1])*(ft[0]-_t[0])}function ji(ft,_t,Lt,Ut){var Bt=ft[0],Jt=Lt[0],we=_t[0]-Bt,pe=Ut[0]-Jt,De=ft[1],je=Lt[1],tr=_t[1]-De,rr=Ut[1]-je,Sr=(pe*(De-je)-rr*(Bt-Jt))/(rr*we-pe*tr);return[Bt+Sr*we,De+Sr*tr]}function Tr(ft){var _t=ft[0],Lt=ft[ft.length-1];return!(_t[0]-Lt[0]||_t[1]-Lt[1])}var gn,hn,Sn,Zn=[],fi,ri,Rn=[];function jn(){ci(this),this.edge=this.site=this.circle=null}function Gi(ft){var _t=Zn.pop()||new jn;return _t.site=ft,_t}function fa(ft){br(ft),Sn.remove(ft),Zn.push(ft),ci(ft)}function Ue(ft){var _t=ft.circle,Lt=_t.x,Ut=_t.cy,Bt={x:Lt,y:Ut},Jt=ft.P,we=ft.N,pe=[ft];fa(ft);for(var De=Jt;De.circle&&u(Lt-De.circle.x)<ee&&u(Ut-De.circle.cy)<ee;)Jt=De.P,pe.unshift(De),fa(De),De=Jt;pe.unshift(De),br(De);for(var je=we;je.circle&&u(Lt-je.circle.x)<ee&&u(Ut-je.circle.cy)<ee;)we=je.N,pe.push(je),fa(je),je=we;pe.push(je),br(je);var tr=pe.length,rr;for(rr=1;rr<tr;++rr)je=pe[rr],De=pe[rr-1],oi(je.edge,De.site,je.site,Bt);De=pe[0],je=pe[tr-1],je.edge=kn(De.site,je.site,null,Bt),yr(De),yr(je)}function pr(ft){for(var _t=ft.x,Lt=ft.y,Ut,Bt,Jt,we,pe=Sn._;pe;)if(Jt=an(pe,Lt)-_t,Jt>ee)pe=pe.L;else if(we=_t-vn(pe,Lt),we>ee){if(!pe.R){Ut=pe;break}pe=pe.R}else{Jt>-ee?(Ut=pe.P,Bt=pe):we>-ee?(Ut=pe,Bt=pe.N):Ut=Bt=pe;break}var De=Gi(ft);if(Sn.insert(Ut,De),!(!Ut&&!Bt)){if(Ut===Bt){br(Ut),Bt=Gi(Ut.site),Sn.insert(De,Bt),De.edge=Bt.edge=kn(Ut.site,De.site),yr(Ut),yr(Bt);return}if(!Bt){De.edge=kn(Ut.site,De.site);return}br(Ut),br(Bt);var je=Ut.site,tr=je.x,rr=je.y,Sr=ft.x-tr,qr=ft.y-rr,cn=Bt.site,Pr=cn.x-tr,Ur=cn.y-rr,Zr=2*(Sr*Ur-qr*Pr),on=Sr*Sr+qr*qr,ln=Pr*Pr+Ur*Ur,Kr={x:(Ur*on-qr*ln)/Zr+tr,y:(Sr*ln-Pr*on)/Zr+rr};oi(Bt.edge,je,cn,Kr),De.edge=kn(je,ft,null,Kr),Bt.edge=kn(ft,cn,null,Kr),yr(Ut),yr(Bt)}}function an(ft,_t){var Lt=ft.site,Ut=Lt.x,Bt=Lt.y,Jt=Bt-_t;if(!Jt)return Ut;var we=ft.P;if(!we)return-1/0;Lt=we.site;var pe=Lt.x,De=Lt.y,je=De-_t;if(!je)return pe;var tr=pe-Ut,rr=1/Jt-1/je,Sr=tr/je;return rr?(-Sr+Math.sqrt(Sr*Sr-2*rr*(tr*tr/(-2*je)-De+je/2+Bt-Jt/2)))/rr+Ut:(Ut+pe)/2}function vn(ft,_t){var Lt=ft.N;if(Lt)return an(Lt,_t);var Ut=ft.site;return Ut.y===_t?Ut.x:1/0}function rn(ft){this.site=ft,this.edges=[]}rn.prototype.prepare=function(){for(var ft=this.edges,_t=ft.length,Lt;_t--;)Lt=ft[_t].edge,(!Lt.b||!Lt.a)&&ft.splice(_t,1);return ft.sort(wn),ft.length};function An(ft){for(var _t=ft[0][0],Lt=ft[1][0],Ut=ft[0][1],Bt=ft[1][1],Jt,we,pe,De,je=hn,tr=je.length,rr,Sr,qr,cn,Pr,Ur;tr--;)if(rr=je[tr],!(!rr||!rr.prepare()))for(qr=rr.edges,cn=qr.length,Sr=0;Sr<cn;)Ur=qr[Sr].end(),pe=Ur.x,De=Ur.y,Pr=qr[++Sr%cn].start(),Jt=Pr.x,we=Pr.y,(u(pe-Jt)>ee||u(De-we)>ee)&&(qr.splice(Sr,0,new gi(Kn(rr.site,Ur,u(pe-_t)<ee&&Bt-De>ee?{x:_t,y:u(Jt-_t)<ee?we:Bt}:u(De-Bt)<ee&&Lt-pe>ee?{x:u(we-Bt)<ee?Jt:Lt,y:Bt}:u(pe-Lt)<ee&&De-Ut>ee?{x:Lt,y:u(Jt-Lt)<ee?we:Ut}:u(De-Ut)<ee&&pe-_t>ee?{x:u(we-Ut)<ee?Jt:_t,y:Ut}:null),rr.site,null)),++cn)}function wn(ft,_t){return _t.angle-ft.angle}function fn(){ci(this),this.x=this.y=this.arc=this.site=this.cy=null}function yr(ft){var _t=ft.P,Lt=ft.N;if(!(!_t||!Lt)){var Ut=_t.site,Bt=ft.site,Jt=Lt.site;if(Ut!==Jt){var we=Bt.x,pe=Bt.y,De=Ut.x-we,je=Ut.y-pe,tr=Jt.x-we,Ur=Jt.y-pe,rr=2*(De*Ur-je*tr);if(!(rr>=-Xt)){var Sr=De*De+je*je,qr=tr*tr+Ur*Ur,cn=(Ur*Sr-je*qr)/rr,Pr=(De*qr-tr*Sr)/rr,Ur=Pr+pe,Zr=Rn.pop()||new fn;Zr.arc=ft,Zr.site=Bt,Zr.x=cn+we,Zr.y=Ur+Math.sqrt(cn*cn+Pr*Pr),Zr.cy=Ur,ft.circle=Zr;for(var on=null,ln=ri._;ln;)if(Zr.y<ln.y||Zr.y===ln.y&&Zr.x<=ln.x)if(ln.L)ln=ln.L;else{on=ln.P;break}else if(ln.R)ln=ln.R;else{on=ln;break}ri.insert(on,Zr),on||(fi=Zr)}}}}function br(ft){var _t=ft.circle;_t&&(_t.P||(fi=_t.N),ri.remove(_t),Rn.push(_t),ci(_t),ft.circle=null)}function Or(ft,_t,Lt,Ut){return function(Bt){var Jt=Bt.a,we=Bt.b,pe=Jt.x,De=Jt.y,je=we.x,tr=we.y,rr=0,Sr=1,qr=je-pe,cn=tr-De,Pr;if(Pr=ft-pe,!(!qr&&Pr>0)){if(Pr/=qr,qr<0){if(Pr<rr)return;Pr<Sr&&(Sr=Pr)}else if(qr>0){if(Pr>Sr)return;Pr>rr&&(rr=Pr)}if(Pr=Lt-pe,!(!qr&&Pr<0)){if(Pr/=qr,qr<0){if(Pr>Sr)return;Pr>rr&&(rr=Pr)}else if(qr>0){if(Pr<rr)return;Pr<Sr&&(Sr=Pr)}if(Pr=_t-De,!(!cn&&Pr>0)){if(Pr/=cn,cn<0){if(Pr<rr)return;Pr<Sr&&(Sr=Pr)}else if(cn>0){if(Pr>Sr)return;Pr>rr&&(rr=Pr)}if(Pr=Ut-De,!(!cn&&Pr<0)){if(Pr/=cn,cn<0){if(Pr>Sr)return;Pr>rr&&(rr=Pr)}else if(cn>0){if(Pr<rr)return;Pr<Sr&&(Sr=Pr)}return rr>0&&(Bt.a={x:pe+rr*qr,y:De+rr*cn}),Sr<1&&(Bt.b={x:pe+Sr*qr,y:De+Sr*cn}),Bt}}}}}}function yn(ft){for(var _t=gn,Lt=Or(ft[0][0],ft[0][1],ft[1][0],ft[1][1]),Ut=_t.length,Bt;Ut--;)Bt=_t[Ut],(!Nn(Bt,ft)||!Lt(Bt)||u(Bt.a.x-Bt.b.x)<ee&&u(Bt.a.y-Bt.b.y)<ee)&&(Bt.a=Bt.b=null,_t.splice(Ut,1))}function Nn(ft,_t){var Lt=ft.b;if(Lt)return!0;var Ut=ft.a,Bt=_t[0][0],Jt=_t[1][0],we=_t[0][1],pe=_t[1][1],De=ft.l,je=ft.r,tr=De.x,rr=De.y,Sr=je.x,qr=je.y,cn=(tr+Sr)/2,Pr=(rr+qr)/2,Ur,Zr;if(qr===rr){if(cn<Bt||cn>=Jt)return;if(tr>Sr){if(!Ut)Ut={x:cn,y:we};else if(Ut.y>=pe)return;Lt={x:cn,y:pe}}else{if(!Ut)Ut={x:cn,y:pe};else if(Ut.y<we)return;Lt={x:cn,y:we}}}else if(Ur=(tr-Sr)/(qr-rr),Zr=Pr-Ur*cn,Ur<-1||Ur>1)if(tr>Sr){if(!Ut)Ut={x:(we-Zr)/Ur,y:we};else if(Ut.y>=pe)return;Lt={x:(pe-Zr)/Ur,y:pe}}else{if(!Ut)Ut={x:(pe-Zr)/Ur,y:pe};else if(Ut.y<we)return;Lt={x:(we-Zr)/Ur,y:we}}else if(rr<qr){if(!Ut)Ut={x:Bt,y:Ur*Bt+Zr};else if(Ut.x>=Jt)return;Lt={x:Jt,y:Ur*Jt+Zr}}else{if(!Ut)Ut={x:Jt,y:Ur*Jt+Zr};else if(Ut.x<Bt)return;Lt={x:Bt,y:Ur*Bt+Zr}}return ft.a=Ut,ft.b=Lt,!0}function ni(ft,_t){this.l=ft,this.r=_t,this.a=this.b=null}function kn(ft,_t,Lt,Ut){var Bt=new ni(ft,_t);return gn.push(Bt),Lt&&oi(Bt,ft,_t,Lt),Ut&&oi(Bt,_t,ft,Ut),hn[ft.i].edges.push(new gi(Bt,ft,_t)),hn[_t.i].edges.push(new gi(Bt,_t,ft)),Bt}function Kn(ft,_t,Lt){var Ut=new ni(ft,null);return Ut.a=_t,Ut.b=Lt,gn.push(Ut),Ut}function oi(ft,_t,Lt,Ut){!ft.a&&!ft.b?(ft.a=Ut,ft.l=_t,ft.r=Lt):ft.l===Lt?ft.b=Ut:ft.a=Ut}function gi(ft,_t,Lt){var Ut=ft.a,Bt=ft.b;this.edge=ft,this.site=_t,this.angle=Lt?Math.atan2(Lt.y-_t.y,Lt.x-_t.x):ft.l===_t?Math.atan2(Bt.x-Ut.x,Ut.y-Bt.y):Math.atan2(Ut.x-Bt.x,Bt.y-Ut.y)}gi.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};function xi(){this._=null}function ci(ft){ft.U=ft.C=ft.L=ft.R=ft.P=ft.N=null}xi.prototype={insert:function(ft,_t){var Lt,Ut,Bt;if(ft){if(_t.P=ft,_t.N=ft.N,ft.N&&(ft.N.P=_t),ft.N=_t,ft.R){for(ft=ft.R;ft.L;)ft=ft.L;ft.L=_t}else ft.R=_t;Lt=ft}else this._?(ft=$o(this._),_t.P=null,_t.N=ft,ft.P=ft.L=_t,Lt=ft):(_t.P=_t.N=null,this._=_t,Lt=null);for(_t.L=_t.R=null,_t.U=Lt,_t.C=!0,ft=_t;Lt&&Lt.C;)Ut=Lt.U,Lt===Ut.L?(Bt=Ut.R,Bt&&Bt.C?(Lt.C=Bt.C=!1,Ut.C=!0,ft=Ut):(ft===Lt.R&&(Si(this,Lt),ft=Lt,Lt=ft.U),Lt.C=!1,Ut.C=!0,ko(this,Ut))):(Bt=Ut.L,Bt&&Bt.C?(Lt.C=Bt.C=!1,Ut.C=!0,ft=Ut):(ft===Lt.L&&(ko(this,Lt),ft=Lt,Lt=ft.U),Lt.C=!1,Ut.C=!0,Si(this,Ut))),Lt=ft.U;this._.C=!1},remove:function(ft){ft.N&&(ft.N.P=ft.P),ft.P&&(ft.P.N=ft.N),ft.N=ft.P=null;var _t=ft.U,Lt,Ut=ft.L,Bt=ft.R,Jt,we;if(Ut?Bt?Jt=$o(Bt):Jt=Ut:Jt=Bt,_t?_t.L===ft?_t.L=Jt:_t.R=Jt:this._=Jt,Ut&&Bt?(we=Jt.C,Jt.C=ft.C,Jt.L=Ut,Ut.U=Jt,Jt!==Bt?(_t=Jt.U,Jt.U=ft.U,ft=Jt.R,_t.L=ft,Jt.R=Bt,Bt.U=Jt):(Jt.U=_t,_t=Jt,ft=Jt.R)):(we=ft.C,ft=Jt),ft&&(ft.U=_t),!we){if(ft&&ft.C){ft.C=!1;return}do{if(ft===this._)break;if(ft===_t.L){if(Lt=_t.R,Lt.C&&(Lt.C=!1,_t.C=!0,Si(this,_t),Lt=_t.R),Lt.L&&Lt.L.C||Lt.R&&Lt.R.C){(!Lt.R||!Lt.R.C)&&(Lt.L.C=!1,Lt.C=!0,ko(this,Lt),Lt=_t.R),Lt.C=_t.C,_t.C=Lt.R.C=!1,Si(this,_t),ft=this._;break}}else if(Lt=_t.L,Lt.C&&(Lt.C=!1,_t.C=!0,ko(this,_t),Lt=_t.L),Lt.L&&Lt.L.C||Lt.R&&Lt.R.C){(!Lt.L||!Lt.L.C)&&(Lt.R.C=!1,Lt.C=!0,Si(this,Lt),Lt=_t.L),Lt.C=_t.C,_t.C=Lt.L.C=!1,ko(this,_t),ft=this._;break}Lt.C=!0,ft=_t,_t=_t.U}while(!ft.C);ft&&(ft.C=!1)}}};function Si(ft,_t){var Lt=_t,Ut=_t.R,Bt=Lt.U;Bt?Bt.L===Lt?Bt.L=Ut:Bt.R=Ut:ft._=Ut,Ut.U=Bt,Lt.U=Ut,Lt.R=Ut.L,Lt.R&&(Lt.R.U=Lt),Ut.L=Lt}function ko(ft,_t){var Lt=_t,Ut=_t.L,Bt=Lt.U;Bt?Bt.L===Lt?Bt.L=Ut:Bt.R=Ut:ft._=Ut,Ut.U=Bt,Lt.U=Ut,Lt.L=Ut.R,Lt.L&&(Lt.L.U=Lt),Ut.R=Lt}function $o(ft){for(;ft.L;)ft=ft.L;return ft}function ss(ft,_t){var Lt=ft.sort(Al).pop(),Ut,Bt,Jt;for(gn=[],hn=new Array(ft.length),Sn=new xi,ri=new xi;;)if(Jt=fi,Lt&&(!Jt||Lt.y<Jt.y||Lt.y===Jt.y&&Lt.x<Jt.x))(Lt.x!==Ut||Lt.y!==Bt)&&(hn[Lt.i]=new rn(Lt),pr(Lt),Ut=Lt.x,Bt=Lt.y),Lt=ft.pop();else if(Jt)Ue(Jt.arc);else break;_t&&(yn(_t),An(_t));var we={cells:hn,edges:gn};return Sn=ri=gn=hn=null,we}function Al(ft,_t){return _t.y-ft.y||_t.x-ft.x}f.geom.voronoi=function(ft){var _t=Gn,Lt=yi,Ut=_t,Bt=Lt,Jt=Ul;if(ft)return we(ft);function we(De){var je=new Array(De.length),tr=Jt[0][0],rr=Jt[0][1],Sr=Jt[1][0],qr=Jt[1][1];return ss(pe(De),Jt).cells.forEach(function(cn,Pr){var Ur=cn.edges,Zr=cn.site,on=je[Pr]=Ur.length?Ur.map(function(ln){var Kr=ln.start();return[Kr.x,Kr.y]}):Zr.x>=tr&&Zr.x<=Sr&&Zr.y>=rr&&Zr.y<=qr?[[tr,qr],[Sr,qr],[Sr,rr],[tr,rr]]:[];on.point=De[Pr]}),je}function pe(De){return De.map(function(je,tr){return{x:Math.round(Ut(je,tr)/ee)*ee,y:Math.round(Bt(je,tr)/ee)*ee,i:tr}})}return we.links=function(De){return ss(pe(De)).edges.filter(function(je){return je.l&&je.r}).map(function(je){return{source:De[je.l.i],target:De[je.r.i]}})},we.triangles=function(De){var je=[];return ss(pe(De)).cells.forEach(function(tr,rr){for(var Sr=tr.site,qr=tr.edges.sort(wn),cn=-1,Pr=qr.length,Ur,Zr=qr[Pr-1].edge,on=Zr.l===Sr?Zr.r:Zr.l;++cn<Pr;)Ur=on,Zr=qr[cn].edge,on=Zr.l===Sr?Zr.r:Zr.l,rr<Ur.i&&rr<on.i&&bc(Sr,Ur,on)<0&&je.push([De[rr],De[Ur.i],De[on.i]])}),je},we.x=function(De){return arguments.length?(Ut=ae(_t=De),we):_t},we.y=function(De){return arguments.length?(Bt=ae(Lt=De),we):Lt},we.clipExtent=function(De){return arguments.length?(Jt=De==null?Ul:De,we):Jt===Ul?null:Jt},we.size=function(De){return arguments.length?we.clipExtent(De&&[[0,0],De]):Jt===Ul?null:Jt&&Jt[1]},we};var Ul=[[-1e6,-1e6],[1e6,1e6]];function bc(ft,_t,Lt){return(ft.x-Lt.x)*(_t.y-ft.y)-(ft.x-_t.x)*(Lt.y-ft.y)}f.geom.delaunay=function(ft){return f.geom.voronoi().triangles(ft)},f.geom.quadtree=function(ft,_t,Lt,Ut,Bt){var Jt=Gn,we=yi,pe;if(pe=arguments.length)return Jt=ga,we=sl,pe===3&&(Bt=Lt,Ut=_t,Lt=_t=0),De(ft);function De(je){var tr,rr=ae(Jt),Sr=ae(we),qr,cn,Pr,Ur,Zr,on,ln,Kr;if(_t!=null)Zr=_t,on=Lt,ln=Ut,Kr=Bt;else if(ln=Kr=-(Zr=on=1/0),qr=[],cn=[],Ur=je.length,pe)for(Pr=0;Pr<Ur;++Pr)tr=je[Pr],tr.x<Zr&&(Zr=tr.x),tr.y<on&&(on=tr.y),tr.x>ln&&(ln=tr.x),tr.y>Kr&&(Kr=tr.y),qr.push(tr.x),cn.push(tr.y);else for(Pr=0;Pr<Ur;++Pr){var Vn=+rr(tr=je[Pr],Pr),ii=+Sr(tr,Pr);Vn<Zr&&(Zr=Vn),ii<on&&(on=ii),Vn>ln&&(ln=Vn),ii>Kr&&(Kr=ii),qr.push(Vn),cn.push(ii)}var ki=ln-Zr,si=Kr-on;ki>si?Kr=on+ki:ln=Zr+si;function Ci(Ii,ea,xa,wo,Ua,hi,sa,Zi){if(!(isNaN(xa)||isNaN(wo)))if(Ii.leaf){var La=Ii.x,ua=Ii.y;if(La!=null)if(u(La-xa)+u(ua-wo)<.01)ui(Ii,ea,xa,wo,Ua,hi,sa,Zi);else{var go=Ii.point;Ii.x=Ii.y=Ii.point=null,ui(Ii,go,La,ua,Ua,hi,sa,Zi),ui(Ii,ea,xa,wo,Ua,hi,sa,Zi)}else Ii.x=xa,Ii.y=wo,Ii.point=ea}else ui(Ii,ea,xa,wo,Ua,hi,sa,Zi)}function ui(Ii,ea,xa,wo,Ua,hi,sa,Zi){var La=(Ua+sa)*.5,ua=(hi+Zi)*.5,go=xa>=La,oo=wo>=ua,So=oo<<1|go;Ii.leaf=!1,Ii=Ii.nodes[So]||(Ii.nodes[So]=Ks()),go?Ua=La:sa=La,oo?hi=ua:Zi=ua,Ci(Ii,ea,xa,wo,Ua,hi,sa,Zi)}var Vi=Ks();if(Vi.add=function(Ii){Ci(Vi,Ii,+rr(Ii,++Pr),+Sr(Ii,Pr),Zr,on,ln,Kr)},Vi.visit=function(Ii){Xa(Ii,Vi,Zr,on,ln,Kr)},Vi.find=function(Ii){return Ro(Vi,Ii[0],Ii[1],Zr,on,ln,Kr)},Pr=-1,_t==null){for(;++Pr<Ur;)Ci(Vi,je[Pr],qr[Pr],cn[Pr],Zr,on,ln,Kr);--Pr}else je.forEach(Vi.add);return qr=cn=je=tr=null,Vi}return De.x=function(je){return arguments.length?(Jt=je,De):Jt},De.y=function(je){return arguments.length?(we=je,De):we},De.extent=function(je){return arguments.length?(je==null?_t=Lt=Ut=Bt=null:(_t=+je[0][0],Lt=+je[0][1],Ut=+je[1][0],Bt=+je[1][1]),De):_t==null?null:[[_t,Lt],[Ut,Bt]]},De.size=function(je){return arguments.length?(je==null?_t=Lt=Ut=Bt=null:(_t=Lt=0,Ut=+je[0],Bt=+je[1]),De):_t==null?null:[Ut-_t,Bt-Lt]},De};function ga(ft){return ft.x}function sl(ft){return ft.y}function Ks(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function Xa(ft,_t,Lt,Ut,Bt,Jt){if(!ft(_t,Lt,Ut,Bt,Jt)){var we=(Lt+Bt)*.5,pe=(Ut+Jt)*.5,De=_t.nodes;De[0]&&Xa(ft,De[0],Lt,Ut,we,pe),De[1]&&Xa(ft,De[1],we,Ut,Bt,pe),De[2]&&Xa(ft,De[2],Lt,pe,we,Jt),De[3]&&Xa(ft,De[3],we,pe,Bt,Jt)}}function Ro(ft,_t,Lt,Ut,Bt,Jt,we){var pe=1/0,De;return function je(tr,rr,Sr,qr,cn){if(!(rr>Jt||Sr>we||qr<Ut||cn<Bt)){if(Pr=tr.point){var Pr,Ur=_t-tr.x,Zr=Lt-tr.y,on=Ur*Ur+Zr*Zr;if(on<pe){var ln=Math.sqrt(pe=on);Ut=_t-ln,Bt=Lt-ln,Jt=_t+ln,we=Lt+ln,De=Pr}}for(var Kr=tr.nodes,Vn=(rr+qr)*.5,ii=(Sr+cn)*.5,ki=_t>=Vn,si=Lt>=ii,Ci=si<<1|ki,ui=Ci+4;Ci<ui;++Ci)if(tr=Kr[Ci&3])switch(Ci&3){case 0:je(tr,rr,Sr,Vn,ii);break;case 1:je(tr,Vn,Sr,qr,ii);break;case 2:je(tr,rr,ii,Vn,cn);break;case 3:je(tr,Vn,ii,qr,cn);break}}}(ft,Ut,Bt,Jt,we),De}f.interpolateRgb=Hl;function Hl(ft,_t){ft=f.rgb(ft),_t=f.rgb(_t);var Lt=ft.r,Ut=ft.g,Bt=ft.b,Jt=_t.r-Lt,we=_t.g-Ut,pe=_t.b-Bt;return function(De){return"#"+Mr(Math.round(Lt+Jt*De))+Mr(Math.round(Ut+we*De))+Mr(Math.round(Bt+pe*De))}}f.interpolateObject=Cs;function Cs(ft,_t){var Lt={},Ut={},Bt;for(Bt in ft)Bt in _t?Lt[Bt]=po(ft[Bt],_t[Bt]):Ut[Bt]=ft[Bt];for(Bt in _t)Bt in ft||(Ut[Bt]=_t[Bt]);return function(Jt){for(Bt in Lt)Ut[Bt]=Lt[Bt](Jt);return Ut}}f.interpolateNumber=Ba;function Ba(ft,_t){return ft=+ft,_t=+_t,function(Lt){return ft*(1-Lt)+_t*Lt}}f.interpolateString=Sl;function Sl(ft,_t){var Lt=io.lastIndex=Va.lastIndex=0,Ut,Bt,Jt,we=-1,pe=[],De=[];for(ft=ft+"",_t=_t+"";(Ut=io.exec(ft))&&(Bt=Va.exec(_t));)(Jt=Bt.index)>Lt&&(Jt=_t.slice(Lt,Jt),pe[we]?pe[we]+=Jt:pe[++we]=Jt),(Ut=Ut[0])===(Bt=Bt[0])?pe[we]?pe[we]+=Bt:pe[++we]=Bt:(pe[++we]=null,De.push({i:we,x:Ba(Ut,Bt)})),Lt=Va.lastIndex;return Lt<_t.length&&(Jt=_t.slice(Lt),pe[we]?pe[we]+=Jt:pe[++we]=Jt),pe.length<2?De[0]?(_t=De[0].x,function(je){return _t(je)+""}):function(){return _t}:(_t=De.length,function(je){for(var tr=0,rr;tr<_t;++tr)pe[(rr=De[tr]).i]=rr.x(je);return pe.join("")})}var io=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Va=new RegExp(io.source,"g");f.interpolate=po;function po(ft,_t){for(var Lt=f.interpolators.length,Ut;--Lt>=0&&!(Ut=f.interpolators[Lt](ft,_t)););return Ut}f.interpolators=[function(ft,_t){var Lt=typeof _t;return(Lt==="string"?Cr.has(_t.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(_t)?Hl:Sl:_t instanceof Qe?Hl:Array.isArray(_t)?ao:Lt==="object"&&isNaN(_t)?Cs:Ba)(ft,_t)}],f.interpolateArray=ao;function ao(ft,_t){var Lt=[],Ut=[],Bt=ft.length,Jt=_t.length,we=Math.min(ft.length,_t.length),pe;for(pe=0;pe<we;++pe)Lt.push(po(ft[pe],_t[pe]));for(;pe<Bt;++pe)Ut[pe]=ft[pe];for(;pe<Jt;++pe)Ut[pe]=_t[pe];return function(De){for(pe=0;pe<we;++pe)Ut[pe]=Lt[pe](De);return Ut}}var vs=function(){return P},ll=f.map({linear:vs,poly:Os,quad:function(){return Fo},cubic:function(){return fu},sin:function(){return rc},exp:function(){return hu},circle:function(){return du},elastic:cl,back:nc,bounce:function(){return Bs}}),Fc=f.map({in:P,out:Oc,"in-out":Js,"out-in":function(ft){return Js(Oc(ft))}});f.ease=function(ft){var _t=ft.indexOf("-"),Lt=_t>=0?ft.slice(0,_t):ft,Ut=_t>=0?ft.slice(_t+1):"in";return Lt=ll.get(Lt)||vs,Ut=Fc.get(Ut)||P,ls(Ut(Lt.apply(null,l.call(arguments,1))))};function ls(ft){return function(_t){return _t<=0?0:_t>=1?1:ft(_t)}}function Oc(ft){return function(_t){return 1-ft(1-_t)}}function Js(ft){return function(_t){return .5*(_t<.5?ft(2*_t):2-ft(2-2*_t))}}function Fo(ft){return ft*ft}function fu(ft){return ft*ft*ft}function Qs(ft){if(ft<=0)return 0;if(ft>=1)return 1;var _t=ft*ft,Lt=_t*ft;return 4*(ft<.5?Lt:3*(ft-_t)+Lt-.75)}function Os(ft){return function(_t){return Math.pow(_t,ft)}}function rc(ft){return 1-Math.cos(ft*qt)}function hu(ft){return Math.pow(2,10*(ft-1))}function du(ft){return 1-Math.sqrt(1-ft*ft)}function cl(ft,_t){var Lt;return arguments.length<2&&(_t=.45),arguments.length?Lt=_t/Vt*Math.asin(1/ft):(ft=1,Lt=_t/4),function(Ut){return 1+ft*Math.pow(2,-10*Ut)*Math.sin((Ut-Lt)*Vt/_t)}}function nc(ft){return ft||(ft=1.70158),function(_t){return _t*_t*((ft+1)*_t-ft)}}function Bs(ft){return ft<1/2.75?7.5625*ft*ft:ft<2/2.75?7.5625*(ft-=1.5/2.75)*ft+.75:ft<2.5/2.75?7.5625*(ft-=2.25/2.75)*ft+.9375:7.5625*(ft-=2.625/2.75)*ft+.984375}f.interpolateHcl=xc;function xc(ft,_t){ft=f.hcl(ft),_t=f.hcl(_t);var Lt=ft.h,Ut=ft.c,Bt=ft.l,Jt=_t.h-Lt,we=_t.c-Ut,pe=_t.l-Bt;return isNaN(we)&&(we=0,Ut=isNaN(Ut)?_t.c:Ut),isNaN(Jt)?(Jt=0,Lt=isNaN(Lt)?_t.h:Lt):Jt>180?Jt-=360:Jt<-180&&(Jt+=360),function(De){return te(Lt+Jt*De,Ut+we*De,Bt+pe*De)+""}}f.interpolateHsl=Ml;function Ml(ft,_t){ft=f.hsl(ft),_t=f.hsl(_t);var Lt=ft.h,Ut=ft.s,Bt=ft.l,Jt=_t.h-Lt,we=_t.s-Ut,pe=_t.l-Bt;return isNaN(we)&&(we=0,Ut=isNaN(Ut)?_t.s:Ut),isNaN(Jt)?(Jt=0,Lt=isNaN(Lt)?_t.h:Lt):Jt>180?Jt-=360:Jt<-180&&(Jt+=360),function(De){return _r(Lt+Jt*De,Ut+we*De,Bt+pe*De)+""}}f.interpolateLab=wc;function wc(ft,_t){ft=f.lab(ft),_t=f.lab(_t);var Lt=ft.l,Ut=ft.a,Bt=ft.b,Jt=_t.l-Lt,we=_t.a-Ut,pe=_t.b-Bt;return function(De){return ce(Lt+Jt*De,Ut+we*De,Bt+pe*De)+""}}f.interpolateRound=Bc;function Bc(ft,_t){return _t-=ft,function(Lt){return Math.round(ft+_t*Lt)}}f.transform=function(ft){var _t=x.createElementNS(f.ns.prefix.svg,"g");return(f.transform=function(Lt){if(Lt!=null){_t.setAttribute("transform",Lt);var Ut=_t.transform.baseVal.consolidate()}return new ic(Ut?Ut.matrix:ac)})(ft)};function ic(ft){var _t=[ft.a,ft.b],Lt=[ft.c,ft.d],Ut=ul(_t),Bt=pu(_t,Lt),Jt=ul(_c(Lt,_t,-Bt))||0;_t[0]*Lt[1]<Lt[0]*_t[1]&&(_t[0]*=-1,_t[1]*=-1,Ut*=-1,Bt*=-1),this.rotate=(Ut?Math.atan2(_t[1],_t[0]):Math.atan2(-Lt[0],Lt[1]))*me,this.translate=[ft.e,ft.f],this.scale=[Ut,Jt],this.skew=Jt?Math.atan2(Bt,Jt)*me:0}ic.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};function pu(ft,_t){return ft[0]*_t[0]+ft[1]*_t[1]}function ul(ft){var _t=Math.sqrt(pu(ft,ft));return _t&&(ft[0]/=_t,ft[1]/=_t),_t}function _c(ft,_t,Lt){return ft[0]+=Lt*_t[0],ft[1]+=Lt*_t[1],ft}var ac={a:1,b:0,c:0,d:1,e:0,f:0};f.interpolateTransform=oc;function Es(ft){return ft.length?ft.pop()+",":""}function Vl(ft,_t,Lt,Ut){if(ft[0]!==_t[0]||ft[1]!==_t[1]){var Bt=Lt.push("translate(",null,",",null,")");Ut.push({i:Bt-4,x:Ba(ft[0],_t[0])},{i:Bt-2,x:Ba(ft[1],_t[1])})}else(_t[0]||_t[1])&&Lt.push("translate("+_t+")")}function kc(ft,_t,Lt,Ut){ft!==_t?(ft-_t>180?_t+=360:_t-ft>180&&(ft+=360),Ut.push({i:Lt.push(Es(Lt)+"rotate(",null,")")-2,x:Ba(ft,_t)})):_t&&Lt.push(Es(Lt)+"rotate("+_t+")")}function Nc(ft,_t,Lt,Ut){ft!==_t?Ut.push({i:Lt.push(Es(Lt)+"skewX(",null,")")-2,x:Ba(ft,_t)}):_t&&Lt.push(Es(Lt)+"skewX("+_t+")")}function Uc(ft,_t,Lt,Ut){if(ft[0]!==_t[0]||ft[1]!==_t[1]){var Bt=Lt.push(Es(Lt)+"scale(",null,",",null,")");Ut.push({i:Bt-4,x:Ba(ft[0],_t[0])},{i:Bt-2,x:Ba(ft[1],_t[1])})}else(_t[0]!==1||_t[1]!==1)&&Lt.push(Es(Lt)+"scale("+_t+")")}function oc(ft,_t){var Lt=[],Ut=[];return ft=f.transform(ft),_t=f.transform(_t),Vl(ft.translate,_t.translate,Lt,Ut),kc(ft.rotate,_t.rotate,Lt,Ut),Nc(ft.skew,_t.skew,Lt,Ut),Uc(ft.scale,_t.scale,Lt,Ut),ft=_t=null,function(Bt){for(var Jt=-1,we=Ut.length,pe;++Jt<we;)Lt[(pe=Ut[Jt]).i]=pe.x(Bt);return Lt.join("")}}function vu(ft,_t){return _t=(_t-=ft=+ft)||1/_t,function(Lt){return(Lt-ft)/_t}}function Hc(ft,_t){return _t=(_t-=ft=+ft)||1/_t,function(Lt){return Math.max(0,Math.min(1,(Lt-ft)/_t))}}f.layout={},f.layout.bundle=function(){return function(ft){for(var _t=[],Lt=-1,Ut=ft.length;++Lt<Ut;)_t.push(cs(ft[Lt]));return _t}};function cs(ft){for(var _t=ft.source,Lt=ft.target,Ut=El(_t,Lt),Bt=[_t];_t!==Ut;)_t=_t.parent,Bt.push(_t);for(var Jt=Bt.length;Lt!==Ut;)Bt.splice(Jt,0,Lt),Lt=Lt.parent;return Bt}function Cl(ft){for(var _t=[],Lt=ft.parent;Lt!=null;)_t.push(ft),ft=Lt,Lt=Lt.parent;return _t.push(ft),_t}function El(ft,_t){if(ft===_t)return ft;for(var Lt=Cl(ft),Ut=Cl(_t),Bt=Lt.pop(),Jt=Ut.pop(),we=null;Bt===Jt;)we=Bt,Bt=Lt.pop(),Jt=Ut.pop();return we}f.layout.chord=function(){var ft={},_t,Lt,Ut,Bt,Jt=0,we,pe,De;function je(){var rr={},Sr=[],qr=f.range(Bt),cn=[],Pr,Ur,Zr,on,ln;for(_t=[],Lt=[],Pr=0,on=-1;++on<Bt;){for(Ur=0,ln=-1;++ln<Bt;)Ur+=Ut[on][ln];Sr.push(Ur),cn.push(f.range(Bt)),Pr+=Ur}for(we&&qr.sort(function(Vi,Ii){return we(Sr[Vi],Sr[Ii])}),pe&&cn.forEach(function(Vi,Ii){Vi.sort(function(ea,xa){return pe(Ut[Ii][ea],Ut[Ii][xa])})}),Pr=(Vt-Jt*Bt)/Pr,Ur=0,on=-1;++on<Bt;){for(Zr=Ur,ln=-1;++ln<Bt;){var Kr=qr[on],Vn=cn[Kr][ln],ii=Ut[Kr][Vn],ki=Ur,si=Ur+=ii*Pr;rr[Kr+"-"+Vn]={index:Kr,subindex:Vn,startAngle:ki,endAngle:si,value:ii}}Lt[Kr]={index:Kr,startAngle:Zr,endAngle:Ur,value:Sr[Kr]},Ur+=Jt}for(on=-1;++on<Bt;)for(ln=on-1;++ln<Bt;){var Ci=rr[on+"-"+ln],ui=rr[ln+"-"+on];(Ci.value||ui.value)&&_t.push(Ci.value<ui.value?{source:ui,target:Ci}:{source:Ci,target:ui})}De&&tr()}function tr(){_t.sort(function(rr,Sr){return De((rr.source.value+rr.target.value)/2,(Sr.source.value+Sr.target.value)/2)})}return ft.matrix=function(rr){return arguments.length?(Bt=(Ut=rr)&&Ut.length,_t=Lt=null,ft):Ut},ft.padding=function(rr){return arguments.length?(Jt=rr,_t=Lt=null,ft):Jt},ft.sortGroups=function(rr){return arguments.length?(we=rr,_t=Lt=null,ft):we},ft.sortSubgroups=function(rr){return arguments.length?(pe=rr,_t=null,ft):pe},ft.sortChords=function(rr){return arguments.length?(De=rr,_t&&tr(),ft):De},ft.chords=function(){return _t||je(),_t},ft.groups=function(){return Lt||je(),Lt},ft},f.layout.force=function(){var ft={},_t=f.dispatch("start","tick","end"),Lt,Ut=[1,1],Bt,Jt,we=.9,pe=Us,De=mo,je=-30,tr=Gl,rr=.1,Sr=.64,qr=[],cn=[],Pr,Ur,Zr;function on(Kr){return function(Vn,ii,ki,si){if(Vn.point!==Kr){var Ci=Vn.cx-Kr.x,ui=Vn.cy-Kr.y,Vi=si-ii,Ii=Ci*Ci+ui*ui;if(Vi*Vi/Sr<Ii){if(Ii<tr){var ea=Vn.charge/Ii;Kr.px-=Ci*ea,Kr.py-=ui*ea}return!0}if(Vn.point&&Ii&&Ii<tr){var ea=Vn.pointCharge/Ii;Kr.px-=Ci*ea,Kr.py-=ui*ea}}return!Vn.charge}}ft.tick=function(){if((Jt*=.99)<.005)return Lt=null,_t.end({type:"end",alpha:Jt=0}),!0;var Kr=qr.length,Vn=cn.length,ii,ki,si,Ci,ui,Vi,Ii,ea,xa;for(ki=0;ki<Vn;++ki)si=cn[ki],Ci=si.source,ui=si.target,ea=ui.x-Ci.x,xa=ui.y-Ci.y,(Vi=ea*ea+xa*xa)&&(Vi=Jt*Ur[ki]*((Vi=Math.sqrt(Vi))-Pr[ki])/Vi,ea*=Vi,xa*=Vi,ui.x-=ea*(Ii=Ci.weight+ui.weight?Ci.weight/(Ci.weight+ui.weight):.5),ui.y-=xa*Ii,Ci.x+=ea*(Ii=1-Ii),Ci.y+=xa*Ii);if((Ii=Jt*rr)&&(ea=Ut[0]/2,xa=Ut[1]/2,ki=-1,Ii))for(;++ki<Kr;)si=qr[ki],si.x+=(ea-si.x)*Ii,si.y+=(xa-si.y)*Ii;if(je)for(Ns(ii=f.geom.quadtree(qr),Jt,Zr),ki=-1;++ki<Kr;)(si=qr[ki]).fixed||ii.visit(on(si));for(ki=-1;++ki<Kr;)si=qr[ki],si.fixed?(si.x=si.px,si.y=si.py):(si.x-=(si.px-(si.px=si.x))*we,si.y-=(si.py-(si.py=si.y))*we);_t.tick({type:"tick",alpha:Jt})},ft.nodes=function(Kr){return arguments.length?(qr=Kr,ft):qr},ft.links=function(Kr){return arguments.length?(cn=Kr,ft):cn},ft.size=function(Kr){return arguments.length?(Ut=Kr,ft):Ut},ft.linkDistance=function(Kr){return arguments.length?(pe=typeof Kr=="function"?Kr:+Kr,ft):pe},ft.distance=ft.linkDistance,ft.linkStrength=function(Kr){return arguments.length?(De=typeof Kr=="function"?Kr:+Kr,ft):De},ft.friction=function(Kr){return arguments.length?(we=+Kr,ft):we},ft.charge=function(Kr){return arguments.length?(je=typeof Kr=="function"?Kr:+Kr,ft):je},ft.chargeDistance=function(Kr){return arguments.length?(tr=Kr*Kr,ft):Math.sqrt(tr)},ft.gravity=function(Kr){return arguments.length?(rr=+Kr,ft):rr},ft.theta=function(Kr){return arguments.length?(Sr=Kr*Kr,ft):Math.sqrt(Sr)},ft.alpha=function(Kr){return arguments.length?(Kr=+Kr,Jt?Kr>0?Jt=Kr:(Lt.c=null,Lt.t=NaN,Lt=null,_t.end({type:"end",alpha:Jt=0})):Kr>0&&(_t.start({type:"start",alpha:Jt=Kr}),Lt=un(ft.tick)),ft):Jt},ft.start=function(){var Kr,Vn=qr.length,ii=cn.length,ki=Ut[0],si=Ut[1],Ci,ui;for(Kr=0;Kr<Vn;++Kr)(ui=qr[Kr]).index=Kr,ui.weight=0;for(Kr=0;Kr<ii;++Kr)ui=cn[Kr],typeof ui.source=="number"&&(ui.source=qr[ui.source]),typeof ui.target=="number"&&(ui.target=qr[ui.target]),++ui.source.weight,++ui.target.weight;for(Kr=0;Kr<Vn;++Kr)ui=qr[Kr],isNaN(ui.x)&&(ui.x=Vi("x",ki)),isNaN(ui.y)&&(ui.y=Vi("y",si)),isNaN(ui.px)&&(ui.px=ui.x),isNaN(ui.py)&&(ui.py=ui.y);if(Pr=[],typeof pe=="function")for(Kr=0;Kr<ii;++Kr)Pr[Kr]=+pe.call(this,cn[Kr],Kr);else for(Kr=0;Kr<ii;++Kr)Pr[Kr]=pe;if(Ur=[],typeof De=="function")for(Kr=0;Kr<ii;++Kr)Ur[Kr]=+De.call(this,cn[Kr],Kr);else for(Kr=0;Kr<ii;++Kr)Ur[Kr]=De;if(Zr=[],typeof je=="function")for(Kr=0;Kr<Vn;++Kr)Zr[Kr]=+je.call(this,qr[Kr],Kr);else for(Kr=0;Kr<Vn;++Kr)Zr[Kr]=je;function Vi(Ii,ea){if(!Ci){for(Ci=new Array(Vn),Ua=0;Ua<Vn;++Ua)Ci[Ua]=[];for(Ua=0;Ua<ii;++Ua){var xa=cn[Ua];Ci[xa.source.index].push(xa.target),Ci[xa.target.index].push(xa.source)}}for(var wo=Ci[Kr],Ua=-1,hi=wo.length,sa;++Ua<hi;)if(!isNaN(sa=wo[Ua][Ii]))return sa;return Math.random()*ea}return ft.resume()},ft.resume=function(){return ft.alpha(.1)},ft.stop=function(){return ft.alpha(0)},ft.drag=function(){if(Bt||(Bt=f.behavior.drag().origin(P).on("dragstart.force",Tc).on("drag.force",ln).on("dragend.force",Ls)),!arguments.length)return Bt;this.on("mouseover.force",Oo).on("mouseout.force",sc).call(Bt)};function ln(Kr){Kr.px=f.event.x,Kr.py=f.event.y,ft.resume()}return f.rebind(ft,_t,"on")};function Tc(ft){ft.fixed|=2}function Ls(ft){ft.fixed&=-7}function Oo(ft){ft.fixed|=4,ft.px=ft.x,ft.py=ft.y}function sc(ft){ft.fixed&=-5}function Ns(ft,_t,Lt){var Ut=0,Bt=0;if(ft.charge=0,!ft.leaf)for(var Jt=ft.nodes,we=Jt.length,pe=-1,De;++pe<we;)De=Jt[pe],De!=null&&(Ns(De,_t,Lt),ft.charge+=De.charge,Ut+=De.charge*De.cx,Bt+=De.charge*De.cy);if(ft.point){ft.leaf||(ft.point.x+=Math.random()-.5,ft.point.y+=Math.random()-.5);var je=_t*Lt[ft.point.index];ft.charge+=ft.pointCharge=je,Ut+=je*ft.point.x,Bt+=je*ft.point.y}ft.cx=Ut/ft.charge,ft.cy=Bt/ft.charge}var Us=20,mo=1,Gl=1/0;f.layout.hierarchy=function(){var ft=lc,_t=Wl,Lt=Ll;function Ut(Bt){var Jt=[Bt],we=[],pe;for(Bt.depth=0;(pe=Jt.pop())!=null;)if(we.push(pe),(je=_t.call(Ut,pe,pe.depth))&&(De=je.length)){for(var De,je,tr;--De>=0;)Jt.push(tr=je[De]),tr.parent=pe,tr.depth=pe.depth+1;Lt&&(pe.value=0),pe.children=je}else Lt&&(pe.value=+Lt.call(Ut,pe,pe.depth)||0),delete pe.children;return Ds(Bt,function(rr){var Sr,qr;ft&&(Sr=rr.children)&&Sr.sort(ft),Lt&&(qr=rr.parent)&&(qr.value+=rr.value)}),we}return Ut.sort=function(Bt){return arguments.length?(ft=Bt,Ut):ft},Ut.children=function(Bt){return arguments.length?(_t=Bt,Ut):_t},Ut.value=function(Bt){return arguments.length?(Lt=Bt,Ut):Lt},Ut.revalue=function(Bt){return Lt&&(fl(Bt,function(Jt){Jt.children&&(Jt.value=0)}),Ds(Bt,function(Jt){var we;Jt.children||(Jt.value=+Lt.call(Ut,Jt,Jt.depth)||0),(we=Jt.parent)&&(we.value+=Jt.value)})),Bt},Ut};function Yl(ft,_t){return f.rebind(ft,_t,"sort","children","value"),ft.nodes=ft,ft.links=$l,ft}function fl(ft,_t){for(var Lt=[ft];(ft=Lt.pop())!=null;)if(_t(ft),(Bt=ft.children)&&(Ut=Bt.length))for(var Ut,Bt;--Ut>=0;)Lt.push(Bt[Ut])}function Ds(ft,_t){for(var Lt=[ft],Ut=[];(ft=Lt.pop())!=null;)if(Ut.push(ft),(we=ft.children)&&(Jt=we.length))for(var Bt=-1,Jt,we;++Bt<Jt;)Lt.push(we[Bt]);for(;(ft=Ut.pop())!=null;)_t(ft)}function Wl(ft){return ft.children}function Ll(ft){return ft.value}function lc(ft,_t){return _t.value-ft.value}function $l(ft){return f.merge(ft.map(function(_t){return(_t.children||[]).map(function(Lt){return{source:_t,target:Lt}})}))}f.layout.partition=function(){var ft=f.layout.hierarchy(),_t=[1,1];function Lt(Jt,we,pe,De){var je=Jt.children;if(Jt.x=we,Jt.y=Jt.depth*De,Jt.dx=pe,Jt.dy=De,je&&(rr=je.length)){var tr=-1,rr,Sr,qr;for(pe=Jt.value?pe/Jt.value:0;++tr<rr;)Lt(Sr=je[tr],we,qr=Sr.value*pe,De),we+=qr}}function Ut(Jt){var we=Jt.children,pe=0;if(we&&(je=we.length))for(var De=-1,je;++De<je;)pe=Math.max(pe,Ut(we[De]));return 1+pe}function Bt(Jt,we){var pe=ft.call(this,Jt,we);return Lt(pe[0],0,_t[0],_t[1]/Ut(pe[0])),pe}return Bt.size=function(Jt){return arguments.length?(_t=Jt,Bt):_t},Yl(Bt,ft)},f.layout.pie=function(){var ft=Number,_t=hl,Lt=0,Ut=Vt,Bt=0;function Jt(we){var pe=we.length,De=we.map(function(on,ln){return+ft.call(Jt,on,ln)}),je=+(typeof Lt=="function"?Lt.apply(this,arguments):Lt),tr=(typeof Ut=="function"?Ut.apply(this,arguments):Ut)-je,rr=Math.min(Math.abs(tr)/pe,+(typeof Bt=="function"?Bt.apply(this,arguments):Bt)),Sr=rr*(tr<0?-1:1),qr=f.sum(De),cn=qr?(tr-pe*Sr)/qr:0,Pr=f.range(pe),Ur=[],Zr;return _t!=null&&Pr.sort(_t===hl?function(on,ln){return De[ln]-De[on]}:function(on,ln){return _t(we[on],we[ln])}),Pr.forEach(function(on){Ur[on]={data:we[on],value:Zr=De[on],startAngle:je,endAngle:je+=Zr*cn+Sr,padAngle:rr}}),Ur}return Jt.value=function(we){return arguments.length?(ft=we,Jt):ft},Jt.sort=function(we){return arguments.length?(_t=we,Jt):_t},Jt.startAngle=function(we){return arguments.length?(Lt=we,Jt):Lt},Jt.endAngle=function(we){return arguments.length?(Ut=we,Jt):Ut},Jt.padAngle=function(we){return arguments.length?(Bt=we,Jt):Bt},Jt};var hl={};f.layout.stack=function(){var ft=P,_t=Xl,Lt=dl,Ut=Bu,Bt=gu,Jt=gs;function we(pe,De){if(!(cn=pe.length))return pe;var je=pe.map(function(on,ln){return ft.call(we,on,ln)}),tr=je.map(function(on){return on.map(function(ln,Kr){return[Bt.call(we,ln,Kr),Jt.call(we,ln,Kr)]})}),rr=_t.call(we,tr,De);je=f.permute(je,rr),tr=f.permute(tr,rr);var Sr=Lt.call(we,tr,De),qr=je[0].length,cn,Pr,Ur,Zr;for(Ur=0;Ur<qr;++Ur)for(Ut.call(we,je[0][Ur],Zr=Sr[Ur],tr[0][Ur][1]),Pr=1;Pr<cn;++Pr)Ut.call(we,je[Pr][Ur],Zr+=tr[Pr-1][Ur][1],tr[Pr][Ur][1]);return pe}return we.values=function(pe){return arguments.length?(ft=pe,we):ft},we.order=function(pe){return arguments.length?(_t=typeof pe=="function"?pe:Ac.get(pe)||Xl,we):_t},we.offset=function(pe){return arguments.length?(Lt=typeof pe=="function"?pe:Dl.get(pe)||dl,we):Lt},we.x=function(pe){return arguments.length?(Bt=pe,we):Bt},we.y=function(pe){return arguments.length?(Jt=pe,we):Jt},we.out=function(pe){return arguments.length?(Ut=pe,we):Ut},we};function gu(ft){return ft.x}function gs(ft){return ft.y}function Bu(ft,_t,Lt){ft.y0=_t,ft.y=Lt}var Ac=f.map({"inside-out":function(ft){var _t=ft.length,Lt,Ut,Bt=ft.map(jl),Jt=ft.map(Vc),we=f.range(_t).sort(function(rr,Sr){return Bt[rr]-Bt[Sr]}),pe=0,De=0,je=[],tr=[];for(Lt=0;Lt<_t;++Lt)Ut=we[Lt],pe<De?(pe+=Jt[Ut],je.push(Ut)):(De+=Jt[Ut],tr.push(Ut));return tr.reverse().concat(je)},reverse:function(ft){return f.range(ft.length).reverse()},default:Xl}),Dl=f.map({silhouette:function(ft){var _t=ft.length,Lt=ft[0].length,Ut=[],Bt=0,Jt,we,pe,De=[];for(we=0;we<Lt;++we){for(Jt=0,pe=0;Jt<_t;Jt++)pe+=ft[Jt][we][1];pe>Bt&&(Bt=pe),Ut.push(pe)}for(we=0;we<Lt;++we)De[we]=(Bt-Ut[we])/2;return De},wiggle:function(ft){var _t=ft.length,Lt=ft[0],Ut=Lt.length,Bt,Jt,we,pe,De,je,tr,rr,Sr,qr=[];for(qr[0]=rr=Sr=0,Jt=1;Jt<Ut;++Jt){for(Bt=0,pe=0;Bt<_t;++Bt)pe+=ft[Bt][Jt][1];for(Bt=0,De=0,tr=Lt[Jt][0]-Lt[Jt-1][0];Bt<_t;++Bt){for(we=0,je=(ft[Bt][Jt][1]-ft[Bt][Jt-1][1])/(2*tr);we<Bt;++we)je+=(ft[we][Jt][1]-ft[we][Jt-1][1])/tr;De+=je*ft[Bt][Jt][1]}qr[Jt]=rr-=pe?De/pe*tr:0,rr<Sr&&(Sr=rr)}for(Jt=0;Jt<Ut;++Jt)qr[Jt]-=Sr;return qr},expand:function(ft){var _t=ft.length,Lt=ft[0].length,Ut=1/_t,Bt,Jt,we,pe=[];for(Jt=0;Jt<Lt;++Jt){for(Bt=0,we=0;Bt<_t;Bt++)we+=ft[Bt][Jt][1];if(we)for(Bt=0;Bt<_t;Bt++)ft[Bt][Jt][1]/=we;else for(Bt=0;Bt<_t;Bt++)ft[Bt][Jt][1]=Ut}for(Jt=0;Jt<Lt;++Jt)pe[Jt]=0;return pe},zero:dl});function Xl(ft){return f.range(ft.length)}function dl(ft){for(var _t=-1,Lt=ft[0].length,Ut=[];++_t<Lt;)Ut[_t]=0;return Ut}function jl(ft){for(var _t=1,Lt=0,Ut=ft[0][1],Bt,Jt=ft.length;_t<Jt;++_t)(Bt=ft[_t][1])>Ut&&(Lt=_t,Ut=Bt);return Lt}function Vc(ft){return ft.reduce(Gc,0)}function Gc(ft,_t){return ft+_t[1]}f.layout.histogram=function(){var ft=!0,_t=Number,Lt=Pl,Ut=Nu;function Bt(Jt,Sr){for(var pe=[],De=Jt.map(_t,this),je=Lt.call(this,De,Sr),tr=Ut.call(this,je,De,Sr),rr,Sr=-1,qr=De.length,cn=tr.length-1,Pr=ft?1:1/qr,Ur;++Sr<cn;)rr=pe[Sr]=[],rr.dx=tr[Sr+1]-(rr.x=tr[Sr]),rr.y=0;if(cn>0)for(Sr=-1;++Sr<qr;)Ur=De[Sr],Ur>=je[0]&&Ur<=je[1]&&(rr=pe[f.bisect(tr,Ur,1,cn)-1],rr.y+=Pr,rr.push(Jt[Sr]));return pe}return Bt.value=function(Jt){return arguments.length?(_t=Jt,Bt):_t},Bt.range=function(Jt){return arguments.length?(Lt=ae(Jt),Bt):Lt},Bt.bins=function(Jt){return arguments.length?(Ut=typeof Jt=="number"?function(we){return Na(we,Jt)}:ae(Jt),Bt):Ut},Bt.frequency=function(Jt){return arguments.length?(ft=!!Jt,Bt):ft},Bt};function Nu(ft,_t){return Na(ft,Math.ceil(Math.log(_t.length)/Math.LN2+1))}function Na(ft,_t){for(var Lt=-1,Ut=+ft[0],Bt=(ft[1]-Ut)/_t,Jt=[];++Lt<=_t;)Jt[Lt]=Bt*Lt+Ut;return Jt}function Pl(ft){return[f.min(ft),f.max(ft)]}f.layout.pack=function(){var ft=f.layout.hierarchy().sort(pl),_t=0,Lt=[1,1],Ut;function Bt(Jt,we){var pe=ft.call(this,Jt,we),De=pe[0],je=Lt[0],tr=Lt[1],rr=Ut==null?Math.sqrt:typeof Ut=="function"?Ut:function(){return Ut};if(De.x=De.y=0,Ds(De,function(qr){qr.r=+rr(qr.value)}),Ds(De,yo),_t){var Sr=_t*(Ut?1:Math.max(2*De.r/je,2*De.r/tr))/2;Ds(De,function(qr){qr.r+=Sr}),Ds(De,yo),Ds(De,function(qr){qr.r-=Sr})}return qs(De,je/2,tr/2,Ut?1:1/Math.max(2*De.r/je,2*De.r/tr)),pe}return Bt.size=function(Jt){return arguments.length?(Lt=Jt,Bt):Lt},Bt.radius=function(Jt){return arguments.length?(Ut=Jt==null||typeof Jt=="function"?Jt:+Jt,Bt):Ut},Bt.padding=function(Jt){return arguments.length?(_t=+Jt,Bt):_t},Yl(Bt,ft)};function pl(ft,_t){return ft.value-_t.value}function us(ft,_t){var Lt=ft._pack_next;ft._pack_next=_t,_t._pack_prev=ft,_t._pack_next=Lt,Lt._pack_prev=_t}function ms(ft,_t){ft._pack_next=_t,_t._pack_prev=ft}function Zl(ft,_t){var Lt=_t.x-ft.x,Ut=_t.y-ft.y,Bt=ft.r+_t.r;return .999*Bt*Bt>Lt*Lt+Ut*Ut}function yo(ft){if(!(_t=ft.children)||!(Sr=_t.length))return;var _t,Lt=1/0,Ut=-1/0,Bt=1/0,Jt=-1/0,we,pe,De,je,tr,rr,Sr;function qr(Kr){Lt=Math.min(Kr.x-Kr.r,Lt),Ut=Math.max(Kr.x+Kr.r,Ut),Bt=Math.min(Kr.y-Kr.r,Bt),Jt=Math.max(Kr.y+Kr.r,Jt)}if(_t.forEach(Yc),we=_t[0],we.x=-we.r,we.y=0,qr(we),Sr>1&&(pe=_t[1],pe.x=pe.r,pe.y=0,qr(pe),Sr>2))for(De=_t[2],tl(we,pe,De),qr(De),us(we,De),we._pack_prev=De,us(De,pe),pe=we._pack_next,je=3;je<Sr;je++){tl(we,pe,De=_t[je]);var cn=0,Pr=1,Ur=1;for(tr=pe._pack_next;tr!==pe;tr=tr._pack_next,Pr++)if(Zl(tr,De)){cn=1;break}if(cn==1)for(rr=we._pack_prev;rr!==tr._pack_prev&&!Zl(rr,De);rr=rr._pack_prev,Ur++);cn?(Pr<Ur||Pr==Ur&&pe.r<we.r?ms(we,pe=tr):ms(we=rr,pe),je--):(us(we,De),pe=De,qr(De))}var Zr=(Lt+Ut)/2,on=(Bt+Jt)/2,ln=0;for(je=0;je<Sr;je++)De=_t[je],De.x-=Zr,De.y-=on,ln=Math.max(ln,De.r+Math.sqrt(De.x*De.x+De.y*De.y));ft.r=ln,_t.forEach(ys)}function Yc(ft){ft._pack_next=ft._pack_prev=ft}function ys(ft){delete ft._pack_next,delete ft._pack_prev}function qs(ft,_t,Lt,Ut){var Bt=ft.children;if(ft.x=_t+=Ut*ft.x,ft.y=Lt+=Ut*ft.y,ft.r*=Ut,Bt)for(var Jt=-1,we=Bt.length;++Jt<we;)qs(Bt[Jt],_t,Lt,Ut)}function tl(ft,_t,Lt){var Ut=ft.r+Lt.r,Bt=_t.x-ft.x,Jt=_t.y-ft.y;if(Ut&&(Bt||Jt)){var we=_t.r+Lt.r,pe=Bt*Bt+Jt*Jt;we*=we,Ut*=Ut;var De=.5+(Ut-we)/(2*pe),je=Math.sqrt(Math.max(0,2*we*(Ut+pe)-(Ut-=pe)*Ut-we*we))/(2*pe);Lt.x=ft.x+De*Bt+je*Jt,Lt.y=ft.y+De*Jt-je*Bt}else Lt.x=ft.x+Ut,Lt.y=ft.y}f.layout.tree=function(){var ft=f.layout.hierarchy().sort(null).value(null),_t=Hs,Lt=[1,1],Ut=null;function Bt(tr,rr){var Sr=ft.call(this,tr,rr),qr=Sr[0],cn=Jt(qr);if(Ds(cn,we),cn.parent.m=-cn.z,fl(cn,pe),Ut)fl(qr,je);else{var Pr=qr,Ur=qr,Zr=qr;fl(qr,function(Vn){Vn.x<Pr.x&&(Pr=Vn),Vn.x>Ur.x&&(Ur=Vn),Vn.depth>Zr.depth&&(Zr=Vn)});var on=_t(Pr,Ur)/2-Pr.x,ln=Lt[0]/(Ur.x+_t(Ur,Pr)/2+on),Kr=Lt[1]/(Zr.depth||1);fl(qr,function(Vn){Vn.x=(Vn.x+on)*ln,Vn.y=Vn.depth*Kr})}return Sr}function Jt(tr){for(var rr={A:null,children:[tr]},Sr=[rr],qr;(qr=Sr.pop())!=null;)for(var cn=qr.children,Pr,Ur=0,Zr=cn.length;Ur<Zr;++Ur)Sr.push((cn[Ur]=Pr={_:cn[Ur],parent:qr,children:(Pr=cn[Ur].children)&&Pr.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:Ur}).a=Pr);return rr.children[0]}function we(tr){var rr=tr.children,Sr=tr.parent.children,qr=tr.i?Sr[tr.i-1]:null;if(rr.length){xs(tr);var cn=(rr[0].z+rr[rr.length-1].z)/2;qr?(tr.z=qr.z+_t(tr._,qr._),tr.m=tr.z-cn):tr.z=cn}else qr&&(tr.z=qr.z+_t(tr._,qr._));tr.parent.A=De(tr,qr,tr.parent.A||Sr[0])}function pe(tr){tr._.x=tr.z+tr.parent.m,tr.m+=tr.parent.m}function De(tr,rr,Sr){if(rr){for(var qr=tr,cn=tr,Pr=rr,Ur=qr.parent.children[0],Zr=qr.m,on=cn.m,ln=Pr.m,Kr=Ur.m,Vn;Pr=ja(Pr),qr=bs(qr),Pr&&qr;)Ur=bs(Ur),cn=ja(cn),cn.a=tr,Vn=Pr.z+ln-qr.z-Zr+_t(Pr._,qr._),Vn>0&&(Bo(Wc(Pr,tr,Sr),tr,Vn),Zr+=Vn,on+=Vn),ln+=Pr.m,Zr+=qr.m,Kr+=Ur.m,on+=cn.m;Pr&&!ja(cn)&&(cn.t=Pr,cn.m+=ln-on),qr&&!bs(Ur)&&(Ur.t=qr,Ur.m+=Zr-Kr,Sr=tr)}return Sr}function je(tr){tr.x*=Lt[0],tr.y=tr.depth*Lt[1]}return Bt.separation=function(tr){return arguments.length?(_t=tr,Bt):_t},Bt.size=function(tr){return arguments.length?(Ut=(Lt=tr)==null?je:null,Bt):Ut?null:Lt},Bt.nodeSize=function(tr){return arguments.length?(Ut=(Lt=tr)==null?null:je,Bt):Ut?Lt:null},Yl(Bt,ft)};function Hs(ft,_t){return ft.parent==_t.parent?1:2}function bs(ft){var _t=ft.children;return _t.length?_t[0]:ft.t}function ja(ft){var _t=ft.children,Lt;return(Lt=_t.length)?_t[Lt-1]:ft.t}function Bo(ft,_t,Lt){var Ut=Lt/(_t.i-ft.i);_t.c-=Ut,_t.s+=Lt,ft.c+=Ut,_t.z+=Lt,_t.m+=Lt}function xs(ft){for(var _t=0,Lt=0,Ut=ft.children,Bt=Ut.length,Jt;--Bt>=0;)Jt=Ut[Bt],Jt.z+=_t,Jt.m+=_t,_t+=Jt.s+(Lt+=Jt.c)}function Wc(ft,_t,Lt){return ft.a.parent===_t.parent?ft.a:Lt}f.layout.cluster=function(){var ft=f.layout.hierarchy().sort(null).value(null),_t=Hs,Lt=[1,1],Ut=!1;function Bt(Jt,we){var pe=ft.call(this,Jt,we),De=pe[0],je,tr=0;Ds(De,function(Pr){var Ur=Pr.children;Ur&&Ur.length?(Pr.x=$c(Ur),Pr.y=cc(Ur)):(Pr.x=je?tr+=_t(Pr,je):0,Pr.y=0,je=Pr)});var rr=be(De),Sr=Oe(De),qr=rr.x-_t(rr,Sr)/2,cn=Sr.x+_t(Sr,rr)/2;return Ds(De,Ut?function(Pr){Pr.x=(Pr.x-De.x)*Lt[0],Pr.y=(De.y-Pr.y)*Lt[1]}:function(Pr){Pr.x=(Pr.x-qr)/(cn-qr)*Lt[0],Pr.y=(1-(De.y?Pr.y/De.y:1))*Lt[1]}),pe}return Bt.separation=function(Jt){return arguments.length?(_t=Jt,Bt):_t},Bt.size=function(Jt){return arguments.length?(Ut=(Lt=Jt)==null,Bt):Ut?null:Lt},Bt.nodeSize=function(Jt){return arguments.length?(Ut=(Lt=Jt)!=null,Bt):Ut?Lt:null},Yl(Bt,ft)};function cc(ft){return 1+f.max(ft,function(_t){return _t.y})}function $c(ft){return ft.reduce(function(_t,Lt){return _t+Lt.x},0)/ft.length}function be(ft){var _t=ft.children;return _t&&_t.length?be(_t[0]):ft}function Oe(ft){var _t=ft.children,Lt;return _t&&(Lt=_t.length)?Oe(_t[Lt-1]):ft}f.layout.treemap=function(){var ft=f.layout.hierarchy(),_t=Math.round,Lt=[1,1],Ut=null,Bt=dr,Jt=!1,we,pe="squarify",De=.5*(1+Math.sqrt(5));function je(Pr,Ur){for(var Zr=-1,on=Pr.length,ln,Kr;++Zr<on;)Kr=(ln=Pr[Zr]).value*(Ur<0?0:Ur),ln.area=isNaN(Kr)||Kr<=0?0:Kr}function tr(Pr){var Ur=Pr.children;if(Ur&&Ur.length){var Zr=Bt(Pr),on=[],ln=Ur.slice(),Kr,Vn=1/0,ii,ki=pe==="slice"?Zr.dx:pe==="dice"?Zr.dy:pe==="slice-dice"?Pr.depth&1?Zr.dy:Zr.dx:Math.min(Zr.dx,Zr.dy),si;for(je(ln,Zr.dx*Zr.dy/Pr.value),on.area=0;(si=ln.length)>0;)on.push(Kr=ln[si-1]),on.area+=Kr.area,pe!=="squarify"||(ii=Sr(on,ki))<=Vn?(ln.pop(),Vn=ii):(on.area-=on.pop().area,qr(on,ki,Zr,!1),ki=Math.min(Zr.dx,Zr.dy),on.length=on.area=0,Vn=1/0);on.length&&(qr(on,ki,Zr,!0),on.length=on.area=0),Ur.forEach(tr)}}function rr(Pr){var Ur=Pr.children;if(Ur&&Ur.length){var Zr=Bt(Pr),on=Ur.slice(),ln,Kr=[];for(je(on,Zr.dx*Zr.dy/Pr.value),Kr.area=0;ln=on.pop();)Kr.push(ln),Kr.area+=ln.area,ln.z!=null&&(qr(Kr,ln.z?Zr.dx:Zr.dy,Zr,!on.length),Kr.length=Kr.area=0);Ur.forEach(rr)}}function Sr(Pr,Ur){for(var Zr=Pr.area,on,ln=0,Kr=1/0,Vn=-1,ii=Pr.length;++Vn<ii;)!(on=Pr[Vn].area)||(on<Kr&&(Kr=on),on>ln&&(ln=on));return Zr*=Zr,Ur*=Ur,Zr?Math.max(Ur*ln*De/Zr,Zr/(Ur*Kr*De)):1/0}function qr(Pr,Ur,Zr,on){var ln=-1,Kr=Pr.length,Vn=Zr.x,ii=Zr.y,ki=Ur?_t(Pr.area/Ur):0,si;if(Ur==Zr.dx){for((on||ki>Zr.dy)&&(ki=Zr.dy);++ln<Kr;)si=Pr[ln],si.x=Vn,si.y=ii,si.dy=ki,Vn+=si.dx=Math.min(Zr.x+Zr.dx-Vn,ki?_t(si.area/ki):0);si.z=!0,si.dx+=Zr.x+Zr.dx-Vn,Zr.y+=ki,Zr.dy-=ki}else{for((on||ki>Zr.dx)&&(ki=Zr.dx);++ln<Kr;)si=Pr[ln],si.x=Vn,si.y=ii,si.dx=ki,ii+=si.dy=Math.min(Zr.y+Zr.dy-ii,ki?_t(si.area/ki):0);si.z=!1,si.dy+=Zr.y+Zr.dy-ii,Zr.x+=ki,Zr.dx-=ki}}function cn(Pr){var Ur=we||ft(Pr),Zr=Ur[0];return Zr.x=Zr.y=0,Zr.value?(Zr.dx=Lt[0],Zr.dy=Lt[1]):Zr.dx=Zr.dy=0,we&&ft.revalue(Zr),je([Zr],Zr.dx*Zr.dy/Zr.value),(we?rr:tr)(Zr),Jt&&(we=Ur),Ur}return cn.size=function(Pr){return arguments.length?(Lt=Pr,cn):Lt},cn.padding=function(Pr){if(!arguments.length)return Ut;function Ur(ln){var Kr=Pr.call(cn,ln,ln.depth);return Kr==null?dr(ln):lr(ln,typeof Kr=="number"?[Kr,Kr,Kr,Kr]:Kr)}function Zr(ln){return lr(ln,Pr)}var on;return Bt=(Ut=Pr)==null?dr:(on=typeof Pr)=="function"?Ur:(on==="number"&&(Pr=[Pr,Pr,Pr,Pr]),Zr),cn},cn.round=function(Pr){return arguments.length?(_t=Pr?Math.round:Number,cn):_t!=Number},cn.sticky=function(Pr){return arguments.length?(Jt=Pr,we=null,cn):Jt},cn.ratio=function(Pr){return arguments.length?(De=Pr,cn):De},cn.mode=function(Pr){return arguments.length?(pe=Pr+"",cn):pe},Yl(cn,ft)};function dr(ft){return{x:ft.x,y:ft.y,dx:ft.dx,dy:ft.dy}}function lr(ft,_t){var Lt=ft.x+_t[3],Ut=ft.y+_t[0],Bt=ft.dx-_t[1]-_t[3],Jt=ft.dy-_t[0]-_t[2];return Bt<0&&(Lt+=Bt/2,Bt=0),Jt<0&&(Ut+=Jt/2,Jt=0),{x:Lt,y:Ut,dx:Bt,dy:Jt}}f.random={normal:function(ft,_t){var Lt=arguments.length;return Lt<2&&(_t=1),Lt<1&&(ft=0),function(){var Ut,Bt,Jt;do Ut=Math.random()*2-1,Bt=Math.random()*2-1,Jt=Ut*Ut+Bt*Bt;while(!Jt||Jt>1);return ft+_t*Ut*Math.sqrt(-2*Math.log(Jt)/Jt)}},logNormal:function(){var ft=f.random.normal.apply(f,arguments);return function(){return Math.exp(ft())}},bates:function(ft){var _t=f.random.irwinHall(ft);return function(){return _t()/ft}},irwinHall:function(ft){return function(){for(var _t=0,Lt=0;Lt<ft;Lt++)_t+=Math.random();return _t}}},f.scale={};function Rr(ft){var _t=ft[0],Lt=ft[ft.length-1];return _t<Lt?[_t,Lt]:[Lt,_t]}function nn(ft){return ft.rangeExtent?ft.rangeExtent():Rr(ft.range())}function mn(ft,_t,Lt,Ut){var Bt=Lt(ft[0],ft[1]),Jt=Ut(_t[0],_t[1]);return function(we){return Jt(Bt(we))}}function Mn(ft,_t){var Lt=0,Ut=ft.length-1,Bt=ft[Lt],Jt=ft[Ut],we;return Jt<Bt&&(we=Lt,Lt=Ut,Ut=we,we=Bt,Bt=Jt,Jt=we),ft[Lt]=_t.floor(Bt),ft[Ut]=_t.ceil(Jt),ft}function Pn(ft){return ft?{floor:function(_t){return Math.floor(_t/ft)*ft},ceil:function(_t){return Math.ceil(_t/ft)*ft}}:Hn}var Hn={floor:P,ceil:P};function bn(ft,_t,Lt,Ut){var Bt=[],Jt=[],we=0,pe=Math.min(ft.length,_t.length)-1;for(ft[pe]<ft[0]&&(ft=ft.slice().reverse(),_t=_t.slice().reverse());++we<=pe;)Bt.push(Lt(ft[we-1],ft[we])),Jt.push(Ut(_t[we-1],_t[we]));return function(De){var je=f.bisect(ft,De,1,pe)-1;return Jt[je](Bt[je](De))}}f.scale.linear=function(){return On([0,1],[0,1],po,!1)};function On(ft,_t,Lt,Ut){var Bt,Jt;function we(){var De=Math.min(ft.length,_t.length)>2?bn:mn,je=Ut?Hc:vu;return Bt=De(ft,_t,je,Lt),Jt=De(_t,ft,je,po),pe}function pe(De){return Bt(De)}return pe.invert=function(De){return Jt(De)},pe.domain=function(De){return arguments.length?(ft=De.map(Number),we()):ft},pe.range=function(De){return arguments.length?(_t=De,we()):_t},pe.rangeRound=function(De){return pe.range(De).interpolate(Bc)},pe.clamp=function(De){return arguments.length?(Ut=De,we()):Ut},pe.interpolate=function(De){return arguments.length?(Lt=De,we()):Lt},pe.ticks=function(De){return Bi(ft,De)},pe.tickFormat=function(De,je){return d3_scale_linearTickFormat(ft,De,je)},pe.nice=function(De){return Yn(ft,De),we()},pe.copy=function(){return On(ft,_t,Lt,Ut)},we()}function In(ft,_t){return f.rebind(ft,_t,"range","rangeRound","interpolate","clamp")}function Yn(ft,_t){return Mn(ft,Pn(ti(ft,_t)[2])),Mn(ft,Pn(ti(ft,_t)[2])),ft}function ti(ft,_t){_t==null&&(_t=10);var Lt=Rr(ft),Ut=Lt[1]-Lt[0],Bt=Math.pow(10,Math.floor(Math.log(Ut/_t)/Math.LN10)),Jt=_t/Ut*Bt;return Jt<=.15?Bt*=10:Jt<=.35?Bt*=5:Jt<=.75&&(Bt*=2),Lt[0]=Math.ceil(Lt[0]/Bt)*Bt,Lt[1]=Math.floor(Lt[1]/Bt)*Bt+Bt*.5,Lt[2]=Bt,Lt}function Bi(ft,_t){return f.range.apply(f,ti(ft,_t))}f.scale.log=function(){return Ei(f.scale.linear().domain([0,1]),10,!0,[1,10])};function Ei(ft,_t,Lt,Ut){function Bt(pe){return(Lt?Math.log(pe<0?0:pe):-Math.log(pe>0?0:-pe))/Math.log(_t)}function Jt(pe){return Lt?Math.pow(_t,pe):-Math.pow(_t,-pe)}function we(pe){return ft(Bt(pe))}return we.invert=function(pe){return Jt(ft.invert(pe))},we.domain=function(pe){return arguments.length?(Lt=pe[0]>=0,ft.domain((Ut=pe.map(Number)).map(Bt)),we):Ut},we.base=function(pe){return arguments.length?(_t=+pe,ft.domain(Ut.map(Bt)),we):_t},we.nice=function(){var pe=Mn(Ut.map(Bt),Lt?Math:Ni);return ft.domain(pe),Ut=pe.map(Jt),we},we.ticks=function(){var pe=Rr(Ut),De=[],je=pe[0],tr=pe[1],rr=Math.floor(Bt(je)),Sr=Math.ceil(Bt(tr)),qr=_t%1?2:_t;if(isFinite(Sr-rr)){if(Lt){for(;rr<Sr;rr++)for(var cn=1;cn<qr;cn++)De.push(Jt(rr)*cn);De.push(Jt(rr))}else for(De.push(Jt(rr));rr++<Sr;)for(var cn=qr-1;cn>0;cn--)De.push(Jt(rr)*cn);for(rr=0;De[rr]<je;rr++);for(Sr=De.length;De[Sr-1]>tr;Sr--);De=De.slice(rr,Sr)}return De},we.copy=function(){return Ei(ft.copy(),_t,Lt,Ut)},In(we,ft)}var Ni={floor:function(ft){return-Math.ceil(-ft)},ceil:function(ft){return-Math.floor(-ft)}};f.scale.pow=function(){return Ui(f.scale.linear(),1,[0,1])};function Ui(ft,_t,Lt){var Ut=Qn(_t),Bt=Qn(1/_t);function Jt(we){return ft(Ut(we))}return Jt.invert=function(we){return Bt(ft.invert(we))},Jt.domain=function(we){return arguments.length?(ft.domain((Lt=we.map(Number)).map(Ut)),Jt):Lt},Jt.ticks=function(we){return Bi(Lt,we)},Jt.tickFormat=function(we,pe){return d3_scale_linearTickFormat(Lt,we,pe)},Jt.nice=function(we){return Jt.domain(Yn(Lt,we))},Jt.exponent=function(we){return arguments.length?(Ut=Qn(_t=we),Bt=Qn(1/_t),ft.domain(Lt.map(Ut)),Jt):_t},Jt.copy=function(){return Ui(ft.copy(),_t,Lt)},In(Jt,ft)}function Qn(ft){return function(_t){return _t<0?-Math.pow(-_t,ft):Math.pow(_t,ft)}}f.scale.sqrt=function(){return f.scale.pow().exponent(.5)},f.scale.ordinal=function(){return pi([],{t:"range",a:[[]]})};function pi(ft,_t){var Lt,Ut,Bt;function Jt(pe){return Ut[((Lt.get(pe)||(_t.t==="range"?Lt.set(pe,ft.push(pe)):NaN))-1)%Ut.length]}function we(pe,De){return f.range(ft.length).map(function(je){return pe+De*je})}return Jt.domain=function(pe){if(!arguments.length)return ft;ft=[],Lt=new A;for(var De=-1,je=pe.length,tr;++De<je;)Lt.has(tr=pe[De])||Lt.set(tr,ft.push(tr));return Jt[_t.t].apply(Jt,_t.a)},Jt.range=function(pe){return arguments.length?(Ut=pe,Bt=0,_t={t:"range",a:arguments},Jt):Ut},Jt.rangePoints=function(pe,De){arguments.length<2&&(De=0);var je=pe[0],tr=pe[1],rr=ft.length<2?(je=(je+tr)/2,0):(tr-je)/(ft.length-1+De);return Ut=we(je+rr*De/2,rr),Bt=0,_t={t:"rangePoints",a:arguments},Jt},Jt.rangeRoundPoints=function(pe,De){arguments.length<2&&(De=0);var je=pe[0],tr=pe[1],rr=ft.length<2?(je=tr=Math.round((je+tr)/2),0):(tr-je)/(ft.length-1+De)|0;return Ut=we(je+Math.round(rr*De/2+(tr-je-(ft.length-1+De)*rr)/2),rr),Bt=0,_t={t:"rangeRoundPoints",a:arguments},Jt},Jt.rangeBands=function(pe,De,je){arguments.length<2&&(De=0),arguments.length<3&&(je=De);var tr=pe[1]<pe[0],rr=pe[tr-0],Sr=pe[1-tr],qr=(Sr-rr)/(ft.length-De+2*je);return Ut=we(rr+qr*je,qr),tr&&Ut.reverse(),Bt=qr*(1-De),_t={t:"rangeBands",a:arguments},Jt},Jt.rangeRoundBands=function(pe,De,je){arguments.length<2&&(De=0),arguments.length<3&&(je=De);var tr=pe[1]<pe[0],rr=pe[tr-0],Sr=pe[1-tr],qr=Math.floor((Sr-rr)/(ft.length-De+2*je));return Ut=we(rr+Math.round((Sr-rr-(ft.length-De)*qr)/2),qr),tr&&Ut.reverse(),Bt=Math.round(qr*(1-De)),_t={t:"rangeRoundBands",a:arguments},Jt},Jt.rangeBand=function(){return Bt},Jt.rangeExtent=function(){return Rr(_t.a[0])},Jt.copy=function(){return pi(ft,_t)},Jt.domain(ft)}f.scale.category10=function(){return f.scale.ordinal().range($i)},f.scale.category20=function(){return f.scale.ordinal().range(ta)},f.scale.category20b=function(){return f.scale.ordinal().range(ya)},f.scale.category20c=function(){return f.scale.ordinal().range(ba)};var $i=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Er),ta=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Er),ya=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Er),ba=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Er);f.scale.quantile=function(){return wa([],[])};function wa(ft,_t){var Lt;function Ut(){var Jt=0,we=_t.length;for(Lt=[];++Jt<we;)Lt[Jt-1]=f.quantile(ft,Jt/we);return Bt}function Bt(Jt){if(!isNaN(Jt=+Jt))return _t[f.bisect(Lt,Jt)]}return Bt.domain=function(Jt){return arguments.length?(ft=Jt.map(y).filter(g).sort(o),Ut()):ft},Bt.range=function(Jt){return arguments.length?(_t=Jt,Ut()):_t},Bt.quantiles=function(){return Lt},Bt.invertExtent=function(Jt){return Jt=_t.indexOf(Jt),Jt<0?[NaN,NaN]:[Jt>0?Lt[Jt-1]:ft[0],Jt<Lt.length?Lt[Jt]:ft[ft.length-1]]},Bt.copy=function(){return wa(ft,_t)},Ut()}f.scale.quantize=function(){return Ca(0,1,[0,1])};function Ca(ft,_t,Lt){var Ut,Bt;function Jt(pe){return Lt[Math.max(0,Math.min(Bt,Math.floor(Ut*(pe-ft))))]}function we(){return Ut=Lt.length/(_t-ft),Bt=Lt.length-1,Jt}return Jt.domain=function(pe){return arguments.length?(ft=+pe[0],_t=+pe[pe.length-1],we()):[ft,_t]},Jt.range=function(pe){return arguments.length?(Lt=pe,we()):Lt},Jt.invertExtent=function(pe){return pe=Lt.indexOf(pe),pe=pe<0?NaN:pe/Ut+ft,[pe,pe+1/Ut]},Jt.copy=function(){return Ca(ft,_t,Lt)},we()}f.scale.threshold=function(){return ca([.5],[0,1])};function ca(ft,_t){function Lt(Ut){if(Ut<=Ut)return _t[f.bisect(ft,Ut)]}return Lt.domain=function(Ut){return arguments.length?(ft=Ut,Lt):ft},Lt.range=function(Ut){return arguments.length?(_t=Ut,Lt):_t},Lt.invertExtent=function(Ut){return Ut=_t.indexOf(Ut),[ft[Ut-1],ft[Ut]]},Lt.copy=function(){return ca(ft,_t)},Lt}f.scale.identity=function(){return Mo([0,1])};function Mo(ft){function _t(Lt){return+Lt}return _t.invert=_t,_t.domain=_t.range=function(Lt){return arguments.length?(ft=Lt.map(_t),_t):ft},_t.ticks=function(Lt){return Bi(ft,Lt)},_t.tickFormat=function(Lt,Ut){return d3_scale_linearTickFormat(ft,Lt,Ut)},_t.copy=function(){return Mo(ft)},_t}f.svg={};function lo(){return 0}f.svg.arc=function(){var ft=vi,_t=_a,Lt=lo,Ut=qi,Bt=bo,Jt=To,we=ws;function pe(){var je=Math.max(0,+ft.apply(this,arguments)),tr=Math.max(0,+_t.apply(this,arguments)),rr=Bt.apply(this,arguments)-qt,Sr=Jt.apply(this,arguments)-qt,qr=Math.abs(Sr-rr),cn=rr>Sr?0:1;if(tr<je&&(Pr=tr,tr=je,je=Pr),qr>=Zt)return De(tr,cn)+(je?De(je,1-cn):"")+"Z";var Pr,Ur,Zr,on,ln=0,Kr=0,Vn,ii,ki,si,Ci,ui,Vi,Ii,ea=[];if((on=(+we.apply(this,arguments)||0)/2)&&(Zr=Ut===qi?Math.sqrt(je*je+tr*tr):+Ut.apply(this,arguments),cn||(Kr*=-1),tr&&(Kr=Ke(Zr/tr*Math.sin(on))),je&&(ln=Ke(Zr/je*Math.sin(on)))),tr){Vn=tr*Math.cos(rr+Kr),ii=tr*Math.sin(rr+Kr),ki=tr*Math.cos(Sr-Kr),si=tr*Math.sin(Sr-Kr);var xa=Math.abs(Sr-rr-2*Kr)<=St?0:1;if(Kr&&Vs(Vn,ii,ki,si)===cn^xa){var wo=(rr+Sr)/2;Vn=tr*Math.cos(wo),ii=tr*Math.sin(wo),ki=si=null}}else Vn=ii=0;if(je){Ci=je*Math.cos(Sr-ln),ui=je*Math.sin(Sr-ln),Vi=je*Math.cos(rr+ln),Ii=je*Math.sin(rr+ln);var Ua=Math.abs(rr-Sr+2*ln)<=St?0:1;if(ln&&Vs(Ci,ui,Vi,Ii)===1-cn^Ua){var hi=(rr+Sr)/2;Ci=je*Math.cos(hi),ui=je*Math.sin(hi),Vi=Ii=null}}else Ci=ui=0;if(qr>ee&&(Pr=Math.min(Math.abs(tr-je)/2,+Lt.apply(this,arguments)))>.001){Ur=je<tr^cn?0:1;var sa=Pr,Zi=Pr;if(qr<St){var La=Vi==null?[Ci,ui]:ki==null?[Vn,ii]:ji([Vn,ii],[Vi,Ii],[ki,si],[Ci,ui]),ua=Vn-La[0],go=ii-La[1],oo=ki-La[0],So=si-La[1],ns=1/Math.sin(Math.acos((ua*oo+go*So)/(Math.sqrt(ua*ua+go*go)*Math.sqrt(oo*oo+So*So)))/2),Zo=Math.sqrt(La[0]*La[0]+La[1]*La[1]);Zi=Math.min(Pr,(je-Zo)/(ns-1)),sa=Math.min(Pr,(tr-Zo)/(ns+1))}if(ki!=null){var is=Xo(Vi==null?[Ci,ui]:[Vi,Ii],[Vn,ii],tr,sa,cn),Ka=Xo([ki,si],[Ci,ui],tr,sa,cn);Pr===sa?ea.push("M",is[0],"A",sa,",",sa," 0 0,",Ur," ",is[1],"A",tr,",",tr," 0 ",1-cn^Vs(is[1][0],is[1][1],Ka[1][0],Ka[1][1]),",",cn," ",Ka[1],"A",sa,",",sa," 0 0,",Ur," ",Ka[0]):ea.push("M",is[0],"A",sa,",",sa," 0 1,",Ur," ",Ka[0])}else ea.push("M",Vn,",",ii);if(Vi!=null){var Wa=Xo([Vn,ii],[Vi,Ii],je,-Zi,cn),Oi=Xo([Ci,ui],ki==null?[Vn,ii]:[ki,si],je,-Zi,cn);Pr===Zi?ea.push("L",Oi[0],"A",Zi,",",Zi," 0 0,",Ur," ",Oi[1],"A",je,",",je," 0 ",cn^Vs(Oi[1][0],Oi[1][1],Wa[1][0],Wa[1][1]),",",1-cn," ",Wa[1],"A",Zi,",",Zi," 0 0,",Ur," ",Wa[0]):ea.push("L",Oi[0],"A",Zi,",",Zi," 0 0,",Ur," ",Wa[0])}else ea.push("L",Ci,",",ui)}else ea.push("M",Vn,",",ii),ki!=null&&ea.push("A",tr,",",tr," 0 ",xa,",",cn," ",ki,",",si),ea.push("L",Ci,",",ui),Vi!=null&&ea.push("A",je,",",je," 0 ",Ua,",",1-cn," ",Vi,",",Ii);return ea.push("Z"),ea.join("")}function De(je,tr){return"M0,"+je+"A"+je+","+je+" 0 1,"+tr+" 0,"+-je+"A"+je+","+je+" 0 1,"+tr+" 0,"+je}return pe.innerRadius=function(je){return arguments.length?(ft=ae(je),pe):ft},pe.outerRadius=function(je){return arguments.length?(_t=ae(je),pe):_t},pe.cornerRadius=function(je){return arguments.length?(Lt=ae(je),pe):Lt},pe.padRadius=function(je){return arguments.length?(Ut=je==qi?qi:ae(je),pe):Ut},pe.startAngle=function(je){return arguments.length?(Bt=ae(je),pe):Bt},pe.endAngle=function(je){return arguments.length?(Jt=ae(je),pe):Jt},pe.padAngle=function(je){return arguments.length?(we=ae(je),pe):we},pe.centroid=function(){var je=(+ft.apply(this,arguments)+ +_t.apply(this,arguments))/2,tr=(+Bt.apply(this,arguments)+ +Jt.apply(this,arguments))/2-qt;return[Math.cos(tr)*je,Math.sin(tr)*je]},pe};var qi="auto";function vi(ft){return ft.innerRadius}function _a(ft){return ft.outerRadius}function bo(ft){return ft.startAngle}function To(ft){return ft.endAngle}function ws(ft){return ft&&ft.padAngle}function Vs(ft,_t,Lt,Ut){return(ft-Lt)*_t-(_t-Ut)*ft>0?0:1}function Xo(ft,_t,Lt,Ut,Bt){var Jt=ft[0]-_t[0],we=ft[1]-_t[1],pe=(Bt?Ut:-Ut)/Math.sqrt(Jt*Jt+we*we),De=pe*we,je=-pe*Jt,tr=ft[0]+De,rr=ft[1]+je,Sr=_t[0]+De,qr=_t[1]+je,cn=(tr+Sr)/2,Pr=(rr+qr)/2,Ur=Sr-tr,Zr=qr-rr,on=Ur*Ur+Zr*Zr,ln=Lt-Ut,Kr=tr*qr-Sr*rr,Vn=(Zr<0?-1:1)*Math.sqrt(Math.max(0,ln*ln*on-Kr*Kr)),ii=(Kr*Zr-Ur*Vn)/on,ki=(-Kr*Ur-Zr*Vn)/on,si=(Kr*Zr+Ur*Vn)/on,Ci=(-Kr*Ur+Zr*Vn)/on,ui=ii-cn,Vi=ki-Pr,Ii=si-cn,ea=Ci-Pr;return ui*ui+Vi*Vi>Ii*Ii+ea*ea&&(ii=si,ki=Ci),[[ii-De,ki-je],[ii*Lt/ln,ki*Lt/ln]]}function vl(){return!0}function Ps(ft){var _t=Gn,Lt=yi,Ut=vl,Bt=Co,Jt=Bt.key,we=.7;function pe(De){var je=[],tr=[],rr=-1,Sr=De.length,qr,cn=ae(_t),Pr=ae(Lt);function Ur(){je.push("M",Bt(ft(tr),we))}for(;++rr<Sr;)Ut.call(this,qr=De[rr],rr)?tr.push([+cn.call(this,qr,rr),+Pr.call(this,qr,rr)]):tr.length&&(Ur(),tr=[]);return tr.length&&Ur(),je.length?je.join(""):null}return pe.x=function(De){return arguments.length?(_t=De,pe):_t},pe.y=function(De){return arguments.length?(Lt=De,pe):Lt},pe.defined=function(De){return arguments.length?(Ut=De,pe):Ut},pe.interpolate=function(De){return arguments.length?(typeof De=="function"?Jt=Bt=De:Jt=(Bt=_s.get(De)||Co).key,pe):Jt},pe.tension=function(De){return arguments.length?(we=De,pe):we},pe}f.svg.line=function(){return Ps(P)};var _s=f.map({linear:Co,"linear-closed":uc,step:Sc,"step-before":ks,"step-after":Xc,basis:Gs,"basis-open":Uu,"basis-closed":bu,bundle:xu,cardinal:mu,"cardinal-open":fc,"cardinal-closed":bf,monotone:jt});_s.forEach(function(ft,_t){_t.key=ft,_t.closed=/-closed$/.test(ft)});function Co(ft){return ft.length>1?ft.join("L"):ft+"Z"}function uc(ft){return ft.join("L")+"Z"}function Sc(ft){for(var _t=0,Lt=ft.length,Ut=ft[0],Bt=[Ut[0],",",Ut[1]];++_t<Lt;)Bt.push("H",(Ut[0]+(Ut=ft[_t])[0])/2,"V",Ut[1]);return Lt>1&&Bt.push("H",Ut[0]),Bt.join("")}function ks(ft){for(var _t=0,Lt=ft.length,Ut=ft[0],Bt=[Ut[0],",",Ut[1]];++_t<Lt;)Bt.push("V",(Ut=ft[_t])[1],"H",Ut[0]);return Bt.join("")}function Xc(ft){for(var _t=0,Lt=ft.length,Ut=ft[0],Bt=[Ut[0],",",Ut[1]];++_t<Lt;)Bt.push("H",(Ut=ft[_t])[0],"V",Ut[1]);return Bt.join("")}function fc(ft,_t){return ft.length<4?Co(ft):ft[1]+jc(ft.slice(1,-1),yu(ft,_t))}function bf(ft,_t){return ft.length<3?uc(ft):ft[0]+jc((ft.push(ft[0]),ft),yu([ft[ft.length-2]].concat(ft,[ft[1]]),_t))}function mu(ft,_t){return ft.length<3?Co(ft):ft[0]+jc(ft,yu(ft,_t))}function jc(ft,_t){if(_t.length<1||ft.length!=_t.length&&ft.length!=_t.length+2)return Co(ft);var Lt=ft.length!=_t.length,Ut="",Bt=ft[0],Jt=ft[1],we=_t[0],pe=we,De=1;if(Lt&&(Ut+="Q"+(Jt[0]-we[0]*2/3)+","+(Jt[1]-we[1]*2/3)+","+Jt[0]+","+Jt[1],Bt=ft[1],De=2),_t.length>1){pe=_t[1],Jt=ft[De],De++,Ut+="C"+(Bt[0]+we[0])+","+(Bt[1]+we[1])+","+(Jt[0]-pe[0])+","+(Jt[1]-pe[1])+","+Jt[0]+","+Jt[1];for(var je=2;je<_t.length;je++,De++)Jt=ft[De],pe=_t[je],Ut+="S"+(Jt[0]-pe[0])+","+(Jt[1]-pe[1])+","+Jt[0]+","+Jt[1]}if(Lt){var tr=ft[De];Ut+="Q"+(Jt[0]+pe[0]*2/3)+","+(Jt[1]+pe[1]*2/3)+","+tr[0]+","+tr[1]}return Ut}function yu(ft,_t){for(var Lt=[],Ut=(1-_t)/2,Bt,Jt=ft[0],we=ft[1],pe=1,De=ft.length;++pe<De;)Bt=Jt,Jt=we,we=ft[pe],Lt.push([Ut*(we[0]-Bt[0]),Ut*(we[1]-Bt[1])]);return Lt}function Gs(ft){if(ft.length<3)return Co(ft);var _t=1,Lt=ft.length,Ut=ft[0],Bt=Ut[0],Jt=Ut[1],we=[Bt,Bt,Bt,(Ut=ft[1])[0]],pe=[Jt,Jt,Jt,Ut[1]],De=[Bt,",",Jt,"L",jo(Is,we),",",jo(Is,pe)];for(ft.push(ft[Lt-1]);++_t<=Lt;)Ut=ft[_t],we.shift(),we.push(Ut[0]),pe.shift(),pe.push(Ut[1]),Zc(De,we,pe);return ft.pop(),De.push("L",Ut),De.join("")}function Uu(ft){if(ft.length<4)return Co(ft);for(var _t=[],Lt=-1,Ut=ft.length,Bt,Jt=[0],we=[0];++Lt<3;)Bt=ft[Lt],Jt.push(Bt[0]),we.push(Bt[1]);for(_t.push(jo(Is,Jt)+","+jo(Is,we)),--Lt;++Lt<Ut;)Bt=ft[Lt],Jt.shift(),Jt.push(Bt[0]),we.shift(),we.push(Bt[1]),Zc(_t,Jt,we);return _t.join("")}function bu(ft){for(var _t,Lt=-1,Ut=ft.length,Bt=Ut+4,Jt,we=[],pe=[];++Lt<4;)Jt=ft[Lt%Ut],we.push(Jt[0]),pe.push(Jt[1]);for(_t=[jo(Is,we),",",jo(Is,pe)],--Lt;++Lt<Bt;)Jt=ft[Lt%Ut],we.shift(),we.push(Jt[0]),pe.shift(),pe.push(Jt[1]),Zc(_t,we,pe);return _t.join("")}function xu(ft,_t){var Lt=ft.length-1;if(Lt)for(var Ut=ft[0][0],Bt=ft[0][1],Jt=ft[Lt][0]-Ut,we=ft[Lt][1]-Bt,pe=-1,De,je;++pe<=Lt;)De=ft[pe],je=pe/Lt,De[0]=_t*De[0]+(1-_t)*(Ut+je*Jt),De[1]=_t*De[1]+(1-_t)*(Bt+je*we);return Gs(ft)}function jo(ft,_t){return ft[0]*_t[0]+ft[1]*_t[1]+ft[2]*_t[2]+ft[3]*_t[3]}var wu=[0,2/3,1/3,0],Ju=[0,1/3,2/3,0],Is=[0,1/6,2/3,1/6];function Zc(ft,_t,Lt){ft.push("C",jo(wu,_t),",",jo(wu,Lt),",",jo(Ju,_t),",",jo(Ju,Lt),",",jo(Is,_t),",",jo(Is,Lt))}function Kc(ft,_t){return(_t[1]-ft[1])/(_t[0]-ft[0])}function _u(ft){for(var _t=0,Lt=ft.length-1,Ut=[],Bt=ft[0],Jt=ft[1],we=Ut[0]=Kc(Bt,Jt);++_t<Lt;)Ut[_t]=(we+(we=Kc(Bt=Jt,Jt=ft[_t+1])))/2;return Ut[_t]=we,Ut}function Ft(ft){for(var _t=[],Lt,Ut,Bt,Jt,we=_u(ft),pe=-1,De=ft.length-1;++pe<De;)Lt=Kc(ft[pe],ft[pe+1]),u(Lt)<ee?we[pe]=we[pe+1]=0:(Ut=we[pe]/Lt,Bt=we[pe+1]/Lt,Jt=Ut*Ut+Bt*Bt,Jt>9&&(Jt=Lt*3/Math.sqrt(Jt),we[pe]=Jt*Ut,we[pe+1]=Jt*Bt));for(pe=-1;++pe<=De;)Jt=(ft[Math.min(De,pe+1)][0]-ft[Math.max(0,pe-1)][0])/(6*(1+we[pe]*we[pe])),_t.push([Jt||0,we[pe]*Jt||0]);return _t}function jt(ft){return ft.length<3?Co(ft):ft[0]+jc(ft,Ft(ft))}f.svg.line.radial=function(){var ft=Ps(ie);return ft.radius=ft.x,delete ft.x,ft.angle=ft.y,delete ft.y,ft};function ie(ft){for(var _t,Lt=-1,Ut=ft.length,Bt,Jt;++Lt<Ut;)_t=ft[Lt],Bt=_t[0],Jt=_t[1]-qt,_t[0]=Bt*Math.cos(Jt),_t[1]=Bt*Math.sin(Jt);return ft}function ue(ft){var _t=Gn,Lt=Gn,Ut=0,Bt=yi,Jt=vl,we=Co,pe=we.key,De=we,je="L",tr=.7;function rr(Sr){var qr=[],cn=[],Pr=[],Ur=-1,Zr=Sr.length,on,ln=ae(_t),Kr=ae(Ut),Vn=_t===Lt?function(){return ki}:ae(Lt),ii=Ut===Bt?function(){return si}:ae(Bt),ki,si;function Ci(){qr.push("M",we(ft(Pr),tr),je,De(ft(cn.reverse()),tr),"Z")}for(;++Ur<Zr;)Jt.call(this,on=Sr[Ur],Ur)?(cn.push([ki=+ln.call(this,on,Ur),si=+Kr.call(this,on,Ur)]),Pr.push([+Vn.call(this,on,Ur),+ii.call(this,on,Ur)])):cn.length&&(Ci(),cn=[],Pr=[]);return cn.length&&Ci(),qr.length?qr.join(""):null}return rr.x=function(Sr){return arguments.length?(_t=Lt=Sr,rr):Lt},rr.x0=function(Sr){return arguments.length?(_t=Sr,rr):_t},rr.x1=function(Sr){return arguments.length?(Lt=Sr,rr):Lt},rr.y=function(Sr){return arguments.length?(Ut=Bt=Sr,rr):Bt},rr.y0=function(Sr){return arguments.length?(Ut=Sr,rr):Ut},rr.y1=function(Sr){return arguments.length?(Bt=Sr,rr):Bt},rr.defined=function(Sr){return arguments.length?(Jt=Sr,rr):Jt},rr.interpolate=function(Sr){return arguments.length?(typeof Sr=="function"?pe=we=Sr:pe=(we=_s.get(Sr)||Co).key,De=we.reverse||we,je=we.closed?"M":"L",rr):pe},rr.tension=function(Sr){return arguments.length?(tr=Sr,rr):tr},rr}ks.reverse=Xc,Xc.reverse=ks,f.svg.area=function(){return ue(P)},f.svg.area.radial=function(){var ft=ue(ie);return ft.radius=ft.x,delete ft.x,ft.innerRadius=ft.x0,delete ft.x0,ft.outerRadius=ft.x1,delete ft.x1,ft.angle=ft.y,delete ft.y,ft.startAngle=ft.y0,delete ft.y0,ft.endAngle=ft.y1,delete ft.y1,ft};function ke(ft){return ft.source}function xe(ft){return ft.target}f.svg.chord=function(){var ft=ke,_t=xe,Lt=Me,Ut=bo,Bt=To;function Jt(tr,rr){var Sr=we(this,ft,tr,rr),qr=we(this,_t,tr,rr);return"M"+Sr.p0+De(Sr.r,Sr.p1,Sr.a1-Sr.a0)+(pe(Sr,qr)?je(Sr.r,Sr.p1,Sr.r,Sr.p0):je(Sr.r,Sr.p1,qr.r,qr.p0)+De(qr.r,qr.p1,qr.a1-qr.a0)+je(qr.r,qr.p1,Sr.r,Sr.p0))+"Z"}function we(tr,rr,Sr,qr){var cn=rr.call(tr,Sr,qr),Pr=Lt.call(tr,cn,qr),Ur=Ut.call(tr,cn,qr)-qt,Zr=Bt.call(tr,cn,qr)-qt;return{r:Pr,a0:Ur,a1:Zr,p0:[Pr*Math.cos(Ur),Pr*Math.sin(Ur)],p1:[Pr*Math.cos(Zr),Pr*Math.sin(Zr)]}}function pe(tr,rr){return tr.a0==rr.a0&&tr.a1==rr.a1}function De(tr,rr,Sr){return"A"+tr+","+tr+" 0 "+ +(Sr>St)+",1 "+rr}function je(tr,rr,Sr,qr){return"Q 0,0 "+qr}return Jt.radius=function(tr){return arguments.length?(Lt=ae(tr),Jt):Lt},Jt.source=function(tr){return arguments.length?(ft=ae(tr),Jt):ft},Jt.target=function(tr){return arguments.length?(_t=ae(tr),Jt):_t},Jt.startAngle=function(tr){return arguments.length?(Ut=ae(tr),Jt):Ut},Jt.endAngle=function(tr){return arguments.length?(Bt=ae(tr),Jt):Bt},Jt};function Me(ft){return ft.radius}f.svg.diagonal=function(){var ft=ke,_t=xe,Lt=fr;function Ut(Bt,Jt){var we=ft.call(this,Bt,Jt),pe=_t.call(this,Bt,Jt),De=(we.y+pe.y)/2,je=[we,{x:we.x,y:De},{x:pe.x,y:De},pe];return je=je.map(Lt),"M"+je[0]+"C"+je[1]+" "+je[2]+" "+je[3]}return Ut.source=function(Bt){return arguments.length?(ft=ae(Bt),Ut):ft},Ut.target=function(Bt){return arguments.length?(_t=ae(Bt),Ut):_t},Ut.projection=function(Bt){return arguments.length?(Lt=Bt,Ut):Lt},Ut};function fr(ft){return[ft.x,ft.y]}f.svg.diagonal.radial=function(){var ft=f.svg.diagonal(),_t=fr,Lt=ft.projection;return ft.projection=function(Ut){return arguments.length?Lt(gr(_t=Ut)):_t},ft};function gr(ft){return function(){var _t=ft.apply(this,arguments),Lt=_t[0],Ut=_t[1]-qt;return[Lt*Math.cos(Ut),Lt*Math.sin(Ut)]}}f.svg.symbol=function(){var ft=wr,_t=cr;function Lt(Ut,Bt){return(jr.get(ft.call(this,Ut,Bt))||zr)(_t.call(this,Ut,Bt))}return Lt.type=function(Ut){return arguments.length?(ft=ae(Ut),Lt):ft},Lt.size=function(Ut){return arguments.length?(_t=ae(Ut),Lt):_t},Lt};function cr(){return 64}function wr(){return"circle"}function zr(ft){var _t=Math.sqrt(ft/St);return"M0,"+_t+"A"+_t+","+_t+" 0 1,1 0,"+-_t+"A"+_t+","+_t+" 0 1,1 0,"+_t+"Z"}var jr=f.map({circle:zr,cross:function(ft){var _t=Math.sqrt(ft/5)/2;return"M"+-3*_t+","+-_t+"H"+-_t+"V"+-3*_t+"H"+_t+"V"+-_t+"H"+3*_t+"V"+_t+"H"+_t+"V"+3*_t+"H"+-_t+"V"+_t+"H"+-3*_t+"Z"},diamond:function(ft){var _t=Math.sqrt(ft/(2*_n)),Lt=_t*_n;return"M0,"+-_t+"L"+Lt+",0 0,"+_t+" "+-Lt+",0Z"},square:function(ft){var _t=Math.sqrt(ft)/2;return"M"+-_t+","+-_t+"L"+_t+","+-_t+" "+_t+","+_t+" "+-_t+","+_t+"Z"},"triangle-down":function(ft){var _t=Math.sqrt(ft/en),Lt=_t*en/2;return"M0,"+Lt+"L"+_t+","+-Lt+" "+-_t+","+-Lt+"Z"},"triangle-up":function(ft){var _t=Math.sqrt(ft/en),Lt=_t*en/2;return"M0,"+-Lt+"L"+_t+","+Lt+" "+-_t+","+Lt+"Z"}});f.svg.symbolTypes=jr.keys();var en=Math.sqrt(3),_n=Math.tan(30*Te);q.transition=function(ft){for(var _t=Xi||++Qi,Lt=aa(ft),Ut=[],Bt,Jt,we=na||{time:Date.now(),ease:Qs,delay:0,duration:250},pe=-1,De=this.length;++pe<De;){Ut.push(Bt=[]);for(var je=this[pe],tr=-1,rr=je.length;++tr<rr;)(Jt=je[tr])&&Za(Jt,tr,Lt,_t,we),Bt.push(Jt)}return mi(Ut,Lt,_t)},q.interrupt=function(ft){return this.each(ft==null?zn:$n(aa(ft)))};var zn=$n(aa());function $n(ft){return function(){var _t,Lt,Ut;(_t=this[ft])&&(Ut=_t[Lt=_t.active])&&(Ut.timer.c=null,Ut.timer.t=NaN,--_t.count?delete _t[Lt]:delete this[ft],_t.active+=.5,Ut.event&&Ut.event.interrupt.call(this,this.__data__,Ut.index))}}function mi(ft,_t,Lt){return at(ft,wi),ft.namespace=_t,ft.id=Lt,ft}var wi=[],Qi=0,Xi,na;wi.call=q.call,wi.empty=q.empty,wi.node=q.node,wi.size=q.size,f.transition=function(ft,_t){return ft&&ft.transition?Xi?ft.transition(_t):ft:f.selection().transition(ft)},f.transition.prototype=wi,wi.select=function(ft){var _t=this.id,Lt=this.namespace,Ut=[],Bt,Jt,we;ft=W(ft);for(var pe=-1,De=this.length;++pe<De;){Ut.push(Bt=[]);for(var je=this[pe],tr=-1,rr=je.length;++tr<rr;)(we=je[tr])&&(Jt=ft.call(we,we.__data__,tr,pe))?("__data__"in we&&(Jt.__data__=we.__data__),Za(Jt,tr,Lt,_t,we[Lt][_t]),Bt.push(Jt)):Bt.push(null)}return mi(Ut,Lt,_t)},wi.selectAll=function(ft){var _t=this.id,Lt=this.namespace,Ut=[],Bt,Jt,we,pe,De;ft=K(ft);for(var je=-1,tr=this.length;++je<tr;)for(var rr=this[je],Sr=-1,qr=rr.length;++Sr<qr;)if(we=rr[Sr]){De=we[Lt][_t],Jt=ft.call(we,we.__data__,Sr,je),Ut.push(Bt=[]);for(var cn=-1,Pr=Jt.length;++cn<Pr;)(pe=Jt[cn])&&Za(pe,cn,Lt,_t,De),Bt.push(pe)}return mi(Ut,Lt,_t)},wi.filter=function(ft){var _t=[],Lt,Ut,Bt;typeof ft!="function"&&(ft=wt(ft));for(var Jt=0,we=this.length;Jt<we;Jt++){_t.push(Lt=[]);for(var Ut=this[Jt],pe=0,De=Ut.length;pe<De;pe++)(Bt=Ut[pe])&&ft.call(Bt,Bt.__data__,pe,Jt)&&Lt.push(Bt)}return mi(_t,this.namespace,this.id)},wi.tween=function(ft,_t){var Lt=this.id,Ut=this.namespace;return arguments.length<2?this.node()[Ut][Lt].tween.get(ft):$t(this,_t==null?function(Bt){Bt[Ut][Lt].tween.remove(ft)}:function(Bt){Bt[Ut][Lt].tween.set(ft,_t)})};function va(ft,_t,Lt,Ut){var Bt=ft.id,Jt=ft.namespace;return $t(ft,typeof Lt=="function"?function(we,pe,De){we[Jt][Bt].tween.set(_t,Ut(Lt.call(we,we.__data__,pe,De)))}:(Lt=Ut(Lt),function(we){we[Jt][Bt].tween.set(_t,Lt)}))}wi.attr=function(ft,_t){if(arguments.length<2){for(_t in ft)this.attr(_t,ft[_t]);return this}var Lt=ft=="transform"?oc:po,Ut=f.ns.qualify(ft);function Bt(){this.removeAttribute(Ut)}function Jt(){this.removeAttributeNS(Ut.space,Ut.local)}function we(De){return De==null?Bt:(De+="",function(){var je=this.getAttribute(Ut),tr;return je!==De&&(tr=Lt(je,De),function(rr){this.setAttribute(Ut,tr(rr))})})}function pe(De){return De==null?Jt:(De+="",function(){var je=this.getAttributeNS(Ut.space,Ut.local),tr;return je!==De&&(tr=Lt(je,De),function(rr){this.setAttributeNS(Ut.space,Ut.local,tr(rr))})})}return va(this,"attr."+ft,_t,Ut.local?pe:we)},wi.attrTween=function(ft,_t){var Lt=f.ns.qualify(ft);function Ut(Jt,we){var pe=_t.call(this,Jt,we,this.getAttribute(Lt));return pe&&function(De){this.setAttribute(Lt,pe(De))}}function Bt(Jt,we){var pe=_t.call(this,Jt,we,this.getAttributeNS(Lt.space,Lt.local));return pe&&function(De){this.setAttributeNS(Lt.space,Lt.local,pe(De))}}return this.tween("attr."+ft,Lt.local?Bt:Ut)},wi.style=function(ft,_t,Lt){var Ut=arguments.length;if(Ut<3){if(typeof ft!="string"){Ut<2&&(_t="");for(Lt in ft)this.style(Lt,ft[Lt],_t);return this}Lt=""}function Bt(){this.style.removeProperty(ft)}function Jt(we){return we==null?Bt:(we+="",function(){var pe=a(this).getComputedStyle(this,null).getPropertyValue(ft),De;return pe!==we&&(De=po(pe,we),function(je){this.style.setProperty(ft,De(je),Lt)})})}return va(this,"style."+ft,_t,Jt)},wi.styleTween=function(ft,_t,Lt){arguments.length<3&&(Lt="");function Ut(Bt,Jt){var we=_t.call(this,Bt,Jt,a(this).getComputedStyle(this,null).getPropertyValue(ft));return we&&function(pe){this.style.setProperty(ft,we(pe),Lt)}}return this.tween("style."+ft,Ut)},wi.text=function(ft){return va(this,"text",ft,vo)};function vo(ft){return ft==null&&(ft=""),function(){this.textContent=ft}}wi.remove=function(){var ft=this.namespace;return this.each("end.transition",function(){var _t;this[ft].count<2&&(_t=this.parentNode)&&_t.removeChild(this)})},wi.ease=function(ft){var _t=this.id,Lt=this.namespace;return arguments.length<1?this.node()[Lt][_t].ease:(typeof ft!="function"&&(ft=f.ease.apply(f,arguments)),$t(this,function(Ut){Ut[Lt][_t].ease=ft}))},wi.delay=function(ft){var _t=this.id,Lt=this.namespace;return arguments.length<1?this.node()[Lt][_t].delay:$t(this,typeof ft=="function"?function(Ut,Bt,Jt){Ut[Lt][_t].delay=+ft.call(Ut,Ut.__data__,Bt,Jt)}:(ft=+ft,function(Ut){Ut[Lt][_t].delay=ft}))},wi.duration=function(ft){var _t=this.id,Lt=this.namespace;return arguments.length<1?this.node()[Lt][_t].duration:$t(this,typeof ft=="function"?function(Ut,Bt,Jt){Ut[Lt][_t].duration=Math.max(1,ft.call(Ut,Ut.__data__,Bt,Jt))}:(ft=Math.max(1,ft),function(Ut){Ut[Lt][_t].duration=ft}))},wi.each=function(ft,_t){var Lt=this.id,Ut=this.namespace;if(arguments.length<2){var Bt=na,Jt=Xi;try{Xi=Lt,$t(this,function(we,pe,De){na=we[Ut][Lt],ft.call(we,we.__data__,pe,De)})}finally{na=Bt,Xi=Jt}}else $t(this,function(we){var pe=we[Ut][Lt];(pe.event||(pe.event=f.dispatch("start","end","interrupt"))).on(ft,_t)});return this},wi.transition=function(){for(var ft=this.id,_t=++Qi,Lt=this.namespace,Ut=[],Bt,Jt,we,pe,De=0,je=this.length;De<je;De++){Ut.push(Bt=[]);for(var Jt=this[De],tr=0,rr=Jt.length;tr<rr;tr++)(we=Jt[tr])&&(pe=we[Lt][ft],Za(we,tr,Lt,_t,{time:pe.time,ease:pe.ease,delay:pe.delay+pe.duration,duration:pe.duration})),Bt.push(we)}return mi(Ut,Lt,_t)};function aa(ft){return ft==null?"__transition__":"__transition_"+ft+"__"}function Za(ft,_t,Lt,Ut,Bt){var Jt=ft[Lt]||(ft[Lt]={active:0,count:0}),we=Jt[Ut],pe,De,je,tr,rr;function Sr(Pr){var Ur=we.delay;if(De.t=Ur+pe,Ur<=Pr)return qr(Pr-Ur);De.c=qr}function qr(Pr){var Ur=Jt.active,Zr=Jt[Ur];Zr&&(Zr.timer.c=null,Zr.timer.t=NaN,--Jt.count,delete Jt[Ur],Zr.event&&Zr.event.interrupt.call(ft,ft.__data__,Zr.index));for(var on in Jt)if(+on<Ut){var ln=Jt[on];ln.timer.c=null,ln.timer.t=NaN,--Jt.count,delete Jt[on]}De.c=cn,un(function(){return De.c&&cn(Pr||1)&&(De.c=null,De.t=NaN),1},0,pe),Jt.active=Ut,we.event&&we.event.start.call(ft,ft.__data__,_t),rr=[],we.tween.forEach(function(Kr,Vn){(Vn=Vn.call(ft,ft.__data__,_t))&&rr.push(Vn)}),tr=we.ease,je=we.duration}function cn(Pr){for(var Ur=Pr/je,Zr=tr(Ur),on=rr.length;on>0;)rr[--on].call(ft,Zr);if(Ur>=1)return we.event&&we.event.end.call(ft,ft.__data__,_t),--Jt.count?delete Jt[Ut]:delete ft[Lt],1}we||(pe=Bt.time,De=un(Sr,0,pe),we=Jt[Ut]={tween:new A,time:pe,timer:De,delay:Bt.delay,duration:Bt.duration,ease:Bt.ease,index:_t},Bt=null,++Jt.count)}f.svg.axis=function(){var ft=f.scale.linear(),_t=xo,Lt=6,Ut=6,Bt=3,Jt=[10],we=null,pe;function De(je){je.each(function(){var tr=f.select(this),rr=this.__chart__||ft,Sr=this.__chart__=ft.copy(),qr=we==null?Sr.ticks?Sr.ticks.apply(Sr,Jt):Sr.domain():we,cn=pe==null?Sr.tickFormat?Sr.tickFormat.apply(Sr,Jt):P:pe,Pr=tr.selectAll(".tick").data(qr,Sr),Ur=Pr.enter().insert("g",".domain").attr("class","tick").style("opacity",ee),Zr=f.transition(Pr.exit()).style("opacity",ee).remove(),on=f.transition(Pr.order()).style("opacity",1),ln=Math.max(Lt,0)+Bt,Kr,Vn=nn(Sr),ii=tr.selectAll(".domain").data([0]),ki=(ii.enter().append("path").attr("class","domain"),f.transition(ii));Ur.append("line"),Ur.append("text");var si=Ur.select("line"),Ci=on.select("line"),ui=Pr.select("text").text(cn),Vi=Ur.select("text"),Ii=on.select("text"),ea=_t==="top"||_t==="left"?-1:1,xa,wo,Ua,hi;if(_t==="bottom"||_t==="top"?(Kr=ka,xa="x",Ua="y",wo="x2",hi="y2",ui.attr("dy",ea<0?"0em":".71em").style("text-anchor","middle"),ki.attr("d","M"+Vn[0]+","+ea*Ut+"V0H"+Vn[1]+"V"+ea*Ut)):(Kr=Ea,xa="y",Ua="x",wo="y2",hi="x2",ui.attr("dy",".32em").style("text-anchor",ea<0?"end":"start"),ki.attr("d","M"+ea*Ut+","+Vn[0]+"H0V"+Vn[1]+"H"+ea*Ut)),si.attr(hi,ea*Lt),Vi.attr(Ua,ea*ln),Ci.attr(wo,0).attr(hi,ea*Lt),Ii.attr(xa,0).attr(Ua,ea*ln),Sr.rangeBand){var sa=Sr,Zi=sa.rangeBand()/2;rr=Sr=function(La){return sa(La)+Zi}}else rr.rangeBand?rr=Sr:Zr.call(Kr,Sr,rr);Ur.call(Kr,rr,Sr),on.call(Kr,Sr,Sr)})}return De.scale=function(je){return arguments.length?(ft=je,De):ft},De.orient=function(je){return arguments.length?(_t=je in Do?je+"":xo,De):_t},De.ticks=function(){return arguments.length?(Jt=m(arguments),De):Jt},De.tickValues=function(je){return arguments.length?(we=je,De):we},De.tickFormat=function(je){return arguments.length?(pe=je,De):pe},De.tickSize=function(je){var tr=arguments.length;return tr?(Lt=+je,Ut=+arguments[tr-1],De):Lt},De.innerTickSize=function(je){return arguments.length?(Lt=+je,De):Lt},De.outerTickSize=function(je){return arguments.length?(Ut=+je,De):Ut},De.tickPadding=function(je){return arguments.length?(Bt=+je,De):Bt},De.tickSubdivide=function(){return arguments.length&&De},De};var xo="bottom",Do={top:1,right:1,bottom:1,left:1};function ka(ft,_t,Lt){ft.attr("transform",function(Ut){var Bt=_t(Ut);return"translate("+(isFinite(Bt)?Bt:Lt(Ut))+",0)"})}function Ea(ft,_t,Lt){ft.attr("transform",function(Ut){var Bt=_t(Ut);return"translate(0,"+(isFinite(Bt)?Bt:Lt(Ut))+")"})}f.svg.brush=function(){var ft=J(tr,"brushstart","brush","brushend"),_t=null,Lt=null,Ut=[0,0],Bt=[0,0],Jt,we,pe=!0,De=!0,je=Ao[0];function tr(Pr){Pr.each(function(){var Ur=f.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",cn).on("touchstart.brush",cn),Zr=Ur.selectAll(".background").data([0]);Zr.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),Ur.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var on=Ur.selectAll(".resize").data(je,P);on.exit().remove(),on.enter().append("g").attr("class",function(ii){return"resize "+ii}).style("cursor",function(ii){return Ts[ii]}).append("rect").attr("x",function(ii){return/[ew]$/.test(ii)?-3:null}).attr("y",function(ii){return/^[ns]/.test(ii)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),on.style("display",tr.empty()?"none":null);var ln=f.transition(Ur),Kr=f.transition(Zr),Vn;_t&&(Vn=nn(_t),Kr.attr("x",Vn[0]).attr("width",Vn[1]-Vn[0]),Sr(ln)),Lt&&(Vn=nn(Lt),Kr.attr("y",Vn[0]).attr("height",Vn[1]-Vn[0]),qr(ln)),rr(ln)})}tr.event=function(Pr){Pr.each(function(){var Ur=ft.of(this,arguments),Zr={x:Ut,y:Bt,i:Jt,j:we},on=this.__chart__||Zr;this.__chart__=Zr,Xi?f.select(this).transition().each("start.brush",function(){Jt=on.i,we=on.j,Ut=on.x,Bt=on.y,Ur({type:"brushstart"})}).tween("brush:brush",function(){var ln=ao(Ut,Zr.x),Kr=ao(Bt,Zr.y);return Jt=we=null,function(Vn){Ut=Zr.x=ln(Vn),Bt=Zr.y=Kr(Vn),Ur({type:"brush",mode:"resize"})}}).each("end.brush",function(){Jt=Zr.i,we=Zr.j,Ur({type:"brush",mode:"resize"}),Ur({type:"brushend"})}):(Ur({type:"brushstart"}),Ur({type:"brush",mode:"resize"}),Ur({type:"brushend"}))})};function rr(Pr){Pr.selectAll(".resize").attr("transform",function(Ur){return"translate("+Ut[+/e$/.test(Ur)]+","+Bt[+/^s/.test(Ur)]+")"})}function Sr(Pr){Pr.select(".extent").attr("x",Ut[0]),Pr.selectAll(".extent,.n>rect,.s>rect").attr("width",Ut[1]-Ut[0])}function qr(Pr){Pr.select(".extent").attr("y",Bt[0]),Pr.selectAll(".extent,.e>rect,.w>rect").attr("height",Bt[1]-Bt[0])}function cn(){var Pr=this,Ur=f.select(f.event.target),Zr=ft.of(Pr,arguments),on=f.select(Pr),ln=Ur.datum(),Kr=!/^(n|s)$/.test(ln)&&_t,Vn=!/^(e|w)$/.test(ln)&&Lt,ii=Ur.classed("extent"),ki=Ye(Pr),si,Ci=f.mouse(Pr),ui,Vi=f.select(a(Pr)).on("keydown.brush",xa).on("keyup.brush",wo);if(f.event.changedTouches?Vi.on("touchmove.brush",Ua).on("touchend.brush",sa):Vi.on("mousemove.brush",Ua).on("mouseup.brush",sa),on.interrupt().selectAll("*").interrupt(),ii)Ci[0]=Ut[0]-Ci[0],Ci[1]=Bt[0]-Ci[1];else if(ln){var Ii=+/w$/.test(ln),ea=+/^n/.test(ln);ui=[Ut[1-Ii]-Ci[0],Bt[1-ea]-Ci[1]],Ci[0]=Ut[Ii],Ci[1]=Bt[ea]}else f.event.altKey&&(si=Ci.slice());on.style("pointer-events","none").selectAll(".resize").style("display",null),f.select("body").style("cursor",Ur.style("cursor")),Zr({type:"brushstart"}),Ua();function xa(){f.event.keyCode==32&&(ii||(si=null,Ci[0]-=Ut[1],Ci[1]-=Bt[1],ii=2),Z())}function wo(){f.event.keyCode==32&&ii==2&&(Ci[0]+=Ut[1],Ci[1]+=Bt[1],ii=0,Z())}function Ua(){var Zi=f.mouse(Pr),La=!1;ui&&(Zi[0]+=ui[0],Zi[1]+=ui[1]),ii||(f.event.altKey?(si||(si=[(Ut[0]+Ut[1])/2,(Bt[0]+Bt[1])/2]),Ci[0]=Ut[+(Zi[0]<si[0])],Ci[1]=Bt[+(Zi[1]<si[1])]):si=null),Kr&&hi(Zi,_t,0)&&(Sr(on),La=!0),Vn&&hi(Zi,Lt,1)&&(qr(on),La=!0),La&&(rr(on),Zr({type:"brush",mode:ii?"move":"resize"}))}function hi(Zi,La,ua){var go=nn(La),oo=go[0],So=go[1],ns=Ci[ua],Zo=ua?Bt:Ut,is=Zo[1]-Zo[0],Ka,Wa;if(ii&&(oo-=ns,So-=is+ns),Ka=(ua?De:pe)?Math.max(oo,Math.min(So,Zi[ua])):Zi[ua],ii?Wa=(Ka+=ns)+is:(si&&(ns=Math.max(oo,Math.min(So,2*si[ua]-Ka))),ns<Ka?(Wa=Ka,Ka=ns):Wa=ns),Zo[0]!=Ka||Zo[1]!=Wa)return ua?we=null:Jt=null,Zo[0]=Ka,Zo[1]=Wa,!0}function sa(){Ua(),on.style("pointer-events","all").selectAll(".resize").style("display",tr.empty()?"none":null),f.select("body").style("cursor",null),Vi.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),ki(),Zr({type:"brushend"})}}return tr.x=function(Pr){return arguments.length?(_t=Pr,je=Ao[!_t<<1|!Lt],tr):_t},tr.y=function(Pr){return arguments.length?(Lt=Pr,je=Ao[!_t<<1|!Lt],tr):Lt},tr.clamp=function(Pr){return arguments.length?(_t&&Lt?(pe=!!Pr[0],De=!!Pr[1]):_t?pe=!!Pr:Lt&&(De=!!Pr),tr):_t&&Lt?[pe,De]:_t?pe:Lt?De:null},tr.extent=function(Pr){var Ur,Zr,on,ln,Kr;return arguments.length?(_t&&(Ur=Pr[0],Zr=Pr[1],Lt&&(Ur=Ur[0],Zr=Zr[0]),Jt=[Ur,Zr],_t.invert&&(Ur=_t(Ur),Zr=_t(Zr)),Zr<Ur&&(Kr=Ur,Ur=Zr,Zr=Kr),(Ur!=Ut[0]||Zr!=Ut[1])&&(Ut=[Ur,Zr])),Lt&&(on=Pr[0],ln=Pr[1],_t&&(on=on[1],ln=ln[1]),we=[on,ln],Lt.invert&&(on=Lt(on),ln=Lt(ln)),ln<on&&(Kr=on,on=ln,ln=Kr),(on!=Bt[0]||ln!=Bt[1])&&(Bt=[on,ln])),tr):(_t&&(Jt?(Ur=Jt[0],Zr=Jt[1]):(Ur=Ut[0],Zr=Ut[1],_t.invert&&(Ur=_t.invert(Ur),Zr=_t.invert(Zr)),Zr<Ur&&(Kr=Ur,Ur=Zr,Zr=Kr))),Lt&&(we?(on=we[0],ln=we[1]):(on=Bt[0],ln=Bt[1],Lt.invert&&(on=Lt.invert(on),ln=Lt.invert(ln)),ln<on&&(Kr=on,on=ln,ln=Kr))),_t&&Lt?[[Ur,on],[Zr,ln]]:_t?[Ur,Zr]:Lt&&[on,ln])},tr.clear=function(){return tr.empty()||(Ut=[0,0],Bt=[0,0],Jt=we=null),tr},tr.empty=function(){return!!_t&&Ut[0]==Ut[1]||!!Lt&&Bt[0]==Bt[1]},f.rebind(tr,ft,"on")};var Ts={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ao=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];f.text=Le(function(ft){return ft.responseText}),f.json=function(ft,_t){return $e(ft,"application/json",Ho,_t)};function Ho(ft){return JSON.parse(ft.responseText)}f.html=function(ft,_t){return $e(ft,"text/html",rs,_t)};function rs(ft){var _t=x.createRange();return _t.selectNode(x.body),_t.createContextualFragment(ft.responseText)}f.xml=Le(function(ft){return ft.responseXML}),typeof B=="object"&&B.exports?B.exports=f:this.d3=f}).apply(self)},{}],59:[function(e,B,V){B.exports=e("./quad")},{"./quad":60}],60:[function(e,B,V){var f=e("binary-search-bounds"),l=e("clamp"),m=e("parse-rect"),x=e("array-bounds"),t=e("pick-by-alias"),a=e("defined"),i=e("flatten-vertex-data"),r=e("is-obj"),n=e("dtype"),d=e("math-log2"),s=1073741824;B.exports=function(g,b){b||(b={}),g=i(g,"float64"),b=t(b,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var v=a(b.maxDepth,255),_=a(b.bounds,x(g,2));_[0]===_[2]&&_[2]++,_[1]===_[3]&&_[3]++;var u=o(g,_),T=g.length>>>1,c;b.dtype||(b.dtype="array"),typeof b.dtype=="string"?c=new(n(b.dtype))(T):b.dtype&&(c=b.dtype,Array.isArray(c)&&(c.length=T));for(var A=0;A<T;++A)c[A]=A;var k=[],p=[],w=[],h=[];P(0,0,1,c,0,1);for(var D=0,S=0;S<k.length;S++){var M=k[S];if(c.set)c.set(M,D);else for(var L=0,R=M.length;L<R;L++)c[L+D]=M[L];var z=D+k[S].length;h[S]=[D,z],D=z}return c.range=I,c;function P(G,$,tt,Z,X,J){if(!Z.length)return null;var st=k[X]||(k[X]=[]),at=w[X]||(w[X]=[]),lt=p[X]||(p[X]=[]),F=st.length;if(X++,X>v||J>s){for(var H=0;H<Z.length;H++)st.push(Z[H]),at.push(J),lt.push(null,null,null,null);return F}if(st.push(Z[0]),at.push(J),Z.length<=1)return lt.push(null,null,null,null),F;for(var et=tt*.5,q=G+et,W=$+et,K=[],nt=[],it=[],ot=[],ct=1,bt=Z.length;ct<bt;ct++){var ut=Z[ct],pt=u[ut*2],yt=u[ut*2+1];pt<q?yt<W?K.push(ut):nt.push(ut):yt<W?it.push(ut):ot.push(ut)}return J<<=2,lt.push(P(G,$,et,K,X,J),P(G,W,et,nt,X,J+1),P(q,$,et,it,X,J+2),P(q,W,et,ot,X,J+3)),F}function I(){for(var G=[],$=arguments.length;$--;)G[$]=arguments[$];var tt;if(r(G[G.length-1])){var Z=G.pop();!G.length&&(Z.x!=null||Z.l!=null||Z.left!=null)&&(G=[Z],tt={}),tt=t(Z,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else tt={};G.length||(G=_);var X=m.apply(void 0,G),J=[Math.min(X.x,X.x+X.width),Math.min(X.y,X.y+X.height),Math.max(X.x,X.x+X.width),Math.max(X.y,X.y+X.height)],st=J[0],at=J[1],lt=J[2],F=J[3],H=o([st,at,lt,F],_),et=H[0],q=H[1],W=H[2],K=H[3],nt=a(tt.level,k.length);if(tt.d!=null){var it;typeof tt.d=="number"?it=[tt.d,tt.d]:tt.d.length&&(it=tt.d),nt=Math.min(Math.max(Math.ceil(-d(Math.abs(it[0])/(_[2]-_[0]))),Math.ceil(-d(Math.abs(it[1])/(_[3]-_[1])))),nt)}if(nt=Math.min(nt,k.length),tt.lod)return U(et,q,W,K,nt);var ot=[];ct(0,0,1,0,0,1);function ct(ut,pt,yt,Tt,kt,zt){if(!(kt===null||zt===null)){var Rt=ut+yt,Gt=pt+yt;if(!(et>Rt||q>Gt||W<ut||K<pt)&&!(Tt>=nt)&&kt!==zt){var wt=k[Tt];zt===void 0&&(zt=wt.length);for(var It=kt;It<zt;It++){var $t=wt[It],Qt=g[$t*2],Nt=g[$t*2+1];Qt>=st&&Qt<=lt&&Nt>=at&&Nt<=F&&ot.push($t)}var Pt=p[Tt],Yt=Pt[kt*4+0],ve=Pt[kt*4+1],Re=Pt[kt*4+2],ir=Pt[kt*4+3],Ie=bt(Pt,kt+1),Be=yt*.5,Ye=Tt+1;ct(ut,pt,Be,Ye,Yt,ve||Re||ir||Ie),ct(ut,pt+Be,Be,Ye,ve,Re||ir||Ie),ct(ut+Be,pt,Be,Ye,Re,ir||Ie),ct(ut+Be,pt+Be,Be,Ye,ir,Ie)}}}function bt(ut,pt){for(var yt=null,Tt=0;yt===null;)if(yt=ut[pt*4+Tt],Tt++,Tt>ut.length)return null;return yt}return ot}function U(G,$,tt,Z,X){for(var J=[],st=0;st<X;st++){var at=w[st],lt=h[st][0],F=O(G,$,st),H=O(tt,Z,st),et=f.ge(at,F),q=f.gt(at,H,et,at.length-1);J[st]=[et+lt,q+lt]}return J}function O(G,$,tt){for(var Z=1,X=.5,J=.5,st=.5,at=0;at<tt;at++)Z<<=2,Z+=G<X?$<J?0:1:$<J?2:3,st*=.5,X+=G<X?-st:st,J+=$<J?-st:st;return Z}};function o(y,g){for(var b=g[0],v=g[1],_=g[2],u=g[3],T=1/(_-b),c=1/(u-v),A=new Array(y.length),k=0,p=y.length/2;k<p;k++)A[2*k]=l((y[2*k]-b)*T,0,1),A[2*k+1]=l((y[2*k+1]-v)*c,0,1);return A}},{"array-bounds":71,"binary-search-bounds":80,clamp:86,defined:124,dtype:127,"flatten-vertex-data":191,"is-obj":235,"math-log2":240,"parse-rect":249,"pick-by-alias":253}],61:[function(e,B,V){Object.defineProperty(V,"__esModule",{value:!0});var f=e("@turf/meta"),l=6378137;function m(r){return f.geomReduce(r,function(n,d){return n+x(d)},0)}V.default=m;function x(r){var n=0,d;switch(r.type){case"Polygon":return t(r.coordinates);case"MultiPolygon":for(d=0;d<r.coordinates.length;d++)n+=t(r.coordinates[d]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function t(r){var n=0;if(r&&r.length>0){n+=Math.abs(a(r[0]));for(var d=1;d<r.length;d++)n-=Math.abs(a(r[d]))}return n}function a(r){var n,d,s,o,y,g,b,v=0,_=r.length;if(_>2){for(b=0;b<_;b++)b===_-2?(o=_-2,y=_-1,g=0):b===_-1?(o=_-1,y=0,g=1):(o=b,y=b+1,g=b+2),n=r[o],d=r[y],s=r[g],v+=(i(s[0])-i(n[0]))*Math.sin(i(d[1]));v=v*l*l/2}return v}function i(r){return r*Math.PI/180}},{"@turf/meta":63}],62:[function(e,B,V){Object.defineProperty(V,"__esModule",{value:!0}),V.earthRadius=63710088e-1,V.factors={centimeters:V.earthRadius*100,centimetres:V.earthRadius*100,degrees:V.earthRadius/111325,feet:V.earthRadius*3.28084,inches:V.earthRadius*39.37,kilometers:V.earthRadius/1e3,kilometres:V.earthRadius/1e3,meters:V.earthRadius,metres:V.earthRadius,miles:V.earthRadius/1609.344,millimeters:V.earthRadius*1e3,millimetres:V.earthRadius*1e3,nauticalmiles:V.earthRadius/1852,radians:1,yards:V.earthRadius*1.0936},V.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/V.earthRadius,yards:1.0936133},V.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function f(S,M,L){L===void 0&&(L={});var R={type:"Feature"};return(L.id===0||L.id)&&(R.id=L.id),L.bbox&&(R.bbox=L.bbox),R.properties=M||{},R.geometry=S,R}V.feature=f;function l(S,M,L){switch(S){case"Point":return m(M).geometry;case"LineString":return i(M).geometry;case"Polygon":return t(M).geometry;case"MultiPoint":return s(M).geometry;case"MultiLineString":return d(M).geometry;case"MultiPolygon":return o(M).geometry;default:throw new Error(S+" is invalid")}}V.geometry=l;function m(S,M,L){if(L===void 0&&(L={}),!S)throw new Error("coordinates is required");if(!Array.isArray(S))throw new Error("coordinates must be an Array");if(S.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!p(S[0])||!p(S[1]))throw new Error("coordinates must contain numbers");var R={type:"Point",coordinates:S};return f(R,M,L)}V.point=m;function x(S,M,L){return L===void 0&&(L={}),n(S.map(function(R){return m(R,M)}),L)}V.points=x;function t(S,M,L){L===void 0&&(L={});for(var R=0,z=S;R<z.length;R++){var P=z[R];if(P.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var I=0;I<P[P.length-1].length;I++)if(P[P.length-1][I]!==P[0][I])throw new Error("First and last Position are not equivalent.")}var U={type:"Polygon",coordinates:S};return f(U,M,L)}V.polygon=t;function a(S,M,L){return L===void 0&&(L={}),n(S.map(function(R){return t(R,M)}),L)}V.polygons=a;function i(S,M,L){if(L===void 0&&(L={}),S.length<2)throw new Error("coordinates must be an array of two or more positions");var R={type:"LineString",coordinates:S};return f(R,M,L)}V.lineString=i;function r(S,M,L){return L===void 0&&(L={}),n(S.map(function(R){return i(R,M)}),L)}V.lineStrings=r;function n(S,M){M===void 0&&(M={});var L={type:"FeatureCollection"};return M.id&&(L.id=M.id),M.bbox&&(L.bbox=M.bbox),L.features=S,L}V.featureCollection=n;function d(S,M,L){L===void 0&&(L={});var R={type:"MultiLineString",coordinates:S};return f(R,M,L)}V.multiLineString=d;function s(S,M,L){L===void 0&&(L={});var R={type:"MultiPoint",coordinates:S};return f(R,M,L)}V.multiPoint=s;function o(S,M,L){L===void 0&&(L={});var R={type:"MultiPolygon",coordinates:S};return f(R,M,L)}V.multiPolygon=o;function y(S,M,L){L===void 0&&(L={});var R={type:"GeometryCollection",geometries:S};return f(R,M,L)}V.geometryCollection=y;function g(S,M){if(M===void 0&&(M=0),M&&!(M>=0))throw new Error("precision must be a positive number");var L=Math.pow(10,M||0);return Math.round(S*L)/L}V.round=g;function b(S,M){M===void 0&&(M="kilometers");var L=V.factors[M];if(!L)throw new Error(M+" units is invalid");return S*L}V.radiansToLength=b;function v(S,M){M===void 0&&(M="kilometers");var L=V.factors[M];if(!L)throw new Error(M+" units is invalid");return S/L}V.lengthToRadians=v;function _(S,M){return T(v(S,M))}V.lengthToDegrees=_;function u(S){var M=S%360;return M<0&&(M+=360),M}V.bearingToAzimuth=u;function T(S){var M=S%(2*Math.PI);return M*180/Math.PI}V.radiansToDegrees=T;function c(S){var M=S%360;return M*Math.PI/180}V.degreesToRadians=c;function A(S,M,L){if(M===void 0&&(M="kilometers"),L===void 0&&(L="kilometers"),!(S>=0))throw new Error("length must be a positive number");return b(v(S,M),L)}V.convertLength=A;function k(S,M,L){if(M===void 0&&(M="meters"),L===void 0&&(L="kilometers"),!(S>=0))throw new Error("area must be a positive number");var R=V.areaFactors[M];if(!R)throw new Error("invalid original units");var z=V.areaFactors[L];if(!z)throw new Error("invalid final units");return S/R*z}V.convertArea=k;function p(S){return!isNaN(S)&&S!==null&&!Array.isArray(S)}V.isNumber=p;function w(S){return!!S&&S.constructor===Object}V.isObject=w;function h(S){if(!S)throw new Error("bbox is required");if(!Array.isArray(S))throw new Error("bbox must be an Array");if(S.length!==4&&S.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");S.forEach(function(M){if(!p(M))throw new Error("bbox must only contain numbers")})}V.validateBBox=h;function D(S){if(!S)throw new Error("id is required");if(["string","number"].indexOf(typeof S)===-1)throw new Error("id must be a number or a string")}V.validateId=D},{}],63:[function(e,B,V){Object.defineProperty(V,"__esModule",{value:!0});var f=e("@turf/helpers");function l(T,c,A){if(T!==null)for(var k,p,w,h,D,S,M,L=0,R=0,z,P=T.type,I=P==="FeatureCollection",U=P==="Feature",O=I?T.features.length:1,G=0;G<O;G++){M=I?T.features[G].geometry:U?T.geometry:T,z=M?M.type==="GeometryCollection":!1,D=z?M.geometries.length:1;for(var $=0;$<D;$++){var tt=0,Z=0;if(h=z?M.geometries[$]:M,h!==null){S=h.coordinates;var X=h.type;switch(L=A&&(X==="Polygon"||X==="MultiPolygon")?1:0,X){case null:break;case"Point":if(c(S,R,G,tt,Z)===!1)return!1;R++,tt++;break;case"LineString":case"MultiPoint":for(k=0;k<S.length;k++){if(c(S[k],R,G,tt,Z)===!1)return!1;R++,X==="MultiPoint"&&tt++}X==="LineString"&&tt++;break;case"Polygon":case"MultiLineString":for(k=0;k<S.length;k++){for(p=0;p<S[k].length-L;p++){if(c(S[k][p],R,G,tt,Z)===!1)return!1;R++}X==="MultiLineString"&&tt++,X==="Polygon"&&Z++}X==="Polygon"&&tt++;break;case"MultiPolygon":for(k=0;k<S.length;k++){for(Z=0,p=0;p<S[k].length;p++){for(w=0;w<S[k][p].length-L;w++){if(c(S[k][p][w],R,G,tt,Z)===!1)return!1;R++}Z++}tt++}break;case"GeometryCollection":for(k=0;k<h.geometries.length;k++)if(l(h.geometries[k],c,A)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function m(T,c,A,k){var p=A;return l(T,function(w,h,D,S,M){h===0&&A===void 0?p=w:p=c(p,w,h,D,S,M)},k),p}function x(T,c){var A;switch(T.type){case"FeatureCollection":for(A=0;A<T.features.length&&c(T.features[A].properties,A)!==!1;A++);break;case"Feature":c(T.properties,0);break}}function t(T,c,A){var k=A;return x(T,function(p,w){w===0&&A===void 0?k=p:k=c(k,p,w)}),k}function a(T,c){if(T.type==="Feature")c(T,0);else if(T.type==="FeatureCollection")for(var A=0;A<T.features.length&&c(T.features[A],A)!==!1;A++);}function i(T,c,A){var k=A;return a(T,function(p,w){w===0&&A===void 0?k=p:k=c(k,p,w)}),k}function r(T){var c=[];return l(T,function(A){c.push(A)}),c}function n(T,c){var A,k,p,w,h,D,S,M,L,R,z=0,P=T.type==="FeatureCollection",I=T.type==="Feature",U=P?T.features.length:1;for(A=0;A<U;A++){for(D=P?T.features[A].geometry:I?T.geometry:T,M=P?T.features[A].properties:I?T.properties:{},L=P?T.features[A].bbox:I?T.bbox:void 0,R=P?T.features[A].id:I?T.id:void 0,S=D?D.type==="GeometryCollection":!1,h=S?D.geometries.length:1,p=0;p<h;p++){if(w=S?D.geometries[p]:D,w===null){if(c(null,z,M,L,R)===!1)return!1;continue}switch(w.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(c(w,z,M,L,R)===!1)return!1;break}case"GeometryCollection":{for(k=0;k<w.geometries.length;k++)if(c(w.geometries[k],z,M,L,R)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}z++}}function d(T,c,A){var k=A;return n(T,function(p,w,h,D,S){w===0&&A===void 0?k=p:k=c(k,p,w,h,D,S)}),k}function s(T,c){n(T,function(A,k,p,w,h){var D=A===null?null:A.type;switch(D){case null:case"Point":case"LineString":case"Polygon":return c(f.feature(A,p,{bbox:w,id:h}),k,0)===!1?!1:void 0}var S;switch(D){case"MultiPoint":S="Point";break;case"MultiLineString":S="LineString";break;case"MultiPolygon":S="Polygon";break}for(var M=0;M<A.coordinates.length;M++){var L=A.coordinates[M],R={type:S,coordinates:L};if(c(f.feature(R,p),k,M)===!1)return!1}})}function o(T,c,A){var k=A;return s(T,function(p,w,h){w===0&&h===0&&A===void 0?k=p:k=c(k,p,w,h)}),k}function y(T,c){s(T,function(A,k,p){var w=0;if(!!A.geometry){var h=A.geometry.type;if(!(h==="Point"||h==="MultiPoint")){var D,S=0,M=0,L=0;if(l(A,function(R,z,P,I,U){if(D===void 0||k>S||I>M||U>L){D=R,S=k,M=I,L=U,w=0;return}var O=f.lineString([D,R],A.properties);if(c(O,k,p,U,w)===!1)return!1;w++,D=R})===!1)return!1}}})}function g(T,c,A){var k=A,p=!1;return y(T,function(w,h,D,S,M){p===!1&&A===void 0?k=w:k=c(k,w,h,D,S,M),p=!0}),k}function b(T,c){if(!T)throw new Error("geojson is required");s(T,function(A,k,p){if(A.geometry!==null){var w=A.geometry.type,h=A.geometry.coordinates;switch(w){case"LineString":if(c(A,k,p,0,0)===!1)return!1;break;case"Polygon":for(var D=0;D<h.length;D++)if(c(f.lineString(h[D],A.properties),k,p,D)===!1)return!1;break}}})}function v(T,c,A){var k=A;return b(T,function(p,w,h,D){w===0&&A===void 0?k=p:k=c(k,p,w,h,D)}),k}function _(T,c){if(c=c||{},!f.isObject(c))throw new Error("options is invalid");var A=c.featureIndex||0,k=c.multiFeatureIndex||0,p=c.geometryIndex||0,w=c.segmentIndex||0,h=c.properties,D;switch(T.type){case"FeatureCollection":A<0&&(A=T.features.length+A),h=h||T.features[A].properties,D=T.features[A].geometry;break;case"Feature":h=h||T.properties,D=T.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":D=T;break;default:throw new Error("geojson is invalid")}if(D===null)return null;var S=D.coordinates;switch(D.type){case"Point":case"MultiPoint":return null;case"LineString":return w<0&&(w=S.length+w-1),f.lineString([S[w],S[w+1]],h,c);case"Polygon":return p<0&&(p=S.length+p),w<0&&(w=S[p].length+w-1),f.lineString([S[p][w],S[p][w+1]],h,c);case"MultiLineString":return k<0&&(k=S.length+k),w<0&&(w=S[k].length+w-1),f.lineString([S[k][w],S[k][w+1]],h,c);case"MultiPolygon":return k<0&&(k=S.length+k),p<0&&(p=S[k].length+p),w<0&&(w=S[k][p].length-w-1),f.lineString([S[k][p][w],S[k][p][w+1]],h,c)}throw new Error("geojson is invalid")}function u(T,c){if(c=c||{},!f.isObject(c))throw new Error("options is invalid");var A=c.featureIndex||0,k=c.multiFeatureIndex||0,p=c.geometryIndex||0,w=c.coordIndex||0,h=c.properties,D;switch(T.type){case"FeatureCollection":A<0&&(A=T.features.length+A),h=h||T.features[A].properties,D=T.features[A].geometry;break;case"Feature":h=h||T.properties,D=T.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":D=T;break;default:throw new Error("geojson is invalid")}if(D===null)return null;var S=D.coordinates;switch(D.type){case"Point":return f.point(S,h,c);case"MultiPoint":return k<0&&(k=S.length+k),f.point(S[k],h,c);case"LineString":return w<0&&(w=S.length+w),f.point(S[w],h,c);case"Polygon":return p<0&&(p=S.length+p),w<0&&(w=S[p].length+w),f.point(S[p][w],h,c);case"MultiLineString":return k<0&&(k=S.length+k),w<0&&(w=S[k].length+w),f.point(S[k][w],h,c);case"MultiPolygon":return k<0&&(k=S.length+k),p<0&&(p=S[k].length+p),w<0&&(w=S[k][p].length-w),f.point(S[k][p][w],h,c)}throw new Error("geojson is invalid")}V.coordEach=l,V.coordReduce=m,V.propEach=x,V.propReduce=t,V.featureEach=a,V.featureReduce=i,V.coordAll=r,V.geomEach=n,V.geomReduce=d,V.flattenEach=s,V.flattenReduce=o,V.segmentEach=y,V.segmentReduce=g,V.lineEach=b,V.lineReduce=v,V.findSegment=_,V.findPoint=u},{"@turf/helpers":62}],64:[function(e,B,V){Object.defineProperty(V,"__esModule",{value:!0});var f=e("@turf/meta");function l(m){var x=[1/0,1/0,-1/0,-1/0];return f.coordEach(m,function(t){x[0]>t[0]&&(x[0]=t[0]),x[1]>t[1]&&(x[1]=t[1]),x[2]<t[0]&&(x[2]=t[0]),x[3]<t[1]&&(x[3]=t[1])}),x}l.default=l,V.default=l},{"@turf/meta":66}],65:[function(e,B,V){arguments[4][62][0].apply(V,arguments)},{dup:62}],66:[function(e,B,V){arguments[4][63][0].apply(V,arguments)},{"@turf/helpers":65,dup:63}],67:[function(e,B,V){Object.defineProperty(V,"__esModule",{value:!0});var f=e("@turf/meta"),l=e("@turf/helpers");function m(x,t){t===void 0&&(t={});var a=0,i=0,r=0;return f.coordEach(x,function(n){a+=n[0],i+=n[1],r++}),l.point([a/r,i/r],t.properties)}V.default=m},{"@turf/helpers":68,"@turf/meta":69}],68:[function(e,B,V){Object.defineProperty(V,"__esModule",{value:!0}),V.earthRadius=63710088e-1,V.factors={centimeters:V.earthRadius*100,centimetres:V.earthRadius*100,degrees:V.earthRadius/111325,feet:V.earthRadius*3.28084,inches:V.earthRadius*39.37,kilometers:V.earthRadius/1e3,kilometres:V.earthRadius/1e3,meters:V.earthRadius,metres:V.earthRadius,miles:V.earthRadius/1609.344,millimeters:V.earthRadius*1e3,millimetres:V.earthRadius*1e3,nauticalmiles:V.earthRadius/1852,radians:1,yards:V.earthRadius/1.0936},V.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/V.earthRadius,yards:1/1.0936},V.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function f(U,O,G){G===void 0&&(G={});var $={type:"Feature"};return(G.id===0||G.id)&&($.id=G.id),G.bbox&&($.bbox=G.bbox),$.properties=O||{},$.geometry=U,$}V.feature=f;function l(U,O,G){switch(U){case"Point":return m(O).geometry;case"LineString":return i(O).geometry;case"Polygon":return t(O).geometry;case"MultiPoint":return s(O).geometry;case"MultiLineString":return d(O).geometry;case"MultiPolygon":return o(O).geometry;default:throw new Error(U+" is invalid")}}V.geometry=l;function m(U,O,G){G===void 0&&(G={});var $={type:"Point",coordinates:U};return f($,O,G)}V.point=m;function x(U,O,G){return G===void 0&&(G={}),n(U.map(function($){return m($,O)}),G)}V.points=x;function t(U,O,G){G===void 0&&(G={});for(var $=0,tt=U;$<tt.length;$++){var Z=tt[$];if(Z.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var X=0;X<Z[Z.length-1].length;X++)if(Z[Z.length-1][X]!==Z[0][X])throw new Error("First and last Position are not equivalent.")}var J={type:"Polygon",coordinates:U};return f(J,O,G)}V.polygon=t;function a(U,O,G){return G===void 0&&(G={}),n(U.map(function($){return t($,O)}),G)}V.polygons=a;function i(U,O,G){if(G===void 0&&(G={}),U.length<2)throw new Error("coordinates must be an array of two or more positions");var $={type:"LineString",coordinates:U};return f($,O,G)}V.lineString=i;function r(U,O,G){return G===void 0&&(G={}),n(U.map(function($){return i($,O)}),G)}V.lineStrings=r;function n(U,O){O===void 0&&(O={});var G={type:"FeatureCollection"};return O.id&&(G.id=O.id),O.bbox&&(G.bbox=O.bbox),G.features=U,G}V.featureCollection=n;function d(U,O,G){G===void 0&&(G={});var $={type:"MultiLineString",coordinates:U};return f($,O,G)}V.multiLineString=d;function s(U,O,G){G===void 0&&(G={});var $={type:"MultiPoint",coordinates:U};return f($,O,G)}V.multiPoint=s;function o(U,O,G){G===void 0&&(G={});var $={type:"MultiPolygon",coordinates:U};return f($,O,G)}V.multiPolygon=o;function y(U,O,G){G===void 0&&(G={});var $={type:"GeometryCollection",geometries:U};return f($,O,G)}V.geometryCollection=y;function g(U,O){if(O===void 0&&(O=0),O&&!(O>=0))throw new Error("precision must be a positive number");var G=Math.pow(10,O||0);return Math.round(U*G)/G}V.round=g;function b(U,O){O===void 0&&(O="kilometers");var G=V.factors[O];if(!G)throw new Error(O+" units is invalid");return U*G}V.radiansToLength=b;function v(U,O){O===void 0&&(O="kilometers");var G=V.factors[O];if(!G)throw new Error(O+" units is invalid");return U/G}V.lengthToRadians=v;function _(U,O){return T(v(U,O))}V.lengthToDegrees=_;function u(U){var O=U%360;return O<0&&(O+=360),O}V.bearingToAzimuth=u;function T(U){var O=U%(2*Math.PI);return O*180/Math.PI}V.radiansToDegrees=T;function c(U){var O=U%360;return O*Math.PI/180}V.degreesToRadians=c;function A(U,O,G){if(O===void 0&&(O="kilometers"),G===void 0&&(G="kilometers"),!(U>=0))throw new Error("length must be a positive number");return b(v(U,O),G)}V.convertLength=A;function k(U,O,G){if(O===void 0&&(O="meters"),G===void 0&&(G="kilometers"),!(U>=0))throw new Error("area must be a positive number");var $=V.areaFactors[O];if(!$)throw new Error("invalid original units");var tt=V.areaFactors[G];if(!tt)throw new Error("invalid final units");return U/$*tt}V.convertArea=k;function p(U){return!isNaN(U)&&U!==null&&!Array.isArray(U)&&!/^\s*$/.test(U)}V.isNumber=p;function w(U){return!!U&&U.constructor===Object}V.isObject=w;function h(U){if(!U)throw new Error("bbox is required");if(!Array.isArray(U))throw new Error("bbox must be an Array");if(U.length!==4&&U.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");U.forEach(function(O){if(!p(O))throw new Error("bbox must only contain numbers")})}V.validateBBox=h;function D(U){if(!U)throw new Error("id is required");if(["string","number"].indexOf(typeof U)===-1)throw new Error("id must be a number or a string")}V.validateId=D;function S(){throw new Error("method has been renamed to `radiansToDegrees`")}V.radians2degrees=S;function M(){throw new Error("method has been renamed to `degreesToRadians`")}V.degrees2radians=M;function L(){throw new Error("method has been renamed to `lengthToDegrees`")}V.distanceToDegrees=L;function R(){throw new Error("method has been renamed to `lengthToRadians`")}V.distanceToRadians=R;function z(){throw new Error("method has been renamed to `radiansToLength`")}V.radiansToDistance=z;function P(){throw new Error("method has been renamed to `bearingToAzimuth`")}V.bearingToAngle=P;function I(){throw new Error("method has been renamed to `convertLength`")}V.convertDistance=I},{}],69:[function(e,B,V){Object.defineProperty(V,"__esModule",{value:!0});var f=e("@turf/helpers");function l(T,c,A){if(T!==null)for(var k,p,w,h,D,S,M,L=0,R=0,z,P=T.type,I=P==="FeatureCollection",U=P==="Feature",O=I?T.features.length:1,G=0;G<O;G++){M=I?T.features[G].geometry:U?T.geometry:T,z=M?M.type==="GeometryCollection":!1,D=z?M.geometries.length:1;for(var $=0;$<D;$++){var tt=0,Z=0;if(h=z?M.geometries[$]:M,h!==null){S=h.coordinates;var X=h.type;switch(L=A&&(X==="Polygon"||X==="MultiPolygon")?1:0,X){case null:break;case"Point":if(c(S,R,G,tt,Z)===!1)return!1;R++,tt++;break;case"LineString":case"MultiPoint":for(k=0;k<S.length;k++){if(c(S[k],R,G,tt,Z)===!1)return!1;R++,X==="MultiPoint"&&tt++}X==="LineString"&&tt++;break;case"Polygon":case"MultiLineString":for(k=0;k<S.length;k++){for(p=0;p<S[k].length-L;p++){if(c(S[k][p],R,G,tt,Z)===!1)return!1;R++}X==="MultiLineString"&&tt++,X==="Polygon"&&Z++}X==="Polygon"&&tt++;break;case"MultiPolygon":for(k=0;k<S.length;k++){for(Z=0,p=0;p<S[k].length;p++){for(w=0;w<S[k][p].length-L;w++){if(c(S[k][p][w],R,G,tt,Z)===!1)return!1;R++}Z++}tt++}break;case"GeometryCollection":for(k=0;k<h.geometries.length;k++)if(l(h.geometries[k],c,A)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function m(T,c,A,k){var p=A;return l(T,function(w,h,D,S,M){h===0&&A===void 0?p=w:p=c(p,w,h,D,S,M)},k),p}function x(T,c){var A;switch(T.type){case"FeatureCollection":for(A=0;A<T.features.length&&c(T.features[A].properties,A)!==!1;A++);break;case"Feature":c(T.properties,0);break}}function t(T,c,A){var k=A;return x(T,function(p,w){w===0&&A===void 0?k=p:k=c(k,p,w)}),k}function a(T,c){if(T.type==="Feature")c(T,0);else if(T.type==="FeatureCollection")for(var A=0;A<T.features.length&&c(T.features[A],A)!==!1;A++);}function i(T,c,A){var k=A;return a(T,function(p,w){w===0&&A===void 0?k=p:k=c(k,p,w)}),k}function r(T){var c=[];return l(T,function(A){c.push(A)}),c}function n(T,c){var A,k,p,w,h,D,S,M,L,R,z=0,P=T.type==="FeatureCollection",I=T.type==="Feature",U=P?T.features.length:1;for(A=0;A<U;A++){for(D=P?T.features[A].geometry:I?T.geometry:T,M=P?T.features[A].properties:I?T.properties:{},L=P?T.features[A].bbox:I?T.bbox:void 0,R=P?T.features[A].id:I?T.id:void 0,S=D?D.type==="GeometryCollection":!1,h=S?D.geometries.length:1,p=0;p<h;p++){if(w=S?D.geometries[p]:D,w===null){if(c(null,z,M,L,R)===!1)return!1;continue}switch(w.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(c(w,z,M,L,R)===!1)return!1;break}case"GeometryCollection":{for(k=0;k<w.geometries.length;k++)if(c(w.geometries[k],z,M,L,R)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}z++}}function d(T,c,A){var k=A;return n(T,function(p,w,h,D,S){w===0&&A===void 0?k=p:k=c(k,p,w,h,D,S)}),k}function s(T,c){n(T,function(A,k,p,w,h){var D=A===null?null:A.type;switch(D){case null:case"Point":case"LineString":case"Polygon":return c(f.feature(A,p,{bbox:w,id:h}),k,0)===!1?!1:void 0}var S;switch(D){case"MultiPoint":S="Point";break;case"MultiLineString":S="LineString";break;case"MultiPolygon":S="Polygon";break}for(var M=0;M<A.coordinates.length;M++){var L=A.coordinates[M],R={type:S,coordinates:L};if(c(f.feature(R,p),k,M)===!1)return!1}})}function o(T,c,A){var k=A;return s(T,function(p,w,h){w===0&&h===0&&A===void 0?k=p:k=c(k,p,w,h)}),k}function y(T,c){s(T,function(A,k,p){var w=0;if(!!A.geometry){var h=A.geometry.type;if(!(h==="Point"||h==="MultiPoint")){var D,S=0,M=0,L=0;if(l(A,function(R,z,P,I,U){if(D===void 0||k>S||I>M||U>L){D=R,S=k,M=I,L=U,w=0;return}var O=f.lineString([D,R],A.properties);if(c(O,k,p,U,w)===!1)return!1;w++,D=R})===!1)return!1}}})}function g(T,c,A){var k=A,p=!1;return y(T,function(w,h,D,S,M){p===!1&&A===void 0?k=w:k=c(k,w,h,D,S,M),p=!0}),k}function b(T,c){if(!T)throw new Error("geojson is required");s(T,function(A,k,p){if(A.geometry!==null){var w=A.geometry.type,h=A.geometry.coordinates;switch(w){case"LineString":if(c(A,k,p,0,0)===!1)return!1;break;case"Polygon":for(var D=0;D<h.length;D++)if(c(f.lineString(h[D],A.properties),k,p,D)===!1)return!1;break}}})}function v(T,c,A){var k=A;return b(T,function(p,w,h,D){w===0&&A===void 0?k=p:k=c(k,p,w,h,D)}),k}function _(T,c){if(c=c||{},!f.isObject(c))throw new Error("options is invalid");var A=c.featureIndex||0,k=c.multiFeatureIndex||0,p=c.geometryIndex||0,w=c.segmentIndex||0,h=c.properties,D;switch(T.type){case"FeatureCollection":A<0&&(A=T.features.length+A),h=h||T.features[A].properties,D=T.features[A].geometry;break;case"Feature":h=h||T.properties,D=T.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":D=T;break;default:throw new Error("geojson is invalid")}if(D===null)return null;var S=D.coordinates;switch(D.type){case"Point":case"MultiPoint":return null;case"LineString":return w<0&&(w=S.length+w-1),f.lineString([S[w],S[w+1]],h,c);case"Polygon":return p<0&&(p=S.length+p),w<0&&(w=S[p].length+w-1),f.lineString([S[p][w],S[p][w+1]],h,c);case"MultiLineString":return k<0&&(k=S.length+k),w<0&&(w=S[k].length+w-1),f.lineString([S[k][w],S[k][w+1]],h,c);case"MultiPolygon":return k<0&&(k=S.length+k),p<0&&(p=S[k].length+p),w<0&&(w=S[k][p].length-w-1),f.lineString([S[k][p][w],S[k][p][w+1]],h,c)}throw new Error("geojson is invalid")}function u(T,c){if(c=c||{},!f.isObject(c))throw new Error("options is invalid");var A=c.featureIndex||0,k=c.multiFeatureIndex||0,p=c.geometryIndex||0,w=c.coordIndex||0,h=c.properties,D;switch(T.type){case"FeatureCollection":A<0&&(A=T.features.length+A),h=h||T.features[A].properties,D=T.features[A].geometry;break;case"Feature":h=h||T.properties,D=T.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":D=T;break;default:throw new Error("geojson is invalid")}if(D===null)return null;var S=D.coordinates;switch(D.type){case"Point":return f.point(S,h,c);case"MultiPoint":return k<0&&(k=S.length+k),f.point(S[k],h,c);case"LineString":return w<0&&(w=S.length+w),f.point(S[w],h,c);case"Polygon":return p<0&&(p=S.length+p),w<0&&(w=S[p].length+w),f.point(S[p][w],h,c);case"MultiLineString":return k<0&&(k=S.length+k),w<0&&(w=S[k].length+w),f.point(S[k][w],h,c);case"MultiPolygon":return k<0&&(k=S.length+k),p<0&&(p=S[k].length+p),w<0&&(w=S[k][p].length-w),f.point(S[k][p][w],h,c)}throw new Error("geojson is invalid")}V.coordEach=l,V.coordReduce=m,V.propEach=x,V.propReduce=t,V.featureEach=a,V.featureReduce=i,V.coordAll=r,V.geomEach=n,V.geomReduce=d,V.flattenEach=s,V.flattenReduce=o,V.segmentEach=y,V.segmentReduce=g,V.lineEach=b,V.lineReduce=v,V.findSegment=_,V.findPoint=u},{"@turf/helpers":68}],70:[function(e,B,V){B.exports=f;function f(l){var m=0,x=0,t=0,a=0;return l.map(function(i){i=i.slice();var r=i[0],n=r.toUpperCase();if(r!=n)switch(i[0]=n,r){case"a":i[6]+=t,i[7]+=a;break;case"v":i[1]+=a;break;case"h":i[1]+=t;break;default:for(var d=1;d<i.length;)i[d++]+=t,i[d++]+=a}switch(n){case"Z":t=m,a=x;break;case"H":t=i[1];break;case"V":a=i[1];break;case"M":t=m=i[1],a=x=i[2];break;default:t=i[i.length-2],a=i[i.length-1]}return i})}},{}],71:[function(e,B,V){B.exports=f;function f(l,m){if(!l||l.length==null)throw Error("Argument should be an array");m==null?m=1:m=Math.floor(m);for(var x=Array(m*2),t=0;t<m;t++){for(var a=-1/0,i=1/0,r=t,n=l.length;r<n;r+=m)l[r]>a&&(a=l[r]),l[r]<i&&(i=l[r]);x[t]=i,x[m+t]=a}return x}},{}],72:[function(e,B,V){B.exports=function(f,l,m){if(typeof Array.prototype.findIndex=="function")return f.findIndex(l,m);if(typeof l!="function")throw new TypeError("predicate must be a function");var x=Object(f),t=x.length;if(t===0)return-1;for(var a=0;a<t;a++)if(l.call(m,x[a],a,x))return a;return-1}},{}],73:[function(e,B,V){var f=e("array-bounds");B.exports=l;function l(m,x,t){if(!m||m.length==null)throw Error("Argument should be an array");x==null&&(x=1),t==null&&(t=f(m,x));for(var a=0;a<x;a++){var i=t[x+a],r=t[a],n=a,d=m.length;if(i===1/0&&r===-1/0)for(n=a;n<d;n+=x)m[n]=m[n]===i?1:m[n]===r?0:.5;else if(i===1/0)for(n=a;n<d;n+=x)m[n]=m[n]===i?1:0;else if(r===-1/0)for(n=a;n<d;n+=x)m[n]=m[n]===r?0:1;else{var s=i-r;for(n=a;n<d;n+=x)isNaN(m[n])||(m[n]=s===0?.5:(m[n]-r)/s)}}return m}},{"array-bounds":71}],74:[function(e,B,V){B.exports=function(l,m){var x=typeof l=="number",t=typeof m=="number";x&&!t?(m=l,l=0):!x&&!t&&(l=0,m=0),l=l|0,m=m|0;var a=m-l;if(a<0)throw new Error("array length must be positive");for(var i=new Array(a),r=0,n=l;r<a;r++,n++)i[r]=n;return i}},{}],75:[function(e,B,V){(function(f){(function(){var l=e("object-assign");/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function m(M,L){if(M===L)return 0;for(var R=M.length,z=L.length,P=0,I=Math.min(R,z);P<I;++P)if(M[P]!==L[P]){R=M[P],z=L[P];break}return R<z?-1:z<R?1:0}function x(M){return f.Buffer&&typeof f.Buffer.isBuffer=="function"?f.Buffer.isBuffer(M):!!(M!=null&&M._isBuffer)}var t=e("util/"),a=Object.prototype.hasOwnProperty,i=Array.prototype.slice,r=function(){return function(){}.name==="foo"}();function n(M){return Object.prototype.toString.call(M)}function d(M){return x(M)||typeof f.ArrayBuffer!="function"?!1:typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(M):M?!!(M instanceof DataView||M.buffer&&M.buffer instanceof ArrayBuffer):!1}var s=B.exports=u,o=/\s*function\s+([^\(\s]*)\s*/;function y(M){if(!!t.isFunction(M)){if(r)return M.name;var L=M.toString(),R=L.match(o);return R&&R[1]}}s.AssertionError=function(L){this.name="AssertionError",this.actual=L.actual,this.expected=L.expected,this.operator=L.operator,L.message?(this.message=L.message,this.generatedMessage=!1):(this.message=v(this),this.generatedMessage=!0);var R=L.stackStartFunction||_;if(Error.captureStackTrace)Error.captureStackTrace(this,R);else{var z=new Error;if(z.stack){var P=z.stack,I=y(R),U=P.indexOf(`
`+I);if(U>=0){var O=P.indexOf(`
`,U+1);P=P.substring(O+1)}this.stack=P}}},t.inherits(s.AssertionError,Error);function g(M,L){return typeof M=="string"?M.length<L?M:M.slice(0,L):M}function b(M){if(r||!t.isFunction(M))return t.inspect(M);var L=y(M),R=L?": "+L:"";return"[Function"+R+"]"}function v(M){return g(b(M.actual),128)+" "+M.operator+" "+g(b(M.expected),128)}function _(M,L,R,z,P){throw new s.AssertionError({message:R,actual:M,expected:L,operator:z,stackStartFunction:P})}s.fail=_;function u(M,L){M||_(M,!0,L,"==",s.ok)}s.ok=u,s.equal=function(L,R,z){L!=R&&_(L,R,z,"==",s.equal)},s.notEqual=function(L,R,z){L==R&&_(L,R,z,"!=",s.notEqual)},s.deepEqual=function(L,R,z){T(L,R,!1)||_(L,R,z,"deepEqual",s.deepEqual)},s.deepStrictEqual=function(L,R,z){T(L,R,!0)||_(L,R,z,"deepStrictEqual",s.deepStrictEqual)};function T(M,L,R,z){if(M===L)return!0;if(x(M)&&x(L))return m(M,L)===0;if(t.isDate(M)&&t.isDate(L))return M.getTime()===L.getTime();if(t.isRegExp(M)&&t.isRegExp(L))return M.source===L.source&&M.global===L.global&&M.multiline===L.multiline&&M.lastIndex===L.lastIndex&&M.ignoreCase===L.ignoreCase;if((M===null||typeof M!="object")&&(L===null||typeof L!="object"))return R?M===L:M==L;if(d(M)&&d(L)&&n(M)===n(L)&&!(M instanceof Float32Array||M instanceof Float64Array))return m(new Uint8Array(M.buffer),new Uint8Array(L.buffer))===0;if(x(M)!==x(L))return!1;z=z||{actual:[],expected:[]};var P=z.actual.indexOf(M);return P!==-1&&P===z.expected.indexOf(L)?!0:(z.actual.push(M),z.expected.push(L),A(M,L,R,z))}function c(M){return Object.prototype.toString.call(M)=="[object Arguments]"}function A(M,L,R,z){if(M==null||L===null||L===void 0)return!1;if(t.isPrimitive(M)||t.isPrimitive(L))return M===L;if(R&&Object.getPrototypeOf(M)!==Object.getPrototypeOf(L))return!1;var P=c(M),I=c(L);if(P&&!I||!P&&I)return!1;if(P)return M=i.call(M),L=i.call(L),T(M,L,R);var U=S(M),O=S(L),G,$;if(U.length!==O.length)return!1;for(U.sort(),O.sort(),$=U.length-1;$>=0;$--)if(U[$]!==O[$])return!1;for($=U.length-1;$>=0;$--)if(G=U[$],!T(M[G],L[G],R,z))return!1;return!0}s.notDeepEqual=function(L,R,z){T(L,R,!1)&&_(L,R,z,"notDeepEqual",s.notDeepEqual)},s.notDeepStrictEqual=k;function k(M,L,R){T(M,L,!0)&&_(M,L,R,"notDeepStrictEqual",k)}s.strictEqual=function(L,R,z){L!==R&&_(L,R,z,"===",s.strictEqual)},s.notStrictEqual=function(L,R,z){L===R&&_(L,R,z,"!==",s.notStrictEqual)};function p(M,L){if(!M||!L)return!1;if(Object.prototype.toString.call(L)=="[object RegExp]")return L.test(M);try{if(M instanceof L)return!0}catch{}return Error.isPrototypeOf(L)?!1:L.call({},M)===!0}function w(M){var L;try{M()}catch(R){L=R}return L}function h(M,L,R,z){var P;if(typeof L!="function")throw new TypeError('"block" argument must be a function');typeof R=="string"&&(z=R,R=null),P=w(L),z=(R&&R.name?" ("+R.name+").":".")+(z?" "+z:"."),M&&!P&&_(P,R,"Missing expected exception"+z);var I=typeof z=="string",U=!M&&t.isError(P),O=!M&&P&&!R;if((U&&I&&p(P,R)||O)&&_(P,R,"Got unwanted exception"+z),M&&P&&R&&!p(P,R)||!M&&P)throw P}s.throws=function(M,L,R){h(!0,M,L,R)},s.doesNotThrow=function(M,L,R){h(!1,M,L,R)},s.ifError=function(M){if(M)throw M};function D(M,L){M||_(M,!0,L,"==",D)}s.strict=l(D,s,{equal:s.strictEqual,deepEqual:s.deepStrictEqual,notEqual:s.notStrictEqual,notDeepEqual:s.notDeepStrictEqual}),s.strict.strict=s.strict;var S=Object.keys||function(M){var L=[];for(var R in M)a.call(M,R)&&L.push(R);return L}}).call(this)}).call(this,typeof zo<"u"?zo:typeof self<"u"?self:typeof window<"u"?window:{})},{"object-assign":247,"util/":78}],76:[function(e,B,V){typeof Object.create=="function"?B.exports=function(l,m){l.super_=m,l.prototype=Object.create(m.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}})}:B.exports=function(l,m){l.super_=m;var x=function(){};x.prototype=m.prototype,l.prototype=new x,l.prototype.constructor=l}},{}],77:[function(e,B,V){B.exports=function(l){return l&&typeof l=="object"&&typeof l.copy=="function"&&typeof l.fill=="function"&&typeof l.readUInt8=="function"}},{}],78:[function(e,B,V){(function(f,l){(function(){var m=/%[sdj%]/g;V.format=function(O){if(!A(O)){for(var G=[],$=0;$<arguments.length;$++)G.push(a(arguments[$]));return G.join(" ")}for(var $=1,tt=arguments,Z=tt.length,X=String(O).replace(m,function(st){if(st==="%%")return"%";if($>=Z)return st;switch(st){case"%s":return String(tt[$++]);case"%d":return Number(tt[$++]);case"%j":try{return JSON.stringify(tt[$++])}catch{return"[Circular]"}default:return st}}),J=tt[$];$<Z;J=tt[++$])u(J)||!h(J)?X+=" "+J:X+=" "+a(J);return X},V.deprecate=function(O,G){if(p(l.process))return function(){return V.deprecate(O,G).apply(this,arguments)};if(f.noDeprecation===!0)return O;var $=!1;function tt(){if(!$){if(f.throwDeprecation)throw new Error(G);f.traceDeprecation?console.trace(G):console.error(G),$=!0}return O.apply(this,arguments)}return tt};var x={},t;V.debuglog=function(O){if(p(t)&&(t=f.env.NODE_DEBUG||""),O=O.toUpperCase(),!x[O])if(new RegExp("\\b"+O+"\\b","i").test(t)){var G=f.pid;x[O]=function(){var $=V.format.apply(V,arguments);console.error("%s %d: %s",O,G,$)}}else x[O]=function(){};return x[O]};function a(O,G){var $={seen:[],stylize:r};return arguments.length>=3&&($.depth=arguments[2]),arguments.length>=4&&($.colors=arguments[3]),_(G)?$.showHidden=G:G&&V._extend($,G),p($.showHidden)&&($.showHidden=!1),p($.depth)&&($.depth=2),p($.colors)&&($.colors=!1),p($.customInspect)&&($.customInspect=!0),$.colors&&($.stylize=i),d($,O,$.depth)}V.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function i(O,G){var $=a.styles[G];return $?"\x1B["+a.colors[$][0]+"m"+O+"\x1B["+a.colors[$][1]+"m":O}function r(O,G){return O}function n(O){var G={};return O.forEach(function($,tt){G[$]=!0}),G}function d(O,G,$){if(O.customInspect&&G&&M(G.inspect)&&G.inspect!==V.inspect&&!(G.constructor&&G.constructor.prototype===G)){var tt=G.inspect($,O);return A(tt)||(tt=d(O,tt,$)),tt}var Z=s(O,G);if(Z)return Z;var X=Object.keys(G),J=n(X);if(O.showHidden&&(X=Object.getOwnPropertyNames(G)),S(G)&&(X.indexOf("message")>=0||X.indexOf("description")>=0))return o(G);if(X.length===0){if(M(G)){var st=G.name?": "+G.name:"";return O.stylize("[Function"+st+"]","special")}if(w(G))return O.stylize(RegExp.prototype.toString.call(G),"regexp");if(D(G))return O.stylize(Date.prototype.toString.call(G),"date");if(S(G))return o(G)}var at="",lt=!1,F=["{","}"];if(v(G)&&(lt=!0,F=["[","]"]),M(G)){var H=G.name?": "+G.name:"";at=" [Function"+H+"]"}if(w(G)&&(at=" "+RegExp.prototype.toString.call(G)),D(G)&&(at=" "+Date.prototype.toUTCString.call(G)),S(G)&&(at=" "+o(G)),X.length===0&&(!lt||G.length==0))return F[0]+at+F[1];if($<0)return w(G)?O.stylize(RegExp.prototype.toString.call(G),"regexp"):O.stylize("[Object]","special");O.seen.push(G);var et;return lt?et=y(O,G,$,J,X):et=X.map(function(q){return g(O,G,$,J,q,lt)}),O.seen.pop(),b(et,at,F)}function s(O,G){if(p(G))return O.stylize("undefined","undefined");if(A(G)){var $="'"+JSON.stringify(G).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return O.stylize($,"string")}if(c(G))return O.stylize(""+G,"number");if(_(G))return O.stylize(""+G,"boolean");if(u(G))return O.stylize("null","null")}function o(O){return"["+Error.prototype.toString.call(O)+"]"}function y(O,G,$,tt,Z){for(var X=[],J=0,st=G.length;J<st;++J)U(G,String(J))?X.push(g(O,G,$,tt,String(J),!0)):X.push("");return Z.forEach(function(at){at.match(/^\d+$/)||X.push(g(O,G,$,tt,at,!0))}),X}function g(O,G,$,tt,Z,X){var J,st,at;if(at=Object.getOwnPropertyDescriptor(G,Z)||{value:G[Z]},at.get?at.set?st=O.stylize("[Getter/Setter]","special"):st=O.stylize("[Getter]","special"):at.set&&(st=O.stylize("[Setter]","special")),U(tt,Z)||(J="["+Z+"]"),st||(O.seen.indexOf(at.value)<0?(u($)?st=d(O,at.value,null):st=d(O,at.value,$-1),st.indexOf(`
`)>-1&&(X?st=st.split(`
`).map(function(lt){return"  "+lt}).join(`
`).substr(2):st=`
`+st.split(`
`).map(function(lt){return"   "+lt}).join(`
`))):st=O.stylize("[Circular]","special")),p(J)){if(X&&Z.match(/^\d+$/))return st;J=JSON.stringify(""+Z),J.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(J=J.substr(1,J.length-2),J=O.stylize(J,"name")):(J=J.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),J=O.stylize(J,"string"))}return J+": "+st}function b(O,G,$){var tt=O.reduce(function(Z,X){return X.indexOf(`
`)>=0,Z+X.replace(/\u001b\[\d\d?m/g,"").length+1},0);return tt>60?$[0]+(G===""?"":G+`
 `)+" "+O.join(`,
  `)+" "+$[1]:$[0]+G+" "+O.join(", ")+" "+$[1]}function v(O){return Array.isArray(O)}V.isArray=v;function _(O){return typeof O=="boolean"}V.isBoolean=_;function u(O){return O===null}V.isNull=u;function T(O){return O==null}V.isNullOrUndefined=T;function c(O){return typeof O=="number"}V.isNumber=c;function A(O){return typeof O=="string"}V.isString=A;function k(O){return typeof O=="symbol"}V.isSymbol=k;function p(O){return O===void 0}V.isUndefined=p;function w(O){return h(O)&&R(O)==="[object RegExp]"}V.isRegExp=w;function h(O){return typeof O=="object"&&O!==null}V.isObject=h;function D(O){return h(O)&&R(O)==="[object Date]"}V.isDate=D;function S(O){return h(O)&&(R(O)==="[object Error]"||O instanceof Error)}V.isError=S;function M(O){return typeof O=="function"}V.isFunction=M;function L(O){return O===null||typeof O=="boolean"||typeof O=="number"||typeof O=="string"||typeof O=="symbol"||typeof O>"u"}V.isPrimitive=L,V.isBuffer=e("./support/isBuffer");function R(O){return Object.prototype.toString.call(O)}function z(O){return O<10?"0"+O.toString(10):O.toString(10)}var P=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function I(){var O=new Date,G=[z(O.getHours()),z(O.getMinutes()),z(O.getSeconds())].join(":");return[O.getDate(),P[O.getMonth()],G].join(" ")}V.log=function(){console.log("%s - %s",I(),V.format.apply(V,arguments))},V.inherits=e("inherits"),V._extend=function(O,G){if(!G||!h(G))return O;for(var $=Object.keys(G),tt=$.length;tt--;)O[$[tt]]=G[$[tt]];return O};function U(O,G){return Object.prototype.hasOwnProperty.call(O,G)}}).call(this)}).call(this,e("_process"),typeof zo<"u"?zo:typeof self<"u"?self:typeof window<"u"?window:{})},{"./support/isBuffer":77,_process:278,inherits:76}],79:[function(e,B,V){V.byteLength=r,V.toByteArray=d,V.fromByteArray=y;for(var f=[],l=[],m=typeof Uint8Array<"u"?Uint8Array:Array,x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,a=x.length;t<a;++t)f[t]=x[t],l[x.charCodeAt(t)]=t;l["-".charCodeAt(0)]=62,l["_".charCodeAt(0)]=63;function i(g){var b=g.length;if(b%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var v=g.indexOf("=");v===-1&&(v=b);var _=v===b?0:4-v%4;return[v,_]}function r(g){var b=i(g),v=b[0],_=b[1];return(v+_)*3/4-_}function n(g,b,v){return(b+v)*3/4-v}function d(g){var b,v=i(g),_=v[0],u=v[1],T=new m(n(g,_,u)),c=0,A=u>0?_-4:_,k;for(k=0;k<A;k+=4)b=l[g.charCodeAt(k)]<<18|l[g.charCodeAt(k+1)]<<12|l[g.charCodeAt(k+2)]<<6|l[g.charCodeAt(k+3)],T[c++]=b>>16&255,T[c++]=b>>8&255,T[c++]=b&255;return u===2&&(b=l[g.charCodeAt(k)]<<2|l[g.charCodeAt(k+1)]>>4,T[c++]=b&255),u===1&&(b=l[g.charCodeAt(k)]<<10|l[g.charCodeAt(k+1)]<<4|l[g.charCodeAt(k+2)]>>2,T[c++]=b>>8&255,T[c++]=b&255),T}function s(g){return f[g>>18&63]+f[g>>12&63]+f[g>>6&63]+f[g&63]}function o(g,b,v){for(var _,u=[],T=b;T<v;T+=3)_=(g[T]<<16&16711680)+(g[T+1]<<8&65280)+(g[T+2]&255),u.push(s(_));return u.join("")}function y(g){for(var b,v=g.length,_=v%3,u=[],T=16383,c=0,A=v-_;c<A;c+=T)u.push(o(g,c,c+T>A?A:c+T));return _===1?(b=g[v-1],u.push(f[b>>2]+f[b<<4&63]+"==")):_===2&&(b=(g[v-2]<<8)+g[v-1],u.push(f[b>>10]+f[b>>4&63]+f[b<<2&63]+"=")),u.join("")}},{}],80:[function(e,B,V){function f(i,r,n,d,s){for(var o=s+1;d<=s;){var y=d+s>>>1,g=i[y],b=n!==void 0?n(g,r):g-r;b>=0?(o=y,s=y-1):d=y+1}return o}function l(i,r,n,d,s){for(var o=s+1;d<=s;){var y=d+s>>>1,g=i[y],b=n!==void 0?n(g,r):g-r;b>0?(o=y,s=y-1):d=y+1}return o}function m(i,r,n,d,s){for(var o=d-1;d<=s;){var y=d+s>>>1,g=i[y],b=n!==void 0?n(g,r):g-r;b<0?(o=y,d=y+1):s=y-1}return o}function x(i,r,n,d,s){for(var o=d-1;d<=s;){var y=d+s>>>1,g=i[y],b=n!==void 0?n(g,r):g-r;b<=0?(o=y,d=y+1):s=y-1}return o}function t(i,r,n,d,s){for(;d<=s;){var o=d+s>>>1,y=i[o],g=n!==void 0?n(y,r):y-r;if(g===0)return o;g<=0?d=o+1:s=o-1}return-1}function a(i,r,n,d,s,o){return typeof n=="function"?o(i,r,n,d===void 0?0:d|0,s===void 0?i.length-1:s|0):o(i,r,void 0,n===void 0?0:n|0,d===void 0?i.length-1:d|0)}B.exports={ge:function(i,r,n,d,s){return a(i,r,n,d,s,f)},gt:function(i,r,n,d,s){return a(i,r,n,d,s,l)},lt:function(i,r,n,d,s){return a(i,r,n,d,s,m)},le:function(i,r,n,d,s){return a(i,r,n,d,s,x)},eq:function(i,r,n,d,s){return a(i,r,n,d,s,t)}}},{}],81:[function(e,B,V){var f=32;V.INT_BITS=f,V.INT_MAX=2147483647,V.INT_MIN=-1<<f-1,V.sign=function(x){return(x>0)-(x<0)},V.abs=function(x){var t=x>>f-1;return(x^t)-t},V.min=function(x,t){return t^(x^t)&-(x<t)},V.max=function(x,t){return x^(x^t)&-(x<t)},V.isPow2=function(x){return!(x&x-1)&&!!x},V.log2=function(x){var t,a;return t=(x>65535)<<4,x>>>=t,a=(x>255)<<3,x>>>=a,t|=a,a=(x>15)<<2,x>>>=a,t|=a,a=(x>3)<<1,x>>>=a,t|=a,t|x>>1},V.log10=function(x){return x>=1e9?9:x>=1e8?8:x>=1e7?7:x>=1e6?6:x>=1e5?5:x>=1e4?4:x>=1e3?3:x>=100?2:x>=10?1:0},V.popCount=function(x){return x=x-(x>>>1&1431655765),x=(x&858993459)+(x>>>2&858993459),(x+(x>>>4)&252645135)*16843009>>>24};function l(x){var t=32;return x&=-x,x&&t--,x&65535&&(t-=16),x&16711935&&(t-=8),x&252645135&&(t-=4),x&858993459&&(t-=2),x&1431655765&&(t-=1),t}V.countTrailingZeros=l,V.nextPow2=function(x){return x+=x===0,--x,x|=x>>>1,x|=x>>>2,x|=x>>>4,x|=x>>>8,x|=x>>>16,x+1},V.prevPow2=function(x){return x|=x>>>1,x|=x>>>2,x|=x>>>4,x|=x>>>8,x|=x>>>16,x-(x>>>1)},V.parity=function(x){return x^=x>>>16,x^=x>>>8,x^=x>>>4,x&=15,27030>>>x&1};var m=new Array(256);(function(x){for(var t=0;t<256;++t){var a=t,i=t,r=7;for(a>>>=1;a;a>>>=1)i<<=1,i|=a&1,--r;x[t]=i<<r&255}})(m),V.reverse=function(x){return m[x&255]<<24|m[x>>>8&255]<<16|m[x>>>16&255]<<8|m[x>>>24&255]},V.interleave2=function(x,t){return x&=65535,x=(x|x<<8)&16711935,x=(x|x<<4)&252645135,x=(x|x<<2)&858993459,x=(x|x<<1)&1431655765,t&=65535,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,x|t<<1},V.deinterleave2=function(x,t){return x=x>>>t&1431655765,x=(x|x>>>1)&858993459,x=(x|x>>>2)&252645135,x=(x|x>>>4)&16711935,x=(x|x>>>16)&65535,x<<16>>16},V.interleave3=function(x,t,a){return x&=1023,x=(x|x<<16)&4278190335,x=(x|x<<8)&251719695,x=(x|x<<4)&3272356035,x=(x|x<<2)&1227133513,t&=1023,t=(t|t<<16)&4278190335,t=(t|t<<8)&251719695,t=(t|t<<4)&3272356035,t=(t|t<<2)&1227133513,x|=t<<1,a&=1023,a=(a|a<<16)&4278190335,a=(a|a<<8)&251719695,a=(a|a<<4)&3272356035,a=(a|a<<2)&1227133513,x|a<<2},V.deinterleave3=function(x,t){return x=x>>>t&1227133513,x=(x|x>>>2)&3272356035,x=(x|x>>>4)&251719695,x=(x|x>>>8)&4278190335,x=(x|x>>>16)&1023,x<<22>>22},V.nextCombination=function(x){var t=x|x-1;return t+1|(~t&-~t)-1>>>l(x)+1}},{}],82:[function(e,B,V){var f=e("clamp");B.exports=m;var l=1e20;function m(a,i){i||(i={});var r=i.cutoff==null?.25:i.cutoff,n=i.radius==null?8:i.radius,d=i.channel||0,s,o,y,g,b,v,_,u,T,c,A;if(ArrayBuffer.isView(a)||Array.isArray(a)){if(!i.width||!i.height)throw Error("For raw data width and height should be provided by options");s=i.width,o=i.height,g=a,i.stride?v=i.stride:v=Math.floor(a.length/s/o)}else window.HTMLCanvasElement&&a instanceof window.HTMLCanvasElement?(u=a,_=u.getContext("2d"),s=u.width,o=u.height,T=_.getImageData(0,0,s,o),g=T.data,v=4):window.CanvasRenderingContext2D&&a instanceof window.CanvasRenderingContext2D?(u=a.canvas,_=a,s=u.width,o=u.height,T=_.getImageData(0,0,s,o),g=T.data,v=4):window.ImageData&&a instanceof window.ImageData&&(T=a,s=a.width,o=a.height,g=T.data,v=4);if(y=Math.max(s,o),window.Uint8ClampedArray&&g instanceof window.Uint8ClampedArray||window.Uint8Array&&g instanceof window.Uint8Array)for(b=g,g=Array(s*o),c=0,A=b.length;c<A;c++)g[c]=b[c*v+d]/255;else if(v!==1)throw Error("Raw data can have only 1 value per pixel");var k=Array(s*o),p=Array(s*o),w=Array(y),h=Array(y),D=Array(y+1),S=Array(y);for(c=0,A=s*o;c<A;c++){var M=g[c];k[c]=M===1?0:M===0?l:Math.pow(Math.max(0,.5-M),2),p[c]=M===1?l:M===0?0:Math.pow(Math.max(0,M-.5),2)}x(k,s,o,w,h,S,D),x(p,s,o,w,h,S,D);var L=window.Float32Array?new Float32Array(s*o):new Array(s*o);for(c=0,A=s*o;c<A;c++)L[c]=f(1-((k[c]-p[c])/n+r),0,1);return L}function x(a,i,r,n,d,s,o){for(var y=0;y<i;y++){for(var g=0;g<r;g++)n[g]=a[g*i+y];for(t(n,d,s,o,r),g=0;g<r;g++)a[g*i+y]=d[g]}for(g=0;g<r;g++){for(y=0;y<i;y++)n[y]=a[g*i+y];for(t(n,d,s,o,i),y=0;y<i;y++)a[g*i+y]=Math.sqrt(d[y])}}function t(a,i,r,n,d){r[0]=0,n[0]=-l,n[1]=+l;for(var s=1,o=0;s<d;s++){for(var y=(a[s]+s*s-(a[r[o]]+r[o]*r[o]))/(2*s-2*r[o]);y<=n[o];)o--,y=(a[s]+s*s-(a[r[o]]+r[o]*r[o]))/(2*s-2*r[o]);o++,r[o]=s,n[o]=y,n[o+1]=+l}for(s=0,o=0;s<d;s++){for(;n[o+1]<s;)o++;i[s]=(s-r[o])*(s-r[o])+a[r[o]]}}},{clamp:86}],83:[function(e,B,V){},{}],84:[function(e,B,V){var f=typeof Reflect=="object"?Reflect:null,l=f&&typeof f.apply=="function"?f.apply:function(c,A,k){return Function.prototype.apply.call(c,A,k)},m;f&&typeof f.ownKeys=="function"?m=f.ownKeys:Object.getOwnPropertySymbols?m=function(c){return Object.getOwnPropertyNames(c).concat(Object.getOwnPropertySymbols(c))}:m=function(c){return Object.getOwnPropertyNames(c)};function x(T){console&&console.warn&&console.warn(T)}var t=Number.isNaN||function(c){return c!==c};function a(){a.init.call(this)}B.exports=a,B.exports.once=u,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var i=10;function r(T){if(typeof T!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof T)}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return i},set:function(T){if(typeof T!="number"||T<0||t(T))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+T+".");i=T}}),a.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(c){if(typeof c!="number"||c<0||t(c))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+c+".");return this._maxListeners=c,this};function n(T){return T._maxListeners===void 0?a.defaultMaxListeners:T._maxListeners}a.prototype.getMaxListeners=function(){return n(this)},a.prototype.emit=function(c){for(var A=[],k=1;k<arguments.length;k++)A.push(arguments[k]);var p=c==="error",w=this._events;if(w!==void 0)p=p&&w.error===void 0;else if(!p)return!1;if(p){var h;if(A.length>0&&(h=A[0]),h instanceof Error)throw h;var D=new Error("Unhandled error."+(h?" ("+h.message+")":""));throw D.context=h,D}var S=w[c];if(S===void 0)return!1;if(typeof S=="function")l(S,this,A);else for(var M=S.length,L=b(S,M),k=0;k<M;++k)l(L[k],this,A);return!0};function d(T,c,A,k){var p,w,h;if(r(A),w=T._events,w===void 0?(w=T._events=Object.create(null),T._eventsCount=0):(w.newListener!==void 0&&(T.emit("newListener",c,A.listener?A.listener:A),w=T._events),h=w[c]),h===void 0)h=w[c]=A,++T._eventsCount;else if(typeof h=="function"?h=w[c]=k?[A,h]:[h,A]:k?h.unshift(A):h.push(A),p=n(T),p>0&&h.length>p&&!h.warned){h.warned=!0;var D=new Error("Possible EventEmitter memory leak detected. "+h.length+" "+String(c)+" listeners added. Use emitter.setMaxListeners() to increase limit");D.name="MaxListenersExceededWarning",D.emitter=T,D.type=c,D.count=h.length,x(D)}return T}a.prototype.addListener=function(c,A){return d(this,c,A,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(c,A){return d(this,c,A,!0)};function s(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function o(T,c,A){var k={fired:!1,wrapFn:void 0,target:T,type:c,listener:A},p=s.bind(k);return p.listener=A,k.wrapFn=p,p}a.prototype.once=function(c,A){return r(A),this.on(c,o(this,c,A)),this},a.prototype.prependOnceListener=function(c,A){return r(A),this.prependListener(c,o(this,c,A)),this},a.prototype.removeListener=function(c,A){var k,p,w,h,D;if(r(A),p=this._events,p===void 0)return this;if(k=p[c],k===void 0)return this;if(k===A||k.listener===A)--this._eventsCount===0?this._events=Object.create(null):(delete p[c],p.removeListener&&this.emit("removeListener",c,k.listener||A));else if(typeof k!="function"){for(w=-1,h=k.length-1;h>=0;h--)if(k[h]===A||k[h].listener===A){D=k[h].listener,w=h;break}if(w<0)return this;w===0?k.shift():v(k,w),k.length===1&&(p[c]=k[0]),p.removeListener!==void 0&&this.emit("removeListener",c,D||A)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(c){var A,k,p;if(k=this._events,k===void 0)return this;if(k.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):k[c]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete k[c]),this;if(arguments.length===0){var w=Object.keys(k),h;for(p=0;p<w.length;++p)h=w[p],h!=="removeListener"&&this.removeAllListeners(h);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(A=k[c],typeof A=="function")this.removeListener(c,A);else if(A!==void 0)for(p=A.length-1;p>=0;p--)this.removeListener(c,A[p]);return this};function y(T,c,A){var k=T._events;if(k===void 0)return[];var p=k[c];return p===void 0?[]:typeof p=="function"?A?[p.listener||p]:[p]:A?_(p):b(p,p.length)}a.prototype.listeners=function(c){return y(this,c,!0)},a.prototype.rawListeners=function(c){return y(this,c,!1)},a.listenerCount=function(T,c){return typeof T.listenerCount=="function"?T.listenerCount(c):g.call(T,c)},a.prototype.listenerCount=g;function g(T){var c=this._events;if(c!==void 0){var A=c[T];if(typeof A=="function")return 1;if(A!==void 0)return A.length}return 0}a.prototype.eventNames=function(){return this._eventsCount>0?m(this._events):[]};function b(T,c){for(var A=new Array(c),k=0;k<c;++k)A[k]=T[k];return A}function v(T,c){for(;c+1<T.length;c++)T[c]=T[c+1];T.pop()}function _(T){for(var c=new Array(T.length),A=0;A<c.length;++A)c[A]=T[A].listener||T[A];return c}function u(T,c){return new Promise(function(A,k){function p(){w!==void 0&&T.removeListener("error",w),A([].slice.call(arguments))}var w;c!=="error"&&(w=function(D){T.removeListener(c,p),k(D)},T.once("error",w)),T.once(c,p)})}},{}],85:[function(e,B,V){(function(f){(function(){var l=e("base64-js"),m=e("ieee754");V.Buffer=i,V.SlowBuffer=_,V.INSPECT_MAX_BYTES=50;var x=2147483647;V.kMaxLength=x,i.TYPED_ARRAY_SUPPORT=t(),!i.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function t(){try{var it=new Uint8Array(1);return it.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},it.foo()===42}catch{return!1}}Object.defineProperty(i.prototype,"parent",{enumerable:!0,get:function(){if(!!i.isBuffer(this))return this.buffer}}),Object.defineProperty(i.prototype,"offset",{enumerable:!0,get:function(){if(!!i.isBuffer(this))return this.byteOffset}});function a(it){if(it>x)throw new RangeError('The value "'+it+'" is invalid for option "size"');var ot=new Uint8Array(it);return ot.__proto__=i.prototype,ot}function i(it,ot,ct){if(typeof it=="number"){if(typeof ot=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return s(it)}return r(it,ot,ct)}typeof Symbol<"u"&&Symbol.species!=null&&i[Symbol.species]===i&&Object.defineProperty(i,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),i.poolSize=8192;function r(it,ot,ct){if(typeof it=="string")return o(it,ot);if(ArrayBuffer.isView(it))return y(it);if(it==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof it);if(K(it,ArrayBuffer)||it&&K(it.buffer,ArrayBuffer))return g(it,ot,ct);if(typeof it=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var bt=it.valueOf&&it.valueOf();if(bt!=null&&bt!==it)return i.from(bt,ot,ct);var ut=b(it);if(ut)return ut;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof it[Symbol.toPrimitive]=="function")return i.from(it[Symbol.toPrimitive]("string"),ot,ct);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof it)}i.from=function(it,ot,ct){return r(it,ot,ct)},i.prototype.__proto__=Uint8Array.prototype,i.__proto__=Uint8Array;function n(it){if(typeof it!="number")throw new TypeError('"size" argument must be of type number');if(it<0)throw new RangeError('The value "'+it+'" is invalid for option "size"')}function d(it,ot,ct){return n(it),it<=0?a(it):ot!==void 0?typeof ct=="string"?a(it).fill(ot,ct):a(it).fill(ot):a(it)}i.alloc=function(it,ot,ct){return d(it,ot,ct)};function s(it){return n(it),a(it<0?0:v(it)|0)}i.allocUnsafe=function(it){return s(it)},i.allocUnsafeSlow=function(it){return s(it)};function o(it,ot){if((typeof ot!="string"||ot==="")&&(ot="utf8"),!i.isEncoding(ot))throw new TypeError("Unknown encoding: "+ot);var ct=u(it,ot)|0,bt=a(ct),ut=bt.write(it,ot);return ut!==ct&&(bt=bt.slice(0,ut)),bt}function y(it){for(var ot=it.length<0?0:v(it.length)|0,ct=a(ot),bt=0;bt<ot;bt+=1)ct[bt]=it[bt]&255;return ct}function g(it,ot,ct){if(ot<0||it.byteLength<ot)throw new RangeError('"offset" is outside of buffer bounds');if(it.byteLength<ot+(ct||0))throw new RangeError('"length" is outside of buffer bounds');var bt;return ot===void 0&&ct===void 0?bt=new Uint8Array(it):ct===void 0?bt=new Uint8Array(it,ot):bt=new Uint8Array(it,ot,ct),bt.__proto__=i.prototype,bt}function b(it){if(i.isBuffer(it)){var ot=v(it.length)|0,ct=a(ot);return ct.length===0||it.copy(ct,0,0,ot),ct}if(it.length!==void 0)return typeof it.length!="number"||nt(it.length)?a(0):y(it);if(it.type==="Buffer"&&Array.isArray(it.data))return y(it.data)}function v(it){if(it>=x)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+x.toString(16)+" bytes");return it|0}function _(it){return+it!=it&&(it=0),i.alloc(+it)}i.isBuffer=function(ot){return ot!=null&&ot._isBuffer===!0&&ot!==i.prototype},i.compare=function(ot,ct){if(K(ot,Uint8Array)&&(ot=i.from(ot,ot.offset,ot.byteLength)),K(ct,Uint8Array)&&(ct=i.from(ct,ct.offset,ct.byteLength)),!i.isBuffer(ot)||!i.isBuffer(ct))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(ot===ct)return 0;for(var bt=ot.length,ut=ct.length,pt=0,yt=Math.min(bt,ut);pt<yt;++pt)if(ot[pt]!==ct[pt]){bt=ot[pt],ut=ct[pt];break}return bt<ut?-1:ut<bt?1:0},i.isEncoding=function(ot){switch(String(ot).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(ot,ct){if(!Array.isArray(ot))throw new TypeError('"list" argument must be an Array of Buffers');if(ot.length===0)return i.alloc(0);var bt;if(ct===void 0)for(ct=0,bt=0;bt<ot.length;++bt)ct+=ot[bt].length;var ut=i.allocUnsafe(ct),pt=0;for(bt=0;bt<ot.length;++bt){var yt=ot[bt];if(K(yt,Uint8Array)&&(yt=i.from(yt)),!i.isBuffer(yt))throw new TypeError('"list" argument must be an Array of Buffers');yt.copy(ut,pt),pt+=yt.length}return ut};function u(it,ot){if(i.isBuffer(it))return it.length;if(ArrayBuffer.isView(it)||K(it,ArrayBuffer))return it.byteLength;if(typeof it!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof it);var ct=it.length,bt=arguments.length>2&&arguments[2]===!0;if(!bt&&ct===0)return 0;for(var ut=!1;;)switch(ot){case"ascii":case"latin1":case"binary":return ct;case"utf8":case"utf-8":return F(it).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ct*2;case"hex":return ct>>>1;case"base64":return q(it).length;default:if(ut)return bt?-1:F(it).length;ot=(""+ot).toLowerCase(),ut=!0}}i.byteLength=u;function T(it,ot,ct){var bt=!1;if((ot===void 0||ot<0)&&(ot=0),ot>this.length||((ct===void 0||ct>this.length)&&(ct=this.length),ct<=0)||(ct>>>=0,ot>>>=0,ct<=ot))return"";for(it||(it="utf8");;)switch(it){case"hex":return O(this,ot,ct);case"utf8":case"utf-8":return R(this,ot,ct);case"ascii":return I(this,ot,ct);case"latin1":case"binary":return U(this,ot,ct);case"base64":return L(this,ot,ct);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return G(this,ot,ct);default:if(bt)throw new TypeError("Unknown encoding: "+it);it=(it+"").toLowerCase(),bt=!0}}i.prototype._isBuffer=!0;function c(it,ot,ct){var bt=it[ot];it[ot]=it[ct],it[ct]=bt}i.prototype.swap16=function(){var ot=this.length;if(ot%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var ct=0;ct<ot;ct+=2)c(this,ct,ct+1);return this},i.prototype.swap32=function(){var ot=this.length;if(ot%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var ct=0;ct<ot;ct+=4)c(this,ct,ct+3),c(this,ct+1,ct+2);return this},i.prototype.swap64=function(){var ot=this.length;if(ot%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var ct=0;ct<ot;ct+=8)c(this,ct,ct+7),c(this,ct+1,ct+6),c(this,ct+2,ct+5),c(this,ct+3,ct+4);return this},i.prototype.toString=function(){var ot=this.length;return ot===0?"":arguments.length===0?R(this,0,ot):T.apply(this,arguments)},i.prototype.toLocaleString=i.prototype.toString,i.prototype.equals=function(ot){if(!i.isBuffer(ot))throw new TypeError("Argument must be a Buffer");return this===ot?!0:i.compare(this,ot)===0},i.prototype.inspect=function(){var ot="",ct=V.INSPECT_MAX_BYTES;return ot=this.toString("hex",0,ct).replace(/(.{2})/g,"$1 ").trim(),this.length>ct&&(ot+=" ... "),"<Buffer "+ot+">"},i.prototype.compare=function(ot,ct,bt,ut,pt){if(K(ot,Uint8Array)&&(ot=i.from(ot,ot.offset,ot.byteLength)),!i.isBuffer(ot))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof ot);if(ct===void 0&&(ct=0),bt===void 0&&(bt=ot?ot.length:0),ut===void 0&&(ut=0),pt===void 0&&(pt=this.length),ct<0||bt>ot.length||ut<0||pt>this.length)throw new RangeError("out of range index");if(ut>=pt&&ct>=bt)return 0;if(ut>=pt)return-1;if(ct>=bt)return 1;if(ct>>>=0,bt>>>=0,ut>>>=0,pt>>>=0,this===ot)return 0;for(var yt=pt-ut,Tt=bt-ct,kt=Math.min(yt,Tt),zt=this.slice(ut,pt),Rt=ot.slice(ct,bt),Gt=0;Gt<kt;++Gt)if(zt[Gt]!==Rt[Gt]){yt=zt[Gt],Tt=Rt[Gt];break}return yt<Tt?-1:Tt<yt?1:0};function A(it,ot,ct,bt,ut){if(it.length===0)return-1;if(typeof ct=="string"?(bt=ct,ct=0):ct>2147483647?ct=2147483647:ct<-2147483648&&(ct=-2147483648),ct=+ct,nt(ct)&&(ct=ut?0:it.length-1),ct<0&&(ct=it.length+ct),ct>=it.length){if(ut)return-1;ct=it.length-1}else if(ct<0)if(ut)ct=0;else return-1;if(typeof ot=="string"&&(ot=i.from(ot,bt)),i.isBuffer(ot))return ot.length===0?-1:k(it,ot,ct,bt,ut);if(typeof ot=="number")return ot=ot&255,typeof Uint8Array.prototype.indexOf=="function"?ut?Uint8Array.prototype.indexOf.call(it,ot,ct):Uint8Array.prototype.lastIndexOf.call(it,ot,ct):k(it,[ot],ct,bt,ut);throw new TypeError("val must be string, number or Buffer")}function k(it,ot,ct,bt,ut){var pt=1,yt=it.length,Tt=ot.length;if(bt!==void 0&&(bt=String(bt).toLowerCase(),bt==="ucs2"||bt==="ucs-2"||bt==="utf16le"||bt==="utf-16le")){if(it.length<2||ot.length<2)return-1;pt=2,yt/=2,Tt/=2,ct/=2}function kt(It,$t){return pt===1?It[$t]:It.readUInt16BE($t*pt)}var zt;if(ut){var Rt=-1;for(zt=ct;zt<yt;zt++)if(kt(it,zt)===kt(ot,Rt===-1?0:zt-Rt)){if(Rt===-1&&(Rt=zt),zt-Rt+1===Tt)return Rt*pt}else Rt!==-1&&(zt-=zt-Rt),Rt=-1}else for(ct+Tt>yt&&(ct=yt-Tt),zt=ct;zt>=0;zt--){for(var Gt=!0,wt=0;wt<Tt;wt++)if(kt(it,zt+wt)!==kt(ot,wt)){Gt=!1;break}if(Gt)return zt}return-1}i.prototype.includes=function(ot,ct,bt){return this.indexOf(ot,ct,bt)!==-1},i.prototype.indexOf=function(ot,ct,bt){return A(this,ot,ct,bt,!0)},i.prototype.lastIndexOf=function(ot,ct,bt){return A(this,ot,ct,bt,!1)};function p(it,ot,ct,bt){ct=Number(ct)||0;var ut=it.length-ct;bt?(bt=Number(bt),bt>ut&&(bt=ut)):bt=ut;var pt=ot.length;bt>pt/2&&(bt=pt/2);for(var yt=0;yt<bt;++yt){var Tt=parseInt(ot.substr(yt*2,2),16);if(nt(Tt))return yt;it[ct+yt]=Tt}return yt}function w(it,ot,ct,bt){return W(F(ot,it.length-ct),it,ct,bt)}function h(it,ot,ct,bt){return W(H(ot),it,ct,bt)}function D(it,ot,ct,bt){return h(it,ot,ct,bt)}function S(it,ot,ct,bt){return W(q(ot),it,ct,bt)}function M(it,ot,ct,bt){return W(et(ot,it.length-ct),it,ct,bt)}i.prototype.write=function(ot,ct,bt,ut){if(ct===void 0)ut="utf8",bt=this.length,ct=0;else if(bt===void 0&&typeof ct=="string")ut=ct,bt=this.length,ct=0;else if(isFinite(ct))ct=ct>>>0,isFinite(bt)?(bt=bt>>>0,ut===void 0&&(ut="utf8")):(ut=bt,bt=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var pt=this.length-ct;if((bt===void 0||bt>pt)&&(bt=pt),ot.length>0&&(bt<0||ct<0)||ct>this.length)throw new RangeError("Attempt to write outside buffer bounds");ut||(ut="utf8");for(var yt=!1;;)switch(ut){case"hex":return p(this,ot,ct,bt);case"utf8":case"utf-8":return w(this,ot,ct,bt);case"ascii":return h(this,ot,ct,bt);case"latin1":case"binary":return D(this,ot,ct,bt);case"base64":return S(this,ot,ct,bt);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,ot,ct,bt);default:if(yt)throw new TypeError("Unknown encoding: "+ut);ut=(""+ut).toLowerCase(),yt=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function L(it,ot,ct){return ot===0&&ct===it.length?l.fromByteArray(it):l.fromByteArray(it.slice(ot,ct))}function R(it,ot,ct){ct=Math.min(it.length,ct);for(var bt=[],ut=ot;ut<ct;){var pt=it[ut],yt=null,Tt=pt>239?4:pt>223?3:pt>191?2:1;if(ut+Tt<=ct){var kt,zt,Rt,Gt;switch(Tt){case 1:pt<128&&(yt=pt);break;case 2:kt=it[ut+1],(kt&192)===128&&(Gt=(pt&31)<<6|kt&63,Gt>127&&(yt=Gt));break;case 3:kt=it[ut+1],zt=it[ut+2],(kt&192)===128&&(zt&192)===128&&(Gt=(pt&15)<<12|(kt&63)<<6|zt&63,Gt>2047&&(Gt<55296||Gt>57343)&&(yt=Gt));break;case 4:kt=it[ut+1],zt=it[ut+2],Rt=it[ut+3],(kt&192)===128&&(zt&192)===128&&(Rt&192)===128&&(Gt=(pt&15)<<18|(kt&63)<<12|(zt&63)<<6|Rt&63,Gt>65535&&Gt<1114112&&(yt=Gt))}}yt===null?(yt=65533,Tt=1):yt>65535&&(yt-=65536,bt.push(yt>>>10&1023|55296),yt=56320|yt&1023),bt.push(yt),ut+=Tt}return P(bt)}var z=4096;function P(it){var ot=it.length;if(ot<=z)return String.fromCharCode.apply(String,it);for(var ct="",bt=0;bt<ot;)ct+=String.fromCharCode.apply(String,it.slice(bt,bt+=z));return ct}function I(it,ot,ct){var bt="";ct=Math.min(it.length,ct);for(var ut=ot;ut<ct;++ut)bt+=String.fromCharCode(it[ut]&127);return bt}function U(it,ot,ct){var bt="";ct=Math.min(it.length,ct);for(var ut=ot;ut<ct;++ut)bt+=String.fromCharCode(it[ut]);return bt}function O(it,ot,ct){var bt=it.length;(!ot||ot<0)&&(ot=0),(!ct||ct<0||ct>bt)&&(ct=bt);for(var ut="",pt=ot;pt<ct;++pt)ut+=lt(it[pt]);return ut}function G(it,ot,ct){for(var bt=it.slice(ot,ct),ut="",pt=0;pt<bt.length;pt+=2)ut+=String.fromCharCode(bt[pt]+bt[pt+1]*256);return ut}i.prototype.slice=function(ot,ct){var bt=this.length;ot=~~ot,ct=ct===void 0?bt:~~ct,ot<0?(ot+=bt,ot<0&&(ot=0)):ot>bt&&(ot=bt),ct<0?(ct+=bt,ct<0&&(ct=0)):ct>bt&&(ct=bt),ct<ot&&(ct=ot);var ut=this.subarray(ot,ct);return ut.__proto__=i.prototype,ut};function $(it,ot,ct){if(it%1!==0||it<0)throw new RangeError("offset is not uint");if(it+ot>ct)throw new RangeError("Trying to access beyond buffer length")}i.prototype.readUIntLE=function(ot,ct,bt){ot=ot>>>0,ct=ct>>>0,bt||$(ot,ct,this.length);for(var ut=this[ot],pt=1,yt=0;++yt<ct&&(pt*=256);)ut+=this[ot+yt]*pt;return ut},i.prototype.readUIntBE=function(ot,ct,bt){ot=ot>>>0,ct=ct>>>0,bt||$(ot,ct,this.length);for(var ut=this[ot+--ct],pt=1;ct>0&&(pt*=256);)ut+=this[ot+--ct]*pt;return ut},i.prototype.readUInt8=function(ot,ct){return ot=ot>>>0,ct||$(ot,1,this.length),this[ot]},i.prototype.readUInt16LE=function(ot,ct){return ot=ot>>>0,ct||$(ot,2,this.length),this[ot]|this[ot+1]<<8},i.prototype.readUInt16BE=function(ot,ct){return ot=ot>>>0,ct||$(ot,2,this.length),this[ot]<<8|this[ot+1]},i.prototype.readUInt32LE=function(ot,ct){return ot=ot>>>0,ct||$(ot,4,this.length),(this[ot]|this[ot+1]<<8|this[ot+2]<<16)+this[ot+3]*16777216},i.prototype.readUInt32BE=function(ot,ct){return ot=ot>>>0,ct||$(ot,4,this.length),this[ot]*16777216+(this[ot+1]<<16|this[ot+2]<<8|this[ot+3])},i.prototype.readIntLE=function(ot,ct,bt){ot=ot>>>0,ct=ct>>>0,bt||$(ot,ct,this.length);for(var ut=this[ot],pt=1,yt=0;++yt<ct&&(pt*=256);)ut+=this[ot+yt]*pt;return pt*=128,ut>=pt&&(ut-=Math.pow(2,8*ct)),ut},i.prototype.readIntBE=function(ot,ct,bt){ot=ot>>>0,ct=ct>>>0,bt||$(ot,ct,this.length);for(var ut=ct,pt=1,yt=this[ot+--ut];ut>0&&(pt*=256);)yt+=this[ot+--ut]*pt;return pt*=128,yt>=pt&&(yt-=Math.pow(2,8*ct)),yt},i.prototype.readInt8=function(ot,ct){return ot=ot>>>0,ct||$(ot,1,this.length),this[ot]&128?(255-this[ot]+1)*-1:this[ot]},i.prototype.readInt16LE=function(ot,ct){ot=ot>>>0,ct||$(ot,2,this.length);var bt=this[ot]|this[ot+1]<<8;return bt&32768?bt|4294901760:bt},i.prototype.readInt16BE=function(ot,ct){ot=ot>>>0,ct||$(ot,2,this.length);var bt=this[ot+1]|this[ot]<<8;return bt&32768?bt|4294901760:bt},i.prototype.readInt32LE=function(ot,ct){return ot=ot>>>0,ct||$(ot,4,this.length),this[ot]|this[ot+1]<<8|this[ot+2]<<16|this[ot+3]<<24},i.prototype.readInt32BE=function(ot,ct){return ot=ot>>>0,ct||$(ot,4,this.length),this[ot]<<24|this[ot+1]<<16|this[ot+2]<<8|this[ot+3]},i.prototype.readFloatLE=function(ot,ct){return ot=ot>>>0,ct||$(ot,4,this.length),m.read(this,ot,!0,23,4)},i.prototype.readFloatBE=function(ot,ct){return ot=ot>>>0,ct||$(ot,4,this.length),m.read(this,ot,!1,23,4)},i.prototype.readDoubleLE=function(ot,ct){return ot=ot>>>0,ct||$(ot,8,this.length),m.read(this,ot,!0,52,8)},i.prototype.readDoubleBE=function(ot,ct){return ot=ot>>>0,ct||$(ot,8,this.length),m.read(this,ot,!1,52,8)};function tt(it,ot,ct,bt,ut,pt){if(!i.isBuffer(it))throw new TypeError('"buffer" argument must be a Buffer instance');if(ot>ut||ot<pt)throw new RangeError('"value" argument is out of bounds');if(ct+bt>it.length)throw new RangeError("Index out of range")}i.prototype.writeUIntLE=function(ot,ct,bt,ut){if(ot=+ot,ct=ct>>>0,bt=bt>>>0,!ut){var pt=Math.pow(2,8*bt)-1;tt(this,ot,ct,bt,pt,0)}var yt=1,Tt=0;for(this[ct]=ot&255;++Tt<bt&&(yt*=256);)this[ct+Tt]=ot/yt&255;return ct+bt},i.prototype.writeUIntBE=function(ot,ct,bt,ut){if(ot=+ot,ct=ct>>>0,bt=bt>>>0,!ut){var pt=Math.pow(2,8*bt)-1;tt(this,ot,ct,bt,pt,0)}var yt=bt-1,Tt=1;for(this[ct+yt]=ot&255;--yt>=0&&(Tt*=256);)this[ct+yt]=ot/Tt&255;return ct+bt},i.prototype.writeUInt8=function(ot,ct,bt){return ot=+ot,ct=ct>>>0,bt||tt(this,ot,ct,1,255,0),this[ct]=ot&255,ct+1},i.prototype.writeUInt16LE=function(ot,ct,bt){return ot=+ot,ct=ct>>>0,bt||tt(this,ot,ct,2,65535,0),this[ct]=ot&255,this[ct+1]=ot>>>8,ct+2},i.prototype.writeUInt16BE=function(ot,ct,bt){return ot=+ot,ct=ct>>>0,bt||tt(this,ot,ct,2,65535,0),this[ct]=ot>>>8,this[ct+1]=ot&255,ct+2},i.prototype.writeUInt32LE=function(ot,ct,bt){return ot=+ot,ct=ct>>>0,bt||tt(this,ot,ct,4,4294967295,0),this[ct+3]=ot>>>24,this[ct+2]=ot>>>16,this[ct+1]=ot>>>8,this[ct]=ot&255,ct+4},i.prototype.writeUInt32BE=function(ot,ct,bt){return ot=+ot,ct=ct>>>0,bt||tt(this,ot,ct,4,4294967295,0),this[ct]=ot>>>24,this[ct+1]=ot>>>16,this[ct+2]=ot>>>8,this[ct+3]=ot&255,ct+4},i.prototype.writeIntLE=function(ot,ct,bt,ut){if(ot=+ot,ct=ct>>>0,!ut){var pt=Math.pow(2,8*bt-1);tt(this,ot,ct,bt,pt-1,-pt)}var yt=0,Tt=1,kt=0;for(this[ct]=ot&255;++yt<bt&&(Tt*=256);)ot<0&&kt===0&&this[ct+yt-1]!==0&&(kt=1),this[ct+yt]=(ot/Tt>>0)-kt&255;return ct+bt},i.prototype.writeIntBE=function(ot,ct,bt,ut){if(ot=+ot,ct=ct>>>0,!ut){var pt=Math.pow(2,8*bt-1);tt(this,ot,ct,bt,pt-1,-pt)}var yt=bt-1,Tt=1,kt=0;for(this[ct+yt]=ot&255;--yt>=0&&(Tt*=256);)ot<0&&kt===0&&this[ct+yt+1]!==0&&(kt=1),this[ct+yt]=(ot/Tt>>0)-kt&255;return ct+bt},i.prototype.writeInt8=function(ot,ct,bt){return ot=+ot,ct=ct>>>0,bt||tt(this,ot,ct,1,127,-128),ot<0&&(ot=255+ot+1),this[ct]=ot&255,ct+1},i.prototype.writeInt16LE=function(ot,ct,bt){return ot=+ot,ct=ct>>>0,bt||tt(this,ot,ct,2,32767,-32768),this[ct]=ot&255,this[ct+1]=ot>>>8,ct+2},i.prototype.writeInt16BE=function(ot,ct,bt){return ot=+ot,ct=ct>>>0,bt||tt(this,ot,ct,2,32767,-32768),this[ct]=ot>>>8,this[ct+1]=ot&255,ct+2},i.prototype.writeInt32LE=function(ot,ct,bt){return ot=+ot,ct=ct>>>0,bt||tt(this,ot,ct,4,2147483647,-2147483648),this[ct]=ot&255,this[ct+1]=ot>>>8,this[ct+2]=ot>>>16,this[ct+3]=ot>>>24,ct+4},i.prototype.writeInt32BE=function(ot,ct,bt){return ot=+ot,ct=ct>>>0,bt||tt(this,ot,ct,4,2147483647,-2147483648),ot<0&&(ot=4294967295+ot+1),this[ct]=ot>>>24,this[ct+1]=ot>>>16,this[ct+2]=ot>>>8,this[ct+3]=ot&255,ct+4};function Z(it,ot,ct,bt,ut,pt){if(ct+bt>it.length)throw new RangeError("Index out of range");if(ct<0)throw new RangeError("Index out of range")}function X(it,ot,ct,bt,ut){return ot=+ot,ct=ct>>>0,ut||Z(it,ot,ct,4),m.write(it,ot,ct,bt,23,4),ct+4}i.prototype.writeFloatLE=function(ot,ct,bt){return X(this,ot,ct,!0,bt)},i.prototype.writeFloatBE=function(ot,ct,bt){return X(this,ot,ct,!1,bt)};function J(it,ot,ct,bt,ut){return ot=+ot,ct=ct>>>0,ut||Z(it,ot,ct,8),m.write(it,ot,ct,bt,52,8),ct+8}i.prototype.writeDoubleLE=function(ot,ct,bt){return J(this,ot,ct,!0,bt)},i.prototype.writeDoubleBE=function(ot,ct,bt){return J(this,ot,ct,!1,bt)},i.prototype.copy=function(ot,ct,bt,ut){if(!i.isBuffer(ot))throw new TypeError("argument should be a Buffer");if(bt||(bt=0),!ut&&ut!==0&&(ut=this.length),ct>=ot.length&&(ct=ot.length),ct||(ct=0),ut>0&&ut<bt&&(ut=bt),ut===bt||ot.length===0||this.length===0)return 0;if(ct<0)throw new RangeError("targetStart out of bounds");if(bt<0||bt>=this.length)throw new RangeError("Index out of range");if(ut<0)throw new RangeError("sourceEnd out of bounds");ut>this.length&&(ut=this.length),ot.length-ct<ut-bt&&(ut=ot.length-ct+bt);var pt=ut-bt;if(this===ot&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(ct,bt,ut);else if(this===ot&&bt<ct&&ct<ut)for(var yt=pt-1;yt>=0;--yt)ot[yt+ct]=this[yt+bt];else Uint8Array.prototype.set.call(ot,this.subarray(bt,ut),ct);return pt},i.prototype.fill=function(ot,ct,bt,ut){if(typeof ot=="string"){if(typeof ct=="string"?(ut=ct,ct=0,bt=this.length):typeof bt=="string"&&(ut=bt,bt=this.length),ut!==void 0&&typeof ut!="string")throw new TypeError("encoding must be a string");if(typeof ut=="string"&&!i.isEncoding(ut))throw new TypeError("Unknown encoding: "+ut);if(ot.length===1){var pt=ot.charCodeAt(0);(ut==="utf8"&&pt<128||ut==="latin1")&&(ot=pt)}}else typeof ot=="number"&&(ot=ot&255);if(ct<0||this.length<ct||this.length<bt)throw new RangeError("Out of range index");if(bt<=ct)return this;ct=ct>>>0,bt=bt===void 0?this.length:bt>>>0,ot||(ot=0);var yt;if(typeof ot=="number")for(yt=ct;yt<bt;++yt)this[yt]=ot;else{var Tt=i.isBuffer(ot)?ot:i.from(ot,ut),kt=Tt.length;if(kt===0)throw new TypeError('The value "'+ot+'" is invalid for argument "value"');for(yt=0;yt<bt-ct;++yt)this[yt+ct]=Tt[yt%kt]}return this};var st=/[^+/0-9A-Za-z-_]/g;function at(it){if(it=it.split("=")[0],it=it.trim().replace(st,""),it.length<2)return"";for(;it.length%4!==0;)it=it+"=";return it}function lt(it){return it<16?"0"+it.toString(16):it.toString(16)}function F(it,ot){ot=ot||1/0;for(var ct,bt=it.length,ut=null,pt=[],yt=0;yt<bt;++yt){if(ct=it.charCodeAt(yt),ct>55295&&ct<57344){if(!ut){if(ct>56319){(ot-=3)>-1&&pt.push(239,191,189);continue}else if(yt+1===bt){(ot-=3)>-1&&pt.push(239,191,189);continue}ut=ct;continue}if(ct<56320){(ot-=3)>-1&&pt.push(239,191,189),ut=ct;continue}ct=(ut-55296<<10|ct-56320)+65536}else ut&&(ot-=3)>-1&&pt.push(239,191,189);if(ut=null,ct<128){if((ot-=1)<0)break;pt.push(ct)}else if(ct<2048){if((ot-=2)<0)break;pt.push(ct>>6|192,ct&63|128)}else if(ct<65536){if((ot-=3)<0)break;pt.push(ct>>12|224,ct>>6&63|128,ct&63|128)}else if(ct<1114112){if((ot-=4)<0)break;pt.push(ct>>18|240,ct>>12&63|128,ct>>6&63|128,ct&63|128)}else throw new Error("Invalid code point")}return pt}function H(it){for(var ot=[],ct=0;ct<it.length;++ct)ot.push(it.charCodeAt(ct)&255);return ot}function et(it,ot){for(var ct,bt,ut,pt=[],yt=0;yt<it.length&&!((ot-=2)<0);++yt)ct=it.charCodeAt(yt),bt=ct>>8,ut=ct%256,pt.push(ut),pt.push(bt);return pt}function q(it){return l.toByteArray(at(it))}function W(it,ot,ct,bt){for(var ut=0;ut<bt&&!(ut+ct>=ot.length||ut>=it.length);++ut)ot[ut+ct]=it[ut];return ut}function K(it,ot){return it instanceof ot||it!=null&&it.constructor!=null&&it.constructor.name!=null&&it.constructor.name===ot.name}function nt(it){return it!==it}}).call(this)}).call(this,e("buffer").Buffer)},{"base64-js":79,buffer:85,ieee754:230}],86:[function(e,B,V){B.exports=f;function f(l,m,x){return m<x?l<m?m:l>x?x:l:l<x?x:l>m?m:l}},{}],87:[function(e,B,V){var f=e("clamp");B.exports=l,B.exports.to=l,B.exports.from=m;function l(x,t){t==null&&(t=!0);var a=x[0],i=x[1],r=x[2],n=x[3];n==null&&(n=t?1:255),t&&(a*=255,i*=255,r*=255,n*=255),a=f(a,0,255)&255,i=f(i,0,255)&255,r=f(r,0,255)&255,n=f(n,0,255)&255;var d=a*16777216+(i<<16)+(r<<8)+n;return d}function m(x,t){x=+x;var a=x>>>24,i=(x&16711680)>>>16,r=(x&65280)>>>8,n=x&255;return t===!1?[a,i,r,n]:[a/255,i/255,r/255,n/255]}},{clamp:86}],88:[function(e,B,V){B.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],89:[function(e,B,V){var f=e("color-rgba"),l=e("clamp"),m=e("dtype");B.exports=function(a,i){(i==="float"||!i)&&(i="array"),i==="uint"&&(i="uint8"),i==="uint_clamped"&&(i="uint8_clamped");var r=m(i),n=new r(4),d=i!=="uint8"&&i!=="uint8_clamped";return(!a.length||typeof a=="string")&&(a=f(a),a[0]/=255,a[1]/=255,a[2]/=255),x(a)?(n[0]=a[0],n[1]=a[1],n[2]=a[2],n[3]=a[3]!=null?a[3]:255,d&&(n[0]/=255,n[1]/=255,n[2]/=255,n[3]/=255),n):(d?(n[0]=a[0],n[1]=a[1],n[2]=a[2],n[3]=a[3]!=null?a[3]:1):(n[0]=l(Math.floor(a[0]*255),0,255),n[1]=l(Math.floor(a[1]*255),0,255),n[2]=l(Math.floor(a[2]*255),0,255),n[3]=a[3]==null?255:l(Math.floor(a[3]*255),0,255)),n)};function x(t){return!!(t instanceof Uint8Array||t instanceof Uint8ClampedArray||Array.isArray(t)&&(t[0]>1||t[0]===0)&&(t[1]>1||t[1]===0)&&(t[2]>1||t[2]===0)&&(!t[3]||t[3]>1))}},{clamp:86,"color-rgba":91,dtype:127}],90:[function(e,B,V){(function(f){(function(){var l=e("color-name"),m=e("is-plain-obj"),x=e("defined");B.exports=a;var t={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function a(i){var r,n=[],d=1,s;if(typeof i=="string")if(l[i])n=l[i].slice(),s="rgb";else if(i==="transparent")d=0,s="rgb",n=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(i)){var o=i.slice(1),y=o.length,g=y<=4;d=1,g?(n=[parseInt(o[0]+o[0],16),parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16)],y===4&&(d=parseInt(o[3]+o[3],16)/255)):(n=[parseInt(o[0]+o[1],16),parseInt(o[2]+o[3],16),parseInt(o[4]+o[5],16)],y===8&&(d=parseInt(o[6]+o[7],16)/255)),n[0]||(n[0]=0),n[1]||(n[1]=0),n[2]||(n[2]=0),s="rgb"}else if(r=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(i)){var b=r[1],v=b==="rgb",o=b.replace(/a$/,"");s=o;var y=o==="cmyk"?4:o==="gray"?1:3;n=r[2].trim().split(/\s*,\s*/).map(function(c,A){if(/%$/.test(c))return A===y?parseFloat(c)/100:o==="rgb"?parseFloat(c)*255/100:parseFloat(c);if(o[A]==="h"){if(/deg$/.test(c))return parseFloat(c);if(t[c]!==void 0)return t[c]}return parseFloat(c)}),b===o&&n.push(1),d=v||n[y]===void 0?1:n[y],n=n.slice(0,y)}else i.length>10&&/[0-9](?:\s|\/)/.test(i)&&(n=i.match(/([0-9]+)/g).map(function(u){return parseFloat(u)}),s=i.match(/([a-z])/ig).join("").toLowerCase());else if(!isNaN(i))s="rgb",n=[i>>>16,(i&65280)>>>8,i&255];else if(m(i)){var _=x(i.r,i.red,i.R,null);_!==null?(s="rgb",n=[_,x(i.g,i.green,i.G),x(i.b,i.blue,i.B)]):(s="hsl",n=[x(i.h,i.hue,i.H),x(i.s,i.saturation,i.S),x(i.l,i.lightness,i.L,i.b,i.brightness)]),d=x(i.a,i.alpha,i.opacity,1),i.opacity!=null&&(d/=100)}else(Array.isArray(i)||f.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(i))&&(n=[i[0],i[1],i[2]],s="rgb",d=i.length===4?i[3]:1);return{space:s,values:n,alpha:d}}}).call(this)}).call(this,typeof zo<"u"?zo:typeof self<"u"?self:typeof window<"u"?window:{})},{"color-name":88,defined:124,"is-plain-obj":236}],91:[function(e,B,V){var f=e("color-parse"),l=e("color-space/hsl"),m=e("clamp");B.exports=function(t){var a,i=f(t);return i.space?(a=Array(3),a[0]=m(i.values[0],0,255),a[1]=m(i.values[1],0,255),a[2]=m(i.values[2],0,255),i.space[0]==="h"&&(a=l.rgb(a)),a.push(m(i.alpha,0,1)),a):[]}},{clamp:86,"color-parse":90,"color-space/hsl":92}],92:[function(e,B,V){var f=e("./rgb");B.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(l){var m=l[0]/360,x=l[1]/100,t=l[2]/100,a,i,r,n,d;if(x===0)return d=t*255,[d,d,d];t<.5?i=t*(1+x):i=t+x-t*x,a=2*t-i,n=[0,0,0];for(var s=0;s<3;s++)r=m+1/3*-(s-1),r<0?r++:r>1&&r--,6*r<1?d=a+(i-a)*6*r:2*r<1?d=i:3*r<2?d=a+(i-a)*(2/3-r)*6:d=a,n[s]=d*255;return n}},f.hsl=function(l){var m=l[0]/255,x=l[1]/255,t=l[2]/255,a=Math.min(m,x,t),i=Math.max(m,x,t),r=i-a,n,d,s;return i===a?n=0:m===i?n=(x-t)/r:x===i?n=2+(t-m)/r:t===i&&(n=4+(m-x)/r),n=Math.min(n*60,360),n<0&&(n+=360),s=(a+i)/2,i===a?d=0:s<=.5?d=r/(i+a):d=r/(2-i-a),[n,d*100,s*100]}},{"./rgb":93}],93:[function(e,B,V){B.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},{}],94:[function(e,B,V){B.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|\xE7)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|\xE9)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|\xE9)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|\xE3)o.?tom(e|\xE9)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},{}],95:[function(e,B,V){B.exports=["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]},{}],96:[function(e,B,V){B.exports=["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]},{}],97:[function(e,B,V){B.exports=["normal","italic","oblique"]},{}],98:[function(e,B,V){B.exports=["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]},{}],99:[function(e,B,V){B.exports={parse:e("./parse"),stringify:e("./stringify")}},{"./parse":101,"./stringify":102}],100:[function(e,B,V){var f=e("css-font-size-keywords");B.exports={isSize:function(m){return/^[\d\.]/.test(m)||m.indexOf("/")!==-1||f.indexOf(m)!==-1}}},{"css-font-size-keywords":95}],101:[function(e,B,V){var f=e("unquote"),l=e("css-global-keywords"),m=e("css-system-font-keywords"),x=e("css-font-weight-keywords"),t=e("css-font-style-keywords"),a=e("css-font-stretch-keywords"),i=e("string-split-by"),r=e("./lib/util").isSize;B.exports=d;var n=d.cache={};function d(o){if(typeof o!="string")throw new Error("Font argument must be a string.");if(n[o])return n[o];if(o==="")throw new Error("Cannot parse an empty string.");if(m.indexOf(o)!==-1)return n[o]={system:o};for(var y={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},g=i(o,/\s+/),b;b=g.shift();){if(l.indexOf(b)!==-1)return["style","variant","weight","stretch"].forEach(function(_){y[_]=b}),n[o]=y;if(t.indexOf(b)!==-1){y.style=b;continue}if(b==="normal"||b==="small-caps"){y.variant=b;continue}if(a.indexOf(b)!==-1){y.stretch=b;continue}if(x.indexOf(b)!==-1){y.weight=b;continue}if(r(b)){var v=i(b,"/");if(y.size=v[0],v[1]!=null?y.lineHeight=s(v[1]):g[0]==="/"&&(g.shift(),y.lineHeight=s(g.shift())),!g.length)throw new Error("Missing required font-family.");return y.family=i(g.join(" "),/\s*,\s*/).map(f),n[o]=y}throw new Error("Unknown or unsupported font token: "+b)}throw new Error("Missing required font-size.")}function s(o){var y=parseFloat(o);return y.toString()===o?y:o}},{"./lib/util":100,"css-font-stretch-keywords":96,"css-font-style-keywords":97,"css-font-weight-keywords":98,"css-global-keywords":103,"css-system-font-keywords":104,"string-split-by":306,unquote:329}],102:[function(e,B,V){var f=e("pick-by-alias"),l=e("./lib/util").isSize,m=o(e("css-global-keywords")),x=o(e("css-system-font-keywords")),t=o(e("css-font-weight-keywords")),a=o(e("css-font-style-keywords")),i=o(e("css-font-stretch-keywords")),r={normal:1,"small-caps":1},n={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},d={style:"normal",variant:"normal",weight:"normal",stretch:"normal",size:"1rem",lineHeight:"normal",family:"serif"};B.exports=function(g){if(g=f(g,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"}),g.system)return g.system&&s(g.system,x),g.system;if(s(g.style,a),s(g.variant,r),s(g.weight,t),s(g.stretch,i),g.size==null&&(g.size=d.size),typeof g.size=="number"&&(g.size+="px"),!l)throw Error("Bad size value `"+g.size+"`");g.family||(g.family=d.family),Array.isArray(g.family)&&(g.family.length||(g.family=[d.family]),g.family=g.family.map(function(v){return n[v]?v:'"'+v+'"'}).join(", "));var b=[];return b.push(g.style),g.variant!==g.style&&b.push(g.variant),g.weight!==g.variant&&g.weight!==g.style&&b.push(g.weight),g.stretch!==g.weight&&g.stretch!==g.variant&&g.stretch!==g.style&&b.push(g.stretch),b.push(g.size+(g.lineHeight==null||g.lineHeight==="normal"||g.lineHeight+""=="1"?"":"/"+g.lineHeight)),b.push(g.family),b.filter(Boolean).join(" ")};function s(y,g){if(y&&!g[y]&&!m[y])throw Error("Unknown keyword `"+y+"`");return y}function o(y){for(var g={},b=0;b<y.length;b++)g[y[b]]=1;return g}},{"./lib/util":100,"css-font-stretch-keywords":96,"css-font-style-keywords":97,"css-font-weight-keywords":98,"css-global-keywords":103,"css-system-font-keywords":104,"pick-by-alias":253}],103:[function(e,B,V){B.exports=["inherit","initial","unset"]},{}],104:[function(e,B,V){B.exports=["caption","icon","menu","message-box","small-caption","status-bar"]},{}],105:[function(e,B,V){var f=e("type/value/is"),l=e("type/value/ensure"),m=e("type/plain-function/ensure"),x=e("es5-ext/object/copy"),t=e("es5-ext/object/normalize-options"),a=e("es5-ext/object/map"),i=Function.prototype.bind,r=Object.defineProperty,n=Object.prototype.hasOwnProperty,d;d=function(s,o,y){var g=l(o)&&m(o.value),b;return b=x(o),delete b.writable,delete b.value,b.get=function(){return!y.overwriteDefinition&&n.call(this,s)?g:(o.value=i.call(g,y.resolveContext?y.resolveContext(this):this),r(this,s,o),this[s])},b},B.exports=function(s){var o=t(arguments[1]);return f(o.resolveContext)&&m(o.resolveContext),a(s,function(y,g){return d(g,y,o)})}},{"es5-ext/object/copy":147,"es5-ext/object/map":155,"es5-ext/object/normalize-options":156,"type/plain-function/ensure":322,"type/value/ensure":326,"type/value/is":327}],106:[function(e,B,V){var f=e("type/value/is"),l=e("type/plain-function/is"),m=e("es5-ext/object/assign"),x=e("es5-ext/object/normalize-options"),t=e("es5-ext/string/#/contains"),a=B.exports=function(i,r){var n,d,s,o,y;return arguments.length<2||typeof i!="string"?(o=r,r=i,i=null):o=arguments[2],f(i)?(n=t.call(i,"c"),d=t.call(i,"e"),s=t.call(i,"w")):(n=s=!0,d=!1),y={value:r,configurable:n,enumerable:d,writable:s},o?m(x(o),y):y};a.gs=function(i,r,n){var d,s,o,y;return typeof i!="string"?(o=n,n=r,r=i,i=null):o=arguments[3],f(r)?l(r)?f(n)?l(n)||(o=n,n=void 0):n=void 0:(o=r,r=n=void 0):r=void 0,f(i)?(d=t.call(i,"c"),s=t.call(i,"e")):(d=!0,s=!1),y={get:r,set:n,configurable:d,enumerable:s},o?m(x(o),y):y}},{"es5-ext/object/assign":144,"es5-ext/object/normalize-options":156,"es5-ext/string/#/contains":163,"type/plain-function/is":323,"type/value/is":327}],107:[function(e,B,V){(function(f,l){l(typeof V=="object"&&typeof B<"u"?V:f.d3=f.d3||{})})(this,function(f){function l(F,H){return F<H?-1:F>H?1:F>=H?0:NaN}function m(F){return F.length===1&&(F=x(F)),{left:function(H,et,q,W){for(q==null&&(q=0),W==null&&(W=H.length);q<W;){var K=q+W>>>1;F(H[K],et)<0?q=K+1:W=K}return q},right:function(H,et,q,W){for(q==null&&(q=0),W==null&&(W=H.length);q<W;){var K=q+W>>>1;F(H[K],et)>0?W=K:q=K+1}return q}}}function x(F){return function(H,et){return l(F(H),et)}}var t=m(l),a=t.right,i=t.left;function r(F,H){H==null&&(H=n);for(var et=0,q=F.length-1,W=F[0],K=new Array(q<0?0:q);et<q;)K[et]=H(W,W=F[++et]);return K}function n(F,H){return[F,H]}function d(F,H,et){var q=F.length,W=H.length,K=new Array(q*W),nt,it,ot,ct;for(et==null&&(et=n),nt=ot=0;nt<q;++nt)for(ct=F[nt],it=0;it<W;++it,++ot)K[ot]=et(ct,H[it]);return K}function s(F,H){return H<F?-1:H>F?1:H>=F?0:NaN}function o(F){return F===null?NaN:+F}function y(F,H){var et=F.length,q=0,W=-1,K=0,nt,it,ot=0;if(H==null)for(;++W<et;)isNaN(nt=o(F[W]))||(it=nt-K,K+=it/++q,ot+=it*(nt-K));else for(;++W<et;)isNaN(nt=o(H(F[W],W,F)))||(it=nt-K,K+=it/++q,ot+=it*(nt-K));if(q>1)return ot/(q-1)}function g(F,H){var et=y(F,H);return et&&Math.sqrt(et)}function b(F,H){var et=F.length,q=-1,W,K,nt;if(H==null){for(;++q<et;)if((W=F[q])!=null&&W>=W)for(K=nt=W;++q<et;)(W=F[q])!=null&&(K>W&&(K=W),nt<W&&(nt=W))}else for(;++q<et;)if((W=H(F[q],q,F))!=null&&W>=W)for(K=nt=W;++q<et;)(W=H(F[q],q,F))!=null&&(K>W&&(K=W),nt<W&&(nt=W));return[K,nt]}var v=Array.prototype,_=v.slice,u=v.map;function T(F){return function(){return F}}function c(F){return F}function A(F,H,et){F=+F,H=+H,et=(W=arguments.length)<2?(H=F,F=0,1):W<3?1:+et;for(var q=-1,W=Math.max(0,Math.ceil((H-F)/et))|0,K=new Array(W);++q<W;)K[q]=F+q*et;return K}var k=Math.sqrt(50),p=Math.sqrt(10),w=Math.sqrt(2);function h(F,H,et){var q,W=-1,K,nt,it;if(H=+H,F=+F,et=+et,F===H&&et>0)return[F];if((q=H<F)&&(K=F,F=H,H=K),(it=D(F,H,et))===0||!isFinite(it))return[];if(it>0)for(F=Math.ceil(F/it),H=Math.floor(H/it),nt=new Array(K=Math.ceil(H-F+1));++W<K;)nt[W]=(F+W)*it;else for(F=Math.floor(F*it),H=Math.ceil(H*it),nt=new Array(K=Math.ceil(F-H+1));++W<K;)nt[W]=(F-W)/it;return q&&nt.reverse(),nt}function D(F,H,et){var q=(H-F)/Math.max(0,et),W=Math.floor(Math.log(q)/Math.LN10),K=q/Math.pow(10,W);return W>=0?(K>=k?10:K>=p?5:K>=w?2:1)*Math.pow(10,W):-Math.pow(10,-W)/(K>=k?10:K>=p?5:K>=w?2:1)}function S(F,H,et){var q=Math.abs(H-F)/Math.max(0,et),W=Math.pow(10,Math.floor(Math.log(q)/Math.LN10)),K=q/W;return K>=k?W*=10:K>=p?W*=5:K>=w&&(W*=2),H<F?-W:W}function M(F){return Math.ceil(Math.log(F.length)/Math.LN2)+1}function L(){var F=c,H=b,et=M;function q(W){var K,nt=W.length,it,ot=new Array(nt);for(K=0;K<nt;++K)ot[K]=F(W[K],K,W);var ct=H(ot),bt=ct[0],ut=ct[1],pt=et(ot,bt,ut);Array.isArray(pt)||(pt=S(bt,ut,pt),pt=A(Math.ceil(bt/pt)*pt,ut,pt));for(var yt=pt.length;pt[0]<=bt;)pt.shift(),--yt;for(;pt[yt-1]>ut;)pt.pop(),--yt;var Tt=new Array(yt+1),kt;for(K=0;K<=yt;++K)kt=Tt[K]=[],kt.x0=K>0?pt[K-1]:bt,kt.x1=K<yt?pt[K]:ut;for(K=0;K<nt;++K)it=ot[K],bt<=it&&it<=ut&&Tt[a(pt,it,0,yt)].push(W[K]);return Tt}return q.value=function(W){return arguments.length?(F=typeof W=="function"?W:T(W),q):F},q.domain=function(W){return arguments.length?(H=typeof W=="function"?W:T([W[0],W[1]]),q):H},q.thresholds=function(W){return arguments.length?(et=typeof W=="function"?W:Array.isArray(W)?T(_.call(W)):T(W),q):et},q}function R(F,H,et){if(et==null&&(et=o),!!(q=F.length)){if((H=+H)<=0||q<2)return+et(F[0],0,F);if(H>=1)return+et(F[q-1],q-1,F);var q,W=(q-1)*H,K=Math.floor(W),nt=+et(F[K],K,F),it=+et(F[K+1],K+1,F);return nt+(it-nt)*(W-K)}}function z(F,H,et){return F=u.call(F,o).sort(l),Math.ceil((et-H)/(2*(R(F,.75)-R(F,.25))*Math.pow(F.length,-1/3)))}function P(F,H,et){return Math.ceil((et-H)/(3.5*g(F)*Math.pow(F.length,-1/3)))}function I(F,H){var et=F.length,q=-1,W,K;if(H==null){for(;++q<et;)if((W=F[q])!=null&&W>=W)for(K=W;++q<et;)(W=F[q])!=null&&W>K&&(K=W)}else for(;++q<et;)if((W=H(F[q],q,F))!=null&&W>=W)for(K=W;++q<et;)(W=H(F[q],q,F))!=null&&W>K&&(K=W);return K}function U(F,H){var et=F.length,q=et,W=-1,K,nt=0;if(H==null)for(;++W<et;)isNaN(K=o(F[W]))?--q:nt+=K;else for(;++W<et;)isNaN(K=o(H(F[W],W,F)))?--q:nt+=K;if(q)return nt/q}function O(F,H){var et=F.length,q=-1,W,K=[];if(H==null)for(;++q<et;)isNaN(W=o(F[q]))||K.push(W);else for(;++q<et;)isNaN(W=o(H(F[q],q,F)))||K.push(W);return R(K.sort(l),.5)}function G(F){for(var H=F.length,et,q=-1,W=0,K,nt;++q<H;)W+=F[q].length;for(K=new Array(W);--H>=0;)for(nt=F[H],et=nt.length;--et>=0;)K[--W]=nt[et];return K}function $(F,H){var et=F.length,q=-1,W,K;if(H==null){for(;++q<et;)if((W=F[q])!=null&&W>=W)for(K=W;++q<et;)(W=F[q])!=null&&K>W&&(K=W)}else for(;++q<et;)if((W=H(F[q],q,F))!=null&&W>=W)for(K=W;++q<et;)(W=H(F[q],q,F))!=null&&K>W&&(K=W);return K}function tt(F,H){for(var et=H.length,q=new Array(et);et--;)q[et]=F[H[et]];return q}function Z(F,H){if(!!(et=F.length)){var et,q=0,W=0,K,nt=F[W];for(H==null&&(H=l);++q<et;)(H(K=F[q],nt)<0||H(nt,nt)!==0)&&(nt=K,W=q);if(H(nt,nt)===0)return W}}function X(F,H,et){for(var q=(et==null?F.length:et)-(H=H==null?0:+H),W,K;q;)K=Math.random()*q--|0,W=F[q+H],F[q+H]=F[K+H],F[K+H]=W;return F}function J(F,H){var et=F.length,q=-1,W,K=0;if(H==null)for(;++q<et;)(W=+F[q])&&(K+=W);else for(;++q<et;)(W=+H(F[q],q,F))&&(K+=W);return K}function st(F){if(!(K=F.length))return[];for(var H=-1,et=$(F,at),q=new Array(et);++H<et;)for(var W=-1,K,nt=q[H]=new Array(K);++W<K;)nt[W]=F[W][H];return q}function at(F){return F.length}function lt(){return st(arguments)}f.bisect=a,f.bisectRight=a,f.bisectLeft=i,f.ascending=l,f.bisector=m,f.cross=d,f.descending=s,f.deviation=g,f.extent=b,f.histogram=L,f.thresholdFreedmanDiaconis=z,f.thresholdScott=P,f.thresholdSturges=M,f.max=I,f.mean=U,f.median=O,f.merge=G,f.min=$,f.pairs=r,f.permute=tt,f.quantile=R,f.range=A,f.scan=Z,f.shuffle=X,f.sum=J,f.ticks=h,f.tickIncrement=D,f.tickStep=S,f.transpose=st,f.variance=y,f.zip=lt,Object.defineProperty(f,"__esModule",{value:!0})})},{}],108:[function(e,B,V){(function(f,l){l(typeof V=="object"&&typeof B<"u"?V:f.d3=f.d3||{})})(this,function(f){var l="$";function m(){}m.prototype=x.prototype={constructor:m,has:function(v){return l+v in this},get:function(v){return this[l+v]},set:function(v,_){return this[l+v]=_,this},remove:function(v){var _=l+v;return _ in this&&delete this[_]},clear:function(){for(var v in this)v[0]===l&&delete this[v]},keys:function(){var v=[];for(var _ in this)_[0]===l&&v.push(_.slice(1));return v},values:function(){var v=[];for(var _ in this)_[0]===l&&v.push(this[_]);return v},entries:function(){var v=[];for(var _ in this)_[0]===l&&v.push({key:_.slice(1),value:this[_]});return v},size:function(){var v=0;for(var _ in this)_[0]===l&&++v;return v},empty:function(){for(var v in this)if(v[0]===l)return!1;return!0},each:function(v){for(var _ in this)_[0]===l&&v(this[_],_.slice(1),this)}};function x(v,_){var u=new m;if(v instanceof m)v.each(function(p,w){u.set(w,p)});else if(Array.isArray(v)){var T=-1,c=v.length,A;if(_==null)for(;++T<c;)u.set(T,v[T]);else for(;++T<c;)u.set(_(A=v[T],T,v),A)}else if(v)for(var k in v)u.set(k,v[k]);return u}function t(){var v=[],_=[],u,T,c;function A(p,w,h,D){if(w>=v.length)return u!=null&&p.sort(u),T!=null?T(p):p;for(var S=-1,M=p.length,L=v[w++],R,z,P=x(),I,U=h();++S<M;)(I=P.get(R=L(z=p[S])+""))?I.push(z):P.set(R,[z]);return P.each(function(O,G){D(U,G,A(O,w,h,D))}),U}function k(p,w){if(++w>v.length)return p;var h,D=_[w-1];return T!=null&&w>=v.length?h=p.entries():(h=[],p.each(function(S,M){h.push({key:M,values:k(S,w)})})),D!=null?h.sort(function(S,M){return D(S.key,M.key)}):h}return c={object:function(p){return A(p,0,a,i)},map:function(p){return A(p,0,r,n)},entries:function(p){return k(A(p,0,r,n),0)},key:function(p){return v.push(p),c},sortKeys:function(p){return _[v.length-1]=p,c},sortValues:function(p){return u=p,c},rollup:function(p){return T=p,c}}}function a(){return{}}function i(v,_,u){v[_]=u}function r(){return x()}function n(v,_,u){v.set(_,u)}function d(){}var s=x.prototype;d.prototype=o.prototype={constructor:d,has:s.has,add:function(v){return v+="",this[l+v]=v,this},remove:s.remove,clear:s.clear,values:s.keys,size:s.size,empty:s.empty,each:s.each};function o(v,_){var u=new d;if(v instanceof d)v.each(function(A){u.add(A)});else if(v){var T=-1,c=v.length;if(_==null)for(;++T<c;)u.add(v[T]);else for(;++T<c;)u.add(_(v[T],T,v))}return u}function y(v){var _=[];for(var u in v)_.push(u);return _}function g(v){var _=[];for(var u in v)_.push(v[u]);return _}function b(v){var _=[];for(var u in v)_.push({key:u,value:v[u]});return _}f.nest=t,f.set=o,f.map=x,f.keys=y,f.values=g,f.entries=b,Object.defineProperty(f,"__esModule",{value:!0})})},{}],109:[function(e,B,V){(function(f,l){typeof V=="object"&&typeof B<"u"?l(V):(f=f||self,l(f.d3=f.d3||{}))})(this,function(f){function l(Pt,Yt,ve){Pt.prototype=Yt.prototype=ve,ve.constructor=Pt}function m(Pt,Yt){var ve=Object.create(Pt.prototype);for(var Re in Yt)ve[Re]=Yt[Re];return ve}function x(){}var t=.7,a=1/t,i="\\s*([+-]?\\d+)\\s*",r="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",n="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",d=/^#([0-9a-f]{3,8})$/,s=new RegExp("^rgb\\("+[i,i,i]+"\\)$"),o=new RegExp("^rgb\\("+[n,n,n]+"\\)$"),y=new RegExp("^rgba\\("+[i,i,i,r]+"\\)$"),g=new RegExp("^rgba\\("+[n,n,n,r]+"\\)$"),b=new RegExp("^hsl\\("+[r,n,n]+"\\)$"),v=new RegExp("^hsla\\("+[r,n,n,r]+"\\)$"),_={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};l(x,A,{copy:function(Pt){return Object.assign(new this.constructor,this,Pt)},displayable:function(){return this.rgb().displayable()},hex:u,formatHex:u,formatHsl:T,formatRgb:c,toString:c});function u(){return this.rgb().formatHex()}function T(){return z(this).formatHsl()}function c(){return this.rgb().formatRgb()}function A(Pt){var Yt,ve;return Pt=(Pt+"").trim().toLowerCase(),(Yt=d.exec(Pt))?(ve=Yt[1].length,Yt=parseInt(Yt[1],16),ve===6?k(Yt):ve===3?new D(Yt>>8&15|Yt>>4&240,Yt>>4&15|Yt&240,(Yt&15)<<4|Yt&15,1):ve===8?p(Yt>>24&255,Yt>>16&255,Yt>>8&255,(Yt&255)/255):ve===4?p(Yt>>12&15|Yt>>8&240,Yt>>8&15|Yt>>4&240,Yt>>4&15|Yt&240,((Yt&15)<<4|Yt&15)/255):null):(Yt=s.exec(Pt))?new D(Yt[1],Yt[2],Yt[3],1):(Yt=o.exec(Pt))?new D(Yt[1]*255/100,Yt[2]*255/100,Yt[3]*255/100,1):(Yt=y.exec(Pt))?p(Yt[1],Yt[2],Yt[3],Yt[4]):(Yt=g.exec(Pt))?p(Yt[1]*255/100,Yt[2]*255/100,Yt[3]*255/100,Yt[4]):(Yt=b.exec(Pt))?R(Yt[1],Yt[2]/100,Yt[3]/100,1):(Yt=v.exec(Pt))?R(Yt[1],Yt[2]/100,Yt[3]/100,Yt[4]):_.hasOwnProperty(Pt)?k(_[Pt]):Pt==="transparent"?new D(NaN,NaN,NaN,0):null}function k(Pt){return new D(Pt>>16&255,Pt>>8&255,Pt&255,1)}function p(Pt,Yt,ve,Re){return Re<=0&&(Pt=Yt=ve=NaN),new D(Pt,Yt,ve,Re)}function w(Pt){return Pt instanceof x||(Pt=A(Pt)),Pt?(Pt=Pt.rgb(),new D(Pt.r,Pt.g,Pt.b,Pt.opacity)):new D}function h(Pt,Yt,ve,Re){return arguments.length===1?w(Pt):new D(Pt,Yt,ve,Re==null?1:Re)}function D(Pt,Yt,ve,Re){this.r=+Pt,this.g=+Yt,this.b=+ve,this.opacity=+Re}l(D,h,m(x,{brighter:function(Pt){return Pt=Pt==null?a:Math.pow(a,Pt),new D(this.r*Pt,this.g*Pt,this.b*Pt,this.opacity)},darker:function(Pt){return Pt=Pt==null?t:Math.pow(t,Pt),new D(this.r*Pt,this.g*Pt,this.b*Pt,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:S,formatHex:S,formatRgb:M,toString:M}));function S(){return"#"+L(this.r)+L(this.g)+L(this.b)}function M(){var Pt=this.opacity;return Pt=isNaN(Pt)?1:Math.max(0,Math.min(1,Pt)),(Pt===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(Pt===1?")":", "+Pt+")")}function L(Pt){return Pt=Math.max(0,Math.min(255,Math.round(Pt)||0)),(Pt<16?"0":"")+Pt.toString(16)}function R(Pt,Yt,ve,Re){return Re<=0?Pt=Yt=ve=NaN:ve<=0||ve>=1?Pt=Yt=NaN:Yt<=0&&(Pt=NaN),new I(Pt,Yt,ve,Re)}function z(Pt){if(Pt instanceof I)return new I(Pt.h,Pt.s,Pt.l,Pt.opacity);if(Pt instanceof x||(Pt=A(Pt)),!Pt)return new I;if(Pt instanceof I)return Pt;Pt=Pt.rgb();var Yt=Pt.r/255,ve=Pt.g/255,Re=Pt.b/255,ir=Math.min(Yt,ve,Re),Ie=Math.max(Yt,ve,Re),Be=NaN,Ye=Ie-ir,ze=(Ie+ir)/2;return Ye?(Yt===Ie?Be=(ve-Re)/Ye+(ve<Re)*6:ve===Ie?Be=(Re-Yt)/Ye+2:Be=(Yt-ve)/Ye+4,Ye/=ze<.5?Ie+ir:2-Ie-ir,Be*=60):Ye=ze>0&&ze<1?0:Be,new I(Be,Ye,ze,Pt.opacity)}function P(Pt,Yt,ve,Re){return arguments.length===1?z(Pt):new I(Pt,Yt,ve,Re==null?1:Re)}function I(Pt,Yt,ve,Re){this.h=+Pt,this.s=+Yt,this.l=+ve,this.opacity=+Re}l(I,P,m(x,{brighter:function(Pt){return Pt=Pt==null?a:Math.pow(a,Pt),new I(this.h,this.s,this.l*Pt,this.opacity)},darker:function(Pt){return Pt=Pt==null?t:Math.pow(t,Pt),new I(this.h,this.s,this.l*Pt,this.opacity)},rgb:function(){var Pt=this.h%360+(this.h<0)*360,Yt=isNaN(Pt)||isNaN(this.s)?0:this.s,ve=this.l,Re=ve+(ve<.5?ve:1-ve)*Yt,ir=2*ve-Re;return new D(U(Pt>=240?Pt-240:Pt+120,ir,Re),U(Pt,ir,Re),U(Pt<120?Pt+240:Pt-120,ir,Re),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var Pt=this.opacity;return Pt=isNaN(Pt)?1:Math.max(0,Math.min(1,Pt)),(Pt===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(Pt===1?")":", "+Pt+")")}}));function U(Pt,Yt,ve){return(Pt<60?Yt+(ve-Yt)*Pt/60:Pt<180?ve:Pt<240?Yt+(ve-Yt)*(240-Pt)/60:Yt)*255}var O=Math.PI/180,G=180/Math.PI,$=18,tt=.96422,Z=1,X=.82521,J=4/29,st=6/29,at=3*st*st,lt=st*st*st;function F(Pt){if(Pt instanceof q)return new q(Pt.l,Pt.a,Pt.b,Pt.opacity);if(Pt instanceof ut)return pt(Pt);Pt instanceof D||(Pt=w(Pt));var Yt=it(Pt.r),ve=it(Pt.g),Re=it(Pt.b),ir=W((.2225045*Yt+.7168786*ve+.0606169*Re)/Z),Ie,Be;return Yt===ve&&ve===Re?Ie=Be=ir:(Ie=W((.4360747*Yt+.3850649*ve+.1430804*Re)/tt),Be=W((.0139322*Yt+.0971045*ve+.7141733*Re)/X)),new q(116*ir-16,500*(Ie-ir),200*(ir-Be),Pt.opacity)}function H(Pt,Yt){return new q(Pt,0,0,Yt==null?1:Yt)}function et(Pt,Yt,ve,Re){return arguments.length===1?F(Pt):new q(Pt,Yt,ve,Re==null?1:Re)}function q(Pt,Yt,ve,Re){this.l=+Pt,this.a=+Yt,this.b=+ve,this.opacity=+Re}l(q,et,m(x,{brighter:function(Pt){return new q(this.l+$*(Pt==null?1:Pt),this.a,this.b,this.opacity)},darker:function(Pt){return new q(this.l-$*(Pt==null?1:Pt),this.a,this.b,this.opacity)},rgb:function(){var Pt=(this.l+16)/116,Yt=isNaN(this.a)?Pt:Pt+this.a/500,ve=isNaN(this.b)?Pt:Pt-this.b/200;return Yt=tt*K(Yt),Pt=Z*K(Pt),ve=X*K(ve),new D(nt(3.1338561*Yt-1.6168667*Pt-.4906146*ve),nt(-.9787684*Yt+1.9161415*Pt+.033454*ve),nt(.0719453*Yt-.2289914*Pt+1.4052427*ve),this.opacity)}}));function W(Pt){return Pt>lt?Math.pow(Pt,1/3):Pt/at+J}function K(Pt){return Pt>st?Pt*Pt*Pt:at*(Pt-J)}function nt(Pt){return 255*(Pt<=.0031308?12.92*Pt:1.055*Math.pow(Pt,1/2.4)-.055)}function it(Pt){return(Pt/=255)<=.04045?Pt/12.92:Math.pow((Pt+.055)/1.055,2.4)}function ot(Pt){if(Pt instanceof ut)return new ut(Pt.h,Pt.c,Pt.l,Pt.opacity);if(Pt instanceof q||(Pt=F(Pt)),Pt.a===0&&Pt.b===0)return new ut(NaN,0<Pt.l&&Pt.l<100?0:NaN,Pt.l,Pt.opacity);var Yt=Math.atan2(Pt.b,Pt.a)*G;return new ut(Yt<0?Yt+360:Yt,Math.sqrt(Pt.a*Pt.a+Pt.b*Pt.b),Pt.l,Pt.opacity)}function ct(Pt,Yt,ve,Re){return arguments.length===1?ot(Pt):new ut(ve,Yt,Pt,Re==null?1:Re)}function bt(Pt,Yt,ve,Re){return arguments.length===1?ot(Pt):new ut(Pt,Yt,ve,Re==null?1:Re)}function ut(Pt,Yt,ve,Re){this.h=+Pt,this.c=+Yt,this.l=+ve,this.opacity=+Re}function pt(Pt){if(isNaN(Pt.h))return new q(Pt.l,0,0,Pt.opacity);var Yt=Pt.h*O;return new q(Pt.l,Math.cos(Yt)*Pt.c,Math.sin(Yt)*Pt.c,Pt.opacity)}l(ut,bt,m(x,{brighter:function(Pt){return new ut(this.h,this.c,this.l+$*(Pt==null?1:Pt),this.opacity)},darker:function(Pt){return new ut(this.h,this.c,this.l-$*(Pt==null?1:Pt),this.opacity)},rgb:function(){return pt(this).rgb()}}));var yt=-.14861,Tt=1.78277,kt=-.29227,zt=-.90649,Rt=1.97294,Gt=Rt*zt,wt=Rt*Tt,It=Tt*kt-zt*yt;function $t(Pt){if(Pt instanceof Nt)return new Nt(Pt.h,Pt.s,Pt.l,Pt.opacity);Pt instanceof D||(Pt=w(Pt));var Yt=Pt.r/255,ve=Pt.g/255,Re=Pt.b/255,ir=(It*Re+Gt*Yt-wt*ve)/(It+Gt-wt),Ie=Re-ir,Be=(Rt*(ve-ir)-kt*Ie)/zt,Ye=Math.sqrt(Be*Be+Ie*Ie)/(Rt*ir*(1-ir)),ze=Ye?Math.atan2(Be,Ie)*G-120:NaN;return new Nt(ze<0?ze+360:ze,Ye,ir,Pt.opacity)}function Qt(Pt,Yt,ve,Re){return arguments.length===1?$t(Pt):new Nt(Pt,Yt,ve,Re==null?1:Re)}function Nt(Pt,Yt,ve,Re){this.h=+Pt,this.s=+Yt,this.l=+ve,this.opacity=+Re}l(Nt,Qt,m(x,{brighter:function(Pt){return Pt=Pt==null?a:Math.pow(a,Pt),new Nt(this.h,this.s,this.l*Pt,this.opacity)},darker:function(Pt){return Pt=Pt==null?t:Math.pow(t,Pt),new Nt(this.h,this.s,this.l*Pt,this.opacity)},rgb:function(){var Pt=isNaN(this.h)?0:(this.h+120)*O,Yt=+this.l,ve=isNaN(this.s)?0:this.s*Yt*(1-Yt),Re=Math.cos(Pt),ir=Math.sin(Pt);return new D(255*(Yt+ve*(yt*Re+Tt*ir)),255*(Yt+ve*(kt*Re+zt*ir)),255*(Yt+ve*(Rt*Re)),this.opacity)}})),f.color=A,f.cubehelix=Qt,f.gray=H,f.hcl=bt,f.hsl=P,f.lab=et,f.lch=ct,f.rgb=h,Object.defineProperty(f,"__esModule",{value:!0})})},{}],110:[function(e,B,V){(function(f,l){typeof V=="object"&&typeof B<"u"?l(V):(f=f||self,l(f.d3=f.d3||{}))})(this,function(f){var l={value:function(){}};function m(){for(var r=0,n=arguments.length,d={},s;r<n;++r){if(!(s=arguments[r]+"")||s in d||/[\s.]/.test(s))throw new Error("illegal type: "+s);d[s]=[]}return new x(d)}function x(r){this._=r}function t(r,n){return r.trim().split(/^|\s+/).map(function(d){var s="",o=d.indexOf(".");if(o>=0&&(s=d.slice(o+1),d=d.slice(0,o)),d&&!n.hasOwnProperty(d))throw new Error("unknown type: "+d);return{type:d,name:s}})}x.prototype=m.prototype={constructor:x,on:function(r,n){var d=this._,s=t(r+"",d),o,y=-1,g=s.length;if(arguments.length<2){for(;++y<g;)if((o=(r=s[y]).type)&&(o=a(d[o],r.name)))return o;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++y<g;)if(o=(r=s[y]).type)d[o]=i(d[o],r.name,n);else if(n==null)for(o in d)d[o]=i(d[o],r.name,null);return this},copy:function(){var r={},n=this._;for(var d in n)r[d]=n[d].slice();return new x(r)},call:function(r,n){if((o=arguments.length-2)>0)for(var d=new Array(o),s=0,o,y;s<o;++s)d[s]=arguments[s+2];if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(y=this._[r],s=0,o=y.length;s<o;++s)y[s].value.apply(n,d)},apply:function(r,n,d){if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(var s=this._[r],o=0,y=s.length;o<y;++o)s[o].value.apply(n,d)}};function a(r,n){for(var d=0,s=r.length,o;d<s;++d)if((o=r[d]).name===n)return o.value}function i(r,n,d){for(var s=0,o=r.length;s<o;++s)if(r[s].name===n){r[s]=l,r=r.slice(0,s).concat(r.slice(s+1));break}return d!=null&&r.push({name:n,value:d}),r}f.dispatch=m,Object.defineProperty(f,"__esModule",{value:!0})})},{}],111:[function(e,B,V){(function(f,l){typeof V=="object"&&typeof B<"u"?l(V,e("d3-quadtree"),e("d3-collection"),e("d3-dispatch"),e("d3-timer")):l(f.d3=f.d3||{},f.d3,f.d3,f.d3,f.d3)})(this,function(f,l,m,x,t){function a(w,h){var D;w==null&&(w=0),h==null&&(h=0);function S(){var M,L=D.length,R,z=0,P=0;for(M=0;M<L;++M)R=D[M],z+=R.x,P+=R.y;for(z=z/L-w,P=P/L-h,M=0;M<L;++M)R=D[M],R.x-=z,R.y-=P}return S.initialize=function(M){D=M},S.x=function(M){return arguments.length?(w=+M,S):w},S.y=function(M){return arguments.length?(h=+M,S):h},S}function i(w){return function(){return w}}function r(){return(Math.random()-.5)*1e-6}function n(w){return w.x+w.vx}function d(w){return w.y+w.vy}function s(w){var h,D,S=1,M=1;typeof w!="function"&&(w=i(w==null?1:+w));function L(){for(var P,I=h.length,U,O,G,$,tt,Z,X=0;X<M;++X)for(U=l.quadtree(h,n,d).visitAfter(R),P=0;P<I;++P)O=h[P],tt=D[O.index],Z=tt*tt,G=O.x+O.vx,$=O.y+O.vy,U.visit(J);function J(st,at,lt,F,H){var et=st.data,q=st.r,W=tt+q;if(et){if(et.index>O.index){var K=G-et.x-et.vx,nt=$-et.y-et.vy,it=K*K+nt*nt;it<W*W&&(K===0&&(K=r(),it+=K*K),nt===0&&(nt=r(),it+=nt*nt),it=(W-(it=Math.sqrt(it)))/it*S,O.vx+=(K*=it)*(W=(q*=q)/(Z+q)),O.vy+=(nt*=it)*W,et.vx-=K*(W=1-W),et.vy-=nt*W)}return}return at>G+W||F<G-W||lt>$+W||H<$-W}}function R(P){if(P.data)return P.r=D[P.data.index];for(var I=P.r=0;I<4;++I)P[I]&&P[I].r>P.r&&(P.r=P[I].r)}function z(){if(!!h){var P,I=h.length,U;for(D=new Array(I),P=0;P<I;++P)U=h[P],D[U.index]=+w(U,P,h)}}return L.initialize=function(P){h=P,z()},L.iterations=function(P){return arguments.length?(M=+P,L):M},L.strength=function(P){return arguments.length?(S=+P,L):S},L.radius=function(P){return arguments.length?(w=typeof P=="function"?P:i(+P),z(),L):w},L}function o(w){return w.index}function y(w,h){var D=w.get(h);if(!D)throw new Error("missing: "+h);return D}function g(w){var h=o,D=U,S,M=i(30),L,R,z,P,I=1;w==null&&(w=[]);function U(Z){return 1/Math.min(z[Z.source.index],z[Z.target.index])}function O(Z){for(var X=0,J=w.length;X<I;++X)for(var st=0,at,lt,F,H,et,q,W;st<J;++st)at=w[st],lt=at.source,F=at.target,H=F.x+F.vx-lt.x-lt.vx||r(),et=F.y+F.vy-lt.y-lt.vy||r(),q=Math.sqrt(H*H+et*et),q=(q-L[st])/q*Z*S[st],H*=q,et*=q,F.vx-=H*(W=P[st]),F.vy-=et*W,lt.vx+=H*(W=1-W),lt.vy+=et*W}function G(){if(!!R){var Z,X=R.length,J=w.length,st=m.map(R,h),at;for(Z=0,z=new Array(X);Z<J;++Z)at=w[Z],at.index=Z,typeof at.source!="object"&&(at.source=y(st,at.source)),typeof at.target!="object"&&(at.target=y(st,at.target)),z[at.source.index]=(z[at.source.index]||0)+1,z[at.target.index]=(z[at.target.index]||0)+1;for(Z=0,P=new Array(J);Z<J;++Z)at=w[Z],P[Z]=z[at.source.index]/(z[at.source.index]+z[at.target.index]);S=new Array(J),$(),L=new Array(J),tt()}}function $(){if(!!R)for(var Z=0,X=w.length;Z<X;++Z)S[Z]=+D(w[Z],Z,w)}function tt(){if(!!R)for(var Z=0,X=w.length;Z<X;++Z)L[Z]=+M(w[Z],Z,w)}return O.initialize=function(Z){R=Z,G()},O.links=function(Z){return arguments.length?(w=Z,G(),O):w},O.id=function(Z){return arguments.length?(h=Z,O):h},O.iterations=function(Z){return arguments.length?(I=+Z,O):I},O.strength=function(Z){return arguments.length?(D=typeof Z=="function"?Z:i(+Z),$(),O):D},O.distance=function(Z){return arguments.length?(M=typeof Z=="function"?Z:i(+Z),tt(),O):M},O}function b(w){return w.x}function v(w){return w.y}var _=10,u=Math.PI*(3-Math.sqrt(5));function T(w){var h,D=1,S=.001,M=1-Math.pow(S,1/300),L=0,R=.6,z=m.map(),P=t.timer(U),I=x.dispatch("tick","end");w==null&&(w=[]);function U(){O(),I.call("tick",h),D<S&&(P.stop(),I.call("end",h))}function O(tt){var Z,X=w.length,J;tt===void 0&&(tt=1);for(var st=0;st<tt;++st)for(D+=(L-D)*M,z.each(function(at){at(D)}),Z=0;Z<X;++Z)J=w[Z],J.fx==null?J.x+=J.vx*=R:(J.x=J.fx,J.vx=0),J.fy==null?J.y+=J.vy*=R:(J.y=J.fy,J.vy=0);return h}function G(){for(var tt=0,Z=w.length,X;tt<Z;++tt){if(X=w[tt],X.index=tt,X.fx!=null&&(X.x=X.fx),X.fy!=null&&(X.y=X.fy),isNaN(X.x)||isNaN(X.y)){var J=_*Math.sqrt(tt),st=tt*u;X.x=J*Math.cos(st),X.y=J*Math.sin(st)}(isNaN(X.vx)||isNaN(X.vy))&&(X.vx=X.vy=0)}}function $(tt){return tt.initialize&&tt.initialize(w),tt}return G(),h={tick:O,restart:function(){return P.restart(U),h},stop:function(){return P.stop(),h},nodes:function(tt){return arguments.length?(w=tt,G(),z.each($),h):w},alpha:function(tt){return arguments.length?(D=+tt,h):D},alphaMin:function(tt){return arguments.length?(S=+tt,h):S},alphaDecay:function(tt){return arguments.length?(M=+tt,h):+M},alphaTarget:function(tt){return arguments.length?(L=+tt,h):L},velocityDecay:function(tt){return arguments.length?(R=1-tt,h):1-R},force:function(tt,Z){return arguments.length>1?(Z==null?z.remove(tt):z.set(tt,$(Z)),h):z.get(tt)},find:function(tt,Z,X){var J=0,st=w.length,at,lt,F,H,et;for(X==null?X=1/0:X*=X,J=0;J<st;++J)H=w[J],at=tt-H.x,lt=Z-H.y,F=at*at+lt*lt,F<X&&(et=H,X=F);return et},on:function(tt,Z){return arguments.length>1?(I.on(tt,Z),h):I.on(tt)}}}function c(){var w,h,D,S=i(-30),M,L=1,R=1/0,z=.81;function P(G){var $,tt=w.length,Z=l.quadtree(w,b,v).visitAfter(U);for(D=G,$=0;$<tt;++$)h=w[$],Z.visit(O)}function I(){if(!!w){var G,$=w.length,tt;for(M=new Array($),G=0;G<$;++G)tt=w[G],M[tt.index]=+S(tt,G,w)}}function U(G){var $=0,tt,Z,X=0,J,st,at;if(G.length){for(J=st=at=0;at<4;++at)(tt=G[at])&&(Z=Math.abs(tt.value))&&($+=tt.value,X+=Z,J+=Z*tt.x,st+=Z*tt.y);G.x=J/X,G.y=st/X}else{tt=G,tt.x=tt.data.x,tt.y=tt.data.y;do $+=M[tt.data.index];while(tt=tt.next)}G.value=$}function O(G,$,tt,Z){if(!G.value)return!0;var X=G.x-h.x,J=G.y-h.y,st=Z-$,at=X*X+J*J;if(st*st/z<at)return at<R&&(X===0&&(X=r(),at+=X*X),J===0&&(J=r(),at+=J*J),at<L&&(at=Math.sqrt(L*at)),h.vx+=X*G.value*D/at,h.vy+=J*G.value*D/at),!0;if(G.length||at>=R)return;(G.data!==h||G.next)&&(X===0&&(X=r(),at+=X*X),J===0&&(J=r(),at+=J*J),at<L&&(at=Math.sqrt(L*at)));do G.data!==h&&(st=M[G.data.index]*D/at,h.vx+=X*st,h.vy+=J*st);while(G=G.next)}return P.initialize=function(G){w=G,I()},P.strength=function(G){return arguments.length?(S=typeof G=="function"?G:i(+G),I(),P):S},P.distanceMin=function(G){return arguments.length?(L=G*G,P):Math.sqrt(L)},P.distanceMax=function(G){return arguments.length?(R=G*G,P):Math.sqrt(R)},P.theta=function(G){return arguments.length?(z=G*G,P):Math.sqrt(z)},P}function A(w,h,D){var S,M=i(.1),L,R;typeof w!="function"&&(w=i(+w)),h==null&&(h=0),D==null&&(D=0);function z(I){for(var U=0,O=S.length;U<O;++U){var G=S[U],$=G.x-h||1e-6,tt=G.y-D||1e-6,Z=Math.sqrt($*$+tt*tt),X=(R[U]-Z)*L[U]*I/Z;G.vx+=$*X,G.vy+=tt*X}}function P(){if(!!S){var I,U=S.length;for(L=new Array(U),R=new Array(U),I=0;I<U;++I)R[I]=+w(S[I],I,S),L[I]=isNaN(R[I])?0:+M(S[I],I,S)}}return z.initialize=function(I){S=I,P()},z.strength=function(I){return arguments.length?(M=typeof I=="function"?I:i(+I),P(),z):M},z.radius=function(I){return arguments.length?(w=typeof I=="function"?I:i(+I),P(),z):w},z.x=function(I){return arguments.length?(h=+I,z):h},z.y=function(I){return arguments.length?(D=+I,z):D},z}function k(w){var h=i(.1),D,S,M;typeof w!="function"&&(w=i(w==null?0:+w));function L(z){for(var P=0,I=D.length,U;P<I;++P)U=D[P],U.vx+=(M[P]-U.x)*S[P]*z}function R(){if(!!D){var z,P=D.length;for(S=new Array(P),M=new Array(P),z=0;z<P;++z)S[z]=isNaN(M[z]=+w(D[z],z,D))?0:+h(D[z],z,D)}}return L.initialize=function(z){D=z,R()},L.strength=function(z){return arguments.length?(h=typeof z=="function"?z:i(+z),R(),L):h},L.x=function(z){return arguments.length?(w=typeof z=="function"?z:i(+z),R(),L):w},L}function p(w){var h=i(.1),D,S,M;typeof w!="function"&&(w=i(w==null?0:+w));function L(z){for(var P=0,I=D.length,U;P<I;++P)U=D[P],U.vy+=(M[P]-U.y)*S[P]*z}function R(){if(!!D){var z,P=D.length;for(S=new Array(P),M=new Array(P),z=0;z<P;++z)S[z]=isNaN(M[z]=+w(D[z],z,D))?0:+h(D[z],z,D)}}return L.initialize=function(z){D=z,R()},L.strength=function(z){return arguments.length?(h=typeof z=="function"?z:i(+z),R(),L):h},L.y=function(z){return arguments.length?(w=typeof z=="function"?z:i(+z),R(),L):w},L}f.forceCenter=a,f.forceCollide=s,f.forceLink=g,f.forceManyBody=c,f.forceRadial=A,f.forceSimulation=T,f.forceX=k,f.forceY=p,Object.defineProperty(f,"__esModule",{value:!0})})},{"d3-collection":108,"d3-dispatch":110,"d3-quadtree":118,"d3-timer":123}],112:[function(e,B,V){(function(f,l){typeof V=="object"&&typeof B<"u"?l(V):(f=typeof globalThis<"u"?globalThis:f||self,l(f.d3=f.d3||{}))})(this,function(f){function l(w){return Math.abs(w=Math.round(w))>=1e21?w.toLocaleString("en").replace(/,/g,""):w.toString(10)}function m(w,h){if((D=(w=h?w.toExponential(h-1):w.toExponential()).indexOf("e"))<0)return null;var D,S=w.slice(0,D);return[S.length>1?S[0]+S.slice(2):S,+w.slice(D+1)]}function x(w){return w=m(Math.abs(w)),w?w[1]:NaN}function t(w,h){return function(D,S){for(var M=D.length,L=[],R=0,z=w[0],P=0;M>0&&z>0&&(P+z+1>S&&(z=Math.max(1,S-P)),L.push(D.substring(M-=z,M+z)),!((P+=z+1)>S));)z=w[R=(R+1)%w.length];return L.reverse().join(h)}}function a(w){return function(h){return h.replace(/[0-9]/g,function(D){return w[+D]})}}var i=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function r(w){if(!(h=i.exec(w)))throw new Error("invalid format: "+w);var h;return new n({fill:h[1],align:h[2],sign:h[3],symbol:h[4],zero:h[5],width:h[6],comma:h[7],precision:h[8]&&h[8].slice(1),trim:h[9],type:h[10]})}r.prototype=n.prototype;function n(w){this.fill=w.fill===void 0?" ":w.fill+"",this.align=w.align===void 0?">":w.align+"",this.sign=w.sign===void 0?"-":w.sign+"",this.symbol=w.symbol===void 0?"":w.symbol+"",this.zero=!!w.zero,this.width=w.width===void 0?void 0:+w.width,this.comma=!!w.comma,this.precision=w.precision===void 0?void 0:+w.precision,this.trim=!!w.trim,this.type=w.type===void 0?"":w.type+""}n.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function d(w){t:for(var h=w.length,D=1,S=-1,M;D<h;++D)switch(w[D]){case".":S=M=D;break;case"0":S===0&&(S=D),M=D;break;default:if(!+w[D])break t;S>0&&(S=0);break}return S>0?w.slice(0,S)+w.slice(M+1):w}var s;function o(w,h){var D=m(w,h);if(!D)return w+"";var S=D[0],M=D[1],L=M-(s=Math.max(-8,Math.min(8,Math.floor(M/3)))*3)+1,R=S.length;return L===R?S:L>R?S+new Array(L-R+1).join("0"):L>0?S.slice(0,L)+"."+S.slice(L):"0."+new Array(1-L).join("0")+m(w,Math.max(0,h+L-1))[0]}function y(w,h){var D=m(w,h);if(!D)return w+"";var S=D[0],M=D[1];return M<0?"0."+new Array(-M).join("0")+S:S.length>M+1?S.slice(0,M+1)+"."+S.slice(M+1):S+new Array(M-S.length+2).join("0")}var g={"%":function(w,h){return(w*100).toFixed(h)},b:function(w){return Math.round(w).toString(2)},c:function(w){return w+""},d:l,e:function(w,h){return w.toExponential(h)},f:function(w,h){return w.toFixed(h)},g:function(w,h){return w.toPrecision(h)},o:function(w){return Math.round(w).toString(8)},p:function(w,h){return y(w*100,h)},r:y,s:o,X:function(w){return Math.round(w).toString(16).toUpperCase()},x:function(w){return Math.round(w).toString(16)}};function b(w){return w}var v=Array.prototype.map,_=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function u(w){var h=w.grouping===void 0||w.thousands===void 0?b:t(v.call(w.grouping,Number),w.thousands+""),D=w.currency===void 0?"":w.currency[0]+"",S=w.currency===void 0?"":w.currency[1]+"",M=w.decimal===void 0?".":w.decimal+"",L=w.numerals===void 0?b:a(v.call(w.numerals,String)),R=w.percent===void 0?"%":w.percent+"",z=w.minus===void 0?"-":w.minus+"",P=w.nan===void 0?"NaN":w.nan+"";function I(O){O=r(O);var G=O.fill,$=O.align,tt=O.sign,Z=O.symbol,X=O.zero,J=O.width,st=O.comma,at=O.precision,lt=O.trim,F=O.type;F==="n"?(st=!0,F="g"):g[F]||(at===void 0&&(at=12),lt=!0,F="g"),(X||G==="0"&&$==="=")&&(X=!0,G="0",$="=");var H=Z==="$"?D:Z==="#"&&/[boxX]/.test(F)?"0"+F.toLowerCase():"",et=Z==="$"?S:/[%p]/.test(F)?R:"",q=g[F],W=/[defgprs%]/.test(F);at=at===void 0?6:/[gprs]/.test(F)?Math.max(1,Math.min(21,at)):Math.max(0,Math.min(20,at));function K(nt){var it=H,ot=et,ct,bt,ut;if(F==="c")ot=q(nt)+ot,nt="";else{nt=+nt;var pt=nt<0||1/nt<0;if(nt=isNaN(nt)?P:q(Math.abs(nt),at),lt&&(nt=d(nt)),pt&&+nt==0&&tt!=="+"&&(pt=!1),it=(pt?tt==="("?tt:z:tt==="-"||tt==="("?"":tt)+it,ot=(F==="s"?_[8+s/3]:"")+ot+(pt&&tt==="("?")":""),W){for(ct=-1,bt=nt.length;++ct<bt;)if(ut=nt.charCodeAt(ct),48>ut||ut>57){ot=(ut===46?M+nt.slice(ct+1):nt.slice(ct))+ot,nt=nt.slice(0,ct);break}}}st&&!X&&(nt=h(nt,1/0));var yt=it.length+nt.length+ot.length,Tt=yt<J?new Array(J-yt+1).join(G):"";switch(st&&X&&(nt=h(Tt+nt,Tt.length?J-ot.length:1/0),Tt=""),$){case"<":nt=it+nt+ot+Tt;break;case"=":nt=it+Tt+nt+ot;break;case"^":nt=Tt.slice(0,yt=Tt.length>>1)+it+nt+ot+Tt.slice(yt);break;default:nt=Tt+it+nt+ot;break}return L(nt)}return K.toString=function(){return O+""},K}function U(O,G){var $=I((O=r(O),O.type="f",O)),tt=Math.max(-8,Math.min(8,Math.floor(x(G)/3)))*3,Z=Math.pow(10,-tt),X=_[8+tt/3];return function(J){return $(Z*J)+X}}return{format:I,formatPrefix:U}}var T;c({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function c(w){return T=u(w),f.format=T.format,f.formatPrefix=T.formatPrefix,T}function A(w){return Math.max(0,-x(Math.abs(w)))}function k(w,h){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(x(h)/3)))*3-x(Math.abs(w)))}function p(w,h){return w=Math.abs(w),h=Math.abs(h)-w,Math.max(0,x(h)-x(w))+1}f.FormatSpecifier=n,f.formatDefaultLocale=c,f.formatLocale=u,f.formatSpecifier=r,f.precisionFixed=A,f.precisionPrefix=k,f.precisionRound=p,Object.defineProperty(f,"__esModule",{value:!0})})},{}],113:[function(e,B,V){(function(f,l){typeof V=="object"&&typeof B<"u"?l(V,e("d3-geo"),e("d3-array")):l(f.d3=f.d3||{},f.d3,f.d3)})(this,function(f,l,m){var x=Math.abs,t=Math.atan,a=Math.atan2,i=Math.cos,r=Math.exp,n=Math.floor,d=Math.log,s=Math.max,o=Math.min,y=Math.pow,g=Math.round,b=Math.sign||function(Ft){return Ft>0?1:Ft<0?-1:0},v=Math.sin,_=Math.tan,u=1e-6,T=1e-12,c=Math.PI,A=c/2,k=c/4,p=Math.SQRT1_2,w=P(2),h=P(c),D=c*2,S=180/c,M=c/180;function L(Ft){return Ft?Ft/Math.sin(Ft):1}function R(Ft){return Ft>1?A:Ft<-1?-A:Math.asin(Ft)}function z(Ft){return Ft>1?0:Ft<-1?c:Math.acos(Ft)}function P(Ft){return Ft>0?Math.sqrt(Ft):0}function I(Ft){return Ft=r(2*Ft),(Ft-1)/(Ft+1)}function U(Ft){return(r(Ft)-r(-Ft))/2}function O(Ft){return(r(Ft)+r(-Ft))/2}function G(Ft){return d(Ft+P(Ft*Ft+1))}function $(Ft){return d(Ft+P(Ft*Ft-1))}function tt(Ft){var jt=_(Ft/2),ie=2*d(i(Ft/2))/(jt*jt);function ue(ke,xe){var Me=i(ke),fr=i(xe),gr=v(xe),cr=fr*Me,wr=-((1-cr?d((1+cr)/2)/(1-cr):-.5)+ie/(1+cr));return[wr*fr*v(ke),wr*gr]}return ue.invert=function(ke,xe){var Me=P(ke*ke+xe*xe),fr=-Ft/2,gr=50,cr;if(!Me)return[0,0];do{var wr=fr/2,zr=i(wr),jr=v(wr),en=jr/zr,_n=-d(x(zr));fr-=cr=(2/en*_n-ie*en-Me)/(-_n/(jr*jr)+1-ie/(2*zr*zr))*(zr<0?.7:1)}while(x(cr)>u&&--gr>0);var zn=v(fr);return[a(ke*zn,Me*i(fr)),R(xe*zn/Me)]},ue}function Z(){var Ft=A,jt=l.geoProjectionMutator(tt),ie=jt(Ft);return ie.radius=function(ue){return arguments.length?jt(Ft=ue*M):Ft*S},ie.scale(179.976).clipAngle(147)}function X(Ft,jt){var ie=i(jt),ue=L(z(ie*i(Ft/=2)));return[2*ie*v(Ft)*ue,v(jt)*ue]}X.invert=function(Ft,jt){if(!(Ft*Ft+4*jt*jt>c*c+u)){var ie=Ft,ue=jt,ke=25;do{var xe=v(ie),Me=v(ie/2),fr=i(ie/2),gr=v(ue),cr=i(ue),wr=v(2*ue),zr=gr*gr,jr=cr*cr,en=Me*Me,_n=1-jr*fr*fr,zn=_n?z(cr*fr)*P($n=1/_n):$n=0,$n,mi=2*zn*cr*Me-Ft,wi=zn*gr-jt,Qi=$n*(jr*en+zn*cr*fr*zr),Xi=$n*(.5*xe*wr-zn*2*gr*Me),na=$n*.25*(wr*Me-zn*gr*jr*xe),va=$n*(zr*fr+zn*en*cr),vo=Xi*na-va*Qi;if(!vo)break;var aa=(wi*Xi-mi*va)/vo,Za=(mi*na-wi*Qi)/vo;ie-=aa,ue-=Za}while((x(aa)>u||x(Za)>u)&&--ke>0);return[ie,ue]}};function J(){return l.geoProjection(X).scale(152.63)}function st(Ft){var jt=v(Ft),ie=i(Ft),ue=Ft>=0?1:-1,ke=_(ue*Ft),xe=(1+jt-ie)/2;function Me(fr,gr){var cr=i(gr),wr=i(fr/=2);return[(1+cr)*v(fr),(ue*gr>-a(wr,ke)-.001?0:-ue*10)+xe+v(gr)*ie-(1+cr)*jt*wr]}return Me.invert=function(fr,gr){var cr=0,wr=0,zr=50;do{var jr=i(cr),en=v(cr),_n=i(wr),zn=v(wr),$n=1+_n,mi=$n*en-fr,wi=xe+zn*ie-$n*jt*jr-gr,Qi=$n*jr/2,Xi=-en*zn,na=jt*$n*en/2,va=ie*_n+jt*jr*zn,vo=Xi*na-va*Qi,aa=(wi*Xi-mi*va)/vo/2,Za=(mi*na-wi*Qi)/vo;x(Za)>2&&(Za/=2),cr-=aa,wr-=Za}while((x(aa)>u||x(Za)>u)&&--zr>0);return ue*wr>-a(i(cr),ke)-.001?[cr*2,wr]:null},Me}function at(){var Ft=20*M,jt=Ft>=0?1:-1,ie=_(jt*Ft),ue=l.geoProjectionMutator(st),ke=ue(Ft),xe=ke.stream;return ke.parallel=function(Me){return arguments.length?(ie=_((jt=(Ft=Me*M)>=0?1:-1)*Ft),ue(Ft)):Ft*S},ke.stream=function(Me){var fr=ke.rotate(),gr=xe(Me),cr=(ke.rotate([0,0]),xe(Me)),wr=ke.precision();return ke.rotate(fr),gr.sphere=function(){cr.polygonStart(),cr.lineStart();for(var zr=jt*-180;jt*zr<180;zr+=jt*90)cr.point(zr,jt*90);if(Ft)for(;jt*(zr-=3*jt*wr)>=-180;)cr.point(zr,jt*-a(i(zr*M/2),ie)*S);cr.lineEnd(),cr.polygonEnd()},gr},ke.scale(218.695).center([0,28.0974])}function lt(Ft,jt){var ie=_(jt/2),ue=P(1-ie*ie),ke=1+ue*i(Ft/=2),xe=v(Ft)*ue/ke,Me=ie/ke,fr=xe*xe,gr=Me*Me;return[4/3*xe*(3+fr-3*gr),4/3*Me*(3+3*fr-gr)]}lt.invert=function(Ft,jt){if(Ft*=3/8,jt*=3/8,!Ft&&x(jt)>1)return null;var ie=Ft*Ft,ue=jt*jt,ke=1+ie+ue,xe=P((ke-P(ke*ke-4*jt*jt))/2),Me=R(xe)/3,fr=xe?$(x(jt/xe))/3:G(x(Ft))/3,gr=i(Me),cr=O(fr),wr=cr*cr-gr*gr;return[b(Ft)*2*a(U(fr)*gr,.25-wr),b(jt)*2*a(cr*v(Me),.25+wr)]};function F(){return l.geoProjection(lt).scale(66.1603)}var H=P(8),et=d(1+w);function q(Ft,jt){var ie=x(jt);return ie<k?[Ft,d(_(k+jt/2))]:[Ft*i(ie)*(2*w-1/v(ie)),b(jt)*(2*w*(ie-k)-d(_(ie/2)))]}q.invert=function(Ft,jt){if((xe=x(jt))<et)return[Ft,2*t(r(jt))-A];var ie=k,ue=25,ke,xe;do{var Me=i(ie/2),fr=_(ie/2);ie-=ke=(H*(ie-k)-d(fr)-xe)/(H-Me*Me/(2*fr))}while(x(ke)>T&&--ue>0);return[Ft/(i(ie)*(H-1/v(ie))),b(jt)*ie]};function W(){return l.geoProjection(q).scale(112.314)}function K(Ft){var jt=2*c/Ft;function ie(ue,ke){var xe=l.geoAzimuthalEquidistantRaw(ue,ke);if(x(ue)>A){var Me=a(xe[1],xe[0]),fr=P(xe[0]*xe[0]+xe[1]*xe[1]),gr=jt*g((Me-A)/jt)+A,cr=a(v(Me-=gr),2-i(Me));Me=gr+R(c/fr*v(cr))-cr,xe[0]=fr*i(Me),xe[1]=fr*v(Me)}return xe}return ie.invert=function(ue,ke){var xe=P(ue*ue+ke*ke);if(xe>A){var Me=a(ke,ue),fr=jt*g((Me-A)/jt)+A,gr=Me>fr?-1:1,cr=xe*i(fr-Me),wr=1/_(gr*z((cr-c)/P(c*(c-2*cr)+xe*xe)));Me=fr+2*t((wr+gr*P(wr*wr-3))/3),ue=xe*i(Me),ke=xe*v(Me)}return l.geoAzimuthalEquidistantRaw.invert(ue,ke)},ie}function nt(){var Ft=5,jt=l.geoProjectionMutator(K),ie=jt(Ft),ue=ie.stream,ke=.01,xe=-i(ke*M),Me=v(ke*M);return ie.lobes=function(fr){return arguments.length?jt(Ft=+fr):Ft},ie.stream=function(fr){var gr=ie.rotate(),cr=ue(fr),wr=(ie.rotate([0,0]),ue(fr));return ie.rotate(gr),cr.sphere=function(){wr.polygonStart(),wr.lineStart();for(var zr=0,jr=360/Ft,en=2*c/Ft,_n=90-180/Ft,zn=A;zr<Ft;++zr,_n-=jr,zn-=en)wr.point(a(Me*i(zn),xe)*S,R(Me*v(zn))*S),_n<-90?(wr.point(-90,-180-_n-ke),wr.point(-90,-180-_n+ke)):(wr.point(90,_n+ke),wr.point(90,_n-ke));wr.lineEnd(),wr.polygonEnd()},cr},ie.scale(87.8076).center([0,17.1875]).clipAngle(180-.001)}function it(Ft,jt){if(arguments.length<2&&(jt=Ft),jt===1)return l.geoAzimuthalEqualAreaRaw;if(jt===1/0)return ot;function ie(ue,ke){var xe=l.geoAzimuthalEqualAreaRaw(ue/jt,ke);return xe[0]*=Ft,xe}return ie.invert=function(ue,ke){var xe=l.geoAzimuthalEqualAreaRaw.invert(ue/Ft,ke);return xe[0]*=jt,xe},ie}function ot(Ft,jt){return[Ft*i(jt)/i(jt/=2),2*v(jt)]}ot.invert=function(Ft,jt){var ie=2*R(jt/2);return[Ft*i(ie/2)/i(ie),ie]};function ct(){var Ft=2,jt=l.geoProjectionMutator(it),ie=jt(Ft);return ie.coefficient=function(ue){return arguments.length?jt(Ft=+ue):Ft},ie.scale(169.529)}function bt(Ft,jt,ie){var ue=100,ke,xe,Me;ie=ie===void 0?0:+ie,jt=+jt;do xe=Ft(ie),Me=Ft(ie+u),xe===Me&&(Me=xe+u),ie-=ke=-1*u*(xe-jt)/(xe-Me);while(ue-- >0&&x(ke)>u);return ue<0?NaN:ie}function ut(Ft,jt,ie){return jt===void 0&&(jt=40),ie===void 0&&(ie=T),function(ue,ke,xe,Me){var fr,gr,cr;xe=xe===void 0?0:+xe,Me=Me===void 0?0:+Me;for(var wr=0;wr<jt;wr++){var zr=Ft(xe,Me),jr=zr[0]-ue,en=zr[1]-ke;if(x(jr)<ie&&x(en)<ie)break;var _n=jr*jr+en*en;if(_n>fr){xe-=gr/=2,Me-=cr/=2;continue}fr=_n;var zn=(xe>0?-1:1)*ie,$n=(Me>0?-1:1)*ie,mi=Ft(xe+zn,Me),wi=Ft(xe,Me+$n),Qi=(mi[0]-zr[0])/zn,Xi=(mi[1]-zr[1])/zn,na=(wi[0]-zr[0])/$n,va=(wi[1]-zr[1])/$n,vo=va*Qi-Xi*na,aa=(x(vo)<.5?.5:1)/vo;if(gr=(en*na-jr*va)*aa,cr=(jr*Xi-en*Qi)*aa,xe+=gr,Me+=cr,x(gr)<ie&&x(cr)<ie)break}return[xe,Me]}}function pt(){var Ft=it(1.68,2),jt=1.4,ie=12;function ue(ke,xe){if(ke+xe<-jt){var Me=(ke-xe+1.6)*(ke+xe+jt)/8;ke+=Me,xe-=.8*Me*v(xe+c/2)}var fr=Ft(ke,xe),gr=(1-i(ke*xe))/ie;return fr[1]<0&&(fr[0]*=1+gr),fr[1]>0&&(fr[1]*=1+gr/1.5*fr[0]*fr[0]),fr}return ue.invert=ut(ue),ue}function yt(){return l.geoProjection(pt()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])}function Tt(Ft,jt){var ie=Ft*v(jt),ue=30,ke;do jt-=ke=(jt+v(jt)-ie)/(1+i(jt));while(x(ke)>u&&--ue>0);return jt/2}function kt(Ft,jt,ie){function ue(ke,xe){return[Ft*ke*i(xe=Tt(ie,xe)),jt*v(xe)]}return ue.invert=function(ke,xe){return xe=R(xe/jt),[ke/(Ft*i(xe)),R((2*xe+v(2*xe))/ie)]},ue}var zt=kt(w/A,w,c);function Rt(){return l.geoProjection(zt).scale(169.529)}var Gt=2.00276,wt=1.11072;function It(Ft,jt){var ie=Tt(c,jt);return[Gt*Ft/(1/i(jt)+wt/i(ie)),(jt+w*v(ie))/Gt]}It.invert=function(Ft,jt){var ie=Gt*jt,ue=jt<0?-k:k,ke=25,xe,Me;do Me=ie-w*v(ue),ue-=xe=(v(2*ue)+2*ue-c*v(Me))/(2*i(2*ue)+2+c*i(Me)*w*i(ue));while(x(xe)>u&&--ke>0);return Me=ie-w*v(ue),[Ft*(1/i(Me)+wt/i(ue))/Gt,Me]};function $t(){return l.geoProjection(It).scale(160.857)}function Qt(Ft){var jt=0,ie=l.geoProjectionMutator(Ft),ue=ie(jt);return ue.parallel=function(ke){return arguments.length?ie(jt=ke*M):jt*S},ue}function Nt(Ft,jt){return[Ft*i(jt),jt]}Nt.invert=function(Ft,jt){return[Ft/i(jt),jt]};function Pt(){return l.geoProjection(Nt).scale(152.63)}function Yt(Ft){if(!Ft)return Nt;var jt=1/_(Ft);function ie(ue,ke){var xe=jt+Ft-ke,Me=xe&&ue*i(ke)/xe;return[xe*v(Me),jt-xe*i(Me)]}return ie.invert=function(ue,ke){var xe=P(ue*ue+(ke=jt-ke)*ke),Me=jt+Ft-xe;return[xe/i(Me)*a(ue,ke),Me]},ie}function ve(){return Qt(Yt).scale(123.082).center([0,26.1441]).parallel(45)}function Re(Ft){function jt(ie,ue){var ke=A-ue,xe=ke&&ie*Ft*v(ke)/ke;return[ke*v(xe)/Ft,A-ke*i(xe)]}return jt.invert=function(ie,ue){var ke=ie*Ft,xe=A-ue,Me=P(ke*ke+xe*xe),fr=a(ke,xe);return[(Me?Me/v(Me):1)*fr/Ft,A-Me]},jt}function ir(){var Ft=.5,jt=l.geoProjectionMutator(Re),ie=jt(Ft);return ie.fraction=function(ue){return arguments.length?jt(Ft=+ue):Ft},ie.scale(158.837)}var Ie=kt(1,4/c,c);function Be(){return l.geoProjection(Ie).scale(152.63)}function Ye(Ft,jt,ie,ue,ke,xe){var Me=i(xe),fr;if(x(Ft)>1||x(xe)>1)fr=z(ie*ke+jt*ue*Me);else{var gr=v(Ft/2),cr=v(xe/2);fr=2*R(P(gr*gr+jt*ue*cr*cr))}return x(fr)>u?[fr,a(ue*v(xe),jt*ke-ie*ue*Me)]:[0,0]}function ze(Ft,jt,ie){return z((Ft*Ft+jt*jt-ie*ie)/(2*Ft*jt))}function Ee(Ft){return Ft-2*c*n((Ft+c)/(2*c))}function Wt(Ft,jt,ie){for(var ue=[[Ft[0],Ft[1],v(Ft[1]),i(Ft[1])],[jt[0],jt[1],v(jt[1]),i(jt[1])],[ie[0],ie[1],v(ie[1]),i(ie[1])]],ke=ue[2],xe,Me=0;Me<3;++Me,ke=xe)xe=ue[Me],ke.v=Ye(xe[1]-ke[1],ke[3],ke[2],xe[3],xe[2],xe[0]-ke[0]),ke.point=[0,0];var fr=ze(ue[0].v[0],ue[2].v[0],ue[1].v[0]),gr=ze(ue[0].v[0],ue[1].v[0],ue[2].v[0]),cr=c-fr;ue[2].point[1]=0,ue[0].point[0]=-(ue[1].point[0]=ue[0].v[0]/2);var wr=[ue[2].point[0]=ue[0].point[0]+ue[2].v[0]*i(fr),2*(ue[0].point[1]=ue[1].point[1]=ue[2].v[0]*v(fr))];function zr(jr,en){var _n=v(en),zn=i(en),$n=new Array(3),mi;for(mi=0;mi<3;++mi){var wi=ue[mi];if($n[mi]=Ye(en-wi[1],wi[3],wi[2],zn,_n,jr-wi[0]),!$n[mi][0])return wi.point;$n[mi][1]=Ee($n[mi][1]-wi.v[1])}var Qi=wr.slice();for(mi=0;mi<3;++mi){var Xi=mi==2?0:mi+1,na=ze(ue[mi].v[0],$n[mi][0],$n[Xi][0]);$n[mi][1]<0&&(na=-na),mi?mi==1?(na=gr-na,Qi[0]-=$n[mi][0]*i(na),Qi[1]-=$n[mi][0]*v(na)):(na=cr-na,Qi[0]+=$n[mi][0]*i(na),Qi[1]+=$n[mi][0]*v(na)):(Qi[0]+=$n[mi][0]*i(na),Qi[1]-=$n[mi][0]*v(na))}return Qi[0]/=3,Qi[1]/=3,Qi}return zr}function ee(Ft){return Ft[0]*=M,Ft[1]*=M,Ft}function Xt(){return St([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])}function St(Ft,jt,ie){var ue=l.geoCentroid({type:"MultiPoint",coordinates:[Ft,jt,ie]}),ke=[-ue[0],-ue[1]],xe=l.geoRotation(ke),Me=Wt(ee(xe(Ft)),ee(xe(jt)),ee(xe(ie)));Me.invert=ut(Me);var fr=l.geoProjection(Me).rotate(ke),gr=fr.center;return delete fr.rotate,fr.center=function(cr){return arguments.length?gr(xe(cr)):xe.invert(gr())},fr.clipAngle(90)}function Vt(Ft,jt){var ie=P(1-v(jt));return[2/h*Ft*ie,h*(1-ie)]}Vt.invert=function(Ft,jt){var ie=(ie=jt/h-1)*ie;return[ie>0?Ft*P(c/ie)/2:0,R(1-ie)]};function Zt(){return l.geoProjection(Vt).scale(95.6464).center([0,30])}function qt(Ft){var jt=_(Ft);function ie(ue,ke){return[ue,(ue?ue/v(ue):1)*(v(ke)*i(ue)-jt*i(ke))]}return ie.invert=jt?function(ue,ke){ue&&(ke*=v(ue)/ue);var xe=i(ue);return[ue,2*a(P(xe*xe+jt*jt-ke*ke)-xe,jt-ke)]}:function(ue,ke){return[ue,R(ue?ke*_(ue)/ue:ke)]},ie}function Te(){return Qt(qt).scale(249.828).clipAngle(90)}var me=P(3);function Ne(Ft,jt){return[me*Ft*(2*i(2*jt/3)-1)/h,me*h*v(jt/3)]}Ne.invert=function(Ft,jt){var ie=3*R(jt/(me*h));return[h*Ft/(me*(2*i(2*ie/3)-1)),ie]};function Ke(){return l.geoProjection(Ne).scale(156.19)}function He(Ft){var jt=i(Ft);function ie(ue,ke){return[ue*jt,v(ke)/jt]}return ie.invert=function(ue,ke){return[ue/jt,R(ke*jt)]},ie}function Xe(){return Qt(He).parallel(38.58).scale(195.044)}function er(Ft){var jt=i(Ft);function ie(ue,ke){return[ue*jt,(1+jt)*_(ke/2)]}return ie.invert=function(ue,ke){return[ue/jt,t(ke/(1+jt))*2]},ie}function We(){return Qt(er).scale(124.75)}function hr(Ft,jt){var ie=P(8/(3*c));return[ie*Ft*(1-x(jt)/c),ie*jt]}hr.invert=function(Ft,jt){var ie=P(8/(3*c)),ue=jt/ie;return[Ft/(ie*(1-x(ue)/c)),ue]};function Wr(){return l.geoProjection(hr).scale(165.664)}function dn(Ft,jt){var ie=P(4-3*v(x(jt)));return[2/P(6*c)*Ft*ie,b(jt)*P(2*c/3)*(2-ie)]}dn.invert=function(Ft,jt){var ie=2-x(jt)/P(2*c/3);return[Ft*P(6*c)/(2*ie),b(jt)*R((4-ie*ie)/3)]};function Qr(){return l.geoProjection(dn).scale(165.664)}function le(Ft,jt){var ie=P(c*(4+c));return[2/ie*Ft*(1+P(1-4*jt*jt/(c*c))),4/ie*jt]}le.invert=function(Ft,jt){var ie=P(c*(4+c))/2;return[Ft*ie/(1+P(1-jt*jt*(4+c)/(4*c))),jt*ie/2]};function Qe(){return l.geoProjection(le).scale(180.739)}function Ze(Ft,jt){var ie=(2+A)*v(jt);jt/=2;for(var ue=0,ke=1/0;ue<10&&x(ke)>u;ue++){var xe=i(jt);jt-=ke=(jt+v(jt)*(xe+2)-ie)/(2*xe*(1+xe))}return[2/P(c*(4+c))*Ft*(1+i(jt)),2*P(c/(4+c))*v(jt)]}Ze.invert=function(Ft,jt){var ie=jt*P((4+c)/c)/2,ue=R(ie),ke=i(ue);return[Ft/(2/P(c*(4+c))*(1+ke)),R((ue+ie*(ke+2))/(2+A))]};function Ve(){return l.geoProjection(Ze).scale(180.739)}function _r(Ft,jt){return[Ft*(1+i(jt))/P(2+c),2*jt/P(2+c)]}_r.invert=function(Ft,jt){var ie=P(2+c),ue=jt*ie/2;return[ie*Ft/(1+i(ue)),ue]};function oe(){return l.geoProjection(_r).scale(173.044)}function Ht(Ft,jt){for(var ie=(1+A)*v(jt),ue=0,ke=1/0;ue<10&&x(ke)>u;ue++)jt-=ke=(jt+v(jt)-ie)/(1+i(jt));return ie=P(2+c),[Ft*(1+i(jt))/ie,2*jt/ie]}Ht.invert=function(Ft,jt){var ie=1+A,ue=P(ie/2);return[Ft*2*ue/(1+i(jt*=ue)),R((jt+v(jt))/ie)]};function te(){return l.geoProjection(Ht).scale(173.044)}var ne=3+2*w;function _e(Ft,jt){var ie=v(Ft/=2),ue=i(Ft),ke=P(i(jt)),xe=i(jt/=2),Me=v(jt)/(xe+w*ue*ke),fr=P(2/(1+Me*Me)),gr=P((w*xe+(ue+ie)*ke)/(w*xe+(ue-ie)*ke));return[ne*(fr*(gr-1/gr)-2*d(gr)),ne*(fr*Me*(gr+1/gr)-2*t(Me))]}_e.invert=function(Ft,jt){if(!(xe=lt.invert(Ft/1.2,jt*1.065)))return null;var ie=xe[0],ue=xe[1],ke=20,xe;Ft/=ne,jt/=ne;do{var Me=ie/2,fr=ue/2,gr=v(Me),cr=i(Me),wr=v(fr),zr=i(fr),jr=i(ue),en=P(jr),_n=wr/(zr+w*cr*en),zn=_n*_n,$n=P(2/(1+zn)),mi=w*zr+(cr+gr)*en,wi=w*zr+(cr-gr)*en,Qi=mi/wi,Xi=P(Qi),na=Xi-1/Xi,va=Xi+1/Xi,vo=$n*na-2*d(Xi)-Ft,aa=$n*_n*va-2*t(_n)-jt,Za=wr&&p*en*gr*zn/wr,xo=(w*cr*zr+en)/(2*(zr+w*cr*en)*(zr+w*cr*en)*en),Do=-.5*_n*$n*$n*$n,ka=Do*Za,Ea=Do*xo,Ts=(Ts=2*zr+w*en*(cr-gr))*Ts*Xi,Ao=(w*cr*zr*en+jr)/Ts,Ho=-(w*gr*wr)/(en*Ts),rs=na*ka-2*Ao/Xi+$n*(Ao+Ao/Qi),ft=na*Ea-2*Ho/Xi+$n*(Ho+Ho/Qi),_t=_n*va*ka-2*Za/(1+zn)+$n*va*Za+$n*_n*(Ao-Ao/Qi),Lt=_n*va*Ea-2*xo/(1+zn)+$n*va*xo+$n*_n*(Ho-Ho/Qi),Ut=ft*_t-Lt*rs;if(!Ut)break;var Bt=(aa*ft-vo*Lt)/Ut,Jt=(vo*_t-aa*rs)/Ut;ie-=Bt,ue=s(-A,o(A,ue-Jt))}while((x(Bt)>u||x(Jt)>u)&&--ke>0);return x(x(ue)-A)<u?[0,ue]:ke&&[ie,ue]};function Pe(){return l.geoProjection(_e).scale(62.5271)}var Et=i(35*M);function Mt(Ft,jt){var ie=_(jt/2);return[Ft*Et*P(1-ie*ie),(1+Et)*ie]}Mt.invert=function(Ft,jt){var ie=jt/(1+Et);return[Ft&&Ft/(Et*P(1-ie*ie)),2*t(ie)]};function se(){return l.geoProjection(Mt).scale(137.152)}function ce(Ft,jt){var ie=jt/2,ue=i(ie);return[2*Ft/h*i(jt)*ue*ue,h*_(ie)]}ce.invert=function(Ft,jt){var ie=t(jt/h),ue=i(ie),ke=2*ie;return[Ft*h/2/(i(ke)*ue*ue),ke]};function de(){return l.geoProjection(ce).scale(135.264)}function Se(Ft){var jt=1-Ft,ie=xe(c,0)[0]-xe(-c,0)[0],ue=xe(0,A)[1]-xe(0,-A)[1],ke=P(2*ue/ie);function xe(gr,cr){var wr=i(cr),zr=v(cr);return[wr/(jt+Ft*wr)*gr,jt*cr+Ft*zr]}function Me(gr,cr){var wr=xe(gr,cr);return[wr[0]*ke,wr[1]/ke]}function fr(gr){return Me(0,gr)[1]}return Me.invert=function(gr,cr){var wr=bt(fr,cr),zr=gr/ke*(Ft+jt/i(wr));return[zr,wr]},Me}function ye(){var Ft=.5,jt=l.geoProjectionMutator(Se),ie=jt(Ft);return ie.alpha=function(ue){return arguments.length?jt(Ft=+ue):Ft},ie.scale(168.725)}function Ae(Ft){return[Ft[0]/2,R(_(Ft[1]/2*M))*S]}function Ge(Ft){return[Ft[0]*2,2*t(v(Ft[1]*M))*S]}function sr(Ft){Ft==null&&(Ft=l.geoOrthographic);var jt=Ft(),ie=l.geoEquirectangular().scale(S).precision(0).clipAngle(null).translate([0,0]);function ue(xe){return jt(Ae(xe))}jt.invert&&(ue.invert=function(xe){return Ge(jt.invert(xe))}),ue.stream=function(xe){var Me=jt.stream(xe),fr=ie.stream({point:function(gr,cr){Me.point(gr/2,R(_(-cr/2*M))*S)},lineStart:function(){Me.lineStart()},lineEnd:function(){Me.lineEnd()},polygonStart:function(){Me.polygonStart()},polygonEnd:function(){Me.polygonEnd()}});return fr.sphere=Me.sphere,fr};function ke(xe){ue[xe]=function(){return arguments.length?(jt[xe].apply(jt,arguments),ue):jt[xe]()}}return ue.rotate=function(xe){return arguments.length?(ie.rotate(xe),ue):ie.rotate()},ue.center=function(xe){return arguments.length?(jt.center(Ae(xe)),ue):Ge(jt.center())},ke("angle"),ke("clipAngle"),ke("clipExtent"),ke("fitExtent"),ke("fitHeight"),ke("fitSize"),ke("fitWidth"),ke("scale"),ke("translate"),ke("precision"),ue.scale(249.5)}function Er(Ft,jt){var ie=2*c/jt,ue=Ft*Ft;function ke(xe,Me){var fr=l.geoAzimuthalEquidistantRaw(xe,Me),gr=fr[0],cr=fr[1],wr=gr*gr+cr*cr;if(wr>ue){var zr=P(wr),jr=a(cr,gr),en=ie*g(jr/ie),_n=jr-en,zn=Ft*i(_n),$n=(Ft*v(_n)-_n*v(zn))/(A-zn),mi=kr(_n,$n),wi=(c-Ft)/Mr(mi,zn,c);gr=zr;var Qi=50,Xi;do gr-=Xi=(Ft+Mr(mi,zn,gr)*wi-zr)/(mi(gr)*wi);while(x(Xi)>u&&--Qi>0);cr=_n*v(gr),gr<A&&(cr-=$n*(gr-A));var na=v(en),va=i(en);fr[0]=gr*va-cr*na,fr[1]=gr*na+cr*va}return fr}return ke.invert=function(xe,Me){var fr=xe*xe+Me*Me;if(fr>ue){var gr=P(fr),cr=a(Me,xe),wr=ie*g(cr/ie),zr=cr-wr;xe=gr*i(zr),Me=gr*v(zr);for(var jr=xe-A,en=v(xe),_n=Me/en,zn=xe<A?1/0:0,$n=10;;){var mi=Ft*v(_n),wi=Ft*i(_n),Qi=v(wi),Xi=A-wi,na=(mi-_n*Qi)/Xi,va=kr(_n,na);if(x(zn)<T||!--$n)break;_n-=zn=(_n*en-na*jr-Me)/(en-jr*2*(Xi*(wi+_n*mi*i(wi)-Qi)-mi*(mi-_n*Qi))/(Xi*Xi))}gr=Ft+Mr(va,wi,xe)*(c-Ft)/Mr(va,wi,c),cr=wr+_n,xe=gr*i(cr),Me=gr*v(cr)}return l.geoAzimuthalEquidistantRaw.invert(xe,Me)},ke}function kr(Ft,jt){return function(ie){var ue=Ft*i(ie);return ie<A&&(ue-=jt),P(1+ue*ue)}}function Mr(Ft,jt,ie){for(var ue=50,ke=(ie-jt)/ue,xe=Ft(jt)+Ft(ie),Me=1,fr=jt;Me<ue;++Me)xe+=2*Ft(fr+=ke);return xe*.5*ke}function Gr(){var Ft=6,jt=30*M,ie=i(jt),ue=v(jt),ke=l.geoProjectionMutator(Er),xe=ke(jt,Ft),Me=xe.stream,fr=.01,gr=-i(fr*M),cr=v(fr*M);return xe.radius=function(wr){return arguments.length?(ie=i(jt=wr*M),ue=v(jt),ke(jt,Ft)):jt*S},xe.lobes=function(wr){return arguments.length?ke(jt,Ft=+wr):Ft},xe.stream=function(wr){var zr=xe.rotate(),jr=Me(wr),en=(xe.rotate([0,0]),Me(wr));return xe.rotate(zr),jr.sphere=function(){en.polygonStart(),en.lineStart();for(var _n=0,zn=2*c/Ft,$n=0;_n<Ft;++_n,$n-=zn)en.point(a(cr*i($n),gr)*S,R(cr*v($n))*S),en.point(a(ue*i($n-zn/2),ie)*S,R(ue*v($n-zn/2))*S);en.lineEnd(),en.polygonEnd()},jr},xe.rotate([90,-40]).scale(91.7095).clipAngle(180-.001)}function ar(Ft,jt,ie,ue,ke,xe,Me,fr){arguments.length<8&&(fr=0);function gr(cr,wr){if(!wr)return[Ft*cr/c,0];var zr=wr*wr,jr=Ft+zr*(jt+zr*(ie+zr*ue)),en=wr*(ke-1+zr*(xe-fr+zr*Me)),_n=(jr*jr+en*en)/(2*en),zn=cr*R(jr/_n)/c;return[_n*v(zn),wr*(1+zr*fr)+_n*(1-i(zn))]}return gr.invert=function(cr,wr){var zr=c*cr/Ft,jr=wr,en,_n,zn=50;do{var $n=jr*jr,mi=Ft+$n*(jt+$n*(ie+$n*ue)),wi=jr*(ke-1+$n*(xe-fr+$n*Me)),Qi=mi*mi+wi*wi,Xi=2*wi,na=Qi/Xi,va=na*na,vo=R(mi/na)/c,aa=zr*vo,Za=mi*mi,xo=(2*jt+$n*(4*ie+$n*6*ue))*jr,Do=ke+$n*(3*xe+$n*5*Me),ka=2*(mi*xo+wi*(Do-1)),Ea=2*(Do-1),Ts=(ka*Xi-Qi*Ea)/(Xi*Xi),Ao=i(aa),Ho=v(aa),rs=na*Ao,ft=na*Ho,_t=zr/c*(1/P(1-Za/va))*(xo*na-mi*Ts)/va,Lt=ft-cr,Ut=jr*(1+$n*fr)+na-rs-wr,Bt=Ts*Ho+rs*_t,Jt=rs*vo,we=1+Ts-(Ts*Ao-ft*_t),pe=ft*vo,De=Bt*pe-we*Jt;if(!De)break;zr-=en=(Ut*Bt-Lt*we)/De,jr-=_n=(Lt*pe-Ut*Jt)/De}while((x(en)>u||x(_n)>u)&&--zn>0);return[zr,jr]},gr}var xr=ar(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555);function Ir(){return l.geoProjection(xr).scale(149.995)}var Hr=ar(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742);function Cr(){return l.geoProjection(Hr).scale(153.93)}var ae=ar(5/6*c,-.62636,-.0344,0,1.3493,-.05524,0,.045);function Le(){return l.geoProjection(ae).scale(130.945)}function $e(Ft,jt){var ie=Ft*Ft,ue=jt*jt;return[Ft*(1-.162388*ue)*(.87-952426e-9*ie*ie),jt*(1+ue/12)]}$e.invert=function(Ft,jt){var ie=Ft,ue=jt,ke=50,xe;do{var Me=ue*ue;ue-=xe=(ue*(1+Me/12)-jt)/(1+Me/4)}while(x(xe)>u&&--ke>0);ke=50,Ft/=1-.162388*Me;do{var fr=(fr=ie*ie)*fr;ie-=xe=(ie*(.87-952426e-9*fr)-Ft)/(.87-.00476213*fr)}while(x(xe)>u&&--ke>0);return[ie,ue]};function or(){return l.geoProjection($e).scale(131.747)}var Dr=ar(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function Nr(){return l.geoProjection(Dr).scale(131.087)}function Fr(Ft){var jt=Ft(A,0)[0]-Ft(-A,0)[0];function ie(ue,ke){var xe=ue>0?-.5:.5,Me=Ft(ue+xe*c,ke);return Me[0]-=xe*jt,Me}return Ft.invert&&(ie.invert=function(ue,ke){var xe=ue>0?-.5:.5,Me=Ft.invert(ue+xe*jt,ke),fr=Me[0]-xe*c;return fr<-c?fr+=2*c:fr>c&&(fr-=2*c),Me[0]=fr,Me}),ie}function Ar(Ft,jt){var ie=b(Ft),ue=b(jt),ke=i(jt),xe=i(Ft)*ke,Me=v(Ft)*ke,fr=v(ue*jt);Ft=x(a(Me,fr)),jt=R(xe),x(Ft-A)>u&&(Ft%=A);var gr=Xr(Ft>c/4?A-Ft:Ft,jt);return Ft>c/4&&(fr=gr[0],gr[0]=-gr[1],gr[1]=-fr),gr[0]*=ie,gr[1]*=-ue,gr}Ar.invert=function(Ft,jt){x(Ft)>1&&(Ft=b(Ft)*2-Ft),x(jt)>1&&(jt=b(jt)*2-jt);var ie=b(Ft),ue=b(jt),ke=-ie*Ft,xe=-ue*jt,Me=xe/ke<1,fr=Tn(Me?xe:ke,Me?ke:xe),gr=fr[0],cr=fr[1],wr=i(cr);return Me&&(gr=-A-gr),[ie*(a(v(gr)*wr,-v(cr))+c),ue*R(i(gr)*wr)]};function Xr(Ft,jt){if(jt===A)return[0,0];var ie=v(jt),ue=ie*ie,ke=ue*ue,xe=1+ke,Me=1+3*ke,fr=1-ke,gr=R(1/P(xe)),cr=fr+ue*xe*gr,wr=(1-ie)/cr,zr=P(wr),jr=wr*xe,en=P(jr),_n=zr*fr,zn,$n;if(Ft===0)return[0,-(_n+ue*en)];var mi=i(jt),wi=1/mi,Qi=2*ie*mi,Xi=(-3*ue+gr*Me)*Qi,na=(-cr*mi-(1-ie)*Xi)/(cr*cr),va=.5*na/zr,vo=fr*va-2*ue*zr*Qi,aa=ue*xe*na+wr*Me*Qi,Za=-wi*Qi,xo=-wi*aa,Do=-2*wi*vo,ka=4*Ft/c,Ea;if(Ft>.222*c||jt<c/4&&Ft>.175*c){if(zn=(_n+ue*P(jr*(1+ke)-_n*_n))/(1+ke),Ft>c/4)return[zn,zn];var Ts=zn,Ao=.5*zn;zn=.5*(Ao+Ts),$n=50;do{var Ho=P(jr-zn*zn),rs=zn*(Do+Za*Ho)+xo*R(zn/en)-ka;if(!rs)break;rs<0?Ao=zn:Ts=zn,zn=.5*(Ao+Ts)}while(x(Ts-Ao)>u&&--$n>0)}else{zn=u,$n=25;do{var ft=zn*zn,_t=P(jr-ft),Lt=Do+Za*_t,Ut=zn*Lt+xo*R(zn/en)-ka,Bt=Lt+(xo-Za*ft)/_t;zn-=Ea=_t?Ut/Bt:0}while(x(Ea)>u&&--$n>0)}return[zn,-_n-ue*P(jr-zn*zn)]}function Tn(Ft,jt){for(var ie=0,ue=1,ke=.5,xe=50;;){var Me=ke*ke,fr=P(ke),gr=R(1/P(1+Me)),cr=1-Me+ke*(1+Me)*gr,wr=(1-fr)/cr,zr=P(wr),jr=wr*(1+Me),en=zr*(1-Me),_n=jr-Ft*Ft,zn=P(_n),$n=jt+en+ke*zn;if(x(ue-ie)<T||--xe===0||$n===0)break;$n>0?ie=ke:ue=ke,ke=.5*(ie+ue)}if(!xe)return null;var mi=R(fr),wi=i(mi),Qi=1/wi,Xi=2*fr*wi,na=(-3*ke+gr*(1+3*Me))*Xi,va=(-cr*wi-(1-fr)*na)/(cr*cr),vo=.5*va/zr,aa=(1-Me)*vo-2*ke*zr*Xi,Za=-2*Qi*aa,xo=-Qi*Xi,Do=-Qi*(ke*(1+Me)*va+wr*(1+3*Me)*Xi);return[c/4*(Ft*(Za+xo*zn)+Do*R(Ft/P(jr))),mi]}function un(){return l.geoProjection(Fr(Ar)).scale(239.75)}function Un(Ft,jt,ie){var ue,ke,xe;return Ft?(ue=Dn(Ft,ie),jt?(ke=Dn(jt,1-ie),xe=ke[1]*ke[1]+ie*ue[0]*ue[0]*ke[0]*ke[0],[[ue[0]*ke[2]/xe,ue[1]*ue[2]*ke[0]*ke[1]/xe],[ue[1]*ke[1]/xe,-ue[0]*ue[2]*ke[0]*ke[2]/xe],[ue[2]*ke[1]*ke[2]/xe,-ie*ue[0]*ue[1]*ke[0]/xe]]):[[ue[0],0],[ue[1],0],[ue[2],0]]):(ke=Dn(jt,1-ie),[[0,ke[0]/ke[1]],[1/ke[1],0],[ke[2]/ke[1],0]])}function Dn(Ft,jt){var ie,ue,ke,xe,Me;if(jt<u)return xe=v(Ft),ue=i(Ft),ie=jt*(Ft-xe*ue)/4,[xe-ie*ue,ue+ie*xe,1-jt*xe*xe/2,Ft-ie];if(jt>=1-u)return ie=(1-jt)/4,ue=O(Ft),xe=I(Ft),ke=1/ue,Me=ue*U(Ft),[xe+ie*(Me-Ft)/(ue*ue),ke-ie*xe*ke*(Me-Ft),ke+ie*xe*ke*(Me+Ft),2*t(r(Ft))-A+ie*(Me-Ft)/ue];var fr=[1,0,0,0,0,0,0,0,0],gr=[P(jt),0,0,0,0,0,0,0,0],cr=0;for(ue=P(1-jt),Me=1;x(gr[cr]/fr[cr])>u&&cr<8;)ie=fr[cr++],gr[cr]=(ie-ue)/2,fr[cr]=(ie+ue)/2,ue=P(ie*ue),Me*=2;ke=Me*fr[cr]*Ft;do xe=gr[cr]*v(ue=ke)/fr[cr],ke=(R(xe)+ke)/2;while(--cr);return[v(ke),xe=i(ke),xe/i(ke-ue),ke]}function Xn(Ft,jt,ie){var ue=x(Ft),ke=x(jt),xe=U(ke);if(ue){var Me=1/v(ue),fr=1/(_(ue)*_(ue)),gr=-(fr+ie*(xe*xe*Me*Me)-1+ie),cr=(ie-1)*fr,wr=(-gr+P(gr*gr-4*cr))/2;return[Gn(t(1/P(wr)),ie)*b(Ft),Gn(t(P((wr/fr-1)/ie)),1-ie)*b(jt)]}return[0,Gn(t(xe),1-ie)*b(jt)]}function Gn(Ft,jt){if(!jt)return Ft;if(jt===1)return d(_(Ft/2+k));for(var ie=1,ue=P(1-jt),ke=P(jt),xe=0;x(ke)>u;xe++){if(Ft%c){var Me=t(ue*_(Ft)/ie);Me<0&&(Me+=c),Ft+=Me+~~(Ft/c)*c}else Ft+=Ft;ke=(ie+ue)/2,ue=P(ie*ue),ke=((ie=ke)-ue)/2}return Ft/(y(2,xe)*ie)}function yi(Ft,jt){var ie=(w-1)/(w+1),ue=P(1-ie*ie),ke=Gn(A,ue*ue),xe=-1,Me=d(_(c/4+x(jt)/2)),fr=r(xe*Me)/P(ie),gr=Pi(fr*i(xe*Ft),fr*v(xe*Ft)),cr=Xn(gr[0],gr[1],ue*ue);return[-cr[1],(jt>=0?1:-1)*(.5*ke-cr[0])]}function Pi(Ft,jt){var ie=Ft*Ft,ue=jt+1,ke=1-ie-jt*jt;return[.5*((Ft>=0?A:-A)-a(ke,2*Ft)),-.25*d(ke*ke+4*ie)+.5*d(ue*ue+ie)]}function pa(Ft,jt){var ie=jt[0]*jt[0]+jt[1]*jt[1];return[(Ft[0]*jt[0]+Ft[1]*jt[1])/ie,(Ft[1]*jt[0]-Ft[0]*jt[1])/ie]}yi.invert=function(Ft,jt){var ie=(w-1)/(w+1),ue=P(1-ie*ie),ke=Gn(A,ue*ue),xe=-1,Me=Un(.5*ke-jt,-Ft,ue*ue),fr=pa(Me[0],Me[1]),gr=a(fr[1],fr[0])/xe;return[gr,2*t(r(.5/xe*d(ie*fr[0]*fr[0]+ie*fr[1]*fr[1])))-A]};function Wi(){return l.geoProjection(Fr(yi)).scale(151.496)}function Ji(Ft){var jt=v(Ft),ie=i(Ft),ue=ji(Ft);ue.invert=ji(-Ft);function ke(xe,Me){var fr=ue(xe,Me);xe=fr[0],Me=fr[1];var gr=v(Me),cr=i(Me),wr=i(xe),zr=z(jt*gr+ie*cr*wr),jr=v(zr),en=x(jr)>u?zr/jr:1;return[en*ie*v(xe),(x(xe)>A?en:-en)*(jt*cr-ie*gr*wr)]}return ke.invert=function(xe,Me){var fr=P(xe*xe+Me*Me),gr=-v(fr),cr=i(fr),wr=fr*cr,zr=-Me*gr,jr=fr*jt,en=P(wr*wr+zr*zr-jr*jr),_n=a(wr*jr+zr*en,zr*jr-wr*en),zn=(fr>A?-1:1)*a(xe*gr,fr*i(_n)*cr+Me*v(_n)*gr);return ue.invert(zn,_n)},ke}function ji(Ft){var jt=v(Ft),ie=i(Ft);return function(ue,ke){var xe=i(ke),Me=i(ue)*xe,fr=v(ue)*xe,gr=v(ke);return[a(fr,Me*ie-gr*jt),R(gr*ie+Me*jt)]}}function Tr(){var Ft=0,jt=l.geoProjectionMutator(Ji),ie=jt(Ft),ue=ie.rotate,ke=ie.stream,xe=l.geoCircle();return ie.parallel=function(Me){if(!arguments.length)return Ft*S;var fr=ie.rotate();return jt(Ft=Me*M).rotate(fr)},ie.rotate=function(Me){return arguments.length?(ue.call(ie,[Me[0],Me[1]-Ft*S]),xe.center([-Me[0],-Me[1]]),ie):(Me=ue.call(ie),Me[1]+=Ft*S,Me)},ie.stream=function(Me){return Me=ke(Me),Me.sphere=function(){Me.polygonStart();var fr=.01,gr=xe.radius(90-fr)().coordinates[0],cr=gr.length-1,wr=-1,zr;for(Me.lineStart();++wr<cr;)Me.point((zr=gr[wr])[0],zr[1]);for(Me.lineEnd(),gr=xe.radius(90+fr)().coordinates[0],cr=gr.length-1,Me.lineStart();--wr>=0;)Me.point((zr=gr[wr])[0],zr[1]);Me.lineEnd(),Me.polygonEnd()},Me},ie.scale(79.4187).parallel(45).clipAngle(180-.001)}var gn=3,hn=R(1-1/gn)*S,Sn=He(0);function Zn(Ft){var jt=hn*M,ie=Vt(c,jt)[0]-Vt(-c,jt)[0],ue=Sn(0,jt)[1],ke=Vt(0,jt)[1],xe=h-ke,Me=D/Ft,fr=4/D,gr=ue+xe*xe*4/D;function cr(wr,zr){var jr,en=x(zr);if(en>jt){var _n=o(Ft-1,s(0,n((wr+c)/Me)));wr+=c*(Ft-1)/Ft-_n*Me,jr=Vt(wr,en),jr[0]=jr[0]*D/ie-D*(Ft-1)/(2*Ft)+_n*D/Ft,jr[1]=ue+(jr[1]-ke)*4*xe/D,zr<0&&(jr[1]=-jr[1])}else jr=Sn(wr,zr);return jr[0]*=fr,jr[1]/=gr,jr}return cr.invert=function(wr,zr){wr/=fr,zr*=gr;var jr=x(zr);if(jr>ue){var en=o(Ft-1,s(0,n((wr+c)/Me)));wr=(wr+c*(Ft-1)/Ft-en*Me)*ie/D;var _n=Vt.invert(wr,.25*(jr-ue)*D/xe+ke);return _n[0]-=c*(Ft-1)/Ft-en*Me,zr<0&&(_n[1]=-_n[1]),_n}return Sn.invert(wr,zr)},cr}function fi(Ft,jt){return[Ft,jt&1?90-u:hn]}function ri(Ft,jt){return[Ft,jt&1?-90+u:-hn]}function Rn(Ft){return[Ft[0]*(1-u),Ft[1]]}function jn(Ft){var jt=[].concat(m.range(-180,180+Ft/2,Ft).map(fi),m.range(180,-180-Ft/2,-Ft).map(ri));return{type:"Polygon",coordinates:[Ft===180?jt.map(Rn):jt]}}function Gi(){var Ft=4,jt=l.geoProjectionMutator(Zn),ie=jt(Ft),ue=ie.stream;return ie.lobes=function(ke){return arguments.length?jt(Ft=+ke):Ft},ie.stream=function(ke){var xe=ie.rotate(),Me=ue(ke),fr=(ie.rotate([0,0]),ue(ke));return ie.rotate(xe),Me.sphere=function(){l.geoStream(jn(180/Ft),fr)},Me},ie.scale(239.75)}function fa(Ft){var jt=1+Ft,ie=v(1/jt),ue=R(ie),ke=2*P(c/(xe=c+4*ue*jt)),xe,Me=.5*ke*(jt+P(Ft*(2+Ft))),fr=Ft*Ft,gr=jt*jt;function cr(wr,zr){var jr=1-v(zr),en,_n;if(jr&&jr<2){var zn=A-zr,$n=25,mi;do{var wi=v(zn),Qi=i(zn),Xi=ue+a(wi,jt-Qi),na=1+gr-2*jt*Qi;zn-=mi=(zn-fr*ue-jt*wi+na*Xi-.5*jr*xe)/(2*jt*wi*Xi)}while(x(mi)>T&&--$n>0);en=ke*P(na),_n=wr*Xi/c}else en=ke*(Ft+jr),_n=wr*ue/c;return[en*v(_n),Me-en*i(_n)]}return cr.invert=function(wr,zr){var jr=wr*wr+(zr-=Me)*zr,en=(1+gr-jr/(ke*ke))/(2*jt),_n=z(en),zn=v(_n),$n=ue+a(zn,jt-en);return[R(wr/P(jr))*c/$n,R(1-2*(_n-fr*ue-jt*zn+(1+gr-2*jt*en)*$n)/xe)]},cr}function Ue(){var Ft=1,jt=l.geoProjectionMutator(fa),ie=jt(Ft);return ie.ratio=function(ue){return arguments.length?jt(Ft=+ue):Ft},ie.scale(167.774).center([0,18.67])}var pr=.7109889596207567,an=.0528035274542;function vn(Ft,jt){return jt>-pr?(Ft=zt(Ft,jt),Ft[1]+=an,Ft):Nt(Ft,jt)}vn.invert=function(Ft,jt){return jt>-pr?zt.invert(Ft,jt-an):Nt.invert(Ft,jt)};function rn(){return l.geoProjection(vn).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}function An(Ft,jt){return x(jt)>pr?(Ft=zt(Ft,jt),Ft[1]-=jt>0?an:-an,Ft):Nt(Ft,jt)}An.invert=function(Ft,jt){return x(jt)>pr?zt.invert(Ft,jt+(jt>0?an:-an)):Nt.invert(Ft,jt)};function wn(){return l.geoProjection(An).scale(152.63)}function fn(Ft,jt,ie,ue){var ke=P(4*c/(2*ie+(1+Ft-jt/2)*v(2*ie)+(Ft+jt)/2*v(4*ie)+jt/2*v(6*ie))),xe=P(ue*v(ie)*P((1+Ft*i(2*ie)+jt*i(4*ie))/(1+Ft+jt))),Me=ie*gr(1);function fr(zr){return P(1+Ft*i(2*zr)+jt*i(4*zr))}function gr(zr){var jr=zr*ie;return(2*jr+(1+Ft-jt/2)*v(2*jr)+(Ft+jt)/2*v(4*jr)+jt/2*v(6*jr))/ie}function cr(zr){return fr(zr)*v(zr)}var wr=function(zr,jr){var en=ie*bt(gr,Me*v(jr)/ie,jr/c);isNaN(en)&&(en=ie*b(jr));var _n=ke*fr(en);return[_n*xe*zr/c*i(en),_n/xe*v(en)]};return wr.invert=function(zr,jr){var en=bt(cr,jr*xe/ke);return[zr*c/(i(en)*ke*xe*fr(en)),R(ie*gr(en/ie)/Me)]},ie===0&&(ke=P(ue/c),wr=function(zr,jr){return[zr*ke,v(jr)/ke]},wr.invert=function(zr,jr){return[zr/ke,R(jr*ke)]}),wr}function yr(){var Ft=1,jt=0,ie=45*M,ue=2,ke=l.geoProjectionMutator(fn),xe=ke(Ft,jt,ie,ue);return xe.a=function(Me){return arguments.length?ke(Ft=+Me,jt,ie,ue):Ft},xe.b=function(Me){return arguments.length?ke(Ft,jt=+Me,ie,ue):jt},xe.psiMax=function(Me){return arguments.length?ke(Ft,jt,ie=+Me*M,ue):ie*S},xe.ratio=function(Me){return arguments.length?ke(Ft,jt,ie,ue=+Me):ue},xe.scale(180.739)}function br(Ft,jt,ie,ue,ke,xe,Me,fr,gr,cr,wr){if(wr.nanEncountered)return NaN;var zr,jr,en,_n,zn,$n,mi,wi,Qi,Xi;if(zr=ie-jt,jr=Ft(jt+zr*.25),en=Ft(ie-zr*.25),isNaN(jr)){wr.nanEncountered=!0;return}if(isNaN(en)){wr.nanEncountered=!0;return}return _n=zr*(ue+4*jr+ke)/12,zn=zr*(ke+4*en+xe)/12,$n=_n+zn,Xi=($n-Me)/15,cr>gr?(wr.maxDepthCount++,$n+Xi):Math.abs(Xi)<fr?$n+Xi:(mi=jt+zr*.5,wi=br(Ft,jt,mi,ue,jr,ke,_n,fr*.5,gr,cr+1,wr),isNaN(wi)?(wr.nanEncountered=!0,NaN):(Qi=br(Ft,mi,ie,ke,en,xe,zn,fr*.5,gr,cr+1,wr),isNaN(Qi)?(wr.nanEncountered=!0,NaN):wi+Qi))}function Or(Ft,jt,ie,ue,ke){var xe={maxDepthCount:0,nanEncountered:!1};ue===void 0&&(ue=1e-8),ke===void 0&&(ke=20);var Me=Ft(jt),fr=Ft(.5*(jt+ie)),gr=Ft(ie),cr=(Me+4*fr+gr)*(ie-jt)/6,wr=br(Ft,jt,ie,Me,fr,gr,cr,ue,ke,1,xe);return wr}function yn(Ft,jt,ie){function ue(en){return Ft+(1-Ft)*y(1-y(en,jt),1/jt)}function ke(en){return Or(ue,0,en,1e-4)}for(var xe=1/ke(1),Me=1e3,fr=(1+1e-8)*xe,gr=[],cr=0;cr<=Me;cr++)gr.push(ke(cr/Me)*fr);function wr(en){var _n=0,zn=Me,$n=Me>>1;do gr[$n]>en?zn=$n:_n=$n,$n=_n+zn>>1;while($n>_n);var mi=gr[$n+1]-gr[$n];return mi&&(mi=(en-gr[$n+1])/mi),($n+1+mi)/Me}var zr=2*wr(1)/c*xe/ie,jr=function(en,_n){var zn=wr(x(v(_n))),$n=ue(zn)*en;return zn/=zr,[$n,_n>=0?zn:-zn]};return jr.invert=function(en,_n){var zn;return _n*=zr,x(_n)<1&&(zn=b(_n)*R(ke(x(_n))*xe)),[en/ue(x(_n)),zn]},jr}function Nn(){var Ft=0,jt=2.5,ie=1.183136,ue=l.geoProjectionMutator(yn),ke=ue(Ft,jt,ie);return ke.alpha=function(xe){return arguments.length?ue(Ft=+xe,jt,ie):Ft},ke.k=function(xe){return arguments.length?ue(Ft,jt=+xe,ie):jt},ke.gamma=function(xe){return arguments.length?ue(Ft,jt,ie=+xe):ie},ke.scale(152.63)}function ni(Ft,jt){return x(Ft[0]-jt[0])<u&&x(Ft[1]-jt[1])<u}function kn(Ft,jt){for(var ie=-1,ue=Ft.length,ke=Ft[0],xe,Me,fr,gr=[];++ie<ue;){xe=Ft[ie],Me=(xe[0]-ke[0])/jt,fr=(xe[1]-ke[1])/jt;for(var cr=0;cr<jt;++cr)gr.push([ke[0]+cr*Me,ke[1]+cr*fr]);ke=xe}return gr.push(xe),gr}function Kn(Ft){var jt=[],ie,ue,ke,xe,Me,fr,gr,cr=Ft[0].length;for(gr=0;gr<cr;++gr)ie=Ft[0][gr],ue=ie[0][0],ke=ie[0][1],xe=ie[1][1],Me=ie[2][0],fr=ie[2][1],jt.push(kn([[ue+u,ke+u],[ue+u,xe-u],[Me-u,xe-u],[Me-u,fr+u]],30));for(gr=Ft[1].length-1;gr>=0;--gr)ie=Ft[1][gr],ue=ie[0][0],ke=ie[0][1],xe=ie[1][1],Me=ie[2][0],fr=ie[2][1],jt.push(kn([[Me-u,fr-u],[Me-u,xe+u],[ue+u,xe+u],[ue+u,ke-u]],30));return{type:"Polygon",coordinates:[m.merge(jt)]}}function oi(Ft,jt,ie){var ue,ke;function xe(gr,cr){for(var wr=cr<0?-1:1,zr=jt[+(cr<0)],jr=0,en=zr.length-1;jr<en&&gr>zr[jr][2][0];++jr);var _n=Ft(gr-zr[jr][1][0],cr);return _n[0]+=Ft(zr[jr][1][0],wr*cr>wr*zr[jr][0][1]?zr[jr][0][1]:cr)[0],_n}ie?xe.invert=ie(xe):Ft.invert&&(xe.invert=function(gr,cr){for(var wr=ke[+(cr<0)],zr=jt[+(cr<0)],jr=0,en=wr.length;jr<en;++jr){var _n=wr[jr];if(_n[0][0]<=gr&&gr<_n[1][0]&&_n[0][1]<=cr&&cr<_n[1][1]){var zn=Ft.invert(gr-Ft(zr[jr][1][0],0)[0],cr);return zn[0]+=zr[jr][1][0],ni(xe(zn[0],zn[1]),[gr,cr])?zn:null}}});var Me=l.geoProjection(xe),fr=Me.stream;return Me.stream=function(gr){var cr=Me.rotate(),wr=fr(gr),zr=(Me.rotate([0,0]),fr(gr));return Me.rotate(cr),wr.sphere=function(){l.geoStream(ue,zr)},wr},Me.lobes=function(gr){return arguments.length?(ue=Kn(gr),jt=gr.map(function(cr){return cr.map(function(wr){return[[wr[0][0]*M,wr[0][1]*M],[wr[1][0]*M,wr[1][1]*M],[wr[2][0]*M,wr[2][1]*M]]})}),ke=jt.map(function(cr){return cr.map(function(wr){var zr=Ft(wr[0][0],wr[0][1])[0],jr=Ft(wr[2][0],wr[2][1])[0],en=Ft(wr[1][0],wr[0][1])[1],_n=Ft(wr[1][0],wr[1][1])[1],zn;return en>_n&&(zn=en,en=_n,_n=zn),[[zr,en],[jr,_n]]})}),Me):jt.map(function(cr){return cr.map(function(wr){return[[wr[0][0]*S,wr[0][1]*S],[wr[1][0]*S,wr[1][1]*S],[wr[2][0]*S,wr[2][1]*S]]})})},jt!=null&&Me.lobes(jt),Me}var gi=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function xi(){return oi(It,gi).scale(160.857)}var ci=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Si(){return oi(An,ci).scale(152.63)}var ko=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function $o(){return oi(zt,ko).scale(169.529)}var ss=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Al(){return oi(zt,ss).scale(169.529).rotate([20,0])}var Ul=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]];function bc(){return oi(vn,Ul,ut).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}var ga=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function sl(){return oi(Nt,ga).scale(152.63).rotate([-20,0])}function Ks(Ft,jt){return[3/D*Ft*P(c*c/3-jt*jt),jt]}Ks.invert=function(Ft,jt){return[D/3*Ft/P(c*c/3-jt*jt),jt]};function Xa(){return l.geoProjection(Ks).scale(158.837)}function Ro(Ft){function jt(ie,ue){if(x(x(ue)-A)<u)return[0,ue<0?-2:2];var ke=v(ue),xe=y((1+ke)/(1-ke),Ft/2),Me=.5*(xe+1/xe)+i(ie*=Ft);return[2*v(ie)/Me,(xe-1/xe)/Me]}return jt.invert=function(ie,ue){var ke=x(ue);if(x(ke-2)<u)return ie?null:[0,b(ue)*A];if(ke>2)return null;ie/=2,ue/=2;var xe=ie*ie,Me=ue*ue,fr=2*ue/(1+xe+Me);return fr=y((1+fr)/(1-fr),1/Ft),[a(2*ie,1-xe-Me)/Ft,R((fr-1)/(fr+1))]},jt}function Hl(){var Ft=.5,jt=l.geoProjectionMutator(Ro),ie=jt(Ft);return ie.spacing=function(ue){return arguments.length?jt(Ft=+ue):Ft},ie.scale(124.75)}var Cs=c/w;function Ba(Ft,jt){return[Ft*(1+P(i(jt)))/2,jt/(i(jt/2)*i(Ft/6))]}Ba.invert=function(Ft,jt){var ie=x(Ft),ue=x(jt),ke=u,xe=A;ue<Cs?xe*=ue/Cs:ke+=6*z(Cs/ue);for(var Me=0;Me<25;Me++){var fr=v(xe),gr=P(i(xe)),cr=v(xe/2),wr=i(xe/2),zr=v(ke/6),jr=i(ke/6),en=.5*ke*(1+gr)-ie,_n=xe/(wr*jr)-ue,zn=gr?-.25*ke*fr/gr:0,$n=.5*(1+gr),mi=(1+.5*xe*cr/wr)/(wr*jr),wi=xe/wr*(zr/6)/(jr*jr),Qi=zn*wi-mi*$n,Xi=(en*wi-_n*$n)/Qi,na=(_n*zn-en*mi)/Qi;if(xe-=Xi,ke-=na,x(Xi)<u&&x(na)<u)break}return[Ft<0?-ke:ke,jt<0?-xe:xe]};function Sl(){return l.geoProjection(Ba).scale(97.2672)}function io(Ft,jt){var ie=Ft*Ft,ue=jt*jt;return[Ft*(.975534+ue*(-.119161+ie*-.0143059+ue*-.0547009)),jt*(1.00384+ie*(.0802894+ue*-.02855+ie*199025e-9)+ue*(.0998909+ue*-.0491032))]}io.invert=function(Ft,jt){var ie=b(Ft)*c,ue=jt/2,ke=50;do{var xe=ie*ie,Me=ue*ue,fr=ie*ue,gr=ie*(.975534+Me*(-.119161+xe*-.0143059+Me*-.0547009))-Ft,cr=ue*(1.00384+xe*(.0802894+Me*-.02855+xe*199025e-9)+Me*(.0998909+Me*-.0491032))-jt,wr=.975534-Me*(.119161+3*xe*.0143059+Me*.0547009),zr=-fr*(2*.119161+4*.0547009*Me+2*.0143059*xe),jr=fr*(2*.0802894+4*199025e-9*xe+2*-.02855*Me),en=1.00384+xe*(.0802894+199025e-9*xe)+Me*(3*(.0998909-.02855*xe)-5*.0491032*Me),_n=zr*jr-en*wr,zn=(cr*zr-gr*en)/_n,$n=(gr*jr-cr*wr)/_n;ie-=zn,ue-=$n}while((x(zn)>u||x($n)>u)&&--ke>0);return ke&&[ie,ue]};function Va(){return l.geoProjection(io).scale(139.98)}function po(Ft,jt){return[v(Ft)/i(jt),_(jt)*i(Ft)]}po.invert=function(Ft,jt){var ie=Ft*Ft,ue=jt*jt,ke=ue+1,xe=ie+ke,Me=Ft?p*P((xe-P(xe*xe-4*ie))/ie):1/P(ke);return[R(Ft*Me),b(jt)*z(Me)]};function ao(){return l.geoProjection(po).scale(144.049).clipAngle(90-.001)}function vs(Ft){var jt=i(Ft),ie=_(k+Ft/2);function ue(ke,xe){var Me=xe-Ft,fr=x(Me)<u?ke*jt:x(fr=k+xe/2)<u||x(x(fr)-A)<u?0:ke*Me/d(_(fr)/ie);return[fr,Me]}return ue.invert=function(ke,xe){var Me,fr=xe+Ft;return[x(xe)<u?ke/jt:x(Me=k+fr/2)<u||x(x(Me)-A)<u?0:ke*d(_(Me)/ie)/xe,fr]},ue}function ll(){return Qt(vs).parallel(40).scale(158.837)}function Fc(Ft,jt){return[Ft,1.25*d(_(k+.4*jt))]}Fc.invert=function(Ft,jt){return[Ft,2.5*t(r(.8*jt))-.625*c]};function ls(){return l.geoProjection(Fc).scale(108.318)}function Oc(Ft){var jt=Ft.length-1;function ie(ue,ke){for(var xe=i(ke),Me=2/(1+xe*i(ue)),fr=Me*xe*v(ue),gr=Me*v(ke),cr=jt,wr=Ft[cr],zr=wr[0],jr=wr[1],en;--cr>=0;)wr=Ft[cr],zr=wr[0]+fr*(en=zr)-gr*jr,jr=wr[1]+fr*jr+gr*en;return zr=fr*(en=zr)-gr*jr,jr=fr*jr+gr*en,[zr,jr]}return ie.invert=function(ue,ke){var xe=20,Me=ue,fr=ke;do{for(var gr=jt,cr=Ft[gr],wr=cr[0],zr=cr[1],jr=0,en=0,_n;--gr>=0;)cr=Ft[gr],jr=wr+Me*(_n=jr)-fr*en,en=zr+Me*en+fr*_n,wr=cr[0]+Me*(_n=wr)-fr*zr,zr=cr[1]+Me*zr+fr*_n;jr=wr+Me*(_n=jr)-fr*en,en=zr+Me*en+fr*_n,wr=Me*(_n=wr)-fr*zr-ue,zr=Me*zr+fr*_n-ke;var zn=jr*jr+en*en,$n,mi;Me-=$n=(wr*jr+zr*en)/zn,fr-=mi=(zr*jr-wr*en)/zn}while(x($n)+x(mi)>u*u&&--xe>0);if(xe){var wi=P(Me*Me+fr*fr),Qi=2*t(wi*.5),Xi=v(Qi);return[a(Me*Xi,wi*i(Qi)),wi?R(fr*Xi/wi):0]}},ie}var Js=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],Fo=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],fu=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],Qs=[[.9245,0],[0,0],[.01943,0]],Os=[[.721316,0],[0,0],[-.00881625,-.00617325]];function rc(){return Bs(Js,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)}function hu(){return Bs(Fo,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])}function du(){return Bs(fu,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])}function cl(){return Bs(Qs,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)}function nc(){return Bs(Os,[165,10]).scale(250).clipAngle(130).center([-165,-10])}function Bs(Ft,jt){var ie=l.geoProjection(Oc(Ft)).rotate(jt).clipAngle(90),ue=l.geoRotation(jt),ke=ie.center;return delete ie.rotate,ie.center=function(xe){return arguments.length?ke(ue(xe)):ue.invert(ke())},ie}var xc=P(6),Ml=P(7);function wc(Ft,jt){var ie=R(7*v(jt)/(3*xc));return[xc*Ft*(2*i(2*ie/3)-1)/Ml,9*v(ie/3)/Ml]}wc.invert=function(Ft,jt){var ie=3*R(jt*Ml/9);return[Ft*Ml/(xc*(2*i(2*ie/3)-1)),R(v(ie)*3*xc/7)]};function Bc(){return l.geoProjection(wc).scale(164.859)}function ic(Ft,jt){for(var ie=(1+p)*v(jt),ue=jt,ke=0,xe;ke<25&&(ue-=xe=(v(ue/2)+v(ue)-ie)/(.5*i(ue/2)+i(ue)),!(x(xe)<u));ke++);return[Ft*(1+2*i(ue)/i(ue/2))/(3*w),2*P(3)*v(ue/2)/P(2+w)]}ic.invert=function(Ft,jt){var ie=jt*P(2+w)/(2*P(3)),ue=2*R(ie);return[3*w*Ft/(1+2*i(ue)/i(ue/2)),R((ie+v(ue))/(1+p))]};function pu(){return l.geoProjection(ic).scale(188.209)}function ul(Ft,jt){for(var ie=P(6/(4+c)),ue=(1+c/4)*v(jt),ke=jt/2,xe=0,Me;xe<25&&(ke-=Me=(ke/2+v(ke)-ue)/(.5+i(ke)),!(x(Me)<u));xe++);return[ie*(.5+i(ke))*Ft/1.5,ie*ke]}ul.invert=function(Ft,jt){var ie=P(6/(4+c)),ue=jt/ie;return x(x(ue)-A)<u&&(ue=ue<0?-A:A),[1.5*Ft/(ie*(.5+i(ue))),R((ue/2+v(ue))/(1+c/4))]};function _c(){return l.geoProjection(ul).scale(166.518)}function ac(Ft,jt){var ie=jt*jt,ue=ie*ie,ke=ie*ue;return[Ft*(.84719-.13063*ie+ke*ke*(-.04515+.05494*ie-.02326*ue+.00331*ke)),jt*(1.01183+ue*ue*(-.02625+.01926*ie-.00396*ue))]}ac.invert=function(Ft,jt){var ie=jt,ue=25,ke,xe,Me,fr;do xe=ie*ie,Me=xe*xe,ie-=ke=(ie*(1.01183+Me*Me*(-.02625+.01926*xe-.00396*Me))-jt)/(1.01183+Me*Me*(9*-.02625+11*.01926*xe+13*-.00396*Me));while(x(ke)>T&&--ue>0);return xe=ie*ie,Me=xe*xe,fr=xe*Me,[Ft/(.84719-.13063*xe+fr*fr*(-.04515+.05494*xe-.02326*Me+.00331*fr)),ie]};function Es(){return l.geoProjection(ac).scale(175.295)}function Vl(Ft,jt){return[Ft*(1+i(jt))/2,2*(jt-_(jt/2))]}Vl.invert=function(Ft,jt){for(var ie=jt/2,ue=0,ke=1/0;ue<10&&x(ke)>u;++ue){var xe=i(jt/2);jt-=ke=(jt-_(jt/2)-ie)/(1-.5/(xe*xe))}return[2*Ft/(1+i(jt)),jt]};function kc(){return l.geoProjection(Vl).scale(152.63)}var Nc=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Uc(){return oi(it(1/0),Nc).rotate([20,0]).scale(152.63)}function oc(Ft,jt){var ie=v(jt),ue=i(jt),ke=b(Ft);if(Ft===0||x(jt)===A)return[0,jt];if(jt===0)return[Ft,0];if(x(Ft)===A)return[Ft*ue,A*ie];var xe=c/(2*Ft)-2*Ft/c,Me=2*jt/c,fr=(1-Me*Me)/(ie-Me),gr=xe*xe,cr=fr*fr,wr=1+gr/cr,zr=1+cr/gr,jr=(xe*ie/fr-xe/2)/wr,en=(cr*ie/gr+fr/2)/zr,_n=jr*jr+ue*ue/wr,zn=en*en-(cr*ie*ie/gr+fr*ie-1)/zr;return[A*(jr+P(_n)*ke),A*(en+P(zn<0?0:zn)*b(-jt*xe)*ke)]}oc.invert=function(Ft,jt){Ft/=A,jt/=A;var ie=Ft*Ft,ue=jt*jt,ke=ie+ue,xe=c*c;return[Ft?(ke-1+P((1-ke)*(1-ke)+4*ie))/(2*Ft)*A:0,bt(function(Me){return ke*(c*v(Me)-2*Me)*c+4*Me*Me*(jt-v(Me))+2*c*Me-xe*jt},0)]};function vu(){return l.geoProjection(oc).scale(127.267)}var Hc=1.0148,cs=.23185,Cl=-.14499,El=.02406,Tc=Hc,Ls=5*cs,Oo=7*Cl,sc=9*El,Ns=1.790857183;function Us(Ft,jt){var ie=jt*jt;return[Ft,jt*(Hc+ie*ie*(cs+ie*(Cl+El*ie)))]}Us.invert=function(Ft,jt){jt>Ns?jt=Ns:jt<-Ns&&(jt=-Ns);var ie=jt,ue;do{var ke=ie*ie;ie-=ue=(ie*(Hc+ke*ke*(cs+ke*(Cl+El*ke)))-jt)/(Tc+ke*ke*(Ls+ke*(Oo+sc*ke)))}while(x(ue)>u);return[Ft,ie]};function mo(){return l.geoProjection(Us).scale(139.319)}function Gl(Ft,jt){if(x(jt)<u)return[Ft,0];var ie=_(jt),ue=Ft*v(jt);return[v(ue)/ie,jt+(1-i(ue))/ie]}Gl.invert=function(Ft,jt){if(x(jt)<u)return[Ft,0];var ie=Ft*Ft+jt*jt,ue=jt*.5,ke=10,xe;do{var Me=_(ue),fr=1/i(ue),gr=ie-2*jt*ue+ue*ue;ue-=xe=(Me*gr+2*(ue-jt))/(2+gr*fr*fr+2*(ue-jt)*Me)}while(x(xe)>u&&--ke>0);return Me=_(ue),[(x(jt)<x(ue+1/Me)?R(Ft*Me):b(jt)*b(Ft)*(z(x(Ft*Me))+A))/v(ue),ue]};function Yl(){return l.geoProjection(Gl).scale(103.74)}function fl(Ft,jt){var ie=Ll(Ft[1],Ft[0]),ue=Ll(jt[1],jt[0]),ke=$l(ie,ue),xe=lc(ie)/lc(ue);return Wl([1,0,Ft[0][0],0,1,Ft[0][1]],Wl([xe,0,0,0,xe,0],Wl([i(ke),v(ke),0,-v(ke),i(ke),0],[1,0,-jt[0][0],0,1,-jt[0][1]])))}function Ds(Ft){var jt=1/(Ft[0]*Ft[4]-Ft[1]*Ft[3]);return[jt*Ft[4],-jt*Ft[1],jt*(Ft[1]*Ft[5]-Ft[2]*Ft[4]),-jt*Ft[3],jt*Ft[0],jt*(Ft[2]*Ft[3]-Ft[0]*Ft[5])]}function Wl(Ft,jt){return[Ft[0]*jt[0]+Ft[1]*jt[3],Ft[0]*jt[1]+Ft[1]*jt[4],Ft[0]*jt[2]+Ft[1]*jt[5]+Ft[2],Ft[3]*jt[0]+Ft[4]*jt[3],Ft[3]*jt[1]+Ft[4]*jt[4],Ft[3]*jt[2]+Ft[4]*jt[5]+Ft[5]]}function Ll(Ft,jt){return[Ft[0]-jt[0],Ft[1]-jt[1]]}function lc(Ft){return P(Ft[0]*Ft[0]+Ft[1]*Ft[1])}function $l(Ft,jt){return a(Ft[0]*jt[1]-Ft[1]*jt[0],Ft[0]*jt[0]+Ft[1]*jt[1])}function hl(Ft,jt,ie){ue(Ft,{transform:null});function ue(cr,wr){if(cr.edges=Ac(cr.face),wr.face){var zr=cr.shared=Bu(cr.face,wr.face),jr=fl(zr.map(wr.project),zr.map(cr.project));cr.transform=wr.transform?Wl(wr.transform,jr):jr;for(var en=wr.edges,_n=0,zn=en.length;_n<zn;++_n)gs(zr[0],en[_n][1])&&gs(zr[1],en[_n][0])&&(en[_n]=cr),gs(zr[0],en[_n][0])&&gs(zr[1],en[_n][1])&&(en[_n]=cr);for(en=cr.edges,_n=0,zn=en.length;_n<zn;++_n)gs(zr[0],en[_n][0])&&gs(zr[1],en[_n][1])&&(en[_n]=wr),gs(zr[0],en[_n][1])&&gs(zr[1],en[_n][0])&&(en[_n]=wr)}else cr.transform=wr.transform;return cr.children&&cr.children.forEach(function($n){ue($n,cr)}),cr}function ke(cr,wr){var zr=jt(cr,wr),jr=zr.project([cr*S,wr*S]),en;return(en=zr.transform)?[en[0]*jr[0]+en[1]*jr[1]+en[2],-(en[3]*jr[0]+en[4]*jr[1]+en[5])]:(jr[1]=-jr[1],jr)}Dl(Ft)&&(ke.invert=function(cr,wr){var zr=xe(Ft,[cr,-wr]);return zr&&(zr[0]*=M,zr[1]*=M,zr)});function xe(cr,wr){var zr=cr.project.invert,jr=cr.transform,en=wr;if(jr&&(jr=Ds(jr),en=[jr[0]*en[0]+jr[1]*en[1]+jr[2],jr[3]*en[0]+jr[4]*en[1]+jr[5]]),zr&&cr===Me(_n=zr(en)))return _n;for(var _n,zn=cr.children,$n=0,mi=zn&&zn.length;$n<mi;++$n)if(_n=xe(zn[$n],wr))return _n}function Me(cr){return jt(cr[0]*M,cr[1]*M)}var fr=l.geoProjection(ke),gr=fr.stream;return fr.stream=function(cr){var wr=fr.rotate(),zr=gr(cr),jr=(fr.rotate([0,0]),gr(cr));return fr.rotate(wr),zr.sphere=function(){jr.polygonStart(),jr.lineStart(),gu(jr,Ft),jr.lineEnd(),jr.polygonEnd()},zr},fr.angle(ie==null?-30:ie*S)}function gu(Ft,jt,ie){var ue,ke=jt.edges,xe=ke.length,Me,fr={type:"MultiPoint",coordinates:jt.face},gr=jt.face.filter(function(zn){return x(zn[1])!==90}),cr=l.geoBounds({type:"MultiPoint",coordinates:gr}),wr=!1,zr=-1,jr=cr[1][0]-cr[0][0],en=jr===180||jr===360?[(cr[0][0]+cr[1][0])/2,(cr[0][1]+cr[1][1])/2]:l.geoCentroid(fr);if(ie)for(;++zr<xe&&ke[zr]!==ie;);++zr;for(var _n=0;_n<xe;++_n)Me=ke[(_n+zr)%xe],Array.isArray(Me)?(wr||(Ft.point((ue=l.geoInterpolate(Me[0],en)(u))[0],ue[1]),wr=!0),Ft.point((ue=l.geoInterpolate(Me[1],en)(u))[0],ue[1])):(wr=!1,Me!==ie&&gu(Ft,Me,jt))}function gs(Ft,jt){return Ft&&jt&&Ft[0]===jt[0]&&Ft[1]===jt[1]}function Bu(Ft,jt){for(var ie,ue,ke=Ft.length,xe=null,Me=0;Me<ke;++Me){ie=Ft[Me];for(var fr=jt.length;--fr>=0;)if(ue=jt[fr],ie[0]===ue[0]&&ie[1]===ue[1]){if(xe)return[xe,ie];xe=ie}}}function Ac(Ft){for(var jt=Ft.length,ie=[],ue=Ft[jt-1],ke=0;ke<jt;++ke)ie.push([ue,ue=Ft[ke]]);return ie}function Dl(Ft){return Ft.project.invert||Ft.children&&Ft.children.some(Dl)}var Xl=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],dl=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(Ft){return Ft.map(function(jt){return Xl[jt]})});function jl(Ft){Ft=Ft||function(ie){var ue=l.geoCentroid({type:"MultiPoint",coordinates:ie});return l.geoGnomonic().scale(1).translate([0,0]).rotate([-ue[0],-ue[1]])};var jt=dl.map(function(ie){return{face:ie,project:Ft(ie)}});return[-1,0,0,1,0,1,4,5].forEach(function(ie,ue){var ke=jt[ie];ke&&(ke.children||(ke.children=[])).push(jt[ue])}),hl(jt[0],function(ie,ue){return jt[ie<-c/2?ue<0?6:4:ie<0?ue<0?2:0:ie<c/2?ue<0?3:1:ue<0?7:5]}).angle(-30).scale(101.858).center([0,45])}var Vc=2/P(3);function Gc(Ft,jt){var ie=Vt(Ft,jt);return[ie[0]*Vc,ie[1]]}Gc.invert=function(Ft,jt){return Vt.invert(Ft/Vc,jt)};function Nu(Ft){Ft=Ft||function(ie){var ue=l.geoCentroid({type:"MultiPoint",coordinates:ie});return l.geoProjection(Gc).translate([0,0]).scale(1).rotate(ue[1]>0?[-ue[0],0]:[180-ue[0],180])};var jt=dl.map(function(ie){return{face:ie,project:Ft(ie)}});return[-1,0,0,1,0,1,4,5].forEach(function(ie,ue){var ke=jt[ie];ke&&(ke.children||(ke.children=[])).push(jt[ue])}),hl(jt[0],function(ie,ue){return jt[ie<-c/2?ue<0?6:4:ie<0?ue<0?2:0:ie<c/2?ue<0?3:1:ue<0?7:5]}).angle(-30).scale(121.906).center([0,48.5904])}function Na(Ft){Ft=Ft||function(Me){var fr=Me.length===6?l.geoCentroid({type:"MultiPoint",coordinates:Me}):Me[0];return l.geoGnomonic().scale(1).translate([0,0]).rotate([-fr[0],-fr[1]])};var jt=dl.map(function(Me){for(var fr=Me.map(ms),gr=fr.length,cr=fr[gr-1],wr,zr=[],jr=0;jr<gr;++jr)wr=fr[jr],zr.push(us([cr[0]*.9486832980505138+wr[0]*.31622776601683794,cr[1]*.9486832980505138+wr[1]*.31622776601683794,cr[2]*.9486832980505138+wr[2]*.31622776601683794]),us([wr[0]*.9486832980505138+cr[0]*.31622776601683794,wr[1]*.9486832980505138+cr[1]*.31622776601683794,wr[2]*.9486832980505138+cr[2]*.31622776601683794])),cr=wr;return zr}),ie=[],ue=[-1,0,0,1,0,1,4,5];jt.forEach(function(Me,fr){for(var gr=dl[fr],cr=gr.length,wr=ie[fr]=[],zr=0;zr<cr;++zr)jt.push([gr[zr],Me[(zr*2+2)%(2*cr)],Me[(zr*2+1)%(2*cr)]]),ue.push(fr),wr.push(pl(ms(Me[(zr*2+2)%(2*cr)]),ms(Me[(zr*2+1)%(2*cr)])))});var ke=jt.map(function(Me){return{project:Ft(Me),face:Me}});ue.forEach(function(Me,fr){var gr=ke[Me];gr&&(gr.children||(gr.children=[])).push(ke[fr])});function xe(Me,fr){var gr=i(fr),cr=[gr*i(Me),gr*v(Me),v(fr)],wr=Me<-c/2?fr<0?6:4:Me<0?fr<0?2:0:Me<c/2?fr<0?3:1:fr<0?7:5,zr=ie[wr];return ke[Pl(zr[0],cr)<0?8+3*wr:Pl(zr[1],cr)<0?8+3*wr+1:Pl(zr[2],cr)<0?8+3*wr+2:wr]}return hl(ke[0],xe).angle(-30).scale(110.625).center([0,45])}function Pl(Ft,jt){for(var ie=0,ue=Ft.length,ke=0;ie<ue;++ie)ke+=Ft[ie]*jt[ie];return ke}function pl(Ft,jt){return[Ft[1]*jt[2]-Ft[2]*jt[1],Ft[2]*jt[0]-Ft[0]*jt[2],Ft[0]*jt[1]-Ft[1]*jt[0]]}function us(Ft){return[a(Ft[1],Ft[0])*S,R(s(-1,o(1,Ft[2])))*S]}function ms(Ft){var jt=Ft[0]*M,ie=Ft[1]*M,ue=i(ie);return[ue*i(jt),ue*v(jt),v(ie)]}function Zl(){}function yo(Ft){if((ie=Ft.length)<4)return!1;for(var jt=0,ie,ue=Ft[ie-1][1]*Ft[0][0]-Ft[ie-1][0]*Ft[0][1];++jt<ie;)ue+=Ft[jt-1][1]*Ft[jt][0]-Ft[jt-1][0]*Ft[jt][1];return ue<=0}function Yc(Ft,jt){for(var ie=jt[0],ue=jt[1],ke=!1,xe=0,Me=Ft.length,fr=Me-1;xe<Me;fr=xe++){var gr=Ft[xe],cr=gr[0],wr=gr[1],zr=Ft[fr],jr=zr[0],en=zr[1];wr>ue^en>ue&&ie<(jr-cr)*(ue-wr)/(en-wr)+cr&&(ke=!ke)}return ke}function ys(Ft,jt){var ie=jt.stream,ue;if(!ie)throw new Error("invalid projection");switch(Ft&&Ft.type){case"Feature":ue=tl;break;case"FeatureCollection":ue=qs;break;default:ue=bs;break}return ue(Ft,ie)}function qs(Ft,jt){return{type:"FeatureCollection",features:Ft.features.map(function(ie){return tl(ie,jt)})}}function tl(Ft,jt){return{type:"Feature",id:Ft.id,properties:Ft.properties,geometry:bs(Ft.geometry,jt)}}function Hs(Ft,jt){return{type:"GeometryCollection",geometries:Ft.geometries.map(function(ie){return bs(ie,jt)})}}function bs(Ft,jt){if(!Ft)return null;if(Ft.type==="GeometryCollection")return Hs(Ft,jt);var ie;switch(Ft.type){case"Point":ie=xs;break;case"MultiPoint":ie=xs;break;case"LineString":ie=Wc;break;case"MultiLineString":ie=Wc;break;case"Polygon":ie=cc;break;case"MultiPolygon":ie=cc;break;case"Sphere":ie=cc;break;default:return null}return l.geoStream(Ft,jt(ie)),ie.result()}var ja=[],Bo=[],xs={point:function(Ft,jt){ja.push([Ft,jt])},result:function(){var Ft=ja.length?ja.length<2?{type:"Point",coordinates:ja[0]}:{type:"MultiPoint",coordinates:ja}:null;return ja=[],Ft}},Wc={lineStart:Zl,point:function(Ft,jt){ja.push([Ft,jt])},lineEnd:function(){ja.length&&(Bo.push(ja),ja=[])},result:function(){var Ft=Bo.length?Bo.length<2?{type:"LineString",coordinates:Bo[0]}:{type:"MultiLineString",coordinates:Bo}:null;return Bo=[],Ft}},cc={polygonStart:Zl,lineStart:Zl,point:function(Ft,jt){ja.push([Ft,jt])},lineEnd:function(){var Ft=ja.length;if(Ft){do ja.push(ja[0].slice());while(++Ft<4);Bo.push(ja),ja=[]}},polygonEnd:Zl,result:function(){if(!Bo.length)return null;var Ft=[],jt=[];return Bo.forEach(function(ie){yo(ie)?Ft.push([ie]):jt.push(ie)}),jt.forEach(function(ie){var ue=ie[0];Ft.some(function(ke){if(Yc(ke[0],ue))return ke.push(ie),!0})||Ft.push([ie])}),Bo=[],Ft.length?Ft.length>1?{type:"MultiPolygon",coordinates:Ft}:{type:"Polygon",coordinates:Ft[0]}:null}};function $c(Ft){var jt=Ft(A,0)[0]-Ft(-A,0)[0];function ie(ue,ke){var xe=x(ue)<A,Me=Ft(xe?ue:ue>0?ue-c:ue+c,ke),fr=(Me[0]-Me[1])*p,gr=(Me[0]+Me[1])*p;if(xe)return[fr,gr];var cr=jt*p,wr=fr>0^gr>0?-1:1;return[wr*fr-b(gr)*cr,wr*gr-b(fr)*cr]}return Ft.invert&&(ie.invert=function(ue,ke){var xe=(ue+ke)*p,Me=(ke-ue)*p,fr=x(xe)<.5*jt&&x(Me)<.5*jt;if(!fr){var gr=jt*p,cr=xe>0^Me>0?-1:1,wr=-cr*ue+(Me>0?1:-1)*gr,zr=-cr*ke+(xe>0?1:-1)*gr;xe=(-wr-zr)*p,Me=(wr-zr)*p}var jr=Ft.invert(xe,Me);return fr||(jr[0]+=xe>0?c:-c),jr}),l.geoProjection(ie).rotate([-90,-90,45]).clipAngle(180-.001)}function be(){return $c(Ar).scale(176.423)}function Oe(){return $c(yi).scale(111.48)}function dr(Ft,jt){if(!(0<=(jt=+jt)&&jt<=20))throw new Error("invalid digits");function ie(cr){var wr=cr.length,zr=2,jr=new Array(wr);for(jr[0]=+cr[0].toFixed(jt),jr[1]=+cr[1].toFixed(jt);zr<wr;)jr[zr]=cr[zr],++zr;return jr}function ue(cr){return cr.map(ie)}function ke(cr){for(var wr=ie(cr[0]),zr=[wr],jr=1;jr<cr.length;jr++){var en=ie(cr[jr]);(en.length>2||en[0]!=wr[0]||en[1]!=wr[1])&&(zr.push(en),wr=en)}return zr.length===1&&cr.length>1&&zr.push(ie(cr[cr.length-1])),zr}function xe(cr){return cr.map(ke)}function Me(cr){if(cr==null)return cr;var wr;switch(cr.type){case"GeometryCollection":wr={type:"GeometryCollection",geometries:cr.geometries.map(Me)};break;case"Point":wr={type:"Point",coordinates:ie(cr.coordinates)};break;case"MultiPoint":wr={type:cr.type,coordinates:ue(cr.coordinates)};break;case"LineString":wr={type:cr.type,coordinates:ke(cr.coordinates)};break;case"MultiLineString":case"Polygon":wr={type:cr.type,coordinates:xe(cr.coordinates)};break;case"MultiPolygon":wr={type:"MultiPolygon",coordinates:cr.coordinates.map(xe)};break;default:return cr}return cr.bbox!=null&&(wr.bbox=cr.bbox),wr}function fr(cr){var wr={type:"Feature",properties:cr.properties,geometry:Me(cr.geometry)};return cr.id!=null&&(wr.id=cr.id),cr.bbox!=null&&(wr.bbox=cr.bbox),wr}if(Ft!=null)switch(Ft.type){case"Feature":return fr(Ft);case"FeatureCollection":{var gr={type:"FeatureCollection",features:Ft.features.map(fr)};return Ft.bbox!=null&&(gr.bbox=Ft.bbox),gr}default:return Me(Ft)}return Ft}function lr(Ft){var jt=v(Ft);function ie(ue,ke){var xe=jt?_(ue*jt/2)/jt:ue/2;if(!ke)return[2*xe,-Ft];var Me=2*t(xe*v(ke)),fr=1/_(ke);return[v(Me)*fr,ke+(1-i(Me))*fr-Ft]}return ie.invert=function(ue,ke){if(x(ke+=Ft)<u)return[jt?2*t(jt*ue/2)/jt:ue,0];var xe=ue*ue+ke*ke,Me=0,fr=10,gr;do{var cr=_(Me),wr=1/i(Me),zr=xe-2*ke*Me+Me*Me;Me-=gr=(cr*zr+2*(Me-ke))/(2+zr*wr*wr+2*(Me-ke)*cr)}while(x(gr)>u&&--fr>0);var jr=ue*(cr=_(Me)),en=_(x(ke)<x(Me+1/cr)?R(jr)*.5:z(jr)*.5+c/4)/v(Me);return[jt?2*t(jt*en)/jt:2*en,Me]},ie}function Rr(){return Qt(lr).scale(131.215)}var nn=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];nn.forEach(function(Ft){Ft[1]*=1.0144});function mn(Ft,jt){var ie=o(18,x(jt)*36/c),ue=n(ie),ke=ie-ue,xe=(zr=nn[ue])[0],Me=zr[1],fr=(zr=nn[++ue])[0],gr=zr[1],cr=(zr=nn[o(19,++ue)])[0],wr=zr[1],zr;return[Ft*(fr+ke*(cr-xe)/2+ke*ke*(cr-2*fr+xe)/2),(jt>0?A:-A)*(gr+ke*(wr-Me)/2+ke*ke*(wr-2*gr+Me)/2)]}mn.invert=function(Ft,jt){var ie=jt/A,ue=ie*90,ke=o(18,x(ue/5)),xe=s(0,n(ke));do{var Me=nn[xe][1],fr=nn[xe+1][1],gr=nn[o(19,xe+2)][1],cr=gr-Me,wr=gr-2*fr+Me,zr=2*(x(ie)-fr)/cr,jr=wr/cr,en=zr*(1-jr*zr*(1-2*jr*zr));if(en>=0||xe===1){ue=(jt>=0?5:-5)*(en+ke);var _n=50,zn;do ke=o(18,x(ue)/5),xe=n(ke),en=ke-xe,Me=nn[xe][1],fr=nn[xe+1][1],gr=nn[o(19,xe+2)][1],ue-=(zn=(jt>=0?A:-A)*(fr+en*(gr-Me)/2+en*en*(gr-2*fr+Me)/2)-jt)*S;while(x(zn)>T&&--_n>0);break}}while(--xe>=0);var $n=nn[xe][0],mi=nn[xe+1][0],wi=nn[o(19,xe+2)][0];return[Ft/(mi+en*(wi-$n)/2+en*en*(wi-2*mi+$n)/2),ue*M]};function Mn(){return l.geoProjection(mn).scale(152.63)}function Pn(Ft){function jt(ie,ue){var ke=i(ue),xe=(Ft-1)/(Ft-ke*i(ie));return[xe*ke*v(ie),xe*v(ue)]}return jt.invert=function(ie,ue){var ke=ie*ie+ue*ue,xe=P(ke),Me=(Ft-P(1-ke*(Ft+1)/(Ft-1)))/((Ft-1)/xe+xe/(Ft-1));return[a(ie*Me,xe*P(1-Me*Me)),xe?R(ue*Me/xe):0]},jt}function Hn(Ft,jt){var ie=Pn(Ft);if(!jt)return ie;var ue=i(jt),ke=v(jt);function xe(Me,fr){var gr=ie(Me,fr),cr=gr[1],wr=cr*ke/(Ft-1)+ue;return[gr[0]*ue/wr,cr/wr]}return xe.invert=function(Me,fr){var gr=(Ft-1)/(Ft-1-fr*ke);return ie.invert(gr*Me,gr*fr*ue)},xe}function bn(){var Ft=2,jt=0,ie=l.geoProjectionMutator(Hn),ue=ie(Ft,jt);return ue.distance=function(ke){return arguments.length?ie(Ft=+ke,jt):Ft},ue.tilt=function(ke){return arguments.length?ie(Ft,jt=ke*M):jt*S},ue.scale(432.147).clipAngle(z(1/Ft)*S-1e-6)}var On=1e-4,In=1e4,Yn=-180,ti=Yn+On,Bi=180,Ei=Bi-On,Ni=-90,Ui=Ni+On,Qn=90,pi=Qn-On;function $i(Ft){return Ft.length>0}function ta(Ft){return Math.floor(Ft*In)/In}function ya(Ft){return Ft===Ni||Ft===Qn?[0,Ft]:[Yn,ta(Ft)]}function ba(Ft){var jt=Ft[0],ie=Ft[1],ue=!1;return jt<=ti?(jt=Yn,ue=!0):jt>=Ei&&(jt=Bi,ue=!0),ie<=Ui?(ie=Ni,ue=!0):ie>=pi&&(ie=Qn,ue=!0),ue?[jt,ie]:Ft}function wa(Ft){return Ft.map(ba)}function Ca(Ft,jt,ie){for(var ue=0,ke=Ft.length;ue<ke;++ue){var xe=Ft[ue].slice();ie.push({index:-1,polygon:jt,ring:xe});for(var Me=0,fr=xe.length;Me<fr;++Me){var gr=xe[Me],cr=gr[0],wr=gr[1];if(cr<=ti||cr>=Ei||wr<=Ui||wr>=pi){xe[Me]=ba(gr);for(var zr=Me+1;zr<fr;++zr){var jr=xe[zr],en=jr[0],_n=jr[1];if(en>ti&&en<Ei&&_n>Ui&&_n<pi)break}if(zr===Me+1)continue;if(Me){var zn={index:-1,polygon:jt,ring:xe.slice(0,Me+1)};zn.ring[zn.ring.length-1]=ya(wr),ie[ie.length-1]=zn}else ie.pop();if(zr>=fr)break;ie.push({index:-1,polygon:jt,ring:xe=xe.slice(zr-1)}),xe[0]=ya(xe[0][1]),Me=-1,fr=xe.length}}}}function ca(Ft){var jt,ie=Ft.length,ue={},ke={},xe,Me,fr,gr,cr;for(jt=0;jt<ie;++jt){if(xe=Ft[jt],Me=xe.ring[0],gr=xe.ring[xe.ring.length-1],Me[0]===gr[0]&&Me[1]===gr[1]){xe.polygon.push(xe.ring),Ft[jt]=null;continue}xe.index=jt,ue[Me]=ke[gr]=xe}for(jt=0;jt<ie;++jt)if(xe=Ft[jt],xe){if(Me=xe.ring[0],gr=xe.ring[xe.ring.length-1],fr=ke[Me],cr=ue[gr],delete ue[Me],delete ke[gr],Me[0]===gr[0]&&Me[1]===gr[1]){xe.polygon.push(xe.ring);continue}fr?(delete ke[Me],delete ue[fr.ring[0]],fr.ring.pop(),Ft[fr.index]=null,xe={index:-1,polygon:fr.polygon,ring:fr.ring.concat(xe.ring)},fr===cr?xe.polygon.push(xe.ring):(xe.index=ie++,Ft.push(ue[xe.ring[0]]=ke[xe.ring[xe.ring.length-1]]=xe))):cr?(delete ue[gr],delete ke[cr.ring[cr.ring.length-1]],xe.ring.pop(),xe={index:ie++,polygon:cr.polygon,ring:xe.ring.concat(cr.ring)},Ft[cr.index]=null,Ft.push(ue[xe.ring[0]]=ke[xe.ring[xe.ring.length-1]]=xe)):(xe.ring.push(xe.ring[0]),xe.polygon.push(xe.ring))}}function Mo(Ft){var jt={type:"Feature",geometry:lo(Ft.geometry)};return Ft.id!=null&&(jt.id=Ft.id),Ft.bbox!=null&&(jt.bbox=Ft.bbox),Ft.properties!=null&&(jt.properties=Ft.properties),jt}function lo(Ft){if(Ft==null)return Ft;var jt,ie,ue,ke;switch(Ft.type){case"GeometryCollection":jt={type:"GeometryCollection",geometries:Ft.geometries.map(lo)};break;case"Point":jt={type:"Point",coordinates:ba(Ft.coordinates)};break;case"MultiPoint":case"LineString":jt={type:Ft.type,coordinates:wa(Ft.coordinates)};break;case"MultiLineString":jt={type:"MultiLineString",coordinates:Ft.coordinates.map(wa)};break;case"Polygon":{var xe=[];Ca(Ft.coordinates,xe,ie=[]),ca(ie),jt={type:"Polygon",coordinates:xe};break}case"MultiPolygon":{ie=[],ue=-1,ke=Ft.coordinates.length;for(var Me=new Array(ke);++ue<ke;)Ca(Ft.coordinates[ue],Me[ue]=[],ie);ca(ie),jt={type:"MultiPolygon",coordinates:Me.filter($i)};break}default:return Ft}return Ft.bbox!=null&&(jt.bbox=Ft.bbox),jt}function qi(Ft){if(Ft==null)return Ft;switch(Ft.type){case"Feature":return Mo(Ft);case"FeatureCollection":{var jt={type:"FeatureCollection",features:Ft.features.map(Mo)};return Ft.bbox!=null&&(jt.bbox=Ft.bbox),jt}default:return lo(Ft)}}function vi(Ft,jt){var ie=_(jt/2),ue=v(k*ie);return[Ft*(.74482-.34588*ue*ue),1.70711*ie]}vi.invert=function(Ft,jt){var ie=jt/1.70711,ue=v(k*ie);return[Ft/(.74482-.34588*ue*ue),2*t(ie)]};function _a(){return l.geoProjection(vi).scale(146.153)}function bo(Ft,jt,ie){var ue=l.geoInterpolate(jt,ie),ke=ue(.5),xe=l.geoRotation([-ke[0],-ke[1]])(jt),Me=ue.distance/2,fr=-R(v(xe[1]*M)/v(Me)),gr=[-ke[0],-ke[1],-(xe[0]>0?c-fr:fr)*S],cr=l.geoProjection(Ft(Me)).rotate(gr),wr=l.geoRotation(gr),zr=cr.center;return delete cr.rotate,cr.center=function(jr){return arguments.length?zr(wr(jr)):wr.invert(zr())},cr.clipAngle(90)}function To(Ft){var jt=i(Ft);function ie(ue,ke){var xe=l.geoGnomonicRaw(ue,ke);return xe[0]*=jt,xe}return ie.invert=function(ue,ke){return l.geoGnomonicRaw.invert(ue/jt,ke)},ie}function ws(){return Vs([-158,21.5],[-77,39]).clipAngle(60).scale(400)}function Vs(Ft,jt){return bo(To,Ft,jt)}function Xo(Ft){if(!(Ft*=2))return l.geoAzimuthalEquidistantRaw;var jt=-Ft/2,ie=-jt,ue=Ft*Ft,ke=_(ie),xe=.5/v(ie);function Me(fr,gr){var cr=z(i(gr)*i(fr-jt)),wr=z(i(gr)*i(fr-ie)),zr=gr<0?-1:1;return cr*=cr,wr*=wr,[(cr-wr)/(2*Ft),zr*P(4*ue*wr-(ue-cr+wr)*(ue-cr+wr))/(2*Ft)]}return Me.invert=function(fr,gr){var cr=gr*gr,wr=i(P(cr+(jr=fr+jt)*jr)),zr=i(P(cr+(jr=fr+ie)*jr)),jr,en;return[a(en=wr-zr,jr=(wr+zr)*ke),(gr<0?-1:1)*z(P(jr*jr+en*en)*xe)]},Me}function vl(){return Ps([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)}function Ps(Ft,jt){return bo(Xo,Ft,jt)}function _s(Ft,jt){if(x(jt)<u)return[Ft,0];var ie=x(jt/A),ue=R(ie);if(x(Ft)<u||x(x(jt)-A)<u)return[0,b(jt)*c*_(ue/2)];var ke=i(ue),xe=x(c/Ft-Ft/c)/2,Me=xe*xe,fr=ke/(ie+ke-1),gr=fr*(2/ie-1),cr=gr*gr,wr=cr+Me,zr=fr-cr,jr=Me+fr;return[b(Ft)*c*(xe*zr+P(Me*zr*zr-wr*(fr*fr-cr)))/wr,b(jt)*c*(gr*jr-xe*P((Me+1)*wr-jr*jr))/wr]}_s.invert=function(Ft,jt){if(x(jt)<u)return[Ft,0];if(x(Ft)<u)return[0,A*v(2*t(jt/c))];var ie=(Ft/=c)*Ft,ue=(jt/=c)*jt,ke=ie+ue,xe=ke*ke,Me=-x(jt)*(1+ke),fr=Me-2*ue+ie,gr=-2*Me+1+2*ue+xe,cr=ue/gr+(2*fr*fr*fr/(gr*gr*gr)-9*Me*fr/(gr*gr))/27,wr=(Me-fr*fr/(3*gr))/gr,zr=2*P(-wr/3),jr=z(3*cr/(wr*zr))/3;return[c*(ke-1+P(1+2*(ie-ue)+xe))/(2*Ft),b(jt)*c*(-zr*i(jr+c/3)-fr/(3*gr))]};function Co(){return l.geoProjection(_s).scale(79.4183)}function uc(Ft,jt){if(x(jt)<u)return[Ft,0];var ie=x(jt/A),ue=R(ie);if(x(Ft)<u||x(x(jt)-A)<u)return[0,b(jt)*c*_(ue/2)];var ke=i(ue),xe=x(c/Ft-Ft/c)/2,Me=xe*xe,fr=ke*(P(1+Me)-xe*ke)/(1+Me*ie*ie);return[b(Ft)*c*fr,b(jt)*c*P(1-fr*(2*xe+fr))]}uc.invert=function(Ft,jt){if(!Ft)return[0,A*v(2*t(jt/c))];var ie=x(Ft/c),ue=(1-ie*ie-(jt/=c)*jt)/(2*ie),ke=ue*ue,xe=P(ke+1);return[b(Ft)*c*(xe-ue),b(jt)*A*v(2*a(P((1-2*ue*ie)*(ue+xe)-ie),P(xe+ue+ie)))]};function Sc(){return l.geoProjection(uc).scale(79.4183)}function ks(Ft,jt){if(x(jt)<u)return[Ft,0];var ie=jt/A,ue=R(ie);if(x(Ft)<u||x(x(jt)-A)<u)return[0,c*_(ue/2)];var ke=(c/Ft-Ft/c)/2,xe=ie/(1+i(ue));return[c*(b(Ft)*P(ke*ke+1-xe*xe)-ke),c*xe]}ks.invert=function(Ft,jt){if(!jt)return[Ft,0];var ie=jt/c,ue=(c*c*(1-ie*ie)-Ft*Ft)/(2*c*Ft);return[Ft?c*(b(Ft)*P(ue*ue+1)-ue):0,A*v(2*t(ie))]};function Xc(){return l.geoProjection(ks).scale(79.4183)}function fc(Ft,jt){if(!jt)return[Ft,0];var ie=x(jt);if(!Ft||ie===A)return[0,jt];var ue=ie/A,ke=ue*ue,xe=(8*ue-ke*(ke+2)-5)/(2*ke*(ue-1)),Me=xe*xe,fr=ue*xe,gr=ke+Me+2*fr,cr=ue+3*xe,wr=Ft/A,zr=wr+1/wr,jr=b(x(Ft)-A)*P(zr*zr-4),en=jr*jr,_n=gr*(ke+Me*en-1)+(1-ke)*(ke*(cr*cr+4*Me)+12*fr*Me+4*Me*Me),zn=(jr*(gr+Me-1)+2*P(_n))/(4*gr+en);return[b(Ft)*A*zn,b(jt)*A*P(1+jr*x(zn)-zn*zn)]}fc.invert=function(Ft,jt){var ie;if(!Ft||!jt)return[Ft,jt];jt/=c;var ue=b(Ft)*Ft/A,ke=(ue*ue-1+4*jt*jt)/x(ue),xe=ke*ke,Me=2*jt,fr=50;do{var gr=Me*Me,cr=(8*Me-gr*(gr+2)-5)/(2*gr*(Me-1)),wr=(3*Me-gr*Me-10)/(2*gr*Me),zr=cr*cr,jr=Me*cr,en=Me+cr,_n=en*en,zn=Me+3*cr,$n=_n*(gr+zr*xe-1)+(1-gr)*(gr*(zn*zn+4*zr)+zr*(12*jr+4*zr)),mi=-2*en*(4*jr*zr+(1-4*gr+3*gr*gr)*(1+wr)+zr*(-6+14*gr-xe+(-8+8*gr-2*xe)*wr)+jr*(-8+12*gr+(-10+10*gr-xe)*wr)),wi=P($n),Qi=ke*(_n+zr-1)+2*wi-ue*(4*_n+xe),Xi=ke*(2*cr*wr+2*en*(1+wr))+mi/wi-8*en*(ke*(-1+zr+_n)+2*wi)*(1+wr)/(xe+4*_n);Me-=ie=Qi/Xi}while(ie>u&&--fr>0);return[b(Ft)*(P(ke*ke+4)+ke)*c/4,A*Me]};function bf(){return l.geoProjection(fc).scale(127.16)}function mu(Ft,jt,ie,ue,ke){function xe(Me,fr){var gr=ie*v(ue*fr),cr=P(1-gr*gr),wr=P(2/(1+cr*i(Me*=ke)));return[Ft*cr*wr*v(Me),jt*gr*wr]}return xe.invert=function(Me,fr){var gr=Me/Ft,cr=fr/jt,wr=P(gr*gr+cr*cr),zr=2*R(wr/2);return[a(Me*_(zr),Ft*wr)/ke,wr&&R(fr*v(zr)/(jt*ie*wr))/ue]},xe}function jc(Ft,jt,ie,ue){var ke=c/3;Ft=s(Ft,u),jt=s(jt,u),Ft=o(Ft,A),jt=o(jt,c-u),ie=s(ie,0),ie=o(ie,100-u),ue=s(ue,u);var xe=ie/100+1,Me=ue/100,fr=z(xe*i(ke))/ke,gr=v(Ft)/v(fr*A),cr=jt/c,wr=P(Me*v(Ft/2)/v(jt/2)),zr=wr/P(cr*gr*fr),jr=1/(wr*P(cr*gr*fr));return mu(zr,jr,gr,fr,cr)}function yu(){var Ft=65*M,jt=60*M,ie=20,ue=200,ke=l.geoProjectionMutator(jc),xe=ke(Ft,jt,ie,ue);return xe.poleline=function(Me){return arguments.length?ke(Ft=+Me*M,jt,ie,ue):Ft*S},xe.parallels=function(Me){return arguments.length?ke(Ft,jt=+Me*M,ie,ue):jt*S},xe.inflation=function(Me){return arguments.length?ke(Ft,jt,ie=+Me,ue):ie},xe.ratio=function(Me){return arguments.length?ke(Ft,jt,ie,ue=+Me):ue},xe.scale(163.775)}function Gs(){return yu().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)}var Uu=4*c+3*P(3),bu=2*P(2*c*P(3)/Uu),xu=kt(bu*P(3)/c,bu,Uu/6);function jo(){return l.geoProjection(xu).scale(176.84)}function wu(Ft,jt){return[Ft*P(1-3*jt*jt/(c*c)),jt]}wu.invert=function(Ft,jt){return[Ft/P(1-3*jt*jt/(c*c)),jt]};function Ju(){return l.geoProjection(wu).scale(152.63)}function Is(Ft,jt){var ie=i(jt),ue=i(Ft)*ie,ke=1-ue,xe=i(Ft=a(v(Ft)*ie,-v(jt))),Me=v(Ft);return ie=P(1-ue*ue),[Me*ie-xe*ke,-xe*ie-Me*ke]}Is.invert=function(Ft,jt){var ie=(Ft*Ft+jt*jt)/-2,ue=P(-ie*(2+ie)),ke=jt*ie+Ft*ue,xe=Ft*ie-jt*ue,Me=P(xe*xe+ke*ke);return[a(ue*ke,Me*(1+ie)),Me?-R(ue*xe/Me):0]};function Zc(){return l.geoProjection(Is).rotate([0,-90,45]).scale(124.75).clipAngle(180-.001)}function Kc(Ft,jt){var ie=X(Ft,jt);return[(ie[0]+Ft/A)/2,(ie[1]+jt)/2]}Kc.invert=function(Ft,jt){var ie=Ft,ue=jt,ke=25;do{var xe=i(ue),Me=v(ue),fr=v(2*ue),gr=Me*Me,cr=xe*xe,wr=v(ie),zr=i(ie/2),jr=v(ie/2),en=jr*jr,_n=1-cr*zr*zr,zn=_n?z(xe*zr)*P($n=1/_n):$n=0,$n,mi=.5*(2*zn*xe*jr+ie/A)-Ft,wi=.5*(zn*Me+ue)-jt,Qi=.5*$n*(cr*en+zn*xe*zr*gr)+.5/A,Xi=$n*(wr*fr/4-zn*Me*jr),na=.125*$n*(fr*jr-zn*Me*cr*wr),va=.5*$n*(gr*zr+zn*en*xe)+.5,vo=Xi*na-va*Qi,aa=(wi*Xi-mi*va)/vo,Za=(mi*na-wi*Qi)/vo;ie-=aa,ue-=Za}while((x(aa)>u||x(Za)>u)&&--ke>0);return[ie,ue]};function _u(){return l.geoProjection(Kc).scale(158.837)}f.geoNaturalEarth=l.geoNaturalEarth1,f.geoNaturalEarthRaw=l.geoNaturalEarth1Raw,f.geoAiry=Z,f.geoAiryRaw=tt,f.geoAitoff=J,f.geoAitoffRaw=X,f.geoArmadillo=at,f.geoArmadilloRaw=st,f.geoAugust=F,f.geoAugustRaw=lt,f.geoBaker=W,f.geoBakerRaw=q,f.geoBerghaus=nt,f.geoBerghausRaw=K,f.geoBertin1953=yt,f.geoBertin1953Raw=pt,f.geoBoggs=$t,f.geoBoggsRaw=It,f.geoBonne=ve,f.geoBonneRaw=Yt,f.geoBottomley=ir,f.geoBottomleyRaw=Re,f.geoBromley=Be,f.geoBromleyRaw=Ie,f.geoChamberlin=St,f.geoChamberlinRaw=Wt,f.geoChamberlinAfrica=Xt,f.geoCollignon=Zt,f.geoCollignonRaw=Vt,f.geoCraig=Te,f.geoCraigRaw=qt,f.geoCraster=Ke,f.geoCrasterRaw=Ne,f.geoCylindricalEqualArea=Xe,f.geoCylindricalEqualAreaRaw=He,f.geoCylindricalStereographic=We,f.geoCylindricalStereographicRaw=er,f.geoEckert1=Wr,f.geoEckert1Raw=hr,f.geoEckert2=Qr,f.geoEckert2Raw=dn,f.geoEckert3=Qe,f.geoEckert3Raw=le,f.geoEckert4=Ve,f.geoEckert4Raw=Ze,f.geoEckert5=oe,f.geoEckert5Raw=_r,f.geoEckert6=te,f.geoEckert6Raw=Ht,f.geoEisenlohr=Pe,f.geoEisenlohrRaw=_e,f.geoFahey=se,f.geoFaheyRaw=Mt,f.geoFoucaut=de,f.geoFoucautRaw=ce,f.geoFoucautSinusoidal=ye,f.geoFoucautSinusoidalRaw=Se,f.geoGilbert=sr,f.geoGingery=Gr,f.geoGingeryRaw=Er,f.geoGinzburg4=Ir,f.geoGinzburg4Raw=xr,f.geoGinzburg5=Cr,f.geoGinzburg5Raw=Hr,f.geoGinzburg6=Le,f.geoGinzburg6Raw=ae,f.geoGinzburg8=or,f.geoGinzburg8Raw=$e,f.geoGinzburg9=Nr,f.geoGinzburg9Raw=Dr,f.geoGringorten=un,f.geoGringortenRaw=Ar,f.geoGuyou=Wi,f.geoGuyouRaw=yi,f.geoHammer=ct,f.geoHammerRaw=it,f.geoHammerRetroazimuthal=Tr,f.geoHammerRetroazimuthalRaw=Ji,f.geoHealpix=Gi,f.geoHealpixRaw=Zn,f.geoHill=Ue,f.geoHillRaw=fa,f.geoHomolosine=wn,f.geoHomolosineRaw=An,f.geoHufnagel=yr,f.geoHufnagelRaw=fn,f.geoHyperelliptical=Nn,f.geoHyperellipticalRaw=yn,f.geoInterrupt=oi,f.geoInterruptedBoggs=xi,f.geoInterruptedHomolosine=Si,f.geoInterruptedMollweide=$o,f.geoInterruptedMollweideHemispheres=Al,f.geoInterruptedSinuMollweide=bc,f.geoInterruptedSinusoidal=sl,f.geoKavrayskiy7=Xa,f.geoKavrayskiy7Raw=Ks,f.geoLagrange=Hl,f.geoLagrangeRaw=Ro,f.geoLarrivee=Sl,f.geoLarriveeRaw=Ba,f.geoLaskowski=Va,f.geoLaskowskiRaw=io,f.geoLittrow=ao,f.geoLittrowRaw=po,f.geoLoximuthal=ll,f.geoLoximuthalRaw=vs,f.geoMiller=ls,f.geoMillerRaw=Fc,f.geoModifiedStereographic=Bs,f.geoModifiedStereographicRaw=Oc,f.geoModifiedStereographicAlaska=rc,f.geoModifiedStereographicGs48=hu,f.geoModifiedStereographicGs50=du,f.geoModifiedStereographicMiller=cl,f.geoModifiedStereographicLee=nc,f.geoMollweide=Rt,f.geoMollweideRaw=zt,f.geoMtFlatPolarParabolic=Bc,f.geoMtFlatPolarParabolicRaw=wc,f.geoMtFlatPolarQuartic=pu,f.geoMtFlatPolarQuarticRaw=ic,f.geoMtFlatPolarSinusoidal=_c,f.geoMtFlatPolarSinusoidalRaw=ul,f.geoNaturalEarth2=Es,f.geoNaturalEarth2Raw=ac,f.geoNellHammer=kc,f.geoNellHammerRaw=Vl,f.geoInterruptedQuarticAuthalic=Uc,f.geoNicolosi=vu,f.geoNicolosiRaw=oc,f.geoPatterson=mo,f.geoPattersonRaw=Us,f.geoPolyconic=Yl,f.geoPolyconicRaw=Gl,f.geoPolyhedral=hl,f.geoPolyhedralButterfly=jl,f.geoPolyhedralCollignon=Nu,f.geoPolyhedralWaterman=Na,f.geoProject=ys,f.geoGringortenQuincuncial=be,f.geoPeirceQuincuncial=Oe,f.geoPierceQuincuncial=Oe,f.geoQuantize=dr,f.geoQuincuncial=$c,f.geoRectangularPolyconic=Rr,f.geoRectangularPolyconicRaw=lr,f.geoRobinson=Mn,f.geoRobinsonRaw=mn,f.geoSatellite=bn,f.geoSatelliteRaw=Hn,f.geoSinuMollweide=rn,f.geoSinuMollweideRaw=vn,f.geoSinusoidal=Pt,f.geoSinusoidalRaw=Nt,f.geoStitch=qi,f.geoTimes=_a,f.geoTimesRaw=vi,f.geoTwoPointAzimuthal=Vs,f.geoTwoPointAzimuthalRaw=To,f.geoTwoPointAzimuthalUsa=ws,f.geoTwoPointEquidistant=Ps,f.geoTwoPointEquidistantRaw=Xo,f.geoTwoPointEquidistantUsa=vl,f.geoVanDerGrinten=Co,f.geoVanDerGrintenRaw=_s,f.geoVanDerGrinten2=Sc,f.geoVanDerGrinten2Raw=uc,f.geoVanDerGrinten3=Xc,f.geoVanDerGrinten3Raw=ks,f.geoVanDerGrinten4=bf,f.geoVanDerGrinten4Raw=fc,f.geoWagner=yu,f.geoWagner7=Gs,f.geoWagnerRaw=jc,f.geoWagner4=jo,f.geoWagner4Raw=xu,f.geoWagner6=Ju,f.geoWagner6Raw=wu,f.geoWiechel=Zc,f.geoWiechelRaw=Is,f.geoWinkel3=_u,f.geoWinkel3Raw=Kc,Object.defineProperty(f,"__esModule",{value:!0})})},{"d3-array":107,"d3-geo":114}],114:[function(e,B,V){(function(f,l){typeof V=="object"&&typeof B<"u"?l(V,e("d3-array")):(f=f||self,l(f.d3=f.d3||{},f.d3))})(this,function(f,l){function m(){return new x}function x(){this.reset()}x.prototype={constructor:x,reset:function(){this.s=this.t=0},add:function(be){a(t,be,this.t),a(this,t.s,this.s),this.s?this.t+=t.t:this.s=t.t},valueOf:function(){return this.s}};var t=new x;function a(be,Oe,dr){var lr=be.s=Oe+dr,Rr=lr-Oe,nn=lr-Rr;be.t=Oe-nn+(dr-Rr)}var i=1e-6,r=1e-12,n=Math.PI,d=n/2,s=n/4,o=n*2,y=180/n,g=n/180,b=Math.abs,v=Math.atan,_=Math.atan2,u=Math.cos,T=Math.ceil,c=Math.exp,A=Math.log,k=Math.pow,p=Math.sin,w=Math.sign||function(be){return be>0?1:be<0?-1:0},h=Math.sqrt,D=Math.tan;function S(be){return be>1?0:be<-1?n:Math.acos(be)}function M(be){return be>1?d:be<-1?-d:Math.asin(be)}function L(be){return(be=p(be/2))*be}function R(){}function z(be,Oe){be&&I.hasOwnProperty(be.type)&&I[be.type](be,Oe)}var P={Feature:function(be,Oe){z(be.geometry,Oe)},FeatureCollection:function(be,Oe){for(var dr=be.features,lr=-1,Rr=dr.length;++lr<Rr;)z(dr[lr].geometry,Oe)}},I={Sphere:function(be,Oe){Oe.sphere()},Point:function(be,Oe){be=be.coordinates,Oe.point(be[0],be[1],be[2])},MultiPoint:function(be,Oe){for(var dr=be.coordinates,lr=-1,Rr=dr.length;++lr<Rr;)be=dr[lr],Oe.point(be[0],be[1],be[2])},LineString:function(be,Oe){U(be.coordinates,Oe,0)},MultiLineString:function(be,Oe){for(var dr=be.coordinates,lr=-1,Rr=dr.length;++lr<Rr;)U(dr[lr],Oe,0)},Polygon:function(be,Oe){O(be.coordinates,Oe)},MultiPolygon:function(be,Oe){for(var dr=be.coordinates,lr=-1,Rr=dr.length;++lr<Rr;)O(dr[lr],Oe)},GeometryCollection:function(be,Oe){for(var dr=be.geometries,lr=-1,Rr=dr.length;++lr<Rr;)z(dr[lr],Oe)}};function U(be,Oe,dr){var lr=-1,Rr=be.length-dr,nn;for(Oe.lineStart();++lr<Rr;)nn=be[lr],Oe.point(nn[0],nn[1],nn[2]);Oe.lineEnd()}function O(be,Oe){var dr=-1,lr=be.length;for(Oe.polygonStart();++dr<lr;)U(be[dr],Oe,1);Oe.polygonEnd()}function G(be,Oe){be&&P.hasOwnProperty(be.type)?P[be.type](be,Oe):z(be,Oe)}var $=m(),tt=m(),Z,X,J,st,at,lt={point:R,lineStart:R,lineEnd:R,polygonStart:function(){$.reset(),lt.lineStart=F,lt.lineEnd=H},polygonEnd:function(){var be=+$;tt.add(be<0?o+be:be),this.lineStart=this.lineEnd=this.point=R},sphere:function(){tt.add(o)}};function F(){lt.point=et}function H(){q(Z,X)}function et(be,Oe){lt.point=q,Z=be,X=Oe,be*=g,Oe*=g,J=be,st=u(Oe=Oe/2+s),at=p(Oe)}function q(be,Oe){be*=g,Oe*=g,Oe=Oe/2+s;var dr=be-J,lr=dr>=0?1:-1,Rr=lr*dr,nn=u(Oe),mn=p(Oe),Mn=at*mn,Pn=st*nn+Mn*u(Rr),Hn=Mn*lr*p(Rr);$.add(_(Hn,Pn)),J=be,st=nn,at=mn}function W(be){return tt.reset(),G(be,lt),tt*2}function K(be){return[_(be[1],be[0]),M(be[2])]}function nt(be){var Oe=be[0],dr=be[1],lr=u(dr);return[lr*u(Oe),lr*p(Oe),p(dr)]}function it(be,Oe){return be[0]*Oe[0]+be[1]*Oe[1]+be[2]*Oe[2]}function ot(be,Oe){return[be[1]*Oe[2]-be[2]*Oe[1],be[2]*Oe[0]-be[0]*Oe[2],be[0]*Oe[1]-be[1]*Oe[0]]}function ct(be,Oe){be[0]+=Oe[0],be[1]+=Oe[1],be[2]+=Oe[2]}function bt(be,Oe){return[be[0]*Oe,be[1]*Oe,be[2]*Oe]}function ut(be){var Oe=h(be[0]*be[0]+be[1]*be[1]+be[2]*be[2]);be[0]/=Oe,be[1]/=Oe,be[2]/=Oe}var pt,yt,Tt,kt,zt,Rt,Gt,wt,It=m(),$t,Qt,Nt={point:Pt,lineStart:ve,lineEnd:Re,polygonStart:function(){Nt.point=ir,Nt.lineStart=Ie,Nt.lineEnd=Be,It.reset(),lt.polygonStart()},polygonEnd:function(){lt.polygonEnd(),Nt.point=Pt,Nt.lineStart=ve,Nt.lineEnd=Re,$<0?(pt=-(Tt=180),yt=-(kt=90)):It>i?kt=90:It<-i&&(yt=-90),Qt[0]=pt,Qt[1]=Tt},sphere:function(){pt=-(Tt=180),yt=-(kt=90)}};function Pt(be,Oe){$t.push(Qt=[pt=be,Tt=be]),Oe<yt&&(yt=Oe),Oe>kt&&(kt=Oe)}function Yt(be,Oe){var dr=nt([be*g,Oe*g]);if(wt){var lr=ot(wt,dr),Rr=[lr[1],-lr[0],0],nn=ot(Rr,lr);ut(nn),nn=K(nn);var mn=be-zt,Mn=mn>0?1:-1,Pn=nn[0]*y*Mn,Hn,bn=b(mn)>180;bn^(Mn*zt<Pn&&Pn<Mn*be)?(Hn=nn[1]*y,Hn>kt&&(kt=Hn)):(Pn=(Pn+360)%360-180,bn^(Mn*zt<Pn&&Pn<Mn*be)?(Hn=-nn[1]*y,Hn<yt&&(yt=Hn)):(Oe<yt&&(yt=Oe),Oe>kt&&(kt=Oe))),bn?be<zt?Ye(pt,be)>Ye(pt,Tt)&&(Tt=be):Ye(be,Tt)>Ye(pt,Tt)&&(pt=be):Tt>=pt?(be<pt&&(pt=be),be>Tt&&(Tt=be)):be>zt?Ye(pt,be)>Ye(pt,Tt)&&(Tt=be):Ye(be,Tt)>Ye(pt,Tt)&&(pt=be)}else $t.push(Qt=[pt=be,Tt=be]);Oe<yt&&(yt=Oe),Oe>kt&&(kt=Oe),wt=dr,zt=be}function ve(){Nt.point=Yt}function Re(){Qt[0]=pt,Qt[1]=Tt,Nt.point=Pt,wt=null}function ir(be,Oe){if(wt){var dr=be-zt;It.add(b(dr)>180?dr+(dr>0?360:-360):dr)}else Rt=be,Gt=Oe;lt.point(be,Oe),Yt(be,Oe)}function Ie(){lt.lineStart()}function Be(){ir(Rt,Gt),lt.lineEnd(),b(It)>i&&(pt=-(Tt=180)),Qt[0]=pt,Qt[1]=Tt,wt=null}function Ye(be,Oe){return(Oe-=be)<0?Oe+360:Oe}function ze(be,Oe){return be[0]-Oe[0]}function Ee(be,Oe){return be[0]<=be[1]?be[0]<=Oe&&Oe<=be[1]:Oe<be[0]||be[1]<Oe}function Wt(be){var Oe,dr,lr,Rr,nn,mn,Mn;if(kt=Tt=-(pt=yt=1/0),$t=[],G(be,Nt),dr=$t.length){for($t.sort(ze),Oe=1,lr=$t[0],nn=[lr];Oe<dr;++Oe)Rr=$t[Oe],Ee(lr,Rr[0])||Ee(lr,Rr[1])?(Ye(lr[0],Rr[1])>Ye(lr[0],lr[1])&&(lr[1]=Rr[1]),Ye(Rr[0],lr[1])>Ye(lr[0],lr[1])&&(lr[0]=Rr[0])):nn.push(lr=Rr);for(mn=-1/0,dr=nn.length-1,Oe=0,lr=nn[dr];Oe<=dr;lr=Rr,++Oe)Rr=nn[Oe],(Mn=Ye(lr[1],Rr[0]))>mn&&(mn=Mn,pt=Rr[0],Tt=lr[1])}return $t=Qt=null,pt===1/0||yt===1/0?[[NaN,NaN],[NaN,NaN]]:[[pt,yt],[Tt,kt]]}var ee,Xt,St,Vt,Zt,qt,Te,me,Ne,Ke,He,Xe,er,We,hr,Wr,dn={sphere:R,point:Qr,lineStart:Qe,lineEnd:_r,polygonStart:function(){dn.lineStart=oe,dn.lineEnd=Ht},polygonEnd:function(){dn.lineStart=Qe,dn.lineEnd=_r}};function Qr(be,Oe){be*=g,Oe*=g;var dr=u(Oe);le(dr*u(be),dr*p(be),p(Oe))}function le(be,Oe,dr){++ee,St+=(be-St)/ee,Vt+=(Oe-Vt)/ee,Zt+=(dr-Zt)/ee}function Qe(){dn.point=Ze}function Ze(be,Oe){be*=g,Oe*=g;var dr=u(Oe);We=dr*u(be),hr=dr*p(be),Wr=p(Oe),dn.point=Ve,le(We,hr,Wr)}function Ve(be,Oe){be*=g,Oe*=g;var dr=u(Oe),lr=dr*u(be),Rr=dr*p(be),nn=p(Oe),mn=_(h((mn=hr*nn-Wr*Rr)*mn+(mn=Wr*lr-We*nn)*mn+(mn=We*Rr-hr*lr)*mn),We*lr+hr*Rr+Wr*nn);Xt+=mn,qt+=mn*(We+(We=lr)),Te+=mn*(hr+(hr=Rr)),me+=mn*(Wr+(Wr=nn)),le(We,hr,Wr)}function _r(){dn.point=Qr}function oe(){dn.point=te}function Ht(){ne(Xe,er),dn.point=Qr}function te(be,Oe){Xe=be,er=Oe,be*=g,Oe*=g,dn.point=ne;var dr=u(Oe);We=dr*u(be),hr=dr*p(be),Wr=p(Oe),le(We,hr,Wr)}function ne(be,Oe){be*=g,Oe*=g;var dr=u(Oe),lr=dr*u(be),Rr=dr*p(be),nn=p(Oe),mn=hr*nn-Wr*Rr,Mn=Wr*lr-We*nn,Pn=We*Rr-hr*lr,Hn=h(mn*mn+Mn*Mn+Pn*Pn),bn=M(Hn),On=Hn&&-bn/Hn;Ne+=On*mn,Ke+=On*Mn,He+=On*Pn,Xt+=bn,qt+=bn*(We+(We=lr)),Te+=bn*(hr+(hr=Rr)),me+=bn*(Wr+(Wr=nn)),le(We,hr,Wr)}function _e(be){ee=Xt=St=Vt=Zt=qt=Te=me=Ne=Ke=He=0,G(be,dn);var Oe=Ne,dr=Ke,lr=He,Rr=Oe*Oe+dr*dr+lr*lr;return Rr<r&&(Oe=qt,dr=Te,lr=me,Xt<i&&(Oe=St,dr=Vt,lr=Zt),Rr=Oe*Oe+dr*dr+lr*lr,Rr<r)?[NaN,NaN]:[_(dr,Oe)*y,M(lr/h(Rr))*y]}function Pe(be){return function(){return be}}function Et(be,Oe){function dr(lr,Rr){return lr=be(lr,Rr),Oe(lr[0],lr[1])}return be.invert&&Oe.invert&&(dr.invert=function(lr,Rr){return lr=Oe.invert(lr,Rr),lr&&be.invert(lr[0],lr[1])}),dr}function Mt(be,Oe){return[b(be)>n?be+Math.round(-be/o)*o:be,Oe]}Mt.invert=Mt;function se(be,Oe,dr){return(be%=o)?Oe||dr?Et(de(be),Se(Oe,dr)):de(be):Oe||dr?Se(Oe,dr):Mt}function ce(be){return function(Oe,dr){return Oe+=be,[Oe>n?Oe-o:Oe<-n?Oe+o:Oe,dr]}}function de(be){var Oe=ce(be);return Oe.invert=ce(-be),Oe}function Se(be,Oe){var dr=u(be),lr=p(be),Rr=u(Oe),nn=p(Oe);function mn(Mn,Pn){var Hn=u(Pn),bn=u(Mn)*Hn,On=p(Mn)*Hn,In=p(Pn),Yn=In*dr+bn*lr;return[_(On*Rr-Yn*nn,bn*dr-In*lr),M(Yn*Rr+On*nn)]}return mn.invert=function(Mn,Pn){var Hn=u(Pn),bn=u(Mn)*Hn,On=p(Mn)*Hn,In=p(Pn),Yn=In*Rr-On*nn;return[_(On*Rr+In*nn,bn*dr+Yn*lr),M(Yn*dr-bn*lr)]},mn}function ye(be){be=se(be[0]*g,be[1]*g,be.length>2?be[2]*g:0);function Oe(dr){return dr=be(dr[0]*g,dr[1]*g),dr[0]*=y,dr[1]*=y,dr}return Oe.invert=function(dr){return dr=be.invert(dr[0]*g,dr[1]*g),dr[0]*=y,dr[1]*=y,dr},Oe}function Ae(be,Oe,dr,lr,Rr,nn){if(!!dr){var mn=u(Oe),Mn=p(Oe),Pn=lr*dr;Rr==null?(Rr=Oe+lr*o,nn=Oe-Pn/2):(Rr=Ge(mn,Rr),nn=Ge(mn,nn),(lr>0?Rr<nn:Rr>nn)&&(Rr+=lr*o));for(var Hn,bn=Rr;lr>0?bn>nn:bn<nn;bn-=Pn)Hn=K([mn,-Mn*u(bn),-Mn*p(bn)]),be.point(Hn[0],Hn[1])}}function Ge(be,Oe){Oe=nt(Oe),Oe[0]-=be,ut(Oe);var dr=S(-Oe[1]);return((-Oe[2]<0?-dr:dr)+o-i)%o}function sr(){var be=Pe([0,0]),Oe=Pe(90),dr=Pe(6),lr,Rr,nn={point:mn};function mn(Pn,Hn){lr.push(Pn=Rr(Pn,Hn)),Pn[0]*=y,Pn[1]*=y}function Mn(){var Pn=be.apply(this,arguments),Hn=Oe.apply(this,arguments)*g,bn=dr.apply(this,arguments)*g;return lr=[],Rr=se(-Pn[0]*g,-Pn[1]*g,0).invert,Ae(nn,Hn,bn,1),Pn={type:"Polygon",coordinates:[lr]},lr=Rr=null,Pn}return Mn.center=function(Pn){return arguments.length?(be=typeof Pn=="function"?Pn:Pe([+Pn[0],+Pn[1]]),Mn):be},Mn.radius=function(Pn){return arguments.length?(Oe=typeof Pn=="function"?Pn:Pe(+Pn),Mn):Oe},Mn.precision=function(Pn){return arguments.length?(dr=typeof Pn=="function"?Pn:Pe(+Pn),Mn):dr},Mn}function Er(){var be=[],Oe;return{point:function(dr,lr,Rr){Oe.push([dr,lr,Rr])},lineStart:function(){be.push(Oe=[])},lineEnd:R,rejoin:function(){be.length>1&&be.push(be.pop().concat(be.shift()))},result:function(){var dr=be;return be=[],Oe=null,dr}}}function kr(be,Oe){return b(be[0]-Oe[0])<i&&b(be[1]-Oe[1])<i}function Mr(be,Oe,dr,lr){this.x=be,this.z=Oe,this.o=dr,this.e=lr,this.v=!1,this.n=this.p=null}function Gr(be,Oe,dr,lr,Rr){var nn=[],mn=[],Mn,Pn;if(be.forEach(function(ti){if(!((Bi=ti.length-1)<=0)){var Bi,Ei=ti[0],Ni=ti[Bi],Ui;if(kr(Ei,Ni)){if(!Ei[2]&&!Ni[2]){for(Rr.lineStart(),Mn=0;Mn<Bi;++Mn)Rr.point((Ei=ti[Mn])[0],Ei[1]);Rr.lineEnd();return}Ni[0]+=2*i}nn.push(Ui=new Mr(Ei,ti,null,!0)),mn.push(Ui.o=new Mr(Ei,null,Ui,!1)),nn.push(Ui=new Mr(Ni,ti,null,!1)),mn.push(Ui.o=new Mr(Ni,null,Ui,!0))}}),!!nn.length){for(mn.sort(Oe),ar(nn),ar(mn),Mn=0,Pn=mn.length;Mn<Pn;++Mn)mn[Mn].e=dr=!dr;for(var Hn=nn[0],bn,On;;){for(var In=Hn,Yn=!0;In.v;)if((In=In.n)===Hn)return;bn=In.z,Rr.lineStart();do{if(In.v=In.o.v=!0,In.e){if(Yn)for(Mn=0,Pn=bn.length;Mn<Pn;++Mn)Rr.point((On=bn[Mn])[0],On[1]);else lr(In.x,In.n.x,1,Rr);In=In.n}else{if(Yn)for(bn=In.p.z,Mn=bn.length-1;Mn>=0;--Mn)Rr.point((On=bn[Mn])[0],On[1]);else lr(In.x,In.p.x,-1,Rr);In=In.p}In=In.o,bn=In.z,Yn=!Yn}while(!In.v);Rr.lineEnd()}}}function ar(be){if(!!(Oe=be.length)){for(var Oe,dr=0,lr=be[0],Rr;++dr<Oe;)lr.n=Rr=be[dr],Rr.p=lr,lr=Rr;lr.n=Rr=be[0],Rr.p=lr}}var xr=m();function Ir(be){return b(be[0])<=n?be[0]:w(be[0])*((b(be[0])+n)%o-n)}function Hr(be,Oe){var dr=Ir(Oe),lr=Oe[1],Rr=p(lr),nn=[p(dr),-u(dr),0],mn=0,Mn=0;xr.reset(),Rr===1?lr=d+i:Rr===-1&&(lr=-d-i);for(var Pn=0,Hn=be.length;Pn<Hn;++Pn)if(!!(On=(bn=be[Pn]).length))for(var bn,On,In=bn[On-1],Yn=Ir(In),ti=In[1]/2+s,Bi=p(ti),Ei=u(ti),Ni=0;Ni<On;++Ni,Yn=Qn,Bi=$i,Ei=ta,In=Ui){var Ui=bn[Ni],Qn=Ir(Ui),pi=Ui[1]/2+s,$i=p(pi),ta=u(pi),ya=Qn-Yn,ba=ya>=0?1:-1,wa=ba*ya,Ca=wa>n,ca=Bi*$i;if(xr.add(_(ca*ba*p(wa),Ei*ta+ca*u(wa))),mn+=Ca?ya+ba*o:ya,Ca^Yn>=dr^Qn>=dr){var Mo=ot(nt(In),nt(Ui));ut(Mo);var lo=ot(nn,Mo);ut(lo);var qi=(Ca^ya>=0?-1:1)*M(lo[2]);(lr>qi||lr===qi&&(Mo[0]||Mo[1]))&&(Mn+=Ca^ya>=0?1:-1)}}return(mn<-i||mn<i&&xr<-i)^Mn&1}function Cr(be,Oe,dr,lr){return function(Rr){var nn=Oe(Rr),mn=Er(),Mn=Oe(mn),Pn=!1,Hn,bn,On,In={point:Yn,lineStart:Bi,lineEnd:Ei,polygonStart:function(){In.point=Ni,In.lineStart=Ui,In.lineEnd=Qn,bn=[],Hn=[]},polygonEnd:function(){In.point=Yn,In.lineStart=Bi,In.lineEnd=Ei,bn=l.merge(bn);var pi=Hr(Hn,lr);bn.length?(Pn||(Rr.polygonStart(),Pn=!0),Gr(bn,Le,pi,dr,Rr)):pi&&(Pn||(Rr.polygonStart(),Pn=!0),Rr.lineStart(),dr(null,null,1,Rr),Rr.lineEnd()),Pn&&(Rr.polygonEnd(),Pn=!1),bn=Hn=null},sphere:function(){Rr.polygonStart(),Rr.lineStart(),dr(null,null,1,Rr),Rr.lineEnd(),Rr.polygonEnd()}};function Yn(pi,$i){be(pi,$i)&&Rr.point(pi,$i)}function ti(pi,$i){nn.point(pi,$i)}function Bi(){In.point=ti,nn.lineStart()}function Ei(){In.point=Yn,nn.lineEnd()}function Ni(pi,$i){On.push([pi,$i]),Mn.point(pi,$i)}function Ui(){Mn.lineStart(),On=[]}function Qn(){Ni(On[0][0],On[0][1]),Mn.lineEnd();var pi=Mn.clean(),$i=mn.result(),ta,ya=$i.length,ba,wa,Ca;if(On.pop(),Hn.push(On),On=null,!!ya){if(pi&1){if(wa=$i[0],(ba=wa.length-1)>0){for(Pn||(Rr.polygonStart(),Pn=!0),Rr.lineStart(),ta=0;ta<ba;++ta)Rr.point((Ca=wa[ta])[0],Ca[1]);Rr.lineEnd()}return}ya>1&&pi&2&&$i.push($i.pop().concat($i.shift())),bn.push($i.filter(ae))}}return In}}function ae(be){return be.length>1}function Le(be,Oe){return((be=be.x)[0]<0?be[1]-d-i:d-be[1])-((Oe=Oe.x)[0]<0?Oe[1]-d-i:d-Oe[1])}var $e=Cr(function(){return!0},or,Nr,[-n,-d]);function or(be){var Oe=NaN,dr=NaN,lr=NaN,Rr;return{lineStart:function(){be.lineStart(),Rr=1},point:function(nn,mn){var Mn=nn>0?n:-n,Pn=b(nn-Oe);b(Pn-n)<i?(be.point(Oe,dr=(dr+mn)/2>0?d:-d),be.point(lr,dr),be.lineEnd(),be.lineStart(),be.point(Mn,dr),be.point(nn,dr),Rr=0):lr!==Mn&&Pn>=n&&(b(Oe-lr)<i&&(Oe-=lr*i),b(nn-Mn)<i&&(nn-=Mn*i),dr=Dr(Oe,dr,nn,mn),be.point(lr,dr),be.lineEnd(),be.lineStart(),be.point(Mn,dr),Rr=0),be.point(Oe=nn,dr=mn),lr=Mn},lineEnd:function(){be.lineEnd(),Oe=dr=NaN},clean:function(){return 2-Rr}}}function Dr(be,Oe,dr,lr){var Rr,nn,mn=p(be-dr);return b(mn)>i?v((p(Oe)*(nn=u(lr))*p(dr)-p(lr)*(Rr=u(Oe))*p(be))/(Rr*nn*mn)):(Oe+lr)/2}function Nr(be,Oe,dr,lr){var Rr;if(be==null)Rr=dr*d,lr.point(-n,Rr),lr.point(0,Rr),lr.point(n,Rr),lr.point(n,0),lr.point(n,-Rr),lr.point(0,-Rr),lr.point(-n,-Rr),lr.point(-n,0),lr.point(-n,Rr);else if(b(be[0]-Oe[0])>i){var nn=be[0]<Oe[0]?n:-n;Rr=dr*nn/2,lr.point(-nn,Rr),lr.point(0,Rr),lr.point(nn,Rr)}else lr.point(Oe[0],Oe[1])}function Fr(be){var Oe=u(be),dr=6*g,lr=Oe>0,Rr=b(Oe)>i;function nn(bn,On,In,Yn){Ae(Yn,be,dr,In,bn,On)}function mn(bn,On){return u(bn)*u(On)>Oe}function Mn(bn){var On,In,Yn,ti,Bi;return{lineStart:function(){ti=Yn=!1,Bi=1},point:function(Ei,Ni){var Ui=[Ei,Ni],Qn,pi=mn(Ei,Ni),$i=lr?pi?0:Hn(Ei,Ni):pi?Hn(Ei+(Ei<0?n:-n),Ni):0;if(!On&&(ti=Yn=pi)&&bn.lineStart(),pi!==Yn&&(Qn=Pn(On,Ui),(!Qn||kr(On,Qn)||kr(Ui,Qn))&&(Ui[2]=1)),pi!==Yn)Bi=0,pi?(bn.lineStart(),Qn=Pn(Ui,On),bn.point(Qn[0],Qn[1])):(Qn=Pn(On,Ui),bn.point(Qn[0],Qn[1],2),bn.lineEnd()),On=Qn;else if(Rr&&On&&lr^pi){var ta;!($i&In)&&(ta=Pn(Ui,On,!0))&&(Bi=0,lr?(bn.lineStart(),bn.point(ta[0][0],ta[0][1]),bn.point(ta[1][0],ta[1][1]),bn.lineEnd()):(bn.point(ta[1][0],ta[1][1]),bn.lineEnd(),bn.lineStart(),bn.point(ta[0][0],ta[0][1],3)))}pi&&(!On||!kr(On,Ui))&&bn.point(Ui[0],Ui[1]),On=Ui,Yn=pi,In=$i},lineEnd:function(){Yn&&bn.lineEnd(),On=null},clean:function(){return Bi|(ti&&Yn)<<1}}}function Pn(bn,On,In){var Yn=nt(bn),ti=nt(On),Bi=[1,0,0],Ei=ot(Yn,ti),Ni=it(Ei,Ei),Ui=Ei[0],Qn=Ni-Ui*Ui;if(!Qn)return!In&&bn;var pi=Oe*Ni/Qn,$i=-Oe*Ui/Qn,ta=ot(Bi,Ei),ya=bt(Bi,pi),ba=bt(Ei,$i);ct(ya,ba);var wa=ta,Ca=it(ya,wa),ca=it(wa,wa),Mo=Ca*Ca-ca*(it(ya,ya)-1);if(!(Mo<0)){var lo=h(Mo),qi=bt(wa,(-Ca-lo)/ca);if(ct(qi,ya),qi=K(qi),!In)return qi;var vi=bn[0],_a=On[0],bo=bn[1],To=On[1],ws;_a<vi&&(ws=vi,vi=_a,_a=ws);var Vs=_a-vi,Xo=b(Vs-n)<i,vl=Xo||Vs<i;if(!Xo&&To<bo&&(ws=bo,bo=To,To=ws),vl?Xo?bo+To>0^qi[1]<(b(qi[0]-vi)<i?bo:To):bo<=qi[1]&&qi[1]<=To:Vs>n^(vi<=qi[0]&&qi[0]<=_a)){var Ps=bt(wa,(-Ca+lo)/ca);return ct(Ps,ya),[qi,K(Ps)]}}}function Hn(bn,On){var In=lr?be:n-be,Yn=0;return bn<-In?Yn|=1:bn>In&&(Yn|=2),On<-In?Yn|=4:On>In&&(Yn|=8),Yn}return Cr(mn,Mn,nn,lr?[0,-be]:[-n,be-n])}function Ar(be,Oe,dr,lr,Rr,nn){var mn=be[0],Mn=be[1],Pn=Oe[0],Hn=Oe[1],bn=0,On=1,In=Pn-mn,Yn=Hn-Mn,ti;if(ti=dr-mn,!(!In&&ti>0)){if(ti/=In,In<0){if(ti<bn)return;ti<On&&(On=ti)}else if(In>0){if(ti>On)return;ti>bn&&(bn=ti)}if(ti=Rr-mn,!(!In&&ti<0)){if(ti/=In,In<0){if(ti>On)return;ti>bn&&(bn=ti)}else if(In>0){if(ti<bn)return;ti<On&&(On=ti)}if(ti=lr-Mn,!(!Yn&&ti>0)){if(ti/=Yn,Yn<0){if(ti<bn)return;ti<On&&(On=ti)}else if(Yn>0){if(ti>On)return;ti>bn&&(bn=ti)}if(ti=nn-Mn,!(!Yn&&ti<0)){if(ti/=Yn,Yn<0){if(ti>On)return;ti>bn&&(bn=ti)}else if(Yn>0){if(ti<bn)return;ti<On&&(On=ti)}return bn>0&&(be[0]=mn+bn*In,be[1]=Mn+bn*Yn),On<1&&(Oe[0]=mn+On*In,Oe[1]=Mn+On*Yn),!0}}}}}var Xr=1e9,Tn=-Xr;function un(be,Oe,dr,lr){function Rr(Hn,bn){return be<=Hn&&Hn<=dr&&Oe<=bn&&bn<=lr}function nn(Hn,bn,On,In){var Yn=0,ti=0;if(Hn==null||(Yn=mn(Hn,On))!==(ti=mn(bn,On))||Pn(Hn,bn)<0^On>0)do In.point(Yn===0||Yn===3?be:dr,Yn>1?lr:Oe);while((Yn=(Yn+On+4)%4)!==ti);else In.point(bn[0],bn[1])}function mn(Hn,bn){return b(Hn[0]-be)<i?bn>0?0:3:b(Hn[0]-dr)<i?bn>0?2:1:b(Hn[1]-Oe)<i?bn>0?1:0:bn>0?3:2}function Mn(Hn,bn){return Pn(Hn.x,bn.x)}function Pn(Hn,bn){var On=mn(Hn,1),In=mn(bn,1);return On!==In?On-In:On===0?bn[1]-Hn[1]:On===1?Hn[0]-bn[0]:On===2?Hn[1]-bn[1]:bn[0]-Hn[0]}return function(Hn){var bn=Hn,On=Er(),In,Yn,ti,Bi,Ei,Ni,Ui,Qn,pi,$i,ta,ya={point:ba,lineStart:Mo,lineEnd:lo,polygonStart:Ca,polygonEnd:ca};function ba(vi,_a){Rr(vi,_a)&&bn.point(vi,_a)}function wa(){for(var vi=0,_a=0,bo=Yn.length;_a<bo;++_a)for(var To=Yn[_a],ws=1,Vs=To.length,Xo=To[0],vl,Ps,_s=Xo[0],Co=Xo[1];ws<Vs;++ws)vl=_s,Ps=Co,Xo=To[ws],_s=Xo[0],Co=Xo[1],Ps<=lr?Co>lr&&(_s-vl)*(lr-Ps)>(Co-Ps)*(be-vl)&&++vi:Co<=lr&&(_s-vl)*(lr-Ps)<(Co-Ps)*(be-vl)&&--vi;return vi}function Ca(){bn=On,In=[],Yn=[],ta=!0}function ca(){var vi=wa(),_a=ta&&vi,bo=(In=l.merge(In)).length;(_a||bo)&&(Hn.polygonStart(),_a&&(Hn.lineStart(),nn(null,null,1,Hn),Hn.lineEnd()),bo&&Gr(In,Mn,vi,nn,Hn),Hn.polygonEnd()),bn=Hn,In=Yn=ti=null}function Mo(){ya.point=qi,Yn&&Yn.push(ti=[]),$i=!0,pi=!1,Ui=Qn=NaN}function lo(){In&&(qi(Bi,Ei),Ni&&pi&&On.rejoin(),In.push(On.result())),ya.point=ba,pi&&bn.lineEnd()}function qi(vi,_a){var bo=Rr(vi,_a);if(Yn&&ti.push([vi,_a]),$i)Bi=vi,Ei=_a,Ni=bo,$i=!1,bo&&(bn.lineStart(),bn.point(vi,_a));else if(bo&&pi)bn.point(vi,_a);else{var To=[Ui=Math.max(Tn,Math.min(Xr,Ui)),Qn=Math.max(Tn,Math.min(Xr,Qn))],ws=[vi=Math.max(Tn,Math.min(Xr,vi)),_a=Math.max(Tn,Math.min(Xr,_a))];Ar(To,ws,be,Oe,dr,lr)?(pi||(bn.lineStart(),bn.point(To[0],To[1])),bn.point(ws[0],ws[1]),bo||bn.lineEnd(),ta=!1):bo&&(bn.lineStart(),bn.point(vi,_a),ta=!1)}Ui=vi,Qn=_a,pi=bo}return ya}}function Un(){var be=0,Oe=0,dr=960,lr=500,Rr,nn,mn;return mn={stream:function(Mn){return Rr&&nn===Mn?Rr:Rr=un(be,Oe,dr,lr)(nn=Mn)},extent:function(Mn){return arguments.length?(be=+Mn[0][0],Oe=+Mn[0][1],dr=+Mn[1][0],lr=+Mn[1][1],Rr=nn=null,mn):[[be,Oe],[dr,lr]]}}}var Dn=m(),Xn,Gn,yi,Pi={sphere:R,point:R,lineStart:pa,lineEnd:R,polygonStart:R,polygonEnd:R};function pa(){Pi.point=Ji,Pi.lineEnd=Wi}function Wi(){Pi.point=Pi.lineEnd=R}function Ji(be,Oe){be*=g,Oe*=g,Xn=be,Gn=p(Oe),yi=u(Oe),Pi.point=ji}function ji(be,Oe){be*=g,Oe*=g;var dr=p(Oe),lr=u(Oe),Rr=b(be-Xn),nn=u(Rr),mn=p(Rr),Mn=lr*mn,Pn=yi*dr-Gn*lr*nn,Hn=Gn*dr+yi*lr*nn;Dn.add(_(h(Mn*Mn+Pn*Pn),Hn)),Xn=be,Gn=dr,yi=lr}function Tr(be){return Dn.reset(),G(be,Pi),+Dn}var gn=[null,null],hn={type:"LineString",coordinates:gn};function Sn(be,Oe){return gn[0]=be,gn[1]=Oe,Tr(hn)}var Zn={Feature:function(be,Oe){return ri(be.geometry,Oe)},FeatureCollection:function(be,Oe){for(var dr=be.features,lr=-1,Rr=dr.length;++lr<Rr;)if(ri(dr[lr].geometry,Oe))return!0;return!1}},fi={Sphere:function(){return!0},Point:function(be,Oe){return Rn(be.coordinates,Oe)},MultiPoint:function(be,Oe){for(var dr=be.coordinates,lr=-1,Rr=dr.length;++lr<Rr;)if(Rn(dr[lr],Oe))return!0;return!1},LineString:function(be,Oe){return jn(be.coordinates,Oe)},MultiLineString:function(be,Oe){for(var dr=be.coordinates,lr=-1,Rr=dr.length;++lr<Rr;)if(jn(dr[lr],Oe))return!0;return!1},Polygon:function(be,Oe){return Gi(be.coordinates,Oe)},MultiPolygon:function(be,Oe){for(var dr=be.coordinates,lr=-1,Rr=dr.length;++lr<Rr;)if(Gi(dr[lr],Oe))return!0;return!1},GeometryCollection:function(be,Oe){for(var dr=be.geometries,lr=-1,Rr=dr.length;++lr<Rr;)if(ri(dr[lr],Oe))return!0;return!1}};function ri(be,Oe){return be&&fi.hasOwnProperty(be.type)?fi[be.type](be,Oe):!1}function Rn(be,Oe){return Sn(be,Oe)===0}function jn(be,Oe){for(var dr,lr,Rr,nn=0,mn=be.length;nn<mn;nn++){if(lr=Sn(be[nn],Oe),lr===0||nn>0&&(Rr=Sn(be[nn],be[nn-1]),Rr>0&&dr<=Rr&&lr<=Rr&&(dr+lr-Rr)*(1-Math.pow((dr-lr)/Rr,2))<r*Rr))return!0;dr=lr}return!1}function Gi(be,Oe){return!!Hr(be.map(fa),Ue(Oe))}function fa(be){return be=be.map(Ue),be.pop(),be}function Ue(be){return[be[0]*g,be[1]*g]}function pr(be,Oe){return(be&&Zn.hasOwnProperty(be.type)?Zn[be.type]:ri)(be,Oe)}function an(be,Oe,dr){var lr=l.range(be,Oe-i,dr).concat(Oe);return function(Rr){return lr.map(function(nn){return[Rr,nn]})}}function vn(be,Oe,dr){var lr=l.range(be,Oe-i,dr).concat(Oe);return function(Rr){return lr.map(function(nn){return[nn,Rr]})}}function rn(){var be,Oe,dr,lr,Rr,nn,mn,Mn,Pn=10,Hn=Pn,bn=90,On=360,In,Yn,ti,Bi,Ei=2.5;function Ni(){return{type:"MultiLineString",coordinates:Ui()}}function Ui(){return l.range(T(lr/bn)*bn,dr,bn).map(ti).concat(l.range(T(Mn/On)*On,mn,On).map(Bi)).concat(l.range(T(Oe/Pn)*Pn,be,Pn).filter(function(Qn){return b(Qn%bn)>i}).map(In)).concat(l.range(T(nn/Hn)*Hn,Rr,Hn).filter(function(Qn){return b(Qn%On)>i}).map(Yn))}return Ni.lines=function(){return Ui().map(function(Qn){return{type:"LineString",coordinates:Qn}})},Ni.outline=function(){return{type:"Polygon",coordinates:[ti(lr).concat(Bi(mn).slice(1),ti(dr).reverse().slice(1),Bi(Mn).reverse().slice(1))]}},Ni.extent=function(Qn){return arguments.length?Ni.extentMajor(Qn).extentMinor(Qn):Ni.extentMinor()},Ni.extentMajor=function(Qn){return arguments.length?(lr=+Qn[0][0],dr=+Qn[1][0],Mn=+Qn[0][1],mn=+Qn[1][1],lr>dr&&(Qn=lr,lr=dr,dr=Qn),Mn>mn&&(Qn=Mn,Mn=mn,mn=Qn),Ni.precision(Ei)):[[lr,Mn],[dr,mn]]},Ni.extentMinor=function(Qn){return arguments.length?(Oe=+Qn[0][0],be=+Qn[1][0],nn=+Qn[0][1],Rr=+Qn[1][1],Oe>be&&(Qn=Oe,Oe=be,be=Qn),nn>Rr&&(Qn=nn,nn=Rr,Rr=Qn),Ni.precision(Ei)):[[Oe,nn],[be,Rr]]},Ni.step=function(Qn){return arguments.length?Ni.stepMajor(Qn).stepMinor(Qn):Ni.stepMinor()},Ni.stepMajor=function(Qn){return arguments.length?(bn=+Qn[0],On=+Qn[1],Ni):[bn,On]},Ni.stepMinor=function(Qn){return arguments.length?(Pn=+Qn[0],Hn=+Qn[1],Ni):[Pn,Hn]},Ni.precision=function(Qn){return arguments.length?(Ei=+Qn,In=an(nn,Rr,90),Yn=vn(Oe,be,Ei),ti=an(Mn,mn,90),Bi=vn(lr,dr,Ei),Ni):Ei},Ni.extentMajor([[-180,-90+i],[180,90-i]]).extentMinor([[-180,-80-i],[180,80+i]])}function An(){return rn()()}function wn(be,Oe){var dr=be[0]*g,lr=be[1]*g,Rr=Oe[0]*g,nn=Oe[1]*g,mn=u(lr),Mn=p(lr),Pn=u(nn),Hn=p(nn),bn=mn*u(dr),On=mn*p(dr),In=Pn*u(Rr),Yn=Pn*p(Rr),ti=2*M(h(L(nn-lr)+mn*Pn*L(Rr-dr))),Bi=p(ti),Ei=ti?function(Ni){var Ui=p(Ni*=ti)/Bi,Qn=p(ti-Ni)/Bi,pi=Qn*bn+Ui*In,$i=Qn*On+Ui*Yn,ta=Qn*Mn+Ui*Hn;return[_($i,pi)*y,_(ta,h(pi*pi+$i*$i))*y]}:function(){return[dr*y,lr*y]};return Ei.distance=ti,Ei}function fn(be){return be}var yr=m(),br=m(),Or,yn,Nn,ni,kn={point:R,lineStart:R,lineEnd:R,polygonStart:function(){kn.lineStart=Kn,kn.lineEnd=xi},polygonEnd:function(){kn.lineStart=kn.lineEnd=kn.point=R,yr.add(b(br)),br.reset()},result:function(){var be=yr/2;return yr.reset(),be}};function Kn(){kn.point=oi}function oi(be,Oe){kn.point=gi,Or=Nn=be,yn=ni=Oe}function gi(be,Oe){br.add(ni*be-Nn*Oe),Nn=be,ni=Oe}function xi(){gi(Or,yn)}var ci=1/0,Si=ci,ko=-ci,$o=ko,ss={point:Al,lineStart:R,lineEnd:R,polygonStart:R,polygonEnd:R,result:function(){var be=[[ci,Si],[ko,$o]];return ko=$o=-(Si=ci=1/0),be}};function Al(be,Oe){be<ci&&(ci=be),be>ko&&(ko=be),Oe<Si&&(Si=Oe),Oe>$o&&($o=Oe)}var Ul=0,bc=0,ga=0,sl=0,Ks=0,Xa=0,Ro=0,Hl=0,Cs=0,Ba,Sl,io,Va,po={point:ao,lineStart:vs,lineEnd:ls,polygonStart:function(){po.lineStart=Oc,po.lineEnd=Js},polygonEnd:function(){po.point=ao,po.lineStart=vs,po.lineEnd=ls},result:function(){var be=Cs?[Ro/Cs,Hl/Cs]:Xa?[sl/Xa,Ks/Xa]:ga?[Ul/ga,bc/ga]:[NaN,NaN];return Ul=bc=ga=sl=Ks=Xa=Ro=Hl=Cs=0,be}};function ao(be,Oe){Ul+=be,bc+=Oe,++ga}function vs(){po.point=ll}function ll(be,Oe){po.point=Fc,ao(io=be,Va=Oe)}function Fc(be,Oe){var dr=be-io,lr=Oe-Va,Rr=h(dr*dr+lr*lr);sl+=Rr*(io+be)/2,Ks+=Rr*(Va+Oe)/2,Xa+=Rr,ao(io=be,Va=Oe)}function ls(){po.point=ao}function Oc(){po.point=Fo}function Js(){fu(Ba,Sl)}function Fo(be,Oe){po.point=fu,ao(Ba=io=be,Sl=Va=Oe)}function fu(be,Oe){var dr=be-io,lr=Oe-Va,Rr=h(dr*dr+lr*lr);sl+=Rr*(io+be)/2,Ks+=Rr*(Va+Oe)/2,Xa+=Rr,Rr=Va*be-io*Oe,Ro+=Rr*(io+be),Hl+=Rr*(Va+Oe),Cs+=Rr*3,ao(io=be,Va=Oe)}function Qs(be){this._context=be}Qs.prototype={_radius:4.5,pointRadius:function(be){return this._radius=be,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(be,Oe){switch(this._point){case 0:{this._context.moveTo(be,Oe),this._point=1;break}case 1:{this._context.lineTo(be,Oe);break}default:{this._context.moveTo(be+this._radius,Oe),this._context.arc(be,Oe,this._radius,0,o);break}}},result:R};var Os=m(),rc,hu,du,cl,nc,Bs={point:R,lineStart:function(){Bs.point=xc},lineEnd:function(){rc&&Ml(hu,du),Bs.point=R},polygonStart:function(){rc=!0},polygonEnd:function(){rc=null},result:function(){var be=+Os;return Os.reset(),be}};function xc(be,Oe){Bs.point=Ml,hu=cl=be,du=nc=Oe}function Ml(be,Oe){cl-=be,nc-=Oe,Os.add(h(cl*cl+nc*nc)),cl=be,nc=Oe}function wc(){this._string=[]}wc.prototype={_radius:4.5,_circle:Bc(4.5),pointRadius:function(be){return(be=+be)!==this._radius&&(this._radius=be,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(be,Oe){switch(this._point){case 0:{this._string.push("M",be,",",Oe),this._point=1;break}case 1:{this._string.push("L",be,",",Oe);break}default:{this._circle==null&&(this._circle=Bc(this._radius)),this._string.push("M",be,",",Oe,this._circle);break}}},result:function(){if(this._string.length){var be=this._string.join("");return this._string=[],be}else return null}};function Bc(be){return"m0,"+be+"a"+be+","+be+" 0 1,1 0,"+-2*be+"a"+be+","+be+" 0 1,1 0,"+2*be+"z"}function ic(be,Oe){var dr=4.5,lr,Rr;function nn(mn){return mn&&(typeof dr=="function"&&Rr.pointRadius(+dr.apply(this,arguments)),G(mn,lr(Rr))),Rr.result()}return nn.area=function(mn){return G(mn,lr(kn)),kn.result()},nn.measure=function(mn){return G(mn,lr(Bs)),Bs.result()},nn.bounds=function(mn){return G(mn,lr(ss)),ss.result()},nn.centroid=function(mn){return G(mn,lr(po)),po.result()},nn.projection=function(mn){return arguments.length?(lr=mn==null?(be=null,fn):(be=mn).stream,nn):be},nn.context=function(mn){return arguments.length?(Rr=mn==null?(Oe=null,new wc):new Qs(Oe=mn),typeof dr!="function"&&Rr.pointRadius(dr),nn):Oe},nn.pointRadius=function(mn){return arguments.length?(dr=typeof mn=="function"?mn:(Rr.pointRadius(+mn),+mn),nn):dr},nn.projection(be).context(Oe)}function pu(be){return{stream:ul(be)}}function ul(be){return function(Oe){var dr=new _c;for(var lr in be)dr[lr]=be[lr];return dr.stream=Oe,dr}}function _c(){}_c.prototype={constructor:_c,point:function(be,Oe){this.stream.point(be,Oe)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function ac(be,Oe,dr){var lr=be.clipExtent&&be.clipExtent();return be.scale(150).translate([0,0]),lr!=null&&be.clipExtent(null),G(dr,be.stream(ss)),Oe(ss.result()),lr!=null&&be.clipExtent(lr),be}function Es(be,Oe,dr){return ac(be,function(lr){var Rr=Oe[1][0]-Oe[0][0],nn=Oe[1][1]-Oe[0][1],mn=Math.min(Rr/(lr[1][0]-lr[0][0]),nn/(lr[1][1]-lr[0][1])),Mn=+Oe[0][0]+(Rr-mn*(lr[1][0]+lr[0][0]))/2,Pn=+Oe[0][1]+(nn-mn*(lr[1][1]+lr[0][1]))/2;be.scale(150*mn).translate([Mn,Pn])},dr)}function Vl(be,Oe,dr){return Es(be,[[0,0],Oe],dr)}function kc(be,Oe,dr){return ac(be,function(lr){var Rr=+Oe,nn=Rr/(lr[1][0]-lr[0][0]),mn=(Rr-nn*(lr[1][0]+lr[0][0]))/2,Mn=-nn*lr[0][1];be.scale(150*nn).translate([mn,Mn])},dr)}function Nc(be,Oe,dr){return ac(be,function(lr){var Rr=+Oe,nn=Rr/(lr[1][1]-lr[0][1]),mn=-nn*lr[0][0],Mn=(Rr-nn*(lr[1][1]+lr[0][1]))/2;be.scale(150*nn).translate([mn,Mn])},dr)}var Uc=16,oc=u(30*g);function vu(be,Oe){return+Oe?cs(be,Oe):Hc(be)}function Hc(be){return ul({point:function(Oe,dr){Oe=be(Oe,dr),this.stream.point(Oe[0],Oe[1])}})}function cs(be,Oe){function dr(lr,Rr,nn,mn,Mn,Pn,Hn,bn,On,In,Yn,ti,Bi,Ei){var Ni=Hn-lr,Ui=bn-Rr,Qn=Ni*Ni+Ui*Ui;if(Qn>4*Oe&&Bi--){var pi=mn+In,$i=Mn+Yn,ta=Pn+ti,ya=h(pi*pi+$i*$i+ta*ta),ba=M(ta/=ya),wa=b(b(ta)-1)<i||b(nn-On)<i?(nn+On)/2:_($i,pi),Ca=be(wa,ba),ca=Ca[0],Mo=Ca[1],lo=ca-lr,qi=Mo-Rr,vi=Ui*lo-Ni*qi;(vi*vi/Qn>Oe||b((Ni*lo+Ui*qi)/Qn-.5)>.3||mn*In+Mn*Yn+Pn*ti<oc)&&(dr(lr,Rr,nn,mn,Mn,Pn,ca,Mo,wa,pi/=ya,$i/=ya,ta,Bi,Ei),Ei.point(ca,Mo),dr(ca,Mo,wa,pi,$i,ta,Hn,bn,On,In,Yn,ti,Bi,Ei))}}return function(lr){var Rr,nn,mn,Mn,Pn,Hn,bn,On,In,Yn,ti,Bi,Ei={point:Ni,lineStart:Ui,lineEnd:pi,polygonStart:function(){lr.polygonStart(),Ei.lineStart=$i},polygonEnd:function(){lr.polygonEnd(),Ei.lineStart=Ui}};function Ni(ba,wa){ba=be(ba,wa),lr.point(ba[0],ba[1])}function Ui(){On=NaN,Ei.point=Qn,lr.lineStart()}function Qn(ba,wa){var Ca=nt([ba,wa]),ca=be(ba,wa);dr(On,In,bn,Yn,ti,Bi,On=ca[0],In=ca[1],bn=ba,Yn=Ca[0],ti=Ca[1],Bi=Ca[2],Uc,lr),lr.point(On,In)}function pi(){Ei.point=Ni,lr.lineEnd()}function $i(){Ui(),Ei.point=ta,Ei.lineEnd=ya}function ta(ba,wa){Qn(Rr=ba,wa),nn=On,mn=In,Mn=Yn,Pn=ti,Hn=Bi,Ei.point=Qn}function ya(){dr(On,In,bn,Yn,ti,Bi,nn,mn,Rr,Mn,Pn,Hn,Uc,lr),Ei.lineEnd=pi,pi()}return Ei}}var Cl=ul({point:function(be,Oe){this.stream.point(be*g,Oe*g)}});function El(be){return ul({point:function(Oe,dr){var lr=be(Oe,dr);return this.stream.point(lr[0],lr[1])}})}function Tc(be,Oe,dr,lr,Rr){function nn(mn,Mn){return mn*=lr,Mn*=Rr,[Oe+be*mn,dr-be*Mn]}return nn.invert=function(mn,Mn){return[(mn-Oe)/be*lr,(dr-Mn)/be*Rr]},nn}function Ls(be,Oe,dr,lr,Rr,nn){var mn=u(nn),Mn=p(nn),Pn=mn*be,Hn=Mn*be,bn=mn/be,On=Mn/be,In=(Mn*dr-mn*Oe)/be,Yn=(Mn*Oe+mn*dr)/be;function ti(Bi,Ei){return Bi*=lr,Ei*=Rr,[Pn*Bi-Hn*Ei+Oe,dr-Hn*Bi-Pn*Ei]}return ti.invert=function(Bi,Ei){return[lr*(bn*Bi-On*Ei+In),Rr*(Yn-On*Bi-bn*Ei)]},ti}function Oo(be){return sc(function(){return be})()}function sc(be){var Oe,dr=150,lr=480,Rr=250,nn=0,mn=0,Mn=0,Pn=0,Hn=0,bn,On=0,In=1,Yn=1,ti=null,Bi=$e,Ei=null,Ni,Ui,Qn,pi=fn,$i=.5,ta,ya,ba,wa,Ca;function ca(vi){return ba(vi[0]*g,vi[1]*g)}function Mo(vi){return vi=ba.invert(vi[0],vi[1]),vi&&[vi[0]*y,vi[1]*y]}ca.stream=function(vi){return wa&&Ca===vi?wa:wa=Cl(El(bn)(Bi(ta(pi(Ca=vi)))))},ca.preclip=function(vi){return arguments.length?(Bi=vi,ti=void 0,qi()):Bi},ca.postclip=function(vi){return arguments.length?(pi=vi,Ei=Ni=Ui=Qn=null,qi()):pi},ca.clipAngle=function(vi){return arguments.length?(Bi=+vi?Fr(ti=vi*g):(ti=null,$e),qi()):ti*y},ca.clipExtent=function(vi){return arguments.length?(pi=vi==null?(Ei=Ni=Ui=Qn=null,fn):un(Ei=+vi[0][0],Ni=+vi[0][1],Ui=+vi[1][0],Qn=+vi[1][1]),qi()):Ei==null?null:[[Ei,Ni],[Ui,Qn]]},ca.scale=function(vi){return arguments.length?(dr=+vi,lo()):dr},ca.translate=function(vi){return arguments.length?(lr=+vi[0],Rr=+vi[1],lo()):[lr,Rr]},ca.center=function(vi){return arguments.length?(nn=vi[0]%360*g,mn=vi[1]%360*g,lo()):[nn*y,mn*y]},ca.rotate=function(vi){return arguments.length?(Mn=vi[0]%360*g,Pn=vi[1]%360*g,Hn=vi.length>2?vi[2]%360*g:0,lo()):[Mn*y,Pn*y,Hn*y]},ca.angle=function(vi){return arguments.length?(On=vi%360*g,lo()):On*y},ca.reflectX=function(vi){return arguments.length?(In=vi?-1:1,lo()):In<0},ca.reflectY=function(vi){return arguments.length?(Yn=vi?-1:1,lo()):Yn<0},ca.precision=function(vi){return arguments.length?(ta=vu(ya,$i=vi*vi),qi()):h($i)},ca.fitExtent=function(vi,_a){return Es(ca,vi,_a)},ca.fitSize=function(vi,_a){return Vl(ca,vi,_a)},ca.fitWidth=function(vi,_a){return kc(ca,vi,_a)},ca.fitHeight=function(vi,_a){return Nc(ca,vi,_a)};function lo(){var vi=Ls(dr,0,0,In,Yn,On).apply(null,Oe(nn,mn)),_a=(On?Ls:Tc)(dr,lr-vi[0],Rr-vi[1],In,Yn,On);return bn=se(Mn,Pn,Hn),ya=Et(Oe,_a),ba=Et(bn,ya),ta=vu(ya,$i),qi()}function qi(){return wa=Ca=null,ca}return function(){return Oe=be.apply(this,arguments),ca.invert=Oe.invert&&Mo,lo()}}function Ns(be){var Oe=0,dr=n/3,lr=sc(be),Rr=lr(Oe,dr);return Rr.parallels=function(nn){return arguments.length?lr(Oe=nn[0]*g,dr=nn[1]*g):[Oe*y,dr*y]},Rr}function Us(be){var Oe=u(be);function dr(lr,Rr){return[lr*Oe,p(Rr)/Oe]}return dr.invert=function(lr,Rr){return[lr/Oe,M(Rr*Oe)]},dr}function mo(be,Oe){var dr=p(be),lr=(dr+p(Oe))/2;if(b(lr)<i)return Us(be);var Rr=1+dr*(2*lr-dr),nn=h(Rr)/lr;function mn(Mn,Pn){var Hn=h(Rr-2*lr*p(Pn))/lr;return[Hn*p(Mn*=lr),nn-Hn*u(Mn)]}return mn.invert=function(Mn,Pn){var Hn=nn-Pn,bn=_(Mn,b(Hn))*w(Hn);return Hn*lr<0&&(bn-=n*w(Mn)*w(Hn)),[bn/lr,M((Rr-(Mn*Mn+Hn*Hn)*lr*lr)/(2*lr))]},mn}function Gl(){return Ns(mo).scale(155.424).center([0,33.6442])}function Yl(){return Gl().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function fl(be){var Oe=be.length;return{point:function(dr,lr){for(var Rr=-1;++Rr<Oe;)be[Rr].point(dr,lr)},sphere:function(){for(var dr=-1;++dr<Oe;)be[dr].sphere()},lineStart:function(){for(var dr=-1;++dr<Oe;)be[dr].lineStart()},lineEnd:function(){for(var dr=-1;++dr<Oe;)be[dr].lineEnd()},polygonStart:function(){for(var dr=-1;++dr<Oe;)be[dr].polygonStart()},polygonEnd:function(){for(var dr=-1;++dr<Oe;)be[dr].polygonEnd()}}}function Ds(){var be,Oe,dr=Yl(),lr,Rr=Gl().rotate([154,0]).center([-2,58.5]).parallels([55,65]),nn,mn=Gl().rotate([157,0]).center([-3,19.9]).parallels([8,18]),Mn,Pn,Hn={point:function(In,Yn){Pn=[In,Yn]}};function bn(In){var Yn=In[0],ti=In[1];return Pn=null,lr.point(Yn,ti),Pn||(nn.point(Yn,ti),Pn)||(Mn.point(Yn,ti),Pn)}bn.invert=function(In){var Yn=dr.scale(),ti=dr.translate(),Bi=(In[0]-ti[0])/Yn,Ei=(In[1]-ti[1])/Yn;return(Ei>=.12&&Ei<.234&&Bi>=-.425&&Bi<-.214?Rr:Ei>=.166&&Ei<.234&&Bi>=-.214&&Bi<-.115?mn:dr).invert(In)},bn.stream=function(In){return be&&Oe===In?be:be=fl([dr.stream(Oe=In),Rr.stream(In),mn.stream(In)])},bn.precision=function(In){return arguments.length?(dr.precision(In),Rr.precision(In),mn.precision(In),On()):dr.precision()},bn.scale=function(In){return arguments.length?(dr.scale(In),Rr.scale(In*.35),mn.scale(In),bn.translate(dr.translate())):dr.scale()},bn.translate=function(In){if(!arguments.length)return dr.translate();var Yn=dr.scale(),ti=+In[0],Bi=+In[1];return lr=dr.translate(In).clipExtent([[ti-.455*Yn,Bi-.238*Yn],[ti+.455*Yn,Bi+.238*Yn]]).stream(Hn),nn=Rr.translate([ti-.307*Yn,Bi+.201*Yn]).clipExtent([[ti-.425*Yn+i,Bi+.12*Yn+i],[ti-.214*Yn-i,Bi+.234*Yn-i]]).stream(Hn),Mn=mn.translate([ti-.205*Yn,Bi+.212*Yn]).clipExtent([[ti-.214*Yn+i,Bi+.166*Yn+i],[ti-.115*Yn-i,Bi+.234*Yn-i]]).stream(Hn),On()},bn.fitExtent=function(In,Yn){return Es(bn,In,Yn)},bn.fitSize=function(In,Yn){return Vl(bn,In,Yn)},bn.fitWidth=function(In,Yn){return kc(bn,In,Yn)},bn.fitHeight=function(In,Yn){return Nc(bn,In,Yn)};function On(){return be=Oe=null,bn}return bn.scale(1070)}function Wl(be){return function(Oe,dr){var lr=u(Oe),Rr=u(dr),nn=be(lr*Rr);return[nn*Rr*p(Oe),nn*p(dr)]}}function Ll(be){return function(Oe,dr){var lr=h(Oe*Oe+dr*dr),Rr=be(lr),nn=p(Rr),mn=u(Rr);return[_(Oe*nn,lr*mn),M(lr&&dr*nn/lr)]}}var lc=Wl(function(be){return h(2/(1+be))});lc.invert=Ll(function(be){return 2*M(be/2)});function $l(){return Oo(lc).scale(124.75).clipAngle(180-.001)}var hl=Wl(function(be){return(be=S(be))&&be/p(be)});hl.invert=Ll(function(be){return be});function gu(){return Oo(hl).scale(79.4188).clipAngle(180-.001)}function gs(be,Oe){return[be,A(D((d+Oe)/2))]}gs.invert=function(be,Oe){return[be,2*v(c(Oe))-d]};function Bu(){return Ac(gs).scale(961/o)}function Ac(be){var Oe=Oo(be),dr=Oe.center,lr=Oe.scale,Rr=Oe.translate,nn=Oe.clipExtent,mn=null,Mn,Pn,Hn;Oe.scale=function(On){return arguments.length?(lr(On),bn()):lr()},Oe.translate=function(On){return arguments.length?(Rr(On),bn()):Rr()},Oe.center=function(On){return arguments.length?(dr(On),bn()):dr()},Oe.clipExtent=function(On){return arguments.length?(On==null?mn=Mn=Pn=Hn=null:(mn=+On[0][0],Mn=+On[0][1],Pn=+On[1][0],Hn=+On[1][1]),bn()):mn==null?null:[[mn,Mn],[Pn,Hn]]};function bn(){var On=n*lr(),In=Oe(ye(Oe.rotate()).invert([0,0]));return nn(mn==null?[[In[0]-On,In[1]-On],[In[0]+On,In[1]+On]]:be===gs?[[Math.max(In[0]-On,mn),Mn],[Math.min(In[0]+On,Pn),Hn]]:[[mn,Math.max(In[1]-On,Mn)],[Pn,Math.min(In[1]+On,Hn)]])}return bn()}function Dl(be){return D((d+be)/2)}function Xl(be,Oe){var dr=u(be),lr=be===Oe?p(be):A(dr/u(Oe))/A(Dl(Oe)/Dl(be)),Rr=dr*k(Dl(be),lr)/lr;if(!lr)return gs;function nn(mn,Mn){Rr>0?Mn<-d+i&&(Mn=-d+i):Mn>d-i&&(Mn=d-i);var Pn=Rr/k(Dl(Mn),lr);return[Pn*p(lr*mn),Rr-Pn*u(lr*mn)]}return nn.invert=function(mn,Mn){var Pn=Rr-Mn,Hn=w(lr)*h(mn*mn+Pn*Pn),bn=_(mn,b(Pn))*w(Pn);return Pn*lr<0&&(bn-=n*w(mn)*w(Pn)),[bn/lr,2*v(k(Rr/Hn,1/lr))-d]},nn}function dl(){return Ns(Xl).scale(109.5).parallels([30,30])}function jl(be,Oe){return[be,Oe]}jl.invert=jl;function Vc(){return Oo(jl).scale(152.63)}function Gc(be,Oe){var dr=u(be),lr=be===Oe?p(be):(dr-u(Oe))/(Oe-be),Rr=dr/lr+be;if(b(lr)<i)return jl;function nn(mn,Mn){var Pn=Rr-Mn,Hn=lr*mn;return[Pn*p(Hn),Rr-Pn*u(Hn)]}return nn.invert=function(mn,Mn){var Pn=Rr-Mn,Hn=_(mn,b(Pn))*w(Pn);return Pn*lr<0&&(Hn-=n*w(mn)*w(Pn)),[Hn/lr,Rr-w(lr)*h(mn*mn+Pn*Pn)]},nn}function Nu(){return Ns(Gc).scale(131.154).center([0,13.9389])}var Na=1.340264,Pl=-.081106,pl=893e-6,us=.003796,ms=h(3)/2,Zl=12;function yo(be,Oe){var dr=M(ms*p(Oe)),lr=dr*dr,Rr=lr*lr*lr;return[be*u(dr)/(ms*(Na+3*Pl*lr+Rr*(7*pl+9*us*lr))),dr*(Na+Pl*lr+Rr*(pl+us*lr))]}yo.invert=function(be,Oe){for(var dr=Oe,lr=dr*dr,Rr=lr*lr*lr,nn=0,mn,Mn,Pn;nn<Zl&&(Mn=dr*(Na+Pl*lr+Rr*(pl+us*lr))-Oe,Pn=Na+3*Pl*lr+Rr*(7*pl+9*us*lr),dr-=mn=Mn/Pn,lr=dr*dr,Rr=lr*lr*lr,!(b(mn)<r));++nn);return[ms*be*(Na+3*Pl*lr+Rr*(7*pl+9*us*lr))/u(dr),M(p(dr)/ms)]};function Yc(){return Oo(yo).scale(177.158)}function ys(be,Oe){var dr=u(Oe),lr=u(be)*dr;return[dr*p(be)/lr,p(Oe)/lr]}ys.invert=Ll(v);function qs(){return Oo(ys).scale(144.049).clipAngle(60)}function tl(){var be=1,Oe=0,dr=0,lr=1,Rr=1,nn=0,mn,Mn,Pn=null,Hn,bn,On,In=1,Yn=1,ti=ul({point:function(pi,$i){var ta=Qn([pi,$i]);this.stream.point(ta[0],ta[1])}}),Bi=fn,Ei,Ni;function Ui(){return In=be*lr,Yn=be*Rr,Ei=Ni=null,Qn}function Qn(pi){var $i=pi[0]*In,ta=pi[1]*Yn;if(nn){var ya=ta*mn-$i*Mn;$i=$i*mn+ta*Mn,ta=ya}return[$i+Oe,ta+dr]}return Qn.invert=function(pi){var $i=pi[0]-Oe,ta=pi[1]-dr;if(nn){var ya=ta*mn+$i*Mn;$i=$i*mn-ta*Mn,ta=ya}return[$i/In,ta/Yn]},Qn.stream=function(pi){return Ei&&Ni===pi?Ei:Ei=ti(Bi(Ni=pi))},Qn.postclip=function(pi){return arguments.length?(Bi=pi,Pn=Hn=bn=On=null,Ui()):Bi},Qn.clipExtent=function(pi){return arguments.length?(Bi=pi==null?(Pn=Hn=bn=On=null,fn):un(Pn=+pi[0][0],Hn=+pi[0][1],bn=+pi[1][0],On=+pi[1][1]),Ui()):Pn==null?null:[[Pn,Hn],[bn,On]]},Qn.scale=function(pi){return arguments.length?(be=+pi,Ui()):be},Qn.translate=function(pi){return arguments.length?(Oe=+pi[0],dr=+pi[1],Ui()):[Oe,dr]},Qn.angle=function(pi){return arguments.length?(nn=pi%360*g,Mn=p(nn),mn=u(nn),Ui()):nn*y},Qn.reflectX=function(pi){return arguments.length?(lr=pi?-1:1,Ui()):lr<0},Qn.reflectY=function(pi){return arguments.length?(Rr=pi?-1:1,Ui()):Rr<0},Qn.fitExtent=function(pi,$i){return Es(Qn,pi,$i)},Qn.fitSize=function(pi,$i){return Vl(Qn,pi,$i)},Qn.fitWidth=function(pi,$i){return kc(Qn,pi,$i)},Qn.fitHeight=function(pi,$i){return Nc(Qn,pi,$i)},Qn}function Hs(be,Oe){var dr=Oe*Oe,lr=dr*dr;return[be*(.8707-.131979*dr+lr*(-.013791+lr*(.003971*dr-.001529*lr))),Oe*(1.007226+dr*(.015085+lr*(-.044475+.028874*dr-.005916*lr)))]}Hs.invert=function(be,Oe){var dr=Oe,lr=25,Rr;do{var nn=dr*dr,mn=nn*nn;dr-=Rr=(dr*(1.007226+nn*(.015085+mn*(-.044475+.028874*nn-.005916*mn)))-Oe)/(1.007226+nn*(.015085*3+mn*(-.044475*7+.028874*9*nn-.005916*11*mn)))}while(b(Rr)>i&&--lr>0);return[be/(.8707+(nn=dr*dr)*(-.131979+nn*(-.013791+nn*nn*nn*(.003971-.001529*nn)))),dr]};function bs(){return Oo(Hs).scale(175.295)}function ja(be,Oe){return[u(Oe)*p(be),p(Oe)]}ja.invert=Ll(M);function Bo(){return Oo(ja).scale(249.5).clipAngle(90+i)}function xs(be,Oe){var dr=u(Oe),lr=1+u(be)*dr;return[dr*p(be)/lr,p(Oe)/lr]}xs.invert=Ll(function(be){return 2*v(be)});function Wc(){return Oo(xs).scale(250).clipAngle(142)}function cc(be,Oe){return[A(D((d+Oe)/2)),-be]}cc.invert=function(be,Oe){return[-Oe,2*v(c(be))-d]};function $c(){var be=Ac(cc),Oe=be.center,dr=be.rotate;return be.center=function(lr){return arguments.length?Oe([-lr[1],lr[0]]):(lr=Oe(),[lr[1],-lr[0]])},be.rotate=function(lr){return arguments.length?dr([lr[0],lr[1],lr.length>2?lr[2]+90:90]):(lr=dr(),[lr[0],lr[1],lr[2]-90])},dr([0,0,90]).scale(159.155)}f.geoAlbers=Yl,f.geoAlbersUsa=Ds,f.geoArea=W,f.geoAzimuthalEqualArea=$l,f.geoAzimuthalEqualAreaRaw=lc,f.geoAzimuthalEquidistant=gu,f.geoAzimuthalEquidistantRaw=hl,f.geoBounds=Wt,f.geoCentroid=_e,f.geoCircle=sr,f.geoClipAntimeridian=$e,f.geoClipCircle=Fr,f.geoClipExtent=Un,f.geoClipRectangle=un,f.geoConicConformal=dl,f.geoConicConformalRaw=Xl,f.geoConicEqualArea=Gl,f.geoConicEqualAreaRaw=mo,f.geoConicEquidistant=Nu,f.geoConicEquidistantRaw=Gc,f.geoContains=pr,f.geoDistance=Sn,f.geoEqualEarth=Yc,f.geoEqualEarthRaw=yo,f.geoEquirectangular=Vc,f.geoEquirectangularRaw=jl,f.geoGnomonic=qs,f.geoGnomonicRaw=ys,f.geoGraticule=rn,f.geoGraticule10=An,f.geoIdentity=tl,f.geoInterpolate=wn,f.geoLength=Tr,f.geoMercator=Bu,f.geoMercatorRaw=gs,f.geoNaturalEarth1=bs,f.geoNaturalEarth1Raw=Hs,f.geoOrthographic=Bo,f.geoOrthographicRaw=ja,f.geoPath=ic,f.geoProjection=Oo,f.geoProjectionMutator=sc,f.geoRotation=ye,f.geoStereographic=Wc,f.geoStereographicRaw=xs,f.geoStream=G,f.geoTransform=pu,f.geoTransverseMercator=$c,f.geoTransverseMercatorRaw=cc,Object.defineProperty(f,"__esModule",{value:!0})})},{"d3-array":107}],115:[function(e,B,V){(function(f,l){typeof V=="object"&&typeof B<"u"?l(V):(f=f||self,l(f.d3=f.d3||{}))})(this,function(f){function l(Xt,St){return Xt.parent===St.parent?1:2}function m(Xt){return Xt.reduce(x,0)/Xt.length}function x(Xt,St){return Xt+St.x}function t(Xt){return 1+Xt.reduce(a,0)}function a(Xt,St){return Math.max(Xt,St.y)}function i(Xt){for(var St;St=Xt.children;)Xt=St[0];return Xt}function r(Xt){for(var St;St=Xt.children;)Xt=St[St.length-1];return Xt}function n(){var Xt=l,St=1,Vt=1,Zt=!1;function qt(Te){var me,Ne=0;Te.eachAfter(function(We){var hr=We.children;hr?(We.x=m(hr),We.y=t(hr)):(We.x=me?Ne+=Xt(We,me):0,We.y=0,me=We)});var Ke=i(Te),He=r(Te),Xe=Ke.x-Xt(Ke,He)/2,er=He.x+Xt(He,Ke)/2;return Te.eachAfter(Zt?function(We){We.x=(We.x-Te.x)*St,We.y=(Te.y-We.y)*Vt}:function(We){We.x=(We.x-Xe)/(er-Xe)*St,We.y=(1-(Te.y?We.y/Te.y:1))*Vt})}return qt.separation=function(Te){return arguments.length?(Xt=Te,qt):Xt},qt.size=function(Te){return arguments.length?(Zt=!1,St=+Te[0],Vt=+Te[1],qt):Zt?null:[St,Vt]},qt.nodeSize=function(Te){return arguments.length?(Zt=!0,St=+Te[0],Vt=+Te[1],qt):Zt?[St,Vt]:null},qt}function d(Xt){var St=0,Vt=Xt.children,Zt=Vt&&Vt.length;if(!Zt)St=1;else for(;--Zt>=0;)St+=Vt[Zt].value;Xt.value=St}function s(){return this.eachAfter(d)}function o(Xt){var St=this,Vt,Zt=[St],qt,Te,me;do for(Vt=Zt.reverse(),Zt=[];St=Vt.pop();)if(Xt(St),qt=St.children,qt)for(Te=0,me=qt.length;Te<me;++Te)Zt.push(qt[Te]);while(Zt.length);return this}function y(Xt){for(var St=this,Vt=[St],Zt,qt;St=Vt.pop();)if(Xt(St),Zt=St.children,Zt)for(qt=Zt.length-1;qt>=0;--qt)Vt.push(Zt[qt]);return this}function g(Xt){for(var St=this,Vt=[St],Zt=[],qt,Te,me;St=Vt.pop();)if(Zt.push(St),qt=St.children,qt)for(Te=0,me=qt.length;Te<me;++Te)Vt.push(qt[Te]);for(;St=Zt.pop();)Xt(St);return this}function b(Xt){return this.eachAfter(function(St){for(var Vt=+Xt(St.data)||0,Zt=St.children,qt=Zt&&Zt.length;--qt>=0;)Vt+=Zt[qt].value;St.value=Vt})}function v(Xt){return this.eachBefore(function(St){St.children&&St.children.sort(Xt)})}function _(Xt){for(var St=this,Vt=u(St,Xt),Zt=[St];St!==Vt;)St=St.parent,Zt.push(St);for(var qt=Zt.length;Xt!==Vt;)Zt.splice(qt,0,Xt),Xt=Xt.parent;return Zt}function u(Xt,St){if(Xt===St)return Xt;var Vt=Xt.ancestors(),Zt=St.ancestors(),qt=null;for(Xt=Vt.pop(),St=Zt.pop();Xt===St;)qt=Xt,Xt=Vt.pop(),St=Zt.pop();return qt}function T(){for(var Xt=this,St=[Xt];Xt=Xt.parent;)St.push(Xt);return St}function c(){var Xt=[];return this.each(function(St){Xt.push(St)}),Xt}function A(){var Xt=[];return this.eachBefore(function(St){St.children||Xt.push(St)}),Xt}function k(){var Xt=this,St=[];return Xt.each(function(Vt){Vt!==Xt&&St.push({source:Vt.parent,target:Vt})}),St}function p(Xt,St){var Vt=new M(Xt),Zt=+Xt.value&&(Vt.value=Xt.value),qt,Te=[Vt],me,Ne,Ke,He;for(St==null&&(St=h);qt=Te.pop();)if(Zt&&(qt.value=+qt.data.value),(Ne=St(qt.data))&&(He=Ne.length))for(qt.children=new Array(He),Ke=He-1;Ke>=0;--Ke)Te.push(me=qt.children[Ke]=new M(Ne[Ke])),me.parent=qt,me.depth=qt.depth+1;return Vt.eachBefore(S)}function w(){return p(this).eachBefore(D)}function h(Xt){return Xt.children}function D(Xt){Xt.data=Xt.data.data}function S(Xt){var St=0;do Xt.height=St;while((Xt=Xt.parent)&&Xt.height<++St)}function M(Xt){this.data=Xt,this.depth=this.height=0,this.parent=null}M.prototype=p.prototype={constructor:M,count:s,each:o,eachAfter:g,eachBefore:y,sum:b,sort:v,path:_,ancestors:T,descendants:c,leaves:A,links:k,copy:w};var L=Array.prototype.slice;function R(Xt){for(var St=Xt.length,Vt,Zt;St;)Zt=Math.random()*St--|0,Vt=Xt[St],Xt[St]=Xt[Zt],Xt[Zt]=Vt;return Xt}function z(Xt){for(var St=0,Vt=(Xt=R(L.call(Xt))).length,Zt=[],qt,Te;St<Vt;)qt=Xt[St],Te&&U(Te,qt)?++St:(Te=G(Zt=P(Zt,qt)),St=0);return Te}function P(Xt,St){var Vt,Zt;if(O(St,Xt))return[St];for(Vt=0;Vt<Xt.length;++Vt)if(I(St,Xt[Vt])&&O(tt(Xt[Vt],St),Xt))return[Xt[Vt],St];for(Vt=0;Vt<Xt.length-1;++Vt)for(Zt=Vt+1;Zt<Xt.length;++Zt)if(I(tt(Xt[Vt],Xt[Zt]),St)&&I(tt(Xt[Vt],St),Xt[Zt])&&I(tt(Xt[Zt],St),Xt[Vt])&&O(Z(Xt[Vt],Xt[Zt],St),Xt))return[Xt[Vt],Xt[Zt],St];throw new Error}function I(Xt,St){var Vt=Xt.r-St.r,Zt=St.x-Xt.x,qt=St.y-Xt.y;return Vt<0||Vt*Vt<Zt*Zt+qt*qt}function U(Xt,St){var Vt=Xt.r-St.r+1e-6,Zt=St.x-Xt.x,qt=St.y-Xt.y;return Vt>0&&Vt*Vt>Zt*Zt+qt*qt}function O(Xt,St){for(var Vt=0;Vt<St.length;++Vt)if(!U(Xt,St[Vt]))return!1;return!0}function G(Xt){switch(Xt.length){case 1:return $(Xt[0]);case 2:return tt(Xt[0],Xt[1]);case 3:return Z(Xt[0],Xt[1],Xt[2])}}function $(Xt){return{x:Xt.x,y:Xt.y,r:Xt.r}}function tt(Xt,St){var Vt=Xt.x,Zt=Xt.y,qt=Xt.r,Te=St.x,me=St.y,Ne=St.r,Ke=Te-Vt,He=me-Zt,Xe=Ne-qt,er=Math.sqrt(Ke*Ke+He*He);return{x:(Vt+Te+Ke/er*Xe)/2,y:(Zt+me+He/er*Xe)/2,r:(er+qt+Ne)/2}}function Z(Xt,St,Vt){var Zt=Xt.x,qt=Xt.y,Te=Xt.r,me=St.x,Ne=St.y,Ke=St.r,He=Vt.x,Xe=Vt.y,er=Vt.r,We=Zt-me,hr=Zt-He,Wr=qt-Ne,dn=qt-Xe,Qr=Ke-Te,le=er-Te,Qe=Zt*Zt+qt*qt-Te*Te,Ze=Qe-me*me-Ne*Ne+Ke*Ke,Ve=Qe-He*He-Xe*Xe+er*er,_r=hr*Wr-We*dn,oe=(Wr*Ve-dn*Ze)/(_r*2)-Zt,Ht=(dn*Qr-Wr*le)/_r,te=(hr*Ze-We*Ve)/(_r*2)-qt,ne=(We*le-hr*Qr)/_r,_e=Ht*Ht+ne*ne-1,Pe=2*(Te+oe*Ht+te*ne),Et=oe*oe+te*te-Te*Te,Mt=-(_e?(Pe+Math.sqrt(Pe*Pe-4*_e*Et))/(2*_e):Et/Pe);return{x:Zt+oe+Ht*Mt,y:qt+te+ne*Mt,r:Mt}}function X(Xt,St,Vt){var Zt=Xt.x-St.x,qt,Te,me=Xt.y-St.y,Ne,Ke,He=Zt*Zt+me*me;He?(Te=St.r+Vt.r,Te*=Te,Ke=Xt.r+Vt.r,Ke*=Ke,Te>Ke?(qt=(He+Ke-Te)/(2*He),Ne=Math.sqrt(Math.max(0,Ke/He-qt*qt)),Vt.x=Xt.x-qt*Zt-Ne*me,Vt.y=Xt.y-qt*me+Ne*Zt):(qt=(He+Te-Ke)/(2*He),Ne=Math.sqrt(Math.max(0,Te/He-qt*qt)),Vt.x=St.x+qt*Zt-Ne*me,Vt.y=St.y+qt*me+Ne*Zt)):(Vt.x=St.x+Vt.r,Vt.y=St.y)}function J(Xt,St){var Vt=Xt.r+St.r-1e-6,Zt=St.x-Xt.x,qt=St.y-Xt.y;return Vt>0&&Vt*Vt>Zt*Zt+qt*qt}function st(Xt){var St=Xt._,Vt=Xt.next._,Zt=St.r+Vt.r,qt=(St.x*Vt.r+Vt.x*St.r)/Zt,Te=(St.y*Vt.r+Vt.y*St.r)/Zt;return qt*qt+Te*Te}function at(Xt){this._=Xt,this.next=null,this.previous=null}function lt(Xt){if(!(qt=Xt.length))return 0;var St,Vt,Zt,qt,Te,me,Ne,Ke,He,Xe,er;if(St=Xt[0],St.x=0,St.y=0,!(qt>1))return St.r;if(Vt=Xt[1],St.x=-Vt.r,Vt.x=St.r,Vt.y=0,!(qt>2))return St.r+Vt.r;X(Vt,St,Zt=Xt[2]),St=new at(St),Vt=new at(Vt),Zt=new at(Zt),St.next=Zt.previous=Vt,Vt.next=St.previous=Zt,Zt.next=Vt.previous=St;t:for(Ne=3;Ne<qt;++Ne){X(St._,Vt._,Zt=Xt[Ne]),Zt=new at(Zt),Ke=Vt.next,He=St.previous,Xe=Vt._.r,er=St._.r;do if(Xe<=er){if(J(Ke._,Zt._)){Vt=Ke,St.next=Vt,Vt.previous=St,--Ne;continue t}Xe+=Ke._.r,Ke=Ke.next}else{if(J(He._,Zt._)){St=He,St.next=Vt,Vt.previous=St,--Ne;continue t}er+=He._.r,He=He.previous}while(Ke!==He.next);for(Zt.previous=St,Zt.next=Vt,St.next=Vt.previous=Vt=Zt,Te=st(St);(Zt=Zt.next)!==Vt;)(me=st(Zt))<Te&&(St=Zt,Te=me);Vt=St.next}for(St=[Vt._],Zt=Vt;(Zt=Zt.next)!==Vt;)St.push(Zt._);for(Zt=z(St),Ne=0;Ne<qt;++Ne)St=Xt[Ne],St.x-=Zt.x,St.y-=Zt.y;return Zt.r}function F(Xt){return lt(Xt),Xt}function H(Xt){return Xt==null?null:et(Xt)}function et(Xt){if(typeof Xt!="function")throw new Error;return Xt}function q(){return 0}function W(Xt){return function(){return Xt}}function K(Xt){return Math.sqrt(Xt.value)}function nt(){var Xt=null,St=1,Vt=1,Zt=q;function qt(Te){return Te.x=St/2,Te.y=Vt/2,Xt?Te.eachBefore(it(Xt)).eachAfter(ot(Zt,.5)).eachBefore(ct(1)):Te.eachBefore(it(K)).eachAfter(ot(q,1)).eachAfter(ot(Zt,Te.r/Math.min(St,Vt))).eachBefore(ct(Math.min(St,Vt)/(2*Te.r))),Te}return qt.radius=function(Te){return arguments.length?(Xt=H(Te),qt):Xt},qt.size=function(Te){return arguments.length?(St=+Te[0],Vt=+Te[1],qt):[St,Vt]},qt.padding=function(Te){return arguments.length?(Zt=typeof Te=="function"?Te:W(+Te),qt):Zt},qt}function it(Xt){return function(St){St.children||(St.r=Math.max(0,+Xt(St)||0))}}function ot(Xt,St){return function(Vt){if(Zt=Vt.children){var Zt,qt,Te=Zt.length,me=Xt(Vt)*St||0,Ne;if(me)for(qt=0;qt<Te;++qt)Zt[qt].r+=me;if(Ne=lt(Zt),me)for(qt=0;qt<Te;++qt)Zt[qt].r-=me;Vt.r=Ne+me}}}function ct(Xt){return function(St){var Vt=St.parent;St.r*=Xt,Vt&&(St.x=Vt.x+Xt*St.x,St.y=Vt.y+Xt*St.y)}}function bt(Xt){Xt.x0=Math.round(Xt.x0),Xt.y0=Math.round(Xt.y0),Xt.x1=Math.round(Xt.x1),Xt.y1=Math.round(Xt.y1)}function ut(Xt,St,Vt,Zt,qt){for(var Te=Xt.children,me,Ne=-1,Ke=Te.length,He=Xt.value&&(Zt-St)/Xt.value;++Ne<Ke;)me=Te[Ne],me.y0=Vt,me.y1=qt,me.x0=St,me.x1=St+=me.value*He}function pt(){var Xt=1,St=1,Vt=0,Zt=!1;function qt(me){var Ne=me.height+1;return me.x0=me.y0=Vt,me.x1=Xt,me.y1=St/Ne,me.eachBefore(Te(St,Ne)),Zt&&me.eachBefore(bt),me}function Te(me,Ne){return function(Ke){Ke.children&&ut(Ke,Ke.x0,me*(Ke.depth+1)/Ne,Ke.x1,me*(Ke.depth+2)/Ne);var He=Ke.x0,Xe=Ke.y0,er=Ke.x1-Vt,We=Ke.y1-Vt;er<He&&(He=er=(He+er)/2),We<Xe&&(Xe=We=(Xe+We)/2),Ke.x0=He,Ke.y0=Xe,Ke.x1=er,Ke.y1=We}}return qt.round=function(me){return arguments.length?(Zt=!!me,qt):Zt},qt.size=function(me){return arguments.length?(Xt=+me[0],St=+me[1],qt):[Xt,St]},qt.padding=function(me){return arguments.length?(Vt=+me,qt):Vt},qt}var yt="$",Tt={depth:-1},kt={};function zt(Xt){return Xt.id}function Rt(Xt){return Xt.parentId}function Gt(){var Xt=zt,St=Rt;function Vt(Zt){var qt,Te,me=Zt.length,Ne,Ke,He,Xe=new Array(me),er,We,hr={};for(Te=0;Te<me;++Te)qt=Zt[Te],He=Xe[Te]=new M(qt),(er=Xt(qt,Te,Zt))!=null&&(er+="")&&(We=yt+(He.id=er),hr[We]=We in hr?kt:He);for(Te=0;Te<me;++Te)if(He=Xe[Te],er=St(Zt[Te],Te,Zt),er==null||!(er+="")){if(Ne)throw new Error("multiple roots");Ne=He}else{if(Ke=hr[yt+er],!Ke)throw new Error("missing: "+er);if(Ke===kt)throw new Error("ambiguous: "+er);Ke.children?Ke.children.push(He):Ke.children=[He],He.parent=Ke}if(!Ne)throw new Error("no root");if(Ne.parent=Tt,Ne.eachBefore(function(Wr){Wr.depth=Wr.parent.depth+1,--me}).eachBefore(S),Ne.parent=null,me>0)throw new Error("cycle");return Ne}return Vt.id=function(Zt){return arguments.length?(Xt=et(Zt),Vt):Xt},Vt.parentId=function(Zt){return arguments.length?(St=et(Zt),Vt):St},Vt}function wt(Xt,St){return Xt.parent===St.parent?1:2}function It(Xt){var St=Xt.children;return St?St[0]:Xt.t}function $t(Xt){var St=Xt.children;return St?St[St.length-1]:Xt.t}function Qt(Xt,St,Vt){var Zt=Vt/(St.i-Xt.i);St.c-=Zt,St.s+=Vt,Xt.c+=Zt,St.z+=Vt,St.m+=Vt}function Nt(Xt){for(var St=0,Vt=0,Zt=Xt.children,qt=Zt.length,Te;--qt>=0;)Te=Zt[qt],Te.z+=St,Te.m+=St,St+=Te.s+(Vt+=Te.c)}function Pt(Xt,St,Vt){return Xt.a.parent===St.parent?Xt.a:Vt}function Yt(Xt,St){this._=Xt,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=St}Yt.prototype=Object.create(M.prototype);function ve(Xt){for(var St=new Yt(Xt,0),Vt,Zt=[St],qt,Te,me,Ne;Vt=Zt.pop();)if(Te=Vt._.children)for(Vt.children=new Array(Ne=Te.length),me=Ne-1;me>=0;--me)Zt.push(qt=Vt.children[me]=new Yt(Te[me],me)),qt.parent=Vt;return(St.parent=new Yt(null,0)).children=[St],St}function Re(){var Xt=wt,St=1,Vt=1,Zt=null;function qt(He){var Xe=ve(He);if(Xe.eachAfter(Te),Xe.parent.m=-Xe.z,Xe.eachBefore(me),Zt)He.eachBefore(Ke);else{var er=He,We=He,hr=He;He.eachBefore(function(Qe){Qe.x<er.x&&(er=Qe),Qe.x>We.x&&(We=Qe),Qe.depth>hr.depth&&(hr=Qe)});var Wr=er===We?1:Xt(er,We)/2,dn=Wr-er.x,Qr=St/(We.x+Wr+dn),le=Vt/(hr.depth||1);He.eachBefore(function(Qe){Qe.x=(Qe.x+dn)*Qr,Qe.y=Qe.depth*le})}return He}function Te(He){var Xe=He.children,er=He.parent.children,We=He.i?er[He.i-1]:null;if(Xe){Nt(He);var hr=(Xe[0].z+Xe[Xe.length-1].z)/2;We?(He.z=We.z+Xt(He._,We._),He.m=He.z-hr):He.z=hr}else We&&(He.z=We.z+Xt(He._,We._));He.parent.A=Ne(He,We,He.parent.A||er[0])}function me(He){He._.x=He.z+He.parent.m,He.m+=He.parent.m}function Ne(He,Xe,er){if(Xe){for(var We=He,hr=He,Wr=Xe,dn=We.parent.children[0],Qr=We.m,le=hr.m,Qe=Wr.m,Ze=dn.m,Ve;Wr=$t(Wr),We=It(We),Wr&&We;)dn=It(dn),hr=$t(hr),hr.a=He,Ve=Wr.z+Qe-We.z-Qr+Xt(Wr._,We._),Ve>0&&(Qt(Pt(Wr,He,er),He,Ve),Qr+=Ve,le+=Ve),Qe+=Wr.m,Qr+=We.m,Ze+=dn.m,le+=hr.m;Wr&&!$t(hr)&&(hr.t=Wr,hr.m+=Qe-le),We&&!It(dn)&&(dn.t=We,dn.m+=Qr-Ze,er=He)}return er}function Ke(He){He.x*=St,He.y=He.depth*Vt}return qt.separation=function(He){return arguments.length?(Xt=He,qt):Xt},qt.size=function(He){return arguments.length?(Zt=!1,St=+He[0],Vt=+He[1],qt):Zt?null:[St,Vt]},qt.nodeSize=function(He){return arguments.length?(Zt=!0,St=+He[0],Vt=+He[1],qt):Zt?[St,Vt]:null},qt}function ir(Xt,St,Vt,Zt,qt){for(var Te=Xt.children,me,Ne=-1,Ke=Te.length,He=Xt.value&&(qt-Vt)/Xt.value;++Ne<Ke;)me=Te[Ne],me.x0=St,me.x1=Zt,me.y0=Vt,me.y1=Vt+=me.value*He}var Ie=(1+Math.sqrt(5))/2;function Be(Xt,St,Vt,Zt,qt,Te){for(var me=[],Ne=St.children,Ke,He,Xe=0,er=0,We=Ne.length,hr,Wr,dn=St.value,Qr,le,Qe,Ze,Ve,_r,oe;Xe<We;){hr=qt-Vt,Wr=Te-Zt;do Qr=Ne[er++].value;while(!Qr&&er<We);for(le=Qe=Qr,_r=Math.max(Wr/hr,hr/Wr)/(dn*Xt),oe=Qr*Qr*_r,Ve=Math.max(Qe/oe,oe/le);er<We;++er){if(Qr+=He=Ne[er].value,He<le&&(le=He),He>Qe&&(Qe=He),oe=Qr*Qr*_r,Ze=Math.max(Qe/oe,oe/le),Ze>Ve){Qr-=He;break}Ve=Ze}me.push(Ke={value:Qr,dice:hr<Wr,children:Ne.slice(Xe,er)}),Ke.dice?ut(Ke,Vt,Zt,qt,dn?Zt+=Wr*Qr/dn:Te):ir(Ke,Vt,Zt,dn?Vt+=hr*Qr/dn:qt,Te),dn-=Qr,Xe=er}return me}var Ye=function Xt(St){function Vt(Zt,qt,Te,me,Ne){Be(St,Zt,qt,Te,me,Ne)}return Vt.ratio=function(Zt){return Xt((Zt=+Zt)>1?Zt:1)},Vt}(Ie);function ze(){var Xt=Ye,St=!1,Vt=1,Zt=1,qt=[0],Te=q,me=q,Ne=q,Ke=q,He=q;function Xe(We){return We.x0=We.y0=0,We.x1=Vt,We.y1=Zt,We.eachBefore(er),qt=[0],St&&We.eachBefore(bt),We}function er(We){var hr=qt[We.depth],Wr=We.x0+hr,dn=We.y0+hr,Qr=We.x1-hr,le=We.y1-hr;Qr<Wr&&(Wr=Qr=(Wr+Qr)/2),le<dn&&(dn=le=(dn+le)/2),We.x0=Wr,We.y0=dn,We.x1=Qr,We.y1=le,We.children&&(hr=qt[We.depth+1]=Te(We)/2,Wr+=He(We)-hr,dn+=me(We)-hr,Qr-=Ne(We)-hr,le-=Ke(We)-hr,Qr<Wr&&(Wr=Qr=(Wr+Qr)/2),le<dn&&(dn=le=(dn+le)/2),Xt(We,Wr,dn,Qr,le))}return Xe.round=function(We){return arguments.length?(St=!!We,Xe):St},Xe.size=function(We){return arguments.length?(Vt=+We[0],Zt=+We[1],Xe):[Vt,Zt]},Xe.tile=function(We){return arguments.length?(Xt=et(We),Xe):Xt},Xe.padding=function(We){return arguments.length?Xe.paddingInner(We).paddingOuter(We):Xe.paddingInner()},Xe.paddingInner=function(We){return arguments.length?(Te=typeof We=="function"?We:W(+We),Xe):Te},Xe.paddingOuter=function(We){return arguments.length?Xe.paddingTop(We).paddingRight(We).paddingBottom(We).paddingLeft(We):Xe.paddingTop()},Xe.paddingTop=function(We){return arguments.length?(me=typeof We=="function"?We:W(+We),Xe):me},Xe.paddingRight=function(We){return arguments.length?(Ne=typeof We=="function"?We:W(+We),Xe):Ne},Xe.paddingBottom=function(We){return arguments.length?(Ke=typeof We=="function"?We:W(+We),Xe):Ke},Xe.paddingLeft=function(We){return arguments.length?(He=typeof We=="function"?We:W(+We),Xe):He},Xe}function Ee(Xt,St,Vt,Zt,qt){var Te=Xt.children,me,Ne=Te.length,Ke,He=new Array(Ne+1);for(He[0]=Ke=me=0;me<Ne;++me)He[me+1]=Ke+=Te[me].value;Xe(0,Ne,Xt.value,St,Vt,Zt,qt);function Xe(er,We,hr,Wr,dn,Qr,le){if(er>=We-1){var Qe=Te[er];Qe.x0=Wr,Qe.y0=dn,Qe.x1=Qr,Qe.y1=le;return}for(var Ze=He[er],Ve=hr/2+Ze,_r=er+1,oe=We-1;_r<oe;){var Ht=_r+oe>>>1;He[Ht]<Ve?_r=Ht+1:oe=Ht}Ve-He[_r-1]<He[_r]-Ve&&er+1<_r&&--_r;var te=He[_r]-Ze,ne=hr-te;if(Qr-Wr>le-dn){var _e=(Wr*ne+Qr*te)/hr;Xe(er,_r,te,Wr,dn,_e,le),Xe(_r,We,ne,_e,dn,Qr,le)}else{var Pe=(dn*ne+le*te)/hr;Xe(er,_r,te,Wr,dn,Qr,Pe),Xe(_r,We,ne,Wr,Pe,Qr,le)}}}function Wt(Xt,St,Vt,Zt,qt){(Xt.depth&1?ir:ut)(Xt,St,Vt,Zt,qt)}var ee=function Xt(St){function Vt(Zt,qt,Te,me,Ne){if((Ke=Zt._squarify)&&Ke.ratio===St)for(var Ke,He,Xe,er,We=-1,hr,Wr=Ke.length,dn=Zt.value;++We<Wr;){for(He=Ke[We],Xe=He.children,er=He.value=0,hr=Xe.length;er<hr;++er)He.value+=Xe[er].value;He.dice?ut(He,qt,Te,me,Te+=(Ne-Te)*He.value/dn):ir(He,qt,Te,qt+=(me-qt)*He.value/dn,Ne),dn-=He.value}else Zt._squarify=Ke=Be(St,Zt,qt,Te,me,Ne),Ke.ratio=St}return Vt.ratio=function(Zt){return Xt((Zt=+Zt)>1?Zt:1)},Vt}(Ie);f.cluster=n,f.hierarchy=p,f.pack=nt,f.packEnclose=z,f.packSiblings=F,f.partition=pt,f.stratify=Gt,f.tree=Re,f.treemap=ze,f.treemapBinary=Ee,f.treemapDice=ut,f.treemapResquarify=ee,f.treemapSlice=ir,f.treemapSliceDice=Wt,f.treemapSquarify=Ye,Object.defineProperty(f,"__esModule",{value:!0})})},{}],116:[function(e,B,V){(function(f,l){typeof V=="object"&&typeof B<"u"?l(V,e("d3-color")):(f=f||self,l(f.d3=f.d3||{},f.d3))})(this,function(f,l){function m(wt,It,$t,Qt,Nt){var Pt=wt*wt,Yt=Pt*wt;return((1-3*wt+3*Pt-Yt)*It+(4-6*Pt+3*Yt)*$t+(1+3*wt+3*Pt-3*Yt)*Qt+Yt*Nt)/6}function x(wt){var It=wt.length-1;return function($t){var Qt=$t<=0?$t=0:$t>=1?($t=1,It-1):Math.floor($t*It),Nt=wt[Qt],Pt=wt[Qt+1],Yt=Qt>0?wt[Qt-1]:2*Nt-Pt,ve=Qt<It-1?wt[Qt+2]:2*Pt-Nt;return m(($t-Qt/It)*It,Yt,Nt,Pt,ve)}}function t(wt){var It=wt.length;return function($t){var Qt=Math.floor((($t%=1)<0?++$t:$t)*It),Nt=wt[(Qt+It-1)%It],Pt=wt[Qt%It],Yt=wt[(Qt+1)%It],ve=wt[(Qt+2)%It];return m(($t-Qt/It)*It,Nt,Pt,Yt,ve)}}function a(wt){return function(){return wt}}function i(wt,It){return function($t){return wt+$t*It}}function r(wt,It,$t){return wt=Math.pow(wt,$t),It=Math.pow(It,$t)-wt,$t=1/$t,function(Qt){return Math.pow(wt+Qt*It,$t)}}function n(wt,It){var $t=It-wt;return $t?i(wt,$t>180||$t<-180?$t-360*Math.round($t/360):$t):a(isNaN(wt)?It:wt)}function d(wt){return(wt=+wt)==1?s:function(It,$t){return $t-It?r(It,$t,wt):a(isNaN(It)?$t:It)}}function s(wt,It){var $t=It-wt;return $t?i(wt,$t):a(isNaN(wt)?It:wt)}var o=function wt(It){var $t=d(It);function Qt(Nt,Pt){var Yt=$t((Nt=l.rgb(Nt)).r,(Pt=l.rgb(Pt)).r),ve=$t(Nt.g,Pt.g),Re=$t(Nt.b,Pt.b),ir=s(Nt.opacity,Pt.opacity);return function(Ie){return Nt.r=Yt(Ie),Nt.g=ve(Ie),Nt.b=Re(Ie),Nt.opacity=ir(Ie),Nt+""}}return Qt.gamma=wt,Qt}(1);function y(wt){return function(It){var $t=It.length,Qt=new Array($t),Nt=new Array($t),Pt=new Array($t),Yt,ve;for(Yt=0;Yt<$t;++Yt)ve=l.rgb(It[Yt]),Qt[Yt]=ve.r||0,Nt[Yt]=ve.g||0,Pt[Yt]=ve.b||0;return Qt=wt(Qt),Nt=wt(Nt),Pt=wt(Pt),ve.opacity=1,function(Re){return ve.r=Qt(Re),ve.g=Nt(Re),ve.b=Pt(Re),ve+""}}}var g=y(x),b=y(t);function v(wt,It){It||(It=[]);var $t=wt?Math.min(It.length,wt.length):0,Qt=It.slice(),Nt;return function(Pt){for(Nt=0;Nt<$t;++Nt)Qt[Nt]=wt[Nt]*(1-Pt)+It[Nt]*Pt;return Qt}}function _(wt){return ArrayBuffer.isView(wt)&&!(wt instanceof DataView)}function u(wt,It){return(_(It)?v:T)(wt,It)}function T(wt,It){var $t=It?It.length:0,Qt=wt?Math.min($t,wt.length):0,Nt=new Array(Qt),Pt=new Array($t),Yt;for(Yt=0;Yt<Qt;++Yt)Nt[Yt]=M(wt[Yt],It[Yt]);for(;Yt<$t;++Yt)Pt[Yt]=It[Yt];return function(ve){for(Yt=0;Yt<Qt;++Yt)Pt[Yt]=Nt[Yt](ve);return Pt}}function c(wt,It){var $t=new Date;return wt=+wt,It=+It,function(Qt){return $t.setTime(wt*(1-Qt)+It*Qt),$t}}function A(wt,It){return wt=+wt,It=+It,function($t){return wt*(1-$t)+It*$t}}function k(wt,It){var $t={},Qt={},Nt;(wt===null||typeof wt!="object")&&(wt={}),(It===null||typeof It!="object")&&(It={});for(Nt in It)Nt in wt?$t[Nt]=M(wt[Nt],It[Nt]):Qt[Nt]=It[Nt];return function(Pt){for(Nt in $t)Qt[Nt]=$t[Nt](Pt);return Qt}}var p=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,w=new RegExp(p.source,"g");function h(wt){return function(){return wt}}function D(wt){return function(It){return wt(It)+""}}function S(wt,It){var $t=p.lastIndex=w.lastIndex=0,Qt,Nt,Pt,Yt=-1,ve=[],Re=[];for(wt=wt+"",It=It+"";(Qt=p.exec(wt))&&(Nt=w.exec(It));)(Pt=Nt.index)>$t&&(Pt=It.slice($t,Pt),ve[Yt]?ve[Yt]+=Pt:ve[++Yt]=Pt),(Qt=Qt[0])===(Nt=Nt[0])?ve[Yt]?ve[Yt]+=Nt:ve[++Yt]=Nt:(ve[++Yt]=null,Re.push({i:Yt,x:A(Qt,Nt)})),$t=w.lastIndex;return $t<It.length&&(Pt=It.slice($t),ve[Yt]?ve[Yt]+=Pt:ve[++Yt]=Pt),ve.length<2?Re[0]?D(Re[0].x):h(It):(It=Re.length,function(ir){for(var Ie=0,Be;Ie<It;++Ie)ve[(Be=Re[Ie]).i]=Be.x(ir);return ve.join("")})}function M(wt,It){var $t=typeof It,Qt;return It==null||$t==="boolean"?a(It):($t==="number"?A:$t==="string"?(Qt=l.color(It))?(It=Qt,o):S:It instanceof l.color?o:It instanceof Date?c:_(It)?v:Array.isArray(It)?T:typeof It.valueOf!="function"&&typeof It.toString!="function"||isNaN(It)?k:A)(wt,It)}function L(wt){var It=wt.length;return function($t){return wt[Math.max(0,Math.min(It-1,Math.floor($t*It)))]}}function R(wt,It){var $t=n(+wt,+It);return function(Qt){var Nt=$t(Qt);return Nt-360*Math.floor(Nt/360)}}function z(wt,It){return wt=+wt,It=+It,function($t){return Math.round(wt*(1-$t)+It*$t)}}var P=180/Math.PI,I={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function U(wt,It,$t,Qt,Nt,Pt){var Yt,ve,Re;return(Yt=Math.sqrt(wt*wt+It*It))&&(wt/=Yt,It/=Yt),(Re=wt*$t+It*Qt)&&($t-=wt*Re,Qt-=It*Re),(ve=Math.sqrt($t*$t+Qt*Qt))&&($t/=ve,Qt/=ve,Re/=ve),wt*Qt<It*$t&&(wt=-wt,It=-It,Re=-Re,Yt=-Yt),{translateX:Nt,translateY:Pt,rotate:Math.atan2(It,wt)*P,skewX:Math.atan(Re)*P,scaleX:Yt,scaleY:ve}}var O,G,$,tt;function Z(wt){return wt==="none"?I:(O||(O=document.createElement("DIV"),G=document.documentElement,$=document.defaultView),O.style.transform=wt,wt=$.getComputedStyle(G.appendChild(O),null).getPropertyValue("transform"),G.removeChild(O),wt=wt.slice(7,-1).split(","),U(+wt[0],+wt[1],+wt[2],+wt[3],+wt[4],+wt[5]))}function X(wt){return wt==null||(tt||(tt=document.createElementNS("http://www.w3.org/2000/svg","g")),tt.setAttribute("transform",wt),!(wt=tt.transform.baseVal.consolidate()))?I:(wt=wt.matrix,U(wt.a,wt.b,wt.c,wt.d,wt.e,wt.f))}function J(wt,It,$t,Qt){function Nt(ir){return ir.length?ir.pop()+" ":""}function Pt(ir,Ie,Be,Ye,ze,Ee){if(ir!==Be||Ie!==Ye){var Wt=ze.push("translate(",null,It,null,$t);Ee.push({i:Wt-4,x:A(ir,Be)},{i:Wt-2,x:A(Ie,Ye)})}else(Be||Ye)&&ze.push("translate("+Be+It+Ye+$t)}function Yt(ir,Ie,Be,Ye){ir!==Ie?(ir-Ie>180?Ie+=360:Ie-ir>180&&(ir+=360),Ye.push({i:Be.push(Nt(Be)+"rotate(",null,Qt)-2,x:A(ir,Ie)})):Ie&&Be.push(Nt(Be)+"rotate("+Ie+Qt)}function ve(ir,Ie,Be,Ye){ir!==Ie?Ye.push({i:Be.push(Nt(Be)+"skewX(",null,Qt)-2,x:A(ir,Ie)}):Ie&&Be.push(Nt(Be)+"skewX("+Ie+Qt)}function Re(ir,Ie,Be,Ye,ze,Ee){if(ir!==Be||Ie!==Ye){var Wt=ze.push(Nt(ze)+"scale(",null,",",null,")");Ee.push({i:Wt-4,x:A(ir,Be)},{i:Wt-2,x:A(Ie,Ye)})}else(Be!==1||Ye!==1)&&ze.push(Nt(ze)+"scale("+Be+","+Ye+")")}return function(ir,Ie){var Be=[],Ye=[];return ir=wt(ir),Ie=wt(Ie),Pt(ir.translateX,ir.translateY,Ie.translateX,Ie.translateY,Be,Ye),Yt(ir.rotate,Ie.rotate,Be,Ye),ve(ir.skewX,Ie.skewX,Be,Ye),Re(ir.scaleX,ir.scaleY,Ie.scaleX,Ie.scaleY,Be,Ye),ir=Ie=null,function(ze){for(var Ee=-1,Wt=Ye.length,ee;++Ee<Wt;)Be[(ee=Ye[Ee]).i]=ee.x(ze);return Be.join("")}}}var st=J(Z,"px, ","px)","deg)"),at=J(X,", ",")",")"),lt=Math.SQRT2,F=2,H=4,et=1e-12;function q(wt){return((wt=Math.exp(wt))+1/wt)/2}function W(wt){return((wt=Math.exp(wt))-1/wt)/2}function K(wt){return((wt=Math.exp(2*wt))-1)/(wt+1)}function nt(wt,It){var $t=wt[0],Qt=wt[1],Nt=wt[2],Pt=It[0],Yt=It[1],ve=It[2],Re=Pt-$t,ir=Yt-Qt,Ie=Re*Re+ir*ir,Be,Ye;if(Ie<et)Ye=Math.log(ve/Nt)/lt,Be=function(St){return[$t+St*Re,Qt+St*ir,Nt*Math.exp(lt*St*Ye)]};else{var ze=Math.sqrt(Ie),Ee=(ve*ve-Nt*Nt+H*Ie)/(2*Nt*F*ze),Wt=(ve*ve-Nt*Nt-H*Ie)/(2*ve*F*ze),ee=Math.log(Math.sqrt(Ee*Ee+1)-Ee),Xt=Math.log(Math.sqrt(Wt*Wt+1)-Wt);Ye=(Xt-ee)/lt,Be=function(St){var Vt=St*Ye,Zt=q(ee),qt=Nt/(F*ze)*(Zt*K(lt*Vt+ee)-W(ee));return[$t+qt*Re,Qt+qt*ir,Nt*Zt/q(lt*Vt+ee)]}}return Be.duration=Ye*1e3,Be}function it(wt){return function(It,$t){var Qt=wt((It=l.hsl(It)).h,($t=l.hsl($t)).h),Nt=s(It.s,$t.s),Pt=s(It.l,$t.l),Yt=s(It.opacity,$t.opacity);return function(ve){return It.h=Qt(ve),It.s=Nt(ve),It.l=Pt(ve),It.opacity=Yt(ve),It+""}}}var ot=it(n),ct=it(s);function bt(wt,It){var $t=s((wt=l.lab(wt)).l,(It=l.lab(It)).l),Qt=s(wt.a,It.a),Nt=s(wt.b,It.b),Pt=s(wt.opacity,It.opacity);return function(Yt){return wt.l=$t(Yt),wt.a=Qt(Yt),wt.b=Nt(Yt),wt.opacity=Pt(Yt),wt+""}}function ut(wt){return function(It,$t){var Qt=wt((It=l.hcl(It)).h,($t=l.hcl($t)).h),Nt=s(It.c,$t.c),Pt=s(It.l,$t.l),Yt=s(It.opacity,$t.opacity);return function(ve){return It.h=Qt(ve),It.c=Nt(ve),It.l=Pt(ve),It.opacity=Yt(ve),It+""}}}var pt=ut(n),yt=ut(s);function Tt(wt){return function It($t){$t=+$t;function Qt(Nt,Pt){var Yt=wt((Nt=l.cubehelix(Nt)).h,(Pt=l.cubehelix(Pt)).h),ve=s(Nt.s,Pt.s),Re=s(Nt.l,Pt.l),ir=s(Nt.opacity,Pt.opacity);return function(Ie){return Nt.h=Yt(Ie),Nt.s=ve(Ie),Nt.l=Re(Math.pow(Ie,$t)),Nt.opacity=ir(Ie),Nt+""}}return Qt.gamma=It,Qt}(1)}var kt=Tt(n),zt=Tt(s);function Rt(wt,It){for(var $t=0,Qt=It.length-1,Nt=It[0],Pt=new Array(Qt<0?0:Qt);$t<Qt;)Pt[$t]=wt(Nt,Nt=It[++$t]);return function(Yt){var ve=Math.max(0,Math.min(Qt-1,Math.floor(Yt*=Qt)));return Pt[ve](Yt-ve)}}function Gt(wt,It){for(var $t=new Array(It),Qt=0;Qt<It;++Qt)$t[Qt]=wt(Qt/(It-1));return $t}f.interpolate=M,f.interpolateArray=u,f.interpolateBasis=x,f.interpolateBasisClosed=t,f.interpolateCubehelix=kt,f.interpolateCubehelixLong=zt,f.interpolateDate=c,f.interpolateDiscrete=L,f.interpolateHcl=pt,f.interpolateHclLong=yt,f.interpolateHsl=ot,f.interpolateHslLong=ct,f.interpolateHue=R,f.interpolateLab=bt,f.interpolateNumber=A,f.interpolateNumberArray=v,f.interpolateObject=k,f.interpolateRgb=o,f.interpolateRgbBasis=g,f.interpolateRgbBasisClosed=b,f.interpolateRound=z,f.interpolateString=S,f.interpolateTransformCss=st,f.interpolateTransformSvg=at,f.interpolateZoom=nt,f.piecewise=Rt,f.quantize=Gt,Object.defineProperty(f,"__esModule",{value:!0})})},{"d3-color":109}],117:[function(e,B,V){(function(f,l){typeof V=="object"&&typeof B<"u"?l(V):(f=f||self,l(f.d3=f.d3||{}))})(this,function(f){var l=Math.PI,m=2*l,x=1e-6,t=m-x;function a(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function i(){return new a}a.prototype=i.prototype={constructor:a,moveTo:function(r,n){this._+="M"+(this._x0=this._x1=+r)+","+(this._y0=this._y1=+n)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(r,n){this._+="L"+(this._x1=+r)+","+(this._y1=+n)},quadraticCurveTo:function(r,n,d,s){this._+="Q"+ +r+","+ +n+","+(this._x1=+d)+","+(this._y1=+s)},bezierCurveTo:function(r,n,d,s,o,y){this._+="C"+ +r+","+ +n+","+ +d+","+ +s+","+(this._x1=+o)+","+(this._y1=+y)},arcTo:function(r,n,d,s,o){r=+r,n=+n,d=+d,s=+s,o=+o;var y=this._x1,g=this._y1,b=d-r,v=s-n,_=y-r,u=g-n,T=_*_+u*u;if(o<0)throw new Error("negative radius: "+o);if(this._x1===null)this._+="M"+(this._x1=r)+","+(this._y1=n);else if(T>x)if(!(Math.abs(u*b-v*_)>x)||!o)this._+="L"+(this._x1=r)+","+(this._y1=n);else{var c=d-y,A=s-g,k=b*b+v*v,p=c*c+A*A,w=Math.sqrt(k),h=Math.sqrt(T),D=o*Math.tan((l-Math.acos((k+T-p)/(2*w*h)))/2),S=D/h,M=D/w;Math.abs(S-1)>x&&(this._+="L"+(r+S*_)+","+(n+S*u)),this._+="A"+o+","+o+",0,0,"+ +(u*c>_*A)+","+(this._x1=r+M*b)+","+(this._y1=n+M*v)}},arc:function(r,n,d,s,o,y){r=+r,n=+n,d=+d,y=!!y;var g=d*Math.cos(s),b=d*Math.sin(s),v=r+g,_=n+b,u=1^y,T=y?s-o:o-s;if(d<0)throw new Error("negative radius: "+d);this._x1===null?this._+="M"+v+","+_:(Math.abs(this._x1-v)>x||Math.abs(this._y1-_)>x)&&(this._+="L"+v+","+_),d&&(T<0&&(T=T%m+m),T>t?this._+="A"+d+","+d+",0,1,"+u+","+(r-g)+","+(n-b)+"A"+d+","+d+",0,1,"+u+","+(this._x1=v)+","+(this._y1=_):T>x&&(this._+="A"+d+","+d+",0,"+ +(T>=l)+","+u+","+(this._x1=r+d*Math.cos(o))+","+(this._y1=n+d*Math.sin(o))))},rect:function(r,n,d,s){this._+="M"+(this._x0=this._x1=+r)+","+(this._y0=this._y1=+n)+"h"+ +d+"v"+ +s+"h"+-d+"Z"},toString:function(){return this._}},f.path=i,Object.defineProperty(f,"__esModule",{value:!0})})},{}],118:[function(e,B,V){(function(f,l){typeof V=="object"&&typeof B<"u"?l(V):(f=f||self,l(f.d3=f.d3||{}))})(this,function(f){function l(w){var h=+this._x.call(null,w),D=+this._y.call(null,w);return m(this.cover(h,D),h,D,w)}function m(w,h,D,S){if(isNaN(h)||isNaN(D))return w;var M,L=w._root,R={data:S},z=w._x0,P=w._y0,I=w._x1,U=w._y1,O,G,$,tt,Z,X,J,st;if(!L)return w._root=R,w;for(;L.length;)if((Z=h>=(O=(z+I)/2))?z=O:I=O,(X=D>=(G=(P+U)/2))?P=G:U=G,M=L,!(L=L[J=X<<1|Z]))return M[J]=R,w;if($=+w._x.call(null,L.data),tt=+w._y.call(null,L.data),h===$&&D===tt)return R.next=L,M?M[J]=R:w._root=R,w;do M=M?M[J]=new Array(4):w._root=new Array(4),(Z=h>=(O=(z+I)/2))?z=O:I=O,(X=D>=(G=(P+U)/2))?P=G:U=G;while((J=X<<1|Z)===(st=(tt>=G)<<1|$>=O));return M[st]=L,M[J]=R,w}function x(w){var h,D,S=w.length,M,L,R=new Array(S),z=new Array(S),P=1/0,I=1/0,U=-1/0,O=-1/0;for(D=0;D<S;++D)isNaN(M=+this._x.call(null,h=w[D]))||isNaN(L=+this._y.call(null,h))||(R[D]=M,z[D]=L,M<P&&(P=M),M>U&&(U=M),L<I&&(I=L),L>O&&(O=L));if(P>U||I>O)return this;for(this.cover(P,I).cover(U,O),D=0;D<S;++D)m(this,R[D],z[D],w[D]);return this}function t(w,h){if(isNaN(w=+w)||isNaN(h=+h))return this;var D=this._x0,S=this._y0,M=this._x1,L=this._y1;if(isNaN(D))M=(D=Math.floor(w))+1,L=(S=Math.floor(h))+1;else{for(var R=M-D,z=this._root,P,I;D>w||w>=M||S>h||h>=L;)switch(I=(h<S)<<1|w<D,P=new Array(4),P[I]=z,z=P,R*=2,I){case 0:M=D+R,L=S+R;break;case 1:D=M-R,L=S+R;break;case 2:M=D+R,S=L-R;break;case 3:D=M-R,S=L-R;break}this._root&&this._root.length&&(this._root=z)}return this._x0=D,this._y0=S,this._x1=M,this._y1=L,this}function a(){var w=[];return this.visit(function(h){if(!h.length)do w.push(h.data);while(h=h.next)}),w}function i(w){return arguments.length?this.cover(+w[0][0],+w[0][1]).cover(+w[1][0],+w[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function r(w,h,D,S,M){this.node=w,this.x0=h,this.y0=D,this.x1=S,this.y1=M}function n(w,h,D){var S,M=this._x0,L=this._y0,R,z,P,I,U=this._x1,O=this._y1,G=[],$=this._root,tt,Z;for($&&G.push(new r($,M,L,U,O)),D==null?D=1/0:(M=w-D,L=h-D,U=w+D,O=h+D,D*=D);tt=G.pop();)if(!(!($=tt.node)||(R=tt.x0)>U||(z=tt.y0)>O||(P=tt.x1)<M||(I=tt.y1)<L))if($.length){var X=(R+P)/2,J=(z+I)/2;G.push(new r($[3],X,J,P,I),new r($[2],R,J,X,I),new r($[1],X,z,P,J),new r($[0],R,z,X,J)),(Z=(h>=J)<<1|w>=X)&&(tt=G[G.length-1],G[G.length-1]=G[G.length-1-Z],G[G.length-1-Z]=tt)}else{var st=w-+this._x.call(null,$.data),at=h-+this._y.call(null,$.data),lt=st*st+at*at;if(lt<D){var F=Math.sqrt(D=lt);M=w-F,L=h-F,U=w+F,O=h+F,S=$.data}}return S}function d(w){if(isNaN(U=+this._x.call(null,w))||isNaN(O=+this._y.call(null,w)))return this;var h,D=this._root,S,M,L,R=this._x0,z=this._y0,P=this._x1,I=this._y1,U,O,G,$,tt,Z,X,J;if(!D)return this;if(D.length)for(;;){if((tt=U>=(G=(R+P)/2))?R=G:P=G,(Z=O>=($=(z+I)/2))?z=$:I=$,h=D,!(D=D[X=Z<<1|tt]))return this;if(!D.length)break;(h[X+1&3]||h[X+2&3]||h[X+3&3])&&(S=h,J=X)}for(;D.data!==w;)if(M=D,!(D=D.next))return this;return(L=D.next)&&delete D.next,M?(L?M.next=L:delete M.next,this):h?(L?h[X]=L:delete h[X],(D=h[0]||h[1]||h[2]||h[3])&&D===(h[3]||h[2]||h[1]||h[0])&&!D.length&&(S?S[J]=D:this._root=D),this):(this._root=L,this)}function s(w){for(var h=0,D=w.length;h<D;++h)this.remove(w[h]);return this}function o(){return this._root}function y(){var w=0;return this.visit(function(h){if(!h.length)do++w;while(h=h.next)}),w}function g(w){var h=[],D,S=this._root,M,L,R,z,P;for(S&&h.push(new r(S,this._x0,this._y0,this._x1,this._y1));D=h.pop();)if(!w(S=D.node,L=D.x0,R=D.y0,z=D.x1,P=D.y1)&&S.length){var I=(L+z)/2,U=(R+P)/2;(M=S[3])&&h.push(new r(M,I,U,z,P)),(M=S[2])&&h.push(new r(M,L,U,I,P)),(M=S[1])&&h.push(new r(M,I,R,z,U)),(M=S[0])&&h.push(new r(M,L,R,I,U))}return this}function b(w){var h=[],D=[],S;for(this._root&&h.push(new r(this._root,this._x0,this._y0,this._x1,this._y1));S=h.pop();){var M=S.node;if(M.length){var L,R=S.x0,z=S.y0,P=S.x1,I=S.y1,U=(R+P)/2,O=(z+I)/2;(L=M[0])&&h.push(new r(L,R,z,U,O)),(L=M[1])&&h.push(new r(L,U,z,P,O)),(L=M[2])&&h.push(new r(L,R,O,U,I)),(L=M[3])&&h.push(new r(L,U,O,P,I))}D.push(S)}for(;S=D.pop();)w(S.node,S.x0,S.y0,S.x1,S.y1);return this}function v(w){return w[0]}function _(w){return arguments.length?(this._x=w,this):this._x}function u(w){return w[1]}function T(w){return arguments.length?(this._y=w,this):this._y}function c(w,h,D){var S=new A(h==null?v:h,D==null?u:D,NaN,NaN,NaN,NaN);return w==null?S:S.addAll(w)}function A(w,h,D,S,M,L){this._x=w,this._y=h,this._x0=D,this._y0=S,this._x1=M,this._y1=L,this._root=void 0}function k(w){for(var h={data:w.data},D=h;w=w.next;)D=D.next={data:w.data};return h}var p=c.prototype=A.prototype;p.copy=function(){var w=new A(this._x,this._y,this._x0,this._y0,this._x1,this._y1),h=this._root,D,S;if(!h)return w;if(!h.length)return w._root=k(h),w;for(D=[{source:h,target:w._root=new Array(4)}];h=D.pop();)for(var M=0;M<4;++M)(S=h.source[M])&&(S.length?D.push({source:S,target:h.target[M]=new Array(4)}):h.target[M]=k(S));return w},p.add=l,p.addAll=x,p.cover=t,p.data=a,p.extent=i,p.find=n,p.remove=d,p.removeAll=s,p.root=o,p.size=y,p.visit=g,p.visitAfter=b,p.x=_,p.y=T,f.quadtree=c,Object.defineProperty(f,"__esModule",{value:!0})})},{}],119:[function(e,B,V){(function(f,l){typeof V=="object"&&typeof B<"u"?l(V,e("d3-path")):(f=f||self,l(f.d3=f.d3||{},f.d3))})(this,function(f,l){function m(ae){return function(){return ae}}var x=Math.abs,t=Math.atan2,a=Math.cos,i=Math.max,r=Math.min,n=Math.sin,d=Math.sqrt,s=1e-12,o=Math.PI,y=o/2,g=2*o;function b(ae){return ae>1?0:ae<-1?o:Math.acos(ae)}function v(ae){return ae>=1?y:ae<=-1?-y:Math.asin(ae)}function _(ae){return ae.innerRadius}function u(ae){return ae.outerRadius}function T(ae){return ae.startAngle}function c(ae){return ae.endAngle}function A(ae){return ae&&ae.padAngle}function k(ae,Le,$e,or,Dr,Nr,Fr,Ar){var Xr=$e-ae,Tn=or-Le,un=Fr-Dr,Un=Ar-Nr,Dn=Un*Xr-un*Tn;if(!(Dn*Dn<s))return Dn=(un*(Le-Nr)-Un*(ae-Dr))/Dn,[ae+Dn*Xr,Le+Dn*Tn]}function p(ae,Le,$e,or,Dr,Nr,Fr){var Ar=ae-$e,Xr=Le-or,Tn=(Fr?Nr:-Nr)/d(Ar*Ar+Xr*Xr),un=Tn*Xr,Un=-Tn*Ar,Dn=ae+un,Xn=Le+Un,Gn=$e+un,yi=or+Un,Pi=(Dn+Gn)/2,pa=(Xn+yi)/2,Wi=Gn-Dn,Ji=yi-Xn,ji=Wi*Wi+Ji*Ji,Tr=Dr-Nr,gn=Dn*yi-Gn*Xn,hn=(Ji<0?-1:1)*d(i(0,Tr*Tr*ji-gn*gn)),Sn=(gn*Ji-Wi*hn)/ji,Zn=(-gn*Wi-Ji*hn)/ji,fi=(gn*Ji+Wi*hn)/ji,ri=(-gn*Wi+Ji*hn)/ji,Rn=Sn-Pi,jn=Zn-pa,Gi=fi-Pi,fa=ri-pa;return Rn*Rn+jn*jn>Gi*Gi+fa*fa&&(Sn=fi,Zn=ri),{cx:Sn,cy:Zn,x01:-un,y01:-Un,x11:Sn*(Dr/Tr-1),y11:Zn*(Dr/Tr-1)}}function w(){var ae=_,Le=u,$e=m(0),or=null,Dr=T,Nr=c,Fr=A,Ar=null;function Xr(){var Tn,un,Un=+ae.apply(this,arguments),Dn=+Le.apply(this,arguments),Xn=Dr.apply(this,arguments)-y,Gn=Nr.apply(this,arguments)-y,yi=x(Gn-Xn),Pi=Gn>Xn;if(Ar||(Ar=Tn=l.path()),Dn<Un&&(un=Dn,Dn=Un,Un=un),!(Dn>s))Ar.moveTo(0,0);else if(yi>g-s)Ar.moveTo(Dn*a(Xn),Dn*n(Xn)),Ar.arc(0,0,Dn,Xn,Gn,!Pi),Un>s&&(Ar.moveTo(Un*a(Gn),Un*n(Gn)),Ar.arc(0,0,Un,Gn,Xn,Pi));else{var pa=Xn,Wi=Gn,Ji=Xn,ji=Gn,Tr=yi,gn=yi,hn=Fr.apply(this,arguments)/2,Sn=hn>s&&(or?+or.apply(this,arguments):d(Un*Un+Dn*Dn)),Zn=r(x(Dn-Un)/2,+$e.apply(this,arguments)),fi=Zn,ri=Zn,Rn,jn;if(Sn>s){var Gi=v(Sn/Un*n(hn)),fa=v(Sn/Dn*n(hn));(Tr-=Gi*2)>s?(Gi*=Pi?1:-1,Ji+=Gi,ji-=Gi):(Tr=0,Ji=ji=(Xn+Gn)/2),(gn-=fa*2)>s?(fa*=Pi?1:-1,pa+=fa,Wi-=fa):(gn=0,pa=Wi=(Xn+Gn)/2)}var Ue=Dn*a(pa),pr=Dn*n(pa),an=Un*a(ji),vn=Un*n(ji);if(Zn>s){var rn=Dn*a(Wi),An=Dn*n(Wi),wn=Un*a(Ji),fn=Un*n(Ji),yr;if(yi<o&&(yr=k(Ue,pr,wn,fn,rn,An,an,vn))){var br=Ue-yr[0],Or=pr-yr[1],yn=rn-yr[0],Nn=An-yr[1],ni=1/n(b((br*yn+Or*Nn)/(d(br*br+Or*Or)*d(yn*yn+Nn*Nn)))/2),kn=d(yr[0]*yr[0]+yr[1]*yr[1]);fi=r(Zn,(Un-kn)/(ni-1)),ri=r(Zn,(Dn-kn)/(ni+1))}}gn>s?ri>s?(Rn=p(wn,fn,Ue,pr,Dn,ri,Pi),jn=p(rn,An,an,vn,Dn,ri,Pi),Ar.moveTo(Rn.cx+Rn.x01,Rn.cy+Rn.y01),ri<Zn?Ar.arc(Rn.cx,Rn.cy,ri,t(Rn.y01,Rn.x01),t(jn.y01,jn.x01),!Pi):(Ar.arc(Rn.cx,Rn.cy,ri,t(Rn.y01,Rn.x01),t(Rn.y11,Rn.x11),!Pi),Ar.arc(0,0,Dn,t(Rn.cy+Rn.y11,Rn.cx+Rn.x11),t(jn.cy+jn.y11,jn.cx+jn.x11),!Pi),Ar.arc(jn.cx,jn.cy,ri,t(jn.y11,jn.x11),t(jn.y01,jn.x01),!Pi))):(Ar.moveTo(Ue,pr),Ar.arc(0,0,Dn,pa,Wi,!Pi)):Ar.moveTo(Ue,pr),!(Un>s)||!(Tr>s)?Ar.lineTo(an,vn):fi>s?(Rn=p(an,vn,rn,An,Un,-fi,Pi),jn=p(Ue,pr,wn,fn,Un,-fi,Pi),Ar.lineTo(Rn.cx+Rn.x01,Rn.cy+Rn.y01),fi<Zn?Ar.arc(Rn.cx,Rn.cy,fi,t(Rn.y01,Rn.x01),t(jn.y01,jn.x01),!Pi):(Ar.arc(Rn.cx,Rn.cy,fi,t(Rn.y01,Rn.x01),t(Rn.y11,Rn.x11),!Pi),Ar.arc(0,0,Un,t(Rn.cy+Rn.y11,Rn.cx+Rn.x11),t(jn.cy+jn.y11,jn.cx+jn.x11),Pi),Ar.arc(jn.cx,jn.cy,fi,t(jn.y11,jn.x11),t(jn.y01,jn.x01),!Pi))):Ar.arc(0,0,Un,ji,Ji,Pi)}if(Ar.closePath(),Tn)return Ar=null,Tn+""||null}return Xr.centroid=function(){var Tn=(+ae.apply(this,arguments)+ +Le.apply(this,arguments))/2,un=(+Dr.apply(this,arguments)+ +Nr.apply(this,arguments))/2-o/2;return[a(un)*Tn,n(un)*Tn]},Xr.innerRadius=function(Tn){return arguments.length?(ae=typeof Tn=="function"?Tn:m(+Tn),Xr):ae},Xr.outerRadius=function(Tn){return arguments.length?(Le=typeof Tn=="function"?Tn:m(+Tn),Xr):Le},Xr.cornerRadius=function(Tn){return arguments.length?($e=typeof Tn=="function"?Tn:m(+Tn),Xr):$e},Xr.padRadius=function(Tn){return arguments.length?(or=Tn==null?null:typeof Tn=="function"?Tn:m(+Tn),Xr):or},Xr.startAngle=function(Tn){return arguments.length?(Dr=typeof Tn=="function"?Tn:m(+Tn),Xr):Dr},Xr.endAngle=function(Tn){return arguments.length?(Nr=typeof Tn=="function"?Tn:m(+Tn),Xr):Nr},Xr.padAngle=function(Tn){return arguments.length?(Fr=typeof Tn=="function"?Tn:m(+Tn),Xr):Fr},Xr.context=function(Tn){return arguments.length?(Ar=Tn==null?null:Tn,Xr):Ar},Xr}function h(ae){this._context=ae}h.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(ae,Le){switch(ae=+ae,Le=+Le,this._point){case 0:this._point=1,this._line?this._context.lineTo(ae,Le):this._context.moveTo(ae,Le);break;case 1:this._point=2;default:this._context.lineTo(ae,Le);break}}};function D(ae){return new h(ae)}function S(ae){return ae[0]}function M(ae){return ae[1]}function L(){var ae=S,Le=M,$e=m(!0),or=null,Dr=D,Nr=null;function Fr(Ar){var Xr,Tn=Ar.length,un,Un=!1,Dn;for(or==null&&(Nr=Dr(Dn=l.path())),Xr=0;Xr<=Tn;++Xr)!(Xr<Tn&&$e(un=Ar[Xr],Xr,Ar))===Un&&((Un=!Un)?Nr.lineStart():Nr.lineEnd()),Un&&Nr.point(+ae(un,Xr,Ar),+Le(un,Xr,Ar));if(Dn)return Nr=null,Dn+""||null}return Fr.x=function(Ar){return arguments.length?(ae=typeof Ar=="function"?Ar:m(+Ar),Fr):ae},Fr.y=function(Ar){return arguments.length?(Le=typeof Ar=="function"?Ar:m(+Ar),Fr):Le},Fr.defined=function(Ar){return arguments.length?($e=typeof Ar=="function"?Ar:m(!!Ar),Fr):$e},Fr.curve=function(Ar){return arguments.length?(Dr=Ar,or!=null&&(Nr=Dr(or)),Fr):Dr},Fr.context=function(Ar){return arguments.length?(Ar==null?or=Nr=null:Nr=Dr(or=Ar),Fr):or},Fr}function R(){var ae=S,Le=null,$e=m(0),or=M,Dr=m(!0),Nr=null,Fr=D,Ar=null;function Xr(un){var Un,Dn,Xn,Gn=un.length,yi,Pi=!1,pa,Wi=new Array(Gn),Ji=new Array(Gn);for(Nr==null&&(Ar=Fr(pa=l.path())),Un=0;Un<=Gn;++Un){if(!(Un<Gn&&Dr(yi=un[Un],Un,un))===Pi)if(Pi=!Pi)Dn=Un,Ar.areaStart(),Ar.lineStart();else{for(Ar.lineEnd(),Ar.lineStart(),Xn=Un-1;Xn>=Dn;--Xn)Ar.point(Wi[Xn],Ji[Xn]);Ar.lineEnd(),Ar.areaEnd()}Pi&&(Wi[Un]=+ae(yi,Un,un),Ji[Un]=+$e(yi,Un,un),Ar.point(Le?+Le(yi,Un,un):Wi[Un],or?+or(yi,Un,un):Ji[Un]))}if(pa)return Ar=null,pa+""||null}function Tn(){return L().defined(Dr).curve(Fr).context(Nr)}return Xr.x=function(un){return arguments.length?(ae=typeof un=="function"?un:m(+un),Le=null,Xr):ae},Xr.x0=function(un){return arguments.length?(ae=typeof un=="function"?un:m(+un),Xr):ae},Xr.x1=function(un){return arguments.length?(Le=un==null?null:typeof un=="function"?un:m(+un),Xr):Le},Xr.y=function(un){return arguments.length?($e=typeof un=="function"?un:m(+un),or=null,Xr):$e},Xr.y0=function(un){return arguments.length?($e=typeof un=="function"?un:m(+un),Xr):$e},Xr.y1=function(un){return arguments.length?(or=un==null?null:typeof un=="function"?un:m(+un),Xr):or},Xr.lineX0=Xr.lineY0=function(){return Tn().x(ae).y($e)},Xr.lineY1=function(){return Tn().x(ae).y(or)},Xr.lineX1=function(){return Tn().x(Le).y($e)},Xr.defined=function(un){return arguments.length?(Dr=typeof un=="function"?un:m(!!un),Xr):Dr},Xr.curve=function(un){return arguments.length?(Fr=un,Nr!=null&&(Ar=Fr(Nr)),Xr):Fr},Xr.context=function(un){return arguments.length?(un==null?Nr=Ar=null:Ar=Fr(Nr=un),Xr):Nr},Xr}function z(ae,Le){return Le<ae?-1:Le>ae?1:Le>=ae?0:NaN}function P(ae){return ae}function I(){var ae=P,Le=z,$e=null,or=m(0),Dr=m(g),Nr=m(0);function Fr(Ar){var Xr,Tn=Ar.length,un,Un,Dn=0,Xn=new Array(Tn),Gn=new Array(Tn),yi=+or.apply(this,arguments),Pi=Math.min(g,Math.max(-g,Dr.apply(this,arguments)-yi)),pa,Wi=Math.min(Math.abs(Pi)/Tn,Nr.apply(this,arguments)),Ji=Wi*(Pi<0?-1:1),ji;for(Xr=0;Xr<Tn;++Xr)(ji=Gn[Xn[Xr]=Xr]=+ae(Ar[Xr],Xr,Ar))>0&&(Dn+=ji);for(Le!=null?Xn.sort(function(Tr,gn){return Le(Gn[Tr],Gn[gn])}):$e!=null&&Xn.sort(function(Tr,gn){return $e(Ar[Tr],Ar[gn])}),Xr=0,Un=Dn?(Pi-Tn*Ji)/Dn:0;Xr<Tn;++Xr,yi=pa)un=Xn[Xr],ji=Gn[un],pa=yi+(ji>0?ji*Un:0)+Ji,Gn[un]={data:Ar[un],index:Xr,value:ji,startAngle:yi,endAngle:pa,padAngle:Wi};return Gn}return Fr.value=function(Ar){return arguments.length?(ae=typeof Ar=="function"?Ar:m(+Ar),Fr):ae},Fr.sortValues=function(Ar){return arguments.length?(Le=Ar,$e=null,Fr):Le},Fr.sort=function(Ar){return arguments.length?($e=Ar,Le=null,Fr):$e},Fr.startAngle=function(Ar){return arguments.length?(or=typeof Ar=="function"?Ar:m(+Ar),Fr):or},Fr.endAngle=function(Ar){return arguments.length?(Dr=typeof Ar=="function"?Ar:m(+Ar),Fr):Dr},Fr.padAngle=function(Ar){return arguments.length?(Nr=typeof Ar=="function"?Ar:m(+Ar),Fr):Nr},Fr}var U=G(D);function O(ae){this._curve=ae}O.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(ae,Le){this._curve.point(Le*Math.sin(ae),Le*-Math.cos(ae))}};function G(ae){function Le($e){return new O(ae($e))}return Le._curve=ae,Le}function $(ae){var Le=ae.curve;return ae.angle=ae.x,delete ae.x,ae.radius=ae.y,delete ae.y,ae.curve=function($e){return arguments.length?Le(G($e)):Le()._curve},ae}function tt(){return $(L().curve(U))}function Z(){var ae=R().curve(U),Le=ae.curve,$e=ae.lineX0,or=ae.lineX1,Dr=ae.lineY0,Nr=ae.lineY1;return ae.angle=ae.x,delete ae.x,ae.startAngle=ae.x0,delete ae.x0,ae.endAngle=ae.x1,delete ae.x1,ae.radius=ae.y,delete ae.y,ae.innerRadius=ae.y0,delete ae.y0,ae.outerRadius=ae.y1,delete ae.y1,ae.lineStartAngle=function(){return $($e())},delete ae.lineX0,ae.lineEndAngle=function(){return $(or())},delete ae.lineX1,ae.lineInnerRadius=function(){return $(Dr())},delete ae.lineY0,ae.lineOuterRadius=function(){return $(Nr())},delete ae.lineY1,ae.curve=function(Fr){return arguments.length?Le(G(Fr)):Le()._curve},ae}function X(ae,Le){return[(Le=+Le)*Math.cos(ae-=Math.PI/2),Le*Math.sin(ae)]}var J=Array.prototype.slice;function st(ae){return ae.source}function at(ae){return ae.target}function lt(ae){var Le=st,$e=at,or=S,Dr=M,Nr=null;function Fr(){var Ar,Xr=J.call(arguments),Tn=Le.apply(this,Xr),un=$e.apply(this,Xr);if(Nr||(Nr=Ar=l.path()),ae(Nr,+or.apply(this,(Xr[0]=Tn,Xr)),+Dr.apply(this,Xr),+or.apply(this,(Xr[0]=un,Xr)),+Dr.apply(this,Xr)),Ar)return Nr=null,Ar+""||null}return Fr.source=function(Ar){return arguments.length?(Le=Ar,Fr):Le},Fr.target=function(Ar){return arguments.length?($e=Ar,Fr):$e},Fr.x=function(Ar){return arguments.length?(or=typeof Ar=="function"?Ar:m(+Ar),Fr):or},Fr.y=function(Ar){return arguments.length?(Dr=typeof Ar=="function"?Ar:m(+Ar),Fr):Dr},Fr.context=function(Ar){return arguments.length?(Nr=Ar==null?null:Ar,Fr):Nr},Fr}function F(ae,Le,$e,or,Dr){ae.moveTo(Le,$e),ae.bezierCurveTo(Le=(Le+or)/2,$e,Le,Dr,or,Dr)}function H(ae,Le,$e,or,Dr){ae.moveTo(Le,$e),ae.bezierCurveTo(Le,$e=($e+Dr)/2,or,$e,or,Dr)}function et(ae,Le,$e,or,Dr){var Nr=X(Le,$e),Fr=X(Le,$e=($e+Dr)/2),Ar=X(or,$e),Xr=X(or,Dr);ae.moveTo(Nr[0],Nr[1]),ae.bezierCurveTo(Fr[0],Fr[1],Ar[0],Ar[1],Xr[0],Xr[1])}function q(){return lt(F)}function W(){return lt(H)}function K(){var ae=lt(et);return ae.angle=ae.x,delete ae.x,ae.radius=ae.y,delete ae.y,ae}var nt={draw:function(ae,Le){var $e=Math.sqrt(Le/o);ae.moveTo($e,0),ae.arc(0,0,$e,0,g)}},it={draw:function(ae,Le){var $e=Math.sqrt(Le/5)/2;ae.moveTo(-3*$e,-$e),ae.lineTo(-$e,-$e),ae.lineTo(-$e,-3*$e),ae.lineTo($e,-3*$e),ae.lineTo($e,-$e),ae.lineTo(3*$e,-$e),ae.lineTo(3*$e,$e),ae.lineTo($e,$e),ae.lineTo($e,3*$e),ae.lineTo(-$e,3*$e),ae.lineTo(-$e,$e),ae.lineTo(-3*$e,$e),ae.closePath()}},ot=Math.sqrt(1/3),ct=ot*2,bt={draw:function(ae,Le){var $e=Math.sqrt(Le/ct),or=$e*ot;ae.moveTo(0,-$e),ae.lineTo(or,0),ae.lineTo(0,$e),ae.lineTo(-or,0),ae.closePath()}},ut=.8908130915292852,pt=Math.sin(o/10)/Math.sin(7*o/10),yt=Math.sin(g/10)*pt,Tt=-Math.cos(g/10)*pt,kt={draw:function(ae,Le){var $e=Math.sqrt(Le*ut),or=yt*$e,Dr=Tt*$e;ae.moveTo(0,-$e),ae.lineTo(or,Dr);for(var Nr=1;Nr<5;++Nr){var Fr=g*Nr/5,Ar=Math.cos(Fr),Xr=Math.sin(Fr);ae.lineTo(Xr*$e,-Ar*$e),ae.lineTo(Ar*or-Xr*Dr,Xr*or+Ar*Dr)}ae.closePath()}},zt={draw:function(ae,Le){var $e=Math.sqrt(Le),or=-$e/2;ae.rect(or,or,$e,$e)}},Rt=Math.sqrt(3),Gt={draw:function(ae,Le){var $e=-Math.sqrt(Le/(Rt*3));ae.moveTo(0,$e*2),ae.lineTo(-Rt*$e,-$e),ae.lineTo(Rt*$e,-$e),ae.closePath()}},wt=-.5,It=Math.sqrt(3)/2,$t=1/Math.sqrt(12),Qt=($t/2+1)*3,Nt={draw:function(ae,Le){var $e=Math.sqrt(Le/Qt),or=$e/2,Dr=$e*$t,Nr=or,Fr=$e*$t+$e,Ar=-Nr,Xr=Fr;ae.moveTo(or,Dr),ae.lineTo(Nr,Fr),ae.lineTo(Ar,Xr),ae.lineTo(wt*or-It*Dr,It*or+wt*Dr),ae.lineTo(wt*Nr-It*Fr,It*Nr+wt*Fr),ae.lineTo(wt*Ar-It*Xr,It*Ar+wt*Xr),ae.lineTo(wt*or+It*Dr,wt*Dr-It*or),ae.lineTo(wt*Nr+It*Fr,wt*Fr-It*Nr),ae.lineTo(wt*Ar+It*Xr,wt*Xr-It*Ar),ae.closePath()}},Pt=[nt,it,bt,zt,kt,Gt,Nt];function Yt(){var ae=m(nt),Le=m(64),$e=null;function or(){var Dr;if($e||($e=Dr=l.path()),ae.apply(this,arguments).draw($e,+Le.apply(this,arguments)),Dr)return $e=null,Dr+""||null}return or.type=function(Dr){return arguments.length?(ae=typeof Dr=="function"?Dr:m(Dr),or):ae},or.size=function(Dr){return arguments.length?(Le=typeof Dr=="function"?Dr:m(+Dr),or):Le},or.context=function(Dr){return arguments.length?($e=Dr==null?null:Dr,or):$e},or}function ve(){}function Re(ae,Le,$e){ae._context.bezierCurveTo((2*ae._x0+ae._x1)/3,(2*ae._y0+ae._y1)/3,(ae._x0+2*ae._x1)/3,(ae._y0+2*ae._y1)/3,(ae._x0+4*ae._x1+Le)/6,(ae._y0+4*ae._y1+$e)/6)}function ir(ae){this._context=ae}ir.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Re(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(ae,Le){switch(ae=+ae,Le=+Le,this._point){case 0:this._point=1,this._line?this._context.lineTo(ae,Le):this._context.moveTo(ae,Le);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Re(this,ae,Le);break}this._x0=this._x1,this._x1=ae,this._y0=this._y1,this._y1=Le}};function Ie(ae){return new ir(ae)}function Be(ae){this._context=ae}Be.prototype={areaStart:ve,areaEnd:ve,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(ae,Le){switch(ae=+ae,Le=+Le,this._point){case 0:this._point=1,this._x2=ae,this._y2=Le;break;case 1:this._point=2,this._x3=ae,this._y3=Le;break;case 2:this._point=3,this._x4=ae,this._y4=Le,this._context.moveTo((this._x0+4*this._x1+ae)/6,(this._y0+4*this._y1+Le)/6);break;default:Re(this,ae,Le);break}this._x0=this._x1,this._x1=ae,this._y0=this._y1,this._y1=Le}};function Ye(ae){return new Be(ae)}function ze(ae){this._context=ae}ze.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(ae,Le){switch(ae=+ae,Le=+Le,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var $e=(this._x0+4*this._x1+ae)/6,or=(this._y0+4*this._y1+Le)/6;this._line?this._context.lineTo($e,or):this._context.moveTo($e,or);break;case 3:this._point=4;default:Re(this,ae,Le);break}this._x0=this._x1,this._x1=ae,this._y0=this._y1,this._y1=Le}};function Ee(ae){return new ze(ae)}function Wt(ae,Le){this._basis=new ir(ae),this._beta=Le}Wt.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var ae=this._x,Le=this._y,$e=ae.length-1;if($e>0)for(var or=ae[0],Dr=Le[0],Nr=ae[$e]-or,Fr=Le[$e]-Dr,Ar=-1,Xr;++Ar<=$e;)Xr=Ar/$e,this._basis.point(this._beta*ae[Ar]+(1-this._beta)*(or+Xr*Nr),this._beta*Le[Ar]+(1-this._beta)*(Dr+Xr*Fr));this._x=this._y=null,this._basis.lineEnd()},point:function(ae,Le){this._x.push(+ae),this._y.push(+Le)}};var ee=function ae(Le){function $e(or){return Le===1?new ir(or):new Wt(or,Le)}return $e.beta=function(or){return ae(+or)},$e}(.85);function Xt(ae,Le,$e){ae._context.bezierCurveTo(ae._x1+ae._k*(ae._x2-ae._x0),ae._y1+ae._k*(ae._y2-ae._y0),ae._x2+ae._k*(ae._x1-Le),ae._y2+ae._k*(ae._y1-$e),ae._x2,ae._y2)}function St(ae,Le){this._context=ae,this._k=(1-Le)/6}St.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Xt(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(ae,Le){switch(ae=+ae,Le=+Le,this._point){case 0:this._point=1,this._line?this._context.lineTo(ae,Le):this._context.moveTo(ae,Le);break;case 1:this._point=2,this._x1=ae,this._y1=Le;break;case 2:this._point=3;default:Xt(this,ae,Le);break}this._x0=this._x1,this._x1=this._x2,this._x2=ae,this._y0=this._y1,this._y1=this._y2,this._y2=Le}};var Vt=function ae(Le){function $e(or){return new St(or,Le)}return $e.tension=function(or){return ae(+or)},$e}(0);function Zt(ae,Le){this._context=ae,this._k=(1-Le)/6}Zt.prototype={areaStart:ve,areaEnd:ve,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(ae,Le){switch(ae=+ae,Le=+Le,this._point){case 0:this._point=1,this._x3=ae,this._y3=Le;break;case 1:this._point=2,this._context.moveTo(this._x4=ae,this._y4=Le);break;case 2:this._point=3,this._x5=ae,this._y5=Le;break;default:Xt(this,ae,Le);break}this._x0=this._x1,this._x1=this._x2,this._x2=ae,this._y0=this._y1,this._y1=this._y2,this._y2=Le}};var qt=function ae(Le){function $e(or){return new Zt(or,Le)}return $e.tension=function(or){return ae(+or)},$e}(0);function Te(ae,Le){this._context=ae,this._k=(1-Le)/6}Te.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(ae,Le){switch(ae=+ae,Le=+Le,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Xt(this,ae,Le);break}this._x0=this._x1,this._x1=this._x2,this._x2=ae,this._y0=this._y1,this._y1=this._y2,this._y2=Le}};var me=function ae(Le){function $e(or){return new Te(or,Le)}return $e.tension=function(or){return ae(+or)},$e}(0);function Ne(ae,Le,$e){var or=ae._x1,Dr=ae._y1,Nr=ae._x2,Fr=ae._y2;if(ae._l01_a>s){var Ar=2*ae._l01_2a+3*ae._l01_a*ae._l12_a+ae._l12_2a,Xr=3*ae._l01_a*(ae._l01_a+ae._l12_a);or=(or*Ar-ae._x0*ae._l12_2a+ae._x2*ae._l01_2a)/Xr,Dr=(Dr*Ar-ae._y0*ae._l12_2a+ae._y2*ae._l01_2a)/Xr}if(ae._l23_a>s){var Tn=2*ae._l23_2a+3*ae._l23_a*ae._l12_a+ae._l12_2a,un=3*ae._l23_a*(ae._l23_a+ae._l12_a);Nr=(Nr*Tn+ae._x1*ae._l23_2a-Le*ae._l12_2a)/un,Fr=(Fr*Tn+ae._y1*ae._l23_2a-$e*ae._l12_2a)/un}ae._context.bezierCurveTo(or,Dr,Nr,Fr,ae._x2,ae._y2)}function Ke(ae,Le){this._context=ae,this._alpha=Le}Ke.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(ae,Le){if(ae=+ae,Le=+Le,this._point){var $e=this._x2-ae,or=this._y2-Le;this._l23_a=Math.sqrt(this._l23_2a=Math.pow($e*$e+or*or,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(ae,Le):this._context.moveTo(ae,Le);break;case 1:this._point=2;break;case 2:this._point=3;default:Ne(this,ae,Le);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=ae,this._y0=this._y1,this._y1=this._y2,this._y2=Le}};var He=function ae(Le){function $e(or){return Le?new Ke(or,Le):new St(or,0)}return $e.alpha=function(or){return ae(+or)},$e}(.5);function Xe(ae,Le){this._context=ae,this._alpha=Le}Xe.prototype={areaStart:ve,areaEnd:ve,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(ae,Le){if(ae=+ae,Le=+Le,this._point){var $e=this._x2-ae,or=this._y2-Le;this._l23_a=Math.sqrt(this._l23_2a=Math.pow($e*$e+or*or,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=ae,this._y3=Le;break;case 1:this._point=2,this._context.moveTo(this._x4=ae,this._y4=Le);break;case 2:this._point=3,this._x5=ae,this._y5=Le;break;default:Ne(this,ae,Le);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=ae,this._y0=this._y1,this._y1=this._y2,this._y2=Le}};var er=function ae(Le){function $e(or){return Le?new Xe(or,Le):new Zt(or,0)}return $e.alpha=function(or){return ae(+or)},$e}(.5);function We(ae,Le){this._context=ae,this._alpha=Le}We.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(ae,Le){if(ae=+ae,Le=+Le,this._point){var $e=this._x2-ae,or=this._y2-Le;this._l23_a=Math.sqrt(this._l23_2a=Math.pow($e*$e+or*or,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ne(this,ae,Le);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=ae,this._y0=this._y1,this._y1=this._y2,this._y2=Le}};var hr=function ae(Le){function $e(or){return Le?new We(or,Le):new Te(or,0)}return $e.alpha=function(or){return ae(+or)},$e}(.5);function Wr(ae){this._context=ae}Wr.prototype={areaStart:ve,areaEnd:ve,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(ae,Le){ae=+ae,Le=+Le,this._point?this._context.lineTo(ae,Le):(this._point=1,this._context.moveTo(ae,Le))}};function dn(ae){return new Wr(ae)}function Qr(ae){return ae<0?-1:1}function le(ae,Le,$e){var or=ae._x1-ae._x0,Dr=Le-ae._x1,Nr=(ae._y1-ae._y0)/(or||Dr<0&&-0),Fr=($e-ae._y1)/(Dr||or<0&&-0),Ar=(Nr*Dr+Fr*or)/(or+Dr);return(Qr(Nr)+Qr(Fr))*Math.min(Math.abs(Nr),Math.abs(Fr),.5*Math.abs(Ar))||0}function Qe(ae,Le){var $e=ae._x1-ae._x0;return $e?(3*(ae._y1-ae._y0)/$e-Le)/2:Le}function Ze(ae,Le,$e){var or=ae._x0,Dr=ae._y0,Nr=ae._x1,Fr=ae._y1,Ar=(Nr-or)/3;ae._context.bezierCurveTo(or+Ar,Dr+Ar*Le,Nr-Ar,Fr-Ar*$e,Nr,Fr)}function Ve(ae){this._context=ae}Ve.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Ze(this,this._t0,Qe(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(ae,Le){var $e=NaN;if(ae=+ae,Le=+Le,!(ae===this._x1&&Le===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(ae,Le):this._context.moveTo(ae,Le);break;case 1:this._point=2;break;case 2:this._point=3,Ze(this,Qe(this,$e=le(this,ae,Le)),$e);break;default:Ze(this,this._t0,$e=le(this,ae,Le));break}this._x0=this._x1,this._x1=ae,this._y0=this._y1,this._y1=Le,this._t0=$e}}};function _r(ae){this._context=new oe(ae)}(_r.prototype=Object.create(Ve.prototype)).point=function(ae,Le){Ve.prototype.point.call(this,Le,ae)};function oe(ae){this._context=ae}oe.prototype={moveTo:function(ae,Le){this._context.moveTo(Le,ae)},closePath:function(){this._context.closePath()},lineTo:function(ae,Le){this._context.lineTo(Le,ae)},bezierCurveTo:function(ae,Le,$e,or,Dr,Nr){this._context.bezierCurveTo(Le,ae,or,$e,Nr,Dr)}};function Ht(ae){return new Ve(ae)}function te(ae){return new _r(ae)}function ne(ae){this._context=ae}ne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var ae=this._x,Le=this._y,$e=ae.length;if($e)if(this._line?this._context.lineTo(ae[0],Le[0]):this._context.moveTo(ae[0],Le[0]),$e===2)this._context.lineTo(ae[1],Le[1]);else for(var or=_e(ae),Dr=_e(Le),Nr=0,Fr=1;Fr<$e;++Nr,++Fr)this._context.bezierCurveTo(or[0][Nr],Dr[0][Nr],or[1][Nr],Dr[1][Nr],ae[Fr],Le[Fr]);(this._line||this._line!==0&&$e===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(ae,Le){this._x.push(+ae),this._y.push(+Le)}};function _e(ae){var Le,$e=ae.length-1,or,Dr=new Array($e),Nr=new Array($e),Fr=new Array($e);for(Dr[0]=0,Nr[0]=2,Fr[0]=ae[0]+2*ae[1],Le=1;Le<$e-1;++Le)Dr[Le]=1,Nr[Le]=4,Fr[Le]=4*ae[Le]+2*ae[Le+1];for(Dr[$e-1]=2,Nr[$e-1]=7,Fr[$e-1]=8*ae[$e-1]+ae[$e],Le=1;Le<$e;++Le)or=Dr[Le]/Nr[Le-1],Nr[Le]-=or,Fr[Le]-=or*Fr[Le-1];for(Dr[$e-1]=Fr[$e-1]/Nr[$e-1],Le=$e-2;Le>=0;--Le)Dr[Le]=(Fr[Le]-Dr[Le+1])/Nr[Le];for(Nr[$e-1]=(ae[$e]+Dr[$e-1])/2,Le=0;Le<$e-1;++Le)Nr[Le]=2*ae[Le+1]-Dr[Le+1];return[Dr,Nr]}function Pe(ae){return new ne(ae)}function Et(ae,Le){this._context=ae,this._t=Le}Et.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(ae,Le){switch(ae=+ae,Le=+Le,this._point){case 0:this._point=1,this._line?this._context.lineTo(ae,Le):this._context.moveTo(ae,Le);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,Le),this._context.lineTo(ae,Le);else{var $e=this._x*(1-this._t)+ae*this._t;this._context.lineTo($e,this._y),this._context.lineTo($e,Le)}break}}this._x=ae,this._y=Le}};function Mt(ae){return new Et(ae,.5)}function se(ae){return new Et(ae,0)}function ce(ae){return new Et(ae,1)}function de(ae,Le){if((Fr=ae.length)>1)for(var $e=1,or,Dr,Nr=ae[Le[0]],Fr,Ar=Nr.length;$e<Fr;++$e)for(Dr=Nr,Nr=ae[Le[$e]],or=0;or<Ar;++or)Nr[or][1]+=Nr[or][0]=isNaN(Dr[or][1])?Dr[or][0]:Dr[or][1]}function Se(ae){for(var Le=ae.length,$e=new Array(Le);--Le>=0;)$e[Le]=Le;return $e}function ye(ae,Le){return ae[Le]}function Ae(){var ae=m([]),Le=Se,$e=de,or=ye;function Dr(Nr){var Fr=ae.apply(this,arguments),Ar,Xr=Nr.length,Tn=Fr.length,un=new Array(Tn),Un;for(Ar=0;Ar<Tn;++Ar){for(var Dn=Fr[Ar],Xn=un[Ar]=new Array(Xr),Gn=0,yi;Gn<Xr;++Gn)Xn[Gn]=yi=[0,+or(Nr[Gn],Dn,Gn,Nr)],yi.data=Nr[Gn];Xn.key=Dn}for(Ar=0,Un=Le(un);Ar<Tn;++Ar)un[Un[Ar]].index=Ar;return $e(un,Un),un}return Dr.keys=function(Nr){return arguments.length?(ae=typeof Nr=="function"?Nr:m(J.call(Nr)),Dr):ae},Dr.value=function(Nr){return arguments.length?(or=typeof Nr=="function"?Nr:m(+Nr),Dr):or},Dr.order=function(Nr){return arguments.length?(Le=Nr==null?Se:typeof Nr=="function"?Nr:m(J.call(Nr)),Dr):Le},Dr.offset=function(Nr){return arguments.length?($e=Nr==null?de:Nr,Dr):$e},Dr}function Ge(ae,Le){if((or=ae.length)>0){for(var $e,or,Dr=0,Nr=ae[0].length,Fr;Dr<Nr;++Dr){for(Fr=$e=0;$e<or;++$e)Fr+=ae[$e][Dr][1]||0;if(Fr)for($e=0;$e<or;++$e)ae[$e][Dr][1]/=Fr}de(ae,Le)}}function sr(ae,Le){if((Xr=ae.length)>0)for(var $e,or=0,Dr,Nr,Fr,Ar,Xr,Tn=ae[Le[0]].length;or<Tn;++or)for(Fr=Ar=0,$e=0;$e<Xr;++$e)(Nr=(Dr=ae[Le[$e]][or])[1]-Dr[0])>0?(Dr[0]=Fr,Dr[1]=Fr+=Nr):Nr<0?(Dr[1]=Ar,Dr[0]=Ar+=Nr):(Dr[0]=0,Dr[1]=Nr)}function Er(ae,Le){if((Dr=ae.length)>0){for(var $e=0,or=ae[Le[0]],Dr,Nr=or.length;$e<Nr;++$e){for(var Fr=0,Ar=0;Fr<Dr;++Fr)Ar+=ae[Fr][$e][1]||0;or[$e][1]+=or[$e][0]=-Ar/2}de(ae,Le)}}function kr(ae,Le){if(!(!((Fr=ae.length)>0)||!((Nr=(Dr=ae[Le[0]]).length)>0))){for(var $e=0,or=1,Dr,Nr,Fr;or<Nr;++or){for(var Ar=0,Xr=0,Tn=0;Ar<Fr;++Ar){for(var un=ae[Le[Ar]],Un=un[or][1]||0,Dn=un[or-1][1]||0,Xn=(Un-Dn)/2,Gn=0;Gn<Ar;++Gn){var yi=ae[Le[Gn]],Pi=yi[or][1]||0,pa=yi[or-1][1]||0;Xn+=Pi-pa}Xr+=Un,Tn+=Xn*Un}Dr[or-1][1]+=Dr[or-1][0]=$e,Xr&&($e-=Tn/Xr)}Dr[or-1][1]+=Dr[or-1][0]=$e,de(ae,Le)}}function Mr(ae){var Le=ae.map(Gr);return Se(ae).sort(function($e,or){return Le[$e]-Le[or]})}function Gr(ae){for(var Le=-1,$e=0,or=ae.length,Dr,Nr=-1/0;++Le<or;)(Dr=+ae[Le][1])>Nr&&(Nr=Dr,$e=Le);return $e}function ar(ae){var Le=ae.map(xr);return Se(ae).sort(function($e,or){return Le[$e]-Le[or]})}function xr(ae){for(var Le=0,$e=-1,or=ae.length,Dr;++$e<or;)(Dr=+ae[$e][1])&&(Le+=Dr);return Le}function Ir(ae){return ar(ae).reverse()}function Hr(ae){var Le=ae.length,$e,or,Dr=ae.map(xr),Nr=Mr(ae),Fr=0,Ar=0,Xr=[],Tn=[];for($e=0;$e<Le;++$e)or=Nr[$e],Fr<Ar?(Fr+=Dr[or],Xr.push(or)):(Ar+=Dr[or],Tn.push(or));return Tn.reverse().concat(Xr)}function Cr(ae){return Se(ae).reverse()}f.arc=w,f.area=R,f.areaRadial=Z,f.curveBasis=Ie,f.curveBasisClosed=Ye,f.curveBasisOpen=Ee,f.curveBundle=ee,f.curveCardinal=Vt,f.curveCardinalClosed=qt,f.curveCardinalOpen=me,f.curveCatmullRom=He,f.curveCatmullRomClosed=er,f.curveCatmullRomOpen=hr,f.curveLinear=D,f.curveLinearClosed=dn,f.curveMonotoneX=Ht,f.curveMonotoneY=te,f.curveNatural=Pe,f.curveStep=Mt,f.curveStepAfter=ce,f.curveStepBefore=se,f.line=L,f.lineRadial=tt,f.linkHorizontal=q,f.linkRadial=K,f.linkVertical=W,f.pie=I,f.pointRadial=X,f.radialArea=Z,f.radialLine=tt,f.stack=Ae,f.stackOffsetDiverging=sr,f.stackOffsetExpand=Ge,f.stackOffsetNone=de,f.stackOffsetSilhouette=Er,f.stackOffsetWiggle=kr,f.stackOrderAppearance=Mr,f.stackOrderAscending=ar,f.stackOrderDescending=Ir,f.stackOrderInsideOut=Hr,f.stackOrderNone=Se,f.stackOrderReverse=Cr,f.symbol=Yt,f.symbolCircle=nt,f.symbolCross=it,f.symbolDiamond=bt,f.symbolSquare=zt,f.symbolStar=kt,f.symbolTriangle=Gt,f.symbolWye=Nt,f.symbols=Pt,Object.defineProperty(f,"__esModule",{value:!0})})},{"d3-path":117}],120:[function(e,B,V){(function(f,l){typeof V=="object"&&typeof B<"u"?l(V,e("d3-time")):(f=f||self,l(f.d3=f.d3||{},f.d3))})(this,function(f,l){function m(Wt){if(0<=Wt.y&&Wt.y<100){var ee=new Date(-1,Wt.m,Wt.d,Wt.H,Wt.M,Wt.S,Wt.L);return ee.setFullYear(Wt.y),ee}return new Date(Wt.y,Wt.m,Wt.d,Wt.H,Wt.M,Wt.S,Wt.L)}function x(Wt){if(0<=Wt.y&&Wt.y<100){var ee=new Date(Date.UTC(-1,Wt.m,Wt.d,Wt.H,Wt.M,Wt.S,Wt.L));return ee.setUTCFullYear(Wt.y),ee}return new Date(Date.UTC(Wt.y,Wt.m,Wt.d,Wt.H,Wt.M,Wt.S,Wt.L))}function t(Wt,ee,Xt){return{y:Wt,m:ee,d:Xt,H:0,M:0,S:0,L:0}}function a(Wt){var ee=Wt.dateTime,Xt=Wt.date,St=Wt.time,Vt=Wt.periods,Zt=Wt.days,qt=Wt.shortDays,Te=Wt.months,me=Wt.shortMonths,Ne=y(Vt),Ke=g(Vt),He=y(Zt),Xe=g(Zt),er=y(qt),We=g(qt),hr=y(Te),Wr=g(Te),dn=y(me),Qr=g(me),le={a:ce,A:de,b:Se,B:ye,c:null,d:O,e:O,f:X,H:G,I:$,j:tt,L:Z,m:J,M:st,p:Ae,q:Ge,Q:Yt,s:ve,S:at,u:lt,U:F,V:H,w:et,W:q,x:null,X:null,y:W,Y:K,Z:nt,"%":Pt},Qe={a:sr,A:Er,b:kr,B:Mr,c:null,d:it,e:it,f:pt,H:ot,I:ct,j:bt,L:ut,m:yt,M:Tt,p:Gr,q:ar,Q:Yt,s:ve,S:kt,u:zt,U:Rt,V:Gt,w:wt,W:It,x:null,X:null,y:$t,Y:Qt,Z:Nt,"%":Pt},Ze={a:te,A:ne,b:_e,B:Pe,c:Et,d:h,e:h,f:z,H:S,I:S,j:D,L:R,m:w,M,p:Ht,q:p,Q:I,s:U,S:L,u:v,U:_,V:u,w:b,W:T,x:Mt,X:se,y:A,Y:c,Z:k,"%":P};le.x=Ve(Xt,le),le.X=Ve(St,le),le.c=Ve(ee,le),Qe.x=Ve(Xt,Qe),Qe.X=Ve(St,Qe),Qe.c=Ve(ee,Qe);function Ve(xr,Ir){return function(Hr){var Cr=[],ae=-1,Le=0,$e=xr.length,or,Dr,Nr;for(Hr instanceof Date||(Hr=new Date(+Hr));++ae<$e;)xr.charCodeAt(ae)===37&&(Cr.push(xr.slice(Le,ae)),(Dr=i[or=xr.charAt(++ae)])!=null?or=xr.charAt(++ae):Dr=or==="e"?" ":"0",(Nr=Ir[or])&&(or=Nr(Hr,Dr)),Cr.push(or),Le=ae+1);return Cr.push(xr.slice(Le,ae)),Cr.join("")}}function _r(xr,Ir){return function(Hr){var Cr=t(1900,void 0,1),ae=oe(Cr,xr,Hr+="",0),Le,$e;if(ae!=Hr.length)return null;if("Q"in Cr)return new Date(Cr.Q);if("s"in Cr)return new Date(Cr.s*1e3+("L"in Cr?Cr.L:0));if(Ir&&!("Z"in Cr)&&(Cr.Z=0),"p"in Cr&&(Cr.H=Cr.H%12+Cr.p*12),Cr.m===void 0&&(Cr.m="q"in Cr?Cr.q:0),"V"in Cr){if(Cr.V<1||Cr.V>53)return null;"w"in Cr||(Cr.w=1),"Z"in Cr?(Le=x(t(Cr.y,0,1)),$e=Le.getUTCDay(),Le=$e>4||$e===0?l.utcMonday.ceil(Le):l.utcMonday(Le),Le=l.utcDay.offset(Le,(Cr.V-1)*7),Cr.y=Le.getUTCFullYear(),Cr.m=Le.getUTCMonth(),Cr.d=Le.getUTCDate()+(Cr.w+6)%7):(Le=m(t(Cr.y,0,1)),$e=Le.getDay(),Le=$e>4||$e===0?l.timeMonday.ceil(Le):l.timeMonday(Le),Le=l.timeDay.offset(Le,(Cr.V-1)*7),Cr.y=Le.getFullYear(),Cr.m=Le.getMonth(),Cr.d=Le.getDate()+(Cr.w+6)%7)}else("W"in Cr||"U"in Cr)&&("w"in Cr||(Cr.w="u"in Cr?Cr.u%7:"W"in Cr?1:0),$e="Z"in Cr?x(t(Cr.y,0,1)).getUTCDay():m(t(Cr.y,0,1)).getDay(),Cr.m=0,Cr.d="W"in Cr?(Cr.w+6)%7+Cr.W*7-($e+5)%7:Cr.w+Cr.U*7-($e+6)%7);return"Z"in Cr?(Cr.H+=Cr.Z/100|0,Cr.M+=Cr.Z%100,x(Cr)):m(Cr)}}function oe(xr,Ir,Hr,Cr){for(var ae=0,Le=Ir.length,$e=Hr.length,or,Dr;ae<Le;){if(Cr>=$e)return-1;if(or=Ir.charCodeAt(ae++),or===37){if(or=Ir.charAt(ae++),Dr=Ze[or in i?Ir.charAt(ae++):or],!Dr||(Cr=Dr(xr,Hr,Cr))<0)return-1}else if(or!=Hr.charCodeAt(Cr++))return-1}return Cr}function Ht(xr,Ir,Hr){var Cr=Ne.exec(Ir.slice(Hr));return Cr?(xr.p=Ke[Cr[0].toLowerCase()],Hr+Cr[0].length):-1}function te(xr,Ir,Hr){var Cr=er.exec(Ir.slice(Hr));return Cr?(xr.w=We[Cr[0].toLowerCase()],Hr+Cr[0].length):-1}function ne(xr,Ir,Hr){var Cr=He.exec(Ir.slice(Hr));return Cr?(xr.w=Xe[Cr[0].toLowerCase()],Hr+Cr[0].length):-1}function _e(xr,Ir,Hr){var Cr=dn.exec(Ir.slice(Hr));return Cr?(xr.m=Qr[Cr[0].toLowerCase()],Hr+Cr[0].length):-1}function Pe(xr,Ir,Hr){var Cr=hr.exec(Ir.slice(Hr));return Cr?(xr.m=Wr[Cr[0].toLowerCase()],Hr+Cr[0].length):-1}function Et(xr,Ir,Hr){return oe(xr,ee,Ir,Hr)}function Mt(xr,Ir,Hr){return oe(xr,Xt,Ir,Hr)}function se(xr,Ir,Hr){return oe(xr,St,Ir,Hr)}function ce(xr){return qt[xr.getDay()]}function de(xr){return Zt[xr.getDay()]}function Se(xr){return me[xr.getMonth()]}function ye(xr){return Te[xr.getMonth()]}function Ae(xr){return Vt[+(xr.getHours()>=12)]}function Ge(xr){return 1+~~(xr.getMonth()/3)}function sr(xr){return qt[xr.getUTCDay()]}function Er(xr){return Zt[xr.getUTCDay()]}function kr(xr){return me[xr.getUTCMonth()]}function Mr(xr){return Te[xr.getUTCMonth()]}function Gr(xr){return Vt[+(xr.getUTCHours()>=12)]}function ar(xr){return 1+~~(xr.getUTCMonth()/3)}return{format:function(xr){var Ir=Ve(xr+="",le);return Ir.toString=function(){return xr},Ir},parse:function(xr){var Ir=_r(xr+="",!1);return Ir.toString=function(){return xr},Ir},utcFormat:function(xr){var Ir=Ve(xr+="",Qe);return Ir.toString=function(){return xr},Ir},utcParse:function(xr){var Ir=_r(xr+="",!0);return Ir.toString=function(){return xr},Ir}}}var i={"-":"",_:" ",0:"0"},r=/^\s*\d+/,n=/^%/,d=/[\\^$*+?|[\]().{}]/g;function s(Wt,ee,Xt){var St=Wt<0?"-":"",Vt=(St?-Wt:Wt)+"",Zt=Vt.length;return St+(Zt<Xt?new Array(Xt-Zt+1).join(ee)+Vt:Vt)}function o(Wt){return Wt.replace(d,"\\$&")}function y(Wt){return new RegExp("^(?:"+Wt.map(o).join("|")+")","i")}function g(Wt){for(var ee={},Xt=-1,St=Wt.length;++Xt<St;)ee[Wt[Xt].toLowerCase()]=Xt;return ee}function b(Wt,ee,Xt){var St=r.exec(ee.slice(Xt,Xt+1));return St?(Wt.w=+St[0],Xt+St[0].length):-1}function v(Wt,ee,Xt){var St=r.exec(ee.slice(Xt,Xt+1));return St?(Wt.u=+St[0],Xt+St[0].length):-1}function _(Wt,ee,Xt){var St=r.exec(ee.slice(Xt,Xt+2));return St?(Wt.U=+St[0],Xt+St[0].length):-1}function u(Wt,ee,Xt){var St=r.exec(ee.slice(Xt,Xt+2));return St?(Wt.V=+St[0],Xt+St[0].length):-1}function T(Wt,ee,Xt){var St=r.exec(ee.slice(Xt,Xt+2));return St?(Wt.W=+St[0],Xt+St[0].length):-1}function c(Wt,ee,Xt){var St=r.exec(ee.slice(Xt,Xt+4));return St?(Wt.y=+St[0],Xt+St[0].length):-1}function A(Wt,ee,Xt){var St=r.exec(ee.slice(Xt,Xt+2));return St?(Wt.y=+St[0]+(+St[0]>68?1900:2e3),Xt+St[0].length):-1}function k(Wt,ee,Xt){var St=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(ee.slice(Xt,Xt+6));return St?(Wt.Z=St[1]?0:-(St[2]+(St[3]||"00")),Xt+St[0].length):-1}function p(Wt,ee,Xt){var St=r.exec(ee.slice(Xt,Xt+1));return St?(Wt.q=St[0]*3-3,Xt+St[0].length):-1}function w(Wt,ee,Xt){var St=r.exec(ee.slice(Xt,Xt+2));return St?(Wt.m=St[0]-1,Xt+St[0].length):-1}function h(Wt,ee,Xt){var St=r.exec(ee.slice(Xt,Xt+2));return St?(Wt.d=+St[0],Xt+St[0].length):-1}function D(Wt,ee,Xt){var St=r.exec(ee.slice(Xt,Xt+3));return St?(Wt.m=0,Wt.d=+St[0],Xt+St[0].length):-1}function S(Wt,ee,Xt){var St=r.exec(ee.slice(Xt,Xt+2));return St?(Wt.H=+St[0],Xt+St[0].length):-1}function M(Wt,ee,Xt){var St=r.exec(ee.slice(Xt,Xt+2));return St?(Wt.M=+St[0],Xt+St[0].length):-1}function L(Wt,ee,Xt){var St=r.exec(ee.slice(Xt,Xt+2));return St?(Wt.S=+St[0],Xt+St[0].length):-1}function R(Wt,ee,Xt){var St=r.exec(ee.slice(Xt,Xt+3));return St?(Wt.L=+St[0],Xt+St[0].length):-1}function z(Wt,ee,Xt){var St=r.exec(ee.slice(Xt,Xt+6));return St?(Wt.L=Math.floor(St[0]/1e3),Xt+St[0].length):-1}function P(Wt,ee,Xt){var St=n.exec(ee.slice(Xt,Xt+1));return St?Xt+St[0].length:-1}function I(Wt,ee,Xt){var St=r.exec(ee.slice(Xt));return St?(Wt.Q=+St[0],Xt+St[0].length):-1}function U(Wt,ee,Xt){var St=r.exec(ee.slice(Xt));return St?(Wt.s=+St[0],Xt+St[0].length):-1}function O(Wt,ee){return s(Wt.getDate(),ee,2)}function G(Wt,ee){return s(Wt.getHours(),ee,2)}function $(Wt,ee){return s(Wt.getHours()%12||12,ee,2)}function tt(Wt,ee){return s(1+l.timeDay.count(l.timeYear(Wt),Wt),ee,3)}function Z(Wt,ee){return s(Wt.getMilliseconds(),ee,3)}function X(Wt,ee){return Z(Wt,ee)+"000"}function J(Wt,ee){return s(Wt.getMonth()+1,ee,2)}function st(Wt,ee){return s(Wt.getMinutes(),ee,2)}function at(Wt,ee){return s(Wt.getSeconds(),ee,2)}function lt(Wt){var ee=Wt.getDay();return ee===0?7:ee}function F(Wt,ee){return s(l.timeSunday.count(l.timeYear(Wt)-1,Wt),ee,2)}function H(Wt,ee){var Xt=Wt.getDay();return Wt=Xt>=4||Xt===0?l.timeThursday(Wt):l.timeThursday.ceil(Wt),s(l.timeThursday.count(l.timeYear(Wt),Wt)+(l.timeYear(Wt).getDay()===4),ee,2)}function et(Wt){return Wt.getDay()}function q(Wt,ee){return s(l.timeMonday.count(l.timeYear(Wt)-1,Wt),ee,2)}function W(Wt,ee){return s(Wt.getFullYear()%100,ee,2)}function K(Wt,ee){return s(Wt.getFullYear()%1e4,ee,4)}function nt(Wt){var ee=Wt.getTimezoneOffset();return(ee>0?"-":(ee*=-1,"+"))+s(ee/60|0,"0",2)+s(ee%60,"0",2)}function it(Wt,ee){return s(Wt.getUTCDate(),ee,2)}function ot(Wt,ee){return s(Wt.getUTCHours(),ee,2)}function ct(Wt,ee){return s(Wt.getUTCHours()%12||12,ee,2)}function bt(Wt,ee){return s(1+l.utcDay.count(l.utcYear(Wt),Wt),ee,3)}function ut(Wt,ee){return s(Wt.getUTCMilliseconds(),ee,3)}function pt(Wt,ee){return ut(Wt,ee)+"000"}function yt(Wt,ee){return s(Wt.getUTCMonth()+1,ee,2)}function Tt(Wt,ee){return s(Wt.getUTCMinutes(),ee,2)}function kt(Wt,ee){return s(Wt.getUTCSeconds(),ee,2)}function zt(Wt){var ee=Wt.getUTCDay();return ee===0?7:ee}function Rt(Wt,ee){return s(l.utcSunday.count(l.utcYear(Wt)-1,Wt),ee,2)}function Gt(Wt,ee){var Xt=Wt.getUTCDay();return Wt=Xt>=4||Xt===0?l.utcThursday(Wt):l.utcThursday.ceil(Wt),s(l.utcThursday.count(l.utcYear(Wt),Wt)+(l.utcYear(Wt).getUTCDay()===4),ee,2)}function wt(Wt){return Wt.getUTCDay()}function It(Wt,ee){return s(l.utcMonday.count(l.utcYear(Wt)-1,Wt),ee,2)}function $t(Wt,ee){return s(Wt.getUTCFullYear()%100,ee,2)}function Qt(Wt,ee){return s(Wt.getUTCFullYear()%1e4,ee,4)}function Nt(){return"+0000"}function Pt(){return"%"}function Yt(Wt){return+Wt}function ve(Wt){return Math.floor(+Wt/1e3)}var Re;ir({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function ir(Wt){return Re=a(Wt),f.timeFormat=Re.format,f.timeParse=Re.parse,f.utcFormat=Re.utcFormat,f.utcParse=Re.utcParse,Re}var Ie="%Y-%m-%dT%H:%M:%S.%LZ";function Be(Wt){return Wt.toISOString()}var Ye=Date.prototype.toISOString?Be:f.utcFormat(Ie);function ze(Wt){var ee=new Date(Wt);return isNaN(ee)?null:ee}var Ee=+new Date("2000-01-01T00:00:00.000Z")?ze:f.utcParse(Ie);f.isoFormat=Ye,f.isoParse=Ee,f.timeFormatDefaultLocale=ir,f.timeFormatLocale=a,Object.defineProperty(f,"__esModule",{value:!0})})},{"d3-time":121}],121:[function(e,B,V){(function(f,l){typeof V=="object"&&typeof B<"u"?l(V):(f=f||self,l(f.d3=f.d3||{}))})(this,function(f){var l=new Date,m=new Date;function x(wt,It,$t,Qt){function Nt(Pt){return wt(Pt=arguments.length===0?new Date:new Date(+Pt)),Pt}return Nt.floor=function(Pt){return wt(Pt=new Date(+Pt)),Pt},Nt.ceil=function(Pt){return wt(Pt=new Date(Pt-1)),It(Pt,1),wt(Pt),Pt},Nt.round=function(Pt){var Yt=Nt(Pt),ve=Nt.ceil(Pt);return Pt-Yt<ve-Pt?Yt:ve},Nt.offset=function(Pt,Yt){return It(Pt=new Date(+Pt),Yt==null?1:Math.floor(Yt)),Pt},Nt.range=function(Pt,Yt,ve){var Re=[],ir;if(Pt=Nt.ceil(Pt),ve=ve==null?1:Math.floor(ve),!(Pt<Yt)||!(ve>0))return Re;do Re.push(ir=new Date(+Pt)),It(Pt,ve),wt(Pt);while(ir<Pt&&Pt<Yt);return Re},Nt.filter=function(Pt){return x(function(Yt){if(Yt>=Yt)for(;wt(Yt),!Pt(Yt);)Yt.setTime(Yt-1)},function(Yt,ve){if(Yt>=Yt)if(ve<0)for(;++ve<=0;)for(;It(Yt,-1),!Pt(Yt););else for(;--ve>=0;)for(;It(Yt,1),!Pt(Yt););})},$t&&(Nt.count=function(Pt,Yt){return l.setTime(+Pt),m.setTime(+Yt),wt(l),wt(m),Math.floor($t(l,m))},Nt.every=function(Pt){return Pt=Math.floor(Pt),!isFinite(Pt)||!(Pt>0)?null:Pt>1?Nt.filter(Qt?function(Yt){return Qt(Yt)%Pt===0}:function(Yt){return Nt.count(0,Yt)%Pt===0}):Nt}),Nt}var t=x(function(){},function(wt,It){wt.setTime(+wt+It)},function(wt,It){return It-wt});t.every=function(wt){return wt=Math.floor(wt),!isFinite(wt)||!(wt>0)?null:wt>1?x(function(It){It.setTime(Math.floor(It/wt)*wt)},function(It,$t){It.setTime(+It+$t*wt)},function(It,$t){return($t-It)/wt}):t};var a=t.range,i=1e3,r=6e4,n=36e5,d=864e5,s=6048e5,o=x(function(wt){wt.setTime(wt-wt.getMilliseconds())},function(wt,It){wt.setTime(+wt+It*i)},function(wt,It){return(It-wt)/i},function(wt){return wt.getUTCSeconds()}),y=o.range,g=x(function(wt){wt.setTime(wt-wt.getMilliseconds()-wt.getSeconds()*i)},function(wt,It){wt.setTime(+wt+It*r)},function(wt,It){return(It-wt)/r},function(wt){return wt.getMinutes()}),b=g.range,v=x(function(wt){wt.setTime(wt-wt.getMilliseconds()-wt.getSeconds()*i-wt.getMinutes()*r)},function(wt,It){wt.setTime(+wt+It*n)},function(wt,It){return(It-wt)/n},function(wt){return wt.getHours()}),_=v.range,u=x(function(wt){wt.setHours(0,0,0,0)},function(wt,It){wt.setDate(wt.getDate()+It)},function(wt,It){return(It-wt-(It.getTimezoneOffset()-wt.getTimezoneOffset())*r)/d},function(wt){return wt.getDate()-1}),T=u.range;function c(wt){return x(function(It){It.setDate(It.getDate()-(It.getDay()+7-wt)%7),It.setHours(0,0,0,0)},function(It,$t){It.setDate(It.getDate()+$t*7)},function(It,$t){return($t-It-($t.getTimezoneOffset()-It.getTimezoneOffset())*r)/s})}var A=c(0),k=c(1),p=c(2),w=c(3),h=c(4),D=c(5),S=c(6),M=A.range,L=k.range,R=p.range,z=w.range,P=h.range,I=D.range,U=S.range,O=x(function(wt){wt.setDate(1),wt.setHours(0,0,0,0)},function(wt,It){wt.setMonth(wt.getMonth()+It)},function(wt,It){return It.getMonth()-wt.getMonth()+(It.getFullYear()-wt.getFullYear())*12},function(wt){return wt.getMonth()}),G=O.range,$=x(function(wt){wt.setMonth(0,1),wt.setHours(0,0,0,0)},function(wt,It){wt.setFullYear(wt.getFullYear()+It)},function(wt,It){return It.getFullYear()-wt.getFullYear()},function(wt){return wt.getFullYear()});$.every=function(wt){return!isFinite(wt=Math.floor(wt))||!(wt>0)?null:x(function(It){It.setFullYear(Math.floor(It.getFullYear()/wt)*wt),It.setMonth(0,1),It.setHours(0,0,0,0)},function(It,$t){It.setFullYear(It.getFullYear()+$t*wt)})};var tt=$.range,Z=x(function(wt){wt.setUTCSeconds(0,0)},function(wt,It){wt.setTime(+wt+It*r)},function(wt,It){return(It-wt)/r},function(wt){return wt.getUTCMinutes()}),X=Z.range,J=x(function(wt){wt.setUTCMinutes(0,0,0)},function(wt,It){wt.setTime(+wt+It*n)},function(wt,It){return(It-wt)/n},function(wt){return wt.getUTCHours()}),st=J.range,at=x(function(wt){wt.setUTCHours(0,0,0,0)},function(wt,It){wt.setUTCDate(wt.getUTCDate()+It)},function(wt,It){return(It-wt)/d},function(wt){return wt.getUTCDate()-1}),lt=at.range;function F(wt){return x(function(It){It.setUTCDate(It.getUTCDate()-(It.getUTCDay()+7-wt)%7),It.setUTCHours(0,0,0,0)},function(It,$t){It.setUTCDate(It.getUTCDate()+$t*7)},function(It,$t){return($t-It)/s})}var H=F(0),et=F(1),q=F(2),W=F(3),K=F(4),nt=F(5),it=F(6),ot=H.range,ct=et.range,bt=q.range,ut=W.range,pt=K.range,yt=nt.range,Tt=it.range,kt=x(function(wt){wt.setUTCDate(1),wt.setUTCHours(0,0,0,0)},function(wt,It){wt.setUTCMonth(wt.getUTCMonth()+It)},function(wt,It){return It.getUTCMonth()-wt.getUTCMonth()+(It.getUTCFullYear()-wt.getUTCFullYear())*12},function(wt){return wt.getUTCMonth()}),zt=kt.range,Rt=x(function(wt){wt.setUTCMonth(0,1),wt.setUTCHours(0,0,0,0)},function(wt,It){wt.setUTCFullYear(wt.getUTCFullYear()+It)},function(wt,It){return It.getUTCFullYear()-wt.getUTCFullYear()},function(wt){return wt.getUTCFullYear()});Rt.every=function(wt){return!isFinite(wt=Math.floor(wt))||!(wt>0)?null:x(function(It){It.setUTCFullYear(Math.floor(It.getUTCFullYear()/wt)*wt),It.setUTCMonth(0,1),It.setUTCHours(0,0,0,0)},function(It,$t){It.setUTCFullYear(It.getUTCFullYear()+$t*wt)})};var Gt=Rt.range;f.timeDay=u,f.timeDays=T,f.timeFriday=D,f.timeFridays=I,f.timeHour=v,f.timeHours=_,f.timeInterval=x,f.timeMillisecond=t,f.timeMilliseconds=a,f.timeMinute=g,f.timeMinutes=b,f.timeMonday=k,f.timeMondays=L,f.timeMonth=O,f.timeMonths=G,f.timeSaturday=S,f.timeSaturdays=U,f.timeSecond=o,f.timeSeconds=y,f.timeSunday=A,f.timeSundays=M,f.timeThursday=h,f.timeThursdays=P,f.timeTuesday=p,f.timeTuesdays=R,f.timeWednesday=w,f.timeWednesdays=z,f.timeWeek=A,f.timeWeeks=M,f.timeYear=$,f.timeYears=tt,f.utcDay=at,f.utcDays=lt,f.utcFriday=nt,f.utcFridays=yt,f.utcHour=J,f.utcHours=st,f.utcMillisecond=t,f.utcMilliseconds=a,f.utcMinute=Z,f.utcMinutes=X,f.utcMonday=et,f.utcMondays=ct,f.utcMonth=kt,f.utcMonths=zt,f.utcSaturday=it,f.utcSaturdays=Tt,f.utcSecond=o,f.utcSeconds=y,f.utcSunday=H,f.utcSundays=ot,f.utcThursday=K,f.utcThursdays=pt,f.utcTuesday=q,f.utcTuesdays=bt,f.utcWednesday=W,f.utcWednesdays=ut,f.utcWeek=H,f.utcWeeks=ot,f.utcYear=Rt,f.utcYears=Gt,Object.defineProperty(f,"__esModule",{value:!0})})},{}],122:[function(e,B,V){arguments[4][121][0].apply(V,arguments)},{dup:121}],123:[function(e,B,V){(function(f,l){typeof V=="object"&&typeof B<"u"?l(V):(f=f||self,l(f.d3=f.d3||{}))})(this,function(f){var l=0,m=0,x=0,t=1e3,a,i,r=0,n=0,d=0,s=typeof performance=="object"&&performance.now?performance:Date,o=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(w){setTimeout(w,17)};function y(){return n||(o(g),n=s.now()+d)}function g(){n=0}function b(){this._call=this._time=this._next=null}b.prototype=v.prototype={constructor:b,restart:function(w,h,D){if(typeof w!="function")throw new TypeError("callback is not a function");D=(D==null?y():+D)+(h==null?0:+h),!this._next&&i!==this&&(i?i._next=this:a=this,i=this),this._call=w,this._time=D,A()},stop:function(){this._call&&(this._call=null,this._time=1/0,A())}};function v(w,h,D){var S=new b;return S.restart(w,h,D),S}function _(){y(),++l;for(var w=a,h;w;)(h=n-w._time)>=0&&w._call.call(null,h),w=w._next;--l}function u(){n=(r=s.now())+d,l=m=0;try{_()}finally{l=0,c(),n=0}}function T(){var w=s.now(),h=w-r;h>t&&(d-=h,r=w)}function c(){for(var w,h=a,D,S=1/0;h;)h._call?(S>h._time&&(S=h._time),w=h,h=h._next):(D=h._next,h._next=null,h=w?w._next=D:a=D);i=w,A(S)}function A(w){if(!l){m&&(m=clearTimeout(m));var h=w-n;h>24?(w<1/0&&(m=setTimeout(u,w-s.now()-d)),x&&(x=clearInterval(x))):(x||(r=s.now(),x=setInterval(T,t)),l=1,o(u))}}function k(w,h,D){var S=new b;return h=h==null?0:+h,S.restart(function(M){S.stop(),w(M+h)},h,D),S}function p(w,h,D){var S=new b,M=h;return h==null?(S.restart(w,h,D),S):(h=+h,D=D==null?y():+D,S.restart(function L(R){R+=M,S.restart(L,M+=h,D),w(R)},h,D),S)}f.interval=p,f.now=y,f.timeout=k,f.timer=v,f.timerFlush=_,Object.defineProperty(f,"__esModule",{value:!0})})},{}],124:[function(e,B,V){B.exports=function(){for(var f=0;f<arguments.length;f++)if(arguments[f]!==void 0)return arguments[f]}},{}],125:[function(e,B,V){B.exports=x;var f=x.canvas=document.createElement("canvas"),l=f.getContext("2d"),m=t([32,126]);x.createPairs=t,x.ascii=m;function x(a,i){Array.isArray(a)&&(a=a.join(", "));var r={},n,d=16,s=.05;i&&(i.length===2&&typeof i[0]=="number"?n=t(i):Array.isArray(i)?n=i:(i.o?n=t(i.o):i.pairs&&(n=i.pairs),i.fontSize&&(d=i.fontSize),i.threshold!=null&&(s=i.threshold))),n||(n=m),l.font=d+"px "+a;for(var o=0;o<n.length;o++){var y=n[o],g=l.measureText(y[0]).width+l.measureText(y[1]).width,b=l.measureText(y).width;if(Math.abs(g-b)>d*s){var v=(b-g)/d;r[y]=v*1e3}}return r}function t(a){for(var i=[],r=a[0];r<=a[1];r++)for(var n=String.fromCharCode(r),d=a[0];d<a[1];d++){var s=String.fromCharCode(d),o=n+s;i.push(o)}return i}},{}],126:[function(e,B,V){var f=e("abs-svg-path"),l=e("normalize-svg-path"),m={M:"moveTo",C:"bezierCurveTo"};B.exports=function(x,t){x.beginPath(),l(f(t)).forEach(function(a){var i=a[0],r=a.slice(1);x[m[i]].apply(x,r)}),x.closePath()}},{"abs-svg-path":70,"normalize-svg-path":246}],127:[function(e,B,V){B.exports=function(f){switch(f){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},{}],128:[function(e,B,V){function f(x,t,a){var i=x[a]|0;if(i<=0)return[];var r=new Array(i),n;if(a===x.length-1)for(n=0;n<i;++n)r[n]=t;else for(n=0;n<i;++n)r[n]=f(x,t,a+1);return r}function l(x,t){var a,i;for(a=new Array(x),i=0;i<x;++i)a[i]=t;return a}function m(x,t){switch(typeof t>"u"&&(t=0),typeof x){case"number":if(x>0)return l(x|0,t);break;case"object":if(typeof x.length=="number")return f(x,t,0);break}return[]}B.exports=m},{}],129:[function(e,B,V){B.exports=f,B.exports.default=f;function f(I,U,O){O=O||2;var G=U&&U.length,$=G?U[0]*O:I.length,tt=l(I,0,$,O,!0),Z=[];if(!tt||tt.next===tt.prev)return Z;var X,J,st,at,lt,F,H;if(G&&(tt=n(I,U,tt,O)),I.length>80*O){X=st=I[0],J=at=I[1];for(var et=O;et<$;et+=O)lt=I[et],F=I[et+1],lt<X&&(X=lt),F<J&&(J=F),lt>st&&(st=lt),F>at&&(at=F);H=Math.max(st-X,at-J),H=H!==0?1/H:0}return x(tt,Z,O,X,J,H),Z}function l(I,U,O,G,$){var tt,Z;if($===P(I,U,O,G)>0)for(tt=U;tt<O;tt+=G)Z=L(tt,I[tt],I[tt+1],Z);else for(tt=O-G;tt>=U;tt-=G)Z=L(tt,I[tt],I[tt+1],Z);return Z&&A(Z,Z.next)&&(R(Z),Z=Z.next),Z}function m(I,U){if(!I)return I;U||(U=I);var O=I,G;do if(G=!1,!O.steiner&&(A(O,O.next)||c(O.prev,O,O.next)===0)){if(R(O),O=U=O.prev,O===O.next)break;G=!0}else O=O.next;while(G||O!==U);return U}function x(I,U,O,G,$,tt,Z){if(!!I){!Z&&tt&&g(I,G,$,tt);for(var X=I,J,st;I.prev!==I.next;){if(J=I.prev,st=I.next,tt?a(I,G,$,tt):t(I)){U.push(J.i/O),U.push(I.i/O),U.push(st.i/O),R(I),I=st.next,X=st.next;continue}if(I=st,I===X){Z?Z===1?(I=i(m(I),U,O),x(I,U,O,G,$,tt,2)):Z===2&&r(I,U,O,G,$,tt):x(m(I),U,O,G,$,tt,1);break}}}}function t(I){var U=I.prev,O=I,G=I.next;if(c(U,O,G)>=0)return!1;for(var $=I.next.next;$!==I.prev;){if(u(U.x,U.y,O.x,O.y,G.x,G.y,$.x,$.y)&&c($.prev,$,$.next)>=0)return!1;$=$.next}return!0}function a(I,U,O,G){var $=I.prev,tt=I,Z=I.next;if(c($,tt,Z)>=0)return!1;for(var X=$.x<tt.x?$.x<Z.x?$.x:Z.x:tt.x<Z.x?tt.x:Z.x,J=$.y<tt.y?$.y<Z.y?$.y:Z.y:tt.y<Z.y?tt.y:Z.y,st=$.x>tt.x?$.x>Z.x?$.x:Z.x:tt.x>Z.x?tt.x:Z.x,at=$.y>tt.y?$.y>Z.y?$.y:Z.y:tt.y>Z.y?tt.y:Z.y,lt=v(X,J,U,O,G),F=v(st,at,U,O,G),H=I.prevZ,et=I.nextZ;H&&H.z>=lt&&et&&et.z<=F;){if(H!==I.prev&&H!==I.next&&u($.x,$.y,tt.x,tt.y,Z.x,Z.y,H.x,H.y)&&c(H.prev,H,H.next)>=0||(H=H.prevZ,et!==I.prev&&et!==I.next&&u($.x,$.y,tt.x,tt.y,Z.x,Z.y,et.x,et.y)&&c(et.prev,et,et.next)>=0))return!1;et=et.nextZ}for(;H&&H.z>=lt;){if(H!==I.prev&&H!==I.next&&u($.x,$.y,tt.x,tt.y,Z.x,Z.y,H.x,H.y)&&c(H.prev,H,H.next)>=0)return!1;H=H.prevZ}for(;et&&et.z<=F;){if(et!==I.prev&&et!==I.next&&u($.x,$.y,tt.x,tt.y,Z.x,Z.y,et.x,et.y)&&c(et.prev,et,et.next)>=0)return!1;et=et.nextZ}return!0}function i(I,U,O){var G=I;do{var $=G.prev,tt=G.next.next;!A($,tt)&&k($,G,G.next,tt)&&D($,tt)&&D(tt,$)&&(U.push($.i/O),U.push(G.i/O),U.push(tt.i/O),R(G),R(G.next),G=I=tt),G=G.next}while(G!==I);return m(G)}function r(I,U,O,G,$,tt){var Z=I;do{for(var X=Z.next.next;X!==Z.prev;){if(Z.i!==X.i&&T(Z,X)){var J=M(Z,X);Z=m(Z,Z.next),J=m(J,J.next),x(Z,U,O,G,$,tt),x(J,U,O,G,$,tt);return}X=X.next}Z=Z.next}while(Z!==I)}function n(I,U,O,G){var $=[],tt,Z,X,J,st;for(tt=0,Z=U.length;tt<Z;tt++)X=U[tt]*G,J=tt<Z-1?U[tt+1]*G:I.length,st=l(I,X,J,G,!1),st===st.next&&(st.steiner=!0),$.push(_(st));for($.sort(d),tt=0;tt<$.length;tt++)s($[tt],O),O=m(O,O.next);return O}function d(I,U){return I.x-U.x}function s(I,U){if(U=o(I,U),U){var O=M(U,I);m(U,U.next),m(O,O.next)}}function o(I,U){var O=U,G=I.x,$=I.y,tt=-1/0,Z;do{if($<=O.y&&$>=O.next.y&&O.next.y!==O.y){var X=O.x+($-O.y)*(O.next.x-O.x)/(O.next.y-O.y);if(X<=G&&X>tt){if(tt=X,X===G){if($===O.y)return O;if($===O.next.y)return O.next}Z=O.x<O.next.x?O:O.next}}O=O.next}while(O!==U);if(!Z)return null;if(G===tt)return Z;var J=Z,st=Z.x,at=Z.y,lt=1/0,F;O=Z;do G>=O.x&&O.x>=st&&G!==O.x&&u($<at?G:tt,$,st,at,$<at?tt:G,$,O.x,O.y)&&(F=Math.abs($-O.y)/(G-O.x),D(O,I)&&(F<lt||F===lt&&(O.x>Z.x||O.x===Z.x&&y(Z,O)))&&(Z=O,lt=F)),O=O.next;while(O!==J);return Z}function y(I,U){return c(I.prev,I,U.prev)<0&&c(U.next,I,I.next)<0}function g(I,U,O,G){var $=I;do $.z===null&&($.z=v($.x,$.y,U,O,G)),$.prevZ=$.prev,$.nextZ=$.next,$=$.next;while($!==I);$.prevZ.nextZ=null,$.prevZ=null,b($)}function b(I){var U,O,G,$,tt,Z,X,J,st=1;do{for(O=I,I=null,tt=null,Z=0;O;){for(Z++,G=O,X=0,U=0;U<st&&(X++,G=G.nextZ,!!G);U++);for(J=st;X>0||J>0&&G;)X!==0&&(J===0||!G||O.z<=G.z)?($=O,O=O.nextZ,X--):($=G,G=G.nextZ,J--),tt?tt.nextZ=$:I=$,$.prevZ=tt,tt=$;O=G}tt.nextZ=null,st*=2}while(Z>1);return I}function v(I,U,O,G,$){return I=32767*(I-O)*$,U=32767*(U-G)*$,I=(I|I<<8)&16711935,I=(I|I<<4)&252645135,I=(I|I<<2)&858993459,I=(I|I<<1)&1431655765,U=(U|U<<8)&16711935,U=(U|U<<4)&252645135,U=(U|U<<2)&858993459,U=(U|U<<1)&1431655765,I|U<<1}function _(I){var U=I,O=I;do(U.x<O.x||U.x===O.x&&U.y<O.y)&&(O=U),U=U.next;while(U!==I);return O}function u(I,U,O,G,$,tt,Z,X){return($-Z)*(U-X)-(I-Z)*(tt-X)>=0&&(I-Z)*(G-X)-(O-Z)*(U-X)>=0&&(O-Z)*(tt-X)-($-Z)*(G-X)>=0}function T(I,U){return I.next.i!==U.i&&I.prev.i!==U.i&&!h(I,U)&&(D(I,U)&&D(U,I)&&S(I,U)&&(c(I.prev,I,U.prev)||c(I,U.prev,U))||A(I,U)&&c(I.prev,I,I.next)>0&&c(U.prev,U,U.next)>0)}function c(I,U,O){return(U.y-I.y)*(O.x-U.x)-(U.x-I.x)*(O.y-U.y)}function A(I,U){return I.x===U.x&&I.y===U.y}function k(I,U,O,G){var $=w(c(I,U,O)),tt=w(c(I,U,G)),Z=w(c(O,G,I)),X=w(c(O,G,U));return!!($!==tt&&Z!==X||$===0&&p(I,O,U)||tt===0&&p(I,G,U)||Z===0&&p(O,I,G)||X===0&&p(O,U,G))}function p(I,U,O){return U.x<=Math.max(I.x,O.x)&&U.x>=Math.min(I.x,O.x)&&U.y<=Math.max(I.y,O.y)&&U.y>=Math.min(I.y,O.y)}function w(I){return I>0?1:I<0?-1:0}function h(I,U){var O=I;do{if(O.i!==I.i&&O.next.i!==I.i&&O.i!==U.i&&O.next.i!==U.i&&k(O,O.next,I,U))return!0;O=O.next}while(O!==I);return!1}function D(I,U){return c(I.prev,I,I.next)<0?c(I,U,I.next)>=0&&c(I,I.prev,U)>=0:c(I,U,I.prev)<0||c(I,I.next,U)<0}function S(I,U){var O=I,G=!1,$=(I.x+U.x)/2,tt=(I.y+U.y)/2;do O.y>tt!=O.next.y>tt&&O.next.y!==O.y&&$<(O.next.x-O.x)*(tt-O.y)/(O.next.y-O.y)+O.x&&(G=!G),O=O.next;while(O!==I);return G}function M(I,U){var O=new z(I.i,I.x,I.y),G=new z(U.i,U.x,U.y),$=I.next,tt=U.prev;return I.next=U,U.prev=I,O.next=$,$.prev=O,G.next=O,O.prev=G,tt.next=G,G.prev=tt,G}function L(I,U,O,G){var $=new z(I,U,O);return G?($.next=G.next,$.prev=G,G.next.prev=$,G.next=$):($.prev=$,$.next=$),$}function R(I){I.next.prev=I.prev,I.prev.next=I.next,I.prevZ&&(I.prevZ.nextZ=I.nextZ),I.nextZ&&(I.nextZ.prevZ=I.prevZ)}function z(I,U,O){this.i=I,this.x=U,this.y=O,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}f.deviation=function(I,U,O,G){var $=U&&U.length,tt=$?U[0]*O:I.length,Z=Math.abs(P(I,0,tt,O));if($)for(var X=0,J=U.length;X<J;X++){var st=U[X]*O,at=X<J-1?U[X+1]*O:I.length;Z-=Math.abs(P(I,st,at,O))}var lt=0;for(X=0;X<G.length;X+=3){var F=G[X]*O,H=G[X+1]*O,et=G[X+2]*O;lt+=Math.abs((I[F]-I[et])*(I[H+1]-I[F+1])-(I[F]-I[H])*(I[et+1]-I[F+1]))}return Z===0&&lt===0?0:Math.abs((lt-Z)/Z)};function P(I,U,O,G){for(var $=0,tt=U,Z=O-G;tt<O;tt+=G)$+=(I[Z]-I[tt])*(I[tt+1]+I[Z+1]),Z=tt;return $}f.flatten=function(I){for(var U=I[0][0].length,O={vertices:[],holes:[],dimensions:U},G=0,$=0;$<I.length;$++){for(var tt=0;tt<I[$].length;tt++)for(var Z=0;Z<U;Z++)O.vertices.push(I[$][tt][Z]);$>0&&(G+=I[$-1].length,O.holes.push(G))}return O}},{}],130:[function(e,B,V){var f=e("strongly-connected-components");B.exports=function(m,x){var t=[],a=[],i=[],r={},n=[],d;function s(A){i[A]=!1,r.hasOwnProperty(A)&&Object.keys(r[A]).forEach(function(k){delete r[A][k],i[k]&&s(k)})}function o(A){var k=!1;a.push(A),i[A]=!0;var p,w;for(p=0;p<n[A].length;p++)w=n[A][p],w===d?(y(d,a),k=!0):i[w]||(k=o(w));if(k)s(A);else for(p=0;p<n[A].length;p++){w=n[A][p];var h=r[w];h||(h={},r[w]=h),h[w]=!0}return a.pop(),k}function y(A,k){var p=[].concat(k).concat(A);x?x(o):t.push(p)}function g(A){for(var k=0;k<m.length;k++)k<A&&(m[k]=[]),m[k]=m[k].filter(function(p){return p>=A})}function b(A){g(A);for(var k=m,p=f(k),w=p.components.filter(function(z){return z.length>1}),h=1/0,D,S=0;S<w.length;S++)for(var M=0;M<w[S].length;M++)w[S][M]<h&&(h=w[S][M],D=S);var L=w[D];if(!L)return!1;var R=m.map(function(z,P){return L.indexOf(P)===-1?[]:z.filter(function(I){return L.indexOf(I)!==-1})});return{leastVertex:h,adjList:R}}d=0;for(var v=m.length;d<v;){var _=b(d);if(d=_.leastVertex,n=_.adjList,n){for(var u=0;u<n.length;u++)for(var T=0;T<n[u].length;T++){var c=n[u][T];i[+c]=!1,r[c]={}}o(d),d=d+1}else d=v}if(!x)return t}},{"strongly-connected-components":307}],131:[function(e,B,V){var f=e("../../object/valid-value");B.exports=function(){return f(this).length=0,this}},{"../../object/valid-value":162}],132:[function(e,B,V){B.exports=e("./is-implemented")()?Array.from:e("./shim")},{"./is-implemented":133,"./shim":134}],133:[function(e,B,V){B.exports=function(){var f=Array.from,l,m;return typeof f!="function"?!1:(l=["raz","dwa"],m=f(l),Boolean(m&&m!==l&&m[1]==="dwa"))}},{}],134:[function(e,B,V){var f=e("es6-symbol").iterator,l=e("../../function/is-arguments"),m=e("../../function/is-function"),x=e("../../number/to-pos-integer"),t=e("../../object/valid-callable"),a=e("../../object/valid-value"),i=e("../../object/is-value"),r=e("../../string/is-string"),n=Array.isArray,d=Function.prototype.call,s={configurable:!0,enumerable:!0,writable:!0,value:null},o=Object.defineProperty;B.exports=function(y){var g=arguments[1],b=arguments[2],v,_,u,T,c,A,k,p,w,h;if(y=Object(a(y)),i(g)&&t(g),!this||this===Array||!m(this)){if(!g){if(l(y))return c=y.length,c!==1?Array.apply(null,y):(T=new Array(1),T[0]=y[0],T);if(n(y)){for(T=new Array(c=y.length),_=0;_<c;++_)T[_]=y[_];return T}}T=[]}else v=this;if(!n(y)){if((w=y[f])!==void 0){for(k=t(w).call(y),v&&(T=new v),p=k.next(),_=0;!p.done;)h=g?d.call(g,b,p.value,_):p.value,v?(s.value=h,o(T,_,s)):T[_]=h,p=k.next(),++_;c=_}else if(r(y)){for(c=y.length,v&&(T=new v),_=0,u=0;_<c;++_)h=y[_],_+1<c&&(A=h.charCodeAt(0),A>=55296&&A<=56319&&(h+=y[++_])),h=g?d.call(g,b,h,u):h,v?(s.value=h,o(T,u,s)):T[u]=h,++u;c=u}}if(c===void 0)for(c=x(y.length),v&&(T=new v(c)),_=0;_<c;++_)h=g?d.call(g,b,y[_],_):y[_],v?(s.value=h,o(T,_,s)):T[_]=h;return v&&(s.value=null,T.length=c),T}},{"../../function/is-arguments":135,"../../function/is-function":136,"../../number/to-pos-integer":142,"../../object/is-value":151,"../../object/valid-callable":160,"../../object/valid-value":162,"../../string/is-string":166,"es6-symbol":175}],135:[function(e,B,V){var f=Object.prototype.toString,l=f.call(function(){return arguments}());B.exports=function(m){return f.call(m)===l}},{}],136:[function(e,B,V){var f=Object.prototype.toString,l=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);B.exports=function(m){return typeof m=="function"&&l(f.call(m))}},{}],137:[function(e,B,V){B.exports=function(){}},{}],138:[function(e,B,V){B.exports=e("./is-implemented")()?Math.sign:e("./shim")},{"./is-implemented":139,"./shim":140}],139:[function(e,B,V){B.exports=function(){var f=Math.sign;return typeof f!="function"?!1:f(10)===1&&f(-20)===-1}},{}],140:[function(e,B,V){B.exports=function(f){return f=Number(f),isNaN(f)||f===0?f:f>0?1:-1}},{}],141:[function(e,B,V){var f=e("../math/sign"),l=Math.abs,m=Math.floor;B.exports=function(x){return isNaN(x)?0:(x=Number(x),x===0||!isFinite(x)?x:f(x)*m(l(x)))}},{"../math/sign":138}],142:[function(e,B,V){var f=e("./to-integer"),l=Math.max;B.exports=function(m){return l(0,f(m))}},{"./to-integer":141}],143:[function(e,B,V){var f=e("./valid-callable"),l=e("./valid-value"),m=Function.prototype.bind,x=Function.prototype.call,t=Object.keys,a=Object.prototype.propertyIsEnumerable;B.exports=function(i,r){return function(n,d){var s,o=arguments[2],y=arguments[3];return n=Object(l(n)),f(d),s=t(n),y&&s.sort(typeof y=="function"?m.call(y,n):void 0),typeof i!="function"&&(i=s[i]),x.call(i,s,function(g,b){return a.call(n,g)?x.call(d,o,n[g],g,n,b):r})}}},{"./valid-callable":160,"./valid-value":162}],144:[function(e,B,V){B.exports=e("./is-implemented")()?Object.assign:e("./shim")},{"./is-implemented":145,"./shim":146}],145:[function(e,B,V){B.exports=function(){var f=Object.assign,l;return typeof f!="function"?!1:(l={foo:"raz"},f(l,{bar:"dwa"},{trzy:"trzy"}),l.foo+l.bar+l.trzy==="razdwatrzy")}},{}],146:[function(e,B,V){var f=e("../keys"),l=e("../valid-value"),m=Math.max;B.exports=function(x,t){var a,i,r=m(arguments.length,2),n;for(x=Object(l(x)),n=function(d){try{x[d]=t[d]}catch(s){a||(a=s)}},i=1;i<r;++i)t=arguments[i],f(t).forEach(n);if(a!==void 0)throw a;return x}},{"../keys":152,"../valid-value":162}],147:[function(e,B,V){var f=e("../array/from"),l=e("./assign"),m=e("./valid-value");B.exports=function(x){var t=Object(m(x)),a=arguments[1],i=Object(arguments[2]);if(t!==x&&!a)return t;var r={};return a?f(a,function(n){(i.ensure||n in x)&&(r[n]=x[n])}):l(r,x),r}},{"../array/from":132,"./assign":144,"./valid-value":162}],148:[function(e,B,V){var f=Object.create,l;e("./set-prototype-of/is-implemented")()||(l=e("./set-prototype-of/shim")),B.exports=function(){var m,x,t;return!l||l.level!==1?f:(m={},x={},t={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(a){if(a==="__proto__"){x[a]={configurable:!0,enumerable:!1,writable:!0,value:void 0};return}x[a]=t}),Object.defineProperties(m,x),Object.defineProperty(l,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:m}),function(a,i){return f(a===null?m:a,i)})}()},{"./set-prototype-of/is-implemented":158,"./set-prototype-of/shim":159}],149:[function(e,B,V){B.exports=e("./_iterate")("forEach")},{"./_iterate":143}],150:[function(e,B,V){var f=e("./is-value"),l={function:!0,object:!0};B.exports=function(m){return f(m)&&l[typeof m]||!1}},{"./is-value":151}],151:[function(e,B,V){var f=e("../function/noop")();B.exports=function(l){return l!==f&&l!==null}},{"../function/noop":137}],152:[function(e,B,V){B.exports=e("./is-implemented")()?Object.keys:e("./shim")},{"./is-implemented":153,"./shim":154}],153:[function(e,B,V){B.exports=function(){try{return Object.keys("primitive"),!0}catch{return!1}}},{}],154:[function(e,B,V){var f=e("../is-value"),l=Object.keys;B.exports=function(m){return l(f(m)?Object(m):m)}},{"../is-value":151}],155:[function(e,B,V){var f=e("./valid-callable"),l=e("./for-each"),m=Function.prototype.call;B.exports=function(x,t){var a={},i=arguments[2];return f(t),l(x,function(r,n,d,s){a[n]=m.call(t,i,r,n,d,s)}),a}},{"./for-each":149,"./valid-callable":160}],156:[function(e,B,V){var f=e("./is-value"),l=Array.prototype.forEach,m=Object.create,x=function(t,a){var i;for(i in t)a[i]=t[i]};B.exports=function(t){var a=m(null);return l.call(arguments,function(i){!f(i)||x(Object(i),a)}),a}},{"./is-value":151}],157:[function(e,B,V){B.exports=e("./is-implemented")()?Object.setPrototypeOf:e("./shim")},{"./is-implemented":158,"./shim":159}],158:[function(e,B,V){var f=Object.create,l=Object.getPrototypeOf,m={};B.exports=function(){var x=Object.setPrototypeOf,t=arguments[0]||f;return typeof x!="function"?!1:l(x(t(null),m))===m}},{}],159:[function(e,B,V){var f=e("../is-object"),l=e("../valid-value"),m=Object.prototype.isPrototypeOf,x=Object.defineProperty,t={configurable:!0,enumerable:!1,writable:!0,value:void 0},a;a=function(i,r){if(l(i),r===null||f(r))return i;throw new TypeError("Prototype must be null or an object")},B.exports=function(i){var r,n;return i?(i.level===2?i.set?(n=i.set,r=function(d,s){return n.call(a(d,s),s),d}):r=function(d,s){return a(d,s).__proto__=s,d}:r=function d(s,o){var y;return a(s,o),y=m.call(d.nullPolyfill,s),y&&delete d.nullPolyfill.__proto__,o===null&&(o=d.nullPolyfill),s.__proto__=o,y&&x(d.nullPolyfill,"__proto__",t),s},Object.defineProperty(r,"level",{configurable:!1,enumerable:!1,writable:!1,value:i.level})):null}(function(){var i=Object.create(null),r={},n,d=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(d){try{n=d.set,n.call(i,r)}catch{}if(Object.getPrototypeOf(i)===r)return{set:n,level:2}}return i.__proto__=r,Object.getPrototypeOf(i)===r?{level:2}:(i={},i.__proto__=r,Object.getPrototypeOf(i)===r?{level:1}:!1)}()),e("../create")},{"../create":148,"../is-object":150,"../valid-value":162}],160:[function(e,B,V){B.exports=function(f){if(typeof f!="function")throw new TypeError(f+" is not a function");return f}},{}],161:[function(e,B,V){var f=e("./is-object");B.exports=function(l){if(!f(l))throw new TypeError(l+" is not an Object");return l}},{"./is-object":150}],162:[function(e,B,V){var f=e("./is-value");B.exports=function(l){if(!f(l))throw new TypeError("Cannot use null or undefined");return l}},{"./is-value":151}],163:[function(e,B,V){B.exports=e("./is-implemented")()?String.prototype.contains:e("./shim")},{"./is-implemented":164,"./shim":165}],164:[function(e,B,V){var f="razdwatrzy";B.exports=function(){return typeof f.contains!="function"?!1:f.contains("dwa")===!0&&f.contains("foo")===!1}},{}],165:[function(e,B,V){var f=String.prototype.indexOf;B.exports=function(l){return f.call(this,l,arguments[1])>-1}},{}],166:[function(e,B,V){var f=Object.prototype.toString,l=f.call("");B.exports=function(m){return typeof m=="string"||m&&typeof m=="object"&&(m instanceof String||f.call(m)===l)||!1}},{}],167:[function(e,B,V){var f=Object.create(null),l=Math.random;B.exports=function(){var m;do m=l().toString(36).slice(2);while(f[m]);return m}},{}],168:[function(e,B,V){var f=e("es5-ext/object/set-prototype-of"),l=e("es5-ext/string/#/contains"),m=e("d"),x=e("es6-symbol"),t=e("./"),a=Object.defineProperty,i;i=B.exports=function(r,n){if(!(this instanceof i))throw new TypeError("Constructor requires 'new'");t.call(this,r),n?l.call(n,"key+value")?n="key+value":l.call(n,"key")?n="key":n="value":n="value",a(this,"__kind__",m("",n))},f&&f(i,t),delete i.prototype.constructor,i.prototype=Object.create(t.prototype,{_resolve:m(function(r){return this.__kind__==="value"?this.__list__[r]:this.__kind__==="key+value"?[r,this.__list__[r]]:r})}),a(i.prototype,x.toStringTag,m("c","Array Iterator"))},{"./":171,d:106,"es5-ext/object/set-prototype-of":157,"es5-ext/string/#/contains":163,"es6-symbol":175}],169:[function(e,B,V){var f=e("es5-ext/function/is-arguments"),l=e("es5-ext/object/valid-callable"),m=e("es5-ext/string/is-string"),x=e("./get"),t=Array.isArray,a=Function.prototype.call,i=Array.prototype.some;B.exports=function(r,n){var d,s=arguments[2],o,y,g,b,v,_,u;if(t(r)||f(r)?d="array":m(r)?d="string":r=x(r),l(n),y=function(){g=!0},d==="array"){i.call(r,function(T){return a.call(n,s,T,y),g});return}if(d==="string"){for(v=r.length,b=0;b<v&&(_=r[b],b+1<v&&(u=_.charCodeAt(0),u>=55296&&u<=56319&&(_+=r[++b])),a.call(n,s,_,y),!g);++b);return}for(o=r.next();!o.done;){if(a.call(n,s,o.value,y),g)return;o=r.next()}}},{"./get":170,"es5-ext/function/is-arguments":135,"es5-ext/object/valid-callable":160,"es5-ext/string/is-string":166}],170:[function(e,B,V){var f=e("es5-ext/function/is-arguments"),l=e("es5-ext/string/is-string"),m=e("./array"),x=e("./string"),t=e("./valid-iterable"),a=e("es6-symbol").iterator;B.exports=function(i){return typeof t(i)[a]=="function"?i[a]():f(i)?new m(i):l(i)?new x(i):new m(i)}},{"./array":168,"./string":173,"./valid-iterable":174,"es5-ext/function/is-arguments":135,"es5-ext/string/is-string":166,"es6-symbol":175}],171:[function(e,B,V){var f=e("es5-ext/array/#/clear"),l=e("es5-ext/object/assign"),m=e("es5-ext/object/valid-callable"),x=e("es5-ext/object/valid-value"),t=e("d"),a=e("d/auto-bind"),i=e("es6-symbol"),r=Object.defineProperty,n=Object.defineProperties,d;B.exports=d=function(s,o){if(!(this instanceof d))throw new TypeError("Constructor requires 'new'");n(this,{__list__:t("w",x(s)),__context__:t("w",o),__nextIndex__:t("w",0)}),o&&(m(o.on),o.on("_add",this._onAdd),o.on("_delete",this._onDelete),o.on("_clear",this._onClear))},delete d.prototype.constructor,n(d.prototype,l({_next:t(function(){var s;if(!!this.__list__){if(this.__redo__&&(s=this.__redo__.shift(),s!==void 0))return s;if(this.__nextIndex__<this.__list__.length)return this.__nextIndex__++;this._unBind()}}),next:t(function(){return this._createResult(this._next())}),_createResult:t(function(s){return s===void 0?{done:!0,value:void 0}:{done:!1,value:this._resolve(s)}}),_resolve:t(function(s){return this.__list__[s]}),_unBind:t(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:t(function(){return"[object "+(this[i.toStringTag]||"Object")+"]"})},a({_onAdd:t(function(s){if(!(s>=this.__nextIndex__)){if(++this.__nextIndex__,!this.__redo__){r(this,"__redo__",t("c",[s]));return}this.__redo__.forEach(function(o,y){o>=s&&(this.__redo__[y]=++o)},this),this.__redo__.push(s)}}),_onDelete:t(function(s){var o;s>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(o=this.__redo__.indexOf(s),o!==-1&&this.__redo__.splice(o,1),this.__redo__.forEach(function(y,g){y>s&&(this.__redo__[g]=--y)},this)))}),_onClear:t(function(){this.__redo__&&f.call(this.__redo__),this.__nextIndex__=0})}))),r(d.prototype,i.iterator,t(function(){return this}))},{d:106,"d/auto-bind":105,"es5-ext/array/#/clear":131,"es5-ext/object/assign":144,"es5-ext/object/valid-callable":160,"es5-ext/object/valid-value":162,"es6-symbol":175}],172:[function(e,B,V){var f=e("es5-ext/function/is-arguments"),l=e("es5-ext/object/is-value"),m=e("es5-ext/string/is-string"),x=e("es6-symbol").iterator,t=Array.isArray;B.exports=function(a){return l(a)?t(a)||m(a)||f(a)?!0:typeof a[x]=="function":!1}},{"es5-ext/function/is-arguments":135,"es5-ext/object/is-value":151,"es5-ext/string/is-string":166,"es6-symbol":175}],173:[function(e,B,V){var f=e("es5-ext/object/set-prototype-of"),l=e("d"),m=e("es6-symbol"),x=e("./"),t=Object.defineProperty,a;a=B.exports=function(i){if(!(this instanceof a))throw new TypeError("Constructor requires 'new'");i=String(i),x.call(this,i),t(this,"__length__",l("",i.length))},f&&f(a,x),delete a.prototype.constructor,a.prototype=Object.create(x.prototype,{_next:l(function(){if(!!this.__list__){if(this.__nextIndex__<this.__length__)return this.__nextIndex__++;this._unBind()}}),_resolve:l(function(i){var r=this.__list__[i],n;return this.__nextIndex__===this.__length__?r:(n=r.charCodeAt(0),n>=55296&&n<=56319?r+this.__list__[this.__nextIndex__++]:r)})}),t(a.prototype,m.toStringTag,l("c","String Iterator"))},{"./":171,d:106,"es5-ext/object/set-prototype-of":157,"es6-symbol":175}],174:[function(e,B,V){var f=e("./is-iterable");B.exports=function(l){if(!f(l))throw new TypeError(l+" is not iterable");return l}},{"./is-iterable":172}],175:[function(e,B,V){B.exports=e("./is-implemented")()?e("ext/global-this").Symbol:e("./polyfill")},{"./is-implemented":176,"./polyfill":181,"ext/global-this":188}],176:[function(e,B,V){var f=e("ext/global-this"),l={object:!0,symbol:!0};B.exports=function(){var m=f.Symbol,x;if(typeof m!="function")return!1;x=m("test symbol");try{String(x)}catch{return!1}return!(!l[typeof m.iterator]||!l[typeof m.toPrimitive]||!l[typeof m.toStringTag])}},{"ext/global-this":188}],177:[function(e,B,V){B.exports=function(f){return f?typeof f=="symbol"?!0:!f.constructor||f.constructor.name!=="Symbol"?!1:f[f.constructor.toStringTag]==="Symbol":!1}},{}],178:[function(e,B,V){var f=e("d"),l=Object.create,m=Object.defineProperty,x=Object.prototype,t=l(null);B.exports=function(a){for(var i=0,r,n;t[a+(i||"")];)++i;return a+=i||"",t[a]=!0,r="@@"+a,m(x,r,f.gs(null,function(d){n||(n=!0,m(this,r,f(d)),n=!1)})),r}},{d:106}],179:[function(e,B,V){var f=e("d"),l=e("ext/global-this").Symbol;B.exports=function(m){return Object.defineProperties(m,{hasInstance:f("",l&&l.hasInstance||m("hasInstance")),isConcatSpreadable:f("",l&&l.isConcatSpreadable||m("isConcatSpreadable")),iterator:f("",l&&l.iterator||m("iterator")),match:f("",l&&l.match||m("match")),replace:f("",l&&l.replace||m("replace")),search:f("",l&&l.search||m("search")),species:f("",l&&l.species||m("species")),split:f("",l&&l.split||m("split")),toPrimitive:f("",l&&l.toPrimitive||m("toPrimitive")),toStringTag:f("",l&&l.toStringTag||m("toStringTag")),unscopables:f("",l&&l.unscopables||m("unscopables"))})}},{d:106,"ext/global-this":188}],180:[function(e,B,V){var f=e("d"),l=e("../../../validate-symbol"),m=Object.create(null);B.exports=function(x){return Object.defineProperties(x,{for:f(function(t){return m[t]?m[t]:m[t]=x(String(t))}),keyFor:f(function(t){var a;l(t);for(a in m)if(m[a]===t)return a})})}},{"../../../validate-symbol":182,d:106}],181:[function(e,B,V){var f=e("d"),l=e("./validate-symbol"),m=e("ext/global-this").Symbol,x=e("./lib/private/generate-name"),t=e("./lib/private/setup/standard-symbols"),a=e("./lib/private/setup/symbol-registry"),i=Object.create,r=Object.defineProperties,n=Object.defineProperty,d,s,o;if(typeof m=="function")try{String(m()),o=!0}catch{}else m=null;s=function(g){if(this instanceof s)throw new TypeError("Symbol is not a constructor");return d(g)},B.exports=d=function y(g){var b;if(this instanceof y)throw new TypeError("Symbol is not a constructor");return o?m(g):(b=i(s.prototype),g=g===void 0?"":String(g),r(b,{__description__:f("",g),__name__:f("",x(g))}))},t(d),a(d),r(s.prototype,{constructor:f(d),toString:f("",function(){return this.__name__})}),r(d.prototype,{toString:f(function(){return"Symbol ("+l(this).__description__+")"}),valueOf:f(function(){return l(this)})}),n(d.prototype,d.toPrimitive,f("",function(){var y=l(this);return typeof y=="symbol"?y:y.toString()})),n(d.prototype,d.toStringTag,f("c","Symbol")),n(s.prototype,d.toStringTag,f("c",d.prototype[d.toStringTag])),n(s.prototype,d.toPrimitive,f("c",d.prototype[d.toPrimitive]))},{"./lib/private/generate-name":178,"./lib/private/setup/standard-symbols":179,"./lib/private/setup/symbol-registry":180,"./validate-symbol":182,d:106,"ext/global-this":188}],182:[function(e,B,V){var f=e("./is-symbol");B.exports=function(l){if(!f(l))throw new TypeError(l+" is not a symbol");return l}},{"./is-symbol":177}],183:[function(e,B,V){B.exports=e("./is-implemented")()?WeakMap:e("./polyfill")},{"./is-implemented":184,"./polyfill":186}],184:[function(e,B,V){B.exports=function(){var f,l;if(typeof WeakMap!="function")return!1;try{f=new WeakMap([[l={},"one"],[{},"two"],[{},"three"]])}catch{return!1}return!(String(f)!=="[object WeakMap]"||typeof f.set!="function"||f.set({},1)!==f||typeof f.delete!="function"||typeof f.has!="function"||f.get(l)!=="one")}},{}],185:[function(e,B,V){B.exports=function(){return typeof WeakMap!="function"?!1:Object.prototype.toString.call(new WeakMap)==="[object WeakMap]"}()},{}],186:[function(e,B,V){var f=e("es5-ext/object/is-value"),l=e("es5-ext/object/set-prototype-of"),m=e("es5-ext/object/valid-object"),x=e("es5-ext/object/valid-value"),t=e("es5-ext/string/random-uniq"),a=e("d"),i=e("es6-iterator/get"),r=e("es6-iterator/for-of"),n=e("es6-symbol").toStringTag,d=e("./is-native-implemented"),s=Array.isArray,o=Object.defineProperty,y=Object.prototype.hasOwnProperty,g=Object.getPrototypeOf,b;B.exports=b=function(){var v=arguments[0],_;if(!(this instanceof b))throw new TypeError("Constructor requires 'new'");return _=d&&l&&WeakMap!==b?l(new WeakMap,g(this)):this,f(v)&&(s(v)||(v=i(v))),o(_,"__weakMapData__",a("c","$weakMap$"+t())),v&&r(v,function(u){x(u),_.set(u[0],u[1])}),_},d&&(l&&l(b,WeakMap),b.prototype=Object.create(WeakMap.prototype,{constructor:a(b)})),Object.defineProperties(b.prototype,{delete:a(function(v){return y.call(m(v),this.__weakMapData__)?(delete v[this.__weakMapData__],!0):!1}),get:a(function(v){if(!!y.call(m(v),this.__weakMapData__))return v[this.__weakMapData__]}),has:a(function(v){return y.call(m(v),this.__weakMapData__)}),set:a(function(v,_){return o(m(v),this.__weakMapData__,a("c",_)),this}),toString:a(function(){return"[object WeakMap]"})}),o(b.prototype,n,a("c","WeakMap"))},{"./is-native-implemented":185,d:106,"es5-ext/object/is-value":151,"es5-ext/object/set-prototype-of":157,"es5-ext/object/valid-object":161,"es5-ext/object/valid-value":162,"es5-ext/string/random-uniq":167,"es6-iterator/for-of":169,"es6-iterator/get":170,"es6-symbol":175}],187:[function(e,B,V){var f=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};B.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return f()}try{return __global__||f()}finally{delete Object.prototype.__global__}}()},{}],188:[function(e,B,V){B.exports=e("./is-implemented")()?globalThis:e("./implementation")},{"./implementation":187,"./is-implemented":189}],189:[function(e,B,V){B.exports=function(){return typeof globalThis!="object"||!globalThis?!1:globalThis.Array===Array}},{}],190:[function(e,B,V){var f=e("is-string-blank");B.exports=function(l){var m=typeof l;if(m==="string"){var x=l;if(l=+l,l===0&&f(x))return!1}else if(m!=="number")return!1;return l-l<1}},{"is-string-blank":237}],191:[function(e,B,V){var f=e("dtype");B.exports=l;function l(m,x,t){if(!m)throw new TypeError("must specify data as first parameter");if(t=+(t||0)|0,Array.isArray(m)&&m[0]&&typeof m[0][0]=="number"){var a=m[0].length,i=m.length*a,r,n,d,s;(!x||typeof x=="string")&&(x=new(f(x||"float32"))(i+t));var o=x.length-t;if(i!==o)throw new Error("source length "+i+" ("+a+"x"+m.length+") does not match destination length "+o);for(r=0,d=t;r<m.length;r++)for(n=0;n<a;n++)x[d++]=m[r][n]===null?NaN:m[r][n]}else if(!x||typeof x=="string"){var y=f(x||"float32");if(Array.isArray(m)||x==="array")for(x=new y(m.length+t),r=0,d=t,s=x.length;d<s;d++,r++)x[d]=m[r]===null?NaN:m[r];else t===0?x=new y(m):(x=new y(m.length+t),x.set(m,t))}else x.set(m,t);return x}},{dtype:127}],192:[function(e,B,V){var f=e("css-font/stringify"),l=[32,126];B.exports=m;function m(x){x=x||{};var t=x.shape?x.shape:x.canvas?[x.canvas.width,x.canvas.height]:[512,512],a=x.canvas||document.createElement("canvas"),i=x.font,r=typeof x.step=="number"?[x.step,x.step]:x.step||[32,32],n=x.chars||l;if(i&&typeof i!="string"&&(i=f(i)),!Array.isArray(n))n=String(n).split("");else if(n.length===2&&typeof n[0]=="number"&&typeof n[1]=="number"){for(var d=[],s=n[0],o=0;s<=n[1];s++)d[o++]=String.fromCharCode(s);n=d}t=t.slice(),a.width=t[0],a.height=t[1];var y=a.getContext("2d");y.fillStyle="#000",y.fillRect(0,0,a.width,a.height),y.font=i,y.textAlign="center",y.textBaseline="middle",y.fillStyle="#fff";for(var g=r[0]/2,b=r[1]/2,s=0;s<n.length;s++)y.fillText(n[s],g,b),(g+=r[0])>t[0]-r[0]/2&&(g=r[0]/2,b+=r[1]);return a}},{"css-font/stringify":102}],193:[function(e,B,V){B.exports=f,f.canvas=document.createElement("canvas"),f.cache={};function f(s,a){a||(a={}),(typeof s=="string"||Array.isArray(s))&&(a.family=s);var i=Array.isArray(a.family)?a.family.join(", "):a.family;if(!i)throw Error("`family` must be defined");var r=a.size||a.fontSize||a.em||48,n=a.weight||a.fontWeight||"",d=a.style||a.fontStyle||"",s=[d,n,r].join(" ")+"px "+i,o=a.origin||"top";if(f.cache[i]&&r<=f.cache[i].em)return l(f.cache[i],o);var y=a.canvas||f.canvas,g=y.getContext("2d"),b={upper:a.upper!==void 0?a.upper:"H",lower:a.lower!==void 0?a.lower:"x",descent:a.descent!==void 0?a.descent:"p",ascent:a.ascent!==void 0?a.ascent:"h",tittle:a.tittle!==void 0?a.tittle:"i",overshoot:a.overshoot!==void 0?a.overshoot:"O"},v=Math.ceil(r*1.5);y.height=v,y.width=v*.5,g.font=s;var _="H",u={top:0};g.clearRect(0,0,v,v),g.textBaseline="top",g.fillStyle="black",g.fillText(_,0,0);var T=m(g.getImageData(0,0,v,v));g.clearRect(0,0,v,v),g.textBaseline="bottom",g.fillText(_,0,v);var c=m(g.getImageData(0,0,v,v));u.lineHeight=u.bottom=v-c+T,g.clearRect(0,0,v,v),g.textBaseline="alphabetic",g.fillText(_,0,v);var A=m(g.getImageData(0,0,v,v)),k=v-A-1+T;u.baseline=u.alphabetic=k,g.clearRect(0,0,v,v),g.textBaseline="middle",g.fillText(_,0,v*.5);var p=m(g.getImageData(0,0,v,v));u.median=u.middle=v-p-1+T-v*.5,g.clearRect(0,0,v,v),g.textBaseline="hanging",g.fillText(_,0,v*.5);var w=m(g.getImageData(0,0,v,v));u.hanging=v-w-1+T-v*.5,g.clearRect(0,0,v,v),g.textBaseline="ideographic",g.fillText(_,0,v);var h=m(g.getImageData(0,0,v,v));if(u.ideographic=v-h-1+T,b.upper&&(g.clearRect(0,0,v,v),g.textBaseline="top",g.fillText(b.upper,0,0),u.upper=m(g.getImageData(0,0,v,v)),u.capHeight=u.baseline-u.upper),b.lower&&(g.clearRect(0,0,v,v),g.textBaseline="top",g.fillText(b.lower,0,0),u.lower=m(g.getImageData(0,0,v,v)),u.xHeight=u.baseline-u.lower),b.tittle&&(g.clearRect(0,0,v,v),g.textBaseline="top",g.fillText(b.tittle,0,0),u.tittle=m(g.getImageData(0,0,v,v))),b.ascent&&(g.clearRect(0,0,v,v),g.textBaseline="top",g.fillText(b.ascent,0,0),u.ascent=m(g.getImageData(0,0,v,v))),b.descent&&(g.clearRect(0,0,v,v),g.textBaseline="top",g.fillText(b.descent,0,0),u.descent=x(g.getImageData(0,0,v,v))),b.overshoot){g.clearRect(0,0,v,v),g.textBaseline="top",g.fillText(b.overshoot,0,0);var D=x(g.getImageData(0,0,v,v));u.overshoot=D-k}for(var S in u)u[S]/=r;return u.em=r,f.cache[i]=u,l(u,o)}function l(t,a){var i={};typeof a=="string"&&(a=t[a]);for(var r in t)r!=="em"&&(i[r]=t[r]-a);return i}function m(t){for(var a=t.height,i=t.data,r=3;r<i.length;r+=4)if(i[r]!==0)return Math.floor((r-3)*.25/a)}function x(t){for(var a=t.height,i=t.data,r=i.length-1;r>0;r-=4)if(i[r]!==0)return Math.floor((r-3)*.25/a)}},{}],194:[function(e,B,V){B.exports=f;function f(l,m){if(typeof l!="string")throw new TypeError("must specify type string");if(m=m||{},typeof document>"u"&&!m.canvas)return null;var x=m.canvas||document.createElement("canvas");typeof m.width=="number"&&(x.width=m.width),typeof m.height=="number"&&(x.height=m.height);var t=m,a;try{var i=[l];l.indexOf("webgl")===0&&i.push("experimental-"+l);for(var r=0;r<i.length;r++)if(a=x.getContext(i[r],t),a)return a}catch{a=null}return a||null}},{}],195:[function(e,B,V){B.exports=f;function f(l,m){var x=m[0],t=m[1],a=m[2],i=m[3],r=m[4],n=m[5],d=m[6],s=m[7],o=m[8],y=m[9],g=m[10],b=m[11],v=m[12],_=m[13],u=m[14],T=m[15];return l[0]=n*(g*T-b*u)-y*(d*T-s*u)+_*(d*b-s*g),l[1]=-(t*(g*T-b*u)-y*(a*T-i*u)+_*(a*b-i*g)),l[2]=t*(d*T-s*u)-n*(a*T-i*u)+_*(a*s-i*d),l[3]=-(t*(d*b-s*g)-n*(a*b-i*g)+y*(a*s-i*d)),l[4]=-(r*(g*T-b*u)-o*(d*T-s*u)+v*(d*b-s*g)),l[5]=x*(g*T-b*u)-o*(a*T-i*u)+v*(a*b-i*g),l[6]=-(x*(d*T-s*u)-r*(a*T-i*u)+v*(a*s-i*d)),l[7]=x*(d*b-s*g)-r*(a*b-i*g)+o*(a*s-i*d),l[8]=r*(y*T-b*_)-o*(n*T-s*_)+v*(n*b-s*y),l[9]=-(x*(y*T-b*_)-o*(t*T-i*_)+v*(t*b-i*y)),l[10]=x*(n*T-s*_)-r*(t*T-i*_)+v*(t*s-i*n),l[11]=-(x*(n*b-s*y)-r*(t*b-i*y)+o*(t*s-i*n)),l[12]=-(r*(y*u-g*_)-o*(n*u-d*_)+v*(n*g-d*y)),l[13]=x*(y*u-g*_)-o*(t*u-a*_)+v*(t*g-a*y),l[14]=-(x*(n*u-d*_)-r*(t*u-a*_)+v*(t*d-a*n)),l[15]=x*(n*g-d*y)-r*(t*g-a*y)+o*(t*d-a*n),l}},{}],196:[function(e,B,V){B.exports=f;function f(l){var m=new Float32Array(16);return m[0]=l[0],m[1]=l[1],m[2]=l[2],m[3]=l[3],m[4]=l[4],m[5]=l[5],m[6]=l[6],m[7]=l[7],m[8]=l[8],m[9]=l[9],m[10]=l[10],m[11]=l[11],m[12]=l[12],m[13]=l[13],m[14]=l[14],m[15]=l[15],m}},{}],197:[function(e,B,V){B.exports=f;function f(l,m){return l[0]=m[0],l[1]=m[1],l[2]=m[2],l[3]=m[3],l[4]=m[4],l[5]=m[5],l[6]=m[6],l[7]=m[7],l[8]=m[8],l[9]=m[9],l[10]=m[10],l[11]=m[11],l[12]=m[12],l[13]=m[13],l[14]=m[14],l[15]=m[15],l}},{}],198:[function(e,B,V){B.exports=f;function f(){var l=new Float32Array(16);return l[0]=1,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=1,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=1,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}},{}],199:[function(e,B,V){B.exports=f;function f(l){var m=l[0],x=l[1],t=l[2],a=l[3],i=l[4],r=l[5],n=l[6],d=l[7],s=l[8],o=l[9],y=l[10],g=l[11],b=l[12],v=l[13],_=l[14],u=l[15],T=m*r-x*i,c=m*n-t*i,A=m*d-a*i,k=x*n-t*r,p=x*d-a*r,w=t*d-a*n,h=s*v-o*b,D=s*_-y*b,S=s*u-g*b,M=o*_-y*v,L=o*u-g*v,R=y*u-g*_;return T*R-c*L+A*M+k*S-p*D+w*h}},{}],200:[function(e,B,V){B.exports=f;function f(l,m){var x=m[0],t=m[1],a=m[2],i=m[3],r=x+x,n=t+t,d=a+a,s=x*r,o=t*r,y=t*n,g=a*r,b=a*n,v=a*d,_=i*r,u=i*n,T=i*d;return l[0]=1-y-v,l[1]=o+T,l[2]=g-u,l[3]=0,l[4]=o-T,l[5]=1-s-v,l[6]=b+_,l[7]=0,l[8]=g+u,l[9]=b-_,l[10]=1-s-y,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}},{}],201:[function(e,B,V){B.exports=f;function f(l,m,x){var t,a,i,r=x[0],n=x[1],d=x[2],s=Math.sqrt(r*r+n*n+d*d);return Math.abs(s)<1e-6?null:(s=1/s,r*=s,n*=s,d*=s,t=Math.sin(m),a=Math.cos(m),i=1-a,l[0]=r*r*i+a,l[1]=n*r*i+d*t,l[2]=d*r*i-n*t,l[3]=0,l[4]=r*n*i-d*t,l[5]=n*n*i+a,l[6]=d*n*i+r*t,l[7]=0,l[8]=r*d*i+n*t,l[9]=n*d*i-r*t,l[10]=d*d*i+a,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l)}},{}],202:[function(e,B,V){B.exports=f;function f(l,m,x){var t=m[0],a=m[1],i=m[2],r=m[3],n=t+t,d=a+a,s=i+i,o=t*n,y=t*d,g=t*s,b=a*d,v=a*s,_=i*s,u=r*n,T=r*d,c=r*s;return l[0]=1-(b+_),l[1]=y+c,l[2]=g-T,l[3]=0,l[4]=y-c,l[5]=1-(o+_),l[6]=v+u,l[7]=0,l[8]=g+T,l[9]=v-u,l[10]=1-(o+b),l[11]=0,l[12]=x[0],l[13]=x[1],l[14]=x[2],l[15]=1,l}},{}],203:[function(e,B,V){B.exports=f;function f(l,m){return l[0]=m[0],l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=m[1],l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=m[2],l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}},{}],204:[function(e,B,V){B.exports=f;function f(l,m){return l[0]=1,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=1,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=1,l[11]=0,l[12]=m[0],l[13]=m[1],l[14]=m[2],l[15]=1,l}},{}],205:[function(e,B,V){B.exports=f;function f(l,m){var x=Math.sin(m),t=Math.cos(m);return l[0]=1,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=t,l[6]=x,l[7]=0,l[8]=0,l[9]=-x,l[10]=t,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}},{}],206:[function(e,B,V){B.exports=f;function f(l,m){var x=Math.sin(m),t=Math.cos(m);return l[0]=t,l[1]=0,l[2]=-x,l[3]=0,l[4]=0,l[5]=1,l[6]=0,l[7]=0,l[8]=x,l[9]=0,l[10]=t,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}},{}],207:[function(e,B,V){B.exports=f;function f(l,m){var x=Math.sin(m),t=Math.cos(m);return l[0]=t,l[1]=x,l[2]=0,l[3]=0,l[4]=-x,l[5]=t,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=1,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}},{}],208:[function(e,B,V){B.exports=f;function f(l,m,x,t,a,i,r){var n=1/(x-m),d=1/(a-t),s=1/(i-r);return l[0]=i*2*n,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=i*2*d,l[6]=0,l[7]=0,l[8]=(x+m)*n,l[9]=(a+t)*d,l[10]=(r+i)*s,l[11]=-1,l[12]=0,l[13]=0,l[14]=r*i*2*s,l[15]=0,l}},{}],209:[function(e,B,V){B.exports=f;function f(l){return l[0]=1,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=1,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=1,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}},{}],210:[function(e,B,V){B.exports={create:e("./create"),clone:e("./clone"),copy:e("./copy"),identity:e("./identity"),transpose:e("./transpose"),invert:e("./invert"),adjoint:e("./adjoint"),determinant:e("./determinant"),multiply:e("./multiply"),translate:e("./translate"),scale:e("./scale"),rotate:e("./rotate"),rotateX:e("./rotateX"),rotateY:e("./rotateY"),rotateZ:e("./rotateZ"),fromRotation:e("./fromRotation"),fromRotationTranslation:e("./fromRotationTranslation"),fromScaling:e("./fromScaling"),fromTranslation:e("./fromTranslation"),fromXRotation:e("./fromXRotation"),fromYRotation:e("./fromYRotation"),fromZRotation:e("./fromZRotation"),fromQuat:e("./fromQuat"),frustum:e("./frustum"),perspective:e("./perspective"),perspectiveFromFieldOfView:e("./perspectiveFromFieldOfView"),ortho:e("./ortho"),lookAt:e("./lookAt"),str:e("./str")}},{"./adjoint":195,"./clone":196,"./copy":197,"./create":198,"./determinant":199,"./fromQuat":200,"./fromRotation":201,"./fromRotationTranslation":202,"./fromScaling":203,"./fromTranslation":204,"./fromXRotation":205,"./fromYRotation":206,"./fromZRotation":207,"./frustum":208,"./identity":209,"./invert":211,"./lookAt":212,"./multiply":213,"./ortho":214,"./perspective":215,"./perspectiveFromFieldOfView":216,"./rotate":217,"./rotateX":218,"./rotateY":219,"./rotateZ":220,"./scale":221,"./str":222,"./translate":223,"./transpose":224}],211:[function(e,B,V){B.exports=f;function f(l,m){var x=m[0],t=m[1],a=m[2],i=m[3],r=m[4],n=m[5],d=m[6],s=m[7],o=m[8],y=m[9],g=m[10],b=m[11],v=m[12],_=m[13],u=m[14],T=m[15],c=x*n-t*r,A=x*d-a*r,k=x*s-i*r,p=t*d-a*n,w=t*s-i*n,h=a*s-i*d,D=o*_-y*v,S=o*u-g*v,M=o*T-b*v,L=y*u-g*_,R=y*T-b*_,z=g*T-b*u,P=c*z-A*R+k*L+p*M-w*S+h*D;return P?(P=1/P,l[0]=(n*z-d*R+s*L)*P,l[1]=(a*R-t*z-i*L)*P,l[2]=(_*h-u*w+T*p)*P,l[3]=(g*w-y*h-b*p)*P,l[4]=(d*M-r*z-s*S)*P,l[5]=(x*z-a*M+i*S)*P,l[6]=(u*k-v*h-T*A)*P,l[7]=(o*h-g*k+b*A)*P,l[8]=(r*R-n*M+s*D)*P,l[9]=(t*M-x*R-i*D)*P,l[10]=(v*w-_*k+T*c)*P,l[11]=(y*k-o*w-b*c)*P,l[12]=(n*S-r*L-d*D)*P,l[13]=(x*L-t*S+a*D)*P,l[14]=(_*A-v*p-u*c)*P,l[15]=(o*p-y*A+g*c)*P,l):null}},{}],212:[function(e,B,V){var f=e("./identity");B.exports=l;function l(m,x,t,a){var i,r,n,d,s,o,y,g,b,v,_=x[0],u=x[1],T=x[2],c=a[0],A=a[1],k=a[2],p=t[0],w=t[1],h=t[2];return Math.abs(_-p)<1e-6&&Math.abs(u-w)<1e-6&&Math.abs(T-h)<1e-6?f(m):(y=_-p,g=u-w,b=T-h,v=1/Math.sqrt(y*y+g*g+b*b),y*=v,g*=v,b*=v,i=A*b-k*g,r=k*y-c*b,n=c*g-A*y,v=Math.sqrt(i*i+r*r+n*n),v?(v=1/v,i*=v,r*=v,n*=v):(i=0,r=0,n=0),d=g*n-b*r,s=b*i-y*n,o=y*r-g*i,v=Math.sqrt(d*d+s*s+o*o),v?(v=1/v,d*=v,s*=v,o*=v):(d=0,s=0,o=0),m[0]=i,m[1]=d,m[2]=y,m[3]=0,m[4]=r,m[5]=s,m[6]=g,m[7]=0,m[8]=n,m[9]=o,m[10]=b,m[11]=0,m[12]=-(i*_+r*u+n*T),m[13]=-(d*_+s*u+o*T),m[14]=-(y*_+g*u+b*T),m[15]=1,m)}},{"./identity":209}],213:[function(e,B,V){B.exports=f;function f(l,m,x){var t=m[0],a=m[1],i=m[2],r=m[3],n=m[4],d=m[5],s=m[6],o=m[7],y=m[8],g=m[9],b=m[10],v=m[11],_=m[12],u=m[13],T=m[14],c=m[15],A=x[0],k=x[1],p=x[2],w=x[3];return l[0]=A*t+k*n+p*y+w*_,l[1]=A*a+k*d+p*g+w*u,l[2]=A*i+k*s+p*b+w*T,l[3]=A*r+k*o+p*v+w*c,A=x[4],k=x[5],p=x[6],w=x[7],l[4]=A*t+k*n+p*y+w*_,l[5]=A*a+k*d+p*g+w*u,l[6]=A*i+k*s+p*b+w*T,l[7]=A*r+k*o+p*v+w*c,A=x[8],k=x[9],p=x[10],w=x[11],l[8]=A*t+k*n+p*y+w*_,l[9]=A*a+k*d+p*g+w*u,l[10]=A*i+k*s+p*b+w*T,l[11]=A*r+k*o+p*v+w*c,A=x[12],k=x[13],p=x[14],w=x[15],l[12]=A*t+k*n+p*y+w*_,l[13]=A*a+k*d+p*g+w*u,l[14]=A*i+k*s+p*b+w*T,l[15]=A*r+k*o+p*v+w*c,l}},{}],214:[function(e,B,V){B.exports=f;function f(l,m,x,t,a,i,r){var n=1/(m-x),d=1/(t-a),s=1/(i-r);return l[0]=-2*n,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=-2*d,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=2*s,l[11]=0,l[12]=(m+x)*n,l[13]=(a+t)*d,l[14]=(r+i)*s,l[15]=1,l}},{}],215:[function(e,B,V){B.exports=f;function f(l,m,x,t,a){var i=1/Math.tan(m/2),r=1/(t-a);return l[0]=i/x,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=i,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=(a+t)*r,l[11]=-1,l[12]=0,l[13]=0,l[14]=2*a*t*r,l[15]=0,l}},{}],216:[function(e,B,V){B.exports=f;function f(l,m,x,t){var a=Math.tan(m.upDegrees*Math.PI/180),i=Math.tan(m.downDegrees*Math.PI/180),r=Math.tan(m.leftDegrees*Math.PI/180),n=Math.tan(m.rightDegrees*Math.PI/180),d=2/(r+n),s=2/(a+i);return l[0]=d,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=s,l[6]=0,l[7]=0,l[8]=-((r-n)*d*.5),l[9]=(a-i)*s*.5,l[10]=t/(x-t),l[11]=-1,l[12]=0,l[13]=0,l[14]=t*x/(x-t),l[15]=0,l}},{}],217:[function(e,B,V){B.exports=f;function f(l,m,x,t){var a=t[0],i=t[1],r=t[2],n=Math.sqrt(a*a+i*i+r*r),d,s,o,y,g,b,v,_,u,T,c,A,k,p,w,h,D,S,M,L,R,z,P,I;return Math.abs(n)<1e-6?null:(n=1/n,a*=n,i*=n,r*=n,d=Math.sin(x),s=Math.cos(x),o=1-s,y=m[0],g=m[1],b=m[2],v=m[3],_=m[4],u=m[5],T=m[6],c=m[7],A=m[8],k=m[9],p=m[10],w=m[11],h=a*a*o+s,D=i*a*o+r*d,S=r*a*o-i*d,M=a*i*o-r*d,L=i*i*o+s,R=r*i*o+a*d,z=a*r*o+i*d,P=i*r*o-a*d,I=r*r*o+s,l[0]=y*h+_*D+A*S,l[1]=g*h+u*D+k*S,l[2]=b*h+T*D+p*S,l[3]=v*h+c*D+w*S,l[4]=y*M+_*L+A*R,l[5]=g*M+u*L+k*R,l[6]=b*M+T*L+p*R,l[7]=v*M+c*L+w*R,l[8]=y*z+_*P+A*I,l[9]=g*z+u*P+k*I,l[10]=b*z+T*P+p*I,l[11]=v*z+c*P+w*I,m!==l&&(l[12]=m[12],l[13]=m[13],l[14]=m[14],l[15]=m[15]),l)}},{}],218:[function(e,B,V){B.exports=f;function f(l,m,x){var t=Math.sin(x),a=Math.cos(x),i=m[4],r=m[5],n=m[6],d=m[7],s=m[8],o=m[9],y=m[10],g=m[11];return m!==l&&(l[0]=m[0],l[1]=m[1],l[2]=m[2],l[3]=m[3],l[12]=m[12],l[13]=m[13],l[14]=m[14],l[15]=m[15]),l[4]=i*a+s*t,l[5]=r*a+o*t,l[6]=n*a+y*t,l[7]=d*a+g*t,l[8]=s*a-i*t,l[9]=o*a-r*t,l[10]=y*a-n*t,l[11]=g*a-d*t,l}},{}],219:[function(e,B,V){B.exports=f;function f(l,m,x){var t=Math.sin(x),a=Math.cos(x),i=m[0],r=m[1],n=m[2],d=m[3],s=m[8],o=m[9],y=m[10],g=m[11];return m!==l&&(l[4]=m[4],l[5]=m[5],l[6]=m[6],l[7]=m[7],l[12]=m[12],l[13]=m[13],l[14]=m[14],l[15]=m[15]),l[0]=i*a-s*t,l[1]=r*a-o*t,l[2]=n*a-y*t,l[3]=d*a-g*t,l[8]=i*t+s*a,l[9]=r*t+o*a,l[10]=n*t+y*a,l[11]=d*t+g*a,l}},{}],220:[function(e,B,V){B.exports=f;function f(l,m,x){var t=Math.sin(x),a=Math.cos(x),i=m[0],r=m[1],n=m[2],d=m[3],s=m[4],o=m[5],y=m[6],g=m[7];return m!==l&&(l[8]=m[8],l[9]=m[9],l[10]=m[10],l[11]=m[11],l[12]=m[12],l[13]=m[13],l[14]=m[14],l[15]=m[15]),l[0]=i*a+s*t,l[1]=r*a+o*t,l[2]=n*a+y*t,l[3]=d*a+g*t,l[4]=s*a-i*t,l[5]=o*a-r*t,l[6]=y*a-n*t,l[7]=g*a-d*t,l}},{}],221:[function(e,B,V){B.exports=f;function f(l,m,x){var t=x[0],a=x[1],i=x[2];return l[0]=m[0]*t,l[1]=m[1]*t,l[2]=m[2]*t,l[3]=m[3]*t,l[4]=m[4]*a,l[5]=m[5]*a,l[6]=m[6]*a,l[7]=m[7]*a,l[8]=m[8]*i,l[9]=m[9]*i,l[10]=m[10]*i,l[11]=m[11]*i,l[12]=m[12],l[13]=m[13],l[14]=m[14],l[15]=m[15],l}},{}],222:[function(e,B,V){B.exports=f;function f(l){return"mat4("+l[0]+", "+l[1]+", "+l[2]+", "+l[3]+", "+l[4]+", "+l[5]+", "+l[6]+", "+l[7]+", "+l[8]+", "+l[9]+", "+l[10]+", "+l[11]+", "+l[12]+", "+l[13]+", "+l[14]+", "+l[15]+")"}},{}],223:[function(e,B,V){B.exports=f;function f(l,m,x){var t=x[0],a=x[1],i=x[2],r,n,d,s,o,y,g,b,v,_,u,T;return m===l?(l[12]=m[0]*t+m[4]*a+m[8]*i+m[12],l[13]=m[1]*t+m[5]*a+m[9]*i+m[13],l[14]=m[2]*t+m[6]*a+m[10]*i+m[14],l[15]=m[3]*t+m[7]*a+m[11]*i+m[15]):(r=m[0],n=m[1],d=m[2],s=m[3],o=m[4],y=m[5],g=m[6],b=m[7],v=m[8],_=m[9],u=m[10],T=m[11],l[0]=r,l[1]=n,l[2]=d,l[3]=s,l[4]=o,l[5]=y,l[6]=g,l[7]=b,l[8]=v,l[9]=_,l[10]=u,l[11]=T,l[12]=r*t+o*a+v*i+m[12],l[13]=n*t+y*a+_*i+m[13],l[14]=d*t+g*a+u*i+m[14],l[15]=s*t+b*a+T*i+m[15]),l}},{}],224:[function(e,B,V){B.exports=f;function f(l,m){if(l===m){var x=m[1],t=m[2],a=m[3],i=m[6],r=m[7],n=m[11];l[1]=m[4],l[2]=m[8],l[3]=m[12],l[4]=x,l[6]=m[9],l[7]=m[13],l[8]=t,l[9]=i,l[11]=m[14],l[12]=a,l[13]=r,l[14]=n}else l[0]=m[0],l[1]=m[4],l[2]=m[8],l[3]=m[12],l[4]=m[1],l[5]=m[5],l[6]=m[9],l[7]=m[13],l[8]=m[2],l[9]=m[6],l[10]=m[10],l[11]=m[14],l[12]=m[3],l[13]=m[7],l[14]=m[11],l[15]=m[15];return l}},{}],225:[function(e,B,V){var f=e("css-font"),l=e("pick-by-alias"),m=e("regl"),x=e("gl-util/context"),t=e("es6-weak-map"),a=e("color-normalize"),i=e("font-atlas"),r=e("typedarray-pool"),n=e("parse-rect"),d=e("is-plain-obj"),s=e("parse-unit"),o=e("to-px"),y=e("detect-kerning"),g=e("object-assign"),b=e("font-measure"),v=e("flatten-vertex-data"),_=e("bit-twiddle"),u=_.nextPow2,T=new t,c=!1;if(document.body){var A=document.body.appendChild(document.createElement("div"));A.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(A).fontStretch&&(c=!0),document.body.removeChild(A)}var k=function(h){p(h)?(h={regl:h},this.gl=h.regl._gl):this.gl=x(h),this.shader=T.get(this.gl),this.shader?this.regl=this.shader.regl:this.regl=h.regl||m({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),T.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(d(h)?h:{})};k.prototype.createShader=function(){var h=this.regl,D=h({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:h.prop("count"),offset:h.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:h.this("sizeBuffer")},width:{offset:0,stride:8,buffer:h.this("sizeBuffer")},char:h.this("charBuffer"),position:h.this("position")},uniforms:{atlasSize:function(M,L){return[L.atlas.width,L.atlas.height]},atlasDim:function(M,L){return[L.atlas.cols,L.atlas.rows]},atlas:function(M,L){return L.atlas.texture},charStep:function(M,L){return L.atlas.step},em:function(M,L){return L.atlas.em},color:h.prop("color"),opacity:h.prop("opacity"),viewport:h.this("viewportArray"),scale:h.this("scale"),align:h.prop("align"),baseline:h.prop("baseline"),translate:h.this("translate"),positionOffset:h.prop("positionOffset")},primitive:"points",viewport:h.this("viewport"),vert:`
			precision highp float;
			attribute float width, charOffset, char;
			attribute vec2 position;
			uniform float fontSize, charStep, em, align, baseline;
			uniform vec4 viewport;
			uniform vec4 color;
			uniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;
			varying vec2 charCoord, charId;
			varying float charWidth;
			varying vec4 fontColor;
			void main () {
				vec2 offset = floor(em * (vec2(align + charOffset, baseline)
					+ vec2(positionOffset.x, -positionOffset.y)))
					/ (viewport.zw * scale.xy);

				vec2 position = (position + translate) * scale;
				position += offset * scale;

				charCoord = position * viewport.zw + viewport.xy;

				gl_Position = vec4(position * 2. - 1., 0, 1);

				gl_PointSize = charStep;

				charId.x = mod(char, atlasDim.x);
				charId.y = floor(char / atlasDim.x);

				charWidth = width * em;

				fontColor = color / 255.;
			}`,frag:`
			precision highp float;
			uniform float fontSize, charStep, opacity;
			uniform vec2 atlasSize;
			uniform vec4 viewport;
			uniform sampler2D atlas;
			varying vec4 fontColor;
			varying vec2 charCoord, charId;
			varying float charWidth;

			float lightness(vec4 color) {
				return color.r * 0.299 + color.g * 0.587 + color.b * 0.114;
			}

			void main () {
				vec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;
				float halfCharStep = floor(charStep * .5 + .5);

				// invert y and shift by 1px (FF expecially needs that)
				uv.y = charStep - uv.y;

				// ignore points outside of character bounding box
				float halfCharWidth = ceil(charWidth * .5);
				if (floor(uv.x) > halfCharStep + halfCharWidth ||
					floor(uv.x) < halfCharStep - halfCharWidth) return;

				uv += charId * charStep;
				uv = uv / atlasSize;

				vec4 color = fontColor;
				vec4 mask = texture2D(atlas, uv);

				float maskY = lightness(mask);
				// float colorY = lightness(color);
				color.a *= maskY;
				color.a *= opacity;

				// color.a += .1;

				// antialiasing, see yiq color space y-channel formula
				// color.rgb += (1. - color.rgb) * (1. - mask.rgb);

				gl_FragColor = color;
			}`}),S={};return{regl:h,draw:D,atlas:S}},k.prototype.update=function(h){var D=this;if(typeof h=="string")h={text:h};else if(!h)return;h=l(h,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0),h.opacity!=null&&(Array.isArray(h.opacity)?this.opacity=h.opacity.map(function(wt){return parseFloat(wt)}):this.opacity=parseFloat(h.opacity)),h.viewport!=null&&(this.viewport=n(h.viewport),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),this.viewport==null&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),h.kerning!=null&&(this.kerning=h.kerning),h.offset!=null&&(typeof h.offset=="number"&&(h.offset=[h.offset,0]),this.positionOffset=v(h.offset)),h.direction&&(this.direction=h.direction),h.range&&(this.range=h.range,this.scale=[1/(h.range[2]-h.range[0]),1/(h.range[3]-h.range[1])],this.translate=[-h.range[0],-h.range[1]]),h.scale&&(this.scale=h.scale),h.translate&&(this.translate=h.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),!this.font.length&&!h.font&&(h.font=k.baseFontSize+"px sans-serif");var S=!1,M=!1;if(h.font&&(Array.isArray(h.font)?h.font:[h.font]).forEach(function(wt,It){if(typeof wt=="string")try{wt=f.parse(wt)}catch{wt=f.parse(k.baseFontSize+"px "+wt)}else wt=f.parse(f.stringify(wt));var $t=f.stringify({size:k.baseFontSize,family:wt.family,stretch:c?wt.stretch:void 0,variant:wt.variant,weight:wt.weight,style:wt.style}),Qt=s(wt.size),Nt=Math.round(Qt[0]*o(Qt[1]));if(Nt!==D.fontSize[It]&&(M=!0,D.fontSize[It]=Nt),(!D.font[It]||$t!=D.font[It].baseString)&&(S=!0,D.font[It]=k.fonts[$t],!D.font[It])){var Pt=wt.family.join(", "),Yt=[wt.style];wt.style!=wt.variant&&Yt.push(wt.variant),wt.variant!=wt.weight&&Yt.push(wt.weight),c&&wt.weight!=wt.stretch&&Yt.push(wt.stretch),D.font[It]={baseString:$t,family:Pt,weight:wt.weight,stretch:wt.stretch,style:wt.style,variant:wt.variant,width:{},kerning:{},metrics:b(Pt,{origin:"top",fontSize:k.baseFontSize,fontStyle:Yt.join(" ")})},k.fonts[$t]=D.font[It]}}),(S||M)&&this.font.forEach(function(wt,It){var $t=f.stringify({size:D.fontSize[It],family:wt.family,stretch:c?wt.stretch:void 0,variant:wt.variant,weight:wt.weight,style:wt.style});if(D.fontAtlas[It]=D.shader.atlas[$t],!D.fontAtlas[It]){var Qt=wt.metrics;D.shader.atlas[$t]=D.fontAtlas[It]={fontString:$t,step:Math.ceil(D.fontSize[It]*Qt.bottom*.5)*2,em:D.fontSize[It],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:D.regl.texture()}}h.text==null&&(h.text=D.text)}),typeof h.text=="string"&&h.position&&h.position.length>2){for(var L=Array(h.position.length*.5),R=0;R<L.length;R++)L[R]=h.text;h.text=L}var z;if(h.text!=null||S){if(this.textOffsets=[0],Array.isArray(h.text)){this.count=h.text[0].length,this.counts=[this.count];for(var P=1;P<h.text.length;P++)this.textOffsets[P]=this.textOffsets[P-1]+h.text[P-1].length,this.count+=h.text[P].length,this.counts.push(h.text[P].length);this.text=h.text.join("")}else this.text=h.text,this.count=this.text.length,this.counts=[this.count];z=[],this.font.forEach(function(wt,It){k.atlasContext.font=wt.baseString;for(var $t=D.fontAtlas[It],Qt=0;Qt<D.text.length;Qt++){var Nt=D.text.charAt(Qt);if($t.ids[Nt]==null&&($t.ids[Nt]=$t.chars.length,$t.chars.push(Nt),z.push(Nt)),wt.width[Nt]==null&&(wt.width[Nt]=k.atlasContext.measureText(Nt).width/k.baseFontSize,D.kerning)){var Pt=[];for(var Yt in wt.width)Pt.push(Yt+Nt,Nt+Yt);g(wt.kerning,y(wt.family,{pairs:Pt}))}}})}if(h.position)if(h.position.length>2){for(var I=!h.position[0].length,U=r.mallocFloat(this.count*2),O=0,G=0;O<this.counts.length;O++){var $=this.counts[O];if(I)for(var tt=0;tt<$;tt++)U[G++]=h.position[O*2],U[G++]=h.position[O*2+1];else for(var Z=0;Z<$;Z++)U[G++]=h.position[O][0],U[G++]=h.position[O][1]}this.position.call?this.position({type:"float",data:U}):this.position=this.regl.buffer({type:"float",data:U}),r.freeFloat(U)}else this.position.destroy&&this.position.destroy(),this.position={constant:h.position};if(h.text||S){var X=r.mallocUint8(this.count),J=r.mallocFloat(this.count*2);this.textWidth=[];for(var st=0,at=0;st<this.counts.length;st++){for(var lt=this.counts[st],F=this.font[st]||this.font[0],H=this.fontAtlas[st]||this.fontAtlas[0],et=0;et<lt;et++){var q=this.text.charAt(at),W=this.text.charAt(at-1);if(X[at]=H.ids[q],J[at*2]=F.width[q],et){var K=J[at*2-2],nt=J[at*2],it=J[at*2-1],ot=it+K*.5+nt*.5;if(this.kerning){var ct=F.kerning[W+q];ct&&(ot+=ct*.001)}J[at*2+1]=ot}else J[at*2+1]=J[at*2]*.5;at++}this.textWidth.push(J.length?J[at*2-2]*.5+J[at*2-1]:0)}h.align||(h.align=this.align),this.charBuffer({data:X,type:"uint8",usage:"stream"}),this.sizeBuffer({data:J,type:"float",usage:"stream"}),r.freeUint8(X),r.freeFloat(J),z.length&&this.font.forEach(function(wt,It){var $t=D.fontAtlas[It],Qt=$t.step,Nt=Math.floor(k.maxAtlasSize/Qt),Pt=Math.min(Nt,$t.chars.length),Yt=Math.ceil($t.chars.length/Pt),ve=u(Pt*Qt),Re=u(Yt*Qt);$t.width=ve,$t.height=Re,$t.rows=Yt,$t.cols=Pt,$t.em&&$t.texture({data:i({canvas:k.atlasCanvas,font:$t.fontString,chars:$t.chars,shape:[ve,Re],step:[Qt,Qt]})})})}if(h.align&&(this.align=h.align,this.alignOffset=this.textWidth.map(function(wt,It){var $t=Array.isArray(D.align)?D.align.length>1?D.align[It]:D.align[0]:D.align;if(typeof $t=="number")return $t;switch($t){case"right":case"end":return-wt;case"center":case"centre":case"middle":return-wt*.5}return 0})),this.baseline==null&&h.baseline==null&&(h.baseline=0),h.baseline!=null&&(this.baseline=h.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(wt,It){var $t=(D.font[It]||D.font[0]).metrics,Qt=0;return Qt+=$t.bottom*.5,typeof wt=="number"?Qt+=wt-$t.baseline:Qt+=-$t[wt],Qt*=-1,Qt})),h.color!=null)if(h.color||(h.color="transparent"),typeof h.color=="string"||!isNaN(h.color))this.color=a(h.color,"uint8");else{var bt;if(typeof h.color[0]=="number"&&h.color.length>this.counts.length){var ut=h.color.length;bt=r.mallocUint8(ut);for(var pt=(h.color.subarray||h.color.slice).bind(h.color),yt=0;yt<ut;yt+=4)bt.set(a(pt(yt,yt+4),"uint8"),yt)}else{var Tt=h.color.length;bt=r.mallocUint8(Tt*4);for(var kt=0;kt<Tt;kt++)bt.set(a(h.color[kt]||0,"uint8"),kt*4)}this.color=bt}if(h.position||h.text||h.color||h.baseline||h.align||h.font||h.offset||h.opacity){var zt=this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2;if(zt){var Rt=Math.max(this.position.length*.5||0,this.color.length*.25||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,this.positionOffset.length*.5||0);this.batch=Array(Rt);for(var Gt=0;Gt<this.batch.length;Gt++)this.batch[Gt]={count:this.counts.length>1?this.counts[Gt]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[Gt]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(Gt*4,Gt*4+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[Gt]:this.opacity,baseline:this.baselineOffset[Gt]!=null?this.baselineOffset[Gt]:this.baselineOffset[0],align:this.align?this.alignOffset[Gt]!=null?this.alignOffset[Gt]:this.alignOffset[0]:0,atlas:this.fontAtlas[Gt]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(Gt*2,Gt*2+2):this.positionOffset}}else this.count?this.batch=[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:this.batch=[]}},k.prototype.destroy=function(){},k.prototype.kerning=!0,k.prototype.position={constant:new Float32Array(2)},k.prototype.translate=null,k.prototype.scale=null,k.prototype.font=null,k.prototype.text="",k.prototype.positionOffset=[0,0],k.prototype.opacity=1,k.prototype.color=new Uint8Array([0,0,0,255]),k.prototype.alignOffset=[0,0],k.maxAtlasSize=1024,k.atlasCanvas=document.createElement("canvas"),k.atlasContext=k.atlasCanvas.getContext("2d",{alpha:!1}),k.baseFontSize=64,k.fonts={};function p(w){return typeof w=="function"&&w._gl&&w.prop&&w.texture&&w.buffer}B.exports=k},{"bit-twiddle":81,"color-normalize":89,"css-font":99,"detect-kerning":125,"es6-weak-map":183,"flatten-vertex-data":191,"font-atlas":192,"font-measure":193,"gl-util/context":226,"is-plain-obj":236,"object-assign":247,"parse-rect":249,"parse-unit":251,"pick-by-alias":253,regl:284,"to-px":315,"typedarray-pool":328}],226:[function(e,B,V){(function(f){(function(){var l=e("pick-by-alias");B.exports=function(n){if(n?typeof n=="string"&&(n={container:n}):n={},x(n)?n={container:n}:t(n)?n={container:n}:a(n)?n={gl:n}:n=l(n,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0),n.pixelRatio||(n.pixelRatio=f.pixelRatio||1),n.gl)return n.gl;if(n.canvas&&(n.container=n.canvas.parentNode),n.container){if(typeof n.container=="string"){var d=document.querySelector(n.container);if(!d)throw Error("Element "+n.container+" is not found");n.container=d}x(n.container)?(n.canvas=n.container,n.container=n.canvas.parentNode):n.canvas||(n.canvas=i(),n.container.appendChild(n.canvas),m(n))}else if(!n.canvas)if(typeof document<"u")n.container=document.body||document.documentElement,n.canvas=i(),n.container.appendChild(n.canvas),m(n);else throw Error("Not DOM environment. Use headless-gl.");return n.gl||["webgl","experimental-webgl","webgl-experimental"].some(function(s){try{n.gl=n.canvas.getContext(s,n.attrs)}catch{}return n.gl}),n.gl};function m(r){if(r.container)if(r.container==document.body)document.body.style.width||(r.canvas.width=r.width||r.pixelRatio*f.innerWidth),document.body.style.height||(r.canvas.height=r.height||r.pixelRatio*f.innerHeight);else{var n=r.container.getBoundingClientRect();r.canvas.width=r.width||n.right-n.left,r.canvas.height=r.height||n.bottom-n.top}}function x(r){return typeof r.getContext=="function"&&"width"in r&&"height"in r}function t(r){return typeof r.nodeName=="string"&&typeof r.appendChild=="function"&&typeof r.getBoundingClientRect=="function"}function a(r){return typeof r.drawArrays=="function"||typeof r.drawElements=="function"}function i(){var r=document.createElement("canvas");return r.style.position="absolute",r.style.top=0,r.style.left=0,r}}).call(this)}).call(this,typeof zo<"u"?zo:typeof self<"u"?self:typeof window<"u"?window:{})},{"pick-by-alias":253}],227:[function(e,B,V){B.exports=function(f){typeof f=="string"&&(f=[f]);for(var l=[].slice.call(arguments,1),m=[],x=0;x<f.length-1;x++)m.push(f[x],l[x]||"");return m.push(f[x]),m.join("")}},{}],228:[function(e,B,V){(function(f){(function(){var l=e("is-browser"),m;typeof f.matchMedia=="function"?m=!f.matchMedia("(hover: none)").matches:m=l,B.exports=m}).call(this)}).call(this,typeof zo<"u"?zo:typeof self<"u"?self:typeof window<"u"?window:{})},{"is-browser":232}],229:[function(e,B,V){var f=e("is-browser");function l(){var m=!1;try{var x=Object.defineProperty({},"passive",{get:function(){m=!0}});window.addEventListener("test",null,x),window.removeEventListener("test",null,x)}catch{m=!1}return m}B.exports=f&&l()},{"is-browser":232}],230:[function(e,B,V){V.read=function(f,l,m,x,t){var a,i,r=t*8-x-1,n=(1<<r)-1,d=n>>1,s=-7,o=m?t-1:0,y=m?-1:1,g=f[l+o];for(o+=y,a=g&(1<<-s)-1,g>>=-s,s+=r;s>0;a=a*256+f[l+o],o+=y,s-=8);for(i=a&(1<<-s)-1,a>>=-s,s+=x;s>0;i=i*256+f[l+o],o+=y,s-=8);if(a===0)a=1-d;else{if(a===n)return i?NaN:(g?-1:1)*(1/0);i=i+Math.pow(2,x),a=a-d}return(g?-1:1)*i*Math.pow(2,a-x)},V.write=function(f,l,m,x,t,a){var i,r,n,d=a*8-t-1,s=(1<<d)-1,o=s>>1,y=t===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=x?0:a-1,b=x?1:-1,v=l<0||l===0&&1/l<0?1:0;for(l=Math.abs(l),isNaN(l)||l===1/0?(r=isNaN(l)?1:0,i=s):(i=Math.floor(Math.log(l)/Math.LN2),l*(n=Math.pow(2,-i))<1&&(i--,n*=2),i+o>=1?l+=y/n:l+=y*Math.pow(2,1-o),l*n>=2&&(i++,n/=2),i+o>=s?(r=0,i=s):i+o>=1?(r=(l*n-1)*Math.pow(2,t),i=i+o):(r=l*Math.pow(2,o-1)*Math.pow(2,t),i=0));t>=8;f[m+g]=r&255,g+=b,r/=256,t-=8);for(i=i<<t|r,d+=t;d>0;f[m+g]=i&255,g+=b,i/=256,d-=8);f[m+g-b]|=v*128}},{}],231:[function(e,B,V){typeof Object.create=="function"?B.exports=function(l,m){m&&(l.super_=m,l.prototype=Object.create(m.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}))}:B.exports=function(l,m){if(m){l.super_=m;var x=function(){};x.prototype=m.prototype,l.prototype=new x,l.prototype.constructor=l}}},{}],232:[function(e,B,V){B.exports=!0},{}],233:[function(e,B,V){B.exports=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},{}],234:[function(e,B,V){B.exports=m,B.exports.isMobile=m,B.exports.default=m;var f=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,l=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function m(x){x||(x={});var t=x.ua;if(!t&&typeof navigator<"u"&&(t=navigator.userAgent),t&&t.headers&&typeof t.headers["user-agent"]=="string"&&(t=t.headers["user-agent"]),typeof t!="string")return!1;var a=x.tablet?l.test(t):f.test(t);return!a&&x.tablet&&x.featureDetect&&navigator&&navigator.maxTouchPoints>1&&t.indexOf("Macintosh")!==-1&&t.indexOf("Safari")!==-1&&(a=!0),a}},{}],235:[function(e,B,V){B.exports=function(f){var l=typeof f;return f!==null&&(l==="object"||l==="function")}},{}],236:[function(e,B,V){var f=Object.prototype.toString;B.exports=function(l){var m;return f.call(l)==="[object Object]"&&(m=Object.getPrototypeOf(l),m===null||m===Object.getPrototypeOf({}))}},{}],237:[function(e,B,V){B.exports=function(f){for(var l=f.length,m,x=0;x<l;x++)if(m=f.charCodeAt(x),(m<9||m>13)&&m!==32&&m!==133&&m!==160&&m!==5760&&m!==6158&&(m<8192||m>8205)&&m!==8232&&m!==8233&&m!==8239&&m!==8287&&m!==8288&&m!==12288&&m!==65279)return!1;return!0}},{}],238:[function(e,B,V){B.exports=function(l){return typeof l!="string"?!1:(l=l.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(l)&&/[\dz]$/i.test(l)&&l.length>4))}},{}],239:[function(e,B,V){(function(f,l){typeof V=="object"&&typeof B<"u"?B.exports=l():(f=f||self,f.mapboxgl=l())})(this,function(){var f,l,m;function x(t,a){if(!f)f=a;else if(!l)l=a;else{var i="var sharedChunk = {}; ("+f+")(sharedChunk); ("+l+")(sharedChunk);",r={};f(r),m=a(r),m.workerUrl=window.URL.createObjectURL(new Blob([i],{type:"text/javascript"}))}}return x(["exports"],function(t){function a(C,E){return E={exports:{}},C(E,E.exports),E.exports}var i="1.10.1",r=n;function n(C,E,N,rt){this.cx=3*C,this.bx=3*(N-C)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*E,this.by=3*(rt-E)-this.cy,this.ay=1-this.cy-this.by,this.p1x=C,this.p1y=rt,this.p2x=N,this.p2y=rt}n.prototype.sampleCurveX=function(C){return((this.ax*C+this.bx)*C+this.cx)*C},n.prototype.sampleCurveY=function(C){return((this.ay*C+this.by)*C+this.cy)*C},n.prototype.sampleCurveDerivativeX=function(C){return(3*this.ax*C+2*this.bx)*C+this.cx},n.prototype.solveCurveX=function(C,E){typeof E>"u"&&(E=1e-6);var N,rt,vt,xt,At;for(vt=C,At=0;At<8;At++){if(xt=this.sampleCurveX(vt)-C,Math.abs(xt)<E)return vt;var Ot=this.sampleCurveDerivativeX(vt);if(Math.abs(Ot)<1e-6)break;vt=vt-xt/Ot}if(N=0,rt=1,vt=C,vt<N)return N;if(vt>rt)return rt;for(;N<rt;){if(xt=this.sampleCurveX(vt),Math.abs(xt-C)<E)return vt;C>xt?N=vt:rt=vt,vt=(rt-N)*.5+N}return vt},n.prototype.solve=function(C,E){return this.sampleCurveY(this.solveCurveX(C,E))};var d=s;function s(C,E){this.x=C,this.y=E}s.prototype={clone:function(){return new s(this.x,this.y)},add:function(C){return this.clone()._add(C)},sub:function(C){return this.clone()._sub(C)},multByPoint:function(C){return this.clone()._multByPoint(C)},divByPoint:function(C){return this.clone()._divByPoint(C)},mult:function(C){return this.clone()._mult(C)},div:function(C){return this.clone()._div(C)},rotate:function(C){return this.clone()._rotate(C)},rotateAround:function(C,E){return this.clone()._rotateAround(C,E)},matMult:function(C){return this.clone()._matMult(C)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(C){return this.x===C.x&&this.y===C.y},dist:function(C){return Math.sqrt(this.distSqr(C))},distSqr:function(C){var E=C.x-this.x,N=C.y-this.y;return E*E+N*N},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(C){return Math.atan2(this.y-C.y,this.x-C.x)},angleWith:function(C){return this.angleWithSep(C.x,C.y)},angleWithSep:function(C,E){return Math.atan2(this.x*E-this.y*C,this.x*C+this.y*E)},_matMult:function(C){var E=C[0]*this.x+C[1]*this.y,N=C[2]*this.x+C[3]*this.y;return this.x=E,this.y=N,this},_add:function(C){return this.x+=C.x,this.y+=C.y,this},_sub:function(C){return this.x-=C.x,this.y-=C.y,this},_mult:function(C){return this.x*=C,this.y*=C,this},_div:function(C){return this.x/=C,this.y/=C,this},_multByPoint:function(C){return this.x*=C.x,this.y*=C.y,this},_divByPoint:function(C){return this.x/=C.x,this.y/=C.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var C=this.y;return this.y=this.x,this.x=-C,this},_rotate:function(C){var E=Math.cos(C),N=Math.sin(C),rt=E*this.x-N*this.y,vt=N*this.x+E*this.y;return this.x=rt,this.y=vt,this},_rotateAround:function(C,E){var N=Math.cos(C),rt=Math.sin(C),vt=E.x+N*(this.x-E.x)-rt*(this.y-E.y),xt=E.y+rt*(this.x-E.x)+N*(this.y-E.y);return this.x=vt,this.y=xt,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},s.convert=function(C){return C instanceof s?C:Array.isArray(C)?new s(C[0],C[1]):C};function o(C,E){if(Array.isArray(C)){if(!Array.isArray(E)||C.length!==E.length)return!1;for(var N=0;N<C.length;N++)if(!o(C[N],E[N]))return!1;return!0}if(typeof C=="object"&&C!==null&&E!==null){if(typeof E!="object")return!1;var rt=Object.keys(C);if(rt.length!==Object.keys(E).length)return!1;for(var vt in C)if(!o(C[vt],E[vt]))return!1;return!0}return C===E}function y(C){if(C<=0)return 0;if(C>=1)return 1;var E=C*C,N=E*C;return 4*(C<.5?N:3*(C-E)+N-.75)}function g(C,E,N,rt){var vt=new r(C,E,N,rt);return function(xt){return vt.solve(xt)}}var b=g(.25,.1,.25,1);function v(C,E,N){return Math.min(N,Math.max(E,C))}function _(C,E,N){var rt=N-E,vt=((C-E)%rt+rt)%rt+E;return vt===E?N:vt}function u(C,E,N){if(!C.length)return N(null,[]);var rt=C.length,vt=new Array(C.length),xt=null;C.forEach(function(At,Ot){E(At,function(re,he){re&&(xt=re),vt[Ot]=he,--rt===0&&N(xt,vt)})})}function T(C){var E=[];for(var N in C)E.push(C[N]);return E}function c(C,E){var N=[];for(var rt in C)rt in E||N.push(rt);return N}function A(C){for(var E=[],N=arguments.length-1;N-- >0;)E[N]=arguments[N+1];for(var rt=0,vt=E;rt<vt.length;rt+=1){var xt=vt[rt];for(var At in xt)C[At]=xt[At]}return C}function k(C,E){for(var N={},rt=0;rt<E.length;rt++){var vt=E[rt];vt in C&&(N[vt]=C[vt])}return N}var p=1;function w(){return p++}function h(){function C(E){return E?(E^Math.random()*16>>E/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,C)}return C()}function D(C){return C?/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(C):!1}function S(C,E){C.forEach(function(N){!E[N]||(E[N]=E[N].bind(E))})}function M(C,E){return C.indexOf(E,C.length-E.length)!==-1}function L(C,E,N){var rt={};for(var vt in C)rt[vt]=E.call(N||this,C[vt],vt,C);return rt}function R(C,E,N){var rt={};for(var vt in C)E.call(N||this,C[vt],vt,C)&&(rt[vt]=C[vt]);return rt}function z(C){return Array.isArray(C)?C.map(z):typeof C=="object"&&C?L(C,z):C}function P(C,E){for(var N=0;N<C.length;N++)if(E.indexOf(C[N])>=0)return!0;return!1}var I={};function U(C){I[C]||(typeof console<"u"&&console.warn(C),I[C]=!0)}function O(C,E,N){return(N.y-C.y)*(E.x-C.x)>(E.y-C.y)*(N.x-C.x)}function G(C){for(var E=0,N=0,rt=C.length,vt=rt-1,xt=void 0,At=void 0;N<rt;vt=N++)xt=C[N],At=C[vt],E+=(At.x-xt.x)*(xt.y+At.y);return E}function $(C){var E=C[0],N=C[1],rt=C[2];return N+=90,N*=Math.PI/180,rt*=Math.PI/180,{x:E*Math.cos(N)*Math.sin(rt),y:E*Math.sin(N)*Math.sin(rt),z:E*Math.cos(rt)}}function tt(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Z(C){var E=/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,N={};if(C.replace(E,function(vt,xt,At,Ot){var re=At||Ot;return N[xt]=re?re.toLowerCase():!0,""}),N["max-age"]){var rt=parseInt(N["max-age"],10);isNaN(rt)?delete N["max-age"]:N["max-age"]=rt}return N}var X=null;function J(C){if(X==null){var E=C.navigator?C.navigator.userAgent:null;X=!!C.safari||!!(E&&(/\b(iPad|iPhone|iPod)\b/.test(E)||!!E.match("Safari")&&!E.match("Chrome")))}return X}function st(C){try{var E=self[C];return E.setItem("_mapbox_test_",1),E.removeItem("_mapbox_test_"),!0}catch{return!1}}function at(C){return self.btoa(encodeURIComponent(C).replace(/%([0-9A-F]{2})/g,function(E,N){return String.fromCharCode(Number("0x"+N))}))}function lt(C){return decodeURIComponent(self.atob(C).split("").map(function(E){return"%"+("00"+E.charCodeAt(0).toString(16)).slice(-2)}).join(""))}var F=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),H=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,et=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,q,W,K={now:F,frame:function(E){var N=H(E);return{cancel:function(){return et(N)}}},getImageData:function(E,N){N===void 0&&(N=0);var rt=self.document.createElement("canvas"),vt=rt.getContext("2d");if(!vt)throw new Error("failed to create canvas 2d context");return rt.width=E.width,rt.height=E.height,vt.drawImage(E,0,0,E.width,E.height),vt.getImageData(-N,-N,E.width+2*N,E.height+2*N)},resolveURL:function(E){return q||(q=self.document.createElement("a")),q.href=E,q.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){return self.matchMedia?(W==null&&(W=self.matchMedia("(prefers-reduced-motion: reduce)")),W.matches):!1}},nt={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},it={supported:!1,testSupport:pt},ot,ct=!1,bt,ut=!1;self.document&&(bt=self.document.createElement("img"),bt.onload=function(){ot&&yt(ot),ot=null,ut=!0},bt.onerror=function(){ct=!0,ot=null},bt.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");function pt(C){ct||!bt||(ut?yt(C):ot=C)}function yt(C){var E=C.createTexture();C.bindTexture(C.TEXTURE_2D,E);try{if(C.texImage2D(C.TEXTURE_2D,0,C.RGBA,C.RGBA,C.UNSIGNED_BYTE,bt),C.isContextLost())return;it.supported=!0}catch{}C.deleteTexture(E),ct=!0}var Tt="01";function kt(){for(var C="1",E="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",N="",rt=0;rt<10;rt++)N+=E[Math.floor(Math.random()*62)];var vt=12*60*60*1e3,xt=[C,Tt,N].join(""),At=Date.now()+vt;return{token:xt,tokenExpiresAt:At}}var zt=function(E,N){this._transformRequestFn=E,this._customAccessToken=N,this._createSkuToken()};zt.prototype._createSkuToken=function(){var E=kt();this._skuToken=E.token,this._skuTokenExpiresAt=E.tokenExpiresAt},zt.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},zt.prototype.transformRequest=function(E,N){return this._transformRequestFn?this._transformRequestFn(E,N)||{url:E}:{url:E}},zt.prototype.normalizeStyleURL=function(E,N){if(!Rt(E))return E;var rt=Nt(E);return rt.path="/styles/v1"+rt.path,this._makeAPIURL(rt,this._customAccessToken||N)},zt.prototype.normalizeGlyphsURL=function(E,N){if(!Rt(E))return E;var rt=Nt(E);return rt.path="/fonts/v1"+rt.path,this._makeAPIURL(rt,this._customAccessToken||N)},zt.prototype.normalizeSourceURL=function(E,N){if(!Rt(E))return E;var rt=Nt(E);return rt.path="/v4/"+rt.authority+".json",rt.params.push("secure"),this._makeAPIURL(rt,this._customAccessToken||N)},zt.prototype.normalizeSpriteURL=function(E,N,rt,vt){var xt=Nt(E);return Rt(E)?(xt.path="/styles/v1"+xt.path+"/sprite"+N+rt,this._makeAPIURL(xt,this._customAccessToken||vt)):(xt.path+=""+N+rt,Pt(xt))},zt.prototype.normalizeTileURL=function(E,N){if(this._isSkuTokenExpired()&&this._createSkuToken(),E&&!Rt(E))return E;var rt=Nt(E),vt=/(\.(png|jpg)\d*)(?=$)/,xt=/^.+\/v4\//,At=K.devicePixelRatio>=2||N===512?"@2x":"",Ot=it.supported?".webp":"$1";rt.path=rt.path.replace(vt,""+At+Ot),rt.path=rt.path.replace(xt,"/"),rt.path="/v4"+rt.path;var re=this._customAccessToken||$t(rt.params)||nt.ACCESS_TOKEN;return nt.REQUIRE_ACCESS_TOKEN&&re&&this._skuToken&&rt.params.push("sku="+this._skuToken),this._makeAPIURL(rt,re)},zt.prototype.canonicalizeTileURL=function(E,N){var rt="/v4/",vt=/\.[\w]+$/,xt=Nt(E);if(!xt.path.match(/(^\/v4\/)/)||!xt.path.match(vt))return E;var At="mapbox://tiles/";At+=xt.path.replace(rt,"");var Ot=xt.params;return N&&(Ot=Ot.filter(function(re){return!re.match(/^access_token=/)})),Ot.length&&(At+="?"+Ot.join("&")),At},zt.prototype.canonicalizeTileset=function(E,N){for(var rt=N?Rt(N):!1,vt=[],xt=0,At=E.tiles||[];xt<At.length;xt+=1){var Ot=At[xt];wt(Ot)?vt.push(this.canonicalizeTileURL(Ot,rt)):vt.push(Ot)}return vt},zt.prototype._makeAPIURL=function(E,N){var rt="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",vt=Nt(nt.API_URL);if(E.protocol=vt.protocol,E.authority=vt.authority,vt.path!=="/"&&(E.path=""+vt.path+E.path),!nt.REQUIRE_ACCESS_TOKEN)return Pt(E);if(N=N||nt.ACCESS_TOKEN,!N)throw new Error("An API access token is required to use Mapbox GL. "+rt);if(N[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+rt);return E.params=E.params.filter(function(xt){return xt.indexOf("access_token")===-1}),E.params.push("access_token="+N),Pt(E)};function Rt(C){return C.indexOf("mapbox:")===0}var Gt=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function wt(C){return Gt.test(C)}function It(C){return C.indexOf("sku=")>0&&wt(C)}function $t(C){for(var E=0,N=C;E<N.length;E+=1){var rt=N[E],vt=rt.match(/^access_token=(.*)$/);if(vt)return vt[1]}return null}var Qt=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Nt(C){var E=C.match(Qt);if(!E)throw new Error("Unable to parse URL object");return{protocol:E[1],authority:E[2],path:E[3]||"/",params:E[4]?E[4].split("&"):[]}}function Pt(C){var E=C.params.length?"?"+C.params.join("&"):"";return C.protocol+"://"+C.authority+C.path+E}var Yt="mapbox.eventData";function ve(C){if(!C)return null;var E=C.split(".");if(!E||E.length!==3)return null;try{var N=JSON.parse(lt(E[1]));return N}catch{return null}}var Re=function(E){this.type=E,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Re.prototype.getStorageKey=function(E){var N=ve(nt.ACCESS_TOKEN),rt="";return N&&N.u?rt=at(N.u):rt=nt.ACCESS_TOKEN||"",E?Yt+"."+E+":"+rt:Yt+":"+rt},Re.prototype.fetchEventData=function(){var E=st("localStorage"),N=this.getStorageKey(),rt=this.getStorageKey("uuid");if(E)try{var vt=self.localStorage.getItem(N);vt&&(this.eventData=JSON.parse(vt));var xt=self.localStorage.getItem(rt);xt&&(this.anonId=xt)}catch{U("Unable to read from LocalStorage")}},Re.prototype.saveEventData=function(){var E=st("localStorage"),N=this.getStorageKey(),rt=this.getStorageKey("uuid");if(E)try{self.localStorage.setItem(rt,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(N,JSON.stringify(this.eventData))}catch{U("Unable to write to LocalStorage")}},Re.prototype.processRequests=function(E){},Re.prototype.postEvent=function(E,N,rt,vt){var xt=this;if(!!nt.EVENTS_URL){var At=Nt(nt.EVENTS_URL);At.params.push("access_token="+(vt||nt.ACCESS_TOKEN||""));var Ot={event:this.type,created:new Date(E).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:i,skuId:Tt,userId:this.anonId},re=N?A(Ot,N):Ot,he={url:Pt(At),headers:{"Content-Type":"text/plain"},body:JSON.stringify([re])};this.pendingRequest=_e(he,function(ge){xt.pendingRequest=null,rt(ge),xt.saveEventData(),xt.processRequests(vt)})}},Re.prototype.queueRequest=function(E,N){this.queue.push(E),this.processRequests(N)};var ir=function(C){function E(){C.call(this,"map.load"),this.success={},this.skuToken=""}return C&&(E.__proto__=C),E.prototype=Object.create(C&&C.prototype),E.prototype.constructor=E,E.prototype.postMapLoadEvent=function(rt,vt,xt,At){this.skuToken=xt,(nt.EVENTS_URL&&At||nt.ACCESS_TOKEN&&Array.isArray(rt)&&rt.some(function(Ot){return Rt(Ot)||wt(Ot)}))&&this.queueRequest({id:vt,timestamp:Date.now()},At)},E.prototype.processRequests=function(rt){var vt=this;if(!(this.pendingRequest||this.queue.length===0)){var xt=this.queue.shift(),At=xt.id,Ot=xt.timestamp;At&&this.success[At]||(this.anonId||this.fetchEventData(),D(this.anonId)||(this.anonId=h()),this.postEvent(Ot,{skuToken:this.skuToken},function(re){re||At&&(vt.success[At]=!0)},rt))}},E}(Re),Ie=function(C){function E(N){C.call(this,"appUserTurnstile"),this._customAccessToken=N}return C&&(E.__proto__=C),E.prototype=Object.create(C&&C.prototype),E.prototype.constructor=E,E.prototype.postTurnstileEvent=function(rt,vt){nt.EVENTS_URL&&nt.ACCESS_TOKEN&&Array.isArray(rt)&&rt.some(function(xt){return Rt(xt)||wt(xt)})&&this.queueRequest(Date.now(),vt)},E.prototype.processRequests=function(rt){var vt=this;if(!(this.pendingRequest||this.queue.length===0)){(!this.anonId||!this.eventData.lastSuccess||!this.eventData.tokenU)&&this.fetchEventData();var xt=ve(nt.ACCESS_TOKEN),At=xt?xt.u:nt.ACCESS_TOKEN,Ot=At!==this.eventData.tokenU;D(this.anonId)||(this.anonId=h(),Ot=!0);var re=this.queue.shift();if(this.eventData.lastSuccess){var he=new Date(this.eventData.lastSuccess),ge=new Date(re),Fe=(re-this.eventData.lastSuccess)/(24*60*60*1e3);Ot=Ot||Fe>=1||Fe<-1||he.getDate()!==ge.getDate()}else Ot=!0;if(!Ot)return this.processRequests();this.postEvent(re,{"enabled.telemetry":!1},function(nr){nr||(vt.eventData.lastSuccess=re,vt.eventData.tokenU=At)},rt)}},E}(Re),Be=new Ie,Ye=Be.postTurnstileEvent.bind(Be),ze=new ir,Ee=ze.postMapLoadEvent.bind(ze),Wt="mapbox-tiles",ee=500,Xt=50,St=1e3*60*7,Vt;function Zt(){self.caches&&!Vt&&(Vt=self.caches.open(Wt))}var qt;function Te(C,E){if(qt===void 0)try{new Response(new ReadableStream),qt=!0}catch{qt=!1}qt?E(C.body):C.blob().then(E)}function me(C,E,N){if(Zt(),!!Vt){var rt={status:E.status,statusText:E.statusText,headers:new self.Headers};E.headers.forEach(function(At,Ot){return rt.headers.set(Ot,At)});var vt=Z(E.headers.get("Cache-Control")||"");if(!vt["no-store"]){vt["max-age"]&&rt.headers.set("Expires",new Date(N+vt["max-age"]*1e3).toUTCString());var xt=new Date(rt.headers.get("Expires")).getTime()-N;xt<St||Te(E,function(At){var Ot=new self.Response(At,rt);Zt(),Vt&&Vt.then(function(re){return re.put(Ne(C.url),Ot)}).catch(function(re){return U(re.message)})})}}}function Ne(C){var E=C.indexOf("?");return E<0?C:C.slice(0,E)}function Ke(C,E){if(Zt(),!Vt)return E(null);var N=Ne(C.url);Vt.then(function(rt){rt.match(N).then(function(vt){var xt=He(vt);rt.delete(N),xt&&rt.put(N,vt.clone()),E(null,vt,xt)}).catch(E)}).catch(E)}function He(C){if(!C)return!1;var E=new Date(C.headers.get("Expires")||0),N=Z(C.headers.get("Cache-Control")||"");return E>Date.now()&&!N["no-cache"]}var Xe=1/0;function er(C){Xe++,Xe>Xt&&(C.getActor().send("enforceCacheSizeLimit",ee),Xe=0)}function We(C){Zt(),Vt&&Vt.then(function(E){E.keys().then(function(N){for(var rt=0;rt<N.length-C;rt++)E.delete(N[rt])})})}function hr(C){var E=self.caches.delete(Wt);C&&E.catch(C).then(function(){return C()})}function Wr(C,E){ee=C,Xt=E}var dn;function Qr(){return dn==null&&(dn=self.OffscreenCanvas&&new self.OffscreenCanvas(1,1).getContext("2d")&&typeof self.createImageBitmap=="function"),dn}var le={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(le);var Qe=function(C){function E(N,rt,vt){rt===401&&wt(vt)&&(N+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),C.call(this,N),this.status=rt,this.url=vt,this.name=this.constructor.name,this.message=N}return C&&(E.__proto__=C),E.prototype=Object.create(C&&C.prototype),E.prototype.constructor=E,E.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},E}(Error),Ze=tt()?function(){return self.worker&&self.worker.referrer}:function(){return(self.location.protocol==="blob:"?self.parent:self).location.href},Ve=function(C){return/^file:/.test(C)||/^file:/.test(Ze())&&!/^\w+:/.test(C)};function _r(C,E){var N=new self.AbortController,rt=new self.Request(C.url,{method:C.method||"GET",body:C.body,credentials:C.credentials,headers:C.headers,referrer:Ze(),signal:N.signal}),vt=!1,xt=!1,At=It(rt.url);C.type==="json"&&rt.headers.set("Accept","application/json");var Ot=function(he,ge,Fe){if(!xt){if(he&&he.message!=="SecurityError"&&U(he),ge&&Fe)return re(ge);var nr=Date.now();self.fetch(rt).then(function(qe){if(qe.ok){var mr=At?qe.clone():null;return re(qe,mr,nr)}else return E(new Qe(qe.statusText,qe.status,C.url))}).catch(function(qe){qe.code!==20&&E(new Error(qe.message))})}},re=function(he,ge,Fe){(C.type==="arrayBuffer"?he.arrayBuffer():C.type==="json"?he.json():he.text()).then(function(nr){xt||(ge&&Fe&&me(rt,ge,Fe),vt=!0,E(null,nr,he.headers.get("Cache-Control"),he.headers.get("Expires")))}).catch(function(nr){xt||E(new Error(nr.message))})};return At?Ke(rt,Ot):Ot(null,null),{cancel:function(){xt=!0,vt||N.abort()}}}function oe(C,E){var N=new self.XMLHttpRequest;N.open(C.method||"GET",C.url,!0),C.type==="arrayBuffer"&&(N.responseType="arraybuffer");for(var rt in C.headers)N.setRequestHeader(rt,C.headers[rt]);return C.type==="json"&&(N.responseType="text",N.setRequestHeader("Accept","application/json")),N.withCredentials=C.credentials==="include",N.onerror=function(){E(new Error(N.statusText))},N.onload=function(){if((N.status>=200&&N.status<300||N.status===0)&&N.response!==null){var vt=N.response;if(C.type==="json")try{vt=JSON.parse(N.response)}catch(xt){return E(xt)}E(null,vt,N.getResponseHeader("Cache-Control"),N.getResponseHeader("Expires"))}else E(new Qe(N.statusText,N.status,C.url))},N.send(C.body),{cancel:function(){return N.abort()}}}var Ht=function(C,E){if(!Ve(C.url)){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return _r(C,E);if(tt()&&self.worker&&self.worker.actor){var N=!0;return self.worker.actor.send("getResource",C,E,void 0,N)}}return oe(C,E)},te=function(C,E){return Ht(A(C,{type:"json"}),E)},ne=function(C,E){return Ht(A(C,{type:"arrayBuffer"}),E)},_e=function(C,E){return Ht(A(C,{method:"POST"}),E)};function Pe(C){var E=self.document.createElement("a");return E.href=C,E.protocol===self.document.location.protocol&&E.host===self.document.location.host}var Et="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Mt(C,E,N,rt){var vt=new self.Image,xt=self.URL;vt.onload=function(){E(null,vt),xt.revokeObjectURL(vt.src)},vt.onerror=function(){return E(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var At=new self.Blob([new Uint8Array(C)],{type:"image/png"});vt.cacheControl=N,vt.expires=rt,vt.src=C.byteLength?xt.createObjectURL(At):Et}function se(C,E){var N=new self.Blob([new Uint8Array(C)],{type:"image/png"});self.createImageBitmap(N).then(function(rt){E(null,rt)}).catch(function(rt){E(new Error("Could not load image because of "+rt.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}var ce,de,Se=function(){ce=[],de=0};Se();var ye=function(C,E){if(it.supported&&(C.headers||(C.headers={}),C.headers.accept="image/webp,*/*"),de>=nt.MAX_PARALLEL_IMAGE_REQUESTS){var N={requestParameters:C,callback:E,cancelled:!1,cancel:function(){this.cancelled=!0}};return ce.push(N),N}de++;var rt=!1,vt=function(){if(!rt)for(rt=!0,de--;ce.length&&de<nt.MAX_PARALLEL_IMAGE_REQUESTS;){var At=ce.shift(),Ot=At.requestParameters,re=At.callback,he=At.cancelled;he||(At.cancel=ye(Ot,re).cancel)}},xt=ne(C,function(At,Ot,re,he){vt(),At?E(At):Ot&&(Qr()?se(Ot,E):Mt(Ot,E,re,he))});return{cancel:function(){xt.cancel(),vt()}}},Ae=function(C,E){var N=self.document.createElement("video");N.muted=!0,N.onloadstart=function(){E(null,N)};for(var rt=0;rt<C.length;rt++){var vt=self.document.createElement("source");Pe(C[rt])||(N.crossOrigin="Anonymous"),vt.src=C[rt],N.appendChild(vt)}return{cancel:function(){}}};function Ge(C,E,N){var rt=N[C]&&N[C].indexOf(E)!==-1;rt||(N[C]=N[C]||[],N[C].push(E))}function sr(C,E,N){if(N&&N[C]){var rt=N[C].indexOf(E);rt!==-1&&N[C].splice(rt,1)}}var Er=function(E,N){N===void 0&&(N={}),A(this,N),this.type=E},kr=function(C){function E(N,rt){rt===void 0&&(rt={}),C.call(this,"error",A({error:N},rt))}return C&&(E.__proto__=C),E.prototype=Object.create(C&&C.prototype),E.prototype.constructor=E,E}(Er),Mr=function(){};Mr.prototype.on=function(E,N){return this._listeners=this._listeners||{},Ge(E,N,this._listeners),this},Mr.prototype.off=function(E,N){return sr(E,N,this._listeners),sr(E,N,this._oneTimeListeners),this},Mr.prototype.once=function(E,N){return this._oneTimeListeners=this._oneTimeListeners||{},Ge(E,N,this._oneTimeListeners),this},Mr.prototype.fire=function(E,N){typeof E=="string"&&(E=new Er(E,N||{}));var rt=E.type;if(this.listens(rt)){E.target=this;for(var vt=this._listeners&&this._listeners[rt]?this._listeners[rt].slice():[],xt=0,At=vt;xt<At.length;xt+=1){var Ot=At[xt];Ot.call(this,E)}for(var re=this._oneTimeListeners&&this._oneTimeListeners[rt]?this._oneTimeListeners[rt].slice():[],he=0,ge=re;he<ge.length;he+=1){var Fe=ge[he];sr(rt,Fe,this._oneTimeListeners),Fe.call(this,E)}var nr=this._eventedParent;nr&&(A(E,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),nr.fire(E))}else E instanceof kr&&console.error(E.error);return this},Mr.prototype.listens=function(E){return this._listeners&&this._listeners[E]&&this._listeners[E].length>0||this._oneTimeListeners&&this._oneTimeListeners[E]&&this._oneTimeListeners[E].length>0||this._eventedParent&&this._eventedParent.listens(E)},Mr.prototype.setEventedParent=function(E,N){return this._eventedParent=E,this._eventedParentData=N,this};var Gr=8,ar={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},xr={"*":{type:"source"}},Ir=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],Hr={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}},Cr={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},ae={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},Le={type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},$e={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},or={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},Dr={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},Nr=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],Fr={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Ar={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Xr={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Tn={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},un={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Un={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Dn={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Xn={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Gn={type:"array",value:"*"},yi={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},Pi={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},pa={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},Wi={type:"array",value:"*",minimum:1},Ji={type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},ji={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},Tr=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],gn={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},hn={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},Sn={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},Zn={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},fi={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},ri={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Rn={"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},jn={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Gi={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},fa={"*":{type:"string"}},Ue={$version:Gr,$root:ar,sources:xr,source:Ir,source_vector:Hr,source_raster:Cr,source_raster_dem:ae,source_geojson:Le,source_video:$e,source_image:or,layer:Dr,layout:Nr,layout_background:Fr,layout_fill:Ar,layout_circle:Xr,layout_heatmap:Tn,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:un,layout_symbol:Un,layout_raster:Dn,layout_hillshade:Xn,filter:Gn,filter_operator:yi,geometry_type:Pi,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:pa,expression:Wi,expression_name:Ji,light:ji,paint:Tr,paint_fill:gn,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:hn,paint_circle:Sn,paint_heatmap:Zn,paint_symbol:fi,paint_raster:ri,paint_hillshade:Rn,paint_background:jn,transition:Gi,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:fa},pr=function(E,N,rt,vt){this.message=(E?E+": ":"")+rt,vt&&(this.identifier=vt),N!=null&&N.__line__&&(this.line=N.__line__)};function an(C){var E=C.key,N=C.value;return N?[new pr(E,N,"constants have been deprecated as of v8")]:[]}function vn(C){for(var E=[],N=arguments.length-1;N-- >0;)E[N]=arguments[N+1];for(var rt=0,vt=E;rt<vt.length;rt+=1){var xt=vt[rt];for(var At in xt)C[At]=xt[At]}return C}function rn(C){return C instanceof Number||C instanceof String||C instanceof Boolean?C.valueOf():C}function An(C){if(Array.isArray(C))return C.map(An);if(C instanceof Object&&!(C instanceof Number||C instanceof String||C instanceof Boolean)){var E={};for(var N in C)E[N]=An(C[N]);return E}return rn(C)}var wn=function(C){function E(N,rt){C.call(this,rt),this.message=rt,this.key=N}return C&&(E.__proto__=C),E.prototype=Object.create(C&&C.prototype),E.prototype.constructor=E,E}(Error),fn=function(E,N){N===void 0&&(N=[]),this.parent=E,this.bindings={};for(var rt=0,vt=N;rt<vt.length;rt+=1){var xt=vt[rt],At=xt[0],Ot=xt[1];this.bindings[At]=Ot}};fn.prototype.concat=function(E){return new fn(this,E)},fn.prototype.get=function(E){if(this.bindings[E])return this.bindings[E];if(this.parent)return this.parent.get(E);throw new Error(E+" not found in scope.")},fn.prototype.has=function(E){return this.bindings[E]?!0:this.parent?this.parent.has(E):!1};var yr={kind:"null"},br={kind:"number"},Or={kind:"string"},yn={kind:"boolean"},Nn={kind:"color"},ni={kind:"object"},kn={kind:"value"},Kn={kind:"error"},oi={kind:"collator"},gi={kind:"formatted"},xi={kind:"resolvedImage"};function ci(C,E){return{kind:"array",itemType:C,N:E}}function Si(C){if(C.kind==="array"){var E=Si(C.itemType);return typeof C.N=="number"?"array<"+E+", "+C.N+">":C.itemType.kind==="value"?"array":"array<"+E+">"}else return C.kind}var ko=[yr,br,Or,yn,Nn,gi,ni,ci(kn),xi];function $o(C,E){if(E.kind==="error")return null;if(C.kind==="array"){if(E.kind==="array"&&(E.N===0&&E.itemType.kind==="value"||!$o(C.itemType,E.itemType))&&(typeof C.N!="number"||C.N===E.N))return null}else{if(C.kind===E.kind)return null;if(C.kind==="value")for(var N=0,rt=ko;N<rt.length;N+=1){var vt=rt[N];if(!$o(vt,E))return null}}return"Expected "+Si(C)+" but found "+Si(E)+" instead."}function ss(C,E){return E.some(function(N){return N.kind===C.kind})}function Al(C,E){return E.some(function(N){return N==="null"?C===null:N==="array"?Array.isArray(C):N==="object"?C&&!Array.isArray(C)&&typeof C=="object":N===typeof C})}var Ul=a(function(C,E){var N={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function rt(he){return he=Math.round(he),he<0?0:he>255?255:he}function vt(he){return he<0?0:he>1?1:he}function xt(he){return he[he.length-1]==="%"?rt(parseFloat(he)/100*255):rt(parseInt(he))}function At(he){return he[he.length-1]==="%"?vt(parseFloat(he)/100):vt(parseFloat(he))}function Ot(he,ge,Fe){return Fe<0?Fe+=1:Fe>1&&(Fe-=1),Fe*6<1?he+(ge-he)*Fe*6:Fe*2<1?ge:Fe*3<2?he+(ge-he)*(2/3-Fe)*6:he}function re(he){var ge=he.replace(/ /g,"").toLowerCase();if(ge in N)return N[ge].slice();if(ge[0]==="#"){if(ge.length===4){var Fe=parseInt(ge.substr(1),16);return Fe>=0&&Fe<=4095?[(Fe&3840)>>4|(Fe&3840)>>8,Fe&240|(Fe&240)>>4,Fe&15|(Fe&15)<<4,1]:null}else if(ge.length===7){var Fe=parseInt(ge.substr(1),16);return Fe>=0&&Fe<=16777215?[(Fe&16711680)>>16,(Fe&65280)>>8,Fe&255,1]:null}return null}var nr=ge.indexOf("("),qe=ge.indexOf(")");if(nr!==-1&&qe+1===ge.length){var mr=ge.substr(0,nr),Br=ge.substr(nr+1,qe-(nr+1)).split(","),sn=1;switch(mr){case"rgba":if(Br.length!==4)return null;sn=At(Br.pop());case"rgb":return Br.length!==3?null:[xt(Br[0]),xt(Br[1]),xt(Br[2]),sn];case"hsla":if(Br.length!==4)return null;sn=At(Br.pop());case"hsl":if(Br.length!==3)return null;var tn=(parseFloat(Br[0])%360+360)%360/360,En=At(Br[1]),xn=At(Br[2]),Cn=xn<=.5?xn*(En+1):xn+En-xn*En,Fn=xn*2-Cn;return[rt(Ot(Fn,Cn,tn+1/3)*255),rt(Ot(Fn,Cn,tn)*255),rt(Ot(Fn,Cn,tn-1/3)*255),sn];default:return null}}return null}try{E.parseCSSColor=re}catch{}}),bc=Ul.parseCSSColor,ga=function(E,N,rt,vt){vt===void 0&&(vt=1),this.r=E,this.g=N,this.b=rt,this.a=vt};ga.parse=function(E){if(!!E){if(E instanceof ga)return E;if(typeof E=="string"){var N=bc(E);if(!!N)return new ga(N[0]/255*N[3],N[1]/255*N[3],N[2]/255*N[3],N[3])}}},ga.prototype.toString=function(){var E=this.toArray(),N=E[0],rt=E[1],vt=E[2],xt=E[3];return"rgba("+Math.round(N)+","+Math.round(rt)+","+Math.round(vt)+","+xt+")"},ga.prototype.toArray=function(){var E=this,N=E.r,rt=E.g,vt=E.b,xt=E.a;return xt===0?[0,0,0,0]:[N*255/xt,rt*255/xt,vt*255/xt,xt]},ga.black=new ga(0,0,0,1),ga.white=new ga(1,1,1,1),ga.transparent=new ga(0,0,0,0),ga.red=new ga(1,0,0,1);var sl=function(E,N,rt){E?this.sensitivity=N?"variant":"case":this.sensitivity=N?"accent":"base",this.locale=rt,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};sl.prototype.compare=function(E,N){return this.collator.compare(E,N)},sl.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Ks=function(E,N,rt,vt,xt){this.text=E,this.image=N,this.scale=rt,this.fontStack=vt,this.textColor=xt},Xa=function(E){this.sections=E};Xa.fromString=function(E){return new Xa([new Ks(E,null,null,null,null)])},Xa.prototype.isEmpty=function(){return this.sections.length===0?!0:!this.sections.some(function(E){return E.text.length!==0||E.image&&E.image.name.length!==0})},Xa.factory=function(E){return E instanceof Xa?E:Xa.fromString(E)},Xa.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(E){return E.text}).join("")},Xa.prototype.serialize=function(){for(var E=["format"],N=0,rt=this.sections;N<rt.length;N+=1){var vt=rt[N];if(vt.image){E.push(["image",vt.image.name]);continue}E.push(vt.text);var xt={};vt.fontStack&&(xt["text-font"]=["literal",vt.fontStack.split(",")]),vt.scale&&(xt["font-scale"]=vt.scale),vt.textColor&&(xt["text-color"]=["rgba"].concat(vt.textColor.toArray())),E.push(xt)}return E};var Ro=function(E){this.name=E.name,this.available=E.available};Ro.prototype.toString=function(){return this.name},Ro.fromString=function(E){return E?new Ro({name:E,available:!1}):null},Ro.prototype.serialize=function(){return["image",this.name]};function Hl(C,E,N,rt){if(!(typeof C=="number"&&C>=0&&C<=255&&typeof E=="number"&&E>=0&&E<=255&&typeof N=="number"&&N>=0&&N<=255)){var vt=typeof rt=="number"?[C,E,N,rt]:[C,E,N];return"Invalid rgba value ["+vt.join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}return typeof rt>"u"||typeof rt=="number"&&rt>=0&&rt<=1?null:"Invalid rgba value ["+[C,E,N,rt].join(", ")+"]: 'a' must be between 0 and 1."}function Cs(C){if(C===null)return!0;if(typeof C=="string")return!0;if(typeof C=="boolean")return!0;if(typeof C=="number")return!0;if(C instanceof ga)return!0;if(C instanceof sl)return!0;if(C instanceof Xa)return!0;if(C instanceof Ro)return!0;if(Array.isArray(C)){for(var E=0,N=C;E<N.length;E+=1){var rt=N[E];if(!Cs(rt))return!1}return!0}else if(typeof C=="object"){for(var vt in C)if(!Cs(C[vt]))return!1;return!0}else return!1}function Ba(C){if(C===null)return yr;if(typeof C=="string")return Or;if(typeof C=="boolean")return yn;if(typeof C=="number")return br;if(C instanceof ga)return Nn;if(C instanceof sl)return oi;if(C instanceof Xa)return gi;if(C instanceof Ro)return xi;if(Array.isArray(C)){for(var E=C.length,N,rt=0,vt=C;rt<vt.length;rt+=1){var xt=vt[rt],At=Ba(xt);if(!N)N=At;else{if(N===At)continue;N=kn;break}}return ci(N||kn,E)}else return ni}function Sl(C){var E=typeof C;return C===null?"":E==="string"||E==="number"||E==="boolean"?String(C):C instanceof ga||C instanceof Xa||C instanceof Ro?C.toString():JSON.stringify(C)}var io=function(E,N){this.type=E,this.value=N};io.parse=function(E,N){if(E.length!==2)return N.error("'literal' expression requires exactly one argument, but found "+(E.length-1)+" instead.");if(!Cs(E[1]))return N.error("invalid value");var rt=E[1],vt=Ba(rt),xt=N.expectedType;return vt.kind==="array"&&vt.N===0&&xt&&xt.kind==="array"&&(typeof xt.N!="number"||xt.N===0)&&(vt=xt),new io(vt,rt)},io.prototype.evaluate=function(){return this.value},io.prototype.eachChild=function(){},io.prototype.outputDefined=function(){return!0},io.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof ga?["rgba"].concat(this.value.toArray()):this.value instanceof Xa?this.value.serialize():this.value};var Va=function(E){this.name="ExpressionEvaluationError",this.message=E};Va.prototype.toJSON=function(){return this.message};var po={string:Or,number:br,boolean:yn,object:ni},ao=function(E,N){this.type=E,this.args=N};ao.parse=function(E,N){if(E.length<2)return N.error("Expected at least one argument.");var rt=1,vt,xt=E[0];if(xt==="array"){var At;if(E.length>2){var Ot=E[1];if(typeof Ot!="string"||!(Ot in po)||Ot==="object")return N.error('The item type argument of "array" must be one of string, number, boolean',1);At=po[Ot],rt++}else At=kn;var re;if(E.length>3){if(E[2]!==null&&(typeof E[2]!="number"||E[2]<0||E[2]!==Math.floor(E[2])))return N.error('The length argument to "array" must be a positive integer literal',2);re=E[2],rt++}vt=ci(At,re)}else vt=po[xt];for(var he=[];rt<E.length;rt++){var ge=N.parse(E[rt],rt,kn);if(!ge)return null;he.push(ge)}return new ao(vt,he)},ao.prototype.evaluate=function(E){for(var N=0;N<this.args.length;N++){var rt=this.args[N].evaluate(E),vt=$o(this.type,Ba(rt));if(vt){if(N===this.args.length-1)throw new Va("Expected value to be of type "+Si(this.type)+", but found "+Si(Ba(rt))+" instead.")}else return rt}return null},ao.prototype.eachChild=function(E){this.args.forEach(E)},ao.prototype.outputDefined=function(){return this.args.every(function(E){return E.outputDefined()})},ao.prototype.serialize=function(){var E=this.type,N=[E.kind];if(E.kind==="array"){var rt=E.itemType;if(rt.kind==="string"||rt.kind==="number"||rt.kind==="boolean"){N.push(rt.kind);var vt=E.N;(typeof vt=="number"||this.args.length>1)&&N.push(vt)}}return N.concat(this.args.map(function(xt){return xt.serialize()}))};var vs=function(E){this.type=gi,this.sections=E};vs.parse=function(E,N){if(E.length<2)return N.error("Expected at least one argument.");var rt=E[1];if(!Array.isArray(rt)&&typeof rt=="object")return N.error("First argument must be an image or text section.");for(var vt=[],xt=!1,At=1;At<=E.length-1;++At){var Ot=E[At];if(xt&&typeof Ot=="object"&&!Array.isArray(Ot)){xt=!1;var re=null;if(Ot["font-scale"]&&(re=N.parse(Ot["font-scale"],1,br),!re))return null;var he=null;if(Ot["text-font"]&&(he=N.parse(Ot["text-font"],1,ci(Or)),!he))return null;var ge=null;if(Ot["text-color"]&&(ge=N.parse(Ot["text-color"],1,Nn),!ge))return null;var Fe=vt[vt.length-1];Fe.scale=re,Fe.font=he,Fe.textColor=ge}else{var nr=N.parse(E[At],1,kn);if(!nr)return null;var qe=nr.type.kind;if(qe!=="string"&&qe!=="value"&&qe!=="null"&&qe!=="resolvedImage")return N.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");xt=!0,vt.push({content:nr,scale:null,font:null,textColor:null})}}return new vs(vt)},vs.prototype.evaluate=function(E){var N=function(rt){var vt=rt.content.evaluate(E);return Ba(vt)===xi?new Ks("",vt,null,null,null):new Ks(Sl(vt),null,rt.scale?rt.scale.evaluate(E):null,rt.font?rt.font.evaluate(E).join(","):null,rt.textColor?rt.textColor.evaluate(E):null)};return new Xa(this.sections.map(N))},vs.prototype.eachChild=function(E){for(var N=0,rt=this.sections;N<rt.length;N+=1){var vt=rt[N];E(vt.content),vt.scale&&E(vt.scale),vt.font&&E(vt.font),vt.textColor&&E(vt.textColor)}},vs.prototype.outputDefined=function(){return!1},vs.prototype.serialize=function(){for(var E=["format"],N=0,rt=this.sections;N<rt.length;N+=1){var vt=rt[N];E.push(vt.content.serialize());var xt={};vt.scale&&(xt["font-scale"]=vt.scale.serialize()),vt.font&&(xt["text-font"]=vt.font.serialize()),vt.textColor&&(xt["text-color"]=vt.textColor.serialize()),E.push(xt)}return E};var ll=function(E){this.type=xi,this.input=E};ll.parse=function(E,N){if(E.length!==2)return N.error("Expected two arguments.");var rt=N.parse(E[1],1,Or);return rt?new ll(rt):N.error("No image name provided.")},ll.prototype.evaluate=function(E){var N=this.input.evaluate(E),rt=Ro.fromString(N);return rt&&E.availableImages&&(rt.available=E.availableImages.indexOf(N)>-1),rt},ll.prototype.eachChild=function(E){E(this.input)},ll.prototype.outputDefined=function(){return!1},ll.prototype.serialize=function(){return["image",this.input.serialize()]};var Fc={"to-boolean":yn,"to-color":Nn,"to-number":br,"to-string":Or},ls=function(E,N){this.type=E,this.args=N};ls.parse=function(E,N){if(E.length<2)return N.error("Expected at least one argument.");var rt=E[0];if((rt==="to-boolean"||rt==="to-string")&&E.length!==2)return N.error("Expected one argument.");for(var vt=Fc[rt],xt=[],At=1;At<E.length;At++){var Ot=N.parse(E[At],At,kn);if(!Ot)return null;xt.push(Ot)}return new ls(vt,xt)},ls.prototype.evaluate=function(E){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(E));if(this.type.kind==="color"){for(var N,rt,vt=0,xt=this.args;vt<xt.length;vt+=1){var At=xt[vt];if(N=At.evaluate(E),rt=null,N instanceof ga)return N;if(typeof N=="string"){var Ot=E.parseColor(N);if(Ot)return Ot}else if(Array.isArray(N)&&(N.length<3||N.length>4?rt="Invalid rbga value "+JSON.stringify(N)+": expected an array containing either three or four numeric values.":rt=Hl(N[0],N[1],N[2],N[3]),!rt))return new ga(N[0]/255,N[1]/255,N[2]/255,N[3])}throw new Va(rt||"Could not parse color from value '"+(typeof N=="string"?N:String(JSON.stringify(N)))+"'")}else if(this.type.kind==="number"){for(var re=null,he=0,ge=this.args;he<ge.length;he+=1){var Fe=ge[he];if(re=Fe.evaluate(E),re===null)return 0;var nr=Number(re);if(!isNaN(nr))return nr}throw new Va("Could not convert "+JSON.stringify(re)+" to number.")}else return this.type.kind==="formatted"?Xa.fromString(Sl(this.args[0].evaluate(E))):this.type.kind==="resolvedImage"?Ro.fromString(Sl(this.args[0].evaluate(E))):Sl(this.args[0].evaluate(E))},ls.prototype.eachChild=function(E){this.args.forEach(E)},ls.prototype.outputDefined=function(){return this.args.every(function(E){return E.outputDefined()})},ls.prototype.serialize=function(){if(this.type.kind==="formatted")return new vs([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new ll(this.args[0]).serialize();var E=["to-"+this.type.kind];return this.eachChild(function(N){E.push(N.serialize())}),E};var Oc=["Unknown","Point","LineString","Polygon"],Js=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Js.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Js.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?Oc[this.feature.type]:this.feature.type:null},Js.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Js.prototype.canonicalID=function(){return this.canonical},Js.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Js.prototype.parseColor=function(E){var N=this._parseColorCache[E];return N||(N=this._parseColorCache[E]=ga.parse(E)),N};var Fo=function(E,N,rt,vt){this.name=E,this.type=N,this._evaluate=rt,this.args=vt};Fo.prototype.evaluate=function(E){return this._evaluate(E,this.args)},Fo.prototype.eachChild=function(E){this.args.forEach(E)},Fo.prototype.outputDefined=function(){return!1},Fo.prototype.serialize=function(){return[this.name].concat(this.args.map(function(E){return E.serialize()}))},Fo.parse=function(E,N){var rt,vt=E[0],xt=Fo.definitions[vt];if(!xt)return N.error('Unknown expression "'+vt+'". If you wanted a literal array, use ["literal", [...]].',0);for(var At=Array.isArray(xt)?xt[0]:xt.type,Ot=Array.isArray(xt)?[[xt[1],xt[2]]]:xt.overloads,re=Ot.filter(function(Di){var Ri=Di[0];return!Array.isArray(Ri)||Ri.length===E.length-1}),he=null,ge=0,Fe=re;ge<Fe.length;ge+=1){var nr=Fe[ge],qe=nr[0],mr=nr[1];he=new Oo(N.registry,N.path,null,N.scope);for(var Br=[],sn=!1,tn=1;tn<E.length;tn++){var En=E[tn],xn=Array.isArray(qe)?qe[tn-1]:qe.type,Cn=he.parse(En,1+Br.length,xn);if(!Cn){sn=!0;break}Br.push(Cn)}if(!sn){if(Array.isArray(qe)&&qe.length!==Br.length){he.error("Expected "+qe.length+" arguments, but found "+Br.length+" instead.");continue}for(var Fn=0;Fn<Br.length;Fn++){var Wn=Array.isArray(qe)?qe[Fn]:qe.type,li=Br[Fn];he.concat(Fn+1).checkSubtype(Wn,li.type)}if(he.errors.length===0)return new Fo(vt,At,mr,Br)}}if(re.length===1)(rt=N.errors).push.apply(rt,he.errors);else{for(var ai=re.length?re:Ot,Fi=ai.map(function(Di){var Ri=Di[0];return fu(Ri)}).join(" | "),Ti=[],Mi=1;Mi<E.length;Mi++){var ia=N.parse(E[Mi],1+Ti.length);if(!ia)return null;Ti.push(Si(ia.type))}N.error("Expected arguments of type "+Fi+", but found ("+Ti.join(", ")+") instead.")}return null},Fo.register=function(E,N){Fo.definitions=N;for(var rt in N)E[rt]=Fo};function fu(C){return Array.isArray(C)?"("+C.map(Si).join(", ")+")":"("+Si(C.type)+"...)"}var Qs=function(E,N,rt){this.type=oi,this.locale=rt,this.caseSensitive=E,this.diacriticSensitive=N};Qs.parse=function(E,N){if(E.length!==2)return N.error("Expected one argument.");var rt=E[1];if(typeof rt!="object"||Array.isArray(rt))return N.error("Collator options argument must be an object.");var vt=N.parse(rt["case-sensitive"]===void 0?!1:rt["case-sensitive"],1,yn);if(!vt)return null;var xt=N.parse(rt["diacritic-sensitive"]===void 0?!1:rt["diacritic-sensitive"],1,yn);if(!xt)return null;var At=null;return rt.locale&&(At=N.parse(rt.locale,1,Or),!At)?null:new Qs(vt,xt,At)},Qs.prototype.evaluate=function(E){return new sl(this.caseSensitive.evaluate(E),this.diacriticSensitive.evaluate(E),this.locale?this.locale.evaluate(E):null)},Qs.prototype.eachChild=function(E){E(this.caseSensitive),E(this.diacriticSensitive),this.locale&&E(this.locale)},Qs.prototype.outputDefined=function(){return!1},Qs.prototype.serialize=function(){var E={};return E["case-sensitive"]=this.caseSensitive.serialize(),E["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(E.locale=this.locale.serialize()),["collator",E]};var Os=8192;function rc(C,E){C[0]=Math.min(C[0],E[0]),C[1]=Math.min(C[1],E[1]),C[2]=Math.max(C[2],E[0]),C[3]=Math.max(C[3],E[1])}function hu(C){return(180+C)/360}function du(C){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+C*Math.PI/360)))/360}function cl(C,E){return!(C[0]<=E[0]||C[2]>=E[2]||C[1]<=E[1]||C[3]>=E[3])}function nc(C,E){var N=hu(C[0]),rt=du(C[1]),vt=Math.pow(2,E.z);return[Math.round(N*vt*Os),Math.round(rt*vt*Os)]}function Bs(C,E,N){var rt=C[0]-E[0],vt=C[1]-E[1],xt=C[0]-N[0],At=C[1]-N[1];return rt*At-xt*vt===0&&rt*xt<=0&&vt*At<=0}function xc(C,E,N){return E[1]>C[1]!=N[1]>C[1]&&C[0]<(N[0]-E[0])*(C[1]-E[1])/(N[1]-E[1])+E[0]}function Ml(C,E){for(var N=!1,rt=0,vt=E.length;rt<vt;rt++)for(var xt=E[rt],At=0,Ot=xt.length;At<Ot-1;At++){if(Bs(C,xt[At],xt[At+1]))return!1;xc(C,xt[At],xt[At+1])&&(N=!N)}return N}function wc(C,E){for(var N=0;N<E.length;N++)if(Ml(C,E[N]))return!0;return!1}function Bc(C,E){return C[0]*E[1]-C[1]*E[0]}function ic(C,E,N,rt){var vt=C[0]-N[0],xt=C[1]-N[1],At=E[0]-N[0],Ot=E[1]-N[1],re=rt[0]-N[0],he=rt[1]-N[1],ge=vt*he-re*xt,Fe=At*he-re*Ot;return ge>0&&Fe<0||ge<0&&Fe>0}function pu(C,E,N,rt){var vt=[E[0]-C[0],E[1]-C[1]],xt=[rt[0]-N[0],rt[1]-N[1]];return Bc(xt,vt)===0?!1:!!(ic(C,E,N,rt)&&ic(N,rt,C,E))}function ul(C,E,N){for(var rt=0,vt=N;rt<vt.length;rt+=1)for(var xt=vt[rt],At=0;At<xt.length-1;++At)if(pu(C,E,xt[At],xt[At+1]))return!0;return!1}function _c(C,E){for(var N=0;N<C.length;++N)if(!Ml(C[N],E))return!1;for(var rt=0;rt<C.length-1;++rt)if(ul(C[rt],C[rt+1],E))return!1;return!0}function ac(C,E){for(var N=0;N<E.length;N++)if(_c(C,E[N]))return!0;return!1}function Es(C,E,N){for(var rt=[],vt=0;vt<C.length;vt++){for(var xt=[],At=0;At<C[vt].length;At++){var Ot=nc(C[vt][At],N);rc(E,Ot),xt.push(Ot)}rt.push(xt)}return rt}function Vl(C,E,N){for(var rt=[],vt=0;vt<C.length;vt++){var xt=Es(C[vt],E,N);rt.push(xt)}return rt}function kc(C,E,N,rt){if(C[0]<N[0]||C[0]>N[2]){var vt=rt*.5,xt=C[0]-N[0]>vt?-rt:N[0]-C[0]>vt?rt:0;xt===0&&(xt=C[0]-N[2]>vt?-rt:N[2]-C[0]>vt?rt:0),C[0]+=xt}rc(E,C)}function Nc(C){C[0]=C[1]=1/0,C[2]=C[3]=-1/0}function Uc(C,E,N,rt){for(var vt=Math.pow(2,rt.z)*Os,xt=[rt.x*Os,rt.y*Os],At=[],Ot=0,re=C;Ot<re.length;Ot+=1)for(var he=re[Ot],ge=0,Fe=he;ge<Fe.length;ge+=1){var nr=Fe[ge],qe=[nr.x+xt[0],nr.y+xt[1]];kc(qe,E,N,vt),At.push(qe)}return At}function oc(C,E,N,rt){for(var vt=Math.pow(2,rt.z)*Os,xt=[rt.x*Os,rt.y*Os],At=[],Ot=0,re=C;Ot<re.length;Ot+=1){for(var he=re[Ot],ge=[],Fe=0,nr=he;Fe<nr.length;Fe+=1){var qe=nr[Fe],mr=[qe.x+xt[0],qe.y+xt[1]];rc(E,mr),ge.push(mr)}At.push(ge)}if(E[2]-E[0]<=vt/2){Nc(E);for(var Br=0,sn=At;Br<sn.length;Br+=1)for(var tn=sn[Br],En=0,xn=tn;En<xn.length;En+=1){var Cn=xn[En];kc(Cn,E,N,vt)}}return At}function vu(C,E){var N=[1/0,1/0,-1/0,-1/0],rt=[1/0,1/0,-1/0,-1/0],vt=C.canonicalID();if(E.type==="Polygon"){var xt=Es(E.coordinates,rt,vt),At=Uc(C.geometry(),N,rt,vt);if(!cl(N,rt))return!1;for(var Ot=0,re=At;Ot<re.length;Ot+=1){var he=re[Ot];if(!Ml(he,xt))return!1}}if(E.type==="MultiPolygon"){var ge=Vl(E.coordinates,rt,vt),Fe=Uc(C.geometry(),N,rt,vt);if(!cl(N,rt))return!1;for(var nr=0,qe=Fe;nr<qe.length;nr+=1){var mr=qe[nr];if(!wc(mr,ge))return!1}}return!0}function Hc(C,E){var N=[1/0,1/0,-1/0,-1/0],rt=[1/0,1/0,-1/0,-1/0],vt=C.canonicalID();if(E.type==="Polygon"){var xt=Es(E.coordinates,rt,vt),At=oc(C.geometry(),N,rt,vt);if(!cl(N,rt))return!1;for(var Ot=0,re=At;Ot<re.length;Ot+=1){var he=re[Ot];if(!_c(he,xt))return!1}}if(E.type==="MultiPolygon"){var ge=Vl(E.coordinates,rt,vt),Fe=oc(C.geometry(),N,rt,vt);if(!cl(N,rt))return!1;for(var nr=0,qe=Fe;nr<qe.length;nr+=1){var mr=qe[nr];if(!ac(mr,ge))return!1}}return!0}var cs=function(E,N){this.type=yn,this.geojson=E,this.geometries=N};cs.parse=function(E,N){if(E.length!==2)return N.error("'within' expression requires exactly one argument, but found "+(E.length-1)+" instead.");if(Cs(E[1])){var rt=E[1];if(rt.type==="FeatureCollection")for(var vt=0;vt<rt.features.length;++vt){var xt=rt.features[vt].geometry.type;if(xt==="Polygon"||xt==="MultiPolygon")return new cs(rt,rt.features[vt].geometry)}else if(rt.type==="Feature"){var At=rt.geometry.type;if(At==="Polygon"||At==="MultiPolygon")return new cs(rt,rt.geometry)}else if(rt.type==="Polygon"||rt.type==="MultiPolygon")return new cs(rt,rt)}return N.error("'within' expression requires valid geojson object that contains polygon geometry type.")},cs.prototype.evaluate=function(E){if(E.geometry()!=null&&E.canonicalID()!=null){if(E.geometryType()==="Point")return vu(E,this.geometries);if(E.geometryType()==="LineString")return Hc(E,this.geometries)}return!1},cs.prototype.eachChild=function(){},cs.prototype.outputDefined=function(){return!0},cs.prototype.serialize=function(){return["within",this.geojson]};function Cl(C){if(C instanceof Fo){if(C.name==="get"&&C.args.length===1)return!1;if(C.name==="feature-state")return!1;if(C.name==="has"&&C.args.length===1)return!1;if(C.name==="properties"||C.name==="geometry-type"||C.name==="id")return!1;if(/^filter-/.test(C.name))return!1}if(C instanceof cs)return!1;var E=!0;return C.eachChild(function(N){E&&!Cl(N)&&(E=!1)}),E}function El(C){if(C instanceof Fo&&C.name==="feature-state")return!1;var E=!0;return C.eachChild(function(N){E&&!El(N)&&(E=!1)}),E}function Tc(C,E){if(C instanceof Fo&&E.indexOf(C.name)>=0)return!1;var N=!0;return C.eachChild(function(rt){N&&!Tc(rt,E)&&(N=!1)}),N}var Ls=function(E,N){this.type=N.type,this.name=E,this.boundExpression=N};Ls.parse=function(E,N){if(E.length!==2||typeof E[1]!="string")return N.error("'var' expression requires exactly one string literal argument.");var rt=E[1];return N.scope.has(rt)?new Ls(rt,N.scope.get(rt)):N.error('Unknown variable "'+rt+'". Make sure "'+rt+'" has been bound in an enclosing "let" expression before using it.',1)},Ls.prototype.evaluate=function(E){return this.boundExpression.evaluate(E)},Ls.prototype.eachChild=function(){},Ls.prototype.outputDefined=function(){return!1},Ls.prototype.serialize=function(){return["var",this.name]};var Oo=function(E,N,rt,vt,xt){N===void 0&&(N=[]),vt===void 0&&(vt=new fn),xt===void 0&&(xt=[]),this.registry=E,this.path=N,this.key=N.map(function(At){return"["+At+"]"}).join(""),this.scope=vt,this.errors=xt,this.expectedType=rt};Oo.prototype.parse=function(E,N,rt,vt,xt){return xt===void 0&&(xt={}),N?this.concat(N,rt,vt)._parse(E,xt):this._parse(E,xt)},Oo.prototype._parse=function(E,N){(E===null||typeof E=="string"||typeof E=="boolean"||typeof E=="number")&&(E=["literal",E]);function rt(ge,Fe,nr){return nr==="assert"?new ao(Fe,[ge]):nr==="coerce"?new ls(Fe,[ge]):ge}if(Array.isArray(E)){if(E.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var vt=E[0];if(typeof vt!="string")return this.error("Expression name must be a string, but found "+typeof vt+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var xt=this.registry[vt];if(xt){var At=xt.parse(E,this);if(!At)return null;if(this.expectedType){var Ot=this.expectedType,re=At.type;if((Ot.kind==="string"||Ot.kind==="number"||Ot.kind==="boolean"||Ot.kind==="object"||Ot.kind==="array")&&re.kind==="value")At=rt(At,Ot,N.typeAnnotation||"assert");else if((Ot.kind==="color"||Ot.kind==="formatted"||Ot.kind==="resolvedImage")&&(re.kind==="value"||re.kind==="string"))At=rt(At,Ot,N.typeAnnotation||"coerce");else if(this.checkSubtype(Ot,re))return null}if(!(At instanceof io)&&At.type.kind!=="resolvedImage"&&sc(At)){var he=new Js;try{At=new io(At.type,At.evaluate(he))}catch(ge){return this.error(ge.message),null}}return At}return this.error('Unknown expression "'+vt+'". If you wanted a literal array, use ["literal", [...]].',0)}else return typeof E>"u"?this.error("'undefined' value invalid. Use null instead."):typeof E=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof E+" instead.")},Oo.prototype.concat=function(E,N,rt){var vt=typeof E=="number"?this.path.concat(E):this.path,xt=rt?this.scope.concat(rt):this.scope;return new Oo(this.registry,vt,N||null,xt,this.errors)},Oo.prototype.error=function(E){for(var N=[],rt=arguments.length-1;rt-- >0;)N[rt]=arguments[rt+1];var vt=""+this.key+N.map(function(xt){return"["+xt+"]"}).join("");this.errors.push(new wn(vt,E))},Oo.prototype.checkSubtype=function(E,N){var rt=$o(E,N);return rt&&this.error(rt),rt};function sc(C){if(C instanceof Ls)return sc(C.boundExpression);if(C instanceof Fo&&C.name==="error")return!1;if(C instanceof Qs)return!1;if(C instanceof cs)return!1;var E=C instanceof ls||C instanceof ao,N=!0;return C.eachChild(function(rt){E?N=N&&sc(rt):N=N&&rt instanceof io}),N?Cl(C)&&Tc(C,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"]):!1}function Ns(C,E){for(var N=C.length-1,rt=0,vt=N,xt=0,At,Ot;rt<=vt;)if(xt=Math.floor((rt+vt)/2),At=C[xt],Ot=C[xt+1],At<=E){if(xt===N||E<Ot)return xt;rt=xt+1}else if(At>E)vt=xt-1;else throw new Va("Input is not a number.");return 0}var Us=function(E,N,rt){this.type=E,this.input=N,this.labels=[],this.outputs=[];for(var vt=0,xt=rt;vt<xt.length;vt+=1){var At=xt[vt],Ot=At[0],re=At[1];this.labels.push(Ot),this.outputs.push(re)}};Us.parse=function(E,N){if(E.length-1<4)return N.error("Expected at least 4 arguments, but found only "+(E.length-1)+".");if((E.length-1)%2!==0)return N.error("Expected an even number of arguments.");var rt=N.parse(E[1],1,br);if(!rt)return null;var vt=[],xt=null;N.expectedType&&N.expectedType.kind!=="value"&&(xt=N.expectedType);for(var At=1;At<E.length;At+=2){var Ot=At===1?-1/0:E[At],re=E[At+1],he=At,ge=At+1;if(typeof Ot!="number")return N.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',he);if(vt.length&&vt[vt.length-1][0]>=Ot)return N.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',he);var Fe=N.parse(re,ge,xt);if(!Fe)return null;xt=xt||Fe.type,vt.push([Ot,Fe])}return new Us(xt,rt,vt)},Us.prototype.evaluate=function(E){var N=this.labels,rt=this.outputs;if(N.length===1)return rt[0].evaluate(E);var vt=this.input.evaluate(E);if(vt<=N[0])return rt[0].evaluate(E);var xt=N.length;if(vt>=N[xt-1])return rt[xt-1].evaluate(E);var At=Ns(N,vt);return rt[At].evaluate(E)},Us.prototype.eachChild=function(E){E(this.input);for(var N=0,rt=this.outputs;N<rt.length;N+=1){var vt=rt[N];E(vt)}},Us.prototype.outputDefined=function(){return this.outputs.every(function(E){return E.outputDefined()})},Us.prototype.serialize=function(){for(var E=["step",this.input.serialize()],N=0;N<this.labels.length;N++)N>0&&E.push(this.labels[N]),E.push(this.outputs[N].serialize());return E};function mo(C,E,N){return C*(1-N)+E*N}function Gl(C,E,N){return new ga(mo(C.r,E.r,N),mo(C.g,E.g,N),mo(C.b,E.b,N),mo(C.a,E.a,N))}function Yl(C,E,N){return C.map(function(rt,vt){return mo(rt,E[vt],N)})}var fl=Object.freeze({__proto__:null,number:mo,color:Gl,array:Yl}),Ds=.95047,Wl=1,Ll=1.08883,lc=4/29,$l=6/29,hl=3*$l*$l,gu=$l*$l*$l,gs=Math.PI/180,Bu=180/Math.PI;function Ac(C){return C>gu?Math.pow(C,1/3):C/hl+lc}function Dl(C){return C>$l?C*C*C:hl*(C-lc)}function Xl(C){return 255*(C<=.0031308?12.92*C:1.055*Math.pow(C,1/2.4)-.055)}function dl(C){return C/=255,C<=.04045?C/12.92:Math.pow((C+.055)/1.055,2.4)}function jl(C){var E=dl(C.r),N=dl(C.g),rt=dl(C.b),vt=Ac((.4124564*E+.3575761*N+.1804375*rt)/Ds),xt=Ac((.2126729*E+.7151522*N+.072175*rt)/Wl),At=Ac((.0193339*E+.119192*N+.9503041*rt)/Ll);return{l:116*xt-16,a:500*(vt-xt),b:200*(xt-At),alpha:C.a}}function Vc(C){var E=(C.l+16)/116,N=isNaN(C.a)?E:E+C.a/500,rt=isNaN(C.b)?E:E-C.b/200;return E=Wl*Dl(E),N=Ds*Dl(N),rt=Ll*Dl(rt),new ga(Xl(3.2404542*N-1.5371385*E-.4985314*rt),Xl(-.969266*N+1.8760108*E+.041556*rt),Xl(.0556434*N-.2040259*E+1.0572252*rt),C.alpha)}function Gc(C,E,N){return{l:mo(C.l,E.l,N),a:mo(C.a,E.a,N),b:mo(C.b,E.b,N),alpha:mo(C.alpha,E.alpha,N)}}function Nu(C){var E=jl(C),N=E.l,rt=E.a,vt=E.b,xt=Math.atan2(vt,rt)*Bu;return{h:xt<0?xt+360:xt,c:Math.sqrt(rt*rt+vt*vt),l:N,alpha:C.a}}function Na(C){var E=C.h*gs,N=C.c,rt=C.l;return Vc({l:rt,a:Math.cos(E)*N,b:Math.sin(E)*N,alpha:C.alpha})}function Pl(C,E,N){var rt=E-C;return C+N*(rt>180||rt<-180?rt-360*Math.round(rt/360):rt)}function pl(C,E,N){return{h:Pl(C.h,E.h,N),c:mo(C.c,E.c,N),l:mo(C.l,E.l,N),alpha:mo(C.alpha,E.alpha,N)}}var us={forward:jl,reverse:Vc,interpolate:Gc},ms={forward:Nu,reverse:Na,interpolate:pl},Zl=Object.freeze({__proto__:null,lab:us,hcl:ms}),yo=function(E,N,rt,vt,xt){this.type=E,this.operator=N,this.interpolation=rt,this.input=vt,this.labels=[],this.outputs=[];for(var At=0,Ot=xt;At<Ot.length;At+=1){var re=Ot[At],he=re[0],ge=re[1];this.labels.push(he),this.outputs.push(ge)}};yo.interpolationFactor=function(E,N,rt,vt){var xt=0;if(E.name==="exponential")xt=Yc(N,E.base,rt,vt);else if(E.name==="linear")xt=Yc(N,1,rt,vt);else if(E.name==="cubic-bezier"){var At=E.controlPoints,Ot=new r(At[0],At[1],At[2],At[3]);xt=Ot.solve(Yc(N,1,rt,vt))}return xt},yo.parse=function(E,N){var rt=E[0],vt=E[1],xt=E[2],At=E.slice(3);if(!Array.isArray(vt)||vt.length===0)return N.error("Expected an interpolation type expression.",1);if(vt[0]==="linear")vt={name:"linear"};else if(vt[0]==="exponential"){var Ot=vt[1];if(typeof Ot!="number")return N.error("Exponential interpolation requires a numeric base.",1,1);vt={name:"exponential",base:Ot}}else if(vt[0]==="cubic-bezier"){var re=vt.slice(1);if(re.length!==4||re.some(function(tn){return typeof tn!="number"||tn<0||tn>1}))return N.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);vt={name:"cubic-bezier",controlPoints:re}}else return N.error("Unknown interpolation type "+String(vt[0]),1,0);if(E.length-1<4)return N.error("Expected at least 4 arguments, but found only "+(E.length-1)+".");if((E.length-1)%2!==0)return N.error("Expected an even number of arguments.");if(xt=N.parse(xt,2,br),!xt)return null;var he=[],ge=null;rt==="interpolate-hcl"||rt==="interpolate-lab"?ge=Nn:N.expectedType&&N.expectedType.kind!=="value"&&(ge=N.expectedType);for(var Fe=0;Fe<At.length;Fe+=2){var nr=At[Fe],qe=At[Fe+1],mr=Fe+3,Br=Fe+4;if(typeof nr!="number")return N.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',mr);if(he.length&&he[he.length-1][0]>=nr)return N.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',mr);var sn=N.parse(qe,Br,ge);if(!sn)return null;ge=ge||sn.type,he.push([nr,sn])}return ge.kind!=="number"&&ge.kind!=="color"&&!(ge.kind==="array"&&ge.itemType.kind==="number"&&typeof ge.N=="number")?N.error("Type "+Si(ge)+" is not interpolatable."):new yo(ge,rt,vt,xt,he)},yo.prototype.evaluate=function(E){var N=this.labels,rt=this.outputs;if(N.length===1)return rt[0].evaluate(E);var vt=this.input.evaluate(E);if(vt<=N[0])return rt[0].evaluate(E);var xt=N.length;if(vt>=N[xt-1])return rt[xt-1].evaluate(E);var At=Ns(N,vt),Ot=N[At],re=N[At+1],he=yo.interpolationFactor(this.interpolation,vt,Ot,re),ge=rt[At].evaluate(E),Fe=rt[At+1].evaluate(E);return this.operator==="interpolate"?fl[this.type.kind.toLowerCase()](ge,Fe,he):this.operator==="interpolate-hcl"?ms.reverse(ms.interpolate(ms.forward(ge),ms.forward(Fe),he)):us.reverse(us.interpolate(us.forward(ge),us.forward(Fe),he))},yo.prototype.eachChild=function(E){E(this.input);for(var N=0,rt=this.outputs;N<rt.length;N+=1){var vt=rt[N];E(vt)}},yo.prototype.outputDefined=function(){return this.outputs.every(function(E){return E.outputDefined()})},yo.prototype.serialize=function(){var E;this.interpolation.name==="linear"?E=["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?E=["linear"]:E=["exponential",this.interpolation.base]:E=["cubic-bezier"].concat(this.interpolation.controlPoints);for(var N=[this.operator,E,this.input.serialize()],rt=0;rt<this.labels.length;rt++)N.push(this.labels[rt],this.outputs[rt].serialize());return N};function Yc(C,E,N,rt){var vt=rt-N,xt=C-N;return vt===0?0:E===1?xt/vt:(Math.pow(E,xt)-1)/(Math.pow(E,vt)-1)}var ys=function(E,N){this.type=E,this.args=N};ys.parse=function(E,N){if(E.length<2)return N.error("Expectected at least one argument.");var rt=null,vt=N.expectedType;vt&&vt.kind!=="value"&&(rt=vt);for(var xt=[],At=0,Ot=E.slice(1);At<Ot.length;At+=1){var re=Ot[At],he=N.parse(re,1+xt.length,rt,void 0,{typeAnnotation:"omit"});if(!he)return null;rt=rt||he.type,xt.push(he)}var ge=vt&&xt.some(function(Fe){return $o(vt,Fe.type)});return ge?new ys(kn,xt):new ys(rt,xt)},ys.prototype.evaluate=function(E){for(var N=null,rt=0,vt,xt=0,At=this.args;xt<At.length;xt+=1){var Ot=At[xt];if(rt++,N=Ot.evaluate(E),N&&N instanceof Ro&&!N.available&&(vt||(vt=N.name),N=null,rt===this.args.length&&(N=vt)),N!==null)break}return N},ys.prototype.eachChild=function(E){this.args.forEach(E)},ys.prototype.outputDefined=function(){return this.args.every(function(E){return E.outputDefined()})},ys.prototype.serialize=function(){var E=["coalesce"];return this.eachChild(function(N){E.push(N.serialize())}),E};var qs=function(E,N){this.type=N.type,this.bindings=[].concat(E),this.result=N};qs.prototype.evaluate=function(E){return this.result.evaluate(E)},qs.prototype.eachChild=function(E){for(var N=0,rt=this.bindings;N<rt.length;N+=1){var vt=rt[N];E(vt[1])}E(this.result)},qs.parse=function(E,N){if(E.length<4)return N.error("Expected at least 3 arguments, but found "+(E.length-1)+" instead.");for(var rt=[],vt=1;vt<E.length-1;vt+=2){var xt=E[vt];if(typeof xt!="string")return N.error("Expected string, but found "+typeof xt+" instead.",vt);if(/[^a-zA-Z0-9_]/.test(xt))return N.error("Variable names must contain only alphanumeric characters or '_'.",vt);var At=N.parse(E[vt+1],vt+1);if(!At)return null;rt.push([xt,At])}var Ot=N.parse(E[E.length-1],E.length-1,N.expectedType,rt);return Ot?new qs(rt,Ot):null},qs.prototype.outputDefined=function(){return this.result.outputDefined()},qs.prototype.serialize=function(){for(var E=["let"],N=0,rt=this.bindings;N<rt.length;N+=1){var vt=rt[N],xt=vt[0],At=vt[1];E.push(xt,At.serialize())}return E.push(this.result.serialize()),E};var tl=function(E,N,rt){this.type=E,this.index=N,this.input=rt};tl.parse=function(E,N){if(E.length!==3)return N.error("Expected 2 arguments, but found "+(E.length-1)+" instead.");var rt=N.parse(E[1],1,br),vt=N.parse(E[2],2,ci(N.expectedType||kn));if(!rt||!vt)return null;var xt=vt.type;return new tl(xt.itemType,rt,vt)},tl.prototype.evaluate=function(E){var N=this.index.evaluate(E),rt=this.input.evaluate(E);if(N<0)throw new Va("Array index out of bounds: "+N+" < 0.");if(N>=rt.length)throw new Va("Array index out of bounds: "+N+" > "+(rt.length-1)+".");if(N!==Math.floor(N))throw new Va("Array index must be an integer, but found "+N+" instead.");return rt[N]},tl.prototype.eachChild=function(E){E(this.index),E(this.input)},tl.prototype.outputDefined=function(){return!1},tl.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Hs=function(E,N){this.type=yn,this.needle=E,this.haystack=N};Hs.parse=function(E,N){if(E.length!==3)return N.error("Expected 2 arguments, but found "+(E.length-1)+" instead.");var rt=N.parse(E[1],1,kn),vt=N.parse(E[2],2,kn);return!rt||!vt?null:ss(rt.type,[yn,Or,br,yr,kn])?new Hs(rt,vt):N.error("Expected first argument to be of type boolean, string, number or null, but found "+Si(rt.type)+" instead")},Hs.prototype.evaluate=function(E){var N=this.needle.evaluate(E),rt=this.haystack.evaluate(E);if(!rt)return!1;if(!Al(N,["boolean","string","number","null"]))throw new Va("Expected first argument to be of type boolean, string, number or null, but found "+Si(Ba(N))+" instead.");if(!Al(rt,["string","array"]))throw new Va("Expected second argument to be of type array or string, but found "+Si(Ba(rt))+" instead.");return rt.indexOf(N)>=0},Hs.prototype.eachChild=function(E){E(this.needle),E(this.haystack)},Hs.prototype.outputDefined=function(){return!0},Hs.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var bs=function(E,N,rt){this.type=br,this.needle=E,this.haystack=N,this.fromIndex=rt};bs.parse=function(E,N){if(E.length<=2||E.length>=5)return N.error("Expected 3 or 4 arguments, but found "+(E.length-1)+" instead.");var rt=N.parse(E[1],1,kn),vt=N.parse(E[2],2,kn);if(!rt||!vt)return null;if(!ss(rt.type,[yn,Or,br,yr,kn]))return N.error("Expected first argument to be of type boolean, string, number or null, but found "+Si(rt.type)+" instead");if(E.length===4){var xt=N.parse(E[3],3,br);return xt?new bs(rt,vt,xt):null}else return new bs(rt,vt)},bs.prototype.evaluate=function(E){var N=this.needle.evaluate(E),rt=this.haystack.evaluate(E);if(!Al(N,["boolean","string","number","null"]))throw new Va("Expected first argument to be of type boolean, string, number or null, but found "+Si(Ba(N))+" instead.");if(!Al(rt,["string","array"]))throw new Va("Expected second argument to be of type array or string, but found "+Si(Ba(rt))+" instead.");if(this.fromIndex){var vt=this.fromIndex.evaluate(E);return rt.indexOf(N,vt)}return rt.indexOf(N)},bs.prototype.eachChild=function(E){E(this.needle),E(this.haystack),this.fromIndex&&E(this.fromIndex)},bs.prototype.outputDefined=function(){return!1},bs.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var E=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),E]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var ja=function(E,N,rt,vt,xt,At){this.inputType=E,this.type=N,this.input=rt,this.cases=vt,this.outputs=xt,this.otherwise=At};ja.parse=function(E,N){if(E.length<5)return N.error("Expected at least 4 arguments, but found only "+(E.length-1)+".");if(E.length%2!==1)return N.error("Expected an even number of arguments.");var rt,vt;N.expectedType&&N.expectedType.kind!=="value"&&(vt=N.expectedType);for(var xt={},At=[],Ot=2;Ot<E.length-1;Ot+=2){var re=E[Ot],he=E[Ot+1];Array.isArray(re)||(re=[re]);var ge=N.concat(Ot);if(re.length===0)return ge.error("Expected at least one branch label.");for(var Fe=0,nr=re;Fe<nr.length;Fe+=1){var qe=nr[Fe];if(typeof qe!="number"&&typeof qe!="string")return ge.error("Branch labels must be numbers or strings.");if(typeof qe=="number"&&Math.abs(qe)>Number.MAX_SAFE_INTEGER)return ge.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof qe=="number"&&Math.floor(qe)!==qe)return ge.error("Numeric branch labels must be integer values.");if(!rt)rt=Ba(qe);else if(ge.checkSubtype(rt,Ba(qe)))return null;if(typeof xt[String(qe)]<"u")return ge.error("Branch labels must be unique.");xt[String(qe)]=At.length}var mr=N.parse(he,Ot,vt);if(!mr)return null;vt=vt||mr.type,At.push(mr)}var Br=N.parse(E[1],1,kn);if(!Br)return null;var sn=N.parse(E[E.length-1],E.length-1,vt);return!sn||Br.type.kind!=="value"&&N.concat(1).checkSubtype(rt,Br.type)?null:new ja(rt,vt,Br,xt,At,sn)},ja.prototype.evaluate=function(E){var N=this.input.evaluate(E),rt=Ba(N)===this.inputType&&this.outputs[this.cases[N]]||this.otherwise;return rt.evaluate(E)},ja.prototype.eachChild=function(E){E(this.input),this.outputs.forEach(E),E(this.otherwise)},ja.prototype.outputDefined=function(){return this.outputs.every(function(E){return E.outputDefined()})&&this.otherwise.outputDefined()},ja.prototype.serialize=function(){for(var E=this,N=["match",this.input.serialize()],rt=Object.keys(this.cases).sort(),vt=[],xt={},At=0,Ot=rt;At<Ot.length;At+=1){var re=Ot[At],he=xt[this.cases[re]];he===void 0?(xt[this.cases[re]]=vt.length,vt.push([this.cases[re],[re]])):vt[he][1].push(re)}for(var ge=function(Br){return E.inputType.kind==="number"?Number(Br):Br},Fe=0,nr=vt;Fe<nr.length;Fe+=1){var qe=nr[Fe],he=qe[0],mr=qe[1];mr.length===1?N.push(ge(mr[0])):N.push(mr.map(ge)),N.push(this.outputs[outputIndex$1].serialize())}return N.push(this.otherwise.serialize()),N};var Bo=function(E,N,rt){this.type=E,this.branches=N,this.otherwise=rt};Bo.parse=function(E,N){if(E.length<4)return N.error("Expected at least 3 arguments, but found only "+(E.length-1)+".");if(E.length%2!==0)return N.error("Expected an odd number of arguments.");var rt;N.expectedType&&N.expectedType.kind!=="value"&&(rt=N.expectedType);for(var vt=[],xt=1;xt<E.length-1;xt+=2){var At=N.parse(E[xt],xt,yn);if(!At)return null;var Ot=N.parse(E[xt+1],xt+1,rt);if(!Ot)return null;vt.push([At,Ot]),rt=rt||Ot.type}var re=N.parse(E[E.length-1],E.length-1,rt);return re?new Bo(rt,vt,re):null},Bo.prototype.evaluate=function(E){for(var N=0,rt=this.branches;N<rt.length;N+=1){var vt=rt[N],xt=vt[0],At=vt[1];if(xt.evaluate(E))return At.evaluate(E)}return this.otherwise.evaluate(E)},Bo.prototype.eachChild=function(E){for(var N=0,rt=this.branches;N<rt.length;N+=1){var vt=rt[N],xt=vt[0],At=vt[1];E(xt),E(At)}E(this.otherwise)},Bo.prototype.outputDefined=function(){return this.branches.every(function(E){E[0];var N=E[1];return N.outputDefined()})&&this.otherwise.outputDefined()},Bo.prototype.serialize=function(){var E=["case"];return this.eachChild(function(N){E.push(N.serialize())}),E};var xs=function(E,N,rt,vt){this.type=E,this.input=N,this.beginIndex=rt,this.endIndex=vt};xs.parse=function(E,N){if(E.length<=2||E.length>=5)return N.error("Expected 3 or 4 arguments, but found "+(E.length-1)+" instead.");var rt=N.parse(E[1],1,kn),vt=N.parse(E[2],2,br);if(!rt||!vt)return null;if(!ss(rt.type,[ci(kn),Or,kn]))return N.error("Expected first argument to be of type array or string, but found "+Si(rt.type)+" instead");if(E.length===4){var xt=N.parse(E[3],3,br);return xt?new xs(rt.type,rt,vt,xt):null}else return new xs(rt.type,rt,vt)},xs.prototype.evaluate=function(E){var N=this.input.evaluate(E),rt=this.beginIndex.evaluate(E);if(!Al(N,["string","array"]))throw new Va("Expected first argument to be of type array or string, but found "+Si(Ba(N))+" instead.");if(this.endIndex){var vt=this.endIndex.evaluate(E);return N.slice(rt,vt)}return N.slice(rt)},xs.prototype.eachChild=function(E){E(this.input),E(this.beginIndex),this.endIndex&&E(this.endIndex)},xs.prototype.outputDefined=function(){return!1},xs.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var E=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),E]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};function Wc(C,E){return C==="=="||C==="!="?E.kind==="boolean"||E.kind==="string"||E.kind==="number"||E.kind==="null"||E.kind==="value":E.kind==="string"||E.kind==="number"||E.kind==="value"}function cc(C,E,N){return E===N}function $c(C,E,N){return E!==N}function be(C,E,N){return E<N}function Oe(C,E,N){return E>N}function dr(C,E,N){return E<=N}function lr(C,E,N){return E>=N}function Rr(C,E,N,rt){return rt.compare(E,N)===0}function nn(C,E,N,rt){return!Rr(C,E,N,rt)}function mn(C,E,N,rt){return rt.compare(E,N)<0}function Mn(C,E,N,rt){return rt.compare(E,N)>0}function Pn(C,E,N,rt){return rt.compare(E,N)<=0}function Hn(C,E,N,rt){return rt.compare(E,N)>=0}function bn(C,E,N){var rt=C!=="=="&&C!=="!=";return function(){function vt(xt,At,Ot){this.type=yn,this.lhs=xt,this.rhs=At,this.collator=Ot,this.hasUntypedArgument=xt.type.kind==="value"||At.type.kind==="value"}return vt.parse=function(At,Ot){if(At.length!==3&&At.length!==4)return Ot.error("Expected two or three arguments.");var re=At[0],he=Ot.parse(At[1],1,kn);if(!he)return null;if(!Wc(re,he.type))return Ot.concat(1).error('"'+re+`" comparisons are not supported for type '`+Si(he.type)+"'.");var ge=Ot.parse(At[2],2,kn);if(!ge)return null;if(!Wc(re,ge.type))return Ot.concat(2).error('"'+re+`" comparisons are not supported for type '`+Si(ge.type)+"'.");if(he.type.kind!==ge.type.kind&&he.type.kind!=="value"&&ge.type.kind!=="value")return Ot.error("Cannot compare types '"+Si(he.type)+"' and '"+Si(ge.type)+"'.");rt&&(he.type.kind==="value"&&ge.type.kind!=="value"?he=new ao(ge.type,[he]):he.type.kind!=="value"&&ge.type.kind==="value"&&(ge=new ao(he.type,[ge])));var Fe=null;if(At.length===4){if(he.type.kind!=="string"&&ge.type.kind!=="string"&&he.type.kind!=="value"&&ge.type.kind!=="value")return Ot.error("Cannot use collator to compare non-string types.");if(Fe=Ot.parse(At[3],3,oi),!Fe)return null}return new vt(he,ge,Fe)},vt.prototype.evaluate=function(At){var Ot=this.lhs.evaluate(At),re=this.rhs.evaluate(At);if(rt&&this.hasUntypedArgument){var he=Ba(Ot),ge=Ba(re);if(he.kind!==ge.kind||!(he.kind==="string"||he.kind==="number"))throw new Va('Expected arguments for "'+C+'" to be (string, string) or (number, number), but found ('+he.kind+", "+ge.kind+") instead.")}if(this.collator&&!rt&&this.hasUntypedArgument){var Fe=Ba(Ot),nr=Ba(re);if(Fe.kind!=="string"||nr.kind!=="string")return E(At,Ot,re)}return this.collator?N(At,Ot,re,this.collator.evaluate(At)):E(At,Ot,re)},vt.prototype.eachChild=function(At){At(this.lhs),At(this.rhs),this.collator&&At(this.collator)},vt.prototype.outputDefined=function(){return!0},vt.prototype.serialize=function(){var At=[C];return this.eachChild(function(Ot){At.push(Ot.serialize())}),At},vt}()}var On=bn("==",cc,Rr),In=bn("!=",$c,nn),Yn=bn("<",be,mn),ti=bn(">",Oe,Mn),Bi=bn("<=",dr,Pn),Ei=bn(">=",lr,Hn),Ni=function(E,N,rt,vt,xt){this.type=Or,this.number=E,this.locale=N,this.currency=rt,this.minFractionDigits=vt,this.maxFractionDigits=xt};Ni.parse=function(E,N){if(E.length!==3)return N.error("Expected two arguments.");var rt=N.parse(E[1],1,br);if(!rt)return null;var vt=E[2];if(typeof vt!="object"||Array.isArray(vt))return N.error("NumberFormat options argument must be an object.");var xt=null;if(vt.locale&&(xt=N.parse(vt.locale,1,Or),!xt))return null;var At=null;if(vt.currency&&(At=N.parse(vt.currency,1,Or),!At))return null;var Ot=null;if(vt["min-fraction-digits"]&&(Ot=N.parse(vt["min-fraction-digits"],1,br),!Ot))return null;var re=null;return vt["max-fraction-digits"]&&(re=N.parse(vt["max-fraction-digits"],1,br),!re)?null:new Ni(rt,xt,At,Ot,re)},Ni.prototype.evaluate=function(E){return new Intl.NumberFormat(this.locale?this.locale.evaluate(E):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(E):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(E):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(E):void 0}).format(this.number.evaluate(E))},Ni.prototype.eachChild=function(E){E(this.number),this.locale&&E(this.locale),this.currency&&E(this.currency),this.minFractionDigits&&E(this.minFractionDigits),this.maxFractionDigits&&E(this.maxFractionDigits)},Ni.prototype.outputDefined=function(){return!1},Ni.prototype.serialize=function(){var E={};return this.locale&&(E.locale=this.locale.serialize()),this.currency&&(E.currency=this.currency.serialize()),this.minFractionDigits&&(E["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(E["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),E]};var Ui=function(E){this.type=br,this.input=E};Ui.parse=function(E,N){if(E.length!==2)return N.error("Expected 1 argument, but found "+(E.length-1)+" instead.");var rt=N.parse(E[1],1);return rt?rt.type.kind!=="array"&&rt.type.kind!=="string"&&rt.type.kind!=="value"?N.error("Expected argument of type string or array, but found "+Si(rt.type)+" instead."):new Ui(rt):null},Ui.prototype.evaluate=function(E){var N=this.input.evaluate(E);if(typeof N=="string")return N.length;if(Array.isArray(N))return N.length;throw new Va("Expected value to be of type string or array, but found "+Si(Ba(N))+" instead.")},Ui.prototype.eachChild=function(E){E(this.input)},Ui.prototype.outputDefined=function(){return!1},Ui.prototype.serialize=function(){var E=["length"];return this.eachChild(function(N){E.push(N.serialize())}),E};var Qn={"==":On,"!=":In,">":ti,"<":Yn,">=":Ei,"<=":Bi,array:ao,at:tl,boolean:ao,case:Bo,coalesce:ys,collator:Qs,format:vs,image:ll,in:Hs,"index-of":bs,interpolate:yo,"interpolate-hcl":yo,"interpolate-lab":yo,length:Ui,let:qs,literal:io,match:ja,number:ao,"number-format":Ni,object:ao,slice:xs,step:Us,string:ao,"to-boolean":ls,"to-color":ls,"to-number":ls,"to-string":ls,var:Ls,within:cs};function pi(C,E){var N=E[0],rt=E[1],vt=E[2],xt=E[3];N=N.evaluate(C),rt=rt.evaluate(C),vt=vt.evaluate(C);var At=xt?xt.evaluate(C):1,Ot=Hl(N,rt,vt,At);if(Ot)throw new Va(Ot);return new ga(N/255*At,rt/255*At,vt/255*At,At)}function $i(C,E){return C in E}function ta(C,E){var N=E[C];return typeof N>"u"?null:N}function ya(C,E,N,rt){for(;N<=rt;){var vt=N+rt>>1;if(E[vt]===C)return!0;E[vt]>C?rt=vt-1:N=vt+1}return!1}function ba(C){return{type:C}}Fo.register(Qn,{error:[Kn,[Or],function(C,E){var N=E[0];throw new Va(N.evaluate(C))}],typeof:[Or,[kn],function(C,E){var N=E[0];return Si(Ba(N.evaluate(C)))}],"to-rgba":[ci(br,4),[Nn],function(C,E){var N=E[0];return N.evaluate(C).toArray()}],rgb:[Nn,[br,br,br],pi],rgba:[Nn,[br,br,br,br],pi],has:{type:yn,overloads:[[[Or],function(C,E){var N=E[0];return $i(N.evaluate(C),C.properties())}],[[Or,ni],function(C,E){var N=E[0],rt=E[1];return $i(N.evaluate(C),rt.evaluate(C))}]]},get:{type:kn,overloads:[[[Or],function(C,E){var N=E[0];return ta(N.evaluate(C),C.properties())}],[[Or,ni],function(C,E){var N=E[0],rt=E[1];return ta(N.evaluate(C),rt.evaluate(C))}]]},"feature-state":[kn,[Or],function(C,E){var N=E[0];return ta(N.evaluate(C),C.featureState||{})}],properties:[ni,[],function(C){return C.properties()}],"geometry-type":[Or,[],function(C){return C.geometryType()}],id:[kn,[],function(C){return C.id()}],zoom:[br,[],function(C){return C.globals.zoom}],"heatmap-density":[br,[],function(C){return C.globals.heatmapDensity||0}],"line-progress":[br,[],function(C){return C.globals.lineProgress||0}],accumulated:[kn,[],function(C){return C.globals.accumulated===void 0?null:C.globals.accumulated}],"+":[br,ba(br),function(C,E){for(var N=0,rt=0,vt=E;rt<vt.length;rt+=1){var xt=vt[rt];N+=xt.evaluate(C)}return N}],"*":[br,ba(br),function(C,E){for(var N=1,rt=0,vt=E;rt<vt.length;rt+=1){var xt=vt[rt];N*=xt.evaluate(C)}return N}],"-":{type:br,overloads:[[[br,br],function(C,E){var N=E[0],rt=E[1];return N.evaluate(C)-rt.evaluate(C)}],[[br],function(C,E){var N=E[0];return-N.evaluate(C)}]]},"/":[br,[br,br],function(C,E){var N=E[0],rt=E[1];return N.evaluate(C)/rt.evaluate(C)}],"%":[br,[br,br],function(C,E){var N=E[0],rt=E[1];return N.evaluate(C)%rt.evaluate(C)}],ln2:[br,[],function(){return Math.LN2}],pi:[br,[],function(){return Math.PI}],e:[br,[],function(){return Math.E}],"^":[br,[br,br],function(C,E){var N=E[0],rt=E[1];return Math.pow(N.evaluate(C),rt.evaluate(C))}],sqrt:[br,[br],function(C,E){var N=E[0];return Math.sqrt(N.evaluate(C))}],log10:[br,[br],function(C,E){var N=E[0];return Math.log(N.evaluate(C))/Math.LN10}],ln:[br,[br],function(C,E){var N=E[0];return Math.log(N.evaluate(C))}],log2:[br,[br],function(C,E){var N=E[0];return Math.log(N.evaluate(C))/Math.LN2}],sin:[br,[br],function(C,E){var N=E[0];return Math.sin(N.evaluate(C))}],cos:[br,[br],function(C,E){var N=E[0];return Math.cos(N.evaluate(C))}],tan:[br,[br],function(C,E){var N=E[0];return Math.tan(N.evaluate(C))}],asin:[br,[br],function(C,E){var N=E[0];return Math.asin(N.evaluate(C))}],acos:[br,[br],function(C,E){var N=E[0];return Math.acos(N.evaluate(C))}],atan:[br,[br],function(C,E){var N=E[0];return Math.atan(N.evaluate(C))}],min:[br,ba(br),function(C,E){return Math.min.apply(Math,E.map(function(N){return N.evaluate(C)}))}],max:[br,ba(br),function(C,E){return Math.max.apply(Math,E.map(function(N){return N.evaluate(C)}))}],abs:[br,[br],function(C,E){var N=E[0];return Math.abs(N.evaluate(C))}],round:[br,[br],function(C,E){var N=E[0],rt=N.evaluate(C);return rt<0?-Math.round(-rt):Math.round(rt)}],floor:[br,[br],function(C,E){var N=E[0];return Math.floor(N.evaluate(C))}],ceil:[br,[br],function(C,E){var N=E[0];return Math.ceil(N.evaluate(C))}],"filter-==":[yn,[Or,kn],function(C,E){var N=E[0],rt=E[1];return C.properties()[N.value]===rt.value}],"filter-id-==":[yn,[kn],function(C,E){var N=E[0];return C.id()===N.value}],"filter-type-==":[yn,[Or],function(C,E){var N=E[0];return C.geometryType()===N.value}],"filter-<":[yn,[Or,kn],function(C,E){var N=E[0],rt=E[1],vt=C.properties()[N.value],xt=rt.value;return typeof vt==typeof xt&&vt<xt}],"filter-id-<":[yn,[kn],function(C,E){var N=E[0],rt=C.id(),vt=N.value;return typeof rt==typeof vt&&rt<vt}],"filter->":[yn,[Or,kn],function(C,E){var N=E[0],rt=E[1],vt=C.properties()[N.value],xt=rt.value;return typeof vt==typeof xt&&vt>xt}],"filter-id->":[yn,[kn],function(C,E){var N=E[0],rt=C.id(),vt=N.value;return typeof rt==typeof vt&&rt>vt}],"filter-<=":[yn,[Or,kn],function(C,E){var N=E[0],rt=E[1],vt=C.properties()[N.value],xt=rt.value;return typeof vt==typeof xt&&vt<=xt}],"filter-id-<=":[yn,[kn],function(C,E){var N=E[0],rt=C.id(),vt=N.value;return typeof rt==typeof vt&&rt<=vt}],"filter->=":[yn,[Or,kn],function(C,E){var N=E[0],rt=E[1],vt=C.properties()[N.value],xt=rt.value;return typeof vt==typeof xt&&vt>=xt}],"filter-id->=":[yn,[kn],function(C,E){var N=E[0],rt=C.id(),vt=N.value;return typeof rt==typeof vt&&rt>=vt}],"filter-has":[yn,[kn],function(C,E){var N=E[0];return N.value in C.properties()}],"filter-has-id":[yn,[],function(C){return C.id()!==null&&C.id()!==void 0}],"filter-type-in":[yn,[ci(Or)],function(C,E){var N=E[0];return N.value.indexOf(C.geometryType())>=0}],"filter-id-in":[yn,[ci(kn)],function(C,E){var N=E[0];return N.value.indexOf(C.id())>=0}],"filter-in-small":[yn,[Or,ci(kn)],function(C,E){var N=E[0],rt=E[1];return rt.value.indexOf(C.properties()[N.value])>=0}],"filter-in-large":[yn,[Or,ci(kn)],function(C,E){var N=E[0],rt=E[1];return ya(C.properties()[N.value],rt.value,0,rt.value.length-1)}],all:{type:yn,overloads:[[[yn,yn],function(C,E){var N=E[0],rt=E[1];return N.evaluate(C)&&rt.evaluate(C)}],[ba(yn),function(C,E){for(var N=0,rt=E;N<rt.length;N+=1){var vt=rt[N];if(!vt.evaluate(C))return!1}return!0}]]},any:{type:yn,overloads:[[[yn,yn],function(C,E){var N=E[0],rt=E[1];return N.evaluate(C)||rt.evaluate(C)}],[ba(yn),function(C,E){for(var N=0,rt=E;N<rt.length;N+=1){var vt=rt[N];if(vt.evaluate(C))return!0}return!1}]]},"!":[yn,[yn],function(C,E){var N=E[0];return!N.evaluate(C)}],"is-supported-script":[yn,[Or],function(C,E){var N=E[0],rt=C.globals&&C.globals.isSupportedScript;return rt?rt(N.evaluate(C)):!0}],upcase:[Or,[Or],function(C,E){var N=E[0];return N.evaluate(C).toUpperCase()}],downcase:[Or,[Or],function(C,E){var N=E[0];return N.evaluate(C).toLowerCase()}],concat:[Or,ba(kn),function(C,E){return E.map(function(N){return Sl(N.evaluate(C))}).join("")}],"resolved-locale":[Or,[oi],function(C,E){var N=E[0];return N.evaluate(C).resolvedLocale()}]});function wa(C){return{result:"success",value:C}}function Ca(C){return{result:"error",value:C}}function ca(C){return C["property-type"]==="data-driven"||C["property-type"]==="cross-faded-data-driven"}function Mo(C){return!!C.expression&&C.expression.parameters.indexOf("zoom")>-1}function lo(C){return!!C.expression&&C.expression.interpolated}function qi(C){return C instanceof Number?"number":C instanceof String?"string":C instanceof Boolean?"boolean":Array.isArray(C)?"array":C===null?"null":typeof C}function vi(C){return typeof C=="object"&&C!==null&&!Array.isArray(C)}function _a(C){return C}function bo(C,E){var N=E.type==="color",rt=C.stops&&typeof C.stops[0][0]=="object",vt=rt||C.property!==void 0,xt=rt||!vt,At=C.type||(lo(E)?"exponential":"interval");if(N&&(C=vn({},C),C.stops&&(C.stops=C.stops.map(function(ai){return[ai[0],ga.parse(ai[1])]})),C.default?C.default=ga.parse(C.default):C.default=ga.parse(E.default)),C.colorSpace&&C.colorSpace!=="rgb"&&!Zl[C.colorSpace])throw new Error("Unknown color space: "+C.colorSpace);var Ot,re,he;if(At==="exponential")Ot=Xo;else if(At==="interval")Ot=Vs;else if(At==="categorical"){Ot=ws,re=Object.create(null);for(var ge=0,Fe=C.stops;ge<Fe.length;ge+=1){var nr=Fe[ge];re[nr[0]]=nr[1]}he=typeof C.stops[0][0]}else if(At==="identity")Ot=vl;else throw new Error('Unknown function type "'+At+'"');if(rt){for(var qe={},mr=[],Br=0;Br<C.stops.length;Br++){var sn=C.stops[Br],tn=sn[0].zoom;qe[tn]===void 0&&(qe[tn]={zoom:tn,type:C.type,property:C.property,default:C.default,stops:[]},mr.push(tn)),qe[tn].stops.push([sn[0].value,sn[1]])}for(var En=[],xn=0,Cn=mr;xn<Cn.length;xn+=1){var Fn=Cn[xn];En.push([qe[Fn].zoom,bo(qe[Fn],E)])}var Wn={name:"linear"};return{kind:"composite",interpolationType:Wn,interpolationFactor:yo.interpolationFactor.bind(void 0,Wn),zoomStops:En.map(function(ai){return ai[0]}),evaluate:function(Fi,Ti){var Mi=Fi.zoom;return Xo({stops:En,base:C.base},E,Mi).evaluate(Mi,Ti)}}}else if(xt){var li=At==="exponential"?{name:"exponential",base:C.base!==void 0?C.base:1}:null;return{kind:"camera",interpolationType:li,interpolationFactor:yo.interpolationFactor.bind(void 0,li),zoomStops:C.stops.map(function(ai){return ai[0]}),evaluate:function(ai){var Fi=ai.zoom;return Ot(C,E,Fi,re,he)}}}else return{kind:"source",evaluate:function(Fi,Ti){var Mi=Ti&&Ti.properties?Ti.properties[C.property]:void 0;return Mi===void 0?To(C.default,E.default):Ot(C,E,Mi,re,he)}}}function To(C,E,N){if(C!==void 0)return C;if(E!==void 0)return E;if(N!==void 0)return N}function ws(C,E,N,rt,vt){var xt=typeof N===vt?rt[N]:void 0;return To(xt,C.default,E.default)}function Vs(C,E,N){if(qi(N)!=="number")return To(C.default,E.default);var rt=C.stops.length;if(rt===1||N<=C.stops[0][0])return C.stops[0][1];if(N>=C.stops[rt-1][0])return C.stops[rt-1][1];var vt=Ns(C.stops.map(function(xt){return xt[0]}),N);return C.stops[vt][1]}function Xo(C,E,N){var rt=C.base!==void 0?C.base:1;if(qi(N)!=="number")return To(C.default,E.default);var vt=C.stops.length;if(vt===1||N<=C.stops[0][0])return C.stops[0][1];if(N>=C.stops[vt-1][0])return C.stops[vt-1][1];var xt=Ns(C.stops.map(function(Fe){return Fe[0]}),N),At=Ps(N,rt,C.stops[xt][0],C.stops[xt+1][0]),Ot=C.stops[xt][1],re=C.stops[xt+1][1],he=fl[E.type]||_a;if(C.colorSpace&&C.colorSpace!=="rgb"){var ge=Zl[C.colorSpace];he=function(Fe,nr){return ge.reverse(ge.interpolate(ge.forward(Fe),ge.forward(nr),At))}}return typeof Ot.evaluate=="function"?{evaluate:function(){for(var nr=[],qe=arguments.length;qe--;)nr[qe]=arguments[qe];var mr=Ot.evaluate.apply(void 0,nr),Br=re.evaluate.apply(void 0,nr);if(!(mr===void 0||Br===void 0))return he(mr,Br,At)}}:he(Ot,re,At)}function vl(C,E,N){return E.type==="color"?N=ga.parse(N):E.type==="formatted"?N=Xa.fromString(N.toString()):E.type==="resolvedImage"?N=Ro.fromString(N.toString()):qi(N)!==E.type&&(E.type!=="enum"||!E.values[N])&&(N=void 0),To(N,C.default,E.default)}function Ps(C,E,N,rt){var vt=rt-N,xt=C-N;return vt===0?0:E===1?xt/vt:(Math.pow(E,xt)-1)/(Math.pow(E,vt)-1)}var _s=function(E,N){this.expression=E,this._warningHistory={},this._evaluator=new Js,this._defaultValue=N?yu(N):null,this._enumValues=N&&N.type==="enum"?N.values:null};_s.prototype.evaluateWithoutErrorHandling=function(E,N,rt,vt,xt,At){return this._evaluator.globals=E,this._evaluator.feature=N,this._evaluator.featureState=rt,this._evaluator.canonical=vt,this._evaluator.availableImages=xt||null,this._evaluator.formattedSection=At,this.expression.evaluate(this._evaluator)},_s.prototype.evaluate=function(E,N,rt,vt,xt,At){this._evaluator.globals=E,this._evaluator.feature=N||null,this._evaluator.featureState=rt||null,this._evaluator.canonical=vt,this._evaluator.availableImages=xt||null,this._evaluator.formattedSection=At||null;try{var Ot=this.expression.evaluate(this._evaluator);if(Ot==null||typeof Ot=="number"&&Ot!==Ot)return this._defaultValue;if(this._enumValues&&!(Ot in this._enumValues))throw new Va("Expected value to be one of "+Object.keys(this._enumValues).map(function(re){return JSON.stringify(re)}).join(", ")+", but found "+JSON.stringify(Ot)+" instead.");return Ot}catch(re){return this._warningHistory[re.message]||(this._warningHistory[re.message]=!0,typeof console<"u"&&console.warn(re.message)),this._defaultValue}};function Co(C){return Array.isArray(C)&&C.length>0&&typeof C[0]=="string"&&C[0]in Qn}function uc(C,E){var N=new Oo(Qn,[],E?jc(E):void 0),rt=N.parse(C,void 0,void 0,void 0,E&&E.type==="string"?{typeAnnotation:"coerce"}:void 0);return rt?wa(new _s(rt,E)):Ca(N.errors)}var Sc=function(E,N){this.kind=E,this._styleExpression=N,this.isStateDependent=E!=="constant"&&!El(N.expression)};Sc.prototype.evaluateWithoutErrorHandling=function(E,N,rt,vt,xt,At){return this._styleExpression.evaluateWithoutErrorHandling(E,N,rt,vt,xt,At)},Sc.prototype.evaluate=function(E,N,rt,vt,xt,At){return this._styleExpression.evaluate(E,N,rt,vt,xt,At)};var ks=function(E,N,rt,vt){this.kind=E,this.zoomStops=rt,this._styleExpression=N,this.isStateDependent=E!=="camera"&&!El(N.expression),this.interpolationType=vt};ks.prototype.evaluateWithoutErrorHandling=function(E,N,rt,vt,xt,At){return this._styleExpression.evaluateWithoutErrorHandling(E,N,rt,vt,xt,At)},ks.prototype.evaluate=function(E,N,rt,vt,xt,At){return this._styleExpression.evaluate(E,N,rt,vt,xt,At)},ks.prototype.interpolationFactor=function(E,N,rt){return this.interpolationType?yo.interpolationFactor(this.interpolationType,E,N,rt):0};function Xc(C,E){if(C=uc(C,E),C.result==="error")return C;var N=C.value.expression,rt=Cl(N);if(!rt&&!ca(E))return Ca([new wn("","data expressions not supported")]);var vt=Tc(N,["zoom"]);if(!vt&&!Mo(E))return Ca([new wn("","zoom expressions not supported")]);var xt=mu(N);if(!xt&&!vt)return Ca([new wn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(xt instanceof wn)return Ca([xt]);if(xt instanceof yo&&!lo(E))return Ca([new wn("",'"interpolate" expressions cannot be used with this property')]);if(!xt)return wa(rt?new Sc("constant",C.value):new Sc("source",C.value));var At=xt instanceof yo?xt.interpolation:void 0;return wa(rt?new ks("camera",C.value,xt.labels,At):new ks("composite",C.value,xt.labels,At))}var fc=function(E,N){this._parameters=E,this._specification=N,vn(this,bo(this._parameters,this._specification))};fc.deserialize=function(E){return new fc(E._parameters,E._specification)},fc.serialize=function(E){return{_parameters:E._parameters,_specification:E._specification}};function bf(C,E){if(vi(C))return new fc(C,E);if(Co(C)){var N=Xc(C,E);if(N.result==="error")throw new Error(N.value.map(function(vt){return vt.key+": "+vt.message}).join(", "));return N.value}else{var rt=C;return typeof C=="string"&&E.type==="color"&&(rt=ga.parse(C)),{kind:"constant",evaluate:function(){return rt}}}}function mu(C){var E=null;if(C instanceof qs)E=mu(C.result);else if(C instanceof ys)for(var N=0,rt=C.args;N<rt.length;N+=1){var vt=rt[N];if(E=mu(vt),E)break}else(C instanceof Us||C instanceof yo)&&C.input instanceof Fo&&C.input.name==="zoom"&&(E=C);return E instanceof wn||C.eachChild(function(xt){var At=mu(xt);At instanceof wn?E=At:!E&&At?E=new wn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):E&&At&&E!==At&&(E=new wn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),E}function jc(C){var E={color:Nn,string:Or,number:br,enum:Or,boolean:yn,formatted:gi,resolvedImage:xi};return C.type==="array"?ci(E[C.value]||kn,C.length):E[C.type]}function yu(C){return C.type==="color"&&vi(C.default)?new ga(0,0,0,0):C.type==="color"?ga.parse(C.default)||null:C.default===void 0?null:C.default}function Gs(C){var E=C.key,N=C.value,rt=C.valueSpec||{},vt=C.objectElementValidators||{},xt=C.style,At=C.styleSpec,Ot=[],re=qi(N);if(re!=="object")return[new pr(E,N,"object expected, "+re+" found")];for(var he in N){var ge=he.split(".")[0],Fe=rt[ge]||rt["*"],nr=void 0;if(vt[ge])nr=vt[ge];else if(rt[ge])nr=va;else if(vt["*"])nr=vt["*"];else if(rt["*"])nr=va;else{Ot.push(new pr(E,N[he],'unknown property "'+he+'"'));continue}Ot=Ot.concat(nr({key:(E&&E+".")+he,value:N[he],valueSpec:Fe,style:xt,styleSpec:At,object:N,objectKey:he},N))}for(var qe in rt)vt[qe]||rt[qe].required&&rt[qe].default===void 0&&N[qe]===void 0&&Ot.push(new pr(E,N,'missing required property "'+qe+'"'));return Ot}function Uu(C){var E=C.value,N=C.valueSpec,rt=C.style,vt=C.styleSpec,xt=C.key,At=C.arrayElementValidator||va;if(qi(E)!=="array")return[new pr(xt,E,"array expected, "+qi(E)+" found")];if(N.length&&E.length!==N.length)return[new pr(xt,E,"array length "+N.length+" expected, length "+E.length+" found")];if(N["min-length"]&&E.length<N["min-length"])return[new pr(xt,E,"array length at least "+N["min-length"]+" expected, length "+E.length+" found")];var Ot={type:N.value,values:N.values};vt.$version<7&&(Ot.function=N.function),qi(N.value)==="object"&&(Ot=N.value);for(var re=[],he=0;he<E.length;he++)re=re.concat(At({array:E,arrayIndex:he,value:E[he],valueSpec:Ot,style:rt,styleSpec:vt,key:xt+"["+he+"]"}));return re}function bu(C){var E=C.key,N=C.value,rt=C.valueSpec,vt=qi(N);return vt==="number"&&N!==N&&(vt="NaN"),vt!=="number"?[new pr(E,N,"number expected, "+vt+" found")]:"minimum"in rt&&N<rt.minimum?[new pr(E,N,N+" is less than the minimum value "+rt.minimum)]:"maximum"in rt&&N>rt.maximum?[new pr(E,N,N+" is greater than the maximum value "+rt.maximum)]:[]}function xu(C){var E=C.valueSpec,N=rn(C.value.type),rt,vt={},xt,At,Ot=N!=="categorical"&&C.value.property===void 0,re=!Ot,he=qi(C.value.stops)==="array"&&qi(C.value.stops[0])==="array"&&qi(C.value.stops[0][0])==="object",ge=Gs({key:C.key,value:C.value,valueSpec:C.styleSpec.function,style:C.style,styleSpec:C.styleSpec,objectElementValidators:{stops:Fe,default:mr}});return N==="identity"&&Ot&&ge.push(new pr(C.key,C.value,'missing required property "property"')),N!=="identity"&&!C.value.stops&&ge.push(new pr(C.key,C.value,'missing required property "stops"')),N==="exponential"&&C.valueSpec.expression&&!lo(C.valueSpec)&&ge.push(new pr(C.key,C.value,"exponential functions not supported")),C.styleSpec.$version>=8&&(re&&!ca(C.valueSpec)?ge.push(new pr(C.key,C.value,"property functions not supported")):Ot&&!Mo(C.valueSpec)&&ge.push(new pr(C.key,C.value,"zoom functions not supported"))),(N==="categorical"||he)&&C.value.property===void 0&&ge.push(new pr(C.key,C.value,'"property" property is required')),ge;function Fe(Br){if(N==="identity")return[new pr(Br.key,Br.value,'identity function may not have a "stops" property')];var sn=[],tn=Br.value;return sn=sn.concat(Uu({key:Br.key,value:tn,valueSpec:Br.valueSpec,style:Br.style,styleSpec:Br.styleSpec,arrayElementValidator:nr})),qi(tn)==="array"&&tn.length===0&&sn.push(new pr(Br.key,tn,"array must have at least one stop")),sn}function nr(Br){var sn=[],tn=Br.value,En=Br.key;if(qi(tn)!=="array")return[new pr(En,tn,"array expected, "+qi(tn)+" found")];if(tn.length!==2)return[new pr(En,tn,"array length 2 expected, length "+tn.length+" found")];if(he){if(qi(tn[0])!=="object")return[new pr(En,tn,"object expected, "+qi(tn[0])+" found")];if(tn[0].zoom===void 0)return[new pr(En,tn,"object stop key must have zoom")];if(tn[0].value===void 0)return[new pr(En,tn,"object stop key must have value")];if(At&&At>rn(tn[0].zoom))return[new pr(En,tn[0].zoom,"stop zoom values must appear in ascending order")];rn(tn[0].zoom)!==At&&(At=rn(tn[0].zoom),xt=void 0,vt={}),sn=sn.concat(Gs({key:En+"[0]",value:tn[0],valueSpec:{zoom:{}},style:Br.style,styleSpec:Br.styleSpec,objectElementValidators:{zoom:bu,value:qe}}))}else sn=sn.concat(qe({key:En+"[0]",value:tn[0],valueSpec:{},style:Br.style,styleSpec:Br.styleSpec},tn));return Co(An(tn[1]))?sn.concat([new pr(En+"[1]",tn[1],"expressions are not allowed in function stops.")]):sn.concat(va({key:En+"[1]",value:tn[1],valueSpec:E,style:Br.style,styleSpec:Br.styleSpec}))}function qe(Br,sn){var tn=qi(Br.value),En=rn(Br.value),xn=Br.value!==null?Br.value:sn;if(!rt)rt=tn;else if(tn!==rt)return[new pr(Br.key,xn,tn+" stop domain type must match previous stop domain type "+rt)];if(tn!=="number"&&tn!=="string"&&tn!=="boolean")return[new pr(Br.key,xn,"stop domain value must be a number, string, or boolean")];if(tn!=="number"&&N!=="categorical"){var Cn="number expected, "+tn+" found";return ca(E)&&N===void 0&&(Cn+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new pr(Br.key,xn,Cn)]}return N==="categorical"&&tn==="number"&&(!isFinite(En)||Math.floor(En)!==En)?[new pr(Br.key,xn,"integer expected, found "+En)]:N!=="categorical"&&tn==="number"&&xt!==void 0&&En<xt?[new pr(Br.key,xn,"stop domain values must appear in ascending order")]:(xt=En,N==="categorical"&&En in vt?[new pr(Br.key,xn,"stop domain values must be unique")]:(vt[En]=!0,[]))}function mr(Br){return va({key:Br.key,value:Br.value,valueSpec:E,style:Br.style,styleSpec:Br.styleSpec})}}function jo(C){var E=(C.expressionContext==="property"?Xc:uc)(An(C.value),C.valueSpec);if(E.result==="error")return E.value.map(function(rt){return new pr(""+C.key+rt.key,C.value,rt.message)});var N=E.value.expression||E.value._styleExpression.expression;if(C.expressionContext==="property"&&C.propertyKey==="text-font"&&!N.outputDefined())return[new pr(C.key,C.value,'Invalid data expression for "'+C.propertyKey+'". Output values must be contained as literals within the expression.')];if(C.expressionContext==="property"&&C.propertyType==="layout"&&!El(N))return[new pr(C.key,C.value,'"feature-state" data expressions are not supported with layout properties.')];if(C.expressionContext==="filter"&&!El(N))return[new pr(C.key,C.value,'"feature-state" data expressions are not supported with filters.')];if(C.expressionContext&&C.expressionContext.indexOf("cluster")===0){if(!Tc(N,["zoom","feature-state"]))return[new pr(C.key,C.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(C.expressionContext==="cluster-initial"&&!Cl(N))return[new pr(C.key,C.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function wu(C){var E=C.value,N=C.key,rt=qi(E);return rt!=="boolean"?[new pr(N,E,"boolean expected, "+rt+" found")]:[]}function Ju(C){var E=C.key,N=C.value,rt=qi(N);return rt!=="string"?[new pr(E,N,"color expected, "+rt+" found")]:bc(N)===null?[new pr(E,N,'color expected, "'+N+'" found')]:[]}function Is(C){var E=C.key,N=C.value,rt=C.valueSpec,vt=[];return Array.isArray(rt.values)?rt.values.indexOf(rn(N))===-1&&vt.push(new pr(E,N,"expected one of ["+rt.values.join(", ")+"], "+JSON.stringify(N)+" found")):Object.keys(rt.values).indexOf(rn(N))===-1&&vt.push(new pr(E,N,"expected one of ["+Object.keys(rt.values).join(", ")+"], "+JSON.stringify(N)+" found")),vt}function Zc(C){if(C===!0||C===!1)return!0;if(!Array.isArray(C)||C.length===0)return!1;switch(C[0]){case"has":return C.length>=2&&C[1]!=="$id"&&C[1]!=="$type";case"in":return C.length>=3&&(typeof C[1]!="string"||Array.isArray(C[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return C.length!==3||Array.isArray(C[1])||Array.isArray(C[2]);case"any":case"all":for(var E=0,N=C.slice(1);E<N.length;E+=1){var rt=N[E];if(!Zc(rt)&&typeof rt!="boolean")return!1}return!0;default:return!0}}var Kc={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function _u(C){if(C==null)return{filter:function(){return!0},needGeometry:!1};Zc(C)||(C=ie(C));var E=uc(C,Kc);if(E.result==="error")throw new Error(E.value.map(function(rt){return rt.key+": "+rt.message}).join(", "));var N=jt(C);return{filter:function(rt,vt,xt){return E.value.evaluate(rt,vt,{},xt)},needGeometry:N}}function Ft(C,E){return C<E?-1:C>E?1:0}function jt(C){if(!Array.isArray(C))return!1;if(C[0]==="within")return!0;for(var E=1;E<C.length;E++)if(jt(C[E]))return!0;return!1}function ie(C){if(!C)return!0;var E=C[0];if(C.length<=1)return E!=="any";var N=E==="=="?ue(C[1],C[2],"=="):E==="!="?fr(ue(C[1],C[2],"==")):E==="<"||E===">"||E==="<="||E===">="?ue(C[1],C[2],E):E==="any"?ke(C.slice(1)):E==="all"?["all"].concat(C.slice(1).map(ie)):E==="none"?["all"].concat(C.slice(1).map(ie).map(fr)):E==="in"?xe(C[1],C.slice(2)):E==="!in"?fr(xe(C[1],C.slice(2))):E==="has"?Me(C[1]):E==="!has"?fr(Me(C[1])):E==="within"?C:!0;return N}function ue(C,E,N){switch(C){case"$type":return["filter-type-"+N,E];case"$id":return["filter-id-"+N,E];default:return["filter-"+N,C,E]}}function ke(C){return["any"].concat(C.map(ie))}function xe(C,E){if(E.length===0)return!1;switch(C){case"$type":return["filter-type-in",["literal",E]];case"$id":return["filter-id-in",["literal",E]];default:return E.length>200&&!E.some(function(N){return typeof N!=typeof E[0]})?["filter-in-large",C,["literal",E.sort(Ft)]]:["filter-in-small",C,["literal",E]]}}function Me(C){switch(C){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",C]}}function fr(C){return["!",C]}function gr(C){return Zc(An(C.value))?jo(vn({},C,{expressionContext:"filter",valueSpec:{value:"boolean"}})):cr(C)}function cr(C){var E=C.value,N=C.key;if(qi(E)!=="array")return[new pr(N,E,"array expected, "+qi(E)+" found")];var rt=C.styleSpec,vt,xt=[];if(E.length<1)return[new pr(N,E,"filter array must have at least 1 element")];switch(xt=xt.concat(Is({key:N+"[0]",value:E[0],valueSpec:rt.filter_operator,style:C.style,styleSpec:C.styleSpec})),rn(E[0])){case"<":case"<=":case">":case">=":E.length>=2&&rn(E[1])==="$type"&&xt.push(new pr(N,E,'"$type" cannot be use with operator "'+E[0]+'"'));case"==":case"!=":E.length!==3&&xt.push(new pr(N,E,'filter array for operator "'+E[0]+'" must have 3 elements'));case"in":case"!in":E.length>=2&&(vt=qi(E[1]),vt!=="string"&&xt.push(new pr(N+"[1]",E[1],"string expected, "+vt+" found")));for(var At=2;At<E.length;At++)vt=qi(E[At]),rn(E[1])==="$type"?xt=xt.concat(Is({key:N+"["+At+"]",value:E[At],valueSpec:rt.geometry_type,style:C.style,styleSpec:C.styleSpec})):vt!=="string"&&vt!=="number"&&vt!=="boolean"&&xt.push(new pr(N+"["+At+"]",E[At],"string, number, or boolean expected, "+vt+" found"));break;case"any":case"all":case"none":for(var Ot=1;Ot<E.length;Ot++)xt=xt.concat(cr({key:N+"["+Ot+"]",value:E[Ot],style:C.style,styleSpec:C.styleSpec}));break;case"has":case"!has":vt=qi(E[1]),E.length!==2?xt.push(new pr(N,E,'filter array for "'+E[0]+'" operator must have 2 elements')):vt!=="string"&&xt.push(new pr(N+"[1]",E[1],"string expected, "+vt+" found"));break;case"within":vt=qi(E[1]),E.length!==2?xt.push(new pr(N,E,'filter array for "'+E[0]+'" operator must have 2 elements')):vt!=="object"&&xt.push(new pr(N+"[1]",E[1],"object expected, "+vt+" found"));break}return xt}function wr(C,E){var N=C.key,rt=C.style,vt=C.styleSpec,xt=C.value,At=C.objectKey,Ot=vt[E+"_"+C.layerType];if(!Ot)return[];var re=At.match(/^(.*)-transition$/);if(E==="paint"&&re&&Ot[re[1]]&&Ot[re[1]].transition)return va({key:N,value:xt,valueSpec:vt.transition,style:rt,styleSpec:vt});var he=C.valueSpec||Ot[At];if(!he)return[new pr(N,xt,'unknown property "'+At+'"')];var ge;if(qi(xt)==="string"&&ca(he)&&!he.tokens&&(ge=/^{([^}]+)}$/.exec(xt)))return[new pr(N,xt,'"'+At+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(ge[1])+" }`.")];var Fe=[];return C.layerType==="symbol"&&(At==="text-field"&&rt&&!rt.glyphs&&Fe.push(new pr(N,xt,'use of "text-field" requires a style "glyphs" property')),At==="text-font"&&vi(An(xt))&&rn(xt.type)==="identity"&&Fe.push(new pr(N,xt,'"text-font" does not support identity functions'))),Fe.concat(va({key:C.key,value:xt,valueSpec:he,style:rt,styleSpec:vt,expressionContext:"property",propertyType:E,propertyKey:At}))}function zr(C){return wr(C,"paint")}function jr(C){return wr(C,"layout")}function en(C){var E=[],N=C.value,rt=C.key,vt=C.style,xt=C.styleSpec;!N.type&&!N.ref&&E.push(new pr(rt,N,'either "type" or "ref" is required'));var At=rn(N.type),Ot=rn(N.ref);if(N.id)for(var re=rn(N.id),he=0;he<C.arrayIndex;he++){var ge=vt.layers[he];rn(ge.id)===re&&E.push(new pr(rt,N.id,'duplicate layer id "'+N.id+'", previously used at line '+ge.id.__line__))}if("ref"in N){["type","source","source-layer","filter","layout"].forEach(function(mr){mr in N&&E.push(new pr(rt,N[mr],'"'+mr+'" is prohibited for ref layers'))});var Fe;vt.layers.forEach(function(mr){rn(mr.id)===Ot&&(Fe=mr)}),Fe?Fe.ref?E.push(new pr(rt,N.ref,"ref cannot reference another ref layer")):At=rn(Fe.type):E.push(new pr(rt,N.ref,'ref layer "'+Ot+'" not found'))}else if(At!=="background")if(!N.source)E.push(new pr(rt,N,'missing required property "source"'));else{var nr=vt.sources&&vt.sources[N.source],qe=nr&&rn(nr.type);nr?qe==="vector"&&At==="raster"?E.push(new pr(rt,N.source,'layer "'+N.id+'" requires a raster source')):qe==="raster"&&At!=="raster"?E.push(new pr(rt,N.source,'layer "'+N.id+'" requires a vector source')):qe==="vector"&&!N["source-layer"]?E.push(new pr(rt,N,'layer "'+N.id+'" must specify a "source-layer"')):qe==="raster-dem"&&At!=="hillshade"?E.push(new pr(rt,N.source,"raster-dem source can only be used with layer type 'hillshade'.")):At==="line"&&N.paint&&N.paint["line-gradient"]&&(qe!=="geojson"||!nr.lineMetrics)&&E.push(new pr(rt,N,'layer "'+N.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):E.push(new pr(rt,N.source,'source "'+N.source+'" not found'))}return E=E.concat(Gs({key:rt,value:N,valueSpec:xt.layer,style:C.style,styleSpec:C.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return va({key:rt+".type",value:N.type,valueSpec:xt.layer.type,style:C.style,styleSpec:C.styleSpec,object:N,objectKey:"type"})},filter:gr,layout:function(Br){return Gs({layer:N,key:Br.key,value:Br.value,style:Br.style,styleSpec:Br.styleSpec,objectElementValidators:{"*":function(tn){return jr(vn({layerType:At},tn))}}})},paint:function(Br){return Gs({layer:N,key:Br.key,value:Br.value,style:Br.style,styleSpec:Br.styleSpec,objectElementValidators:{"*":function(tn){return zr(vn({layerType:At},tn))}}})}}})),E}function _n(C){var E=C.value,N=C.key,rt=qi(E);return rt!=="string"?[new pr(N,E,"string expected, "+rt+" found")]:[]}var zn={promoteId:mi};function $n(C){var E=C.value,N=C.key,rt=C.styleSpec,vt=C.style;if(!E.type)return[new pr(N,E,'"type" is required')];var xt=rn(E.type),At;switch(xt){case"vector":case"raster":case"raster-dem":return At=Gs({key:N,value:E,valueSpec:rt["source_"+xt.replace("-","_")],style:C.style,styleSpec:rt,objectElementValidators:zn}),At;case"geojson":if(At=Gs({key:N,value:E,valueSpec:rt.source_geojson,style:vt,styleSpec:rt,objectElementValidators:zn}),E.cluster)for(var Ot in E.clusterProperties){var re=E.clusterProperties[Ot],he=re[0],ge=re[1],Fe=typeof he=="string"?[he,["accumulated"],["get",Ot]]:he;At.push.apply(At,jo({key:N+"."+Ot+".map",value:ge,expressionContext:"cluster-map"})),At.push.apply(At,jo({key:N+"."+Ot+".reduce",value:Fe,expressionContext:"cluster-reduce"}))}return At;case"video":return Gs({key:N,value:E,valueSpec:rt.source_video,style:vt,styleSpec:rt});case"image":return Gs({key:N,value:E,valueSpec:rt.source_image,style:vt,styleSpec:rt});case"canvas":return[new pr(N,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Is({key:N+".type",value:E.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:vt,styleSpec:rt})}}function mi(C){var E=C.key,N=C.value;if(qi(N)==="string")return _n({key:E,value:N});var rt=[];for(var vt in N)rt.push.apply(rt,_n({key:E+"."+vt,value:N[vt]}));return rt}function wi(C){var E=C.value,N=C.styleSpec,rt=N.light,vt=C.style,xt=[],At=qi(E);if(E===void 0)return xt;if(At!=="object")return xt=xt.concat([new pr("light",E,"object expected, "+At+" found")]),xt;for(var Ot in E){var re=Ot.match(/^(.*)-transition$/);re&&rt[re[1]]&&rt[re[1]].transition?xt=xt.concat(va({key:Ot,value:E[Ot],valueSpec:N.transition,style:vt,styleSpec:N})):rt[Ot]?xt=xt.concat(va({key:Ot,value:E[Ot],valueSpec:rt[Ot],style:vt,styleSpec:N})):xt=xt.concat([new pr(Ot,E[Ot],'unknown property "'+Ot+'"')])}return xt}function Qi(C){return _n(C).length===0?[]:jo(C)}function Xi(C){return _n(C).length===0?[]:jo(C)}var na={"*":function(){return[]},array:Uu,boolean:wu,number:bu,color:Ju,constants:an,enum:Is,filter:gr,function:xu,layer:en,object:Gs,source:$n,light:wi,string:_n,formatted:Qi,resolvedImage:Xi};function va(C){var E=C.value,N=C.valueSpec,rt=C.styleSpec;if(N.expression&&vi(rn(E)))return xu(C);if(N.expression&&Co(An(E)))return jo(C);if(N.type&&na[N.type])return na[N.type](C);var vt=Gs(vn({},C,{valueSpec:N.type?rt[N.type]:N}));return vt}function vo(C){var E=C.value,N=C.key,rt=_n(C);return rt.length||(E.indexOf("{fontstack}")===-1&&rt.push(new pr(N,E,'"glyphs" url must include a "{fontstack}" token')),E.indexOf("{range}")===-1&&rt.push(new pr(N,E,'"glyphs" url must include a "{range}" token'))),rt}function aa(C,E){E===void 0&&(E=Ue);var N=[];return N=N.concat(va({key:"",value:C,valueSpec:E.$root,styleSpec:E,style:C,objectElementValidators:{glyphs:vo,"*":function(){return[]}}})),C.constants&&(N=N.concat(an({key:"constants",value:C.constants,style:C,styleSpec:E}))),Za(N)}aa.source=xo($n),aa.light=xo(wi),aa.layer=xo(en),aa.filter=xo(gr),aa.paintProperty=xo(zr),aa.layoutProperty=xo(jr);function Za(C){return[].concat(C).sort(function(E,N){return E.line-N.line})}function xo(C){return function(){for(var E=[],N=arguments.length;N--;)E[N]=arguments[N];return Za(C.apply(this,E))}}var Do=aa,ka=Do.light,Ea=Do.paintProperty,Ts=Do.layoutProperty;function Ao(C,E){var N=!1;if(E&&E.length)for(var rt=0,vt=E;rt<vt.length;rt+=1){var xt=vt[rt];C.fire(new kr(new Error(xt.message))),N=!0}return N}var Ho=ft,rs=3;function ft(C,E,N){var rt=this.cells=[];if(C instanceof ArrayBuffer){this.arrayBuffer=C;var vt=new Int32Array(this.arrayBuffer);C=vt[0],E=vt[1],N=vt[2],this.d=E+2*N;for(var xt=0;xt<this.d*this.d;xt++){var At=vt[rs+xt],Ot=vt[rs+xt+1];rt.push(At===Ot?null:vt.subarray(At,Ot))}var re=vt[rs+rt.length],he=vt[rs+rt.length+1];this.keys=vt.subarray(re,he),this.bboxes=vt.subarray(he),this.insert=this._insertReadonly}else{this.d=E+2*N;for(var ge=0;ge<this.d*this.d;ge++)rt.push([]);this.keys=[],this.bboxes=[]}this.n=E,this.extent=C,this.padding=N,this.scale=E/C,this.uid=0;var Fe=N/E*C;this.min=-Fe,this.max=C+Fe}ft.prototype.insert=function(C,E,N,rt,vt){this._forEachCell(E,N,rt,vt,this._insertCell,this.uid++),this.keys.push(C),this.bboxes.push(E),this.bboxes.push(N),this.bboxes.push(rt),this.bboxes.push(vt)},ft.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},ft.prototype._insertCell=function(C,E,N,rt,vt,xt){this.cells[vt].push(xt)},ft.prototype.query=function(C,E,N,rt,vt){var xt=this.min,At=this.max;if(C<=xt&&E<=xt&&At<=N&&At<=rt&&!vt)return Array.prototype.slice.call(this.keys);var Ot=[],re={};return this._forEachCell(C,E,N,rt,this._queryCell,Ot,re,vt),Ot},ft.prototype._queryCell=function(C,E,N,rt,vt,xt,At,Ot){var re=this.cells[vt];if(re!==null)for(var he=this.keys,ge=this.bboxes,Fe=0;Fe<re.length;Fe++){var nr=re[Fe];if(At[nr]===void 0){var qe=nr*4;(Ot?Ot(ge[qe+0],ge[qe+1],ge[qe+2],ge[qe+3]):C<=ge[qe+2]&&E<=ge[qe+3]&&N>=ge[qe+0]&&rt>=ge[qe+1])?(At[nr]=!0,xt.push(he[nr])):At[nr]=!1}}},ft.prototype._forEachCell=function(C,E,N,rt,vt,xt,At,Ot){for(var re=this._convertToCellCoord(C),he=this._convertToCellCoord(E),ge=this._convertToCellCoord(N),Fe=this._convertToCellCoord(rt),nr=re;nr<=ge;nr++)for(var qe=he;qe<=Fe;qe++){var mr=this.d*qe+nr;if(!(Ot&&!Ot(this._convertFromCellCoord(nr),this._convertFromCellCoord(qe),this._convertFromCellCoord(nr+1),this._convertFromCellCoord(qe+1)))&&vt.call(this,C,E,N,rt,mr,xt,At,Ot))return}},ft.prototype._convertFromCellCoord=function(C){return(C-this.padding)/this.scale},ft.prototype._convertToCellCoord=function(C){return Math.max(0,Math.min(this.d-1,Math.floor(C*this.scale)+this.padding))},ft.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var C=this.cells,E=rs+this.cells.length+1+1,N=0,rt=0;rt<this.cells.length;rt++)N+=this.cells[rt].length;var vt=new Int32Array(E+N+this.keys.length+this.bboxes.length);vt[0]=this.extent,vt[1]=this.n,vt[2]=this.padding;for(var xt=E,At=0;At<C.length;At++){var Ot=C[At];vt[rs+At]=xt,vt.set(Ot,xt),xt+=Ot.length}return vt[rs+C.length]=xt,vt.set(this.keys,xt),xt+=this.keys.length,vt[rs+C.length+1]=xt,vt.set(this.bboxes,xt),xt+=this.bboxes.length,vt.buffer};var _t=self.ImageData,Lt=self.ImageBitmap,Ut={};function Bt(C,E,N){N===void 0&&(N={}),Object.defineProperty(E,"_classRegistryKey",{value:C,writeable:!1}),Ut[C]={klass:E,omit:N.omit||[],shallow:N.shallow||[]}}Bt("Object",Object),Ho.serialize=function(E,N){var rt=E.toArrayBuffer();return N&&N.push(rt),{buffer:rt}},Ho.deserialize=function(E){return new Ho(E.buffer)},Bt("Grid",Ho),Bt("Color",ga),Bt("Error",Error),Bt("ResolvedImage",Ro),Bt("StylePropertyFunction",fc),Bt("StyleExpression",_s,{omit:["_evaluator"]}),Bt("ZoomDependentExpression",ks),Bt("ZoomConstantExpression",Sc),Bt("CompoundExpression",Fo,{omit:["_evaluate"]});for(var Jt in Qn)Qn[Jt]._classRegistryKey||Bt("Expression_"+Jt,Qn[Jt]);function we(C){return C&&typeof ArrayBuffer<"u"&&(C instanceof ArrayBuffer||C.constructor&&C.constructor.name==="ArrayBuffer")}function pe(C){return Lt&&C instanceof Lt}function De(C,E){if(C==null||typeof C=="boolean"||typeof C=="number"||typeof C=="string"||C instanceof Boolean||C instanceof Number||C instanceof String||C instanceof Date||C instanceof RegExp)return C;if(we(C)||pe(C))return E&&E.push(C),C;if(ArrayBuffer.isView(C)){var N=C;return E&&E.push(N.buffer),N}if(C instanceof _t)return E&&E.push(C.data.buffer),C;if(Array.isArray(C)){for(var rt=[],vt=0,xt=C;vt<xt.length;vt+=1){var At=xt[vt];rt.push(De(At,E))}return rt}if(typeof C=="object"){var Ot=C.constructor,re=Ot._classRegistryKey;if(!re)throw new Error("can't serialize object of unregistered class");var he=Ot.serialize?Ot.serialize(C,E):{};if(!Ot.serialize){for(var ge in C)if(!!C.hasOwnProperty(ge)&&!(Ut[re].omit.indexOf(ge)>=0)){var Fe=C[ge];he[ge]=Ut[re].shallow.indexOf(ge)>=0?Fe:De(Fe,E)}C instanceof Error&&(he.message=C.message)}if(he.$name)throw new Error("$name property is reserved for worker serialization logic.");return re!=="Object"&&(he.$name=re),he}throw new Error("can't serialize object of type "+typeof C)}function je(C){if(C==null||typeof C=="boolean"||typeof C=="number"||typeof C=="string"||C instanceof Boolean||C instanceof Number||C instanceof String||C instanceof Date||C instanceof RegExp||we(C)||pe(C)||ArrayBuffer.isView(C)||C instanceof _t)return C;if(Array.isArray(C))return C.map(je);if(typeof C=="object"){var E=C.$name||"Object",N=Ut[E],rt=N.klass;if(!rt)throw new Error("can't deserialize unregistered class "+E);if(rt.deserialize)return rt.deserialize(C);for(var vt=Object.create(rt.prototype),xt=0,At=Object.keys(C);xt<At.length;xt+=1){var Ot=At[xt];if(Ot!=="$name"){var re=C[Ot];vt[Ot]=Ut[E].shallow.indexOf(Ot)>=0?re:je(re)}}return vt}throw new Error("can't deserialize object of type "+typeof C)}var tr=function(){this.first=!0};tr.prototype.update=function(E,N){var rt=Math.floor(E);return this.first?(this.first=!1,this.lastIntegerZoom=rt,this.lastIntegerZoomTime=0,this.lastZoom=E,this.lastFloorZoom=rt,!0):(this.lastFloorZoom>rt?(this.lastIntegerZoom=rt+1,this.lastIntegerZoomTime=N):this.lastFloorZoom<rt&&(this.lastIntegerZoom=rt,this.lastIntegerZoomTime=N),E!==this.lastZoom?(this.lastZoom=E,this.lastFloorZoom=rt,!0):!1)};var rr={"Latin-1 Supplement":function(C){return C>=128&&C<=255},Arabic:function(C){return C>=1536&&C<=1791},"Arabic Supplement":function(C){return C>=1872&&C<=1919},"Arabic Extended-A":function(C){return C>=2208&&C<=2303},"Hangul Jamo":function(C){return C>=4352&&C<=4607},"Unified Canadian Aboriginal Syllabics":function(C){return C>=5120&&C<=5759},Khmer:function(C){return C>=6016&&C<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(C){return C>=6320&&C<=6399},"General Punctuation":function(C){return C>=8192&&C<=8303},"Letterlike Symbols":function(C){return C>=8448&&C<=8527},"Number Forms":function(C){return C>=8528&&C<=8591},"Miscellaneous Technical":function(C){return C>=8960&&C<=9215},"Control Pictures":function(C){return C>=9216&&C<=9279},"Optical Character Recognition":function(C){return C>=9280&&C<=9311},"Enclosed Alphanumerics":function(C){return C>=9312&&C<=9471},"Geometric Shapes":function(C){return C>=9632&&C<=9727},"Miscellaneous Symbols":function(C){return C>=9728&&C<=9983},"Miscellaneous Symbols and Arrows":function(C){return C>=11008&&C<=11263},"CJK Radicals Supplement":function(C){return C>=11904&&C<=12031},"Kangxi Radicals":function(C){return C>=12032&&C<=12255},"Ideographic Description Characters":function(C){return C>=12272&&C<=12287},"CJK Symbols and Punctuation":function(C){return C>=12288&&C<=12351},Hiragana:function(C){return C>=12352&&C<=12447},Katakana:function(C){return C>=12448&&C<=12543},Bopomofo:function(C){return C>=12544&&C<=12591},"Hangul Compatibility Jamo":function(C){return C>=12592&&C<=12687},Kanbun:function(C){return C>=12688&&C<=12703},"Bopomofo Extended":function(C){return C>=12704&&C<=12735},"CJK Strokes":function(C){return C>=12736&&C<=12783},"Katakana Phonetic Extensions":function(C){return C>=12784&&C<=12799},"Enclosed CJK Letters and Months":function(C){return C>=12800&&C<=13055},"CJK Compatibility":function(C){return C>=13056&&C<=13311},"CJK Unified Ideographs Extension A":function(C){return C>=13312&&C<=19903},"Yijing Hexagram Symbols":function(C){return C>=19904&&C<=19967},"CJK Unified Ideographs":function(C){return C>=19968&&C<=40959},"Yi Syllables":function(C){return C>=40960&&C<=42127},"Yi Radicals":function(C){return C>=42128&&C<=42191},"Hangul Jamo Extended-A":function(C){return C>=43360&&C<=43391},"Hangul Syllables":function(C){return C>=44032&&C<=55215},"Hangul Jamo Extended-B":function(C){return C>=55216&&C<=55295},"Private Use Area":function(C){return C>=57344&&C<=63743},"CJK Compatibility Ideographs":function(C){return C>=63744&&C<=64255},"Arabic Presentation Forms-A":function(C){return C>=64336&&C<=65023},"Vertical Forms":function(C){return C>=65040&&C<=65055},"CJK Compatibility Forms":function(C){return C>=65072&&C<=65103},"Small Form Variants":function(C){return C>=65104&&C<=65135},"Arabic Presentation Forms-B":function(C){return C>=65136&&C<=65279},"Halfwidth and Fullwidth Forms":function(C){return C>=65280&&C<=65519}};function Sr(C){for(var E=0,N=C;E<N.length;E+=1){var rt=N[E];if(Ur(rt.charCodeAt(0)))return!0}return!1}function qr(C){for(var E=0,N=C;E<N.length;E+=1){var rt=N[E];if(!cn(rt.charCodeAt(0)))return!1}return!0}function cn(C){return!(rr.Arabic(C)||rr["Arabic Supplement"](C)||rr["Arabic Extended-A"](C)||rr["Arabic Presentation Forms-A"](C)||rr["Arabic Presentation Forms-B"](C))}function Pr(C){return C<11904?!1:!!(rr["Bopomofo Extended"](C)||rr.Bopomofo(C)||rr["CJK Compatibility Forms"](C)||rr["CJK Compatibility Ideographs"](C)||rr["CJK Compatibility"](C)||rr["CJK Radicals Supplement"](C)||rr["CJK Strokes"](C)||rr["CJK Symbols and Punctuation"](C)||rr["CJK Unified Ideographs Extension A"](C)||rr["CJK Unified Ideographs"](C)||rr["Enclosed CJK Letters and Months"](C)||rr["Halfwidth and Fullwidth Forms"](C)||rr.Hiragana(C)||rr["Ideographic Description Characters"](C)||rr["Kangxi Radicals"](C)||rr["Katakana Phonetic Extensions"](C)||rr.Katakana(C)||rr["Vertical Forms"](C)||rr["Yi Radicals"](C)||rr["Yi Syllables"](C))}function Ur(C){return C===746||C===747?!0:C<4352?!1:!!(rr["Bopomofo Extended"](C)||rr.Bopomofo(C)||rr["CJK Compatibility Forms"](C)&&!(C>=65097&&C<=65103)||rr["CJK Compatibility Ideographs"](C)||rr["CJK Compatibility"](C)||rr["CJK Radicals Supplement"](C)||rr["CJK Strokes"](C)||rr["CJK Symbols and Punctuation"](C)&&!(C>=12296&&C<=12305)&&!(C>=12308&&C<=12319)&&C!==12336||rr["CJK Unified Ideographs Extension A"](C)||rr["CJK Unified Ideographs"](C)||rr["Enclosed CJK Letters and Months"](C)||rr["Hangul Compatibility Jamo"](C)||rr["Hangul Jamo Extended-A"](C)||rr["Hangul Jamo Extended-B"](C)||rr["Hangul Jamo"](C)||rr["Hangul Syllables"](C)||rr.Hiragana(C)||rr["Ideographic Description Characters"](C)||rr.Kanbun(C)||rr["Kangxi Radicals"](C)||rr["Katakana Phonetic Extensions"](C)||rr.Katakana(C)&&C!==12540||rr["Halfwidth and Fullwidth Forms"](C)&&C!==65288&&C!==65289&&C!==65293&&!(C>=65306&&C<=65310)&&C!==65339&&C!==65341&&C!==65343&&!(C>=65371&&C<=65503)&&C!==65507&&!(C>=65512&&C<=65519)||rr["Small Form Variants"](C)&&!(C>=65112&&C<=65118)&&!(C>=65123&&C<=65126)||rr["Unified Canadian Aboriginal Syllabics"](C)||rr["Unified Canadian Aboriginal Syllabics Extended"](C)||rr["Vertical Forms"](C)||rr["Yijing Hexagram Symbols"](C)||rr["Yi Syllables"](C)||rr["Yi Radicals"](C))}function Zr(C){return!!(rr["Latin-1 Supplement"](C)&&(C===167||C===169||C===174||C===177||C===188||C===189||C===190||C===215||C===247)||rr["General Punctuation"](C)&&(C===8214||C===8224||C===8225||C===8240||C===8241||C===8251||C===8252||C===8258||C===8263||C===8264||C===8265||C===8273)||rr["Letterlike Symbols"](C)||rr["Number Forms"](C)||rr["Miscellaneous Technical"](C)&&(C>=8960&&C<=8967||C>=8972&&C<=8991||C>=8996&&C<=9e3||C===9003||C>=9085&&C<=9114||C>=9150&&C<=9165||C===9167||C>=9169&&C<=9179||C>=9186&&C<=9215)||rr["Control Pictures"](C)&&C!==9251||rr["Optical Character Recognition"](C)||rr["Enclosed Alphanumerics"](C)||rr["Geometric Shapes"](C)||rr["Miscellaneous Symbols"](C)&&!(C>=9754&&C<=9759)||rr["Miscellaneous Symbols and Arrows"](C)&&(C>=11026&&C<=11055||C>=11088&&C<=11097||C>=11192&&C<=11243)||rr["CJK Symbols and Punctuation"](C)||rr.Katakana(C)||rr["Private Use Area"](C)||rr["CJK Compatibility Forms"](C)||rr["Small Form Variants"](C)||rr["Halfwidth and Fullwidth Forms"](C)||C===8734||C===8756||C===8757||C>=9984&&C<=10087||C>=10102&&C<=10131||C===65532||C===65533)}function on(C){return!(Ur(C)||Zr(C))}function ln(C){return rr.Arabic(C)||rr["Arabic Supplement"](C)||rr["Arabic Extended-A"](C)||rr["Arabic Presentation Forms-A"](C)||rr["Arabic Presentation Forms-B"](C)}function Kr(C){return C>=1424&&C<=2303||rr["Arabic Presentation Forms-A"](C)||rr["Arabic Presentation Forms-B"](C)}function Vn(C,E){return!(!E&&Kr(C)||C>=2304&&C<=3583||C>=3840&&C<=4255||rr.Khmer(C))}function ii(C){for(var E=0,N=C;E<N.length;E+=1){var rt=N[E];if(Kr(rt.charCodeAt(0)))return!0}return!1}function ki(C,E){for(var N=0,rt=C;N<rt.length;N+=1){var vt=rt[N];if(!Vn(vt.charCodeAt(0),E))return!1}return!0}var si={unavailable:"unavailable",deferred:"deferred",loading:"loading",loaded:"loaded",error:"error"},Ci=null,ui=si.unavailable,Vi=null,Ii=function(C){C&&typeof C=="string"&&C.indexOf("NetworkError")>-1&&(ui=si.error),Ci&&Ci(C)};function ea(){xa.fire(new Er("pluginStateChange",{pluginStatus:ui,pluginURL:Vi}))}var xa=new Mr,wo=function(){return ui},Ua=function(C){return C({pluginStatus:ui,pluginURL:Vi}),xa.on("pluginStateChange",C),C},hi=function(C,E,N){if(N===void 0&&(N=!1),ui===si.deferred||ui===si.loading||ui===si.loaded)throw new Error("setRTLTextPlugin cannot be called multiple times.");Vi=K.resolveURL(C),ui=si.deferred,Ci=E,ea(),N||sa()},sa=function(){if(ui!==si.deferred||!Vi)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");ui=si.loading,ea(),Vi&&ne({url:Vi},function(C){C?Ii(C):(ui=si.loaded,ea())})},Zi={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return ui===si.loaded||Zi.applyArabicShaping!=null},isLoading:function(){return ui===si.loading},setState:function(E){ui=E.pluginStatus,Vi=E.pluginURL},isParsed:function(){return Zi.applyArabicShaping!=null&&Zi.processBidirectionalText!=null&&Zi.processStyledBidirectionalText!=null},getPluginURL:function(){return Vi}},La=function(){!Zi.isLoading()&&!Zi.isLoaded()&&wo()==="deferred"&&sa()},ua=function(E,N){this.zoom=E,N?(this.now=N.now,this.fadeDuration=N.fadeDuration,this.zoomHistory=N.zoomHistory,this.transition=N.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new tr,this.transition={})};ua.prototype.isSupportedScript=function(E){return ki(E,Zi.isLoaded())},ua.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},ua.prototype.getCrossfadeParameters=function(){var E=this.zoom,N=E-Math.floor(E),rt=this.crossFadingFactor();return E>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:N+(1-N)*rt}:{fromScale:.5,toScale:1,t:1-(1-rt)*N}};var go=function(E,N){this.property=E,this.value=N,this.expression=bf(N===void 0?E.specification.default:N,E.specification)};go.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},go.prototype.possiblyEvaluate=function(E,N,rt){return this.property.possiblyEvaluate(this,E,N,rt)};var oo=function(E){this.property=E,this.value=new go(E,void 0)};oo.prototype.transitioned=function(E,N){return new ns(this.property,this.value,N,A({},E.transition,this.transition),E.now)},oo.prototype.untransitioned=function(){return new ns(this.property,this.value,null,{},0)};var So=function(E){this._properties=E,this._values=Object.create(E.defaultTransitionablePropertyValues)};So.prototype.getValue=function(E){return z(this._values[E].value.value)},So.prototype.setValue=function(E,N){this._values.hasOwnProperty(E)||(this._values[E]=new oo(this._values[E].property)),this._values[E].value=new go(this._values[E].property,N===null?void 0:z(N))},So.prototype.getTransition=function(E){return z(this._values[E].transition)},So.prototype.setTransition=function(E,N){this._values.hasOwnProperty(E)||(this._values[E]=new oo(this._values[E].property)),this._values[E].transition=z(N)||void 0},So.prototype.serialize=function(){for(var E={},N=0,rt=Object.keys(this._values);N<rt.length;N+=1){var vt=rt[N],xt=this.getValue(vt);xt!==void 0&&(E[vt]=xt);var At=this.getTransition(vt);At!==void 0&&(E[vt+"-transition"]=At)}return E},So.prototype.transitioned=function(E,N){for(var rt=new Zo(this._properties),vt=0,xt=Object.keys(this._values);vt<xt.length;vt+=1){var At=xt[vt];rt._values[At]=this._values[At].transitioned(E,N._values[At])}return rt},So.prototype.untransitioned=function(){for(var E=new Zo(this._properties),N=0,rt=Object.keys(this._values);N<rt.length;N+=1){var vt=rt[N];E._values[vt]=this._values[vt].untransitioned()}return E};var ns=function(E,N,rt,vt,xt){this.property=E,this.value=N,this.begin=xt+vt.delay||0,this.end=this.begin+vt.duration||0,E.specification.transition&&(vt.delay||vt.duration)&&(this.prior=rt)};ns.prototype.possiblyEvaluate=function(E,N,rt){var vt=E.now||0,xt=this.value.possiblyEvaluate(E,N,rt),At=this.prior;if(At){if(vt>this.end)return this.prior=null,xt;if(this.value.isDataDriven())return this.prior=null,xt;if(vt<this.begin)return At.possiblyEvaluate(E,N,rt);var Ot=(vt-this.begin)/(this.end-this.begin);return this.property.interpolate(At.possiblyEvaluate(E,N,rt),xt,y(Ot))}else return xt};var Zo=function(E){this._properties=E,this._values=Object.create(E.defaultTransitioningPropertyValues)};Zo.prototype.possiblyEvaluate=function(E,N,rt){for(var vt=new Wa(this._properties),xt=0,At=Object.keys(this._values);xt<At.length;xt+=1){var Ot=At[xt];vt._values[Ot]=this._values[Ot].possiblyEvaluate(E,N,rt)}return vt},Zo.prototype.hasTransition=function(){for(var E=0,N=Object.keys(this._values);E<N.length;E+=1){var rt=N[E];if(this._values[rt].prior)return!0}return!1};var is=function(E){this._properties=E,this._values=Object.create(E.defaultPropertyValues)};is.prototype.getValue=function(E){return z(this._values[E].value)},is.prototype.setValue=function(E,N){this._values[E]=new go(this._values[E].property,N===null?void 0:z(N))},is.prototype.serialize=function(){for(var E={},N=0,rt=Object.keys(this._values);N<rt.length;N+=1){var vt=rt[N],xt=this.getValue(vt);xt!==void 0&&(E[vt]=xt)}return E},is.prototype.possiblyEvaluate=function(E,N,rt){for(var vt=new Wa(this._properties),xt=0,At=Object.keys(this._values);xt<At.length;xt+=1){var Ot=At[xt];vt._values[Ot]=this._values[Ot].possiblyEvaluate(E,N,rt)}return vt};var Ka=function(E,N,rt){this.property=E,this.value=N,this.parameters=rt};Ka.prototype.isConstant=function(){return this.value.kind==="constant"},Ka.prototype.constantOr=function(E){return this.value.kind==="constant"?this.value.value:E},Ka.prototype.evaluate=function(E,N,rt,vt){return this.property.evaluate(this.value,this.parameters,E,N,rt,vt)};var Wa=function(E){this._properties=E,this._values=Object.create(E.defaultPossiblyEvaluatedValues)};Wa.prototype.get=function(E){return this._values[E]};var Oi=function(E){this.specification=E};Oi.prototype.possiblyEvaluate=function(E,N){return E.expression.evaluate(N)},Oi.prototype.interpolate=function(E,N,rt){var vt=fl[this.specification.type];return vt?vt(E,N,rt):E};var Ki=function(E,N){this.specification=E,this.overrides=N};Ki.prototype.possiblyEvaluate=function(E,N,rt,vt){return E.expression.kind==="constant"||E.expression.kind==="camera"?new Ka(this,{kind:"constant",value:E.expression.evaluate(N,null,{},rt,vt)},N):new Ka(this,E.expression,N)},Ki.prototype.interpolate=function(E,N,rt){if(E.value.kind!=="constant"||N.value.kind!=="constant")return E;if(E.value.value===void 0||N.value.value===void 0)return new Ka(this,{kind:"constant",value:void 0},E.parameters);var vt=fl[this.specification.type];return vt?new Ka(this,{kind:"constant",value:vt(E.value.value,N.value.value,rt)},E.parameters):E},Ki.prototype.evaluate=function(E,N,rt,vt,xt,At){return E.kind==="constant"?E.value:E.evaluate(N,rt,vt,xt,At)};var Eo=function(C){function E(){C.apply(this,arguments)}return C&&(E.__proto__=C),E.prototype=Object.create(C&&C.prototype),E.prototype.constructor=E,E.prototype.possiblyEvaluate=function(rt,vt,xt,At){if(rt.value===void 0)return new Ka(this,{kind:"constant",value:void 0},vt);if(rt.expression.kind==="constant"){var Ot=rt.expression.evaluate(vt,null,{},xt,At),re=rt.property.specification.type==="resolvedImage",he=re&&typeof Ot!="string"?Ot.name:Ot,ge=this._calculate(he,he,he,vt);return new Ka(this,{kind:"constant",value:ge},vt)}else if(rt.expression.kind==="camera"){var Fe=this._calculate(rt.expression.evaluate({zoom:vt.zoom-1}),rt.expression.evaluate({zoom:vt.zoom}),rt.expression.evaluate({zoom:vt.zoom+1}),vt);return new Ka(this,{kind:"constant",value:Fe},vt)}else return new Ka(this,rt.expression,vt)},E.prototype.evaluate=function(rt,vt,xt,At,Ot,re){if(rt.kind==="source"){var he=rt.evaluate(vt,xt,At,Ot,re);return this._calculate(he,he,he,vt)}else return rt.kind==="composite"?this._calculate(rt.evaluate({zoom:Math.floor(vt.zoom)-1},xt,At),rt.evaluate({zoom:Math.floor(vt.zoom)},xt,At),rt.evaluate({zoom:Math.floor(vt.zoom)+1},xt,At),vt):rt.value},E.prototype._calculate=function(rt,vt,xt,At){var Ot=At.zoom;return Ot>At.zoomHistory.lastIntegerZoom?{from:rt,to:vt}:{from:xt,to:vt}},E.prototype.interpolate=function(rt){return rt},E}(Ki),co=function(E){this.specification=E};co.prototype.possiblyEvaluate=function(E,N,rt,vt){if(E.value!==void 0)if(E.expression.kind==="constant"){var xt=E.expression.evaluate(N,null,{},rt,vt);return this._calculate(xt,xt,xt,N)}else return this._calculate(E.expression.evaluate(new ua(Math.floor(N.zoom-1),N)),E.expression.evaluate(new ua(Math.floor(N.zoom),N)),E.expression.evaluate(new ua(Math.floor(N.zoom+1),N)),N)},co.prototype._calculate=function(E,N,rt,vt){var xt=vt.zoom;return xt>vt.zoomHistory.lastIntegerZoom?{from:E,to:N}:{from:rt,to:N}},co.prototype.interpolate=function(E){return E};var Vo=function(E){this.specification=E};Vo.prototype.possiblyEvaluate=function(E,N,rt,vt){return!!E.expression.evaluate(N,null,{},rt,vt)},Vo.prototype.interpolate=function(){return!1};var eo=function(E){this.properties=E,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(var N in E){var rt=E[N];rt.specification.overridable&&this.overridableProperties.push(N);var vt=this.defaultPropertyValues[N]=new go(rt,void 0),xt=this.defaultTransitionablePropertyValues[N]=new oo(rt);this.defaultTransitioningPropertyValues[N]=xt.untransitioned(),this.defaultPossiblyEvaluatedValues[N]=vt.possiblyEvaluate({})}};Bt("DataDrivenProperty",Ki),Bt("DataConstantProperty",Oi),Bt("CrossFadedDataDrivenProperty",Eo),Bt("CrossFadedProperty",co),Bt("ColorRampProperty",Vo);var as="-transition",zs=function(C){function E(N,rt){if(C.call(this),this.id=N.id,this.type=N.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},N.type!=="custom"&&(N=N,this.metadata=N.metadata,this.minzoom=N.minzoom,this.maxzoom=N.maxzoom,N.type!=="background"&&(this.source=N.source,this.sourceLayer=N["source-layer"],this.filter=N.filter),rt.layout&&(this._unevaluatedLayout=new is(rt.layout)),rt.paint)){this._transitionablePaint=new So(rt.paint);for(var vt in N.paint)this.setPaintProperty(vt,N.paint[vt],{validate:!1});for(var xt in N.layout)this.setLayoutProperty(xt,N.layout[xt],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Wa(rt.paint)}}return C&&(E.__proto__=C),E.prototype=Object.create(C&&C.prototype),E.prototype.constructor=E,E.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},E.prototype.getLayoutProperty=function(rt){return rt==="visibility"?this.visibility:this._unevaluatedLayout.getValue(rt)},E.prototype.setLayoutProperty=function(rt,vt,xt){if(xt===void 0&&(xt={}),vt!=null){var At="layers."+this.id+".layout."+rt;if(this._validate(Ts,At,rt,vt,xt))return}if(rt==="visibility"){this.visibility=vt;return}this._unevaluatedLayout.setValue(rt,vt)},E.prototype.getPaintProperty=function(rt){return M(rt,as)?this._transitionablePaint.getTransition(rt.slice(0,-as.length)):this._transitionablePaint.getValue(rt)},E.prototype.setPaintProperty=function(rt,vt,xt){if(xt===void 0&&(xt={}),vt!=null){var At="layers."+this.id+".paint."+rt;if(this._validate(Ea,At,rt,vt,xt))return!1}if(M(rt,as))return this._transitionablePaint.setTransition(rt.slice(0,-as.length),vt||void 0),!1;var Ot=this._transitionablePaint._values[rt],re=Ot.property.specification["property-type"]==="cross-faded-data-driven",he=Ot.value.isDataDriven(),ge=Ot.value;this._transitionablePaint.setValue(rt,vt),this._handleSpecialPaintPropertyUpdate(rt);var Fe=this._transitionablePaint._values[rt].value,nr=Fe.isDataDriven();return nr||he||re||this._handleOverridablePaintPropertyUpdate(rt,ge,Fe)},E.prototype._handleSpecialPaintPropertyUpdate=function(rt){},E.prototype._handleOverridablePaintPropertyUpdate=function(rt,vt,xt){return!1},E.prototype.isHidden=function(rt){return this.minzoom&&rt<this.minzoom||this.maxzoom&&rt>=this.maxzoom?!0:this.visibility==="none"},E.prototype.updateTransitions=function(rt){this._transitioningPaint=this._transitionablePaint.transitioned(rt,this._transitioningPaint)},E.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},E.prototype.recalculate=function(rt,vt){rt.getCrossfadeParameters&&(this._crossfadeParameters=rt.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(rt,void 0,vt)),this.paint=this._transitioningPaint.possiblyEvaluate(rt,void 0,vt)},E.prototype.serialize=function(){var rt={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(rt.layout=rt.layout||{},rt.layout.visibility=this.visibility),R(rt,function(vt,xt){return vt!==void 0&&!(xt==="layout"&&!Object.keys(vt).length)&&!(xt==="paint"&&!Object.keys(vt).length)})},E.prototype._validate=function(rt,vt,xt,At,Ot){return Ot===void 0&&(Ot={}),Ot&&Ot.validate===!1?!1:Ao(this,rt.call(Do,{key:vt,layerType:this.type,objectKey:xt,value:At,styleSpec:Ue,style:{glyphs:!0,sprite:!0}}))},E.prototype.is3D=function(){return!1},E.prototype.isTileClipped=function(){return!1},E.prototype.hasOffscreenPass=function(){return!1},E.prototype.resize=function(){},E.prototype.isStateDependent=function(){for(var rt in this.paint._values){var vt=this.paint.get(rt);if(!(!(vt instanceof Ka)||!ca(vt.property.specification))&&(vt.value.kind==="source"||vt.value.kind==="composite")&&vt.value.isStateDependent)return!0}return!1},E}(Mr),hc={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},ro=function(E,N){this._structArray=E,this._pos1=N*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Qu=128,Kl=5,Ga=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};Ga.serialize=function(E,N){return E._trim(),N&&(E.isTransferred=!0,N.push(E.arrayBuffer)),{length:E.length,arrayBuffer:E.arrayBuffer}},Ga.deserialize=function(E){var N=Object.create(this.prototype);return N.arrayBuffer=E.arrayBuffer,N.length=E.length,N.capacity=E.arrayBuffer.byteLength/N.bytesPerElement,N._refreshViews(),N},Ga.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Ga.prototype.clear=function(){this.length=0},Ga.prototype.resize=function(E){this.reserve(E),this.length=E},Ga.prototype.reserve=function(E){if(E>this.capacity){this.capacity=Math.max(E,Math.floor(this.capacity*Kl),Qu),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var N=this.uint8;this._refreshViews(),N&&this.uint8.set(N)}},Ga.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};function Go(C,E){E===void 0&&(E=1);var N=0,rt=0,vt=C.map(function(At){var Ot=lv(At.type),re=N=Zf(N,Math.max(E,Ot)),he=At.components||1;return rt=Math.max(rt,Ot),N+=Ot*he,{name:At.name,type:At.type,components:he,offset:re}}),xt=Zf(N,Math.max(rt,E));return{members:vt,size:xt,alignment:E}}function lv(C){return hc[C].BYTES_PER_ELEMENT}function Zf(C,E){return Math.ceil(C/E)*E}var xf=function(C){function E(){C.apply(this,arguments)}return C&&(E.__proto__=C),E.prototype=Object.create(C&&C.prototype),E.prototype.constructor=E,E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},E.prototype.emplaceBack=function(rt,vt){var xt=this.length;return this.resize(xt+1),this.emplace(xt,rt,vt)},E.prototype.emplace=function(rt,vt,xt){var At=rt*2;return this.int16[At+0]=vt,this.int16[At+1]=xt,rt},E}(Ga);xf.prototype.bytesPerElement=4,Bt("StructArrayLayout2i4",xf);var ku=function(C){function E(){C.apply(this,arguments)}return C&&(E.__proto__=C),E.prototype=Object.create(C&&C.prototype),E.prototype.constructor=E,E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},E.prototype.emplaceBack=function(rt,vt,xt,At){var Ot=this.length;return this.resize(Ot+1),this.emplace(Ot,rt,vt,xt,At)},E.prototype.emplace=function(rt,vt,xt,At,Ot){var re=rt*4;return this.int16[re+0]=vt,this.int16[re+1]=xt,this.int16[re+2]=At,this.int16[re+3]=Ot,rt},E}(Ga);ku.prototype.bytesPerElement=8,Bt("StructArrayLayout4i8",ku);var qu=function(C){function E(){C.apply(this,arguments)}return C&&(E.__proto__=C),E.prototype=Object.create(C&&C.prototype),E.prototype.constructor=E,E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},E.prototype.emplaceBack=function(rt,vt,xt,At,Ot,re){var he=this.length;return this.resize(he+1),this.emplace(he,rt,vt,xt,At,Ot,re)},E.prototype.emplace=function(rt,vt,xt,At,Ot,re,he){var ge=rt*6;return this.int16[ge+0]=vt,this.int16[ge+1]=xt,this.int16[ge+2]=At,this.int16[ge+3]=Ot,this.int16[ge+4]=re,this.int16[ge+5]=he,rt},E}(Ga);qu.prototype.bytesPerElement=12,Bt("StructArrayLayout2i4i12",qu);var Kf=function(C){function E(){C.apply(this,arguments)}return C&&(E.__proto__=C),E.prototype=Object.create(C&&C.prototype),E.prototype.constructor=E,E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},E.prototype.emplaceBack=function(rt,vt,xt,At,Ot,re){var he=this.length;return this.resize(he+1),this.emplace(he,rt,vt,xt,At,Ot,re)},E.prototype.emplace=function(rt,vt,xt,At,Ot,re,he){var ge=rt*4,Fe=rt*8;return this.int16[ge+0]=vt,this.int16[ge+1]=xt,this.uint8[Fe+4]=At,this.uint8[Fe+5]=Ot,this.uint8[Fe+6]=re,this.uint8[Fe+7]=he,rt},E}(Ga);Kf.prototype.bytesPerElement=8,Bt("StructArrayLayout2i4ub8",Kf);var el=function(C){function E(){C.apply(this,arguments)}return C&&(E.__proto__=C),E.prototype=Object.create(C&&C.prototype),E.prototype.constructor=E,E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},E.prototype.emplaceBack=function(rt,vt,xt,At,Ot,re,he,ge,Fe,nr){var qe=this.length;return this.resize(qe+1),this.emplace(qe,rt,vt,xt,At,Ot,re,he,ge,Fe,nr)},E.prototype.emplace=function(rt,vt,xt,At,Ot,re,he,ge,Fe,nr,qe){var mr=rt*9,Br=rt*18;return this.uint16[mr+0]=vt,this.uint16[mr+1]=xt,this.uint16[mr+2]=At,this.uint16[mr+3]=Ot,this.uint16[mr+4]=re,this.uint16[mr+5]=he,this.uint16[mr+6]=ge,this.uint16[mr+7]=Fe,this.uint8[Br+16]=nr,this.uint8[Br+17]=qe,rt},E}(Ga);el.prototype.bytesPerElement=18,Bt("StructArrayLayout8ui2ub18",el);var Tu=function(C){function E(){C.apply(this,arguments)}return C&&(E.__proto__=C),E.prototype=Object.create(C&&C.prototype),E.prototype.constructor=E,E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},E.prototype.emplaceBack=function(rt,vt,xt,At,Ot,re,he,ge,Fe,nr,qe,mr){var Br=this.length;return this.resize(Br+1),this.emplace(Br,rt,vt,xt,At,Ot,re,he,ge,Fe,nr,qe,mr)},E.prototype.emplace=function(rt,vt,xt,At,Ot,re,he,ge,Fe,nr,qe,mr,Br){var sn=rt*12;return this.int16[sn+0]=vt,this.int16[sn+1]=xt,this.int16[sn+2]=At,this.int16[sn+3]=Ot,this.uint16[sn+4]=re,this.uint16[sn+5]=he,this.uint16[sn+6]=ge,this.uint16[sn+7]=Fe,this.int16[sn+8]=nr,this.int16[sn+9]=qe,this.int16[sn+10]=mr,this.int16[sn+11]=Br,rt},E}(Ga);Tu.prototype.bytesPerElement=24,Bt("StructArrayLayout4i4ui4i24",Tu);var Yh=function(C){function E(){C.apply(this,arguments)}return C&&(E.__proto__=C),E.prototype=Object.create(C&&C.prototype),E.prototype.constructor=E,E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},E.prototype.emplaceBack=function(rt,vt,xt){var At=this.length;return this.resize(At+1),this.emplace(At,rt,vt,xt)},E.prototype.emplace=function(rt,vt,xt,At){var Ot=rt*3;return this.float32[Ot+0]=vt,this.float32[Ot+1]=xt,this.float32[Ot+2]=At,rt},E}(Ga);Yh.prototype.bytesPerElement=12,Bt("StructArrayLayout3f12",Yh);var Wh=function(C){function E(){C.apply(this,arguments)}return C&&(E.__proto__=C),E.prototype=Object.create(C&&C.prototype),E.prototype.constructor=E,E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},E.prototype.emplaceBack=function(rt){var vt=this.length;return this.resize(vt+1),this.emplace(vt,rt)},E.prototype.emplace=function(rt,vt){var xt=rt*1;return this.uint32[xt+0]=vt,rt},E}(Ga);Wh.prototype.bytesPerElement=4,Bt("StructArrayLayout1ul4",Wh);var wf=function(C){function E(){C.apply(this,arguments)}return C&&(E.__proto__=C),E.prototype=Object.create(C&&C.prototype),E.prototype.constructor=E,E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},E.prototype.emplaceBack=function(rt,vt,xt,At,Ot,re,he,ge,Fe){var nr=this.length;return this.resize(nr+1),this.emplace(nr,rt,vt,xt,At,Ot,re,he,ge,Fe)},E.prototype.emplace=function(rt,vt,xt,At,Ot,re,he,ge,Fe,nr){var qe=rt*10,mr=rt*5;return this.int16[qe+0]=vt,this.int16[qe+1]=xt,this.int16[qe+2]=At,this.int16[qe+3]=Ot,this.int16[qe+4]=re,this.int16[qe+5]=he,this.uint32[mr+3]=ge,this.uint16[qe+8]=Fe,this.uint16[qe+9]=nr,rt},E}(Ga);wf.prototype.bytesPerElement=20,Bt("StructArrayLayout6i1ul2ui20",wf);var Jf=function(C){function E(){C.apply(this,arguments)}return C&&(E.__proto__=C),E.prototype=Object.create(C&&C.prototype),E.prototype.constructor=E,E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},E.prototype.emplaceBack=function(rt,vt,xt,At,Ot,re){var he=this.length;return this.resize(he+1),this.emplace(he,rt,vt,xt,At,Ot,re)},E.prototype.emplace=function(rt,vt,xt,At,Ot,re,he){var ge=rt*6;return this.int16[ge+0]=vt,this.int16[ge+1]=xt,this.int16[ge+2]=At,this.int16[ge+3]=Ot,this.int16[ge+4]=re,this.int16[ge+5]=he,rt},E}(Ga);Jf.prototype.bytesPerElement=12,Bt("StructArrayLayout2i2i2i12",Jf);var Jc=function(C){function E(){C.apply(this,arguments)}return C&&(E.__proto__=C),E.prototype=Object.create(C&&C.prototype),E.prototype.constructor=E,E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},E.prototype.emplaceBack=function(rt,vt,xt,At,Ot){var re=this.length;return this.resize(re+1),this.emplace(re,rt,vt,xt,At,Ot)},E.prototype.emplace=function(rt,vt,xt,At,Ot,re){var he=rt*4,ge=rt*8;return this.float32[he+0]=vt,this.float32[he+1]=xt,this.float32[he+2]=At,this.int16[ge+6]=Ot,this.int16[ge+7]=re,rt},E}(Ga);Jc.prototype.bytesPerElement=16,Bt("StructArrayLayout2f1f2i16",Jc);var ml=function(C){function E(){C.apply(this,arguments)}return C&&(E.__proto__=C),E.prototype=Object.create(C&&C.prototype),E.prototype.constructor=E,E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},E.prototype.emplaceBack=function(rt,vt,xt,At){var Ot=this.length;return this.resize(Ot+1),this.emplace(Ot,rt,vt,xt,At)},E.prototype.emplace=function(rt,vt,xt,At,Ot){var re=rt*12,he=rt*3;return this.uint8[re+0]=vt,this.uint8[re+1]=xt,this.float32[he+1]=At,this.float32[he+2]=Ot,rt},E}(Ga);ml.prototype.bytesPerElement=12,Bt("StructArrayLayout2ub2f12",ml);var Qc=function(C){function E(){C.apply(this,arguments)}return C&&(E.__proto__=C),E.prototype=Object.create(C&&C.prototype),E.prototype.constructor=E,E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},E.prototype.emplaceBack=function(rt,vt,xt){var At=this.length;return this.resize(At+1),this.emplace(At,rt,vt,xt)},E.prototype.emplace=function(rt,vt,xt,At){var Ot=rt*3;return this.uint16[Ot+0]=vt,this.uint16[Ot+1]=xt,this.uint16[Ot+2]=At,rt},E}(Ga);Qc.prototype.bytesPerElement=6,Bt("StructArrayLayout3ui6",Qc);var _f=function(C){function E(){C.apply(this,arguments)}return C&&(E.__proto__=C),E.prototype=Object.create(C&&C.prototype),E.prototype.constructor=E,E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},E.prototype.emplaceBack=function(rt,vt,xt,At,Ot,re,he,ge,Fe,nr,qe,mr,Br,sn,tn,En,xn){var Cn=this.length;return this.resize(Cn+1),this.emplace(Cn,rt,vt,xt,At,Ot,re,he,ge,Fe,nr,qe,mr,Br,sn,tn,En,xn)},E.prototype.emplace=function(rt,vt,xt,At,Ot,re,he,ge,Fe,nr,qe,mr,Br,sn,tn,En,xn,Cn){var Fn=rt*24,Wn=rt*12,li=rt*48;return this.int16[Fn+0]=vt,this.int16[Fn+1]=xt,this.uint16[Fn+2]=At,this.uint16[Fn+3]=Ot,this.uint32[Wn+2]=re,this.uint32[Wn+3]=he,this.uint32[Wn+4]=ge,this.uint16[Fn+10]=Fe,this.uint16[Fn+11]=nr,this.uint16[Fn+12]=qe,this.float32[Wn+7]=mr,this.float32[Wn+8]=Br,this.uint8[li+36]=sn,this.uint8[li+37]=tn,this.uint8[li+38]=En,this.uint32[Wn+10]=xn,this.int16[Fn+22]=Cn,rt},E}(Ga);_f.prototype.bytesPerElement=48,Bt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",_f);var Qf=function(C){function E(){C.apply(this,arguments)}return C&&(E.__proto__=C),E.prototype=Object.create(C&&C.prototype),E.prototype.constructor=E,E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},E.prototype.emplaceBack=function(rt,vt,xt,At,Ot,re,he,ge,Fe,nr,qe,mr,Br,sn,tn,En,xn,Cn,Fn,Wn,li,ai,Fi,Ti,Mi,ia,Di,Ri){var da=this.length;return this.resize(da+1),this.emplace(da,rt,vt,xt,At,Ot,re,he,ge,Fe,nr,qe,mr,Br,sn,tn,En,xn,Cn,Fn,Wn,li,ai,Fi,Ti,Mi,ia,Di,Ri)},E.prototype.emplace=function(rt,vt,xt,At,Ot,re,he,ge,Fe,nr,qe,mr,Br,sn,tn,En,xn,Cn,Fn,Wn,li,ai,Fi,Ti,Mi,ia,Di,Ri,da){var ra=rt*34,Da=rt*17;return this.int16[ra+0]=vt,this.int16[ra+1]=xt,this.int16[ra+2]=At,this.int16[ra+3]=Ot,this.int16[ra+4]=re,this.int16[ra+5]=he,this.int16[ra+6]=ge,this.int16[ra+7]=Fe,this.uint16[ra+8]=nr,this.uint16[ra+9]=qe,this.uint16[ra+10]=mr,this.uint16[ra+11]=Br,this.uint16[ra+12]=sn,this.uint16[ra+13]=tn,this.uint16[ra+14]=En,this.uint16[ra+15]=xn,this.uint16[ra+16]=Cn,this.uint16[ra+17]=Fn,this.uint16[ra+18]=Wn,this.uint16[ra+19]=li,this.uint16[ra+20]=ai,this.uint16[ra+21]=Fi,this.uint16[ra+22]=Ti,this.uint32[Da+12]=Mi,this.float32[Da+13]=ia,this.float32[Da+14]=Di,this.float32[Da+15]=Ri,this.float32[Da+16]=da,rt},E}(Ga);Qf.prototype.bytesPerElement=68,Bt("StructArrayLayout8i15ui1ul4f68",Qf);var tf=function(C){function E(){C.apply(this,arguments)}return C&&(E.__proto__=C),E.prototype=Object.create(C&&C.prototype),E.prototype.constructor=E,E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},E.prototype.emplaceBack=function(rt){var vt=this.length;return this.resize(vt+1),this.emplace(vt,rt)},E.prototype.emplace=function(rt,vt){var xt=rt*1;return this.float32[xt+0]=vt,rt},E}(Ga);tf.prototype.bytesPerElement=4,Bt("StructArrayLayout1f4",tf);var $h=function(C){function E(){C.apply(this,arguments)}return C&&(E.__proto__=C),E.prototype=Object.create(C&&C.prototype),E.prototype.constructor=E,E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},E.prototype.emplaceBack=function(rt,vt,xt){var At=this.length;return this.resize(At+1),this.emplace(At,rt,vt,xt)},E.prototype.emplace=function(rt,vt,xt,At){var Ot=rt*3;return this.int16[Ot+0]=vt,this.int16[Ot+1]=xt,this.int16[Ot+2]=At,rt},E}(Ga);$h.prototype.bytesPerElement=6,Bt("StructArrayLayout3i6",$h);var Au=function(C){function E(){C.apply(this,arguments)}return C&&(E.__proto__=C),E.prototype=Object.create(C&&C.prototype),E.prototype.constructor=E,E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},E.prototype.emplaceBack=function(rt,vt,xt){var At=this.length;return this.resize(At+1),this.emplace(At,rt,vt,xt)},E.prototype.emplace=function(rt,vt,xt,At){var Ot=rt*2,re=rt*4;return this.uint32[Ot+0]=vt,this.uint16[re+2]=xt,this.uint16[re+3]=At,rt},E}(Ga);Au.prototype.bytesPerElement=8,Bt("StructArrayLayout1ul2ui8",Au);var kf=function(C){function E(){C.apply(this,arguments)}return C&&(E.__proto__=C),E.prototype=Object.create(C&&C.prototype),E.prototype.constructor=E,E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},E.prototype.emplaceBack=function(rt,vt){var xt=this.length;return this.resize(xt+1),this.emplace(xt,rt,vt)},E.prototype.emplace=function(rt,vt,xt){var At=rt*2;return this.uint16[At+0]=vt,this.uint16[At+1]=xt,rt},E}(Ga);kf.prototype.bytesPerElement=4,Bt("StructArrayLayout2ui4",kf);var ef=function(C){function E(){C.apply(this,arguments)}return C&&(E.__proto__=C),E.prototype=Object.create(C&&C.prototype),E.prototype.constructor=E,E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},E.prototype.emplaceBack=function(rt){var vt=this.length;return this.resize(vt+1),this.emplace(vt,rt)},E.prototype.emplace=function(rt,vt){var xt=rt*1;return this.uint16[xt+0]=vt,rt},E}(Ga);ef.prototype.bytesPerElement=2,Bt("StructArrayLayout1ui2",ef);var Su=function(C){function E(){C.apply(this,arguments)}return C&&(E.__proto__=C),E.prototype=Object.create(C&&C.prototype),E.prototype.constructor=E,E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},E.prototype.emplaceBack=function(rt,vt){var xt=this.length;return this.resize(xt+1),this.emplace(xt,rt,vt)},E.prototype.emplace=function(rt,vt,xt){var At=rt*2;return this.float32[At+0]=vt,this.float32[At+1]=xt,rt},E}(Ga);Su.prototype.bytesPerElement=8,Bt("StructArrayLayout2f8",Su);var Xh=function(C){function E(){C.apply(this,arguments)}return C&&(E.__proto__=C),E.prototype=Object.create(C&&C.prototype),E.prototype.constructor=E,E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},E.prototype.emplaceBack=function(rt,vt,xt,At){var Ot=this.length;return this.resize(Ot+1),this.emplace(Ot,rt,vt,xt,At)},E.prototype.emplace=function(rt,vt,xt,At,Ot){var re=rt*4;return this.float32[re+0]=vt,this.float32[re+1]=xt,this.float32[re+2]=At,this.float32[re+3]=Ot,rt},E}(Ga);Xh.prototype.bytesPerElement=16,Bt("StructArrayLayout4f16",Xh);var Ld=function(C){function E(){C.apply(this,arguments)}C&&(E.__proto__=C),E.prototype=Object.create(C&&C.prototype),E.prototype.constructor=E;var N={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return N.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},N.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},N.x1.get=function(){return this._structArray.int16[this._pos2+2]},N.y1.get=function(){return this._structArray.int16[this._pos2+3]},N.x2.get=function(){return this._structArray.int16[this._pos2+4]},N.y2.get=function(){return this._structArray.int16[this._pos2+5]},N.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},N.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},N.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},N.anchorPoint.get=function(){return new d(this.anchorPointX,this.anchorPointY)},Object.defineProperties(E.prototype,N),E}(ro);Ld.prototype.size=20;var Mu=function(C){function E(){C.apply(this,arguments)}return C&&(E.__proto__=C),E.prototype=Object.create(C&&C.prototype),E.prototype.constructor=E,E.prototype.get=function(rt){return new Ld(this,rt)},E}(wf);Bt("CollisionBoxArray",Mu);var jh=function(C){function E(){C.apply(this,arguments)}C&&(E.__proto__=C),E.prototype=Object.create(C&&C.prototype),E.prototype.constructor=E;var N={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return N.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},N.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},N.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},N.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},N.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},N.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},N.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},N.segment.get=function(){return this._structArray.uint16[this._pos2+10]},N.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},N.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},N.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},N.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},N.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},N.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},N.placedOrientation.set=function(rt){this._structArray.uint8[this._pos1+37]=rt},N.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},N.hidden.set=function(rt){this._structArray.uint8[this._pos1+38]=rt},N.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},N.crossTileID.set=function(rt){this._structArray.uint32[this._pos4+10]=rt},N.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(E.prototype,N),E}(ro);jh.prototype.size=48;var rf=function(C){function E(){C.apply(this,arguments)}return C&&(E.__proto__=C),E.prototype=Object.create(C&&C.prototype),E.prototype.constructor=E,E.prototype.get=function(rt){return new jh(this,rt)},E}(_f);Bt("PlacedSymbolArray",rf);var Dd=function(C){function E(){C.apply(this,arguments)}C&&(E.__proto__=C),E.prototype=Object.create(C&&C.prototype),E.prototype.constructor=E;var N={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return N.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},N.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},N.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},N.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},N.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},N.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},N.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},N.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},N.key.get=function(){return this._structArray.uint16[this._pos2+8]},N.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},N.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},N.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},N.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},N.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},N.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},N.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},N.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},N.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},N.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},N.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},N.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},N.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},N.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},N.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},N.crossTileID.set=function(rt){this._structArray.uint32[this._pos4+12]=rt},N.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},N.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},N.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},N.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(E.prototype,N),E}(ro);Dd.prototype.size=68;var Pd=function(C){function E(){C.apply(this,arguments)}return C&&(E.__proto__=C),E.prototype=Object.create(C&&C.prototype),E.prototype.constructor=E,E.prototype.get=function(rt){return new Dd(this,rt)},E}(Qf);Bt("SymbolInstanceArray",Pd);var dc=function(C){function E(){C.apply(this,arguments)}return C&&(E.__proto__=C),E.prototype=Object.create(C&&C.prototype),E.prototype.constructor=E,E.prototype.getoffsetX=function(rt){return this.float32[rt*1+0]},E}(tf);Bt("GlyphOffsetArray",dc);var Id=function(C){function E(){C.apply(this,arguments)}return C&&(E.__proto__=C),E.prototype=Object.create(C&&C.prototype),E.prototype.constructor=E,E.prototype.getx=function(rt){return this.int16[rt*3+0]},E.prototype.gety=function(rt){return this.int16[rt*3+1]},E.prototype.gettileUnitDistanceFromAnchor=function(rt){return this.int16[rt*3+2]},E}($h);Bt("SymbolLineVertexArray",Id);var zd=function(C){function E(){C.apply(this,arguments)}C&&(E.__proto__=C),E.prototype=Object.create(C&&C.prototype),E.prototype.constructor=E;var N={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return N.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},N.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},N.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(E.prototype,N),E}(ro);zd.prototype.size=8;var Zh=function(C){function E(){C.apply(this,arguments)}return C&&(E.__proto__=C),E.prototype=Object.create(C&&C.prototype),E.prototype.constructor=E,E.prototype.get=function(rt){return new zd(this,rt)},E}(Au);Bt("FeatureIndexArray",Zh);var Rd=Go([{name:"a_pos",components:2,type:"Int16"}],4),dt=Rd.members,Y=function(E){E===void 0&&(E=[]),this.segments=E};Y.prototype.prepareSegment=function(E,N,rt,vt){var xt=this.segments[this.segments.length-1];return E>Y.MAX_VERTEX_ARRAY_LENGTH&&U("Max vertices per segment is "+Y.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+E),(!xt||xt.vertexLength+E>Y.MAX_VERTEX_ARRAY_LENGTH||xt.sortKey!==vt)&&(xt={vertexOffset:N.length,primitiveOffset:rt.length,vertexLength:0,primitiveLength:0},vt!==void 0&&(xt.sortKey=vt),this.segments.push(xt)),xt},Y.prototype.get=function(){return this.segments},Y.prototype.destroy=function(){for(var E=0,N=this.segments;E<N.length;E+=1){var rt=N[E];for(var vt in rt.vaos)rt.vaos[vt].destroy()}},Y.simpleSegment=function(E,N,rt,vt){return new Y([{vertexOffset:E,primitiveOffset:N,vertexLength:rt,primitiveLength:vt,vaos:{},sortKey:0}])},Y.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Bt("SegmentVector",Y);function gt(C,E){return C=v(Math.floor(C),0,255),E=v(Math.floor(E),0,255),256*C+E}var Q=Go([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint8"},{name:"a_pixel_ratio_to",components:1,type:"Uint8"}]),mt=a(function(C){function E(N,rt){var vt,xt,At,Ot,re,he,ge,Fe;for(vt=N.length&3,xt=N.length-vt,At=rt,re=3432918353,he=461845907,Fe=0;Fe<xt;)ge=N.charCodeAt(Fe)&255|(N.charCodeAt(++Fe)&255)<<8|(N.charCodeAt(++Fe)&255)<<16|(N.charCodeAt(++Fe)&255)<<24,++Fe,ge=(ge&65535)*re+(((ge>>>16)*re&65535)<<16)&4294967295,ge=ge<<15|ge>>>17,ge=(ge&65535)*he+(((ge>>>16)*he&65535)<<16)&4294967295,At^=ge,At=At<<13|At>>>19,Ot=(At&65535)*5+(((At>>>16)*5&65535)<<16)&4294967295,At=(Ot&65535)+27492+(((Ot>>>16)+58964&65535)<<16);switch(ge=0,vt){case 3:ge^=(N.charCodeAt(Fe+2)&255)<<16;case 2:ge^=(N.charCodeAt(Fe+1)&255)<<8;case 1:ge^=N.charCodeAt(Fe)&255,ge=(ge&65535)*re+(((ge>>>16)*re&65535)<<16)&4294967295,ge=ge<<15|ge>>>17,ge=(ge&65535)*he+(((ge>>>16)*he&65535)<<16)&4294967295,At^=ge}return At^=N.length,At^=At>>>16,At=(At&65535)*2246822507+(((At>>>16)*2246822507&65535)<<16)&4294967295,At^=At>>>13,At=(At&65535)*3266489909+(((At>>>16)*3266489909&65535)<<16)&4294967295,At^=At>>>16,At>>>0}C.exports=E}),Ct=a(function(C){function E(N,rt){for(var vt=N.length,xt=rt^vt,At=0,Ot;vt>=4;)Ot=N.charCodeAt(At)&255|(N.charCodeAt(++At)&255)<<8|(N.charCodeAt(++At)&255)<<16|(N.charCodeAt(++At)&255)<<24,Ot=(Ot&65535)*1540483477+(((Ot>>>16)*1540483477&65535)<<16),Ot^=Ot>>>24,Ot=(Ot&65535)*1540483477+(((Ot>>>16)*1540483477&65535)<<16),xt=(xt&65535)*1540483477+(((xt>>>16)*1540483477&65535)<<16)^Ot,vt-=4,++At;switch(vt){case 3:xt^=(N.charCodeAt(At+2)&255)<<16;case 2:xt^=(N.charCodeAt(At+1)&255)<<8;case 1:xt^=N.charCodeAt(At)&255,xt=(xt&65535)*1540483477+(((xt>>>16)*1540483477&65535)<<16)}return xt^=xt>>>13,xt=(xt&65535)*1540483477+(((xt>>>16)*1540483477&65535)<<16),xt^=xt>>>15,xt>>>0}C.exports=E}),Dt=mt,Kt=mt,fe=Ct;Dt.murmur3=Kt,Dt.murmur2=fe;var Ce=function(){this.ids=[],this.positions=[],this.indexed=!1};Ce.prototype.add=function(E,N,rt,vt){this.ids.push(ur(E)),this.positions.push(N,rt,vt)},Ce.prototype.getPositions=function(E){for(var N=ur(E),rt=0,vt=this.ids.length-1;rt<vt;){var xt=rt+vt>>1;this.ids[xt]>=N?vt=xt:rt=xt+1}for(var At=[];this.ids[rt]===N;){var Ot=this.positions[3*rt],re=this.positions[3*rt+1],he=this.positions[3*rt+2];At.push({index:Ot,start:re,end:he}),rt++}return At},Ce.serialize=function(E,N){var rt=new Float64Array(E.ids),vt=new Uint32Array(E.positions);return vr(rt,vt,0,rt.length-1),N&&N.push(rt.buffer,vt.buffer),{ids:rt,positions:vt}},Ce.deserialize=function(E){var N=new Ce;return N.ids=E.ids,N.positions=E.positions,N.indexed=!0,N};var Je=Math.pow(2,53)-1;function ur(C){var E=+C;return!isNaN(E)&&E<=Je?E:Dt(String(C))}function vr(C,E,N,rt){for(;N<rt;){for(var vt=C[N+rt>>1],xt=N-1,At=rt+1;;){do xt++;while(C[xt]<vt);do At--;while(C[At]>vt);if(xt>=At)break;Lr(C,xt,At),Lr(E,3*xt,3*At),Lr(E,3*xt+1,3*At+1),Lr(E,3*xt+2,3*At+2)}At-N<rt-At?(vr(C,E,N,At),N=At+1):(vr(C,E,At+1,rt),rt=At)}}function Lr(C,E,N){var rt=C[E];C[E]=C[N],C[N]=rt}Bt("FeaturePositionMap",Ce);var Yr=function(E,N){this.gl=E.gl,this.location=N},$r=function(C){function E(N,rt){C.call(this,N,rt),this.current=0}return C&&(E.__proto__=C),E.prototype=Object.create(C&&C.prototype),E.prototype.constructor=E,E.prototype.set=function(rt){this.current!==rt&&(this.current=rt,this.gl.uniform1i(this.location,rt))},E}(Yr),Vr=function(C){function E(N,rt){C.call(this,N,rt),this.current=0}return C&&(E.__proto__=C),E.prototype=Object.create(C&&C.prototype),E.prototype.constructor=E,E.prototype.set=function(rt){this.current!==rt&&(this.current=rt,this.gl.uniform1f(this.location,rt))},E}(Yr),Jr=function(C){function E(N,rt){C.call(this,N,rt),this.current=[0,0]}return C&&(E.__proto__=C),E.prototype=Object.create(C&&C.prototype),E.prototype.constructor=E,E.prototype.set=function(rt){(rt[0]!==this.current[0]||rt[1]!==this.current[1])&&(this.current=rt,this.gl.uniform2f(this.location,rt[0],rt[1]))},E}(Yr),pn=function(C){function E(N,rt){C.call(this,N,rt),this.current=[0,0,0]}return C&&(E.__proto__=C),E.prototype=Object.create(C&&C.prototype),E.prototype.constructor=E,E.prototype.set=function(rt){(rt[0]!==this.current[0]||rt[1]!==this.current[1]||rt[2]!==this.current[2])&&(this.current=rt,this.gl.uniform3f(this.location,rt[0],rt[1],rt[2]))},E}(Yr),Ln=function(C){function E(N,rt){C.call(this,N,rt),this.current=[0,0,0,0]}return C&&(E.__proto__=C),E.prototype=Object.create(C&&C.prototype),E.prototype.constructor=E,E.prototype.set=function(rt){(rt[0]!==this.current[0]||rt[1]!==this.current[1]||rt[2]!==this.current[2]||rt[3]!==this.current[3])&&(this.current=rt,this.gl.uniform4f(this.location,rt[0],rt[1],rt[2],rt[3]))},E}(Yr),Bn=function(C){function E(N,rt){C.call(this,N,rt),this.current=ga.transparent}return C&&(E.__proto__=C),E.prototype=Object.create(C&&C.prototype),E.prototype.constructor=E,E.prototype.set=function(rt){(rt.r!==this.current.r||rt.g!==this.current.g||rt.b!==this.current.b||rt.a!==this.current.a)&&(this.current=rt,this.gl.uniform4f(this.location,rt.r,rt.g,rt.b,rt.a))},E}(Yr),Jn=new Float32Array(16),ei=function(C){function E(N,rt){C.call(this,N,rt),this.current=Jn}return C&&(E.__proto__=C),E.prototype=Object.create(C&&C.prototype),E.prototype.constructor=E,E.prototype.set=function(rt){if(rt[12]!==this.current[12]||rt[0]!==this.current[0]){this.current=rt,this.gl.uniformMatrix4fv(this.location,!1,rt);return}for(var vt=1;vt<16;vt++)if(rt[vt]!==this.current[vt]){this.current=rt,this.gl.uniformMatrix4fv(this.location,!1,rt);break}},E}(Yr);function qn(C){return[gt(255*C.r,255*C.g),gt(255*C.b,255*C.a)]}var di=function(E,N,rt){this.value=E,this.uniformNames=N.map(function(vt){return"u_"+vt}),this.type=rt};di.prototype.setUniform=function(E,N,rt){E.set(rt.constantOr(this.value))},di.prototype.getBinding=function(E,N,rt){return this.type==="color"?new Bn(E,N):new Vr(E,N)};var _i=function(E,N){this.uniformNames=N.map(function(rt){return"u_"+rt}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};_i.prototype.setConstantPatternPositions=function(E,N){this.pixelRatioFrom=N.pixelRatio,this.pixelRatioTo=E.pixelRatio,this.patternFrom=N.tlbr,this.patternTo=E.tlbr},_i.prototype.setUniform=function(E,N,rt,vt){var xt=vt==="u_pattern_to"?this.patternTo:vt==="u_pattern_from"?this.patternFrom:vt==="u_pixel_ratio_to"?this.pixelRatioTo:vt==="u_pixel_ratio_from"?this.pixelRatioFrom:null;xt&&E.set(xt)},_i.prototype.getBinding=function(E,N,rt){return rt.substr(0,9)==="u_pattern"?new Ln(E,N):new Vr(E,N)};var bi=function(E,N,rt,vt){this.expression=E,this.type=rt,this.maxValue=0,this.paintVertexAttributes=N.map(function(xt){return{name:"a_"+xt,type:"Float32",components:rt==="color"?2:1,offset:0}}),this.paintVertexArray=new vt};bi.prototype.populatePaintArray=function(E,N,rt,vt,xt){var At=this.paintVertexArray.length,Ot=this.expression.evaluate(new ua(0),N,{},vt,[],xt);this.paintVertexArray.resize(E),this._setPaintValue(At,E,Ot)},bi.prototype.updatePaintArray=function(E,N,rt,vt){var xt=this.expression.evaluate({zoom:0},rt,vt);this._setPaintValue(E,N,xt)},bi.prototype._setPaintValue=function(E,N,rt){if(this.type==="color")for(var vt=qn(rt),xt=E;xt<N;xt++)this.paintVertexArray.emplace(xt,vt[0],vt[1]);else{for(var At=E;At<N;At++)this.paintVertexArray.emplace(At,rt);this.maxValue=Math.max(this.maxValue,Math.abs(rt))}},bi.prototype.upload=function(E){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=E.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},bi.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Ai=function(E,N,rt,vt,xt,At){this.expression=E,this.uniformNames=N.map(function(Ot){return"u_"+Ot+"_t"}),this.type=rt,this.useIntegerZoom=vt,this.zoom=xt,this.maxValue=0,this.paintVertexAttributes=N.map(function(Ot){return{name:"a_"+Ot,type:"Float32",components:rt==="color"?4:2,offset:0}}),this.paintVertexArray=new At};Ai.prototype.populatePaintArray=function(E,N,rt,vt,xt){var At=this.expression.evaluate(new ua(this.zoom),N,{},vt,[],xt),Ot=this.expression.evaluate(new ua(this.zoom+1),N,{},vt,[],xt),re=this.paintVertexArray.length;this.paintVertexArray.resize(E),this._setPaintValue(re,E,At,Ot)},Ai.prototype.updatePaintArray=function(E,N,rt,vt){var xt=this.expression.evaluate({zoom:this.zoom},rt,vt),At=this.expression.evaluate({zoom:this.zoom+1},rt,vt);this._setPaintValue(E,N,xt,At)},Ai.prototype._setPaintValue=function(E,N,rt,vt){if(this.type==="color")for(var xt=qn(rt),At=qn(vt),Ot=E;Ot<N;Ot++)this.paintVertexArray.emplace(Ot,xt[0],xt[1],At[0],At[1]);else{for(var re=E;re<N;re++)this.paintVertexArray.emplace(re,rt,vt);this.maxValue=Math.max(this.maxValue,Math.abs(rt),Math.abs(vt))}},Ai.prototype.upload=function(E){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=E.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Ai.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Ai.prototype.setUniform=function(E,N){var rt=this.useIntegerZoom?Math.floor(N.zoom):N.zoom,vt=v(this.expression.interpolationFactor(rt,this.zoom,this.zoom+1),0,1);E.set(vt)},Ai.prototype.getBinding=function(E,N,rt){return new Vr(E,N)};var Li=function(E,N,rt,vt,xt,At){this.expression=E,this.type=N,this.useIntegerZoom=rt,this.zoom=vt,this.layerId=At,this.zoomInPaintVertexArray=new xt,this.zoomOutPaintVertexArray=new xt};Li.prototype.populatePaintArray=function(E,N,rt){var vt=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(E),this.zoomOutPaintVertexArray.resize(E),this._setPaintValues(vt,E,N.patterns&&N.patterns[this.layerId],rt)},Li.prototype.updatePaintArray=function(E,N,rt,vt,xt){this._setPaintValues(E,N,rt.patterns&&rt.patterns[this.layerId],xt)},Li.prototype._setPaintValues=function(E,N,rt,vt){if(!(!vt||!rt)){var xt=rt.min,At=rt.mid,Ot=rt.max,re=vt[xt],he=vt[At],ge=vt[Ot];if(!(!re||!he||!ge))for(var Fe=E;Fe<N;Fe++)this.zoomInPaintVertexArray.emplace(Fe,he.tl[0],he.tl[1],he.br[0],he.br[1],re.tl[0],re.tl[1],re.br[0],re.br[1],he.pixelRatio,re.pixelRatio),this.zoomOutPaintVertexArray.emplace(Fe,he.tl[0],he.tl[1],he.br[0],he.br[1],ge.tl[0],ge.tl[1],ge.br[0],ge.br[1],he.pixelRatio,ge.pixelRatio)}},Li.prototype.upload=function(E){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=E.createVertexBuffer(this.zoomInPaintVertexArray,Q.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=E.createVertexBuffer(this.zoomOutPaintVertexArray,Q.members,this.expression.isStateDependent))},Li.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Yi=function(E,N,rt,vt){this.binders={},this.layoutAttributes=vt,this._buffers=[];var xt=[];for(var At in E.paint._values)if(!!rt(At)){var Ot=E.paint.get(At);if(!(!(Ot instanceof Ka)||!ca(Ot.property.specification))){var re=Fa(At,E.type),he=Ot.value,ge=Ot.property.specification.type,Fe=Ot.property.useIntegerZoom,nr=Ot.property.specification["property-type"],qe=nr==="cross-faded"||nr==="cross-faded-data-driven";if(he.kind==="constant")this.binders[At]=qe?new _i(he.value,re):new di(he.value,re,ge),xt.push("/u_"+At);else if(he.kind==="source"||qe){var mr=ma(At,ge,"source");this.binders[At]=qe?new Li(he,ge,Fe,N,mr,E.id):new bi(he,re,ge,mr),xt.push("/a_"+At)}else{var Br=ma(At,ge,"composite");this.binders[At]=new Ai(he,re,ge,Fe,N,Br),xt.push("/z_"+At)}}}this.cacheKey=xt.sort().join("")};Yi.prototype.getMaxValue=function(E){var N=this.binders[E];return N instanceof bi||N instanceof Ai?N.maxValue:0},Yi.prototype.populatePaintArrays=function(E,N,rt,vt,xt){for(var At in this.binders){var Ot=this.binders[At];(Ot instanceof bi||Ot instanceof Ai||Ot instanceof Li)&&Ot.populatePaintArray(E,N,rt,vt,xt)}},Yi.prototype.setConstantPatternPositions=function(E,N){for(var rt in this.binders){var vt=this.binders[rt];vt instanceof _i&&vt.setConstantPatternPositions(E,N)}},Yi.prototype.updatePaintArrays=function(E,N,rt,vt,xt){var At=!1;for(var Ot in E)for(var re=N.getPositions(Ot),he=0,ge=re;he<ge.length;he+=1){var Fe=ge[he],nr=rt.feature(Fe.index);for(var qe in this.binders){var mr=this.binders[qe];if((mr instanceof bi||mr instanceof Ai||mr instanceof Li)&&mr.expression.isStateDependent===!0){var Br=vt.paint.get(qe);mr.expression=Br.value,mr.updatePaintArray(Fe.start,Fe.end,nr,E[Ot],xt),At=!0}}}return At},Yi.prototype.defines=function(){var E=[];for(var N in this.binders){var rt=this.binders[N];(rt instanceof di||rt instanceof _i)&&E.push.apply(E,rt.uniformNames.map(function(vt){return"#define HAS_UNIFORM_"+vt}))}return E},Yi.prototype.getPaintVertexBuffers=function(){return this._buffers},Yi.prototype.getUniforms=function(E,N){var rt=[];for(var vt in this.binders){var xt=this.binders[vt];if(xt instanceof di||xt instanceof _i||xt instanceof Ai)for(var At=0,Ot=xt.uniformNames;At<Ot.length;At+=1){var re=Ot[At];if(N[re]){var he=xt.getBinding(E,N[re],re);rt.push({name:re,property:vt,binding:he})}}}return rt},Yi.prototype.setUniforms=function(E,N,rt,vt){for(var xt=0,At=N;xt<At.length;xt+=1){var Ot=At[xt],re=Ot.name,he=Ot.property,ge=Ot.binding;this.binders[he].setUniform(ge,vt,rt.get(he),re)}},Yi.prototype.updatePaintBuffers=function(E){this._buffers=[];for(var N in this.binders){var rt=this.binders[N];if(E&&rt instanceof Li){var vt=E.fromScale===2?rt.zoomInPaintVertexBuffer:rt.zoomOutPaintVertexBuffer;vt&&this._buffers.push(vt)}else(rt instanceof bi||rt instanceof Ai)&&rt.paintVertexBuffer&&this._buffers.push(rt.paintVertexBuffer)}},Yi.prototype.upload=function(E){for(var N in this.binders){var rt=this.binders[N];(rt instanceof bi||rt instanceof Ai||rt instanceof Li)&&rt.upload(E)}this.updatePaintBuffers()},Yi.prototype.destroy=function(){for(var E in this.binders){var N=this.binders[E];(N instanceof bi||N instanceof Ai||N instanceof Li)&&N.destroy()}};var oa=function(E,N,rt,vt){vt===void 0&&(vt=function(){return!0}),this.programConfigurations={};for(var xt=0,At=N;xt<At.length;xt+=1){var Ot=At[xt];this.programConfigurations[Ot.id]=new Yi(Ot,rt,vt,E)}this.needsUpload=!1,this._featureMap=new Ce,this._bufferOffset=0};oa.prototype.populatePaintArrays=function(E,N,rt,vt,xt,At){for(var Ot in this.programConfigurations)this.programConfigurations[Ot].populatePaintArrays(E,N,vt,xt,At);N.id!==void 0&&this._featureMap.add(N.id,rt,this._bufferOffset,E),this._bufferOffset=E,this.needsUpload=!0},oa.prototype.updatePaintArrays=function(E,N,rt,vt){for(var xt=0,At=rt;xt<At.length;xt+=1){var Ot=At[xt];this.needsUpload=this.programConfigurations[Ot.id].updatePaintArrays(E,this._featureMap,N,Ot,vt)||this.needsUpload}},oa.prototype.get=function(E){return this.programConfigurations[E]},oa.prototype.upload=function(E){if(!!this.needsUpload){for(var N in this.programConfigurations)this.programConfigurations[N].upload(E);this.needsUpload=!1}},oa.prototype.destroy=function(){for(var E in this.programConfigurations)this.programConfigurations[E].destroy()};function Fa(C,E){var N={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]};return N[C]||[C.replace(E+"-","").replace(/-/g,"_")]}function ha(C){var E={"line-pattern":{source:el,composite:el},"fill-pattern":{source:el,composite:el},"fill-extrusion-pattern":{source:el,composite:el}};return E[C]}function ma(C,E,N){var rt={color:{source:Su,composite:Xh},number:{source:tf,composite:Su}},vt=ha(C);return vt&&vt[N]||rt[E][N]}Bt("ConstantBinder",di),Bt("CrossFadedConstantBinder",_i),Bt("SourceExpressionBinder",bi),Bt("CrossFadedCompositeBinder",Li),Bt("CompositeExpressionBinder",Ai),Bt("ProgramConfiguration",Yi,{omit:["_buffers"]}),Bt("ProgramConfigurationSet",oa);var Hi=8192;function Oa(C){return{min:-1*Math.pow(2,C-1),max:Math.pow(2,C-1)-1}}var Ha=Oa(15);function $a(C){for(var E=Hi/C.extent,N=C.loadGeometry(),rt=0;rt<N.length;rt++)for(var vt=N[rt],xt=0;xt<vt.length;xt++){var At=vt[xt];At.x=Math.round(At.x*E),At.y=Math.round(At.y*E),(At.x<Ha.min||At.x>Ha.max||At.y<Ha.min||At.y>Ha.max)&&(U("Geometry exceeds allowed extent, reduce your vector tile buffer size"),At.x=v(At.x,Ha.min,Ha.max),At.y=v(At.y,Ha.min,Ha.max))}return N}function Ta(C,E,N,rt,vt){C.emplaceBack(E*2+(rt+1)/2,N*2+(vt+1)/2)}var no=function(E){this.zoom=E.zoom,this.overscaling=E.overscaling,this.layers=E.layers,this.layerIds=this.layers.map(function(N){return N.id}),this.index=E.index,this.hasPattern=!1,this.layoutVertexArray=new xf,this.indexArray=new Qc,this.segments=new Y,this.programConfigurations=new oa(dt,E.layers,E.zoom),this.stateDependentLayerIds=this.layers.filter(function(N){return N.isStateDependent()}).map(function(N){return N.id})};no.prototype.populate=function(E,N,rt){var vt=this.layers[0],xt=[],At=null;vt.type==="circle"&&(At=vt.layout.get("circle-sort-key"));for(var Ot=0,re=E;Ot<re.length;Ot+=1){var he=re[Ot],ge=he.feature,Fe=he.id,nr=he.index,qe=he.sourceLayerIndex,mr=this.layers[0]._featureFilter.needGeometry,Br={type:ge.type,id:Fe,properties:ge.properties,geometry:mr?$a(ge):[]};if(!!this.layers[0]._featureFilter.filter(new ua(this.zoom),Br,rt)){mr||(Br.geometry=$a(ge));var sn=At?At.evaluate(Br,{},rt):void 0,tn={id:Fe,properties:ge.properties,type:ge.type,sourceLayerIndex:qe,index:nr,geometry:Br.geometry,patterns:{},sortKey:sn};xt.push(tn)}}At&&xt.sort(function(Ti,Mi){return Ti.sortKey-Mi.sortKey});for(var En=0,xn=xt;En<xn.length;En+=1){var Cn=xn[En],Fn=Cn,Wn=Fn.geometry,li=Fn.index,ai=Fn.sourceLayerIndex,Fi=E[li].feature;this.addFeature(Cn,Wn,li,rt),N.featureIndex.insert(Fi,Wn,li,ai,this.index)}},no.prototype.update=function(E,N,rt){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(E,N,this.stateDependentLayers,rt)},no.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},no.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},no.prototype.upload=function(E){this.uploaded||(this.layoutVertexBuffer=E.createVertexBuffer(this.layoutVertexArray,dt),this.indexBuffer=E.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(E),this.uploaded=!0},no.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},no.prototype.addFeature=function(E,N,rt,vt){for(var xt=0,At=N;xt<At.length;xt+=1)for(var Ot=At[xt],re=0,he=Ot;re<he.length;re+=1){var ge=he[re],Fe=ge.x,nr=ge.y;if(!(Fe<0||Fe>=Hi||nr<0||nr>=Hi)){var qe=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,E.sortKey),mr=qe.vertexLength;Ta(this.layoutVertexArray,Fe,nr,-1,-1),Ta(this.layoutVertexArray,Fe,nr,1,-1),Ta(this.layoutVertexArray,Fe,nr,1,1),Ta(this.layoutVertexArray,Fe,nr,-1,1),this.indexArray.emplaceBack(mr,mr+1,mr+2),this.indexArray.emplaceBack(mr,mr+3,mr+2),qe.vertexLength+=4,qe.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,E,rt,{},vt)},Bt("CircleBucket",no,{omit:["layers"]});function la(C,E){for(var N=0;N<C.length;N++)if(rl(E,C[N]))return!0;for(var rt=0;rt<E.length;rt++)if(rl(C,E[rt]))return!0;return!!Ql(C,E)}function Sa(C,E,N){return!!(rl(C,E)||Cc(E,C,N))}function Po(C,E){if(C.length===1)return Ec(E,C[0]);for(var N=0;N<E.length;N++)for(var rt=E[N],vt=0;vt<rt.length;vt++)if(rl(C,rt[vt]))return!0;for(var xt=0;xt<C.length;xt++)if(Ec(E,C[xt]))return!0;for(var At=0;At<E.length;At++)if(Ql(C,E[At]))return!0;return!1}function Ko(C,E,N){for(var rt=0;rt<E.length;rt++){var vt=E[rt];if(C.length>=3){for(var xt=0;xt<vt.length;xt++)if(rl(C,vt[xt]))return!0}if(Jl(C,vt,N))return!0}return!1}function Jl(C,E,N){if(C.length>1){if(Ql(C,E))return!0;for(var rt=0;rt<E.length;rt++)if(Cc(E[rt],C,N))return!0}for(var vt=0;vt<C.length;vt++)if(Cc(C[vt],E,N))return!0;return!1}function Ql(C,E){if(C.length===0||E.length===0)return!1;for(var N=0;N<C.length-1;N++)for(var rt=C[N],vt=C[N+1],xt=0;xt<E.length-1;xt++){var At=E[xt],Ot=E[xt+1];if(Mc(rt,vt,At,Ot))return!0}return!1}function Mc(C,E,N,rt){return O(C,N,rt)!==O(E,N,rt)&&O(C,E,N)!==O(C,E,rt)}function Cc(C,E,N){var rt=N*N;if(E.length===1)return C.distSqr(E[0])<rt;for(var vt=1;vt<E.length;vt++){var xt=E[vt-1],At=E[vt];if(qc(C,xt,At)<rt)return!0}return!1}function qc(C,E,N){var rt=E.distSqr(N);if(rt===0)return C.distSqr(E);var vt=((C.x-E.x)*(N.x-E.x)+(C.y-E.y)*(N.y-E.y))/rt;return vt<0?C.distSqr(E):vt>1?C.distSqr(N):C.distSqr(N.sub(E)._mult(vt)._add(E))}function Ec(C,E){for(var N=!1,rt,vt,xt,At=0;At<C.length;At++){rt=C[At];for(var Ot=0,re=rt.length-1;Ot<rt.length;re=Ot++)vt=rt[Ot],xt=rt[re],vt.y>E.y!=xt.y>E.y&&E.x<(xt.x-vt.x)*(E.y-vt.y)/(xt.y-vt.y)+vt.x&&(N=!N)}return N}function rl(C,E){for(var N=!1,rt=0,vt=C.length-1;rt<C.length;vt=rt++){var xt=C[rt],At=C[vt];xt.y>E.y!=At.y>E.y&&E.x<(At.x-xt.x)*(E.y-xt.y)/(At.y-xt.y)+xt.x&&(N=!N)}return N}function Cu(C,E,N,rt,vt){for(var xt=0,At=C;xt<At.length;xt+=1){var Ot=At[xt];if(E<=Ot.x&&N<=Ot.y&&rt>=Ot.x&&vt>=Ot.y)return!0}var re=[new d(E,N),new d(E,vt),new d(rt,vt),new d(rt,N)];if(C.length>2)for(var he=0,ge=re;he<ge.length;he+=1){var Fe=ge[he];if(rl(C,Fe))return!0}for(var nr=0;nr<C.length-1;nr++){var qe=C[nr],mr=C[nr+1];if(Rs(qe,mr,re))return!0}return!1}function Rs(C,E,N){var rt=N[0],vt=N[2];if(C.x<rt.x&&E.x<rt.x||C.x>vt.x&&E.x>vt.x||C.y<rt.y&&E.y<rt.y||C.y>vt.y&&E.y>vt.y)return!1;var xt=O(C,E,N[0]);return xt!==O(C,E,N[1])||xt!==O(C,E,N[2])||xt!==O(C,E,N[3])}function Il(C,E,N){var rt=E.paint.get(C).value;return rt.kind==="constant"?rt.value:N.programConfigurations.get(E.id).getMaxValue(C)}function Lc(C){return Math.sqrt(C[0]*C[0]+C[1]*C[1])}function pc(C,E,N,rt,vt){if(!E[0]&&!E[1])return C;var xt=d.convert(E)._mult(vt);N==="viewport"&&xt._rotate(-rt);for(var At=[],Ot=0;Ot<C.length;Ot++){var re=C[Ot];At.push(re.sub(xt))}return At}var Dc=new eo({"circle-sort-key":new Ki(Ue.layout_circle["circle-sort-key"])}),qf=new eo({"circle-radius":new Ki(Ue.paint_circle["circle-radius"]),"circle-color":new Ki(Ue.paint_circle["circle-color"]),"circle-blur":new Ki(Ue.paint_circle["circle-blur"]),"circle-opacity":new Ki(Ue.paint_circle["circle-opacity"]),"circle-translate":new Oi(Ue.paint_circle["circle-translate"]),"circle-translate-anchor":new Oi(Ue.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Oi(Ue.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Oi(Ue.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ki(Ue.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ki(Ue.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ki(Ue.paint_circle["circle-stroke-opacity"])}),Hu={paint:qf,layout:Dc},As=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var C=arguments,E=0,N=arguments.length;N--;)E+=C[N]*C[N];return Math.sqrt(E)});function Tf(){var C=new As(4);return As!=Float32Array&&(C[1]=0,C[2]=0),C[0]=1,C[3]=1,C}function Ys(C,E,N){var rt=E[0],vt=E[1],xt=E[2],At=E[3],Ot=Math.sin(N),re=Math.cos(N);return C[0]=rt*re+xt*Ot,C[1]=vt*re+At*Ot,C[2]=rt*-Ot+xt*re,C[3]=vt*-Ot+At*re,C}function Af(){var C=new As(9);return As!=Float32Array&&(C[1]=0,C[2]=0,C[3]=0,C[5]=0,C[6]=0,C[7]=0),C[0]=1,C[4]=1,C[8]=1,C}function th(C,E){var N=Math.sin(E),rt=Math.cos(E);return C[0]=rt,C[1]=N,C[2]=0,C[3]=-N,C[4]=rt,C[5]=0,C[6]=0,C[7]=0,C[8]=1,C}function eh(){var C=new As(16);return As!=Float32Array&&(C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[11]=0,C[12]=0,C[13]=0,C[14]=0),C[0]=1,C[5]=1,C[10]=1,C[15]=1,C}function Fd(C){var E=new As(16);return E[0]=C[0],E[1]=C[1],E[2]=C[2],E[3]=C[3],E[4]=C[4],E[5]=C[5],E[6]=C[6],E[7]=C[7],E[8]=C[8],E[9]=C[9],E[10]=C[10],E[11]=C[11],E[12]=C[12],E[13]=C[13],E[14]=C[14],E[15]=C[15],E}function rh(C){return C[0]=1,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=1,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[10]=1,C[11]=0,C[12]=0,C[13]=0,C[14]=0,C[15]=1,C}function nf(C,E){var N=E[0],rt=E[1],vt=E[2],xt=E[3],At=E[4],Ot=E[5],re=E[6],he=E[7],ge=E[8],Fe=E[9],nr=E[10],qe=E[11],mr=E[12],Br=E[13],sn=E[14],tn=E[15],En=N*Ot-rt*At,xn=N*re-vt*At,Cn=N*he-xt*At,Fn=rt*re-vt*Ot,Wn=rt*he-xt*Ot,li=vt*he-xt*re,ai=ge*Br-Fe*mr,Fi=ge*sn-nr*mr,Ti=ge*tn-qe*mr,Mi=Fe*sn-nr*Br,ia=Fe*tn-qe*Br,Di=nr*tn-qe*sn,Ri=En*Di-xn*ia+Cn*Mi+Fn*Ti-Wn*Fi+li*ai;return Ri?(Ri=1/Ri,C[0]=(Ot*Di-re*ia+he*Mi)*Ri,C[1]=(vt*ia-rt*Di-xt*Mi)*Ri,C[2]=(Br*li-sn*Wn+tn*Fn)*Ri,C[3]=(nr*Wn-Fe*li-qe*Fn)*Ri,C[4]=(re*Ti-At*Di-he*Fi)*Ri,C[5]=(N*Di-vt*Ti+xt*Fi)*Ri,C[6]=(sn*Cn-mr*li-tn*xn)*Ri,C[7]=(ge*li-nr*Cn+qe*xn)*Ri,C[8]=(At*ia-Ot*Ti+he*ai)*Ri,C[9]=(rt*Ti-N*ia-xt*ai)*Ri,C[10]=(mr*Wn-Br*Cn+tn*En)*Ri,C[11]=(Fe*Cn-ge*Wn-qe*En)*Ri,C[12]=(Ot*Fi-At*Mi-re*ai)*Ri,C[13]=(N*Mi-rt*Fi+vt*ai)*Ri,C[14]=(Br*xn-mr*Fn-sn*En)*Ri,C[15]=(ge*Fn-Fe*xn+nr*En)*Ri,C):null}function af(C,E,N){var rt=E[0],vt=E[1],xt=E[2],At=E[3],Ot=E[4],re=E[5],he=E[6],ge=E[7],Fe=E[8],nr=E[9],qe=E[10],mr=E[11],Br=E[12],sn=E[13],tn=E[14],En=E[15],xn=N[0],Cn=N[1],Fn=N[2],Wn=N[3];return C[0]=xn*rt+Cn*Ot+Fn*Fe+Wn*Br,C[1]=xn*vt+Cn*re+Fn*nr+Wn*sn,C[2]=xn*xt+Cn*he+Fn*qe+Wn*tn,C[3]=xn*At+Cn*ge+Fn*mr+Wn*En,xn=N[4],Cn=N[5],Fn=N[6],Wn=N[7],C[4]=xn*rt+Cn*Ot+Fn*Fe+Wn*Br,C[5]=xn*vt+Cn*re+Fn*nr+Wn*sn,C[6]=xn*xt+Cn*he+Fn*qe+Wn*tn,C[7]=xn*At+Cn*ge+Fn*mr+Wn*En,xn=N[8],Cn=N[9],Fn=N[10],Wn=N[11],C[8]=xn*rt+Cn*Ot+Fn*Fe+Wn*Br,C[9]=xn*vt+Cn*re+Fn*nr+Wn*sn,C[10]=xn*xt+Cn*he+Fn*qe+Wn*tn,C[11]=xn*At+Cn*ge+Fn*mr+Wn*En,xn=N[12],Cn=N[13],Fn=N[14],Wn=N[15],C[12]=xn*rt+Cn*Ot+Fn*Fe+Wn*Br,C[13]=xn*vt+Cn*re+Fn*nr+Wn*sn,C[14]=xn*xt+Cn*he+Fn*qe+Wn*tn,C[15]=xn*At+Cn*ge+Fn*mr+Wn*En,C}function No(C,E,N){var rt=N[0],vt=N[1],xt=N[2],At,Ot,re,he,ge,Fe,nr,qe,mr,Br,sn,tn;return E===C?(C[12]=E[0]*rt+E[4]*vt+E[8]*xt+E[12],C[13]=E[1]*rt+E[5]*vt+E[9]*xt+E[13],C[14]=E[2]*rt+E[6]*vt+E[10]*xt+E[14],C[15]=E[3]*rt+E[7]*vt+E[11]*xt+E[15]):(At=E[0],Ot=E[1],re=E[2],he=E[3],ge=E[4],Fe=E[5],nr=E[6],qe=E[7],mr=E[8],Br=E[9],sn=E[10],tn=E[11],C[0]=At,C[1]=Ot,C[2]=re,C[3]=he,C[4]=ge,C[5]=Fe,C[6]=nr,C[7]=qe,C[8]=mr,C[9]=Br,C[10]=sn,C[11]=tn,C[12]=At*rt+ge*vt+mr*xt+E[12],C[13]=Ot*rt+Fe*vt+Br*xt+E[13],C[14]=re*rt+nr*vt+sn*xt+E[14],C[15]=he*rt+qe*vt+tn*xt+E[15]),C}function yl(C,E,N){var rt=N[0],vt=N[1],xt=N[2];return C[0]=E[0]*rt,C[1]=E[1]*rt,C[2]=E[2]*rt,C[3]=E[3]*rt,C[4]=E[4]*vt,C[5]=E[5]*vt,C[6]=E[6]*vt,C[7]=E[7]*vt,C[8]=E[8]*xt,C[9]=E[9]*xt,C[10]=E[10]*xt,C[11]=E[11]*xt,C[12]=E[12],C[13]=E[13],C[14]=E[14],C[15]=E[15],C}function bl(C,E,N){var rt=Math.sin(N),vt=Math.cos(N),xt=E[4],At=E[5],Ot=E[6],re=E[7],he=E[8],ge=E[9],Fe=E[10],nr=E[11];return E!==C&&(C[0]=E[0],C[1]=E[1],C[2]=E[2],C[3]=E[3],C[12]=E[12],C[13]=E[13],C[14]=E[14],C[15]=E[15]),C[4]=xt*vt+he*rt,C[5]=At*vt+ge*rt,C[6]=Ot*vt+Fe*rt,C[7]=re*vt+nr*rt,C[8]=he*vt-xt*rt,C[9]=ge*vt-At*rt,C[10]=Fe*vt-Ot*rt,C[11]=nr*vt-re*rt,C}function nh(C,E,N){var rt=Math.sin(N),vt=Math.cos(N),xt=E[0],At=E[1],Ot=E[2],re=E[3],he=E[4],ge=E[5],Fe=E[6],nr=E[7];return E!==C&&(C[8]=E[8],C[9]=E[9],C[10]=E[10],C[11]=E[11],C[12]=E[12],C[13]=E[13],C[14]=E[14],C[15]=E[15]),C[0]=xt*vt+he*rt,C[1]=At*vt+ge*rt,C[2]=Ot*vt+Fe*rt,C[3]=re*vt+nr*rt,C[4]=he*vt-xt*rt,C[5]=ge*vt-At*rt,C[6]=Fe*vt-Ot*rt,C[7]=nr*vt-re*rt,C}function Kh(C,E,N,rt,vt){var xt=1/Math.tan(E/2),At;return C[0]=xt/N,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=xt,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[11]=-1,C[12]=0,C[13]=0,C[15]=0,vt!=null&&vt!==1/0?(At=1/(rt-vt),C[10]=(vt+rt)*At,C[14]=2*vt*rt*At):(C[10]=-1,C[14]=-2*rt),C}function cv(C,E,N,rt,vt,xt,At){var Ot=1/(E-N),re=1/(rt-vt),he=1/(xt-At);return C[0]=-2*Ot,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=-2*re,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[10]=2*he,C[11]=0,C[12]=(E+N)*Ot,C[13]=(vt+rt)*re,C[14]=(At+xt)*he,C[15]=1,C}var uv=af;function Sf(){var C=new As(3);return As!=Float32Array&&(C[0]=0,C[1]=0,C[2]=0),C}function fv(C){var E=new As(3);return E[0]=C[0],E[1]=C[1],E[2]=C[2],E}function ih(C,E,N){return C[0]=E[0]+N[0],C[1]=E[1]+N[1],C[2]=E[2]+N[2],C}function hv(C,E,N){return C[0]=E[0]-N[0],C[1]=E[1]-N[1],C[2]=E[2]-N[2],C}function dv(C,E,N){return C[0]=E[0]*N,C[1]=E[1]*N,C[2]=E[2]*N,C}function Jh(C,E){var N=E[0],rt=E[1],vt=E[2],xt=N*N+rt*rt+vt*vt;return xt>0&&(xt=1/Math.sqrt(xt)),C[0]=E[0]*xt,C[1]=E[1]*xt,C[2]=E[2]*xt,C}function Tb(C,E){return C[0]*E[0]+C[1]*E[1]+C[2]*E[2]}function Ab(C,E,N){var rt=E[0],vt=E[1],xt=E[2],At=N[0],Ot=N[1],re=N[2];return C[0]=vt*re-xt*Ot,C[1]=xt*At-rt*re,C[2]=rt*Ot-vt*At,C}function Sb(C,E,N){var rt=E[0],vt=E[1],xt=E[2];return C[0]=rt*N[0]+vt*N[3]+xt*N[6],C[1]=rt*N[1]+vt*N[4]+xt*N[7],C[2]=rt*N[2]+vt*N[5]+xt*N[8],C}var Mb=hv;(function(){var C=Sf();return function(E,N,rt,vt,xt,At){var Ot,re;for(N||(N=3),rt||(rt=0),vt?re=Math.min(vt*N+rt,E.length):re=E.length,Ot=rt;Ot<re;Ot+=N)C[0]=E[Ot],C[1]=E[Ot+1],C[2]=E[Ot+2],xt(C,C,At),E[Ot]=C[0],E[Ot+1]=C[1],E[Ot+2]=C[2];return E}})();function Cb(){var C=new As(4);return As!=Float32Array&&(C[0]=0,C[1]=0,C[2]=0,C[3]=0),C}function Eb(C,E,N){return C[0]=E[0]*N,C[1]=E[1]*N,C[2]=E[2]*N,C[3]=E[3]*N,C}function Lb(C,E){return C[0]*E[0]+C[1]*E[1]+C[2]*E[2]+C[3]*E[3]}function Od(C,E,N){var rt=E[0],vt=E[1],xt=E[2],At=E[3];return C[0]=N[0]*rt+N[4]*vt+N[8]*xt+N[12]*At,C[1]=N[1]*rt+N[5]*vt+N[9]*xt+N[13]*At,C[2]=N[2]*rt+N[6]*vt+N[10]*xt+N[14]*At,C[3]=N[3]*rt+N[7]*vt+N[11]*xt+N[15]*At,C}(function(){var C=Cb();return function(E,N,rt,vt,xt,At){var Ot,re;for(N||(N=4),rt||(rt=0),vt?re=Math.min(vt*N+rt,E.length):re=E.length,Ot=rt;Ot<re;Ot+=N)C[0]=E[Ot],C[1]=E[Ot+1],C[2]=E[Ot+2],C[3]=E[Ot+3],xt(C,C,At),E[Ot]=C[0],E[Ot+1]=C[1],E[Ot+2]=C[2],E[Ot+3]=C[3];return E}})();function Db(){var C=new As(2);return As!=Float32Array&&(C[0]=0,C[1]=0),C}function Pb(C){var E=C[0],N=C[1];return E*E+N*N}var Ib=Pb;(function(){var C=Db();return function(E,N,rt,vt,xt,At){var Ot,re;for(N||(N=2),rt||(rt=0),vt?re=Math.min(vt*N+rt,E.length):re=E.length,Ot=rt;Ot<re;Ot+=N)C[0]=E[Ot],C[1]=E[Ot+1],xt(C,C,At),E[Ot]=C[0],E[Ot+1]=C[1];return E}})();var zb=function(C){function E(N){C.call(this,N,Hu)}return C&&(E.__proto__=C),E.prototype=Object.create(C&&C.prototype),E.prototype.constructor=E,E.prototype.createBucket=function(rt){return new no(rt)},E.prototype.queryRadius=function(rt){var vt=rt;return Il("circle-radius",this,vt)+Il("circle-stroke-width",this,vt)+Lc(this.paint.get("circle-translate"))},E.prototype.queryIntersectsFeature=function(rt,vt,xt,At,Ot,re,he,ge){for(var Fe=pc(rt,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),re.angle,he),nr=this.paint.get("circle-radius").evaluate(vt,xt),qe=this.paint.get("circle-stroke-width").evaluate(vt,xt),mr=nr+qe,Br=this.paint.get("circle-pitch-alignment")==="map",sn=Br?Fe:Rb(Fe,ge),tn=Br?mr*he:mr,En=0,xn=At;En<xn.length;En+=1)for(var Cn=xn[En],Fn=0,Wn=Cn;Fn<Wn.length;Fn+=1){var li=Wn[Fn],ai=Br?li:sg(li,ge),Fi=tn,Ti=Od([],[li.x,li.y,0,1],ge);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Fi*=Ti[3]/re.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Fi*=re.cameraToCenterDistance/Ti[3]),Sa(sn,ai,Fi))return!0}return!1},E}(zs);function sg(C,E){var N=Od([],[C.x,C.y,0,1],E);return new d(N[0]/N[3],N[1]/N[3])}function Rb(C,E){return C.map(function(N){return sg(N,E)})}var lg=function(C){function E(){C.apply(this,arguments)}return C&&(E.__proto__=C),E.prototype=Object.create(C&&C.prototype),E.prototype.constructor=E,E}(no);Bt("HeatmapBucket",lg,{omit:["layers"]});function pv(C,E,N,rt){var vt=E.width,xt=E.height;if(!rt)rt=new Uint8Array(vt*xt*N);else if(rt instanceof Uint8ClampedArray)rt=new Uint8Array(rt.buffer);else if(rt.length!==vt*xt*N)throw new RangeError("mismatched image size");return C.width=vt,C.height=xt,C.data=rt,C}function cg(C,E,N){var rt=E.width,vt=E.height;if(!(rt===C.width&&vt===C.height)){var xt=pv({},{width:rt,height:vt},N);vv(C,xt,{x:0,y:0},{x:0,y:0},{width:Math.min(C.width,rt),height:Math.min(C.height,vt)},N),C.width=rt,C.height=vt,C.data=xt.data}}function vv(C,E,N,rt,vt,xt){if(vt.width===0||vt.height===0)return E;if(vt.width>C.width||vt.height>C.height||N.x>C.width-vt.width||N.y>C.height-vt.height)throw new RangeError("out of range source coordinates for image copy");if(vt.width>E.width||vt.height>E.height||rt.x>E.width-vt.width||rt.y>E.height-vt.height)throw new RangeError("out of range destination coordinates for image copy");for(var At=C.data,Ot=E.data,re=0;re<vt.height;re++)for(var he=((N.y+re)*C.width+N.x)*xt,ge=((rt.y+re)*E.width+rt.x)*xt,Fe=0;Fe<vt.width*xt;Fe++)Ot[ge+Fe]=At[he+Fe];return E}var Mf=function(E,N){pv(this,E,1,N)};Mf.prototype.resize=function(E){cg(this,E,1)},Mf.prototype.clone=function(){return new Mf({width:this.width,height:this.height},new Uint8Array(this.data))},Mf.copy=function(E,N,rt,vt,xt){vv(E,N,rt,vt,xt,1)};var xl=function(E,N){pv(this,E,4,N)};xl.prototype.resize=function(E){cg(this,E,4)},xl.prototype.replace=function(E,N){N?this.data.set(E):E instanceof Uint8ClampedArray?this.data=new Uint8Array(E.buffer):this.data=E},xl.prototype.clone=function(){return new xl({width:this.width,height:this.height},new Uint8Array(this.data))},xl.copy=function(E,N,rt,vt,xt){vv(E,N,rt,vt,xt,4)},Bt("AlphaImage",Mf),Bt("RGBAImage",xl);var Fb=new eo({"heatmap-radius":new Ki(Ue.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ki(Ue.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Oi(Ue.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Vo(Ue.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Oi(Ue.paint_heatmap["heatmap-opacity"])}),Ob={paint:Fb};function ug(C,E){for(var N=new Uint8Array(1024),rt={},vt=0,xt=0;vt<256;vt++,xt+=4){rt[E]=vt/255;var At=C.evaluate(rt);N[xt+0]=Math.floor(At.r*255/At.a),N[xt+1]=Math.floor(At.g*255/At.a),N[xt+2]=Math.floor(At.b*255/At.a),N[xt+3]=Math.floor(At.a*255)}return new xl({width:256,height:1},N)}var Bb=function(C){function E(N){C.call(this,N,Ob),this._updateColorRamp()}return C&&(E.__proto__=C),E.prototype=Object.create(C&&C.prototype),E.prototype.constructor=E,E.prototype.createBucket=function(rt){return new lg(rt)},E.prototype._handleSpecialPaintPropertyUpdate=function(rt){rt==="heatmap-color"&&this._updateColorRamp()},E.prototype._updateColorRamp=function(){var rt=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=ug(rt,"heatmapDensity"),this.colorRampTexture=null},E.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},E.prototype.queryRadius=function(){return 0},E.prototype.queryIntersectsFeature=function(){return!1},E.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},E}(zs),Nb=new eo({"hillshade-illumination-direction":new Oi(Ue.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Oi(Ue.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Oi(Ue.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Oi(Ue.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Oi(Ue.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Oi(Ue.paint_hillshade["hillshade-accent-color"])}),Ub={paint:Nb},Hb=function(C){function E(N){C.call(this,N,Ub)}return C&&(E.__proto__=C),E.prototype=Object.create(C&&C.prototype),E.prototype.constructor=E,E.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},E}(zs),Vb=Go([{name:"a_pos",components:2,type:"Int16"}],4),fg=Vb.members,gv=Bd,Gb=Bd;function Bd(C,E,N){N=N||2;var rt=E&&E.length,vt=rt?E[0]*N:C.length,xt=hg(C,0,vt,N,!0),At=[];if(!xt||xt.next===xt.prev)return At;var Ot,re,he,ge,Fe,nr,qe;if(rt&&(xt=jb(C,E,xt,N)),C.length>80*N){Ot=he=C[0],re=ge=C[1];for(var mr=N;mr<vt;mr+=N)Fe=C[mr],nr=C[mr+1],Fe<Ot&&(Ot=Fe),nr<re&&(re=nr),Fe>he&&(he=Fe),nr>ge&&(ge=nr);qe=Math.max(he-Ot,ge-re),qe=qe!==0?1/qe:0}return Qh(xt,At,N,Ot,re,qe),At}function hg(C,E,N,rt,vt){var xt,At;if(vt===bv(C,E,N,rt)>0)for(xt=E;xt<N;xt+=rt)At=vg(xt,C[xt],C[xt+1],At);else for(xt=N-rt;xt>=E;xt-=rt)At=vg(xt,C[xt],C[xt+1],At);return At&&Nd(At,At.next)&&(td(At),At=At.next),At}function of(C,E){if(!C)return C;E||(E=C);var N=C,rt;do if(rt=!1,!N.steiner&&(Nd(N,N.next)||Jo(N.prev,N,N.next)===0)){if(td(N),N=E=N.prev,N===N.next)break;rt=!0}else N=N.next;while(rt||N!==E);return E}function Qh(C,E,N,rt,vt,xt,At){if(!!C){!At&&xt&&qb(C,rt,vt,xt);for(var Ot=C,re,he;C.prev!==C.next;){if(re=C.prev,he=C.next,xt?Wb(C,rt,vt,xt):Yb(C)){E.push(re.i/N),E.push(C.i/N),E.push(he.i/N),td(C),C=he.next,Ot=he.next;continue}if(C=he,C===Ot){At?At===1?(C=$b(of(C),E,N),Qh(C,E,N,rt,vt,xt,2)):At===2&&Xb(C,E,N,rt,vt,xt):Qh(of(C),E,N,rt,vt,xt,1);break}}}}function Yb(C){var E=C.prev,N=C,rt=C.next;if(Jo(E,N,rt)>=0)return!1;for(var vt=C.next.next;vt!==C.prev;){if(ah(E.x,E.y,N.x,N.y,rt.x,rt.y,vt.x,vt.y)&&Jo(vt.prev,vt,vt.next)>=0)return!1;vt=vt.next}return!0}function Wb(C,E,N,rt){var vt=C.prev,xt=C,At=C.next;if(Jo(vt,xt,At)>=0)return!1;for(var Ot=vt.x<xt.x?vt.x<At.x?vt.x:At.x:xt.x<At.x?xt.x:At.x,re=vt.y<xt.y?vt.y<At.y?vt.y:At.y:xt.y<At.y?xt.y:At.y,he=vt.x>xt.x?vt.x>At.x?vt.x:At.x:xt.x>At.x?xt.x:At.x,ge=vt.y>xt.y?vt.y>At.y?vt.y:At.y:xt.y>At.y?xt.y:At.y,Fe=mv(Ot,re,E,N,rt),nr=mv(he,ge,E,N,rt),qe=C.prevZ,mr=C.nextZ;qe&&qe.z>=Fe&&mr&&mr.z<=nr;){if(qe!==C.prev&&qe!==C.next&&ah(vt.x,vt.y,xt.x,xt.y,At.x,At.y,qe.x,qe.y)&&Jo(qe.prev,qe,qe.next)>=0||(qe=qe.prevZ,mr!==C.prev&&mr!==C.next&&ah(vt.x,vt.y,xt.x,xt.y,At.x,At.y,mr.x,mr.y)&&Jo(mr.prev,mr,mr.next)>=0))return!1;mr=mr.nextZ}for(;qe&&qe.z>=Fe;){if(qe!==C.prev&&qe!==C.next&&ah(vt.x,vt.y,xt.x,xt.y,At.x,At.y,qe.x,qe.y)&&Jo(qe.prev,qe,qe.next)>=0)return!1;qe=qe.prevZ}for(;mr&&mr.z<=nr;){if(mr!==C.prev&&mr!==C.next&&ah(vt.x,vt.y,xt.x,xt.y,At.x,At.y,mr.x,mr.y)&&Jo(mr.prev,mr,mr.next)>=0)return!1;mr=mr.nextZ}return!0}function $b(C,E,N){var rt=C;do{var vt=rt.prev,xt=rt.next.next;!Nd(vt,xt)&&dg(vt,rt,rt.next,xt)&&qh(vt,xt)&&qh(xt,vt)&&(E.push(vt.i/N),E.push(rt.i/N),E.push(xt.i/N),td(rt),td(rt.next),rt=C=xt),rt=rt.next}while(rt!==C);return of(rt)}function Xb(C,E,N,rt,vt,xt){var At=C;do{for(var Ot=At.next.next;Ot!==At.prev;){if(At.i!==Ot.i&&rx(At,Ot)){var re=pg(At,Ot);At=of(At,At.next),re=of(re,re.next),Qh(At,E,N,rt,vt,xt),Qh(re,E,N,rt,vt,xt);return}Ot=Ot.next}At=At.next}while(At!==C)}function jb(C,E,N,rt){var vt=[],xt,At,Ot,re,he;for(xt=0,At=E.length;xt<At;xt++)Ot=E[xt]*rt,re=xt<At-1?E[xt+1]*rt:C.length,he=hg(C,Ot,re,rt,!1),he===he.next&&(he.steiner=!0),vt.push(ex(he));for(vt.sort(Zb),xt=0;xt<vt.length;xt++)Kb(vt[xt],N),N=of(N,N.next);return N}function Zb(C,E){return C.x-E.x}function Kb(C,E){if(E=Jb(C,E),E){var N=pg(E,C);of(E,E.next),of(N,N.next)}}function Jb(C,E){var N=E,rt=C.x,vt=C.y,xt=-1/0,At;do{if(vt<=N.y&&vt>=N.next.y&&N.next.y!==N.y){var Ot=N.x+(vt-N.y)*(N.next.x-N.x)/(N.next.y-N.y);if(Ot<=rt&&Ot>xt){if(xt=Ot,Ot===rt){if(vt===N.y)return N;if(vt===N.next.y)return N.next}At=N.x<N.next.x?N:N.next}}N=N.next}while(N!==E);if(!At)return null;if(rt===xt)return At;var re=At,he=At.x,ge=At.y,Fe=1/0,nr;N=At;do rt>=N.x&&N.x>=he&&rt!==N.x&&ah(vt<ge?rt:xt,vt,he,ge,vt<ge?xt:rt,vt,N.x,N.y)&&(nr=Math.abs(vt-N.y)/(rt-N.x),qh(N,C)&&(nr<Fe||nr===Fe&&(N.x>At.x||N.x===At.x&&Qb(At,N)))&&(At=N,Fe=nr)),N=N.next;while(N!==re);return At}function Qb(C,E){return Jo(C.prev,C,E.prev)<0&&Jo(E.next,C,C.next)<0}function qb(C,E,N,rt){var vt=C;do vt.z===null&&(vt.z=mv(vt.x,vt.y,E,N,rt)),vt.prevZ=vt.prev,vt.nextZ=vt.next,vt=vt.next;while(vt!==C);vt.prevZ.nextZ=null,vt.prevZ=null,tx(vt)}function tx(C){var E,N,rt,vt,xt,At,Ot,re,he=1;do{for(N=C,C=null,xt=null,At=0;N;){for(At++,rt=N,Ot=0,E=0;E<he&&(Ot++,rt=rt.nextZ,!!rt);E++);for(re=he;Ot>0||re>0&&rt;)Ot!==0&&(re===0||!rt||N.z<=rt.z)?(vt=N,N=N.nextZ,Ot--):(vt=rt,rt=rt.nextZ,re--),xt?xt.nextZ=vt:C=vt,vt.prevZ=xt,xt=vt;N=rt}xt.nextZ=null,he*=2}while(At>1);return C}function mv(C,E,N,rt,vt){return C=32767*(C-N)*vt,E=32767*(E-rt)*vt,C=(C|C<<8)&16711935,C=(C|C<<4)&252645135,C=(C|C<<2)&858993459,C=(C|C<<1)&1431655765,E=(E|E<<8)&16711935,E=(E|E<<4)&252645135,E=(E|E<<2)&858993459,E=(E|E<<1)&1431655765,C|E<<1}function ex(C){var E=C,N=C;do(E.x<N.x||E.x===N.x&&E.y<N.y)&&(N=E),E=E.next;while(E!==C);return N}function ah(C,E,N,rt,vt,xt,At,Ot){return(vt-At)*(E-Ot)-(C-At)*(xt-Ot)>=0&&(C-At)*(rt-Ot)-(N-At)*(E-Ot)>=0&&(N-At)*(xt-Ot)-(vt-At)*(rt-Ot)>=0}function rx(C,E){return C.next.i!==E.i&&C.prev.i!==E.i&&!nx(C,E)&&(qh(C,E)&&qh(E,C)&&ix(C,E)&&(Jo(C.prev,C,E.prev)||Jo(C,E.prev,E))||Nd(C,E)&&Jo(C.prev,C,C.next)>0&&Jo(E.prev,E,E.next)>0)}function Jo(C,E,N){return(E.y-C.y)*(N.x-E.x)-(E.x-C.x)*(N.y-E.y)}function Nd(C,E){return C.x===E.x&&C.y===E.y}function dg(C,E,N,rt){var vt=Hd(Jo(C,E,N)),xt=Hd(Jo(C,E,rt)),At=Hd(Jo(N,rt,C)),Ot=Hd(Jo(N,rt,E));return!!(vt!==xt&&At!==Ot||vt===0&&Ud(C,N,E)||xt===0&&Ud(C,rt,E)||At===0&&Ud(N,C,rt)||Ot===0&&Ud(N,E,rt))}function Ud(C,E,N){return E.x<=Math.max(C.x,N.x)&&E.x>=Math.min(C.x,N.x)&&E.y<=Math.max(C.y,N.y)&&E.y>=Math.min(C.y,N.y)}function Hd(C){return C>0?1:C<0?-1:0}function nx(C,E){var N=C;do{if(N.i!==C.i&&N.next.i!==C.i&&N.i!==E.i&&N.next.i!==E.i&&dg(N,N.next,C,E))return!0;N=N.next}while(N!==C);return!1}function qh(C,E){return Jo(C.prev,C,C.next)<0?Jo(C,E,C.next)>=0&&Jo(C,C.prev,E)>=0:Jo(C,E,C.prev)<0||Jo(C,C.next,E)<0}function ix(C,E){var N=C,rt=!1,vt=(C.x+E.x)/2,xt=(C.y+E.y)/2;do N.y>xt!=N.next.y>xt&&N.next.y!==N.y&&vt<(N.next.x-N.x)*(xt-N.y)/(N.next.y-N.y)+N.x&&(rt=!rt),N=N.next;while(N!==C);return rt}function pg(C,E){var N=new yv(C.i,C.x,C.y),rt=new yv(E.i,E.x,E.y),vt=C.next,xt=E.prev;return C.next=E,E.prev=C,N.next=vt,vt.prev=N,rt.next=N,N.prev=rt,xt.next=rt,rt.prev=xt,rt}function vg(C,E,N,rt){var vt=new yv(C,E,N);return rt?(vt.next=rt.next,vt.prev=rt,rt.next.prev=vt,rt.next=vt):(vt.prev=vt,vt.next=vt),vt}function td(C){C.next.prev=C.prev,C.prev.next=C.next,C.prevZ&&(C.prevZ.nextZ=C.nextZ),C.nextZ&&(C.nextZ.prevZ=C.prevZ)}function yv(C,E,N){this.i=C,this.x=E,this.y=N,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}Bd.deviation=function(C,E,N,rt){var vt=E&&E.length,xt=vt?E[0]*N:C.length,At=Math.abs(bv(C,0,xt,N));if(vt)for(var Ot=0,re=E.length;Ot<re;Ot++){var he=E[Ot]*N,ge=Ot<re-1?E[Ot+1]*N:C.length;At-=Math.abs(bv(C,he,ge,N))}var Fe=0;for(Ot=0;Ot<rt.length;Ot+=3){var nr=rt[Ot]*N,qe=rt[Ot+1]*N,mr=rt[Ot+2]*N;Fe+=Math.abs((C[nr]-C[mr])*(C[qe+1]-C[nr+1])-(C[nr]-C[qe])*(C[mr+1]-C[nr+1]))}return At===0&&Fe===0?0:Math.abs((Fe-At)/At)};function bv(C,E,N,rt){for(var vt=0,xt=E,At=N-rt;xt<N;xt+=rt)vt+=(C[At]-C[xt])*(C[xt+1]+C[At+1]),At=xt;return vt}Bd.flatten=function(C){for(var E=C[0][0].length,N={vertices:[],holes:[],dimensions:E},rt=0,vt=0;vt<C.length;vt++){for(var xt=0;xt<C[vt].length;xt++)for(var At=0;At<E;At++)N.vertices.push(C[vt][xt][At]);vt>0&&(rt+=C[vt-1].length,N.holes.push(rt))}return N},gv.default=Gb;function ax(C,E,N,rt,vt){gg(C,E,N||0,rt||C.length-1,vt||ox)}function gg(C,E,N,rt,vt){for(;rt>N;){if(rt-N>600){var xt=rt-N+1,At=E-N+1,Ot=Math.log(xt),re=.5*Math.exp(2*Ot/3),he=.5*Math.sqrt(Ot*re*(xt-re)/xt)*(At-xt/2<0?-1:1),ge=Math.max(N,Math.floor(E-At*re/xt+he)),Fe=Math.min(rt,Math.floor(E+(xt-At)*re/xt+he));gg(C,E,ge,Fe,vt)}var nr=C[E],qe=N,mr=rt;for(ed(C,N,E),vt(C[rt],nr)>0&&ed(C,N,rt);qe<mr;){for(ed(C,qe,mr),qe++,mr--;vt(C[qe],nr)<0;)qe++;for(;vt(C[mr],nr)>0;)mr--}vt(C[N],nr)===0?ed(C,N,mr):(mr++,ed(C,mr,rt)),mr<=E&&(N=mr+1),E<=mr&&(rt=mr-1)}}function ed(C,E,N){var rt=C[E];C[E]=C[N],C[N]=rt}function ox(C,E){return C<E?-1:C>E?1:0}function xv(C,E){var N=C.length;if(N<=1)return[C];for(var rt=[],vt,xt,At=0;At<N;At++){var Ot=G(C[At]);Ot!==0&&(C[At].area=Math.abs(Ot),xt===void 0&&(xt=Ot<0),xt===Ot<0?(vt&&rt.push(vt),vt=[C[At]]):vt.push(C[At]))}if(vt&&rt.push(vt),E>1)for(var re=0;re<rt.length;re++)rt[re].length<=E||(ax(rt[re],E,1,rt[re].length-1,sx),rt[re]=rt[re].slice(0,E));return rt}function sx(C,E){return E.area-C.area}function wv(C,E,N){for(var rt=N.patternDependencies,vt=!1,xt=0,At=E;xt<At.length;xt+=1){var Ot=At[xt],re=Ot.paint.get(C+"-pattern");re.isConstant()||(vt=!0);var he=re.constantOr(null);he&&(vt=!0,rt[he.to]=!0,rt[he.from]=!0)}return vt}function _v(C,E,N,rt,vt){for(var xt=vt.patternDependencies,At=0,Ot=E;At<Ot.length;At+=1){var re=Ot[At],he=re.paint.get(C+"-pattern"),ge=he.value;if(ge.kind!=="constant"){var Fe=ge.evaluate({zoom:rt-1},N,{},vt.availableImages),nr=ge.evaluate({zoom:rt},N,{},vt.availableImages),qe=ge.evaluate({zoom:rt+1},N,{},vt.availableImages);Fe=Fe&&Fe.name?Fe.name:Fe,nr=nr&&nr.name?nr.name:nr,qe=qe&&qe.name?qe.name:qe,xt[Fe]=!0,xt[nr]=!0,xt[qe]=!0,N.patterns[re.id]={min:Fe,mid:nr,max:qe}}}return N}var lx=500,tu=function(E){this.zoom=E.zoom,this.overscaling=E.overscaling,this.layers=E.layers,this.layerIds=this.layers.map(function(N){return N.id}),this.index=E.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new xf,this.indexArray=new Qc,this.indexArray2=new kf,this.programConfigurations=new oa(fg,E.layers,E.zoom),this.segments=new Y,this.segments2=new Y,this.stateDependentLayerIds=this.layers.filter(function(N){return N.isStateDependent()}).map(function(N){return N.id})};tu.prototype.populate=function(E,N,rt){this.hasPattern=wv("fill",this.layers,N);for(var vt=this.layers[0].layout.get("fill-sort-key"),xt=[],At=0,Ot=E;At<Ot.length;At+=1){var re=Ot[At],he=re.feature,ge=re.id,Fe=re.index,nr=re.sourceLayerIndex,qe=this.layers[0]._featureFilter.needGeometry,mr={type:he.type,id:ge,properties:he.properties,geometry:qe?$a(he):[]};if(!!this.layers[0]._featureFilter.filter(new ua(this.zoom),mr,rt)){qe||(mr.geometry=$a(he));var Br=vt?vt.evaluate(mr,{},rt,N.availableImages):void 0,sn={id:ge,properties:he.properties,type:he.type,sourceLayerIndex:nr,index:Fe,geometry:mr.geometry,patterns:{},sortKey:Br};xt.push(sn)}}vt&&xt.sort(function(Ti,Mi){return Ti.sortKey-Mi.sortKey});for(var tn=0,En=xt;tn<En.length;tn+=1){var xn=En[tn],Cn=xn,Fn=Cn.geometry,Wn=Cn.index,li=Cn.sourceLayerIndex;if(this.hasPattern){var ai=_v("fill",this.layers,xn,this.zoom,N);this.patternFeatures.push(ai)}else this.addFeature(xn,Fn,Wn,rt,{});var Fi=E[Wn].feature;N.featureIndex.insert(Fi,Fn,Wn,li,this.index)}},tu.prototype.update=function(E,N,rt){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(E,N,this.stateDependentLayers,rt)},tu.prototype.addFeatures=function(E,N,rt){for(var vt=0,xt=this.patternFeatures;vt<xt.length;vt+=1){var At=xt[vt];this.addFeature(At,At.geometry,At.index,N,rt)}},tu.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},tu.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},tu.prototype.upload=function(E){this.uploaded||(this.layoutVertexBuffer=E.createVertexBuffer(this.layoutVertexArray,fg),this.indexBuffer=E.createIndexBuffer(this.indexArray),this.indexBuffer2=E.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(E),this.uploaded=!0},tu.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},tu.prototype.addFeature=function(E,N,rt,vt,xt){for(var At=0,Ot=xv(N,lx);At<Ot.length;At+=1){for(var re=Ot[At],he=0,ge=0,Fe=re;ge<Fe.length;ge+=1){var nr=Fe[ge];he+=nr.length}for(var qe=this.segments.prepareSegment(he,this.layoutVertexArray,this.indexArray),mr=qe.vertexLength,Br=[],sn=[],tn=0,En=re;tn<En.length;tn+=1){var xn=En[tn];if(xn.length!==0){xn!==re[0]&&sn.push(Br.length/2);var Cn=this.segments2.prepareSegment(xn.length,this.layoutVertexArray,this.indexArray2),Fn=Cn.vertexLength;this.layoutVertexArray.emplaceBack(xn[0].x,xn[0].y),this.indexArray2.emplaceBack(Fn+xn.length-1,Fn),Br.push(xn[0].x),Br.push(xn[0].y);for(var Wn=1;Wn<xn.length;Wn++)this.layoutVertexArray.emplaceBack(xn[Wn].x,xn[Wn].y),this.indexArray2.emplaceBack(Fn+Wn-1,Fn+Wn),Br.push(xn[Wn].x),Br.push(xn[Wn].y);Cn.vertexLength+=xn.length,Cn.primitiveLength+=xn.length}}for(var li=gv(Br,sn),ai=0;ai<li.length;ai+=3)this.indexArray.emplaceBack(mr+li[ai],mr+li[ai+1],mr+li[ai+2]);qe.vertexLength+=he,qe.primitiveLength+=li.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,E,rt,xt,vt)},Bt("FillBucket",tu,{omit:["layers","patternFeatures"]});var cx=new eo({"fill-sort-key":new Ki(Ue.layout_fill["fill-sort-key"])}),ux=new eo({"fill-antialias":new Oi(Ue.paint_fill["fill-antialias"]),"fill-opacity":new Ki(Ue.paint_fill["fill-opacity"]),"fill-color":new Ki(Ue.paint_fill["fill-color"]),"fill-outline-color":new Ki(Ue.paint_fill["fill-outline-color"]),"fill-translate":new Oi(Ue.paint_fill["fill-translate"]),"fill-translate-anchor":new Oi(Ue.paint_fill["fill-translate-anchor"]),"fill-pattern":new Eo(Ue.paint_fill["fill-pattern"])}),fx={paint:ux,layout:cx},hx=function(C){function E(N){C.call(this,N,fx)}return C&&(E.__proto__=C),E.prototype=Object.create(C&&C.prototype),E.prototype.constructor=E,E.prototype.recalculate=function(rt,vt){C.prototype.recalculate.call(this,rt,vt);var xt=this.paint._values["fill-outline-color"];xt.value.kind==="constant"&&xt.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},E.prototype.createBucket=function(rt){return new tu(rt)},E.prototype.queryRadius=function(){return Lc(this.paint.get("fill-translate"))},E.prototype.queryIntersectsFeature=function(rt,vt,xt,At,Ot,re,he){var ge=pc(rt,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),re.angle,he);return Po(ge,At)},E.prototype.isTileClipped=function(){return!0},E}(zs),dx=Go([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),mg=dx.members,yg=oh;function oh(C,E,N,rt,vt){this.properties={},this.extent=N,this.type=0,this._pbf=C,this._geometry=-1,this._keys=rt,this._values=vt,C.readFields(px,this,E)}function px(C,E,N){C==1?E.id=N.readVarint():C==2?vx(N,E):C==3?E.type=N.readVarint():C==4&&(E._geometry=N.pos)}function vx(C,E){for(var N=C.readVarint()+C.pos;C.pos<N;){var rt=E._keys[C.readVarint()],vt=E._values[C.readVarint()];E.properties[rt]=vt}}oh.types=["Unknown","Point","LineString","Polygon"],oh.prototype.loadGeometry=function(){var C=this._pbf;C.pos=this._geometry;for(var E=C.readVarint()+C.pos,N=1,rt=0,vt=0,xt=0,At=[],Ot;C.pos<E;){if(rt<=0){var re=C.readVarint();N=re&7,rt=re>>3}if(rt--,N===1||N===2)vt+=C.readSVarint(),xt+=C.readSVarint(),N===1&&(Ot&&At.push(Ot),Ot=[]),Ot.push(new d(vt,xt));else if(N===7)Ot&&Ot.push(Ot[0].clone());else throw new Error("unknown command "+N)}return Ot&&At.push(Ot),At},oh.prototype.bbox=function(){var C=this._pbf;C.pos=this._geometry;for(var E=C.readVarint()+C.pos,N=1,rt=0,vt=0,xt=0,At=1/0,Ot=-1/0,re=1/0,he=-1/0;C.pos<E;){if(rt<=0){var ge=C.readVarint();N=ge&7,rt=ge>>3}if(rt--,N===1||N===2)vt+=C.readSVarint(),xt+=C.readSVarint(),vt<At&&(At=vt),vt>Ot&&(Ot=vt),xt<re&&(re=xt),xt>he&&(he=xt);else if(N!==7)throw new Error("unknown command "+N)}return[At,re,Ot,he]},oh.prototype.toGeoJSON=function(C,E,N){var rt=this.extent*Math.pow(2,N),vt=this.extent*C,xt=this.extent*E,At=this.loadGeometry(),Ot=oh.types[this.type],re,he;function ge(qe){for(var mr=0;mr<qe.length;mr++){var Br=qe[mr],sn=180-(Br.y+xt)*360/rt;qe[mr]=[(Br.x+vt)*360/rt-180,360/Math.PI*Math.atan(Math.exp(sn*Math.PI/180))-90]}}switch(this.type){case 1:var Fe=[];for(re=0;re<At.length;re++)Fe[re]=At[re][0];At=Fe,ge(At);break;case 2:for(re=0;re<At.length;re++)ge(At[re]);break;case 3:for(At=gx(At),re=0;re<At.length;re++)for(he=0;he<At[re].length;he++)ge(At[re][he]);break}At.length===1?At=At[0]:Ot="Multi"+Ot;var nr={type:"Feature",geometry:{type:Ot,coordinates:At},properties:this.properties};return"id"in this&&(nr.id=this.id),nr};function gx(C){var E=C.length;if(E<=1)return[C];for(var N=[],rt,vt,xt=0;xt<E;xt++){var At=mx(C[xt]);At!==0&&(vt===void 0&&(vt=At<0),vt===At<0?(rt&&N.push(rt),rt=[C[xt]]):rt.push(C[xt]))}return rt&&N.push(rt),N}function mx(C){for(var E=0,N=0,rt=C.length,vt=rt-1,xt,At;N<rt;vt=N++)xt=C[N],At=C[vt],E+=(At.x-xt.x)*(xt.y+At.y);return E}var bg=xg;function xg(C,E){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=C,this._keys=[],this._values=[],this._features=[],C.readFields(yx,this,E),this.length=this._features.length}function yx(C,E,N){C===15?E.version=N.readVarint():C===1?E.name=N.readString():C===5?E.extent=N.readVarint():C===2?E._features.push(N.pos):C===3?E._keys.push(N.readString()):C===4&&E._values.push(bx(N))}function bx(C){for(var E=null,N=C.readVarint()+C.pos;C.pos<N;){var rt=C.readVarint()>>3;E=rt===1?C.readString():rt===2?C.readFloat():rt===3?C.readDouble():rt===4?C.readVarint64():rt===5?C.readVarint():rt===6?C.readSVarint():rt===7?C.readBoolean():null}return E}xg.prototype.feature=function(C){if(C<0||C>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[C];var E=this._pbf.readVarint()+this._pbf.pos;return new yg(this._pbf,E,this.extent,this._keys,this._values)};var xx=wx;function wx(C,E){this.layers=C.readFields(_x,{},E)}function _x(C,E,N){if(C===3){var rt=new bg(N,N.readVarint()+N.pos);rt.length&&(E[rt.name]=rt)}}var kx=xx,Tx=yg,Ax=bg,sh={VectorTile:kx,VectorTileFeature:Tx,VectorTileLayer:Ax},Sx=sh.VectorTileFeature.types,Mx=500,kv=Math.pow(2,13);function rd(C,E,N,rt,vt,xt,At,Ot){C.emplaceBack(E,N,Math.floor(rt*kv)*2+At,vt*kv*2,xt*kv*2,Math.round(Ot))}var eu=function(E){this.zoom=E.zoom,this.overscaling=E.overscaling,this.layers=E.layers,this.layerIds=this.layers.map(function(N){return N.id}),this.index=E.index,this.hasPattern=!1,this.layoutVertexArray=new qu,this.indexArray=new Qc,this.programConfigurations=new oa(mg,E.layers,E.zoom),this.segments=new Y,this.stateDependentLayerIds=this.layers.filter(function(N){return N.isStateDependent()}).map(function(N){return N.id})};eu.prototype.populate=function(E,N,rt){this.features=[],this.hasPattern=wv("fill-extrusion",this.layers,N);for(var vt=0,xt=E;vt<xt.length;vt+=1){var At=xt[vt],Ot=At.feature,re=At.id,he=At.index,ge=At.sourceLayerIndex,Fe=this.layers[0]._featureFilter.needGeometry,nr={type:Ot.type,id:re,properties:Ot.properties,geometry:Fe?$a(Ot):[]};if(!!this.layers[0]._featureFilter.filter(new ua(this.zoom),nr,rt)){var qe={id:re,sourceLayerIndex:ge,index:he,geometry:Fe?nr.geometry:$a(Ot),properties:Ot.properties,type:Ot.type,patterns:{}};typeof Ot.id<"u"&&(qe.id=Ot.id),this.hasPattern?this.features.push(_v("fill-extrusion",this.layers,qe,this.zoom,N)):this.addFeature(qe,qe.geometry,he,rt,{}),N.featureIndex.insert(Ot,qe.geometry,he,ge,this.index,!0)}}},eu.prototype.addFeatures=function(E,N,rt){for(var vt=0,xt=this.features;vt<xt.length;vt+=1){var At=xt[vt],Ot=At.geometry;this.addFeature(At,Ot,At.index,N,rt)}},eu.prototype.update=function(E,N,rt){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(E,N,this.stateDependentLayers,rt)},eu.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},eu.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},eu.prototype.upload=function(E){this.uploaded||(this.layoutVertexBuffer=E.createVertexBuffer(this.layoutVertexArray,mg),this.indexBuffer=E.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(E),this.uploaded=!0},eu.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},eu.prototype.addFeature=function(E,N,rt,vt,xt){for(var At=0,Ot=xv(N,Mx);At<Ot.length;At+=1){for(var re=Ot[At],he=0,ge=0,Fe=re;ge<Fe.length;ge+=1){var nr=Fe[ge];he+=nr.length}for(var qe=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),mr=0,Br=re;mr<Br.length;mr+=1){var sn=Br[mr];if(sn.length!==0&&!Ex(sn))for(var tn=0,En=0;En<sn.length;En++){var xn=sn[En];if(En>=1){var Cn=sn[En-1];if(!Cx(xn,Cn)){qe.vertexLength+4>Y.MAX_VERTEX_ARRAY_LENGTH&&(qe=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var Fn=xn.sub(Cn)._perp()._unit(),Wn=Cn.dist(xn);tn+Wn>32768&&(tn=0),rd(this.layoutVertexArray,xn.x,xn.y,Fn.x,Fn.y,0,0,tn),rd(this.layoutVertexArray,xn.x,xn.y,Fn.x,Fn.y,0,1,tn),tn+=Wn,rd(this.layoutVertexArray,Cn.x,Cn.y,Fn.x,Fn.y,0,0,tn),rd(this.layoutVertexArray,Cn.x,Cn.y,Fn.x,Fn.y,0,1,tn);var li=qe.vertexLength;this.indexArray.emplaceBack(li,li+2,li+1),this.indexArray.emplaceBack(li+1,li+2,li+3),qe.vertexLength+=4,qe.primitiveLength+=2}}}}if(qe.vertexLength+he>Y.MAX_VERTEX_ARRAY_LENGTH&&(qe=this.segments.prepareSegment(he,this.layoutVertexArray,this.indexArray)),Sx[E.type]==="Polygon"){for(var ai=[],Fi=[],Ti=qe.vertexLength,Mi=0,ia=re;Mi<ia.length;Mi+=1){var Di=ia[Mi];if(Di.length!==0){Di!==re[0]&&Fi.push(ai.length/2);for(var Ri=0;Ri<Di.length;Ri++){var da=Di[Ri];rd(this.layoutVertexArray,da.x,da.y,0,0,1,1,0),ai.push(da.x),ai.push(da.y)}}}for(var ra=gv(ai,Fi),Da=0;Da<ra.length;Da+=3)this.indexArray.emplaceBack(Ti+ra[Da],Ti+ra[Da+2],Ti+ra[Da+1]);qe.primitiveLength+=ra.length/3,qe.vertexLength+=he}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,E,rt,xt,vt)},Bt("FillExtrusionBucket",eu,{omit:["layers","features"]});function Cx(C,E){return C.x===E.x&&(C.x<0||C.x>Hi)||C.y===E.y&&(C.y<0||C.y>Hi)}function Ex(C){return C.every(function(E){return E.x<0})||C.every(function(E){return E.x>Hi})||C.every(function(E){return E.y<0})||C.every(function(E){return E.y>Hi})}var Lx=new eo({"fill-extrusion-opacity":new Oi(Ue["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ki(Ue["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Oi(Ue["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Oi(Ue["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Eo(Ue["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ki(Ue["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ki(Ue["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Oi(Ue["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])}),Dx={paint:Lx},Px=function(C){function E(N){C.call(this,N,Dx)}return C&&(E.__proto__=C),E.prototype=Object.create(C&&C.prototype),E.prototype.constructor=E,E.prototype.createBucket=function(rt){return new eu(rt)},E.prototype.queryRadius=function(){return Lc(this.paint.get("fill-extrusion-translate"))},E.prototype.is3D=function(){return!0},E.prototype.queryIntersectsFeature=function(rt,vt,xt,At,Ot,re,he,ge){var Fe=pc(rt,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),re.angle,he),nr=this.paint.get("fill-extrusion-height").evaluate(vt,xt),qe=this.paint.get("fill-extrusion-base").evaluate(vt,xt),mr=Rx(Fe,ge,re,0),Br=zx(At,qe,nr,ge),sn=Br[0],tn=Br[1];return Ix(sn,tn,mr)},E}(zs);function nd(C,E){return C.x*E.x+C.y*E.y}function wg(C,E){if(C.length===1){for(var N=0,rt=E[N++],vt;!vt||rt.equals(vt);)if(vt=E[N++],!vt)return 1/0;for(;N<E.length;N++){var xt=E[N],At=C[0],Ot=vt.sub(rt),re=xt.sub(rt),he=At.sub(rt),ge=nd(Ot,Ot),Fe=nd(Ot,re),nr=nd(re,re),qe=nd(he,Ot),mr=nd(he,re),Br=ge*nr-Fe*Fe,sn=(nr*qe-Fe*mr)/Br,tn=(ge*mr-Fe*qe)/Br,En=1-sn-tn,xn=rt.z*En+vt.z*sn+xt.z*tn;if(isFinite(xn))return xn}return 1/0}else{for(var Cn=1/0,Fn=0,Wn=E;Fn<Wn.length;Fn+=1){var li=Wn[Fn];Cn=Math.min(Cn,li.z)}return Cn}}function Ix(C,E,N){var rt=1/0;Po(N,E)&&(rt=wg(N,E[0]));for(var vt=0;vt<E.length;vt++)for(var xt=E[vt],At=C[vt],Ot=0;Ot<xt.length-1;Ot++){var re=xt[Ot],he=xt[Ot+1],ge=At[Ot],Fe=At[Ot+1],nr=[re,he,Fe,ge,re];la(N,nr)&&(rt=Math.min(rt,wg(N,nr)))}return rt===1/0?!1:rt}function zx(C,E,N,rt){for(var vt=[],xt=[],At=rt[8]*E,Ot=rt[9]*E,re=rt[10]*E,he=rt[11]*E,ge=rt[8]*N,Fe=rt[9]*N,nr=rt[10]*N,qe=rt[11]*N,mr=0,Br=C;mr<Br.length;mr+=1){for(var sn=Br[mr],tn=[],En=[],xn=0,Cn=sn;xn<Cn.length;xn+=1){var Fn=Cn[xn],Wn=Fn.x,li=Fn.y,ai=rt[0]*Wn+rt[4]*li+rt[12],Fi=rt[1]*Wn+rt[5]*li+rt[13],Ti=rt[2]*Wn+rt[6]*li+rt[14],Mi=rt[3]*Wn+rt[7]*li+rt[15],ia=ai+At,Di=Fi+Ot,Ri=Ti+re,da=Mi+he,ra=ai+ge,Da=Fi+Fe,Qa=Ti+nr,Pa=Mi+qe,Ia=new d(ia/da,Di/da);Ia.z=Ri/da,tn.push(Ia);var Ma=new d(ra/Pa,Da/Pa);Ma.z=Qa/Pa,En.push(Ma)}vt.push(tn),xt.push(En)}return[vt,xt]}function Rx(C,E,N,rt){for(var vt=[],xt=0,At=C;xt<At.length;xt+=1){var Ot=At[xt],re=[Ot.x,Ot.y,rt,1];Od(re,re,E),vt.push(new d(re[0]/re[3],re[1]/re[3]))}return vt}var Fx=Go([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),_g=Fx.members,Ox=sh.VectorTileFeature.types,kg=63,Bx=Math.cos(75/2*(Math.PI/180)),Nx=15,Ux=20,Hx=15,Tg=1/2,Ag=Math.pow(2,Hx-1)/Tg,wl=function(E){this.zoom=E.zoom,this.overscaling=E.overscaling,this.layers=E.layers,this.layerIds=this.layers.map(function(N){return N.id}),this.index=E.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Kf,this.indexArray=new Qc,this.programConfigurations=new oa(_g,E.layers,E.zoom),this.segments=new Y,this.stateDependentLayerIds=this.layers.filter(function(N){return N.isStateDependent()}).map(function(N){return N.id})};wl.prototype.populate=function(E,N,rt){this.hasPattern=wv("line",this.layers,N);for(var vt=this.layers[0].layout.get("line-sort-key"),xt=[],At=0,Ot=E;At<Ot.length;At+=1){var re=Ot[At],he=re.feature,ge=re.id,Fe=re.index,nr=re.sourceLayerIndex,qe=this.layers[0]._featureFilter.needGeometry,mr={type:he.type,id:ge,properties:he.properties,geometry:qe?$a(he):[]};if(!!this.layers[0]._featureFilter.filter(new ua(this.zoom),mr,rt)){qe||(mr.geometry=$a(he));var Br=vt?vt.evaluate(mr,{},rt):void 0,sn={id:ge,properties:he.properties,type:he.type,sourceLayerIndex:nr,index:Fe,geometry:mr.geometry,patterns:{},sortKey:Br};xt.push(sn)}}vt&&xt.sort(function(Ti,Mi){return Ti.sortKey-Mi.sortKey});for(var tn=0,En=xt;tn<En.length;tn+=1){var xn=En[tn],Cn=xn,Fn=Cn.geometry,Wn=Cn.index,li=Cn.sourceLayerIndex;if(this.hasPattern){var ai=_v("line",this.layers,xn,this.zoom,N);this.patternFeatures.push(ai)}else this.addFeature(xn,Fn,Wn,rt,{});var Fi=E[Wn].feature;N.featureIndex.insert(Fi,Fn,Wn,li,this.index)}},wl.prototype.update=function(E,N,rt){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(E,N,this.stateDependentLayers,rt)},wl.prototype.addFeatures=function(E,N,rt){for(var vt=0,xt=this.patternFeatures;vt<xt.length;vt+=1){var At=xt[vt];this.addFeature(At,At.geometry,At.index,N,rt)}},wl.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},wl.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},wl.prototype.upload=function(E){this.uploaded||(this.layoutVertexBuffer=E.createVertexBuffer(this.layoutVertexArray,_g),this.indexBuffer=E.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(E),this.uploaded=!0},wl.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},wl.prototype.addFeature=function(E,N,rt,vt,xt){for(var At=this.layers[0].layout,Ot=At.get("line-join").evaluate(E,{}),re=At.get("line-cap"),he=At.get("line-miter-limit"),ge=At.get("line-round-limit"),Fe=0,nr=N;Fe<nr.length;Fe+=1){var qe=nr[Fe];this.addLine(qe,E,Ot,re,he,ge)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,E,rt,xt,vt)},wl.prototype.addLine=function(E,N,rt,vt,xt,At){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,!!N.properties&&N.properties.hasOwnProperty("mapbox_clip_start")&&N.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+N.properties.mapbox_clip_start,this.clipEnd=+N.properties.mapbox_clip_end;for(var Ot=0;Ot<E.length-1;Ot++)this.totalDistance+=E[Ot].dist(E[Ot+1]);this.updateScaledDistance()}for(var re=Ox[N.type]==="Polygon",he=E.length;he>=2&&E[he-1].equals(E[he-2]);)he--;for(var ge=0;ge<he-1&&E[ge].equals(E[ge+1]);)ge++;if(!(he<(re?3:2))){rt==="bevel"&&(xt=1.05);var Fe=this.overscaling<=16?Nx*Hi/(512*this.overscaling):0,nr=this.segments.prepareSegment(he*10,this.layoutVertexArray,this.indexArray),qe,mr=void 0,Br=void 0,sn=void 0,tn=void 0;this.e1=this.e2=-1,re&&(qe=E[he-2],tn=E[ge].sub(qe)._unit()._perp());for(var En=ge;En<he;En++)if(Br=En===he-1?re?E[ge+1]:void 0:E[En+1],!(Br&&E[En].equals(Br))){tn&&(sn=tn),qe&&(mr=qe),qe=E[En],tn=Br?Br.sub(qe)._unit()._perp():sn,sn=sn||tn;var xn=sn.add(tn);(xn.x!==0||xn.y!==0)&&xn._unit();var Cn=sn.x*tn.x+sn.y*tn.y,Fn=xn.x*tn.x+xn.y*tn.y,Wn=Fn!==0?1/Fn:1/0,li=2*Math.sqrt(2-2*Fn),ai=Fn<Bx&&mr&&Br,Fi=sn.x*tn.y-sn.y*tn.x>0;if(ai&&En>ge){var Ti=qe.dist(mr);if(Ti>2*Fe){var Mi=qe.sub(qe.sub(mr)._mult(Fe/Ti)._round());this.updateDistance(mr,Mi),this.addCurrentVertex(Mi,sn,0,0,nr),mr=Mi}}var ia=mr&&Br,Di=ia?rt:re?"butt":vt;if(ia&&Di==="round"&&(Wn<At?Di="miter":Wn<=2&&(Di="fakeround")),Di==="miter"&&Wn>xt&&(Di="bevel"),Di==="bevel"&&(Wn>2&&(Di="flipbevel"),Wn<xt&&(Di="miter")),mr&&this.updateDistance(mr,qe),Di==="miter")xn._mult(Wn),this.addCurrentVertex(qe,xn,0,0,nr);else if(Di==="flipbevel"){if(Wn>100)xn=tn.mult(-1);else{var Ri=Wn*sn.add(tn).mag()/sn.sub(tn).mag();xn._perp()._mult(Ri*(Fi?-1:1))}this.addCurrentVertex(qe,xn,0,0,nr),this.addCurrentVertex(qe,xn.mult(-1),0,0,nr)}else if(Di==="bevel"||Di==="fakeround"){var da=-Math.sqrt(Wn*Wn-1),ra=Fi?da:0,Da=Fi?0:da;if(mr&&this.addCurrentVertex(qe,sn,ra,Da,nr),Di==="fakeround")for(var Qa=Math.round(li*180/Math.PI/Ux),Pa=1;Pa<Qa;Pa++){var Ia=Pa/Qa;if(Ia!==.5){var Ma=Ia-.5,so=1.0904+Cn*(-3.2452+Cn*(3.55645-Cn*1.43519)),fo=.848013+Cn*(-1.06021+Cn*.215638);Ia=Ia+Ia*Ma*(Ia-1)*(so*Ma*Ma+fo)}var Io=tn.sub(sn)._mult(Ia)._add(sn)._unit()._mult(Fi?-1:1);this.addHalfVertex(qe,Io.x,Io.y,!1,Fi,0,nr)}Br&&this.addCurrentVertex(qe,tn,-ra,-Da,nr)}else if(Di==="butt")this.addCurrentVertex(qe,xn,0,0,nr);else if(Di==="square"){var Uo=mr?1:-1;this.addCurrentVertex(qe,xn,Uo,Uo,nr)}else Di==="round"&&(mr&&(this.addCurrentVertex(qe,sn,0,0,nr),this.addCurrentVertex(qe,sn,1,1,nr,!0)),Br&&(this.addCurrentVertex(qe,tn,-1,-1,nr,!0),this.addCurrentVertex(qe,tn,0,0,nr)));if(ai&&En<he-1){var hs=qe.dist(Br);if(hs>2*Fe){var ts=qe.add(Br.sub(qe)._mult(Fe/hs)._round());this.updateDistance(qe,ts),this.addCurrentVertex(ts,tn,0,0,nr),qe=ts}}}}},wl.prototype.addCurrentVertex=function(E,N,rt,vt,xt,At){At===void 0&&(At=!1);var Ot=N.x+N.y*rt,re=N.y-N.x*rt,he=-N.x+N.y*vt,ge=-N.y-N.x*vt;this.addHalfVertex(E,Ot,re,At,!1,rt,xt),this.addHalfVertex(E,he,ge,At,!0,-vt,xt),this.distance>Ag/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(E,N,rt,vt,xt,At))},wl.prototype.addHalfVertex=function(E,N,rt,vt,xt,At,Ot){var re=E.x,he=E.y,ge=this.scaledDistance*Tg;this.layoutVertexArray.emplaceBack((re<<1)+(vt?1:0),(he<<1)+(xt?1:0),Math.round(kg*N)+128,Math.round(kg*rt)+128,(At===0?0:At<0?-1:1)+1|(ge&63)<<2,ge>>6);var Fe=Ot.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Fe),Ot.primitiveLength++),xt?this.e2=Fe:this.e1=Fe},wl.prototype.updateScaledDistance=function(){this.scaledDistance=this.totalDistance>0?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(Ag-1):this.distance},wl.prototype.updateDistance=function(E,N){this.distance+=E.dist(N),this.updateScaledDistance()},Bt("LineBucket",wl,{omit:["layers","patternFeatures"]});var Vx=new eo({"line-cap":new Oi(Ue.layout_line["line-cap"]),"line-join":new Ki(Ue.layout_line["line-join"]),"line-miter-limit":new Oi(Ue.layout_line["line-miter-limit"]),"line-round-limit":new Oi(Ue.layout_line["line-round-limit"]),"line-sort-key":new Ki(Ue.layout_line["line-sort-key"])}),Gx=new eo({"line-opacity":new Ki(Ue.paint_line["line-opacity"]),"line-color":new Ki(Ue.paint_line["line-color"]),"line-translate":new Oi(Ue.paint_line["line-translate"]),"line-translate-anchor":new Oi(Ue.paint_line["line-translate-anchor"]),"line-width":new Ki(Ue.paint_line["line-width"]),"line-gap-width":new Ki(Ue.paint_line["line-gap-width"]),"line-offset":new Ki(Ue.paint_line["line-offset"]),"line-blur":new Ki(Ue.paint_line["line-blur"]),"line-dasharray":new co(Ue.paint_line["line-dasharray"]),"line-pattern":new Eo(Ue.paint_line["line-pattern"]),"line-gradient":new Vo(Ue.paint_line["line-gradient"])}),Sg={paint:Gx,layout:Vx},Yx=function(C){function E(){C.apply(this,arguments)}return C&&(E.__proto__=C),E.prototype=Object.create(C&&C.prototype),E.prototype.constructor=E,E.prototype.possiblyEvaluate=function(rt,vt){return vt=new ua(Math.floor(vt.zoom),{now:vt.now,fadeDuration:vt.fadeDuration,zoomHistory:vt.zoomHistory,transition:vt.transition}),C.prototype.possiblyEvaluate.call(this,rt,vt)},E.prototype.evaluate=function(rt,vt,xt,At){return vt=A({},vt,{zoom:Math.floor(vt.zoom)}),C.prototype.evaluate.call(this,rt,vt,xt,At)},E}(Ki),Mg=new Yx(Sg.paint.properties["line-width"].specification);Mg.useIntegerZoom=!0;var Wx=function(C){function E(N){C.call(this,N,Sg)}return C&&(E.__proto__=C),E.prototype=Object.create(C&&C.prototype),E.prototype.constructor=E,E.prototype._handleSpecialPaintPropertyUpdate=function(rt){rt==="line-gradient"&&this._updateGradient()},E.prototype._updateGradient=function(){var rt=this._transitionablePaint._values["line-gradient"].value.expression;this.gradient=ug(rt,"lineProgress"),this.gradientTexture=null},E.prototype.recalculate=function(rt,vt){C.prototype.recalculate.call(this,rt,vt),this.paint._values["line-floorwidth"]=Mg.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,rt)},E.prototype.createBucket=function(rt){return new wl(rt)},E.prototype.queryRadius=function(rt){var vt=rt,xt=Cg(Il("line-width",this,vt),Il("line-gap-width",this,vt)),At=Il("line-offset",this,vt);return xt/2+Math.abs(At)+Lc(this.paint.get("line-translate"))},E.prototype.queryIntersectsFeature=function(rt,vt,xt,At,Ot,re,he){var ge=pc(rt,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),re.angle,he),Fe=he/2*Cg(this.paint.get("line-width").evaluate(vt,xt),this.paint.get("line-gap-width").evaluate(vt,xt)),nr=this.paint.get("line-offset").evaluate(vt,xt);return nr&&(At=$x(At,nr*he)),Ko(ge,At,Fe)},E.prototype.isTileClipped=function(){return!0},E}(zs);function Cg(C,E){return E>0?E+2*C:C}function $x(C,E){for(var N=[],rt=new d(0,0),vt=0;vt<C.length;vt++){for(var xt=C[vt],At=[],Ot=0;Ot<xt.length;Ot++){var re=xt[Ot-1],he=xt[Ot],ge=xt[Ot+1],Fe=Ot===0?rt:he.sub(re)._unit()._perp(),nr=Ot===xt.length-1?rt:ge.sub(he)._unit()._perp(),qe=Fe._add(nr)._unit(),mr=qe.x*nr.x+qe.y*nr.y;qe._mult(1/mr),At.push(qe._mult(E)._add(he))}N.push(At)}return N}var Tv=Go([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Xx=Go([{name:"a_projected_pos",components:3,type:"Float32"}],4);Go([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);var jx=Go([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);Go([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);var Eg=Go([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Zx=Go([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Go([{name:"triangle",components:3,type:"Uint16"}]),Go([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Go([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Go([{type:"Float32",name:"offsetX"}]),Go([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);function Kx(C,E,N){var rt=E.layout.get("text-transform").evaluate(N,{});return rt==="uppercase"?C=C.toLocaleUpperCase():rt==="lowercase"&&(C=C.toLocaleLowerCase()),Zi.applyArabicShaping&&(C=Zi.applyArabicShaping(C)),C}function Jx(C,E,N){return C.sections.forEach(function(rt){rt.text=Kx(rt.text,E,N)}),C}function Qx(C){var E={},N={},rt=[],vt=0;function xt(tn){rt.push(C[tn]),vt++}function At(tn,En,xn){var Cn=N[tn];return delete N[tn],N[En]=Cn,rt[Cn].geometry[0].pop(),rt[Cn].geometry[0]=rt[Cn].geometry[0].concat(xn[0]),Cn}function Ot(tn,En,xn){var Cn=E[En];return delete E[En],E[tn]=Cn,rt[Cn].geometry[0].shift(),rt[Cn].geometry[0]=xn[0].concat(rt[Cn].geometry[0]),Cn}function re(tn,En,xn){var Cn=xn?En[0][En[0].length-1]:En[0][0];return tn+":"+Cn.x+":"+Cn.y}for(var he=0;he<C.length;he++){var ge=C[he],Fe=ge.geometry,nr=ge.text?ge.text.toString():null;if(!nr){xt(he);continue}var qe=re(nr,Fe),mr=re(nr,Fe,!0);if(qe in N&&mr in E&&N[qe]!==E[mr]){var Br=Ot(qe,mr,Fe),sn=At(qe,mr,rt[Br].geometry);delete E[qe],delete N[mr],N[re(nr,rt[sn].geometry,!0)]=sn,rt[Br].geometry=null}else qe in N?At(qe,mr,Fe):mr in E?Ot(qe,mr,Fe):(xt(he),E[qe]=vt-1,N[mr]=vt-1)}return rt.filter(function(tn){return tn.geometry})}var id={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};function qx(C){for(var E="",N=0;N<C.length;N++){var rt=C.charCodeAt(N+1)||null,vt=C.charCodeAt(N-1)||null,xt=(!rt||!on(rt)||id[C[N+1]])&&(!vt||!on(vt)||id[C[N-1]]);xt&&id[C[N]]?E+=id[C[N]]:E+=C[N]}return E}var Ss=24,t2=function(C,E,N,rt,vt){var xt,At,Ot=vt*8-rt-1,re=(1<<Ot)-1,he=re>>1,ge=-7,Fe=N?vt-1:0,nr=N?-1:1,qe=C[E+Fe];for(Fe+=nr,xt=qe&(1<<-ge)-1,qe>>=-ge,ge+=Ot;ge>0;xt=xt*256+C[E+Fe],Fe+=nr,ge-=8);for(At=xt&(1<<-ge)-1,xt>>=-ge,ge+=rt;ge>0;At=At*256+C[E+Fe],Fe+=nr,ge-=8);if(xt===0)xt=1-he;else{if(xt===re)return At?NaN:(qe?-1:1)*(1/0);At=At+Math.pow(2,rt),xt=xt-he}return(qe?-1:1)*At*Math.pow(2,xt-rt)},e2=function(C,E,N,rt,vt,xt){var At,Ot,re,he=xt*8-vt-1,ge=(1<<he)-1,Fe=ge>>1,nr=vt===23?Math.pow(2,-24)-Math.pow(2,-77):0,qe=rt?0:xt-1,mr=rt?1:-1,Br=E<0||E===0&&1/E<0?1:0;for(E=Math.abs(E),isNaN(E)||E===1/0?(Ot=isNaN(E)?1:0,At=ge):(At=Math.floor(Math.log(E)/Math.LN2),E*(re=Math.pow(2,-At))<1&&(At--,re*=2),At+Fe>=1?E+=nr/re:E+=nr*Math.pow(2,1-Fe),E*re>=2&&(At++,re/=2),At+Fe>=ge?(Ot=0,At=ge):At+Fe>=1?(Ot=(E*re-1)*Math.pow(2,vt),At=At+Fe):(Ot=E*Math.pow(2,Fe-1)*Math.pow(2,vt),At=0));vt>=8;C[N+qe]=Ot&255,qe+=mr,Ot/=256,vt-=8);for(At=At<<vt|Ot,he+=vt;he>0;C[N+qe]=At&255,qe+=mr,At/=256,he-=8);C[N+qe-mr]|=Br*128},Vd={read:t2,write:e2},Gd=uo;function uo(C){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(C)?C:new Uint8Array(C||0),this.pos=0,this.type=0,this.length=this.buf.length}uo.Varint=0,uo.Fixed64=1,uo.Bytes=2,uo.Fixed32=5;var Av=(1<<16)*(1<<16),Lg=1/Av,r2=12,Dg=typeof TextDecoder>"u"?null:new TextDecoder("utf8");uo.prototype={destroy:function(){this.buf=null},readFields:function(C,E,N){for(N=N||this.length;this.pos<N;){var rt=this.readVarint(),vt=rt>>3,xt=this.pos;this.type=rt&7,C(vt,E,this),this.pos===xt&&this.skip(rt)}return E},readMessage:function(C,E){return this.readFields(C,E,this.readVarint()+this.pos)},readFixed32:function(){var C=Yd(this.buf,this.pos);return this.pos+=4,C},readSFixed32:function(){var C=Ig(this.buf,this.pos);return this.pos+=4,C},readFixed64:function(){var C=Yd(this.buf,this.pos)+Yd(this.buf,this.pos+4)*Av;return this.pos+=8,C},readSFixed64:function(){var C=Yd(this.buf,this.pos)+Ig(this.buf,this.pos+4)*Av;return this.pos+=8,C},readFloat:function(){var C=Vd.read(this.buf,this.pos,!0,23,4);return this.pos+=4,C},readDouble:function(){var C=Vd.read(this.buf,this.pos,!0,52,8);return this.pos+=8,C},readVarint:function(C){var E=this.buf,N,rt;return rt=E[this.pos++],N=rt&127,rt<128||(rt=E[this.pos++],N|=(rt&127)<<7,rt<128)||(rt=E[this.pos++],N|=(rt&127)<<14,rt<128)||(rt=E[this.pos++],N|=(rt&127)<<21,rt<128)?N:(rt=E[this.pos],N|=(rt&15)<<28,n2(N,C,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var C=this.readVarint();return C%2===1?(C+1)/-2:C/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var C=this.readVarint()+this.pos,E=this.pos;return this.pos=C,C-E>=r2&&Dg?m2(this.buf,E,C):g2(this.buf,E,C)},readBytes:function(){var C=this.readVarint()+this.pos,E=this.buf.subarray(this.pos,C);return this.pos=C,E},readPackedVarint:function(C,E){if(this.type!==uo.Bytes)return C.push(this.readVarint(E));var N=Vu(this);for(C=C||[];this.pos<N;)C.push(this.readVarint(E));return C},readPackedSVarint:function(C){if(this.type!==uo.Bytes)return C.push(this.readSVarint());var E=Vu(this);for(C=C||[];this.pos<E;)C.push(this.readSVarint());return C},readPackedBoolean:function(C){if(this.type!==uo.Bytes)return C.push(this.readBoolean());var E=Vu(this);for(C=C||[];this.pos<E;)C.push(this.readBoolean());return C},readPackedFloat:function(C){if(this.type!==uo.Bytes)return C.push(this.readFloat());var E=Vu(this);for(C=C||[];this.pos<E;)C.push(this.readFloat());return C},readPackedDouble:function(C){if(this.type!==uo.Bytes)return C.push(this.readDouble());var E=Vu(this);for(C=C||[];this.pos<E;)C.push(this.readDouble());return C},readPackedFixed32:function(C){if(this.type!==uo.Bytes)return C.push(this.readFixed32());var E=Vu(this);for(C=C||[];this.pos<E;)C.push(this.readFixed32());return C},readPackedSFixed32:function(C){if(this.type!==uo.Bytes)return C.push(this.readSFixed32());var E=Vu(this);for(C=C||[];this.pos<E;)C.push(this.readSFixed32());return C},readPackedFixed64:function(C){if(this.type!==uo.Bytes)return C.push(this.readFixed64());var E=Vu(this);for(C=C||[];this.pos<E;)C.push(this.readFixed64());return C},readPackedSFixed64:function(C){if(this.type!==uo.Bytes)return C.push(this.readSFixed64());var E=Vu(this);for(C=C||[];this.pos<E;)C.push(this.readSFixed64());return C},skip:function(C){var E=C&7;if(E===uo.Varint)for(;this.buf[this.pos++]>127;);else if(E===uo.Bytes)this.pos=this.readVarint()+this.pos;else if(E===uo.Fixed32)this.pos+=4;else if(E===uo.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+E)},writeTag:function(C,E){this.writeVarint(C<<3|E)},realloc:function(C){for(var E=this.length||16;E<this.pos+C;)E*=2;if(E!==this.length){var N=new Uint8Array(E);N.set(this.buf),this.buf=N,this.length=E}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(C){this.realloc(4),ch(this.buf,C,this.pos),this.pos+=4},writeSFixed32:function(C){this.realloc(4),ch(this.buf,C,this.pos),this.pos+=4},writeFixed64:function(C){this.realloc(8),ch(this.buf,C&-1,this.pos),ch(this.buf,Math.floor(C*Lg),this.pos+4),this.pos+=8},writeSFixed64:function(C){this.realloc(8),ch(this.buf,C&-1,this.pos),ch(this.buf,Math.floor(C*Lg),this.pos+4),this.pos+=8},writeVarint:function(C){if(C=+C||0,C>268435455||C<0){i2(C,this);return}this.realloc(4),this.buf[this.pos++]=C&127|(C>127?128:0),!(C<=127)&&(this.buf[this.pos++]=(C>>>=7)&127|(C>127?128:0),!(C<=127)&&(this.buf[this.pos++]=(C>>>=7)&127|(C>127?128:0),!(C<=127)&&(this.buf[this.pos++]=C>>>7&127)))},writeSVarint:function(C){this.writeVarint(C<0?-C*2-1:C*2)},writeBoolean:function(C){this.writeVarint(Boolean(C))},writeString:function(C){C=String(C),this.realloc(C.length*4),this.pos++;var E=this.pos;this.pos=y2(this.buf,C,this.pos);var N=this.pos-E;N>=128&&Pg(E,N,this),this.pos=E-1,this.writeVarint(N),this.pos+=N},writeFloat:function(C){this.realloc(4),Vd.write(this.buf,C,this.pos,!0,23,4),this.pos+=4},writeDouble:function(C){this.realloc(8),Vd.write(this.buf,C,this.pos,!0,52,8),this.pos+=8},writeBytes:function(C){var E=C.length;this.writeVarint(E),this.realloc(E);for(var N=0;N<E;N++)this.buf[this.pos++]=C[N]},writeRawMessage:function(C,E){this.pos++;var N=this.pos;C(E,this);var rt=this.pos-N;rt>=128&&Pg(N,rt,this),this.pos=N-1,this.writeVarint(rt),this.pos+=rt},writeMessage:function(C,E,N){this.writeTag(C,uo.Bytes),this.writeRawMessage(E,N)},writePackedVarint:function(C,E){E.length&&this.writeMessage(C,s2,E)},writePackedSVarint:function(C,E){E.length&&this.writeMessage(C,l2,E)},writePackedBoolean:function(C,E){E.length&&this.writeMessage(C,f2,E)},writePackedFloat:function(C,E){E.length&&this.writeMessage(C,c2,E)},writePackedDouble:function(C,E){E.length&&this.writeMessage(C,u2,E)},writePackedFixed32:function(C,E){E.length&&this.writeMessage(C,h2,E)},writePackedSFixed32:function(C,E){E.length&&this.writeMessage(C,d2,E)},writePackedFixed64:function(C,E){E.length&&this.writeMessage(C,p2,E)},writePackedSFixed64:function(C,E){E.length&&this.writeMessage(C,v2,E)},writeBytesField:function(C,E){this.writeTag(C,uo.Bytes),this.writeBytes(E)},writeFixed32Field:function(C,E){this.writeTag(C,uo.Fixed32),this.writeFixed32(E)},writeSFixed32Field:function(C,E){this.writeTag(C,uo.Fixed32),this.writeSFixed32(E)},writeFixed64Field:function(C,E){this.writeTag(C,uo.Fixed64),this.writeFixed64(E)},writeSFixed64Field:function(C,E){this.writeTag(C,uo.Fixed64),this.writeSFixed64(E)},writeVarintField:function(C,E){this.writeTag(C,uo.Varint),this.writeVarint(E)},writeSVarintField:function(C,E){this.writeTag(C,uo.Varint),this.writeSVarint(E)},writeStringField:function(C,E){this.writeTag(C,uo.Bytes),this.writeString(E)},writeFloatField:function(C,E){this.writeTag(C,uo.Fixed32),this.writeFloat(E)},writeDoubleField:function(C,E){this.writeTag(C,uo.Fixed64),this.writeDouble(E)},writeBooleanField:function(C,E){this.writeVarintField(C,Boolean(E))}};function n2(C,E,N){var rt=N.buf,vt,xt;if(xt=rt[N.pos++],vt=(xt&112)>>4,xt<128||(xt=rt[N.pos++],vt|=(xt&127)<<3,xt<128)||(xt=rt[N.pos++],vt|=(xt&127)<<10,xt<128)||(xt=rt[N.pos++],vt|=(xt&127)<<17,xt<128)||(xt=rt[N.pos++],vt|=(xt&127)<<24,xt<128)||(xt=rt[N.pos++],vt|=(xt&1)<<31,xt<128))return lh(C,vt,E);throw new Error("Expected varint not more than 10 bytes")}function Vu(C){return C.type===uo.Bytes?C.readVarint()+C.pos:C.pos+1}function lh(C,E,N){return N?E*4294967296+(C>>>0):(E>>>0)*4294967296+(C>>>0)}function i2(C,E){var N,rt;if(C>=0?(N=C%4294967296|0,rt=C/4294967296|0):(N=~(-C%4294967296),rt=~(-C/4294967296),N^4294967295?N=N+1|0:(N=0,rt=rt+1|0)),C>=18446744073709552e3||C<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");E.realloc(10),a2(N,rt,E),o2(rt,E)}function a2(C,E,N){N.buf[N.pos++]=C&127|128,C>>>=7,N.buf[N.pos++]=C&127|128,C>>>=7,N.buf[N.pos++]=C&127|128,C>>>=7,N.buf[N.pos++]=C&127|128,C>>>=7,N.buf[N.pos]=C&127}function o2(C,E){var N=(C&7)<<4;E.buf[E.pos++]|=N|((C>>>=3)?128:0),C&&(E.buf[E.pos++]=C&127|((C>>>=7)?128:0),C&&(E.buf[E.pos++]=C&127|((C>>>=7)?128:0),C&&(E.buf[E.pos++]=C&127|((C>>>=7)?128:0),C&&(E.buf[E.pos++]=C&127|((C>>>=7)?128:0),C&&(E.buf[E.pos++]=C&127)))))}function Pg(C,E,N){var rt=E<=16383?1:E<=2097151?2:E<=268435455?3:Math.floor(Math.log(E)/(Math.LN2*7));N.realloc(rt);for(var vt=N.pos-1;vt>=C;vt--)N.buf[vt+rt]=N.buf[vt]}function s2(C,E){for(var N=0;N<C.length;N++)E.writeVarint(C[N])}function l2(C,E){for(var N=0;N<C.length;N++)E.writeSVarint(C[N])}function c2(C,E){for(var N=0;N<C.length;N++)E.writeFloat(C[N])}function u2(C,E){for(var N=0;N<C.length;N++)E.writeDouble(C[N])}function f2(C,E){for(var N=0;N<C.length;N++)E.writeBoolean(C[N])}function h2(C,E){for(var N=0;N<C.length;N++)E.writeFixed32(C[N])}function d2(C,E){for(var N=0;N<C.length;N++)E.writeSFixed32(C[N])}function p2(C,E){for(var N=0;N<C.length;N++)E.writeFixed64(C[N])}function v2(C,E){for(var N=0;N<C.length;N++)E.writeSFixed64(C[N])}function Yd(C,E){return(C[E]|C[E+1]<<8|C[E+2]<<16)+C[E+3]*16777216}function ch(C,E,N){C[N]=E,C[N+1]=E>>>8,C[N+2]=E>>>16,C[N+3]=E>>>24}function Ig(C,E){return(C[E]|C[E+1]<<8|C[E+2]<<16)+(C[E+3]<<24)}function g2(C,E,N){for(var rt="",vt=E;vt<N;){var xt=C[vt],At=null,Ot=xt>239?4:xt>223?3:xt>191?2:1;if(vt+Ot>N)break;var re,he,ge;Ot===1?xt<128&&(At=xt):Ot===2?(re=C[vt+1],(re&192)===128&&(At=(xt&31)<<6|re&63,At<=127&&(At=null))):Ot===3?(re=C[vt+1],he=C[vt+2],(re&192)===128&&(he&192)===128&&(At=(xt&15)<<12|(re&63)<<6|he&63,(At<=2047||At>=55296&&At<=57343)&&(At=null))):Ot===4&&(re=C[vt+1],he=C[vt+2],ge=C[vt+3],(re&192)===128&&(he&192)===128&&(ge&192)===128&&(At=(xt&15)<<18|(re&63)<<12|(he&63)<<6|ge&63,(At<=65535||At>=1114112)&&(At=null))),At===null?(At=65533,Ot=1):At>65535&&(At-=65536,rt+=String.fromCharCode(At>>>10&1023|55296),At=56320|At&1023),rt+=String.fromCharCode(At),vt+=Ot}return rt}function m2(C,E,N){return Dg.decode(C.subarray(E,N))}function y2(C,E,N){for(var rt=0,vt,xt;rt<E.length;rt++){if(vt=E.charCodeAt(rt),vt>55295&&vt<57344)if(xt)if(vt<56320){C[N++]=239,C[N++]=191,C[N++]=189,xt=vt;continue}else vt=xt-55296<<10|vt-56320|65536,xt=null;else{vt>56319||rt+1===E.length?(C[N++]=239,C[N++]=191,C[N++]=189):xt=vt;continue}else xt&&(C[N++]=239,C[N++]=191,C[N++]=189,xt=null);vt<128?C[N++]=vt:(vt<2048?C[N++]=vt>>6|192:(vt<65536?C[N++]=vt>>12|224:(C[N++]=vt>>18|240,C[N++]=vt>>12&63|128),C[N++]=vt>>6&63|128),C[N++]=vt&63|128)}return N}var Sv=3;function b2(C,E,N){C===1&&N.readMessage(x2,E)}function x2(C,E,N){if(C===3){var rt=N.readMessage(w2,{}),vt=rt.id,xt=rt.bitmap,At=rt.width,Ot=rt.height,re=rt.left,he=rt.top,ge=rt.advance;E.push({id:vt,bitmap:new Mf({width:At+2*Sv,height:Ot+2*Sv},xt),metrics:{width:At,height:Ot,left:re,top:he,advance:ge}})}}function w2(C,E,N){C===1?E.id=N.readVarint():C===2?E.bitmap=N.readBytes():C===3?E.width=N.readVarint():C===4?E.height=N.readVarint():C===5?E.left=N.readSVarint():C===6?E.top=N.readSVarint():C===7&&(E.advance=N.readVarint())}function _2(C){return new Gd(C).readFields(b2,[])}var zg=Sv;function Rg(C){for(var E=0,N=0,rt=0,vt=C;rt<vt.length;rt+=1){var xt=vt[rt];E+=xt.w*xt.h,N=Math.max(N,xt.w)}C.sort(function(sn,tn){return tn.h-sn.h});for(var At=Math.max(Math.ceil(Math.sqrt(E/.95)),N),Ot=[{x:0,y:0,w:At,h:1/0}],re=0,he=0,ge=0,Fe=C;ge<Fe.length;ge+=1)for(var nr=Fe[ge],qe=Ot.length-1;qe>=0;qe--){var mr=Ot[qe];if(!(nr.w>mr.w||nr.h>mr.h)){if(nr.x=mr.x,nr.y=mr.y,he=Math.max(he,nr.y+nr.h),re=Math.max(re,nr.x+nr.w),nr.w===mr.w&&nr.h===mr.h){var Br=Ot.pop();qe<Ot.length&&(Ot[qe]=Br)}else nr.h===mr.h?(mr.x+=nr.w,mr.w-=nr.w):nr.w===mr.w?(mr.y+=nr.h,mr.h-=nr.h):(Ot.push({x:mr.x+nr.w,y:mr.y,w:mr.w-nr.w,h:nr.h}),mr.y+=nr.h,mr.h-=nr.h);break}}return{w:re,h:he,fill:E/(re*he)||0}}var zl=1,Wd=function(E,N){var rt=N.pixelRatio,vt=N.version,xt=N.stretchX,At=N.stretchY,Ot=N.content;this.paddedRect=E,this.pixelRatio=rt,this.stretchX=xt,this.stretchY=At,this.content=Ot,this.version=vt},ad={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};ad.tl.get=function(){return[this.paddedRect.x+zl,this.paddedRect.y+zl]},ad.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-zl,this.paddedRect.y+this.paddedRect.h-zl]},ad.tlbr.get=function(){return this.tl.concat(this.br)},ad.displaySize.get=function(){return[(this.paddedRect.w-zl*2)/this.pixelRatio,(this.paddedRect.h-zl*2)/this.pixelRatio]},Object.defineProperties(Wd.prototype,ad);var od=function(E,N){var rt={},vt={};this.haveRenderCallbacks=[];var xt=[];this.addImages(E,rt,xt),this.addImages(N,vt,xt);var At=Rg(xt),Ot=At.w,re=At.h,he=new xl({width:Ot||1,height:re||1});for(var ge in E){var Fe=E[ge],nr=rt[ge].paddedRect;xl.copy(Fe.data,he,{x:0,y:0},{x:nr.x+zl,y:nr.y+zl},Fe.data)}for(var qe in N){var mr=N[qe],Br=vt[qe].paddedRect,sn=Br.x+zl,tn=Br.y+zl,En=mr.data.width,xn=mr.data.height;xl.copy(mr.data,he,{x:0,y:0},{x:sn,y:tn},mr.data),xl.copy(mr.data,he,{x:0,y:xn-1},{x:sn,y:tn-1},{width:En,height:1}),xl.copy(mr.data,he,{x:0,y:0},{x:sn,y:tn+xn},{width:En,height:1}),xl.copy(mr.data,he,{x:En-1,y:0},{x:sn-1,y:tn},{width:1,height:xn}),xl.copy(mr.data,he,{x:0,y:0},{x:sn+En,y:tn},{width:1,height:xn})}this.image=he,this.iconPositions=rt,this.patternPositions=vt};od.prototype.addImages=function(E,N,rt){for(var vt in E){var xt=E[vt],At={x:0,y:0,w:xt.data.width+2*zl,h:xt.data.height+2*zl};rt.push(At),N[vt]=new Wd(At,xt),xt.hasRenderCallback&&this.haveRenderCallbacks.push(vt)}},od.prototype.patchUpdatedImages=function(E,N){E.dispatchRenderCallbacks(this.haveRenderCallbacks);for(var rt in E.updatedImages)this.patchUpdatedImage(this.iconPositions[rt],E.getImage(rt),N),this.patchUpdatedImage(this.patternPositions[rt],E.getImage(rt),N)},od.prototype.patchUpdatedImage=function(E,N,rt){if(!(!E||!N)&&E.version!==N.version){E.version=N.version;var vt=E.tl,xt=vt[0],At=vt[1];rt.update(N.data,void 0,{x:xt,y:At})}},Bt("ImagePosition",Wd),Bt("ImageAtlas",od);var ql={horizontal:1,vertical:2,horizontalOnly:3},sd=-17;function k2(C){for(var E=0,N=C;E<N.length;E+=1){var rt=N[E];if(rt.positionedGlyphs.length!==0)return!1}return!0}var Fg=57344,Og=63743,uh=function(){this.scale=1,this.fontStack="",this.imageName=null};uh.forText=function(E,N){var rt=new uh;return rt.scale=E||1,rt.fontStack=N,rt},uh.forImage=function(E){var N=new uh;return N.imageName=E,N};var Ws=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};Ws.fromFeature=function(E,N){for(var rt=new Ws,vt=0;vt<E.sections.length;vt++){var xt=E.sections[vt];xt.image?rt.addImageSection(xt):rt.addTextSection(xt,N)}return rt},Ws.prototype.length=function(){return this.text.length},Ws.prototype.getSection=function(E){return this.sections[this.sectionIndex[E]]},Ws.prototype.getSectionIndex=function(E){return this.sectionIndex[E]},Ws.prototype.getCharCode=function(E){return this.text.charCodeAt(E)},Ws.prototype.verticalizePunctuation=function(){this.text=qx(this.text)},Ws.prototype.trim=function(){for(var E=0,N=0;N<this.text.length&&Eu[this.text.charCodeAt(N)];N++)E++;for(var rt=this.text.length,vt=this.text.length-1;vt>=0&&vt>=E&&Eu[this.text.charCodeAt(vt)];vt--)rt--;this.text=this.text.substring(E,rt),this.sectionIndex=this.sectionIndex.slice(E,rt)},Ws.prototype.substring=function(E,N){var rt=new Ws;return rt.text=this.text.substring(E,N),rt.sectionIndex=this.sectionIndex.slice(E,N),rt.sections=this.sections,rt},Ws.prototype.toString=function(){return this.text},Ws.prototype.getMaxScale=function(){var E=this;return this.sectionIndex.reduce(function(N,rt){return Math.max(N,E.sections[rt].scale)},0)},Ws.prototype.addTextSection=function(E,N){this.text+=E.text,this.sections.push(uh.forText(E.scale,E.fontStack||N));for(var rt=this.sections.length-1,vt=0;vt<E.text.length;++vt)this.sectionIndex.push(rt)},Ws.prototype.addImageSection=function(E){var N=E.image?E.image.name:"";if(N.length===0){U("Can't add FormattedSection with an empty image.");return}var rt=this.getNextImageSectionCharCode();if(!rt){U("Reached maximum number of images "+(Og-Fg+2));return}this.text+=String.fromCharCode(rt),this.sections.push(uh.forImage(N)),this.sectionIndex.push(this.sections.length-1)},Ws.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=Og?null:++this.imageSectionID:(this.imageSectionID=Fg,this.imageSectionID)};function T2(C,E){for(var N=[],rt=C.text,vt=0,xt=0,At=E;xt<At.length;xt+=1){var Ot=At[xt];N.push(C.substring(vt,Ot)),vt=Ot}return vt<rt.length&&N.push(C.substring(vt,rt.length)),N}function $d(C,E,N,rt,vt,xt,At,Ot,re,he,ge,Fe,nr,qe,mr,Br){var sn=Ws.fromFeature(C,vt);Fe===ql.vertical&&sn.verticalizePunctuation();var tn,En=Zi.processBidirectionalText,xn=Zi.processStyledBidirectionalText;if(En&&sn.sections.length===1){tn=[];for(var Cn=En(sn.toString(),Mv(sn,he,xt,E,rt,qe,mr)),Fn=0,Wn=Cn;Fn<Wn.length;Fn+=1){var li=Wn[Fn],ai=new Ws;ai.text=li,ai.sections=sn.sections;for(var Fi=0;Fi<li.length;Fi++)ai.sectionIndex.push(0);tn.push(ai)}}else if(xn){tn=[];for(var Ti=xn(sn.text,sn.sectionIndex,Mv(sn,he,xt,E,rt,qe,mr)),Mi=0,ia=Ti;Mi<ia.length;Mi+=1){var Di=ia[Mi],Ri=new Ws;Ri.text=Di[0],Ri.sectionIndex=Di[1],Ri.sections=sn.sections,tn.push(Ri)}}else tn=T2(sn,Mv(sn,he,xt,E,rt,qe,mr));var da=[],ra={positionedLines:da,text:sn.toString(),top:ge[1],bottom:ge[1],left:ge[0],right:ge[0],writingMode:Fe,iconsInText:!1,verticalizable:!1};return M2(ra,E,N,rt,tn,At,Ot,re,Fe,he,nr,Br),k2(da)?!1:ra}var Eu={};Eu[9]=!0,Eu[10]=!0,Eu[11]=!0,Eu[12]=!0,Eu[13]=!0,Eu[32]=!0;var Rl={};Rl[10]=!0,Rl[32]=!0,Rl[38]=!0,Rl[40]=!0,Rl[41]=!0,Rl[43]=!0,Rl[45]=!0,Rl[47]=!0,Rl[173]=!0,Rl[183]=!0,Rl[8203]=!0,Rl[8208]=!0,Rl[8211]=!0,Rl[8231]=!0;function Bg(C,E,N,rt,vt,xt){if(E.imageName){var re=rt[E.imageName];return re?re.displaySize[0]*E.scale*Ss/xt+vt:0}else{var At=N[E.fontStack],Ot=At&&At[C];return Ot?Ot.metrics.advance*E.scale+vt:0}}function A2(C,E,N,rt,vt,xt){for(var At=0,Ot=0;Ot<C.length();Ot++){var re=C.getSection(Ot);At+=Bg(C.getCharCode(Ot),re,rt,vt,E,xt)}var he=Math.max(1,Math.ceil(At/N));return At/he}function Ng(C,E,N,rt){var vt=Math.pow(C-E,2);return rt?C<E?vt/2:vt*2:vt+Math.abs(N)*N}function S2(C,E,N){var rt=0;return C===10&&(rt-=1e4),N&&(rt+=150),(C===40||C===65288)&&(rt+=50),(E===41||E===65289)&&(rt+=50),rt}function Ug(C,E,N,rt,vt,xt){for(var At=null,Ot=Ng(E,N,vt,xt),re=0,he=rt;re<he.length;re+=1){var ge=he[re],Fe=E-ge.x,nr=Ng(Fe,N,vt,xt)+ge.badness;nr<=Ot&&(At=ge,Ot=nr)}return{index:C,x:E,priorBreak:At,badness:Ot}}function Hg(C){return C?Hg(C.priorBreak).concat(C.index):[]}function Mv(C,E,N,rt,vt,xt,At){if(xt!=="point")return[];if(!C)return[];for(var Ot=[],re=A2(C,E,N,rt,vt,At),he=C.text.indexOf("\u200B")>=0,ge=0,Fe=0;Fe<C.length();Fe++){var nr=C.getSection(Fe),qe=C.getCharCode(Fe);if(Eu[qe]||(ge+=Bg(qe,nr,rt,vt,E,At)),Fe<C.length()-1){var mr=Pr(qe);(Rl[qe]||mr||nr.imageName)&&Ot.push(Ug(Fe+1,ge,re,Ot,S2(qe,C.getCharCode(Fe+1),mr&&he),!1))}}return Hg(Ug(C.length(),ge,re,Ot,0,!0))}function Cv(C){var E=.5,N=.5;switch(C){case"right":case"top-right":case"bottom-right":E=1;break;case"left":case"top-left":case"bottom-left":E=0;break}switch(C){case"bottom":case"bottom-right":case"bottom-left":N=1;break;case"top":case"top-right":case"top-left":N=0;break}return{horizontalAlign:E,verticalAlign:N}}function M2(C,E,N,rt,vt,xt,At,Ot,re,he,ge,Fe){for(var nr=0,qe=sd,mr=0,Br=0,sn=Ot==="right"?1:Ot==="left"?0:.5,tn=0,En=0,xn=vt;En<xn.length;En+=1){var Cn=xn[En];Cn.trim();var Fn=Cn.getMaxScale(),Wn=(Fn-1)*Ss,li={positionedGlyphs:[],lineOffset:0};C.positionedLines[tn]=li;var ai=li.positionedGlyphs,Fi=0;if(!Cn.length()){qe+=xt,++tn;continue}for(var Ti=0;Ti<Cn.length();Ti++){var Mi=Cn.getSection(Ti),ia=Cn.getSectionIndex(Ti),Di=Cn.getCharCode(Ti),Ri=0,da=null,ra=null,Da=null,Qa=Ss,Pa=!(re===ql.horizontal||!ge&&!Ur(Di)||ge&&(Eu[Di]||ln(Di)));if(Mi.imageName){var Io=rt[Mi.imageName];if(!Io)continue;Da=Mi.imageName,C.iconsInText=C.iconsInText||!0,ra=Io.paddedRect;var Uo=Io.displaySize;Mi.scale=Mi.scale*Ss/Fe,da={width:Uo[0],height:Uo[1],left:zl,top:-zg,advance:Pa?Uo[1]:Uo[0]};var hs=Ss-Uo[1]*Mi.scale;Ri=Wn+hs,Qa=da.advance;var ts=Pa?Uo[0]*Mi.scale-Ss*Fn:Uo[1]*Mi.scale-Ss*Fn;ts>0&&ts>Fi&&(Fi=ts)}else{var Ia=N[Mi.fontStack],Ma=Ia&&Ia[Di];if(Ma&&Ma.rect)ra=Ma.rect,da=Ma.metrics;else{var so=E[Mi.fontStack],fo=so&&so[Di];if(!fo)continue;da=fo.metrics}Ri=(Fn-Mi.scale)*Ss}Pa?(C.verticalizable=!0,ai.push({glyph:Di,imageName:Da,x:nr,y:qe+Ri,vertical:Pa,scale:Mi.scale,fontStack:Mi.fontStack,sectionIndex:ia,metrics:da,rect:ra}),nr+=Qa*Mi.scale+he):(ai.push({glyph:Di,imageName:Da,x:nr,y:qe+Ri,vertical:Pa,scale:Mi.scale,fontStack:Mi.fontStack,sectionIndex:ia,metrics:da,rect:ra}),nr+=da.advance*Mi.scale+he)}if(ai.length!==0){var $s=nr-he;mr=Math.max($s,mr),C2(ai,0,ai.length-1,sn,Fi)}nr=0;var Xs=xt*Fn+Fi;li.lineOffset=Math.max(Fi,Wn),qe+=Xs,Br=Math.max(Xs,Br),++tn}var ds=qe-sd,nl=Cv(At),il=nl.horizontalAlign,os=nl.verticalAlign;E2(C.positionedLines,sn,il,os,mr,Br,xt,ds,vt.length),C.top+=-os*ds,C.bottom=C.top+ds,C.left+=-il*mr,C.right=C.left+mr}function C2(C,E,N,rt,vt){if(!(!rt&&!vt))for(var xt=C[N],At=xt.metrics.advance*xt.scale,Ot=(C[N].x+At)*rt,re=E;re<=N;re++)C[re].x-=Ot,C[re].y+=vt}function E2(C,E,N,rt,vt,xt,At,Ot,re){var he=(E-N)*vt,ge=0;xt!==At?ge=-Ot*rt-sd:ge=(-rt*re+.5)*At;for(var Fe=0,nr=C;Fe<nr.length;Fe+=1)for(var qe=nr[Fe],mr=0,Br=qe.positionedGlyphs;mr<Br.length;mr+=1){var sn=Br[mr];sn.x+=he,sn.y+=ge}}function L2(C,E,N){var rt=Cv(N),vt=rt.horizontalAlign,xt=rt.verticalAlign,At=E[0],Ot=E[1],re=At-C.displaySize[0]*vt,he=re+C.displaySize[0],ge=Ot-C.displaySize[1]*xt,Fe=ge+C.displaySize[1];return{image:C,top:ge,bottom:Fe,left:re,right:he}}function Vg(C,E,N,rt,vt,xt){var At=C.image,Ot;if(At.content){var re=At.content,he=At.pixelRatio||1;Ot=[re[0]/he,re[1]/he,At.displaySize[0]-re[2]/he,At.displaySize[1]-re[3]/he]}var ge=E.left*xt,Fe=E.right*xt,nr,qe,mr,Br;N==="width"||N==="both"?(Br=vt[0]+ge-rt[3],qe=vt[0]+Fe+rt[1]):(Br=vt[0]+(ge+Fe-At.displaySize[0])/2,qe=Br+At.displaySize[0]);var sn=E.top*xt,tn=E.bottom*xt;return N==="height"||N==="both"?(nr=vt[1]+sn-rt[0],mr=vt[1]+tn+rt[2]):(nr=vt[1]+(sn+tn-At.displaySize[1])/2,mr=nr+At.displaySize[1]),{image:At,top:nr,right:qe,bottom:mr,left:Br,collisionPadding:Ot}}var fh=function(C){function E(N,rt,vt,xt){C.call(this,N,rt),this.angle=vt,xt!==void 0&&(this.segment=xt)}return C&&(E.__proto__=C),E.prototype=Object.create(C&&C.prototype),E.prototype.constructor=E,E.prototype.clone=function(){return new E(this.x,this.y,this.angle,this.segment)},E}(d);Bt("Anchor",fh);var ru=128;function Ev(C,E){var N=E.expression;if(N.kind==="constant"){var rt=N.evaluate(new ua(C+1));return{kind:"constant",layoutSize:rt}}else{if(N.kind==="source")return{kind:"source"};for(var vt=N.zoomStops,xt=N.interpolationType,At=0;At<vt.length&&vt[At]<=C;)At++;At=Math.max(0,At-1);for(var Ot=At;Ot<vt.length&&vt[Ot]<C+1;)Ot++;Ot=Math.min(vt.length-1,Ot);var re=vt[At],he=vt[Ot];if(N.kind==="composite")return{kind:"composite",minZoom:re,maxZoom:he,interpolationType:xt};var ge=N.evaluate(new ua(re)),Fe=N.evaluate(new ua(he));return{kind:"camera",minZoom:re,maxZoom:he,minSize:ge,maxSize:Fe,interpolationType:xt}}}function Gg(C,E,N){var rt=E.uSize,vt=E.uSizeT,xt=N.lowerSize,At=N.upperSize;return C.kind==="source"?xt/ru:C.kind==="composite"?mo(xt/ru,At/ru,vt):rt}function Yg(C,E){var N=0,rt=0;if(C.kind==="constant")rt=C.layoutSize;else if(C.kind!=="source"){var vt=C.interpolationType,xt=C.minZoom,At=C.maxZoom,Ot=vt?v(yo.interpolationFactor(vt,E,xt,At),0,1):0;C.kind==="camera"?rt=mo(C.minSize,C.maxSize,Ot):N=Ot}return{uSizeT:N,uSize:rt}}var D2=Object.freeze({__proto__:null,getSizeData:Ev,evaluateSizeForFeature:Gg,evaluateSizeForZoom:Yg,SIZE_PACK_FACTOR:ru});function Wg(C,E,N,rt,vt){if(E.segment===void 0)return!0;for(var xt=E,At=E.segment+1,Ot=0;Ot>-N/2;){if(At--,At<0)return!1;Ot-=C[At].dist(xt),xt=C[At]}Ot+=C[At].dist(C[At+1]),At++;for(var re=[],he=0;Ot<N/2;){var ge=C[At-1],Fe=C[At],nr=C[At+1];if(!nr)return!1;var qe=ge.angleTo(Fe)-Fe.angleTo(nr);for(qe=Math.abs((qe+3*Math.PI)%(Math.PI*2)-Math.PI),re.push({distance:Ot,angleDelta:qe}),he+=qe;Ot-re[0].distance>rt;)he-=re.shift().angleDelta;if(he>vt)return!1;At++,Ot+=Fe.dist(nr)}return!0}function $g(C){for(var E=0,N=0;N<C.length-1;N++)E+=C[N].dist(C[N+1]);return E}function Xg(C,E,N){return C?3/5*E*N:0}function jg(C,E){return Math.max(C?C.right-C.left:0,E?E.right-E.left:0)}function P2(C,E,N,rt,vt,xt){for(var At=Xg(N,vt,xt),Ot=jg(N,rt)*xt,re=0,he=$g(C)/2,ge=0;ge<C.length-1;ge++){var Fe=C[ge],nr=C[ge+1],qe=Fe.dist(nr);if(re+qe>he){var mr=(he-re)/qe,Br=mo(Fe.x,nr.x,mr),sn=mo(Fe.y,nr.y,mr),tn=new fh(Br,sn,nr.angleTo(Fe),ge);return tn._round(),!At||Wg(C,tn,Ot,At,E)?tn:void 0}re+=qe}}function I2(C,E,N,rt,vt,xt,At,Ot,re){var he=Xg(rt,xt,At),ge=jg(rt,vt),Fe=ge*At,nr=C[0].x===0||C[0].x===re||C[0].y===0||C[0].y===re;E-Fe<E/4&&(E=Fe+E/4);var qe=xt*2,mr=nr?E/2*Ot%E:(ge/2+qe)*At*Ot%E;return Zg(C,mr,E,he,N,Fe,nr,!1,re)}function Zg(C,E,N,rt,vt,xt,At,Ot,re){for(var he=xt/2,ge=$g(C),Fe=0,nr=E-N,qe=[],mr=0;mr<C.length-1;mr++){for(var Br=C[mr],sn=C[mr+1],tn=Br.dist(sn),En=sn.angleTo(Br);nr+N<Fe+tn;){nr+=N;var xn=(nr-Fe)/tn,Cn=mo(Br.x,sn.x,xn),Fn=mo(Br.y,sn.y,xn);if(Cn>=0&&Cn<re&&Fn>=0&&Fn<re&&nr-he>=0&&nr+he<=ge){var Wn=new fh(Cn,Fn,En,mr);Wn._round(),(!rt||Wg(C,Wn,xt,rt,vt))&&qe.push(Wn)}}Fe+=tn}return!Ot&&!qe.length&&!At&&(qe=Zg(C,Fe/2,N,rt,vt,xt,At,!0,re)),qe}function Kg(C,E,N,rt,vt){for(var xt=[],At=0;At<C.length;At++)for(var Ot=C[At],re=void 0,he=0;he<Ot.length-1;he++){var ge=Ot[he],Fe=Ot[he+1];ge.x<E&&Fe.x<E||(ge.x<E?ge=new d(E,ge.y+(Fe.y-ge.y)*((E-ge.x)/(Fe.x-ge.x)))._round():Fe.x<E&&(Fe=new d(E,ge.y+(Fe.y-ge.y)*((E-ge.x)/(Fe.x-ge.x)))._round()),!(ge.y<N&&Fe.y<N)&&(ge.y<N?ge=new d(ge.x+(Fe.x-ge.x)*((N-ge.y)/(Fe.y-ge.y)),N)._round():Fe.y<N&&(Fe=new d(ge.x+(Fe.x-ge.x)*((N-ge.y)/(Fe.y-ge.y)),N)._round()),!(ge.x>=rt&&Fe.x>=rt)&&(ge.x>=rt?ge=new d(rt,ge.y+(Fe.y-ge.y)*((rt-ge.x)/(Fe.x-ge.x)))._round():Fe.x>=rt&&(Fe=new d(rt,ge.y+(Fe.y-ge.y)*((rt-ge.x)/(Fe.x-ge.x)))._round()),!(ge.y>=vt&&Fe.y>=vt)&&(ge.y>=vt?ge=new d(ge.x+(Fe.x-ge.x)*((vt-ge.y)/(Fe.y-ge.y)),vt)._round():Fe.y>=vt&&(Fe=new d(ge.x+(Fe.x-ge.x)*((vt-ge.y)/(Fe.y-ge.y)),vt)._round()),(!re||!ge.equals(re[re.length-1]))&&(re=[ge],xt.push(re)),re.push(Fe)))))}return xt}var hh=zl;function Jg(C,E,N,rt){var vt=[],xt=C.image,At=xt.pixelRatio,Ot=xt.paddedRect.w-2*hh,re=xt.paddedRect.h-2*hh,he=C.right-C.left,ge=C.bottom-C.top,Fe=xt.stretchX||[[0,Ot]],nr=xt.stretchY||[[0,re]],qe=function(Ia,Ma){return Ia+Ma[1]-Ma[0]},mr=Fe.reduce(qe,0),Br=nr.reduce(qe,0),sn=Ot-mr,tn=re-Br,En=0,xn=mr,Cn=0,Fn=Br,Wn=0,li=sn,ai=0,Fi=tn;if(xt.content&&rt){var Ti=xt.content;En=Xd(Fe,0,Ti[0]),Cn=Xd(nr,0,Ti[1]),xn=Xd(Fe,Ti[0],Ti[2]),Fn=Xd(nr,Ti[1],Ti[3]),Wn=Ti[0]-En,ai=Ti[1]-Cn,li=Ti[2]-Ti[0]-xn,Fi=Ti[3]-Ti[1]-Fn}var Mi=function(Ia,Ma,so,fo){var Io=jd(Ia.stretch-En,xn,he,C.left),Uo=Zd(Ia.fixed-Wn,li,Ia.stretch,mr),hs=jd(Ma.stretch-Cn,Fn,ge,C.top),ts=Zd(Ma.fixed-ai,Fi,Ma.stretch,Br),$s=jd(so.stretch-En,xn,he,C.left),Xs=Zd(so.fixed-Wn,li,so.stretch,mr),ds=jd(fo.stretch-Cn,Fn,ge,C.top),nl=Zd(fo.fixed-ai,Fi,fo.stretch,Br),il=new d(Io,hs),os=new d($s,hs),al=new d($s,ds),tc=new d(Io,ds),Wu=new d(Uo/At,ts/At),cf=new d(Xs/At,nl/At),uf=E*Math.PI/180;if(uf){var ff=Math.sin(uf),xh=Math.cos(uf),Pc=[xh,-ff,ff,xh];il._matMult(Pc),os._matMult(Pc),tc._matMult(Pc),al._matMult(Pc)}var ep=Ia.stretch+Ia.fixed,Ov=so.stretch+so.fixed,rp=Ma.stretch+Ma.fixed,Bv=fo.stretch+fo.fixed,vc={x:xt.paddedRect.x+hh+ep,y:xt.paddedRect.y+hh+rp,w:Ov-ep,h:Bv-rp},wh=li/At/he,np=Fi/At/ge;return{tl:il,tr:os,bl:tc,br:al,tex:vc,writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Wu,pixelOffsetBR:cf,minFontScaleX:wh,minFontScaleY:np,isSDF:N}};if(!rt||!xt.stretchX&&!xt.stretchY)vt.push(Mi({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Ot+1},{fixed:0,stretch:re+1}));else for(var ia=Qg(Fe,sn,mr),Di=Qg(nr,tn,Br),Ri=0;Ri<ia.length-1;Ri++)for(var da=ia[Ri],ra=ia[Ri+1],Da=0;Da<Di.length-1;Da++){var Qa=Di[Da],Pa=Di[Da+1];vt.push(Mi(da,Qa,ra,Pa))}return vt}function Xd(C,E,N){for(var rt=0,vt=0,xt=C;vt<xt.length;vt+=1){var At=xt[vt];rt+=Math.max(E,Math.min(N,At[1]))-Math.max(E,Math.min(N,At[0]))}return rt}function Qg(C,E,N){for(var rt=[{fixed:-hh,stretch:0}],vt=0,xt=C;vt<xt.length;vt+=1){var At=xt[vt],Ot=At[0],re=At[1],he=rt[rt.length-1];rt.push({fixed:Ot-he.stretch,stretch:he.stretch}),rt.push({fixed:Ot-he.stretch,stretch:he.stretch+(re-Ot)})}return rt.push({fixed:E+hh,stretch:N}),rt}function jd(C,E,N,rt){return C/E*N+rt}function Zd(C,E,N,rt){return C-E*N/rt}function z2(C,E,N,rt,vt,xt,At,Ot){for(var re=rt.layout.get("text-rotate").evaluate(xt,{})*Math.PI/180,he=[],ge=0,Fe=E.positionedLines;ge<Fe.length;ge+=1)for(var nr=Fe[ge],qe=0,mr=nr.positionedGlyphs;qe<mr.length;qe+=1){var Br=mr[qe];if(!!Br.rect){var sn=Br.rect||{},tn=1,En=zg+tn,xn=!0,Cn=1,Fn=0,Wn=(vt||Ot)&&Br.vertical,li=Br.metrics.advance*Br.scale/2;if(Ot&&E.verticalizable){var ai=(Br.scale-1)*Ss,Fi=(Ss-Br.metrics.width*Br.scale)/2;Fn=nr.lineOffset/2-(Br.imageName?-Fi:ai)}if(Br.imageName){var Ti=At[Br.imageName];xn=Ti.sdf,Cn=Ti.pixelRatio,En=zl/Cn}var Mi=vt?[Br.x+li,Br.y]:[0,0],ia=vt?[0,0]:[Br.x+li+N[0],Br.y+N[1]-Fn],Di=[0,0];Wn&&(Di=ia,ia=[0,0]);var Ri=(Br.metrics.left-En)*Br.scale-li+ia[0],da=(-Br.metrics.top-En)*Br.scale+ia[1],ra=Ri+sn.w*Br.scale/Cn,Da=da+sn.h*Br.scale/Cn,Qa=new d(Ri,da),Pa=new d(ra,da),Ia=new d(Ri,Da),Ma=new d(ra,Da);if(Wn){var so=new d(-li,li-sd),fo=-Math.PI/2,Io=Ss/2-li,Uo=Br.imageName?Io:0,hs=new d(5-sd-Io,-Uo),ts=new(Function.prototype.bind.apply(d,[null].concat(Di)));Qa._rotateAround(fo,so)._add(hs)._add(ts),Pa._rotateAround(fo,so)._add(hs)._add(ts),Ia._rotateAround(fo,so)._add(hs)._add(ts),Ma._rotateAround(fo,so)._add(hs)._add(ts)}if(re){var $s=Math.sin(re),Xs=Math.cos(re),ds=[Xs,-$s,$s,Xs];Qa._matMult(ds),Pa._matMult(ds),Ia._matMult(ds),Ma._matMult(ds)}var nl=new d(0,0),il=new d(0,0),os=0,al=0;he.push({tl:Qa,tr:Pa,bl:Ia,br:Ma,tex:sn,writingMode:E.writingMode,glyphOffset:Mi,sectionIndex:Br.sectionIndex,isSDF:xn,pixelOffsetTL:nl,pixelOffsetBR:il,minFontScaleX:os,minFontScaleY:al})}}return he}var Kd=function(E,N,rt,vt,xt,At,Ot,re,he,ge){if(this.boxStartIndex=E.length,he){var Fe=At.top,nr=At.bottom,qe=At.collisionPadding;qe&&(Fe-=qe[1],nr+=qe[3]);var mr=nr-Fe;mr>0&&(mr=Math.max(10,mr),this.circleDiameter=mr)}else{var Br=At.top*Ot-re,sn=At.bottom*Ot+re,tn=At.left*Ot-re,En=At.right*Ot+re,xn=At.collisionPadding;if(xn&&(tn-=xn[0]*Ot,Br-=xn[1]*Ot,En+=xn[2]*Ot,sn+=xn[3]*Ot),ge){var Cn=new d(tn,Br),Fn=new d(En,Br),Wn=new d(tn,sn),li=new d(En,sn),ai=ge*Math.PI/180;Cn._rotate(ai),Fn._rotate(ai),Wn._rotate(ai),li._rotate(ai),tn=Math.min(Cn.x,Fn.x,Wn.x,li.x),En=Math.max(Cn.x,Fn.x,Wn.x,li.x),Br=Math.min(Cn.y,Fn.y,Wn.y,li.y),sn=Math.max(Cn.y,Fn.y,Wn.y,li.y)}E.emplaceBack(N.x,N.y,tn,Br,En,sn,rt,vt,xt)}this.boxEndIndex=E.length},dh=function(E,N){if(E===void 0&&(E=[]),N===void 0&&(N=R2),this.data=E,this.length=this.data.length,this.compare=N,this.length>0)for(var rt=(this.length>>1)-1;rt>=0;rt--)this._down(rt)};dh.prototype.push=function(E){this.data.push(E),this.length++,this._up(this.length-1)},dh.prototype.pop=function(){if(this.length!==0){var E=this.data[0],N=this.data.pop();return this.length--,this.length>0&&(this.data[0]=N,this._down(0)),E}},dh.prototype.peek=function(){return this.data[0]},dh.prototype._up=function(E){for(var N=this,rt=N.data,vt=N.compare,xt=rt[E];E>0;){var At=E-1>>1,Ot=rt[At];if(vt(xt,Ot)>=0)break;rt[E]=Ot,E=At}rt[E]=xt},dh.prototype._down=function(E){for(var N=this,rt=N.data,vt=N.compare,xt=this.length>>1,At=rt[E];E<xt;){var Ot=(E<<1)+1,re=rt[Ot],he=Ot+1;if(he<this.length&&vt(rt[he],re)<0&&(Ot=he,re=rt[he]),vt(re,At)>=0)break;rt[E]=re,E=Ot}rt[E]=At};function R2(C,E){return C<E?-1:C>E?1:0}function F2(C,E,N){E===void 0&&(E=1),N===void 0&&(N=!1);for(var rt=1/0,vt=1/0,xt=-1/0,At=-1/0,Ot=C[0],re=0;re<Ot.length;re++){var he=Ot[re];(!re||he.x<rt)&&(rt=he.x),(!re||he.y<vt)&&(vt=he.y),(!re||he.x>xt)&&(xt=he.x),(!re||he.y>At)&&(At=he.y)}var ge=xt-rt,Fe=At-vt,nr=Math.min(ge,Fe),qe=nr/2,mr=new dh([],O2);if(nr===0)return new d(rt,vt);for(var Br=rt;Br<xt;Br+=nr)for(var sn=vt;sn<At;sn+=nr)mr.push(new ph(Br+qe,sn+qe,qe,C));for(var tn=N2(C),En=mr.length;mr.length;){var xn=mr.pop();(xn.d>tn.d||!tn.d)&&(tn=xn,N&&console.log("found best %d after %d probes",Math.round(1e4*xn.d)/1e4,En)),!(xn.max-tn.d<=E)&&(qe=xn.h/2,mr.push(new ph(xn.p.x-qe,xn.p.y-qe,qe,C)),mr.push(new ph(xn.p.x+qe,xn.p.y-qe,qe,C)),mr.push(new ph(xn.p.x-qe,xn.p.y+qe,qe,C)),mr.push(new ph(xn.p.x+qe,xn.p.y+qe,qe,C)),En+=4)}return N&&(console.log("num probes: "+En),console.log("best distance: "+tn.d)),tn.p}function O2(C,E){return E.max-C.max}function ph(C,E,N,rt){this.p=new d(C,E),this.h=N,this.d=B2(this.p,rt),this.max=this.d+this.h*Math.SQRT2}function B2(C,E){for(var N=!1,rt=1/0,vt=0;vt<E.length;vt++)for(var xt=E[vt],At=0,Ot=xt.length,re=Ot-1;At<Ot;re=At++){var he=xt[At],ge=xt[re];he.y>C.y!=ge.y>C.y&&C.x<(ge.x-he.x)*(C.y-he.y)/(ge.y-he.y)+he.x&&(N=!N),rt=Math.min(rt,qc(C,he,ge))}return(N?1:-1)*Math.sqrt(rt)}function N2(C){for(var E=0,N=0,rt=0,vt=C[0],xt=0,At=vt.length,Ot=At-1;xt<At;Ot=xt++){var re=vt[xt],he=vt[Ot],ge=re.x*he.y-he.x*re.y;N+=(re.x+he.x)*ge,rt+=(re.y+he.y)*ge,E+=ge*3}return new ph(N/E,rt/E,0,C)}var vh=7,Lv=Number.POSITIVE_INFINITY;function qg(C,E){function N(vt,xt){var At=0,Ot=0;xt<0&&(xt=0);var re=xt/Math.sqrt(2);switch(vt){case"top-right":case"top-left":Ot=re-vh;break;case"bottom-right":case"bottom-left":Ot=-re+vh;break;case"bottom":Ot=-xt+vh;break;case"top":Ot=xt-vh;break}switch(vt){case"top-right":case"bottom-right":At=-re;break;case"top-left":case"bottom-left":At=re;break;case"left":At=xt;break;case"right":At=-xt;break}return[At,Ot]}function rt(vt,xt,At){var Ot=0,re=0;switch(xt=Math.abs(xt),At=Math.abs(At),vt){case"top-right":case"top-left":case"top":re=At-vh;break;case"bottom-right":case"bottom-left":case"bottom":re=-At+vh;break}switch(vt){case"top-right":case"bottom-right":case"right":Ot=-xt;break;case"top-left":case"bottom-left":case"left":Ot=xt;break}return[Ot,re]}return E[1]!==Lv?rt(C,E[0],E[1]):N(C,E[0])}function U2(C,E,N,rt,vt,xt,At){C.createArrays();var Ot=512*C.overscaling;C.tilePixelRatio=Hi/Ot,C.compareText={},C.iconsNeedLinear=!1;var re=C.layers[0].layout,he=C.layers[0]._unevaluatedLayout._values,ge={};if(C.textSizeData.kind==="composite"){var Fe=C.textSizeData,nr=Fe.minZoom,qe=Fe.maxZoom;ge.compositeTextSizes=[he["text-size"].possiblyEvaluate(new ua(nr),At),he["text-size"].possiblyEvaluate(new ua(qe),At)]}if(C.iconSizeData.kind==="composite"){var mr=C.iconSizeData,Br=mr.minZoom,sn=mr.maxZoom;ge.compositeIconSizes=[he["icon-size"].possiblyEvaluate(new ua(Br),At),he["icon-size"].possiblyEvaluate(new ua(sn),At)]}ge.layoutTextSize=he["text-size"].possiblyEvaluate(new ua(C.zoom+1),At),ge.layoutIconSize=he["icon-size"].possiblyEvaluate(new ua(C.zoom+1),At),ge.textMaxSize=he["text-size"].possiblyEvaluate(new ua(18));for(var tn=re.get("text-line-height")*Ss,En=re.get("text-rotation-alignment")==="map"&&re.get("symbol-placement")!=="point",xn=re.get("text-keep-upright"),Cn=re.get("text-size"),Fn=function(){var ai=li[Wn],Fi=re.get("text-font").evaluate(ai,{},At).join(","),Ti=Cn.evaluate(ai,{},At),Mi=ge.layoutTextSize.evaluate(ai,{},At),ia=ge.layoutIconSize.evaluate(ai,{},At),Di={horizontal:{},vertical:void 0},Ri=ai.text,da=[0,0];if(Ri){var ra=Ri.toString(),Da=re.get("text-letter-spacing").evaluate(ai,{},At)*Ss,Qa=qr(ra)?Da:0,Pa=re.get("text-anchor").evaluate(ai,{},At),Ia=re.get("text-variable-anchor");if(!Ia){var Ma=re.get("text-radial-offset").evaluate(ai,{},At);Ma?da=qg(Pa,[Ma*Ss,Lv]):da=re.get("text-offset").evaluate(ai,{},At).map(function(Wu){return Wu*Ss})}var so=En?"center":re.get("text-justify").evaluate(ai,{},At),fo=re.get("symbol-placement"),Io=fo==="point"?re.get("text-max-width").evaluate(ai,{},At)*Ss:0,Uo=function(){C.allowVerticalPlacement&&Sr(ra)&&(Di.vertical=$d(Ri,E,N,vt,Fi,Io,tn,Pa,"left",Qa,da,ql.vertical,!0,fo,Mi,Ti))};if(!En&&Ia){for(var hs=so==="auto"?Ia.map(function(Wu){return Dv(Wu)}):[so],ts=!1,$s=0;$s<hs.length;$s++){var Xs=hs[$s];if(!Di.horizontal[Xs])if(ts)Di.horizontal[Xs]=Di.horizontal[0];else{var ds=$d(Ri,E,N,vt,Fi,Io,tn,"center",Xs,Qa,da,ql.horizontal,!1,fo,Mi,Ti);ds&&(Di.horizontal[Xs]=ds,ts=ds.positionedLines.length===1)}}Uo()}else{so==="auto"&&(so=Dv(Pa));var nl=$d(Ri,E,N,vt,Fi,Io,tn,Pa,so,Qa,da,ql.horizontal,!1,fo,Mi,Ti);nl&&(Di.horizontal[so]=nl),Uo(),Sr(ra)&&En&&xn&&(Di.vertical=$d(Ri,E,N,vt,Fi,Io,tn,Pa,so,Qa,da,ql.vertical,!1,fo,Mi,Ti))}}var il=void 0,os=!1;if(ai.icon&&ai.icon.name){var al=rt[ai.icon.name];al&&(il=L2(vt[ai.icon.name],re.get("icon-offset").evaluate(ai,{},At),re.get("icon-anchor").evaluate(ai,{},At)),os=al.sdf,C.sdfIcons===void 0?C.sdfIcons=al.sdf:C.sdfIcons!==al.sdf&&U("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(al.pixelRatio!==C.pixelRatio||re.get("icon-rotate").constantOr(1)!==0)&&(C.iconsNeedLinear=!0))}var tc=em(Di.horizontal)||Di.vertical;C.iconsInText=tc?tc.iconsInText:!1,(tc||il)&&H2(C,ai,Di,il,rt,ge,Mi,ia,da,os,At)},Wn=0,li=C.features;Wn<li.length;Wn+=1)Fn();xt&&C.generateCollisionDebugBuffers()}function Dv(C){switch(C){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function H2(C,E,N,rt,vt,xt,At,Ot,re,he,ge){var Fe=xt.textMaxSize.evaluate(E,{});Fe===void 0&&(Fe=At);var nr=C.layers[0].layout,qe=nr.get("icon-offset").evaluate(E,{},ge),mr=em(N.horizontal),Br=24,sn=At/Br,tn=C.tilePixelRatio*sn,En=C.tilePixelRatio*Fe/Br,xn=C.tilePixelRatio*Ot,Cn=C.tilePixelRatio*nr.get("symbol-spacing"),Fn=nr.get("text-padding")*C.tilePixelRatio,Wn=nr.get("icon-padding")*C.tilePixelRatio,li=nr.get("text-max-angle")/180*Math.PI,ai=nr.get("text-rotation-alignment")==="map"&&nr.get("symbol-placement")!=="point",Fi=nr.get("icon-rotation-alignment")==="map"&&nr.get("symbol-placement")!=="point",Ti=nr.get("symbol-placement"),Mi=Cn/2,ia=nr.get("icon-text-fit"),Di;rt&&ia!=="none"&&(C.allowVerticalPlacement&&N.vertical&&(Di=Vg(rt,N.vertical,ia,nr.get("icon-text-fit-padding"),qe,sn)),mr&&(rt=Vg(rt,mr,ia,nr.get("icon-text-fit-padding"),qe,sn)));var Ri=function(xh,Pc){Pc.x<0||Pc.x>=Hi||Pc.y<0||Pc.y>=Hi||V2(C,Pc,xh,N,rt,vt,Di,C.layers[0],C.collisionBoxArray,E.index,E.sourceLayerIndex,C.index,tn,Fn,ai,re,xn,Wn,Fi,qe,E,xt,he,ge,At)};if(Ti==="line")for(var da=0,ra=Kg(E.geometry,0,0,Hi,Hi);da<ra.length;da+=1)for(var Da=ra[da],Qa=I2(Da,Cn,li,N.vertical||mr,rt,Br,En,C.overscaling,Hi),Pa=0,Ia=Qa;Pa<Ia.length;Pa+=1){var Ma=Ia[Pa],so=mr;(!so||!G2(C,so.text,Mi,Ma))&&Ri(Da,Ma)}else if(Ti==="line-center")for(var fo=0,Io=E.geometry;fo<Io.length;fo+=1){var Uo=Io[fo];if(Uo.length>1){var hs=P2(Uo,li,N.vertical||mr,rt,Br,En);hs&&Ri(Uo,hs)}}else if(E.type==="Polygon")for(var ts=0,$s=xv(E.geometry,0);ts<$s.length;ts+=1){var Xs=$s[ts],ds=F2(Xs,16);Ri(Xs[0],new fh(ds.x,ds.y,0))}else if(E.type==="LineString")for(var nl=0,il=E.geometry;nl<il.length;nl+=1){var os=il[nl];Ri(os,new fh(os[0].x,os[0].y,0))}else if(E.type==="Point")for(var al=0,tc=E.geometry;al<tc.length;al+=1)for(var Wu=tc[al],cf=0,uf=Wu;cf<uf.length;cf+=1){var ff=uf[cf];Ri([ff],new fh(ff.x,ff.y,0))}}var ld=255,sf=ld*ru;function tm(C,E,N,rt,vt,xt,At,Ot,re,he,ge,Fe,nr,qe,mr){var Br=z2(E,N,Ot,vt,xt,At,rt,C.allowVerticalPlacement),sn=C.textSizeData,tn=null;sn.kind==="source"?(tn=[ru*vt.layout.get("text-size").evaluate(At,{})],tn[0]>sf&&U(C.layerIds[0]+': Value for "text-size" is >= '+ld+'. Reduce your "text-size".')):sn.kind==="composite"&&(tn=[ru*qe.compositeTextSizes[0].evaluate(At,{},mr),ru*qe.compositeTextSizes[1].evaluate(At,{},mr)],(tn[0]>sf||tn[1]>sf)&&U(C.layerIds[0]+': Value for "text-size" is >= '+ld+'. Reduce your "text-size".')),C.addSymbols(C.text,Br,tn,Ot,xt,At,he,E,re.lineStartIndex,re.lineLength,nr,mr);for(var En=0,xn=ge;En<xn.length;En+=1){var Cn=xn[En];Fe[Cn]=C.text.placedSymbolArray.length-1}return Br.length*4}function em(C){for(var E in C)return C[E];return null}function V2(C,E,N,rt,vt,xt,At,Ot,re,he,ge,Fe,nr,qe,mr,Br,sn,tn,En,xn,Cn,Fn,Wn,li,ai){var Fi,Ti=C.addToLineVertexArray(E,N),Mi,ia,Di,Ri,da=0,ra=0,Da=0,Qa=0,Pa=-1,Ia=-1,Ma={},so=Dt(""),fo=0,Io=0;if(Ot._unevaluatedLayout.getValue("text-radial-offset")===void 0?(Fi=Ot.layout.get("text-offset").evaluate(Cn,{},li).map(function(fd){return fd*Ss}),fo=Fi[0],Io=Fi[1]):(fo=Ot.layout.get("text-radial-offset").evaluate(Cn,{},li)*Ss,Io=Lv),C.allowVerticalPlacement&&rt.vertical){var Uo=Ot.layout.get("text-rotate").evaluate(Cn,{},li),hs=Uo+90,ts=rt.vertical;Di=new Kd(re,E,he,ge,Fe,ts,nr,qe,mr,hs),At&&(Ri=new Kd(re,E,he,ge,Fe,At,sn,tn,mr,hs))}if(vt){var $s=Ot.layout.get("icon-rotate").evaluate(Cn,{}),Xs=Ot.layout.get("icon-text-fit")!=="none",ds=Jg(vt,$s,Wn,Xs),nl=At?Jg(At,$s,Wn,Xs):void 0;ia=new Kd(re,E,he,ge,Fe,vt,sn,tn,!1,$s),da=ds.length*4;var il=C.iconSizeData,os=null;il.kind==="source"?(os=[ru*Ot.layout.get("icon-size").evaluate(Cn,{})],os[0]>sf&&U(C.layerIds[0]+': Value for "icon-size" is >= '+ld+'. Reduce your "icon-size".')):il.kind==="composite"&&(os=[ru*Fn.compositeIconSizes[0].evaluate(Cn,{},li),ru*Fn.compositeIconSizes[1].evaluate(Cn,{},li)],(os[0]>sf||os[1]>sf)&&U(C.layerIds[0]+': Value for "icon-size" is >= '+ld+'. Reduce your "icon-size".')),C.addSymbols(C.icon,ds,os,xn,En,Cn,!1,E,Ti.lineStartIndex,Ti.lineLength,-1,li),Pa=C.icon.placedSymbolArray.length-1,nl&&(ra=nl.length*4,C.addSymbols(C.icon,nl,os,xn,En,Cn,ql.vertical,E,Ti.lineStartIndex,Ti.lineLength,-1,li),Ia=C.icon.placedSymbolArray.length-1)}for(var al in rt.horizontal){var tc=rt.horizontal[al];if(!Mi){so=Dt(tc.text);var Wu=Ot.layout.get("text-rotate").evaluate(Cn,{},li);Mi=new Kd(re,E,he,ge,Fe,tc,nr,qe,mr,Wu)}var cf=tc.positionedLines.length===1;if(Da+=tm(C,E,tc,xt,Ot,mr,Cn,Br,Ti,rt.vertical?ql.horizontal:ql.horizontalOnly,cf?Object.keys(rt.horizontal):[al],Ma,Pa,Fn,li),cf)break}rt.vertical&&(Qa+=tm(C,E,rt.vertical,xt,Ot,mr,Cn,Br,Ti,ql.vertical,["vertical"],Ma,Ia,Fn,li));var uf=Mi?Mi.boxStartIndex:C.collisionBoxArray.length,ff=Mi?Mi.boxEndIndex:C.collisionBoxArray.length,xh=Di?Di.boxStartIndex:C.collisionBoxArray.length,Pc=Di?Di.boxEndIndex:C.collisionBoxArray.length,ep=ia?ia.boxStartIndex:C.collisionBoxArray.length,Ov=ia?ia.boxEndIndex:C.collisionBoxArray.length,rp=Ri?Ri.boxStartIndex:C.collisionBoxArray.length,Bv=Ri?Ri.boxEndIndex:C.collisionBoxArray.length,vc=-1,wh=function(fd,mm){return fd&&fd.circleDiameter?Math.max(fd.circleDiameter,mm):mm};vc=wh(Mi,vc),vc=wh(Di,vc),vc=wh(ia,vc),vc=wh(Ri,vc);var np=vc>-1?1:0;np&&(vc*=ai/Ss),C.glyphOffsetArray.length>=Ja.MAX_GLYPHS&&U("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Cn.sortKey!==void 0&&C.addToSortKeyRanges(C.symbolInstances.length,Cn.sortKey),C.symbolInstances.emplaceBack(E.x,E.y,Ma.right>=0?Ma.right:-1,Ma.center>=0?Ma.center:-1,Ma.left>=0?Ma.left:-1,Ma.vertical||-1,Pa,Ia,so,uf,ff,xh,Pc,ep,Ov,rp,Bv,he,Da,Qa,da,ra,np,0,nr,fo,Io,vc)}function G2(C,E,N,rt){var vt=C.compareText;if(!(E in vt))vt[E]=[];else for(var xt=vt[E],At=xt.length-1;At>=0;At--)if(rt.dist(xt[At])<N)return!0;return vt[E].push(rt),!1}var Y2=sh.VectorTileFeature.types,W2=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Jd(C,E,N,rt,vt,xt,At,Ot,re,he,ge,Fe,nr){var qe=Ot?Math.min(sf,Math.round(Ot[0])):0,mr=Ot?Math.min(sf,Math.round(Ot[1])):0;C.emplaceBack(E,N,Math.round(rt*32),Math.round(vt*32),xt,At,(qe<<1)+(re?1:0),mr,he*16,ge*16,Fe*256,nr*256)}function Pv(C,E,N){C.emplaceBack(E.x,E.y,N),C.emplaceBack(E.x,E.y,N),C.emplaceBack(E.x,E.y,N),C.emplaceBack(E.x,E.y,N)}function $2(C){for(var E=0,N=C.sections;E<N.length;E+=1){var rt=N[E];if(ii(rt.text))return!0}return!1}var gh=function(E){this.layoutVertexArray=new Tu,this.indexArray=new Qc,this.programConfigurations=E,this.segments=new Y,this.dynamicLayoutVertexArray=new Yh,this.opacityVertexArray=new Wh,this.placedSymbolArray=new rf};gh.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},gh.prototype.upload=function(E,N,rt,vt){this.isEmpty()||(rt&&(this.layoutVertexBuffer=E.createVertexBuffer(this.layoutVertexArray,Tv.members),this.indexBuffer=E.createIndexBuffer(this.indexArray,N),this.dynamicLayoutVertexBuffer=E.createVertexBuffer(this.dynamicLayoutVertexArray,Xx.members,!0),this.opacityVertexBuffer=E.createVertexBuffer(this.opacityVertexArray,W2,!0),this.opacityVertexBuffer.itemSize=1),(rt||vt)&&this.programConfigurations.upload(E))},gh.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Bt("SymbolBuffers",gh);var cd=function(E,N,rt){this.layoutVertexArray=new E,this.layoutAttributes=N,this.indexArray=new rt,this.segments=new Y,this.collisionVertexArray=new ml};cd.prototype.upload=function(E){this.layoutVertexBuffer=E.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=E.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=E.createVertexBuffer(this.collisionVertexArray,jx.members,!0)},cd.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Bt("CollisionBuffers",cd);var Ja=function(E){this.collisionBoxArray=E.collisionBoxArray,this.zoom=E.zoom,this.overscaling=E.overscaling,this.layers=E.layers,this.layerIds=this.layers.map(function(re){return re.id}),this.index=E.index,this.pixelRatio=E.pixelRatio,this.sourceLayerIndex=E.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=rh([]),this.placementViewportMatrix=rh([]);var N=this.layers[0],rt=N._unevaluatedLayout._values;this.textSizeData=Ev(this.zoom,rt["text-size"]),this.iconSizeData=Ev(this.zoom,rt["icon-size"]);var vt=this.layers[0].layout,xt=vt.get("symbol-sort-key"),At=vt.get("symbol-z-order");this.sortFeaturesByKey=At!=="viewport-y"&&xt.constantOr(1)!==void 0;var Ot=At==="viewport-y"||At==="auto"&&!this.sortFeaturesByKey;this.sortFeaturesByY=Ot&&(vt.get("text-allow-overlap")||vt.get("icon-allow-overlap")||vt.get("text-ignore-placement")||vt.get("icon-ignore-placement")),vt.get("symbol-placement")==="point"&&(this.writingModes=vt.get("text-writing-mode").map(function(re){return ql[re]})),this.stateDependentLayerIds=this.layers.filter(function(re){return re.isStateDependent()}).map(function(re){return re.id}),this.sourceID=E.sourceID};Ja.prototype.createArrays=function(){this.text=new gh(new oa(Tv.members,this.layers,this.zoom,function(E){return/^text/.test(E)})),this.icon=new gh(new oa(Tv.members,this.layers,this.zoom,function(E){return/^icon/.test(E)})),this.glyphOffsetArray=new dc,this.lineVertexArray=new Id,this.symbolInstances=new Pd},Ja.prototype.calculateGlyphDependencies=function(E,N,rt,vt,xt){for(var At=0;At<E.length;At++)if(N[E.charCodeAt(At)]=!0,(rt||vt)&&xt){var Ot=id[E.charAt(At)];Ot&&(N[Ot.charCodeAt(0)]=!0)}},Ja.prototype.populate=function(E,N,rt){var vt=this.layers[0],xt=vt.layout,At=xt.get("text-font"),Ot=xt.get("text-field"),re=xt.get("icon-image"),he=(Ot.value.kind!=="constant"||Ot.value.value instanceof Xa&&!Ot.value.value.isEmpty()||Ot.value.value.toString().length>0)&&(At.value.kind!=="constant"||At.value.value.length>0),ge=re.value.kind!=="constant"||!!re.value.value||Object.keys(re.parameters).length>0,Fe=xt.get("symbol-sort-key");if(this.features=[],!(!he&&!ge)){for(var nr=N.iconDependencies,qe=N.glyphDependencies,mr=N.availableImages,Br=new ua(this.zoom),sn=0,tn=E;sn<tn.length;sn+=1){var En=tn[sn],xn=En.feature,Cn=En.id,Fn=En.index,Wn=En.sourceLayerIndex,li=vt._featureFilter.needGeometry,ai={type:xn.type,id:Cn,properties:xn.properties,geometry:li?$a(xn):[]};if(!!vt._featureFilter.filter(Br,ai,rt)){li||(ai.geometry=$a(xn));var Fi=void 0;if(he){var Ti=vt.getValueAndResolveTokens("text-field",ai,rt,mr),Mi=Xa.factory(Ti);$2(Mi)&&(this.hasRTLText=!0),(!this.hasRTLText||wo()==="unavailable"||this.hasRTLText&&Zi.isParsed())&&(Fi=Jx(Mi,vt,ai))}var ia=void 0;if(ge){var Di=vt.getValueAndResolveTokens("icon-image",ai,rt,mr);Di instanceof Ro?ia=Di:ia=Ro.fromString(Di)}if(!(!Fi&&!ia)){var Ri=this.sortFeaturesByKey?Fe.evaluate(ai,{},rt):void 0,da={id:Cn,text:Fi,icon:ia,index:Fn,sourceLayerIndex:Wn,geometry:$a(xn),properties:xn.properties,type:Y2[xn.type],sortKey:Ri};if(this.features.push(da),ia&&(nr[ia.name]=!0),Fi){var ra=At.evaluate(ai,{},rt).join(","),Da=xt.get("text-rotation-alignment")==="map"&&xt.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(ql.vertical)>=0;for(var Qa=0,Pa=Fi.sections;Qa<Pa.length;Qa+=1){var Ia=Pa[Qa];if(Ia.image)nr[Ia.image.name]=!0;else{var Ma=Sr(Fi.toString()),so=Ia.fontStack||ra,fo=qe[so]=qe[so]||{};this.calculateGlyphDependencies(Ia.text,fo,Da,this.allowVerticalPlacement,Ma)}}}}}}xt.get("symbol-placement")==="line"&&(this.features=Qx(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Io,Uo){return Io.sortKey-Uo.sortKey})}},Ja.prototype.update=function(E,N,rt){!this.stateDependentLayers.length||(this.text.programConfigurations.updatePaintArrays(E,N,this.layers,rt),this.icon.programConfigurations.updatePaintArrays(E,N,this.layers,rt))},Ja.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},Ja.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Ja.prototype.upload=function(E){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(E),this.iconCollisionBox.upload(E)),this.text.upload(E,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(E,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Ja.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Ja.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Ja.prototype.addToLineVertexArray=function(E,N){var rt=this.lineVertexArray.length;if(E.segment!==void 0){for(var vt=E.dist(N[E.segment+1]),xt=E.dist(N[E.segment]),At={},Ot=E.segment+1;Ot<N.length;Ot++)At[Ot]={x:N[Ot].x,y:N[Ot].y,tileUnitDistanceFromAnchor:vt},Ot<N.length-1&&(vt+=N[Ot+1].dist(N[Ot]));for(var re=E.segment||0;re>=0;re--)At[re]={x:N[re].x,y:N[re].y,tileUnitDistanceFromAnchor:xt},re>0&&(xt+=N[re-1].dist(N[re]));for(var he=0;he<N.length;he++){var ge=At[he];this.lineVertexArray.emplaceBack(ge.x,ge.y,ge.tileUnitDistanceFromAnchor)}}return{lineStartIndex:rt,lineLength:this.lineVertexArray.length-rt}},Ja.prototype.addSymbols=function(E,N,rt,vt,xt,At,Ot,re,he,ge,Fe,nr){for(var qe=E.indexArray,mr=E.layoutVertexArray,Br=E.segments.prepareSegment(4*N.length,mr,qe,At.sortKey),sn=this.glyphOffsetArray.length,tn=Br.vertexLength,En=this.allowVerticalPlacement&&Ot===ql.vertical?Math.PI/2:0,xn=At.text&&At.text.sections,Cn=0;Cn<N.length;Cn++){var Fn=N[Cn],Wn=Fn.tl,li=Fn.tr,ai=Fn.bl,Fi=Fn.br,Ti=Fn.tex,Mi=Fn.pixelOffsetTL,ia=Fn.pixelOffsetBR,Di=Fn.minFontScaleX,Ri=Fn.minFontScaleY,da=Fn.glyphOffset,ra=Fn.isSDF,Da=Fn.sectionIndex,Qa=Br.vertexLength,Pa=da[1];Jd(mr,re.x,re.y,Wn.x,Pa+Wn.y,Ti.x,Ti.y,rt,ra,Mi.x,Mi.y,Di,Ri),Jd(mr,re.x,re.y,li.x,Pa+li.y,Ti.x+Ti.w,Ti.y,rt,ra,ia.x,Mi.y,Di,Ri),Jd(mr,re.x,re.y,ai.x,Pa+ai.y,Ti.x,Ti.y+Ti.h,rt,ra,Mi.x,ia.y,Di,Ri),Jd(mr,re.x,re.y,Fi.x,Pa+Fi.y,Ti.x+Ti.w,Ti.y+Ti.h,rt,ra,ia.x,ia.y,Di,Ri),Pv(E.dynamicLayoutVertexArray,re,En),qe.emplaceBack(Qa,Qa+1,Qa+2),qe.emplaceBack(Qa+1,Qa+2,Qa+3),Br.vertexLength+=4,Br.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(da[0]),(Cn===N.length-1||Da!==N[Cn+1].sectionIndex)&&E.programConfigurations.populatePaintArrays(mr.length,At,At.index,{},nr,xn&&xn[Da])}E.placedSymbolArray.emplaceBack(re.x,re.y,sn,this.glyphOffsetArray.length-sn,tn,he,ge,re.segment,rt?rt[0]:0,rt?rt[1]:0,vt[0],vt[1],Ot,0,!1,0,Fe)},Ja.prototype._addCollisionDebugVertex=function(E,N,rt,vt,xt,At){return N.emplaceBack(0,0),E.emplaceBack(rt.x,rt.y,vt,xt,Math.round(At.x),Math.round(At.y))},Ja.prototype.addCollisionDebugVertices=function(E,N,rt,vt,xt,At,Ot){var re=xt.segments.prepareSegment(4,xt.layoutVertexArray,xt.indexArray),he=re.vertexLength,ge=xt.layoutVertexArray,Fe=xt.collisionVertexArray,nr=Ot.anchorX,qe=Ot.anchorY;this._addCollisionDebugVertex(ge,Fe,At,nr,qe,new d(E,N)),this._addCollisionDebugVertex(ge,Fe,At,nr,qe,new d(rt,N)),this._addCollisionDebugVertex(ge,Fe,At,nr,qe,new d(rt,vt)),this._addCollisionDebugVertex(ge,Fe,At,nr,qe,new d(E,vt)),re.vertexLength+=4;var mr=xt.indexArray;mr.emplaceBack(he,he+1),mr.emplaceBack(he+1,he+2),mr.emplaceBack(he+2,he+3),mr.emplaceBack(he+3,he),re.primitiveLength+=4},Ja.prototype.addDebugCollisionBoxes=function(E,N,rt,vt){for(var xt=E;xt<N;xt++){var At=this.collisionBoxArray.get(xt),Ot=At.x1,re=At.y1,he=At.x2,ge=At.y2;this.addCollisionDebugVertices(Ot,re,he,ge,vt?this.textCollisionBox:this.iconCollisionBox,At.anchorPoint,rt)}},Ja.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new cd(Jf,Eg.members,kf),this.iconCollisionBox=new cd(Jf,Eg.members,kf);for(var E=0;E<this.symbolInstances.length;E++){var N=this.symbolInstances.get(E);this.addDebugCollisionBoxes(N.textBoxStartIndex,N.textBoxEndIndex,N,!0),this.addDebugCollisionBoxes(N.verticalTextBoxStartIndex,N.verticalTextBoxEndIndex,N,!0),this.addDebugCollisionBoxes(N.iconBoxStartIndex,N.iconBoxEndIndex,N,!1),this.addDebugCollisionBoxes(N.verticalIconBoxStartIndex,N.verticalIconBoxEndIndex,N,!1)}},Ja.prototype._deserializeCollisionBoxesForSymbol=function(E,N,rt,vt,xt,At,Ot,re,he){for(var ge={},Fe=N;Fe<rt;Fe++){var nr=E.get(Fe);ge.textBox={x1:nr.x1,y1:nr.y1,x2:nr.x2,y2:nr.y2,anchorPointX:nr.anchorPointX,anchorPointY:nr.anchorPointY},ge.textFeatureIndex=nr.featureIndex;break}for(var qe=vt;qe<xt;qe++){var mr=E.get(qe);ge.verticalTextBox={x1:mr.x1,y1:mr.y1,x2:mr.x2,y2:mr.y2,anchorPointX:mr.anchorPointX,anchorPointY:mr.anchorPointY},ge.verticalTextFeatureIndex=mr.featureIndex;break}for(var Br=At;Br<Ot;Br++){var sn=E.get(Br);ge.iconBox={x1:sn.x1,y1:sn.y1,x2:sn.x2,y2:sn.y2,anchorPointX:sn.anchorPointX,anchorPointY:sn.anchorPointY},ge.iconFeatureIndex=sn.featureIndex;break}for(var tn=re;tn<he;tn++){var En=E.get(tn);ge.verticalIconBox={x1:En.x1,y1:En.y1,x2:En.x2,y2:En.y2,anchorPointX:En.anchorPointX,anchorPointY:En.anchorPointY},ge.verticalIconFeatureIndex=En.featureIndex;break}return ge},Ja.prototype.deserializeCollisionBoxes=function(E){this.collisionArrays=[];for(var N=0;N<this.symbolInstances.length;N++){var rt=this.symbolInstances.get(N);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(E,rt.textBoxStartIndex,rt.textBoxEndIndex,rt.verticalTextBoxStartIndex,rt.verticalTextBoxEndIndex,rt.iconBoxStartIndex,rt.iconBoxEndIndex,rt.verticalIconBoxStartIndex,rt.verticalIconBoxEndIndex))}},Ja.prototype.hasTextData=function(){return this.text.segments.get().length>0},Ja.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Ja.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Ja.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Ja.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Ja.prototype.addIndicesForPlacedSymbol=function(E,N){for(var rt=E.placedSymbolArray.get(N),vt=rt.vertexStartIndex+rt.numGlyphs*4,xt=rt.vertexStartIndex;xt<vt;xt+=4)E.indexArray.emplaceBack(xt,xt+1,xt+2),E.indexArray.emplaceBack(xt+1,xt+2,xt+3)},Ja.prototype.getSortedSymbolIndexes=function(E){if(this.sortedAngle===E&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var N=Math.sin(E),rt=Math.cos(E),vt=[],xt=[],At=[],Ot=0;Ot<this.symbolInstances.length;++Ot){At.push(Ot);var re=this.symbolInstances.get(Ot);vt.push(Math.round(N*re.anchorX+rt*re.anchorY)|0),xt.push(re.featureIndex)}return At.sort(function(he,ge){return vt[he]-vt[ge]||xt[ge]-xt[he]}),At},Ja.prototype.addToSortKeyRanges=function(E,N){var rt=this.sortKeyRanges[this.sortKeyRanges.length-1];rt&&rt.sortKey===N?rt.symbolInstanceEnd=E+1:this.sortKeyRanges.push({sortKey:N,symbolInstanceStart:E,symbolInstanceEnd:E+1})},Ja.prototype.sortFeatures=function(E){var N=this;if(!!this.sortFeaturesByY&&this.sortedAngle!==E&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(E),this.sortedAngle=E,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var rt=0,vt=this.symbolInstanceIndexes;rt<vt.length;rt+=1){var xt=vt[rt],At=this.symbolInstances.get(xt);this.featureSortOrder.push(At.featureIndex),[At.rightJustifiedTextSymbolIndex,At.centerJustifiedTextSymbolIndex,At.leftJustifiedTextSymbolIndex].forEach(function(Ot,re,he){Ot>=0&&he.indexOf(Ot)===re&&N.addIndicesForPlacedSymbol(N.text,Ot)}),At.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,At.verticalPlacedTextSymbolIndex),At.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,At.placedIconSymbolIndex),At.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,At.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Bt("SymbolBucket",Ja,{omit:["layers","collisionBoxArray","features","compareText"]}),Ja.MAX_GLYPHS=65535,Ja.addDynamicAttributes=Pv;function X2(C,E){return E.replace(/{([^{}]+)}/g,function(N,rt){return rt in C?String(C[rt]):""})}var j2=new eo({"symbol-placement":new Oi(Ue.layout_symbol["symbol-placement"]),"symbol-spacing":new Oi(Ue.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Oi(Ue.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ki(Ue.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Oi(Ue.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Oi(Ue.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Oi(Ue.layout_symbol["icon-ignore-placement"]),"icon-optional":new Oi(Ue.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Oi(Ue.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ki(Ue.layout_symbol["icon-size"]),"icon-text-fit":new Oi(Ue.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Oi(Ue.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ki(Ue.layout_symbol["icon-image"]),"icon-rotate":new Ki(Ue.layout_symbol["icon-rotate"]),"icon-padding":new Oi(Ue.layout_symbol["icon-padding"]),"icon-keep-upright":new Oi(Ue.layout_symbol["icon-keep-upright"]),"icon-offset":new Ki(Ue.layout_symbol["icon-offset"]),"icon-anchor":new Ki(Ue.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Oi(Ue.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Oi(Ue.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Oi(Ue.layout_symbol["text-rotation-alignment"]),"text-field":new Ki(Ue.layout_symbol["text-field"]),"text-font":new Ki(Ue.layout_symbol["text-font"]),"text-size":new Ki(Ue.layout_symbol["text-size"]),"text-max-width":new Ki(Ue.layout_symbol["text-max-width"]),"text-line-height":new Oi(Ue.layout_symbol["text-line-height"]),"text-letter-spacing":new Ki(Ue.layout_symbol["text-letter-spacing"]),"text-justify":new Ki(Ue.layout_symbol["text-justify"]),"text-radial-offset":new Ki(Ue.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Oi(Ue.layout_symbol["text-variable-anchor"]),"text-anchor":new Ki(Ue.layout_symbol["text-anchor"]),"text-max-angle":new Oi(Ue.layout_symbol["text-max-angle"]),"text-writing-mode":new Oi(Ue.layout_symbol["text-writing-mode"]),"text-rotate":new Ki(Ue.layout_symbol["text-rotate"]),"text-padding":new Oi(Ue.layout_symbol["text-padding"]),"text-keep-upright":new Oi(Ue.layout_symbol["text-keep-upright"]),"text-transform":new Ki(Ue.layout_symbol["text-transform"]),"text-offset":new Ki(Ue.layout_symbol["text-offset"]),"text-allow-overlap":new Oi(Ue.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Oi(Ue.layout_symbol["text-ignore-placement"]),"text-optional":new Oi(Ue.layout_symbol["text-optional"])}),Z2=new eo({"icon-opacity":new Ki(Ue.paint_symbol["icon-opacity"]),"icon-color":new Ki(Ue.paint_symbol["icon-color"]),"icon-halo-color":new Ki(Ue.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ki(Ue.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ki(Ue.paint_symbol["icon-halo-blur"]),"icon-translate":new Oi(Ue.paint_symbol["icon-translate"]),"icon-translate-anchor":new Oi(Ue.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ki(Ue.paint_symbol["text-opacity"]),"text-color":new Ki(Ue.paint_symbol["text-color"],{runtimeType:Nn,getOverride:function(C){return C.textColor},hasOverride:function(C){return!!C.textColor}}),"text-halo-color":new Ki(Ue.paint_symbol["text-halo-color"]),"text-halo-width":new Ki(Ue.paint_symbol["text-halo-width"]),"text-halo-blur":new Ki(Ue.paint_symbol["text-halo-blur"]),"text-translate":new Oi(Ue.paint_symbol["text-translate"]),"text-translate-anchor":new Oi(Ue.paint_symbol["text-translate-anchor"])}),Iv={paint:Z2,layout:j2},mh=function(E){this.type=E.property.overrides?E.property.overrides.runtimeType:yr,this.defaultValue=E};mh.prototype.evaluate=function(E){if(E.formattedSection){var N=this.defaultValue.property.overrides;if(N&&N.hasOverride(E.formattedSection))return N.getOverride(E.formattedSection)}return E.feature&&E.featureState?this.defaultValue.evaluate(E.feature,E.featureState):this.defaultValue.property.specification.default},mh.prototype.eachChild=function(E){if(!this.defaultValue.isConstant()){var N=this.defaultValue.value;E(N._styleExpression.expression)}},mh.prototype.outputDefined=function(){return!1},mh.prototype.serialize=function(){return null},Bt("FormatSectionOverride",mh,{omit:["defaultValue"]});var K2=function(C){function E(N){C.call(this,N,Iv)}return C&&(E.__proto__=C),E.prototype=Object.create(C&&C.prototype),E.prototype.constructor=E,E.prototype.recalculate=function(rt,vt){if(C.prototype.recalculate.call(this,rt,vt),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var xt=this.layout.get("text-writing-mode");if(xt){for(var At=[],Ot=0,re=xt;Ot<re.length;Ot+=1){var he=re[Ot];At.indexOf(he)<0&&At.push(he)}this.layout._values["text-writing-mode"]=At}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},E.prototype.getValueAndResolveTokens=function(rt,vt,xt,At){var Ot=this.layout.get(rt).evaluate(vt,{},xt,At),re=this._unevaluatedLayout._values[rt];return!re.isDataDriven()&&!Co(re.value)&&Ot?X2(vt.properties,Ot):Ot},E.prototype.createBucket=function(rt){return new Ja(rt)},E.prototype.queryRadius=function(){return 0},E.prototype.queryIntersectsFeature=function(){return!1},E.prototype._setPaintOverrides=function(){for(var rt=0,vt=Iv.paint.overridableProperties;rt<vt.length;rt+=1){var xt=vt[rt];if(!!E.hasPaintOverride(this.layout,xt)){var At=this.paint.get(xt),Ot=new mh(At),re=new _s(Ot,At.property.specification),he=null;At.value.kind==="constant"||At.value.kind==="source"?he=new Sc("source",re):he=new ks("composite",re,At.value.zoomStops,At.value._interpolationType),this.paint._values[xt]=new Ka(At.property,he,At.parameters)}}},E.prototype._handleOverridablePaintPropertyUpdate=function(rt,vt,xt){return!this.layout||vt.isDataDriven()||xt.isDataDriven()?!1:E.hasPaintOverride(this.layout,rt)},E.hasPaintOverride=function(rt,vt){var xt=rt.get("text-field"),At=Iv.paint.properties[vt],Ot=!1,re=function(Fe){for(var nr=0,qe=Fe;nr<qe.length;nr+=1){var mr=qe[nr];if(At.overrides&&At.overrides.hasOverride(mr)){Ot=!0;return}}};if(xt.value.kind==="constant"&&xt.value.value instanceof Xa)re(xt.value.value.sections);else if(xt.value.kind==="source"){var he=function(Fe){if(!Ot)if(Fe instanceof io&&Ba(Fe.value)===gi){var nr=Fe.value;re(nr.sections)}else Fe instanceof vs?re(Fe.sections):Fe.eachChild(he)},ge=xt.value;ge._styleExpression&&he(ge._styleExpression.expression)}return Ot},E}(zs),J2=new eo({"background-color":new Oi(Ue.paint_background["background-color"]),"background-pattern":new co(Ue.paint_background["background-pattern"]),"background-opacity":new Oi(Ue.paint_background["background-opacity"])}),Q2={paint:J2},q2=function(C){function E(N){C.call(this,N,Q2)}return C&&(E.__proto__=C),E.prototype=Object.create(C&&C.prototype),E.prototype.constructor=E,E}(zs),tw=new eo({"raster-opacity":new Oi(Ue.paint_raster["raster-opacity"]),"raster-hue-rotate":new Oi(Ue.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Oi(Ue.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Oi(Ue.paint_raster["raster-brightness-max"]),"raster-saturation":new Oi(Ue.paint_raster["raster-saturation"]),"raster-contrast":new Oi(Ue.paint_raster["raster-contrast"]),"raster-resampling":new Oi(Ue.paint_raster["raster-resampling"]),"raster-fade-duration":new Oi(Ue.paint_raster["raster-fade-duration"])}),ew={paint:tw},rw=function(C){function E(N){C.call(this,N,ew)}return C&&(E.__proto__=C),E.prototype=Object.create(C&&C.prototype),E.prototype.constructor=E,E}(zs);function nw(C){var E=[],N=C.id;return N===void 0&&E.push({message:"layers."+N+': missing required property "id"'}),C.render===void 0&&E.push({message:"layers."+N+': missing required method "render"'}),C.renderingMode&&C.renderingMode!=="2d"&&C.renderingMode!=="3d"&&E.push({message:"layers."+N+': property "renderingMode" must be either "2d" or "3d"'}),E}var iw=function(C){function E(N){C.call(this,N,{}),this.implementation=N}return C&&(E.__proto__=C),E.prototype=Object.create(C&&C.prototype),E.prototype.constructor=E,E.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},E.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},E.prototype.recalculate=function(){},E.prototype.updateTransitions=function(){},E.prototype.hasTransition=function(){},E.prototype.serialize=function(){},E.prototype.onAdd=function(rt){this.implementation.onAdd&&this.implementation.onAdd(rt,rt.painter.context.gl)},E.prototype.onRemove=function(rt){this.implementation.onRemove&&this.implementation.onRemove(rt,rt.painter.context.gl)},E}(zs),aw={circle:zb,heatmap:Bb,hillshade:Hb,fill:hx,"fill-extrusion":Px,line:Wx,symbol:K2,background:q2,raster:rw};function ow(C){return C.type==="custom"?new iw(C):new aw[C.type](C)}var rm=self.HTMLImageElement,nm=self.HTMLCanvasElement,im=self.HTMLVideoElement,am=self.ImageData,Qd=self.ImageBitmap,Cf=function(E,N,rt,vt){this.context=E,this.format=rt,this.texture=E.gl.createTexture(),this.update(N,vt)};Cf.prototype.update=function(E,N,rt){var vt=E.width,xt=E.height,At=(!this.size||this.size[0]!==vt||this.size[1]!==xt)&&!rt,Ot=this,re=Ot.context,he=re.gl;if(this.useMipmap=Boolean(N&&N.useMipmap),he.bindTexture(he.TEXTURE_2D,this.texture),re.pixelStoreUnpackFlipY.set(!1),re.pixelStoreUnpack.set(1),re.pixelStoreUnpackPremultiplyAlpha.set(this.format===he.RGBA&&(!N||N.premultiply!==!1)),At)this.size=[vt,xt],E instanceof rm||E instanceof nm||E instanceof im||E instanceof am||Qd&&E instanceof Qd?he.texImage2D(he.TEXTURE_2D,0,this.format,this.format,he.UNSIGNED_BYTE,E):he.texImage2D(he.TEXTURE_2D,0,this.format,vt,xt,0,this.format,he.UNSIGNED_BYTE,E.data);else{var ge=rt||{x:0,y:0},Fe=ge.x,nr=ge.y;E instanceof rm||E instanceof nm||E instanceof im||E instanceof am||Qd&&E instanceof Qd?he.texSubImage2D(he.TEXTURE_2D,0,Fe,nr,he.RGBA,he.UNSIGNED_BYTE,E):he.texSubImage2D(he.TEXTURE_2D,0,Fe,nr,vt,xt,he.RGBA,he.UNSIGNED_BYTE,E.data)}this.useMipmap&&this.isSizePowerOfTwo()&&he.generateMipmap(he.TEXTURE_2D)},Cf.prototype.bind=function(E,N,rt){var vt=this,xt=vt.context,At=xt.gl;At.bindTexture(At.TEXTURE_2D,this.texture),rt===At.LINEAR_MIPMAP_NEAREST&&!this.isSizePowerOfTwo()&&(rt=At.LINEAR),E!==this.filter&&(At.texParameteri(At.TEXTURE_2D,At.TEXTURE_MAG_FILTER,E),At.texParameteri(At.TEXTURE_2D,At.TEXTURE_MIN_FILTER,rt||E),this.filter=E),N!==this.wrap&&(At.texParameteri(At.TEXTURE_2D,At.TEXTURE_WRAP_S,N),At.texParameteri(At.TEXTURE_2D,At.TEXTURE_WRAP_T,N),this.wrap=N)},Cf.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1===0},Cf.prototype.destroy=function(){var E=this.context,N=E.gl;N.deleteTexture(this.texture),this.texture=null};var zv=function(E){var N=this;this._callback=E,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){N._triggered=!1,N._callback()})};zv.prototype.trigger=function(){var E=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){E._triggered=!1,E._callback()},0))},zv.prototype.remove=function(){delete this._channel,this._callback=function(){}};var yh=function(E,N,rt){this.target=E,this.parent=N,this.mapId=rt,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},S(["receive","process"],this),this.invoker=new zv(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=tt()?E:self};yh.prototype.send=function(E,N,rt,vt,xt){var At=this;xt===void 0&&(xt=!1);var Ot=Math.round(Math.random()*1e18).toString(36).substring(0,10);rt&&(this.callbacks[Ot]=rt);var re=J(this.globalScope)?void 0:[];return this.target.postMessage({id:Ot,type:E,hasCallback:!!rt,targetMapId:vt,mustQueue:xt,sourceMapId:this.mapId,data:De(N,re)},re),{cancel:function(){rt&&delete At.callbacks[Ot],At.target.postMessage({id:Ot,type:"<cancel>",targetMapId:vt,sourceMapId:At.mapId})}}},yh.prototype.receive=function(E){var N=E.data,rt=N.id;if(!!rt&&!(N.targetMapId&&this.mapId!==N.targetMapId))if(N.type==="<cancel>"){delete this.tasks[rt];var vt=this.cancelCallbacks[rt];delete this.cancelCallbacks[rt],vt&&vt()}else tt()||N.mustQueue?(this.tasks[rt]=N,this.taskQueue.push(rt),this.invoker.trigger()):this.processTask(rt,N)},yh.prototype.process=function(){if(!!this.taskQueue.length){var E=this.taskQueue.shift(),N=this.tasks[E];delete this.tasks[E],this.taskQueue.length&&this.invoker.trigger(),N&&this.processTask(E,N)}},yh.prototype.processTask=function(E,N){var rt=this;if(N.type==="<response>"){var vt=this.callbacks[E];delete this.callbacks[E],vt&&(N.error?vt(je(N.error)):vt(null,je(N.data)))}else{var xt=!1,At=J(this.globalScope)?void 0:[],Ot=N.hasCallback?function(nr,qe){xt=!0,delete rt.cancelCallbacks[E],rt.target.postMessage({id:E,type:"<response>",sourceMapId:rt.mapId,error:nr?De(nr):null,data:De(qe,At)},At)}:function(nr){xt=!0},re=null,he=je(N.data);if(this.parent[N.type])re=this.parent[N.type](N.sourceMapId,he,Ot);else if(this.parent.getWorkerSource){var ge=N.type.split("."),Fe=this.parent.getWorkerSource(N.sourceMapId,ge[0],he.source);re=Fe[ge[1]](he,Ot)}else Ot(new Error("Could not find function "+N.type));!xt&&re&&re.cancel&&(this.cancelCallbacks[E]=re.cancel)}},yh.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};function sw(C,E,N){E=Math.pow(2,N)-E-1;var rt=om(C*256,E*256,N),vt=om((C+1)*256,(E+1)*256,N);return rt[0]+","+rt[1]+","+vt[0]+","+vt[1]}function om(C,E,N){var rt=2*Math.PI*6378137/256/Math.pow(2,N),vt=C*rt-2*Math.PI*6378137/2,xt=E*rt-2*Math.PI*6378137/2;return[vt,xt]}var Qo=function(E,N){E&&(N?this.setSouthWest(E).setNorthEast(N):E.length===4?this.setSouthWest([E[0],E[1]]).setNorthEast([E[2],E[3]]):this.setSouthWest(E[0]).setNorthEast(E[1]))};Qo.prototype.setNorthEast=function(E){return this._ne=E instanceof _o?new _o(E.lng,E.lat):_o.convert(E),this},Qo.prototype.setSouthWest=function(E){return this._sw=E instanceof _o?new _o(E.lng,E.lat):_o.convert(E),this},Qo.prototype.extend=function(E){var N=this._sw,rt=this._ne,vt,xt;if(E instanceof _o)vt=E,xt=E;else if(E instanceof Qo){if(vt=E._sw,xt=E._ne,!vt||!xt)return this}else{if(Array.isArray(E))if(E.length===4||E.every(Array.isArray)){var At=E;return this.extend(Qo.convert(At))}else{var Ot=E;return this.extend(_o.convert(Ot))}return this}return!N&&!rt?(this._sw=new _o(vt.lng,vt.lat),this._ne=new _o(xt.lng,xt.lat)):(N.lng=Math.min(vt.lng,N.lng),N.lat=Math.min(vt.lat,N.lat),rt.lng=Math.max(xt.lng,rt.lng),rt.lat=Math.max(xt.lat,rt.lat)),this},Qo.prototype.getCenter=function(){return new _o((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Qo.prototype.getSouthWest=function(){return this._sw},Qo.prototype.getNorthEast=function(){return this._ne},Qo.prototype.getNorthWest=function(){return new _o(this.getWest(),this.getNorth())},Qo.prototype.getSouthEast=function(){return new _o(this.getEast(),this.getSouth())},Qo.prototype.getWest=function(){return this._sw.lng},Qo.prototype.getSouth=function(){return this._sw.lat},Qo.prototype.getEast=function(){return this._ne.lng},Qo.prototype.getNorth=function(){return this._ne.lat},Qo.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Qo.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Qo.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Qo.prototype.contains=function(E){var N=_o.convert(E),rt=N.lng,vt=N.lat,xt=this._sw.lat<=vt&&vt<=this._ne.lat,At=this._sw.lng<=rt&&rt<=this._ne.lng;return this._sw.lng>this._ne.lng&&(At=this._sw.lng>=rt&&rt>=this._ne.lng),xt&&At},Qo.convert=function(E){return!E||E instanceof Qo?E:new Qo(E)};var sm=63710088e-1,_o=function(E,N){if(isNaN(E)||isNaN(N))throw new Error("Invalid LngLat object: ("+E+", "+N+")");if(this.lng=+E,this.lat=+N,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};_o.prototype.wrap=function(){return new _o(_(this.lng,-180,180),this.lat)},_o.prototype.toArray=function(){return[this.lng,this.lat]},_o.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},_o.prototype.distanceTo=function(E){var N=Math.PI/180,rt=this.lat*N,vt=E.lat*N,xt=Math.sin(rt)*Math.sin(vt)+Math.cos(rt)*Math.cos(vt)*Math.cos((E.lng-this.lng)*N),At=sm*Math.acos(Math.min(xt,1));return At},_o.prototype.toBounds=function(E){E===void 0&&(E=0);var N=40075017,rt=360*E/N,vt=rt/Math.cos(Math.PI/180*this.lat);return new Qo(new _o(this.lng-vt,this.lat-rt),new _o(this.lng+vt,this.lat+rt))},_o.convert=function(E){if(E instanceof _o)return E;if(Array.isArray(E)&&(E.length===2||E.length===3))return new _o(Number(E[0]),Number(E[1]));if(!Array.isArray(E)&&typeof E=="object"&&E!==null)return new _o(Number("lng"in E?E.lng:E.lon),Number(E.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var lm=2*Math.PI*sm;function cm(C){return lm*Math.cos(C*Math.PI/180)}function um(C){return(180+C)/360}function fm(C){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+C*Math.PI/360)))/360}function hm(C,E){return C/cm(E)}function lw(C){return C*360-180}function Rv(C){var E=180-C*360;return 360/Math.PI*Math.atan(Math.exp(E*Math.PI/180))-90}function cw(C,E){return C*cm(Rv(E))}function uw(C){return 1/Math.cos(C*Math.PI/180)}var Ef=function(E,N,rt){rt===void 0&&(rt=0),this.x=+E,this.y=+N,this.z=+rt};Ef.fromLngLat=function(E,N){N===void 0&&(N=0);var rt=_o.convert(E);return new Ef(um(rt.lng),fm(rt.lat),hm(N,rt.lat))},Ef.prototype.toLngLat=function(){return new _o(lw(this.x),Rv(this.y))},Ef.prototype.toAltitude=function(){return cw(this.z,this.y)},Ef.prototype.meterInMercatorCoordinateUnits=function(){return 1/lm*uw(Rv(this.y))};var Lf=function(E,N,rt){this.z=E,this.x=N,this.y=rt,this.key=ud(0,E,E,N,rt)};Lf.prototype.equals=function(E){return this.z===E.z&&this.x===E.x&&this.y===E.y},Lf.prototype.url=function(E,N){var rt=sw(this.x,this.y,this.z),vt=fw(this.z,this.x,this.y);return E[(this.x+this.y)%E.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(N==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",vt).replace("{bbox-epsg-3857}",rt)},Lf.prototype.getTilePoint=function(E){var N=Math.pow(2,this.z);return new d((E.x*N-this.x)*Hi,(E.y*N-this.y)*Hi)},Lf.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var dm=function(E,N){this.wrap=E,this.canonical=N,this.key=ud(E,N.z,N.z,N.x,N.y)},qo=function(E,N,rt,vt,xt){this.overscaledZ=E,this.wrap=N,this.canonical=new Lf(rt,+vt,+xt),this.key=ud(N,E,rt,vt,xt)};qo.prototype.equals=function(E){return this.overscaledZ===E.overscaledZ&&this.wrap===E.wrap&&this.canonical.equals(E.canonical)},qo.prototype.scaledTo=function(E){var N=this.canonical.z-E;return E>this.canonical.z?new qo(E,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new qo(E,this.wrap,E,this.canonical.x>>N,this.canonical.y>>N)},qo.prototype.calculateScaledKey=function(E,N){var rt=this.canonical.z-E;return E>this.canonical.z?ud(this.wrap*+N,E,this.canonical.z,this.canonical.x,this.canonical.y):ud(this.wrap*+N,E,E,this.canonical.x>>rt,this.canonical.y>>rt)},qo.prototype.isChildOf=function(E){if(E.wrap!==this.wrap)return!1;var N=this.canonical.z-E.canonical.z;return E.overscaledZ===0||E.overscaledZ<this.overscaledZ&&E.canonical.x===this.canonical.x>>N&&E.canonical.y===this.canonical.y>>N},qo.prototype.children=function(E){if(this.overscaledZ>=E)return[new qo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var N=this.canonical.z+1,rt=this.canonical.x*2,vt=this.canonical.y*2;return[new qo(N,this.wrap,N,rt,vt),new qo(N,this.wrap,N,rt+1,vt),new qo(N,this.wrap,N,rt,vt+1),new qo(N,this.wrap,N,rt+1,vt+1)]},qo.prototype.isLessThan=function(E){return this.wrap<E.wrap?!0:this.wrap>E.wrap?!1:this.overscaledZ<E.overscaledZ?!0:this.overscaledZ>E.overscaledZ?!1:this.canonical.x<E.canonical.x?!0:this.canonical.x>E.canonical.x?!1:this.canonical.y<E.canonical.y},qo.prototype.wrapped=function(){return new qo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},qo.prototype.unwrapTo=function(E){return new qo(this.overscaledZ,E,this.canonical.z,this.canonical.x,this.canonical.y)},qo.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},qo.prototype.toUnwrapped=function(){return new dm(this.wrap,this.canonical)},qo.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},qo.prototype.getTilePoint=function(E){return this.canonical.getTilePoint(new Ef(E.x-this.wrap,E.y))};function ud(C,E,N,rt,vt){C*=2,C<0&&(C=C*-1-1);var xt=1<<N;return(xt*xt*C+xt*vt+rt).toString(36)+N.toString(36)+E.toString(36)}function fw(C,E,N){for(var rt="",vt,xt=C;xt>0;xt--)vt=1<<xt-1,rt+=(E&vt?1:0)+(N&vt?2:0);return rt}Bt("CanonicalTileID",Lf),Bt("OverscaledTileID",qo,{omit:["posMatrix"]});var Gu=function(E,N,rt){if(this.uid=E,N.height!==N.width)throw new RangeError("DEM tiles must be square");if(rt&&rt!=="mapbox"&&rt!=="terrarium")return U('"'+rt+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=N.height;var vt=this.dim=N.height-2;this.data=new Uint32Array(N.data.buffer),this.encoding=rt||"mapbox";for(var xt=0;xt<vt;xt++)this.data[this._idx(-1,xt)]=this.data[this._idx(0,xt)],this.data[this._idx(vt,xt)]=this.data[this._idx(vt-1,xt)],this.data[this._idx(xt,-1)]=this.data[this._idx(xt,0)],this.data[this._idx(xt,vt)]=this.data[this._idx(xt,vt-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(vt,-1)]=this.data[this._idx(vt-1,0)],this.data[this._idx(-1,vt)]=this.data[this._idx(0,vt-1)],this.data[this._idx(vt,vt)]=this.data[this._idx(vt-1,vt-1)]};Gu.prototype.get=function(E,N){var rt=new Uint8Array(this.data.buffer),vt=this._idx(E,N)*4,xt=this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox;return xt(rt[vt],rt[vt+1],rt[vt+2])},Gu.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Gu.prototype._idx=function(E,N){if(E<-1||E>=this.dim+1||N<-1||N>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(N+1)*this.stride+(E+1)},Gu.prototype._unpackMapbox=function(E,N,rt){return(E*256*256+N*256+rt)/10-1e4},Gu.prototype._unpackTerrarium=function(E,N,rt){return E*256+N+rt/256-32768},Gu.prototype.getPixels=function(){return new xl({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Gu.prototype.backfillBorder=function(E,N,rt){if(this.dim!==E.dim)throw new Error("dem dimension mismatch");var vt=N*this.dim,xt=N*this.dim+this.dim,At=rt*this.dim,Ot=rt*this.dim+this.dim;switch(N){case-1:vt=xt-1;break;case 1:xt=vt+1;break}switch(rt){case-1:At=Ot-1;break;case 1:Ot=At+1;break}for(var re=-N*this.dim,he=-rt*this.dim,ge=At;ge<Ot;ge++)for(var Fe=vt;Fe<xt;Fe++)this.data[this._idx(Fe,ge)]=E.data[this._idx(Fe+re,ge+he)]},Bt("DEMData",Gu);function hw(C,E){var N={};if(!E)return N;for(var rt=function(){var At=xt[vt],Ot=At.layerIds.map(function(Fe){return E.getLayer(Fe)}).filter(Boolean);if(Ot.length!==0){At.layers=Ot,At.stateDependentLayerIds&&(At.stateDependentLayers=At.stateDependentLayerIds.map(function(Fe){return Ot.filter(function(nr){return nr.id===Fe})[0]}));for(var re=0,he=Ot;re<he.length;re+=1){var ge=he[re];N[ge.id]=At}}},vt=0,xt=C;vt<xt.length;vt+=1)rt();return N}var qd=function(E){this._stringToNumber={},this._numberToString=[];for(var N=0;N<E.length;N++){var rt=E[N];this._stringToNumber[rt]=N,this._numberToString[N]=rt}};qd.prototype.encode=function(E){return this._stringToNumber[E]},qd.prototype.decode=function(E){return this._numberToString[E]};var tp=function(E,N,rt,vt,xt){this.type="Feature",this._vectorTileFeature=E,E._z=N,E._x=rt,E._y=vt,this.properties=E.properties,this.id=xt},Fv={geometry:{configurable:!0}};Fv.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Fv.geometry.set=function(C){this._geometry=C},tp.prototype.toJSON=function(){var E={geometry:this.geometry};for(var N in this)N==="_geometry"||N==="_vectorTileFeature"||(E[N]=this[N]);return E},Object.defineProperties(tp.prototype,Fv);var bh=function(){this.state={},this.stateChanges={},this.deletedStates={}};bh.prototype.updateState=function(E,N,rt){var vt=String(N);if(this.stateChanges[E]=this.stateChanges[E]||{},this.stateChanges[E][vt]=this.stateChanges[E][vt]||{},A(this.stateChanges[E][vt],rt),this.deletedStates[E]===null){this.deletedStates[E]={};for(var xt in this.state[E])xt!==vt&&(this.deletedStates[E][xt]=null)}else{var At=this.deletedStates[E]&&this.deletedStates[E][vt]===null;if(At){this.deletedStates[E][vt]={};for(var Ot in this.state[E][vt])rt[Ot]||(this.deletedStates[E][vt][Ot]=null)}else for(var re in rt){var he=this.deletedStates[E]&&this.deletedStates[E][vt]&&this.deletedStates[E][vt][re]===null;he&&delete this.deletedStates[E][vt][re]}}},bh.prototype.removeFeatureState=function(E,N,rt){var vt=this.deletedStates[E]===null;if(!vt){var xt=String(N);if(this.deletedStates[E]=this.deletedStates[E]||{},rt&&N!==void 0)this.deletedStates[E][xt]!==null&&(this.deletedStates[E][xt]=this.deletedStates[E][xt]||{},this.deletedStates[E][xt][rt]=null);else if(N!==void 0){var At=this.stateChanges[E]&&this.stateChanges[E][xt];if(At){this.deletedStates[E][xt]={};for(rt in this.stateChanges[E][xt])this.deletedStates[E][xt][rt]=null}else this.deletedStates[E][xt]=null}else this.deletedStates[E]=null}},bh.prototype.getState=function(E,N){var rt=String(N),vt=this.state[E]||{},xt=this.stateChanges[E]||{},At=A({},vt[rt],xt[rt]);if(this.deletedStates[E]===null)return{};if(this.deletedStates[E]){var Ot=this.deletedStates[E][N];if(Ot===null)return{};for(var re in Ot)delete At[re]}return At},bh.prototype.initializeTileState=function(E,N){E.setFeatureState(this.state,N)},bh.prototype.coalesceChanges=function(E,N){var rt={};for(var vt in this.stateChanges){this.state[vt]=this.state[vt]||{};var xt={};for(var At in this.stateChanges[vt])this.state[vt][At]||(this.state[vt][At]={}),A(this.state[vt][At],this.stateChanges[vt][At]),xt[At]=this.state[vt][At];rt[vt]=xt}for(var Ot in this.deletedStates){this.state[Ot]=this.state[Ot]||{};var re={};if(this.deletedStates[Ot]===null)for(var he in this.state[Ot])re[he]={},this.state[Ot][he]={};else for(var ge in this.deletedStates[Ot]){var Fe=this.deletedStates[Ot][ge]===null;if(Fe)this.state[Ot][ge]={};else for(var nr=0,qe=Object.keys(this.deletedStates[Ot][ge]);nr<qe.length;nr+=1){var mr=qe[nr];delete this.state[Ot][ge][mr]}re[ge]=this.state[Ot][ge]}rt[Ot]=rt[Ot]||{},A(rt[Ot],re)}if(this.stateChanges={},this.deletedStates={},Object.keys(rt).length!==0)for(var Br in E){var sn=E[Br];sn.setFeatureState(rt,N)}};var Yu=function(E,N){this.tileID=E,this.x=E.canonical.x,this.y=E.canonical.y,this.z=E.canonical.z,this.grid=new Ho(Hi,16,0),this.grid3D=new Ho(Hi,16,0),this.featureIndexArray=new Zh,this.promoteId=N};Yu.prototype.insert=function(E,N,rt,vt,xt,At){var Ot=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(rt,vt,xt);for(var re=At?this.grid3D:this.grid,he=0;he<N.length;he++){for(var ge=N[he],Fe=[1/0,1/0,-1/0,-1/0],nr=0;nr<ge.length;nr++){var qe=ge[nr];Fe[0]=Math.min(Fe[0],qe.x),Fe[1]=Math.min(Fe[1],qe.y),Fe[2]=Math.max(Fe[2],qe.x),Fe[3]=Math.max(Fe[3],qe.y)}Fe[0]<Hi&&Fe[1]<Hi&&Fe[2]>=0&&Fe[3]>=0&&re.insert(Ot,Fe[0],Fe[1],Fe[2],Fe[3])}},Yu.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new sh.VectorTile(new Gd(this.rawTileData)).layers,this.sourceLayerCoder=new qd(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Yu.prototype.query=function(E,N,rt,vt){var xt=this;this.loadVTLayers();for(var At=E.params||{},Ot=Hi/E.tileSize/E.scale,re=_u(At.filter),he=E.queryGeometry,ge=E.queryPadding*Ot,Fe=vm(he),nr=this.grid.query(Fe.minX-ge,Fe.minY-ge,Fe.maxX+ge,Fe.maxY+ge),qe=vm(E.cameraQueryGeometry),mr=this.grid3D.query(qe.minX-ge,qe.minY-ge,qe.maxX+ge,qe.maxY+ge,function(Wn,li,ai,Fi){return Cu(E.cameraQueryGeometry,Wn-ge,li-ge,ai+ge,Fi+ge)}),Br=0,sn=mr;Br<sn.length;Br+=1){var tn=sn[Br];nr.push(tn)}nr.sort(dw);for(var En={},xn,Cn=function(Wn){var li=nr[Wn];if(li!==xn){xn=li;var ai=xt.featureIndexArray.get(li),Fi=null;xt.loadMatchingFeature(En,ai.bucketIndex,ai.sourceLayerIndex,ai.featureIndex,re,At.layers,At.availableImages,N,rt,vt,function(Ti,Mi,ia){return Fi||(Fi=$a(Ti)),Mi.queryIntersectsFeature(he,Ti,ia,Fi,xt.z,E.transform,Ot,E.pixelPosMatrix)})}},Fn=0;Fn<nr.length;Fn++)Cn(Fn);return En},Yu.prototype.loadMatchingFeature=function(E,N,rt,vt,xt,At,Ot,re,he,ge,Fe){var nr=this.bucketLayerIDs[N];if(!(At&&!P(At,nr))){var qe=this.sourceLayerCoder.decode(rt),mr=this.vtLayers[qe],Br=mr.feature(vt);if(!!xt.filter(new ua(this.tileID.overscaledZ),Br))for(var sn=this.getId(Br,qe),tn=0;tn<nr.length;tn++){var En=nr[tn];if(!(At&&At.indexOf(En)<0)){var xn=re[En];if(!!xn){var Cn={};sn!==void 0&&ge&&(Cn=ge.getState(xn.sourceLayer||"_geojsonTileLayer",sn));var Fn=he[En];Fn.paint=pm(Fn.paint,xn.paint,Br,Cn,Ot),Fn.layout=pm(Fn.layout,xn.layout,Br,Cn,Ot);var Wn=!Fe||Fe(Br,xn,Cn);if(!!Wn){var li=new tp(Br,this.z,this.x,this.y,sn);li.layer=Fn;var ai=E[En];ai===void 0&&(ai=E[En]=[]),ai.push({featureIndex:vt,feature:li,intersectionZ:Wn})}}}}}},Yu.prototype.lookupSymbolFeatures=function(E,N,rt,vt,xt,At,Ot,re){var he={};this.loadVTLayers();for(var ge=_u(xt),Fe=0,nr=E;Fe<nr.length;Fe+=1){var qe=nr[Fe];this.loadMatchingFeature(he,rt,vt,qe,ge,At,Ot,re,N)}return he},Yu.prototype.hasLayer=function(E){for(var N=0,rt=this.bucketLayerIDs;N<rt.length;N+=1)for(var vt=rt[N],xt=0,At=vt;xt<At.length;xt+=1){var Ot=At[xt];if(E===Ot)return!0}return!1},Yu.prototype.getId=function(E,N){var rt=E.id;if(this.promoteId){var vt=typeof this.promoteId=="string"?this.promoteId:this.promoteId[N];rt=E.properties[vt],typeof rt=="boolean"&&(rt=Number(rt))}return rt},Bt("FeatureIndex",Yu,{omit:["rawTileData","sourceLayerCoder"]});function pm(C,E,N,rt,vt){return L(C,function(xt,At){var Ot=E instanceof Wa?E.get(At):null;return Ot&&Ot.evaluate?Ot.evaluate(N,rt,vt):Ot})}function vm(C){for(var E=1/0,N=1/0,rt=-1/0,vt=-1/0,xt=0,At=C;xt<At.length;xt+=1){var Ot=At[xt];E=Math.min(E,Ot.x),N=Math.min(N,Ot.y),rt=Math.max(rt,Ot.x),vt=Math.max(vt,Ot.y)}return{minX:E,minY:N,maxX:rt,maxY:vt}}function dw(C,E){return E-C}var pw=3e4,fs=function(E,N){this.tileID=E,this.uid=w(),this.uses=0,this.tileSize=N,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};fs.prototype.registerFadeDuration=function(E){var N=E+this.timeAdded;N<K.now()||this.fadeEndTime&&N<this.fadeEndTime||(this.fadeEndTime=N)},fs.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},fs.prototype.loadVectorData=function(E,N,rt){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",!E){this.collisionBoxArray=new Mu;return}E.featureIndex&&(this.latestFeatureIndex=E.featureIndex,E.rawTileData?(this.latestRawTileData=E.rawTileData,this.latestFeatureIndex.rawTileData=E.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=E.collisionBoxArray,this.buckets=hw(E.buckets,N.style),this.hasSymbolBuckets=!1;for(var vt in this.buckets){var xt=this.buckets[vt];if(xt instanceof Ja)if(this.hasSymbolBuckets=!0,rt)xt.justReloaded=!0;else break}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var At in this.buckets){var Ot=this.buckets[At];if(Ot instanceof Ja&&Ot.hasRTLText){this.hasRTLText=!0,La();break}}this.queryPadding=0;for(var re in this.buckets){var he=this.buckets[re];this.queryPadding=Math.max(this.queryPadding,N.style.getLayer(re).queryRadius(he))}E.imageAtlas&&(this.imageAtlas=E.imageAtlas),E.glyphAtlasImage&&(this.glyphAtlasImage=E.glyphAtlasImage)},fs.prototype.unloadVectorData=function(){for(var E in this.buckets)this.buckets[E].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},fs.prototype.getBucket=function(E){return this.buckets[E.id]},fs.prototype.upload=function(E){for(var N in this.buckets){var rt=this.buckets[N];rt.uploadPending()&&rt.upload(E)}var vt=E.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Cf(E,this.imageAtlas.image,vt.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Cf(E,this.glyphAtlasImage,vt.ALPHA),this.glyphAtlasImage=null)},fs.prototype.prepare=function(E){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(E,this.imageAtlasTexture)},fs.prototype.queryRenderedFeatures=function(E,N,rt,vt,xt,At,Ot,re,he,ge){return!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData?{}:this.latestFeatureIndex.query({queryGeometry:vt,cameraQueryGeometry:xt,scale:At,tileSize:this.tileSize,pixelPosMatrix:ge,transform:re,params:Ot,queryPadding:this.queryPadding*he},E,N,rt)},fs.prototype.querySourceFeatures=function(E,N){var rt=this.latestFeatureIndex;if(!(!rt||!rt.rawTileData)){var vt=rt.loadVTLayers(),xt=N?N.sourceLayer:"",At=vt._geojsonTileLayer||vt[xt];if(!!At)for(var Ot=_u(N&&N.filter),re=this.tileID.canonical,he=re.z,ge=re.x,Fe=re.y,nr={z:he,x:ge,y:Fe},qe=0;qe<At.length;qe++){var mr=At.feature(qe);if(Ot.filter(new ua(this.tileID.overscaledZ),mr)){var Br=rt.getId(mr,xt),sn=new tp(mr,he,ge,Fe,Br);sn.tile=nr,E.push(sn)}}}},fs.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},fs.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},fs.prototype.setExpiryData=function(E){var N=this.expirationTime;if(E.cacheControl){var rt=Z(E.cacheControl);rt["max-age"]&&(this.expirationTime=Date.now()+rt["max-age"]*1e3)}else E.expires&&(this.expirationTime=new Date(E.expires).getTime());if(this.expirationTime){var vt=Date.now(),xt=!1;if(this.expirationTime>vt)xt=!1;else if(!N)xt=!0;else if(this.expirationTime<N)xt=!0;else{var At=this.expirationTime-N;At?this.expirationTime=vt+Math.max(At,pw):xt=!0}xt?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},fs.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},fs.prototype.setFeatureState=function(E,N){if(!(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(E).length===0)){var rt=this.latestFeatureIndex.loadVTLayers();for(var vt in this.buckets)if(!!N.style.hasLayer(vt)){var xt=this.buckets[vt],At=xt.layers[0].sourceLayer||"_geojsonTileLayer",Ot=rt[At],re=E[At];if(!(!Ot||!re||Object.keys(re).length===0)){xt.update(re,Ot,this.imageAtlas&&this.imageAtlas.patternPositions||{});var he=N&&N.style&&N.style.getLayer(vt);he&&(this.queryPadding=Math.max(this.queryPadding,he.queryRadius(xt)))}}}},fs.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},fs.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<K.now()},fs.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},fs.prototype.setHoldDuration=function(E){this.symbolFadeHoldUntil=K.now()+E},fs.prototype.setDependencies=function(E,N){for(var rt={},vt=0,xt=N;vt<xt.length;vt+=1){var At=xt[vt];rt[At]=!0}this.dependencies[E]=rt},fs.prototype.hasDependency=function(E,N){for(var rt=0,vt=E;rt<vt.length;rt+=1){var xt=vt[rt],At=this.dependencies[xt];if(At)for(var Ot=0,re=N;Ot<re.length;Ot+=1){var he=re[Ot];if(At[he])return!0}}return!1};var vw=["type","source","source-layer","minzoom","maxzoom","filter","layout"],lf=self.performance,gm=function(E){this._marks={start:[E.url,"start"].join("#"),end:[E.url,"end"].join("#"),measure:E.url.toString()},lf.mark(this._marks.start)};gm.prototype.finish=function(){lf.mark(this._marks.end);var E=lf.getEntriesByName(this._marks.measure);return E.length===0&&(lf.measure(this._marks.measure,this._marks.start,this._marks.end),E=lf.getEntriesByName(this._marks.measure),lf.clearMarks(this._marks.start),lf.clearMarks(this._marks.end),lf.clearMeasures(this._marks.measure)),E},t.Actor=yh,t.AlphaImage=Mf,t.CanonicalTileID=Lf,t.CollisionBoxArray=Mu,t.Color=ga,t.DEMData=Gu,t.DataConstantProperty=Oi,t.DictionaryCoder=qd,t.EXTENT=Hi,t.ErrorEvent=kr,t.EvaluationParameters=ua,t.Event=Er,t.Evented=Mr,t.FeatureIndex=Yu,t.FillBucket=tu,t.FillExtrusionBucket=eu,t.ImageAtlas=od,t.ImagePosition=Wd,t.LineBucket=wl,t.LngLat=_o,t.LngLatBounds=Qo,t.MercatorCoordinate=Ef,t.ONE_EM=Ss,t.OverscaledTileID=qo,t.Point=d,t.Point$1=d,t.Properties=eo,t.Protobuf=Gd,t.RGBAImage=xl,t.RequestManager=zt,t.RequestPerformance=gm,t.ResourceType=le,t.SegmentVector=Y,t.SourceFeatureState=bh,t.StructArrayLayout1ui2=ef,t.StructArrayLayout2f1f2i16=Jc,t.StructArrayLayout2i4=xf,t.StructArrayLayout3ui6=Qc,t.StructArrayLayout4i8=ku,t.SymbolBucket=Ja,t.Texture=Cf,t.Tile=fs,t.Transitionable=So,t.Uniform1f=Vr,t.Uniform1i=$r,t.Uniform2f=Jr,t.Uniform3f=pn,t.Uniform4f=Ln,t.UniformColor=Bn,t.UniformMatrix4f=ei,t.UnwrappedTileID=dm,t.ValidationError=pr,t.WritingMode=ql,t.ZoomHistory=tr,t.add=ih,t.addDynamicAttributes=Pv,t.asyncAll=u,t.bezier=g,t.bindAll=S,t.browser=K,t.cacheEntryPossiblyAdded=er,t.clamp=v,t.clearTileCache=hr,t.clipLine=Kg,t.clone=Fd,t.clone$1=z,t.clone$2=fv,t.collisionCircleLayout=Zx,t.config=nt,t.create=eh,t.create$1=Af,t.create$2=Tf,t.createCommonjsModule=a,t.createExpression=uc,t.createLayout=Go,t.createStyleLayer=ow,t.cross=Ab,t.deepEqual=o,t.dot=Tb,t.dot$1=Lb,t.ease=b,t.emitValidationErrors=Ao,t.endsWith=M,t.enforceCacheSizeLimit=We,t.evaluateSizeForFeature=Gg,t.evaluateSizeForZoom=Yg,t.evaluateVariableOffset=qg,t.evented=xa,t.extend=A,t.featureFilter=_u,t.filterObject=R,t.fromRotation=th,t.getAnchorAlignment=Cv,t.getAnchorJustification=Dv,t.getArrayBuffer=ne,t.getImage=ye,t.getJSON=te,t.getRTLTextPluginStatus=wo,t.getReferrer=Ze,t.getVideo=Ae,t.identity=rh,t.invert=nf,t.isChar=rr,t.isMapboxURL=Rt,t.keysDifference=c,t.makeRequest=Ht,t.mapObject=L,t.mercatorXfromLng=um,t.mercatorYfromLat=fm,t.mercatorZfromAltitude=hm,t.mul=uv,t.multiply=af,t.mvt=sh,t.normalize=Jh,t.number=mo,t.offscreenCanvasSupported=Qr,t.ortho=cv,t.parseGlyphPBF=_2,t.pbf=Gd,t.performSymbolLayout=U2,t.perspective=Kh,t.pick=k,t.plugin=Zi,t.polygonIntersectsPolygon=la,t.postMapLoadEvent=Ee,t.postTurnstileEvent=Ye,t.potpack=Rg,t.refProperties=vw,t.register=Bt,t.registerForPluginStateChange=Ua,t.rotate=Ys,t.rotateX=bl,t.rotateZ=nh,t.scale=yl,t.scale$1=Eb,t.scale$2=dv,t.setCacheLimits=Wr,t.setRTLTextPlugin=hi,t.sphericalToCartesian=$,t.sqrLen=Ib,t.styleSpec=Ue,t.sub=Mb,t.symbolSize=D2,t.transformMat3=Sb,t.transformMat4=Od,t.translate=No,t.triggerPluginCompletionEvent=Ii,t.uniqueId=w,t.validateCustomStyleLayer=nw,t.validateLight=ka,t.validateStyle=Do,t.values=T,t.vectorTile=sh,t.version=i,t.warnOnce=U,t.webpSupported=it,t.window=self,t.wrap=_}),x(["./shared"],function(t){function a(oe){var Ht=typeof oe;if(Ht==="number"||Ht==="boolean"||Ht==="string"||oe===void 0||oe===null)return JSON.stringify(oe);if(Array.isArray(oe)){for(var te="[",ne=0,_e=oe;ne<_e.length;ne+=1){var Pe=_e[ne];te+=a(Pe)+","}return te+"]"}for(var Et=Object.keys(oe).sort(),Mt="{",se=0;se<Et.length;se++)Mt+=JSON.stringify(Et[se])+":"+a(oe[Et[se]])+",";return Mt+"}"}function i(oe){for(var Ht="",te=0,ne=t.refProperties;te<ne.length;te+=1){var _e=ne[te];Ht+="/"+a(oe[_e])}return Ht}function r(oe,Ht){for(var te={},ne=0;ne<oe.length;ne++){var _e=Ht&&Ht[oe[ne].id]||i(oe[ne]);Ht&&(Ht[oe[ne].id]=_e);var Pe=te[_e];Pe||(Pe=te[_e]=[]),Pe.push(oe[ne])}var Et=[];for(var Mt in te)Et.push(te[Mt]);return Et}var n=function(Ht){this.keyCache={},Ht&&this.replace(Ht)};n.prototype.replace=function(Ht){this._layerConfigs={},this._layers={},this.update(Ht,[])},n.prototype.update=function(Ht,te){for(var ne=this,_e=0,Pe=Ht;_e<Pe.length;_e+=1){var Et=Pe[_e];this._layerConfigs[Et.id]=Et;var Mt=this._layers[Et.id]=t.createStyleLayer(Et);Mt._featureFilter=t.featureFilter(Mt.filter),this.keyCache[Et.id]&&delete this.keyCache[Et.id]}for(var se=0,ce=te;se<ce.length;se+=1){var de=ce[se];delete this.keyCache[de],delete this._layerConfigs[de],delete this._layers[de]}this.familiesBySource={};for(var Se=r(t.values(this._layerConfigs),this.keyCache),ye=0,Ae=Se;ye<Ae.length;ye+=1){var Ge=Ae[ye],sr=Ge.map(function(xr){return ne._layers[xr.id]}),Er=sr[0];if(Er.visibility!=="none"){var kr=Er.source||"",Mr=this.familiesBySource[kr];Mr||(Mr=this.familiesBySource[kr]={});var Gr=Er.sourceLayer||"_geojsonTileLayer",ar=Mr[Gr];ar||(ar=Mr[Gr]=[]),ar.push(sr)}}};var d=1,s=function(Ht){var te={},ne=[];for(var _e in Ht){var Pe=Ht[_e],Et=te[_e]={};for(var Mt in Pe){var se=Pe[+Mt];if(!(!se||se.bitmap.width===0||se.bitmap.height===0)){var ce={x:0,y:0,w:se.bitmap.width+2*d,h:se.bitmap.height+2*d};ne.push(ce),Et[Mt]={rect:ce,metrics:se.metrics}}}}var de=t.potpack(ne),Se=de.w,ye=de.h,Ae=new t.AlphaImage({width:Se||1,height:ye||1});for(var Ge in Ht){var sr=Ht[Ge];for(var Er in sr){var kr=sr[+Er];if(!(!kr||kr.bitmap.width===0||kr.bitmap.height===0)){var Mr=te[Ge][Er].rect;t.AlphaImage.copy(kr.bitmap,Ae,{x:0,y:0},{x:Mr.x+d,y:Mr.y+d},kr.bitmap)}}}this.image=Ae,this.positions=te};t.register("GlyphAtlas",s);var o=function(Ht){this.tileID=new t.OverscaledTileID(Ht.tileID.overscaledZ,Ht.tileID.wrap,Ht.tileID.canonical.z,Ht.tileID.canonical.x,Ht.tileID.canonical.y),this.uid=Ht.uid,this.zoom=Ht.zoom,this.pixelRatio=Ht.pixelRatio,this.tileSize=Ht.tileSize,this.source=Ht.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Ht.showCollisionBoxes,this.collectResourceTiming=!!Ht.collectResourceTiming,this.returnDependencies=!!Ht.returnDependencies,this.promoteId=Ht.promoteId};o.prototype.parse=function(Ht,te,ne,_e,Pe){var Et=this;this.status="parsing",this.data=Ht,this.collisionBoxArray=new t.CollisionBoxArray;var Mt=new t.DictionaryCoder(Object.keys(Ht.layers).sort()),se=new t.FeatureIndex(this.tileID,this.promoteId);se.bucketLayerIDs=[];var ce={},de={featureIndex:se,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:ne},Se=te.familiesBySource[this.source];for(var ye in Se){var Ae=Ht.layers[ye];if(!!Ae){Ae.version===1&&t.warnOnce('Vector tile source "'+this.source+'" layer "'+ye+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Ge=Mt.encode(ye),sr=[],Er=0;Er<Ae.length;Er++){var kr=Ae.feature(Er),Mr=se.getId(kr,ye);sr.push({feature:kr,id:Mr,index:Er,sourceLayerIndex:Ge})}for(var Gr=0,ar=Se[ye];Gr<ar.length;Gr+=1){var xr=ar[Gr],Ir=xr[0];if(!(Ir.minzoom&&this.zoom<Math.floor(Ir.minzoom))&&!(Ir.maxzoom&&this.zoom>=Ir.maxzoom)&&Ir.visibility!=="none"){y(xr,this.zoom,ne);var Hr=ce[Ir.id]=Ir.createBucket({index:se.bucketLayerIDs.length,layers:xr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ge,sourceID:this.source});Hr.populate(sr,de,this.tileID.canonical),se.bucketLayerIDs.push(xr.map(function(Ar){return Ar.id}))}}}}var Cr,ae,Le,$e,or=t.mapObject(de.glyphDependencies,function(Ar){return Object.keys(Ar).map(Number)});Object.keys(or).length?_e.send("getGlyphs",{uid:this.uid,stacks:or},function(Ar,Xr){Cr||(Cr=Ar,ae=Xr,Fr.call(Et))}):ae={};var Dr=Object.keys(de.iconDependencies);Dr.length?_e.send("getImages",{icons:Dr,source:this.source,tileID:this.tileID,type:"icons"},function(Ar,Xr){Cr||(Cr=Ar,Le=Xr,Fr.call(Et))}):Le={};var Nr=Object.keys(de.patternDependencies);Nr.length?_e.send("getImages",{icons:Nr,source:this.source,tileID:this.tileID,type:"patterns"},function(Ar,Xr){Cr||(Cr=Ar,$e=Xr,Fr.call(Et))}):$e={},Fr.call(this);function Fr(){if(Cr)return Pe(Cr);if(ae&&Le&&$e){var Ar=new s(ae),Xr=new t.ImageAtlas(Le,$e);for(var Tn in ce){var un=ce[Tn];un instanceof t.SymbolBucket?(y(un.layers,this.zoom,ne),t.performSymbolLayout(un,ae,Ar.positions,Le,Xr.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):un.hasPattern&&(un instanceof t.LineBucket||un instanceof t.FillBucket||un instanceof t.FillExtrusionBucket)&&(y(un.layers,this.zoom,ne),un.addFeatures(de,this.tileID.canonical,Xr.patternPositions))}this.status="done",Pe(null,{buckets:t.values(ce).filter(function(Un){return!Un.isEmpty()}),featureIndex:se,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Ar.image,imageAtlas:Xr,glyphMap:this.returnDependencies?ae:null,iconMap:this.returnDependencies?Le:null,glyphPositions:this.returnDependencies?Ar.positions:null})}}};function y(oe,Ht,te){for(var ne=new t.EvaluationParameters(Ht),_e=0,Pe=oe;_e<Pe.length;_e+=1){var Et=Pe[_e];Et.recalculate(ne,te)}}function g(oe,Ht){var te=t.getArrayBuffer(oe.request,function(ne,_e,Pe,Et){ne?Ht(ne):_e&&Ht(null,{vectorTile:new t.vectorTile.VectorTile(new t.pbf(_e)),rawData:_e,cacheControl:Pe,expires:Et})});return function(){te.cancel(),Ht()}}var b=function(Ht,te,ne,_e){this.actor=Ht,this.layerIndex=te,this.availableImages=ne,this.loadVectorData=_e||g,this.loading={},this.loaded={}};b.prototype.loadTile=function(Ht,te){var ne=this,_e=Ht.uid;this.loading||(this.loading={});var Pe=Ht&&Ht.request&&Ht.request.collectResourceTiming?new t.RequestPerformance(Ht.request):!1,Et=this.loading[_e]=new o(Ht);Et.abort=this.loadVectorData(Ht,function(Mt,se){if(delete ne.loading[_e],Mt||!se)return Et.status="done",ne.loaded[_e]=Et,te(Mt);var ce=se.rawData,de={};se.expires&&(de.expires=se.expires),se.cacheControl&&(de.cacheControl=se.cacheControl);var Se={};if(Pe){var ye=Pe.finish();ye&&(Se.resourceTiming=JSON.parse(JSON.stringify(ye)))}Et.vectorTile=se.vectorTile,Et.parse(se.vectorTile,ne.layerIndex,ne.availableImages,ne.actor,function(Ae,Ge){if(Ae||!Ge)return te(Ae);te(null,t.extend({rawTileData:ce.slice(0)},Ge,de,Se))}),ne.loaded=ne.loaded||{},ne.loaded[_e]=Et})},b.prototype.reloadTile=function(Ht,te){var ne=this,_e=this.loaded,Pe=Ht.uid,Et=this;if(_e&&_e[Pe]){var Mt=_e[Pe];Mt.showCollisionBoxes=Ht.showCollisionBoxes;var se=function(ce,de){var Se=Mt.reloadCallback;Se&&(delete Mt.reloadCallback,Mt.parse(Mt.vectorTile,Et.layerIndex,ne.availableImages,Et.actor,Se)),te(ce,de)};Mt.status==="parsing"?Mt.reloadCallback=se:Mt.status==="done"&&(Mt.vectorTile?Mt.parse(Mt.vectorTile,this.layerIndex,this.availableImages,this.actor,se):se())}},b.prototype.abortTile=function(Ht,te){var ne=this.loading,_e=Ht.uid;ne&&ne[_e]&&ne[_e].abort&&(ne[_e].abort(),delete ne[_e]),te()},b.prototype.removeTile=function(Ht,te){var ne=this.loaded,_e=Ht.uid;ne&&ne[_e]&&delete ne[_e],te()};var v=t.window.ImageBitmap,_=function(){this.loaded={}};_.prototype.loadTile=function(Ht,te){var ne=Ht.uid,_e=Ht.encoding,Pe=Ht.rawImageData,Et=v&&Pe instanceof v?this.getImageData(Pe):Pe,Mt=new t.DEMData(ne,Et,_e);this.loaded=this.loaded||{},this.loaded[ne]=Mt,te(null,Mt)},_.prototype.getImageData=function(Ht){(!this.offscreenCanvas||!this.offscreenCanvasContext)&&(this.offscreenCanvas=new OffscreenCanvas(Ht.width,Ht.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=Ht.width,this.offscreenCanvas.height=Ht.height,this.offscreenCanvasContext.drawImage(Ht,0,0,Ht.width,Ht.height);var te=this.offscreenCanvasContext.getImageData(-1,-1,Ht.width+2,Ht.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new t.RGBAImage({width:te.width,height:te.height},te.data)},_.prototype.removeTile=function(Ht){var te=this.loaded,ne=Ht.uid;te&&te[ne]&&delete te[ne]};var u=T;function T(oe,Ht){var te=oe&&oe.type,ne;if(te==="FeatureCollection")for(ne=0;ne<oe.features.length;ne++)T(oe.features[ne],Ht);else if(te==="GeometryCollection")for(ne=0;ne<oe.geometries.length;ne++)T(oe.geometries[ne],Ht);else if(te==="Feature")T(oe.geometry,Ht);else if(te==="Polygon")c(oe.coordinates,Ht);else if(te==="MultiPolygon")for(ne=0;ne<oe.coordinates.length;ne++)c(oe.coordinates[ne],Ht);return oe}function c(oe,Ht){if(oe.length!==0){A(oe[0],Ht);for(var te=1;te<oe.length;te++)A(oe[te],!Ht)}}function A(oe,Ht){for(var te=0,ne=0,_e=oe.length,Pe=_e-1;ne<_e;Pe=ne++)te+=(oe[ne][0]-oe[Pe][0])*(oe[Pe][1]+oe[ne][1]);te>=0!=!!Ht&&oe.reverse()}var k=t.vectorTile.VectorTileFeature.prototype.toGeoJSON,p=function(Ht){this._feature=Ht,this.extent=t.EXTENT,this.type=Ht.type,this.properties=Ht.tags,"id"in Ht&&!isNaN(Ht.id)&&(this.id=parseInt(Ht.id,10))};p.prototype.loadGeometry=function(){if(this._feature.type===1){for(var Ht=[],te=0,ne=this._feature.geometry;te<ne.length;te+=1){var _e=ne[te];Ht.push([new t.Point$1(_e[0],_e[1])])}return Ht}else{for(var Pe=[],Et=0,Mt=this._feature.geometry;Et<Mt.length;Et+=1){for(var se=Mt[Et],ce=[],de=0,Se=se;de<Se.length;de+=1){var ye=Se[de];ce.push(new t.Point$1(ye[0],ye[1]))}Pe.push(ce)}return Pe}},p.prototype.toGeoJSON=function(Ht,te,ne){return k.call(this,Ht,te,ne)};var w=function(Ht){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=t.EXTENT,this.length=Ht.length,this._features=Ht};w.prototype.feature=function(Ht){return new p(this._features[Ht])};var h=t.vectorTile.VectorTileFeature,D=S;function S(oe,Ht){this.options=Ht||{},this.features=oe,this.length=oe.length}S.prototype.feature=function(oe){return new M(this.features[oe],this.options.extent)};function M(oe,Ht){this.id=typeof oe.id=="number"?oe.id:void 0,this.type=oe.type,this.rawGeometry=oe.type===1?[oe.geometry]:oe.geometry,this.properties=oe.tags,this.extent=Ht||4096}M.prototype.loadGeometry=function(){var oe=this.rawGeometry;this.geometry=[];for(var Ht=0;Ht<oe.length;Ht++){for(var te=oe[Ht],ne=[],_e=0;_e<te.length;_e++)ne.push(new t.Point$1(te[_e][0],te[_e][1]));this.geometry.push(ne)}return this.geometry},M.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var oe=this.geometry,Ht=1/0,te=-1/0,ne=1/0,_e=-1/0,Pe=0;Pe<oe.length;Pe++)for(var Et=oe[Pe],Mt=0;Mt<Et.length;Mt++){var se=Et[Mt];Ht=Math.min(Ht,se.x),te=Math.max(te,se.x),ne=Math.min(ne,se.y),_e=Math.max(_e,se.y)}return[Ht,ne,te,_e]},M.prototype.toGeoJSON=h.prototype.toGeoJSON;var L=I,R=I,z=U,P=D;function I(oe){var Ht=new t.pbf;return O(oe,Ht),Ht.finish()}function U(oe,Ht){Ht=Ht||{};var te={};for(var ne in oe)te[ne]=new D(oe[ne].features,Ht),te[ne].name=ne,te[ne].version=Ht.version,te[ne].extent=Ht.extent;return I({layers:te})}function O(oe,Ht){for(var te in oe.layers)Ht.writeMessage(3,G,oe.layers[te])}function G(oe,Ht){Ht.writeVarintField(15,oe.version||1),Ht.writeStringField(1,oe.name||""),Ht.writeVarintField(5,oe.extent||4096);var te,ne={keys:[],values:[],keycache:{},valuecache:{}};for(te=0;te<oe.length;te++)ne.feature=oe.feature(te),Ht.writeMessage(2,$,ne);var _e=ne.keys;for(te=0;te<_e.length;te++)Ht.writeStringField(3,_e[te]);var Pe=ne.values;for(te=0;te<Pe.length;te++)Ht.writeMessage(4,st,Pe[te])}function $(oe,Ht){var te=oe.feature;te.id!==void 0&&Ht.writeVarintField(1,te.id),Ht.writeMessage(2,tt,oe),Ht.writeVarintField(3,te.type),Ht.writeMessage(4,J,te)}function tt(oe,Ht){var te=oe.feature,ne=oe.keys,_e=oe.values,Pe=oe.keycache,Et=oe.valuecache;for(var Mt in te.properties){var se=Pe[Mt];typeof se>"u"&&(ne.push(Mt),se=ne.length-1,Pe[Mt]=se),Ht.writeVarint(se);var ce=te.properties[Mt],de=typeof ce;de!=="string"&&de!=="boolean"&&de!=="number"&&(ce=JSON.stringify(ce));var Se=de+":"+ce,ye=Et[Se];typeof ye>"u"&&(_e.push(ce),ye=_e.length-1,Et[Se]=ye),Ht.writeVarint(ye)}}function Z(oe,Ht){return(Ht<<3)+(oe&7)}function X(oe){return oe<<1^oe>>31}function J(oe,Ht){for(var te=oe.loadGeometry(),ne=oe.type,_e=0,Pe=0,Et=te.length,Mt=0;Mt<Et;Mt++){var se=te[Mt],ce=1;ne===1&&(ce=se.length),Ht.writeVarint(Z(1,ce));for(var de=ne===3?se.length-1:se.length,Se=0;Se<de;Se++){Se===1&&ne!==1&&Ht.writeVarint(Z(2,de-1));var ye=se[Se].x-_e,Ae=se[Se].y-Pe;Ht.writeVarint(X(ye)),Ht.writeVarint(X(Ae)),_e+=ye,Pe+=Ae}ne===3&&Ht.writeVarint(Z(7,1))}}function st(oe,Ht){var te=typeof oe;te==="string"?Ht.writeStringField(1,oe):te==="boolean"?Ht.writeBooleanField(7,oe):te==="number"&&(oe%1!==0?Ht.writeDoubleField(3,oe):oe<0?Ht.writeSVarintField(6,oe):Ht.writeVarintField(5,oe))}L.fromVectorTileJs=R,L.fromGeojsonVt=z,L.GeoJSONWrapper=P;function at(oe,Ht,te,ne,_e,Pe){if(!(_e-ne<=te)){var Et=ne+_e>>1;lt(oe,Ht,Et,ne,_e,Pe%2),at(oe,Ht,te,ne,Et-1,Pe+1),at(oe,Ht,te,Et+1,_e,Pe+1)}}function lt(oe,Ht,te,ne,_e,Pe){for(;_e>ne;){if(_e-ne>600){var Et=_e-ne+1,Mt=te-ne+1,se=Math.log(Et),ce=.5*Math.exp(2*se/3),de=.5*Math.sqrt(se*ce*(Et-ce)/Et)*(Mt-Et/2<0?-1:1),Se=Math.max(ne,Math.floor(te-Mt*ce/Et+de)),ye=Math.min(_e,Math.floor(te+(Et-Mt)*ce/Et+de));lt(oe,Ht,te,Se,ye,Pe)}var Ae=Ht[2*te+Pe],Ge=ne,sr=_e;for(F(oe,Ht,ne,te),Ht[2*_e+Pe]>Ae&&F(oe,Ht,ne,_e);Ge<sr;){for(F(oe,Ht,Ge,sr),Ge++,sr--;Ht[2*Ge+Pe]<Ae;)Ge++;for(;Ht[2*sr+Pe]>Ae;)sr--}Ht[2*ne+Pe]===Ae?F(oe,Ht,ne,sr):(sr++,F(oe,Ht,sr,_e)),sr<=te&&(ne=sr+1),te<=sr&&(_e=sr-1)}}function F(oe,Ht,te,ne){H(oe,te,ne),H(Ht,2*te,2*ne),H(Ht,2*te+1,2*ne+1)}function H(oe,Ht,te){var ne=oe[Ht];oe[Ht]=oe[te],oe[te]=ne}function et(oe,Ht,te,ne,_e,Pe,Et){for(var Mt=[0,oe.length-1,0],se=[],ce,de;Mt.length;){var Se=Mt.pop(),ye=Mt.pop(),Ae=Mt.pop();if(ye-Ae<=Et){for(var Ge=Ae;Ge<=ye;Ge++)ce=Ht[2*Ge],de=Ht[2*Ge+1],ce>=te&&ce<=_e&&de>=ne&&de<=Pe&&se.push(oe[Ge]);continue}var sr=Math.floor((Ae+ye)/2);ce=Ht[2*sr],de=Ht[2*sr+1],ce>=te&&ce<=_e&&de>=ne&&de<=Pe&&se.push(oe[sr]);var Er=(Se+1)%2;(Se===0?te<=ce:ne<=de)&&(Mt.push(Ae),Mt.push(sr-1),Mt.push(Er)),(Se===0?_e>=ce:Pe>=de)&&(Mt.push(sr+1),Mt.push(ye),Mt.push(Er))}return se}function q(oe,Ht,te,ne,_e,Pe){for(var Et=[0,oe.length-1,0],Mt=[],se=_e*_e;Et.length;){var ce=Et.pop(),de=Et.pop(),Se=Et.pop();if(de-Se<=Pe){for(var ye=Se;ye<=de;ye++)W(Ht[2*ye],Ht[2*ye+1],te,ne)<=se&&Mt.push(oe[ye]);continue}var Ae=Math.floor((Se+de)/2),Ge=Ht[2*Ae],sr=Ht[2*Ae+1];W(Ge,sr,te,ne)<=se&&Mt.push(oe[Ae]);var Er=(ce+1)%2;(ce===0?te-_e<=Ge:ne-_e<=sr)&&(Et.push(Se),Et.push(Ae-1),Et.push(Er)),(ce===0?te+_e>=Ge:ne+_e>=sr)&&(Et.push(Ae+1),Et.push(de),Et.push(Er))}return Mt}function W(oe,Ht,te,ne){var _e=oe-te,Pe=Ht-ne;return _e*_e+Pe*Pe}var K=function(oe){return oe[0]},nt=function(oe){return oe[1]},it=function(Ht,te,ne,_e,Pe){te===void 0&&(te=K),ne===void 0&&(ne=nt),_e===void 0&&(_e=64),Pe===void 0&&(Pe=Float64Array),this.nodeSize=_e,this.points=Ht;for(var Et=Ht.length<65536?Uint16Array:Uint32Array,Mt=this.ids=new Et(Ht.length),se=this.coords=new Pe(Ht.length*2),ce=0;ce<Ht.length;ce++)Mt[ce]=ce,se[2*ce]=te(Ht[ce]),se[2*ce+1]=ne(Ht[ce]);at(Mt,se,_e,0,Mt.length-1,0)};it.prototype.range=function(Ht,te,ne,_e){return et(this.ids,this.coords,Ht,te,ne,_e,this.nodeSize)},it.prototype.within=function(Ht,te,ne){return q(this.ids,this.coords,Ht,te,ne,this.nodeSize)};var ot={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(oe){return oe}},ct=function(Ht){this.options=Gt(Object.create(ot),Ht),this.trees=new Array(this.options.maxZoom+1)};ct.prototype.load=function(Ht){var te=this.options,ne=te.log,_e=te.minZoom,Pe=te.maxZoom,Et=te.nodeSize;ne&&console.time("total time");var Mt="prepare "+Ht.length+" points";ne&&console.time(Mt),this.points=Ht;for(var se=[],ce=0;ce<Ht.length;ce++)!Ht[ce].geometry||se.push(ut(Ht[ce],ce));this.trees[Pe+1]=new it(se,wt,It,Et,Float32Array),ne&&console.timeEnd(Mt);for(var de=Pe;de>=_e;de--){var Se=+Date.now();se=this._cluster(se,de),this.trees[de]=new it(se,wt,It,Et,Float32Array),ne&&console.log("z%d: %d clusters in %dms",de,se.length,+Date.now()-Se)}return ne&&console.timeEnd("total time"),this},ct.prototype.getClusters=function(Ht,te){var ne=((Ht[0]+180)%360+360)%360-180,_e=Math.max(-90,Math.min(90,Ht[1])),Pe=Ht[2]===180?180:((Ht[2]+180)%360+360)%360-180,Et=Math.max(-90,Math.min(90,Ht[3]));if(Ht[2]-Ht[0]>=360)ne=-180,Pe=180;else if(ne>Pe){var Mt=this.getClusters([ne,_e,180,Et],te),se=this.getClusters([-180,_e,Pe,Et],te);return Mt.concat(se)}for(var ce=this.trees[this._limitZoom(te)],de=ce.range(Tt(ne),kt(Et),Tt(Pe),kt(_e)),Se=[],ye=0,Ae=de;ye<Ae.length;ye+=1){var Ge=Ae[ye],sr=ce.points[Ge];Se.push(sr.numPoints?pt(sr):this.points[sr.index])}return Se},ct.prototype.getChildren=function(Ht){var te=this._getOriginId(Ht),ne=this._getOriginZoom(Ht),_e="No cluster with the specified id.",Pe=this.trees[ne];if(!Pe)throw new Error(_e);var Et=Pe.points[te];if(!Et)throw new Error(_e);for(var Mt=this.options.radius/(this.options.extent*Math.pow(2,ne-1)),se=Pe.within(Et.x,Et.y,Mt),ce=[],de=0,Se=se;de<Se.length;de+=1){var ye=Se[de],Ae=Pe.points[ye];Ae.parentId===Ht&&ce.push(Ae.numPoints?pt(Ae):this.points[Ae.index])}if(ce.length===0)throw new Error(_e);return ce},ct.prototype.getLeaves=function(Ht,te,ne){te=te||10,ne=ne||0;var _e=[];return this._appendLeaves(_e,Ht,te,ne,0),_e},ct.prototype.getTile=function(Ht,te,ne){var _e=this.trees[this._limitZoom(Ht)],Pe=Math.pow(2,Ht),Et=this.options,Mt=Et.extent,se=Et.radius,ce=se/Mt,de=(ne-ce)/Pe,Se=(ne+1+ce)/Pe,ye={features:[]};return this._addTileFeatures(_e.range((te-ce)/Pe,de,(te+1+ce)/Pe,Se),_e.points,te,ne,Pe,ye),te===0&&this._addTileFeatures(_e.range(1-ce/Pe,de,1,Se),_e.points,Pe,ne,Pe,ye),te===Pe-1&&this._addTileFeatures(_e.range(0,de,ce/Pe,Se),_e.points,-1,ne,Pe,ye),ye.features.length?ye:null},ct.prototype.getClusterExpansionZoom=function(Ht){for(var te=this._getOriginZoom(Ht)-1;te<=this.options.maxZoom;){var ne=this.getChildren(Ht);if(te++,ne.length!==1)break;Ht=ne[0].properties.cluster_id}return te},ct.prototype._appendLeaves=function(Ht,te,ne,_e,Pe){for(var Et=this.getChildren(te),Mt=0,se=Et;Mt<se.length;Mt+=1){var ce=se[Mt],de=ce.properties;if(de&&de.cluster?Pe+de.point_count<=_e?Pe+=de.point_count:Pe=this._appendLeaves(Ht,de.cluster_id,ne,_e,Pe):Pe<_e?Pe++:Ht.push(ce),Ht.length===ne)break}return Pe},ct.prototype._addTileFeatures=function(Ht,te,ne,_e,Pe,Et){for(var Mt=0,se=Ht;Mt<se.length;Mt+=1){var ce=se[Mt],de=te[ce],Se=de.numPoints,ye={type:1,geometry:[[Math.round(this.options.extent*(de.x*Pe-ne)),Math.round(this.options.extent*(de.y*Pe-_e))]],tags:Se?yt(de):this.points[de.index].properties},Ae=void 0;Se?Ae=de.id:this.options.generateId?Ae=de.index:this.points[de.index].id&&(Ae=this.points[de.index].id),Ae!==void 0&&(ye.id=Ae),Et.features.push(ye)}},ct.prototype._limitZoom=function(Ht){return Math.max(this.options.minZoom,Math.min(Ht,this.options.maxZoom+1))},ct.prototype._cluster=function(Ht,te){for(var ne=[],_e=this.options,Pe=_e.radius,Et=_e.extent,Mt=_e.reduce,se=Pe/(Et*Math.pow(2,te)),ce=0;ce<Ht.length;ce++){var de=Ht[ce];if(!(de.zoom<=te)){de.zoom=te;for(var Se=this.trees[te+1],ye=Se.within(de.x,de.y,se),Ae=de.numPoints||1,Ge=de.x*Ae,sr=de.y*Ae,Er=Mt&&Ae>1?this._map(de,!0):null,kr=(ce<<5)+(te+1)+this.points.length,Mr=0,Gr=ye;Mr<Gr.length;Mr+=1){var ar=Gr[Mr],xr=Se.points[ar];if(!(xr.zoom<=te)){xr.zoom=te;var Ir=xr.numPoints||1;Ge+=xr.x*Ir,sr+=xr.y*Ir,Ae+=Ir,xr.parentId=kr,Mt&&(Er||(Er=this._map(de,!0)),Mt(Er,this._map(xr)))}}Ae===1?ne.push(de):(de.parentId=kr,ne.push(bt(Ge/Ae,sr/Ae,kr,Ae,Er)))}}return ne},ct.prototype._getOriginId=function(Ht){return Ht-this.points.length>>5},ct.prototype._getOriginZoom=function(Ht){return(Ht-this.points.length)%32},ct.prototype._map=function(Ht,te){if(Ht.numPoints)return te?Gt({},Ht.properties):Ht.properties;var ne=this.points[Ht.index].properties,_e=this.options.map(ne);return te&&_e===ne?Gt({},_e):_e};function bt(oe,Ht,te,ne,_e){return{x:oe,y:Ht,zoom:1/0,id:te,parentId:-1,numPoints:ne,properties:_e}}function ut(oe,Ht){var te=oe.geometry.coordinates,ne=te[0],_e=te[1];return{x:Tt(ne),y:kt(_e),zoom:1/0,index:Ht,parentId:-1}}function pt(oe){return{type:"Feature",id:oe.id,properties:yt(oe),geometry:{type:"Point",coordinates:[zt(oe.x),Rt(oe.y)]}}}function yt(oe){var Ht=oe.numPoints,te=Ht>=1e4?Math.round(Ht/1e3)+"k":Ht>=1e3?Math.round(Ht/100)/10+"k":Ht;return Gt(Gt({},oe.properties),{cluster:!0,cluster_id:oe.id,point_count:Ht,point_count_abbreviated:te})}function Tt(oe){return oe/360+.5}function kt(oe){var Ht=Math.sin(oe*Math.PI/180),te=.5-.25*Math.log((1+Ht)/(1-Ht))/Math.PI;return te<0?0:te>1?1:te}function zt(oe){return(oe-.5)*360}function Rt(oe){var Ht=(180-oe*360)*Math.PI/180;return 360*Math.atan(Math.exp(Ht))/Math.PI-90}function Gt(oe,Ht){for(var te in Ht)oe[te]=Ht[te];return oe}function wt(oe){return oe.x}function It(oe){return oe.y}function $t(oe,Ht,te,ne){for(var _e=ne,Pe=te-Ht>>1,Et=te-Ht,Mt,se=oe[Ht],ce=oe[Ht+1],de=oe[te],Se=oe[te+1],ye=Ht+3;ye<te;ye+=3){var Ae=Qt(oe[ye],oe[ye+1],se,ce,de,Se);if(Ae>_e)Mt=ye,_e=Ae;else if(Ae===_e){var Ge=Math.abs(ye-Pe);Ge<Et&&(Mt=ye,Et=Ge)}}_e>ne&&(Mt-Ht>3&&$t(oe,Ht,Mt,ne),oe[Mt+2]=_e,te-Mt>3&&$t(oe,Mt,te,ne))}function Qt(oe,Ht,te,ne,_e,Pe){var Et=_e-te,Mt=Pe-ne;if(Et!==0||Mt!==0){var se=((oe-te)*Et+(Ht-ne)*Mt)/(Et*Et+Mt*Mt);se>1?(te=_e,ne=Pe):se>0&&(te+=Et*se,ne+=Mt*se)}return Et=oe-te,Mt=Ht-ne,Et*Et+Mt*Mt}function Nt(oe,Ht,te,ne){var _e={id:typeof oe>"u"?null:oe,type:Ht,geometry:te,tags:ne,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return Pt(_e),_e}function Pt(oe){var Ht=oe.geometry,te=oe.type;if(te==="Point"||te==="MultiPoint"||te==="LineString")Yt(oe,Ht);else if(te==="Polygon"||te==="MultiLineString")for(var ne=0;ne<Ht.length;ne++)Yt(oe,Ht[ne]);else if(te==="MultiPolygon")for(ne=0;ne<Ht.length;ne++)for(var _e=0;_e<Ht[ne].length;_e++)Yt(oe,Ht[ne][_e])}function Yt(oe,Ht){for(var te=0;te<Ht.length;te+=3)oe.minX=Math.min(oe.minX,Ht[te]),oe.minY=Math.min(oe.minY,Ht[te+1]),oe.maxX=Math.max(oe.maxX,Ht[te]),oe.maxY=Math.max(oe.maxY,Ht[te+1])}function ve(oe,Ht){var te=[];if(oe.type==="FeatureCollection")for(var ne=0;ne<oe.features.length;ne++)Re(te,oe.features[ne],Ht,ne);else oe.type==="Feature"?Re(te,oe,Ht):Re(te,{geometry:oe},Ht);return te}function Re(oe,Ht,te,ne){if(!!Ht.geometry){var _e=Ht.geometry.coordinates,Pe=Ht.geometry.type,Et=Math.pow(te.tolerance/((1<<te.maxZoom)*te.extent),2),Mt=[],se=Ht.id;if(te.promoteId?se=Ht.properties[te.promoteId]:te.generateId&&(se=ne||0),Pe==="Point")ir(_e,Mt);else if(Pe==="MultiPoint")for(var ce=0;ce<_e.length;ce++)ir(_e[ce],Mt);else if(Pe==="LineString")Ie(_e,Mt,Et,!1);else if(Pe==="MultiLineString")if(te.lineMetrics){for(ce=0;ce<_e.length;ce++)Mt=[],Ie(_e[ce],Mt,Et,!1),oe.push(Nt(se,"LineString",Mt,Ht.properties));return}else Be(_e,Mt,Et,!1);else if(Pe==="Polygon")Be(_e,Mt,Et,!0);else if(Pe==="MultiPolygon")for(ce=0;ce<_e.length;ce++){var de=[];Be(_e[ce],de,Et,!0),Mt.push(de)}else if(Pe==="GeometryCollection"){for(ce=0;ce<Ht.geometry.geometries.length;ce++)Re(oe,{id:se,geometry:Ht.geometry.geometries[ce],properties:Ht.properties},te,ne);return}else throw new Error("Input data is not a valid GeoJSON object.");oe.push(Nt(se,Pe,Mt,Ht.properties))}}function ir(oe,Ht){Ht.push(Ye(oe[0])),Ht.push(ze(oe[1])),Ht.push(0)}function Ie(oe,Ht,te,ne){for(var _e,Pe,Et=0,Mt=0;Mt<oe.length;Mt++){var se=Ye(oe[Mt][0]),ce=ze(oe[Mt][1]);Ht.push(se),Ht.push(ce),Ht.push(0),Mt>0&&(ne?Et+=(_e*ce-se*Pe)/2:Et+=Math.sqrt(Math.pow(se-_e,2)+Math.pow(ce-Pe,2))),_e=se,Pe=ce}var de=Ht.length-3;Ht[2]=1,$t(Ht,0,de,te),Ht[de+2]=1,Ht.size=Math.abs(Et),Ht.start=0,Ht.end=Ht.size}function Be(oe,Ht,te,ne){for(var _e=0;_e<oe.length;_e++){var Pe=[];Ie(oe[_e],Pe,te,ne),Ht.push(Pe)}}function Ye(oe){return oe/360+.5}function ze(oe){var Ht=Math.sin(oe*Math.PI/180),te=.5-.25*Math.log((1+Ht)/(1-Ht))/Math.PI;return te<0?0:te>1?1:te}function Ee(oe,Ht,te,ne,_e,Pe,Et,Mt){if(te/=Ht,ne/=Ht,Pe>=te&&Et<ne)return oe;if(Et<te||Pe>=ne)return null;for(var se=[],ce=0;ce<oe.length;ce++){var de=oe[ce],Se=de.geometry,ye=de.type,Ae=_e===0?de.minX:de.minY,Ge=_e===0?de.maxX:de.maxY;if(Ae>=te&&Ge<ne){se.push(de);continue}else if(Ge<te||Ae>=ne)continue;var sr=[];if(ye==="Point"||ye==="MultiPoint")Wt(Se,sr,te,ne,_e);else if(ye==="LineString")ee(Se,sr,te,ne,_e,!1,Mt.lineMetrics);else if(ye==="MultiLineString")St(Se,sr,te,ne,_e,!1);else if(ye==="Polygon")St(Se,sr,te,ne,_e,!0);else if(ye==="MultiPolygon")for(var Er=0;Er<Se.length;Er++){var kr=[];St(Se[Er],kr,te,ne,_e,!0),kr.length&&sr.push(kr)}if(sr.length){if(Mt.lineMetrics&&ye==="LineString"){for(Er=0;Er<sr.length;Er++)se.push(Nt(de.id,ye,sr[Er],de.tags));continue}(ye==="LineString"||ye==="MultiLineString")&&(sr.length===1?(ye="LineString",sr=sr[0]):ye="MultiLineString"),(ye==="Point"||ye==="MultiPoint")&&(ye=sr.length===3?"Point":"MultiPoint"),se.push(Nt(de.id,ye,sr,de.tags))}}return se.length?se:null}function Wt(oe,Ht,te,ne,_e){for(var Pe=0;Pe<oe.length;Pe+=3){var Et=oe[Pe+_e];Et>=te&&Et<=ne&&(Ht.push(oe[Pe]),Ht.push(oe[Pe+1]),Ht.push(oe[Pe+2]))}}function ee(oe,Ht,te,ne,_e,Pe,Et){for(var Mt=Xt(oe),se=_e===0?Zt:qt,ce=oe.start,de,Se,ye=0;ye<oe.length-3;ye+=3){var Ae=oe[ye],Ge=oe[ye+1],sr=oe[ye+2],Er=oe[ye+3],kr=oe[ye+4],Mr=_e===0?Ae:Ge,Gr=_e===0?Er:kr,ar=!1;Et&&(de=Math.sqrt(Math.pow(Ae-Er,2)+Math.pow(Ge-kr,2))),Mr<te?Gr>te&&(Se=se(Mt,Ae,Ge,Er,kr,te),Et&&(Mt.start=ce+de*Se)):Mr>ne?Gr<ne&&(Se=se(Mt,Ae,Ge,Er,kr,ne),Et&&(Mt.start=ce+de*Se)):Vt(Mt,Ae,Ge,sr),Gr<te&&Mr>=te&&(Se=se(Mt,Ae,Ge,Er,kr,te),ar=!0),Gr>ne&&Mr<=ne&&(Se=se(Mt,Ae,Ge,Er,kr,ne),ar=!0),!Pe&&ar&&(Et&&(Mt.end=ce+de*Se),Ht.push(Mt),Mt=Xt(oe)),Et&&(ce+=de)}var xr=oe.length-3;Ae=oe[xr],Ge=oe[xr+1],sr=oe[xr+2],Mr=_e===0?Ae:Ge,Mr>=te&&Mr<=ne&&Vt(Mt,Ae,Ge,sr),xr=Mt.length-3,Pe&&xr>=3&&(Mt[xr]!==Mt[0]||Mt[xr+1]!==Mt[1])&&Vt(Mt,Mt[0],Mt[1],Mt[2]),Mt.length&&Ht.push(Mt)}function Xt(oe){var Ht=[];return Ht.size=oe.size,Ht.start=oe.start,Ht.end=oe.end,Ht}function St(oe,Ht,te,ne,_e,Pe){for(var Et=0;Et<oe.length;Et++)ee(oe[Et],Ht,te,ne,_e,Pe,!1)}function Vt(oe,Ht,te,ne){oe.push(Ht),oe.push(te),oe.push(ne)}function Zt(oe,Ht,te,ne,_e,Pe){var Et=(Pe-Ht)/(ne-Ht);return oe.push(Pe),oe.push(te+(_e-te)*Et),oe.push(1),Et}function qt(oe,Ht,te,ne,_e,Pe){var Et=(Pe-te)/(_e-te);return oe.push(Ht+(ne-Ht)*Et),oe.push(Pe),oe.push(1),Et}function Te(oe,Ht){var te=Ht.buffer/Ht.extent,ne=oe,_e=Ee(oe,1,-1-te,te,0,-1,2,Ht),Pe=Ee(oe,1,1-te,2+te,0,-1,2,Ht);return(_e||Pe)&&(ne=Ee(oe,1,-te,1+te,0,-1,2,Ht)||[],_e&&(ne=me(_e,1).concat(ne)),Pe&&(ne=ne.concat(me(Pe,-1)))),ne}function me(oe,Ht){for(var te=[],ne=0;ne<oe.length;ne++){var _e=oe[ne],Pe=_e.type,Et;if(Pe==="Point"||Pe==="MultiPoint"||Pe==="LineString")Et=Ne(_e.geometry,Ht);else if(Pe==="MultiLineString"||Pe==="Polygon"){Et=[];for(var Mt=0;Mt<_e.geometry.length;Mt++)Et.push(Ne(_e.geometry[Mt],Ht))}else if(Pe==="MultiPolygon")for(Et=[],Mt=0;Mt<_e.geometry.length;Mt++){for(var se=[],ce=0;ce<_e.geometry[Mt].length;ce++)se.push(Ne(_e.geometry[Mt][ce],Ht));Et.push(se)}te.push(Nt(_e.id,Pe,Et,_e.tags))}return te}function Ne(oe,Ht){var te=[];te.size=oe.size,oe.start!==void 0&&(te.start=oe.start,te.end=oe.end);for(var ne=0;ne<oe.length;ne+=3)te.push(oe[ne]+Ht,oe[ne+1],oe[ne+2]);return te}function Ke(oe,Ht){if(oe.transformed)return oe;var te=1<<oe.z,ne=oe.x,_e=oe.y,Pe,Et,Mt;for(Pe=0;Pe<oe.features.length;Pe++){var se=oe.features[Pe],ce=se.geometry,de=se.type;if(se.geometry=[],de===1)for(Et=0;Et<ce.length;Et+=2)se.geometry.push(He(ce[Et],ce[Et+1],Ht,te,ne,_e));else for(Et=0;Et<ce.length;Et++){var Se=[];for(Mt=0;Mt<ce[Et].length;Mt+=2)Se.push(He(ce[Et][Mt],ce[Et][Mt+1],Ht,te,ne,_e));se.geometry.push(Se)}}return oe.transformed=!0,oe}function He(oe,Ht,te,ne,_e,Pe){return[Math.round(te*(oe*ne-_e)),Math.round(te*(Ht*ne-Pe))]}function Xe(oe,Ht,te,ne,_e){for(var Pe=Ht===_e.maxZoom?0:_e.tolerance/((1<<Ht)*_e.extent),Et={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:te,y:ne,z:Ht,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Mt=0;Mt<oe.length;Mt++){Et.numFeatures++,er(Et,oe[Mt],Pe,_e);var se=oe[Mt].minX,ce=oe[Mt].minY,de=oe[Mt].maxX,Se=oe[Mt].maxY;se<Et.minX&&(Et.minX=se),ce<Et.minY&&(Et.minY=ce),de>Et.maxX&&(Et.maxX=de),Se>Et.maxY&&(Et.maxY=Se)}return Et}function er(oe,Ht,te,ne){var _e=Ht.geometry,Pe=Ht.type,Et=[];if(Pe==="Point"||Pe==="MultiPoint")for(var Mt=0;Mt<_e.length;Mt+=3)Et.push(_e[Mt]),Et.push(_e[Mt+1]),oe.numPoints++,oe.numSimplified++;else if(Pe==="LineString")We(Et,_e,oe,te,!1,!1);else if(Pe==="MultiLineString"||Pe==="Polygon")for(Mt=0;Mt<_e.length;Mt++)We(Et,_e[Mt],oe,te,Pe==="Polygon",Mt===0);else if(Pe==="MultiPolygon")for(var se=0;se<_e.length;se++){var ce=_e[se];for(Mt=0;Mt<ce.length;Mt++)We(Et,ce[Mt],oe,te,!0,Mt===0)}if(Et.length){var de=Ht.tags||null;if(Pe==="LineString"&&ne.lineMetrics){de={};for(var Se in Ht.tags)de[Se]=Ht.tags[Se];de.mapbox_clip_start=_e.start/_e.size,de.mapbox_clip_end=_e.end/_e.size}var ye={geometry:Et,type:Pe==="Polygon"||Pe==="MultiPolygon"?3:Pe==="LineString"||Pe==="MultiLineString"?2:1,tags:de};Ht.id!==null&&(ye.id=Ht.id),oe.features.push(ye)}}function We(oe,Ht,te,ne,_e,Pe){var Et=ne*ne;if(ne>0&&Ht.size<(_e?Et:ne)){te.numPoints+=Ht.length/3;return}for(var Mt=[],se=0;se<Ht.length;se+=3)(ne===0||Ht[se+2]>Et)&&(te.numSimplified++,Mt.push(Ht[se]),Mt.push(Ht[se+1])),te.numPoints++;_e&&hr(Mt,Pe),oe.push(Mt)}function hr(oe,Ht){for(var te=0,ne=0,_e=oe.length,Pe=_e-2;ne<_e;Pe=ne,ne+=2)te+=(oe[ne]-oe[Pe])*(oe[ne+1]+oe[Pe+1]);if(te>0===Ht)for(ne=0,_e=oe.length;ne<_e/2;ne+=2){var Et=oe[ne],Mt=oe[ne+1];oe[ne]=oe[_e-2-ne],oe[ne+1]=oe[_e-1-ne],oe[_e-2-ne]=Et,oe[_e-1-ne]=Mt}}function Wr(oe,Ht){return new dn(oe,Ht)}function dn(oe,Ht){Ht=this.options=le(Object.create(this.options),Ht);var te=Ht.debug;if(te&&console.time("preprocess data"),Ht.maxZoom<0||Ht.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Ht.promoteId&&Ht.generateId)throw new Error("promoteId and generateId cannot be used together.");var ne=ve(oe,Ht);this.tiles={},this.tileCoords=[],te&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Ht.indexMaxZoom,Ht.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ne=Te(ne,Ht),ne.length&&this.splitTile(ne,0,0,0),te&&(ne.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}dn.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},dn.prototype.splitTile=function(oe,Ht,te,ne,_e,Pe,Et){for(var Mt=[oe,Ht,te,ne],se=this.options,ce=se.debug;Mt.length;){ne=Mt.pop(),te=Mt.pop(),Ht=Mt.pop(),oe=Mt.pop();var de=1<<Ht,Se=Qr(Ht,te,ne),ye=this.tiles[Se];if(!ye&&(ce>1&&console.time("creation"),ye=this.tiles[Se]=Xe(oe,Ht,te,ne,se),this.tileCoords.push({z:Ht,x:te,y:ne}),ce)){ce>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Ht,te,ne,ye.numFeatures,ye.numPoints,ye.numSimplified),console.timeEnd("creation"));var Ae="z"+Ht;this.stats[Ae]=(this.stats[Ae]||0)+1,this.total++}if(ye.source=oe,_e){if(Ht===se.maxZoom||Ht===_e)continue;var Ge=1<<_e-Ht;if(te!==Math.floor(Pe/Ge)||ne!==Math.floor(Et/Ge))continue}else if(Ht===se.indexMaxZoom||ye.numPoints<=se.indexMaxPoints)continue;if(ye.source=null,oe.length!==0){ce>1&&console.time("clipping");var sr=.5*se.buffer/se.extent,Er=.5-sr,kr=.5+sr,Mr=1+sr,Gr,ar,xr,Ir,Hr,Cr;Gr=ar=xr=Ir=null,Hr=Ee(oe,de,te-sr,te+kr,0,ye.minX,ye.maxX,se),Cr=Ee(oe,de,te+Er,te+Mr,0,ye.minX,ye.maxX,se),oe=null,Hr&&(Gr=Ee(Hr,de,ne-sr,ne+kr,1,ye.minY,ye.maxY,se),ar=Ee(Hr,de,ne+Er,ne+Mr,1,ye.minY,ye.maxY,se),Hr=null),Cr&&(xr=Ee(Cr,de,ne-sr,ne+kr,1,ye.minY,ye.maxY,se),Ir=Ee(Cr,de,ne+Er,ne+Mr,1,ye.minY,ye.maxY,se),Cr=null),ce>1&&console.timeEnd("clipping"),Mt.push(Gr||[],Ht+1,te*2,ne*2),Mt.push(ar||[],Ht+1,te*2,ne*2+1),Mt.push(xr||[],Ht+1,te*2+1,ne*2),Mt.push(Ir||[],Ht+1,te*2+1,ne*2+1)}}},dn.prototype.getTile=function(oe,Ht,te){var ne=this.options,_e=ne.extent,Pe=ne.debug;if(oe<0||oe>24)return null;var Et=1<<oe;Ht=(Ht%Et+Et)%Et;var Mt=Qr(oe,Ht,te);if(this.tiles[Mt])return Ke(this.tiles[Mt],_e);Pe>1&&console.log("drilling down to z%d-%d-%d",oe,Ht,te);for(var se=oe,ce=Ht,de=te,Se;!Se&&se>0;)se--,ce=Math.floor(ce/2),de=Math.floor(de/2),Se=this.tiles[Qr(se,ce,de)];return!Se||!Se.source?null:(Pe>1&&console.log("found parent tile z%d-%d-%d",se,ce,de),Pe>1&&console.time("drilling down"),this.splitTile(Se.source,se,ce,de,oe,Ht,te),Pe>1&&console.timeEnd("drilling down"),this.tiles[Mt]?Ke(this.tiles[Mt],_e):null)};function Qr(oe,Ht,te){return((1<<oe)*te+Ht)*32+oe}function le(oe,Ht){for(var te in Ht)oe[te]=Ht[te];return oe}function Qe(oe,Ht){var te=oe.tileID.canonical;if(!this._geoJSONIndex)return Ht(null,null);var ne=this._geoJSONIndex.getTile(te.z,te.x,te.y);if(!ne)return Ht(null,null);var _e=new w(ne.features),Pe=L(_e);(Pe.byteOffset!==0||Pe.byteLength!==Pe.buffer.byteLength)&&(Pe=new Uint8Array(Pe)),Ht(null,{vectorTile:_e,rawData:Pe.buffer})}var Ze=function(oe){function Ht(te,ne,_e,Pe){oe.call(this,te,ne,_e,Qe),Pe&&(this.loadGeoJSON=Pe)}return oe&&(Ht.__proto__=oe),Ht.prototype=Object.create(oe&&oe.prototype),Ht.prototype.constructor=Ht,Ht.prototype.loadData=function(ne,_e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=_e,this._pendingLoadDataParams=ne,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},Ht.prototype._loadData=function(){var ne=this;if(!(!this._pendingCallback||!this._pendingLoadDataParams)){var _e=this._pendingCallback,Pe=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var Et=Pe&&Pe.request&&Pe.request.collectResourceTiming?new t.RequestPerformance(Pe.request):!1;this.loadGeoJSON(Pe,function(Mt,se){if(Mt||!se)return _e(Mt);if(typeof se!="object")return _e(new Error("Input data given to '"+Pe.source+"' is not a valid GeoJSON object."));u(se,!0);try{ne._geoJSONIndex=Pe.cluster?new ct(Ve(Pe)).load(se.features):Wr(se,Pe.geojsonVtOptions)}catch(Se){return _e(Se)}ne.loaded={};var ce={};if(Et){var de=Et.finish();de&&(ce.resourceTiming={},ce.resourceTiming[Pe.source]=JSON.parse(JSON.stringify(de)))}_e(null,ce)})}},Ht.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},Ht.prototype.reloadTile=function(ne,_e){var Pe=this.loaded,Et=ne.uid;return Pe&&Pe[Et]?oe.prototype.reloadTile.call(this,ne,_e):this.loadTile(ne,_e)},Ht.prototype.loadGeoJSON=function(ne,_e){if(ne.request)t.getJSON(ne.request,_e);else if(typeof ne.data=="string")try{return _e(null,JSON.parse(ne.data))}catch{return _e(new Error("Input data given to '"+ne.source+"' is not a valid GeoJSON object."))}else return _e(new Error("Input data given to '"+ne.source+"' is not a valid GeoJSON object."))},Ht.prototype.removeSource=function(ne,_e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),_e()},Ht.prototype.getClusterExpansionZoom=function(ne,_e){try{_e(null,this._geoJSONIndex.getClusterExpansionZoom(ne.clusterId))}catch(Pe){_e(Pe)}},Ht.prototype.getClusterChildren=function(ne,_e){try{_e(null,this._geoJSONIndex.getChildren(ne.clusterId))}catch(Pe){_e(Pe)}},Ht.prototype.getClusterLeaves=function(ne,_e){try{_e(null,this._geoJSONIndex.getLeaves(ne.clusterId,ne.limit,ne.offset))}catch(Pe){_e(Pe)}},Ht}(b);function Ve(oe){var Ht=oe.superclusterOptions,te=oe.clusterProperties;if(!te||!Ht)return Ht;for(var ne={},_e={},Pe={accumulated:null,zoom:0},Et={properties:null},Mt=Object.keys(te),se=0,ce=Mt;se<ce.length;se+=1){var de=ce[se],Se=te[de],ye=Se[0],Ae=Se[1],Ge=t.createExpression(Ae),sr=t.createExpression(typeof ye=="string"?[ye,["accumulated"],["get",de]]:ye);ne[de]=Ge.value,_e[de]=sr.value}return Ht.map=function(Er){Et.properties=Er;for(var kr={},Mr=0,Gr=Mt;Mr<Gr.length;Mr+=1){var ar=Gr[Mr];kr[ar]=ne[ar].evaluate(Pe,Et)}return kr},Ht.reduce=function(Er,kr){Et.properties=kr;for(var Mr=0,Gr=Mt;Mr<Gr.length;Mr+=1){var ar=Gr[Mr];Pe.accumulated=Er[ar],Er[ar]=_e[ar].evaluate(Pe,Et)}},Ht}var _r=function(Ht){var te=this;this.self=Ht,this.actor=new t.Actor(Ht,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:b,geojson:Ze},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(ne,_e){if(te.workerSourceTypes[ne])throw new Error('Worker source with name "'+ne+'" already registered.');te.workerSourceTypes[ne]=_e},this.self.registerRTLTextPlugin=function(ne){if(t.plugin.isParsed())throw new Error("RTL text plugin already registered.");t.plugin.applyArabicShaping=ne.applyArabicShaping,t.plugin.processBidirectionalText=ne.processBidirectionalText,t.plugin.processStyledBidirectionalText=ne.processStyledBidirectionalText}};return _r.prototype.setReferrer=function(Ht,te){this.referrer=te},_r.prototype.setImages=function(Ht,te,ne){this.availableImages[Ht]=te;for(var _e in this.workerSources[Ht]){var Pe=this.workerSources[Ht][_e];for(var Et in Pe)Pe[Et].availableImages=te}ne()},_r.prototype.setLayers=function(Ht,te,ne){this.getLayerIndex(Ht).replace(te),ne()},_r.prototype.updateLayers=function(Ht,te,ne){this.getLayerIndex(Ht).update(te.layers,te.removedIds),ne()},_r.prototype.loadTile=function(Ht,te,ne){this.getWorkerSource(Ht,te.type,te.source).loadTile(te,ne)},_r.prototype.loadDEMTile=function(Ht,te,ne){this.getDEMWorkerSource(Ht,te.source).loadTile(te,ne)},_r.prototype.reloadTile=function(Ht,te,ne){this.getWorkerSource(Ht,te.type,te.source).reloadTile(te,ne)},_r.prototype.abortTile=function(Ht,te,ne){this.getWorkerSource(Ht,te.type,te.source).abortTile(te,ne)},_r.prototype.removeTile=function(Ht,te,ne){this.getWorkerSource(Ht,te.type,te.source).removeTile(te,ne)},_r.prototype.removeDEMTile=function(Ht,te){this.getDEMWorkerSource(Ht,te.source).removeTile(te)},_r.prototype.removeSource=function(Ht,te,ne){if(!(!this.workerSources[Ht]||!this.workerSources[Ht][te.type]||!this.workerSources[Ht][te.type][te.source])){var _e=this.workerSources[Ht][te.type][te.source];delete this.workerSources[Ht][te.type][te.source],_e.removeSource!==void 0?_e.removeSource(te,ne):ne()}},_r.prototype.loadWorkerSource=function(Ht,te,ne){try{this.self.importScripts(te.url),ne()}catch(_e){ne(_e.toString())}},_r.prototype.syncRTLPluginState=function(Ht,te,ne){try{t.plugin.setState(te);var _e=t.plugin.getPluginURL();if(t.plugin.isLoaded()&&!t.plugin.isParsed()&&_e!=null){this.self.importScripts(_e);var Pe=t.plugin.isParsed(),Et=Pe?void 0:new Error("RTL Text Plugin failed to import scripts from "+_e);ne(Et,Pe)}}catch(Mt){ne(Mt.toString())}},_r.prototype.getAvailableImages=function(Ht){var te=this.availableImages[Ht];return te||(te=[]),te},_r.prototype.getLayerIndex=function(Ht){var te=this.layerIndexes[Ht];return te||(te=this.layerIndexes[Ht]=new n),te},_r.prototype.getWorkerSource=function(Ht,te,ne){var _e=this;if(this.workerSources[Ht]||(this.workerSources[Ht]={}),this.workerSources[Ht][te]||(this.workerSources[Ht][te]={}),!this.workerSources[Ht][te][ne]){var Pe={send:function(Et,Mt,se){_e.actor.send(Et,Mt,se,Ht)}};this.workerSources[Ht][te][ne]=new this.workerSourceTypes[te](Pe,this.getLayerIndex(Ht),this.getAvailableImages(Ht))}return this.workerSources[Ht][te][ne]},_r.prototype.getDEMWorkerSource=function(Ht,te){return this.demWorkerSources[Ht]||(this.demWorkerSources[Ht]={}),this.demWorkerSources[Ht][te]||(this.demWorkerSources[Ht][te]=new _),this.demWorkerSources[Ht][te]},_r.prototype.enforceCacheSizeLimit=function(Ht,te){t.enforceCacheSizeLimit(te)},typeof WorkerGlobalScope<"u"&&typeof t.window<"u"&&t.window instanceof WorkerGlobalScope&&(t.window.worker=new _r(t.window)),_r}),x(["./shared"],function(t){var a=t.createCommonjsModule(function(dt){dt.exports?dt.exports=Y:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=Y,window.mapboxgl.notSupportedReason=gt);function Y(Vr){return!gt(Vr)}function gt(Vr){if(!Q())return"not a browser";if(!mt())return"insufficent Array support";if(!Ct())return"insufficient Function support";if(!Dt())return"insufficient Object support";if(!Kt())return"insufficient JSON support";if(!fe())return"insufficient worker support";if(!Ce())return"insufficient Uint8ClampedArray support";if(!Je())return"insufficient ArrayBuffer support";if(!ur())return"insufficient Canvas/getImageData support";if(!Lr(Vr&&Vr.failIfMajorPerformanceCaveat))return"insufficient WebGL support"}function Q(){return typeof window<"u"&&typeof document<"u"}function mt(){return Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray}function Ct(){return Function.prototype&&Function.prototype.bind}function Dt(){return Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions}function Kt(){return"JSON"in window&&"parse"in JSON&&"stringify"in JSON}function fe(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var Vr=new Blob([""],{type:"text/javascript"}),Jr=URL.createObjectURL(Vr),pn,Ln;try{Ln=new Worker(Jr),pn=!0}catch{pn=!1}return Ln&&Ln.terminate(),URL.revokeObjectURL(Jr),pn}function Ce(){return"Uint8ClampedArray"in window}function Je(){return ArrayBuffer.isView}function ur(){var Vr=document.createElement("canvas");Vr.width=Vr.height=1;var Jr=Vr.getContext("2d");if(!Jr)return!1;var pn=Jr.getImageData(0,0,1,1);return pn&&pn.width===Vr.width}var vr={};function Lr(Vr){return vr[Vr]===void 0&&(vr[Vr]=$r(Vr)),vr[Vr]}Y.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};function Yr(Vr){var Jr=document.createElement("canvas"),pn=Object.create(Y.webGLContextAttributes);return pn.failIfMajorPerformanceCaveat=Vr,Jr.probablySupportsContext?Jr.probablySupportsContext("webgl",pn)||Jr.probablySupportsContext("experimental-webgl",pn):Jr.supportsContext?Jr.supportsContext("webgl",pn)||Jr.supportsContext("experimental-webgl",pn):Jr.getContext("webgl",pn)||Jr.getContext("experimental-webgl",pn)}function $r(Vr){var Jr=Yr(Vr);if(!Jr)return!1;var pn=Jr.createShader(Jr.VERTEX_SHADER);return!pn||Jr.isContextLost()?!1:(Jr.shaderSource(pn,"void main() {}"),Jr.compileShader(pn),Jr.getShaderParameter(pn,Jr.COMPILE_STATUS)===!0)}}),i={};i.create=function(dt,Y,gt){var Q=t.window.document.createElement(dt);return Y!==void 0&&(Q.className=Y),gt&&gt.appendChild(Q),Q},i.createNS=function(dt,Y){var gt=t.window.document.createElementNS(dt,Y);return gt};var r=t.window.document.documentElement.style;function n(dt){if(!r)return dt[0];for(var Y=0;Y<dt.length;Y++)if(dt[Y]in r)return dt[Y];return dt[0]}var d=n(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),s;i.disableDrag=function(){r&&d&&(s=r[d],r[d]="none")},i.enableDrag=function(){r&&d&&(r[d]=s)};var o=n(["transform","WebkitTransform"]);i.setTransform=function(dt,Y){dt.style[o]=Y};var y=!1;try{var g=Object.defineProperty({},"passive",{get:function(){y=!0}});t.window.addEventListener("test",g,g),t.window.removeEventListener("test",g,g)}catch{y=!1}i.addEventListener=function(dt,Y,gt,Q){Q===void 0&&(Q={}),"passive"in Q&&y?dt.addEventListener(Y,gt,Q):dt.addEventListener(Y,gt,Q.capture)},i.removeEventListener=function(dt,Y,gt,Q){Q===void 0&&(Q={}),"passive"in Q&&y?dt.removeEventListener(Y,gt,Q):dt.removeEventListener(Y,gt,Q.capture)};var b=function(dt){dt.preventDefault(),dt.stopPropagation(),t.window.removeEventListener("click",b,!0)};i.suppressClick=function(){t.window.addEventListener("click",b,!0),t.window.setTimeout(function(){t.window.removeEventListener("click",b,!0)},0)},i.mousePos=function(dt,Y){var gt=dt.getBoundingClientRect();return new t.Point(Y.clientX-gt.left-dt.clientLeft,Y.clientY-gt.top-dt.clientTop)},i.touchPos=function(dt,Y){for(var gt=dt.getBoundingClientRect(),Q=[],mt=0;mt<Y.length;mt++)Q.push(new t.Point(Y[mt].clientX-gt.left-dt.clientLeft,Y[mt].clientY-gt.top-dt.clientTop));return Q},i.mouseButton=function(dt){return typeof t.window.InstallTrigger<"u"&&dt.button===2&&dt.ctrlKey&&t.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:dt.button},i.remove=function(dt){dt.parentNode&&dt.parentNode.removeChild(dt)};function v(dt,Y,gt){var Q,mt,Ct,Dt=t.browser.devicePixelRatio>1?"@2x":"",Kt=t.getJSON(Y.transformRequest(Y.normalizeSpriteURL(dt,Dt,".json"),t.ResourceType.SpriteJSON),function(Je,ur){Kt=null,Ct||(Ct=Je,Q=ur,Ce())}),fe=t.getImage(Y.transformRequest(Y.normalizeSpriteURL(dt,Dt,".png"),t.ResourceType.SpriteImage),function(Je,ur){fe=null,Ct||(Ct=Je,mt=ur,Ce())});function Ce(){if(Ct)gt(Ct);else if(Q&&mt){var Je=t.browser.getImageData(mt),ur={};for(var vr in Q){var Lr=Q[vr],Yr=Lr.width,$r=Lr.height,Vr=Lr.x,Jr=Lr.y,pn=Lr.sdf,Ln=Lr.pixelRatio,Bn=Lr.stretchX,Jn=Lr.stretchY,ei=Lr.content,qn=new t.RGBAImage({width:Yr,height:$r});t.RGBAImage.copy(Je,qn,{x:Vr,y:Jr},{x:0,y:0},{width:Yr,height:$r}),ur[vr]={data:qn,pixelRatio:Ln,sdf:pn,stretchX:Bn,stretchY:Jn,content:ei}}gt(null,ur)}}return{cancel:function(){Kt&&(Kt.cancel(),Kt=null),fe&&(fe.cancel(),fe=null)}}}function _(dt){var Y=dt.userImage;if(Y&&Y.render){var gt=Y.render();if(gt)return dt.data.replace(new Uint8Array(Y.data.buffer)),!0}return!1}var u=1,T=function(dt){function Y(){dt.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.RGBAImage({width:1,height:1}),this.dirty=!0}return dt&&(Y.__proto__=dt),Y.prototype=Object.create(dt&&dt.prototype),Y.prototype.constructor=Y,Y.prototype.isLoaded=function(){return this.loaded},Y.prototype.setLoaded=function(Q){if(this.loaded!==Q&&(this.loaded=Q,Q)){for(var mt=0,Ct=this.requestors;mt<Ct.length;mt+=1){var Dt=Ct[mt],Kt=Dt.ids,fe=Dt.callback;this._notify(Kt,fe)}this.requestors=[]}},Y.prototype.getImage=function(Q){return this.images[Q]},Y.prototype.addImage=function(Q,mt){this._validate(Q,mt)&&(this.images[Q]=mt)},Y.prototype._validate=function(Q,mt){var Ct=!0;return this._validateStretch(mt.stretchX,mt.data&&mt.data.width)||(this.fire(new t.ErrorEvent(new Error('Image "'+Q+'" has invalid "stretchX" value'))),Ct=!1),this._validateStretch(mt.stretchY,mt.data&&mt.data.height)||(this.fire(new t.ErrorEvent(new Error('Image "'+Q+'" has invalid "stretchY" value'))),Ct=!1),this._validateContent(mt.content,mt)||(this.fire(new t.ErrorEvent(new Error('Image "'+Q+'" has invalid "content" value'))),Ct=!1),Ct},Y.prototype._validateStretch=function(Q,mt){if(!Q)return!0;for(var Ct=0,Dt=0,Kt=Q;Dt<Kt.length;Dt+=1){var fe=Kt[Dt];if(fe[0]<Ct||fe[1]<fe[0]||mt<fe[1])return!1;Ct=fe[1]}return!0},Y.prototype._validateContent=function(Q,mt){return Q?!(Q.length!==4||Q[0]<0||mt.data.width<Q[0]||Q[1]<0||mt.data.height<Q[1]||Q[2]<0||mt.data.width<Q[2]||Q[3]<0||mt.data.height<Q[3]||Q[2]<Q[0]||Q[3]<Q[1]):!0},Y.prototype.updateImage=function(Q,mt){var Ct=this.images[Q];mt.version=Ct.version+1,this.images[Q]=mt,this.updatedImages[Q]=!0},Y.prototype.removeImage=function(Q){var mt=this.images[Q];delete this.images[Q],delete this.patterns[Q],mt.userImage&&mt.userImage.onRemove&&mt.userImage.onRemove()},Y.prototype.listImages=function(){return Object.keys(this.images)},Y.prototype.getImages=function(Q,mt){var Ct=!0;if(!this.isLoaded())for(var Dt=0,Kt=Q;Dt<Kt.length;Dt+=1){var fe=Kt[Dt];this.images[fe]||(Ct=!1)}this.isLoaded()||Ct?this._notify(Q,mt):this.requestors.push({ids:Q,callback:mt})},Y.prototype._notify=function(Q,mt){for(var Ct={},Dt=0,Kt=Q;Dt<Kt.length;Dt+=1){var fe=Kt[Dt];this.images[fe]||this.fire(new t.Event("styleimagemissing",{id:fe}));var Ce=this.images[fe];Ce?Ct[fe]={data:Ce.data.clone(),pixelRatio:Ce.pixelRatio,sdf:Ce.sdf,version:Ce.version,stretchX:Ce.stretchX,stretchY:Ce.stretchY,content:Ce.content,hasRenderCallback:Boolean(Ce.userImage&&Ce.userImage.render)}:t.warnOnce('Image "'+fe+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}mt(null,Ct)},Y.prototype.getPixelSize=function(){var Q=this.atlasImage,mt=Q.width,Ct=Q.height;return{width:mt,height:Ct}},Y.prototype.getPattern=function(Q){var mt=this.patterns[Q],Ct=this.getImage(Q);if(!Ct)return null;if(mt&&mt.position.version===Ct.version)return mt.position;if(mt)mt.position.version=Ct.version;else{var Dt=Ct.data.width+u*2,Kt=Ct.data.height+u*2,fe={w:Dt,h:Kt,x:0,y:0},Ce=new t.ImagePosition(fe,Ct);this.patterns[Q]={bin:fe,position:Ce}}return this._updatePatternAtlas(),this.patterns[Q].position},Y.prototype.bind=function(Q){var mt=Q.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new t.Texture(Q,this.atlasImage,mt.RGBA),this.atlasTexture.bind(mt.LINEAR,mt.CLAMP_TO_EDGE)},Y.prototype._updatePatternAtlas=function(){var Q=[];for(var mt in this.patterns)Q.push(this.patterns[mt].bin);var Ct=t.potpack(Q),Dt=Ct.w,Kt=Ct.h,fe=this.atlasImage;fe.resize({width:Dt||1,height:Kt||1});for(var Ce in this.patterns){var Je=this.patterns[Ce],ur=Je.bin,vr=ur.x+u,Lr=ur.y+u,Yr=this.images[Ce].data,$r=Yr.width,Vr=Yr.height;t.RGBAImage.copy(Yr,fe,{x:0,y:0},{x:vr,y:Lr},{width:$r,height:Vr}),t.RGBAImage.copy(Yr,fe,{x:0,y:Vr-1},{x:vr,y:Lr-1},{width:$r,height:1}),t.RGBAImage.copy(Yr,fe,{x:0,y:0},{x:vr,y:Lr+Vr},{width:$r,height:1}),t.RGBAImage.copy(Yr,fe,{x:$r-1,y:0},{x:vr-1,y:Lr},{width:1,height:Vr}),t.RGBAImage.copy(Yr,fe,{x:0,y:0},{x:vr+$r,y:Lr},{width:1,height:Vr})}this.dirty=!0},Y.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},Y.prototype.dispatchRenderCallbacks=function(Q){for(var mt=0,Ct=Q;mt<Ct.length;mt+=1){var Dt=Ct[mt];if(!this.callbackDispatchedThisFrame[Dt]){this.callbackDispatchedThisFrame[Dt]=!0;var Kt=this.images[Dt],fe=_(Kt);fe&&this.updateImage(Dt,Kt)}}},Y}(t.Evented);function c(dt,Y,gt,Q,mt){var Ct=Y*256,Dt=Ct+255,Kt=Q.transformRequest(Q.normalizeGlyphsURL(gt).replace("{fontstack}",dt).replace("{range}",Ct+"-"+Dt),t.ResourceType.Glyphs);t.getArrayBuffer(Kt,function(fe,Ce){if(fe)mt(fe);else if(Ce){for(var Je={},ur=0,vr=t.parseGlyphPBF(Ce);ur<vr.length;ur+=1){var Lr=vr[ur];Je[Lr.id]=Lr}mt(null,Je)}})}var A=w,k=w,p=1e20;function w(dt,Y,gt,Q,mt,Ct){this.fontSize=dt||24,this.buffer=Y===void 0?3:Y,this.cutoff=Q||.25,this.fontFamily=mt||"sans-serif",this.fontWeight=Ct||"normal",this.radius=gt||8;var Dt=this.size=this.fontSize+this.buffer*2;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=Dt,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(Dt*Dt),this.gridInner=new Float64Array(Dt*Dt),this.f=new Float64Array(Dt),this.d=new Float64Array(Dt),this.z=new Float64Array(Dt+1),this.v=new Int16Array(Dt),this.middle=Math.round(Dt/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}w.prototype.draw=function(dt){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(dt,this.buffer,this.middle);for(var Y=this.ctx.getImageData(0,0,this.size,this.size),gt=new Uint8ClampedArray(this.size*this.size),Q=0;Q<this.size*this.size;Q++){var mt=Y.data[Q*4+3]/255;this.gridOuter[Q]=mt===1?0:mt===0?p:Math.pow(Math.max(0,.5-mt),2),this.gridInner[Q]=mt===1?p:mt===0?0:Math.pow(Math.max(0,mt-.5),2)}for(h(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),h(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),Q=0;Q<this.size*this.size;Q++){var Ct=this.gridOuter[Q]-this.gridInner[Q];gt[Q]=Math.max(0,Math.min(255,Math.round(255-255*(Ct/this.radius+this.cutoff))))}return gt};function h(dt,Y,gt,Q,mt,Ct,Dt){for(var Kt=0;Kt<Y;Kt++){for(var fe=0;fe<gt;fe++)Q[fe]=dt[fe*Y+Kt];for(D(Q,mt,Ct,Dt,gt),fe=0;fe<gt;fe++)dt[fe*Y+Kt]=mt[fe]}for(fe=0;fe<gt;fe++){for(Kt=0;Kt<Y;Kt++)Q[Kt]=dt[fe*Y+Kt];for(D(Q,mt,Ct,Dt,Y),Kt=0;Kt<Y;Kt++)dt[fe*Y+Kt]=Math.sqrt(mt[Kt])}}function D(dt,Y,gt,Q,mt){gt[0]=0,Q[0]=-p,Q[1]=+p;for(var Ct=1,Dt=0;Ct<mt;Ct++){for(var Kt=(dt[Ct]+Ct*Ct-(dt[gt[Dt]]+gt[Dt]*gt[Dt]))/(2*Ct-2*gt[Dt]);Kt<=Q[Dt];)Dt--,Kt=(dt[Ct]+Ct*Ct-(dt[gt[Dt]]+gt[Dt]*gt[Dt]))/(2*Ct-2*gt[Dt]);Dt++,gt[Dt]=Ct,Q[Dt]=Kt,Q[Dt+1]=+p}for(Ct=0,Dt=0;Ct<mt;Ct++){for(;Q[Dt+1]<Ct;)Dt++;Y[Ct]=(Ct-gt[Dt])*(Ct-gt[Dt])+dt[gt[Dt]]}}A.default=k;var S=function(Y,gt){this.requestManager=Y,this.localIdeographFontFamily=gt,this.entries={}};S.prototype.setURL=function(Y){this.url=Y},S.prototype.getGlyphs=function(Y,gt){var Q=this,mt=[];for(var Ct in Y)for(var Dt=0,Kt=Y[Ct];Dt<Kt.length;Dt+=1){var fe=Kt[Dt];mt.push({stack:Ct,id:fe})}t.asyncAll(mt,function(Ce,Je){var ur=Ce.stack,vr=Ce.id,Lr=Q.entries[ur];Lr||(Lr=Q.entries[ur]={glyphs:{},requests:{},ranges:{}});var Yr=Lr.glyphs[vr];if(Yr!==void 0){Je(null,{stack:ur,id:vr,glyph:Yr});return}if(Yr=Q._tinySDF(Lr,ur,vr),Yr){Lr.glyphs[vr]=Yr,Je(null,{stack:ur,id:vr,glyph:Yr});return}var $r=Math.floor(vr/256);if($r*256>65535){Je(new Error("glyphs > 65535 not supported"));return}if(Lr.ranges[$r]){Je(null,{stack:ur,id:vr,glyph:Yr});return}var Vr=Lr.requests[$r];Vr||(Vr=Lr.requests[$r]=[],S.loadGlyphRange(ur,$r,Q.url,Q.requestManager,function(Jr,pn){if(pn){for(var Ln in pn)Q._doesCharSupportLocalGlyph(+Ln)||(Lr.glyphs[+Ln]=pn[+Ln]);Lr.ranges[$r]=!0}for(var Bn=0,Jn=Vr;Bn<Jn.length;Bn+=1){var ei=Jn[Bn];ei(Jr,pn)}delete Lr.requests[$r]})),Vr.push(function(Jr,pn){Jr?Je(Jr):pn&&Je(null,{stack:ur,id:vr,glyph:pn[vr]||null})})},function(Ce,Je){if(Ce)gt(Ce);else if(Je){for(var ur={},vr=0,Lr=Je;vr<Lr.length;vr+=1){var Yr=Lr[vr],$r=Yr.stack,Vr=Yr.id,Jr=Yr.glyph;(ur[$r]||(ur[$r]={}))[Vr]=Jr&&{id:Jr.id,bitmap:Jr.bitmap.clone(),metrics:Jr.metrics}}gt(null,ur)}})},S.prototype._doesCharSupportLocalGlyph=function(Y){return!!this.localIdeographFontFamily&&(t.isChar["CJK Unified Ideographs"](Y)||t.isChar["Hangul Syllables"](Y)||t.isChar.Hiragana(Y)||t.isChar.Katakana(Y))},S.prototype._tinySDF=function(Y,gt,Q){var mt=this.localIdeographFontFamily;if(!!mt&&!!this._doesCharSupportLocalGlyph(Q)){var Ct=Y.tinySDF;if(!Ct){var Dt="400";/bold/i.test(gt)?Dt="900":/medium/i.test(gt)?Dt="500":/light/i.test(gt)&&(Dt="200"),Ct=Y.tinySDF=new S.TinySDF(24,3,8,.25,mt,Dt)}return{id:Q,bitmap:new t.AlphaImage({width:30,height:30},Ct.draw(String.fromCharCode(Q))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},S.loadGlyphRange=c,S.TinySDF=A;var M=function(){this.specification=t.styleSpec.light.position};M.prototype.possiblyEvaluate=function(Y,gt){return t.sphericalToCartesian(Y.expression.evaluate(gt))},M.prototype.interpolate=function(Y,gt,Q){return{x:t.number(Y.x,gt.x,Q),y:t.number(Y.y,gt.y,Q),z:t.number(Y.z,gt.z,Q)}};var L=new t.Properties({anchor:new t.DataConstantProperty(t.styleSpec.light.anchor),position:new M,color:new t.DataConstantProperty(t.styleSpec.light.color),intensity:new t.DataConstantProperty(t.styleSpec.light.intensity)}),R="-transition",z=function(dt){function Y(gt){dt.call(this),this._transitionable=new t.Transitionable(L),this.setLight(gt),this._transitioning=this._transitionable.untransitioned()}return dt&&(Y.__proto__=dt),Y.prototype=Object.create(dt&&dt.prototype),Y.prototype.constructor=Y,Y.prototype.getLight=function(){return this._transitionable.serialize()},Y.prototype.setLight=function(Q,mt){if(mt===void 0&&(mt={}),!this._validate(t.validateLight,Q,mt))for(var Ct in Q){var Dt=Q[Ct];t.endsWith(Ct,R)?this._transitionable.setTransition(Ct.slice(0,-R.length),Dt):this._transitionable.setValue(Ct,Dt)}},Y.prototype.updateTransitions=function(Q){this._transitioning=this._transitionable.transitioned(Q,this._transitioning)},Y.prototype.hasTransition=function(){return this._transitioning.hasTransition()},Y.prototype.recalculate=function(Q){this.properties=this._transitioning.possiblyEvaluate(Q)},Y.prototype._validate=function(Q,mt,Ct){return Ct&&Ct.validate===!1?!1:t.emitValidationErrors(this,Q.call(t.validateStyle,t.extend({value:mt,style:{glyphs:!0,sprite:!0},styleSpec:t.styleSpec})))},Y}(t.Evented),P=function(Y,gt){this.width=Y,this.height=gt,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};P.prototype.getDash=function(Y,gt){var Q=Y.join(",")+String(gt);return this.dashEntry[Q]||(this.dashEntry[Q]=this.addDash(Y,gt)),this.dashEntry[Q]},P.prototype.getDashRanges=function(Y,gt,Q){var mt=Y.length%2===1,Ct=[],Dt=mt?-Y[Y.length-1]*Q:0,Kt=Y[0]*Q,fe=!0;Ct.push({left:Dt,right:Kt,isDash:fe,zeroLength:Y[0]===0});for(var Ce=Y[0],Je=1;Je<Y.length;Je++){fe=!fe;var ur=Y[Je];Dt=Ce*Q,Ce+=ur,Kt=Ce*Q,Ct.push({left:Dt,right:Kt,isDash:fe,zeroLength:ur===0})}return Ct},P.prototype.addRoundDash=function(Y,gt,Q){for(var mt=gt/2,Ct=-Q;Ct<=Q;Ct++)for(var Dt=this.nextRow+Q+Ct,Kt=this.width*Dt,fe=0,Ce=Y[fe],Je=0;Je<this.width;Je++){Je/Ce.right>1&&(Ce=Y[++fe]);var ur=Math.abs(Je-Ce.left),vr=Math.abs(Je-Ce.right),Lr=Math.min(ur,vr),Yr=void 0,$r=Ct/Q*(mt+1);if(Ce.isDash){var Vr=mt-Math.abs($r);Yr=Math.sqrt(Lr*Lr+Vr*Vr)}else Yr=mt-Math.sqrt(Lr*Lr+$r*$r);this.data[Kt+Je]=Math.max(0,Math.min(255,Yr+128))}},P.prototype.addRegularDash=function(Y){for(var gt=Y.length-1;gt>=0;--gt){var Q=Y[gt],mt=Y[gt+1];Q.zeroLength?Y.splice(gt,1):mt&&mt.isDash===Q.isDash&&(mt.left=Q.left,Y.splice(gt,1))}var Ct=Y[0],Dt=Y[Y.length-1];Ct.isDash===Dt.isDash&&(Ct.left=Dt.left-this.width,Dt.right=Ct.right+this.width);for(var Kt=this.width*this.nextRow,fe=0,Ce=Y[fe],Je=0;Je<this.width;Je++){Je/Ce.right>1&&(Ce=Y[++fe]);var ur=Math.abs(Je-Ce.left),vr=Math.abs(Je-Ce.right),Lr=Math.min(ur,vr),Yr=Ce.isDash?Lr:-Lr;this.data[Kt+Je]=Math.max(0,Math.min(255,Yr+128))}},P.prototype.addDash=function(Y,gt){var Q=gt?7:0,mt=2*Q+1;if(this.nextRow+mt>this.height)return t.warnOnce("LineAtlas out of space"),null;for(var Ct=0,Dt=0;Dt<Y.length;Dt++)Ct+=Y[Dt];if(Ct!==0){var Kt=this.width/Ct,fe=this.getDashRanges(Y,this.width,Kt);gt?this.addRoundDash(fe,Kt,Q):this.addRegularDash(fe)}var Ce={y:(this.nextRow+Q+.5)/this.height,height:2*Q/this.height,width:Ct};return this.nextRow+=mt,this.dirty=!0,Ce},P.prototype.bind=function(Y){var gt=Y.gl;this.texture?(gt.bindTexture(gt.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,gt.texSubImage2D(gt.TEXTURE_2D,0,0,0,this.width,this.height,gt.ALPHA,gt.UNSIGNED_BYTE,this.data))):(this.texture=gt.createTexture(),gt.bindTexture(gt.TEXTURE_2D,this.texture),gt.texParameteri(gt.TEXTURE_2D,gt.TEXTURE_WRAP_S,gt.REPEAT),gt.texParameteri(gt.TEXTURE_2D,gt.TEXTURE_WRAP_T,gt.REPEAT),gt.texParameteri(gt.TEXTURE_2D,gt.TEXTURE_MIN_FILTER,gt.LINEAR),gt.texParameteri(gt.TEXTURE_2D,gt.TEXTURE_MAG_FILTER,gt.LINEAR),gt.texImage2D(gt.TEXTURE_2D,0,gt.ALPHA,this.width,this.height,0,gt.ALPHA,gt.UNSIGNED_BYTE,this.data))};var I=function dt(Y,gt){this.workerPool=Y,this.actors=[],this.currentActor=0,this.id=t.uniqueId();for(var Q=this.workerPool.acquire(this.id),mt=0;mt<Q.length;mt++){var Ct=Q[mt],Dt=new dt.Actor(Ct,gt,this.id);Dt.name="Worker "+mt,this.actors.push(Dt)}};I.prototype.broadcast=function(Y,gt,Q){Q=Q||function(){},t.asyncAll(this.actors,function(mt,Ct){mt.send(Y,gt,Ct)},Q)},I.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},I.prototype.remove=function(){this.actors.forEach(function(Y){Y.remove()}),this.actors=[],this.workerPool.release(this.id)},I.Actor=t.Actor;function U(dt,Y,gt){var Q=function(mt,Ct){if(mt)return gt(mt);if(Ct){var Dt=t.pick(t.extend(Ct,dt),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);Ct.vector_layers&&(Dt.vectorLayers=Ct.vector_layers,Dt.vectorLayerIds=Dt.vectorLayers.map(function(Kt){return Kt.id})),Dt.tiles=Y.canonicalizeTileset(Dt,dt.url),gt(null,Dt)}};return dt.url?t.getJSON(Y.transformRequest(Y.normalizeSourceURL(dt.url),t.ResourceType.Source),Q):t.browser.frame(function(){return Q(null,dt)})}var O=function(Y,gt,Q){this.bounds=t.LngLatBounds.convert(this.validateBounds(Y)),this.minzoom=gt||0,this.maxzoom=Q||24};O.prototype.validateBounds=function(Y){return!Array.isArray(Y)||Y.length!==4?[-180,-90,180,90]:[Math.max(-180,Y[0]),Math.max(-90,Y[1]),Math.min(180,Y[2]),Math.min(90,Y[3])]},O.prototype.contains=function(Y){var gt=Math.pow(2,Y.z),Q={minX:Math.floor(t.mercatorXfromLng(this.bounds.getWest())*gt),minY:Math.floor(t.mercatorYfromLat(this.bounds.getNorth())*gt),maxX:Math.ceil(t.mercatorXfromLng(this.bounds.getEast())*gt),maxY:Math.ceil(t.mercatorYfromLat(this.bounds.getSouth())*gt)},mt=Y.x>=Q.minX&&Y.x<Q.maxX&&Y.y>=Q.minY&&Y.y<Q.maxY;return mt};var G=function(dt){function Y(gt,Q,mt,Ct){if(dt.call(this),this.id=gt,this.dispatcher=mt,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,t.extend(this,t.pick(Q,["url","scheme","tileSize","promoteId"])),this._options=t.extend({type:"vector"},Q),this._collectResourceTiming=Q.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(Ct)}return dt&&(Y.__proto__=dt),Y.prototype=Object.create(dt&&dt.prototype),Y.prototype.constructor=Y,Y.prototype.load=function(){var Q=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=U(this._options,this.map._requestManager,function(mt,Ct){Q._tileJSONRequest=null,Q._loaded=!0,mt?Q.fire(new t.ErrorEvent(mt)):Ct&&(t.extend(Q,Ct),Ct.bounds&&(Q.tileBounds=new O(Ct.bounds,Q.minzoom,Q.maxzoom)),t.postTurnstileEvent(Ct.tiles,Q.map._requestManager._customAccessToken),t.postMapLoadEvent(Ct.tiles,Q.map._getMapId(),Q.map._requestManager._skuToken,Q.map._requestManager._customAccessToken),Q.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),Q.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))})},Y.prototype.loaded=function(){return this._loaded},Y.prototype.hasTile=function(Q){return!this.tileBounds||this.tileBounds.contains(Q.canonical)},Y.prototype.onAdd=function(Q){this.map=Q,this.load()},Y.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},Y.prototype.serialize=function(){return t.extend({},this._options)},Y.prototype.loadTile=function(Q,mt){var Ct=this.map._requestManager.normalizeTileURL(Q.tileID.canonical.url(this.tiles,this.scheme)),Dt={request:this.map._requestManager.transformRequest(Ct,t.ResourceType.Tile),uid:Q.uid,tileID:Q.tileID,zoom:Q.tileID.overscaledZ,tileSize:this.tileSize*Q.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};Dt.request.collectResourceTiming=this._collectResourceTiming,!Q.actor||Q.state==="expired"?(Q.actor=this.dispatcher.getActor(),Q.request=Q.actor.send("loadTile",Dt,Kt.bind(this))):Q.state==="loading"?Q.reloadCallback=mt:Q.request=Q.actor.send("reloadTile",Dt,Kt.bind(this));function Kt(fe,Ce){if(delete Q.request,Q.aborted)return mt(null);if(fe&&fe.status!==404)return mt(fe);Ce&&Ce.resourceTiming&&(Q.resourceTiming=Ce.resourceTiming),this.map._refreshExpiredTiles&&Ce&&Q.setExpiryData(Ce),Q.loadVectorData(Ce,this.map.painter),t.cacheEntryPossiblyAdded(this.dispatcher),mt(null),Q.reloadCallback&&(this.loadTile(Q,Q.reloadCallback),Q.reloadCallback=null)}},Y.prototype.abortTile=function(Q){Q.request&&(Q.request.cancel(),delete Q.request),Q.actor&&Q.actor.send("abortTile",{uid:Q.uid,type:this.type,source:this.id},void 0)},Y.prototype.unloadTile=function(Q){Q.unloadVectorData(),Q.actor&&Q.actor.send("removeTile",{uid:Q.uid,type:this.type,source:this.id},void 0)},Y.prototype.hasTransition=function(){return!1},Y}(t.Evented),$=function(dt){function Y(gt,Q,mt,Ct){dt.call(this),this.id=gt,this.dispatcher=mt,this.setEventedParent(Ct),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.extend({type:"raster"},Q),t.extend(this,t.pick(Q,["url","scheme","tileSize"]))}return dt&&(Y.__proto__=dt),Y.prototype=Object.create(dt&&dt.prototype),Y.prototype.constructor=Y,Y.prototype.load=function(){var Q=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=U(this._options,this.map._requestManager,function(mt,Ct){Q._tileJSONRequest=null,Q._loaded=!0,mt?Q.fire(new t.ErrorEvent(mt)):Ct&&(t.extend(Q,Ct),Ct.bounds&&(Q.tileBounds=new O(Ct.bounds,Q.minzoom,Q.maxzoom)),t.postTurnstileEvent(Ct.tiles),t.postMapLoadEvent(Ct.tiles,Q.map._getMapId(),Q.map._requestManager._skuToken),Q.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),Q.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))})},Y.prototype.loaded=function(){return this._loaded},Y.prototype.onAdd=function(Q){this.map=Q,this.load()},Y.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},Y.prototype.serialize=function(){return t.extend({},this._options)},Y.prototype.hasTile=function(Q){return!this.tileBounds||this.tileBounds.contains(Q.canonical)},Y.prototype.loadTile=function(Q,mt){var Ct=this,Dt=this.map._requestManager.normalizeTileURL(Q.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);Q.request=t.getImage(this.map._requestManager.transformRequest(Dt,t.ResourceType.Tile),function(Kt,fe){if(delete Q.request,Q.aborted)Q.state="unloaded",mt(null);else if(Kt)Q.state="errored",mt(Kt);else if(fe){Ct.map._refreshExpiredTiles&&Q.setExpiryData(fe),delete fe.cacheControl,delete fe.expires;var Ce=Ct.map.painter.context,Je=Ce.gl;Q.texture=Ct.map.painter.getTileTexture(fe.width),Q.texture?Q.texture.update(fe,{useMipmap:!0}):(Q.texture=new t.Texture(Ce,fe,Je.RGBA,{useMipmap:!0}),Q.texture.bind(Je.LINEAR,Je.CLAMP_TO_EDGE,Je.LINEAR_MIPMAP_NEAREST),Ce.extTextureFilterAnisotropic&&Je.texParameterf(Je.TEXTURE_2D,Ce.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Ce.extTextureFilterAnisotropicMax)),Q.state="loaded",t.cacheEntryPossiblyAdded(Ct.dispatcher),mt(null)}})},Y.prototype.abortTile=function(Q,mt){Q.request&&(Q.request.cancel(),delete Q.request),mt()},Y.prototype.unloadTile=function(Q,mt){Q.texture&&this.map.painter.saveTileTexture(Q.texture),mt()},Y.prototype.hasTransition=function(){return!1},Y}(t.Evented),tt=function(dt){function Y(gt,Q,mt,Ct){dt.call(this,gt,Q,mt,Ct),this.type="raster-dem",this.maxzoom=22,this._options=t.extend({type:"raster-dem"},Q),this.encoding=Q.encoding||"mapbox"}return dt&&(Y.__proto__=dt),Y.prototype=Object.create(dt&&dt.prototype),Y.prototype.constructor=Y,Y.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},Y.prototype.loadTile=function(Q,mt){var Ct=this.map._requestManager.normalizeTileURL(Q.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);Q.request=t.getImage(this.map._requestManager.transformRequest(Ct,t.ResourceType.Tile),Dt.bind(this)),Q.neighboringTiles=this._getNeighboringTiles(Q.tileID);function Dt(fe,Ce){if(delete Q.request,Q.aborted)Q.state="unloaded",mt(null);else if(fe)Q.state="errored",mt(fe);else if(Ce){this.map._refreshExpiredTiles&&Q.setExpiryData(Ce),delete Ce.cacheControl,delete Ce.expires;var Je=t.window.ImageBitmap&&Ce instanceof t.window.ImageBitmap&&t.offscreenCanvasSupported(),ur=Je?Ce:t.browser.getImageData(Ce,1),vr={uid:Q.uid,coord:Q.tileID,source:this.id,rawImageData:ur,encoding:this.encoding};(!Q.actor||Q.state==="expired")&&(Q.actor=this.dispatcher.getActor(),Q.actor.send("loadDEMTile",vr,Kt.bind(this)))}}function Kt(fe,Ce){fe&&(Q.state="errored",mt(fe)),Ce&&(Q.dem=Ce,Q.needsHillshadePrepare=!0,Q.state="loaded",mt(null))}},Y.prototype._getNeighboringTiles=function(Q){var mt=Q.canonical,Ct=Math.pow(2,mt.z),Dt=(mt.x-1+Ct)%Ct,Kt=mt.x===0?Q.wrap-1:Q.wrap,fe=(mt.x+1+Ct)%Ct,Ce=mt.x+1===Ct?Q.wrap+1:Q.wrap,Je={};return Je[new t.OverscaledTileID(Q.overscaledZ,Kt,mt.z,Dt,mt.y).key]={backfilled:!1},Je[new t.OverscaledTileID(Q.overscaledZ,Ce,mt.z,fe,mt.y).key]={backfilled:!1},mt.y>0&&(Je[new t.OverscaledTileID(Q.overscaledZ,Kt,mt.z,Dt,mt.y-1).key]={backfilled:!1},Je[new t.OverscaledTileID(Q.overscaledZ,Q.wrap,mt.z,mt.x,mt.y-1).key]={backfilled:!1},Je[new t.OverscaledTileID(Q.overscaledZ,Ce,mt.z,fe,mt.y-1).key]={backfilled:!1}),mt.y+1<Ct&&(Je[new t.OverscaledTileID(Q.overscaledZ,Kt,mt.z,Dt,mt.y+1).key]={backfilled:!1},Je[new t.OverscaledTileID(Q.overscaledZ,Q.wrap,mt.z,mt.x,mt.y+1).key]={backfilled:!1},Je[new t.OverscaledTileID(Q.overscaledZ,Ce,mt.z,fe,mt.y+1).key]={backfilled:!1}),Je},Y.prototype.unloadTile=function(Q){Q.demTexture&&this.map.painter.saveTileTexture(Q.demTexture),Q.fbo&&(Q.fbo.destroy(),delete Q.fbo),Q.dem&&delete Q.dem,delete Q.neighboringTiles,Q.state="unloaded",Q.actor&&Q.actor.send("removeDEMTile",{uid:Q.uid,source:this.id})},Y}($),Z=function(dt){function Y(gt,Q,mt,Ct){dt.call(this),this.id=gt,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=mt.getActor(),this.setEventedParent(Ct),this._data=Q.data,this._options=t.extend({},Q),this._collectResourceTiming=Q.collectResourceTiming,this._resourceTiming=[],Q.maxzoom!==void 0&&(this.maxzoom=Q.maxzoom),Q.type&&(this.type=Q.type),Q.attribution&&(this.attribution=Q.attribution),this.promoteId=Q.promoteId;var Dt=t.EXTENT/this.tileSize;this.workerOptions=t.extend({source:this.id,cluster:Q.cluster||!1,geojsonVtOptions:{buffer:(Q.buffer!==void 0?Q.buffer:128)*Dt,tolerance:(Q.tolerance!==void 0?Q.tolerance:.375)*Dt,extent:t.EXTENT,maxZoom:this.maxzoom,lineMetrics:Q.lineMetrics||!1,generateId:Q.generateId||!1},superclusterOptions:{maxZoom:Q.clusterMaxZoom!==void 0?Math.min(Q.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:t.EXTENT,radius:(Q.clusterRadius||50)*Dt,log:!1,generateId:Q.generateId||!1},clusterProperties:Q.clusterProperties},Q.workerOptions)}return dt&&(Y.__proto__=dt),Y.prototype=Object.create(dt&&dt.prototype),Y.prototype.constructor=Y,Y.prototype.load=function(){var Q=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(mt){if(mt){Q.fire(new t.ErrorEvent(mt));return}var Ct={dataType:"source",sourceDataType:"metadata"};Q._collectResourceTiming&&Q._resourceTiming&&Q._resourceTiming.length>0&&(Ct.resourceTiming=Q._resourceTiming,Q._resourceTiming=[]),Q.fire(new t.Event("data",Ct))})},Y.prototype.onAdd=function(Q){this.map=Q,this.load()},Y.prototype.setData=function(Q){var mt=this;return this._data=Q,this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(Ct){if(Ct){mt.fire(new t.ErrorEvent(Ct));return}var Dt={dataType:"source",sourceDataType:"content"};mt._collectResourceTiming&&mt._resourceTiming&&mt._resourceTiming.length>0&&(Dt.resourceTiming=mt._resourceTiming,mt._resourceTiming=[]),mt.fire(new t.Event("data",Dt))}),this},Y.prototype.getClusterExpansionZoom=function(Q,mt){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:Q,source:this.id},mt),this},Y.prototype.getClusterChildren=function(Q,mt){return this.actor.send("geojson.getClusterChildren",{clusterId:Q,source:this.id},mt),this},Y.prototype.getClusterLeaves=function(Q,mt,Ct,Dt){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:Q,limit:mt,offset:Ct},Dt),this},Y.prototype._updateWorkerData=function(Q){var mt=this;this._loaded=!1;var Ct=t.extend({},this.workerOptions),Dt=this._data;typeof Dt=="string"?(Ct.request=this.map._requestManager.transformRequest(t.browser.resolveURL(Dt),t.ResourceType.Source),Ct.request.collectResourceTiming=this._collectResourceTiming):Ct.data=JSON.stringify(Dt),this.actor.send(this.type+".loadData",Ct,function(Kt,fe){mt._removed||fe&&fe.abandoned||(mt._loaded=!0,fe&&fe.resourceTiming&&fe.resourceTiming[mt.id]&&(mt._resourceTiming=fe.resourceTiming[mt.id].slice(0)),mt.actor.send(mt.type+".coalesce",{source:Ct.source},null),Q(Kt))})},Y.prototype.loaded=function(){return this._loaded},Y.prototype.loadTile=function(Q,mt){var Ct=this,Dt=Q.actor?"reloadTile":"loadTile";Q.actor=this.actor;var Kt={type:this.type,uid:Q.uid,tileID:Q.tileID,zoom:Q.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};Q.request=this.actor.send(Dt,Kt,function(fe,Ce){return delete Q.request,Q.unloadVectorData(),Q.aborted?mt(null):fe?mt(fe):(Q.loadVectorData(Ce,Ct.map.painter,Dt==="reloadTile"),mt(null))})},Y.prototype.abortTile=function(Q){Q.request&&(Q.request.cancel(),delete Q.request),Q.aborted=!0},Y.prototype.unloadTile=function(Q){Q.unloadVectorData(),this.actor.send("removeTile",{uid:Q.uid,type:this.type,source:this.id})},Y.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},Y.prototype.serialize=function(){return t.extend({},this._options,{type:this.type,data:this._data})},Y.prototype.hasTransition=function(){return!1},Y}(t.Evented),X=t.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),J=function(dt){function Y(gt,Q,mt,Ct){dt.call(this),this.id=gt,this.dispatcher=mt,this.coordinates=Q.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(Ct),this.options=Q}return dt&&(Y.__proto__=dt),Y.prototype=Object.create(dt&&dt.prototype),Y.prototype.constructor=Y,Y.prototype.load=function(Q,mt){var Ct=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,t.getImage(this.map._requestManager.transformRequest(this.url,t.ResourceType.Image),function(Dt,Kt){Ct._loaded=!0,Dt?Ct.fire(new t.ErrorEvent(Dt)):Kt&&(Ct.image=Kt,Q&&(Ct.coordinates=Q),mt&&mt(),Ct._finishLoading())})},Y.prototype.loaded=function(){return this._loaded},Y.prototype.updateImage=function(Q){var mt=this;return!this.image||!Q.url?this:(this.options.url=Q.url,this.load(Q.coordinates,function(){mt.texture=null}),this)},Y.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})))},Y.prototype.onAdd=function(Q){this.map=Q,this.load()},Y.prototype.setCoordinates=function(Q){var mt=this;this.coordinates=Q;var Ct=Q.map(t.MercatorCoordinate.fromLngLat);this.tileID=st(Ct),this.minzoom=this.maxzoom=this.tileID.z;var Dt=Ct.map(function(Kt){return mt.tileID.getTilePoint(Kt)._round()});return this._boundsArray=new t.StructArrayLayout4i8,this._boundsArray.emplaceBack(Dt[0].x,Dt[0].y,0,0),this._boundsArray.emplaceBack(Dt[1].x,Dt[1].y,t.EXTENT,0),this._boundsArray.emplaceBack(Dt[3].x,Dt[3].y,0,t.EXTENT),this._boundsArray.emplaceBack(Dt[2].x,Dt[2].y,t.EXTENT,t.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this},Y.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||!this.image)){var Q=this.map.painter.context,mt=Q.gl;this.boundsBuffer||(this.boundsBuffer=Q.createVertexBuffer(this._boundsArray,X.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new t.Texture(Q,this.image,mt.RGBA),this.texture.bind(mt.LINEAR,mt.CLAMP_TO_EDGE));for(var Ct in this.tiles){var Dt=this.tiles[Ct];Dt.state!=="loaded"&&(Dt.state="loaded",Dt.texture=this.texture)}}},Y.prototype.loadTile=function(Q,mt){this.tileID&&this.tileID.equals(Q.tileID.canonical)?(this.tiles[String(Q.tileID.wrap)]=Q,Q.buckets={},mt(null)):(Q.state="errored",mt(null))},Y.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},Y.prototype.hasTransition=function(){return!1},Y}(t.Evented);function st(dt){for(var Y=1/0,gt=1/0,Q=-1/0,mt=-1/0,Ct=0,Dt=dt;Ct<Dt.length;Ct+=1){var Kt=Dt[Ct];Y=Math.min(Y,Kt.x),gt=Math.min(gt,Kt.y),Q=Math.max(Q,Kt.x),mt=Math.max(mt,Kt.y)}var fe=Q-Y,Ce=mt-gt,Je=Math.max(fe,Ce),ur=Math.max(0,Math.floor(-Math.log(Je)/Math.LN2)),vr=Math.pow(2,ur);return new t.CanonicalTileID(ur,Math.floor((Y+Q)/2*vr),Math.floor((gt+mt)/2*vr))}var at=function(dt){function Y(gt,Q,mt,Ct){dt.call(this,gt,Q,mt,Ct),this.roundZoom=!0,this.type="video",this.options=Q}return dt&&(Y.__proto__=dt),Y.prototype=Object.create(dt&&dt.prototype),Y.prototype.constructor=Y,Y.prototype.load=function(){var Q=this;this._loaded=!1;var mt=this.options;this.urls=[];for(var Ct=0,Dt=mt.urls;Ct<Dt.length;Ct+=1){var Kt=Dt[Ct];this.urls.push(this.map._requestManager.transformRequest(Kt,t.ResourceType.Source).url)}t.getVideo(this.urls,function(fe,Ce){Q._loaded=!0,fe?Q.fire(new t.ErrorEvent(fe)):Ce&&(Q.video=Ce,Q.video.loop=!0,Q.video.addEventListener("playing",function(){Q.map.triggerRepaint()}),Q.map&&Q.video.play(),Q._finishLoading())})},Y.prototype.pause=function(){this.video&&this.video.pause()},Y.prototype.play=function(){this.video&&this.video.play()},Y.prototype.seek=function(Q){if(this.video){var mt=this.video.seekable;Q<mt.start(0)||Q>mt.end(0)?this.fire(new t.ErrorEvent(new t.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+mt.start(0)+" and "+mt.end(0)+"-second mark."))):this.video.currentTime=Q}},Y.prototype.getVideo=function(){return this.video},Y.prototype.onAdd=function(Q){this.map||(this.map=Q,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},Y.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var Q=this.map.painter.context,mt=Q.gl;this.boundsBuffer||(this.boundsBuffer=Q.createVertexBuffer(this._boundsArray,X.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(mt.LINEAR,mt.CLAMP_TO_EDGE),mt.texSubImage2D(mt.TEXTURE_2D,0,0,0,mt.RGBA,mt.UNSIGNED_BYTE,this.video)):(this.texture=new t.Texture(Q,this.video,mt.RGBA),this.texture.bind(mt.LINEAR,mt.CLAMP_TO_EDGE));for(var Ct in this.tiles){var Dt=this.tiles[Ct];Dt.state!=="loaded"&&(Dt.state="loaded",Dt.texture=this.texture)}}},Y.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},Y.prototype.hasTransition=function(){return this.video&&!this.video.paused},Y}(J),lt=function(dt){function Y(gt,Q,mt,Ct){dt.call(this,gt,Q,mt,Ct),Q.coordinates?(!Array.isArray(Q.coordinates)||Q.coordinates.length!==4||Q.coordinates.some(function(Dt){return!Array.isArray(Dt)||Dt.length!==2||Dt.some(function(Kt){return typeof Kt!="number"})}))&&this.fire(new t.ErrorEvent(new t.ValidationError("sources."+gt,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+gt,null,'missing required property "coordinates"'))),Q.animate&&typeof Q.animate!="boolean"&&this.fire(new t.ErrorEvent(new t.ValidationError("sources."+gt,null,'optional "animate" property must be a boolean value'))),Q.canvas?typeof Q.canvas!="string"&&!(Q.canvas instanceof t.window.HTMLCanvasElement)&&this.fire(new t.ErrorEvent(new t.ValidationError("sources."+gt,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+gt,null,'missing required property "canvas"'))),this.options=Q,this.animate=Q.animate!==void 0?Q.animate:!0}return dt&&(Y.__proto__=dt),Y.prototype=Object.create(dt&&dt.prototype),Y.prototype.constructor=Y,Y.prototype.load=function(){if(this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof t.window.HTMLCanvasElement?this.options.canvas:t.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()){this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero.")));return}this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading()},Y.prototype.getCanvas=function(){return this.canvas},Y.prototype.onAdd=function(Q){this.map=Q,this.load(),this.canvas&&this.animate&&this.play()},Y.prototype.onRemove=function(){this.pause()},Y.prototype.prepare=function(){var Q=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,Q=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,Q=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var mt=this.map.painter.context,Ct=mt.gl;this.boundsBuffer||(this.boundsBuffer=mt.createVertexBuffer(this._boundsArray,X.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(Q||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new t.Texture(mt,this.canvas,Ct.RGBA,{premultiply:!0});for(var Dt in this.tiles){var Kt=this.tiles[Dt];Kt.state!=="loaded"&&(Kt.state="loaded",Kt.texture=this.texture)}}},Y.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},Y.prototype.hasTransition=function(){return this._playing},Y.prototype._hasInvalidDimensions=function(){for(var Q=0,mt=[this.canvas.width,this.canvas.height];Q<mt.length;Q+=1){var Ct=mt[Q];if(isNaN(Ct)||Ct<=0)return!0}return!1},Y}(J),F={vector:G,raster:$,"raster-dem":tt,geojson:Z,video:at,image:J,canvas:lt},H=function(dt,Y,gt,Q){var mt=new F[Y.type](dt,Y,gt,Q);if(mt.id!==dt)throw new Error("Expected Source id to be "+dt+" instead of "+mt.id);return t.bindAll(["load","abort","unload","serialize","prepare"],mt),mt},et=function(dt){return F[dt]},q=function(dt,Y){F[dt]=Y};function W(dt,Y){var gt=t.identity([]);return t.translate(gt,gt,[1,1,0]),t.scale(gt,gt,[dt.width*.5,dt.height*.5,1]),t.multiply(gt,gt,dt.calculatePosMatrix(Y.toUnwrapped()))}function K(dt,Y,gt){if(dt)for(var Q=0,mt=dt;Q<mt.length;Q+=1){var Ct=mt[Q],Dt=Y[Ct];if(Dt&&Dt.source===gt&&Dt.type==="fill-extrusion")return!0}else for(var Kt in Y){var fe=Y[Kt];if(fe.source===gt&&fe.type==="fill-extrusion")return!0}return!1}function nt(dt,Y,gt,Q,mt,Ct){var Dt=K(mt&&mt.layers,Y,dt.id),Kt=Ct.maxPitchScaleFactor(),fe=dt.tilesIn(Q,Kt,Dt);fe.sort(ct);for(var Ce=[],Je=0,ur=fe;Je<ur.length;Je+=1){var vr=ur[Je];Ce.push({wrappedTileID:vr.tileID.wrapped().key,queryResults:vr.tile.queryRenderedFeatures(Y,gt,dt._state,vr.queryGeometry,vr.cameraQueryGeometry,vr.scale,mt,Ct,Kt,W(dt.transform,vr.tileID))})}var Lr=bt(Ce);for(var Yr in Lr)Lr[Yr].forEach(function($r){var Vr=$r.feature,Jr=dt.getFeatureState(Vr.layer["source-layer"],Vr.id);Vr.source=Vr.layer.source,Vr.layer["source-layer"]&&(Vr.sourceLayer=Vr.layer["source-layer"]),Vr.state=Jr});return Lr}function it(dt,Y,gt,Q,mt,Ct,Dt){for(var Kt={},fe=Ct.queryRenderedSymbols(Q),Ce=[],Je=0,ur=Object.keys(fe).map(Number);Je<ur.length;Je+=1){var vr=ur[Je];Ce.push(Dt[vr])}Ce.sort(ct);for(var Lr=function(){var pn=$r[Yr],Ln=pn.featureIndex.lookupSymbolFeatures(fe[pn.bucketInstanceId],Y,pn.bucketIndex,pn.sourceLayerIndex,mt.filter,mt.layers,mt.availableImages,dt);for(var Bn in Ln){var Jn=Kt[Bn]=Kt[Bn]||[],ei=Ln[Bn];ei.sort(function(bi,Ai){var Li=pn.featureSortOrder;if(Li){var Yi=Li.indexOf(bi.featureIndex),oa=Li.indexOf(Ai.featureIndex);return oa-Yi}else return Ai.featureIndex-bi.featureIndex});for(var qn=0,di=ei;qn<di.length;qn+=1){var _i=di[qn];Jn.push(_i)}}},Yr=0,$r=Ce;Yr<$r.length;Yr+=1)Lr();var Vr=function(pn){Kt[pn].forEach(function(Ln){var Bn=Ln.feature,Jn=dt[pn],ei=gt[Jn.source],qn=ei.getFeatureState(Bn.layer["source-layer"],Bn.id);Bn.source=Bn.layer.source,Bn.layer["source-layer"]&&(Bn.sourceLayer=Bn.layer["source-layer"]),Bn.state=qn})};for(var Jr in Kt)Vr(Jr);return Kt}function ot(dt,Y){for(var gt=dt.getRenderableIds().map(function(fe){return dt.getTileByID(fe)}),Q=[],mt={},Ct=0;Ct<gt.length;Ct++){var Dt=gt[Ct],Kt=Dt.tileID.canonical.key;mt[Kt]||(mt[Kt]=!0,Dt.querySourceFeatures(Q,Y))}return Q}function ct(dt,Y){var gt=dt.tileID,Q=Y.tileID;return gt.overscaledZ-Q.overscaledZ||gt.canonical.y-Q.canonical.y||gt.wrap-Q.wrap||gt.canonical.x-Q.canonical.x}function bt(dt){for(var Y={},gt={},Q=0,mt=dt;Q<mt.length;Q+=1){var Ct=mt[Q],Dt=Ct.queryResults,Kt=Ct.wrappedTileID,fe=gt[Kt]=gt[Kt]||{};for(var Ce in Dt)for(var Je=Dt[Ce],ur=fe[Ce]=fe[Ce]||{},vr=Y[Ce]=Y[Ce]||[],Lr=0,Yr=Je;Lr<Yr.length;Lr+=1){var $r=Yr[Lr];ur[$r.featureIndex]||(ur[$r.featureIndex]=!0,vr.push($r))}}return Y}var ut=function(Y,gt){this.max=Y,this.onRemove=gt,this.reset()};ut.prototype.reset=function(){for(var Y in this.data)for(var gt=0,Q=this.data[Y];gt<Q.length;gt+=1){var mt=Q[gt];mt.timeout&&clearTimeout(mt.timeout),this.onRemove(mt.value)}return this.data={},this.order=[],this},ut.prototype.add=function(Y,gt,Q){var mt=this,Ct=Y.wrapped().key;this.data[Ct]===void 0&&(this.data[Ct]=[]);var Dt={value:gt,timeout:void 0};if(Q!==void 0&&(Dt.timeout=setTimeout(function(){mt.remove(Y,Dt)},Q)),this.data[Ct].push(Dt),this.order.push(Ct),this.order.length>this.max){var Kt=this._getAndRemoveByKey(this.order[0]);Kt&&this.onRemove(Kt)}return this},ut.prototype.has=function(Y){return Y.wrapped().key in this.data},ut.prototype.getAndRemove=function(Y){return this.has(Y)?this._getAndRemoveByKey(Y.wrapped().key):null},ut.prototype._getAndRemoveByKey=function(Y){var gt=this.data[Y].shift();return gt.timeout&&clearTimeout(gt.timeout),this.data[Y].length===0&&delete this.data[Y],this.order.splice(this.order.indexOf(Y),1),gt.value},ut.prototype.getByKey=function(Y){var gt=this.data[Y];return gt?gt[0].value:null},ut.prototype.get=function(Y){if(!this.has(Y))return null;var gt=this.data[Y.wrapped().key][0];return gt.value},ut.prototype.remove=function(Y,gt){if(!this.has(Y))return this;var Q=Y.wrapped().key,mt=gt===void 0?0:this.data[Q].indexOf(gt),Ct=this.data[Q][mt];return this.data[Q].splice(mt,1),Ct.timeout&&clearTimeout(Ct.timeout),this.data[Q].length===0&&delete this.data[Q],this.onRemove(Ct.value),this.order.splice(this.order.indexOf(Q),1),this},ut.prototype.setMaxSize=function(Y){for(this.max=Y;this.order.length>this.max;){var gt=this._getAndRemoveByKey(this.order[0]);gt&&this.onRemove(gt)}return this},ut.prototype.filter=function(Y){var gt=[];for(var Q in this.data)for(var mt=0,Ct=this.data[Q];mt<Ct.length;mt+=1){var Dt=Ct[mt];Y(Dt.value)||gt.push(Dt)}for(var Kt=0,fe=gt;Kt<fe.length;Kt+=1){var Ce=fe[Kt];this.remove(Ce.value.tileID,Ce)}};var pt=function(Y,gt,Q){this.context=Y;var mt=Y.gl;this.buffer=mt.createBuffer(),this.dynamicDraw=Boolean(Q),this.context.unbindVAO(),Y.bindElementBuffer.set(this.buffer),mt.bufferData(mt.ELEMENT_ARRAY_BUFFER,gt.arrayBuffer,this.dynamicDraw?mt.DYNAMIC_DRAW:mt.STATIC_DRAW),this.dynamicDraw||delete gt.arrayBuffer};pt.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},pt.prototype.updateData=function(Y){var gt=this.context.gl;this.context.unbindVAO(),this.bind(),gt.bufferSubData(gt.ELEMENT_ARRAY_BUFFER,0,Y.arrayBuffer)},pt.prototype.destroy=function(){var Y=this.context.gl;this.buffer&&(Y.deleteBuffer(this.buffer),delete this.buffer)};var yt={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},Tt=function(Y,gt,Q,mt){this.length=gt.length,this.attributes=Q,this.itemSize=gt.bytesPerElement,this.dynamicDraw=mt,this.context=Y;var Ct=Y.gl;this.buffer=Ct.createBuffer(),Y.bindVertexBuffer.set(this.buffer),Ct.bufferData(Ct.ARRAY_BUFFER,gt.arrayBuffer,this.dynamicDraw?Ct.DYNAMIC_DRAW:Ct.STATIC_DRAW),this.dynamicDraw||delete gt.arrayBuffer};Tt.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},Tt.prototype.updateData=function(Y){var gt=this.context.gl;this.bind(),gt.bufferSubData(gt.ARRAY_BUFFER,0,Y.arrayBuffer)},Tt.prototype.enableAttributes=function(Y,gt){for(var Q=0;Q<this.attributes.length;Q++){var mt=this.attributes[Q],Ct=gt.attributes[mt.name];Ct!==void 0&&Y.enableVertexAttribArray(Ct)}},Tt.prototype.setVertexAttribPointers=function(Y,gt,Q){for(var mt=0;mt<this.attributes.length;mt++){var Ct=this.attributes[mt],Dt=gt.attributes[Ct.name];Dt!==void 0&&Y.vertexAttribPointer(Dt,Ct.components,Y[yt[Ct.type]],!1,this.itemSize,Ct.offset+this.itemSize*(Q||0))}},Tt.prototype.destroy=function(){var Y=this.context.gl;this.buffer&&(Y.deleteBuffer(this.buffer),delete this.buffer)};var kt=function(Y){this.gl=Y.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};kt.prototype.get=function(){return this.current},kt.prototype.set=function(Y){},kt.prototype.getDefault=function(){return this.default},kt.prototype.setDefault=function(){this.set(this.default)};var zt=function(dt){function Y(){dt.apply(this,arguments)}return dt&&(Y.__proto__=dt),Y.prototype=Object.create(dt&&dt.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return t.Color.transparent},Y.prototype.set=function(Q){var mt=this.current;Q.r===mt.r&&Q.g===mt.g&&Q.b===mt.b&&Q.a===mt.a&&!this.dirty||(this.gl.clearColor(Q.r,Q.g,Q.b,Q.a),this.current=Q,this.dirty=!1)},Y}(kt),Rt=function(dt){function Y(){dt.apply(this,arguments)}return dt&&(Y.__proto__=dt),Y.prototype=Object.create(dt&&dt.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return 1},Y.prototype.set=function(Q){Q===this.current&&!this.dirty||(this.gl.clearDepth(Q),this.current=Q,this.dirty=!1)},Y}(kt),Gt=function(dt){function Y(){dt.apply(this,arguments)}return dt&&(Y.__proto__=dt),Y.prototype=Object.create(dt&&dt.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return 0},Y.prototype.set=function(Q){Q===this.current&&!this.dirty||(this.gl.clearStencil(Q),this.current=Q,this.dirty=!1)},Y}(kt),wt=function(dt){function Y(){dt.apply(this,arguments)}return dt&&(Y.__proto__=dt),Y.prototype=Object.create(dt&&dt.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return[!0,!0,!0,!0]},Y.prototype.set=function(Q){var mt=this.current;Q[0]===mt[0]&&Q[1]===mt[1]&&Q[2]===mt[2]&&Q[3]===mt[3]&&!this.dirty||(this.gl.colorMask(Q[0],Q[1],Q[2],Q[3]),this.current=Q,this.dirty=!1)},Y}(kt),It=function(dt){function Y(){dt.apply(this,arguments)}return dt&&(Y.__proto__=dt),Y.prototype=Object.create(dt&&dt.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return!0},Y.prototype.set=function(Q){Q===this.current&&!this.dirty||(this.gl.depthMask(Q),this.current=Q,this.dirty=!1)},Y}(kt),$t=function(dt){function Y(){dt.apply(this,arguments)}return dt&&(Y.__proto__=dt),Y.prototype=Object.create(dt&&dt.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return 255},Y.prototype.set=function(Q){Q===this.current&&!this.dirty||(this.gl.stencilMask(Q),this.current=Q,this.dirty=!1)},Y}(kt),Qt=function(dt){function Y(){dt.apply(this,arguments)}return dt&&(Y.__proto__=dt),Y.prototype=Object.create(dt&&dt.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},Y.prototype.set=function(Q){var mt=this.current;Q.func===mt.func&&Q.ref===mt.ref&&Q.mask===mt.mask&&!this.dirty||(this.gl.stencilFunc(Q.func,Q.ref,Q.mask),this.current=Q,this.dirty=!1)},Y}(kt),Nt=function(dt){function Y(){dt.apply(this,arguments)}return dt&&(Y.__proto__=dt),Y.prototype=Object.create(dt&&dt.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){var Q=this.gl;return[Q.KEEP,Q.KEEP,Q.KEEP]},Y.prototype.set=function(Q){var mt=this.current;Q[0]===mt[0]&&Q[1]===mt[1]&&Q[2]===mt[2]&&!this.dirty||(this.gl.stencilOp(Q[0],Q[1],Q[2]),this.current=Q,this.dirty=!1)},Y}(kt),Pt=function(dt){function Y(){dt.apply(this,arguments)}return dt&&(Y.__proto__=dt),Y.prototype=Object.create(dt&&dt.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return!1},Y.prototype.set=function(Q){if(!(Q===this.current&&!this.dirty)){var mt=this.gl;Q?mt.enable(mt.STENCIL_TEST):mt.disable(mt.STENCIL_TEST),this.current=Q,this.dirty=!1}},Y}(kt),Yt=function(dt){function Y(){dt.apply(this,arguments)}return dt&&(Y.__proto__=dt),Y.prototype=Object.create(dt&&dt.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return[0,1]},Y.prototype.set=function(Q){var mt=this.current;Q[0]===mt[0]&&Q[1]===mt[1]&&!this.dirty||(this.gl.depthRange(Q[0],Q[1]),this.current=Q,this.dirty=!1)},Y}(kt),ve=function(dt){function Y(){dt.apply(this,arguments)}return dt&&(Y.__proto__=dt),Y.prototype=Object.create(dt&&dt.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return!1},Y.prototype.set=function(Q){if(!(Q===this.current&&!this.dirty)){var mt=this.gl;Q?mt.enable(mt.DEPTH_TEST):mt.disable(mt.DEPTH_TEST),this.current=Q,this.dirty=!1}},Y}(kt),Re=function(dt){function Y(){dt.apply(this,arguments)}return dt&&(Y.__proto__=dt),Y.prototype=Object.create(dt&&dt.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return this.gl.LESS},Y.prototype.set=function(Q){Q===this.current&&!this.dirty||(this.gl.depthFunc(Q),this.current=Q,this.dirty=!1)},Y}(kt),ir=function(dt){function Y(){dt.apply(this,arguments)}return dt&&(Y.__proto__=dt),Y.prototype=Object.create(dt&&dt.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return!1},Y.prototype.set=function(Q){if(!(Q===this.current&&!this.dirty)){var mt=this.gl;Q?mt.enable(mt.BLEND):mt.disable(mt.BLEND),this.current=Q,this.dirty=!1}},Y}(kt),Ie=function(dt){function Y(){dt.apply(this,arguments)}return dt&&(Y.__proto__=dt),Y.prototype=Object.create(dt&&dt.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){var Q=this.gl;return[Q.ONE,Q.ZERO]},Y.prototype.set=function(Q){var mt=this.current;Q[0]===mt[0]&&Q[1]===mt[1]&&!this.dirty||(this.gl.blendFunc(Q[0],Q[1]),this.current=Q,this.dirty=!1)},Y}(kt),Be=function(dt){function Y(){dt.apply(this,arguments)}return dt&&(Y.__proto__=dt),Y.prototype=Object.create(dt&&dt.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return t.Color.transparent},Y.prototype.set=function(Q){var mt=this.current;Q.r===mt.r&&Q.g===mt.g&&Q.b===mt.b&&Q.a===mt.a&&!this.dirty||(this.gl.blendColor(Q.r,Q.g,Q.b,Q.a),this.current=Q,this.dirty=!1)},Y}(kt),Ye=function(dt){function Y(){dt.apply(this,arguments)}return dt&&(Y.__proto__=dt),Y.prototype=Object.create(dt&&dt.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return this.gl.FUNC_ADD},Y.prototype.set=function(Q){Q===this.current&&!this.dirty||(this.gl.blendEquation(Q),this.current=Q,this.dirty=!1)},Y}(kt),ze=function(dt){function Y(){dt.apply(this,arguments)}return dt&&(Y.__proto__=dt),Y.prototype=Object.create(dt&&dt.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return!1},Y.prototype.set=function(Q){if(!(Q===this.current&&!this.dirty)){var mt=this.gl;Q?mt.enable(mt.CULL_FACE):mt.disable(mt.CULL_FACE),this.current=Q,this.dirty=!1}},Y}(kt),Ee=function(dt){function Y(){dt.apply(this,arguments)}return dt&&(Y.__proto__=dt),Y.prototype=Object.create(dt&&dt.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return this.gl.BACK},Y.prototype.set=function(Q){Q===this.current&&!this.dirty||(this.gl.cullFace(Q),this.current=Q,this.dirty=!1)},Y}(kt),Wt=function(dt){function Y(){dt.apply(this,arguments)}return dt&&(Y.__proto__=dt),Y.prototype=Object.create(dt&&dt.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return this.gl.CCW},Y.prototype.set=function(Q){Q===this.current&&!this.dirty||(this.gl.frontFace(Q),this.current=Q,this.dirty=!1)},Y}(kt),ee=function(dt){function Y(){dt.apply(this,arguments)}return dt&&(Y.__proto__=dt),Y.prototype=Object.create(dt&&dt.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(Q){Q===this.current&&!this.dirty||(this.gl.useProgram(Q),this.current=Q,this.dirty=!1)},Y}(kt),Xt=function(dt){function Y(){dt.apply(this,arguments)}return dt&&(Y.__proto__=dt),Y.prototype=Object.create(dt&&dt.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return this.gl.TEXTURE0},Y.prototype.set=function(Q){Q===this.current&&!this.dirty||(this.gl.activeTexture(Q),this.current=Q,this.dirty=!1)},Y}(kt),St=function(dt){function Y(){dt.apply(this,arguments)}return dt&&(Y.__proto__=dt),Y.prototype=Object.create(dt&&dt.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){var Q=this.gl;return[0,0,Q.drawingBufferWidth,Q.drawingBufferHeight]},Y.prototype.set=function(Q){var mt=this.current;Q[0]===mt[0]&&Q[1]===mt[1]&&Q[2]===mt[2]&&Q[3]===mt[3]&&!this.dirty||(this.gl.viewport(Q[0],Q[1],Q[2],Q[3]),this.current=Q,this.dirty=!1)},Y}(kt),Vt=function(dt){function Y(){dt.apply(this,arguments)}return dt&&(Y.__proto__=dt),Y.prototype=Object.create(dt&&dt.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(Q){if(!(Q===this.current&&!this.dirty)){var mt=this.gl;mt.bindFramebuffer(mt.FRAMEBUFFER,Q),this.current=Q,this.dirty=!1}},Y}(kt),Zt=function(dt){function Y(){dt.apply(this,arguments)}return dt&&(Y.__proto__=dt),Y.prototype=Object.create(dt&&dt.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(Q){if(!(Q===this.current&&!this.dirty)){var mt=this.gl;mt.bindRenderbuffer(mt.RENDERBUFFER,Q),this.current=Q,this.dirty=!1}},Y}(kt),qt=function(dt){function Y(){dt.apply(this,arguments)}return dt&&(Y.__proto__=dt),Y.prototype=Object.create(dt&&dt.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(Q){if(!(Q===this.current&&!this.dirty)){var mt=this.gl;mt.bindTexture(mt.TEXTURE_2D,Q),this.current=Q,this.dirty=!1}},Y}(kt),Te=function(dt){function Y(){dt.apply(this,arguments)}return dt&&(Y.__proto__=dt),Y.prototype=Object.create(dt&&dt.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(Q){if(!(Q===this.current&&!this.dirty)){var mt=this.gl;mt.bindBuffer(mt.ARRAY_BUFFER,Q),this.current=Q,this.dirty=!1}},Y}(kt),me=function(dt){function Y(){dt.apply(this,arguments)}return dt&&(Y.__proto__=dt),Y.prototype=Object.create(dt&&dt.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(Q){var mt=this.gl;mt.bindBuffer(mt.ELEMENT_ARRAY_BUFFER,Q),this.current=Q,this.dirty=!1},Y}(kt),Ne=function(dt){function Y(gt){dt.call(this,gt),this.vao=gt.extVertexArrayObject}return dt&&(Y.__proto__=dt),Y.prototype=Object.create(dt&&dt.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(Q){!this.vao||Q===this.current&&!this.dirty||(this.vao.bindVertexArrayOES(Q),this.current=Q,this.dirty=!1)},Y}(kt),Ke=function(dt){function Y(){dt.apply(this,arguments)}return dt&&(Y.__proto__=dt),Y.prototype=Object.create(dt&&dt.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return 4},Y.prototype.set=function(Q){if(!(Q===this.current&&!this.dirty)){var mt=this.gl;mt.pixelStorei(mt.UNPACK_ALIGNMENT,Q),this.current=Q,this.dirty=!1}},Y}(kt),He=function(dt){function Y(){dt.apply(this,arguments)}return dt&&(Y.__proto__=dt),Y.prototype=Object.create(dt&&dt.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return!1},Y.prototype.set=function(Q){if(!(Q===this.current&&!this.dirty)){var mt=this.gl;mt.pixelStorei(mt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Q),this.current=Q,this.dirty=!1}},Y}(kt),Xe=function(dt){function Y(){dt.apply(this,arguments)}return dt&&(Y.__proto__=dt),Y.prototype=Object.create(dt&&dt.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return!1},Y.prototype.set=function(Q){if(!(Q===this.current&&!this.dirty)){var mt=this.gl;mt.pixelStorei(mt.UNPACK_FLIP_Y_WEBGL,Q),this.current=Q,this.dirty=!1}},Y}(kt),er=function(dt){function Y(gt,Q){dt.call(this,gt),this.context=gt,this.parent=Q}return dt&&(Y.__proto__=dt),Y.prototype=Object.create(dt&&dt.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return null},Y}(kt),We=function(dt){function Y(){dt.apply(this,arguments)}return dt&&(Y.__proto__=dt),Y.prototype=Object.create(dt&&dt.prototype),Y.prototype.constructor=Y,Y.prototype.setDirty=function(){this.dirty=!0},Y.prototype.set=function(Q){if(!(Q===this.current&&!this.dirty)){this.context.bindFramebuffer.set(this.parent);var mt=this.gl;mt.framebufferTexture2D(mt.FRAMEBUFFER,mt.COLOR_ATTACHMENT0,mt.TEXTURE_2D,Q,0),this.current=Q,this.dirty=!1}},Y}(er),hr=function(dt){function Y(){dt.apply(this,arguments)}return dt&&(Y.__proto__=dt),Y.prototype=Object.create(dt&&dt.prototype),Y.prototype.constructor=Y,Y.prototype.set=function(Q){if(!(Q===this.current&&!this.dirty)){this.context.bindFramebuffer.set(this.parent);var mt=this.gl;mt.framebufferRenderbuffer(mt.FRAMEBUFFER,mt.DEPTH_ATTACHMENT,mt.RENDERBUFFER,Q),this.current=Q,this.dirty=!1}},Y}(er),Wr=function(Y,gt,Q,mt){this.context=Y,this.width=gt,this.height=Q;var Ct=Y.gl,Dt=this.framebuffer=Ct.createFramebuffer();this.colorAttachment=new We(Y,Dt),mt&&(this.depthAttachment=new hr(Y,Dt))};Wr.prototype.destroy=function(){var Y=this.context.gl,gt=this.colorAttachment.get();if(gt&&Y.deleteTexture(gt),this.depthAttachment){var Q=this.depthAttachment.get();Q&&Y.deleteRenderbuffer(Q)}Y.deleteFramebuffer(this.framebuffer)};var dn=519,Qr=function(Y,gt,Q){this.func=Y,this.mask=gt,this.range=Q};Qr.ReadOnly=!1,Qr.ReadWrite=!0,Qr.disabled=new Qr(dn,Qr.ReadOnly,[0,1]);var le=519,Qe=7680,Ze=function(Y,gt,Q,mt,Ct,Dt){this.test=Y,this.ref=gt,this.mask=Q,this.fail=mt,this.depthFail=Ct,this.pass=Dt};Ze.disabled=new Ze({func:le,mask:0},0,0,Qe,Qe,Qe);var Ve=0,_r=1,oe=771,Ht=function(Y,gt,Q){this.blendFunction=Y,this.blendColor=gt,this.mask=Q};Ht.Replace=[_r,Ve],Ht.disabled=new Ht(Ht.Replace,t.Color.transparent,[!1,!1,!1,!1]),Ht.unblended=new Ht(Ht.Replace,t.Color.transparent,[!0,!0,!0,!0]),Ht.alphaBlended=new Ht([_r,oe],t.Color.transparent,[!0,!0,!0,!0]);var te=1029,ne=2305,_e=function(Y,gt,Q){this.enable=Y,this.mode=gt,this.frontFace=Q};_e.disabled=new _e(!1,te,ne),_e.backCCW=new _e(!0,te,ne);var Pe=function(Y){this.gl=Y,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new zt(this),this.clearDepth=new Rt(this),this.clearStencil=new Gt(this),this.colorMask=new wt(this),this.depthMask=new It(this),this.stencilMask=new $t(this),this.stencilFunc=new Qt(this),this.stencilOp=new Nt(this),this.stencilTest=new Pt(this),this.depthRange=new Yt(this),this.depthTest=new ve(this),this.depthFunc=new Re(this),this.blend=new ir(this),this.blendFunc=new Ie(this),this.blendColor=new Be(this),this.blendEquation=new Ye(this),this.cullFace=new ze(this),this.cullFaceSide=new Ee(this),this.frontFace=new Wt(this),this.program=new ee(this),this.activeTexture=new Xt(this),this.viewport=new St(this),this.bindFramebuffer=new Vt(this),this.bindRenderbuffer=new Zt(this),this.bindTexture=new qt(this),this.bindVertexBuffer=new Te(this),this.bindElementBuffer=new me(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Ne(this),this.pixelStoreUnpack=new Ke(this),this.pixelStoreUnpackPremultiplyAlpha=new He(this),this.pixelStoreUnpackFlipY=new Xe(this),this.extTextureFilterAnisotropic=Y.getExtension("EXT_texture_filter_anisotropic")||Y.getExtension("MOZ_EXT_texture_filter_anisotropic")||Y.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=Y.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=Y.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(Y.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=Y.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=Y.getExtension("EXT_disjoint_timer_query")};Pe.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Pe.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Pe.prototype.createIndexBuffer=function(Y,gt){return new pt(this,Y,gt)},Pe.prototype.createVertexBuffer=function(Y,gt,Q){return new Tt(this,Y,gt,Q)},Pe.prototype.createRenderbuffer=function(Y,gt,Q){var mt=this.gl,Ct=mt.createRenderbuffer();return this.bindRenderbuffer.set(Ct),mt.renderbufferStorage(mt.RENDERBUFFER,Y,gt,Q),this.bindRenderbuffer.set(null),Ct},Pe.prototype.createFramebuffer=function(Y,gt,Q){return new Wr(this,Y,gt,Q)},Pe.prototype.clear=function(Y){var gt=Y.color,Q=Y.depth,mt=this.gl,Ct=0;gt&&(Ct|=mt.COLOR_BUFFER_BIT,this.clearColor.set(gt),this.colorMask.set([!0,!0,!0,!0])),typeof Q<"u"&&(Ct|=mt.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(Q),this.depthMask.set(!0)),mt.clear(Ct)},Pe.prototype.setCullFace=function(Y){Y.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(Y.mode),this.frontFace.set(Y.frontFace))},Pe.prototype.setDepthMode=function(Y){Y.func===this.gl.ALWAYS&&!Y.mask?this.depthTest.set(!1):(this.depthTest.set(!0),this.depthFunc.set(Y.func),this.depthMask.set(Y.mask),this.depthRange.set(Y.range))},Pe.prototype.setStencilMode=function(Y){Y.test.func===this.gl.ALWAYS&&!Y.mask?this.stencilTest.set(!1):(this.stencilTest.set(!0),this.stencilMask.set(Y.mask),this.stencilOp.set([Y.fail,Y.depthFail,Y.pass]),this.stencilFunc.set({func:Y.test.func,ref:Y.ref,mask:Y.test.mask}))},Pe.prototype.setColorMode=function(Y){t.deepEqual(Y.blendFunction,Ht.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(Y.blendFunction),this.blendColor.set(Y.blendColor)),this.colorMask.set(Y.mask)},Pe.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Et=function(dt){function Y(gt,Q,mt){var Ct=this;dt.call(this),this.id=gt,this.dispatcher=mt,this.on("data",function(Dt){Dt.dataType==="source"&&Dt.sourceDataType==="metadata"&&(Ct._sourceLoaded=!0),Ct._sourceLoaded&&!Ct._paused&&Dt.dataType==="source"&&Dt.sourceDataType==="content"&&(Ct.reload(),Ct.transform&&Ct.update(Ct.transform))}),this.on("error",function(){Ct._sourceErrored=!0}),this._source=H(gt,Q,mt,this),this._tiles={},this._cache=new ut(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new t.SourceFeatureState}return dt&&(Y.__proto__=dt),Y.prototype=Object.create(dt&&dt.prototype),Y.prototype.constructor=Y,Y.prototype.onAdd=function(Q){this.map=Q,this._maxTileCacheSize=Q?Q._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(Q)},Y.prototype.onRemove=function(Q){this._source&&this._source.onRemove&&this._source.onRemove(Q)},Y.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var Q in this._tiles){var mt=this._tiles[Q];if(mt.state!=="loaded"&&mt.state!=="errored")return!1}return!0},Y.prototype.getSource=function(){return this._source},Y.prototype.pause=function(){this._paused=!0},Y.prototype.resume=function(){if(!!this._paused){var Q=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,Q&&this.reload(),this.transform&&this.update(this.transform)}},Y.prototype._loadTile=function(Q,mt){return this._source.loadTile(Q,mt)},Y.prototype._unloadTile=function(Q){if(this._source.unloadTile)return this._source.unloadTile(Q,function(){})},Y.prototype._abortTile=function(Q){if(this._source.abortTile)return this._source.abortTile(Q,function(){})},Y.prototype.serialize=function(){return this._source.serialize()},Y.prototype.prepare=function(Q){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(var mt in this._tiles){var Ct=this._tiles[mt];Ct.upload(Q),Ct.prepare(this.map.style.imageManager)}},Y.prototype.getIds=function(){return t.values(this._tiles).map(function(Q){return Q.tileID}).sort(Mt).map(function(Q){return Q.key})},Y.prototype.getRenderableIds=function(Q){var mt=this,Ct=[];for(var Dt in this._tiles)this._isIdRenderable(Dt,Q)&&Ct.push(this._tiles[Dt]);return Q?Ct.sort(function(Kt,fe){var Ce=Kt.tileID,Je=fe.tileID,ur=new t.Point(Ce.canonical.x,Ce.canonical.y)._rotate(mt.transform.angle),vr=new t.Point(Je.canonical.x,Je.canonical.y)._rotate(mt.transform.angle);return Ce.overscaledZ-Je.overscaledZ||vr.y-ur.y||vr.x-ur.x}).map(function(Kt){return Kt.tileID.key}):Ct.map(function(Kt){return Kt.tileID}).sort(Mt).map(function(Kt){return Kt.key})},Y.prototype.hasRenderableParent=function(Q){var mt=this.findLoadedParent(Q,0);return mt?this._isIdRenderable(mt.tileID.key):!1},Y.prototype._isIdRenderable=function(Q,mt){return this._tiles[Q]&&this._tiles[Q].hasData()&&!this._coveredTiles[Q]&&(mt||!this._tiles[Q].holdingForFade())},Y.prototype.reload=function(){if(this._paused){this._shouldReloadOnResume=!0;return}this._cache.reset();for(var Q in this._tiles)this._tiles[Q].state!=="errored"&&this._reloadTile(Q,"reloading")},Y.prototype._reloadTile=function(Q,mt){var Ct=this._tiles[Q];!Ct||(Ct.state!=="loading"&&(Ct.state=mt),this._loadTile(Ct,this._tileLoaded.bind(this,Ct,Q,mt)))},Y.prototype._tileLoaded=function(Q,mt,Ct,Dt){if(Dt){Q.state="errored",Dt.status!==404?this._source.fire(new t.ErrorEvent(Dt,{tile:Q})):this.update(this.transform);return}Q.timeAdded=t.browser.now(),Ct==="expired"&&(Q.refreshedUponExpiration=!0),this._setTileReloadTimer(mt,Q),this.getSource().type==="raster-dem"&&Q.dem&&this._backfillDEM(Q),this._state.initializeTileState(Q,this.map?this.map.painter:null),this._source.fire(new t.Event("data",{dataType:"source",tile:Q,coord:Q.tileID}))},Y.prototype._backfillDEM=function(Q){for(var mt=this.getRenderableIds(),Ct=0;Ct<mt.length;Ct++){var Dt=mt[Ct];if(Q.neighboringTiles&&Q.neighboringTiles[Dt]){var Kt=this.getTileByID(Dt);fe(Q,Kt),fe(Kt,Q)}}function fe(Ce,Je){Ce.needsHillshadePrepare=!0;var ur=Je.tileID.canonical.x-Ce.tileID.canonical.x,vr=Je.tileID.canonical.y-Ce.tileID.canonical.y,Lr=Math.pow(2,Ce.tileID.canonical.z),Yr=Je.tileID.key;ur===0&&vr===0||Math.abs(vr)>1||(Math.abs(ur)>1&&(Math.abs(ur+Lr)===1?ur+=Lr:Math.abs(ur-Lr)===1&&(ur-=Lr)),!(!Je.dem||!Ce.dem)&&(Ce.dem.backfillBorder(Je.dem,ur,vr),Ce.neighboringTiles&&Ce.neighboringTiles[Yr]&&(Ce.neighboringTiles[Yr].backfilled=!0)))}},Y.prototype.getTile=function(Q){return this.getTileByID(Q.key)},Y.prototype.getTileByID=function(Q){return this._tiles[Q]},Y.prototype._retainLoadedChildren=function(Q,mt,Ct,Dt){for(var Kt in this._tiles){var fe=this._tiles[Kt];if(!(Dt[Kt]||!fe.hasData()||fe.tileID.overscaledZ<=mt||fe.tileID.overscaledZ>Ct)){for(var Ce=fe.tileID;fe&&fe.tileID.overscaledZ>mt+1;){var Je=fe.tileID.scaledTo(fe.tileID.overscaledZ-1);fe=this._tiles[Je.key],fe&&fe.hasData()&&(Ce=Je)}for(var ur=Ce;ur.overscaledZ>mt;)if(ur=ur.scaledTo(ur.overscaledZ-1),Q[ur.key]){Dt[Ce.key]=Ce;break}}}},Y.prototype.findLoadedParent=function(Q,mt){if(Q.key in this._loadedParentTiles){var Ct=this._loadedParentTiles[Q.key];return Ct&&Ct.tileID.overscaledZ>=mt?Ct:null}for(var Dt=Q.overscaledZ-1;Dt>=mt;Dt--){var Kt=Q.scaledTo(Dt),fe=this._getLoadedTile(Kt);if(fe)return fe}},Y.prototype._getLoadedTile=function(Q){var mt=this._tiles[Q.key];if(mt&&mt.hasData())return mt;var Ct=this._cache.getByKey(Q.wrapped().key);return Ct},Y.prototype.updateCacheSize=function(Q){var mt=Math.ceil(Q.width/this._source.tileSize)+1,Ct=Math.ceil(Q.height/this._source.tileSize)+1,Dt=mt*Ct,Kt=5,fe=Math.floor(Dt*Kt),Ce=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,fe):fe;this._cache.setMaxSize(Ce)},Y.prototype.handleWrapJump=function(Q){var mt=this._prevLng===void 0?Q:this._prevLng,Ct=Q-mt,Dt=Ct/360,Kt=Math.round(Dt);if(this._prevLng=Q,Kt){var fe={};for(var Ce in this._tiles){var Je=this._tiles[Ce];Je.tileID=Je.tileID.unwrapTo(Je.tileID.wrap+Kt),fe[Je.tileID.key]=Je}this._tiles=fe;for(var ur in this._timers)clearTimeout(this._timers[ur]),delete this._timers[ur];for(var vr in this._tiles){var Lr=this._tiles[vr];this._setTileReloadTimer(vr,Lr)}}},Y.prototype.update=function(Q){var mt=this;if(this.transform=Q,!(!this._sourceLoaded||this._paused)){this.updateCacheSize(Q),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={};var Ct;this.used?this._source.tileID?Ct=Q.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(bi){return new t.OverscaledTileID(bi.canonical.z,bi.wrap,bi.canonical.z,bi.canonical.x,bi.canonical.y)}):(Ct=Q.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(Ct=Ct.filter(function(bi){return mt._source.hasTile(bi)}))):Ct=[];var Dt=Q.coveringZoomLevel(this._source),Kt=Math.max(Dt-Y.maxOverzooming,this._source.minzoom),fe=Math.max(Dt+Y.maxUnderzooming,this._source.minzoom),Ce=this._updateRetainedTiles(Ct,Dt);if(se(this._source.type)){for(var Je={},ur={},vr=Object.keys(Ce),Lr=0,Yr=vr;Lr<Yr.length;Lr+=1){var $r=Yr[Lr],Vr=Ce[$r],Jr=this._tiles[$r];if(!(!Jr||Jr.fadeEndTime&&Jr.fadeEndTime<=t.browser.now())){var pn=this.findLoadedParent(Vr,Kt);pn&&(this._addTile(pn.tileID),Je[pn.tileID.key]=pn.tileID),ur[$r]=Vr}}this._retainLoadedChildren(ur,Dt,fe,Ce);for(var Ln in Je)Ce[Ln]||(this._coveredTiles[Ln]=!0,Ce[Ln]=Je[Ln])}for(var Bn in Ce)this._tiles[Bn].clearFadeHold();for(var Jn=t.keysDifference(this._tiles,Ce),ei=0,qn=Jn;ei<qn.length;ei+=1){var di=qn[ei],_i=this._tiles[di];_i.hasSymbolBuckets&&!_i.holdingForFade()?_i.setHoldDuration(this.map._fadeDuration):(!_i.hasSymbolBuckets||_i.symbolFadeFinished())&&this._removeTile(di)}this._updateLoadedParentTileCache()}},Y.prototype.releaseSymbolFadeTiles=function(){for(var Q in this._tiles)this._tiles[Q].holdingForFade()&&this._removeTile(Q)},Y.prototype._updateRetainedTiles=function(Q,mt){for(var Ct={},Dt={},Kt=Math.max(mt-Y.maxOverzooming,this._source.minzoom),fe=Math.max(mt+Y.maxUnderzooming,this._source.minzoom),Ce={},Je=0,ur=Q;Je<ur.length;Je+=1){var vr=ur[Je],Lr=this._addTile(vr);Ct[vr.key]=vr,!Lr.hasData()&&mt<this._source.maxzoom&&(Ce[vr.key]=vr)}this._retainLoadedChildren(Ce,mt,fe,Ct);for(var Yr=0,$r=Q;Yr<$r.length;Yr+=1){var Vr=$r[Yr],Jr=this._tiles[Vr.key];if(!Jr.hasData()){if(mt+1>this._source.maxzoom){var pn=Vr.children(this._source.maxzoom)[0],Ln=this.getTile(pn);if(!!Ln&&Ln.hasData()){Ct[pn.key]=pn;continue}}else{var Bn=Vr.children(this._source.maxzoom);if(Ct[Bn[0].key]&&Ct[Bn[1].key]&&Ct[Bn[2].key]&&Ct[Bn[3].key])continue}for(var Jn=Jr.wasRequested(),ei=Vr.overscaledZ-1;ei>=Kt;--ei){var qn=Vr.scaledTo(ei);if(Dt[qn.key]||(Dt[qn.key]=!0,Jr=this.getTile(qn),!Jr&&Jn&&(Jr=this._addTile(qn)),Jr&&(Ct[qn.key]=qn,Jn=Jr.wasRequested(),Jr.hasData())))break}}}return Ct},Y.prototype._updateLoadedParentTileCache=function(){this._loadedParentTiles={};for(var Q in this._tiles){for(var mt=[],Ct=void 0,Dt=this._tiles[Q].tileID;Dt.overscaledZ>0;){if(Dt.key in this._loadedParentTiles){Ct=this._loadedParentTiles[Dt.key];break}mt.push(Dt.key);var Kt=Dt.scaledTo(Dt.overscaledZ-1);if(Ct=this._getLoadedTile(Kt),Ct)break;Dt=Kt}for(var fe=0,Ce=mt;fe<Ce.length;fe+=1){var Je=Ce[fe];this._loadedParentTiles[Je]=Ct}}},Y.prototype._addTile=function(Q){var mt=this._tiles[Q.key];if(mt)return mt;mt=this._cache.getAndRemove(Q),mt&&(this._setTileReloadTimer(Q.key,mt),mt.tileID=Q,this._state.initializeTileState(mt,this.map?this.map.painter:null),this._cacheTimers[Q.key]&&(clearTimeout(this._cacheTimers[Q.key]),delete this._cacheTimers[Q.key],this._setTileReloadTimer(Q.key,mt)));var Ct=Boolean(mt);return Ct||(mt=new t.Tile(Q,this._source.tileSize*Q.overscaleFactor()),this._loadTile(mt,this._tileLoaded.bind(this,mt,Q.key,mt.state))),mt?(mt.uses++,this._tiles[Q.key]=mt,Ct||this._source.fire(new t.Event("dataloading",{tile:mt,coord:mt.tileID,dataType:"source"})),mt):null},Y.prototype._setTileReloadTimer=function(Q,mt){var Ct=this;Q in this._timers&&(clearTimeout(this._timers[Q]),delete this._timers[Q]);var Dt=mt.getExpiryTimeout();Dt&&(this._timers[Q]=setTimeout(function(){Ct._reloadTile(Q,"expired"),delete Ct._timers[Q]},Dt))},Y.prototype._removeTile=function(Q){var mt=this._tiles[Q];!mt||(mt.uses--,delete this._tiles[Q],this._timers[Q]&&(clearTimeout(this._timers[Q]),delete this._timers[Q]),!(mt.uses>0)&&(mt.hasData()&&mt.state!=="reloading"?this._cache.add(mt.tileID,mt,mt.getExpiryTimeout()):(mt.aborted=!0,this._abortTile(mt),this._unloadTile(mt))))},Y.prototype.clearTiles=function(){this._shouldReloadOnResume=!1,this._paused=!1;for(var Q in this._tiles)this._removeTile(Q);this._cache.reset()},Y.prototype.tilesIn=function(Q,mt,Ct){var Dt=this,Kt=[],fe=this.transform;if(!fe)return Kt;for(var Ce=Ct?fe.getCameraQueryGeometry(Q):Q,Je=Q.map(function(ei){return fe.pointCoordinate(ei)}),ur=Ce.map(function(ei){return fe.pointCoordinate(ei)}),vr=this.getIds(),Lr=1/0,Yr=1/0,$r=-1/0,Vr=-1/0,Jr=0,pn=ur;Jr<pn.length;Jr+=1){var Ln=pn[Jr];Lr=Math.min(Lr,Ln.x),Yr=Math.min(Yr,Ln.y),$r=Math.max($r,Ln.x),Vr=Math.max(Vr,Ln.y)}for(var Bn=function(ei){var qn=Dt._tiles[vr[ei]];if(!qn.holdingForFade()){var di=qn.tileID,_i=Math.pow(2,fe.zoom-qn.tileID.overscaledZ),bi=mt*qn.queryPadding*t.EXTENT/qn.tileSize/_i,Ai=[di.getTilePoint(new t.MercatorCoordinate(Lr,Yr)),di.getTilePoint(new t.MercatorCoordinate($r,Vr))];if(Ai[0].x-bi<t.EXTENT&&Ai[0].y-bi<t.EXTENT&&Ai[1].x+bi>=0&&Ai[1].y+bi>=0){var Li=Je.map(function(oa){return di.getTilePoint(oa)}),Yi=ur.map(function(oa){return di.getTilePoint(oa)});Kt.push({tile:qn,tileID:di,queryGeometry:Li,cameraQueryGeometry:Yi,scale:_i})}}},Jn=0;Jn<vr.length;Jn++)Bn(Jn);return Kt},Y.prototype.getVisibleCoordinates=function(Q){for(var mt=this,Ct=this.getRenderableIds(Q).map(function(Ce){return mt._tiles[Ce].tileID}),Dt=0,Kt=Ct;Dt<Kt.length;Dt+=1){var fe=Kt[Dt];fe.posMatrix=this.transform.calculatePosMatrix(fe.toUnwrapped())}return Ct},Y.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(se(this._source.type))for(var Q in this._tiles){var mt=this._tiles[Q];if(mt.fadeEndTime!==void 0&&mt.fadeEndTime>=t.browser.now())return!0}return!1},Y.prototype.setFeatureState=function(Q,mt,Ct){Q=Q||"_geojsonTileLayer",this._state.updateState(Q,mt,Ct)},Y.prototype.removeFeatureState=function(Q,mt,Ct){Q=Q||"_geojsonTileLayer",this._state.removeFeatureState(Q,mt,Ct)},Y.prototype.getFeatureState=function(Q,mt){return Q=Q||"_geojsonTileLayer",this._state.getState(Q,mt)},Y.prototype.setDependencies=function(Q,mt,Ct){var Dt=this._tiles[Q];Dt&&Dt.setDependencies(mt,Ct)},Y.prototype.reloadTilesForDependencies=function(Q,mt){for(var Ct in this._tiles){var Dt=this._tiles[Ct];Dt.hasDependency(Q,mt)&&this._reloadTile(Ct,"reloading")}this._cache.filter(function(Kt){return!Kt.hasDependency(Q,mt)})},Y}(t.Evented);Et.maxOverzooming=10,Et.maxUnderzooming=3;function Mt(dt,Y){var gt=Math.abs(dt.wrap*2)-+(dt.wrap<0),Q=Math.abs(Y.wrap*2)-+(Y.wrap<0);return dt.overscaledZ-Y.overscaledZ||Q-gt||Y.canonical.y-dt.canonical.y||Y.canonical.x-dt.canonical.x}function se(dt){return dt==="raster"||dt==="image"||dt==="video"}function ce(){return new t.window.Worker(Rd.workerUrl)}var de="mapboxgl_preloaded_worker_pool",Se=function(){this.active={}};Se.prototype.acquire=function(Y){if(!this.workers)for(this.workers=[];this.workers.length<Se.workerCount;)this.workers.push(new ce);return this.active[Y]=!0,this.workers.slice()},Se.prototype.release=function(Y){delete this.active[Y],this.numActive()===0&&(this.workers.forEach(function(gt){gt.terminate()}),this.workers=null)},Se.prototype.isPreloaded=function(){return!!this.active[de]},Se.prototype.numActive=function(){return Object.keys(this.active).length};var ye=Math.floor(t.browser.hardwareConcurrency/2);Se.workerCount=Math.max(Math.min(ye,6),1);var Ae;function Ge(){return Ae||(Ae=new Se),Ae}function sr(){var dt=Ge();dt.acquire(de)}function Er(){var dt=Ae;dt&&(dt.isPreloaded()&&dt.numActive()===1?(dt.release(de),Ae=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))}function kr(dt,Y){var gt={};for(var Q in dt)Q!=="ref"&&(gt[Q]=dt[Q]);return t.refProperties.forEach(function(mt){mt in Y&&(gt[mt]=Y[mt])}),gt}function Mr(dt){dt=dt.slice();for(var Y=Object.create(null),gt=0;gt<dt.length;gt++)Y[dt[gt].id]=dt[gt];for(var Q=0;Q<dt.length;Q++)"ref"in dt[Q]&&(dt[Q]=kr(dt[Q],Y[dt[Q].ref]));return dt}function Gr(){var dt={},Y=t.styleSpec.$version;for(var gt in t.styleSpec.$root){var Q=t.styleSpec.$root[gt];if(Q.required){var mt=null;gt==="version"?mt=Y:Q.type==="array"?mt=[]:mt={},mt!=null&&(dt[gt]=mt)}}return dt}var ar={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function xr(dt,Y,gt){gt.push({command:ar.addSource,args:[dt,Y[dt]]})}function Ir(dt,Y,gt){Y.push({command:ar.removeSource,args:[dt]}),gt[dt]=!0}function Hr(dt,Y,gt,Q){Ir(dt,gt,Q),xr(dt,Y,gt)}function Cr(dt,Y,gt){var Q;for(Q in dt[gt])if(!!dt[gt].hasOwnProperty(Q)&&Q!=="data"&&!t.deepEqual(dt[gt][Q],Y[gt][Q]))return!1;for(Q in Y[gt])if(!!Y[gt].hasOwnProperty(Q)&&Q!=="data"&&!t.deepEqual(dt[gt][Q],Y[gt][Q]))return!1;return!0}function ae(dt,Y,gt,Q){dt=dt||{},Y=Y||{};var mt;for(mt in dt)!dt.hasOwnProperty(mt)||Y.hasOwnProperty(mt)||Ir(mt,gt,Q);for(mt in Y)!Y.hasOwnProperty(mt)||(dt.hasOwnProperty(mt)?t.deepEqual(dt[mt],Y[mt])||(dt[mt].type==="geojson"&&Y[mt].type==="geojson"&&Cr(dt,Y,mt)?gt.push({command:ar.setGeoJSONSourceData,args:[mt,Y[mt].data]}):Hr(mt,Y,gt,Q)):xr(mt,Y,gt))}function Le(dt,Y,gt,Q,mt,Ct){dt=dt||{},Y=Y||{};var Dt;for(Dt in dt)!dt.hasOwnProperty(Dt)||t.deepEqual(dt[Dt],Y[Dt])||gt.push({command:Ct,args:[Q,Dt,Y[Dt],mt]});for(Dt in Y)!Y.hasOwnProperty(Dt)||dt.hasOwnProperty(Dt)||t.deepEqual(dt[Dt],Y[Dt])||gt.push({command:Ct,args:[Q,Dt,Y[Dt],mt]})}function $e(dt){return dt.id}function or(dt,Y){return dt[Y.id]=Y,dt}function Dr(dt,Y,gt){dt=dt||[],Y=Y||[];var Q=dt.map($e),mt=Y.map($e),Ct=dt.reduce(or,{}),Dt=Y.reduce(or,{}),Kt=Q.slice(),fe=Object.create(null),Ce,Je,ur,vr,Lr,Yr,$r;for(Ce=0,Je=0;Ce<Q.length;Ce++)ur=Q[Ce],Dt.hasOwnProperty(ur)?Je++:(gt.push({command:ar.removeLayer,args:[ur]}),Kt.splice(Kt.indexOf(ur,Je),1));for(Ce=0,Je=0;Ce<mt.length;Ce++)ur=mt[mt.length-1-Ce],Kt[Kt.length-1-Ce]!==ur&&(Ct.hasOwnProperty(ur)?(gt.push({command:ar.removeLayer,args:[ur]}),Kt.splice(Kt.lastIndexOf(ur,Kt.length-Je),1)):Je++,Yr=Kt[Kt.length-Ce],gt.push({command:ar.addLayer,args:[Dt[ur],Yr]}),Kt.splice(Kt.length-Ce,0,ur),fe[ur]=!0);for(Ce=0;Ce<mt.length;Ce++)if(ur=mt[Ce],vr=Ct[ur],Lr=Dt[ur],!(fe[ur]||t.deepEqual(vr,Lr))){if(!t.deepEqual(vr.source,Lr.source)||!t.deepEqual(vr["source-layer"],Lr["source-layer"])||!t.deepEqual(vr.type,Lr.type)){gt.push({command:ar.removeLayer,args:[ur]}),Yr=Kt[Kt.lastIndexOf(ur)+1],gt.push({command:ar.addLayer,args:[Lr,Yr]});continue}Le(vr.layout,Lr.layout,gt,ur,null,ar.setLayoutProperty),Le(vr.paint,Lr.paint,gt,ur,null,ar.setPaintProperty),t.deepEqual(vr.filter,Lr.filter)||gt.push({command:ar.setFilter,args:[ur,Lr.filter]}),(!t.deepEqual(vr.minzoom,Lr.minzoom)||!t.deepEqual(vr.maxzoom,Lr.maxzoom))&&gt.push({command:ar.setLayerZoomRange,args:[ur,Lr.minzoom,Lr.maxzoom]});for($r in vr)!vr.hasOwnProperty($r)||$r==="layout"||$r==="paint"||$r==="filter"||$r==="metadata"||$r==="minzoom"||$r==="maxzoom"||($r.indexOf("paint.")===0?Le(vr[$r],Lr[$r],gt,ur,$r.slice(6),ar.setPaintProperty):t.deepEqual(vr[$r],Lr[$r])||gt.push({command:ar.setLayerProperty,args:[ur,$r,Lr[$r]]}));for($r in Lr)!Lr.hasOwnProperty($r)||vr.hasOwnProperty($r)||$r==="layout"||$r==="paint"||$r==="filter"||$r==="metadata"||$r==="minzoom"||$r==="maxzoom"||($r.indexOf("paint.")===0?Le(vr[$r],Lr[$r],gt,ur,$r.slice(6),ar.setPaintProperty):t.deepEqual(vr[$r],Lr[$r])||gt.push({command:ar.setLayerProperty,args:[ur,$r,Lr[$r]]}))}}function Nr(dt,Y){if(!dt)return[{command:ar.setStyle,args:[Y]}];var gt=[];try{if(!t.deepEqual(dt.version,Y.version))return[{command:ar.setStyle,args:[Y]}];t.deepEqual(dt.center,Y.center)||gt.push({command:ar.setCenter,args:[Y.center]}),t.deepEqual(dt.zoom,Y.zoom)||gt.push({command:ar.setZoom,args:[Y.zoom]}),t.deepEqual(dt.bearing,Y.bearing)||gt.push({command:ar.setBearing,args:[Y.bearing]}),t.deepEqual(dt.pitch,Y.pitch)||gt.push({command:ar.setPitch,args:[Y.pitch]}),t.deepEqual(dt.sprite,Y.sprite)||gt.push({command:ar.setSprite,args:[Y.sprite]}),t.deepEqual(dt.glyphs,Y.glyphs)||gt.push({command:ar.setGlyphs,args:[Y.glyphs]}),t.deepEqual(dt.transition,Y.transition)||gt.push({command:ar.setTransition,args:[Y.transition]}),t.deepEqual(dt.light,Y.light)||gt.push({command:ar.setLight,args:[Y.light]});var Q={},mt=[];ae(dt.sources,Y.sources,mt,Q);var Ct=[];dt.layers&&dt.layers.forEach(function(Dt){Q[Dt.source]?gt.push({command:ar.removeLayer,args:[Dt.id]}):Ct.push(Dt)}),gt=gt.concat(mt),Dr(Ct,Y.layers,gt)}catch(Dt){console.warn("Unable to compute style diff:",Dt),gt=[{command:ar.setStyle,args:[Y]}]}return gt}var Fr=function(Y,gt){this.reset(Y,gt)};Fr.prototype.reset=function(Y,gt){this.points=Y||[],this._distances=[0];for(var Q=1;Q<this.points.length;Q++)this._distances[Q]=this._distances[Q-1]+this.points[Q].dist(this.points[Q-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(gt||0,this.length*.5),this.paddedLength=this.length-this.padding*2},Fr.prototype.lerp=function(Y){if(this.points.length===1)return this.points[0];Y=t.clamp(Y,0,1);for(var gt=1,Q=this._distances[gt],mt=Y*this.paddedLength+this.padding;Q<mt&&gt<this._distances.length;)Q=this._distances[++gt];var Ct=gt-1,Dt=this._distances[Ct],Kt=Q-Dt,fe=Kt>0?(mt-Dt)/Kt:0;return this.points[Ct].mult(1-fe).add(this.points[gt].mult(fe))};var Ar=function(Y,gt,Q){var mt=this.boxCells=[],Ct=this.circleCells=[];this.xCellCount=Math.ceil(Y/Q),this.yCellCount=Math.ceil(gt/Q);for(var Dt=0;Dt<this.xCellCount*this.yCellCount;Dt++)mt.push([]),Ct.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=Y,this.height=gt,this.xScale=this.xCellCount/Y,this.yScale=this.yCellCount/gt,this.boxUid=0,this.circleUid=0};Ar.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Ar.prototype.insert=function(Y,gt,Q,mt,Ct){this._forEachCell(gt,Q,mt,Ct,this._insertBoxCell,this.boxUid++),this.boxKeys.push(Y),this.bboxes.push(gt),this.bboxes.push(Q),this.bboxes.push(mt),this.bboxes.push(Ct)},Ar.prototype.insertCircle=function(Y,gt,Q,mt){this._forEachCell(gt-mt,Q-mt,gt+mt,Q+mt,this._insertCircleCell,this.circleUid++),this.circleKeys.push(Y),this.circles.push(gt),this.circles.push(Q),this.circles.push(mt)},Ar.prototype._insertBoxCell=function(Y,gt,Q,mt,Ct,Dt){this.boxCells[Ct].push(Dt)},Ar.prototype._insertCircleCell=function(Y,gt,Q,mt,Ct,Dt){this.circleCells[Ct].push(Dt)},Ar.prototype._query=function(Y,gt,Q,mt,Ct,Dt){if(Q<0||Y>this.width||mt<0||gt>this.height)return Ct?!1:[];var Kt=[];if(Y<=0&&gt<=0&&this.width<=Q&&this.height<=mt){if(Ct)return!0;for(var fe=0;fe<this.boxKeys.length;fe++)Kt.push({key:this.boxKeys[fe],x1:this.bboxes[fe*4],y1:this.bboxes[fe*4+1],x2:this.bboxes[fe*4+2],y2:this.bboxes[fe*4+3]});for(var Ce=0;Ce<this.circleKeys.length;Ce++){var Je=this.circles[Ce*3],ur=this.circles[Ce*3+1],vr=this.circles[Ce*3+2];Kt.push({key:this.circleKeys[Ce],x1:Je-vr,y1:ur-vr,x2:Je+vr,y2:ur+vr})}return Dt?Kt.filter(Dt):Kt}else{var Lr={hitTest:Ct,seenUids:{box:{},circle:{}}};return this._forEachCell(Y,gt,Q,mt,this._queryCell,Kt,Lr,Dt),Ct?Kt.length>0:Kt}},Ar.prototype._queryCircle=function(Y,gt,Q,mt,Ct){var Dt=Y-Q,Kt=Y+Q,fe=gt-Q,Ce=gt+Q;if(Kt<0||Dt>this.width||Ce<0||fe>this.height)return mt?!1:[];var Je=[],ur={hitTest:mt,circle:{x:Y,y:gt,radius:Q},seenUids:{box:{},circle:{}}};return this._forEachCell(Dt,fe,Kt,Ce,this._queryCellCircle,Je,ur,Ct),mt?Je.length>0:Je},Ar.prototype.query=function(Y,gt,Q,mt,Ct){return this._query(Y,gt,Q,mt,!1,Ct)},Ar.prototype.hitTest=function(Y,gt,Q,mt,Ct){return this._query(Y,gt,Q,mt,!0,Ct)},Ar.prototype.hitTestCircle=function(Y,gt,Q,mt){return this._queryCircle(Y,gt,Q,!0,mt)},Ar.prototype._queryCell=function(Y,gt,Q,mt,Ct,Dt,Kt,fe){var Ce=Kt.seenUids,Je=this.boxCells[Ct];if(Je!==null)for(var ur=this.bboxes,vr=0,Lr=Je;vr<Lr.length;vr+=1){var Yr=Lr[vr];if(!Ce.box[Yr]){Ce.box[Yr]=!0;var $r=Yr*4;if(Y<=ur[$r+2]&&gt<=ur[$r+3]&&Q>=ur[$r+0]&&mt>=ur[$r+1]&&(!fe||fe(this.boxKeys[Yr]))){if(Kt.hitTest)return Dt.push(!0),!0;Dt.push({key:this.boxKeys[Yr],x1:ur[$r],y1:ur[$r+1],x2:ur[$r+2],y2:ur[$r+3]})}}}var Vr=this.circleCells[Ct];if(Vr!==null)for(var Jr=this.circles,pn=0,Ln=Vr;pn<Ln.length;pn+=1){var Bn=Ln[pn];if(!Ce.circle[Bn]){Ce.circle[Bn]=!0;var Jn=Bn*3;if(this._circleAndRectCollide(Jr[Jn],Jr[Jn+1],Jr[Jn+2],Y,gt,Q,mt)&&(!fe||fe(this.circleKeys[Bn]))){if(Kt.hitTest)return Dt.push(!0),!0;var ei=Jr[Jn],qn=Jr[Jn+1],di=Jr[Jn+2];Dt.push({key:this.circleKeys[Bn],x1:ei-di,y1:qn-di,x2:ei+di,y2:qn+di})}}}},Ar.prototype._queryCellCircle=function(Y,gt,Q,mt,Ct,Dt,Kt,fe){var Ce=Kt.circle,Je=Kt.seenUids,ur=this.boxCells[Ct];if(ur!==null)for(var vr=this.bboxes,Lr=0,Yr=ur;Lr<Yr.length;Lr+=1){var $r=Yr[Lr];if(!Je.box[$r]){Je.box[$r]=!0;var Vr=$r*4;if(this._circleAndRectCollide(Ce.x,Ce.y,Ce.radius,vr[Vr+0],vr[Vr+1],vr[Vr+2],vr[Vr+3])&&(!fe||fe(this.boxKeys[$r])))return Dt.push(!0),!0}}var Jr=this.circleCells[Ct];if(Jr!==null)for(var pn=this.circles,Ln=0,Bn=Jr;Ln<Bn.length;Ln+=1){var Jn=Bn[Ln];if(!Je.circle[Jn]){Je.circle[Jn]=!0;var ei=Jn*3;if(this._circlesCollide(pn[ei],pn[ei+1],pn[ei+2],Ce.x,Ce.y,Ce.radius)&&(!fe||fe(this.circleKeys[Jn])))return Dt.push(!0),!0}}},Ar.prototype._forEachCell=function(Y,gt,Q,mt,Ct,Dt,Kt,fe){for(var Ce=this._convertToXCellCoord(Y),Je=this._convertToYCellCoord(gt),ur=this._convertToXCellCoord(Q),vr=this._convertToYCellCoord(mt),Lr=Ce;Lr<=ur;Lr++)for(var Yr=Je;Yr<=vr;Yr++){var $r=this.xCellCount*Yr+Lr;if(Ct.call(this,Y,gt,Q,mt,$r,Dt,Kt,fe))return}},Ar.prototype._convertToXCellCoord=function(Y){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(Y*this.xScale)))},Ar.prototype._convertToYCellCoord=function(Y){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(Y*this.yScale)))},Ar.prototype._circlesCollide=function(Y,gt,Q,mt,Ct,Dt){var Kt=mt-Y,fe=Ct-gt,Ce=Q+Dt;return Ce*Ce>Kt*Kt+fe*fe},Ar.prototype._circleAndRectCollide=function(Y,gt,Q,mt,Ct,Dt,Kt){var fe=(Dt-mt)/2,Ce=Math.abs(Y-(mt+fe));if(Ce>fe+Q)return!1;var Je=(Kt-Ct)/2,ur=Math.abs(gt-(Ct+Je));if(ur>Je+Q)return!1;if(Ce<=fe||ur<=Je)return!0;var vr=Ce-fe,Lr=ur-Je;return vr*vr+Lr*Lr<=Q*Q};function Xr(dt,Y,gt,Q,mt){var Ct=t.create();return Y?(t.scale(Ct,Ct,[1/mt,1/mt,1]),gt||t.rotateZ(Ct,Ct,Q.angle)):t.multiply(Ct,Q.labelPlaneMatrix,dt),Ct}function Tn(dt,Y,gt,Q,mt){if(Y){var Ct=t.clone(dt);return t.scale(Ct,Ct,[mt,mt,1]),gt||t.rotateZ(Ct,Ct,-Q.angle),Ct}else return Q.glCoordMatrix}function un(dt,Y){var gt=[dt.x,dt.y,0,1];Tr(gt,gt,Y);var Q=gt[3];return{point:new t.Point(gt[0]/Q,gt[1]/Q),signedDistanceFromCamera:Q}}function Un(dt,Y){return .5+.5*(dt/Y)}function Dn(dt,Y){var gt=dt[0]/dt[3],Q=dt[1]/dt[3],mt=gt>=-Y[0]&&gt<=Y[0]&&Q>=-Y[1]&&Q<=Y[1];return mt}function Xn(dt,Y,gt,Q,mt,Ct,Dt,Kt){var fe=Q?dt.textSizeData:dt.iconSizeData,Ce=t.evaluateSizeForZoom(fe,gt.transform.zoom),Je=[256/gt.width*2+1,256/gt.height*2+1],ur=Q?dt.text.dynamicLayoutVertexArray:dt.icon.dynamicLayoutVertexArray;ur.clear();for(var vr=dt.lineVertexArray,Lr=Q?dt.text.placedSymbolArray:dt.icon.placedSymbolArray,Yr=gt.transform.width/gt.transform.height,$r=!1,Vr=0;Vr<Lr.length;Vr++){var Jr=Lr.get(Vr);if(Jr.hidden||Jr.writingMode===t.WritingMode.vertical&&!$r){ji(Jr.numGlyphs,ur);continue}$r=!1;var pn=[Jr.anchorX,Jr.anchorY,0,1];if(t.transformMat4(pn,pn,Y),!Dn(pn,Je)){ji(Jr.numGlyphs,ur);continue}var Ln=pn[3],Bn=Un(gt.transform.cameraToCenterDistance,Ln),Jn=t.evaluateSizeForFeature(fe,Ce,Jr),ei=Dt?Jn/Bn:Jn*Bn,qn=new t.Point(Jr.anchorX,Jr.anchorY),di=un(qn,mt).point,_i={},bi=Pi(Jr,ei,!1,Kt,Y,mt,Ct,dt.glyphOffsetArray,vr,ur,di,qn,_i,Yr);$r=bi.useVertical,(bi.notEnoughRoom||$r||bi.needsFlipping&&Pi(Jr,ei,!0,Kt,Y,mt,Ct,dt.glyphOffsetArray,vr,ur,di,qn,_i,Yr).notEnoughRoom)&&ji(Jr.numGlyphs,ur)}Q?dt.text.dynamicLayoutVertexBuffer.updateData(ur):dt.icon.dynamicLayoutVertexBuffer.updateData(ur)}function Gn(dt,Y,gt,Q,mt,Ct,Dt,Kt,fe,Ce,Je){var ur=Kt.glyphStartIndex+Kt.numGlyphs,vr=Kt.lineStartIndex,Lr=Kt.lineStartIndex+Kt.lineLength,Yr=Y.getoffsetX(Kt.glyphStartIndex),$r=Y.getoffsetX(ur-1),Vr=Wi(dt*Yr,gt,Q,mt,Ct,Dt,Kt.segment,vr,Lr,fe,Ce,Je);if(!Vr)return null;var Jr=Wi(dt*$r,gt,Q,mt,Ct,Dt,Kt.segment,vr,Lr,fe,Ce,Je);return Jr?{first:Vr,last:Jr}:null}function yi(dt,Y,gt,Q){if(dt===t.WritingMode.horizontal){var mt=Math.abs(gt.y-Y.y),Ct=Math.abs(gt.x-Y.x)*Q;if(mt>Ct)return{useVertical:!0}}return(dt===t.WritingMode.vertical?Y.y<gt.y:Y.x>gt.x)?{needsFlipping:!0}:null}function Pi(dt,Y,gt,Q,mt,Ct,Dt,Kt,fe,Ce,Je,ur,vr,Lr){var Yr=Y/24,$r=dt.lineOffsetX*Yr,Vr=dt.lineOffsetY*Yr,Jr;if(dt.numGlyphs>1){var pn=dt.glyphStartIndex+dt.numGlyphs,Ln=dt.lineStartIndex,Bn=dt.lineStartIndex+dt.lineLength,Jn=Gn(Yr,Kt,$r,Vr,gt,Je,ur,dt,fe,Ct,vr);if(!Jn)return{notEnoughRoom:!0};var ei=un(Jn.first.point,Dt).point,qn=un(Jn.last.point,Dt).point;if(Q&&!gt){var di=yi(dt.writingMode,ei,qn,Lr);if(di)return di}Jr=[Jn.first];for(var _i=dt.glyphStartIndex+1;_i<pn-1;_i++)Jr.push(Wi(Yr*Kt.getoffsetX(_i),$r,Vr,gt,Je,ur,dt.segment,Ln,Bn,fe,Ct,vr));Jr.push(Jn.last)}else{if(Q&&!gt){var bi=un(ur,mt).point,Ai=dt.lineStartIndex+dt.segment+1,Li=new t.Point(fe.getx(Ai),fe.gety(Ai)),Yi=un(Li,mt),oa=Yi.signedDistanceFromCamera>0?Yi.point:pa(ur,Li,bi,1,mt),Fa=yi(dt.writingMode,bi,oa,Lr);if(Fa)return Fa}var ha=Wi(Yr*Kt.getoffsetX(dt.glyphStartIndex),$r,Vr,gt,Je,ur,dt.segment,dt.lineStartIndex,dt.lineStartIndex+dt.lineLength,fe,Ct,vr);if(!ha)return{notEnoughRoom:!0};Jr=[ha]}for(var ma=0,Hi=Jr;ma<Hi.length;ma+=1){var Oa=Hi[ma];t.addDynamicAttributes(Ce,Oa.point,Oa.angle)}return{}}function pa(dt,Y,gt,Q,mt){var Ct=un(dt.add(dt.sub(Y)._unit()),mt).point,Dt=gt.sub(Ct);return gt.add(Dt._mult(Q/Dt.mag()))}function Wi(dt,Y,gt,Q,mt,Ct,Dt,Kt,fe,Ce,Je,ur){var vr=Q?dt-Y:dt+Y,Lr=vr>0?1:-1,Yr=0;Q&&(Lr*=-1,Yr=Math.PI),Lr<0&&(Yr+=Math.PI);for(var $r=Lr>0?Kt+Dt:Kt+Dt+1,Vr=mt,Jr=mt,pn=0,Ln=0,Bn=Math.abs(vr),Jn=[];pn+Ln<=Bn;){if($r+=Lr,$r<Kt||$r>=fe)return null;if(Jr=Vr,Jn.push(Vr),Vr=ur[$r],Vr===void 0){var ei=new t.Point(Ce.getx($r),Ce.gety($r)),qn=un(ei,Je);if(qn.signedDistanceFromCamera>0)Vr=ur[$r]=qn.point;else{var di=$r-Lr,_i=pn===0?Ct:new t.Point(Ce.getx(di),Ce.gety(di));Vr=pa(_i,ei,Jr,Bn-pn+1,Je)}}pn+=Ln,Ln=Jr.dist(Vr)}var bi=(Bn-pn)/Ln,Ai=Vr.sub(Jr),Li=Ai.mult(bi)._add(Jr);Li._add(Ai._unit()._perp()._mult(gt*Lr));var Yi=Yr+Math.atan2(Vr.y-Jr.y,Vr.x-Jr.x);return Jn.push(Li),{point:Li,angle:Yi,path:Jn}}var Ji=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ji(dt,Y){for(var gt=0;gt<dt;gt++){var Q=Y.length;Y.resize(Q+4),Y.float32.set(Ji,Q*3)}}function Tr(dt,Y,gt){var Q=Y[0],mt=Y[1];return dt[0]=gt[0]*Q+gt[4]*mt+gt[12],dt[1]=gt[1]*Q+gt[5]*mt+gt[13],dt[3]=gt[3]*Q+gt[7]*mt+gt[15],dt}var gn=100,hn=function(Y,gt,Q){gt===void 0&&(gt=new Ar(Y.width+2*gn,Y.height+2*gn,25)),Q===void 0&&(Q=new Ar(Y.width+2*gn,Y.height+2*gn,25)),this.transform=Y,this.grid=gt,this.ignoredGrid=Q,this.pitchfactor=Math.cos(Y._pitch)*Y.cameraToCenterDistance,this.screenRightBoundary=Y.width+gn,this.screenBottomBoundary=Y.height+gn,this.gridRightBoundary=Y.width+2*gn,this.gridBottomBoundary=Y.height+2*gn};hn.prototype.placeCollisionBox=function(Y,gt,Q,mt,Ct){var Dt=this.projectAndGetPerspectiveRatio(mt,Y.anchorPointX,Y.anchorPointY),Kt=Q*Dt.perspectiveRatio,fe=Y.x1*Kt+Dt.point.x,Ce=Y.y1*Kt+Dt.point.y,Je=Y.x2*Kt+Dt.point.x,ur=Y.y2*Kt+Dt.point.y;return!this.isInsideGrid(fe,Ce,Je,ur)||!gt&&this.grid.hitTest(fe,Ce,Je,ur,Ct)?{box:[],offscreen:!1}:{box:[fe,Ce,Je,ur],offscreen:this.isOffscreen(fe,Ce,Je,ur)}},hn.prototype.placeCollisionCircles=function(Y,gt,Q,mt,Ct,Dt,Kt,fe,Ce,Je,ur,vr,Lr){var Yr=[],$r=new t.Point(gt.anchorX,gt.anchorY),Vr=un($r,Dt),Jr=Un(this.transform.cameraToCenterDistance,Vr.signedDistanceFromCamera),pn=Je?Ct/Jr:Ct*Jr,Ln=pn/t.ONE_EM,Bn=un($r,Kt).point,Jn={},ei=gt.lineOffsetX*Ln,qn=gt.lineOffsetY*Ln,di=Gn(Ln,mt,ei,qn,!1,Bn,$r,gt,Q,Kt,Jn),_i=!1,bi=!1,Ai=!0;if(di){for(var Li=vr*.5*Jr+Lr,Yi=new t.Point(-gn,-gn),oa=new t.Point(this.screenRightBoundary,this.screenBottomBoundary),Fa=new Fr,ha=di.first,ma=di.last,Hi=[],Oa=ha.path.length-1;Oa>=1;Oa--)Hi.push(ha.path[Oa]);for(var Ha=1;Ha<ma.path.length;Ha++)Hi.push(ma.path[Ha]);var $a=Li*2.5;if(fe){var Ta=Hi.map(function(Dc){return un(Dc,fe)});Ta.some(function(Dc){return Dc.signedDistanceFromCamera<=0})?Hi=[]:Hi=Ta.map(function(Dc){return Dc.point})}var no=[];if(Hi.length>0){for(var la=Hi[0].clone(),Sa=Hi[0].clone(),Po=1;Po<Hi.length;Po++)la.x=Math.min(la.x,Hi[Po].x),la.y=Math.min(la.y,Hi[Po].y),Sa.x=Math.max(Sa.x,Hi[Po].x),Sa.y=Math.max(Sa.y,Hi[Po].y);la.x>=Yi.x&&Sa.x<=oa.x&&la.y>=Yi.y&&Sa.y<=oa.y?no=[Hi]:Sa.x<Yi.x||la.x>oa.x||Sa.y<Yi.y||la.y>oa.y?no=[]:no=t.clipLine([Hi],Yi.x,Yi.y,oa.x,oa.y)}for(var Ko=0,Jl=no;Ko<Jl.length;Ko+=1){var Ql=Jl[Ko];Fa.reset(Ql,Li*.25);var Mc=0;Fa.length<=.5*Li?Mc=1:Mc=Math.ceil(Fa.paddedLength/$a)+1;for(var Cc=0;Cc<Mc;Cc++){var qc=Cc/Math.max(Mc-1,1),Ec=Fa.lerp(qc),rl=Ec.x+gn,Cu=Ec.y+gn;Yr.push(rl,Cu,Li,0);var Rs=rl-Li,Il=Cu-Li,Lc=rl+Li,pc=Cu+Li;if(Ai=Ai&&this.isOffscreen(Rs,Il,Lc,pc),bi=bi||this.isInsideGrid(Rs,Il,Lc,pc),!Y&&this.grid.hitTestCircle(rl,Cu,Li,ur)&&(_i=!0,!Ce))return{circles:[],offscreen:!1,collisionDetected:_i}}}}return{circles:!Ce&&_i||!bi?[]:Yr,offscreen:Ai,collisionDetected:_i}},hn.prototype.queryRenderedSymbols=function(Y){if(Y.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var gt=[],Q=1/0,mt=1/0,Ct=-1/0,Dt=-1/0,Kt=0,fe=Y;Kt<fe.length;Kt+=1){var Ce=fe[Kt],Je=new t.Point(Ce.x+gn,Ce.y+gn);Q=Math.min(Q,Je.x),mt=Math.min(mt,Je.y),Ct=Math.max(Ct,Je.x),Dt=Math.max(Dt,Je.y),gt.push(Je)}for(var ur=this.grid.query(Q,mt,Ct,Dt).concat(this.ignoredGrid.query(Q,mt,Ct,Dt)),vr={},Lr={},Yr=0,$r=ur;Yr<$r.length;Yr+=1){var Vr=$r[Yr],Jr=Vr.key;if(vr[Jr.bucketInstanceId]===void 0&&(vr[Jr.bucketInstanceId]={}),!vr[Jr.bucketInstanceId][Jr.featureIndex]){var pn=[new t.Point(Vr.x1,Vr.y1),new t.Point(Vr.x2,Vr.y1),new t.Point(Vr.x2,Vr.y2),new t.Point(Vr.x1,Vr.y2)];!t.polygonIntersectsPolygon(gt,pn)||(vr[Jr.bucketInstanceId][Jr.featureIndex]=!0,Lr[Jr.bucketInstanceId]===void 0&&(Lr[Jr.bucketInstanceId]=[]),Lr[Jr.bucketInstanceId].push(Jr.featureIndex))}}return Lr},hn.prototype.insertCollisionBox=function(Y,gt,Q,mt,Ct){var Dt=gt?this.ignoredGrid:this.grid,Kt={bucketInstanceId:Q,featureIndex:mt,collisionGroupID:Ct};Dt.insert(Kt,Y[0],Y[1],Y[2],Y[3])},hn.prototype.insertCollisionCircles=function(Y,gt,Q,mt,Ct){for(var Dt=gt?this.ignoredGrid:this.grid,Kt={bucketInstanceId:Q,featureIndex:mt,collisionGroupID:Ct},fe=0;fe<Y.length;fe+=4)Dt.insertCircle(Kt,Y[fe],Y[fe+1],Y[fe+2])},hn.prototype.projectAndGetPerspectiveRatio=function(Y,gt,Q){var mt=[gt,Q,0,1];Tr(mt,mt,Y);var Ct=new t.Point((mt[0]/mt[3]+1)/2*this.transform.width+gn,(-mt[1]/mt[3]+1)/2*this.transform.height+gn);return{point:Ct,perspectiveRatio:.5+.5*(this.transform.cameraToCenterDistance/mt[3])}},hn.prototype.isOffscreen=function(Y,gt,Q,mt){return Q<gn||Y>=this.screenRightBoundary||mt<gn||gt>this.screenBottomBoundary},hn.prototype.isInsideGrid=function(Y,gt,Q,mt){return Q>=0&&Y<this.gridRightBoundary&&mt>=0&&gt<this.gridBottomBoundary},hn.prototype.getViewportMatrix=function(){var Y=t.identity([]);return t.translate(Y,Y,[-gn,-gn,0]),Y};function Sn(dt,Y,gt){return Y*(t.EXTENT/(dt.tileSize*Math.pow(2,gt-dt.tileID.overscaledZ)))}var Zn=function(Y,gt,Q,mt){Y?this.opacity=Math.max(0,Math.min(1,Y.opacity+(Y.placed?gt:-gt))):this.opacity=mt&&Q?1:0,this.placed=Q};Zn.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var fi=function(Y,gt,Q,mt,Ct){this.text=new Zn(Y?Y.text:null,gt,Q,Ct),this.icon=new Zn(Y?Y.icon:null,gt,mt,Ct)};fi.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var ri=function(Y,gt,Q){this.text=Y,this.icon=gt,this.skipFade=Q},Rn=function(){this.invProjMatrix=t.create(),this.viewportMatrix=t.create(),this.circles=[]},jn=function(Y,gt,Q,mt,Ct){this.bucketInstanceId=Y,this.featureIndex=gt,this.sourceLayerIndex=Q,this.bucketIndex=mt,this.tileID=Ct},Gi=function(Y){this.crossSourceCollisions=Y,this.maxGroupID=0,this.collisionGroups={}};Gi.prototype.get=function(Y){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[Y]){var gt=++this.maxGroupID;this.collisionGroups[Y]={ID:gt,predicate:function(Q){return Q.collisionGroupID===gt}}}return this.collisionGroups[Y]};function fa(dt,Y,gt,Q,mt){var Ct=t.getAnchorAlignment(dt),Dt=Ct.horizontalAlign,Kt=Ct.verticalAlign,fe=-(Dt-.5)*Y,Ce=-(Kt-.5)*gt,Je=t.evaluateVariableOffset(dt,Q);return new t.Point(fe+Je[0]*mt,Ce+Je[1]*mt)}function Ue(dt,Y,gt,Q,mt,Ct){var Dt=dt.x1,Kt=dt.x2,fe=dt.y1,Ce=dt.y2,Je=dt.anchorPointX,ur=dt.anchorPointY,vr=new t.Point(Y,gt);return Q&&vr._rotate(mt?Ct:-Ct),{x1:Dt+vr.x,y1:fe+vr.y,x2:Kt+vr.x,y2:Ce+vr.y,anchorPointX:Je,anchorPointY:ur}}var pr=function(Y,gt,Q,mt){this.transform=Y.clone(),this.collisionIndex=new hn(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=gt,this.retainedQueryData={},this.collisionGroups=new Gi(Q),this.collisionCircleArrays={},this.prevPlacement=mt,mt&&(mt.prevPlacement=void 0),this.placedOrientations={}};pr.prototype.getBucketParts=function(Y,gt,Q,mt){var Ct=Q.getBucket(gt),Dt=Q.latestFeatureIndex;if(!(!Ct||!Dt||gt.id!==Ct.layerIds[0])){var Kt=Q.collisionBoxArray,fe=Ct.layers[0].layout,Ce=Math.pow(2,this.transform.zoom-Q.tileID.overscaledZ),Je=Q.tileSize/t.EXTENT,ur=this.transform.calculatePosMatrix(Q.tileID.toUnwrapped()),vr=fe.get("text-pitch-alignment")==="map",Lr=fe.get("text-rotation-alignment")==="map",Yr=Sn(Q,1,this.transform.zoom),$r=Xr(ur,vr,Lr,this.transform,Yr),Vr=null;if(vr){var Jr=Tn(ur,vr,Lr,this.transform,Yr);Vr=t.multiply([],this.transform.labelPlaneMatrix,Jr)}this.retainedQueryData[Ct.bucketInstanceId]=new jn(Ct.bucketInstanceId,Dt,Ct.sourceLayerIndex,Ct.index,Q.tileID);var pn={bucket:Ct,layout:fe,posMatrix:ur,textLabelPlaneMatrix:$r,labelToScreenMatrix:Vr,scale:Ce,textPixelRatio:Je,holdingForFade:Q.holdingForFade(),collisionBoxArray:Kt,partiallyEvaluatedTextSize:t.evaluateSizeForZoom(Ct.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(Ct.sourceID)};if(mt)for(var Ln=0,Bn=Ct.sortKeyRanges;Ln<Bn.length;Ln+=1){var Jn=Bn[Ln],ei=Jn.sortKey,qn=Jn.symbolInstanceStart,di=Jn.symbolInstanceEnd;Y.push({sortKey:ei,symbolInstanceStart:qn,symbolInstanceEnd:di,parameters:pn})}else Y.push({symbolInstanceStart:0,symbolInstanceEnd:Ct.symbolInstances.length,parameters:pn})}},pr.prototype.attemptAnchorPlacement=function(Y,gt,Q,mt,Ct,Dt,Kt,fe,Ce,Je,ur,vr,Lr,Yr,$r){var Vr=[vr.textOffset0,vr.textOffset1],Jr=fa(Y,Q,mt,Vr,Ct),pn=this.collisionIndex.placeCollisionBox(Ue(gt,Jr.x,Jr.y,Dt,Kt,this.transform.angle),ur,fe,Ce,Je.predicate);if($r){var Ln=this.collisionIndex.placeCollisionBox(Ue($r,Jr.x,Jr.y,Dt,Kt,this.transform.angle),ur,fe,Ce,Je.predicate);if(Ln.box.length===0)return}if(pn.box.length>0){var Bn;return this.prevPlacement&&this.prevPlacement.variableOffsets[vr.crossTileID]&&this.prevPlacement.placements[vr.crossTileID]&&this.prevPlacement.placements[vr.crossTileID].text&&(Bn=this.prevPlacement.variableOffsets[vr.crossTileID].anchor),this.variableOffsets[vr.crossTileID]={textOffset:Vr,width:Q,height:mt,anchor:Y,textBoxScale:Ct,prevAnchor:Bn},this.markUsedJustification(Lr,Y,vr,Yr),Lr.allowVerticalPlacement&&(this.markUsedOrientation(Lr,Yr,vr),this.placedOrientations[vr.crossTileID]=Yr),{shift:Jr,placedGlyphBoxes:pn}}},pr.prototype.placeLayerBucketPart=function(Y,gt,Q){var mt=this,Ct=Y.parameters,Dt=Ct.bucket,Kt=Ct.layout,fe=Ct.posMatrix,Ce=Ct.textLabelPlaneMatrix,Je=Ct.labelToScreenMatrix,ur=Ct.textPixelRatio,vr=Ct.holdingForFade,Lr=Ct.collisionBoxArray,Yr=Ct.partiallyEvaluatedTextSize,$r=Ct.collisionGroup,Vr=Kt.get("text-optional"),Jr=Kt.get("icon-optional"),pn=Kt.get("text-allow-overlap"),Ln=Kt.get("icon-allow-overlap"),Bn=Kt.get("text-rotation-alignment")==="map",Jn=Kt.get("text-pitch-alignment")==="map",ei=Kt.get("icon-text-fit")!=="none",qn=Kt.get("symbol-z-order")==="viewport-y",di=pn&&(Ln||!Dt.hasIconData()||Jr),_i=Ln&&(pn||!Dt.hasTextData()||Vr);!Dt.collisionArrays&&Lr&&Dt.deserializeCollisionBoxes(Lr);var bi=function(ha,ma){if(!gt[ha.crossTileID]){if(vr){mt.placements[ha.crossTileID]=new ri(!1,!1,!1);return}var Hi=!1,Oa=!1,Ha=!0,$a=null,Ta={box:null,offscreen:null},no={box:null,offscreen:null},la=null,Sa=null,Po=null,Ko=0,Jl=0,Ql=0;ma.textFeatureIndex?Ko=ma.textFeatureIndex:ha.useRuntimeCollisionCircles&&(Ko=ha.featureIndex),ma.verticalTextFeatureIndex&&(Jl=ma.verticalTextFeatureIndex);var Mc=ma.textBox;if(Mc){var Cc=function(No){var yl=t.WritingMode.horizontal;if(Dt.allowVerticalPlacement&&!No&&mt.prevPlacement){var bl=mt.prevPlacement.placedOrientations[ha.crossTileID];bl&&(mt.placedOrientations[ha.crossTileID]=bl,yl=bl,mt.markUsedOrientation(Dt,yl,ha))}return yl},qc=function(No,yl){if(Dt.allowVerticalPlacement&&ha.numVerticalGlyphVertices>0&&ma.verticalTextBox)for(var bl=0,nh=Dt.writingModes;bl<nh.length;bl+=1){var Kh=nh[bl];if(Kh===t.WritingMode.vertical?(Ta=yl(),no=Ta):Ta=No(),Ta&&Ta.box&&Ta.box.length)break}else Ta=No()};if(Kt.get("text-variable-anchor")){var Rs=Kt.get("text-variable-anchor");if(mt.prevPlacement&&mt.prevPlacement.variableOffsets[ha.crossTileID]){var Il=mt.prevPlacement.variableOffsets[ha.crossTileID];Rs.indexOf(Il.anchor)>0&&(Rs=Rs.filter(function(No){return No!==Il.anchor}),Rs.unshift(Il.anchor))}var Lc=function(No,yl,bl){for(var nh=No.x2-No.x1,Kh=No.y2-No.y1,cv=ha.textBoxScale,uv=ei&&!Ln?yl:null,Sf={box:[],offscreen:!1},fv=pn?Rs.length*2:Rs.length,ih=0;ih<fv;++ih){var hv=Rs[ih%Rs.length],dv=ih>=Rs.length,Jh=mt.attemptAnchorPlacement(hv,No,nh,Kh,cv,Bn,Jn,ur,fe,$r,dv,ha,Dt,bl,uv);if(Jh&&(Sf=Jh.placedGlyphBoxes,Sf&&Sf.box&&Sf.box.length)){Hi=!0,$a=Jh.shift;break}}return Sf},pc=function(){return Lc(Mc,ma.iconBox,t.WritingMode.horizontal)},Dc=function(){var No=ma.verticalTextBox,yl=Ta&&Ta.box&&Ta.box.length;return Dt.allowVerticalPlacement&&!yl&&ha.numVerticalGlyphVertices>0&&No?Lc(No,ma.verticalIconBox,t.WritingMode.vertical):{box:null,offscreen:null}};qc(pc,Dc),Ta&&(Hi=Ta.box,Ha=Ta.offscreen);var qf=Cc(Ta&&Ta.box);if(!Hi&&mt.prevPlacement){var Hu=mt.prevPlacement.variableOffsets[ha.crossTileID];Hu&&(mt.variableOffsets[ha.crossTileID]=Hu,mt.markUsedJustification(Dt,Hu.anchor,ha,qf))}}else{var Ec=function(No,yl){var bl=mt.collisionIndex.placeCollisionBox(No,pn,ur,fe,$r.predicate);return bl&&bl.box&&bl.box.length&&(mt.markUsedOrientation(Dt,yl,ha),mt.placedOrientations[ha.crossTileID]=yl),bl},rl=function(){return Ec(Mc,t.WritingMode.horizontal)},Cu=function(){var No=ma.verticalTextBox;return Dt.allowVerticalPlacement&&ha.numVerticalGlyphVertices>0&&No?Ec(No,t.WritingMode.vertical):{box:null,offscreen:null}};qc(rl,Cu),Cc(Ta&&Ta.box&&Ta.box.length)}}if(la=Ta,Hi=la&&la.box&&la.box.length>0,Ha=la&&la.offscreen,ha.useRuntimeCollisionCircles){var As=Dt.text.placedSymbolArray.get(ha.centerJustifiedTextSymbolIndex),Tf=t.evaluateSizeForFeature(Dt.textSizeData,Yr,As),Ys=Kt.get("text-padding"),Af=ha.collisionCircleDiameter;Sa=mt.collisionIndex.placeCollisionCircles(pn,As,Dt.lineVertexArray,Dt.glyphOffsetArray,Tf,fe,Ce,Je,Q,Jn,$r.predicate,Af,Ys),Hi=pn||Sa.circles.length>0&&!Sa.collisionDetected,Ha=Ha&&Sa.offscreen}if(ma.iconFeatureIndex&&(Ql=ma.iconFeatureIndex),ma.iconBox){var th=function(No){var yl=ei&&$a?Ue(No,$a.x,$a.y,Bn,Jn,mt.transform.angle):No;return mt.collisionIndex.placeCollisionBox(yl,Ln,ur,fe,$r.predicate)};no&&no.box&&no.box.length&&ma.verticalIconBox?(Po=th(ma.verticalIconBox),Oa=Po.box.length>0):(Po=th(ma.iconBox),Oa=Po.box.length>0),Ha=Ha&&Po.offscreen}var eh=Vr||ha.numHorizontalGlyphVertices===0&&ha.numVerticalGlyphVertices===0,Fd=Jr||ha.numIconVertices===0;if(!eh&&!Fd?Oa=Hi=Oa&&Hi:Fd?eh||(Oa=Oa&&Hi):Hi=Oa&&Hi,Hi&&la&&la.box&&(no&&no.box&&Jl?mt.collisionIndex.insertCollisionBox(la.box,Kt.get("text-ignore-placement"),Dt.bucketInstanceId,Jl,$r.ID):mt.collisionIndex.insertCollisionBox(la.box,Kt.get("text-ignore-placement"),Dt.bucketInstanceId,Ko,$r.ID)),Oa&&Po&&mt.collisionIndex.insertCollisionBox(Po.box,Kt.get("icon-ignore-placement"),Dt.bucketInstanceId,Ql,$r.ID),Sa&&(Hi&&mt.collisionIndex.insertCollisionCircles(Sa.circles,Kt.get("text-ignore-placement"),Dt.bucketInstanceId,Ko,$r.ID),Q)){var rh=Dt.bucketInstanceId,nf=mt.collisionCircleArrays[rh];nf===void 0&&(nf=mt.collisionCircleArrays[rh]=new Rn);for(var af=0;af<Sa.circles.length;af+=4)nf.circles.push(Sa.circles[af+0]),nf.circles.push(Sa.circles[af+1]),nf.circles.push(Sa.circles[af+2]),nf.circles.push(Sa.collisionDetected?1:0)}mt.placements[ha.crossTileID]=new ri(Hi||di,Oa||_i,Ha||Dt.justReloaded),gt[ha.crossTileID]=!0}};if(qn)for(var Ai=Dt.getSortedSymbolIndexes(this.transform.angle),Li=Ai.length-1;Li>=0;--Li){var Yi=Ai[Li];bi(Dt.symbolInstances.get(Yi),Dt.collisionArrays[Yi])}else for(var oa=Y.symbolInstanceStart;oa<Y.symbolInstanceEnd;oa++)bi(Dt.symbolInstances.get(oa),Dt.collisionArrays[oa]);if(Q&&Dt.bucketInstanceId in this.collisionCircleArrays){var Fa=this.collisionCircleArrays[Dt.bucketInstanceId];t.invert(Fa.invProjMatrix,fe),Fa.viewportMatrix=this.collisionIndex.getViewportMatrix()}Dt.justReloaded=!1},pr.prototype.markUsedJustification=function(Y,gt,Q,mt){var Ct={left:Q.leftJustifiedTextSymbolIndex,center:Q.centerJustifiedTextSymbolIndex,right:Q.rightJustifiedTextSymbolIndex},Dt;mt===t.WritingMode.vertical?Dt=Q.verticalPlacedTextSymbolIndex:Dt=Ct[t.getAnchorJustification(gt)];for(var Kt=[Q.leftJustifiedTextSymbolIndex,Q.centerJustifiedTextSymbolIndex,Q.rightJustifiedTextSymbolIndex,Q.verticalPlacedTextSymbolIndex],fe=0,Ce=Kt;fe<Ce.length;fe+=1){var Je=Ce[fe];Je>=0&&(Dt>=0&&Je!==Dt?Y.text.placedSymbolArray.get(Je).crossTileID=0:Y.text.placedSymbolArray.get(Je).crossTileID=Q.crossTileID)}},pr.prototype.markUsedOrientation=function(Y,gt,Q){for(var mt=gt===t.WritingMode.horizontal||gt===t.WritingMode.horizontalOnly?gt:0,Ct=gt===t.WritingMode.vertical?gt:0,Dt=[Q.leftJustifiedTextSymbolIndex,Q.centerJustifiedTextSymbolIndex,Q.rightJustifiedTextSymbolIndex],Kt=0,fe=Dt;Kt<fe.length;Kt+=1){var Ce=fe[Kt];Y.text.placedSymbolArray.get(Ce).placedOrientation=mt}Q.verticalPlacedTextSymbolIndex&&(Y.text.placedSymbolArray.get(Q.verticalPlacedTextSymbolIndex).placedOrientation=Ct)},pr.prototype.commit=function(Y){this.commitTime=Y,this.zoomAtLastRecencyCheck=this.transform.zoom;var gt=this.prevPlacement,Q=!1;this.prevZoomAdjustment=gt?gt.zoomAdjustment(this.transform.zoom):0;var mt=gt?gt.symbolFadeChange(Y):1,Ct=gt?gt.opacities:{},Dt=gt?gt.variableOffsets:{},Kt=gt?gt.placedOrientations:{};for(var fe in this.placements){var Ce=this.placements[fe],Je=Ct[fe];Je?(this.opacities[fe]=new fi(Je,mt,Ce.text,Ce.icon),Q=Q||Ce.text!==Je.text.placed||Ce.icon!==Je.icon.placed):(this.opacities[fe]=new fi(null,mt,Ce.text,Ce.icon,Ce.skipFade),Q=Q||Ce.text||Ce.icon)}for(var ur in Ct){var vr=Ct[ur];if(!this.opacities[ur]){var Lr=new fi(vr,mt,!1,!1);Lr.isHidden()||(this.opacities[ur]=Lr,Q=Q||vr.text.placed||vr.icon.placed)}}for(var Yr in Dt)!this.variableOffsets[Yr]&&this.opacities[Yr]&&!this.opacities[Yr].isHidden()&&(this.variableOffsets[Yr]=Dt[Yr]);for(var $r in Kt)!this.placedOrientations[$r]&&this.opacities[$r]&&!this.opacities[$r].isHidden()&&(this.placedOrientations[$r]=Kt[$r]);Q?this.lastPlacementChangeTime=Y:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=gt?gt.lastPlacementChangeTime:Y)},pr.prototype.updateLayerOpacities=function(Y,gt){for(var Q={},mt=0,Ct=gt;mt<Ct.length;mt+=1){var Dt=Ct[mt],Kt=Dt.getBucket(Y);Kt&&Dt.latestFeatureIndex&&Y.id===Kt.layerIds[0]&&this.updateBucketOpacities(Kt,Q,Dt.collisionBoxArray)}},pr.prototype.updateBucketOpacities=function(Y,gt,Q){var mt=this;Y.hasTextData()&&Y.text.opacityVertexArray.clear(),Y.hasIconData()&&Y.icon.opacityVertexArray.clear(),Y.hasIconCollisionBoxData()&&Y.iconCollisionBox.collisionVertexArray.clear(),Y.hasTextCollisionBoxData()&&Y.textCollisionBox.collisionVertexArray.clear();var Ct=Y.layers[0].layout,Dt=new fi(null,0,!1,!1,!0),Kt=Ct.get("text-allow-overlap"),fe=Ct.get("icon-allow-overlap"),Ce=Ct.get("text-variable-anchor"),Je=Ct.get("text-rotation-alignment")==="map",ur=Ct.get("text-pitch-alignment")==="map",vr=Ct.get("icon-text-fit")!=="none",Lr=new fi(null,0,Kt&&(fe||!Y.hasIconData()||Ct.get("icon-optional")),fe&&(Kt||!Y.hasTextData()||Ct.get("text-optional")),!0);!Y.collisionArrays&&Q&&(Y.hasIconCollisionBoxData()||Y.hasTextCollisionBoxData())&&Y.deserializeCollisionBoxes(Q);for(var Yr=function(pn,Ln,Bn){for(var Jn=0;Jn<Ln/4;Jn++)pn.opacityVertexArray.emplaceBack(Bn)},$r=function(pn){var Ln=Y.symbolInstances.get(pn),Bn=Ln.numHorizontalGlyphVertices,Jn=Ln.numVerticalGlyphVertices,ei=Ln.crossTileID,qn=gt[ei],di=mt.opacities[ei];qn?di=Dt:di||(di=Lr,mt.opacities[ei]=di),gt[ei]=!0;var _i=Bn>0||Jn>0,bi=Ln.numIconVertices>0,Ai=mt.placedOrientations[Ln.crossTileID],Li=Ai===t.WritingMode.vertical,Yi=Ai===t.WritingMode.horizontal||Ai===t.WritingMode.horizontalOnly;if(_i){var oa=Or(di.text),Fa=Li?yn:oa;Yr(Y.text,Bn,Fa);var ha=Yi?yn:oa;Yr(Y.text,Jn,ha);var ma=di.text.isHidden();[Ln.rightJustifiedTextSymbolIndex,Ln.centerJustifiedTextSymbolIndex,Ln.leftJustifiedTextSymbolIndex].forEach(function(Ql){Ql>=0&&(Y.text.placedSymbolArray.get(Ql).hidden=ma||Li?1:0)}),Ln.verticalPlacedTextSymbolIndex>=0&&(Y.text.placedSymbolArray.get(Ln.verticalPlacedTextSymbolIndex).hidden=ma||Yi?1:0);var Hi=mt.variableOffsets[Ln.crossTileID];Hi&&mt.markUsedJustification(Y,Hi.anchor,Ln,Ai);var Oa=mt.placedOrientations[Ln.crossTileID];Oa&&(mt.markUsedJustification(Y,"left",Ln,Oa),mt.markUsedOrientation(Y,Oa,Ln))}if(bi){var Ha=Or(di.icon),$a=!(vr&&Ln.verticalPlacedIconSymbolIndex&&Li);if(Ln.placedIconSymbolIndex>=0){var Ta=$a?Ha:yn;Yr(Y.icon,Ln.numIconVertices,Ta),Y.icon.placedSymbolArray.get(Ln.placedIconSymbolIndex).hidden=di.icon.isHidden()}if(Ln.verticalPlacedIconSymbolIndex>=0){var no=$a?yn:Ha;Yr(Y.icon,Ln.numVerticalIconVertices,no),Y.icon.placedSymbolArray.get(Ln.verticalPlacedIconSymbolIndex).hidden=di.icon.isHidden()}}if(Y.hasIconCollisionBoxData()||Y.hasTextCollisionBoxData()){var la=Y.collisionArrays[pn];if(la){var Sa=new t.Point(0,0);if(la.textBox||la.verticalTextBox){var Po=!0;if(Ce){var Ko=mt.variableOffsets[ei];Ko?(Sa=fa(Ko.anchor,Ko.width,Ko.height,Ko.textOffset,Ko.textBoxScale),Je&&Sa._rotate(ur?mt.transform.angle:-mt.transform.angle)):Po=!1}la.textBox&&an(Y.textCollisionBox.collisionVertexArray,di.text.placed,!Po||Li,Sa.x,Sa.y),la.verticalTextBox&&an(Y.textCollisionBox.collisionVertexArray,di.text.placed,!Po||Yi,Sa.x,Sa.y)}var Jl=Boolean(!Yi&&la.verticalIconBox);la.iconBox&&an(Y.iconCollisionBox.collisionVertexArray,di.icon.placed,Jl,vr?Sa.x:0,vr?Sa.y:0),la.verticalIconBox&&an(Y.iconCollisionBox.collisionVertexArray,di.icon.placed,!Jl,vr?Sa.x:0,vr?Sa.y:0)}}},Vr=0;Vr<Y.symbolInstances.length;Vr++)$r(Vr);if(Y.sortFeatures(this.transform.angle),this.retainedQueryData[Y.bucketInstanceId]&&(this.retainedQueryData[Y.bucketInstanceId].featureSortOrder=Y.featureSortOrder),Y.hasTextData()&&Y.text.opacityVertexBuffer&&Y.text.opacityVertexBuffer.updateData(Y.text.opacityVertexArray),Y.hasIconData()&&Y.icon.opacityVertexBuffer&&Y.icon.opacityVertexBuffer.updateData(Y.icon.opacityVertexArray),Y.hasIconCollisionBoxData()&&Y.iconCollisionBox.collisionVertexBuffer&&Y.iconCollisionBox.collisionVertexBuffer.updateData(Y.iconCollisionBox.collisionVertexArray),Y.hasTextCollisionBoxData()&&Y.textCollisionBox.collisionVertexBuffer&&Y.textCollisionBox.collisionVertexBuffer.updateData(Y.textCollisionBox.collisionVertexArray),Y.bucketInstanceId in this.collisionCircleArrays){var Jr=this.collisionCircleArrays[Y.bucketInstanceId];Y.placementInvProjMatrix=Jr.invProjMatrix,Y.placementViewportMatrix=Jr.viewportMatrix,Y.collisionCircleArray=Jr.circles,delete this.collisionCircleArrays[Y.bucketInstanceId]}},pr.prototype.symbolFadeChange=function(Y){return this.fadeDuration===0?1:(Y-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},pr.prototype.zoomAdjustment=function(Y){return Math.max(0,(this.transform.zoom-Y)/1.5)},pr.prototype.hasTransitions=function(Y){return this.stale||Y-this.lastPlacementChangeTime<this.fadeDuration},pr.prototype.stillRecent=function(Y,gt){var Q=this.zoomAtLastRecencyCheck===gt?1-this.zoomAdjustment(gt):1;return this.zoomAtLastRecencyCheck=gt,this.commitTime+this.fadeDuration*Q>Y},pr.prototype.setStale=function(){this.stale=!0};function an(dt,Y,gt,Q,mt){dt.emplaceBack(Y?1:0,gt?1:0,Q||0,mt||0),dt.emplaceBack(Y?1:0,gt?1:0,Q||0,mt||0),dt.emplaceBack(Y?1:0,gt?1:0,Q||0,mt||0),dt.emplaceBack(Y?1:0,gt?1:0,Q||0,mt||0)}var vn=Math.pow(2,25),rn=Math.pow(2,24),An=Math.pow(2,17),wn=Math.pow(2,16),fn=Math.pow(2,9),yr=Math.pow(2,8),br=Math.pow(2,1);function Or(dt){if(dt.opacity===0&&!dt.placed)return 0;if(dt.opacity===1&&dt.placed)return 4294967295;var Y=dt.placed?1:0,gt=Math.floor(dt.opacity*127);return gt*vn+Y*rn+gt*An+Y*wn+gt*fn+Y*yr+gt*br+Y}var yn=0,Nn=function(Y){this._sortAcrossTiles=Y.layout.get("symbol-z-order")!=="viewport-y"&&Y.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Nn.prototype.continuePlacement=function(Y,gt,Q,mt,Ct){for(var Dt=this._bucketParts;this._currentTileIndex<Y.length;){var Kt=Y[this._currentTileIndex];if(gt.getBucketParts(Dt,mt,Kt,this._sortAcrossTiles),this._currentTileIndex++,Ct())return!0}for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,Dt.sort(function(Ce,Je){return Ce.sortKey-Je.sortKey}));this._currentPartIndex<Dt.length;){var fe=Dt[this._currentPartIndex];if(gt.placeLayerBucketPart(fe,this._seenCrossTileIDs,Q),this._currentPartIndex++,Ct())return!0}return!1};var ni=function(Y,gt,Q,mt,Ct,Dt,Kt){this.placement=new pr(Y,Ct,Dt,Kt),this._currentPlacementIndex=gt.length-1,this._forceFullPlacement=Q,this._showCollisionBoxes=mt,this._done=!1};ni.prototype.isDone=function(){return this._done},ni.prototype.continuePlacement=function(Y,gt,Q){for(var mt=this,Ct=t.browser.now(),Dt=function(){var ur=t.browser.now()-Ct;return mt._forceFullPlacement?!1:ur>2};this._currentPlacementIndex>=0;){var Kt=Y[this._currentPlacementIndex],fe=gt[Kt],Ce=this.placement.collisionIndex.transform.zoom;if(fe.type==="symbol"&&(!fe.minzoom||fe.minzoom<=Ce)&&(!fe.maxzoom||fe.maxzoom>Ce)){this._inProgressLayer||(this._inProgressLayer=new Nn(fe));var Je=this._inProgressLayer.continuePlacement(Q[fe.source],this.placement,this._showCollisionBoxes,fe,Dt);if(Je)return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},ni.prototype.commit=function(Y){return this.placement.commit(Y),this.placement};var kn=512/t.EXTENT/2,Kn=function(Y,gt,Q){this.tileID=Y,this.indexedSymbolInstances={},this.bucketInstanceId=Q;for(var mt=0;mt<gt.length;mt++){var Ct=gt.get(mt),Dt=Ct.key;this.indexedSymbolInstances[Dt]||(this.indexedSymbolInstances[Dt]=[]),this.indexedSymbolInstances[Dt].push({crossTileID:Ct.crossTileID,coord:this.getScaledCoordinates(Ct,Y)})}};Kn.prototype.getScaledCoordinates=function(Y,gt){var Q=gt.canonical.z-this.tileID.canonical.z,mt=kn/Math.pow(2,Q);return{x:Math.floor((gt.canonical.x*t.EXTENT+Y.anchorX)*mt),y:Math.floor((gt.canonical.y*t.EXTENT+Y.anchorY)*mt)}},Kn.prototype.findMatches=function(Y,gt,Q){for(var mt=this.tileID.canonical.z<gt.canonical.z?1:Math.pow(2,this.tileID.canonical.z-gt.canonical.z),Ct=0;Ct<Y.length;Ct++){var Dt=Y.get(Ct);if(!Dt.crossTileID){var Kt=this.indexedSymbolInstances[Dt.key];if(!!Kt)for(var fe=this.getScaledCoordinates(Dt,gt),Ce=0,Je=Kt;Ce<Je.length;Ce+=1){var ur=Je[Ce];if(Math.abs(ur.coord.x-fe.x)<=mt&&Math.abs(ur.coord.y-fe.y)<=mt&&!Q[ur.crossTileID]){Q[ur.crossTileID]=!0,Dt.crossTileID=ur.crossTileID;break}}}}};var oi=function(){this.maxCrossTileID=0};oi.prototype.generate=function(){return++this.maxCrossTileID};var gi=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};gi.prototype.handleWrapJump=function(Y){var gt=Math.round((Y-this.lng)/360);if(gt!==0)for(var Q in this.indexes){var mt=this.indexes[Q],Ct={};for(var Dt in mt){var Kt=mt[Dt];Kt.tileID=Kt.tileID.unwrapTo(Kt.tileID.wrap+gt),Ct[Kt.tileID.key]=Kt}this.indexes[Q]=Ct}this.lng=Y},gi.prototype.addBucket=function(Y,gt,Q){if(this.indexes[Y.overscaledZ]&&this.indexes[Y.overscaledZ][Y.key]){if(this.indexes[Y.overscaledZ][Y.key].bucketInstanceId===gt.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(Y.overscaledZ,this.indexes[Y.overscaledZ][Y.key])}for(var mt=0;mt<gt.symbolInstances.length;mt++){var Ct=gt.symbolInstances.get(mt);Ct.crossTileID=0}this.usedCrossTileIDs[Y.overscaledZ]||(this.usedCrossTileIDs[Y.overscaledZ]={});var Dt=this.usedCrossTileIDs[Y.overscaledZ];for(var Kt in this.indexes){var fe=this.indexes[Kt];if(Number(Kt)>Y.overscaledZ)for(var Ce in fe){var Je=fe[Ce];Je.tileID.isChildOf(Y)&&Je.findMatches(gt.symbolInstances,Y,Dt)}else{var ur=Y.scaledTo(Number(Kt)),vr=fe[ur.key];vr&&vr.findMatches(gt.symbolInstances,Y,Dt)}}for(var Lr=0;Lr<gt.symbolInstances.length;Lr++){var Yr=gt.symbolInstances.get(Lr);Yr.crossTileID||(Yr.crossTileID=Q.generate(),Dt[Yr.crossTileID]=!0)}return this.indexes[Y.overscaledZ]===void 0&&(this.indexes[Y.overscaledZ]={}),this.indexes[Y.overscaledZ][Y.key]=new Kn(Y,gt.symbolInstances,gt.bucketInstanceId),!0},gi.prototype.removeBucketCrossTileIDs=function(Y,gt){for(var Q in gt.indexedSymbolInstances)for(var mt=0,Ct=gt.indexedSymbolInstances[Q];mt<Ct.length;mt+=1){var Dt=Ct[mt];delete this.usedCrossTileIDs[Y][Dt.crossTileID]}},gi.prototype.removeStaleBuckets=function(Y){var gt=!1;for(var Q in this.indexes){var mt=this.indexes[Q];for(var Ct in mt)Y[mt[Ct].bucketInstanceId]||(this.removeBucketCrossTileIDs(Q,mt[Ct]),delete mt[Ct],gt=!0)}return gt};var xi=function(){this.layerIndexes={},this.crossTileIDs=new oi,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};xi.prototype.addLayer=function(Y,gt,Q){var mt=this.layerIndexes[Y.id];mt===void 0&&(mt=this.layerIndexes[Y.id]=new gi);var Ct=!1,Dt={};mt.handleWrapJump(Q);for(var Kt=0,fe=gt;Kt<fe.length;Kt+=1){var Ce=fe[Kt],Je=Ce.getBucket(Y);!Je||Y.id!==Je.layerIds[0]||(Je.bucketInstanceId||(Je.bucketInstanceId=++this.maxBucketInstanceId),mt.addBucket(Ce.tileID,Je,this.crossTileIDs)&&(Ct=!0),Dt[Je.bucketInstanceId]=!0)}return mt.removeStaleBuckets(Dt)&&(Ct=!0),Ct},xi.prototype.pruneUnusedLayers=function(Y){var gt={};Y.forEach(function(mt){gt[mt]=!0});for(var Q in this.layerIndexes)gt[Q]||delete this.layerIndexes[Q]};var ci=function(dt,Y){return t.emitValidationErrors(dt,Y&&Y.filter(function(gt){return gt.identifier!=="source.canvas"}))},Si=t.pick(ar,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),ko=t.pick(ar,["setCenter","setZoom","setBearing","setPitch"]),$o=Gr(),ss=function(dt){function Y(gt,Q){var mt=this;Q===void 0&&(Q={}),dt.call(this),this.map=gt,this.dispatcher=new I(Ge(),this),this.imageManager=new T,this.imageManager.setEventedParent(this),this.glyphManager=new S(gt._requestManager,Q.localIdeographFontFamily),this.lineAtlas=new P(256,512),this.crossTileSymbolIndex=new xi,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new t.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",t.getReferrer());var Ct=this;this._rtlTextPluginCallback=Y.registerForPluginStateChange(function(Dt){var Kt={pluginStatus:Dt.pluginStatus,pluginURL:Dt.pluginURL};Ct.dispatcher.broadcast("syncRTLPluginState",Kt,function(fe,Ce){if(t.triggerPluginCompletionEvent(fe),Ce){var Je=Ce.every(function(vr){return vr});if(Je)for(var ur in Ct.sourceCaches)Ct.sourceCaches[ur].reload()}})}),this.on("data",function(Dt){if(!(Dt.dataType!=="source"||Dt.sourceDataType!=="metadata")){var Kt=mt.sourceCaches[Dt.sourceId];if(!!Kt){var fe=Kt.getSource();if(!(!fe||!fe.vectorLayerIds))for(var Ce in mt._layers){var Je=mt._layers[Ce];Je.source===fe.id&&mt._validateLayer(Je)}}}})}return dt&&(Y.__proto__=dt),Y.prototype=Object.create(dt&&dt.prototype),Y.prototype.constructor=Y,Y.prototype.loadURL=function(Q,mt){var Ct=this;mt===void 0&&(mt={}),this.fire(new t.Event("dataloading",{dataType:"style"}));var Dt=typeof mt.validate=="boolean"?mt.validate:!t.isMapboxURL(Q);Q=this.map._requestManager.normalizeStyleURL(Q,mt.accessToken);var Kt=this.map._requestManager.transformRequest(Q,t.ResourceType.Style);this._request=t.getJSON(Kt,function(fe,Ce){Ct._request=null,fe?Ct.fire(new t.ErrorEvent(fe)):Ce&&Ct._load(Ce,Dt)})},Y.prototype.loadJSON=function(Q,mt){var Ct=this;mt===void 0&&(mt={}),this.fire(new t.Event("dataloading",{dataType:"style"})),this._request=t.browser.frame(function(){Ct._request=null,Ct._load(Q,mt.validate!==!1)})},Y.prototype.loadEmpty=function(){this.fire(new t.Event("dataloading",{dataType:"style"})),this._load($o,!1)},Y.prototype._load=function(Q,mt){if(!(mt&&ci(this,t.validateStyle(Q)))){this._loaded=!0,this.stylesheet=Q;for(var Ct in Q.sources)this.addSource(Ct,Q.sources[Ct],{validate:!1});Q.sprite?this._loadSprite(Q.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(Q.glyphs);var Dt=Mr(this.stylesheet.layers);this._order=Dt.map(function(Je){return Je.id}),this._layers={},this._serializedLayers={};for(var Kt=0,fe=Dt;Kt<fe.length;Kt+=1){var Ce=fe[Kt];Ce=t.createStyleLayer(Ce),Ce.setEventedParent(this,{layer:{id:Ce.id}}),this._layers[Ce.id]=Ce,this._serializedLayers[Ce.id]=Ce.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new z(this.stylesheet.light),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"))}},Y.prototype._loadSprite=function(Q){var mt=this;this._spriteRequest=v(Q,this.map._requestManager,function(Ct,Dt){if(mt._spriteRequest=null,Ct)mt.fire(new t.ErrorEvent(Ct));else if(Dt)for(var Kt in Dt)mt.imageManager.addImage(Kt,Dt[Kt]);mt.imageManager.setLoaded(!0),mt._availableImages=mt.imageManager.listImages(),mt.dispatcher.broadcast("setImages",mt._availableImages),mt.fire(new t.Event("data",{dataType:"style"}))})},Y.prototype._validateLayer=function(Q){var mt=this.sourceCaches[Q.source];if(!!mt){var Ct=Q.sourceLayer;if(!!Ct){var Dt=mt.getSource();(Dt.type==="geojson"||Dt.vectorLayerIds&&Dt.vectorLayerIds.indexOf(Ct)===-1)&&this.fire(new t.ErrorEvent(new Error('Source layer "'+Ct+'" does not exist on source "'+Dt.id+'" as specified by style layer "'+Q.id+'"')))}}},Y.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var Q in this.sourceCaches)if(!this.sourceCaches[Q].loaded())return!1;return!!this.imageManager.isLoaded()},Y.prototype._serializeLayers=function(Q){for(var mt=[],Ct=0,Dt=Q;Ct<Dt.length;Ct+=1){var Kt=Dt[Ct],fe=this._layers[Kt];fe.type!=="custom"&&mt.push(fe.serialize())}return mt},Y.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var Q in this.sourceCaches)if(this.sourceCaches[Q].hasTransition())return!0;for(var mt in this._layers)if(this._layers[mt].hasTransition())return!0;return!1},Y.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},Y.prototype.update=function(Q){if(!!this._loaded){var mt=this._changed;if(this._changed){var Ct=Object.keys(this._updatedLayers),Dt=Object.keys(this._removedLayers);(Ct.length||Dt.length)&&this._updateWorkerLayers(Ct,Dt);for(var Kt in this._updatedSources){var fe=this._updatedSources[Kt];fe==="reload"?this._reloadSource(Kt):fe==="clear"&&this._clearSource(Kt)}this._updateTilesForChangedImages();for(var Ce in this._updatedPaintProps)this._layers[Ce].updateTransitions(Q);this.light.updateTransitions(Q),this._resetUpdates()}for(var Je in this.sourceCaches)this.sourceCaches[Je].used=!1;for(var ur=0,vr=this._order;ur<vr.length;ur+=1){var Lr=vr[ur],Yr=this._layers[Lr];Yr.recalculate(Q,this._availableImages),!Yr.isHidden(Q.zoom)&&Yr.source&&(this.sourceCaches[Yr.source].used=!0)}this.light.recalculate(Q),this.z=Q.zoom,mt&&this.fire(new t.Event("data",{dataType:"style"}))}},Y.prototype._updateTilesForChangedImages=function(){var Q=Object.keys(this._changedImages);if(Q.length){for(var mt in this.sourceCaches)this.sourceCaches[mt].reloadTilesForDependencies(["icons","patterns"],Q);this._changedImages={}}},Y.prototype._updateWorkerLayers=function(Q,mt){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(Q),removedIds:mt})},Y.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},Y.prototype.setState=function(Q){var mt=this;if(this._checkLoaded(),ci(this,t.validateStyle(Q)))return!1;Q=t.clone$1(Q),Q.layers=Mr(Q.layers);var Ct=Nr(this.serialize(),Q).filter(function(Kt){return!(Kt.command in ko)});if(Ct.length===0)return!1;var Dt=Ct.filter(function(Kt){return!(Kt.command in Si)});if(Dt.length>0)throw new Error("Unimplemented: "+Dt.map(function(Kt){return Kt.command}).join(", ")+".");return Ct.forEach(function(Kt){Kt.command!=="setTransition"&&mt[Kt.command].apply(mt,Kt.args)}),this.stylesheet=Q,!0},Y.prototype.addImage=function(Q,mt){if(this.getImage(Q))return this.fire(new t.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(Q,mt),this._availableImages=this.imageManager.listImages(),this._changedImages[Q]=!0,this._changed=!0,this.fire(new t.Event("data",{dataType:"style"}))},Y.prototype.updateImage=function(Q,mt){this.imageManager.updateImage(Q,mt)},Y.prototype.getImage=function(Q){return this.imageManager.getImage(Q)},Y.prototype.removeImage=function(Q){if(!this.getImage(Q))return this.fire(new t.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(Q),this._availableImages=this.imageManager.listImages(),this._changedImages[Q]=!0,this._changed=!0,this.fire(new t.Event("data",{dataType:"style"}))},Y.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},Y.prototype.addSource=function(Q,mt,Ct){var Dt=this;if(Ct===void 0&&(Ct={}),this._checkLoaded(),this.sourceCaches[Q]!==void 0)throw new Error("There is already a source with this ID");if(!mt.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(mt).join(", ")+".");var Kt=["vector","raster","geojson","video","image"],fe=Kt.indexOf(mt.type)>=0;if(!(fe&&this._validate(t.validateStyle.source,"sources."+Q,mt,null,Ct))){this.map&&this.map._collectResourceTiming&&(mt.collectResourceTiming=!0);var Ce=this.sourceCaches[Q]=new Et(Q,mt,this.dispatcher);Ce.style=this,Ce.setEventedParent(this,function(){return{isSourceLoaded:Dt.loaded(),source:Ce.serialize(),sourceId:Q}}),Ce.onAdd(this.map),this._changed=!0}},Y.prototype.removeSource=function(Q){if(this._checkLoaded(),this.sourceCaches[Q]===void 0)throw new Error("There is no source with this ID");for(var mt in this._layers)if(this._layers[mt].source===Q)return this.fire(new t.ErrorEvent(new Error('Source "'+Q+'" cannot be removed while layer "'+mt+'" is using it.')));var Ct=this.sourceCaches[Q];delete this.sourceCaches[Q],delete this._updatedSources[Q],Ct.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:Q})),Ct.setEventedParent(null),Ct.clearTiles(),Ct.onRemove&&Ct.onRemove(this.map),this._changed=!0},Y.prototype.setGeoJSONSourceData=function(Q,mt){this._checkLoaded();var Ct=this.sourceCaches[Q].getSource();Ct.setData(mt),this._changed=!0},Y.prototype.getSource=function(Q){return this.sourceCaches[Q]&&this.sourceCaches[Q].getSource()},Y.prototype.addLayer=function(Q,mt,Ct){Ct===void 0&&(Ct={}),this._checkLoaded();var Dt=Q.id;if(this.getLayer(Dt)){this.fire(new t.ErrorEvent(new Error('Layer with id "'+Dt+'" already exists on this map')));return}var Kt;if(Q.type==="custom"){if(ci(this,t.validateCustomStyleLayer(Q)))return;Kt=t.createStyleLayer(Q)}else{if(typeof Q.source=="object"&&(this.addSource(Dt,Q.source),Q=t.clone$1(Q),Q=t.extend(Q,{source:Dt})),this._validate(t.validateStyle.layer,"layers."+Dt,Q,{arrayIndex:-1},Ct))return;Kt=t.createStyleLayer(Q),this._validateLayer(Kt),Kt.setEventedParent(this,{layer:{id:Dt}}),this._serializedLayers[Kt.id]=Kt.serialize()}var fe=mt?this._order.indexOf(mt):this._order.length;if(mt&&fe===-1){this.fire(new t.ErrorEvent(new Error('Layer with id "'+mt+'" does not exist on this map.')));return}if(this._order.splice(fe,0,Dt),this._layerOrderChanged=!0,this._layers[Dt]=Kt,this._removedLayers[Dt]&&Kt.source&&Kt.type!=="custom"){var Ce=this._removedLayers[Dt];delete this._removedLayers[Dt],Ce.type!==Kt.type?this._updatedSources[Kt.source]="clear":(this._updatedSources[Kt.source]="reload",this.sourceCaches[Kt.source].pause())}this._updateLayer(Kt),Kt.onAdd&&Kt.onAdd(this.map)},Y.prototype.moveLayer=function(Q,mt){this._checkLoaded(),this._changed=!0;var Ct=this._layers[Q];if(!Ct){this.fire(new t.ErrorEvent(new Error("The layer '"+Q+"' does not exist in the map's style and cannot be moved.")));return}if(Q!==mt){var Dt=this._order.indexOf(Q);this._order.splice(Dt,1);var Kt=mt?this._order.indexOf(mt):this._order.length;if(mt&&Kt===-1){this.fire(new t.ErrorEvent(new Error('Layer with id "'+mt+'" does not exist on this map.')));return}this._order.splice(Kt,0,Q),this._layerOrderChanged=!0}},Y.prototype.removeLayer=function(Q){this._checkLoaded();var mt=this._layers[Q];if(!mt){this.fire(new t.ErrorEvent(new Error("The layer '"+Q+"' does not exist in the map's style and cannot be removed.")));return}mt.setEventedParent(null);var Ct=this._order.indexOf(Q);this._order.splice(Ct,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[Q]=mt,delete this._layers[Q],delete this._serializedLayers[Q],delete this._updatedLayers[Q],delete this._updatedPaintProps[Q],mt.onRemove&&mt.onRemove(this.map)},Y.prototype.getLayer=function(Q){return this._layers[Q]},Y.prototype.hasLayer=function(Q){return Q in this._layers},Y.prototype.setLayerZoomRange=function(Q,mt,Ct){this._checkLoaded();var Dt=this.getLayer(Q);if(!Dt){this.fire(new t.ErrorEvent(new Error("The layer '"+Q+"' does not exist in the map's style and cannot have zoom extent.")));return}Dt.minzoom===mt&&Dt.maxzoom===Ct||(mt!=null&&(Dt.minzoom=mt),Ct!=null&&(Dt.maxzoom=Ct),this._updateLayer(Dt))},Y.prototype.setFilter=function(Q,mt,Ct){Ct===void 0&&(Ct={}),this._checkLoaded();var Dt=this.getLayer(Q);if(!Dt){this.fire(new t.ErrorEvent(new Error("The layer '"+Q+"' does not exist in the map's style and cannot be filtered.")));return}if(!t.deepEqual(Dt.filter,mt)){if(mt==null){Dt.filter=void 0,this._updateLayer(Dt);return}this._validate(t.validateStyle.filter,"layers."+Dt.id+".filter",mt,null,Ct)||(Dt.filter=t.clone$1(mt),this._updateLayer(Dt))}},Y.prototype.getFilter=function(Q){return t.clone$1(this.getLayer(Q).filter)},Y.prototype.setLayoutProperty=function(Q,mt,Ct,Dt){Dt===void 0&&(Dt={}),this._checkLoaded();var Kt=this.getLayer(Q);if(!Kt){this.fire(new t.ErrorEvent(new Error("The layer '"+Q+"' does not exist in the map's style and cannot be styled.")));return}t.deepEqual(Kt.getLayoutProperty(mt),Ct)||(Kt.setLayoutProperty(mt,Ct,Dt),this._updateLayer(Kt))},Y.prototype.getLayoutProperty=function(Q,mt){var Ct=this.getLayer(Q);if(!Ct){this.fire(new t.ErrorEvent(new Error("The layer '"+Q+"' does not exist in the map's style.")));return}return Ct.getLayoutProperty(mt)},Y.prototype.setPaintProperty=function(Q,mt,Ct,Dt){Dt===void 0&&(Dt={}),this._checkLoaded();var Kt=this.getLayer(Q);if(!Kt){this.fire(new t.ErrorEvent(new Error("The layer '"+Q+"' does not exist in the map's style and cannot be styled.")));return}if(!t.deepEqual(Kt.getPaintProperty(mt),Ct)){var fe=Kt.setPaintProperty(mt,Ct,Dt);fe&&this._updateLayer(Kt),this._changed=!0,this._updatedPaintProps[Q]=!0}},Y.prototype.getPaintProperty=function(Q,mt){return this.getLayer(Q).getPaintProperty(mt)},Y.prototype.setFeatureState=function(Q,mt){this._checkLoaded();var Ct=Q.source,Dt=Q.sourceLayer,Kt=this.sourceCaches[Ct];if(Kt===void 0){this.fire(new t.ErrorEvent(new Error("The source '"+Ct+"' does not exist in the map's style.")));return}var fe=Kt.getSource().type;if(fe==="geojson"&&Dt){this.fire(new t.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));return}if(fe==="vector"&&!Dt){this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}Q.id===void 0&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),Kt.setFeatureState(Dt,Q.id,mt)},Y.prototype.removeFeatureState=function(Q,mt){this._checkLoaded();var Ct=Q.source,Dt=this.sourceCaches[Ct];if(Dt===void 0){this.fire(new t.ErrorEvent(new Error("The source '"+Ct+"' does not exist in the map's style.")));return}var Kt=Dt.getSource().type,fe=Kt==="vector"?Q.sourceLayer:void 0;if(Kt==="vector"&&!fe){this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}if(mt&&typeof Q.id!="string"&&typeof Q.id!="number"){this.fire(new t.ErrorEvent(new Error("A feature id is requred to remove its specific state property.")));return}Dt.removeFeatureState(fe,Q.id,mt)},Y.prototype.getFeatureState=function(Q){this._checkLoaded();var mt=Q.source,Ct=Q.sourceLayer,Dt=this.sourceCaches[mt];if(Dt===void 0){this.fire(new t.ErrorEvent(new Error("The source '"+mt+"' does not exist in the map's style.")));return}var Kt=Dt.getSource().type;if(Kt==="vector"&&!Ct){this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}return Q.id===void 0&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),Dt.getFeatureState(Ct,Q.id)},Y.prototype.getTransition=function(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},Y.prototype.serialize=function(){return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:t.mapObject(this.sourceCaches,function(Q){return Q.serialize()}),layers:this._serializeLayers(this._order)},function(Q){return Q!==void 0})},Y.prototype._updateLayer=function(Q){this._updatedLayers[Q.id]=!0,Q.source&&!this._updatedSources[Q.source]&&this.sourceCaches[Q.source].getSource().type!=="raster"&&(this._updatedSources[Q.source]="reload",this.sourceCaches[Q.source].pause()),this._changed=!0},Y.prototype._flattenAndSortRenderedFeatures=function(Q){for(var mt=this,Ct=function(Yi){return mt._layers[Yi].type==="fill-extrusion"},Dt={},Kt=[],fe=this._order.length-1;fe>=0;fe--){var Ce=this._order[fe];if(Ct(Ce)){Dt[Ce]=fe;for(var Je=0,ur=Q;Je<ur.length;Je+=1){var vr=ur[Je],Lr=vr[Ce];if(Lr)for(var Yr=0,$r=Lr;Yr<$r.length;Yr+=1){var Vr=$r[Yr];Kt.push(Vr)}}}}Kt.sort(function(Yi,oa){return oa.intersectionZ-Yi.intersectionZ});for(var Jr=[],pn=this._order.length-1;pn>=0;pn--){var Ln=this._order[pn];if(Ct(Ln))for(var Bn=Kt.length-1;Bn>=0;Bn--){var Jn=Kt[Bn].feature;if(Dt[Jn.layer.id]<pn)break;Jr.push(Jn),Kt.pop()}else for(var ei=0,qn=Q;ei<qn.length;ei+=1){var di=qn[ei],_i=di[Ln];if(_i)for(var bi=0,Ai=_i;bi<Ai.length;bi+=1){var Li=Ai[bi];Jr.push(Li.feature)}}}return Jr},Y.prototype.queryRenderedFeatures=function(Q,mt,Ct){mt&&mt.filter&&this._validate(t.validateStyle.filter,"queryRenderedFeatures.filter",mt.filter,null,mt);var Dt={};if(mt&&mt.layers){if(!Array.isArray(mt.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var Kt=0,fe=mt.layers;Kt<fe.length;Kt+=1){var Ce=fe[Kt],Je=this._layers[Ce];if(!Je)return this.fire(new t.ErrorEvent(new Error("The layer '"+Ce+"' does not exist in the map's style and cannot be queried for features."))),[];Dt[Je.source]=!0}}var ur=[];mt.availableImages=this._availableImages;for(var vr in this.sourceCaches)mt.layers&&!Dt[vr]||ur.push(nt(this.sourceCaches[vr],this._layers,this._serializedLayers,Q,mt,Ct));return this.placement&&ur.push(it(this._layers,this._serializedLayers,this.sourceCaches,Q,mt,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(ur)},Y.prototype.querySourceFeatures=function(Q,mt){mt&&mt.filter&&this._validate(t.validateStyle.filter,"querySourceFeatures.filter",mt.filter,null,mt);var Ct=this.sourceCaches[Q];return Ct?ot(Ct,mt):[]},Y.prototype.addSourceType=function(Q,mt,Ct){if(Y.getSourceType(Q))return Ct(new Error('A source type called "'+Q+'" already exists.'));if(Y.setSourceType(Q,mt),!mt.workerSourceURL)return Ct(null,null);this.dispatcher.broadcast("loadWorkerSource",{name:Q,url:mt.workerSourceURL},Ct)},Y.prototype.getLight=function(){return this.light.getLight()},Y.prototype.setLight=function(Q,mt){mt===void 0&&(mt={}),this._checkLoaded();var Ct=this.light.getLight(),Dt=!1;for(var Kt in Q)if(!t.deepEqual(Q[Kt],Ct[Kt])){Dt=!0;break}if(!!Dt){var fe={now:t.browser.now(),transition:t.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(Q,mt),this.light.updateTransitions(fe)}},Y.prototype._validate=function(Q,mt,Ct,Dt,Kt){return Kt===void 0&&(Kt={}),Kt&&Kt.validate===!1?!1:ci(this,Q.call(t.validateStyle,t.extend({key:mt,style:this.serialize(),value:Ct,styleSpec:t.styleSpec},Dt)))},Y.prototype._remove=function(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(var Q in this._layers){var mt=this._layers[Q];mt.setEventedParent(null)}for(var Ct in this.sourceCaches)this.sourceCaches[Ct].clearTiles(),this.sourceCaches[Ct].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},Y.prototype._clearSource=function(Q){this.sourceCaches[Q].clearTiles()},Y.prototype._reloadSource=function(Q){this.sourceCaches[Q].resume(),this.sourceCaches[Q].reload()},Y.prototype._updateSources=function(Q){for(var mt in this.sourceCaches)this.sourceCaches[mt].update(Q)},Y.prototype._generateCollisionBoxes=function(){for(var Q in this.sourceCaches)this._reloadSource(Q)},Y.prototype._updatePlacement=function(Q,mt,Ct,Dt,Kt){Kt===void 0&&(Kt=!1);for(var fe=!1,Ce=!1,Je={},ur=0,vr=this._order;ur<vr.length;ur+=1){var Lr=vr[ur],Yr=this._layers[Lr];if(Yr.type==="symbol"){if(!Je[Yr.source]){var $r=this.sourceCaches[Yr.source];Je[Yr.source]=$r.getRenderableIds(!0).map(function(ei){return $r.getTileByID(ei)}).sort(function(ei,qn){return qn.tileID.overscaledZ-ei.tileID.overscaledZ||(ei.tileID.isLessThan(qn.tileID)?-1:1)})}var Vr=this.crossTileSymbolIndex.addLayer(Yr,Je[Yr.source],Q.center.lng);fe=fe||Vr}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),Kt=Kt||this._layerOrderChanged||Ct===0,(Kt||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.browser.now(),Q.zoom))&&(this.pauseablePlacement=new ni(Q,this._order,Kt,mt,Ct,Dt,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Je),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(t.browser.now()),Ce=!0),fe&&this.pauseablePlacement.placement.setStale()),Ce||fe)for(var Jr=0,pn=this._order;Jr<pn.length;Jr+=1){var Ln=pn[Jr],Bn=this._layers[Ln];Bn.type==="symbol"&&this.placement.updateLayerOpacities(Bn,Je[Bn.source])}var Jn=!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.browser.now());return Jn},Y.prototype._releaseSymbolFadeTiles=function(){for(var Q in this.sourceCaches)this.sourceCaches[Q].releaseSymbolFadeTiles()},Y.prototype.getImages=function(Q,mt,Ct){this.imageManager.getImages(mt.icons,Ct),this._updateTilesForChangedImages();var Dt=this.sourceCaches[mt.source];Dt&&Dt.setDependencies(mt.tileID.key,mt.type,mt.icons)},Y.prototype.getGlyphs=function(Q,mt,Ct){this.glyphManager.getGlyphs(mt.stacks,Ct)},Y.prototype.getResource=function(Q,mt,Ct){return t.makeRequest(mt,Ct)},Y}(t.Evented);ss.getSourceType=et,ss.setSourceType=q,ss.registerForPluginStateChange=t.registerForPluginStateChange;var Al=t.createLayout([{name:"a_pos",type:"Int16",components:2}]),Ul=`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,bc=`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`,ga=`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,sl="attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}",Ks=`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Xa="uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}",Ro=`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Hl=`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`,Cs="void main() {gl_FragColor=vec4(1.0);}",Ba="attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}",Sl=`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,io=`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`,Va=`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,po="uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}",ao="varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}",vs="attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}",ll="varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",Fc="attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}",ls="uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",Oc="attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}",Js=`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Fo=`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`,fu=`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Qs=`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`,Os=`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,rc=`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`,hu=`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,du=`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`,cl=`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,nc=`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`,Bs=`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,xc=`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`,Ml=`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,wc="uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}",Bc=`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,ic="uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}",pu=`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,ul=`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`,_c=`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,ac=`
#define MAX_LINE_DISTANCE 32767.0
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`,Es=`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Vl=`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`,kc=`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Nc=`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`,Uc=`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,oc="uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}",vu=`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Hc=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`,cs=`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Cl=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`,El=`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Tc=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`,Ls=Na(Ul,bc),Oo=Na(ga,sl),sc=Na(Ks,Xa),Ns=Na(Ro,Hl),Us=Na(Cs,Ba),mo=Na(Sl,io),Gl=Na(Va,po),Yl=Na(ao,vs),fl=Na(ll,Fc),Ds=Na(ls,Oc),Wl=Na(Js,Fo),Ll=Na(fu,Qs),lc=Na(Os,rc),$l=Na(hu,du),hl=Na(cl,nc),gu=Na(Bs,xc),gs=Na(Ml,wc),Bu=Na(Bc,ic),Ac=Na(pu,ul),Dl=Na(_c,ac),Xl=Na(Es,Vl),dl=Na(kc,Nc),jl=Na(Uc,oc),Vc=Na(vu,Hc),Gc=Na(cs,Cl),Nu=Na(El,Tc);function Na(dt,Y){var gt=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,Q={};return dt=dt.replace(gt,function(mt,Ct,Dt,Kt,fe){return Q[fe]=!0,Ct==="define"?`
#ifndef HAS_UNIFORM_u_`+fe+`
varying `+Dt+" "+Kt+" "+fe+`;
#else
uniform `+Dt+" "+Kt+" u_"+fe+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+fe+`
    `+Dt+" "+Kt+" "+fe+" = u_"+fe+`;
#endif
`}),Y=Y.replace(gt,function(mt,Ct,Dt,Kt,fe){var Ce=Kt==="float"?"vec2":"vec4",Je=fe.match(/color/)?"color":Ce;return Q[fe]?Ct==="define"?`
#ifndef HAS_UNIFORM_u_`+fe+`
uniform lowp float u_`+fe+`_t;
attribute `+Dt+" "+Ce+" a_"+fe+`;
varying `+Dt+" "+Kt+" "+fe+`;
#else
uniform `+Dt+" "+Kt+" u_"+fe+`;
#endif
`:Je==="vec4"?`
#ifndef HAS_UNIFORM_u_`+fe+`
    `+fe+" = a_"+fe+`;
#else
    `+Dt+" "+Kt+" "+fe+" = u_"+fe+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+fe+`
    `+fe+" = unpack_mix_"+Je+"(a_"+fe+", u_"+fe+`_t);
#else
    `+Dt+" "+Kt+" "+fe+" = u_"+fe+`;
#endif
`:Ct==="define"?`
#ifndef HAS_UNIFORM_u_`+fe+`
uniform lowp float u_`+fe+`_t;
attribute `+Dt+" "+Ce+" a_"+fe+`;
#else
uniform `+Dt+" "+Kt+" u_"+fe+`;
#endif
`:Je==="vec4"?`
#ifndef HAS_UNIFORM_u_`+fe+`
    `+Dt+" "+Kt+" "+fe+" = a_"+fe+`;
#else
    `+Dt+" "+Kt+" "+fe+" = u_"+fe+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+fe+`
    `+Dt+" "+Kt+" "+fe+" = unpack_mix_"+Je+"(a_"+fe+", u_"+fe+`_t);
#else
    `+Dt+" "+Kt+" "+fe+" = u_"+fe+`;
#endif
`}),{fragmentSource:dt,vertexSource:Y}}var Pl=Object.freeze({__proto__:null,prelude:Ls,background:Oo,backgroundPattern:sc,circle:Ns,clippingMask:Us,heatmap:mo,heatmapTexture:Gl,collisionBox:Yl,collisionCircle:fl,debug:Ds,fill:Wl,fillOutline:Ll,fillOutlinePattern:lc,fillPattern:$l,fillExtrusion:hl,fillExtrusionPattern:gu,hillshadePrepare:gs,hillshade:Bu,line:Ac,lineGradient:Dl,linePattern:Xl,lineSDF:dl,raster:jl,symbolIcon:Vc,symbolSDF:Gc,symbolTextAndIcon:Nu}),pl=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};pl.prototype.bind=function(Y,gt,Q,mt,Ct,Dt,Kt,fe){this.context=Y;for(var Ce=this.boundPaintVertexBuffers.length!==mt.length,Je=0;!Ce&&Je<mt.length;Je++)this.boundPaintVertexBuffers[Je]!==mt[Je]&&(Ce=!0);var ur=!this.vao||this.boundProgram!==gt||this.boundLayoutVertexBuffer!==Q||Ce||this.boundIndexBuffer!==Ct||this.boundVertexOffset!==Dt||this.boundDynamicVertexBuffer!==Kt||this.boundDynamicVertexBuffer2!==fe;!Y.extVertexArrayObject||ur?this.freshBind(gt,Q,mt,Ct,Dt,Kt,fe):(Y.bindVertexArrayOES.set(this.vao),Kt&&Kt.bind(),Ct&&Ct.dynamicDraw&&Ct.bind(),fe&&fe.bind())},pl.prototype.freshBind=function(Y,gt,Q,mt,Ct,Dt,Kt){var fe,Ce=Y.numAttributes,Je=this.context,ur=Je.gl;if(Je.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Je.extVertexArrayObject.createVertexArrayOES(),Je.bindVertexArrayOES.set(this.vao),fe=0,this.boundProgram=Y,this.boundLayoutVertexBuffer=gt,this.boundPaintVertexBuffers=Q,this.boundIndexBuffer=mt,this.boundVertexOffset=Ct,this.boundDynamicVertexBuffer=Dt,this.boundDynamicVertexBuffer2=Kt;else{fe=Je.currentNumAttributes||0;for(var vr=Ce;vr<fe;vr++)ur.disableVertexAttribArray(vr)}gt.enableAttributes(ur,Y);for(var Lr=0,Yr=Q;Lr<Yr.length;Lr+=1){var $r=Yr[Lr];$r.enableAttributes(ur,Y)}Dt&&Dt.enableAttributes(ur,Y),Kt&&Kt.enableAttributes(ur,Y),gt.bind(),gt.setVertexAttribPointers(ur,Y,Ct);for(var Vr=0,Jr=Q;Vr<Jr.length;Vr+=1){var pn=Jr[Vr];pn.bind(),pn.setVertexAttribPointers(ur,Y,Ct)}Dt&&(Dt.bind(),Dt.setVertexAttribPointers(ur,Y,Ct)),mt&&mt.bind(),Kt&&(Kt.bind(),Kt.setVertexAttribPointers(ur,Y,Ct)),Je.currentNumAttributes=Ce},pl.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var us=function(Y,gt,Q,mt,Ct){var Dt=Y.gl;this.program=Dt.createProgram();var Kt=Q?Q.defines():[];Ct&&Kt.push("#define OVERDRAW_INSPECTOR;");var fe=Kt.concat(Ls.fragmentSource,gt.fragmentSource).join(`
`),Ce=Kt.concat(Ls.vertexSource,gt.vertexSource).join(`
`),Je=Dt.createShader(Dt.FRAGMENT_SHADER);if(Dt.isContextLost()){this.failedToCreate=!0;return}Dt.shaderSource(Je,fe),Dt.compileShader(Je),Dt.attachShader(this.program,Je);var ur=Dt.createShader(Dt.VERTEX_SHADER);if(Dt.isContextLost()){this.failedToCreate=!0;return}Dt.shaderSource(ur,Ce),Dt.compileShader(ur),Dt.attachShader(this.program,ur);for(var vr=Q?Q.layoutAttributes:[],Lr=0;Lr<vr.length;Lr++)Dt.bindAttribLocation(this.program,Lr,vr[Lr].name);Dt.linkProgram(this.program),Dt.deleteShader(ur),Dt.deleteShader(Je),this.numAttributes=Dt.getProgramParameter(this.program,Dt.ACTIVE_ATTRIBUTES),this.attributes={};for(var Yr={},$r=0;$r<this.numAttributes;$r++){var Vr=Dt.getActiveAttrib(this.program,$r);Vr&&(this.attributes[Vr.name]=Dt.getAttribLocation(this.program,Vr.name))}for(var Jr=Dt.getProgramParameter(this.program,Dt.ACTIVE_UNIFORMS),pn=0;pn<Jr;pn++){var Ln=Dt.getActiveUniform(this.program,pn);Ln&&(Yr[Ln.name]=Dt.getUniformLocation(this.program,Ln.name))}this.fixedUniforms=mt(Y,Yr),this.binderUniforms=Q?Q.getUniforms(Y,Yr):[]};us.prototype.draw=function(Y,gt,Q,mt,Ct,Dt,Kt,fe,Ce,Je,ur,vr,Lr,Yr,$r,Vr){var Jr,pn=Y.gl;if(!this.failedToCreate){Y.program.set(this.program),Y.setDepthMode(Q),Y.setStencilMode(mt),Y.setColorMode(Ct),Y.setCullFace(Dt);for(var Ln in this.fixedUniforms)this.fixedUniforms[Ln].set(Kt[Ln]);Yr&&Yr.setUniforms(Y,this.binderUniforms,vr,{zoom:Lr});for(var Bn=(Jr={},Jr[pn.LINES]=2,Jr[pn.TRIANGLES]=3,Jr[pn.LINE_STRIP]=1,Jr)[gt],Jn=0,ei=ur.get();Jn<ei.length;Jn+=1){var qn=ei[Jn],di=qn.vaos||(qn.vaos={}),_i=di[fe]||(di[fe]=new pl);_i.bind(Y,this,Ce,Yr?Yr.getPaintVertexBuffers():[],Je,qn.vertexOffset,$r,Vr),pn.drawElements(gt,qn.primitiveLength*Bn,pn.UNSIGNED_SHORT,qn.primitiveOffset*Bn*2)}}};function ms(dt,Y,gt){var Q=1/Sn(gt,1,Y.transform.tileZoom),mt=Math.pow(2,gt.tileID.overscaledZ),Ct=gt.tileSize*Math.pow(2,Y.transform.tileZoom)/mt,Dt=Ct*(gt.tileID.canonical.x+gt.tileID.wrap*mt),Kt=Ct*gt.tileID.canonical.y;return{u_image:0,u_texsize:gt.imageAtlasTexture.size,u_scale:[Q,dt.fromScale,dt.toScale],u_fade:dt.t,u_pixel_coord_upper:[Dt>>16,Kt>>16],u_pixel_coord_lower:[Dt&65535,Kt&65535]}}function Zl(dt,Y,gt,Q){var mt=gt.imageManager.getPattern(dt.from.toString()),Ct=gt.imageManager.getPattern(dt.to.toString()),Dt=gt.imageManager.getPixelSize(),Kt=Dt.width,fe=Dt.height,Ce=Math.pow(2,Q.tileID.overscaledZ),Je=Q.tileSize*Math.pow(2,gt.transform.tileZoom)/Ce,ur=Je*(Q.tileID.canonical.x+Q.tileID.wrap*Ce),vr=Je*Q.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:mt.tl,u_pattern_br_a:mt.br,u_pattern_tl_b:Ct.tl,u_pattern_br_b:Ct.br,u_texsize:[Kt,fe],u_mix:Y.t,u_pattern_size_a:mt.displaySize,u_pattern_size_b:Ct.displaySize,u_scale_a:Y.fromScale,u_scale_b:Y.toScale,u_tile_units_to_pixels:1/Sn(Q,1,gt.transform.tileZoom),u_pixel_coord_upper:[ur>>16,vr>>16],u_pixel_coord_lower:[ur&65535,vr&65535]}}var yo=function(dt,Y){return{u_matrix:new t.UniformMatrix4f(dt,Y.u_matrix),u_lightpos:new t.Uniform3f(dt,Y.u_lightpos),u_lightintensity:new t.Uniform1f(dt,Y.u_lightintensity),u_lightcolor:new t.Uniform3f(dt,Y.u_lightcolor),u_vertical_gradient:new t.Uniform1f(dt,Y.u_vertical_gradient),u_opacity:new t.Uniform1f(dt,Y.u_opacity)}},Yc=function(dt,Y){return{u_matrix:new t.UniformMatrix4f(dt,Y.u_matrix),u_lightpos:new t.Uniform3f(dt,Y.u_lightpos),u_lightintensity:new t.Uniform1f(dt,Y.u_lightintensity),u_lightcolor:new t.Uniform3f(dt,Y.u_lightcolor),u_vertical_gradient:new t.Uniform1f(dt,Y.u_vertical_gradient),u_height_factor:new t.Uniform1f(dt,Y.u_height_factor),u_image:new t.Uniform1i(dt,Y.u_image),u_texsize:new t.Uniform2f(dt,Y.u_texsize),u_pixel_coord_upper:new t.Uniform2f(dt,Y.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(dt,Y.u_pixel_coord_lower),u_scale:new t.Uniform3f(dt,Y.u_scale),u_fade:new t.Uniform1f(dt,Y.u_fade),u_opacity:new t.Uniform1f(dt,Y.u_opacity)}},ys=function(dt,Y,gt,Q){var mt=Y.style.light,Ct=mt.properties.get("position"),Dt=[Ct.x,Ct.y,Ct.z],Kt=t.create$1();mt.properties.get("anchor")==="viewport"&&t.fromRotation(Kt,-Y.transform.angle),t.transformMat3(Dt,Dt,Kt);var fe=mt.properties.get("color");return{u_matrix:dt,u_lightpos:Dt,u_lightintensity:mt.properties.get("intensity"),u_lightcolor:[fe.r,fe.g,fe.b],u_vertical_gradient:+gt,u_opacity:Q}},qs=function(dt,Y,gt,Q,mt,Ct,Dt){return t.extend(ys(dt,Y,gt,Q),ms(Ct,Y,Dt),{u_height_factor:-Math.pow(2,mt.overscaledZ)/Dt.tileSize/8})},tl=function(dt,Y){return{u_matrix:new t.UniformMatrix4f(dt,Y.u_matrix)}},Hs=function(dt,Y){return{u_matrix:new t.UniformMatrix4f(dt,Y.u_matrix),u_image:new t.Uniform1i(dt,Y.u_image),u_texsize:new t.Uniform2f(dt,Y.u_texsize),u_pixel_coord_upper:new t.Uniform2f(dt,Y.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(dt,Y.u_pixel_coord_lower),u_scale:new t.Uniform3f(dt,Y.u_scale),u_fade:new t.Uniform1f(dt,Y.u_fade)}},bs=function(dt,Y){return{u_matrix:new t.UniformMatrix4f(dt,Y.u_matrix),u_world:new t.Uniform2f(dt,Y.u_world)}},ja=function(dt,Y){return{u_matrix:new t.UniformMatrix4f(dt,Y.u_matrix),u_world:new t.Uniform2f(dt,Y.u_world),u_image:new t.Uniform1i(dt,Y.u_image),u_texsize:new t.Uniform2f(dt,Y.u_texsize),u_pixel_coord_upper:new t.Uniform2f(dt,Y.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(dt,Y.u_pixel_coord_lower),u_scale:new t.Uniform3f(dt,Y.u_scale),u_fade:new t.Uniform1f(dt,Y.u_fade)}},Bo=function(dt){return{u_matrix:dt}},xs=function(dt,Y,gt,Q){return t.extend(Bo(dt),ms(gt,Y,Q))},Wc=function(dt,Y){return{u_matrix:dt,u_world:Y}},cc=function(dt,Y,gt,Q,mt){return t.extend(xs(dt,Y,gt,Q),{u_world:mt})},$c=function(dt,Y){return{u_camera_to_center_distance:new t.Uniform1f(dt,Y.u_camera_to_center_distance),u_scale_with_map:new t.Uniform1i(dt,Y.u_scale_with_map),u_pitch_with_map:new t.Uniform1i(dt,Y.u_pitch_with_map),u_extrude_scale:new t.Uniform2f(dt,Y.u_extrude_scale),u_device_pixel_ratio:new t.Uniform1f(dt,Y.u_device_pixel_ratio),u_matrix:new t.UniformMatrix4f(dt,Y.u_matrix)}},be=function(dt,Y,gt,Q){var mt=dt.transform,Ct,Dt;if(Q.paint.get("circle-pitch-alignment")==="map"){var Kt=Sn(gt,1,mt.zoom);Ct=!0,Dt=[Kt,Kt]}else Ct=!1,Dt=mt.pixelsToGLUnits;return{u_camera_to_center_distance:mt.cameraToCenterDistance,u_scale_with_map:+(Q.paint.get("circle-pitch-scale")==="map"),u_matrix:dt.translatePosMatrix(Y.posMatrix,gt,Q.paint.get("circle-translate"),Q.paint.get("circle-translate-anchor")),u_pitch_with_map:+Ct,u_device_pixel_ratio:t.browser.devicePixelRatio,u_extrude_scale:Dt}},Oe=function(dt,Y){return{u_matrix:new t.UniformMatrix4f(dt,Y.u_matrix),u_camera_to_center_distance:new t.Uniform1f(dt,Y.u_camera_to_center_distance),u_pixels_to_tile_units:new t.Uniform1f(dt,Y.u_pixels_to_tile_units),u_extrude_scale:new t.Uniform2f(dt,Y.u_extrude_scale),u_overscale_factor:new t.Uniform1f(dt,Y.u_overscale_factor)}},dr=function(dt,Y){return{u_matrix:new t.UniformMatrix4f(dt,Y.u_matrix),u_inv_matrix:new t.UniformMatrix4f(dt,Y.u_inv_matrix),u_camera_to_center_distance:new t.Uniform1f(dt,Y.u_camera_to_center_distance),u_viewport_size:new t.Uniform2f(dt,Y.u_viewport_size)}},lr=function(dt,Y,gt){var Q=Sn(gt,1,Y.zoom),mt=Math.pow(2,Y.zoom-gt.tileID.overscaledZ),Ct=gt.tileID.overscaleFactor();return{u_matrix:dt,u_camera_to_center_distance:Y.cameraToCenterDistance,u_pixels_to_tile_units:Q,u_extrude_scale:[Y.pixelsToGLUnits[0]/(Q*mt),Y.pixelsToGLUnits[1]/(Q*mt)],u_overscale_factor:Ct}},Rr=function(dt,Y,gt){return{u_matrix:dt,u_inv_matrix:Y,u_camera_to_center_distance:gt.cameraToCenterDistance,u_viewport_size:[gt.width,gt.height]}},nn=function(dt,Y){return{u_color:new t.UniformColor(dt,Y.u_color),u_matrix:new t.UniformMatrix4f(dt,Y.u_matrix),u_overlay:new t.Uniform1i(dt,Y.u_overlay),u_overlay_scale:new t.Uniform1f(dt,Y.u_overlay_scale)}},mn=function(dt,Y,gt){return gt===void 0&&(gt=1),{u_matrix:dt,u_color:Y,u_overlay:0,u_overlay_scale:gt}},Mn=function(dt,Y){return{u_matrix:new t.UniformMatrix4f(dt,Y.u_matrix)}},Pn=function(dt){return{u_matrix:dt}},Hn=function(dt,Y){return{u_extrude_scale:new t.Uniform1f(dt,Y.u_extrude_scale),u_intensity:new t.Uniform1f(dt,Y.u_intensity),u_matrix:new t.UniformMatrix4f(dt,Y.u_matrix)}},bn=function(dt,Y){return{u_matrix:new t.UniformMatrix4f(dt,Y.u_matrix),u_world:new t.Uniform2f(dt,Y.u_world),u_image:new t.Uniform1i(dt,Y.u_image),u_color_ramp:new t.Uniform1i(dt,Y.u_color_ramp),u_opacity:new t.Uniform1f(dt,Y.u_opacity)}},On=function(dt,Y,gt,Q){return{u_matrix:dt,u_extrude_scale:Sn(Y,1,gt),u_intensity:Q}},In=function(dt,Y,gt,Q){var mt=t.create();t.ortho(mt,0,dt.width,dt.height,0,0,1);var Ct=dt.context.gl;return{u_matrix:mt,u_world:[Ct.drawingBufferWidth,Ct.drawingBufferHeight],u_image:gt,u_color_ramp:Q,u_opacity:Y.paint.get("heatmap-opacity")}},Yn=function(dt,Y){return{u_matrix:new t.UniformMatrix4f(dt,Y.u_matrix),u_image:new t.Uniform1i(dt,Y.u_image),u_latrange:new t.Uniform2f(dt,Y.u_latrange),u_light:new t.Uniform2f(dt,Y.u_light),u_shadow:new t.UniformColor(dt,Y.u_shadow),u_highlight:new t.UniformColor(dt,Y.u_highlight),u_accent:new t.UniformColor(dt,Y.u_accent)}},ti=function(dt,Y){return{u_matrix:new t.UniformMatrix4f(dt,Y.u_matrix),u_image:new t.Uniform1i(dt,Y.u_image),u_dimension:new t.Uniform2f(dt,Y.u_dimension),u_zoom:new t.Uniform1f(dt,Y.u_zoom),u_maxzoom:new t.Uniform1f(dt,Y.u_maxzoom),u_unpack:new t.Uniform4f(dt,Y.u_unpack)}},Bi=function(dt,Y,gt){var Q=gt.paint.get("hillshade-shadow-color"),mt=gt.paint.get("hillshade-highlight-color"),Ct=gt.paint.get("hillshade-accent-color"),Dt=gt.paint.get("hillshade-illumination-direction")*(Math.PI/180);gt.paint.get("hillshade-illumination-anchor")==="viewport"&&(Dt-=dt.transform.angle);var Kt=!dt.options.moving;return{u_matrix:dt.transform.calculatePosMatrix(Y.tileID.toUnwrapped(),Kt),u_image:0,u_latrange:Ni(dt,Y.tileID),u_light:[gt.paint.get("hillshade-exaggeration"),Dt],u_shadow:Q,u_highlight:mt,u_accent:Ct}},Ei=function(dt,Y,gt){var Q=Y.stride,mt=t.create();return t.ortho(mt,0,t.EXTENT,-t.EXTENT,0,0,1),t.translate(mt,mt,[0,-t.EXTENT,0]),{u_matrix:mt,u_image:1,u_dimension:[Q,Q],u_zoom:dt.overscaledZ,u_maxzoom:gt,u_unpack:Y.getUnpackVector()}};function Ni(dt,Y){var gt=Math.pow(2,Y.canonical.z),Q=Y.canonical.y;return[new t.MercatorCoordinate(0,Q/gt).toLngLat().lat,new t.MercatorCoordinate(0,(Q+1)/gt).toLngLat().lat]}var Ui=function(dt,Y){return{u_matrix:new t.UniformMatrix4f(dt,Y.u_matrix),u_ratio:new t.Uniform1f(dt,Y.u_ratio),u_device_pixel_ratio:new t.Uniform1f(dt,Y.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(dt,Y.u_units_to_pixels)}},Qn=function(dt,Y){return{u_matrix:new t.UniformMatrix4f(dt,Y.u_matrix),u_ratio:new t.Uniform1f(dt,Y.u_ratio),u_device_pixel_ratio:new t.Uniform1f(dt,Y.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(dt,Y.u_units_to_pixels),u_image:new t.Uniform1i(dt,Y.u_image)}},pi=function(dt,Y){return{u_matrix:new t.UniformMatrix4f(dt,Y.u_matrix),u_texsize:new t.Uniform2f(dt,Y.u_texsize),u_ratio:new t.Uniform1f(dt,Y.u_ratio),u_device_pixel_ratio:new t.Uniform1f(dt,Y.u_device_pixel_ratio),u_image:new t.Uniform1i(dt,Y.u_image),u_units_to_pixels:new t.Uniform2f(dt,Y.u_units_to_pixels),u_scale:new t.Uniform3f(dt,Y.u_scale),u_fade:new t.Uniform1f(dt,Y.u_fade)}},$i=function(dt,Y){return{u_matrix:new t.UniformMatrix4f(dt,Y.u_matrix),u_ratio:new t.Uniform1f(dt,Y.u_ratio),u_device_pixel_ratio:new t.Uniform1f(dt,Y.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(dt,Y.u_units_to_pixels),u_patternscale_a:new t.Uniform2f(dt,Y.u_patternscale_a),u_patternscale_b:new t.Uniform2f(dt,Y.u_patternscale_b),u_sdfgamma:new t.Uniform1f(dt,Y.u_sdfgamma),u_image:new t.Uniform1i(dt,Y.u_image),u_tex_y_a:new t.Uniform1f(dt,Y.u_tex_y_a),u_tex_y_b:new t.Uniform1f(dt,Y.u_tex_y_b),u_mix:new t.Uniform1f(dt,Y.u_mix)}},ta=function(dt,Y,gt){var Q=dt.transform;return{u_matrix:ca(dt,Y,gt),u_ratio:1/Sn(Y,1,Q.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_units_to_pixels:[1/Q.pixelsToGLUnits[0],1/Q.pixelsToGLUnits[1]]}},ya=function(dt,Y,gt){return t.extend(ta(dt,Y,gt),{u_image:0})},ba=function(dt,Y,gt,Q){var mt=dt.transform,Ct=Ca(Y,mt);return{u_matrix:ca(dt,Y,gt),u_texsize:Y.imageAtlasTexture.size,u_ratio:1/Sn(Y,1,mt.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_image:0,u_scale:[Ct,Q.fromScale,Q.toScale],u_fade:Q.t,u_units_to_pixels:[1/mt.pixelsToGLUnits[0],1/mt.pixelsToGLUnits[1]]}},wa=function(dt,Y,gt,Q,mt){var Ct=dt.transform,Dt=dt.lineAtlas,Kt=Ca(Y,Ct),fe=gt.layout.get("line-cap")==="round",Ce=Dt.getDash(Q.from,fe),Je=Dt.getDash(Q.to,fe),ur=Ce.width*mt.fromScale,vr=Je.width*mt.toScale;return t.extend(ta(dt,Y,gt),{u_patternscale_a:[Kt/ur,-Ce.height/2],u_patternscale_b:[Kt/vr,-Je.height/2],u_sdfgamma:Dt.width/(Math.min(ur,vr)*256*t.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:Ce.y,u_tex_y_b:Je.y,u_mix:mt.t})};function Ca(dt,Y){return 1/Sn(dt,1,Y.tileZoom)}function ca(dt,Y,gt){return dt.translatePosMatrix(Y.tileID.posMatrix,Y,gt.paint.get("line-translate"),gt.paint.get("line-translate-anchor"))}var Mo=function(dt,Y){return{u_matrix:new t.UniformMatrix4f(dt,Y.u_matrix),u_tl_parent:new t.Uniform2f(dt,Y.u_tl_parent),u_scale_parent:new t.Uniform1f(dt,Y.u_scale_parent),u_buffer_scale:new t.Uniform1f(dt,Y.u_buffer_scale),u_fade_t:new t.Uniform1f(dt,Y.u_fade_t),u_opacity:new t.Uniform1f(dt,Y.u_opacity),u_image0:new t.Uniform1i(dt,Y.u_image0),u_image1:new t.Uniform1i(dt,Y.u_image1),u_brightness_low:new t.Uniform1f(dt,Y.u_brightness_low),u_brightness_high:new t.Uniform1f(dt,Y.u_brightness_high),u_saturation_factor:new t.Uniform1f(dt,Y.u_saturation_factor),u_contrast_factor:new t.Uniform1f(dt,Y.u_contrast_factor),u_spin_weights:new t.Uniform3f(dt,Y.u_spin_weights)}},lo=function(dt,Y,gt,Q,mt){return{u_matrix:dt,u_tl_parent:Y,u_scale_parent:gt,u_buffer_scale:1,u_fade_t:Q.mix,u_opacity:Q.opacity*mt.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:mt.paint.get("raster-brightness-min"),u_brightness_high:mt.paint.get("raster-brightness-max"),u_saturation_factor:_a(mt.paint.get("raster-saturation")),u_contrast_factor:vi(mt.paint.get("raster-contrast")),u_spin_weights:qi(mt.paint.get("raster-hue-rotate"))}};function qi(dt){dt*=Math.PI/180;var Y=Math.sin(dt),gt=Math.cos(dt);return[(2*gt+1)/3,(-Math.sqrt(3)*Y-gt+1)/3,(Math.sqrt(3)*Y-gt+1)/3]}function vi(dt){return dt>0?1/(1-dt):1+dt}function _a(dt){return dt>0?1-1/(1.001-dt):-dt}var bo=function(dt,Y){return{u_is_size_zoom_constant:new t.Uniform1i(dt,Y.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(dt,Y.u_is_size_feature_constant),u_size_t:new t.Uniform1f(dt,Y.u_size_t),u_size:new t.Uniform1f(dt,Y.u_size),u_camera_to_center_distance:new t.Uniform1f(dt,Y.u_camera_to_center_distance),u_pitch:new t.Uniform1f(dt,Y.u_pitch),u_rotate_symbol:new t.Uniform1i(dt,Y.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(dt,Y.u_aspect_ratio),u_fade_change:new t.Uniform1f(dt,Y.u_fade_change),u_matrix:new t.UniformMatrix4f(dt,Y.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(dt,Y.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(dt,Y.u_coord_matrix),u_is_text:new t.Uniform1i(dt,Y.u_is_text),u_pitch_with_map:new t.Uniform1i(dt,Y.u_pitch_with_map),u_texsize:new t.Uniform2f(dt,Y.u_texsize),u_texture:new t.Uniform1i(dt,Y.u_texture)}},To=function(dt,Y){return{u_is_size_zoom_constant:new t.Uniform1i(dt,Y.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(dt,Y.u_is_size_feature_constant),u_size_t:new t.Uniform1f(dt,Y.u_size_t),u_size:new t.Uniform1f(dt,Y.u_size),u_camera_to_center_distance:new t.Uniform1f(dt,Y.u_camera_to_center_distance),u_pitch:new t.Uniform1f(dt,Y.u_pitch),u_rotate_symbol:new t.Uniform1i(dt,Y.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(dt,Y.u_aspect_ratio),u_fade_change:new t.Uniform1f(dt,Y.u_fade_change),u_matrix:new t.UniformMatrix4f(dt,Y.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(dt,Y.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(dt,Y.u_coord_matrix),u_is_text:new t.Uniform1i(dt,Y.u_is_text),u_pitch_with_map:new t.Uniform1i(dt,Y.u_pitch_with_map),u_texsize:new t.Uniform2f(dt,Y.u_texsize),u_texture:new t.Uniform1i(dt,Y.u_texture),u_gamma_scale:new t.Uniform1f(dt,Y.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(dt,Y.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(dt,Y.u_is_halo)}},ws=function(dt,Y){return{u_is_size_zoom_constant:new t.Uniform1i(dt,Y.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(dt,Y.u_is_size_feature_constant),u_size_t:new t.Uniform1f(dt,Y.u_size_t),u_size:new t.Uniform1f(dt,Y.u_size),u_camera_to_center_distance:new t.Uniform1f(dt,Y.u_camera_to_center_distance),u_pitch:new t.Uniform1f(dt,Y.u_pitch),u_rotate_symbol:new t.Uniform1i(dt,Y.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(dt,Y.u_aspect_ratio),u_fade_change:new t.Uniform1f(dt,Y.u_fade_change),u_matrix:new t.UniformMatrix4f(dt,Y.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(dt,Y.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(dt,Y.u_coord_matrix),u_is_text:new t.Uniform1i(dt,Y.u_is_text),u_pitch_with_map:new t.Uniform1i(dt,Y.u_pitch_with_map),u_texsize:new t.Uniform2f(dt,Y.u_texsize),u_texsize_icon:new t.Uniform2f(dt,Y.u_texsize_icon),u_texture:new t.Uniform1i(dt,Y.u_texture),u_texture_icon:new t.Uniform1i(dt,Y.u_texture_icon),u_gamma_scale:new t.Uniform1f(dt,Y.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(dt,Y.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(dt,Y.u_is_halo)}},Vs=function(dt,Y,gt,Q,mt,Ct,Dt,Kt,fe,Ce){var Je=mt.transform;return{u_is_size_zoom_constant:+(dt==="constant"||dt==="source"),u_is_size_feature_constant:+(dt==="constant"||dt==="camera"),u_size_t:Y?Y.uSizeT:0,u_size:Y?Y.uSize:0,u_camera_to_center_distance:Je.cameraToCenterDistance,u_pitch:Je.pitch/360*2*Math.PI,u_rotate_symbol:+gt,u_aspect_ratio:Je.width/Je.height,u_fade_change:mt.options.fadeDuration?mt.symbolFadeChange:1,u_matrix:Ct,u_label_plane_matrix:Dt,u_coord_matrix:Kt,u_is_text:+fe,u_pitch_with_map:+Q,u_texsize:Ce,u_texture:0}},Xo=function(dt,Y,gt,Q,mt,Ct,Dt,Kt,fe,Ce,Je){var ur=mt.transform;return t.extend(Vs(dt,Y,gt,Q,mt,Ct,Dt,Kt,fe,Ce),{u_gamma_scale:Q?Math.cos(ur._pitch)*ur.cameraToCenterDistance:1,u_device_pixel_ratio:t.browser.devicePixelRatio,u_is_halo:+Je})},vl=function(dt,Y,gt,Q,mt,Ct,Dt,Kt,fe,Ce){return t.extend(Xo(dt,Y,gt,Q,mt,Ct,Dt,Kt,!0,fe,!0),{u_texsize_icon:Ce,u_texture_icon:1})},Ps=function(dt,Y){return{u_matrix:new t.UniformMatrix4f(dt,Y.u_matrix),u_opacity:new t.Uniform1f(dt,Y.u_opacity),u_color:new t.UniformColor(dt,Y.u_color)}},_s=function(dt,Y){return{u_matrix:new t.UniformMatrix4f(dt,Y.u_matrix),u_opacity:new t.Uniform1f(dt,Y.u_opacity),u_image:new t.Uniform1i(dt,Y.u_image),u_pattern_tl_a:new t.Uniform2f(dt,Y.u_pattern_tl_a),u_pattern_br_a:new t.Uniform2f(dt,Y.u_pattern_br_a),u_pattern_tl_b:new t.Uniform2f(dt,Y.u_pattern_tl_b),u_pattern_br_b:new t.Uniform2f(dt,Y.u_pattern_br_b),u_texsize:new t.Uniform2f(dt,Y.u_texsize),u_mix:new t.Uniform1f(dt,Y.u_mix),u_pattern_size_a:new t.Uniform2f(dt,Y.u_pattern_size_a),u_pattern_size_b:new t.Uniform2f(dt,Y.u_pattern_size_b),u_scale_a:new t.Uniform1f(dt,Y.u_scale_a),u_scale_b:new t.Uniform1f(dt,Y.u_scale_b),u_pixel_coord_upper:new t.Uniform2f(dt,Y.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(dt,Y.u_pixel_coord_lower),u_tile_units_to_pixels:new t.Uniform1f(dt,Y.u_tile_units_to_pixels)}},Co=function(dt,Y,gt){return{u_matrix:dt,u_opacity:Y,u_color:gt}},uc=function(dt,Y,gt,Q,mt,Ct){return t.extend(Zl(Q,Ct,gt,mt),{u_matrix:dt,u_opacity:Y})},Sc={fillExtrusion:yo,fillExtrusionPattern:Yc,fill:tl,fillPattern:Hs,fillOutline:bs,fillOutlinePattern:ja,circle:$c,collisionBox:Oe,collisionCircle:dr,debug:nn,clippingMask:Mn,heatmap:Hn,heatmapTexture:bn,hillshade:Yn,hillshadePrepare:ti,line:Ui,lineGradient:Qn,linePattern:pi,lineSDF:$i,raster:Mo,symbolIcon:bo,symbolSDF:To,symbolTextAndIcon:ws,background:Ps,backgroundPattern:_s},ks;function Xc(dt,Y,gt,Q,mt,Ct,Dt){for(var Kt=dt.context,fe=Kt.gl,Ce=dt.useProgram("collisionBox"),Je=[],ur=0,vr=0,Lr=0;Lr<Q.length;Lr++){var Yr=Q[Lr],$r=Y.getTile(Yr),Vr=$r.getBucket(gt);if(!!Vr){var Jr=Yr.posMatrix;(mt[0]!==0||mt[1]!==0)&&(Jr=dt.translatePosMatrix(Yr.posMatrix,$r,mt,Ct));var pn=Dt?Vr.textCollisionBox:Vr.iconCollisionBox,Ln=Vr.collisionCircleArray;if(Ln.length>0){var Bn=t.create(),Jn=Jr;t.mul(Bn,Vr.placementInvProjMatrix,dt.transform.glCoordMatrix),t.mul(Bn,Bn,Vr.placementViewportMatrix),Je.push({circleArray:Ln,circleOffset:vr,transform:Jn,invTransform:Bn}),ur+=Ln.length/4,vr=ur}!pn||Ce.draw(Kt,fe.LINES,Qr.disabled,Ze.disabled,dt.colorModeForRenderPass(),_e.disabled,lr(Jr,dt.transform,$r),gt.id,pn.layoutVertexBuffer,pn.indexBuffer,pn.segments,null,dt.transform.zoom,null,null,pn.collisionVertexBuffer)}}if(!(!Dt||!Je.length)){var ei=dt.useProgram("collisionCircle"),qn=new t.StructArrayLayout2f1f2i16;qn.resize(ur*4),qn._trim();for(var di=0,_i=0,bi=Je;_i<bi.length;_i+=1)for(var Ai=bi[_i],Li=0;Li<Ai.circleArray.length/4;Li++){var Yi=Li*4,oa=Ai.circleArray[Yi+0],Fa=Ai.circleArray[Yi+1],ha=Ai.circleArray[Yi+2],ma=Ai.circleArray[Yi+3];qn.emplace(di++,oa,Fa,ha,ma,0),qn.emplace(di++,oa,Fa,ha,ma,1),qn.emplace(di++,oa,Fa,ha,ma,2),qn.emplace(di++,oa,Fa,ha,ma,3)}(!ks||ks.length<ur*2)&&(ks=fc(ur));for(var Hi=Kt.createIndexBuffer(ks,!0),Oa=Kt.createVertexBuffer(qn,t.collisionCircleLayout.members,!0),Ha=0,$a=Je;Ha<$a.length;Ha+=1){var Ta=$a[Ha],no=Rr(Ta.transform,Ta.invTransform,dt.transform);ei.draw(Kt,fe.TRIANGLES,Qr.disabled,Ze.disabled,dt.colorModeForRenderPass(),_e.disabled,no,gt.id,Oa,Hi,t.SegmentVector.simpleSegment(0,Ta.circleOffset*2,Ta.circleArray.length,Ta.circleArray.length/2),null,dt.transform.zoom,null,null,null)}Oa.destroy(),Hi.destroy()}}function fc(dt){var Y=dt*2,gt=new t.StructArrayLayout3ui6;gt.resize(Y),gt._trim();for(var Q=0;Q<Y;Q++){var mt=Q*6;gt.uint16[mt+0]=Q*4+0,gt.uint16[mt+1]=Q*4+1,gt.uint16[mt+2]=Q*4+2,gt.uint16[mt+3]=Q*4+2,gt.uint16[mt+4]=Q*4+3,gt.uint16[mt+5]=Q*4+0}return gt}var bf=t.identity(new Float32Array(16));function mu(dt,Y,gt,Q,mt){if(dt.renderPass==="translucent"){var Ct=Ze.disabled,Dt=dt.colorModeForRenderPass(),Kt=gt.layout.get("text-variable-anchor");Kt&&yu(Q,dt,gt,Y,gt.layout.get("text-rotation-alignment"),gt.layout.get("text-pitch-alignment"),mt),gt.paint.get("icon-opacity").constantOr(1)!==0&&bu(dt,Y,gt,Q,!1,gt.paint.get("icon-translate"),gt.paint.get("icon-translate-anchor"),gt.layout.get("icon-rotation-alignment"),gt.layout.get("icon-pitch-alignment"),gt.layout.get("icon-keep-upright"),Ct,Dt),gt.paint.get("text-opacity").constantOr(1)!==0&&bu(dt,Y,gt,Q,!0,gt.paint.get("text-translate"),gt.paint.get("text-translate-anchor"),gt.layout.get("text-rotation-alignment"),gt.layout.get("text-pitch-alignment"),gt.layout.get("text-keep-upright"),Ct,Dt),Y.map.showCollisionBoxes&&(Xc(dt,Y,gt,Q,gt.paint.get("text-translate"),gt.paint.get("text-translate-anchor"),!0),Xc(dt,Y,gt,Q,gt.paint.get("icon-translate"),gt.paint.get("icon-translate-anchor"),!1))}}function jc(dt,Y,gt,Q,mt,Ct){var Dt=t.getAnchorAlignment(dt),Kt=Dt.horizontalAlign,fe=Dt.verticalAlign,Ce=-(Kt-.5)*Y,Je=-(fe-.5)*gt,ur=t.evaluateVariableOffset(dt,Q);return new t.Point((Ce/mt+ur[0])*Ct,(Je/mt+ur[1])*Ct)}function yu(dt,Y,gt,Q,mt,Ct,Dt){for(var Kt=Y.transform,fe=mt==="map",Ce=Ct==="map",Je=0,ur=dt;Je<ur.length;Je+=1){var vr=ur[Je],Lr=Q.getTile(vr),Yr=Lr.getBucket(gt);if(!(!Yr||!Yr.text||!Yr.text.segments.get().length)){var $r=Yr.textSizeData,Vr=t.evaluateSizeForZoom($r,Kt.zoom),Jr=Sn(Lr,1,Y.transform.zoom),pn=Xr(vr.posMatrix,Ce,fe,Y.transform,Jr),Ln=gt.layout.get("icon-text-fit")!=="none"&&Yr.hasIconData();if(Vr){var Bn=Math.pow(2,Kt.zoom-Lr.tileID.overscaledZ);Gs(Yr,fe,Ce,Dt,t.symbolSize,Kt,pn,vr.posMatrix,Bn,Vr,Ln)}}}}function Gs(dt,Y,gt,Q,mt,Ct,Dt,Kt,fe,Ce,Je){var ur=dt.text.placedSymbolArray,vr=dt.text.dynamicLayoutVertexArray,Lr=dt.icon.dynamicLayoutVertexArray,Yr={};vr.clear();for(var $r=0;$r<ur.length;$r++){var Vr=ur.get($r),Jr=dt.allowVerticalPlacement&&!Vr.placedOrientation,pn=!Vr.hidden&&Vr.crossTileID&&!Jr?Q[Vr.crossTileID]:null;if(!pn)ji(Vr.numGlyphs,vr);else{var Ln=new t.Point(Vr.anchorX,Vr.anchorY),Bn=un(Ln,gt?Kt:Dt),Jn=Un(Ct.cameraToCenterDistance,Bn.signedDistanceFromCamera),ei=mt.evaluateSizeForFeature(dt.textSizeData,Ce,Vr)*Jn/t.ONE_EM;gt&&(ei*=dt.tilePixelRatio/fe);for(var qn=pn.width,di=pn.height,_i=pn.anchor,bi=pn.textOffset,Ai=pn.textBoxScale,Li=jc(_i,qn,di,bi,Ai,ei),Yi=gt?un(Ln.add(Li),Dt).point:Bn.point.add(Y?Li.rotate(-Ct.angle):Li),oa=dt.allowVerticalPlacement&&Vr.placedOrientation===t.WritingMode.vertical?Math.PI/2:0,Fa=0;Fa<Vr.numGlyphs;Fa++)t.addDynamicAttributes(vr,Yi,oa);Je&&Vr.associatedIconIndex>=0&&(Yr[Vr.associatedIconIndex]={shiftedAnchor:Yi,angle:oa})}}if(Je){Lr.clear();for(var ha=dt.icon.placedSymbolArray,ma=0;ma<ha.length;ma++){var Hi=ha.get(ma);if(Hi.hidden)ji(Hi.numGlyphs,Lr);else{var Oa=Yr[ma];if(!Oa)ji(Hi.numGlyphs,Lr);else for(var Ha=0;Ha<Hi.numGlyphs;Ha++)t.addDynamicAttributes(Lr,Oa.shiftedAnchor,Oa.angle)}}dt.icon.dynamicLayoutVertexBuffer.updateData(Lr)}dt.text.dynamicLayoutVertexBuffer.updateData(vr)}function Uu(dt,Y,gt){return gt.iconsInText&&Y?"symbolTextAndIcon":dt?"symbolSDF":"symbolIcon"}function bu(dt,Y,gt,Q,mt,Ct,Dt,Kt,fe,Ce,Je,ur){for(var vr=dt.context,Lr=vr.gl,Yr=dt.transform,$r=Kt==="map",Vr=fe==="map",Jr=$r&&gt.layout.get("symbol-placement")!=="point",pn=$r&&!Vr&&!Jr,Ln=gt.layout.get("symbol-sort-key").constantOr(1)!==void 0,Bn=dt.depthModeForSublayer(0,Qr.ReadOnly),Jn=gt.layout.get("text-variable-anchor"),ei=[],qn=0,di=Q;qn<di.length;qn+=1){var _i=di[qn],bi=Y.getTile(_i),Ai=bi.getBucket(gt);if(!!Ai){var Li=mt?Ai.text:Ai.icon;if(!(!Li||!Li.segments.get().length)){var Yi=Li.programConfigurations.get(gt.id),oa=mt||Ai.sdfIcons,Fa=mt?Ai.textSizeData:Ai.iconSizeData,ha=Vr||Yr.pitch!==0,ma=dt.useProgram(Uu(oa,mt,Ai),Yi),Hi=t.evaluateSizeForZoom(Fa,Yr.zoom),Oa=void 0,Ha=[0,0],$a=void 0,Ta=void 0,no=null,la=void 0;if(mt){if($a=bi.glyphAtlasTexture,Ta=Lr.LINEAR,Oa=bi.glyphAtlasTexture.size,Ai.iconsInText){Ha=bi.imageAtlasTexture.size,no=bi.imageAtlasTexture;var Sa=Fa.kind==="composite"||Fa.kind==="camera";la=ha||dt.options.rotating||dt.options.zooming||Sa?Lr.LINEAR:Lr.NEAREST}}else{var Po=gt.layout.get("icon-size").constantOr(0)!==1||Ai.iconsNeedLinear;$a=bi.imageAtlasTexture,Ta=oa||dt.options.rotating||dt.options.zooming||Po||ha?Lr.LINEAR:Lr.NEAREST,Oa=bi.imageAtlasTexture.size}var Ko=Sn(bi,1,dt.transform.zoom),Jl=Xr(_i.posMatrix,Vr,$r,dt.transform,Ko),Ql=Tn(_i.posMatrix,Vr,$r,dt.transform,Ko),Mc=Jn&&Ai.hasTextData(),Cc=gt.layout.get("icon-text-fit")!=="none"&&Mc&&Ai.hasIconData();Jr&&Xn(Ai,_i.posMatrix,dt,mt,Jl,Ql,Vr,Ce);var qc=dt.translatePosMatrix(_i.posMatrix,bi,Ct,Dt),Ec=Jr||mt&&Jn||Cc?bf:Jl,rl=dt.translatePosMatrix(Ql,bi,Ct,Dt,!0),Cu=oa&&gt.paint.get(mt?"text-halo-width":"icon-halo-width").constantOr(1)!==0,Rs=void 0;oa?Ai.iconsInText?Rs=vl(Fa.kind,Hi,pn,Vr,dt,qc,Ec,rl,Oa,Ha):Rs=Xo(Fa.kind,Hi,pn,Vr,dt,qc,Ec,rl,mt,Oa,!0):Rs=Vs(Fa.kind,Hi,pn,Vr,dt,qc,Ec,rl,mt,Oa);var Il={program:ma,buffers:Li,uniformValues:Rs,atlasTexture:$a,atlasTextureIcon:no,atlasInterpolation:Ta,atlasInterpolationIcon:la,isSDF:oa,hasHalo:Cu};if(Ln)for(var Lc=Li.segments.get(),pc=0,Dc=Lc;pc<Dc.length;pc+=1){var qf=Dc[pc];ei.push({segments:new t.SegmentVector([qf]),sortKey:qf.sortKey,state:Il})}else ei.push({segments:Li.segments,sortKey:0,state:Il})}}}Ln&&ei.sort(function(th,eh){return th.sortKey-eh.sortKey});for(var Hu=0,As=ei;Hu<As.length;Hu+=1){var Tf=As[Hu],Ys=Tf.state;if(vr.activeTexture.set(Lr.TEXTURE0),Ys.atlasTexture.bind(Ys.atlasInterpolation,Lr.CLAMP_TO_EDGE),Ys.atlasTextureIcon&&(vr.activeTexture.set(Lr.TEXTURE1),Ys.atlasTextureIcon&&Ys.atlasTextureIcon.bind(Ys.atlasInterpolationIcon,Lr.CLAMP_TO_EDGE)),Ys.isSDF){var Af=Ys.uniformValues;Ys.hasHalo&&(Af.u_is_halo=1,xu(Ys.buffers,Tf.segments,gt,dt,Ys.program,Bn,Je,ur,Af)),Af.u_is_halo=0}xu(Ys.buffers,Tf.segments,gt,dt,Ys.program,Bn,Je,ur,Ys.uniformValues)}}function xu(dt,Y,gt,Q,mt,Ct,Dt,Kt,fe){var Ce=Q.context,Je=Ce.gl;mt.draw(Ce,Je.TRIANGLES,Ct,Dt,Kt,_e.disabled,fe,gt.id,dt.layoutVertexBuffer,dt.indexBuffer,Y,gt.paint,Q.transform.zoom,dt.programConfigurations.get(gt.id),dt.dynamicLayoutVertexBuffer,dt.opacityVertexBuffer)}function jo(dt,Y,gt,Q){if(dt.renderPass==="translucent"){var mt=gt.paint.get("circle-opacity"),Ct=gt.paint.get("circle-stroke-width"),Dt=gt.paint.get("circle-stroke-opacity"),Kt=gt.layout.get("circle-sort-key").constantOr(1)!==void 0;if(!(mt.constantOr(1)===0&&(Ct.constantOr(1)===0||Dt.constantOr(1)===0))){for(var fe=dt.context,Ce=fe.gl,Je=dt.depthModeForSublayer(0,Qr.ReadOnly),ur=Ze.disabled,vr=dt.colorModeForRenderPass(),Lr=[],Yr=0;Yr<Q.length;Yr++){var $r=Q[Yr],Vr=Y.getTile($r),Jr=Vr.getBucket(gt);if(!!Jr){var pn=Jr.programConfigurations.get(gt.id),Ln=dt.useProgram("circle",pn),Bn=Jr.layoutVertexBuffer,Jn=Jr.indexBuffer,ei=be(dt,$r,Vr,gt),qn={programConfiguration:pn,program:Ln,layoutVertexBuffer:Bn,indexBuffer:Jn,uniformValues:ei};if(Kt)for(var di=Jr.segments.get(),_i=0,bi=di;_i<bi.length;_i+=1){var Ai=bi[_i];Lr.push({segments:new t.SegmentVector([Ai]),sortKey:Ai.sortKey,state:qn})}else Lr.push({segments:Jr.segments,sortKey:0,state:qn})}}Kt&&Lr.sort(function(Ta,no){return Ta.sortKey-no.sortKey});for(var Li=0,Yi=Lr;Li<Yi.length;Li+=1){var oa=Yi[Li],Fa=oa.state,ha=Fa.programConfiguration,ma=Fa.program,Hi=Fa.layoutVertexBuffer,Oa=Fa.indexBuffer,Ha=Fa.uniformValues,$a=oa.segments;ma.draw(fe,Ce.TRIANGLES,Je,ur,vr,_e.disabled,Ha,gt.id,Hi,Oa,$a,gt.paint,dt.transform.zoom,ha)}}}}function wu(dt,Y,gt,Q){if(gt.paint.get("heatmap-opacity")!==0)if(dt.renderPass==="offscreen"){var mt=dt.context,Ct=mt.gl,Dt=Ze.disabled,Kt=new Ht([Ct.ONE,Ct.ONE],t.Color.transparent,[!0,!0,!0,!0]);Ju(mt,dt,gt),mt.clear({color:t.Color.transparent});for(var fe=0;fe<Q.length;fe++){var Ce=Q[fe];if(!Y.hasRenderableParent(Ce)){var Je=Y.getTile(Ce),ur=Je.getBucket(gt);if(!!ur){var vr=ur.programConfigurations.get(gt.id),Lr=dt.useProgram("heatmap",vr),Yr=dt.transform,$r=Yr.zoom;Lr.draw(mt,Ct.TRIANGLES,Qr.disabled,Dt,Kt,_e.disabled,On(Ce.posMatrix,Je,$r,gt.paint.get("heatmap-intensity")),gt.id,ur.layoutVertexBuffer,ur.indexBuffer,ur.segments,gt.paint,dt.transform.zoom,vr)}}}mt.viewport.set([0,0,dt.width,dt.height])}else dt.renderPass==="translucent"&&(dt.context.setColorMode(dt.colorModeForRenderPass()),Zc(dt,gt))}function Ju(dt,Y,gt){var Q=dt.gl;dt.activeTexture.set(Q.TEXTURE1),dt.viewport.set([0,0,Y.width/4,Y.height/4]);var mt=gt.heatmapFbo;if(mt)Q.bindTexture(Q.TEXTURE_2D,mt.colorAttachment.get()),dt.bindFramebuffer.set(mt.framebuffer);else{var Ct=Q.createTexture();Q.bindTexture(Q.TEXTURE_2D,Ct),Q.texParameteri(Q.TEXTURE_2D,Q.TEXTURE_WRAP_S,Q.CLAMP_TO_EDGE),Q.texParameteri(Q.TEXTURE_2D,Q.TEXTURE_WRAP_T,Q.CLAMP_TO_EDGE),Q.texParameteri(Q.TEXTURE_2D,Q.TEXTURE_MIN_FILTER,Q.LINEAR),Q.texParameteri(Q.TEXTURE_2D,Q.TEXTURE_MAG_FILTER,Q.LINEAR),mt=gt.heatmapFbo=dt.createFramebuffer(Y.width/4,Y.height/4,!1),Is(dt,Y,Ct,mt)}}function Is(dt,Y,gt,Q){var mt=dt.gl,Ct=dt.extRenderToTextureHalfFloat?dt.extTextureHalfFloat.HALF_FLOAT_OES:mt.UNSIGNED_BYTE;mt.texImage2D(mt.TEXTURE_2D,0,mt.RGBA,Y.width/4,Y.height/4,0,mt.RGBA,Ct,null),Q.colorAttachment.set(gt)}function Zc(dt,Y){var gt=dt.context,Q=gt.gl,mt=Y.heatmapFbo;if(!!mt){gt.activeTexture.set(Q.TEXTURE0),Q.bindTexture(Q.TEXTURE_2D,mt.colorAttachment.get()),gt.activeTexture.set(Q.TEXTURE1);var Ct=Y.colorRampTexture;Ct||(Ct=Y.colorRampTexture=new t.Texture(gt,Y.colorRamp,Q.RGBA)),Ct.bind(Q.LINEAR,Q.CLAMP_TO_EDGE),dt.useProgram("heatmapTexture").draw(gt,Q.TRIANGLES,Qr.disabled,Ze.disabled,dt.colorModeForRenderPass(),_e.disabled,In(dt,Y,0,1),Y.id,dt.viewportBuffer,dt.quadTriangleIndexBuffer,dt.viewportSegments,Y.paint,dt.transform.zoom)}}function Kc(dt,Y,gt,Q){if(dt.renderPass==="translucent"){var mt=gt.paint.get("line-opacity"),Ct=gt.paint.get("line-width");if(!(mt.constantOr(1)===0||Ct.constantOr(1)===0)){var Dt=dt.depthModeForSublayer(0,Qr.ReadOnly),Kt=dt.colorModeForRenderPass(),fe=gt.paint.get("line-dasharray"),Ce=gt.paint.get("line-pattern"),Je=Ce.constantOr(1),ur=gt.paint.get("line-gradient"),vr=gt.getCrossfadeParameters(),Lr=Je?"linePattern":fe?"lineSDF":ur?"lineGradient":"line",Yr=dt.context,$r=Yr.gl,Vr=!0;if(ur){Yr.activeTexture.set($r.TEXTURE0);var Jr=gt.gradientTexture;if(!gt.gradient)return;Jr||(Jr=gt.gradientTexture=new t.Texture(Yr,gt.gradient,$r.RGBA)),Jr.bind($r.LINEAR,$r.CLAMP_TO_EDGE)}for(var pn=0,Ln=Q;pn<Ln.length;pn+=1){var Bn=Ln[pn],Jn=Y.getTile(Bn);if(!(Je&&!Jn.patternsLoaded())){var ei=Jn.getBucket(gt);if(!!ei){var qn=ei.programConfigurations.get(gt.id),di=dt.context.program.get(),_i=dt.useProgram(Lr,qn),bi=Vr||_i.program!==di,Ai=Ce.constantOr(null);if(Ai&&Jn.imageAtlas){var Li=Jn.imageAtlas,Yi=Li.patternPositions[Ai.to.toString()],oa=Li.patternPositions[Ai.from.toString()];Yi&&oa&&qn.setConstantPatternPositions(Yi,oa)}var Fa=Je?ba(dt,Jn,gt,vr):fe?wa(dt,Jn,gt,fe,vr):ur?ya(dt,Jn,gt):ta(dt,Jn,gt);Je?(Yr.activeTexture.set($r.TEXTURE0),Jn.imageAtlasTexture.bind($r.LINEAR,$r.CLAMP_TO_EDGE),qn.updatePaintBuffers(vr)):fe&&(bi||dt.lineAtlas.dirty)&&(Yr.activeTexture.set($r.TEXTURE0),dt.lineAtlas.bind(Yr)),_i.draw(Yr,$r.TRIANGLES,Dt,dt.stencilModeForClipping(Bn),Kt,_e.disabled,Fa,gt.id,ei.layoutVertexBuffer,ei.indexBuffer,ei.segments,gt.paint,dt.transform.zoom,qn),Vr=!1}}}}}}function _u(dt,Y,gt,Q){var mt=gt.paint.get("fill-color"),Ct=gt.paint.get("fill-opacity");if(Ct.constantOr(1)!==0){var Dt=dt.colorModeForRenderPass(),Kt=gt.paint.get("fill-pattern"),fe=dt.opaquePassEnabledForLayer()&&!Kt.constantOr(1)&&mt.constantOr(t.Color.transparent).a===1&&Ct.constantOr(0)===1?"opaque":"translucent";if(dt.renderPass===fe){var Ce=dt.depthModeForSublayer(1,dt.renderPass==="opaque"?Qr.ReadWrite:Qr.ReadOnly);Ft(dt,Y,gt,Q,Ce,Dt,!1)}if(dt.renderPass==="translucent"&&gt.paint.get("fill-antialias")){var Je=dt.depthModeForSublayer(gt.getPaintProperty("fill-outline-color")?2:0,Qr.ReadOnly);Ft(dt,Y,gt,Q,Je,Dt,!0)}}}function Ft(dt,Y,gt,Q,mt,Ct,Dt){var Kt=dt.context.gl,fe=gt.paint.get("fill-pattern"),Ce=fe&&fe.constantOr(1),Je=gt.getCrossfadeParameters(),ur,vr,Lr,Yr,$r;Dt?(vr=Ce&&!gt.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ur=Kt.LINES):(vr=Ce?"fillPattern":"fill",ur=Kt.TRIANGLES);for(var Vr=0,Jr=Q;Vr<Jr.length;Vr+=1){var pn=Jr[Vr],Ln=Y.getTile(pn);if(!(Ce&&!Ln.patternsLoaded())){var Bn=Ln.getBucket(gt);if(!!Bn){var Jn=Bn.programConfigurations.get(gt.id),ei=dt.useProgram(vr,Jn);Ce&&(dt.context.activeTexture.set(Kt.TEXTURE0),Ln.imageAtlasTexture.bind(Kt.LINEAR,Kt.CLAMP_TO_EDGE),Jn.updatePaintBuffers(Je));var qn=fe.constantOr(null);if(qn&&Ln.imageAtlas){var di=Ln.imageAtlas,_i=di.patternPositions[qn.to.toString()],bi=di.patternPositions[qn.from.toString()];_i&&bi&&Jn.setConstantPatternPositions(_i,bi)}var Ai=dt.translatePosMatrix(pn.posMatrix,Ln,gt.paint.get("fill-translate"),gt.paint.get("fill-translate-anchor"));if(!Dt)Yr=Bn.indexBuffer,$r=Bn.segments,Lr=Ce?xs(Ai,dt,Je,Ln):Bo(Ai);else{Yr=Bn.indexBuffer2,$r=Bn.segments2;var Li=[Kt.drawingBufferWidth,Kt.drawingBufferHeight];Lr=vr==="fillOutlinePattern"&&Ce?cc(Ai,dt,Je,Ln,Li):Wc(Ai,Li)}ei.draw(dt.context,ur,mt,dt.stencilModeForClipping(pn),Ct,_e.disabled,Lr,gt.id,Bn.layoutVertexBuffer,Yr,$r,gt.paint,dt.transform.zoom,Jn)}}}}function jt(dt,Y,gt,Q){var mt=gt.paint.get("fill-extrusion-opacity");if(mt!==0&&dt.renderPass==="translucent"){var Ct=new Qr(dt.context.gl.LEQUAL,Qr.ReadWrite,dt.depthRangeFor3D);if(mt===1&&!gt.paint.get("fill-extrusion-pattern").constantOr(1)){var Dt=dt.colorModeForRenderPass();ie(dt,Y,gt,Q,Ct,Ze.disabled,Dt)}else ie(dt,Y,gt,Q,Ct,Ze.disabled,Ht.disabled),ie(dt,Y,gt,Q,Ct,dt.stencilModeFor3D(),dt.colorModeForRenderPass())}}function ie(dt,Y,gt,Q,mt,Ct,Dt){for(var Kt=dt.context,fe=Kt.gl,Ce=gt.paint.get("fill-extrusion-pattern"),Je=Ce.constantOr(1),ur=gt.getCrossfadeParameters(),vr=gt.paint.get("fill-extrusion-opacity"),Lr=0,Yr=Q;Lr<Yr.length;Lr+=1){var $r=Yr[Lr],Vr=Y.getTile($r),Jr=Vr.getBucket(gt);if(!!Jr){var pn=Jr.programConfigurations.get(gt.id),Ln=dt.useProgram(Je?"fillExtrusionPattern":"fillExtrusion",pn);Je&&(dt.context.activeTexture.set(fe.TEXTURE0),Vr.imageAtlasTexture.bind(fe.LINEAR,fe.CLAMP_TO_EDGE),pn.updatePaintBuffers(ur));var Bn=Ce.constantOr(null);if(Bn&&Vr.imageAtlas){var Jn=Vr.imageAtlas,ei=Jn.patternPositions[Bn.to.toString()],qn=Jn.patternPositions[Bn.from.toString()];ei&&qn&&pn.setConstantPatternPositions(ei,qn)}var di=dt.translatePosMatrix($r.posMatrix,Vr,gt.paint.get("fill-extrusion-translate"),gt.paint.get("fill-extrusion-translate-anchor")),_i=gt.paint.get("fill-extrusion-vertical-gradient"),bi=Je?qs(di,dt,_i,vr,$r,ur,Vr):ys(di,dt,_i,vr);Ln.draw(Kt,Kt.gl.TRIANGLES,mt,Ct,Dt,_e.backCCW,bi,gt.id,Jr.layoutVertexBuffer,Jr.indexBuffer,Jr.segments,gt.paint,dt.transform.zoom,pn)}}}function ue(dt,Y,gt,Q){if(!(dt.renderPass!=="offscreen"&&dt.renderPass!=="translucent")){for(var mt=dt.context,Ct=Y.getSource().maxzoom,Dt=dt.depthModeForSublayer(0,Qr.ReadOnly),Kt=dt.colorModeForRenderPass(),fe=dt.renderPass==="translucent"?dt.stencilConfigForOverlap(Q):[{},Q],Ce=fe[0],Je=fe[1],ur=0,vr=Je;ur<vr.length;ur+=1){var Lr=vr[ur],Yr=Y.getTile(Lr);Yr.needsHillshadePrepare&&dt.renderPass==="offscreen"?xe(dt,Yr,gt,Ct,Dt,Ze.disabled,Kt):dt.renderPass==="translucent"&&ke(dt,Yr,gt,Dt,Ce[Lr.overscaledZ],Kt)}mt.viewport.set([0,0,dt.width,dt.height])}}function ke(dt,Y,gt,Q,mt,Ct){var Dt=dt.context,Kt=Dt.gl,fe=Y.fbo;if(!!fe){var Ce=dt.useProgram("hillshade");Dt.activeTexture.set(Kt.TEXTURE0),Kt.bindTexture(Kt.TEXTURE_2D,fe.colorAttachment.get());var Je=Bi(dt,Y,gt);Ce.draw(Dt,Kt.TRIANGLES,Q,mt,Ct,_e.disabled,Je,gt.id,dt.rasterBoundsBuffer,dt.quadTriangleIndexBuffer,dt.rasterBoundsSegments)}}function xe(dt,Y,gt,Q,mt,Ct,Dt){var Kt=dt.context,fe=Kt.gl,Ce=Y.dem;if(Ce&&Ce.data){var Je=Ce.dim,ur=Ce.stride,vr=Ce.getPixels();if(Kt.activeTexture.set(fe.TEXTURE1),Kt.pixelStoreUnpackPremultiplyAlpha.set(!1),Y.demTexture=Y.demTexture||dt.getTileTexture(ur),Y.demTexture){var Lr=Y.demTexture;Lr.update(vr,{premultiply:!1}),Lr.bind(fe.NEAREST,fe.CLAMP_TO_EDGE)}else Y.demTexture=new t.Texture(Kt,vr,fe.RGBA,{premultiply:!1}),Y.demTexture.bind(fe.NEAREST,fe.CLAMP_TO_EDGE);Kt.activeTexture.set(fe.TEXTURE0);var Yr=Y.fbo;if(!Yr){var $r=new t.Texture(Kt,{width:Je,height:Je,data:null},fe.RGBA);$r.bind(fe.LINEAR,fe.CLAMP_TO_EDGE),Yr=Y.fbo=Kt.createFramebuffer(Je,Je,!0),Yr.colorAttachment.set($r.texture)}Kt.bindFramebuffer.set(Yr.framebuffer),Kt.viewport.set([0,0,Je,Je]),dt.useProgram("hillshadePrepare").draw(Kt,fe.TRIANGLES,mt,Ct,Dt,_e.disabled,Ei(Y.tileID,Ce,Q),gt.id,dt.rasterBoundsBuffer,dt.quadTriangleIndexBuffer,dt.rasterBoundsSegments),Y.needsHillshadePrepare=!1}}function Me(dt,Y,gt,Q){if(dt.renderPass==="translucent"&&gt.paint.get("raster-opacity")!==0&&!!Q.length)for(var mt=dt.context,Ct=mt.gl,Dt=Y.getSource(),Kt=dt.useProgram("raster"),fe=dt.colorModeForRenderPass(),Ce=Dt instanceof J?[{},Q]:dt.stencilConfigForOverlap(Q),Je=Ce[0],ur=Ce[1],vr=ur[ur.length-1].overscaledZ,Lr=!dt.options.moving,Yr=0,$r=ur;Yr<$r.length;Yr+=1){var Vr=$r[Yr],Jr=dt.depthModeForSublayer(Vr.overscaledZ-vr,gt.paint.get("raster-opacity")===1?Qr.ReadWrite:Qr.ReadOnly,Ct.LESS),pn=Y.getTile(Vr),Ln=dt.transform.calculatePosMatrix(Vr.toUnwrapped(),Lr);pn.registerFadeDuration(gt.paint.get("raster-fade-duration"));var Bn=Y.findLoadedParent(Vr,0),Jn=fr(pn,Bn,Y,gt,dt.transform),ei=void 0,qn=void 0,di=gt.paint.get("raster-resampling")==="nearest"?Ct.NEAREST:Ct.LINEAR;mt.activeTexture.set(Ct.TEXTURE0),pn.texture.bind(di,Ct.CLAMP_TO_EDGE,Ct.LINEAR_MIPMAP_NEAREST),mt.activeTexture.set(Ct.TEXTURE1),Bn?(Bn.texture.bind(di,Ct.CLAMP_TO_EDGE,Ct.LINEAR_MIPMAP_NEAREST),ei=Math.pow(2,Bn.tileID.overscaledZ-pn.tileID.overscaledZ),qn=[pn.tileID.canonical.x*ei%1,pn.tileID.canonical.y*ei%1]):pn.texture.bind(di,Ct.CLAMP_TO_EDGE,Ct.LINEAR_MIPMAP_NEAREST);var _i=lo(Ln,qn||[0,0],ei||1,Jn,gt);Dt instanceof J?Kt.draw(mt,Ct.TRIANGLES,Jr,Ze.disabled,fe,_e.disabled,_i,gt.id,Dt.boundsBuffer,dt.quadTriangleIndexBuffer,Dt.boundsSegments):Kt.draw(mt,Ct.TRIANGLES,Jr,Je[Vr.overscaledZ],fe,_e.disabled,_i,gt.id,dt.rasterBoundsBuffer,dt.quadTriangleIndexBuffer,dt.rasterBoundsSegments)}}function fr(dt,Y,gt,Q,mt){var Ct=Q.paint.get("raster-fade-duration");if(Ct>0){var Dt=t.browser.now(),Kt=(Dt-dt.timeAdded)/Ct,fe=Y?(Dt-Y.timeAdded)/Ct:-1,Ce=gt.getSource(),Je=mt.coveringZoomLevel({tileSize:Ce.tileSize,roundZoom:Ce.roundZoom}),ur=!Y||Math.abs(Y.tileID.overscaledZ-Je)>Math.abs(dt.tileID.overscaledZ-Je),vr=ur&&dt.refreshedUponExpiration?1:t.clamp(ur?Kt:1-fe,0,1);return dt.refreshedUponExpiration&&Kt>=1&&(dt.refreshedUponExpiration=!1),Y?{opacity:1,mix:1-vr}:{opacity:vr,mix:0}}else return{opacity:1,mix:0}}function gr(dt,Y,gt){var Q=gt.paint.get("background-color"),mt=gt.paint.get("background-opacity");if(mt!==0){var Ct=dt.context,Dt=Ct.gl,Kt=dt.transform,fe=Kt.tileSize,Ce=gt.paint.get("background-pattern");if(!dt.isPatternMissing(Ce)){var Je=!Ce&&Q.a===1&&mt===1&&dt.opaquePassEnabledForLayer()?"opaque":"translucent";if(dt.renderPass===Je){var ur=Ze.disabled,vr=dt.depthModeForSublayer(0,Je==="opaque"?Qr.ReadWrite:Qr.ReadOnly),Lr=dt.colorModeForRenderPass(),Yr=dt.useProgram(Ce?"backgroundPattern":"background"),$r=Kt.coveringTiles({tileSize:fe});Ce&&(Ct.activeTexture.set(Dt.TEXTURE0),dt.imageManager.bind(dt.context));for(var Vr=gt.getCrossfadeParameters(),Jr=0,pn=$r;Jr<pn.length;Jr+=1){var Ln=pn[Jr],Bn=dt.transform.calculatePosMatrix(Ln.toUnwrapped()),Jn=Ce?uc(Bn,mt,dt,Ce,{tileID:Ln,tileSize:fe},Vr):Co(Bn,mt,Q);Yr.draw(Ct,Dt.TRIANGLES,vr,ur,Lr,_e.disabled,Jn,gt.id,dt.tileExtentBuffer,dt.quadTriangleIndexBuffer,dt.tileExtentSegments)}}}}}var cr=new t.Color(1,0,0,1),wr=new t.Color(0,1,0,1),zr=new t.Color(0,0,1,1),jr=new t.Color(1,0,1,1),en=new t.Color(0,1,1,1);function _n(dt){var Y=dt.transform.padding,gt=3;$n(dt,dt.transform.height-(Y.top||0),gt,cr),$n(dt,Y.bottom||0,gt,wr),mi(dt,Y.left||0,gt,zr),mi(dt,dt.transform.width-(Y.right||0),gt,jr);var Q=dt.transform.centerPoint;zn(dt,Q.x,dt.transform.height-Q.y,en)}function zn(dt,Y,gt,Q){var mt=20,Ct=2;wi(dt,Y-Ct/2,gt-mt/2,Ct,mt,Q),wi(dt,Y-mt/2,gt-Ct/2,mt,Ct,Q)}function $n(dt,Y,gt,Q){wi(dt,0,Y+gt/2,dt.transform.width,gt,Q)}function mi(dt,Y,gt,Q){wi(dt,Y-gt/2,0,gt,dt.transform.height,Q)}function wi(dt,Y,gt,Q,mt,Ct){var Dt=dt.context,Kt=Dt.gl;Kt.enable(Kt.SCISSOR_TEST),Kt.scissor(Y*t.browser.devicePixelRatio,gt*t.browser.devicePixelRatio,Q*t.browser.devicePixelRatio,mt*t.browser.devicePixelRatio),Dt.clear({color:Ct}),Kt.disable(Kt.SCISSOR_TEST)}function Qi(dt,Y,gt){for(var Q=0;Q<gt.length;Q++)Xi(dt,Y,gt[Q])}function Xi(dt,Y,gt){var Q=dt.context,mt=Q.gl,Ct=gt.posMatrix,Dt=dt.useProgram("debug"),Kt=Qr.disabled,fe=Ze.disabled,Ce=dt.colorModeForRenderPass(),Je="$debug";Q.activeTexture.set(mt.TEXTURE0),dt.emptyTexture.bind(mt.LINEAR,mt.CLAMP_TO_EDGE),Dt.draw(Q,mt.LINE_STRIP,Kt,fe,Ce,_e.disabled,mn(Ct,t.Color.red),Je,dt.debugBuffer,dt.tileBorderIndexBuffer,dt.debugSegments);var ur=Y.getTileByID(gt.key).latestRawTileData,vr=ur&&ur.byteLength||0,Lr=Math.floor(vr/1024),Yr=Y.getTile(gt).tileSize,$r=512/Math.min(Yr,512)*(gt.overscaledZ/dt.transform.zoom)*.5,Vr=gt.canonical.toString();gt.overscaledZ!==gt.canonical.z&&(Vr+=" => "+gt.overscaledZ);var Jr=Vr+" "+Lr+"kb";na(dt,Jr),Dt.draw(Q,mt.TRIANGLES,Kt,fe,Ht.alphaBlended,_e.disabled,mn(Ct,t.Color.transparent,$r),Je,dt.debugBuffer,dt.quadTriangleIndexBuffer,dt.debugSegments)}function na(dt,Y){dt.initDebugOverlayCanvas();var gt=dt.debugOverlayCanvas,Q=dt.context.gl,mt=dt.debugOverlayCanvas.getContext("2d");mt.clearRect(0,0,gt.width,gt.height),mt.shadowColor="white",mt.shadowBlur=2,mt.lineWidth=1.5,mt.strokeStyle="white",mt.textBaseline="top",mt.font="bold "+36+"px Open Sans, sans-serif",mt.fillText(Y,5,5),mt.strokeText(Y,5,5),dt.debugOverlayTexture.update(gt),dt.debugOverlayTexture.bind(Q.LINEAR,Q.CLAMP_TO_EDGE)}function va(dt,Y,gt){var Q=dt.context,mt=gt.implementation;if(dt.renderPass==="offscreen"){var Ct=mt.prerender;Ct&&(dt.setCustomLayerDefaults(),Q.setColorMode(dt.colorModeForRenderPass()),Ct.call(mt,Q.gl,dt.transform.customLayerMatrix()),Q.setDirty(),dt.setBaseState())}else if(dt.renderPass==="translucent"){dt.setCustomLayerDefaults(),Q.setColorMode(dt.colorModeForRenderPass()),Q.setStencilMode(Ze.disabled);var Dt=mt.renderingMode==="3d"?new Qr(dt.context.gl.LEQUAL,Qr.ReadWrite,dt.depthRangeFor3D):dt.depthModeForSublayer(0,Qr.ReadOnly);Q.setDepthMode(Dt),mt.render(Q.gl,dt.transform.customLayerMatrix()),Q.setDirty(),dt.setBaseState(),Q.bindFramebuffer.set(null)}}var vo={symbol:mu,circle:jo,heatmap:wu,line:Kc,fill:_u,"fill-extrusion":jt,hillshade:ue,raster:Me,background:gr,debug:Qi,custom:va},aa=function(Y,gt){this.context=new Pe(Y),this.transform=gt,this._tileTextures={},this.setup(),this.numSublayers=Et.maxUnderzooming+Et.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new xi,this.gpuTimers={}};aa.prototype.resize=function(Y,gt){if(this.width=Y*t.browser.devicePixelRatio,this.height=gt*t.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var Q=0,mt=this.style._order;Q<mt.length;Q+=1){var Ct=mt[Q];this.style._layers[Ct].resize()}},aa.prototype.setup=function(){var Y=this.context,gt=new t.StructArrayLayout2i4;gt.emplaceBack(0,0),gt.emplaceBack(t.EXTENT,0),gt.emplaceBack(0,t.EXTENT),gt.emplaceBack(t.EXTENT,t.EXTENT),this.tileExtentBuffer=Y.createVertexBuffer(gt,Al.members),this.tileExtentSegments=t.SegmentVector.simpleSegment(0,0,4,2);var Q=new t.StructArrayLayout2i4;Q.emplaceBack(0,0),Q.emplaceBack(t.EXTENT,0),Q.emplaceBack(0,t.EXTENT),Q.emplaceBack(t.EXTENT,t.EXTENT),this.debugBuffer=Y.createVertexBuffer(Q,Al.members),this.debugSegments=t.SegmentVector.simpleSegment(0,0,4,5);var mt=new t.StructArrayLayout4i8;mt.emplaceBack(0,0,0,0),mt.emplaceBack(t.EXTENT,0,t.EXTENT,0),mt.emplaceBack(0,t.EXTENT,0,t.EXTENT),mt.emplaceBack(t.EXTENT,t.EXTENT,t.EXTENT,t.EXTENT),this.rasterBoundsBuffer=Y.createVertexBuffer(mt,X.members),this.rasterBoundsSegments=t.SegmentVector.simpleSegment(0,0,4,2);var Ct=new t.StructArrayLayout2i4;Ct.emplaceBack(0,0),Ct.emplaceBack(1,0),Ct.emplaceBack(0,1),Ct.emplaceBack(1,1),this.viewportBuffer=Y.createVertexBuffer(Ct,Al.members),this.viewportSegments=t.SegmentVector.simpleSegment(0,0,4,2);var Dt=new t.StructArrayLayout1ui2;Dt.emplaceBack(0),Dt.emplaceBack(1),Dt.emplaceBack(3),Dt.emplaceBack(2),Dt.emplaceBack(0),this.tileBorderIndexBuffer=Y.createIndexBuffer(Dt);var Kt=new t.StructArrayLayout3ui6;Kt.emplaceBack(0,1,2),Kt.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=Y.createIndexBuffer(Kt),this.emptyTexture=new t.Texture(Y,{width:1,height:1,data:new Uint8Array([0,0,0,0])},Y.gl.RGBA);var fe=this.context.gl;this.stencilClearMode=new Ze({func:fe.ALWAYS,mask:0},0,255,fe.ZERO,fe.ZERO,fe.ZERO)},aa.prototype.clearStencil=function(){var Y=this.context,gt=Y.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var Q=t.create();t.ortho(Q,0,this.width,this.height,0,0,1),t.scale(Q,Q,[gt.drawingBufferWidth,gt.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(Y,gt.TRIANGLES,Qr.disabled,this.stencilClearMode,Ht.disabled,_e.disabled,Pn(Q),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},aa.prototype._renderTileClippingMasks=function(Y,gt){if(!(this.currentStencilSource===Y.source||!Y.isTileClipped()||!gt||!gt.length)){this.currentStencilSource=Y.source;var Q=this.context,mt=Q.gl;this.nextStencilID+gt.length>256&&this.clearStencil(),Q.setColorMode(Ht.disabled),Q.setDepthMode(Qr.disabled);var Ct=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var Dt=0,Kt=gt;Dt<Kt.length;Dt+=1){var fe=Kt[Dt],Ce=this._tileClippingMaskIDs[fe.key]=this.nextStencilID++;Ct.draw(Q,mt.TRIANGLES,Qr.disabled,new Ze({func:mt.ALWAYS,mask:0},Ce,255,mt.KEEP,mt.KEEP,mt.REPLACE),Ht.disabled,_e.disabled,Pn(fe.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},aa.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var Y=this.nextStencilID++,gt=this.context.gl;return new Ze({func:gt.NOTEQUAL,mask:255},Y,255,gt.KEEP,gt.KEEP,gt.REPLACE)},aa.prototype.stencilModeForClipping=function(Y){var gt=this.context.gl;return new Ze({func:gt.EQUAL,mask:255},this._tileClippingMaskIDs[Y.key],0,gt.KEEP,gt.KEEP,gt.REPLACE)},aa.prototype.stencilConfigForOverlap=function(Y){var gt,Q=this.context.gl,mt=Y.sort(function(Ce,Je){return Je.overscaledZ-Ce.overscaledZ}),Ct=mt[mt.length-1].overscaledZ,Dt=mt[0].overscaledZ-Ct+1;if(Dt>1){this.currentStencilSource=void 0,this.nextStencilID+Dt>256&&this.clearStencil();for(var Kt={},fe=0;fe<Dt;fe++)Kt[fe+Ct]=new Ze({func:Q.GEQUAL,mask:255},fe+this.nextStencilID,255,Q.KEEP,Q.KEEP,Q.REPLACE);return this.nextStencilID+=Dt,[Kt,mt]}return[(gt={},gt[Ct]=Ze.disabled,gt),mt]},aa.prototype.colorModeForRenderPass=function(){var Y=this.context.gl;if(this._showOverdrawInspector){var gt=8,Q=1/gt;return new Ht([Y.CONSTANT_COLOR,Y.ONE],new t.Color(Q,Q,Q,0),[!0,!0,!0,!0])}else return this.renderPass==="opaque"?Ht.unblended:Ht.alphaBlended},aa.prototype.depthModeForSublayer=function(Y,gt,Q){if(!this.opaquePassEnabledForLayer())return Qr.disabled;var mt=1-((1+this.currentLayer)*this.numSublayers+Y)*this.depthEpsilon;return new Qr(Q||this.context.gl.LEQUAL,gt,[mt,mt])},aa.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},aa.prototype.render=function(Y,gt){var Q=this;this.style=Y,this.options=gt,this.lineAtlas=Y.lineAtlas,this.imageManager=Y.imageManager,this.glyphManager=Y.glyphManager,this.symbolFadeChange=Y.placement.symbolFadeChange(t.browser.now()),this.imageManager.beginFrame();var mt=this.style._order,Ct=this.style.sourceCaches;for(var Dt in Ct){var Kt=Ct[Dt];Kt.used&&Kt.prepare(this.context)}var fe={},Ce={},Je={};for(var ur in Ct){var vr=Ct[ur];fe[ur]=vr.getVisibleCoordinates(),Ce[ur]=fe[ur].slice().reverse(),Je[ur]=vr.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var Lr=0;Lr<mt.length;Lr++){var Yr=mt[Lr];if(this.style._layers[Yr].is3D()){this.opaquePassCutoff=Lr;break}}this.renderPass="offscreen";for(var $r=0,Vr=mt;$r<Vr.length;$r+=1){var Jr=Vr[$r],pn=this.style._layers[Jr];if(!(!pn.hasOffscreenPass()||pn.isHidden(this.transform.zoom))){var Ln=Ce[pn.source];pn.type!=="custom"&&!Ln.length||this.renderLayer(this,Ct[pn.source],pn,Ln)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:gt.showOverdrawInspector?t.Color.black:t.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=gt.showOverdrawInspector,this.depthRangeFor3D=[0,1-(Y._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=mt.length-1;this.currentLayer>=0;this.currentLayer--){var Bn=this.style._layers[mt[this.currentLayer]],Jn=Ct[Bn.source],ei=fe[Bn.source];this._renderTileClippingMasks(Bn,ei),this.renderLayer(this,Jn,Bn,ei)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<mt.length;this.currentLayer++){var qn=this.style._layers[mt[this.currentLayer]],di=Ct[qn.source],_i=(qn.type==="symbol"?Je:Ce)[qn.source];this._renderTileClippingMasks(qn,fe[qn.source]),this.renderLayer(this,di,qn,_i)}if(this.options.showTileBoundaries){var bi,Ai,Li=t.values(this.style._layers);Li.forEach(function(Yi){Yi.source&&!Yi.isHidden(Q.transform.zoom)&&(Yi.source!==(Ai&&Ai.id)&&(Ai=Q.style.sourceCaches[Yi.source]),(!bi||bi.getSource().maxzoom<Ai.getSource().maxzoom)&&(bi=Ai))}),bi&&vo.debug(this,bi,bi.getVisibleCoordinates())}this.options.showPadding&&_n(this),this.context.setDefault()},aa.prototype.renderLayer=function(Y,gt,Q,mt){Q.isHidden(this.transform.zoom)||Q.type!=="background"&&Q.type!=="custom"&&!mt.length||(this.id=Q.id,this.gpuTimingStart(Q),vo[Q.type](Y,gt,Q,mt,this.style.placement.variableOffsets),this.gpuTimingEnd())},aa.prototype.gpuTimingStart=function(Y){if(!!this.options.gpuTiming){var gt=this.context.extTimerQuery,Q=this.gpuTimers[Y.id];Q||(Q=this.gpuTimers[Y.id]={calls:0,cpuTime:0,query:gt.createQueryEXT()}),Q.calls++,gt.beginQueryEXT(gt.TIME_ELAPSED_EXT,Q.query)}},aa.prototype.gpuTimingEnd=function(){if(!!this.options.gpuTiming){var Y=this.context.extTimerQuery;Y.endQueryEXT(Y.TIME_ELAPSED_EXT)}},aa.prototype.collectGpuTimers=function(){var Y=this.gpuTimers;return this.gpuTimers={},Y},aa.prototype.queryGpuTimers=function(Y){var gt={};for(var Q in Y){var mt=Y[Q],Ct=this.context.extTimerQuery,Dt=Ct.getQueryObjectEXT(mt.query,Ct.QUERY_RESULT_EXT)/(1e3*1e3);Ct.deleteQueryEXT(mt.query),gt[Q]=Dt}return gt},aa.prototype.translatePosMatrix=function(Y,gt,Q,mt,Ct){if(!Q[0]&&!Q[1])return Y;var Dt=Ct?mt==="map"?this.transform.angle:0:mt==="viewport"?-this.transform.angle:0;if(Dt){var Kt=Math.sin(Dt),fe=Math.cos(Dt);Q=[Q[0]*fe-Q[1]*Kt,Q[0]*Kt+Q[1]*fe]}var Ce=[Ct?Q[0]:Sn(gt,Q[0],this.transform.zoom),Ct?Q[1]:Sn(gt,Q[1],this.transform.zoom),0],Je=new Float32Array(16);return t.translate(Je,Y,Ce),Je},aa.prototype.saveTileTexture=function(Y){var gt=this._tileTextures[Y.size[0]];gt?gt.push(Y):this._tileTextures[Y.size[0]]=[Y]},aa.prototype.getTileTexture=function(Y){var gt=this._tileTextures[Y];return gt&&gt.length>0?gt.pop():null},aa.prototype.isPatternMissing=function(Y){if(!Y)return!1;if(!Y.from||!Y.to)return!0;var gt=this.imageManager.getPattern(Y.from.toString()),Q=this.imageManager.getPattern(Y.to.toString());return!gt||!Q},aa.prototype.useProgram=function(Y,gt){this.cache=this.cache||{};var Q=""+Y+(gt?gt.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[Q]||(this.cache[Q]=new us(this.context,Pl[Y],gt,Sc[Y],this._showOverdrawInspector)),this.cache[Q]},aa.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},aa.prototype.setBaseState=function(){var Y=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(Y.FUNC_ADD)},aa.prototype.initDebugOverlayCanvas=function(){if(this.debugOverlayCanvas==null){this.debugOverlayCanvas=t.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512;var Y=this.context.gl;this.debugOverlayTexture=new t.Texture(this.context,this.debugOverlayCanvas,Y.RGBA)}},aa.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var Za=function(Y,gt){this.points=Y,this.planes=gt};Za.fromInvProjectionMatrix=function(Y,gt,Q){var mt=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]],Ct=Math.pow(2,Q),Dt=mt.map(function(Ce){return t.transformMat4([],Ce,Y)}).map(function(Ce){return t.scale$1([],Ce,1/Ce[3]/gt*Ct)}),Kt=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],fe=Kt.map(function(Ce){var Je=t.sub([],Dt[Ce[0]],Dt[Ce[1]]),ur=t.sub([],Dt[Ce[2]],Dt[Ce[1]]),vr=t.normalize([],t.cross([],Je,ur)),Lr=-t.dot(vr,Dt[Ce[1]]);return vr.concat(Lr)});return new Za(Dt,fe)};var xo=function(Y,gt){this.min=Y,this.max=gt,this.center=t.scale$2([],t.add([],this.min,this.max),.5)};xo.prototype.quadrant=function(Y){for(var gt=[Y%2===0,Y<2],Q=t.clone$2(this.min),mt=t.clone$2(this.max),Ct=0;Ct<gt.length;Ct++)Q[Ct]=gt[Ct]?this.min[Ct]:this.center[Ct],mt[Ct]=gt[Ct]?this.center[Ct]:this.max[Ct];return mt[2]=this.max[2],new xo(Q,mt)},xo.prototype.distanceX=function(Y){var gt=Math.max(Math.min(this.max[0],Y[0]),this.min[0]);return gt-Y[0]},xo.prototype.distanceY=function(Y){var gt=Math.max(Math.min(this.max[1],Y[1]),this.min[1]);return gt-Y[1]},xo.prototype.intersects=function(Y){for(var gt=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],Q=!0,mt=0;mt<Y.planes.length;mt++){for(var Ct=Y.planes[mt],Dt=0,Kt=0;Kt<gt.length;Kt++)Dt+=t.dot$1(Ct,gt[Kt])>=0;if(Dt===0)return 0;Dt!==gt.length&&(Q=!1)}if(Q)return 2;for(var fe=0;fe<3;fe++){for(var Ce=Number.MAX_VALUE,Je=-Number.MAX_VALUE,ur=0;ur<Y.points.length;ur++){var vr=Y.points[ur][fe]-this.min[fe];Ce=Math.min(Ce,vr),Je=Math.max(Je,vr)}if(Je<0||Ce>this.max[fe]-this.min[fe])return 0}return 1};var Do=function(Y,gt,Q,mt){if(Y===void 0&&(Y=0),gt===void 0&&(gt=0),Q===void 0&&(Q=0),mt===void 0&&(mt=0),isNaN(Y)||Y<0||isNaN(gt)||gt<0||isNaN(Q)||Q<0||isNaN(mt)||mt<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=Y,this.bottom=gt,this.left=Q,this.right=mt};Do.prototype.interpolate=function(Y,gt,Q){return gt.top!=null&&Y.top!=null&&(this.top=t.number(Y.top,gt.top,Q)),gt.bottom!=null&&Y.bottom!=null&&(this.bottom=t.number(Y.bottom,gt.bottom,Q)),gt.left!=null&&Y.left!=null&&(this.left=t.number(Y.left,gt.left,Q)),gt.right!=null&&Y.right!=null&&(this.right=t.number(Y.right,gt.right,Q)),this},Do.prototype.getCenter=function(Y,gt){var Q=t.clamp((this.left+Y-this.right)/2,0,Y),mt=t.clamp((this.top+gt-this.bottom)/2,0,gt);return new t.Point(Q,mt)},Do.prototype.equals=function(Y){return this.top===Y.top&&this.bottom===Y.bottom&&this.left===Y.left&&this.right===Y.right},Do.prototype.clone=function(){return new Do(this.top,this.bottom,this.left,this.right)},Do.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var ka=function(Y,gt,Q,mt,Ct){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=Ct===void 0?!0:Ct,this._minZoom=Y||0,this._maxZoom=gt||22,this._minPitch=Q==null?0:Q,this._maxPitch=mt==null?60:mt,this.setMaxBounds(),this.width=0,this.height=0,this._center=new t.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Do,this._posMatrixCache={},this._alignedPosMatrixCache={}},Ea={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};ka.prototype.clone=function(){var Y=new ka(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return Y.tileSize=this.tileSize,Y.latRange=this.latRange,Y.width=this.width,Y.height=this.height,Y._center=this._center,Y.zoom=this.zoom,Y.angle=this.angle,Y._fov=this._fov,Y._pitch=this._pitch,Y._unmodified=this._unmodified,Y._edgeInsets=this._edgeInsets.clone(),Y._calcMatrices(),Y},Ea.minZoom.get=function(){return this._minZoom},Ea.minZoom.set=function(dt){this._minZoom!==dt&&(this._minZoom=dt,this.zoom=Math.max(this.zoom,dt))},Ea.maxZoom.get=function(){return this._maxZoom},Ea.maxZoom.set=function(dt){this._maxZoom!==dt&&(this._maxZoom=dt,this.zoom=Math.min(this.zoom,dt))},Ea.minPitch.get=function(){return this._minPitch},Ea.minPitch.set=function(dt){this._minPitch!==dt&&(this._minPitch=dt,this.pitch=Math.max(this.pitch,dt))},Ea.maxPitch.get=function(){return this._maxPitch},Ea.maxPitch.set=function(dt){this._maxPitch!==dt&&(this._maxPitch=dt,this.pitch=Math.min(this.pitch,dt))},Ea.renderWorldCopies.get=function(){return this._renderWorldCopies},Ea.renderWorldCopies.set=function(dt){dt===void 0?dt=!0:dt===null&&(dt=!1),this._renderWorldCopies=dt},Ea.worldSize.get=function(){return this.tileSize*this.scale},Ea.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},Ea.size.get=function(){return new t.Point(this.width,this.height)},Ea.bearing.get=function(){return-this.angle/Math.PI*180},Ea.bearing.set=function(dt){var Y=-t.wrap(dt,-180,180)*Math.PI/180;this.angle!==Y&&(this._unmodified=!1,this.angle=Y,this._calcMatrices(),this.rotationMatrix=t.create$2(),t.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Ea.pitch.get=function(){return this._pitch/Math.PI*180},Ea.pitch.set=function(dt){var Y=t.clamp(dt,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==Y&&(this._unmodified=!1,this._pitch=Y,this._calcMatrices())},Ea.fov.get=function(){return this._fov/Math.PI*180},Ea.fov.set=function(dt){dt=Math.max(.01,Math.min(60,dt)),this._fov!==dt&&(this._unmodified=!1,this._fov=dt/180*Math.PI,this._calcMatrices())},Ea.zoom.get=function(){return this._zoom},Ea.zoom.set=function(dt){var Y=Math.min(Math.max(dt,this.minZoom),this.maxZoom);this._zoom!==Y&&(this._unmodified=!1,this._zoom=Y,this.scale=this.zoomScale(Y),this.tileZoom=Math.floor(Y),this.zoomFraction=Y-this.tileZoom,this._constrain(),this._calcMatrices())},Ea.center.get=function(){return this._center},Ea.center.set=function(dt){dt.lat===this._center.lat&&dt.lng===this._center.lng||(this._unmodified=!1,this._center=dt,this._constrain(),this._calcMatrices())},Ea.padding.get=function(){return this._edgeInsets.toJSON()},Ea.padding.set=function(dt){this._edgeInsets.equals(dt)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,dt,1),this._calcMatrices())},Ea.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},ka.prototype.isPaddingEqual=function(Y){return this._edgeInsets.equals(Y)},ka.prototype.interpolatePadding=function(Y,gt,Q){this._unmodified=!1,this._edgeInsets.interpolate(Y,gt,Q),this._constrain(),this._calcMatrices()},ka.prototype.coveringZoomLevel=function(Y){var gt=(Y.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/Y.tileSize));return Math.max(0,gt)},ka.prototype.getVisibleUnwrappedCoordinates=function(Y){var gt=[new t.UnwrappedTileID(0,Y)];if(this._renderWorldCopies)for(var Q=this.pointCoordinate(new t.Point(0,0)),mt=this.pointCoordinate(new t.Point(this.width,0)),Ct=this.pointCoordinate(new t.Point(this.width,this.height)),Dt=this.pointCoordinate(new t.Point(0,this.height)),Kt=Math.floor(Math.min(Q.x,mt.x,Ct.x,Dt.x)),fe=Math.floor(Math.max(Q.x,mt.x,Ct.x,Dt.x)),Ce=1,Je=Kt-Ce;Je<=fe+Ce;Je++)Je!==0&&gt.push(new t.UnwrappedTileID(Je,Y));return gt},ka.prototype.coveringTiles=function(Y){var gt=this.coveringZoomLevel(Y),Q=gt;if(Y.minzoom!==void 0&&gt<Y.minzoom)return[];Y.maxzoom!==void 0&&gt>Y.maxzoom&&(gt=Y.maxzoom);var mt=t.MercatorCoordinate.fromLngLat(this.center),Ct=Math.pow(2,gt),Dt=[Ct*mt.x,Ct*mt.y,0],Kt=Za.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,gt),fe=Y.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(fe=gt);var Ce=3,Je=function(Li){return{aabb:new xo([Li*Ct,0,0],[(Li+1)*Ct,Ct,0]),zoom:0,x:0,y:0,wrap:Li,fullyVisible:!1}},ur=[],vr=[],Lr=gt,Yr=Y.reparseOverscaled?Q:gt;if(this._renderWorldCopies)for(var $r=1;$r<=3;$r++)ur.push(Je(-$r)),ur.push(Je($r));for(ur.push(Je(0));ur.length>0;){var Vr=ur.pop(),Jr=Vr.x,pn=Vr.y,Ln=Vr.fullyVisible;if(!Ln){var Bn=Vr.aabb.intersects(Kt);if(Bn===0)continue;Ln=Bn===2}var Jn=Vr.aabb.distanceX(Dt),ei=Vr.aabb.distanceY(Dt),qn=Math.max(Math.abs(Jn),Math.abs(ei)),di=Ce+(1<<Lr-Vr.zoom)-2;if(Vr.zoom===Lr||qn>di&&Vr.zoom>=fe){vr.push({tileID:new t.OverscaledTileID(Vr.zoom===Lr?Yr:Vr.zoom,Vr.wrap,Vr.zoom,Jr,pn),distanceSq:t.sqrLen([Dt[0]-.5-Jr,Dt[1]-.5-pn])});continue}for(var _i=0;_i<4;_i++){var bi=(Jr<<1)+_i%2,Ai=(pn<<1)+(_i>>1);ur.push({aabb:Vr.aabb.quadrant(_i),zoom:Vr.zoom+1,x:bi,y:Ai,wrap:Vr.wrap,fullyVisible:Ln})}}return vr.sort(function(Li,Yi){return Li.distanceSq-Yi.distanceSq}).map(function(Li){return Li.tileID})},ka.prototype.resize=function(Y,gt){this.width=Y,this.height=gt,this.pixelsToGLUnits=[2/Y,-2/gt],this._constrain(),this._calcMatrices()},Ea.unmodified.get=function(){return this._unmodified},ka.prototype.zoomScale=function(Y){return Math.pow(2,Y)},ka.prototype.scaleZoom=function(Y){return Math.log(Y)/Math.LN2},ka.prototype.project=function(Y){var gt=t.clamp(Y.lat,-this.maxValidLatitude,this.maxValidLatitude);return new t.Point(t.mercatorXfromLng(Y.lng)*this.worldSize,t.mercatorYfromLat(gt)*this.worldSize)},ka.prototype.unproject=function(Y){return new t.MercatorCoordinate(Y.x/this.worldSize,Y.y/this.worldSize).toLngLat()},Ea.point.get=function(){return this.project(this.center)},ka.prototype.setLocationAtPoint=function(Y,gt){var Q=this.pointCoordinate(gt),mt=this.pointCoordinate(this.centerPoint),Ct=this.locationCoordinate(Y),Dt=new t.MercatorCoordinate(Ct.x-(Q.x-mt.x),Ct.y-(Q.y-mt.y));this.center=this.coordinateLocation(Dt),this._renderWorldCopies&&(this.center=this.center.wrap())},ka.prototype.locationPoint=function(Y){return this.coordinatePoint(this.locationCoordinate(Y))},ka.prototype.pointLocation=function(Y){return this.coordinateLocation(this.pointCoordinate(Y))},ka.prototype.locationCoordinate=function(Y){return t.MercatorCoordinate.fromLngLat(Y)},ka.prototype.coordinateLocation=function(Y){return Y.toLngLat()},ka.prototype.pointCoordinate=function(Y){var gt=0,Q=[Y.x,Y.y,0,1],mt=[Y.x,Y.y,1,1];t.transformMat4(Q,Q,this.pixelMatrixInverse),t.transformMat4(mt,mt,this.pixelMatrixInverse);var Ct=Q[3],Dt=mt[3],Kt=Q[0]/Ct,fe=mt[0]/Dt,Ce=Q[1]/Ct,Je=mt[1]/Dt,ur=Q[2]/Ct,vr=mt[2]/Dt,Lr=ur===vr?0:(gt-ur)/(vr-ur);return new t.MercatorCoordinate(t.number(Kt,fe,Lr)/this.worldSize,t.number(Ce,Je,Lr)/this.worldSize)},ka.prototype.coordinatePoint=function(Y){var gt=[Y.x*this.worldSize,Y.y*this.worldSize,0,1];return t.transformMat4(gt,gt,this.pixelMatrix),new t.Point(gt[0]/gt[3],gt[1]/gt[3])},ka.prototype.getBounds=function(){return new t.LngLatBounds().extend(this.pointLocation(new t.Point(0,0))).extend(this.pointLocation(new t.Point(this.width,0))).extend(this.pointLocation(new t.Point(this.width,this.height))).extend(this.pointLocation(new t.Point(0,this.height)))},ka.prototype.getMaxBounds=function(){return!this.latRange||this.latRange.length!==2||!this.lngRange||this.lngRange.length!==2?null:new t.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]])},ka.prototype.setMaxBounds=function(Y){Y?(this.lngRange=[Y.getWest(),Y.getEast()],this.latRange=[Y.getSouth(),Y.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},ka.prototype.calculatePosMatrix=function(Y,gt){gt===void 0&&(gt=!1);var Q=Y.key,mt=gt?this._alignedPosMatrixCache:this._posMatrixCache;if(mt[Q])return mt[Q];var Ct=Y.canonical,Dt=this.worldSize/this.zoomScale(Ct.z),Kt=Ct.x+Math.pow(2,Ct.z)*Y.wrap,fe=t.identity(new Float64Array(16));return t.translate(fe,fe,[Kt*Dt,Ct.y*Dt,0]),t.scale(fe,fe,[Dt/t.EXTENT,Dt/t.EXTENT,1]),t.multiply(fe,gt?this.alignedProjMatrix:this.projMatrix,fe),mt[Q]=new Float32Array(fe),mt[Q]},ka.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},ka.prototype._constrain=function(){if(!(!this.center||!this.width||!this.height||this._constraining)){this._constraining=!0;var Y=-90,gt=90,Q=-180,mt=180,Ct,Dt,Kt,fe,Ce=this.size,Je=this._unmodified;if(this.latRange){var ur=this.latRange;Y=t.mercatorYfromLat(ur[1])*this.worldSize,gt=t.mercatorYfromLat(ur[0])*this.worldSize,Ct=gt-Y<Ce.y?Ce.y/(gt-Y):0}if(this.lngRange){var vr=this.lngRange;Q=t.mercatorXfromLng(vr[0])*this.worldSize,mt=t.mercatorXfromLng(vr[1])*this.worldSize,Dt=mt-Q<Ce.x?Ce.x/(mt-Q):0}var Lr=this.point,Yr=Math.max(Dt||0,Ct||0);if(Yr){this.center=this.unproject(new t.Point(Dt?(mt+Q)/2:Lr.x,Ct?(gt+Y)/2:Lr.y)),this.zoom+=this.scaleZoom(Yr),this._unmodified=Je,this._constraining=!1;return}if(this.latRange){var $r=Lr.y,Vr=Ce.y/2;$r-Vr<Y&&(fe=Y+Vr),$r+Vr>gt&&(fe=gt-Vr)}if(this.lngRange){var Jr=Lr.x,pn=Ce.x/2;Jr-pn<Q&&(Kt=Q+pn),Jr+pn>mt&&(Kt=mt-pn)}(Kt!==void 0||fe!==void 0)&&(this.center=this.unproject(new t.Point(Kt!==void 0?Kt:Lr.x,fe!==void 0?fe:Lr.y))),this._unmodified=Je,this._constraining=!1}},ka.prototype._calcMatrices=function(){if(!!this.height){var Y=this._fov/2,gt=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(Y)*this.height;var Q=Math.PI/2+this._pitch,mt=this._fov*(.5+gt.y/this.height),Ct=Math.sin(mt)*this.cameraToCenterDistance/Math.sin(t.clamp(Math.PI-Q-mt,.01,Math.PI-.01)),Dt=this.point,Kt=Dt.x,fe=Dt.y,Ce=Math.cos(Math.PI/2-this._pitch)*Ct+this.cameraToCenterDistance,Je=Ce*1.01,ur=this.height/50,vr=new Float64Array(16);t.perspective(vr,this._fov,this.width/this.height,ur,Je),vr[8]=-gt.x*2/this.width,vr[9]=gt.y*2/this.height,t.scale(vr,vr,[1,-1,1]),t.translate(vr,vr,[0,0,-this.cameraToCenterDistance]),t.rotateX(vr,vr,this._pitch),t.rotateZ(vr,vr,this.angle),t.translate(vr,vr,[-Kt,-fe,0]),this.mercatorMatrix=t.scale([],vr,[this.worldSize,this.worldSize,this.worldSize]),t.scale(vr,vr,[1,1,t.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=vr,this.invProjMatrix=t.invert([],this.projMatrix);var Lr=this.width%2/2,Yr=this.height%2/2,$r=Math.cos(this.angle),Vr=Math.sin(this.angle),Jr=Kt-Math.round(Kt)+$r*Lr+Vr*Yr,pn=fe-Math.round(fe)+$r*Yr+Vr*Lr,Ln=new Float64Array(vr);if(t.translate(Ln,Ln,[Jr>.5?Jr-1:Jr,pn>.5?pn-1:pn,0]),this.alignedProjMatrix=Ln,vr=t.create(),t.scale(vr,vr,[this.width/2,-this.height/2,1]),t.translate(vr,vr,[1,-1,0]),this.labelPlaneMatrix=vr,vr=t.create(),t.scale(vr,vr,[1,-1,1]),t.translate(vr,vr,[-1,-1,0]),t.scale(vr,vr,[2/this.width,2/this.height,1]),this.glCoordMatrix=vr,this.pixelMatrix=t.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),vr=t.invert(new Float64Array(16),this.pixelMatrix),!vr)throw new Error("failed to invert matrix");this.pixelMatrixInverse=vr,this._posMatrixCache={},this._alignedPosMatrixCache={}}},ka.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var Y=this.pointCoordinate(new t.Point(0,0)),gt=[Y.x*this.worldSize,Y.y*this.worldSize,0,1],Q=t.transformMat4(gt,gt,this.pixelMatrix);return Q[3]/this.cameraToCenterDistance},ka.prototype.getCameraPoint=function(){var Y=this._pitch,gt=Math.tan(Y)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.Point(0,gt))},ka.prototype.getCameraQueryGeometry=function(Y){var gt=this.getCameraPoint();if(Y.length===1)return[Y[0],gt];for(var Q=gt.x,mt=gt.y,Ct=gt.x,Dt=gt.y,Kt=0,fe=Y;Kt<fe.length;Kt+=1){var Ce=fe[Kt];Q=Math.min(Q,Ce.x),mt=Math.min(mt,Ce.y),Ct=Math.max(Ct,Ce.x),Dt=Math.max(Dt,Ce.y)}return[new t.Point(Q,mt),new t.Point(Ct,mt),new t.Point(Ct,Dt),new t.Point(Q,Dt),new t.Point(Q,mt)]},Object.defineProperties(ka.prototype,Ea);function Ts(dt,Y){var gt=!1,Q=null,mt=function(){Q=null,gt&&(dt(),Q=setTimeout(mt,Y),gt=!1)};return function(){return gt=!0,Q||mt(),Q}}var Ao=function(Y){this._hashName=Y&&encodeURIComponent(Y),t.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Ts(this._updateHashUnthrottled.bind(this),30*1e3/100)};Ao.prototype.addTo=function(Y){return this._map=Y,t.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Ao.prototype.remove=function(){return t.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Ao.prototype.getHashString=function(Y){var gt=this._map.getCenter(),Q=Math.round(this._map.getZoom()*100)/100,mt=Math.ceil((Q*Math.LN2+Math.log(512/360/.5))/Math.LN10),Ct=Math.pow(10,mt),Dt=Math.round(gt.lng*Ct)/Ct,Kt=Math.round(gt.lat*Ct)/Ct,fe=this._map.getBearing(),Ce=this._map.getPitch(),Je="";if(Y?Je+="/"+Dt+"/"+Kt+"/"+Q:Je+=Q+"/"+Kt+"/"+Dt,(fe||Ce)&&(Je+="/"+Math.round(fe*10)/10),Ce&&(Je+="/"+Math.round(Ce)),this._hashName){var ur=this._hashName,vr=!1,Lr=t.window.location.hash.slice(1).split("&").map(function(Yr){var $r=Yr.split("=")[0];return $r===ur?(vr=!0,$r+"="+Je):Yr}).filter(function(Yr){return Yr});return vr||Lr.push(ur+"="+Je),"#"+Lr.join("&")}return"#"+Je},Ao.prototype._getCurrentHash=function(){var Y=this,gt=t.window.location.hash.replace("#","");if(this._hashName){var Q;return gt.split("&").map(function(mt){return mt.split("=")}).forEach(function(mt){mt[0]===Y._hashName&&(Q=mt)}),(Q&&Q[1]||"").split("/")}return gt.split("/")},Ao.prototype._onHashChange=function(){var Y=this._getCurrentHash();if(Y.length>=3&&!Y.some(function(Q){return isNaN(Q)})){var gt=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(Y[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+Y[2],+Y[1]],zoom:+Y[0],bearing:gt,pitch:+(Y[4]||0)}),!0}return!1},Ao.prototype._updateHashUnthrottled=function(){var Y=this.getHashString();try{t.window.history.replaceState(t.window.history.state,"",Y)}catch{}};var Ho={linearity:.3,easing:t.bezier(0,0,.3,1)},rs=t.extend({deceleration:2500,maxSpeed:1400},Ho),ft=t.extend({deceleration:20,maxSpeed:1400},Ho),_t=t.extend({deceleration:1e3,maxSpeed:360},Ho),Lt=t.extend({deceleration:1e3,maxSpeed:90},Ho),Ut=function(Y){this._map=Y,this.clear()};Ut.prototype.clear=function(){this._inertiaBuffer=[]},Ut.prototype.record=function(Y){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:t.browser.now(),settings:Y})},Ut.prototype._drainInertiaBuffer=function(){for(var Y=this._inertiaBuffer,gt=t.browser.now(),Q=160;Y.length>0&&gt-Y[0].time>Q;)Y.shift()},Ut.prototype._onMoveEnd=function(Y){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var gt={zoom:0,bearing:0,pitch:0,pan:new t.Point(0,0),pinchAround:void 0,around:void 0},Q=0,mt=this._inertiaBuffer;Q<mt.length;Q+=1){var Ct=mt[Q],Dt=Ct.settings;gt.zoom+=Dt.zoomDelta||0,gt.bearing+=Dt.bearingDelta||0,gt.pitch+=Dt.pitchDelta||0,Dt.panDelta&&gt.pan._add(Dt.panDelta),Dt.around&&(gt.around=Dt.around),Dt.pinchAround&&(gt.pinchAround=Dt.pinchAround)}var Kt=this._inertiaBuffer[this._inertiaBuffer.length-1],fe=Kt.time-this._inertiaBuffer[0].time,Ce={};if(gt.pan.mag()){var Je=Jt(gt.pan.mag(),fe,t.extend({},rs,Y||{}));Ce.offset=gt.pan.mult(Je.amount/gt.pan.mag()),Ce.center=this._map.transform.center,Bt(Ce,Je)}if(gt.zoom){var ur=Jt(gt.zoom,fe,ft);Ce.zoom=this._map.transform.zoom+ur.amount,Bt(Ce,ur)}if(gt.bearing){var vr=Jt(gt.bearing,fe,_t);Ce.bearing=this._map.transform.bearing+t.clamp(vr.amount,-179,179),Bt(Ce,vr)}if(gt.pitch){var Lr=Jt(gt.pitch,fe,Lt);Ce.pitch=this._map.transform.pitch+Lr.amount,Bt(Ce,Lr)}if(Ce.zoom||Ce.bearing){var Yr=gt.pinchAround===void 0?gt.around:gt.pinchAround;Ce.around=Yr?this._map.unproject(Yr):this._map.getCenter()}return this.clear(),t.extend(Ce,{noMoveStart:!0})}};function Bt(dt,Y){(!dt.duration||dt.duration<Y.duration)&&(dt.duration=Y.duration,dt.easing=Y.easing)}function Jt(dt,Y,gt){var Q=gt.maxSpeed,mt=gt.linearity,Ct=gt.deceleration,Dt=t.clamp(dt*mt/(Y/1e3),-Q,Q),Kt=Math.abs(Dt)/(Ct*mt);return{easing:gt.easing,duration:Kt*1e3,amount:Dt*(Kt/2)}}var we=function(dt){function Y(Q,mt,Ct,Dt){Dt===void 0&&(Dt={});var Kt=i.mousePos(mt.getCanvasContainer(),Ct),fe=mt.unproject(Kt);dt.call(this,Q,t.extend({point:Kt,lngLat:fe,originalEvent:Ct},Dt)),this._defaultPrevented=!1,this.target=mt}dt&&(Y.__proto__=dt),Y.prototype=Object.create(dt&&dt.prototype),Y.prototype.constructor=Y;var gt={defaultPrevented:{configurable:!0}};return Y.prototype.preventDefault=function(){this._defaultPrevented=!0},gt.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(Y.prototype,gt),Y}(t.Event),pe=function(dt){function Y(Q,mt,Ct){var Dt=Q==="touchend"?Ct.changedTouches:Ct.touches,Kt=i.touchPos(mt.getCanvasContainer(),Dt),fe=Kt.map(function(ur){return mt.unproject(ur)}),Ce=Kt.reduce(function(ur,vr,Lr,Yr){return ur.add(vr.div(Yr.length))},new t.Point(0,0)),Je=mt.unproject(Ce);dt.call(this,Q,{points:Kt,point:Ce,lngLats:fe,lngLat:Je,originalEvent:Ct}),this._defaultPrevented=!1}dt&&(Y.__proto__=dt),Y.prototype=Object.create(dt&&dt.prototype),Y.prototype.constructor=Y;var gt={defaultPrevented:{configurable:!0}};return Y.prototype.preventDefault=function(){this._defaultPrevented=!0},gt.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(Y.prototype,gt),Y}(t.Event),De=function(dt){function Y(Q,mt,Ct){dt.call(this,Q,{originalEvent:Ct}),this._defaultPrevented=!1}dt&&(Y.__proto__=dt),Y.prototype=Object.create(dt&&dt.prototype),Y.prototype.constructor=Y;var gt={defaultPrevented:{configurable:!0}};return Y.prototype.preventDefault=function(){this._defaultPrevented=!0},gt.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(Y.prototype,gt),Y}(t.Event),je=function(Y,gt){this._map=Y,this._clickTolerance=gt.clickTolerance};je.prototype.reset=function(){delete this._mousedownPos},je.prototype.wheel=function(Y){return this._firePreventable(new De(Y.type,this._map,Y))},je.prototype.mousedown=function(Y,gt){return this._mousedownPos=gt,this._firePreventable(new we(Y.type,this._map,Y))},je.prototype.mouseup=function(Y){this._map.fire(new we(Y.type,this._map,Y))},je.prototype.click=function(Y,gt){this._mousedownPos&&this._mousedownPos.dist(gt)>=this._clickTolerance||this._map.fire(new we(Y.type,this._map,Y))},je.prototype.dblclick=function(Y){return this._firePreventable(new we(Y.type,this._map,Y))},je.prototype.mouseover=function(Y){this._map.fire(new we(Y.type,this._map,Y))},je.prototype.mouseout=function(Y){this._map.fire(new we(Y.type,this._map,Y))},je.prototype.touchstart=function(Y){return this._firePreventable(new pe(Y.type,this._map,Y))},je.prototype.touchmove=function(Y){this._map.fire(new pe(Y.type,this._map,Y))},je.prototype.touchend=function(Y){this._map.fire(new pe(Y.type,this._map,Y))},je.prototype.touchcancel=function(Y){this._map.fire(new pe(Y.type,this._map,Y))},je.prototype._firePreventable=function(Y){if(this._map.fire(Y),Y.defaultPrevented)return{}},je.prototype.isEnabled=function(){return!0},je.prototype.isActive=function(){return!1},je.prototype.enable=function(){},je.prototype.disable=function(){};var tr=function(Y){this._map=Y};tr.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},tr.prototype.mousemove=function(Y){this._map.fire(new we(Y.type,this._map,Y))},tr.prototype.mousedown=function(){this._delayContextMenu=!0},tr.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new we("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},tr.prototype.contextmenu=function(Y){this._delayContextMenu?this._contextMenuEvent=Y:this._map.fire(new we(Y.type,this._map,Y)),this._map.listens("contextmenu")&&Y.preventDefault()},tr.prototype.isEnabled=function(){return!0},tr.prototype.isActive=function(){return!1},tr.prototype.enable=function(){},tr.prototype.disable=function(){};var rr=function(Y,gt){this._map=Y,this._el=Y.getCanvasContainer(),this._container=Y.getContainer(),this._clickTolerance=gt.clickTolerance||1};rr.prototype.isEnabled=function(){return!!this._enabled},rr.prototype.isActive=function(){return!!this._active},rr.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},rr.prototype.disable=function(){!this.isEnabled()||(this._enabled=!1)},rr.prototype.mousedown=function(Y,gt){!this.isEnabled()||!(Y.shiftKey&&Y.button===0)||(i.disableDrag(),this._startPos=this._lastPos=gt,this._active=!0)},rr.prototype.mousemoveWindow=function(Y,gt){if(!!this._active){var Q=gt;if(!(this._lastPos.equals(Q)||!this._box&&Q.dist(this._startPos)<this._clickTolerance)){var mt=this._startPos;this._lastPos=Q,this._box||(this._box=i.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",Y));var Ct=Math.min(mt.x,Q.x),Dt=Math.max(mt.x,Q.x),Kt=Math.min(mt.y,Q.y),fe=Math.max(mt.y,Q.y);i.setTransform(this._box,"translate("+Ct+"px,"+Kt+"px)"),this._box.style.width=Dt-Ct+"px",this._box.style.height=fe-Kt+"px"}}},rr.prototype.mouseupWindow=function(Y,gt){var Q=this;if(!!this._active&&Y.button===0){var mt=this._startPos,Ct=gt;if(this.reset(),i.suppressClick(),mt.x===Ct.x&&mt.y===Ct.y)this._fireEvent("boxzoomcancel",Y);else return this._map.fire(new t.Event("boxzoomend",{originalEvent:Y})),{cameraAnimation:function(Dt){return Dt.fitScreenCoordinates(mt,Ct,Q._map.getBearing(),{linear:!0})}}}},rr.prototype.keydown=function(Y){!this._active||Y.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",Y))},rr.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(i.remove(this._box),this._box=null),i.enableDrag(),delete this._startPos,delete this._lastPos},rr.prototype._fireEvent=function(Y,gt){return this._map.fire(new t.Event(Y,{originalEvent:gt}))};function Sr(dt,Y){for(var gt={},Q=0;Q<dt.length;Q++)gt[dt[Q].identifier]=Y[Q];return gt}function qr(dt){for(var Y=new t.Point(0,0),gt=0,Q=dt;gt<Q.length;gt+=1){var mt=Q[gt];Y._add(mt)}return Y.div(dt.length)}var cn=500,Pr=500,Ur=30,Zr=function(Y){this.reset(),this.numTouches=Y.numTouches};Zr.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Zr.prototype.touchstart=function(Y,gt,Q){(this.centroid||Q.length>this.numTouches)&&(this.aborted=!0),!this.aborted&&(this.startTime===void 0&&(this.startTime=Y.timeStamp),Q.length===this.numTouches&&(this.centroid=qr(gt),this.touches=Sr(Q,gt)))},Zr.prototype.touchmove=function(Y,gt,Q){if(!(this.aborted||!this.centroid)){var mt=Sr(Q,gt);for(var Ct in this.touches){var Dt=this.touches[Ct],Kt=mt[Ct];(!Kt||Kt.dist(Dt)>Ur)&&(this.aborted=!0)}}},Zr.prototype.touchend=function(Y,gt,Q){if((!this.centroid||Y.timeStamp-this.startTime>Pr)&&(this.aborted=!0),Q.length===0){var mt=!this.aborted&&this.centroid;if(this.reset(),mt)return mt}};var on=function(Y){this.singleTap=new Zr(Y),this.numTaps=Y.numTaps,this.reset()};on.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},on.prototype.touchstart=function(Y,gt,Q){this.singleTap.touchstart(Y,gt,Q)},on.prototype.touchmove=function(Y,gt,Q){this.singleTap.touchmove(Y,gt,Q)},on.prototype.touchend=function(Y,gt,Q){var mt=this.singleTap.touchend(Y,gt,Q);if(mt){var Ct=Y.timeStamp-this.lastTime<cn,Dt=!this.lastTap||this.lastTap.dist(mt)<Ur;if((!Ct||!Dt)&&this.reset(),this.count++,this.lastTime=Y.timeStamp,this.lastTap=mt,this.count===this.numTaps)return this.reset(),mt}};var ln=function(){this._zoomIn=new on({numTouches:1,numTaps:2}),this._zoomOut=new on({numTouches:2,numTaps:1}),this.reset()};ln.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},ln.prototype.touchstart=function(Y,gt,Q){this._zoomIn.touchstart(Y,gt,Q),this._zoomOut.touchstart(Y,gt,Q)},ln.prototype.touchmove=function(Y,gt,Q){this._zoomIn.touchmove(Y,gt,Q),this._zoomOut.touchmove(Y,gt,Q)},ln.prototype.touchend=function(Y,gt,Q){var mt=this,Ct=this._zoomIn.touchend(Y,gt,Q),Dt=this._zoomOut.touchend(Y,gt,Q);if(Ct)return this._active=!0,Y.preventDefault(),setTimeout(function(){return mt.reset()},0),{cameraAnimation:function(Kt){return Kt.easeTo({duration:300,zoom:Kt.getZoom()+1,around:Kt.unproject(Ct)},{originalEvent:Y})}};if(Dt)return this._active=!0,Y.preventDefault(),setTimeout(function(){return mt.reset()},0),{cameraAnimation:function(Kt){return Kt.easeTo({duration:300,zoom:Kt.getZoom()-1,around:Kt.unproject(Dt)},{originalEvent:Y})}}},ln.prototype.touchcancel=function(){this.reset()},ln.prototype.enable=function(){this._enabled=!0},ln.prototype.disable=function(){this._enabled=!1,this.reset()},ln.prototype.isEnabled=function(){return this._enabled},ln.prototype.isActive=function(){return this._active};var Kr=0,Vn=2,ii=function(Y){this.reset(),this._clickTolerance=Y.clickTolerance||1};ii.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},ii.prototype._correctButton=function(Y,gt){return!1},ii.prototype._move=function(Y,gt){return{}},ii.prototype.mousedown=function(Y,gt){if(!this._lastPoint){var Q=i.mouseButton(Y);!this._correctButton(Y,Q)||(this._lastPoint=gt,this._eventButton=Q)}},ii.prototype.mousemoveWindow=function(Y,gt){var Q=this._lastPoint;if(!!Q&&(Y.preventDefault(),!(!this._moved&&gt.dist(Q)<this._clickTolerance)))return this._moved=!0,this._lastPoint=gt,this._move(Q,gt)},ii.prototype.mouseupWindow=function(Y){var gt=i.mouseButton(Y);gt===this._eventButton&&(this._moved&&i.suppressClick(),this.reset())},ii.prototype.enable=function(){this._enabled=!0},ii.prototype.disable=function(){this._enabled=!1,this.reset()},ii.prototype.isEnabled=function(){return this._enabled},ii.prototype.isActive=function(){return this._active};var ki=function(dt){function Y(){dt.apply(this,arguments)}return dt&&(Y.__proto__=dt),Y.prototype=Object.create(dt&&dt.prototype),Y.prototype.constructor=Y,Y.prototype.mousedown=function(Q,mt){dt.prototype.mousedown.call(this,Q,mt),this._lastPoint&&(this._active=!0)},Y.prototype._correctButton=function(Q,mt){return mt===Kr&&!Q.ctrlKey},Y.prototype._move=function(Q,mt){return{around:mt,panDelta:mt.sub(Q)}},Y}(ii),si=function(dt){function Y(){dt.apply(this,arguments)}return dt&&(Y.__proto__=dt),Y.prototype=Object.create(dt&&dt.prototype),Y.prototype.constructor=Y,Y.prototype._correctButton=function(Q,mt){return mt===Kr&&Q.ctrlKey||mt===Vn},Y.prototype._move=function(Q,mt){var Ct=.8,Dt=(mt.x-Q.x)*Ct;if(Dt)return this._active=!0,{bearingDelta:Dt}},Y.prototype.contextmenu=function(Q){Q.preventDefault()},Y}(ii),Ci=function(dt){function Y(){dt.apply(this,arguments)}return dt&&(Y.__proto__=dt),Y.prototype=Object.create(dt&&dt.prototype),Y.prototype.constructor=Y,Y.prototype._correctButton=function(Q,mt){return mt===Kr&&Q.ctrlKey||mt===Vn},Y.prototype._move=function(Q,mt){var Ct=-.5,Dt=(mt.y-Q.y)*Ct;if(Dt)return this._active=!0,{pitchDelta:Dt}},Y.prototype.contextmenu=function(Q){Q.preventDefault()},Y}(ii),ui=function(Y){this._minTouches=1,this._clickTolerance=Y.clickTolerance||1,this.reset()};ui.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new t.Point(0,0)},ui.prototype.touchstart=function(Y,gt,Q){return this._calculateTransform(Y,gt,Q)},ui.prototype.touchmove=function(Y,gt,Q){if(!!this._active)return Y.preventDefault(),this._calculateTransform(Y,gt,Q)},ui.prototype.touchend=function(Y,gt,Q){this._calculateTransform(Y,gt,Q),this._active&&Q.length<this._minTouches&&this.reset()},ui.prototype.touchcancel=function(){this.reset()},ui.prototype._calculateTransform=function(Y,gt,Q){Q.length>0&&(this._active=!0);var mt=Sr(Q,gt),Ct=new t.Point(0,0),Dt=new t.Point(0,0),Kt=0;for(var fe in mt){var Ce=mt[fe],Je=this._touches[fe];Je&&(Ct._add(Ce),Dt._add(Ce.sub(Je)),Kt++,mt[fe]=Ce)}if(this._touches=mt,!(Kt<this._minTouches||!Dt.mag())){var ur=Dt.div(Kt);if(this._sum._add(ur),!(this._sum.mag()<this._clickTolerance)){var vr=Ct.div(Kt);return{around:vr,panDelta:ur}}}},ui.prototype.enable=function(){this._enabled=!0},ui.prototype.disable=function(){this._enabled=!1,this.reset()},ui.prototype.isEnabled=function(){return this._enabled},ui.prototype.isActive=function(){return this._active};var Vi=function(){this.reset()};Vi.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Vi.prototype._start=function(Y){},Vi.prototype._move=function(Y,gt,Q){return{}},Vi.prototype.touchstart=function(Y,gt,Q){this._firstTwoTouches||Q.length<2||(this._firstTwoTouches=[Q[0].identifier,Q[1].identifier],this._start([gt[0],gt[1]]))},Vi.prototype.touchmove=function(Y,gt,Q){if(!!this._firstTwoTouches){Y.preventDefault();var mt=this._firstTwoTouches,Ct=mt[0],Dt=mt[1],Kt=Ii(Q,gt,Ct),fe=Ii(Q,gt,Dt);if(!(!Kt||!fe)){var Ce=this._aroundCenter?null:Kt.add(fe).div(2);return this._move([Kt,fe],Ce,Y)}}},Vi.prototype.touchend=function(Y,gt,Q){if(!!this._firstTwoTouches){var mt=this._firstTwoTouches,Ct=mt[0],Dt=mt[1],Kt=Ii(Q,gt,Ct),fe=Ii(Q,gt,Dt);Kt&&fe||(this._active&&i.suppressClick(),this.reset())}},Vi.prototype.touchcancel=function(){this.reset()},Vi.prototype.enable=function(Y){this._enabled=!0,this._aroundCenter=!!Y&&Y.around==="center"},Vi.prototype.disable=function(){this._enabled=!1,this.reset()},Vi.prototype.isEnabled=function(){return this._enabled},Vi.prototype.isActive=function(){return this._active};function Ii(dt,Y,gt){for(var Q=0;Q<dt.length;Q++)if(dt[Q].identifier===gt)return Y[Q]}var ea=.1;function xa(dt,Y){return Math.log(dt/Y)/Math.LN2}var wo=function(dt){function Y(){dt.apply(this,arguments)}return dt&&(Y.__proto__=dt),Y.prototype=Object.create(dt&&dt.prototype),Y.prototype.constructor=Y,Y.prototype.reset=function(){dt.prototype.reset.call(this),delete this._distance,delete this._startDistance},Y.prototype._start=function(Q){this._startDistance=this._distance=Q[0].dist(Q[1])},Y.prototype._move=function(Q,mt){var Ct=this._distance;if(this._distance=Q[0].dist(Q[1]),!(!this._active&&Math.abs(xa(this._distance,this._startDistance))<ea))return this._active=!0,{zoomDelta:xa(this._distance,Ct),pinchAround:mt}},Y}(Vi),Ua=25;function hi(dt,Y){return dt.angleWith(Y)*180/Math.PI}var sa=function(dt){function Y(){dt.apply(this,arguments)}return dt&&(Y.__proto__=dt),Y.prototype=Object.create(dt&&dt.prototype),Y.prototype.constructor=Y,Y.prototype.reset=function(){dt.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},Y.prototype._start=function(Q){this._startVector=this._vector=Q[0].sub(Q[1]),this._minDiameter=Q[0].dist(Q[1])},Y.prototype._move=function(Q,mt){var Ct=this._vector;if(this._vector=Q[0].sub(Q[1]),!(!this._active&&this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:hi(this._vector,Ct),pinchAround:mt}},Y.prototype._isBelowThreshold=function(Q){this._minDiameter=Math.min(this._minDiameter,Q.mag());var mt=Math.PI*this._minDiameter,Ct=Ua/mt*360,Dt=hi(Q,this._startVector);return Math.abs(Dt)<Ct},Y}(Vi);function Zi(dt){return Math.abs(dt.y)>Math.abs(dt.x)}var La=100,ua=function(dt){function Y(){dt.apply(this,arguments)}return dt&&(Y.__proto__=dt),Y.prototype=Object.create(dt&&dt.prototype),Y.prototype.constructor=Y,Y.prototype.reset=function(){dt.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},Y.prototype._start=function(Q){this._lastPoints=Q,Zi(Q[0].sub(Q[1]))&&(this._valid=!1)},Y.prototype._move=function(Q,mt,Ct){var Dt=Q[0].sub(this._lastPoints[0]),Kt=Q[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(Dt,Kt,Ct.timeStamp),!!this._valid){this._lastPoints=Q,this._active=!0;var fe=(Dt.y+Kt.y)/2,Ce=-.5;return{pitchDelta:fe*Ce}}},Y.prototype.gestureBeginsVertically=function(Q,mt,Ct){if(this._valid!==void 0)return this._valid;var Dt=2,Kt=Q.mag()>=Dt,fe=mt.mag()>=Dt;if(!(!Kt&&!fe)){if(!Kt||!fe)return this._firstMove===void 0&&(this._firstMove=Ct),Ct-this._firstMove<La?void 0:!1;var Ce=Q.y>0==mt.y>0;return Zi(Q)&&Zi(mt)&&Ce}},Y}(Vi),go={panStep:100,bearingStep:15,pitchStep:10},oo=function(){var Y=go;this._panStep=Y.panStep,this._bearingStep=Y.bearingStep,this._pitchStep=Y.pitchStep};oo.prototype.reset=function(){this._active=!1},oo.prototype.keydown=function(Y){var gt=this;if(!(Y.altKey||Y.ctrlKey||Y.metaKey)){var Q=0,mt=0,Ct=0,Dt=0,Kt=0;switch(Y.keyCode){case 61:case 107:case 171:case 187:Q=1;break;case 189:case 109:case 173:Q=-1;break;case 37:Y.shiftKey?mt=-1:(Y.preventDefault(),Dt=-1);break;case 39:Y.shiftKey?mt=1:(Y.preventDefault(),Dt=1);break;case 38:Y.shiftKey?Ct=1:(Y.preventDefault(),Kt=-1);break;case 40:Y.shiftKey?Ct=-1:(Y.preventDefault(),Kt=1);break;default:return}return{cameraAnimation:function(fe){var Ce=fe.getZoom();fe.easeTo({duration:300,easeId:"keyboardHandler",easing:So,zoom:Q?Math.round(Ce)+Q*(Y.shiftKey?2:1):Ce,bearing:fe.getBearing()+mt*gt._bearingStep,pitch:fe.getPitch()+Ct*gt._pitchStep,offset:[-Dt*gt._panStep,-Kt*gt._panStep],center:fe.getCenter()},{originalEvent:Y})}}}},oo.prototype.enable=function(){this._enabled=!0},oo.prototype.disable=function(){this._enabled=!1,this.reset()},oo.prototype.isEnabled=function(){return this._enabled},oo.prototype.isActive=function(){return this._active};function So(dt){return dt*(2-dt)}var ns=4.000244140625,Zo=1/100,is=1/450,Ka=2,Wa=function(Y,gt){this._map=Y,this._el=Y.getCanvasContainer(),this._handler=gt,this._delta=0,this._defaultZoomRate=Zo,this._wheelZoomRate=is,t.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};Wa.prototype.setZoomRate=function(Y){this._defaultZoomRate=Y},Wa.prototype.setWheelZoomRate=function(Y){this._wheelZoomRate=Y},Wa.prototype.isEnabled=function(){return!!this._enabled},Wa.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},Wa.prototype.isZooming=function(){return!!this._zooming},Wa.prototype.enable=function(Y){this.isEnabled()||(this._enabled=!0,this._aroundCenter=Y&&Y.around==="center")},Wa.prototype.disable=function(){!this.isEnabled()||(this._enabled=!1)},Wa.prototype.wheel=function(Y){if(!!this.isEnabled()){var gt=Y.deltaMode===t.window.WheelEvent.DOM_DELTA_LINE?Y.deltaY*40:Y.deltaY,Q=t.browser.now(),mt=Q-(this._lastWheelEventTime||0);this._lastWheelEventTime=Q,gt!==0&&gt%ns===0?this._type="wheel":gt!==0&&Math.abs(gt)<4?this._type="trackpad":mt>400?(this._type=null,this._lastValue=gt,this._timeout=setTimeout(this._onTimeout,40,Y)):this._type||(this._type=Math.abs(mt*gt)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,gt+=this._lastValue)),Y.shiftKey&&gt&&(gt=gt/4),this._type&&(this._lastWheelEvent=Y,this._delta-=gt,this._active||this._start(Y)),Y.preventDefault()}},Wa.prototype._onTimeout=function(Y){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(Y)},Wa.prototype._start=function(Y){if(!!this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var gt=i.mousePos(this._el,Y);this._around=t.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(gt)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},Wa.prototype.renderFrame=function(){return this._onScrollFrame()},Wa.prototype._onScrollFrame=function(){var Y=this;if(!!this._frameId&&(this._frameId=null,!!this.isActive())){var gt=this._map.transform;if(this._delta!==0){var Q=this._type==="wheel"&&Math.abs(this._delta)>ns?this._wheelZoomRate:this._defaultZoomRate,mt=Ka/(1+Math.exp(-Math.abs(this._delta*Q)));this._delta<0&&mt!==0&&(mt=1/mt);var Ct=typeof this._targetZoom=="number"?gt.zoomScale(this._targetZoom):gt.scale;this._targetZoom=Math.min(gt.maxZoom,Math.max(gt.minZoom,gt.scaleZoom(Ct*mt))),this._type==="wheel"&&(this._startZoom=gt.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var Dt=typeof this._targetZoom=="number"?this._targetZoom:gt.zoom,Kt=this._startZoom,fe=this._easing,Ce=!1,Je;if(this._type==="wheel"&&Kt&&fe){var ur=Math.min((t.browser.now()-this._lastWheelEventTime)/200,1),vr=fe(ur);Je=t.number(Kt,Dt,vr),ur<1?this._frameId||(this._frameId=!0):Ce=!0}else Je=Dt,Ce=!0;return this._active=!0,Ce&&(this._active=!1,this._finishTimeout=setTimeout(function(){Y._zooming=!1,Y._handler._triggerRenderFrame(),delete Y._targetZoom,delete Y._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!Ce,zoomDelta:Je-gt.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},Wa.prototype._smoothOutEasing=function(Y){var gt=t.ease;if(this._prevEase){var Q=this._prevEase,mt=(t.browser.now()-Q.start)/Q.duration,Ct=Q.easing(mt+.01)-Q.easing(mt),Dt=.27/Math.sqrt(Ct*Ct+1e-4)*.01,Kt=Math.sqrt(.27*.27-Dt*Dt);gt=t.bezier(Dt,Kt,.25,1)}return this._prevEase={start:t.browser.now(),duration:Y,easing:gt},gt},Wa.prototype.reset=function(){this._active=!1};var Oi=function(Y,gt){this._clickZoom=Y,this._tapZoom=gt};Oi.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Oi.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Oi.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Oi.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var Ki=function(){this.reset()};Ki.prototype.reset=function(){this._active=!1},Ki.prototype.dblclick=function(Y,gt){return Y.preventDefault(),{cameraAnimation:function(Q){Q.easeTo({duration:300,zoom:Q.getZoom()+(Y.shiftKey?-1:1),around:Q.unproject(gt)},{originalEvent:Y})}}},Ki.prototype.enable=function(){this._enabled=!0},Ki.prototype.disable=function(){this._enabled=!1,this.reset()},Ki.prototype.isEnabled=function(){return this._enabled},Ki.prototype.isActive=function(){return this._active};var Eo=function(){this._tap=new on({numTouches:1,numTaps:1}),this.reset()};Eo.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},Eo.prototype.touchstart=function(Y,gt,Q){this._swipePoint||(this._tapTime&&Y.timeStamp-this._tapTime>cn&&this.reset(),this._tapTime?Q.length>0&&(this._swipePoint=gt[0],this._swipeTouch=Q[0].identifier):this._tap.touchstart(Y,gt,Q))},Eo.prototype.touchmove=function(Y,gt,Q){if(!this._tapTime)this._tap.touchmove(Y,gt,Q);else if(this._swipePoint){if(Q[0].identifier!==this._swipeTouch)return;var mt=gt[0],Ct=mt.y-this._swipePoint.y;return this._swipePoint=mt,Y.preventDefault(),this._active=!0,{zoomDelta:Ct/128}}},Eo.prototype.touchend=function(Y,gt,Q){if(this._tapTime)this._swipePoint&&Q.length===0&&this.reset();else{var mt=this._tap.touchend(Y,gt,Q);mt&&(this._tapTime=Y.timeStamp)}},Eo.prototype.touchcancel=function(){this.reset()},Eo.prototype.enable=function(){this._enabled=!0},Eo.prototype.disable=function(){this._enabled=!1,this.reset()},Eo.prototype.isEnabled=function(){return this._enabled},Eo.prototype.isActive=function(){return this._active};var co=function(Y,gt,Q){this._el=Y,this._mousePan=gt,this._touchPan=Q};co.prototype.enable=function(Y){this._inertiaOptions=Y||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},co.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},co.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},co.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Vo=function(Y,gt,Q){this._pitchWithRotate=Y.pitchWithRotate,this._mouseRotate=gt,this._mousePitch=Q};Vo.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Vo.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Vo.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Vo.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var eo=function(Y,gt,Q,mt){this._el=Y,this._touchZoom=gt,this._touchRotate=Q,this._tapDragZoom=mt,this._rotationDisabled=!1,this._enabled=!0};eo.prototype.enable=function(Y){this._touchZoom.enable(Y),this._rotationDisabled||this._touchRotate.enable(Y),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},eo.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},eo.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},eo.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},eo.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},eo.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var as=function(dt){return dt.zoom||dt.drag||dt.pitch||dt.rotate},zs=function(dt){function Y(){dt.apply(this,arguments)}return dt&&(Y.__proto__=dt),Y.prototype=Object.create(dt&&dt.prototype),Y.prototype.constructor=Y,Y}(t.Event);function hc(dt){return dt.panDelta&&dt.panDelta.mag()||dt.zoomDelta||dt.bearingDelta||dt.pitchDelta}var ro=function(Y,gt){this._map=Y,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ut(Y),this._bearingSnap=gt.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(gt),t.bindAll(["handleEvent","handleWindowEvent"],this);var Q=this._el;this._listeners=[[Q,"touchstart",{passive:!1}],[Q,"touchmove",{passive:!1}],[Q,"touchend",void 0],[Q,"touchcancel",void 0],[Q,"mousedown",void 0],[Q,"mousemove",void 0],[Q,"mouseup",void 0],[t.window.document,"mousemove",{capture:!0}],[t.window.document,"mouseup",void 0],[Q,"mouseover",void 0],[Q,"mouseout",void 0],[Q,"dblclick",void 0],[Q,"click",void 0],[Q,"keydown",{capture:!1}],[Q,"keyup",void 0],[Q,"wheel",{passive:!1}],[Q,"contextmenu",void 0],[t.window,"blur",void 0]];for(var mt=0,Ct=this._listeners;mt<Ct.length;mt+=1){var Dt=Ct[mt],Kt=Dt[0],fe=Dt[1],Ce=Dt[2];i.addEventListener(Kt,fe,Kt===t.window.document?this.handleWindowEvent:this.handleEvent,Ce)}};ro.prototype.destroy=function(){for(var Y=0,gt=this._listeners;Y<gt.length;Y+=1){var Q=gt[Y],mt=Q[0],Ct=Q[1],Dt=Q[2];i.removeEventListener(mt,Ct,mt===t.window.document?this.handleWindowEvent:this.handleEvent,Dt)}},ro.prototype._addDefaultHandlers=function(Y){var gt=this._map,Q=gt.getCanvasContainer();this._add("mapEvent",new je(gt,Y));var mt=gt.boxZoom=new rr(gt,Y);this._add("boxZoom",mt);var Ct=new ln,Dt=new Ki;gt.doubleClickZoom=new Oi(Dt,Ct),this._add("tapZoom",Ct),this._add("clickZoom",Dt);var Kt=new Eo;this._add("tapDragZoom",Kt);var fe=gt.touchPitch=new ua;this._add("touchPitch",fe);var Ce=new si(Y),Je=new Ci(Y);gt.dragRotate=new Vo(Y,Ce,Je),this._add("mouseRotate",Ce,["mousePitch"]),this._add("mousePitch",Je,["mouseRotate"]);var ur=new ki(Y),vr=new ui(Y);gt.dragPan=new co(Q,ur,vr),this._add("mousePan",ur),this._add("touchPan",vr,["touchZoom","touchRotate"]);var Lr=new sa,Yr=new wo;gt.touchZoomRotate=new eo(Q,Yr,Lr,Kt),this._add("touchRotate",Lr,["touchPan","touchZoom"]),this._add("touchZoom",Yr,["touchPan","touchRotate"]);var $r=gt.scrollZoom=new Wa(gt,this);this._add("scrollZoom",$r,["mousePan"]);var Vr=gt.keyboard=new oo;this._add("keyboard",Vr),this._add("blockableMapEvent",new tr(gt));for(var Jr=0,pn=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];Jr<pn.length;Jr+=1){var Ln=pn[Jr];Y.interactive&&Y[Ln]&&gt[Ln].enable(Y[Ln])}},ro.prototype._add=function(Y,gt,Q){this._handlers.push({handlerName:Y,handler:gt,allowed:Q}),this._handlersById[Y]=gt},ro.prototype.stop=function(){if(!this._updatingCamera){for(var Y=0,gt=this._handlers;Y<gt.length;Y+=1){var Q=gt[Y],mt=Q.handler;mt.reset()}this._inertia.clear(),this._fireEvents({},{}),this._changes=[]}},ro.prototype.isActive=function(){for(var Y=0,gt=this._handlers;Y<gt.length;Y+=1){var Q=gt[Y],mt=Q.handler;if(mt.isActive())return!0}return!1},ro.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},ro.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},ro.prototype.isMoving=function(){return Boolean(as(this._eventsInProgress))||this.isZooming()},ro.prototype._blockedByActive=function(Y,gt,Q){for(var mt in Y)if(mt!==Q&&(!gt||gt.indexOf(mt)<0))return!0;return!1},ro.prototype.handleWindowEvent=function(Y){this.handleEvent(Y,Y.type+"Window")},ro.prototype._getMapTouches=function(Y){for(var gt=[],Q=0,mt=Y;Q<mt.length;Q+=1){var Ct=mt[Q],Dt=Ct.target;this._el.contains(Dt)&&gt.push(Ct)}return gt},ro.prototype.handleEvent=function(Y,gt){if(Y.type==="blur"){this.stop();return}this._updatingCamera=!0;for(var Q=Y.type==="renderFrame"?void 0:Y,mt={needsRenderFrame:!1},Ct={},Dt={},Kt=Y.touches?this._getMapTouches(Y.touches):void 0,fe=Kt?i.touchPos(this._el,Kt):i.mousePos(this._el,Y),Ce=0,Je=this._handlers;Ce<Je.length;Ce+=1){var ur=Je[Ce],vr=ur.handlerName,Lr=ur.handler,Yr=ur.allowed;if(!!Lr.isEnabled()){var $r=void 0;this._blockedByActive(Dt,Yr,vr)?Lr.reset():Lr[gt||Y.type]&&($r=Lr[gt||Y.type](Y,fe,Kt),this.mergeHandlerResult(mt,Ct,$r,vr,Q),$r&&$r.needsRenderFrame&&this._triggerRenderFrame()),($r||Lr.isActive())&&(Dt[vr]=Lr)}}var Vr={};for(var Jr in this._previousActiveHandlers)Dt[Jr]||(Vr[Jr]=Q);this._previousActiveHandlers=Dt,(Object.keys(Vr).length||hc(mt))&&(this._changes.push([mt,Ct,Vr]),this._triggerRenderFrame()),(Object.keys(Dt).length||hc(mt))&&this._map._stop(!0),this._updatingCamera=!1;var pn=mt.cameraAnimation;pn&&(this._inertia.clear(),this._fireEvents({},{}),this._changes=[],pn(this._map))},ro.prototype.mergeHandlerResult=function(Y,gt,Q,mt,Ct){if(!!Q){t.extend(Y,Q);var Dt={handlerName:mt,originalEvent:Q.originalEvent||Ct};Q.zoomDelta!==void 0&&(gt.zoom=Dt),Q.panDelta!==void 0&&(gt.drag=Dt),Q.pitchDelta!==void 0&&(gt.pitch=Dt),Q.bearingDelta!==void 0&&(gt.rotate=Dt)}},ro.prototype._applyChanges=function(){for(var Y={},gt={},Q={},mt=0,Ct=this._changes;mt<Ct.length;mt+=1){var Dt=Ct[mt],Kt=Dt[0],fe=Dt[1],Ce=Dt[2];Kt.panDelta&&(Y.panDelta=(Y.panDelta||new t.Point(0,0))._add(Kt.panDelta)),Kt.zoomDelta&&(Y.zoomDelta=(Y.zoomDelta||0)+Kt.zoomDelta),Kt.bearingDelta&&(Y.bearingDelta=(Y.bearingDelta||0)+Kt.bearingDelta),Kt.pitchDelta&&(Y.pitchDelta=(Y.pitchDelta||0)+Kt.pitchDelta),Kt.around!==void 0&&(Y.around=Kt.around),Kt.pinchAround!==void 0&&(Y.pinchAround=Kt.pinchAround),Kt.noInertia&&(Y.noInertia=Kt.noInertia),t.extend(gt,fe),t.extend(Q,Ce)}this._updateMapTransform(Y,gt,Q),this._changes=[]},ro.prototype._updateMapTransform=function(Y,gt,Q){var mt=this._map,Ct=mt.transform;if(!hc(Y))return this._fireEvents(gt,Q);var Dt=Y.panDelta,Kt=Y.zoomDelta,fe=Y.bearingDelta,Ce=Y.pitchDelta,Je=Y.around,ur=Y.pinchAround;ur!==void 0&&(Je=ur),mt._stop(!0),Je=Je||mt.transform.centerPoint;var vr=Ct.pointLocation(Dt?Je.sub(Dt):Je);fe&&(Ct.bearing+=fe),Ce&&(Ct.pitch+=Ce),Kt&&(Ct.zoom+=Kt),Ct.setLocationAtPoint(vr,Je),this._map._update(),Y.noInertia||this._inertia.record(Y),this._fireEvents(gt,Q)},ro.prototype._fireEvents=function(Y,gt){var Q=this,mt=as(this._eventsInProgress),Ct=as(Y),Dt={};for(var Kt in Y){var fe=Y[Kt],Ce=fe.originalEvent;this._eventsInProgress[Kt]||(Dt[Kt+"start"]=Ce),this._eventsInProgress[Kt]=Y[Kt]}!mt&&Ct&&this._fireEvent("movestart",Ct.originalEvent);for(var Je in Dt)this._fireEvent(Je,Dt[Je]);Y.rotate&&(this._bearingChanged=!0),Ct&&this._fireEvent("move",Ct.originalEvent);for(var ur in Y){var vr=Y[ur],Lr=vr.originalEvent;this._fireEvent(ur,Lr)}var Yr={},$r;for(var Vr in this._eventsInProgress){var Jr=this._eventsInProgress[Vr],pn=Jr.handlerName,Ln=Jr.originalEvent;this._handlersById[pn].isActive()||(delete this._eventsInProgress[Vr],$r=gt[pn]||Ln,Yr[Vr+"end"]=$r)}for(var Bn in Yr)this._fireEvent(Bn,Yr[Bn]);var Jn=as(this._eventsInProgress);if((mt||Ct)&&!Jn){this._updatingCamera=!0;var ei=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),qn=function(di){return di!==0&&-Q._bearingSnap<di&&di<Q._bearingSnap};ei?(qn(ei.bearing||this._map.getBearing())&&(ei.bearing=0),this._map.easeTo(ei,{originalEvent:$r})):(this._map.fire(new t.Event("moveend",{originalEvent:$r})),qn(this._map.getBearing())&&this._map.resetNorth()),this._bearingChanged=!1,this._updatingCamera=!1}},ro.prototype._fireEvent=function(Y,gt){this._map.fire(new t.Event(Y,gt?{originalEvent:gt}:{}))},ro.prototype._triggerRenderFrame=function(){var Y=this;this._frameId===void 0&&(this._frameId=this._map._requestRenderFrame(function(gt){delete Y._frameId,Y.handleEvent(new zs("renderFrame",{timeStamp:gt})),Y._applyChanges()}))};var Qu=function(dt){function Y(gt,Q){dt.call(this),this._moving=!1,this._zooming=!1,this.transform=gt,this._bearingSnap=Q.bearingSnap,t.bindAll(["_renderFrameCallback"],this)}return dt&&(Y.__proto__=dt),Y.prototype=Object.create(dt&&dt.prototype),Y.prototype.constructor=Y,Y.prototype.getCenter=function(){return new t.LngLat(this.transform.center.lng,this.transform.center.lat)},Y.prototype.setCenter=function(Q,mt){return this.jumpTo({center:Q},mt)},Y.prototype.panBy=function(Q,mt,Ct){return Q=t.Point.convert(Q).mult(-1),this.panTo(this.transform.center,t.extend({offset:Q},mt),Ct)},Y.prototype.panTo=function(Q,mt,Ct){return this.easeTo(t.extend({center:Q},mt),Ct)},Y.prototype.getZoom=function(){return this.transform.zoom},Y.prototype.setZoom=function(Q,mt){return this.jumpTo({zoom:Q},mt),this},Y.prototype.zoomTo=function(Q,mt,Ct){return this.easeTo(t.extend({zoom:Q},mt),Ct)},Y.prototype.zoomIn=function(Q,mt){return this.zoomTo(this.getZoom()+1,Q,mt),this},Y.prototype.zoomOut=function(Q,mt){return this.zoomTo(this.getZoom()-1,Q,mt),this},Y.prototype.getBearing=function(){return this.transform.bearing},Y.prototype.setBearing=function(Q,mt){return this.jumpTo({bearing:Q},mt),this},Y.prototype.getPadding=function(){return this.transform.padding},Y.prototype.setPadding=function(Q,mt){return this.jumpTo({padding:Q},mt),this},Y.prototype.rotateTo=function(Q,mt,Ct){return this.easeTo(t.extend({bearing:Q},mt),Ct)},Y.prototype.resetNorth=function(Q,mt){return this.rotateTo(0,t.extend({duration:1e3},Q),mt),this},Y.prototype.resetNorthPitch=function(Q,mt){return this.easeTo(t.extend({bearing:0,pitch:0,duration:1e3},Q),mt),this},Y.prototype.snapToNorth=function(Q,mt){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(Q,mt):this},Y.prototype.getPitch=function(){return this.transform.pitch},Y.prototype.setPitch=function(Q,mt){return this.jumpTo({pitch:Q},mt),this},Y.prototype.cameraForBounds=function(Q,mt){return Q=t.LngLatBounds.convert(Q),this._cameraForBoxAndBearing(Q.getNorthWest(),Q.getSouthEast(),0,mt)},Y.prototype._cameraForBoxAndBearing=function(Q,mt,Ct,Dt){var Kt={top:0,bottom:0,right:0,left:0};if(Dt=t.extend({padding:Kt,offset:[0,0],maxZoom:this.transform.maxZoom},Dt),typeof Dt.padding=="number"){var fe=Dt.padding;Dt.padding={top:fe,bottom:fe,right:fe,left:fe}}Dt.padding=t.extend(Kt,Dt.padding);var Ce=this.transform,Je=Ce.padding,ur=Ce.project(t.LngLat.convert(Q)),vr=Ce.project(t.LngLat.convert(mt)),Lr=ur.rotate(-Ct*Math.PI/180),Yr=vr.rotate(-Ct*Math.PI/180),$r=new t.Point(Math.max(Lr.x,Yr.x),Math.max(Lr.y,Yr.y)),Vr=new t.Point(Math.min(Lr.x,Yr.x),Math.min(Lr.y,Yr.y)),Jr=$r.sub(Vr),pn=(Ce.width-(Je.left+Je.right+Dt.padding.left+Dt.padding.right))/Jr.x,Ln=(Ce.height-(Je.top+Je.bottom+Dt.padding.top+Dt.padding.bottom))/Jr.y;if(Ln<0||pn<0){t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");return}var Bn=Math.min(Ce.scaleZoom(Ce.scale*Math.min(pn,Ln)),Dt.maxZoom),Jn=t.Point.convert(Dt.offset),ei=(Dt.padding.left-Dt.padding.right)/2,qn=(Dt.padding.top-Dt.padding.bottom)/2,di=new t.Point(Jn.x+ei,Jn.y+qn),_i=di.mult(Ce.scale/Ce.zoomScale(Bn)),bi=Ce.unproject(ur.add(vr).div(2).sub(_i));return{center:bi,zoom:Bn,bearing:Ct}},Y.prototype.fitBounds=function(Q,mt,Ct){return this._fitInternal(this.cameraForBounds(Q,mt),mt,Ct)},Y.prototype.fitScreenCoordinates=function(Q,mt,Ct,Dt,Kt){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(t.Point.convert(Q)),this.transform.pointLocation(t.Point.convert(mt)),Ct,Dt),Dt,Kt)},Y.prototype._fitInternal=function(Q,mt,Ct){return Q?(mt=t.extend(Q,mt),delete mt.padding,mt.linear?this.easeTo(mt,Ct):this.flyTo(mt,Ct)):this},Y.prototype.jumpTo=function(Q,mt){this.stop();var Ct=this.transform,Dt=!1,Kt=!1,fe=!1;return"zoom"in Q&&Ct.zoom!==+Q.zoom&&(Dt=!0,Ct.zoom=+Q.zoom),Q.center!==void 0&&(Ct.center=t.LngLat.convert(Q.center)),"bearing"in Q&&Ct.bearing!==+Q.bearing&&(Kt=!0,Ct.bearing=+Q.bearing),"pitch"in Q&&Ct.pitch!==+Q.pitch&&(fe=!0,Ct.pitch=+Q.pitch),Q.padding!=null&&!Ct.isPaddingEqual(Q.padding)&&(Ct.padding=Q.padding),this.fire(new t.Event("movestart",mt)).fire(new t.Event("move",mt)),Dt&&this.fire(new t.Event("zoomstart",mt)).fire(new t.Event("zoom",mt)).fire(new t.Event("zoomend",mt)),Kt&&this.fire(new t.Event("rotatestart",mt)).fire(new t.Event("rotate",mt)).fire(new t.Event("rotateend",mt)),fe&&this.fire(new t.Event("pitchstart",mt)).fire(new t.Event("pitch",mt)).fire(new t.Event("pitchend",mt)),this.fire(new t.Event("moveend",mt))},Y.prototype.easeTo=function(Q,mt){var Ct=this;this._stop(!1,Q.easeId),Q=t.extend({offset:[0,0],duration:500,easing:t.ease},Q),(Q.animate===!1||!Q.essential&&t.browser.prefersReducedMotion)&&(Q.duration=0);var Dt=this.transform,Kt=this.getZoom(),fe=this.getBearing(),Ce=this.getPitch(),Je=this.getPadding(),ur="zoom"in Q?+Q.zoom:Kt,vr="bearing"in Q?this._normalizeBearing(Q.bearing,fe):fe,Lr="pitch"in Q?+Q.pitch:Ce,Yr="padding"in Q?Q.padding:Dt.padding,$r=t.Point.convert(Q.offset),Vr=Dt.centerPoint.add($r),Jr=Dt.pointLocation(Vr),pn=t.LngLat.convert(Q.center||Jr);this._normalizeCenter(pn);var Ln=Dt.project(Jr),Bn=Dt.project(pn).sub(Ln),Jn=Dt.zoomScale(ur-Kt),ei,qn;Q.around&&(ei=t.LngLat.convert(Q.around),qn=Dt.locationPoint(ei));var di={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||ur!==Kt,this._rotating=this._rotating||fe!==vr,this._pitching=this._pitching||Lr!==Ce,this._padding=!Dt.isPaddingEqual(Yr),this._easeId=Q.easeId,this._prepareEase(mt,Q.noMoveStart,di),clearTimeout(this._easeEndTimeoutID),this._ease(function(_i){if(Ct._zooming&&(Dt.zoom=t.number(Kt,ur,_i)),Ct._rotating&&(Dt.bearing=t.number(fe,vr,_i)),Ct._pitching&&(Dt.pitch=t.number(Ce,Lr,_i)),Ct._padding&&(Dt.interpolatePadding(Je,Yr,_i),Vr=Dt.centerPoint.add($r)),ei)Dt.setLocationAtPoint(ei,qn);else{var bi=Dt.zoomScale(Dt.zoom-Kt),Ai=ur>Kt?Math.min(2,Jn):Math.max(.5,Jn),Li=Math.pow(Ai,1-_i),Yi=Dt.unproject(Ln.add(Bn.mult(_i*Li)).mult(bi));Dt.setLocationAtPoint(Dt.renderWorldCopies?Yi.wrap():Yi,Vr)}Ct._fireMoveEvents(mt)},function(_i){Ct._afterEase(mt,_i)},Q),this},Y.prototype._prepareEase=function(Q,mt,Ct){Ct===void 0&&(Ct={}),this._moving=!0,!mt&&!Ct.moving&&this.fire(new t.Event("movestart",Q)),this._zooming&&!Ct.zooming&&this.fire(new t.Event("zoomstart",Q)),this._rotating&&!Ct.rotating&&this.fire(new t.Event("rotatestart",Q)),this._pitching&&!Ct.pitching&&this.fire(new t.Event("pitchstart",Q))},Y.prototype._fireMoveEvents=function(Q){this.fire(new t.Event("move",Q)),this._zooming&&this.fire(new t.Event("zoom",Q)),this._rotating&&this.fire(new t.Event("rotate",Q)),this._pitching&&this.fire(new t.Event("pitch",Q))},Y.prototype._afterEase=function(Q,mt){if(!(this._easeId&&mt&&this._easeId===mt)){delete this._easeId;var Ct=this._zooming,Dt=this._rotating,Kt=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,Ct&&this.fire(new t.Event("zoomend",Q)),Dt&&this.fire(new t.Event("rotateend",Q)),Kt&&this.fire(new t.Event("pitchend",Q)),this.fire(new t.Event("moveend",Q))}},Y.prototype.flyTo=function(Q,mt){var Ct=this;if(!Q.essential&&t.browser.prefersReducedMotion){var Dt=t.pick(Q,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Dt,mt)}this.stop(),Q=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},Q);var Kt=this.transform,fe=this.getZoom(),Ce=this.getBearing(),Je=this.getPitch(),ur=this.getPadding(),vr="zoom"in Q?t.clamp(+Q.zoom,Kt.minZoom,Kt.maxZoom):fe,Lr="bearing"in Q?this._normalizeBearing(Q.bearing,Ce):Ce,Yr="pitch"in Q?+Q.pitch:Je,$r="padding"in Q?Q.padding:Kt.padding,Vr=Kt.zoomScale(vr-fe),Jr=t.Point.convert(Q.offset),pn=Kt.centerPoint.add(Jr),Ln=Kt.pointLocation(pn),Bn=t.LngLat.convert(Q.center||Ln);this._normalizeCenter(Bn);var Jn=Kt.project(Ln),ei=Kt.project(Bn).sub(Jn),qn=Q.curve,di=Math.max(Kt.width,Kt.height),_i=di/Vr,bi=ei.mag();if("minZoom"in Q){var Ai=t.clamp(Math.min(Q.minZoom,fe,vr),Kt.minZoom,Kt.maxZoom),Li=di/Kt.zoomScale(Ai-fe);qn=Math.sqrt(Li/bi*2)}var Yi=qn*qn;function oa(la){var Sa=(_i*_i-di*di+(la?-1:1)*Yi*Yi*bi*bi)/(2*(la?_i:di)*Yi*bi);return Math.log(Math.sqrt(Sa*Sa+1)-Sa)}function Fa(la){return(Math.exp(la)-Math.exp(-la))/2}function ha(la){return(Math.exp(la)+Math.exp(-la))/2}function ma(la){return Fa(la)/ha(la)}var Hi=oa(0),Oa=function(la){return ha(Hi)/ha(Hi+qn*la)},Ha=function(la){return di*((ha(Hi)*ma(Hi+qn*la)-Fa(Hi))/Yi)/bi},$a=(oa(1)-Hi)/qn;if(Math.abs(bi)<1e-6||!isFinite($a)){if(Math.abs(di-_i)<1e-6)return this.easeTo(Q,mt);var Ta=_i<di?-1:1;$a=Math.abs(Math.log(_i/di))/qn,Ha=function(){return 0},Oa=function(la){return Math.exp(Ta*qn*la)}}if("duration"in Q)Q.duration=+Q.duration;else{var no="screenSpeed"in Q?+Q.screenSpeed/qn:+Q.speed;Q.duration=1e3*$a/no}return Q.maxDuration&&Q.duration>Q.maxDuration&&(Q.duration=0),this._zooming=!0,this._rotating=Ce!==Lr,this._pitching=Yr!==Je,this._padding=!Kt.isPaddingEqual($r),this._prepareEase(mt,!1),this._ease(function(la){var Sa=la*$a,Po=1/Oa(Sa);Kt.zoom=la===1?vr:fe+Kt.scaleZoom(Po),Ct._rotating&&(Kt.bearing=t.number(Ce,Lr,la)),Ct._pitching&&(Kt.pitch=t.number(Je,Yr,la)),Ct._padding&&(Kt.interpolatePadding(ur,$r,la),pn=Kt.centerPoint.add(Jr));var Ko=la===1?Bn:Kt.unproject(Jn.add(ei.mult(Ha(Sa))).mult(Po));Kt.setLocationAtPoint(Kt.renderWorldCopies?Ko.wrap():Ko,pn),Ct._fireMoveEvents(mt)},function(){return Ct._afterEase(mt)},Q),this},Y.prototype.isEasing=function(){return!!this._easeFrameId},Y.prototype.stop=function(){return this._stop()},Y.prototype._stop=function(Q,mt){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var Ct=this._onEaseEnd;delete this._onEaseEnd,Ct.call(this,mt)}if(!Q){var Dt=this.handlers;Dt&&Dt.stop()}return this},Y.prototype._ease=function(Q,mt,Ct){Ct.animate===!1||Ct.duration===0?(Q(1),mt()):(this._easeStart=t.browser.now(),this._easeOptions=Ct,this._onEaseFrame=Q,this._onEaseEnd=mt,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},Y.prototype._renderFrameCallback=function(){var Q=Math.min((t.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(Q)),Q<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},Y.prototype._normalizeBearing=function(Q,mt){Q=t.wrap(Q,-180,180);var Ct=Math.abs(Q-mt);return Math.abs(Q-360-mt)<Ct&&(Q-=360),Math.abs(Q+360-mt)<Ct&&(Q+=360),Q},Y.prototype._normalizeCenter=function(Q){var mt=this.transform;if(!(!mt.renderWorldCopies||mt.lngRange)){var Ct=Q.lng-mt.center.lng;Q.lng+=Ct>180?-360:Ct<-180?360:0}},Y}(t.Evented),Kl=function(Y){Y===void 0&&(Y={}),this.options=Y,t.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};Kl.prototype.getDefaultPosition=function(){return"bottom-right"},Kl.prototype.onAdd=function(Y){var gt=this.options&&this.options.compact;return this._map=Y,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=i.create("div","mapboxgl-ctrl-attrib-inner",this._container),gt&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),gt===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Kl.prototype.onRemove=function(){i.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Kl.prototype._updateEditLink=function(){var Y=this._editLink;Y||(Y=this._editLink=this._container.querySelector(".mapbox-improve-map"));var gt=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||t.config.ACCESS_TOKEN}];if(Y){var Q=gt.reduce(function(mt,Ct,Dt){return Ct.value&&(mt+=Ct.key+"="+Ct.value+(Dt<gt.length-1?"&":"")),mt},"?");Y.href=t.config.FEEDBACK_URL+"/"+Q+(this._map._hash?this._map._hash.getHashString(!0):""),Y.rel="noopener nofollow"}},Kl.prototype._updateData=function(Y){Y&&(Y.sourceDataType==="metadata"||Y.dataType==="style")&&(this._updateAttributions(),this._updateEditLink())},Kl.prototype._updateAttributions=function(){if(!!this._map.style){var Y=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?Y=Y.concat(this.options.customAttribution.map(function(fe){return typeof fe!="string"?"":fe})):typeof this.options.customAttribution=="string"&&Y.push(this.options.customAttribution)),this._map.style.stylesheet){var gt=this._map.style.stylesheet;this.styleOwner=gt.owner,this.styleId=gt.id}var Q=this._map.style.sourceCaches;for(var mt in Q){var Ct=Q[mt];if(Ct.used){var Dt=Ct.getSource();Dt.attribution&&Y.indexOf(Dt.attribution)<0&&Y.push(Dt.attribution)}}Y.sort(function(fe,Ce){return fe.length-Ce.length}),Y=Y.filter(function(fe,Ce){for(var Je=Ce+1;Je<Y.length;Je++)if(Y[Je].indexOf(fe)>=0)return!1;return!0});var Kt=Y.join(" | ");Kt!==this._attribHTML&&(this._attribHTML=Kt,Y.length?(this._innerContainer.innerHTML=Kt,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Kl.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var Ga=function(){t.bindAll(["_updateLogo"],this),t.bindAll(["_updateCompact"],this)};Ga.prototype.onAdd=function(Y){this._map=Y,this._container=i.create("div","mapboxgl-ctrl");var gt=i.create("a","mapboxgl-ctrl-logo");return gt.target="_blank",gt.rel="noopener nofollow",gt.href="https://www.mapbox.com/",gt.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),gt.setAttribute("rel","noopener nofollow"),this._container.appendChild(gt),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Ga.prototype.onRemove=function(){i.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Ga.prototype.getDefaultPosition=function(){return"bottom-left"},Ga.prototype._updateLogo=function(Y){(!Y||Y.sourceDataType==="metadata")&&(this._container.style.display=this._logoRequired()?"block":"none")},Ga.prototype._logoRequired=function(){if(!!this._map.style){var Y=this._map.style.sourceCaches;for(var gt in Y){var Q=Y[gt].getSource();if(Q.mapbox_logo)return!0}return!1}},Ga.prototype._updateCompact=function(){var Y=this._container.children;if(Y.length){var gt=Y[0];this._map.getCanvasContainer().offsetWidth<250?gt.classList.add("mapboxgl-compact"):gt.classList.remove("mapboxgl-compact")}};var Go=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Go.prototype.add=function(Y){var gt=++this._id,Q=this._queue;return Q.push({callback:Y,id:gt,cancelled:!1}),gt},Go.prototype.remove=function(Y){for(var gt=this._currentlyRunning,Q=gt?this._queue.concat(gt):this._queue,mt=0,Ct=Q;mt<Ct.length;mt+=1){var Dt=Ct[mt];if(Dt.id===Y){Dt.cancelled=!0;return}}},Go.prototype.run=function(Y){Y===void 0&&(Y=0);var gt=this._currentlyRunning=this._queue;this._queue=[];for(var Q=0,mt=gt;Q<mt.length;Q+=1){var Ct=mt[Q];if(!Ct.cancelled&&(Ct.callback(Y),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Go.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var lv={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Zf=t.window.HTMLImageElement,xf=t.window.HTMLElement,ku=t.window.ImageBitmap,qu=-2,Kf=22,el=0,Tu=60,Yh={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:qu,maxZoom:Kf,minPitch:el,maxPitch:Tu,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Wh=function(dt){function Y(Q){var mt=this;if(Q=t.extend({},Yh,Q),Q.minZoom!=null&&Q.maxZoom!=null&&Q.minZoom>Q.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(Q.minPitch!=null&&Q.maxPitch!=null&&Q.minPitch>Q.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(Q.minPitch!=null&&Q.minPitch<el)throw new Error("minPitch must be greater than or equal to "+el);if(Q.maxPitch!=null&&Q.maxPitch>Tu)throw new Error("maxPitch must be less than or equal to "+Tu);var Ct=new ka(Q.minZoom,Q.maxZoom,Q.minPitch,Q.maxPitch,Q.renderWorldCopies);if(dt.call(this,Ct,Q),this._interactive=Q.interactive,this._maxTileCacheSize=Q.maxTileCacheSize,this._failIfMajorPerformanceCaveat=Q.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=Q.preserveDrawingBuffer,this._antialias=Q.antialias,this._trackResize=Q.trackResize,this._bearingSnap=Q.bearingSnap,this._refreshExpiredTiles=Q.refreshExpiredTiles,this._fadeDuration=Q.fadeDuration,this._crossSourceCollisions=Q.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=Q.collectResourceTiming,this._renderTaskQueue=new Go,this._controls=[],this._mapId=t.uniqueId(),this._locale=t.extend({},lv,Q.locale),this._requestManager=new t.RequestManager(Q.transformRequest,Q.accessToken),typeof Q.container=="string"){if(this._container=t.window.document.getElementById(Q.container),!this._container)throw new Error("Container '"+Q.container+"' not found.")}else if(Q.container instanceof xf)this._container=Q.container;else throw new Error("Invalid type: 'container' must be a String or HTMLElement.");if(Q.maxBounds&&this.setMaxBounds(Q.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return mt._update(!1)}),this.on("moveend",function(){return mt._update(!1)}),this.on("zoom",function(){return mt._update(!0)}),typeof t.window<"u"&&(t.window.addEventListener("online",this._onWindowOnline,!1),t.window.addEventListener("resize",this._onWindowResize,!1)),this.handlers=new ro(this,Q);var Dt=typeof Q.hash=="string"&&Q.hash||void 0;this._hash=Q.hash&&new Ao(Dt).addTo(this),(!this._hash||!this._hash._onHashChange())&&(this.jumpTo({center:Q.center,zoom:Q.zoom,bearing:Q.bearing,pitch:Q.pitch}),Q.bounds&&(this.resize(),this.fitBounds(Q.bounds,t.extend({},Q.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=Q.localIdeographFontFamily,Q.style&&this.setStyle(Q.style,{localIdeographFontFamily:Q.localIdeographFontFamily}),Q.attributionControl&&this.addControl(new Kl({customAttribution:Q.customAttribution})),this.addControl(new Ga,Q.logoPosition),this.on("style.load",function(){mt.transform.unmodified&&mt.jumpTo(mt.style.stylesheet)}),this.on("data",function(Kt){mt._update(Kt.dataType==="style"),mt.fire(new t.Event(Kt.dataType+"data",Kt))}),this.on("dataloading",function(Kt){mt.fire(new t.Event(Kt.dataType+"dataloading",Kt))})}dt&&(Y.__proto__=dt),Y.prototype=Object.create(dt&&dt.prototype),Y.prototype.constructor=Y;var gt={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return Y.prototype._getMapId=function(){return this._mapId},Y.prototype.addControl=function(mt,Ct){if(Ct===void 0&&mt.getDefaultPosition&&(Ct=mt.getDefaultPosition()),Ct===void 0&&(Ct="top-right"),!mt||!mt.onAdd)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var Dt=mt.onAdd(this);this._controls.push(mt);var Kt=this._controlPositions[Ct];return Ct.indexOf("bottom")!==-1?Kt.insertBefore(Dt,Kt.firstChild):Kt.appendChild(Dt),this},Y.prototype.removeControl=function(mt){if(!mt||!mt.onRemove)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var Ct=this._controls.indexOf(mt);return Ct>-1&&this._controls.splice(Ct,1),mt.onRemove(this),this},Y.prototype.resize=function(mt){var Ct=this._containerDimensions(),Dt=Ct[0],Kt=Ct[1];this._resizeCanvas(Dt,Kt),this.transform.resize(Dt,Kt),this.painter.resize(Dt,Kt);var fe=!this._moving;return fe&&(this.stop(),this.fire(new t.Event("movestart",mt)).fire(new t.Event("move",mt))),this.fire(new t.Event("resize",mt)),fe&&this.fire(new t.Event("moveend",mt)),this},Y.prototype.getBounds=function(){return this.transform.getBounds()},Y.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},Y.prototype.setMaxBounds=function(mt){return this.transform.setMaxBounds(t.LngLatBounds.convert(mt)),this._update()},Y.prototype.setMinZoom=function(mt){if(mt=mt==null?qu:mt,mt>=qu&&mt<=this.transform.maxZoom)return this.transform.minZoom=mt,this._update(),this.getZoom()<mt&&this.setZoom(mt),this;throw new Error("minZoom must be between "+qu+" and the current maxZoom, inclusive")},Y.prototype.getMinZoom=function(){return this.transform.minZoom},Y.prototype.setMaxZoom=function(mt){if(mt=mt==null?Kf:mt,mt>=this.transform.minZoom)return this.transform.maxZoom=mt,this._update(),this.getZoom()>mt&&this.setZoom(mt),this;throw new Error("maxZoom must be greater than the current minZoom")},Y.prototype.getMaxZoom=function(){return this.transform.maxZoom},Y.prototype.setMinPitch=function(mt){if(mt=mt==null?el:mt,mt<el)throw new Error("minPitch must be greater than or equal to "+el);if(mt>=el&&mt<=this.transform.maxPitch)return this.transform.minPitch=mt,this._update(),this.getPitch()<mt&&this.setPitch(mt),this;throw new Error("minPitch must be between "+el+" and the current maxPitch, inclusive")},Y.prototype.getMinPitch=function(){return this.transform.minPitch},Y.prototype.setMaxPitch=function(mt){if(mt=mt==null?Tu:mt,mt>Tu)throw new Error("maxPitch must be less than or equal to "+Tu);if(mt>=this.transform.minPitch)return this.transform.maxPitch=mt,this._update(),this.getPitch()>mt&&this.setPitch(mt),this;throw new Error("maxPitch must be greater than the current minPitch")},Y.prototype.getMaxPitch=function(){return this.transform.maxPitch},Y.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},Y.prototype.setRenderWorldCopies=function(mt){return this.transform.renderWorldCopies=mt,this._update()},Y.prototype.project=function(mt){return this.transform.locationPoint(t.LngLat.convert(mt))},Y.prototype.unproject=function(mt){return this.transform.pointLocation(t.Point.convert(mt))},Y.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},Y.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},Y.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},Y.prototype._createDelegatedListener=function(mt,Ct,Dt){var Kt=this,fe;if(mt==="mouseenter"||mt==="mouseover"){var Ce=!1,Je=function(Vr){var Jr=Kt.getLayer(Ct)?Kt.queryRenderedFeatures(Vr.point,{layers:[Ct]}):[];Jr.length?Ce||(Ce=!0,Dt.call(Kt,new we(mt,Kt,Vr.originalEvent,{features:Jr}))):Ce=!1},ur=function(){Ce=!1};return{layer:Ct,listener:Dt,delegates:{mousemove:Je,mouseout:ur}}}else if(mt==="mouseleave"||mt==="mouseout"){var vr=!1,Lr=function(Vr){var Jr=Kt.getLayer(Ct)?Kt.queryRenderedFeatures(Vr.point,{layers:[Ct]}):[];Jr.length?vr=!0:vr&&(vr=!1,Dt.call(Kt,new we(mt,Kt,Vr.originalEvent)))},Yr=function(Vr){vr&&(vr=!1,Dt.call(Kt,new we(mt,Kt,Vr.originalEvent)))};return{layer:Ct,listener:Dt,delegates:{mousemove:Lr,mouseout:Yr}}}else{var $r=function(Vr){var Jr=Kt.getLayer(Ct)?Kt.queryRenderedFeatures(Vr.point,{layers:[Ct]}):[];Jr.length&&(Vr.features=Jr,Dt.call(Kt,Vr),delete Vr.features)};return{layer:Ct,listener:Dt,delegates:(fe={},fe[mt]=$r,fe)}}},Y.prototype.on=function(mt,Ct,Dt){if(Dt===void 0)return dt.prototype.on.call(this,mt,Ct);var Kt=this._createDelegatedListener(mt,Ct,Dt);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[mt]=this._delegatedListeners[mt]||[],this._delegatedListeners[mt].push(Kt);for(var fe in Kt.delegates)this.on(fe,Kt.delegates[fe]);return this},Y.prototype.once=function(mt,Ct,Dt){if(Dt===void 0)return dt.prototype.once.call(this,mt,Ct);var Kt=this._createDelegatedListener(mt,Ct,Dt);for(var fe in Kt.delegates)this.once(fe,Kt.delegates[fe]);return this},Y.prototype.off=function(mt,Ct,Dt){var Kt=this;if(Dt===void 0)return dt.prototype.off.call(this,mt,Ct);var fe=function(Ce){for(var Je=Ce[mt],ur=0;ur<Je.length;ur++){var vr=Je[ur];if(vr.layer===Ct&&vr.listener===Dt){for(var Lr in vr.delegates)Kt.off(Lr,vr.delegates[Lr]);return Je.splice(ur,1),Kt}}};return this._delegatedListeners&&this._delegatedListeners[mt]&&fe(this._delegatedListeners),this},Y.prototype.queryRenderedFeatures=function(mt,Ct){if(!this.style)return[];Ct===void 0&&mt!==void 0&&!(mt instanceof t.Point)&&!Array.isArray(mt)&&(Ct=mt,mt=void 0),Ct=Ct||{},mt=mt||[[0,0],[this.transform.width,this.transform.height]];var Dt;if(mt instanceof t.Point||typeof mt[0]=="number")Dt=[t.Point.convert(mt)];else{var Kt=t.Point.convert(mt[0]),fe=t.Point.convert(mt[1]);Dt=[Kt,new t.Point(fe.x,Kt.y),fe,new t.Point(Kt.x,fe.y),Kt]}return this.style.queryRenderedFeatures(Dt,Ct,this.transform)},Y.prototype.querySourceFeatures=function(mt,Ct){return this.style.querySourceFeatures(mt,Ct)},Y.prototype.setStyle=function(mt,Ct){return Ct=t.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},Ct),Ct.diff!==!1&&Ct.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&mt?(this._diffStyle(mt,Ct),this):(this._localIdeographFontFamily=Ct.localIdeographFontFamily,this._updateStyle(mt,Ct))},Y.prototype._getUIString=function(mt){var Ct=this._locale[mt];if(Ct==null)throw new Error("Missing UI string '"+mt+"'");return Ct},Y.prototype._updateStyle=function(mt,Ct){if(this.style&&(this.style.setEventedParent(null),this.style._remove()),mt)this.style=new ss(this,Ct||{});else return delete this.style,this;return this.style.setEventedParent(this,{style:this.style}),typeof mt=="string"?this.style.loadURL(mt):this.style.loadJSON(mt),this},Y.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new ss(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},Y.prototype._diffStyle=function(mt,Ct){var Dt=this;if(typeof mt=="string"){var Kt=this._requestManager.normalizeStyleURL(mt),fe=this._requestManager.transformRequest(Kt,t.ResourceType.Style);t.getJSON(fe,function(Ce,Je){Ce?Dt.fire(new t.ErrorEvent(Ce)):Je&&Dt._updateDiff(Je,Ct)})}else typeof mt=="object"&&this._updateDiff(mt,Ct)},Y.prototype._updateDiff=function(mt,Ct){try{this.style.setState(mt)&&this._update(!0)}catch(Dt){t.warnOnce("Unable to perform style diff: "+(Dt.message||Dt.error||Dt)+".  Rebuilding the style from scratch."),this._updateStyle(mt,Ct)}},Y.prototype.getStyle=function(){if(this.style)return this.style.serialize()},Y.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():t.warnOnce("There is no style added to the map.")},Y.prototype.addSource=function(mt,Ct){return this._lazyInitEmptyStyle(),this.style.addSource(mt,Ct),this._update(!0)},Y.prototype.isSourceLoaded=function(mt){var Ct=this.style&&this.style.sourceCaches[mt];if(Ct===void 0){this.fire(new t.ErrorEvent(new Error("There is no source with ID '"+mt+"'")));return}return Ct.loaded()},Y.prototype.areTilesLoaded=function(){var mt=this.style&&this.style.sourceCaches;for(var Ct in mt){var Dt=mt[Ct],Kt=Dt._tiles;for(var fe in Kt){var Ce=Kt[fe];if(!(Ce.state==="loaded"||Ce.state==="errored"))return!1}}return!0},Y.prototype.addSourceType=function(mt,Ct,Dt){return this._lazyInitEmptyStyle(),this.style.addSourceType(mt,Ct,Dt)},Y.prototype.removeSource=function(mt){return this.style.removeSource(mt),this._update(!0)},Y.prototype.getSource=function(mt){return this.style.getSource(mt)},Y.prototype.addImage=function(mt,Ct,Dt){Dt===void 0&&(Dt={});var Kt=Dt.pixelRatio;Kt===void 0&&(Kt=1);var fe=Dt.sdf;fe===void 0&&(fe=!1);var Ce=Dt.stretchX,Je=Dt.stretchY,ur=Dt.content;this._lazyInitEmptyStyle();var vr=0;if(Ct instanceof Zf||ku&&Ct instanceof ku){var Lr=t.browser.getImageData(Ct),Yr=Lr.width,$r=Lr.height,Vr=Lr.data;this.style.addImage(mt,{data:new t.RGBAImage({width:Yr,height:$r},Vr),pixelRatio:Kt,stretchX:Ce,stretchY:Je,content:ur,sdf:fe,version:vr})}else{if(Ct.width===void 0||Ct.height===void 0)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var Jr=Ct.width,pn=Ct.height,Ln=Ct.data,Bn=Ct;this.style.addImage(mt,{data:new t.RGBAImage({width:Jr,height:pn},new Uint8Array(Ln)),pixelRatio:Kt,stretchX:Ce,stretchY:Je,content:ur,sdf:fe,version:vr,userImage:Bn}),Bn.onAdd&&Bn.onAdd(this,mt)}},Y.prototype.updateImage=function(mt,Ct){var Dt=this.style.getImage(mt);if(!Dt)return this.fire(new t.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var Kt=Ct instanceof Zf||ku&&Ct instanceof ku?t.browser.getImageData(Ct):Ct,fe=Kt.width,Ce=Kt.height,Je=Kt.data;if(fe===void 0||Ce===void 0)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(fe!==Dt.data.width||Ce!==Dt.data.height)return this.fire(new t.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));var ur=!(Ct instanceof Zf||ku&&Ct instanceof ku);Dt.data.replace(Je,ur),this.style.updateImage(mt,Dt)},Y.prototype.hasImage=function(mt){return mt?!!this.style.getImage(mt):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)},Y.prototype.removeImage=function(mt){this.style.removeImage(mt)},Y.prototype.loadImage=function(mt,Ct){t.getImage(this._requestManager.transformRequest(mt,t.ResourceType.Image),Ct)},Y.prototype.listImages=function(){return this.style.listImages()},Y.prototype.addLayer=function(mt,Ct){return this._lazyInitEmptyStyle(),this.style.addLayer(mt,Ct),this._update(!0)},Y.prototype.moveLayer=function(mt,Ct){return this.style.moveLayer(mt,Ct),this._update(!0)},Y.prototype.removeLayer=function(mt){return this.style.removeLayer(mt),this._update(!0)},Y.prototype.getLayer=function(mt){return this.style.getLayer(mt)},Y.prototype.setLayerZoomRange=function(mt,Ct,Dt){return this.style.setLayerZoomRange(mt,Ct,Dt),this._update(!0)},Y.prototype.setFilter=function(mt,Ct,Dt){return Dt===void 0&&(Dt={}),this.style.setFilter(mt,Ct,Dt),this._update(!0)},Y.prototype.getFilter=function(mt){return this.style.getFilter(mt)},Y.prototype.setPaintProperty=function(mt,Ct,Dt,Kt){return Kt===void 0&&(Kt={}),this.style.setPaintProperty(mt,Ct,Dt,Kt),this._update(!0)},Y.prototype.getPaintProperty=function(mt,Ct){return this.style.getPaintProperty(mt,Ct)},Y.prototype.setLayoutProperty=function(mt,Ct,Dt,Kt){return Kt===void 0&&(Kt={}),this.style.setLayoutProperty(mt,Ct,Dt,Kt),this._update(!0)},Y.prototype.getLayoutProperty=function(mt,Ct){return this.style.getLayoutProperty(mt,Ct)},Y.prototype.setLight=function(mt,Ct){return Ct===void 0&&(Ct={}),this._lazyInitEmptyStyle(),this.style.setLight(mt,Ct),this._update(!0)},Y.prototype.getLight=function(){return this.style.getLight()},Y.prototype.setFeatureState=function(mt,Ct){return this.style.setFeatureState(mt,Ct),this._update()},Y.prototype.removeFeatureState=function(mt,Ct){return this.style.removeFeatureState(mt,Ct),this._update()},Y.prototype.getFeatureState=function(mt){return this.style.getFeatureState(mt)},Y.prototype.getContainer=function(){return this._container},Y.prototype.getCanvasContainer=function(){return this._canvasContainer},Y.prototype.getCanvas=function(){return this._canvas},Y.prototype._containerDimensions=function(){var mt=0,Ct=0;return this._container&&(mt=this._container.clientWidth||400,Ct=this._container.clientHeight||300),[mt,Ct]},Y.prototype._detectMissingCSS=function(){var mt=t.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color");mt!=="rgb(250, 128, 114)"&&t.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},Y.prototype._setupContainer=function(){var mt=this._container;mt.classList.add("mapboxgl-map");var Ct=this._missingCSSCanary=i.create("div","mapboxgl-canary",mt);Ct.style.visibility="hidden",this._detectMissingCSS();var Dt=this._canvasContainer=i.create("div","mapboxgl-canvas-container",mt);this._interactive&&Dt.classList.add("mapboxgl-interactive"),this._canvas=i.create("canvas","mapboxgl-canvas",Dt),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var Kt=this._containerDimensions();this._resizeCanvas(Kt[0],Kt[1]);var fe=this._controlContainer=i.create("div","mapboxgl-control-container",mt),Ce=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(Je){Ce[Je]=i.create("div","mapboxgl-ctrl-"+Je,fe)})},Y.prototype._resizeCanvas=function(mt,Ct){var Dt=t.browser.devicePixelRatio||1;this._canvas.width=Dt*mt,this._canvas.height=Dt*Ct,this._canvas.style.width=mt+"px",this._canvas.style.height=Ct+"px"},Y.prototype._setupPainter=function(){var mt=t.extend({},a.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),Ct=this._canvas.getContext("webgl",mt)||this._canvas.getContext("experimental-webgl",mt);if(!Ct){this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")));return}this.painter=new aa(Ct,this.transform),t.webpSupported.testSupport(Ct)},Y.prototype._contextLost=function(mt){mt.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new t.Event("webglcontextlost",{originalEvent:mt}))},Y.prototype._contextRestored=function(mt){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:mt}))},Y.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},Y.prototype._update=function(mt){return this.style?(this._styleDirty=this._styleDirty||mt,this._sourcesDirty=!0,this.triggerRepaint(),this):this},Y.prototype._requestRenderFrame=function(mt){return this._update(),this._renderTaskQueue.add(mt)},Y.prototype._cancelRenderFrame=function(mt){this._renderTaskQueue.remove(mt)},Y.prototype._render=function(mt){var Ct=this,Dt,Kt=0,fe=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(Dt=fe.createQueryEXT(),fe.beginQueryEXT(fe.TIME_ELAPSED_EXT,Dt),Kt=t.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(mt),!this._removed){var Ce=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var Je=this.transform.zoom,ur=t.browser.now();this.style.zoomHistory.update(Je,ur);var vr=new t.EvaluationParameters(Je,{now:ur,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Lr=vr.crossFadingFactor();(Lr!==1||Lr!==this._crossFadingFactor)&&(Ce=!0,this._crossFadingFactor=Lr),this.style.update(vr)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new t.Event("load"))),this.style&&(this.style.hasTransitions()||Ce)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var Yr=t.browser.now()-Kt;fe.endQueryEXT(fe.TIME_ELAPSED_EXT,Dt),setTimeout(function(){var Jr=fe.getQueryObjectEXT(Dt,fe.QUERY_RESULT_EXT)/1e6;fe.deleteQueryEXT(Dt),Ct.fire(new t.Event("gpu-timing-frame",{cpuTime:Yr,gpuTime:Jr}))},50)}if(this.listens("gpu-timing-layer")){var $r=this.painter.collectGpuTimers();setTimeout(function(){var Jr=Ct.painter.queryGpuTimers($r);Ct.fire(new t.Event("gpu-timing-layer",{layerTimes:Jr}))},50)}var Vr=this._sourcesDirty||this._styleDirty||this._placementDirty;return Vr||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&(this._fullyLoaded||(this._fullyLoaded=!0),this.fire(new t.Event("idle"))),this}},Y.prototype.remove=function(){this._hash&&this._hash.remove();for(var mt=0,Ct=this._controls;mt<Ct.length;mt+=1){var Dt=Ct[mt];Dt.onRemove(this)}this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof t.window<"u"&&(t.window.removeEventListener("resize",this._onWindowResize,!1),t.window.removeEventListener("online",this._onWindowOnline,!1));var Kt=this.painter.context.gl.getExtension("WEBGL_lose_context");Kt&&Kt.loseContext(),wf(this._canvasContainer),wf(this._controlContainer),wf(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new t.Event("remove"))},Y.prototype.triggerRepaint=function(){var mt=this;this.style&&!this._frame&&(this._frame=t.browser.frame(function(Ct){mt._frame=null,mt._render(Ct)}))},Y.prototype._onWindowOnline=function(){this._update()},Y.prototype._onWindowResize=function(mt){this._trackResize&&this.resize({originalEvent:mt})._update()},gt.showTileBoundaries.get=function(){return!!this._showTileBoundaries},gt.showTileBoundaries.set=function(Q){this._showTileBoundaries!==Q&&(this._showTileBoundaries=Q,this._update())},gt.showPadding.get=function(){return!!this._showPadding},gt.showPadding.set=function(Q){this._showPadding!==Q&&(this._showPadding=Q,this._update())},gt.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},gt.showCollisionBoxes.set=function(Q){this._showCollisionBoxes!==Q&&(this._showCollisionBoxes=Q,Q?this.style._generateCollisionBoxes():this._update())},gt.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},gt.showOverdrawInspector.set=function(Q){this._showOverdrawInspector!==Q&&(this._showOverdrawInspector=Q,this._update())},gt.repaint.get=function(){return!!this._repaint},gt.repaint.set=function(Q){this._repaint!==Q&&(this._repaint=Q,this.triggerRepaint())},gt.vertices.get=function(){return!!this._vertices},gt.vertices.set=function(Q){this._vertices=Q,this._update()},Y.prototype._setCacheLimits=function(mt,Ct){t.setCacheLimits(mt,Ct)},gt.version.get=function(){return t.version},Object.defineProperties(Y.prototype,gt),Y}(Qu);function wf(dt){dt.parentNode&&dt.parentNode.removeChild(dt)}var Jf={showCompass:!0,showZoom:!0,visualizePitch:!1},Jc=function(Y){var gt=this;this.options=t.extend({},Jf,Y),this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(Q){return Q.preventDefault()}),this.options.showZoom&&(t.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(Q){return gt._map.zoomIn({},{originalEvent:Q})}),i.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(Q){return gt._map.zoomOut({},{originalEvent:Q})}),i.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(Q){gt.options.visualizePitch?gt._map.resetNorthPitch({},{originalEvent:Q}):gt._map.resetNorth({},{originalEvent:Q})}),this._compassIcon=i.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Jc.prototype._updateZoomButtons=function(){var Y=this._map.getZoom();this._zoomInButton.disabled=Y===this._map.getMaxZoom(),this._zoomOutButton.disabled=Y===this._map.getMinZoom()},Jc.prototype._rotateCompassArrow=function(){var Y=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=Y},Jc.prototype.onAdd=function(Y){return this._map=Y,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ml(this._map,this._compass,this.options.visualizePitch)),this._container},Jc.prototype.onRemove=function(){i.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},Jc.prototype._createButton=function(Y,gt){var Q=i.create("button",Y,this._container);return Q.type="button",Q.addEventListener("click",gt),Q},Jc.prototype._setButtonTitle=function(Y,gt){var Q=this._map._getUIString("NavigationControl."+gt);Y.title=Q,Y.setAttribute("aria-label",Q)};var ml=function(Y,gt,Q){Q===void 0&&(Q=!1),this._clickTolerance=10,this.element=gt,this.mouseRotate=new si({clickTolerance:Y.dragRotate._mouseRotate._clickTolerance}),this.map=Y,Q&&(this.mousePitch=new Ci({clickTolerance:Y.dragRotate._mousePitch._clickTolerance})),t.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),i.addEventListener(gt,"mousedown",this.mousedown),i.addEventListener(gt,"touchstart",this.touchstart,{passive:!1}),i.addEventListener(gt,"touchmove",this.touchmove),i.addEventListener(gt,"touchend",this.touchend),i.addEventListener(gt,"touchcancel",this.reset)};ml.prototype.down=function(Y,gt){this.mouseRotate.mousedown(Y,gt),this.mousePitch&&this.mousePitch.mousedown(Y,gt),i.disableDrag()},ml.prototype.move=function(Y,gt){var Q=this.map,mt=this.mouseRotate.mousemoveWindow(Y,gt);if(mt&&mt.bearingDelta&&Q.setBearing(Q.getBearing()+mt.bearingDelta),this.mousePitch){var Ct=this.mousePitch.mousemoveWindow(Y,gt);Ct&&Ct.pitchDelta&&Q.setPitch(Q.getPitch()+Ct.pitchDelta)}},ml.prototype.off=function(){var Y=this.element;i.removeEventListener(Y,"mousedown",this.mousedown),i.removeEventListener(Y,"touchstart",this.touchstart,{passive:!1}),i.removeEventListener(Y,"touchmove",this.touchmove),i.removeEventListener(Y,"touchend",this.touchend),i.removeEventListener(Y,"touchcancel",this.reset),this.offTemp()},ml.prototype.offTemp=function(){i.enableDrag(),i.removeEventListener(t.window,"mousemove",this.mousemove),i.removeEventListener(t.window,"mouseup",this.mouseup)},ml.prototype.mousedown=function(Y){this.down(t.extend({},Y,{ctrlKey:!0,preventDefault:function(){return Y.preventDefault()}}),i.mousePos(this.element,Y)),i.addEventListener(t.window,"mousemove",this.mousemove),i.addEventListener(t.window,"mouseup",this.mouseup)},ml.prototype.mousemove=function(Y){this.move(Y,i.mousePos(this.element,Y))},ml.prototype.mouseup=function(Y){this.mouseRotate.mouseupWindow(Y),this.mousePitch&&this.mousePitch.mouseupWindow(Y),this.offTemp()},ml.prototype.touchstart=function(Y){Y.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=i.touchPos(this.element,Y.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return Y.preventDefault()}},this._startPos))},ml.prototype.touchmove=function(Y){Y.targetTouches.length!==1?this.reset():(this._lastPos=i.touchPos(this.element,Y.targetTouches)[0],this.move({preventDefault:function(){return Y.preventDefault()}},this._lastPos))},ml.prototype.touchend=function(Y){Y.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},ml.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};function Qc(dt,Y,gt){if(dt=new t.LngLat(dt.lng,dt.lat),Y){var Q=new t.LngLat(dt.lng-360,dt.lat),mt=new t.LngLat(dt.lng+360,dt.lat),Ct=gt.locationPoint(dt).distSqr(Y);gt.locationPoint(Q).distSqr(Y)<Ct?dt=Q:gt.locationPoint(mt).distSqr(Y)<Ct&&(dt=mt)}for(;Math.abs(dt.lng-gt.center.lng)>180;){var Dt=gt.locationPoint(dt);if(Dt.x>=0&&Dt.y>=0&&Dt.x<=gt.width&&Dt.y<=gt.height)break;dt.lng>gt.center.lng?dt.lng-=360:dt.lng+=360}return dt}var _f={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Qf(dt,Y,gt){var Q=dt.classList;for(var mt in _f)Q.remove("mapboxgl-"+gt+"-anchor-"+mt);Q.add("mapboxgl-"+gt+"-anchor-"+Y)}var tf=function(dt){function Y(gt,Q){var mt=this;if(dt.call(this),(gt instanceof t.window.HTMLElement||Q)&&(gt=t.extend({element:gt},Q)),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=gt&&gt.anchor||"center",this._color=gt&&gt.color||"#3FB1CE",this._draggable=gt&&gt.draggable||!1,this._state="inactive",this._rotation=gt&&gt.rotation||0,this._rotationAlignment=gt&&gt.rotationAlignment||"auto",this._pitchAlignment=gt&&gt.pitchAlignment&&gt.pitchAlignment!=="auto"?gt.pitchAlignment:this._rotationAlignment,!gt||!gt.element){this._defaultMarker=!0,this._element=i.create("div"),this._element.setAttribute("aria-label","Map marker");var Ct=i.createNS("http://www.w3.org/2000/svg","svg");Ct.setAttributeNS(null,"display","block"),Ct.setAttributeNS(null,"height","41px"),Ct.setAttributeNS(null,"width","27px"),Ct.setAttributeNS(null,"viewBox","0 0 27 41");var Dt=i.createNS("http://www.w3.org/2000/svg","g");Dt.setAttributeNS(null,"stroke","none"),Dt.setAttributeNS(null,"stroke-width","1"),Dt.setAttributeNS(null,"fill","none"),Dt.setAttributeNS(null,"fill-rule","evenodd");var Kt=i.createNS("http://www.w3.org/2000/svg","g");Kt.setAttributeNS(null,"fill-rule","nonzero");var fe=i.createNS("http://www.w3.org/2000/svg","g");fe.setAttributeNS(null,"transform","translate(3.0, 29.0)"),fe.setAttributeNS(null,"fill","#000000");for(var Ce=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}],Je=0,ur=Ce;Je<ur.length;Je+=1){var vr=ur[Je],Lr=i.createNS("http://www.w3.org/2000/svg","ellipse");Lr.setAttributeNS(null,"opacity","0.04"),Lr.setAttributeNS(null,"cx","10.5"),Lr.setAttributeNS(null,"cy","5.80029008"),Lr.setAttributeNS(null,"rx",vr.rx),Lr.setAttributeNS(null,"ry",vr.ry),fe.appendChild(Lr)}var Yr=i.createNS("http://www.w3.org/2000/svg","g");Yr.setAttributeNS(null,"fill",this._color);var $r=i.createNS("http://www.w3.org/2000/svg","path");$r.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Yr.appendChild($r);var Vr=i.createNS("http://www.w3.org/2000/svg","g");Vr.setAttributeNS(null,"opacity","0.25"),Vr.setAttributeNS(null,"fill","#000000");var Jr=i.createNS("http://www.w3.org/2000/svg","path");Jr.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Vr.appendChild(Jr);var pn=i.createNS("http://www.w3.org/2000/svg","g");pn.setAttributeNS(null,"transform","translate(6.0, 7.0)"),pn.setAttributeNS(null,"fill","#FFFFFF");var Ln=i.createNS("http://www.w3.org/2000/svg","g");Ln.setAttributeNS(null,"transform","translate(8.0, 8.0)");var Bn=i.createNS("http://www.w3.org/2000/svg","circle");Bn.setAttributeNS(null,"fill","#000000"),Bn.setAttributeNS(null,"opacity","0.25"),Bn.setAttributeNS(null,"cx","5.5"),Bn.setAttributeNS(null,"cy","5.5"),Bn.setAttributeNS(null,"r","5.4999962");var Jn=i.createNS("http://www.w3.org/2000/svg","circle");Jn.setAttributeNS(null,"fill","#FFFFFF"),Jn.setAttributeNS(null,"cx","5.5"),Jn.setAttributeNS(null,"cy","5.5"),Jn.setAttributeNS(null,"r","5.4999962"),Ln.appendChild(Bn),Ln.appendChild(Jn),Kt.appendChild(fe),Kt.appendChild(Yr),Kt.appendChild(Vr),Kt.appendChild(pn),Kt.appendChild(Ln),Ct.appendChild(Kt),this._element.appendChild(Ct),this._offset=t.Point.convert(gt&&gt.offset||[0,-14])}else this._element=gt.element,this._offset=t.Point.convert(gt&&gt.offset||[0,0]);this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(ei){ei.preventDefault()}),this._element.addEventListener("mousedown",function(ei){ei.preventDefault()}),this._element.addEventListener("focus",function(){var ei=mt._map.getContainer();ei.scrollTop=0,ei.scrollLeft=0}),Qf(this._element,this._anchor,"marker"),this._popup=null}return dt&&(Y.__proto__=dt),Y.prototype=Object.create(dt&&dt.prototype),Y.prototype.constructor=Y,Y.prototype.addTo=function(Q){return this.remove(),this._map=Q,Q.getCanvasContainer().appendChild(this._element),Q.on("move",this._update),Q.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},Y.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),i.remove(this._element),this._popup&&this._popup.remove(),this},Y.prototype.getLngLat=function(){return this._lngLat},Y.prototype.setLngLat=function(Q){return this._lngLat=t.LngLat.convert(Q),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},Y.prototype.getElement=function(){return this._element},Y.prototype.setPopup=function(Q){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),Q){if(!("offset"in Q.options)){var mt=38.1,Ct=13.5,Dt=Math.sqrt(Math.pow(Ct,2)/2);Q.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-mt],"bottom-left":[Dt,(mt-Ct+Dt)*-1],"bottom-right":[-Dt,(mt-Ct+Dt)*-1],left:[Ct,(mt-Ct)*-1],right:[-Ct,(mt-Ct)*-1]}:this._offset}this._popup=Q,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},Y.prototype._onKeyPress=function(Q){var mt=Q.code,Ct=Q.charCode||Q.keyCode;(mt==="Space"||mt==="Enter"||Ct===32||Ct===13)&&this.togglePopup()},Y.prototype._onMapClick=function(Q){var mt=Q.originalEvent.target,Ct=this._element;this._popup&&(mt===Ct||Ct.contains(mt))&&this.togglePopup()},Y.prototype.getPopup=function(){return this._popup},Y.prototype.togglePopup=function(){var Q=this._popup;if(Q)Q.isOpen()?Q.remove():Q.addTo(this._map);else return this;return this},Y.prototype._update=function(Q){if(!!this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Qc(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var mt="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?mt="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(mt="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var Ct="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?Ct="rotateX(0deg)":this._pitchAlignment==="map"&&(Ct="rotateX("+this._map.getPitch()+"deg)"),(!Q||Q.type==="moveend")&&(this._pos=this._pos.round()),i.setTransform(this._element,_f[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+Ct+" "+mt)}},Y.prototype.getOffset=function(){return this._offset},Y.prototype.setOffset=function(Q){return this._offset=t.Point.convert(Q),this._update(),this},Y.prototype._onMove=function(Q){this._pos=Q.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new t.Event("dragstart"))),this.fire(new t.Event("drag"))},Y.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new t.Event("dragend")),this._state="inactive"},Y.prototype._addDragHandler=function(Q){this._element.contains(Q.originalEvent.target)&&(Q.preventDefault(),this._positionDelta=Q.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},Y.prototype.setDraggable=function(Q){return this._draggable=!!Q,this._map&&(Q?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},Y.prototype.isDraggable=function(){return this._draggable},Y.prototype.setRotation=function(Q){return this._rotation=Q||0,this._update(),this},Y.prototype.getRotation=function(){return this._rotation},Y.prototype.setRotationAlignment=function(Q){return this._rotationAlignment=Q||"auto",this._update(),this},Y.prototype.getRotationAlignment=function(){return this._rotationAlignment},Y.prototype.setPitchAlignment=function(Q){return this._pitchAlignment=Q&&Q!=="auto"?Q:this._rotationAlignment,this._update(),this},Y.prototype.getPitchAlignment=function(){return this._pitchAlignment},Y}(t.Evented),$h={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Au;function kf(dt){Au!==void 0?dt(Au):t.window.navigator.permissions!==void 0?t.window.navigator.permissions.query({name:"geolocation"}).then(function(Y){Au=Y.state!=="denied",dt(Au)}):(Au=!!t.window.navigator.geolocation,dt(Au))}var ef=0,Su=!1,Xh=function(dt){function Y(gt){dt.call(this),this.options=t.extend({},$h,gt),t.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return dt&&(Y.__proto__=dt),Y.prototype=Object.create(dt&&dt.prototype),Y.prototype.constructor=Y,Y.prototype.onAdd=function(Q){return this._map=Q,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),kf(this._setupUI),this._container},Y.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),i.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,ef=0,Su=!1},Y.prototype._isOutOfMapMaxBounds=function(Q){var mt=this._map.getMaxBounds(),Ct=Q.coords;return mt&&(Ct.longitude<mt.getWest()||Ct.longitude>mt.getEast()||Ct.latitude<mt.getSouth()||Ct.latitude>mt.getNorth())},Y.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break}},Y.prototype._onSuccess=function(Q){if(!!this._map){if(this._isOutOfMapMaxBounds(Q)){this._setErrorState(),this.fire(new t.Event("outofmaxbounds",Q)),this._updateMarker(),this._finish();return}if(this.options.trackUserLocation)switch(this._lastKnownPosition=Q,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(Q),(!this.options.trackUserLocation||this._watchState==="ACTIVE_LOCK")&&this._updateCamera(Q),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",Q)),this._finish()}},Y.prototype._updateCamera=function(Q){var mt=new t.LngLat(Q.coords.longitude,Q.coords.latitude),Ct=Q.coords.accuracy,Dt=this._map.getBearing(),Kt=t.extend({bearing:Dt},this.options.fitBoundsOptions);this._map.fitBounds(mt.toBounds(Ct),Kt,{geolocateSource:!0})},Y.prototype._updateMarker=function(Q){if(Q){var mt=new t.LngLat(Q.coords.longitude,Q.coords.latitude);this._accuracyCircleMarker.setLngLat(mt).addTo(this._map),this._userLocationDotMarker.setLngLat(mt).addTo(this._map),this._accuracy=Q.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},Y.prototype._updateCircleRadius=function(){var Q=this._map._container.clientHeight/2,mt=this._map.unproject([0,Q]),Ct=this._map.unproject([1,Q]),Dt=mt.distanceTo(Ct),Kt=Math.ceil(2*this._accuracy/Dt);this._circleElement.style.width=Kt+"px",this._circleElement.style.height=Kt+"px"},Y.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},Y.prototype._onError=function(Q){if(!!this._map){if(this.options.trackUserLocation)if(Q.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var mt=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=mt,this._geolocateButton.setAttribute("aria-label",mt),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(Q.code===3&&Su)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",Q)),this._finish()}},Y.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},Y.prototype._setupUI=function(Q){var mt=this;if(this._container.addEventListener("contextmenu",function(Kt){return Kt.preventDefault()}),this._geolocateButton=i.create("button","mapboxgl-ctrl-geolocate",this._container),i.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",Q===!1){t.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var Ct=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=Ct,this._geolocateButton.setAttribute("aria-label",Ct)}else{var Dt=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=Dt,this._geolocateButton.setAttribute("aria-label",Dt)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=i.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new tf(this._dotElement),this._circleElement=i.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new tf({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(Kt){var fe=Kt.originalEvent&&Kt.originalEvent.type==="resize";!Kt.geolocateSource&&mt._watchState==="ACTIVE_LOCK"&&!fe&&(mt._watchState="BACKGROUND",mt._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),mt._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),mt.fire(new t.Event("trackuserlocationend")))})},Y.prototype.trigger=function(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":ef--,Su=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"));break}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error");break}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),ef++;var Q;ef>1?(Q={maximumAge:6e5,timeout:0},Su=!0):(Q=this.options.positionOptions,Su=!1),this._geolocationWatchID=t.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,Q)}}else t.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},Y.prototype._clearWatch=function(){t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},Y}(t.Evented),Ld={maxWidth:100,unit:"metric"},Mu=function(Y){this.options=t.extend({},Ld,Y),t.bindAll(["_onMove","setUnit"],this)};Mu.prototype.getDefaultPosition=function(){return"bottom-left"},Mu.prototype._onMove=function(){jh(this._map,this._container,this.options)},Mu.prototype.onAdd=function(Y){return this._map=Y,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",Y.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Mu.prototype.onRemove=function(){i.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Mu.prototype.setUnit=function(Y){this.options.unit=Y,jh(this._map,this._container,this.options)};function jh(dt,Y,gt){var Q=gt&&gt.maxWidth||100,mt=dt._container.clientHeight/2,Ct=dt.unproject([0,mt]),Dt=dt.unproject([Q,mt]),Kt=Ct.distanceTo(Dt);if(gt&&gt.unit==="imperial"){var fe=3.2808*Kt;if(fe>5280){var Ce=fe/5280;rf(Y,Q,Ce,dt._getUIString("ScaleControl.Miles"))}else rf(Y,Q,fe,dt._getUIString("ScaleControl.Feet"))}else if(gt&&gt.unit==="nautical"){var Je=Kt/1852;rf(Y,Q,Je,dt._getUIString("ScaleControl.NauticalMiles"))}else Kt>=1e3?rf(Y,Q,Kt/1e3,dt._getUIString("ScaleControl.Kilometers")):rf(Y,Q,Kt,dt._getUIString("ScaleControl.Meters"))}function rf(dt,Y,gt,Q){var mt=Pd(gt),Ct=mt/gt;dt.style.width=Y*Ct+"px",dt.innerHTML=mt+"&nbsp;"+Q}function Dd(dt){var Y=Math.pow(10,Math.ceil(-Math.log(dt)/Math.LN10));return Math.round(dt*Y)/Y}function Pd(dt){var Y=Math.pow(10,(""+Math.floor(dt)).length-1),gt=dt/Y;return gt=gt>=10?10:gt>=5?5:gt>=3?3:gt>=2?2:gt>=1?1:Dd(gt),Y*gt}var dc=function(Y){this._fullscreen=!1,Y&&Y.container&&(Y.container instanceof t.window.HTMLElement?this._container=Y.container:t.warnOnce("Full screen control 'container' must be a DOM element.")),t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in t.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in t.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in t.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in t.window.document&&(this._fullscreenchange="MSFullscreenChange")};dc.prototype.onAdd=function(Y){return this._map=Y,this._container||(this._container=this._map.getContainer()),this._controlContainer=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},dc.prototype.onRemove=function(){i.remove(this._controlContainer),this._map=null,t.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},dc.prototype._checkFullscreenSupport=function(){return!!(t.window.document.fullscreenEnabled||t.window.document.mozFullScreenEnabled||t.window.document.msFullscreenEnabled||t.window.document.webkitFullscreenEnabled)},dc.prototype._setupUI=function(){var Y=this._fullscreenButton=i.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);i.create("span","mapboxgl-ctrl-icon",Y).setAttribute("aria-hidden",!0),Y.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),t.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},dc.prototype._updateTitle=function(){var Y=this._getTitle();this._fullscreenButton.setAttribute("aria-label",Y),this._fullscreenButton.title=Y},dc.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},dc.prototype._isFullscreen=function(){return this._fullscreen},dc.prototype._changeIcon=function(){var Y=t.window.document.fullscreenElement||t.window.document.mozFullScreenElement||t.window.document.webkitFullscreenElement||t.window.document.msFullscreenElement;Y===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},dc.prototype._onClickFullscreen=function(){this._isFullscreen()?t.window.document.exitFullscreen?t.window.document.exitFullscreen():t.window.document.mozCancelFullScreen?t.window.document.mozCancelFullScreen():t.window.document.msExitFullscreen?t.window.document.msExitFullscreen():t.window.document.webkitCancelFullScreen&&t.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Id={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},zd=function(dt){function Y(gt){dt.call(this),this.options=t.extend(Object.create(Id),gt),t.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return dt&&(Y.__proto__=dt),Y.prototype=Object.create(dt&&dt.prototype),Y.prototype.constructor=Y,Y.prototype.addTo=function(Q){return this._map&&this.remove(),this._map=Q,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new t.Event("open")),this},Y.prototype.isOpen=function(){return!!this._map},Y.prototype.remove=function(){return this._content&&i.remove(this._content),this._container&&(i.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new t.Event("close")),this},Y.prototype.getLngLat=function(){return this._lngLat},Y.prototype.setLngLat=function(Q){return this._lngLat=t.LngLat.convert(Q),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},Y.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},Y.prototype.getElement=function(){return this._container},Y.prototype.setText=function(Q){return this.setDOMContent(t.window.document.createTextNode(Q))},Y.prototype.setHTML=function(Q){var mt=t.window.document.createDocumentFragment(),Ct=t.window.document.createElement("body"),Dt;for(Ct.innerHTML=Q;Dt=Ct.firstChild,!!Dt;)mt.appendChild(Dt);return this.setDOMContent(mt)},Y.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},Y.prototype.setMaxWidth=function(Q){return this.options.maxWidth=Q,this._update(),this},Y.prototype.setDOMContent=function(Q){return this._createContent(),this._content.appendChild(Q),this._update(),this},Y.prototype.addClassName=function(Q){this._container&&this._container.classList.add(Q)},Y.prototype.removeClassName=function(Q){this._container&&this._container.classList.remove(Q)},Y.prototype.toggleClassName=function(Q){if(this._container)return this._container.classList.toggle(Q)},Y.prototype._createContent=function(){this._content&&i.remove(this._content),this._content=i.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=i.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},Y.prototype._onMouseUp=function(Q){this._update(Q.point)},Y.prototype._onMouseMove=function(Q){this._update(Q.point)},Y.prototype._onDrag=function(Q){this._update(Q.point)},Y.prototype._update=function(Q){var mt=this,Ct=this._lngLat||this._trackPointer;if(!(!this._map||!Ct||!this._content)&&(this._container||(this._container=i.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=i.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Lr){return mt._container.classList.add(Lr)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Qc(this._lngLat,this._pos,this._map.transform)),!(this._trackPointer&&!Q))){var Dt=this._pos=this._trackPointer&&Q?Q:this._map.project(this._lngLat),Kt=this.options.anchor,fe=Zh(this.options.offset);if(!Kt){var Ce=this._container.offsetWidth,Je=this._container.offsetHeight,ur;Dt.y+fe.bottom.y<Je?ur=["top"]:Dt.y>this._map.transform.height-Je?ur=["bottom"]:ur=[],Dt.x<Ce/2?ur.push("left"):Dt.x>this._map.transform.width-Ce/2&&ur.push("right"),ur.length===0?Kt="bottom":Kt=ur.join("-")}var vr=Dt.add(fe[Kt]).round();i.setTransform(this._container,_f[Kt]+" translate("+vr.x+"px,"+vr.y+"px)"),Qf(this._container,Kt,"popup")}},Y.prototype._onClose=function(){this.remove()},Y}(t.Evented);function Zh(dt){if(dt)if(typeof dt=="number"){var Y=Math.round(Math.sqrt(.5*Math.pow(dt,2)));return{center:new t.Point(0,0),top:new t.Point(0,dt),"top-left":new t.Point(Y,Y),"top-right":new t.Point(-Y,Y),bottom:new t.Point(0,-dt),"bottom-left":new t.Point(Y,-Y),"bottom-right":new t.Point(-Y,-Y),left:new t.Point(dt,0),right:new t.Point(-dt,0)}}else if(dt instanceof t.Point||Array.isArray(dt)){var gt=t.Point.convert(dt);return{center:gt,top:gt,"top-left":gt,"top-right":gt,bottom:gt,"bottom-left":gt,"bottom-right":gt,left:gt,right:gt}}else return{center:t.Point.convert(dt.center||[0,0]),top:t.Point.convert(dt.top||[0,0]),"top-left":t.Point.convert(dt["top-left"]||[0,0]),"top-right":t.Point.convert(dt["top-right"]||[0,0]),bottom:t.Point.convert(dt.bottom||[0,0]),"bottom-left":t.Point.convert(dt["bottom-left"]||[0,0]),"bottom-right":t.Point.convert(dt["bottom-right"]||[0,0]),left:t.Point.convert(dt.left||[0,0]),right:t.Point.convert(dt.right||[0,0])};else return Zh(new t.Point(0,0))}var Rd={version:t.version,supported:a,setRTLTextPlugin:t.setRTLTextPlugin,getRTLTextPluginStatus:t.getRTLTextPluginStatus,Map:Wh,NavigationControl:Jc,GeolocateControl:Xh,AttributionControl:Kl,ScaleControl:Mu,FullscreenControl:dc,Popup:zd,Marker:tf,Style:ss,LngLat:t.LngLat,LngLatBounds:t.LngLatBounds,Point:t.Point,MercatorCoordinate:t.MercatorCoordinate,Evented:t.Evented,config:t.config,prewarm:sr,clearPrewarmedResources:Er,get accessToken(){return t.config.ACCESS_TOKEN},set accessToken(dt){t.config.ACCESS_TOKEN=dt},get baseApiUrl(){return t.config.API_URL},set baseApiUrl(dt){t.config.API_URL=dt},get workerCount(){return Se.workerCount},set workerCount(dt){Se.workerCount=dt},get maxParallelImageRequests(){return t.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(dt){t.config.MAX_PARALLEL_IMAGE_REQUESTS=dt},clearStorage:function(Y){t.clearTileCache(Y)},workerUrl:""};return Rd}),m})},{}],240:[function(e,B,V){B.exports=Math.log2||function(f){return Math.log(f)*Math.LOG2E}},{}],241:[function(e,B,V){B.exports=l;var f=e("mouse-event");function l(m,x){x||(x=m,m=window);var t=0,a=0,i=0,r={shift:!1,alt:!1,control:!1,meta:!1},n=!1;function d(A){var k=!1;return"altKey"in A&&(k=k||A.altKey!==r.alt,r.alt=!!A.altKey),"shiftKey"in A&&(k=k||A.shiftKey!==r.shift,r.shift=!!A.shiftKey),"ctrlKey"in A&&(k=k||A.ctrlKey!==r.control,r.control=!!A.ctrlKey),"metaKey"in A&&(k=k||A.metaKey!==r.meta,r.meta=!!A.metaKey),k}function s(A,k){var p=f.x(k),w=f.y(k);"buttons"in k&&(A=k.buttons|0),(A!==t||p!==a||w!==i||d(k))&&(t=A|0,a=p||0,i=w||0,x&&x(t,a,i,r))}function o(A){s(0,A)}function y(){(t||a||i||r.shift||r.alt||r.meta||r.control)&&(a=i=0,t=0,r.shift=r.alt=r.control=r.meta=!1,x&&x(0,0,0,r))}function g(A){d(A)&&x&&x(t,a,i,r)}function b(A){f.buttons(A)===0?s(0,A):s(t,A)}function v(A){s(t|f.buttons(A),A)}function _(A){s(t&~f.buttons(A),A)}function u(){n||(n=!0,m.addEventListener("mousemove",b),m.addEventListener("mousedown",v),m.addEventListener("mouseup",_),m.addEventListener("mouseleave",o),m.addEventListener("mouseenter",o),m.addEventListener("mouseout",o),m.addEventListener("mouseover",o),m.addEventListener("blur",y),m.addEventListener("keyup",g),m.addEventListener("keydown",g),m.addEventListener("keypress",g),m!==window&&(window.addEventListener("blur",y),window.addEventListener("keyup",g),window.addEventListener("keydown",g),window.addEventListener("keypress",g)))}function T(){!n||(n=!1,m.removeEventListener("mousemove",b),m.removeEventListener("mousedown",v),m.removeEventListener("mouseup",_),m.removeEventListener("mouseleave",o),m.removeEventListener("mouseenter",o),m.removeEventListener("mouseout",o),m.removeEventListener("mouseover",o),m.removeEventListener("blur",y),m.removeEventListener("keyup",g),m.removeEventListener("keydown",g),m.removeEventListener("keypress",g),m!==window&&(window.removeEventListener("blur",y),window.removeEventListener("keyup",g),window.removeEventListener("keydown",g),window.removeEventListener("keypress",g)))}u();var c={element:m};return Object.defineProperties(c,{enabled:{get:function(){return n},set:function(A){A?u():T()},enumerable:!0},buttons:{get:function(){return t},enumerable:!0},x:{get:function(){return a},enumerable:!0},y:{get:function(){return i},enumerable:!0},mods:{get:function(){return r},enumerable:!0}}),c}},{"mouse-event":243}],242:[function(e,B,V){var f={left:0,top:0};B.exports=l;function l(x,t,a){t=t||x.currentTarget||x.srcElement,Array.isArray(a)||(a=[0,0]);var i=x.clientX||0,r=x.clientY||0,n=m(t);return a[0]=i-n.left,a[1]=r-n.top,a}function m(x){return x===window||x===document||x===document.body?f:x.getBoundingClientRect()}},{}],243:[function(e,B,V){function f(t){if(typeof t=="object"){if("buttons"in t)return t.buttons;if("which"in t){var a=t.which;if(a===2)return 4;if(a===3)return 2;if(a>0)return 1<<a-1}else if("button"in t){var a=t.button;if(a===1)return 4;if(a===2)return 2;if(a>=0)return 1<<a}}return 0}V.buttons=f;function l(t){return t.target||t.srcElement||window}V.element=l;function m(t){if(typeof t=="object"){if("offsetX"in t)return t.offsetX;var a=l(t),i=a.getBoundingClientRect();return t.clientX-i.left}return 0}V.x=m;function x(t){if(typeof t=="object"){if("offsetY"in t)return t.offsetY;var a=l(t),i=a.getBoundingClientRect();return t.clientY-i.top}return 0}V.y=x},{}],244:[function(e,B,V){var f=e("to-px");B.exports=l;function l(m,x,t){typeof m=="function"&&(t=!!x,x=m,m=window);var a=f("ex",m),i=function(r){t&&r.preventDefault();var n=r.deltaX||0,d=r.deltaY||0,s=r.deltaZ||0,o=r.deltaMode,y=1;switch(o){case 1:y=a;break;case 2:y=window.innerHeight;break}if(n*=y,d*=y,s*=y,n||d||s)return x(n,d,s,r)};return m.addEventListener("wheel",i),i}},{"to-px":315}],245:[function(e,B,V){(function(f,l){(function(){/*! Native Promise Only
    v0.8.1 (c) Kyle Simpson
    MIT License: http://getify.mit-license.org
*/(function(x,t,a){t[x]=t[x]||a(),typeof B<"u"&&B.exports&&(B.exports=t[x])})("Promise",typeof f<"u"?f:this,function(){var x,t,a,i=Object.prototype.toString,r=typeof l<"u"?function(A){return l(A)}:setTimeout;try{Object.defineProperty({},"x",{}),x=function(A,k,p,w){return Object.defineProperty(A,k,{value:p,writable:!0,configurable:w!==!1})}}catch{x=function(k,p,w){return k[p]=w,k}}a=function(){var A,k,p;function w(h,D){this.fn=h,this.self=D,this.next=void 0}return{add:function(D,S){p=new w(D,S),k?k.next=p:A=p,k=p,p=void 0},drain:function(){var D=A;for(A=k=t=void 0;D;)D.fn.call(D.self),D=D.next}}}();function n(c,A){a.add(c,A),t||(t=r(a.drain))}function d(c){var A,k=typeof c;return c!=null&&(k=="object"||k=="function")&&(A=c.then),typeof A=="function"?A:!1}function s(){for(var c=0;c<this.chain.length;c++)o(this,this.state===1?this.chain[c].success:this.chain[c].failure,this.chain[c]);this.chain.length=0}function o(c,A,k){var p,w;try{A===!1?k.reject(c.msg):(A===!0?p=c.msg:p=A.call(void 0,c.msg),p===k.promise?k.reject(TypeError("Promise-chain cycle")):(w=d(p))?w.call(p,k.resolve,k.reject):k.resolve(p))}catch(h){k.reject(h)}}function y(c){var A,k=this;if(!k.triggered){k.triggered=!0,k.def&&(k=k.def);try{(A=d(c))?n(function(){var p=new v(k);try{A.call(c,function(){y.apply(p,arguments)},function(){g.apply(p,arguments)})}catch(w){g.call(p,w)}}):(k.msg=c,k.state=1,k.chain.length>0&&n(s,k))}catch(p){g.call(new v(k),p)}}}function g(c){var A=this;A.triggered||(A.triggered=!0,A.def&&(A=A.def),A.msg=c,A.state=2,A.chain.length>0&&n(s,A))}function b(c,A,k,p){for(var w=0;w<A.length;w++)(function(D){c.resolve(A[D]).then(function(M){k(D,M)},p)})(w)}function v(c){this.def=c,this.triggered=!1}function _(c){this.promise=c,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function u(c){if(typeof c!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var A=new _(this);this.then=function(p,w){var h={success:typeof p=="function"?p:!0,failure:typeof w=="function"?w:!1};return h.promise=new this.constructor(function(S,M){if(typeof S!="function"||typeof M!="function")throw TypeError("Not a function");h.resolve=S,h.reject=M}),A.chain.push(h),A.state!==0&&n(s,A),h.promise},this.catch=function(p){return this.then(void 0,p)};try{c.call(void 0,function(p){y.call(A,p)},function(p){g.call(A,p)})}catch(k){g.call(A,k)}}var T=x({},"constructor",u,!1);return u.prototype=T,x(T,"__NPO__",0,!1),x(u,"resolve",function(A){var k=this;return A&&typeof A=="object"&&A.__NPO__===1?A:new k(function(w,h){if(typeof w!="function"||typeof h!="function")throw TypeError("Not a function");w(A)})}),x(u,"reject",function(A){return new this(function(p,w){if(typeof p!="function"||typeof w!="function")throw TypeError("Not a function");w(A)})}),x(u,"all",function(A){var k=this;return i.call(A)!="[object Array]"?k.reject(TypeError("Not an array")):A.length===0?k.resolve([]):new k(function(w,h){if(typeof w!="function"||typeof h!="function")throw TypeError("Not a function");var D=A.length,S=Array(D),M=0;b(k,A,function(R,z){S[R]=z,++M===D&&w(S)},h)})}),x(u,"race",function(A){var k=this;return i.call(A)!="[object Array]"?k.reject(TypeError("Not an array")):new k(function(w,h){if(typeof w!="function"||typeof h!="function")throw TypeError("Not a function");b(k,A,function(S,M){w(M)},h)})}),u})}).call(this)}).call(this,typeof zo<"u"?zo:typeof self<"u"?self:typeof window<"u"?window:{},e("timers").setImmediate)},{timers:312}],246:[function(e,B,V){var f=Math.PI,l=r(120);B.exports=m;function m(n){for(var d,s=[],o=0,y=0,g=0,b=0,v=null,_=null,u=0,T=0,c=0,A=n.length;c<A;c++){var k=n[c],p=k[0];switch(p){case"M":g=k[1],b=k[2];break;case"A":k=a(u,T,k[1],k[2],r(k[3]),k[4],k[5],k[6],k[7]),k.unshift("C"),k.length>7&&(s.push(k.splice(0,7)),k.unshift("C"));break;case"S":var w=u,h=T;(d=="C"||d=="S")&&(w+=w-o,h+=h-y),k=["C",w,h,k[1],k[2],k[3],k[4]];break;case"T":d=="Q"||d=="T"?(v=u*2-v,_=T*2-_):(v=u,_=T),k=t(u,T,v,_,k[1],k[2]);break;case"Q":v=k[1],_=k[2],k=t(u,T,k[1],k[2],k[3],k[4]);break;case"L":k=x(u,T,k[1],k[2]);break;case"H":k=x(u,T,k[1],T);break;case"V":k=x(u,T,u,k[1]);break;case"Z":k=x(u,T,g,b);break}d=p,u=k[k.length-2],T=k[k.length-1],k.length>4?(o=k[k.length-4],y=k[k.length-3]):(o=u,y=T),s.push(k)}return s}function x(n,d,s,o){return["C",n,d,s,o,s,o]}function t(n,d,s,o,y,g){return["C",n/3+2/3*s,d/3+2/3*o,y/3+2/3*s,g/3+2/3*o,y,g]}function a(n,d,s,o,y,g,b,v,_,u){if(u)M=u[0],L=u[1],D=u[2],S=u[3];else{var T=i(n,d,-y);n=T.x,d=T.y,T=i(v,_,-y),v=T.x,_=T.y;var c=(n-v)/2,A=(d-_)/2,k=c*c/(s*s)+A*A/(o*o);k>1&&(k=Math.sqrt(k),s=k*s,o=k*o);var p=s*s,w=o*o,h=(g==b?-1:1)*Math.sqrt(Math.abs((p*w-p*A*A-w*c*c)/(p*A*A+w*c*c)));h==1/0&&(h=1);var D=h*s*A/o+(n+v)/2,S=h*-o*c/s+(d+_)/2,M=Math.asin(((d-S)/o).toFixed(9)),L=Math.asin(((_-S)/o).toFixed(9));M=n<D?f-M:M,L=v<D?f-L:L,M<0&&(M=f*2+M),L<0&&(L=f*2+L),b&&M>L&&(M=M-f*2),!b&&L>M&&(L=L-f*2)}if(Math.abs(L-M)>l){var R=L,z=v,P=_;L=M+l*(b&&L>M?1:-1),v=D+s*Math.cos(L),_=S+o*Math.sin(L);var I=a(v,_,s,o,y,0,b,z,P,[L,R,D,S])}var U=Math.tan((L-M)/4),O=4/3*s*U,G=4/3*o*U,$=[2*n-(n+O*Math.sin(M)),2*d-(d-G*Math.cos(M)),v+O*Math.sin(L),_-G*Math.cos(L),v,_];if(u)return $;I&&($=$.concat(I));for(var tt=0;tt<$.length;){var Z=i($[tt],$[tt+1],y);$[tt++]=Z.x,$[tt++]=Z.y}return $}function i(n,d,s){return{x:n*Math.cos(s)-d*Math.sin(s),y:n*Math.sin(s)+d*Math.cos(s)}}function r(n){return n*(f/180)}},{}],247:[function(e,B,V){var f=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable;function x(a){if(a==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(a)}function t(){try{if(!Object.assign)return!1;var a=new String("abc");if(a[5]="de",Object.getOwnPropertyNames(a)[0]==="5")return!1;for(var i={},r=0;r<10;r++)i["_"+String.fromCharCode(r)]=r;var n=Object.getOwnPropertyNames(i).map(function(s){return i[s]});if(n.join("")!=="0123456789")return!1;var d={};return"abcdefghijklmnopqrst".split("").forEach(function(s){d[s]=s}),Object.keys(Object.assign({},d)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}B.exports=t()?Object.assign:function(a,i){for(var r,n=x(a),d,s=1;s<arguments.length;s++){r=Object(arguments[s]);for(var o in r)l.call(r,o)&&(n[o]=r[o]);if(f){d=f(r);for(var y=0;y<d.length;y++)m.call(r,d[y])&&(n[d[y]]=r[d[y]])}}return n}},{}],248:[function(e,B,V){function f(x,t){if(typeof x!="string")return[x];var a=[x];typeof t=="string"||Array.isArray(t)?t={brackets:t}:t||(t={});var i=t.brackets?Array.isArray(t.brackets)?t.brackets:[t.brackets]:["{}","[]","()"],r=t.escape||"___",n=!!t.flat;i.forEach(function(o){var y=new RegExp(["\\",o[0],"[^\\",o[0],"\\",o[1],"]*\\",o[1]].join("")),g=[];function b(v,_,u){var T=a.push(v.slice(o[0].length,-o[1].length))-1;return g.push(T),r+T+r}a.forEach(function(v,_){for(var u,T=0;v!=u;)if(u=v,v=v.replace(y,b),T++>1e4)throw Error("References have circular dependency. Please, check them.");a[_]=v}),g=g.reverse(),a=a.map(function(v){return g.forEach(function(_){v=v.replace(new RegExp("(\\"+r+_+"\\"+r+")","g"),o[0]+"$1"+o[1])}),v})});var d=new RegExp("\\"+r+"([0-9]+)\\"+r);function s(o,y,g){for(var b=[],v,_=0;v=d.exec(o);){if(_++>1e4)throw Error("Circular references in parenthesis");b.push(o.slice(0,v.index)),b.push(s(y[v[1]],y)),o=o.slice(v.index+v[0].length)}return b.push(o),b}return n?a:s(a[0],a)}function l(x,t){if(t&&t.flat){var a=t&&t.escape||"___",i=x[0],r;if(!i)return"";for(var n=new RegExp("\\"+a+"([0-9]+)\\"+a),d=0;i!=r;){if(d++>1e4)throw Error("Circular references in "+x);r=i,i=i.replace(n,s)}return i}return x.reduce(function o(y,g){return Array.isArray(g)&&(g=g.reduce(o,"")),y+g},"");function s(o,y){if(x[y]==null)throw Error("Reference "+y+"is undefined");return x[y]}}function m(x,t){return Array.isArray(x)?l(x,t):f(x,t)}m.parse=f,m.stringify=l,B.exports=m},{}],249:[function(e,B,V){var f=e("pick-by-alias");B.exports=l;function l(m){var x;return arguments.length>1&&(m=arguments),typeof m=="string"?m=m.split(/\s/).map(parseFloat):typeof m=="number"&&(m=[m]),m.length&&typeof m[0]=="number"?m.length===1?x={width:m[0],height:m[0],x:0,y:0}:m.length===2?x={width:m[0],height:m[1],x:0,y:0}:x={x:m[0],y:m[1],width:m[2]-m[0]||0,height:m[3]-m[1]||0}:m&&(m=f(m,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"}),x={x:m.left||0,y:m.top||0},m.width==null?m.right?x.width=m.right-x.x:x.width=0:x.width=m.width,m.height==null?m.bottom?x.height=m.bottom-x.y:x.height=0:x.height=m.height),x}},{"pick-by-alias":253}],250:[function(e,B,V){B.exports=m;var f={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},l=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function m(a){var i=[];return a.replace(l,function(r,n,d){var s=n.toLowerCase();for(d=t(d),s=="m"&&d.length>2&&(i.push([n].concat(d.splice(0,2))),s="l",n=n=="m"?"l":"L");;){if(d.length==f[s])return d.unshift(n),i.push(d);if(d.length<f[s])throw new Error("malformed path data");i.push([n].concat(d.splice(0,f[s])))}}),i}var x=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function t(a){var i=a.match(x);return i?i.map(Number):[]}},{}],251:[function(e,B,V){B.exports=function(l,m){m||(m=[0,""]),l=String(l);var x=parseFloat(l,10);return m[0]=x,m[1]=l.match(/[\d.\-\+]*\s*(.*)/)[1]||"",m}},{}],252:[function(e,B,V){(function(f){(function(){(function(){var l,m,x,t,a,i;typeof performance<"u"&&performance!==null&&performance.now?B.exports=function(){return performance.now()}:typeof f<"u"&&f!==null&&f.hrtime?(B.exports=function(){return(l()-a)/1e6},m=f.hrtime,l=function(){var r;return r=m(),r[0]*1e9+r[1]},t=l(),i=f.uptime()*1e9,a=t-i):Date.now?(B.exports=function(){return Date.now()-x},x=Date.now()):(B.exports=function(){return new Date().getTime()-x},x=new Date().getTime())}).call(this)}).call(this)}).call(this,e("_process"))},{_process:278}],253:[function(e,B,V){B.exports=function(x,t,a){var i={},r,n;if(typeof t=="string"&&(t=l(t)),Array.isArray(t)){var d={};for(n=0;n<t.length;n++)d[t[n]]=!0;t=d}for(r in t)t[r]=l(t[r]);var s={};for(r in t){var o=t[r];if(Array.isArray(o))for(n=0;n<o.length;n++){var y=o[n];if(a&&(s[y]=!0),y in x){if(i[r]=x[y],a)for(var g=n;g<o.length;g++)s[o[g]]=!0;break}}else r in x&&(t[r]&&(i[r]=x[r]),a&&(s[r]=!0))}if(a)for(r in x)s[r]||(i[r]=x[r]);return i};var f={};function l(m){return f[m]?f[m]:(typeof m=="string"&&(m=f[m]=m.split(/\s*,\s*|\s+/)),m)}},{}],254:[function(e,B,V){B.exports=function(l,m,x,t){var a=l[0],i=l[1],r=!1;x===void 0&&(x=0),t===void 0&&(t=m.length);for(var n=t-x,d=0,s=n-1;d<n;s=d++){var o=m[d+x][0],y=m[d+x][1],g=m[s+x][0],b=m[s+x][1],v=y>i!=b>i&&a<(g-o)*(i-y)/(b-y)+o;v&&(r=!r)}return r}},{}],255:[function(e,B,V){/*
 * @copyright 2016 Sean Connelly (@voidqk), http://syntheti.cc
 * @license MIT
 * @preserve Project Home: https://github.com/voidqk/polybooljs
 */var f=e("./lib/build-log"),l=e("./lib/epsilon"),m=e("./lib/intersecter"),x=e("./lib/segment-chainer"),t=e("./lib/segment-selector"),a=e("./lib/geojson"),i=!1,r=l(),n;n={buildLog:function(s){return s===!0?i=f():s===!1&&(i=!1),i===!1?!1:i.list},epsilon:function(s){return r.epsilon(s)},segments:function(s){var o=m(!0,r,i);return s.regions.forEach(o.addRegion),{segments:o.calculate(s.inverted),inverted:s.inverted}},combine:function(s,o){var y=m(!1,r,i);return{combined:y.calculate(s.segments,s.inverted,o.segments,o.inverted),inverted1:s.inverted,inverted2:o.inverted}},selectUnion:function(s){return{segments:t.union(s.combined,i),inverted:s.inverted1||s.inverted2}},selectIntersect:function(s){return{segments:t.intersect(s.combined,i),inverted:s.inverted1&&s.inverted2}},selectDifference:function(s){return{segments:t.difference(s.combined,i),inverted:s.inverted1&&!s.inverted2}},selectDifferenceRev:function(s){return{segments:t.differenceRev(s.combined,i),inverted:!s.inverted1&&s.inverted2}},selectXor:function(s){return{segments:t.xor(s.combined,i),inverted:s.inverted1!==s.inverted2}},polygon:function(s){return{regions:x(s.segments,r,i),inverted:s.inverted}},polygonFromGeoJSON:function(s){return a.toPolygon(n,s)},polygonToGeoJSON:function(s){return a.fromPolygon(n,r,s)},union:function(s,o){return d(s,o,n.selectUnion)},intersect:function(s,o){return d(s,o,n.selectIntersect)},difference:function(s,o){return d(s,o,n.selectDifference)},differenceRev:function(s,o){return d(s,o,n.selectDifferenceRev)},xor:function(s,o){return d(s,o,n.selectXor)}};function d(s,o,y){var g=n.segments(s),b=n.segments(o),v=n.combine(g,b),_=y(v);return n.polygon(_)}typeof window=="object"&&(window.PolyBool=n),B.exports=n},{"./lib/build-log":256,"./lib/epsilon":257,"./lib/geojson":258,"./lib/intersecter":259,"./lib/segment-chainer":261,"./lib/segment-selector":262}],256:[function(e,B,V){function f(){var l,m=0,x=!1;function t(a,i){return l.list.push({type:a,data:i?JSON.parse(JSON.stringify(i)):void 0}),l}return l={list:[],segmentId:function(){return m++},checkIntersection:function(a,i){return t("check",{seg1:a,seg2:i})},segmentChop:function(a,i){return t("div_seg",{seg:a,pt:i}),t("chop",{seg:a,pt:i})},statusRemove:function(a){return t("pop_seg",{seg:a})},segmentUpdate:function(a){return t("seg_update",{seg:a})},segmentNew:function(a,i){return t("new_seg",{seg:a,primary:i})},segmentRemove:function(a){return t("rem_seg",{seg:a})},tempStatus:function(a,i,r){return t("temp_status",{seg:a,above:i,below:r})},rewind:function(a){return t("rewind",{seg:a})},status:function(a,i,r){return t("status",{seg:a,above:i,below:r})},vert:function(a){return a===x?l:(x=a,t("vert",{x:a}))},log:function(a){return typeof a!="string"&&(a=JSON.stringify(a,!1,"  ")),t("log",{txt:a})},reset:function(){return t("reset")},selected:function(a){return t("selected",{segs:a})},chainStart:function(a){return t("chain_start",{seg:a})},chainRemoveHead:function(a,i){return t("chain_rem_head",{index:a,pt:i})},chainRemoveTail:function(a,i){return t("chain_rem_tail",{index:a,pt:i})},chainNew:function(a,i){return t("chain_new",{pt1:a,pt2:i})},chainMatch:function(a){return t("chain_match",{index:a})},chainClose:function(a){return t("chain_close",{index:a})},chainAddHead:function(a,i){return t("chain_add_head",{index:a,pt:i})},chainAddTail:function(a,i){return t("chain_add_tail",{index:a,pt:i})},chainConnect:function(a,i){return t("chain_con",{index1:a,index2:i})},chainReverse:function(a){return t("chain_rev",{index:a})},chainJoin:function(a,i){return t("chain_join",{index1:a,index2:i})},done:function(){return t("done")}},l}B.exports=f},{}],257:[function(e,B,V){function f(l){typeof l!="number"&&(l=1e-10);var m={epsilon:function(x){return typeof x=="number"&&(l=x),l},pointAboveOrOnLine:function(x,t,a){var i=t[0],r=t[1],n=a[0],d=a[1],s=x[0],o=x[1];return(n-i)*(o-r)-(d-r)*(s-i)>=-l},pointBetween:function(x,t,a){var i=x[1]-t[1],r=a[0]-t[0],n=x[0]-t[0],d=a[1]-t[1],s=n*r+i*d;if(s<l)return!1;var o=r*r+d*d;return!(s-o>-l)},pointsSameX:function(x,t){return Math.abs(x[0]-t[0])<l},pointsSameY:function(x,t){return Math.abs(x[1]-t[1])<l},pointsSame:function(x,t){return m.pointsSameX(x,t)&&m.pointsSameY(x,t)},pointsCompare:function(x,t){return m.pointsSameX(x,t)?m.pointsSameY(x,t)?0:x[1]<t[1]?-1:1:x[0]<t[0]?-1:1},pointsCollinear:function(x,t,a){var i=x[0]-t[0],r=x[1]-t[1],n=t[0]-a[0],d=t[1]-a[1];return Math.abs(i*d-n*r)<l},linesIntersect:function(x,t,a,i){var r=t[0]-x[0],n=t[1]-x[1],d=i[0]-a[0],s=i[1]-a[1],o=r*s-n*d;if(Math.abs(o)<l)return!1;var y=x[0]-a[0],g=x[1]-a[1],b=(d*g-s*y)/o,v=(r*g-n*y)/o,_={alongA:0,alongB:0,pt:[x[0]+b*r,x[1]+b*n]};return b<=-l?_.alongA=-2:b<l?_.alongA=-1:b-1<=-l?_.alongA=0:b-1<l?_.alongA=1:_.alongA=2,v<=-l?_.alongB=-2:v<l?_.alongB=-1:v-1<=-l?_.alongB=0:v-1<l?_.alongB=1:_.alongB=2,_},pointInsideRegion:function(x,t){for(var a=x[0],i=x[1],r=t[t.length-1][0],n=t[t.length-1][1],d=!1,s=0;s<t.length;s++){var o=t[s][0],y=t[s][1];y-i>l!=n-i>l&&(r-o)*(i-y)/(n-y)+o-a>l&&(d=!d),r=o,n=y}return d}};return m}B.exports=f},{}],258:[function(e,B,V){var f={toPolygon:function(l,m){function x(i){if(i.length<=0)return l.segments({inverted:!1,regions:[]});function r(s){var o=s.slice(0,s.length-1);return l.segments({inverted:!1,regions:[o]})}for(var n=r(i[0]),d=1;d<i.length;d++)n=l.selectDifference(l.combine(n,r(i[d])));return n}if(m.type==="Polygon")return l.polygon(x(m.coordinates));if(m.type==="MultiPolygon"){for(var t=l.segments({inverted:!1,regions:[]}),a=0;a<m.coordinates.length;a++)t=l.selectUnion(l.combine(t,x(m.coordinates[a])));return l.polygon(t)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(l,m,x){x=l.polygon(l.segments(x));function t(b,v){return m.pointInsideRegion([(b[0][0]+b[1][0])*.5,(b[0][1]+b[1][1])*.5],v)}function a(b){return{region:b,children:[]}}var i=a(null);function r(b,v){for(var _=0;_<b.children.length;_++){var u=b.children[_];if(t(v,u.region)){r(u,v);return}}for(var T=a(v),_=0;_<b.children.length;_++){var u=b.children[_];t(u.region,v)&&(T.children.push(u),b.children.splice(_,1),_--)}b.children.push(T)}for(var n=0;n<x.regions.length;n++){var d=x.regions[n];d.length<3||r(i,d)}function s(b,v){for(var _=0,u=b[b.length-1][0],T=b[b.length-1][1],c=[],A=0;A<b.length;A++){var k=b[A][0],p=b[A][1];c.push([k,p]),_+=p*u-k*T,u=k,T=p}var w=_<0;return w!==v&&c.reverse(),c.push([c[0][0],c[0][1]]),c}var o=[];function y(b){var v=[s(b.region,!1)];o.push(v);for(var _=0;_<b.children.length;_++)v.push(g(b.children[_]))}function g(b){for(var v=0;v<b.children.length;v++)y(b.children[v]);return s(b.region,!0)}for(var n=0;n<i.children.length;n++)y(i.children[n]);return o.length<=0?{type:"Polygon",coordinates:[]}:o.length==1?{type:"Polygon",coordinates:o[0]}:{type:"MultiPolygon",coordinates:o}}};B.exports=f},{}],259:[function(e,B,V){var f=e("./linked-list");function l(m,x,t){function a(_,u){return{id:t?t.segmentId():-1,start:_,end:u,myFill:{above:null,below:null},otherFill:null}}function i(_,u,T){return{id:t?t.segmentId():-1,start:_,end:u,myFill:{above:T.myFill.above,below:T.myFill.below},otherFill:null}}var r=f.create();function n(_,u,T,c,A,k){var p=x.pointsCompare(u,A);return p!==0?p:x.pointsSame(T,k)?0:_!==c?_?1:-1:x.pointAboveOrOnLine(T,c?A:k,c?k:A)?1:-1}function d(_,u){r.insertBefore(_,function(T){var c=n(_.isStart,_.pt,u,T.isStart,T.pt,T.other.pt);return c<0})}function s(_,u){var T=f.node({isStart:!0,pt:_.start,seg:_,primary:u,other:null,status:null});return d(T,_.end),T}function o(_,u,T){var c=f.node({isStart:!1,pt:u.end,seg:u,primary:T,other:_,status:null});_.other=c,d(c,_.pt)}function y(_,u){var T=s(_,u);return o(T,_,u),T}function g(_,u){t&&t.segmentChop(_.seg,u),_.other.remove(),_.seg.end=u,_.other.pt=u,d(_.other,_.pt)}function b(_,u){var T=i(u,_.seg.end,_.seg);return g(_,u),y(T,_.primary)}function v(_,u){var T=f.create();function c(U,O){var G=U.seg.start,$=U.seg.end,tt=O.seg.start,Z=O.seg.end;return x.pointsCollinear(G,tt,Z)?x.pointsCollinear($,tt,Z)||x.pointAboveOrOnLine($,tt,Z)?1:-1:x.pointAboveOrOnLine(G,tt,Z)?1:-1}function A(U){return T.findTransition(function(O){var G=c(U,O.ev);return G>0})}function k(U,O){var G=U.seg,$=O.seg,tt=G.start,Z=G.end,X=$.start,J=$.end;t&&t.checkIntersection(G,$);var st=x.linesIntersect(tt,Z,X,J);if(st===!1){if(!x.pointsCollinear(tt,Z,X)||x.pointsSame(tt,J)||x.pointsSame(Z,X))return!1;var at=x.pointsSame(tt,X),lt=x.pointsSame(Z,J);if(at&&lt)return O;var F=!at&&x.pointBetween(tt,X,J),H=!lt&&x.pointBetween(Z,X,J);if(at)return H?b(O,Z):b(U,J),O;F&&(lt||(H?b(O,Z):b(U,J)),b(O,tt))}else st.alongA===0&&(st.alongB===-1?b(U,X):st.alongB===0?b(U,st.pt):st.alongB===1&&b(U,J)),st.alongB===0&&(st.alongA===-1?b(O,tt):st.alongA===0?b(O,st.pt):st.alongA===1&&b(O,Z));return!1}for(var p=[];!r.isEmpty();){var w=r.getHead();if(t&&t.vert(w.pt[0]),w.isStart){let U=function(){if(D){var O=k(w,D);if(O)return O}return S?k(w,S):!1};var I=U;t&&t.segmentNew(w.seg,w.primary);var h=A(w),D=h.before?h.before.ev:null,S=h.after?h.after.ev:null;t&&t.tempStatus(w.seg,D?D.seg:!1,S?S.seg:!1);var M=U();if(M){if(m){var L;w.seg.myFill.below===null?L=!0:L=w.seg.myFill.above!==w.seg.myFill.below,L&&(M.seg.myFill.above=!M.seg.myFill.above)}else M.seg.otherFill=w.seg.myFill;t&&t.segmentUpdate(M.seg),w.other.remove(),w.remove()}if(r.getHead()!==w){t&&t.rewind(w.seg);continue}if(m){var L;w.seg.myFill.below===null?L=!0:L=w.seg.myFill.above!==w.seg.myFill.below,S?w.seg.myFill.below=S.seg.myFill.above:w.seg.myFill.below=_,L?w.seg.myFill.above=!w.seg.myFill.below:w.seg.myFill.above=w.seg.myFill.below}else if(w.seg.otherFill===null){var R;S?w.primary===S.primary?R=S.seg.otherFill.above:R=S.seg.myFill.above:R=w.primary?u:_,w.seg.otherFill={above:R,below:R}}t&&t.status(w.seg,D?D.seg:!1,S?S.seg:!1),w.other.status=h.insert(f.node({ev:w}))}else{var z=w.status;if(z===null)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(T.exists(z.prev)&&T.exists(z.next)&&k(z.prev.ev,z.next.ev),t&&t.statusRemove(z.ev.seg),z.remove(),!w.primary){var P=w.seg.myFill;w.seg.myFill=w.seg.otherFill,w.seg.otherFill=P}p.push(w.seg)}r.getHead().remove()}return t&&t.done(),p}return m?{addRegion:function(_){for(var u,T=_[_.length-1],c=0;c<_.length;c++){u=T,T=_[c];var A=x.pointsCompare(u,T);A!==0&&y(a(A<0?u:T,A<0?T:u),!0)}},calculate:function(_){return v(_,!1)}}:{calculate:function(_,u,T,c){return _.forEach(function(A){y(i(A.start,A.end,A),!0)}),T.forEach(function(A){y(i(A.start,A.end,A),!1)}),v(u,c)}}}B.exports=l},{"./linked-list":260}],260:[function(e,B,V){var f={create:function(){var l={root:{root:!0,next:null},exists:function(m){return!(m===null||m===l.root)},isEmpty:function(){return l.root.next===null},getHead:function(){return l.root.next},insertBefore:function(m,x){for(var t=l.root,a=l.root.next;a!==null;){if(x(a)){m.prev=a.prev,m.next=a,a.prev.next=m,a.prev=m;return}t=a,a=a.next}t.next=m,m.prev=t,m.next=null},findTransition:function(m){for(var x=l.root,t=l.root.next;t!==null&&!m(t);)x=t,t=t.next;return{before:x===l.root?null:x,after:t,insert:function(a){return a.prev=x,a.next=t,x.next=a,t!==null&&(t.prev=a),a}}}};return l},node:function(l){return l.prev=null,l.next=null,l.remove=function(){l.prev.next=l.next,l.next&&(l.next.prev=l.prev),l.prev=null,l.next=null},l}};B.exports=f},{}],261:[function(e,B,V){function f(l,m,x){var t=[],a=[];return l.forEach(function(i){var r=i.start,n=i.end;if(m.pointsSame(r,n)){console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");return}x&&x.chainStart(i);var d={index:0,matches_head:!1,matches_pt1:!1},s={index:0,matches_head:!1,matches_pt1:!1},o=d;function y(R,z,P){return o.index=R,o.matches_head=z,o.matches_pt1=P,o===d?(o=s,!1):(o=null,!0)}for(var g=0;g<t.length;g++){var b=t[g],v=b[0];b[1];var _=b[b.length-1];if(b[b.length-2],m.pointsSame(v,r)){if(y(g,!0,!0))break}else if(m.pointsSame(v,n)){if(y(g,!0,!1))break}else if(m.pointsSame(_,r)){if(y(g,!1,!0))break}else if(m.pointsSame(_,n)&&y(g,!1,!1))break}if(o===d){t.push([r,n]),x&&x.chainNew(r,n);return}if(o===s){x&&x.chainMatch(d.index);var u=d.index,T=d.matches_pt1?n:r,c=d.matches_head,b=t[u],A=c?b[0]:b[b.length-1],k=c?b[1]:b[b.length-2],p=c?b[b.length-1]:b[0],w=c?b[b.length-2]:b[1];if(m.pointsCollinear(k,A,T)&&(c?(x&&x.chainRemoveHead(d.index,T),b.shift()):(x&&x.chainRemoveTail(d.index,T),b.pop()),A=k),m.pointsSame(p,T)){t.splice(u,1),m.pointsCollinear(w,p,A)&&(c?(x&&x.chainRemoveTail(d.index,A),b.pop()):(x&&x.chainRemoveHead(d.index,A),b.shift())),x&&x.chainClose(d.index),a.push(b);return}c?(x&&x.chainAddHead(d.index,T),b.unshift(T)):(x&&x.chainAddTail(d.index,T),b.push(T));return}function h(R){x&&x.chainReverse(R),t[R].reverse()}function D(R,z){var P=t[R],I=t[z],U=P[P.length-1],O=P[P.length-2],G=I[0],$=I[1];m.pointsCollinear(O,U,G)&&(x&&x.chainRemoveTail(R,U),P.pop(),U=O),m.pointsCollinear(U,G,$)&&(x&&x.chainRemoveHead(z,G),I.shift()),x&&x.chainJoin(R,z),t[R]=P.concat(I),t.splice(z,1)}var S=d.index,M=s.index;x&&x.chainConnect(S,M);var L=t[S].length<t[M].length;d.matches_head?s.matches_head?L?(h(S),D(S,M)):(h(M),D(M,S)):D(M,S):s.matches_head?D(S,M):L?(h(S),D(M,S)):(h(M),D(S,M))}),a}B.exports=f},{}],262:[function(e,B,V){function f(m,x,t){var a=[];return m.forEach(function(i){var r=(i.myFill.above?8:0)+(i.myFill.below?4:0)+(i.otherFill&&i.otherFill.above?2:0)+(i.otherFill&&i.otherFill.below?1:0);x[r]!==0&&a.push({id:t?t.segmentId():-1,start:i.start,end:i.end,myFill:{above:x[r]===1,below:x[r]===2},otherFill:null})}),t&&t.selected(a),a}var l={union:function(m,x){return f(m,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],x)},intersect:function(m,x){return f(m,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],x)},difference:function(m,x){return f(m,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],x)},differenceRev:function(m,x){return f(m,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],x)},xor:function(m,x){return f(m,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],x)}};B.exports=l},{}],263:[function(e,B,V){var f=e("stream").Transform,l=e("stream-parser");function m(){f.call(this,{readableObjectMode:!0})}m.prototype=Object.create(f.prototype),m.prototype.constructor=m,l(m.prototype),V.ParserStream=m,V.sliceEq=function(t,a,i){for(var r=a,n=0;n<i.length;)if(t[r++]!==i[n++])return!1;return!0},V.str2arr=function(t,a){var i=[],r=0;if(a&&a==="hex")for(;r<t.length;)i.push(parseInt(t.slice(r,r+2),16)),r+=2;else for(;r<t.length;r++)i.push(t.charCodeAt(r)&255);return i},V.readUInt16LE=function(t,a){return t[a]|t[a+1]<<8},V.readUInt16BE=function(t,a){return t[a+1]|t[a]<<8},V.readUInt32LE=function(t,a){return t[a]|t[a+1]<<8|t[a+2]<<16|t[a+3]*16777216},V.readUInt32BE=function(t,a){return t[a+3]|t[a+2]<<8|t[a+1]<<16|t[a]*16777216};function x(t,a,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||"",this.name=this.constructor.name,this.message=t,a&&(this.code=a),i&&(this.statusCode=i)}x.prototype=Object.create(Error.prototype),x.prototype.constructor=x,V.ProbeError=x},{stream:286,"stream-parser":302}],264:[function(e,B,V){function f(x,t){var a=new Error(x);return a.code=t,a}function l(x){try{return decodeURIComponent(escape(x))}catch{return x}}function m(x,t,a){this.input=x.subarray(t,a),this.start=t;var i=String.fromCharCode.apply(null,this.input.subarray(0,4));if(i!=="II*\0"&&i!=="MM\0*")throw f("invalid TIFF signature","EBADDATA");this.big_endian=i[0]==="M"}m.prototype.each=function(x){this.aborted=!1;var t=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:t}];this.ifds_to_read.length>0&&!this.aborted;){var a=this.ifds_to_read.shift();!a.offset||this.scan_ifd(a.id,a.offset,x)}},m.prototype.read_uint16=function(x){var t=this.input;if(x+2>t.length)throw f("unexpected EOF","EBADDATA");return this.big_endian?t[x]*256+t[x+1]:t[x]+t[x+1]*256},m.prototype.read_uint32=function(x){var t=this.input;if(x+4>t.length)throw f("unexpected EOF","EBADDATA");return this.big_endian?t[x]*16777216+t[x+1]*65536+t[x+2]*256+t[x+3]:t[x]+t[x+1]*256+t[x+2]*65536+t[x+3]*16777216},m.prototype.is_subifd_link=function(x,t){return x===0&&t===34665||x===0&&t===34853||x===34665&&t===40965},m.prototype.exif_format_length=function(x){switch(x){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},m.prototype.exif_format_read=function(x,t){var a;switch(x){case 1:case 2:return a=this.input[t],a;case 6:return a=this.input[t],a|(a&128)*33554430;case 3:return a=this.read_uint16(t),a;case 8:return a=this.read_uint16(t),a|(a&32768)*131070;case 4:return a=this.read_uint32(t),a;case 9:return a=this.read_uint32(t),a|0;case 5:case 10:case 11:case 12:return null;case 7:return null;default:return null}},m.prototype.scan_ifd=function(x,t,a){var i=this.read_uint16(t);t+=2;for(var r=0;r<i;r++){var n=this.read_uint16(t),d=this.read_uint16(t+2),s=this.read_uint32(t+4),o=this.exif_format_length(d),y=s*o,g=y<=4?t+8:this.read_uint32(t+8),b=!1;if(g+y>this.input.length)throw f("unexpected EOF","EBADDATA");for(var v=[],_=g,u=0;u<s;u++,_+=o){var T=this.exif_format_read(d,_);if(T===null){v=null;break}v.push(T)}Array.isArray(v)&&d===2&&(v=l(String.fromCharCode.apply(null,v)),v&&v[v.length-1]==="\0"&&(v=v.slice(0,-1))),this.is_subifd_link(x,n)&&Array.isArray(v)&&Number.isInteger(v[0])&&v[0]>0&&(this.ifds_to_read.push({id:n,offset:v[0]}),b=!0);var c={is_big_endian:this.big_endian,ifd:x,tag:n,format:d,count:s,entry_offset:t+this.start,data_length:y,data_offset:g+this.start,value:v,is_subifd_link:b};if(a(c)===!1){this.aborted=!0;return}t+=12}x===0&&this.ifds_to_read.push({id:1,offset:this.read_uint32(t)})},B.exports.ExifParser=m,B.exports.get_orientation=function(x){var t=0;try{return new m(x,0,x.length).each(function(a){if(a.ifd===0&&a.tag===274&&Array.isArray(a.value))return t=a.value[0],!1}),t}catch{return-1}}},{}],265:[function(e,B,V){var f=e("./common").readUInt16BE,l=e("./common").readUInt32BE;function m(s,o){if(s.length<4+o)return null;var y=l(s,o);return s.length<y+o||y<8?null:{boxtype:String.fromCharCode.apply(null,s.slice(o+4,o+8)),data:s.slice(o+8,o+y),end:o+y}}B.exports.unbox=m;function x(s,o){for(var y=0;;){var g=m(s,y);if(!g)break;switch(g.boxtype){case"ispe":o.sizes.push({width:l(g.data,4),height:l(g.data,8)});break;case"irot":o.transforms.push({type:"irot",value:g.data[0]&3});break;case"imir":o.transforms.push({type:"imir",value:g.data[0]&1});break}y=g.end}}function t(s,o,y){for(var g=0,b=0;b<y;b++)g=g*256+(s[o+b]||0);return g}function a(s,o){for(var y=s[4]>>4&15,g=s[4]&15,b=s[5]>>4&15,v=f(s,6),_=8,u=0;u<v;u++){var T=f(s,_);_+=2;var c=f(s,_);_+=2;var A=t(s,_,b);_+=b;var k=f(s,_);if(_+=2,c===0&&k===1){var p=t(s,_,y),w=t(s,_+y,g);o.item_loc[T]={length:w,offset:p+A}}_+=k*(y+g)}}function i(s,o){for(var y=f(s,4),g=6,b=0;b<y;b++){var v=m(s,g);if(!v)break;if(v.boxtype==="infe"){for(var _=f(v.data,4),u="",T=8;T<v.data.length&&v.data[T];T++)u+=String.fromCharCode(v.data[T]);o.item_inf[u]=_}g=v.end}}function r(s,o){for(var y=0;;){var g=m(s,y);if(!g)break;g.boxtype==="ipco"&&x(g.data,o),y=g.end}}function n(s,o){for(var y=4;;){var g=m(s,y);if(!g)break;g.boxtype==="iprp"&&r(g.data,o),g.boxtype==="iloc"&&a(g.data,o),g.boxtype==="iinf"&&i(g.data,o),y=g.end}}function d(s){var o=s.reduce(function(b,v){return b.width>v.width||b.width===v.width&&b.height>v.height?b:v}),y=s.reduce(function(b,v){return b.height>v.height||b.height===v.height&&b.width>v.width?b:v}),g;return o.width>y.height||o.width===y.height&&o.height>y.width?g=o:g=y,g}B.exports.readSizeFromMeta=function(s){var o={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(n(s,o),!!o.sizes.length){var y=d(o.sizes),g=1;o.transforms.forEach(function(v){var _={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},u={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if(v.type==="imir"&&(v.value===0?g=u[g]:(g=u[g],g=_[g],g=_[g])),v.type==="irot")for(var T=0;T<v.value;T++)g=_[g]});var b=null;return o.item_inf.Exif&&(b=o.item_loc[o.item_inf.Exif]),{width:y.width,height:y.height,orientation:o.transforms.length?g:null,variants:o.sizes,exif_location:b}}},B.exports.getMimeType=function(s){var o=String.fromCharCode.apply(null,s.slice(0,4)),y={};y[o]=!0;for(var g=8;g<s.length;g+=4)y[String.fromCharCode.apply(null,s.slice(g,g+4))]=!0;if(!(!y.mif1&&!y.msf1&&!y.miaf))return o==="avif"||o==="avis"||o==="avio"?{type:"avif",mime:"image/avif"}:o==="heic"||o==="heix"?{type:"heic",mime:"image/heic"}:o==="hevc"||o==="hevx"?{type:"heic",mime:"image/heic-sequence"}:y.avif||y.avis?{type:"avif",mime:"image/avif"}:y.heic||y.heix||y.hevc||y.hevx||y.heis?y.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}},{"./common":263}],266:[function(e,B,V){var f=e("../common").str2arr,l=e("../common").sliceEq,m=e("../common").readUInt32BE,x=e("../miaf_utils"),t=e("../exif_utils"),a=f("ftyp");B.exports=function(i){if(!!l(i,4,a)){var r=x.unbox(i,0);if(!!r){var n=x.getMimeType(r.data);if(!!n){for(var d,s=r.end;;){var o=x.unbox(i,s);if(!o)break;if(s=o.end,o.boxtype==="mdat")return;if(o.boxtype==="meta"){d=o.data;break}}if(!!d){var y=x.readSizeFromMeta(d);if(!!y){var g={width:y.width,height:y.height,type:n.type,mime:n.mime,wUnits:"px",hUnits:"px"};if(y.variants.length>1&&(g.variants=y.variants),y.orientation&&(g.orientation=y.orientation),y.exif_location&&y.exif_location.offset+y.exif_location.length<=i.length){var b=m(i,y.exif_location.offset),v=i.slice(y.exif_location.offset+b+4,y.exif_location.offset+y.exif_location.length),_=t.get_orientation(v);_>0&&(g.orientation=_)}return g}}}}}}},{"../common":263,"../exif_utils":264,"../miaf_utils":265}],267:[function(e,B,V){var f=e("../common").str2arr,l=e("../common").sliceEq,m=e("../common").readUInt16LE,x=f("BM");B.exports=function(t){if(!(t.length<26)&&!!l(t,0,x))return{width:m(t,18),height:m(t,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},{"../common":263}],268:[function(e,B,V){var f=e("../common").str2arr,l=e("../common").sliceEq,m=e("../common").readUInt16LE,x=f("GIF87a"),t=f("GIF89a");B.exports=function(a){if(!(a.length<10)&&!(!l(a,0,x)&&!l(a,0,t)))return{width:m(a,6),height:m(a,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},{"../common":263}],269:[function(e,B,V){var f=e("../common").readUInt16LE,l=0,m=1,x=16;B.exports=function(t){var a=f(t,0),i=f(t,2),r=f(t,4);if(!(a!==l||i!==m||!r)){for(var n=[],d={width:0,height:0},s=0;s<r;s++){var o=t[6+x*s]||256,y=t[6+x*s+1]||256,g={width:o,height:y};n.push(g),(o>d.width||y>d.height)&&(d=g)}return{width:d.width,height:d.height,variants:n,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}},{"../common":263}],270:[function(e,B,V){var f=e("../common").readUInt16BE,l=e("../common").str2arr,m=e("../common").sliceEq,x=e("../exif_utils"),t=l("Exif\0\0");B.exports=function(a){if(!(a.length<2)&&!(a[0]!==255||a[1]!==216||a[2]!==255))for(var i=2;;){for(;;){if(a.length-i<2)return;if(a[i++]===255)break}for(var r=a[i++],n;r===255;)r=a[i++];if(208<=r&&r<=217||r===1)n=0;else if(192<=r&&r<=254){if(a.length-i<2)return;n=f(a,i)-2,i+=2}else return;if(r===217||r===218)return;var d;if(r===225&&n>=10&&m(a,i,t)&&(d=x.get_orientation(a.slice(i+6,i+n))),n>=5&&192<=r&&r<=207&&r!==196&&r!==200&&r!==204){if(a.length-i<n)return;var s={width:f(a,i+3),height:f(a,i+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return d>0&&(s.orientation=d),s}i+=n}}},{"../common":263,"../exif_utils":264}],271:[function(e,B,V){var f=e("../common").str2arr,l=e("../common").sliceEq,m=e("../common").readUInt32BE,x=f(`\x89PNG\r

`),t=f("IHDR");B.exports=function(a){if(!(a.length<24)&&!!l(a,0,x)&&!!l(a,12,t))return{width:m(a,16),height:m(a,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},{"../common":263}],272:[function(e,B,V){var f=e("../common").str2arr,l=e("../common").sliceEq,m=e("../common").readUInt32BE,x=f("8BPS\0");B.exports=function(t){if(!(t.length<6+16)&&!!l(t,0,x))return{width:m(t,6+12),height:m(t,6+8),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},{"../common":263}],273:[function(e,B,V){function f(o){return o===32||o===9||o===13||o===10}function l(o){return typeof o=="number"&&isFinite(o)&&o>0}function m(o){var y=0,g=o.length;for(o[0]===239&&o[1]===187&&o[2]===191&&(y=3);y<g&&f(o[y]);)y++;return y===g?!1:o[y]===60}var x=/<[-_.:a-zA-Z0-9][^>]*>/,t=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,a=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,i=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,r=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,n=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function d(o){var y=o.match(a),g=o.match(i),b=o.match(r);return{width:y&&(y[1]||y[2]),height:g&&(g[1]||g[2]),viewbox:b&&(b[1]||b[2])}}function s(o){return n.test(o)?o.match(n)[0]:"px"}B.exports=function(o){if(!!m(o)){for(var y="",g=0;g<o.length;g++)y+=String.fromCharCode(o[g]);var b=(y.match(x)||[""])[0];if(!!t.test(b)){var v=d(b),_=parseFloat(v.width),u=parseFloat(v.height);if(v.width&&v.height)return!l(_)||!l(u)?void 0:{width:_,height:u,type:"svg",mime:"image/svg+xml",wUnits:s(v.width),hUnits:s(v.height)};var T=(v.viewbox||"").split(" "),c={width:T[2],height:T[3]},A=parseFloat(c.width),k=parseFloat(c.height);if(!(!l(A)||!l(k))&&s(c.width)===s(c.height)){var p=A/k;return v.width?l(_)?{width:_,height:_/p,type:"svg",mime:"image/svg+xml",wUnits:s(v.width),hUnits:s(v.width)}:void 0:v.height?l(u)?{width:u*p,height:u,type:"svg",mime:"image/svg+xml",wUnits:s(v.height),hUnits:s(v.height)}:void 0:{width:A,height:k,type:"svg",mime:"image/svg+xml",wUnits:s(c.width),hUnits:s(c.height)}}}}}},{}],274:[function(e,B,V){var f=e("../common").str2arr,l=e("../common").sliceEq,m=e("../common").readUInt16LE,x=e("../common").readUInt16BE,t=e("../common").readUInt32LE,a=e("../common").readUInt32BE,i=f("II*\0"),r=f("MM\0*");function n(o,y,g){return g?x(o,y):m(o,y)}function d(o,y,g){return g?a(o,y):t(o,y)}function s(o,y,g){var b=n(o,y+2,g),v=d(o,y+4,g);return v!==1||b!==3&&b!==4?null:b===3?n(o,y+8,g):d(o,y+8,g)}B.exports=function(o){if(!(o.length<8)&&!(!l(o,0,i)&&!l(o,0,r))){var y=o[0]===77,g=d(o,4,y)-8;if(!(g<0)){var b=g+8;if(!(o.length-b<2)){var v=n(o,b+0,y)*12;if(!(v<=0)&&(b+=2,!(o.length-b<v))){var _,u,T,c;for(_=0;_<v;_+=12)c=n(o,b+_,y),c===256?u=s(o,b+_,y):c===257&&(T=s(o,b+_,y));if(u&&T)return{width:u,height:T,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}}}}}}},{"../common":263}],275:[function(e,B,V){var f=e("../common").str2arr,l=e("../common").sliceEq,m=e("../common").readUInt16LE,x=e("../common").readUInt32LE,t=e("../exif_utils"),a=f("RIFF"),i=f("WEBP");function r(s,o){if(!(s[o+3]!==157||s[o+4]!==1||s[o+5]!==42))return{width:m(s,o+6)&16383,height:m(s,o+8)&16383,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function n(s,o){if(s[o]===47){var y=x(s,o+1);return{width:(y&16383)+1,height:(y>>14&16383)+1,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}function d(s,o){return{width:(s[o+6]<<16|s[o+5]<<8|s[o+4])+1,height:(s[o+9]<<o|s[o+8]<<8|s[o+7])+1,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}B.exports=function(s){if(!(s.length<16)&&!(!l(s,0,a)&&!l(s,8,i))){var o=12,y=null,g=0,b=x(s,4)+8;if(!(b>s.length)){for(;o+8<b;){if(s[o]===0){o++;continue}var v=String.fromCharCode.apply(null,s.slice(o,o+4)),_=x(s,o+4);v==="VP8 "&&_>=10?y=y||r(s,o+8):v==="VP8L"&&_>=9?y=y||n(s,o+8):v==="VP8X"&&_>=10?y=y||d(s,o+8):v==="EXIF"&&(g=t.get_orientation(s.slice(o+8,o+8+_)),o=1/0),o+=8+_}if(!!y)return g>0&&(y.orientation=g),y}}}},{"../common":263,"../exif_utils":264}],276:[function(e,B,V){B.exports={avif:e("./parse_sync/avif"),bmp:e("./parse_sync/bmp"),gif:e("./parse_sync/gif"),ico:e("./parse_sync/ico"),jpeg:e("./parse_sync/jpeg"),png:e("./parse_sync/png"),psd:e("./parse_sync/psd"),svg:e("./parse_sync/svg"),tiff:e("./parse_sync/tiff"),webp:e("./parse_sync/webp")}},{"./parse_sync/avif":266,"./parse_sync/bmp":267,"./parse_sync/gif":268,"./parse_sync/ico":269,"./parse_sync/jpeg":270,"./parse_sync/png":271,"./parse_sync/psd":272,"./parse_sync/svg":273,"./parse_sync/tiff":274,"./parse_sync/webp":275}],277:[function(e,B,V){var f=e("./lib/parsers_sync");function l(m){for(var x=Object.keys(f),t=0;t<x.length;t++){var a=f[x[t]](m);if(a)return a}return null}B.exports=function(x){return l(x)},B.exports.parsers=f},{"./lib/parsers_sync":276}],278:[function(e,B,V){var f=B.exports={},l,m;function x(){throw new Error("setTimeout has not been defined")}function t(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?l=setTimeout:l=x}catch{l=x}try{typeof clearTimeout=="function"?m=clearTimeout:m=t}catch{m=t}})();function a(v){if(l===setTimeout)return setTimeout(v,0);if((l===x||!l)&&setTimeout)return l=setTimeout,setTimeout(v,0);try{return l(v,0)}catch{try{return l.call(null,v,0)}catch{return l.call(this,v,0)}}}function i(v){if(m===clearTimeout)return clearTimeout(v);if((m===t||!m)&&clearTimeout)return m=clearTimeout,clearTimeout(v);try{return m(v)}catch{try{return m.call(null,v)}catch{return m.call(this,v)}}}var r=[],n=!1,d,s=-1;function o(){!n||!d||(n=!1,d.length?r=d.concat(r):s=-1,r.length&&y())}function y(){if(!n){var v=a(o);n=!0;for(var _=r.length;_;){for(d=r,r=[];++s<_;)d&&d[s].run();s=-1,_=r.length}d=null,n=!1,i(v)}}f.nextTick=function(v){var _=new Array(arguments.length-1);if(arguments.length>1)for(var u=1;u<arguments.length;u++)_[u-1]=arguments[u];r.push(new g(v,_)),r.length===1&&!n&&a(y)};function g(v,_){this.fun=v,this.array=_}g.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={};function b(){}f.on=b,f.addListener=b,f.once=b,f.off=b,f.removeListener=b,f.removeAllListeners=b,f.emit=b,f.prependListener=b,f.prependOnceListener=b,f.listeners=function(v){return[]},f.binding=function(v){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(v){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},{}],279:[function(e,B,V){(function(f){(function(){for(var l=e("performance-now"),m=typeof window>"u"?f:window,x=["moz","webkit"],t="AnimationFrame",a=m["request"+t],i=m["cancel"+t]||m["cancelRequest"+t],r=0;!a&&r<x.length;r++)a=m[x[r]+"Request"+t],i=m[x[r]+"Cancel"+t]||m[x[r]+"CancelRequest"+t];if(!a||!i){var n=0,d=0,s=[],o=1e3/60;a=function(y){if(s.length===0){var g=l(),b=Math.max(0,o-(g-n));n=b+g,setTimeout(function(){var v=s.slice(0);s.length=0;for(var _=0;_<v.length;_++)if(!v[_].cancelled)try{v[_].callback(n)}catch(u){setTimeout(function(){throw u},0)}},Math.round(b))}return s.push({handle:++d,callback:y,cancelled:!1}),d},i=function(y){for(var g=0;g<s.length;g++)s[g].handle===y&&(s[g].cancelled=!0)}}B.exports=function(y){return a.call(m,y)},B.exports.cancel=function(){i.apply(m,arguments)},B.exports.polyfill=function(y){y||(y=m),y.requestAnimationFrame=a,y.cancelAnimationFrame=i}}).call(this)}).call(this,typeof zo<"u"?zo:typeof self<"u"?self:typeof window<"u"?window:{})},{"performance-now":252}],280:[function(e,B,V){var f=e("array-bounds"),l=e("color-normalize"),m=e("update-diff"),x=e("pick-by-alias"),t=e("object-assign"),a=e("flatten-vertex-data"),i=e("to-float32"),r=i.float32,n=i.fract32;B.exports=s;var d=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]];function s(o,y){if(typeof o=="function"?(y||(y={}),y.regl=o):y=o,y.length&&(y.positions=y),o=y.regl,!o.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var g=o._gl,b,v,_,u,T,c,A={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},k=[];return u=o.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),v=o.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),_=o.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),T=o.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),c=o.buffer({usage:"static",type:"float",data:d}),D(y),b=o({vert:`
		precision highp float;

		attribute vec2 position, positionFract;
		attribute vec4 error;
		attribute vec4 color;

		attribute vec2 direction, lineOffset, capOffset;

		uniform vec4 viewport;
		uniform float lineWidth, capSize;
		uniform vec2 scale, scaleFract, translate, translateFract;

		varying vec4 fragColor;

		void main() {
			fragColor = color / 255.;

			vec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;

			vec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;

			vec2 position = position + dxy;

			vec2 pos = (position + translate) * scale
				+ (positionFract + translateFract) * scale
				+ (position + translate) * scaleFract
				+ (positionFract + translateFract) * scaleFract;

			pos += pixelOffset / viewport.zw;

			gl_Position = vec4(pos * 2. - 1., 0, 1);
		}
		`,frag:`
		precision highp float;

		varying vec4 fragColor;

		uniform float opacity;

		void main() {
			gl_FragColor = fragColor;
			gl_FragColor.a *= opacity;
		}
		`,uniforms:{range:o.prop("range"),lineWidth:o.prop("lineWidth"),capSize:o.prop("capSize"),opacity:o.prop("opacity"),scale:o.prop("scale"),translate:o.prop("translate"),scaleFract:o.prop("scaleFract"),translateFract:o.prop("translateFract"),viewport:function(M,L){return[L.viewport.x,L.viewport.y,M.viewportWidth,M.viewportHeight]}},attributes:{color:{buffer:u,offset:function(M,L){return L.offset*4},divisor:1},position:{buffer:v,offset:function(M,L){return L.offset*8},divisor:1},positionFract:{buffer:_,offset:function(M,L){return L.offset*8},divisor:1},error:{buffer:T,offset:function(M,L){return L.offset*16},divisor:1},direction:{buffer:c,stride:24,offset:0},lineOffset:{buffer:c,stride:24,offset:8},capOffset:{buffer:c,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:o.prop("viewport")},viewport:o.prop("viewport"),stencil:!1,instances:o.prop("count"),count:d.length}),t(p,{update:D,draw:w,destroy:S,regl:o,gl:g,canvas:g.canvas,groups:k}),p;function p(M){M?D(M):M===null&&S(),w()}function w(M){if(typeof M=="number")return h(M);M&&!Array.isArray(M)&&(M=[M]),o._refresh(),k.forEach(function(L,R){if(!!L){if(M&&(M[R]?L.draw=!0:L.draw=!1),!L.draw){L.draw=!0;return}h(R)}})}function h(M){typeof M=="number"&&(M=k[M]),M!=null&&(!(M&&M.count&&M.color&&M.opacity&&M.positions&&M.positions.length>1)||(M.scaleRatio=[M.scale[0]*M.viewport.width,M.scale[1]*M.viewport.height],b(M),M.after&&M.after(M)))}function D(M){if(!!M){M.length!=null?typeof M[0]=="number"&&(M=[{positions:M}]):Array.isArray(M)||(M=[M]);var L=0,R=0;if(p.groups=k=M.map(function($,tt){var Z=k[tt];if($)typeof $=="function"?$={after:$}:typeof $[0]=="number"&&($={positions:$});else return Z;return $=x($,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),Z||(k[tt]=Z={id:tt,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},$=t({},A,$)),m(Z,$,[{lineWidth:function(X){return+X*.5},capSize:function(X){return+X*.5},opacity:parseFloat,errors:function(X){return X=a(X),R+=X.length,X},positions:function(X,J){return X=a(X,"float64"),J.count=Math.floor(X.length/2),J.bounds=f(X,2),J.offset=L,L+=J.count,X}},{color:function(X,J){var st=J.count;if(X||(X="transparent"),!Array.isArray(X)||typeof X[0]=="number"){var at=X;X=Array(st);for(var lt=0;lt<st;lt++)X[lt]=at}if(X.length<st)throw Error("Not enough colors");for(var F=new Uint8Array(st*4),H=0;H<st;H++){var et=l(X[H],"uint8");F.set(et,H*4)}return F},range:function(X,J,st){var at=J.bounds;return X||(X=at),J.scale=[1/(X[2]-X[0]),1/(X[3]-X[1])],J.translate=[-X[0],-X[1]],J.scaleFract=n(J.scale),J.translateFract=n(J.translate),X},viewport:function(X){var J;return Array.isArray(X)?J={x:X[0],y:X[1],width:X[2]-X[0],height:X[3]-X[1]}:X?(J={x:X.x||X.left||0,y:X.y||X.top||0},X.right?J.width=X.right-J.x:J.width=X.w||X.width||0,X.bottom?J.height=X.bottom-J.y:J.height=X.h||X.height||0):J={x:0,y:0,width:g.drawingBufferWidth,height:g.drawingBufferHeight},J}}]),Z}),L||R){var z=k.reduce(function($,tt,Z){return $+(tt?tt.count:0)},0),P=new Float64Array(z*2),I=new Uint8Array(z*4),U=new Float32Array(z*4);k.forEach(function($,tt){if(!!$){var Z=$.positions,X=$.count,J=$.offset,st=$.color,at=$.errors;!X||(I.set(st,J*4),U.set(at,J*4),P.set(Z,J*2))}});var O=r(P);v(O);var G=n(P,O);_(G),u(I),T(U)}}}function S(){v.destroy(),_.destroy(),u.destroy(),T.destroy(),c.destroy()}}},{"array-bounds":71,"color-normalize":89,"flatten-vertex-data":191,"object-assign":247,"pick-by-alias":253,"to-float32":314,"update-diff":330}],281:[function(e,B,V){var f=e("color-normalize"),l=e("array-bounds"),m=e("object-assign"),x=e("glslify"),t=e("pick-by-alias"),a=e("flatten-vertex-data"),i=e("earcut"),r=e("array-normalize"),n=e("to-float32"),d=n.float32,s=n.fract32,o=e("es6-weak-map"),y=e("parse-rect"),g=e("array-find-index");B.exports=b;function b(v,_){if(!(this instanceof b))return new b(v,_);if(typeof v=="function"?(_||(_={}),_.regl=v):_=v,_.length&&(_.positions=_),v=_.regl,!v.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=v._gl,this.regl=v,this.passes=[],this.shaders=b.shaders.has(v)?b.shaders.get(v):b.shaders.set(v,b.createShaders(v)).get(v),this.update(_)}b.dashMult=2,b.maxPatternLength=256,b.precisionThreshold=3e6,b.maxPoints=1e4,b.maxLines=2048,b.shaders=new o,b.createShaders=function(v){var _=v.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),u={primitive:"triangle strip",instances:v.prop("count"),count:4,offset:0,uniforms:{miterMode:function(k,p){return p.join==="round"?2:1},miterLimit:v.prop("miterLimit"),scale:v.prop("scale"),scaleFract:v.prop("scaleFract"),translateFract:v.prop("translateFract"),translate:v.prop("translate"),thickness:v.prop("thickness"),dashTexture:v.prop("dashTexture"),opacity:v.prop("opacity"),pixelRatio:v.context("pixelRatio"),id:v.prop("id"),dashLength:v.prop("dashLength"),viewport:function(k,p){return[p.viewport.x,p.viewport.y,k.viewportWidth,k.viewportHeight]},depth:v.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(k,p){return!p.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:v.prop("viewport")},viewport:v.prop("viewport")},T=v(m({vert:x([`precision highp float;
#define GLSLIFY 1

attribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;
attribute vec4 color;
attribute float lineEnd, lineTop;

uniform vec2 scale, scaleFract, translate, translateFract;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;

varying vec4 fragColor;
varying vec2 tangent;

vec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {
	// the order is important
	return position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;
}

void main() {
	float lineStart = 1. - lineEnd;
	float lineOffset = lineTop * 2. - 1.;

	vec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);
	tangent = normalize(diff * scale * viewport.zw);
	vec2 normal = vec2(-tangent.y, tangent.x);

	vec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart
		+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd

		+ thickness * normal * .5 * lineOffset / viewport.zw;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
}
`]),frag:x([`precision highp float;
#define GLSLIFY 1

uniform float dashLength, pixelRatio, thickness, opacity, id;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;

void main() {
	float alpha = 1.;

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`]),attributes:{lineEnd:{buffer:_,divisor:0,stride:8,offset:0},lineTop:{buffer:_,divisor:0,stride:8,offset:4},aCoord:{buffer:v.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:v.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:v.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:v.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:v.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},u)),c;try{c=v(m({cull:{enable:!0,face:"back"},vert:x([`precision highp float;
#define GLSLIFY 1

attribute vec2 aCoord, bCoord, nextCoord, prevCoord;
attribute vec4 aColor, bColor;
attribute float lineEnd, lineTop;

uniform vec2 scale, translate;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;
uniform float miterLimit, miterMode;

varying vec4 fragColor;
varying vec4 startCutoff, endCutoff;
varying vec2 tangent;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

const float REVERSE_THRESHOLD = -.875;
const float MIN_DIFF = 1e-6;

// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead
// TODO: precalculate dot products, normalize things beforehead etc.
// TODO: refactor to rectangular algorithm

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

bool isNaN( float val ){
  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;
}

void main() {
	vec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;

  vec2 adjustedScale;
  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;
  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;

  vec2 scaleRatio = adjustedScale * viewport.zw;
	vec2 normalWidth = thickness / scaleRatio;

	float lineStart = 1. - lineEnd;
	float lineBot = 1. - lineTop;

	fragColor = (lineStart * aColor + lineEnd * bColor) / 255.;

	if (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;

	if (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);
	if (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);

	vec2 prevDiff = aCoord - prevCoord;
	vec2 currDiff = bCoord - aCoord;
	vec2 nextDiff = nextCoord - bCoord;

	vec2 prevTangent = normalize(prevDiff * scaleRatio);
	vec2 currTangent = normalize(currDiff * scaleRatio);
	vec2 nextTangent = normalize(nextDiff * scaleRatio);

	vec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);
	vec2 currNormal = vec2(-currTangent.y, currTangent.x);
	vec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);

	vec2 startJoinDirection = normalize(prevTangent - currTangent);
	vec2 endJoinDirection = normalize(currTangent - nextTangent);

	// collapsed/unidirectional segment cases
	// FIXME: there should be more elegant solution
	vec2 prevTanDiff = abs(prevTangent - currTangent);
	vec2 nextTanDiff = abs(nextTangent - currTangent);
	if (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {
		startJoinDirection = currNormal;
	}
	if (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {
		endJoinDirection = currNormal;
	}
	if (aCoord == bCoord) {
		endJoinDirection = startJoinDirection;
		currNormal = prevNormal;
		currTangent = prevTangent;
	}

	tangent = currTangent;

	//calculate join shifts relative to normals
	float startJoinShift = dot(currNormal, startJoinDirection);
	float endJoinShift = dot(currNormal, endJoinDirection);

	float startMiterRatio = abs(1. / startJoinShift);
	float endMiterRatio = abs(1. / endJoinShift);

	vec2 startJoin = startJoinDirection * startMiterRatio;
	vec2 endJoin = endJoinDirection * endMiterRatio;

	vec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;
	startTopJoin = sign(startJoinShift) * startJoin * .5;
	startBotJoin = -startTopJoin;

	endTopJoin = sign(endJoinShift) * endJoin * .5;
	endBotJoin = -endTopJoin;

	vec2 aTopCoord = aCoord + normalWidth * startTopJoin;
	vec2 bTopCoord = bCoord + normalWidth * endTopJoin;
	vec2 aBotCoord = aCoord + normalWidth * startBotJoin;
	vec2 bBotCoord = bCoord + normalWidth * endBotJoin;

	//miter anti-clipping
	float baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));
	float abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));

	//prevent close to reverse direction switch
	bool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);
	bool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);

	if (prevReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);
		aBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		aTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {
		//handle miter clipping
		bTopCoord -= normalWidth * endTopJoin;
		bTopCoord += normalize(endTopJoin * normalWidth) * baClipping;
	}

	if (nextReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);
		bBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		bTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {
		//handle miter clipping
		aBotCoord -= normalWidth * startBotJoin;
		aBotCoord += normalize(startBotJoin * normalWidth) * abClipping;
	}

	vec2 aTopPosition = (aTopCoord) * adjustedScale + translate;
	vec2 aBotPosition = (aBotCoord) * adjustedScale + translate;

	vec2 bTopPosition = (bTopCoord) * adjustedScale + translate;
	vec2 bBotPosition = (bBotCoord) * adjustedScale + translate;

	//position is normalized 0..1 coord on the screen
	vec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;

	startCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;
	endCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;

	gl_Position = vec4(position  * 2.0 - 1.0, depth, 1);

	enableStartMiter = step(dot(currTangent, prevTangent), .5);
	enableEndMiter = step(dot(currTangent, nextTangent), .5);

	//bevel miter cutoffs
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}

	//round miter cutoffs
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}
}
`]),frag:x([`precision highp float;
#define GLSLIFY 1

uniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;
varying vec4 startCutoff, endCutoff;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

void main() {
	float alpha = 1., distToStart, distToEnd;
	float cutoff = thickness * .5;

	//bevel miter
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToStart + 1., 0.), 1.);
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToEnd + 1., 0.), 1.);
		}
	}

	// round miter
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < 0.) {
				float radius = length(gl_FragCoord.xy - startCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < 0.) {
				float radius = length(gl_FragCoord.xy - endCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}
	}

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`]),attributes:{lineEnd:{buffer:_,divisor:0,stride:8,offset:0},lineTop:{buffer:_,divisor:0,stride:8,offset:4},aColor:{buffer:v.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:v.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:v.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:v.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:v.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:v.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},u))}catch{c=T}var A=v({primitive:"triangle",elements:function(k,p){return p.triangles},offset:0,vert:x([`precision highp float;
#define GLSLIFY 1

attribute vec2 position, positionFract;

uniform vec4 color;
uniform vec2 scale, scaleFract, translate, translateFract;
uniform float pixelRatio, id;
uniform vec4 viewport;
uniform float opacity;

varying vec4 fragColor;

const float MAX_LINES = 256.;

void main() {
	float depth = (MAX_LINES - 4. - id) / (MAX_LINES);

	vec2 position = position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
	fragColor.a *= opacity;
}
`]),frag:x([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
	gl_FragColor = fragColor;
}
`]),uniforms:{scale:v.prop("scale"),color:v.prop("fill"),scaleFract:v.prop("scaleFract"),translateFract:v.prop("translateFract"),translate:v.prop("translate"),opacity:v.prop("opacity"),pixelRatio:v.context("pixelRatio"),id:v.prop("id"),viewport:function(k,p){return[p.viewport.x,p.viewport.y,k.viewportWidth,k.viewportHeight]}},attributes:{position:{buffer:v.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:v.prop("positionFractBuffer"),stride:8,offset:8}},blend:u.blend,depth:{enable:!1},scissor:u.scissor,stencil:u.stencil,viewport:u.viewport});return{fill:A,rect:T,miter:c}},b.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},b.prototype.render=function(){for(var v,_=[],u=arguments.length;u--;)_[u]=arguments[u];_.length&&(v=this).update.apply(v,_),this.draw()},b.prototype.draw=function(){for(var v=this,_=[],u=arguments.length;u--;)_[u]=arguments[u];return(_.length?_:this.passes).forEach(function(T,c){var A;if(T&&Array.isArray(T))return(A=v).draw.apply(A,T);typeof T=="number"&&(T=v.passes[T]),T&&T.count>1&&T.opacity&&(v.regl._refresh(),T.fill&&T.triangles&&T.triangles.length>2&&v.shaders.fill(T),T.thickness&&(T.scale[0]*T.viewport.width>b.precisionThreshold||T.scale[1]*T.viewport.height>b.precisionThreshold||T.join==="rect"||!T.join&&(T.thickness<=2||T.count>=b.maxPoints)?v.shaders.rect(T):v.shaders.miter(T)))}),this},b.prototype.update=function(v){var _=this;if(!!v){v.length!=null?typeof v[0]=="number"&&(v=[{positions:v}]):Array.isArray(v)||(v=[v]);var u=this,T=u.regl,c=u.gl;if(v.forEach(function(h,D){var S=_.passes[D];if(h!==void 0){if(h===null){_.passes[D]=null;return}if(typeof h[0]=="number"&&(h={positions:h}),h=t(h,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),S||(_.passes[D]=S={id:D,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:T.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:T.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:T.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:T.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},h=m({},b.defaults,h)),h.thickness!=null&&(S.thickness=parseFloat(h.thickness)),h.opacity!=null&&(S.opacity=parseFloat(h.opacity)),h.miterLimit!=null&&(S.miterLimit=parseFloat(h.miterLimit)),h.overlay!=null&&(S.overlay=!!h.overlay,D<b.maxLines&&(S.depth=2*(b.maxLines-1-D%b.maxLines)/b.maxLines-1)),h.join!=null&&(S.join=h.join),h.hole!=null&&(S.hole=h.hole),h.fill!=null&&(S.fill=h.fill?f(h.fill,"uint8"):null),h.viewport!=null&&(S.viewport=y(h.viewport)),S.viewport||(S.viewport=y([c.drawingBufferWidth,c.drawingBufferHeight])),h.close!=null&&(S.close=h.close),h.positions===null&&(h.positions=[]),h.positions){var M,L;if(h.positions.x&&h.positions.y){var R=h.positions.x,z=h.positions.y;L=S.count=Math.max(R.length,z.length),M=new Float64Array(L*2);for(var P=0;P<L;P++)M[P*2]=R[P],M[P*2+1]=z[P]}else M=a(h.positions,"float64"),L=S.count=Math.floor(M.length/2);var I=S.bounds=l(M,2);if(S.fill){for(var U=[],O={},G=0,$=0,tt=0,Z=S.count;$<Z;$++){var X=M[$*2],J=M[$*2+1];isNaN(X)||isNaN(J)||X==null||J==null?(X=M[G*2],J=M[G*2+1],O[$]=G):G=$,U[tt++]=X,U[tt++]=J}if(h.splitNull){S.count-1 in O||(O[S.count]=S.count-1);var st=Object.keys(O).map(Number).sort(function(Wt,ee){return Wt-ee}),at=[],lt=0,F=S.hole!=null?S.hole[0]:null;if(F!=null){var H=g(st,function(Wt){return Wt>=F});st=st.slice(0,H),st.push(F)}for(var et=function(Wt){var ee=U.slice(lt*2,st[Wt]*2).concat(F?U.slice(F*2):[]),Xt=(S.hole||[]).map(function(Vt){return Vt-F+(st[Wt]-lt)}),St=i(ee,Xt);St=St.map(function(Vt){return Vt+lt+(Vt+lt<st[Wt]?0:F-st[Wt])}),at.push.apply(at,St),lt=st[Wt]+1},q=0;q<st.length;q++)et(q);for(var W=0,K=at.length;W<K;W++)O[at[W]]!=null&&(at[W]=O[at[W]]);S.triangles=at}else{for(var nt=i(U,S.hole||[]),it=0,ot=nt.length;it<ot;it++)O[nt[it]]!=null&&(nt[it]=O[nt[it]]);S.triangles=nt}}var ct=new Float64Array(M);r(ct,2,I);var bt=new Float64Array(L*2+6);S.close?M[0]===M[L*2-2]&&M[1]===M[L*2-1]?(bt[0]=ct[L*2-4],bt[1]=ct[L*2-3]):(bt[0]=ct[L*2-2],bt[1]=ct[L*2-1]):(bt[0]=ct[0],bt[1]=ct[1]),bt.set(ct,2),S.close?M[0]===M[L*2-2]&&M[1]===M[L*2-1]?(bt[L*2+2]=ct[2],bt[L*2+3]=ct[3],S.count-=1):(bt[L*2+2]=ct[0],bt[L*2+3]=ct[1],bt[L*2+4]=ct[2],bt[L*2+5]=ct[3]):(bt[L*2+2]=ct[L*2-2],bt[L*2+3]=ct[L*2-1],bt[L*2+4]=ct[L*2-2],bt[L*2+5]=ct[L*2-1]);var ut=d(bt);S.positionBuffer(ut);var pt=s(bt,ut);S.positionFractBuffer(pt)}if(h.range?S.range=h.range:S.range||(S.range=S.bounds),(h.range||h.positions)&&S.count){var yt=S.bounds,Tt=yt[2]-yt[0],kt=yt[3]-yt[1],zt=S.range[2]-S.range[0],Rt=S.range[3]-S.range[1];S.scale=[Tt/zt,kt/Rt],S.translate=[-S.range[0]/zt+yt[0]/zt||0,-S.range[1]/Rt+yt[1]/Rt||0],S.scaleFract=s(S.scale),S.translateFract=s(S.translate)}if(h.dashes){var Gt=0,wt;if(!h.dashes||h.dashes.length<2)Gt=1,wt=new Uint8Array([255,255,255,255,255,255,255,255]);else{Gt=0;for(var It=0;It<h.dashes.length;++It)Gt+=h.dashes[It];wt=new Uint8Array(Gt*b.dashMult);for(var $t=0,Qt=255,Nt=0;Nt<2;Nt++)for(var Pt=0;Pt<h.dashes.length;++Pt){for(var Yt=0,ve=h.dashes[Pt]*b.dashMult*.5;Yt<ve;++Yt)wt[$t++]=Qt;Qt^=255}}S.dashLength=Gt,S.dashTexture({channels:1,data:wt,width:wt.length,height:1,mag:"linear",min:"linear"},0,0)}if(h.color){var Re=S.count,ir=h.color;ir||(ir="transparent");var Ie=new Uint8Array(Re*4+4);if(!Array.isArray(ir)||typeof ir[0]=="number")for(var Be=f(ir,"uint8"),Ye=0;Ye<Re+1;Ye++)Ie.set(Be,Ye*4);else{for(var ze=0;ze<Re;ze++){var Ee=f(ir[ze],"uint8");Ie.set(Ee,ze*4)}Ie.set(f(ir[0],"uint8"),Re*4)}S.colorBuffer({usage:"dynamic",type:"uint8",data:Ie})}}}),v.length<this.passes.length){for(var A=v.length;A<this.passes.length;A++){var k=this.passes[A];!k||(k.colorBuffer.destroy(),k.positionBuffer.destroy(),k.dashTexture.destroy())}this.passes.length=v.length}for(var p=[],w=0;w<this.passes.length;w++)this.passes[w]!==null&&p.push(this.passes[w]);return this.passes=p,this}},b.prototype.destroy=function(){return this.passes.forEach(function(v){v.colorBuffer.destroy(),v.positionBuffer.destroy(),v.dashTexture.destroy()}),this.passes.length=0,this}},{"array-bounds":71,"array-find-index":72,"array-normalize":73,"color-normalize":89,earcut:129,"es6-weak-map":183,"flatten-vertex-data":191,glslify:227,"object-assign":247,"parse-rect":249,"pick-by-alias":253,"to-float32":314}],282:[function(e,B,V){function f(S,M){return x(S)||a(S,M)||i(S,M)||d()}function l(S){return m(S)||t(S)||i(S)||n()}function m(S){if(Array.isArray(S))return r(S)}function x(S){if(Array.isArray(S))return S}function t(S){if(typeof Symbol<"u"&&S[Symbol.iterator]!=null||S["@@iterator"]!=null)return Array.from(S)}function a(S,M){var L=S==null?null:typeof Symbol<"u"&&S[Symbol.iterator]||S["@@iterator"];if(L!=null){var R=[],z=!0,P=!1,I,U;try{for(L=L.call(S);!(z=(I=L.next()).done)&&(R.push(I.value),!(M&&R.length===M));z=!0);}catch(O){P=!0,U=O}finally{try{!z&&L.return!=null&&L.return()}finally{if(P)throw U}}return R}}function i(S,M){if(!!S){if(typeof S=="string")return r(S,M);var L=Object.prototype.toString.call(S).slice(8,-1);if(L==="Object"&&S.constructor&&(L=S.constructor.name),L==="Map"||L==="Set")return Array.from(S);if(L==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(L))return r(S,M)}}function r(S,M){(M==null||M>S.length)&&(M=S.length);for(var L=0,R=new Array(M);L<M;L++)R[L]=S[L];return R}function n(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function d(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=e("color-normalize"),o=e("array-bounds"),y=e("color-id"),g=e("@plotly/point-cluster"),b=e("object-assign"),v=e("glslify"),_=e("pick-by-alias"),u=e("update-diff"),T=e("flatten-vertex-data"),c=e("is-iexplorer"),A=e("to-float32"),k=e("parse-rect"),p=w;function w(S,M){var L=this;if(!(this instanceof w))return new w(S,M);typeof S=="function"?(M||(M={}),M.regl=S):(M=S,S=null),M&&M.length&&(M.positions=M),S=M.regl;var R=S._gl,z,P=[],I={},U=[],O=[null],G=[null],$=255,tt=100;this.tooManyColors=c,z=S.texture({data:new Uint8Array($*4),width:$,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),b(this,{regl:S,gl:R,groups:U,markerCache:G,markerTextures:O,palette:P,paletteIds:I,paletteTexture:z,maxColors:$,maxSize:tt,canvas:R.canvas}),this.update(M);var Z={uniforms:{constPointSize:!!M.constPointSize,opacity:S.prop("opacity"),paletteSize:function(at,lt){return[L.tooManyColors?0:$,z.height]},pixelRatio:S.context("pixelRatio"),scale:S.prop("scale"),scaleFract:S.prop("scaleFract"),translate:S.prop("translate"),translateFract:S.prop("translateFract"),markerTexture:S.prop("markerTexture"),paletteTexture:z},attributes:{x:function(at,lt){return lt.xAttr||{buffer:lt.positionBuffer,stride:8,offset:0}},y:function(at,lt){return lt.yAttr||{buffer:lt.positionBuffer,stride:8,offset:4}},xFract:function(at,lt){return lt.xAttr?{constant:[0,0]}:{buffer:lt.positionFractBuffer,stride:8,offset:0}},yFract:function(at,lt){return lt.yAttr?{constant:[0,0]}:{buffer:lt.positionFractBuffer,stride:8,offset:4}},size:function(at,lt){return lt.size.length?{buffer:lt.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(lt.size*255/L.maxSize)]}},borderSize:function(at,lt){return lt.borderSize.length?{buffer:lt.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(lt.borderSize*255/L.maxSize)]}},colorId:function(at,lt){return lt.color.length?{buffer:lt.colorBuffer,stride:L.tooManyColors?8:4,offset:0}:{constant:L.tooManyColors?P.slice(lt.color*4,lt.color*4+4):[lt.color]}},borderColorId:function(at,lt){return lt.borderColor.length?{buffer:lt.colorBuffer,stride:L.tooManyColors?8:4,offset:L.tooManyColors?4:2}:{constant:L.tooManyColors?P.slice(lt.borderColor*4,lt.borderColor*4+4):[lt.borderColor]}},isActive:function(at,lt){return lt.activation===!0?{constant:[1]}:lt.activation?lt.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:S.prop("viewport")},viewport:S.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:S.prop("elements"),count:S.prop("count"),offset:S.prop("offset"),primitive:"points"},X=b({},Z);X.frag=v([`precision highp float;
#define GLSLIFY 1

uniform float opacity;
uniform sampler2D markerTexture;

varying vec4 fragColor, fragBorderColor;
varying float fragWidth, fragBorderColorLevel, fragColorLevel;

float smoothStep(float x, float y) {
  return 1.0 / (1.0 + exp(50.0*(x - y)));
}

void main() {
  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;

  // max-distance alpha
  if (dist < 0.003) discard;

  // null-border case
  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {
    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);
    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);
  }
  else {
    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);
    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);

    vec4 color = fragBorderColor;
    color.a *= borderColorAmt;
    color = mix(color, fragColor, colorAmt);
    color.a *= opacity;

    gl_FragColor = color;
  }

}
`]),X.vert=v([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 scale, scaleFract, translate, translateFract, paletteSize;
uniform sampler2D paletteTexture;

const float maxSize = 100.;
const float borderLevel = .5;

varying vec4 fragColor, fragBorderColor;
varying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = 2. * size * pointSizeScale;
  fragPointSize = size * pixelRatio;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragColor = color;
  fragBorderColor = borderColor;
  fragWidth = 1. / gl_PointSize;

  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);
  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);
}`]),this.drawMarker=S(X);var J=b({},Z);J.frag=v([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

uniform float opacity;

float smoothStep(float edge0, float edge1, float x) {
	float t;
	t = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);
	return t * t * (3.0 - 2.0 * t);
}

void main() {
	float radius, alpha = 1.0, delta = fragWidth;

	radius = length(2.0 * gl_PointCoord.xy - 1.0);

	if (radius > 1.0 + delta) {
		discard;
	}

	alpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);

	float borderRadius = fragBorderRadius;
	float ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);
	vec4 color = mix(fragColor, fragBorderColor, ratio);
	color.a *= alpha * opacity;
	gl_FragColor = color;
}
`]),J.vert=v([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 paletteSize, scale, scaleFract, translate, translateFract;
uniform sampler2D paletteTexture;

const float maxSize = 100.;

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = (size + borderSize) * pointSizeScale;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);
  fragColor = color;
  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;
  fragWidth = 1. / gl_PointSize;
}
`]),c&&(J.frag=J.frag.replace("smoothstep","smoothStep"),X.frag=X.frag.replace("smoothstep","smoothStep")),this.drawCircle=S(J)}w.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},w.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},w.prototype.draw=function(){for(var S=this,M=arguments.length,L=new Array(M),R=0;R<M;R++)L[R]=arguments[R];var z=this.groups;if(L.length===1&&Array.isArray(L[0])&&(L[0][0]===null||Array.isArray(L[0][0]))&&(L=L[0]),this.regl._refresh(),L.length)for(var P=0;P<L.length;P++)this.drawItem(P,L[P]);else z.forEach(function(I,U){S.drawItem(U)});return this},w.prototype.drawItem=function(S,M){var L=this.groups,R=L[S];if(typeof M=="number"&&(S=M,R=L[M],M=null),!!(R&&R.count&&R.opacity)){R.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,R,M));for(var z=[],P=1;P<R.activation.length;P++)!R.activation[P]||R.activation[P]!==!0&&!R.activation[P].data.length||z.push.apply(z,l(this.getMarkerDrawOptions(P,R,M)));z.length&&this.drawMarker(z)}},w.prototype.getMarkerDrawOptions=function(S,M,L){var R=M.range,z=M.tree,P=M.viewport,I=M.activation,U=M.selectionBuffer,O=M.count;if(this.regl,!z)return L?[b({},M,{markerTexture:this.markerTextures[S],activation:I[S],count:L.length,elements:L,offset:0})]:[b({},M,{markerTexture:this.markerTextures[S],activation:I[S],offset:0})];var G=[],$=z.range(R,{lod:!0,px:[(R[2]-R[0])/P.width,(R[3]-R[1])/P.height]});if(L){for(var tt=I[S],Z=tt.data,X=new Uint8Array(O),J=0;J<L.length;J++){var st=L[J];X[st]=Z?Z[st]:1}U.subdata(X)}for(var at=$.length;at--;){var lt=f($[at],2),F=lt[0],H=lt[1];G.push(b({},M,{markerTexture:this.markerTextures[S],activation:L?U:I[S],offset:F,count:H-F}))}return G},w.prototype.update=function(){for(var S=this,M=arguments.length,L=new Array(M),R=0;R<M;R++)L[R]=arguments[R];if(!!L.length){L.length===1&&Array.isArray(L[0])&&(L=L[0]);var z=this.groups,P=this.gl,I=this.regl,U=this.maxSize,O=this.maxColors,G=this.palette;this.groups=z=L.map(function($,tt){var Z=z[tt];if($===void 0)return Z;$===null?$={positions:null}:typeof $=="function"?$={ondraw:$}:typeof $[0]=="number"&&($={positions:$}),$=_($,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"}),$.positions===null&&($.positions=[]),$.tooManyColors!=null&&(S.tooManyColors=$.tooManyColors),Z||(z[tt]=Z={id:tt,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:I.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:I.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:I.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:I.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:I.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},$=b({},w.defaults,$)),$.positions&&!("marker"in $)&&($.marker=Z.marker,delete Z.marker),$.marker&&!("positions"in $)&&($.positions=Z.positions,delete Z.positions);var X=0,J=0;if(u(Z,$,[{snap:!0,size:function(kt,zt){return kt==null&&(kt=w.defaults.size),X+=kt&&kt.length?1:0,kt},borderSize:function(kt,zt){return kt==null&&(kt=w.defaults.borderSize),X+=kt&&kt.length?1:0,kt},opacity:parseFloat,color:function(kt,zt){return kt==null&&(kt=w.defaults.color),kt=S.updateColor(kt),J++,kt},borderColor:function(kt,zt){return kt==null&&(kt=w.defaults.borderColor),kt=S.updateColor(kt),J++,kt},bounds:function(kt,zt,Rt){return"range"in Rt||(Rt.range=null),kt},positions:function(kt,zt,Rt){var Gt=zt.snap,wt=zt.positionBuffer,It=zt.positionFractBuffer,$t=zt.selectionBuffer;if(kt.x||kt.y)return kt.x.length?zt.xAttr={buffer:I.buffer(kt.x),offset:0,stride:4,count:kt.x.length}:zt.xAttr={buffer:kt.x.buffer,offset:kt.x.offset*4||0,stride:(kt.x.stride||1)*4,count:kt.x.count},kt.y.length?zt.yAttr={buffer:I.buffer(kt.y),offset:0,stride:4,count:kt.y.length}:zt.yAttr={buffer:kt.y.buffer,offset:kt.y.offset*4||0,stride:(kt.y.stride||1)*4,count:kt.y.count},zt.count=Math.max(zt.xAttr.count,zt.yAttr.count),kt;kt=T(kt,"float64");var Qt=zt.count=Math.floor(kt.length/2),Nt=zt.bounds=Qt?o(kt,2):null;if(!Rt.range&&!zt.range&&(delete zt.range,Rt.range=Nt),!Rt.marker&&!zt.marker&&(delete zt.marker,Rt.marker=null),Gt&&(Gt===!0||Qt>Gt)?zt.tree=g(kt,{bounds:Nt}):Gt&&Gt.length&&(zt.tree=Gt),zt.tree){var Pt={primitive:"points",usage:"static",data:zt.tree,type:"uint32"};zt.elements?zt.elements(Pt):zt.elements=I.elements(Pt)}var Yt=A.float32(kt);wt({data:Yt,usage:"dynamic"});var ve=A.fract32(kt,Yt);return It({data:ve,usage:"dynamic"}),$t({data:new Uint8Array(Qt),type:"uint8",usage:"stream"}),kt}},{marker:function(kt,zt,Rt){var Gt=zt.activation;if(Gt.forEach(function(ve){return ve&&ve.destroy&&ve.destroy()}),Gt.length=0,!kt||typeof kt[0]=="number"){var wt=S.addMarker(kt);Gt[wt]=!0}else{for(var It=[],$t=0,Qt=Math.min(kt.length,zt.count);$t<Qt;$t++){var Nt=S.addMarker(kt[$t]);It[Nt]||(It[Nt]=new Uint8Array(zt.count)),It[Nt][$t]=1}for(var Pt=0;Pt<It.length;Pt++)if(!!It[Pt]){var Yt={data:It[Pt],type:"uint8",usage:"static"};Gt[Pt]?Gt[Pt](Yt):Gt[Pt]=I.buffer(Yt),Gt[Pt].data=It[Pt]}}return kt},range:function(kt,zt,Rt){var Gt=zt.bounds;if(!!Gt)return kt||(kt=Gt),zt.scale=[1/(kt[2]-kt[0]),1/(kt[3]-kt[1])],zt.translate=[-kt[0],-kt[1]],zt.scaleFract=A.fract(zt.scale),zt.translateFract=A.fract(zt.translate),kt},viewport:function(kt){var zt=k(kt||[P.drawingBufferWidth,P.drawingBufferHeight]);return zt}}]),X){var st=Z,at=st.count,lt=st.size,F=st.borderSize,H=st.sizeBuffer,et=new Uint8Array(at*2);if(lt.length||F.length)for(var q=0;q<at;q++)et[q*2]=Math.round((lt[q]==null?lt:lt[q])*255/U),et[q*2+1]=Math.round((F[q]==null?F:F[q])*255/U);H({data:et,usage:"dynamic"})}if(J){var W=Z,K=W.count,nt=W.color,it=W.borderColor,ot=W.colorBuffer,ct;if(S.tooManyColors){if(nt.length||it.length){ct=new Uint8Array(K*8);for(var bt=0;bt<K;bt++){var ut=nt[bt];ct[bt*8]=G[ut*4],ct[bt*8+1]=G[ut*4+1],ct[bt*8+2]=G[ut*4+2],ct[bt*8+3]=G[ut*4+3];var pt=it[bt];ct[bt*8+4]=G[pt*4],ct[bt*8+5]=G[pt*4+1],ct[bt*8+6]=G[pt*4+2],ct[bt*8+7]=G[pt*4+3]}}}else if(nt.length||it.length){ct=new Uint8Array(K*4+2);for(var yt=0;yt<K;yt++)nt[yt]!=null&&(ct[yt*4]=nt[yt]%O,ct[yt*4+1]=Math.floor(nt[yt]/O)),it[yt]!=null&&(ct[yt*4+2]=it[yt]%O,ct[yt*4+3]=Math.floor(it[yt]/O))}ot({data:ct||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return Z})}},w.prototype.addMarker=function(S){var M=this.markerTextures,L=this.regl,R=this.markerCache,z=S==null?0:R.indexOf(S);if(z>=0)return z;var P;if(S instanceof Uint8Array||S instanceof Uint8ClampedArray)P=S;else{P=new Uint8Array(S.length);for(var I=0,U=S.length;I<U;I++)P[I]=S[I]*255}var O=Math.floor(Math.sqrt(P.length));return z=M.length,R.push(S),M.push(L.texture({channels:1,data:P,radius:O,mag:"linear",min:"linear"})),z},w.prototype.updateColor=function(S){var M=this.paletteIds,L=this.palette,R=this.maxColors;Array.isArray(S)||(S=[S]);var z=[];if(typeof S[0]=="number"){var P=[];if(Array.isArray(S))for(var I=0;I<S.length;I+=4)P.push(S.slice(I,I+4));else for(var U=0;U<S.length;U+=4)P.push(S.subarray(U,U+4));S=P}for(var O=0;O<S.length;O++){var G=S[O];G=s(G,"uint8");var $=y(G,!1);if(M[$]==null){var tt=L.length;M[$]=Math.floor(tt/4),L[tt]=G[0],L[tt+1]=G[1],L[tt+2]=G[2],L[tt+3]=G[3]}z[O]=M[$]}return!this.tooManyColors&&L.length>R*4&&(this.tooManyColors=!0),this.updatePalette(L),z.length===1?z[0]:z},w.prototype.updatePalette=function(S){if(!this.tooManyColors){var M=this.maxColors,L=this.paletteTexture,R=Math.ceil(S.length*.25/M);if(R>1){S=S.slice();for(var z=S.length*.25%M;z<R*M;z++)S.push(0,0,0,0)}L.height<R&&L.resize(M,R),L.subimage({width:Math.min(S.length*.25,M),height:R,data:S},0,0)}},w.prototype.destroy=function(){return this.groups.forEach(function(S){S.sizeBuffer.destroy(),S.positionBuffer.destroy(),S.positionFractBuffer.destroy(),S.colorBuffer.destroy(),S.activation.forEach(function(M){return M&&M.destroy&&M.destroy()}),S.selectionBuffer.destroy(),S.elements&&S.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(S){return S&&S.destroy&&S.destroy()}),this};var h=e("object-assign"),D=function(M,L){var R=new p(M,L),z=R.render.bind(R);return h(z,{render:z,update:R.update.bind(R),draw:R.draw.bind(R),destroy:R.destroy.bind(R),regl:R.regl,gl:R.gl,canvas:R.gl.canvas,groups:R.groups,markers:R.markerCache,palette:R.palette}),z};B.exports=D},{"@plotly/point-cluster":59,"array-bounds":71,"color-id":87,"color-normalize":89,"flatten-vertex-data":191,glslify:227,"is-iexplorer":233,"object-assign":247,"parse-rect":249,"pick-by-alias":253,"to-float32":314,"update-diff":330}],283:[function(e,B,V){var f=e("regl-scatter2d"),l=e("pick-by-alias"),m=e("array-bounds"),x=e("raf"),t=e("array-range"),a=e("parse-rect"),i=e("flatten-vertex-data");B.exports=r;function r(o,y){if(!(this instanceof r))return new r(o);this.traces=[],this.passes={},this.regl=o,this.scatter=f(o),this.canvas=this.scatter.canvas}r.prototype.render=function(){for(var o=this,y,g=[],b=arguments.length;b--;)g[b]=arguments[b];return g.length&&(y=this).update.apply(y,g),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?this.planned==null&&(this.planned=x(function(){o.draw(),o.dirty=!0,o.planned=null})):(this.draw(),this.dirty=!0,x(function(){o.dirty=!1})),this)},r.prototype.update=function(){for(var o,y=[],g=arguments.length;g--;)y[g]=arguments[g];if(!!y.length){for(var b=0;b<y.length;b++)this.updateItem(b,y[b]);this.traces=this.traces.filter(Boolean);for(var v=[],_=0,u=0;u<this.traces.length;u++){for(var T=this.traces[u],c=this.traces[u].passes,A=0;A<c.length;A++)v.push(this.passes[c[A]]);T.passOffset=_,_+=T.passes.length}return(o=this.scatter).update.apply(o,v),this}},r.prototype.updateItem=function(o,y){var g=this,b=g.regl;if(y===null)return this.traces[o]=null,this;if(!y)return this;var v=l(y,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),_=this.traces[o]||(this.traces[o]={id:o,buffer:b.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:a([b._gl.drawingBufferWidth,b._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(v.color!=null&&(_.color=v.color),v.size!=null&&(_.size=v.size),v.marker!=null&&(_.marker=v.marker),v.borderColor!=null&&(_.borderColor=v.borderColor),v.borderSize!=null&&(_.borderSize=v.borderSize),v.opacity!=null&&(_.opacity=v.opacity),v.viewport&&(_.viewport=a(v.viewport)),v.diagonal!=null&&(_.diagonal=v.diagonal),v.upper!=null&&(_.upper=v.upper),v.lower!=null&&(_.lower=v.lower),v.data){_.buffer(i(v.data)),_.columns=v.data.length,_.count=v.data[0].length,_.bounds=[];for(var u=0;u<_.columns;u++)_.bounds[u]=m(v.data[u],1)}var T;v.range&&(_.range=v.range,T=_.range&&typeof _.range[0]!="number"),v.domain&&(_.domain=v.domain);var c=!1;v.padding!=null&&(Array.isArray(v.padding)&&v.padding.length===_.columns&&typeof v.padding[v.padding.length-1]=="number"?(_.padding=v.padding.map(s),c=!0):_.padding=s(v.padding));var A=_.columns,k=_.count,p=_.viewport.width,w=_.viewport.height,h=_.viewport.x,D=_.viewport.y,S=p/A,M=w/A;_.passes=[];for(var L=0;L<A;L++)for(var R=0;R<A;R++)if(!(!_.diagonal&&R===L)&&!(!_.upper&&L>R)&&!(!_.lower&&L<R)){var z=n(_.id,L,R),P=this.passes[z]||(this.passes[z]={});if(v.data&&(v.transpose?P.positions={x:{buffer:_.buffer,offset:R,count:k,stride:A},y:{buffer:_.buffer,offset:L,count:k,stride:A}}:P.positions={x:{buffer:_.buffer,offset:R*k,count:k},y:{buffer:_.buffer,offset:L*k,count:k}},P.bounds=d(_.bounds,L,R)),v.domain||v.viewport||v.data){var I=c?d(_.padding,L,R):_.padding;if(_.domain){var U=d(_.domain,L,R),O=U[0],G=U[1],$=U[2],tt=U[3];P.viewport=[h+O*p+I[0],D+G*w+I[1],h+$*p-I[2],D+tt*w-I[3]]}else P.viewport=[h+R*S+S*I[0],D+L*M+M*I[1],h+(R+1)*S-S*I[2],D+(L+1)*M-M*I[3]]}v.color&&(P.color=_.color),v.size&&(P.size=_.size),v.marker&&(P.marker=_.marker),v.borderSize&&(P.borderSize=_.borderSize),v.borderColor&&(P.borderColor=_.borderColor),v.opacity&&(P.opacity=_.opacity),v.range&&(P.range=T?d(_.range,L,R):_.range||P.bounds),_.passes.push(z)}return this},r.prototype.draw=function(){for(var o,y=[],g=arguments.length;g--;)y[g]=arguments[g];if(!y.length)this.scatter.draw();else{for(var b=[],v=0;v<y.length;v++)if(typeof y[v]=="number"){var _=this.traces[y[v]],u=_.passes,T=_.passOffset;b.push.apply(b,t(T,T+u.length))}else if(y[v].length){var c=y[v],A=this.traces[v],k=A.passes,p=A.passOffset;k=k.map(function(w,h){b[p+h]=c})}(o=this.scatter).draw.apply(o,b)}return this},r.prototype.destroy=function(){return this.traces.forEach(function(o){o.buffer&&o.buffer.destroy&&o.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this};function n(o,y,g){var b=o.id!=null?o.id:o,v=y,_=g,u=b<<16|(v&255)<<8|_&255;return u}function d(o,y,g){var b,v,_,u,T=o[y],c=o[g];return T.length>2?(T[0],T[2],b=T[1],v=T[3]):T.length?(b=T[0],v=T[1]):(T.x,b=T.y,T.x+T.width,v=T.y+T.height),c.length>2?(_=c[0],u=c[2],c[1],c[3]):c.length?(_=c[0],u=c[1]):(_=c.x,c.y,u=c.x+c.width,c.y+c.height),[_,b,u,v]}function s(o){if(typeof o=="number")return[o,o,o,o];if(o.length===2)return[o[0],o[1],o[0],o[1]];var y=a(o);return[y.x,y.y,y.x+y.width,y.y+y.height]}},{"array-bounds":71,"array-range":74,"flatten-vertex-data":191,"parse-rect":249,"pick-by-alias":253,raf:279,"regl-scatter2d":282}],284:[function(e,B,V){(function(f,l){typeof V=="object"&&typeof B<"u"?B.exports=l():f.createREGL=l()})(this,function(){function f(le,Qe){this.id=bt++,this.type=le,this.data=Qe}function l(le){if(le.length===0)return[];var Qe=le.charAt(0),Ze=le.charAt(le.length-1);if(1<le.length&&Qe===Ze&&(Qe==='"'||Qe==="'"))return['"'+le.substr(1,le.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(Qe=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(le))return l(le.substr(0,Qe.index)).concat(l(Qe[1])).concat(l(le.substr(Qe.index+Qe[0].length)));if(Qe=le.split("."),Qe.length===1)return['"'+le.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(le=[],Ze=0;Ze<Qe.length;++Ze)le=le.concat(l(Qe[Ze]));return le}function m(le){return"["+l(le).join("][")+"]"}function x(le,Qe){if(typeof le=="function")return new f(0,le);if(typeof le=="number"||typeof le=="boolean")return new f(5,le);if(Array.isArray(le))return new f(6,le.map(function(Ze,Ve){return x(Ze)}));if(le instanceof f)return le}function t(){var le={"":0},Qe=[""];return{id:function(Ze){var Ve=le[Ze];return Ve||(Ve=le[Ze]=Qe.length,Qe.push(Ze),Ve)},str:function(Ze){return Qe[Ze]}}}function a(le,Qe,Ze){function Ve(){var Ht=window.innerWidth,te=window.innerHeight;le!==document.body&&(te=_r.getBoundingClientRect(),Ht=te.right-te.left,te=te.bottom-te.top),_r.width=Ze*Ht,_r.height=Ze*te}var _r=document.createElement("canvas");ct(_r.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),le.appendChild(_r),le===document.body&&(_r.style.position="absolute",ct(le.style,{margin:0,padding:0}));var oe;return le!==document.body&&typeof ResizeObserver=="function"?(oe=new ResizeObserver(function(){setTimeout(Ve)}),oe.observe(le)):window.addEventListener("resize",Ve,!1),Ve(),{canvas:_r,onDestroy:function(){oe?oe.disconnect():window.removeEventListener("resize",Ve),le.removeChild(_r)}}}function i(le,Qe){function Ze(Ve){try{return le.getContext(Ve,Qe)}catch{return null}}return Ze("webgl")||Ze("experimental-webgl")||Ze("webgl-experimental")}function r(le){return typeof le=="string"?le.split():le}function n(le){return typeof le=="string"?document.querySelector(le):le}function d(le){var Qe=le||{},Ze,Ve,_r,oe;le={};var Ht=[],te=[],ne=typeof window>"u"?1:window.devicePixelRatio,_e=!1,Pe={},Et=function(se){},Mt=function(){};if(typeof Qe=="string"?Ze=document.querySelector(Qe):typeof Qe=="object"&&(typeof Qe.nodeName=="string"&&typeof Qe.appendChild=="function"&&typeof Qe.getBoundingClientRect=="function"?Ze=Qe:typeof Qe.drawArrays=="function"||typeof Qe.drawElements=="function"?(oe=Qe,_r=oe.canvas):("gl"in Qe?oe=Qe.gl:"canvas"in Qe?_r=n(Qe.canvas):"container"in Qe&&(Ve=n(Qe.container)),"attributes"in Qe&&(le=Qe.attributes),"extensions"in Qe&&(Ht=r(Qe.extensions)),"optionalExtensions"in Qe&&(te=r(Qe.optionalExtensions)),"onDone"in Qe&&(Et=Qe.onDone),"profile"in Qe&&(_e=!!Qe.profile),"pixelRatio"in Qe&&(ne=+Qe.pixelRatio),"cachedCode"in Qe&&(Pe=Qe.cachedCode))),Ze&&(Ze.nodeName.toLowerCase()==="canvas"?_r=Ze:Ve=Ze),!oe){if(!_r){if(Ze=a(Ve||document.body,Et,ne),!Ze)return null;_r=Ze.canvas,Mt=Ze.onDestroy}le.premultipliedAlpha===void 0&&(le.premultipliedAlpha=!0),oe=i(_r,le)}return oe?{gl:oe,canvas:_r,container:Ve,extensions:Ht,optionalExtensions:te,pixelRatio:ne,profile:_e,cachedCode:Pe,onDone:Et,onDestroy:Mt}:(Mt(),Et("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function s(le,Qe){function Ze(Ht){Ht=Ht.toLowerCase();var te;try{te=Ve[Ht]=le.getExtension(Ht)}catch{}return!!te}for(var Ve={},_r=0;_r<Qe.extensions.length;++_r){var oe=Qe.extensions[_r];if(!Ze(oe))return Qe.onDestroy(),Qe.onDone('"'+oe+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return Qe.optionalExtensions.forEach(Ze),{extensions:Ve,restore:function(){Object.keys(Ve).forEach(function(Ht){if(Ve[Ht]&&!Ze(Ht))throw Error("(regl): error restoring extension "+Ht)})}}}function o(le,Qe){for(var Ze=Array(le),Ve=0;Ve<le;++Ve)Ze[Ve]=Qe(Ve);return Ze}function y(le){var Qe,Ze;return Qe=(65535<le)<<4,le>>>=Qe,Ze=(255<le)<<3,le>>>=Ze,Qe|=Ze,Ze=(15<le)<<2,le>>>=Ze,Qe|=Ze,Ze=(3<le)<<1,Qe|Ze|le>>>Ze>>1}function g(){function le(Ve){t:{for(var _r=16;268435456>=_r;_r*=16)if(Ve<=_r){Ve=_r;break t}Ve=0}return _r=Ze[y(Ve)>>2],0<_r.length?_r.pop():new ArrayBuffer(Ve)}function Qe(Ve){Ze[y(Ve.byteLength)>>2].push(Ve)}var Ze=o(8,function(){return[]});return{alloc:le,free:Qe,allocType:function(Ve,_r){var oe=null;switch(Ve){case 5120:oe=new Int8Array(le(_r),0,_r);break;case 5121:oe=new Uint8Array(le(_r),0,_r);break;case 5122:oe=new Int16Array(le(2*_r),0,_r);break;case 5123:oe=new Uint16Array(le(2*_r),0,_r);break;case 5124:oe=new Int32Array(le(4*_r),0,_r);break;case 5125:oe=new Uint32Array(le(4*_r),0,_r);break;case 5126:oe=new Float32Array(le(4*_r),0,_r);break;default:return null}return oe.length!==_r?oe.subarray(0,_r):oe},freeType:function(Ve){Qe(Ve.buffer)}}}function b(le){return!!le&&typeof le=="object"&&Array.isArray(le.shape)&&Array.isArray(le.stride)&&typeof le.offset=="number"&&le.shape.length===le.stride.length&&(Array.isArray(le.data)||zt(le.data))}function v(le,Qe,Ze,Ve,_r,oe){for(var Ht=0;Ht<Qe;++Ht)for(var te=le[Ht],ne=0;ne<Ze;++ne)for(var _e=te[ne],Pe=0;Pe<Ve;++Pe)_r[oe++]=_e[Pe]}function _(le,Qe,Ze,Ve,_r){for(var oe=1,Ht=Ze+1;Ht<Qe.length;++Ht)oe*=Qe[Ht];var te=Qe[Ze];if(Qe.length-Ze===4){var ne=Qe[Ze+1],_e=Qe[Ze+2];for(Qe=Qe[Ze+3],Ht=0;Ht<te;++Ht)v(le[Ht],ne,_e,Qe,Ve,_r),_r+=oe}else for(Ht=0;Ht<te;++Ht)_(le[Ht],Qe,Ze+1,Ve,_r),_r+=oe}function u(le){return wt[Object.prototype.toString.call(le)]|0}function T(le,Qe){for(var Ze=0;Ze<Qe.length;++Ze)le[Ze]=Qe[Ze]}function c(le,Qe,Ze,Ve,_r,oe,Ht){for(var te=0,ne=0;ne<Ze;++ne)for(var _e=0;_e<Ve;++_e)le[te++]=Qe[_r*ne+oe*_e+Ht]}function A(le,Qe,Ze,Ve){function _r(Et){this.id=ne++,this.buffer=le.createBuffer(),this.type=Et,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,Ze.profile&&(this.stats={size:0})}function oe(Et,Mt,se){Et.byteLength=Mt.byteLength,le.bufferData(Et.type,Mt,se)}function Ht(Et,Mt,se,ce,de,Se){if(Et.usage=se,Array.isArray(Mt)){if(Et.dtype=ce||5126,0<Mt.length)if(Array.isArray(Mt[0])){de=Nt(Mt);for(var ye=ce=1;ye<de.length;++ye)ce*=de[ye];Et.dimension=ce,Mt=Qt(Mt,de,Et.dtype),oe(Et,Mt,se),Se?Et.persistentData=Mt:Tt.freeType(Mt)}else typeof Mt[0]=="number"?(Et.dimension=de,de=Tt.allocType(Et.dtype,Mt.length),T(de,Mt),oe(Et,de,se),Se?Et.persistentData=de:Tt.freeType(de)):zt(Mt[0])&&(Et.dimension=Mt[0].length,Et.dtype=ce||u(Mt[0])||5126,Mt=Qt(Mt,[Mt.length,Mt[0].length],Et.dtype),oe(Et,Mt,se),Se?Et.persistentData=Mt:Tt.freeType(Mt))}else if(zt(Mt))Et.dtype=ce||u(Mt),Et.dimension=de,oe(Et,Mt,se),Se&&(Et.persistentData=new Uint8Array(new Uint8Array(Mt.buffer)));else if(b(Mt)){de=Mt.shape;var Ae=Mt.stride,ye=Mt.offset,Ge=0,sr=0,Er=0,kr=0;de.length===1?(Ge=de[0],sr=1,Er=Ae[0],kr=0):de.length===2&&(Ge=de[0],sr=de[1],Er=Ae[0],kr=Ae[1]),Et.dtype=ce||u(Mt.data)||5126,Et.dimension=sr,de=Tt.allocType(Et.dtype,Ge*sr),c(de,Mt.data,Ge,sr,Er,kr,ye),oe(Et,de,se),Se?Et.persistentData=de:Tt.freeType(de)}else Mt instanceof ArrayBuffer&&(Et.dtype=5121,Et.dimension=de,oe(Et,Mt,se),Se&&(Et.persistentData=new Uint8Array(new Uint8Array(Mt))))}function te(Et){Qe.bufferCount--,Ve(Et),le.deleteBuffer(Et.buffer),Et.buffer=null,delete _e[Et.id]}var ne=0,_e={};_r.prototype.bind=function(){le.bindBuffer(this.type,this.buffer)},_r.prototype.destroy=function(){te(this)};var Pe=[];return Ze.profile&&(Qe.getTotalBufferSize=function(){var Et=0;return Object.keys(_e).forEach(function(Mt){Et+=_e[Mt].stats.size}),Et}),{create:function(Et,Mt,se,ce){function de(ye){var Ae=35044,Ge=null,sr=0,Er=0,kr=1;return Array.isArray(ye)||zt(ye)||b(ye)||ye instanceof ArrayBuffer?Ge=ye:typeof ye=="number"?sr=ye|0:ye&&("data"in ye&&(Ge=ye.data),"usage"in ye&&(Ae=$t[ye.usage]),"type"in ye&&(Er=It[ye.type]),"dimension"in ye&&(kr=ye.dimension|0),"length"in ye&&(sr=ye.length|0)),Se.bind(),Ge?Ht(Se,Ge,Ae,Er,kr,ce):(sr&&le.bufferData(Se.type,sr,Ae),Se.dtype=Er||5121,Se.usage=Ae,Se.dimension=kr,Se.byteLength=sr),Ze.profile&&(Se.stats.size=Se.byteLength*Pt[Se.dtype]),de}Qe.bufferCount++;var Se=new _r(Mt);return _e[Se.id]=Se,se||de(Et),de._reglType="buffer",de._buffer=Se,de.subdata=function(ye,Ae){var Ge=(Ae||0)|0,sr;if(Se.bind(),zt(ye)||ye instanceof ArrayBuffer)le.bufferSubData(Se.type,Ge,ye);else if(Array.isArray(ye)){if(0<ye.length)if(typeof ye[0]=="number"){var Er=Tt.allocType(Se.dtype,ye.length);T(Er,ye),le.bufferSubData(Se.type,Ge,Er),Tt.freeType(Er)}else(Array.isArray(ye[0])||zt(ye[0]))&&(sr=Nt(ye),Er=Qt(ye,sr,Se.dtype),le.bufferSubData(Se.type,Ge,Er),Tt.freeType(Er))}else if(b(ye)){sr=ye.shape;var kr=ye.stride,Mr=Er=0,Gr=0,ar=0;sr.length===1?(Er=sr[0],Mr=1,Gr=kr[0],ar=0):sr.length===2&&(Er=sr[0],Mr=sr[1],Gr=kr[0],ar=kr[1]),sr=Array.isArray(ye.data)?Se.dtype:u(ye.data),sr=Tt.allocType(sr,Er*Mr),c(sr,ye.data,Er,Mr,Gr,ar,ye.offset),le.bufferSubData(Se.type,Ge,sr),Tt.freeType(sr)}return de},Ze.profile&&(de.stats=Se.stats),de.destroy=function(){te(Se)},de},createStream:function(Et,Mt){var se=Pe.pop();return se||(se=new _r(Et)),se.bind(),Ht(se,Mt,35040,0,1,!1),se},destroyStream:function(Et){Pe.push(Et)},clear:function(){Rt(_e).forEach(te),Pe.forEach(te)},getBuffer:function(Et){return Et&&Et._buffer instanceof _r?Et._buffer:null},restore:function(){Rt(_e).forEach(function(Et){Et.buffer=le.createBuffer(),le.bindBuffer(Et.type,Et.buffer),le.bufferData(Et.type,Et.persistentData||Et.byteLength,Et.usage)})},_initBuffer:Ht}}function k(le,Qe,Ze,Ve){function _r(Et){this.id=ne++,te[this.id]=this,this.buffer=Et,this.primType=4,this.type=this.vertCount=0}function oe(Et,Mt,se,ce,de,Se,ye){Et.buffer.bind();var Ae;if(Mt?((Ae=ye)||zt(Mt)&&(!b(Mt)||zt(Mt.data))||(Ae=Qe.oes_element_index_uint?5125:5123),Ze._initBuffer(Et.buffer,Mt,se,Ae,3)):(le.bufferData(34963,Se,se),Et.buffer.dtype=Ae||5121,Et.buffer.usage=se,Et.buffer.dimension=3,Et.buffer.byteLength=Se),Ae=ye,!ye){switch(Et.buffer.dtype){case 5121:case 5120:Ae=5121;break;case 5123:case 5122:Ae=5123;break;case 5125:case 5124:Ae=5125}Et.buffer.dtype=Ae}Et.type=Ae,Mt=de,0>Mt&&(Mt=Et.buffer.byteLength,Ae===5123?Mt>>=1:Ae===5125&&(Mt>>=2)),Et.vertCount=Mt,Mt=ce,0>ce&&(Mt=4,ce=Et.buffer.dimension,ce===1&&(Mt=0),ce===2&&(Mt=1),ce===3&&(Mt=4)),Et.primType=Mt}function Ht(Et){Ve.elementsCount--,delete te[Et.id],Et.buffer.destroy(),Et.buffer=null}var te={},ne=0,_e={uint8:5121,uint16:5123};Qe.oes_element_index_uint&&(_e.uint32=5125),_r.prototype.bind=function(){this.buffer.bind()};var Pe=[];return{create:function(Et,Mt){function se(Se){if(Se)if(typeof Se=="number")ce(Se),de.primType=4,de.vertCount=Se|0,de.type=5121;else{var ye=null,Ae=35044,Ge=-1,sr=-1,Er=0,kr=0;Array.isArray(Se)||zt(Se)||b(Se)?ye=Se:("data"in Se&&(ye=Se.data),"usage"in Se&&(Ae=$t[Se.usage]),"primitive"in Se&&(Ge=Yt[Se.primitive]),"count"in Se&&(sr=Se.count|0),"type"in Se&&(kr=_e[Se.type]),"length"in Se?Er=Se.length|0:(Er=sr,kr===5123||kr===5122?Er*=2:(kr===5125||kr===5124)&&(Er*=4))),oe(de,ye,Ae,Ge,sr,Er,kr)}else ce(),de.primType=4,de.vertCount=0,de.type=5121;return se}var ce=Ze.create(null,34963,!0),de=new _r(ce._buffer);return Ve.elementsCount++,se(Et),se._reglType="elements",se._elements=de,se.subdata=function(Se,ye){return ce.subdata(Se,ye),se},se.destroy=function(){Ht(de)},se},createStream:function(Et){var Mt=Pe.pop();return Mt||(Mt=new _r(Ze.create(null,34963,!0,!1)._buffer)),oe(Mt,Et,35040,-1,-1,0,0),Mt},destroyStream:function(Et){Pe.push(Et)},getElements:function(Et){return typeof Et=="function"&&Et._elements instanceof _r?Et._elements:null},clear:function(){Rt(te).forEach(Ht)}}}function p(le){for(var Qe=Tt.allocType(5123,le.length),Ze=0;Ze<le.length;++Ze)if(isNaN(le[Ze]))Qe[Ze]=65535;else if(le[Ze]===1/0)Qe[Ze]=31744;else if(le[Ze]===-1/0)Qe[Ze]=64512;else{ve[0]=le[Ze];var oe=Re[0],Ve=oe>>>31<<15,_r=(oe<<1>>>24)-127,oe=oe>>13&1023;Qe[Ze]=-24>_r?Ve:-14>_r?Ve+(oe+1024>>-14-_r):15<_r?Ve+31744:Ve+(_r+15<<10)+oe}return Qe}function w(le){return Array.isArray(le)||zt(le)}function h(le){return"[object "+le+"]"}function D(le){return Array.isArray(le)&&(le.length===0||typeof le[0]=="number")}function S(le){return!!(Array.isArray(le)&&le.length!==0&&w(le[0]))}function M(le){return Object.prototype.toString.call(le)}function L(le){if(!le)return!1;var Qe=M(le);return 0<=St.indexOf(Qe)?!0:D(le)||S(le)||b(le)}function R(le,Qe){le.type===36193?(le.data=p(Qe),Tt.freeType(Qe)):le.data=Qe}function z(le,Qe,Ze,Ve,_r,oe){if(le=typeof Zt[le]<"u"?Zt[le]:Be[le]*Vt[Qe],oe&&(le*=6),_r){for(Ve=0;1<=Ze;)Ve+=le*Ze*Ze,Ze/=2;return Ve}return le*Ze*Ve}function P(le,Qe,Ze,Ve,_r,oe,Ht){function te(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function ne(Tr,gn){Tr.internalformat=gn.internalformat,Tr.format=gn.format,Tr.type=gn.type,Tr.compressed=gn.compressed,Tr.premultiplyAlpha=gn.premultiplyAlpha,Tr.flipY=gn.flipY,Tr.unpackAlignment=gn.unpackAlignment,Tr.colorSpace=gn.colorSpace,Tr.width=gn.width,Tr.height=gn.height,Tr.channels=gn.channels}function _e(Tr,gn){if(typeof gn=="object"&&gn){"premultiplyAlpha"in gn&&(Tr.premultiplyAlpha=gn.premultiplyAlpha),"flipY"in gn&&(Tr.flipY=gn.flipY),"alignment"in gn&&(Tr.unpackAlignment=gn.alignment),"colorSpace"in gn&&(Tr.colorSpace=or[gn.colorSpace]),"type"in gn&&(Tr.type=Dr[gn.type]);var hn=Tr.width,Sn=Tr.height,Zn=Tr.channels,fi=!1;"shape"in gn?(hn=gn.shape[0],Sn=gn.shape[1],gn.shape.length===3&&(Zn=gn.shape[2],fi=!0)):("radius"in gn&&(hn=Sn=gn.radius),"width"in gn&&(hn=gn.width),"height"in gn&&(Sn=gn.height),"channels"in gn&&(Zn=gn.channels,fi=!0)),Tr.width=hn|0,Tr.height=Sn|0,Tr.channels=Zn|0,hn=!1,"format"in gn&&(hn=gn.format,Sn=Tr.internalformat=Nr[hn],Tr.format=Gn[Sn],hn in Dr&&!("type"in gn)&&(Tr.type=Dr[hn]),hn in Fr&&(Tr.compressed=!0),hn=!0),!fi&&hn?Tr.channels=Be[Tr.format]:fi&&!hn&&Tr.channels!==Ie[Tr.format]&&(Tr.format=Tr.internalformat=Ie[Tr.channels])}}function Pe(Tr){le.pixelStorei(37440,Tr.flipY),le.pixelStorei(37441,Tr.premultiplyAlpha),le.pixelStorei(37443,Tr.colorSpace),le.pixelStorei(3317,Tr.unpackAlignment)}function Et(){te.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Mt(Tr,gn){var hn=null;if(L(gn)?hn=gn:gn&&(_e(Tr,gn),"x"in gn&&(Tr.xOffset=gn.x|0),"y"in gn&&(Tr.yOffset=gn.y|0),L(gn.data)&&(hn=gn.data)),gn.copy){var Sn=_r.viewportWidth,Zn=_r.viewportHeight;Tr.width=Tr.width||Sn-Tr.xOffset,Tr.height=Tr.height||Zn-Tr.yOffset,Tr.needsCopy=!0}else if(!hn)Tr.width=Tr.width||1,Tr.height=Tr.height||1,Tr.channels=Tr.channels||4;else if(zt(hn))Tr.channels=Tr.channels||4,Tr.data=hn,"type"in gn||Tr.type!==5121||(Tr.type=wt[Object.prototype.toString.call(hn)]|0);else if(D(hn)){switch(Tr.channels=Tr.channels||4,Sn=hn,Zn=Sn.length,Tr.type){case 5121:case 5123:case 5125:case 5126:Zn=Tt.allocType(Tr.type,Zn),Zn.set(Sn),Tr.data=Zn;break;case 36193:Tr.data=p(Sn)}Tr.alignment=1,Tr.needsFree=!0}else if(b(hn)){Sn=hn.data,Array.isArray(Sn)||Tr.type!==5121||(Tr.type=wt[Object.prototype.toString.call(Sn)]|0);var Zn=hn.shape,fi=hn.stride,ri,Rn,jn,Gi;Zn.length===3?(jn=Zn[2],Gi=fi[2]):Gi=jn=1,ri=Zn[0],Rn=Zn[1],Zn=fi[0],fi=fi[1],Tr.alignment=1,Tr.width=ri,Tr.height=Rn,Tr.channels=jn,Tr.format=Tr.internalformat=Ie[jn],Tr.needsFree=!0,ri=Gi,hn=hn.offset,jn=Tr.width,Gi=Tr.height,Rn=Tr.channels;for(var fa=Tt.allocType(Tr.type===36193?5126:Tr.type,jn*Gi*Rn),Ue=0,pr=0;pr<Gi;++pr)for(var an=0;an<jn;++an)for(var vn=0;vn<Rn;++vn)fa[Ue++]=Sn[Zn*an+fi*pr+ri*vn+hn];R(Tr,fa)}else if(M(hn)===Ye||M(hn)===ze||M(hn)===Ee)M(hn)===Ye||M(hn)===ze?Tr.element=hn:Tr.element=hn.canvas,Tr.width=Tr.element.width,Tr.height=Tr.element.height,Tr.channels=4;else if(M(hn)===Wt)Tr.element=hn,Tr.width=hn.width,Tr.height=hn.height,Tr.channels=4;else if(M(hn)===ee)Tr.element=hn,Tr.width=hn.naturalWidth,Tr.height=hn.naturalHeight,Tr.channels=4;else if(M(hn)===Xt)Tr.element=hn,Tr.width=hn.videoWidth,Tr.height=hn.videoHeight,Tr.channels=4;else if(S(hn)){for(Sn=Tr.width||hn[0].length,Zn=Tr.height||hn.length,fi=Tr.channels,fi=w(hn[0][0])?fi||hn[0][0].length:fi||1,ri=Gt.shape(hn),jn=1,Gi=0;Gi<ri.length;++Gi)jn*=ri[Gi];jn=Tt.allocType(Tr.type===36193?5126:Tr.type,jn),Gt.flatten(hn,ri,"",jn),R(Tr,jn),Tr.alignment=1,Tr.width=Sn,Tr.height=Zn,Tr.channels=fi,Tr.format=Tr.internalformat=Ie[fi],Tr.needsFree=!0}}function se(Tr,gn,hn,Sn,Zn){var fi=Tr.element,ri=Tr.data,Rn=Tr.internalformat,jn=Tr.format,Gi=Tr.type,fa=Tr.width,Ue=Tr.height;Pe(Tr),fi?le.texSubImage2D(gn,Zn,hn,Sn,jn,Gi,fi):Tr.compressed?le.compressedTexSubImage2D(gn,Zn,hn,Sn,Rn,fa,Ue,ri):Tr.needsCopy?(Ve(),le.copyTexSubImage2D(gn,Zn,hn,Sn,Tr.xOffset,Tr.yOffset,fa,Ue)):le.texSubImage2D(gn,Zn,hn,Sn,fa,Ue,jn,Gi,ri)}function ce(){return yi.pop()||new Et}function de(Tr){Tr.needsFree&&Tt.freeType(Tr.data),Et.call(Tr),yi.push(Tr)}function Se(){te.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function ye(Tr,gn,hn){var Sn=Tr.images[0]=ce();Tr.mipmask=1,Sn.width=Tr.width=gn,Sn.height=Tr.height=hn,Sn.channels=Tr.channels=4}function Ae(Tr,gn){var hn=null;if(L(gn))hn=Tr.images[0]=ce(),ne(hn,Tr),Mt(hn,gn),Tr.mipmask=1;else if(_e(Tr,gn),Array.isArray(gn.mipmap))for(var Sn=gn.mipmap,Zn=0;Zn<Sn.length;++Zn)hn=Tr.images[Zn]=ce(),ne(hn,Tr),hn.width>>=Zn,hn.height>>=Zn,Mt(hn,Sn[Zn]),Tr.mipmask|=1<<Zn;else hn=Tr.images[0]=ce(),ne(hn,Tr),Mt(hn,gn),Tr.mipmask=1;ne(Tr,Tr.images[0])}function Ge(Tr,gn){for(var hn=Tr.images,Sn=0;Sn<hn.length&&hn[Sn];++Sn){var Zn=hn[Sn],fi=gn,ri=Sn,Rn=Zn.element,jn=Zn.data,Gi=Zn.internalformat,fa=Zn.format,Ue=Zn.type,pr=Zn.width,an=Zn.height;Pe(Zn),Rn?le.texImage2D(fi,ri,fa,fa,Ue,Rn):Zn.compressed?le.compressedTexImage2D(fi,ri,Gi,pr,an,0,jn):Zn.needsCopy?(Ve(),le.copyTexImage2D(fi,ri,fa,Zn.xOffset,Zn.yOffset,pr,an,0)):le.texImage2D(fi,ri,fa,pr,an,0,fa,Ue,jn||null)}}function sr(){var Tr=Pi.pop()||new Se;te.call(Tr);for(var gn=Tr.mipmask=0;16>gn;++gn)Tr.images[gn]=null;return Tr}function Er(Tr){for(var gn=Tr.images,hn=0;hn<gn.length;++hn)gn[hn]&&de(gn[hn]),gn[hn]=null;Pi.push(Tr)}function kr(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function Mr(Tr,gn){"min"in gn&&(Tr.minFilter=$e[gn.min],0<=ir.indexOf(Tr.minFilter)&&!("faces"in gn)&&(Tr.genMipmaps=!0)),"mag"in gn&&(Tr.magFilter=Le[gn.mag]);var hn=Tr.wrapS,Sn=Tr.wrapT;if("wrap"in gn){var Zn=gn.wrap;typeof Zn=="string"?hn=Sn=ae[Zn]:Array.isArray(Zn)&&(hn=ae[Zn[0]],Sn=ae[Zn[1]])}else"wrapS"in gn&&(hn=ae[gn.wrapS]),"wrapT"in gn&&(Sn=ae[gn.wrapT]);if(Tr.wrapS=hn,Tr.wrapT=Sn,"anisotropic"in gn&&(Tr.anisotropic=gn.anisotropic),"mipmap"in gn){switch(hn=!1,typeof gn.mipmap){case"string":Tr.mipmapHint=Cr[gn.mipmap],hn=Tr.genMipmaps=!0;break;case"boolean":hn=Tr.genMipmaps=gn.mipmap;break;case"object":Tr.genMipmaps=!1,hn=!0}!hn||"min"in gn||(Tr.minFilter=9984)}}function Gr(Tr,gn){le.texParameteri(gn,10241,Tr.minFilter),le.texParameteri(gn,10240,Tr.magFilter),le.texParameteri(gn,10242,Tr.wrapS),le.texParameteri(gn,10243,Tr.wrapT),Qe.ext_texture_filter_anisotropic&&le.texParameteri(gn,34046,Tr.anisotropic),Tr.genMipmaps&&(le.hint(33170,Tr.mipmapHint),le.generateMipmap(gn))}function ar(Tr){te.call(this),this.mipmask=0,this.internalformat=6408,this.id=pa++,this.refCount=1,this.target=Tr,this.texture=le.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new kr,Ht.profile&&(this.stats={size:0})}function xr(Tr){le.activeTexture(33984),le.bindTexture(Tr.target,Tr.texture)}function Ir(){var Tr=ji[0];Tr?le.bindTexture(Tr.target,Tr.texture):le.bindTexture(3553,null)}function Hr(Tr){var gn=Tr.texture,hn=Tr.unit,Sn=Tr.target;0<=hn&&(le.activeTexture(33984+hn),le.bindTexture(Sn,null),ji[hn]=null),le.deleteTexture(gn),Tr.texture=null,Tr.params=null,Tr.pixels=null,Tr.refCount=0,delete Wi[Tr.id],oe.textureCount--}var Cr={"don't care":4352,"dont care":4352,nice:4354,fast:4353},ae={repeat:10497,clamp:33071,mirror:33648},Le={nearest:9728,linear:9729},$e=ct({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},Le),or={none:0,browser:37444},Dr={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},Nr={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},Fr={};Qe.ext_srgb&&(Nr.srgb=35904,Nr.srgba=35906),Qe.oes_texture_float&&(Dr.float32=Dr.float=5126),Qe.oes_texture_half_float&&(Dr.float16=Dr["half float"]=36193),Qe.webgl_depth_texture&&(ct(Nr,{depth:6402,"depth stencil":34041}),ct(Dr,{uint16:5123,uint32:5125,"depth stencil":34042})),Qe.webgl_compressed_texture_s3tc&&ct(Fr,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),Qe.webgl_compressed_texture_atc&&ct(Fr,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),Qe.webgl_compressed_texture_pvrtc&&ct(Fr,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),Qe.webgl_compressed_texture_etc1&&(Fr["rgb etc1"]=36196);var Ar=Array.prototype.slice.call(le.getParameter(34467));Object.keys(Fr).forEach(function(Tr){var gn=Fr[Tr];0<=Ar.indexOf(gn)&&(Nr[Tr]=gn)});var Xr=Object.keys(Nr);Ze.textureFormats=Xr;var Tn=[];Object.keys(Nr).forEach(function(Tr){Tn[Nr[Tr]]=Tr});var un=[];Object.keys(Dr).forEach(function(Tr){un[Dr[Tr]]=Tr});var Un=[];Object.keys(Le).forEach(function(Tr){Un[Le[Tr]]=Tr});var Dn=[];Object.keys($e).forEach(function(Tr){Dn[$e[Tr]]=Tr});var Xn=[];Object.keys(ae).forEach(function(Tr){Xn[ae[Tr]]=Tr});var Gn=Xr.reduce(function(Tr,gn){var hn=Nr[gn];return hn===6409||hn===6406||hn===6409||hn===6410||hn===6402||hn===34041||Qe.ext_srgb&&(hn===35904||hn===35906)?Tr[hn]=hn:hn===32855||0<=gn.indexOf("rgba")?Tr[hn]=6408:Tr[hn]=6407,Tr},{}),yi=[],Pi=[],pa=0,Wi={},Ji=Ze.maxTextureUnits,ji=Array(Ji).map(function(){return null});return ct(ar.prototype,{bind:function(){this.bindCount+=1;var Tr=this.unit;if(0>Tr){for(var gn=0;gn<Ji;++gn){var hn=ji[gn];if(hn){if(0<hn.bindCount)continue;hn.unit=-1}ji[gn]=this,Tr=gn;break}Ht.profile&&oe.maxTextureUnits<Tr+1&&(oe.maxTextureUnits=Tr+1),this.unit=Tr,le.activeTexture(33984+Tr),le.bindTexture(this.target,this.texture)}return Tr},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&Hr(this)}}),Ht.profile&&(oe.getTotalTextureSize=function(){var Tr=0;return Object.keys(Wi).forEach(function(gn){Tr+=Wi[gn].stats.size}),Tr}),{create2D:function(Tr,gn){function hn(Zn,fi){var ri=Sn.texInfo;kr.call(ri);var Rn=sr();return typeof Zn=="number"?typeof fi=="number"?ye(Rn,Zn|0,fi|0):ye(Rn,Zn|0,Zn|0):Zn?(Mr(ri,Zn),Ae(Rn,Zn)):ye(Rn,1,1),ri.genMipmaps&&(Rn.mipmask=(Rn.width<<1)-1),Sn.mipmask=Rn.mipmask,ne(Sn,Rn),Sn.internalformat=Rn.internalformat,hn.width=Rn.width,hn.height=Rn.height,xr(Sn),Ge(Rn,3553),Gr(ri,3553),Ir(),Er(Rn),Ht.profile&&(Sn.stats.size=z(Sn.internalformat,Sn.type,Rn.width,Rn.height,ri.genMipmaps,!1)),hn.format=Tn[Sn.internalformat],hn.type=un[Sn.type],hn.mag=Un[ri.magFilter],hn.min=Dn[ri.minFilter],hn.wrapS=Xn[ri.wrapS],hn.wrapT=Xn[ri.wrapT],hn}var Sn=new ar(3553);return Wi[Sn.id]=Sn,oe.textureCount++,hn(Tr,gn),hn.subimage=function(Zn,fi,ri,Rn){fi|=0,ri|=0,Rn|=0;var jn=ce();return ne(jn,Sn),jn.width=0,jn.height=0,Mt(jn,Zn),jn.width=jn.width||(Sn.width>>Rn)-fi,jn.height=jn.height||(Sn.height>>Rn)-ri,xr(Sn),se(jn,3553,fi,ri,Rn),Ir(),de(jn),hn},hn.resize=function(Zn,fi){var ri=Zn|0,Rn=fi|0||ri;if(ri===Sn.width&&Rn===Sn.height)return hn;hn.width=Sn.width=ri,hn.height=Sn.height=Rn,xr(Sn);for(var jn=0;Sn.mipmask>>jn;++jn){var Gi=ri>>jn,fa=Rn>>jn;if(!Gi||!fa)break;le.texImage2D(3553,jn,Sn.format,Gi,fa,0,Sn.format,Sn.type,null)}return Ir(),Ht.profile&&(Sn.stats.size=z(Sn.internalformat,Sn.type,ri,Rn,!1,!1)),hn},hn._reglType="texture2d",hn._texture=Sn,Ht.profile&&(hn.stats=Sn.stats),hn.destroy=function(){Sn.decRef()},hn},createCube:function(Tr,gn,hn,Sn,Zn,fi){function ri(Gi,fa,Ue,pr,an,vn){var rn,An=Rn.texInfo;for(kr.call(An),rn=0;6>rn;++rn)jn[rn]=sr();if(typeof Gi=="number"||!Gi)for(Gi=Gi|0||1,rn=0;6>rn;++rn)ye(jn[rn],Gi,Gi);else if(typeof Gi=="object")if(fa)Ae(jn[0],Gi),Ae(jn[1],fa),Ae(jn[2],Ue),Ae(jn[3],pr),Ae(jn[4],an),Ae(jn[5],vn);else if(Mr(An,Gi),_e(Rn,Gi),"faces"in Gi)for(Gi=Gi.faces,rn=0;6>rn;++rn)ne(jn[rn],Rn),Ae(jn[rn],Gi[rn]);else for(rn=0;6>rn;++rn)Ae(jn[rn],Gi);for(ne(Rn,jn[0]),Rn.mipmask=An.genMipmaps?(jn[0].width<<1)-1:jn[0].mipmask,Rn.internalformat=jn[0].internalformat,ri.width=jn[0].width,ri.height=jn[0].height,xr(Rn),rn=0;6>rn;++rn)Ge(jn[rn],34069+rn);for(Gr(An,34067),Ir(),Ht.profile&&(Rn.stats.size=z(Rn.internalformat,Rn.type,ri.width,ri.height,An.genMipmaps,!0)),ri.format=Tn[Rn.internalformat],ri.type=un[Rn.type],ri.mag=Un[An.magFilter],ri.min=Dn[An.minFilter],ri.wrapS=Xn[An.wrapS],ri.wrapT=Xn[An.wrapT],rn=0;6>rn;++rn)Er(jn[rn]);return ri}var Rn=new ar(34067);Wi[Rn.id]=Rn,oe.cubeCount++;var jn=Array(6);return ri(Tr,gn,hn,Sn,Zn,fi),ri.subimage=function(Gi,fa,Ue,pr,an){Ue|=0,pr|=0,an|=0;var vn=ce();return ne(vn,Rn),vn.width=0,vn.height=0,Mt(vn,fa),vn.width=vn.width||(Rn.width>>an)-Ue,vn.height=vn.height||(Rn.height>>an)-pr,xr(Rn),se(vn,34069+Gi,Ue,pr,an),Ir(),de(vn),ri},ri.resize=function(Gi){if(Gi|=0,Gi!==Rn.width){ri.width=Rn.width=Gi,ri.height=Rn.height=Gi,xr(Rn);for(var fa=0;6>fa;++fa)for(var Ue=0;Rn.mipmask>>Ue;++Ue)le.texImage2D(34069+fa,Ue,Rn.format,Gi>>Ue,Gi>>Ue,0,Rn.format,Rn.type,null);return Ir(),Ht.profile&&(Rn.stats.size=z(Rn.internalformat,Rn.type,ri.width,ri.height,!1,!0)),ri}},ri._reglType="textureCube",ri._texture=Rn,Ht.profile&&(ri.stats=Rn.stats),ri.destroy=function(){Rn.decRef()},ri},clear:function(){for(var Tr=0;Tr<Ji;++Tr)le.activeTexture(33984+Tr),le.bindTexture(3553,null),ji[Tr]=null;Rt(Wi).forEach(Hr),oe.cubeCount=0,oe.textureCount=0},getTexture:function(Tr){return null},restore:function(){for(var Tr=0;Tr<Ji;++Tr){var gn=ji[Tr];gn&&(gn.bindCount=0,gn.unit=-1,ji[Tr]=null)}Rt(Wi).forEach(function(hn){hn.texture=le.createTexture(),le.bindTexture(hn.target,hn.texture);for(var Sn=0;32>Sn;++Sn)if((hn.mipmask&1<<Sn)!==0)if(hn.target===3553)le.texImage2D(3553,Sn,hn.internalformat,hn.width>>Sn,hn.height>>Sn,0,hn.internalformat,hn.type,null);else for(var Zn=0;6>Zn;++Zn)le.texImage2D(34069+Zn,Sn,hn.internalformat,hn.width>>Sn,hn.height>>Sn,0,hn.internalformat,hn.type,null);Gr(hn.texInfo,hn.target)})},refresh:function(){for(var Tr=0;Tr<Ji;++Tr){var gn=ji[Tr];gn&&(gn.bindCount=0,gn.unit=-1,ji[Tr]=null),le.activeTexture(33984+Tr),le.bindTexture(3553,null),le.bindTexture(34067,null)}}}}function I(le,Qe,Ze,Ve,_r,oe){function Ht(ar,xr,Ir){this.target=ar,this.texture=xr,this.renderbuffer=Ir;var Hr=ar=0;xr?(ar=xr.width,Hr=xr.height):Ir&&(ar=Ir.width,Hr=Ir.height),this.width=ar,this.height=Hr}function te(ar){ar&&(ar.texture&&ar.texture._texture.decRef(),ar.renderbuffer&&ar.renderbuffer._renderbuffer.decRef())}function ne(ar,xr,Ir){ar&&(ar.texture?ar.texture._texture.refCount+=1:ar.renderbuffer._renderbuffer.refCount+=1)}function _e(ar,xr){xr&&(xr.texture?le.framebufferTexture2D(36160,ar,xr.target,xr.texture._texture.texture,0):le.framebufferRenderbuffer(36160,ar,36161,xr.renderbuffer._renderbuffer.renderbuffer))}function Pe(ar){var xr=3553,Ir=null,Hr=null,Cr=ar;return typeof ar=="object"&&(Cr=ar.data,"target"in ar&&(xr=ar.target|0)),ar=Cr._reglType,ar==="texture2d"||ar==="textureCube"?Ir=Cr:ar==="renderbuffer"&&(Hr=Cr,xr=36161),new Ht(xr,Ir,Hr)}function Et(ar,xr,Ir,Hr,Cr){return Ir?(ar=Ve.create2D({width:ar,height:xr,format:Hr,type:Cr}),ar._texture.refCount=0,new Ht(3553,ar,null)):(ar=_r.create({width:ar,height:xr,format:Hr}),ar._renderbuffer.refCount=0,new Ht(36161,null,ar))}function Mt(ar){return ar&&(ar.texture||ar.renderbuffer)}function se(ar,xr,Ir){ar&&(ar.texture?ar.texture.resize(xr,Ir):ar.renderbuffer&&ar.renderbuffer.resize(xr,Ir),ar.width=xr,ar.height=Ir)}function ce(){this.id=Mr++,Gr[this.id]=this,this.framebuffer=le.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function de(ar){ar.colorAttachments.forEach(te),te(ar.depthAttachment),te(ar.stencilAttachment),te(ar.depthStencilAttachment)}function Se(ar){le.deleteFramebuffer(ar.framebuffer),ar.framebuffer=null,oe.framebufferCount--,delete Gr[ar.id]}function ye(ar){var xr;le.bindFramebuffer(36160,ar.framebuffer);var Ir=ar.colorAttachments;for(xr=0;xr<Ir.length;++xr)_e(36064+xr,Ir[xr]);for(xr=Ir.length;xr<Ze.maxColorAttachments;++xr)le.framebufferTexture2D(36160,36064+xr,3553,null,0);le.framebufferTexture2D(36160,33306,3553,null,0),le.framebufferTexture2D(36160,36096,3553,null,0),le.framebufferTexture2D(36160,36128,3553,null,0),_e(36096,ar.depthAttachment),_e(36128,ar.stencilAttachment),_e(33306,ar.depthStencilAttachment),le.checkFramebufferStatus(36160),le.isContextLost(),le.bindFramebuffer(36160,Ge.next?Ge.next.framebuffer:null),Ge.cur=Ge.next,le.getError()}function Ae(ar,xr){function Ir(Cr,ae){var Le,$e=0,or=0,Dr=!0,Nr=!0;Le=null;var Fr=!0,Ar="rgba",Xr="uint8",Tn=1,un=null,Un=null,Dn=null,Xn=!1;typeof Cr=="number"?($e=Cr|0,or=ae|0||$e):Cr?("shape"in Cr?(or=Cr.shape,$e=or[0],or=or[1]):("radius"in Cr&&($e=or=Cr.radius),"width"in Cr&&($e=Cr.width),"height"in Cr&&(or=Cr.height)),("color"in Cr||"colors"in Cr)&&(Le=Cr.color||Cr.colors),Le||("colorCount"in Cr&&(Tn=Cr.colorCount|0),"colorTexture"in Cr&&(Fr=!!Cr.colorTexture,Ar="rgba4"),"colorType"in Cr&&(Xr=Cr.colorType,!Fr)&&(Xr==="half float"||Xr==="float16"?Ar="rgba16f":(Xr==="float"||Xr==="float32")&&(Ar="rgba32f")),"colorFormat"in Cr&&(Ar=Cr.colorFormat,0<=sr.indexOf(Ar)?Fr=!0:0<=Er.indexOf(Ar)&&(Fr=!1))),("depthTexture"in Cr||"depthStencilTexture"in Cr)&&(Xn=!(!Cr.depthTexture&&!Cr.depthStencilTexture)),"depth"in Cr&&(typeof Cr.depth=="boolean"?Dr=Cr.depth:(un=Cr.depth,Nr=!1)),"stencil"in Cr&&(typeof Cr.stencil=="boolean"?Nr=Cr.stencil:(Un=Cr.stencil,Dr=!1)),"depthStencil"in Cr&&(typeof Cr.depthStencil=="boolean"?Dr=Nr=Cr.depthStencil:(Dn=Cr.depthStencil,Nr=Dr=!1))):$e=or=1;var Gn=null,yi=null,Pi=null,pa=null;if(Array.isArray(Le))Gn=Le.map(Pe);else if(Le)Gn=[Pe(Le)];else for(Gn=Array(Tn),Le=0;Le<Tn;++Le)Gn[Le]=Et($e,or,Fr,Ar,Xr);for($e=$e||Gn[0].width,or=or||Gn[0].height,un?yi=Pe(un):Dr&&!Nr&&(yi=Et($e,or,Xn,"depth","uint32")),Un?Pi=Pe(Un):Nr&&!Dr&&(Pi=Et($e,or,!1,"stencil","uint8")),Dn?pa=Pe(Dn):!un&&!Un&&Nr&&Dr&&(pa=Et($e,or,Xn,"depth stencil","depth stencil")),Dr=null,Le=0;Le<Gn.length;++Le)ne(Gn[Le]),Gn[Le]&&Gn[Le].texture&&(Nr=me[Gn[Le].texture._texture.format]*Ne[Gn[Le].texture._texture.type],Dr===null&&(Dr=Nr));return ne(yi),ne(Pi),ne(pa),de(Hr),Hr.width=$e,Hr.height=or,Hr.colorAttachments=Gn,Hr.depthAttachment=yi,Hr.stencilAttachment=Pi,Hr.depthStencilAttachment=pa,Ir.color=Gn.map(Mt),Ir.depth=Mt(yi),Ir.stencil=Mt(Pi),Ir.depthStencil=Mt(pa),Ir.width=Hr.width,Ir.height=Hr.height,ye(Hr),Ir}var Hr=new ce;return oe.framebufferCount++,Ir(ar,xr),ct(Ir,{resize:function(Cr,ae){var Le=Math.max(Cr|0,1),$e=Math.max(ae|0||Le,1);if(Le===Hr.width&&$e===Hr.height)return Ir;for(var or=Hr.colorAttachments,Dr=0;Dr<or.length;++Dr)se(or[Dr],Le,$e);return se(Hr.depthAttachment,Le,$e),se(Hr.stencilAttachment,Le,$e),se(Hr.depthStencilAttachment,Le,$e),Hr.width=Ir.width=Le,Hr.height=Ir.height=$e,ye(Hr),Ir},_reglType:"framebuffer",_framebuffer:Hr,destroy:function(){Se(Hr),de(Hr)},use:function(Cr){Ge.setFBO({framebuffer:Ir},Cr)}})}var Ge={cur:null,next:null,dirty:!1,setFBO:null},sr=["rgba"],Er=["rgba4","rgb565","rgb5 a1"];Qe.ext_srgb&&Er.push("srgba"),Qe.ext_color_buffer_half_float&&Er.push("rgba16f","rgb16f"),Qe.webgl_color_buffer_float&&Er.push("rgba32f");var kr=["uint8"];Qe.oes_texture_half_float&&kr.push("half float","float16"),Qe.oes_texture_float&&kr.push("float","float32");var Mr=0,Gr={};return ct(Ge,{getFramebuffer:function(ar){return typeof ar=="function"&&ar._reglType==="framebuffer"&&(ar=ar._framebuffer,ar instanceof ce)?ar:null},create:Ae,createCube:function(ar){function xr(Hr){var Cr,ae={color:null},Le=0,$e=null;Cr="rgba";var or="uint8",Dr=1;if(typeof Hr=="number"?Le=Hr|0:Hr?("shape"in Hr?Le=Hr.shape[0]:("radius"in Hr&&(Le=Hr.radius|0),"width"in Hr?Le=Hr.width|0:"height"in Hr&&(Le=Hr.height|0)),("color"in Hr||"colors"in Hr)&&($e=Hr.color||Hr.colors),$e||("colorCount"in Hr&&(Dr=Hr.colorCount|0),"colorType"in Hr&&(or=Hr.colorType),"colorFormat"in Hr&&(Cr=Hr.colorFormat)),"depth"in Hr&&(ae.depth=Hr.depth),"stencil"in Hr&&(ae.stencil=Hr.stencil),"depthStencil"in Hr&&(ae.depthStencil=Hr.depthStencil)):Le=1,$e)if(Array.isArray($e))for(Hr=[],Cr=0;Cr<$e.length;++Cr)Hr[Cr]=$e[Cr];else Hr=[$e];else for(Hr=Array(Dr),$e={radius:Le,format:Cr,type:or},Cr=0;Cr<Dr;++Cr)Hr[Cr]=Ve.createCube($e);for(ae.color=Array(Hr.length),Cr=0;Cr<Hr.length;++Cr)Dr=Hr[Cr],Le=Le||Dr.width,ae.color[Cr]={target:34069,data:Hr[Cr]};for(Cr=0;6>Cr;++Cr){for(Dr=0;Dr<Hr.length;++Dr)ae.color[Dr].target=34069+Cr;0<Cr&&(ae.depth=Ir[0].depth,ae.stencil=Ir[0].stencil,ae.depthStencil=Ir[0].depthStencil),Ir[Cr]?Ir[Cr](ae):Ir[Cr]=Ae(ae)}return ct(xr,{width:Le,height:Le,color:Hr})}var Ir=Array(6);return xr(ar),ct(xr,{faces:Ir,resize:function(Hr){var Cr=Hr|0;if(Cr===xr.width)return xr;var ae=xr.color;for(Hr=0;Hr<ae.length;++Hr)ae[Hr].resize(Cr);for(Hr=0;6>Hr;++Hr)Ir[Hr].resize(Cr);return xr.width=xr.height=Cr,xr},_reglType:"framebufferCube",destroy:function(){Ir.forEach(function(Hr){Hr.destroy()})}})},clear:function(){Rt(Gr).forEach(Se)},restore:function(){Ge.cur=null,Ge.next=null,Ge.dirty=!0,Rt(Gr).forEach(function(ar){ar.framebuffer=le.createFramebuffer(),ye(ar)})}})}function U(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function O(le,Qe,Ze,Ve,_r,oe,Ht){function te(ye){if(ye!==Se.currentVAO){var Ae=Qe.oes_vertex_array_object;ye?Ae.bindVertexArrayOES(ye.vao):Ae.bindVertexArrayOES(null),Se.currentVAO=ye}}function ne(ye){if(ye!==Se.currentVAO){if(ye)ye.bindAttrs();else{for(var Ae=Qe.angle_instanced_arrays,Ge=0;Ge<se.length;++Ge){var sr=se[Ge];sr.buffer?(le.enableVertexAttribArray(Ge),sr.buffer.bind(),le.vertexAttribPointer(Ge,sr.size,sr.type,sr.normalized,sr.stride,sr.offfset),Ae&&sr.divisor&&Ae.vertexAttribDivisorANGLE(Ge,sr.divisor)):(le.disableVertexAttribArray(Ge),le.vertexAttrib4f(Ge,sr.x,sr.y,sr.z,sr.w))}Ht.elements?le.bindBuffer(34963,Ht.elements.buffer.buffer):le.bindBuffer(34963,null)}Se.currentVAO=ye}}function _e(){Rt(de).forEach(function(ye){ye.destroy()})}function Pe(){this.id=++ce,this.attributes=[],this.elements=null,this.ownsElements=!1,this.offset=this.count=0,this.instances=-1,this.primitive=4;var ye=Qe.oes_vertex_array_object;this.vao=ye?ye.createVertexArrayOES():null,de[this.id]=this,this.buffers=[]}function Et(){Qe.oes_vertex_array_object&&Rt(de).forEach(function(ye){ye.refresh()})}var Mt=Ze.maxAttributes,se=Array(Mt);for(Ze=0;Ze<Mt;++Ze)se[Ze]=new U;var ce=0,de={},Se={Record:U,scope:{},state:se,currentVAO:null,targetVAO:null,restore:Qe.oes_vertex_array_object?Et:function(){},createVAO:function(ye){function Ae(sr){var Er;Array.isArray(sr)?(Er=sr,Ge.elements&&Ge.ownsElements&&Ge.elements.destroy(),Ge.elements=null,Ge.ownsElements=!1,Ge.offset=0,Ge.count=0,Ge.instances=-1,Ge.primitive=4):(sr.elements?(Er=sr.elements,Ge.ownsElements?(typeof Er=="function"&&Er._reglType==="elements"?Ge.elements.destroy():Ge.elements(Er),Ge.ownsElements=!1):oe.getElements(sr.elements)?(Ge.elements=sr.elements,Ge.ownsElements=!1):(Ge.elements=oe.create(sr.elements),Ge.ownsElements=!0)):(Ge.elements=null,Ge.ownsElements=!1),Er=sr.attributes,Ge.offset=0,Ge.count=-1,Ge.instances=-1,Ge.primitive=4,Ge.elements&&(Ge.count=Ge.elements._elements.vertCount,Ge.primitive=Ge.elements._elements.primType),"offset"in sr&&(Ge.offset=sr.offset|0),"count"in sr&&(Ge.count=sr.count|0),"instances"in sr&&(Ge.instances=sr.instances|0),"primitive"in sr&&(Ge.primitive=Yt[sr.primitive])),sr={};var kr=Ge.attributes;kr.length=Er.length;for(var Mr=0;Mr<Er.length;++Mr){var Gr=Er[Mr],ar=kr[Mr]=new U,xr=Gr.data||Gr;if(Array.isArray(xr)||zt(xr)||b(xr)){var Ir;Ge.buffers[Mr]&&(Ir=Ge.buffers[Mr],zt(xr)&&Ir._buffer.byteLength>=xr.byteLength?Ir.subdata(xr):(Ir.destroy(),Ge.buffers[Mr]=null)),Ge.buffers[Mr]||(Ir=Ge.buffers[Mr]=_r.create(Gr,34962,!1,!0)),ar.buffer=_r.getBuffer(Ir),ar.size=ar.buffer.dimension|0,ar.normalized=!1,ar.type=ar.buffer.dtype,ar.offset=0,ar.stride=0,ar.divisor=0,ar.state=1,sr[Mr]=1}else _r.getBuffer(Gr)?(ar.buffer=_r.getBuffer(Gr),ar.size=ar.buffer.dimension|0,ar.normalized=!1,ar.type=ar.buffer.dtype,ar.offset=0,ar.stride=0,ar.divisor=0,ar.state=1):_r.getBuffer(Gr.buffer)?(ar.buffer=_r.getBuffer(Gr.buffer),ar.size=(+Gr.size||ar.buffer.dimension)|0,ar.normalized=!!Gr.normalized||!1,ar.type="type"in Gr?It[Gr.type]:ar.buffer.dtype,ar.offset=(Gr.offset||0)|0,ar.stride=(Gr.stride||0)|0,ar.divisor=(Gr.divisor||0)|0,ar.state=1):"x"in Gr&&(ar.x=+Gr.x||0,ar.y=+Gr.y||0,ar.z=+Gr.z||0,ar.w=+Gr.w||0,ar.state=2)}for(Ir=0;Ir<Ge.buffers.length;++Ir)!sr[Ir]&&Ge.buffers[Ir]&&(Ge.buffers[Ir].destroy(),Ge.buffers[Ir]=null);return Ge.refresh(),Ae}var Ge=new Pe;return Ve.vaoCount+=1,Ae.destroy=function(){for(var sr=0;sr<Ge.buffers.length;++sr)Ge.buffers[sr]&&Ge.buffers[sr].destroy();Ge.buffers.length=0,Ge.ownsElements&&(Ge.elements.destroy(),Ge.elements=null,Ge.ownsElements=!1),Ge.destroy()},Ae._vao=Ge,Ae._reglType="vao",Ae(ye)},getVAO:function(ye){return typeof ye=="function"&&ye._vao?ye._vao:null},destroyBuffer:function(ye){for(var Ae=0;Ae<se.length;++Ae){var Ge=se[Ae];Ge.buffer===ye&&(le.disableVertexAttribArray(Ae),Ge.buffer=null)}},setVAO:Qe.oes_vertex_array_object?te:ne,clear:Qe.oes_vertex_array_object?_e:function(){}};return Pe.prototype.bindAttrs=function(){for(var ye=Qe.angle_instanced_arrays,Ae=this.attributes,Ge=0;Ge<Ae.length;++Ge){var sr=Ae[Ge];sr.buffer?(le.enableVertexAttribArray(Ge),le.bindBuffer(34962,sr.buffer.buffer),le.vertexAttribPointer(Ge,sr.size,sr.type,sr.normalized,sr.stride,sr.offset),ye&&sr.divisor&&ye.vertexAttribDivisorANGLE(Ge,sr.divisor)):(le.disableVertexAttribArray(Ge),le.vertexAttrib4f(Ge,sr.x,sr.y,sr.z,sr.w))}for(ye=Ae.length;ye<Mt;++ye)le.disableVertexAttribArray(ye);(ye=oe.getElements(this.elements))?le.bindBuffer(34963,ye.buffer.buffer):le.bindBuffer(34963,null)},Pe.prototype.refresh=function(){var ye=Qe.oes_vertex_array_object;ye&&(ye.bindVertexArrayOES(this.vao),this.bindAttrs(),Se.currentVAO=null,ye.bindVertexArrayOES(null))},Pe.prototype.destroy=function(){if(this.vao){var ye=Qe.oes_vertex_array_object;this===Se.currentVAO&&(Se.currentVAO=null,ye.bindVertexArrayOES(null)),ye.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),de[this.id]&&(delete de[this.id],--Ve.vaoCount)},Se}function G(le,Qe,Ze,Ve){function _r(ce,de,Se,ye){this.name=ce,this.id=de,this.location=Se,this.info=ye}function oe(ce,de){for(var Se=0;Se<ce.length;++Se)if(ce[Se].id===de.id){ce[Se].location=de.location;return}ce.push(de)}function Ht(ce,de,Se){Se=ce===35632?_e:Pe;var ye=Se[de];if(!ye){var Ae=Qe.str(de),ye=le.createShader(ce);le.shaderSource(ye,Ae),le.compileShader(ye),Se[de]=ye}return ye}function te(ce,de){this.id=se++,this.fragId=ce,this.vertId=de,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,Ve.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function ne(ce,de,Se){var ye;ye=Ht(35632,ce.fragId);var Ae=Ht(35633,ce.vertId);if(de=ce.program=le.createProgram(),le.attachShader(de,ye),le.attachShader(de,Ae),Se)for(ye=0;ye<Se.length;++ye)Ae=Se[ye],le.bindAttribLocation(de,Ae[0],Ae[1]);le.linkProgram(de),Ae=le.getProgramParameter(de,35718),Ve.profile&&(ce.stats.uniformsCount=Ae);var Ge=ce.uniforms;for(ye=0;ye<Ae;++ye)if(Se=le.getActiveUniform(de,ye))if(1<Se.size)for(var sr=0;sr<Se.size;++sr){var Er=Se.name.replace("[0]","["+sr+"]");oe(Ge,new _r(Er,Qe.id(Er),le.getUniformLocation(de,Er),Se))}else oe(Ge,new _r(Se.name,Qe.id(Se.name),le.getUniformLocation(de,Se.name),Se));for(Ae=le.getProgramParameter(de,35721),Ve.profile&&(ce.stats.attributesCount=Ae),ce=ce.attributes,ye=0;ye<Ae;++ye)(Se=le.getActiveAttrib(de,ye))&&oe(ce,new _r(Se.name,Qe.id(Se.name),le.getAttribLocation(de,Se.name),Se))}var _e={},Pe={},Et={},Mt=[],se=0;return Ve.profile&&(Ze.getMaxUniformsCount=function(){var ce=0;return Mt.forEach(function(de){de.stats.uniformsCount>ce&&(ce=de.stats.uniformsCount)}),ce},Ze.getMaxAttributesCount=function(){var ce=0;return Mt.forEach(function(de){de.stats.attributesCount>ce&&(ce=de.stats.attributesCount)}),ce}),{clear:function(){var ce=le.deleteShader.bind(le);Rt(_e).forEach(ce),_e={},Rt(Pe).forEach(ce),Pe={},Mt.forEach(function(de){le.deleteProgram(de.program)}),Mt.length=0,Et={},Ze.shaderCount=0},program:function(ce,de,Se,ye){var Ae=Et[de];Ae||(Ae=Et[de]={});var Ge=Ae[ce];if(Ge&&(Ge.refCount++,!ye))return Ge;var sr=new te(de,ce);return Ze.shaderCount++,ne(sr,Se,ye),Ge||(Ae[ce]=sr),Mt.push(sr),ct(sr,{destroy:function(){if(sr.refCount--,0>=sr.refCount){le.deleteProgram(sr.program);var Er=Mt.indexOf(sr);Mt.splice(Er,1),Ze.shaderCount--}0>=Ae[sr.vertId].refCount&&(le.deleteShader(Pe[sr.vertId]),delete Pe[sr.vertId],delete Et[sr.fragId][sr.vertId]),Object.keys(Et[sr.fragId]).length||(le.deleteShader(_e[sr.fragId]),delete _e[sr.fragId],delete Et[sr.fragId])}})},restore:function(){_e={},Pe={};for(var ce=0;ce<Mt.length;++ce)ne(Mt[ce],null,Mt[ce].attributes.map(function(de){return[de.location,de.name]}))},shader:Ht,frag:-1,vert:-1}}function $(le,Qe,Ze,Ve,_r,oe,Ht){function te(_e){var Pe;Pe=Qe.next===null?5121:Qe.next.colorAttachments[0].texture._texture.type;var Et=0,Mt=0,se=Ve.framebufferWidth,ce=Ve.framebufferHeight,de=null;return zt(_e)?de=_e:_e&&(Et=_e.x|0,Mt=_e.y|0,se=(_e.width||Ve.framebufferWidth-Et)|0,ce=(_e.height||Ve.framebufferHeight-Mt)|0,de=_e.data||null),Ze(),_e=se*ce*4,de||(Pe===5121?de=new Uint8Array(_e):Pe===5126&&(de=de||new Float32Array(_e))),le.pixelStorei(3333,4),le.readPixels(Et,Mt,se,ce,6408,Pe,de),de}function ne(_e){var Pe;return Qe.setFBO({framebuffer:_e.framebuffer},function(){Pe=te(_e)}),Pe}return function(_e){return _e&&"framebuffer"in _e?ne(_e):te(_e)}}function tt(le){for(var Qe=Array(le.length>>2),Ve=0;Ve<Qe.length;Ve++)Qe[Ve]=0;for(Ve=0;Ve<8*le.length;Ve+=8)Qe[Ve>>5]|=(le.charCodeAt(Ve/8)&255)<<24-Ve%32;var Ze=8*le.length;le=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225];var Ve=Array(64),_r,oe,Ht,te,ne,_e,Pe,Et,Mt,se,ce;for(Qe[Ze>>5]|=128<<24-Ze%32,Qe[(Ze+64>>9<<4)+15]=Ze,Et=0;Et<Qe.length;Et+=16){for(Ze=le[0],_r=le[1],oe=le[2],Ht=le[3],te=le[4],ne=le[5],_e=le[6],Pe=le[7],Mt=0;64>Mt;Mt++){if(16>Mt)Ve[Mt]=Qe[Mt+Et];else{se=Mt,ce=Ve[Mt-2],ce=J(ce,17)^J(ce,19)^ce>>>10,ce=st(ce,Ve[Mt-7]);var de;de=Ve[Mt-15],de=J(de,7)^J(de,18)^de>>>3,Ve[se]=st(st(ce,de),Ve[Mt-16])}se=te,se=J(se,6)^J(se,11)^J(se,25),se=st(st(st(st(Pe,se),te&ne^~te&_e),Ke[Mt]),Ve[Mt]),Pe=Ze,Pe=J(Pe,2)^J(Pe,13)^J(Pe,22),ce=st(Pe,Ze&_r^Ze&oe^_r&oe),Pe=_e,_e=ne,ne=te,te=st(Ht,se),Ht=oe,oe=_r,_r=Ze,Ze=st(se,ce)}le[0]=st(Ze,le[0]),le[1]=st(_r,le[1]),le[2]=st(oe,le[2]),le[3]=st(Ht,le[3]),le[4]=st(te,le[4]),le[5]=st(ne,le[5]),le[6]=st(_e,le[6]),le[7]=st(Pe,le[7])}for(Qe="",Ve=0;Ve<32*le.length;Ve+=8)Qe+=String.fromCharCode(le[Ve>>5]>>>24-Ve%32&255);return Qe}function Z(le){for(var Qe="",Ze,Ve=0;Ve<le.length;Ve++)Ze=le.charCodeAt(Ve),Qe+="0123456789abcdef".charAt(Ze>>>4&15)+"0123456789abcdef".charAt(Ze&15);return Qe}function X(le){for(var Qe="",Ze=-1,Ve,_r;++Ze<le.length;)Ve=le.charCodeAt(Ze),_r=Ze+1<le.length?le.charCodeAt(Ze+1):0,55296<=Ve&&56319>=Ve&&56320<=_r&&57343>=_r&&(Ve=65536+((Ve&1023)<<10)+(_r&1023),Ze++),127>=Ve?Qe+=String.fromCharCode(Ve):2047>=Ve?Qe+=String.fromCharCode(192|Ve>>>6&31,128|Ve&63):65535>=Ve?Qe+=String.fromCharCode(224|Ve>>>12&15,128|Ve>>>6&63,128|Ve&63):2097151>=Ve&&(Qe+=String.fromCharCode(240|Ve>>>18&7,128|Ve>>>12&63,128|Ve>>>6&63,128|Ve&63));return Qe}function J(le,Qe){return le>>>Qe|le<<32-Qe}function st(le,Qe){var Ze=(le&65535)+(Qe&65535);return(le>>16)+(Qe>>16)+(Ze>>16)<<16|Ze&65535}function at(le){return Array.prototype.slice.call(le)}function lt(le){return at(le).join("")}function F(le){function Qe(){var Pe=[],Et=[];return ct(function(){Pe.push.apply(Pe,at(arguments))},{def:function(){var Mt="v"+_r++;return Et.push(Mt),0<arguments.length&&(Pe.push(Mt,"="),Pe.push.apply(Pe,at(arguments)),Pe.push(";")),Mt},toString:function(){return lt([0<Et.length?"var "+Et.join(",")+";":"",lt(Pe)])}})}function Ze(){function Pe(de,Se){Mt(de,Se,"=",Et.def(de,Se),";")}var Et=Qe(),Mt=Qe(),se=Et.toString,ce=Mt.toString;return ct(function(){Et.apply(Et,at(arguments))},{def:Et.def,entry:Et,exit:Mt,save:Pe,set:function(de,Se,ye){Pe(de,Se),Et(de,Se,"=",ye,";")},toString:function(){return se()+ce()}})}var Ve=le&&le.cache,_r=0,oe=[],Ht=[],te=[],ne=Qe(),_e={};return{global:ne,link:function(Pe,Et){var Mt=Et&&Et.stable;if(!Mt){for(var se=0;se<Ht.length;++se)if(Ht[se]===Pe&&!te[se])return oe[se]}return se="g"+_r++,oe.push(se),Ht.push(Pe),te.push(Mt),se},block:Qe,proc:function(Pe,Et){function Mt(){var Se="a"+se.length;return se.push(Se),Se}var se=[];Et=Et||0;for(var ce=0;ce<Et;++ce)Mt();var ce=Ze(),de=ce.toString;return _e[Pe]=ct(ce,{arg:Mt,toString:function(){return lt(["function(",se.join(),"){",de(),"}"])}})},scope:Ze,cond:function(){var Pe=lt(arguments),Et=Ze(),Mt=Ze(),se=Et.toString,ce=Mt.toString;return ct(Et,{then:function(){return Et.apply(Et,at(arguments)),this},else:function(){return Mt.apply(Mt,at(arguments)),this},toString:function(){var de=ce();return de&&(de="else{"+de+"}"),lt(["if(",Pe,"){",se(),"}",de])}})},compile:function(){var Pe=['"use strict";',ne,"return {"];Object.keys(_e).forEach(function(se){Pe.push('"',se,'":',_e[se].toString(),",")}),Pe.push("}");var Et=lt(Pe).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),Mt;return Ve&&(Mt=Z(tt(X(Et))),Ve[Mt])?Ve[Mt].apply(null,Ht):(Et=Function.apply(null,oe.concat(Et)),Ve&&(Ve[Mt]=Et),Et.apply(null,Ht))}}}function H(le){return Array.isArray(le)||zt(le)||b(le)}function et(le){return le.sort(function(Qe,Ze){return Qe==="viewport"?-1:Ze==="viewport"?1:Qe<Ze?-1:1})}function q(le,Qe,Ze,Ve){this.thisDep=le,this.contextDep=Qe,this.propDep=Ze,this.append=Ve}function W(le){return le&&!(le.thisDep||le.contextDep||le.propDep)}function K(le){return new q(!1,!1,!1,le)}function nt(le,Qe){var Ze=le.type;if(Ze===0)return Ze=le.data.length,new q(!0,1<=Ze,2<=Ze,Qe);if(Ze===4)return Ze=le.data,new q(Ze.thisDep,Ze.contextDep,Ze.propDep,Qe);if(Ze===5)return new q(!1,!1,!1,Qe);if(Ze===6){for(var Ve=Ze=!1,_r=!1,oe=0;oe<le.data.length;++oe){var Ht=le.data[oe];Ht.type===1?_r=!0:Ht.type===2?Ve=!0:Ht.type===3?Ze=!0:Ht.type===0?(Ze=!0,Ht=Ht.data,1<=Ht&&(Ve=!0),2<=Ht&&(_r=!0)):Ht.type===4&&(Ze=Ze||Ht.data.thisDep,Ve=Ve||Ht.data.contextDep,_r=_r||Ht.data.propDep)}return new q(Ze,Ve,_r,Qe)}return new q(Ze===3,Ze===2,Ze===1,Qe)}function it(le,Qe,Ze,Ve,_r,oe,Ht,te,ne,_e,Pe,Et,Mt,se,ce,de){function Se(Ue){return Ue.replace(".","_")}function ye(Ue,pr,an){var vn=Se(Ue);fi.push(Ue),Zn[vn]=Sn[vn]=!!an,ri[vn]=pr}function Ae(Ue,pr,an){var vn=Se(Ue);fi.push(Ue),Array.isArray(an)?(Sn[vn]=an.slice(),Zn[vn]=an.slice()):Sn[vn]=Zn[vn]=an,Rn[vn]=pr}function Ge(){var Ue=F({cache:ce}),pr=Ue.link,an=Ue.global;Ue.id=fa++,Ue.batchId="0";var vn=pr(jn),rn=Ue.shared={props:"a0"};Object.keys(jn).forEach(function(br){rn[br]=an.def(vn,".",br)});var An=Ue.next={},wn=Ue.current={};Object.keys(Rn).forEach(function(br){Array.isArray(Sn[br])&&(An[br]=an.def(rn.next,".",br),wn[br]=an.def(rn.current,".",br))});var fn=Ue.constants={};Object.keys(Gi).forEach(function(br){fn[br]=an.def(JSON.stringify(Gi[br]))}),Ue.invoke=function(br,Or){switch(Or.type){case 0:var yn=["this",rn.context,rn.props,Ue.batchId];return br.def(pr(Or.data),".call(",yn.slice(0,Math.max(Or.data.length+1,4)),")");case 1:return br.def(rn.props,Or.data);case 2:return br.def(rn.context,Or.data);case 3:return br.def("this",Or.data);case 4:return Or.data.append(Ue,br),Or.data.ref;case 5:return Or.data.toString();case 6:return Or.data.map(function(Nn){return Ue.invoke(br,Nn)})}},Ue.attribCache={};var yr={};return Ue.scopeAttrib=function(br){if(br=Qe.id(br),br in yr)return yr[br];var Or=_e.scope[br];return Or||(Or=_e.scope[br]=new Ji),yr[br]=pr(Or)},Ue}function sr(Ue){var pr=Ue.static;Ue=Ue.dynamic;var an;if("profile"in pr){var vn=!!pr.profile;an=K(function(An,wn){return vn}),an.enable=vn}else if("profile"in Ue){var rn=Ue.profile;an=nt(rn,function(An,wn){return An.invoke(wn,rn)})}return an}function Er(Ue,pr){var an=Ue.static,vn=Ue.dynamic;if("framebuffer"in an){var rn=an.framebuffer;return rn?(rn=te.getFramebuffer(rn),K(function(wn,fn){var yr=wn.link(rn),br=wn.shared;return fn.set(br.framebuffer,".next",yr),br=br.context,fn.set(br,".framebufferWidth",yr+".width"),fn.set(br,".framebufferHeight",yr+".height"),yr})):K(function(wn,fn){var yr=wn.shared;return fn.set(yr.framebuffer,".next","null"),yr=yr.context,fn.set(yr,".framebufferWidth",yr+".drawingBufferWidth"),fn.set(yr,".framebufferHeight",yr+".drawingBufferHeight"),"null"})}if("framebuffer"in vn){var An=vn.framebuffer;return nt(An,function(wn,fn){var Or=wn.invoke(fn,An),yr=wn.shared,br=yr.framebuffer,Or=fn.def(br,".getFramebuffer(",Or,")");return fn.set(br,".next",Or),yr=yr.context,fn.set(yr,".framebufferWidth",Or+"?"+Or+".width:"+yr+".drawingBufferWidth"),fn.set(yr,".framebufferHeight",Or+"?"+Or+".height:"+yr+".drawingBufferHeight"),Or})}return null}function kr(Ue,pr,an){function vn(fn){if(fn in rn){var yr=rn[fn];fn=!0;var br=yr.x|0,Or=yr.y|0,yn,Nn;return"width"in yr?yn=yr.width|0:fn=!1,"height"in yr?Nn=yr.height|0:fn=!1,new q(!fn&&pr&&pr.thisDep,!fn&&pr&&pr.contextDep,!fn&&pr&&pr.propDep,function(kn,Kn){var oi=kn.shared.context,gi=yn;"width"in yr||(gi=Kn.def(oi,".","framebufferWidth","-",br));var xi=Nn;return"height"in yr||(xi=Kn.def(oi,".","framebufferHeight","-",Or)),[br,Or,gi,xi]})}if(fn in An){var ni=An[fn];return fn=nt(ni,function(kn,Kn){var Si=kn.invoke(Kn,ni),oi=kn.shared.context,gi=Kn.def(Si,".x|0"),xi=Kn.def(Si,".y|0"),ci=Kn.def('"width" in ',Si,"?",Si,".width|0:","(",oi,".","framebufferWidth","-",gi,")"),Si=Kn.def('"height" in ',Si,"?",Si,".height|0:","(",oi,".","framebufferHeight","-",xi,")");return[gi,xi,ci,Si]}),pr&&(fn.thisDep=fn.thisDep||pr.thisDep,fn.contextDep=fn.contextDep||pr.contextDep,fn.propDep=fn.propDep||pr.propDep),fn}return pr?new q(pr.thisDep,pr.contextDep,pr.propDep,function(kn,Kn){var oi=kn.shared.context;return[0,0,Kn.def(oi,".","framebufferWidth"),Kn.def(oi,".","framebufferHeight")]}):null}var rn=Ue.static,An=Ue.dynamic;if(Ue=vn("viewport")){var wn=Ue;Ue=new q(Ue.thisDep,Ue.contextDep,Ue.propDep,function(fn,yr){var br=wn.append(fn,yr),Or=fn.shared.context;return yr.set(Or,".viewportWidth",br[2]),yr.set(Or,".viewportHeight",br[3]),br})}return{viewport:Ue,scissor_box:vn("scissor.box")}}function Mr(Ue,pr){var an=Ue.static;if(typeof an.frag=="string"&&typeof an.vert=="string"){if(0<Object.keys(pr.dynamic).length)return null;var an=pr.static,vn=Object.keys(an);if(0<vn.length&&typeof an[vn[0]]=="number"){for(var rn=[],An=0;An<vn.length;++An)rn.push([an[vn[An]]|0,vn[An]]);return rn}}return null}function Gr(Ue,pr,an){function vn(br){if(br in rn){var Or=Qe.id(rn[br]);return br=K(function(){return Or}),br.id=Or,br}if(br in An){var yn=An[br];return nt(yn,function(Nn,ni){var kn=Nn.invoke(ni,yn);return ni.def(Nn.shared.strings,".id(",kn,")")})}return null}var rn=Ue.static,An=Ue.dynamic,wn=vn("frag"),fn=vn("vert"),yr=null;return W(wn)&&W(fn)?(yr=Pe.program(fn.id,wn.id,null,an),Ue=K(function(br,Or){return br.link(yr)})):Ue=new q(wn&&wn.thisDep||fn&&fn.thisDep,wn&&wn.contextDep||fn&&fn.contextDep,wn&&wn.propDep||fn&&fn.propDep,function(br,Or){var yn=br.shared.shader,Nn;Nn=wn?wn.append(br,Or):Or.def(yn,".","frag");var ni;return ni=fn?fn.append(br,Or):Or.def(yn,".","vert"),Or.def(yn+".program("+ni+","+Nn+")")}),{frag:wn,vert:fn,progVar:Ue,program:yr}}function ar(Ue,pr){function an(kn,Kn){if(kn in vn){var oi=vn[kn]|0;return Kn?An.offset=oi:An.instances=oi,K(function(xi,ci){return Kn&&(xi.OFFSET=oi),oi})}if(kn in rn){var gi=rn[kn];return nt(gi,function(xi,ci){var Si=xi.invoke(ci,gi);return Kn&&(xi.OFFSET=Si),Si})}if(Kn){if(yr)return K(function(xi,ci){return xi.OFFSET=0});if(wn)return new q(fn.thisDep,fn.contextDep,fn.propDep,function(xi,ci){return ci.def(xi.shared.vao+".currentVAO?"+xi.shared.vao+".currentVAO.offset:0")})}else if(wn)return new q(fn.thisDep,fn.contextDep,fn.propDep,function(xi,ci){return ci.def(xi.shared.vao+".currentVAO?"+xi.shared.vao+".currentVAO.instances:-1")});return null}var vn=Ue.static,rn=Ue.dynamic,An={},wn=!1,fn=function(){if("vao"in vn){var kn=vn.vao;return kn!==null&&_e.getVAO(kn)===null&&(kn=_e.createVAO(kn)),wn=!0,An.vao=kn,K(function(oi){var gi=_e.getVAO(kn);return gi?oi.link(gi):"null"})}if("vao"in rn){wn=!0;var Kn=rn.vao;return nt(Kn,function(oi,gi){var xi=oi.invoke(gi,Kn);return gi.def(oi.shared.vao+".getVAO("+xi+")")})}return null}(),yr=!1,br=function(){if("elements"in vn){var kn=vn.elements;if(An.elements=kn,H(kn)){var Kn=An.elements=oe.create(kn,!0),kn=oe.getElements(Kn);yr=!0}else kn&&(kn=oe.getElements(kn),yr=!0);return Kn=K(function(gi,xi){if(kn){var ci=gi.link(kn);return gi.ELEMENTS=ci}return gi.ELEMENTS=null}),Kn.value=kn,Kn}if("elements"in rn){yr=!0;var oi=rn.elements;return nt(oi,function(gi,xi){var ci=gi.shared,ko=ci.isBufferArgs,ci=ci.elements,$o=gi.invoke(xi,oi),Si=xi.def("null"),ko=xi.def(ko,"(",$o,")"),$o=gi.cond(ko).then(Si,"=",ci,".createStream(",$o,");").else(Si,"=",ci,".getElements(",$o,");");return xi.entry($o),xi.exit(gi.cond(ko).then(ci,".destroyStream(",Si,");")),gi.ELEMENTS=Si})}return wn?new q(fn.thisDep,fn.contextDep,fn.propDep,function(gi,xi){return xi.def(gi.shared.vao+".currentVAO?"+gi.shared.elements+".getElements("+gi.shared.vao+".currentVAO.elements):null")}):null}(),Or=an("offset",!0),yn=function(){if("primitive"in vn){var kn=vn.primitive;return An.primitive=kn,K(function(oi,gi){return Yt[kn]})}if("primitive"in rn){var Kn=rn.primitive;return nt(Kn,function(oi,gi){var xi=oi.constants.primTypes,ci=oi.invoke(gi,Kn);return gi.def(xi,"[",ci,"]")})}return yr?W(br)?br.value?K(function(oi,gi){return gi.def(oi.ELEMENTS,".primType")}):K(function(){return 4}):new q(br.thisDep,br.contextDep,br.propDep,function(oi,gi){var xi=oi.ELEMENTS;return gi.def(xi,"?",xi,".primType:",4)}):wn?new q(fn.thisDep,fn.contextDep,fn.propDep,function(oi,gi){return gi.def(oi.shared.vao+".currentVAO?"+oi.shared.vao+".currentVAO.primitive:4")}):null}(),Nn=function(){if("count"in vn){var kn=vn.count|0;return An.count=kn,K(function(){return kn})}if("count"in rn){var Kn=rn.count;return nt(Kn,function(oi,gi){return oi.invoke(gi,Kn)})}return yr?W(br)?br?Or?new q(Or.thisDep,Or.contextDep,Or.propDep,function(oi,gi){return gi.def(oi.ELEMENTS,".vertCount-",oi.OFFSET)}):K(function(oi,gi){return gi.def(oi.ELEMENTS,".vertCount")}):K(function(){return-1}):new q(br.thisDep||Or.thisDep,br.contextDep||Or.contextDep,br.propDep||Or.propDep,function(oi,gi){var xi=oi.ELEMENTS;return oi.OFFSET?gi.def(xi,"?",xi,".vertCount-",oi.OFFSET,":-1"):gi.def(xi,"?",xi,".vertCount:-1")}):wn?new q(fn.thisDep,fn.contextDep,fn.propDep,function(oi,gi){return gi.def(oi.shared.vao,".currentVAO?",oi.shared.vao,".currentVAO.count:-1")}):null}(),ni=an("instances",!1);return{elements:br,primitive:yn,count:Nn,instances:ni,offset:Or,vao:fn,vaoActive:wn,elementsActive:yr,static:An}}function xr(Ue,pr){var an=Ue.static,vn=Ue.dynamic,rn={};return fi.forEach(function(An){function wn(yr,br){if(An in an){var Or=yr(an[An]);rn[fn]=K(function(){return Or})}else if(An in vn){var yn=vn[An];rn[fn]=nt(yn,function(Nn,ni){return br(Nn,ni,Nn.invoke(ni,yn))})}}var fn=Se(An);switch(An){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":return wn(function(yr){return yr},function(yr,br,Or){return Or});case"depth.func":return wn(function(yr){return We[yr]},function(yr,br,Or){return br.def(yr.constants.compareFuncs,"[",Or,"]")});case"depth.range":return wn(function(yr){return yr},function(yr,br,Or){return yr=br.def("+",Or,"[0]"),br=br.def("+",Or,"[1]"),[yr,br]});case"blend.func":return wn(function(yr){return[er["srcRGB"in yr?yr.srcRGB:yr.src],er["dstRGB"in yr?yr.dstRGB:yr.dst],er["srcAlpha"in yr?yr.srcAlpha:yr.src],er["dstAlpha"in yr?yr.dstAlpha:yr.dst]]},function(yr,br,Or){function yn(Kn,oi){return br.def('"',Kn,oi,'" in ',Or,"?",Or,".",Kn,oi,":",Or,".",Kn)}yr=yr.constants.blendFuncs;var Nn=yn("src","RGB"),kn=yn("dst","RGB"),Nn=br.def(yr,"[",Nn,"]"),ni=br.def(yr,"[",yn("src","Alpha"),"]"),kn=br.def(yr,"[",kn,"]");return yr=br.def(yr,"[",yn("dst","Alpha"),"]"),[Nn,kn,ni,yr]});case"blend.equation":return wn(function(yr){if(typeof yr=="string")return[ji[yr],ji[yr]];if(typeof yr=="object")return[ji[yr.rgb],ji[yr.alpha]]},function(yr,br,Or){var yn=yr.constants.blendEquations,Nn=br.def(),ni=br.def();return yr=yr.cond("typeof ",Or,'==="string"'),yr.then(Nn,"=",ni,"=",yn,"[",Or,"];"),yr.else(Nn,"=",yn,"[",Or,".rgb];",ni,"=",yn,"[",Or,".alpha];"),br(yr),[Nn,ni]});case"blend.color":return wn(function(yr){return o(4,function(br){return+yr[br]})},function(yr,br,Or){return o(4,function(yn){return br.def("+",Or,"[",yn,"]")})});case"stencil.mask":return wn(function(yr){return yr|0},function(yr,br,Or){return br.def(Or,"|0")});case"stencil.func":return wn(function(yr){return[We[yr.cmp||"keep"],yr.ref||0,"mask"in yr?yr.mask:-1]},function(yr,br,Or){yr=br.def('"cmp" in ',Or,"?",yr.constants.compareFuncs,"[",Or,".cmp]",":",7680);var yn=br.def(Or,".ref|0");return br=br.def('"mask" in ',Or,"?",Or,".mask|0:-1"),[yr,yn,br]});case"stencil.opFront":case"stencil.opBack":return wn(function(yr){return[An==="stencil.opBack"?1029:1028,hr[yr.fail||"keep"],hr[yr.zfail||"keep"],hr[yr.zpass||"keep"]]},function(yr,br,Or){function yn(ni){return br.def('"',ni,'" in ',Or,"?",Nn,"[",Or,".",ni,"]:",7680)}var Nn=yr.constants.stencilOps;return[An==="stencil.opBack"?1029:1028,yn("fail"),yn("zfail"),yn("zpass")]});case"polygonOffset.offset":return wn(function(yr){return[yr.factor|0,yr.units|0]},function(yr,br,Or){return yr=br.def(Or,".factor|0"),br=br.def(Or,".units|0"),[yr,br]});case"cull.face":return wn(function(yr){var br=0;return yr==="front"?br=1028:yr==="back"&&(br=1029),br},function(yr,br,Or){return br.def(Or,'==="front"?',1028,":",1029)});case"lineWidth":return wn(function(yr){return yr},function(yr,br,Or){return Or});case"frontFace":return wn(function(yr){return Wr[yr]},function(yr,br,Or){return br.def(Or+'==="cw"?2304:2305')});case"colorMask":return wn(function(yr){return yr.map(function(br){return!!br})},function(yr,br,Or){return o(4,function(yn){return"!!"+Or+"["+yn+"]"})});case"sample.coverage":return wn(function(yr){return["value"in yr?yr.value:1,!!yr.invert]},function(yr,br,Or){return yr=br.def('"value" in ',Or,"?+",Or,".value:1"),br=br.def("!!",Or,".invert"),[yr,br]})}}),rn}function Ir(Ue,pr){var an=Ue.static,vn=Ue.dynamic,rn={};return Object.keys(an).forEach(function(An){var wn=an[An],fn;if(typeof wn=="number"||typeof wn=="boolean")fn=K(function(){return wn});else if(typeof wn=="function"){var yr=wn._reglType;yr==="texture2d"||yr==="textureCube"?fn=K(function(br){return br.link(wn)}):(yr==="framebuffer"||yr==="framebufferCube")&&(fn=K(function(br){return br.link(wn.color[0])}))}else w(wn)&&(fn=K(function(br){return br.global.def("[",o(wn.length,function(Or){return wn[Or]}),"]")}));fn.value=wn,rn[An]=fn}),Object.keys(vn).forEach(function(An){var wn=vn[An];rn[An]=nt(wn,function(fn,yr){return fn.invoke(yr,wn)})}),rn}function Hr(Ue,pr){var an=Ue.static,vn=Ue.dynamic,rn={};return Object.keys(an).forEach(function(An){var wn=an[An],fn=Qe.id(An),yr=new Ji;if(H(wn))yr.state=1,yr.buffer=_r.getBuffer(_r.create(wn,34962,!1,!0)),yr.type=0;else{var br=_r.getBuffer(wn);if(br)yr.state=1,yr.buffer=br,yr.type=0;else if("constant"in wn){var Or=wn.constant;yr.buffer="null",yr.state=2,typeof Or=="number"?yr.x=Or:He.forEach(function(oi,gi){gi<Or.length&&(yr[oi]=Or[gi])})}else{var br=H(wn.buffer)?_r.getBuffer(_r.create(wn.buffer,34962,!1,!0)):_r.getBuffer(wn.buffer),yn=wn.offset|0,Nn=wn.stride|0,ni=wn.size|0,kn=!!wn.normalized,Kn=0;"type"in wn&&(Kn=It[wn.type]),wn=wn.divisor|0,yr.buffer=br,yr.state=1,yr.size=ni,yr.normalized=kn,yr.type=Kn||br.dtype,yr.offset=yn,yr.stride=Nn,yr.divisor=wn}}rn[An]=K(function(oi,gi){var xi=oi.attribCache;if(fn in xi)return xi[fn];var ci={isStream:!1};return Object.keys(yr).forEach(function(Si){ci[Si]=yr[Si]}),yr.buffer&&(ci.buffer=oi.link(yr.buffer),ci.type=ci.type||ci.buffer+".dtype"),xi[fn]=ci})}),Object.keys(vn).forEach(function(An){var wn=vn[An];rn[An]=nt(wn,function(fn,yr){function br(xi){yr(kn[xi],"=",Or,".",xi,"|0;")}var Or=fn.invoke(yr,wn),ni=fn.shared,yn=fn.constants,Nn=ni.isBufferArgs,ni=ni.buffer,kn={isStream:yr.def(!1)},Kn=new Ji;Kn.state=1,Object.keys(Kn).forEach(function(xi){kn[xi]=yr.def(""+Kn[xi])});var oi=kn.buffer,gi=kn.type;return yr("if(",Nn,"(",Or,")){",kn.isStream,"=true;",oi,"=",ni,".createStream(",34962,",",Or,");",gi,"=",oi,".dtype;","}else{",oi,"=",ni,".getBuffer(",Or,");","if(",oi,"){",gi,"=",oi,".dtype;",'}else if("constant" in ',Or,"){",kn.state,"=",2,";","if(typeof "+Or+'.constant === "number"){',kn[He[0]],"=",Or,".constant;",He.slice(1).map(function(xi){return kn[xi]}).join("="),"=0;","}else{",He.map(function(xi,ci){return kn[xi]+"="+Or+".constant.length>"+ci+"?"+Or+".constant["+ci+"]:0;"}).join(""),"}}else{","if(",Nn,"(",Or,".buffer)){",oi,"=",ni,".createStream(",34962,",",Or,".buffer);","}else{",oi,"=",ni,".getBuffer(",Or,".buffer);","}",gi,'="type" in ',Or,"?",yn.glTypes,"[",Or,".type]:",oi,".dtype;",kn.normalized,"=!!",Or,".normalized;"),br("size"),br("offset"),br("stride"),br("divisor"),yr("}}"),yr.exit("if(",kn.isStream,"){",ni,".destroyStream(",oi,");","}"),kn})}),rn}function Cr(Ue){var pr=Ue.static,an=Ue.dynamic,vn={};return Object.keys(pr).forEach(function(rn){var An=pr[rn];vn[rn]=K(function(wn,fn){return typeof An=="number"||typeof An=="boolean"?""+An:wn.link(An)})}),Object.keys(an).forEach(function(rn){var An=an[rn];vn[rn]=nt(An,function(wn,fn){return wn.invoke(fn,An)})}),vn}function ae(Ue,pr,an,vn,rn){function An(Kn){var oi=fn[Kn];oi&&(br[Kn]=oi)}var wn=Mr(Ue,pr),Nn=Er(Ue),fn=kr(Ue,Nn),yr=ar(Ue),br=xr(Ue),Or=Gr(Ue,rn,wn);An("viewport"),An(Se("scissor.box"));var yn=0<Object.keys(br).length,Nn={framebuffer:Nn,draw:yr,shader:Or,state:br,dirty:yn,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(Nn.profile=sr(Ue),Nn.uniforms=Ir(an),Nn.drawVAO=Nn.scopeVAO=yr.vao,!Nn.drawVAO&&Or.program&&!wn&&Ze.angle_instanced_arrays&&yr.static.elements){var ni=!0;if(Ue=Or.program.attributes.map(function(Kn){return Kn=pr.static[Kn],ni=ni&&!!Kn,Kn}),ni&&0<Ue.length){var kn=_e.getVAO(_e.createVAO({attributes:Ue,elements:yr.static.elements}));Nn.drawVAO=new q(null,null,null,function(Kn,oi){return Kn.link(kn)}),Nn.useVAO=!0}}return wn?Nn.useVAO=!0:Nn.attributes=Hr(pr),Nn.context=Cr(vn),Nn}function Le(Ue,pr,an){var vn=Ue.shared.context,rn=Ue.scope();Object.keys(an).forEach(function(An){pr.save(vn,"."+An);var wn=an[An].append(Ue,pr);Array.isArray(wn)?rn(vn,".",An,"=[",wn.join(),"];"):rn(vn,".",An,"=",wn,";")}),pr(rn)}function $e(Ue,pr,an,vn){var fn=Ue.shared,rn=fn.gl,An=fn.framebuffer,wn;gn&&(wn=pr.def(fn.extensions,".webgl_draw_buffers"));var yr=Ue.constants,fn=yr.drawBuffer,yr=yr.backBuffer;Ue=an?an.append(Ue,pr):pr.def(An,".next"),vn||pr("if(",Ue,"!==",An,".cur){"),pr("if(",Ue,"){",rn,".bindFramebuffer(",36160,",",Ue,".framebuffer);"),gn&&pr(wn,".drawBuffersWEBGL(",fn,"[",Ue,".colorAttachments.length]);"),pr("}else{",rn,".bindFramebuffer(",36160,",null);"),gn&&pr(wn,".drawBuffersWEBGL(",yr,");"),pr("}",An,".cur=",Ue,";"),vn||pr("}")}function or(Ue,pr,an){var vn=Ue.shared,rn=vn.gl,An=Ue.current,wn=Ue.next,fn=vn.current,yr=vn.next,br=Ue.cond(fn,".dirty");fi.forEach(function(Or){if(Or=Se(Or),!(Or in an.state)){var yn,Nn;if(Or in wn){yn=wn[Or],Nn=An[Or];var ni=o(Sn[Or].length,function(kn){return br.def(yn,"[",kn,"]")});br(Ue.cond(ni.map(function(kn,Kn){return kn+"!=="+Nn+"["+Kn+"]"}).join("||")).then(rn,".",Rn[Or],"(",ni,");",ni.map(function(kn,Kn){return Nn+"["+Kn+"]="+kn}).join(";"),";"))}else yn=br.def(yr,".",Or),ni=Ue.cond(yn,"!==",fn,".",Or),br(ni),Or in ri?ni(Ue.cond(yn).then(rn,".enable(",ri[Or],");").else(rn,".disable(",ri[Or],");"),fn,".",Or,"=",yn,";"):ni(rn,".",Rn[Or],"(",yn,");",fn,".",Or,"=",yn,";")}}),Object.keys(an.state).length===0&&br(fn,".dirty=false;"),pr(br)}function Dr(Ue,pr,an,vn){var rn=Ue.shared,An=Ue.current,wn=rn.current,fn=rn.gl,yr;et(Object.keys(an)).forEach(function(br){var Or=an[br];if(!vn||vn(Or)){var yn=Or.append(Ue,pr);if(ri[br]){var Nn=ri[br];W(Or)?(yr=Ue.link(yn,{stable:!0}),pr(Ue.cond(yr).then(fn,".enable(",Nn,");").else(fn,".disable(",Nn,");")),pr(wn,".",br,"=",yr,";")):(pr(Ue.cond(yn).then(fn,".enable(",Nn,");").else(fn,".disable(",Nn,");")),pr(wn,".",br,"=",yn,";"))}else if(w(yn)){var ni=An[br];pr(fn,".",Rn[br],"(",yn,");",yn.map(function(kn,Kn){return ni+"["+Kn+"]="+kn}).join(";"),";")}else W(Or)?(yr=Ue.link(yn,{stable:!0}),pr(fn,".",Rn[br],"(",yr,");",wn,".",br,"=",yr,";")):pr(fn,".",Rn[br],"(",yn,");",wn,".",br,"=",yn,";")}})}function Nr(Ue,pr){Tr&&(Ue.instancing=pr.def(Ue.shared.extensions,".angle_instanced_arrays"))}function Fr(Ue,pr,an,vn,rn){function An(){return typeof performance>"u"?"Date.now()":"performance.now()"}function wn(Kn){ni=pr.def(),Kn(ni,"=",An(),";"),typeof rn=="string"?Kn(Or,".count+=",rn,";"):Kn(Or,".count++;"),se&&(vn?(kn=pr.def(),Kn(kn,"=",Nn,".getNumPendingQueries();")):Kn(Nn,".beginQuery(",Or,");"))}function fn(Kn){Kn(Or,".cpuTime+=",An(),"-",ni,";"),se&&(vn?Kn(Nn,".pushScopeStats(",kn,",",Nn,".getNumPendingQueries(),",Or,");"):Kn(Nn,".endQuery();"))}function yr(Kn){var oi=pr.def(yn,".profile");pr(yn,".profile=",Kn,";"),pr.exit(yn,".profile=",oi,";")}var br=Ue.shared,Or=Ue.stats,yn=br.current,Nn=br.timer;an=an.profile;var ni,kn;if(an){if(W(an)){an.enable?(wn(pr),fn(pr.exit),yr("true")):yr("false");return}an=an.append(Ue,pr),yr(an)}else an=pr.def(yn,".profile");br=Ue.block(),wn(br),pr("if(",an,"){",br,"}"),Ue=Ue.block(),fn(Ue),pr.exit("if(",an,"){",Ue,"}")}function Ar(Ue,pr,an,vn,rn){function An(yr){switch(yr){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function wn(yr,br,Or){function yn(){pr("if(!",Kn,".buffer){",ni,".enableVertexAttribArray(",kn,");}");var ci=Or.type,Si;Si=Or.size?pr.def(Or.size,"||",br):br,pr("if(",Kn,".type!==",ci,"||",Kn,".size!==",Si,"||",xi.map(function(ko){return Kn+"."+ko+"!=="+Or[ko]}).join("||"),"){",ni,".bindBuffer(",34962,",",oi,".buffer);",ni,".vertexAttribPointer(",[kn,Si,ci,Or.normalized,Or.stride,Or.offset],");",Kn,".type=",ci,";",Kn,".size=",Si,";",xi.map(function(ko){return Kn+"."+ko+"="+Or[ko]+";"}).join(""),"}"),Tr&&(ci=Or.divisor,pr("if(",Kn,".divisor!==",ci,"){",Ue.instancing,".vertexAttribDivisorANGLE(",[kn,ci],");",Kn,".divisor=",ci,";}"))}function Nn(){pr("if(",Kn,".buffer){",ni,".disableVertexAttribArray(",kn,");",Kn,".buffer=null;","}if(",He.map(function(ci,Si){return Kn+"."+ci+"!=="+gi[Si]}).join("||"),"){",ni,".vertexAttrib4f(",kn,",",gi,");",He.map(function(ci,Si){return Kn+"."+ci+"="+gi[Si]+";"}).join(""),"}")}var ni=fn.gl,kn=pr.def(yr,".location"),Kn=pr.def(fn.attributes,"[",kn,"]");yr=Or.state;var oi=Or.buffer,gi=[Or.x,Or.y,Or.z,Or.w],xi=["buffer","normalized","offset","stride"];yr===1?yn():yr===2?Nn():(pr("if(",yr,"===",1,"){"),yn(),pr("}else{"),Nn(),pr("}"))}var fn=Ue.shared;vn.forEach(function(yr){var br=yr.name,Or=an.attributes[br],yn;if(Or){if(!rn(Or))return;yn=Or.append(Ue,pr)}else{if(!rn(dn))return;var Nn=Ue.scopeAttrib(br);yn={},Object.keys(new Ji).forEach(function(ni){yn[ni]=pr.def(Nn,".",ni)})}wn(Ue.link(yr),An(yr.info.type),yn)})}function Xr(Ue,pr,an,vn,rn,An){for(var wn=Ue.shared,fn=wn.gl,yr,br=0;br<vn.length;++br){var ni=vn[br],Or=ni.name,yn=ni.info.type,Nn=an.uniforms[Or],ni=Ue.link(ni)+".location",kn;if(Nn){if(!rn(Nn))continue;if(W(Nn)){if(Or=Nn.value,yn===35678||yn===35680)yn=Ue.link(Or._texture||Or.color[0]._texture),pr(fn,".uniform1i(",ni,",",yn+".bind());"),pr.exit(yn,".unbind();");else if(yn===35674||yn===35675||yn===35676)Or=Ue.global.def("new Float32Array(["+Array.prototype.slice.call(Or)+"])"),Nn=2,yn===35675?Nn=3:yn===35676&&(Nn=4),pr(fn,".uniformMatrix",Nn,"fv(",ni,",false,",Or,");");else{switch(yn){case 5126:yr="1f";break;case 35664:yr="2f";break;case 35665:yr="3f";break;case 35666:yr="4f";break;case 35670:yr="1i";break;case 5124:yr="1i";break;case 35671:yr="2i";break;case 35667:yr="2i";break;case 35672:yr="3i";break;case 35668:yr="3i";break;case 35673:yr="4i";break;case 35669:yr="4i"}pr(fn,".uniform",yr,"(",ni,",",w(Or)?Array.prototype.slice.call(Or):Or,");")}continue}else kn=Nn.append(Ue,pr)}else{if(!rn(dn))continue;kn=pr.def(wn.uniforms,"[",Qe.id(Or),"]")}switch(yn===35678?pr("if(",kn,"&&",kn,'._reglType==="framebuffer"){',kn,"=",kn,".color[0];","}"):yn===35680&&pr("if(",kn,"&&",kn,'._reglType==="framebufferCube"){',kn,"=",kn,".color[0];","}"),Or=1,yn){case 35678:case 35680:yn=pr.def(kn,"._texture"),pr(fn,".uniform1i(",ni,",",yn,".bind());"),pr.exit(yn,".unbind();");continue;case 5124:case 35670:yr="1i";break;case 35667:case 35671:yr="2i",Or=2;break;case 35668:case 35672:yr="3i",Or=3;break;case 35669:case 35673:yr="4i",Or=4;break;case 5126:yr="1f";break;case 35664:yr="2f",Or=2;break;case 35665:yr="3f",Or=3;break;case 35666:yr="4f",Or=4;break;case 35674:yr="Matrix2fv";break;case 35675:yr="Matrix3fv";break;case 35676:yr="Matrix4fv"}if(yr.charAt(0)==="M"){pr(fn,".uniform",yr,"(",ni,",");var ni=Math.pow(yn-35674+2,2),Kn=Ue.global.def("new Float32Array(",ni,")");Array.isArray(kn)?pr("false,(",o(ni,function(xi){return Kn+"["+xi+"]="+kn[xi]}),",",Kn,")"):pr("false,(Array.isArray(",kn,")||",kn," instanceof Float32Array)?",kn,":(",o(ni,function(xi){return Kn+"["+xi+"]="+kn+"["+xi+"]"}),",",Kn,")"),pr(");")}else{if(1<Or){for(var yn=[],oi=[],Nn=0;Nn<Or;++Nn)Array.isArray(kn)?oi.push(kn[Nn]):oi.push(pr.def(kn+"["+Nn+"]")),An&&yn.push(pr.def());An&&pr("if(!",Ue.batchId,"||",yn.map(function(gi,xi){return gi+"!=="+oi[xi]}).join("||"),"){",yn.map(function(gi,xi){return gi+"="+oi[xi]+";"}).join("")),pr(fn,".uniform",yr,"(",ni,",",oi.join(","),");")}else An&&(yn=pr.def(),pr("if(!",Ue.batchId,"||",yn,"!==",kn,"){",yn,"=",kn,";")),pr(fn,".uniform",yr,"(",ni,",",kn,");");An&&pr("}")}}}function Tn(Ue,pr,an,vn){function rn(ci){var Si=Or[ci];return Si?Si.contextDep&&vn.contextDynamic||Si.propDep?Si.append(Ue,an):Si.append(Ue,pr):pr.def(br,".",ci)}function An(){function ci(){an(oi,".drawElementsInstancedANGLE(",[Nn,kn,gi,ni+"<<(("+gi+"-5121)>>1)",Kn],");")}function Si(){an(oi,".drawArraysInstancedANGLE(",[Nn,ni,kn,Kn],");")}yn&&yn!=="null"?xi?ci():(an("if(",yn,"){"),ci(),an("}else{"),Si(),an("}")):Si()}function wn(){function ci(){an(yr+".drawElements("+[Nn,kn,gi,ni+"<<(("+gi+"-5121)>>1)"]+");")}function Si(){an(yr+".drawArrays("+[Nn,ni,kn]+");")}yn&&yn!=="null"?xi?ci():(an("if(",yn,"){"),ci(),an("}else{"),Si(),an("}")):Si()}var fn=Ue.shared,yr=fn.gl,br=fn.draw,Or=vn.draw,yn=function(){var ci=Or.elements,Si=pr;return ci?((ci.contextDep&&vn.contextDynamic||ci.propDep)&&(Si=an),ci=ci.append(Ue,Si),Or.elementsActive&&Si("if("+ci+")"+yr+".bindBuffer(34963,"+ci+".buffer.buffer);")):(ci=Si.def(),Si(ci,"=",br,".","elements",";","if(",ci,"){",yr,".bindBuffer(",34963,",",ci,".buffer.buffer);}","else if(",fn.vao,".currentVAO){",ci,"=",Ue.shared.elements+".getElements("+fn.vao,".currentVAO.elements);",hn?"":"if("+ci+")"+yr+".bindBuffer(34963,"+ci+".buffer.buffer);","}")),ci}(),Nn=rn("primitive"),ni=rn("offset"),kn=function(){var ci=Or.count,Si=pr;return ci?((ci.contextDep&&vn.contextDynamic||ci.propDep)&&(Si=an),ci=ci.append(Ue,Si)):ci=Si.def(br,".","count"),ci}();if(typeof kn=="number"){if(kn===0)return}else an("if(",kn,"){"),an.exit("}");var Kn,oi;Tr&&(Kn=rn("instances"),oi=Ue.instancing);var gi=yn+".type",xi=Or.elements&&W(Or.elements)&&!Or.vaoActive;Tr&&(typeof Kn!="number"||0<=Kn)?typeof Kn=="string"?(an("if(",Kn,">0){"),An(),an("}else if(",Kn,"<0){"),wn(),an("}")):An():wn()}function un(Ue,pr,an,vn,rn){return pr=Ge(),rn=pr.proc("body",rn),Tr&&(pr.instancing=rn.def(pr.shared.extensions,".angle_instanced_arrays")),Ue(pr,rn,an,vn),pr.compile().body}function Un(Ue,pr,an,vn){Nr(Ue,pr),an.useVAO?an.drawVAO?pr(Ue.shared.vao,".setVAO(",an.drawVAO.append(Ue,pr),");"):pr(Ue.shared.vao,".setVAO(",Ue.shared.vao,".targetVAO);"):(pr(Ue.shared.vao,".setVAO(null);"),Ar(Ue,pr,an,vn.attributes,function(){return!0})),Xr(Ue,pr,an,vn.uniforms,function(){return!0},!1),Tn(Ue,pr,pr,an)}function Dn(Ue,pr){var an=Ue.proc("draw",1);Nr(Ue,an),Le(Ue,an,pr.context),$e(Ue,an,pr.framebuffer),or(Ue,an,pr),Dr(Ue,an,pr.state),Fr(Ue,an,pr,!1,!0);var vn=pr.shader.progVar.append(Ue,an);if(an(Ue.shared.gl,".useProgram(",vn,".program);"),pr.shader.program)Un(Ue,an,pr,pr.shader.program);else{an(Ue.shared.vao,".setVAO(null);");var rn=Ue.global.def("{}"),An=an.def(vn,".id"),wn=an.def(rn,"[",An,"]");an(Ue.cond(wn).then(wn,".call(this,a0);").else(wn,"=",rn,"[",An,"]=",Ue.link(function(fn){return un(Un,Ue,pr,fn,1)}),"(",vn,");",wn,".call(this,a0);"))}0<Object.keys(pr.state).length&&an(Ue.shared.current,".dirty=true;"),Ue.shared.vao&&an(Ue.shared.vao,".setVAO(null);")}function Xn(Ue,pr,an,vn){function rn(){return!0}Ue.batchId="a1",Nr(Ue,pr),Ar(Ue,pr,an,vn.attributes,rn),Xr(Ue,pr,an,vn.uniforms,rn,!1),Tn(Ue,pr,pr,an)}function Gn(Ue,pr,an,vn){function rn(yn){return yn.contextDep&&wn||yn.propDep}function An(yn){return!rn(yn)}Nr(Ue,pr);var wn=an.contextDep,fn=pr.def(),yr=pr.def();Ue.shared.props=yr,Ue.batchId=fn;var br=Ue.scope(),Or=Ue.scope();pr(br.entry,"for(",fn,"=0;",fn,"<","a1",";++",fn,"){",yr,"=","a0","[",fn,"];",Or,"}",br.exit),an.needsContext&&Le(Ue,Or,an.context),an.needsFramebuffer&&$e(Ue,Or,an.framebuffer),Dr(Ue,Or,an.state,rn),an.profile&&rn(an.profile)&&Fr(Ue,Or,an,!1,!0),vn?(an.useVAO?an.drawVAO?rn(an.drawVAO)?Or(Ue.shared.vao,".setVAO(",an.drawVAO.append(Ue,Or),");"):br(Ue.shared.vao,".setVAO(",an.drawVAO.append(Ue,br),");"):br(Ue.shared.vao,".setVAO(",Ue.shared.vao,".targetVAO);"):(br(Ue.shared.vao,".setVAO(null);"),Ar(Ue,br,an,vn.attributes,An),Ar(Ue,Or,an,vn.attributes,rn)),Xr(Ue,br,an,vn.uniforms,An,!1),Xr(Ue,Or,an,vn.uniforms,rn,!0),Tn(Ue,br,Or,an)):(pr=Ue.global.def("{}"),vn=an.shader.progVar.append(Ue,Or),yr=Or.def(vn,".id"),br=Or.def(pr,"[",yr,"]"),Or(Ue.shared.gl,".useProgram(",vn,".program);","if(!",br,"){",br,"=",pr,"[",yr,"]=",Ue.link(function(yn){return un(Xn,Ue,an,yn,2)}),"(",vn,");}",br,".call(this,a0[",fn,"],",fn,");"))}function yi(Ue,pr){function an(br){return br.contextDep&&rn||br.propDep}var vn=Ue.proc("batch",2);Ue.batchId="0",Nr(Ue,vn);var rn=!1,An=!0;Object.keys(pr.context).forEach(function(br){rn=rn||pr.context[br].propDep}),rn||(Le(Ue,vn,pr.context),An=!1);var wn=pr.framebuffer,fn=!1;if(wn?(wn.propDep?rn=fn=!0:wn.contextDep&&rn&&(fn=!0),fn||$e(Ue,vn,wn)):$e(Ue,vn,null),pr.state.viewport&&pr.state.viewport.propDep&&(rn=!0),or(Ue,vn,pr),Dr(Ue,vn,pr.state,function(br){return!an(br)}),pr.profile&&an(pr.profile)||Fr(Ue,vn,pr,!1,"a1"),pr.contextDep=rn,pr.needsContext=An,pr.needsFramebuffer=fn,An=pr.shader.progVar,An.contextDep&&rn||An.propDep)Gn(Ue,vn,pr,null);else if(An=An.append(Ue,vn),vn(Ue.shared.gl,".useProgram(",An,".program);"),pr.shader.program)Gn(Ue,vn,pr,pr.shader.program);else{vn(Ue.shared.vao,".setVAO(null);");var wn=Ue.global.def("{}"),fn=vn.def(An,".id"),yr=vn.def(wn,"[",fn,"]");vn(Ue.cond(yr).then(yr,".call(this,a0,a1);").else(yr,"=",wn,"[",fn,"]=",Ue.link(function(yn){return un(Gn,Ue,pr,yn,2)}),"(",An,");",yr,".call(this,a0,a1);"))}0<Object.keys(pr.state).length&&vn(Ue.shared.current,".dirty=true;"),Ue.shared.vao&&vn(Ue.shared.vao,".setVAO(null);")}function Pi(Ue,pr){function an(fn){var yr=pr.shader[fn];yr&&(yr=yr.append(Ue,vn),isNaN(yr)?vn.set(rn.shader,"."+fn,yr):vn.set(rn.shader,"."+fn,Ue.link(yr,{stable:!0})))}var vn=Ue.proc("scope",3);Ue.batchId="a2";var rn=Ue.shared,An=rn.current;if(Le(Ue,vn,pr.context),pr.framebuffer&&pr.framebuffer.append(Ue,vn),et(Object.keys(pr.state)).forEach(function(fn){var yr=pr.state[fn],br=yr.append(Ue,vn);w(br)?br.forEach(function(Or,yn){isNaN(Or)?vn.set(Ue.next[fn],"["+yn+"]",Or):vn.set(Ue.next[fn],"["+yn+"]",Ue.link(Or,{stable:!0}))}):W(yr)?vn.set(rn.next,"."+fn,Ue.link(br,{stable:!0})):vn.set(rn.next,"."+fn,br)}),Fr(Ue,vn,pr,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(fn){var yr=pr.draw[fn];yr&&(yr=yr.append(Ue,vn),isNaN(yr)?vn.set(rn.draw,"."+fn,yr):vn.set(rn.draw,"."+fn,Ue.link(yr),{stable:!0}))}),Object.keys(pr.uniforms).forEach(function(fn){var yr=pr.uniforms[fn].append(Ue,vn);Array.isArray(yr)&&(yr="["+yr.map(function(br){return isNaN(br)?br:Ue.link(br,{stable:!0})})+"]"),vn.set(rn.uniforms,"["+Ue.link(Qe.id(fn),{stable:!0})+"]",yr)}),Object.keys(pr.attributes).forEach(function(fn){var yr=pr.attributes[fn].append(Ue,vn),br=Ue.scopeAttrib(fn);Object.keys(new Ji).forEach(function(Or){vn.set(br,"."+Or,yr[Or])})}),pr.scopeVAO){var wn=pr.scopeVAO.append(Ue,vn);isNaN(wn)?vn.set(rn.vao,".targetVAO",wn):vn.set(rn.vao,".targetVAO",Ue.link(wn,{stable:!0}))}an("vert"),an("frag"),0<Object.keys(pr.state).length&&(vn(An,".dirty=true;"),vn.exit(An,".dirty=true;")),vn("a1(",Ue.shared.context,",a0,",Ue.batchId,");")}function pa(Ue){if(typeof Ue=="object"&&!w(Ue)){for(var pr=Object.keys(Ue),an=0;an<pr.length;++an)if(ut.isDynamic(Ue[pr[an]]))return!0;return!1}}function Wi(Ue,pr,an){function vn(yn,Nn){wn.forEach(function(ni){var kn=rn[ni];ut.isDynamic(kn)&&(kn=yn.invoke(Nn,kn),Nn(Or,".",ni,"=",kn,";"))})}var rn=pr.static[an];if(rn&&pa(rn)){var An=Ue.global,wn=Object.keys(rn),fn=!1,yr=!1,br=!1,Or=Ue.global.def("{}");wn.forEach(function(yn){var Nn=rn[yn];if(ut.isDynamic(Nn))typeof Nn=="function"&&(Nn=rn[yn]=ut.unbox(Nn)),yn=nt(Nn,null),fn=fn||yn.thisDep,br=br||yn.propDep,yr=yr||yn.contextDep;else{switch(An(Or,".",yn,"="),typeof Nn){case"number":An(Nn);break;case"string":An('"',Nn,'"');break;case"object":Array.isArray(Nn)&&An("[",Nn.join(),"]");break;default:An(Ue.link(Nn))}An(";")}}),pr.dynamic[an]=new ut.DynamicVariable(4,{thisDep:fn,contextDep:yr,propDep:br,ref:Or,append:vn}),delete pr.static[an]}}var Ji=_e.Record,ji={add:32774,subtract:32778,"reverse subtract":32779};Ze.ext_blend_minmax&&(ji.min=32775,ji.max=32776);var Tr=Ze.angle_instanced_arrays,gn=Ze.webgl_draw_buffers,hn=Ze.oes_vertex_array_object,Sn={dirty:!0,profile:de.profile},Zn={},fi=[],ri={},Rn={};ye("dither",3024),ye("blend.enable",3042),Ae("blend.color","blendColor",[0,0,0,0]),Ae("blend.equation","blendEquationSeparate",[32774,32774]),Ae("blend.func","blendFuncSeparate",[1,0,1,0]),ye("depth.enable",2929,!0),Ae("depth.func","depthFunc",513),Ae("depth.range","depthRange",[0,1]),Ae("depth.mask","depthMask",!0),Ae("colorMask","colorMask",[!0,!0,!0,!0]),ye("cull.enable",2884),Ae("cull.face","cullFace",1029),Ae("frontFace","frontFace",2305),Ae("lineWidth","lineWidth",1),ye("polygonOffset.enable",32823),Ae("polygonOffset.offset","polygonOffset",[0,0]),ye("sample.alpha",32926),ye("sample.enable",32928),Ae("sample.coverage","sampleCoverage",[1,!1]),ye("stencil.enable",2960),Ae("stencil.mask","stencilMask",-1),Ae("stencil.func","stencilFunc",[519,0,-1]),Ae("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),Ae("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),ye("scissor.enable",3089),Ae("scissor.box","scissor",[0,0,le.drawingBufferWidth,le.drawingBufferHeight]),Ae("viewport","viewport",[0,0,le.drawingBufferWidth,le.drawingBufferHeight]);var jn={gl:le,context:Mt,strings:Qe,next:Zn,current:Sn,draw:Et,elements:oe,buffer:_r,shader:Pe,attributes:_e.state,vao:_e,uniforms:ne,framebuffer:te,extensions:Ze,timer:se,isBufferArgs:H},Gi={primTypes:Yt,compareFuncs:We,blendFuncs:er,blendEquations:ji,stencilOps:hr,glTypes:It,orientationType:Wr};gn&&(Gi.backBuffer=[1029],Gi.drawBuffer=o(Ve.maxDrawbuffers,function(Ue){return Ue===0?[0]:o(Ue,function(pr){return 36064+pr})}));var fa=0;return{next:Zn,current:Sn,procs:function(){var Ue=Ge(),pr=Ue.proc("poll"),an=Ue.proc("refresh"),vn=Ue.block();pr(vn),an(vn);var yr=Ue.shared,rn=yr.gl,An=yr.next,wn=yr.current;vn(wn,".dirty=false;"),$e(Ue,pr),$e(Ue,an,null,!0);var fn;Tr&&(fn=Ue.link(Tr)),Ze.oes_vertex_array_object&&an(Ue.link(Ze.oes_vertex_array_object),".bindVertexArrayOES(null);");var yr=an.def(yr.attributes),br=an.def(0),Or=Ue.cond(br,".buffer");Or.then(rn,".enableVertexAttribArray(i);",rn,".bindBuffer(",34962,",",br,".buffer.buffer);",rn,".vertexAttribPointer(i,",br,".size,",br,".type,",br,".normalized,",br,".stride,",br,".offset);").else(rn,".disableVertexAttribArray(i);",rn,".vertexAttrib4f(i,",br,".x,",br,".y,",br,".z,",br,".w);",br,".buffer=null;");var yn=Ue.link(Ve.maxAttributes,{stable:!0});return an("for(var i=0;i<",yn,";++i){",br,"=",yr,"[i];",Or,"}"),Tr&&an("for(var i=0;i<",yn,";++i){",fn,".vertexAttribDivisorANGLE(i,",yr,"[i].divisor);","}"),an(Ue.shared.vao,".currentVAO=null;",Ue.shared.vao,".setVAO(",Ue.shared.vao,".targetVAO);"),Object.keys(ri).forEach(function(Nn){var ni=ri[Nn],kn=vn.def(An,".",Nn),Kn=Ue.block();Kn("if(",kn,"){",rn,".enable(",ni,")}else{",rn,".disable(",ni,")}",wn,".",Nn,"=",kn,";"),an(Kn),pr("if(",kn,"!==",wn,".",Nn,"){",Kn,"}")}),Object.keys(Rn).forEach(function(Nn){var ni=Rn[Nn],kn=Sn[Nn],Kn,oi,gi=Ue.block();gi(rn,".",ni,"("),w(kn)?(ni=kn.length,Kn=Ue.global.def(An,".",Nn),oi=Ue.global.def(wn,".",Nn),gi(o(ni,function(xi){return Kn+"["+xi+"]"}),");",o(ni,function(xi){return oi+"["+xi+"]="+Kn+"["+xi+"];"}).join("")),pr("if(",o(ni,function(xi){return Kn+"["+xi+"]!=="+oi+"["+xi+"]"}).join("||"),"){",gi,"}")):(Kn=vn.def(An,".",Nn),oi=vn.def(wn,".",Nn),gi(Kn,");",wn,".",Nn,"=",Kn,";"),pr("if(",Kn,"!==",oi,"){",gi,"}")),an(gi)}),Ue.compile()}(),compile:function(Ue,pr,an,vn,rn){var An=Ge();An.stats=An.link(rn),Object.keys(pr.static).forEach(function(fn){Wi(An,pr,fn)}),Xe.forEach(function(fn){Wi(An,Ue,fn)});var wn=ae(Ue,pr,an,vn,An);return wn.shader.program&&(wn.shader.program.attributes.sort(function(fn,yr){return fn.name<yr.name?-1:1}),wn.shader.program.uniforms.sort(function(fn,yr){return fn.name<yr.name?-1:1})),Dn(An,wn),Pi(An,wn),yi(An,wn),ct(An.compile(),{destroy:function(){wn.shader.program.destroy()}})}}}function ot(le,Qe){for(var Ze=0;Ze<le.length;++Ze)if(le[Ze]===Qe)return Ze;return-1}var ct=function(le,Qe){for(var Ze=Object.keys(Qe),Ve=0;Ve<Ze.length;++Ve)le[Ze[Ve]]=Qe[Ze[Ve]];return le},bt=0,ut={DynamicVariable:f,define:function(le,Qe){return new f(le,m(Qe+""))},isDynamic:function(le){return typeof le=="function"&&!le._reglType||le instanceof f},unbox:x,accessor:m},pt={next:typeof requestAnimationFrame=="function"?function(le){return requestAnimationFrame(le)}:function(le){return setTimeout(le,16)},cancel:typeof cancelAnimationFrame=="function"?function(le){return cancelAnimationFrame(le)}:clearTimeout},yt=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date},Tt=g();Tt.zero=g();var kt=function(le,Qe){var Ze=1;Qe.ext_texture_filter_anisotropic&&(Ze=le.getParameter(34047));var Ve=1,_r=1;Qe.webgl_draw_buffers&&(Ve=le.getParameter(34852),_r=le.getParameter(36063));var oe=!!Qe.oes_texture_float;if(oe){oe=le.createTexture(),le.bindTexture(3553,oe),le.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var Ht=le.createFramebuffer();if(le.bindFramebuffer(36160,Ht),le.framebufferTexture2D(36160,36064,3553,oe,0),le.bindTexture(3553,null),le.checkFramebufferStatus(36160)!==36053)oe=!1;else{le.viewport(0,0,1,1),le.clearColor(1,0,0,1),le.clear(16384);var te=Tt.allocType(5126,4);le.readPixels(0,0,1,1,6408,5126,te),le.getError()?oe=!1:(le.deleteFramebuffer(Ht),le.deleteTexture(oe),oe=te[0]===1),Tt.freeType(te)}}return te=!0,typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(te=le.createTexture(),Ht=Tt.allocType(5121,36),le.activeTexture(33984),le.bindTexture(34067,te),le.texImage2D(34069,0,6408,3,3,0,6408,5121,Ht),Tt.freeType(Ht),le.bindTexture(34067,null),le.deleteTexture(te),te=!le.getError()),{colorBits:[le.getParameter(3410),le.getParameter(3411),le.getParameter(3412),le.getParameter(3413)],depthBits:le.getParameter(3414),stencilBits:le.getParameter(3415),subpixelBits:le.getParameter(3408),extensions:Object.keys(Qe).filter(function(ne){return!!Qe[ne]}),maxAnisotropic:Ze,maxDrawbuffers:Ve,maxColorAttachments:_r,pointSizeDims:le.getParameter(33901),lineWidthDims:le.getParameter(33902),maxViewportDims:le.getParameter(3386),maxCombinedTextureUnits:le.getParameter(35661),maxCubeMapSize:le.getParameter(34076),maxRenderbufferSize:le.getParameter(34024),maxTextureUnits:le.getParameter(34930),maxTextureSize:le.getParameter(3379),maxAttributes:le.getParameter(34921),maxVertexUniforms:le.getParameter(36347),maxVertexTextureUnits:le.getParameter(35660),maxVaryingVectors:le.getParameter(36348),maxFragmentUniforms:le.getParameter(36349),glsl:le.getParameter(35724),renderer:le.getParameter(7937),vendor:le.getParameter(7936),version:le.getParameter(7938),readFloat:oe,npotTextureCube:te}},zt=function(le){return le instanceof Uint8Array||le instanceof Uint16Array||le instanceof Uint32Array||le instanceof Int8Array||le instanceof Int16Array||le instanceof Int32Array||le instanceof Float32Array||le instanceof Float64Array||le instanceof Uint8ClampedArray},Rt=function(le){return Object.keys(le).map(function(Qe){return le[Qe]})},Gt={shape:function(le){for(var Qe=[];le.length;le=le[0])Qe.push(le.length);return Qe},flatten:function(le,Qe,Ze,Ve){var _r=1;if(Qe.length)for(var oe=0;oe<Qe.length;++oe)_r*=Qe[oe];else _r=0;switch(Ze=Ve||Tt.allocType(Ze,_r),Qe.length){case 0:break;case 1:for(Ve=Qe[0],Qe=0;Qe<Ve;++Qe)Ze[Qe]=le[Qe];break;case 2:for(Ve=Qe[0],Qe=Qe[1],oe=_r=0;oe<Ve;++oe)for(var Ht=le[oe],te=0;te<Qe;++te)Ze[_r++]=Ht[te];break;case 3:v(le,Qe[0],Qe[1],Qe[2],Ze,0);break;default:_(le,Qe,0,Ze,0)}return Ze}},wt={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},It={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},$t={dynamic:35048,stream:35040,static:35044},Qt=Gt.flatten,Nt=Gt.shape,Pt=[];Pt[5120]=1,Pt[5122]=2,Pt[5124]=4,Pt[5121]=1,Pt[5123]=2,Pt[5125]=4,Pt[5126]=4;var Yt={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},ve=new Float32Array(1),Re=new Uint32Array(ve.buffer),ir=[9984,9986,9985,9987],Ie=[0,6409,6410,6407,6408],Be={};Be[6409]=Be[6406]=Be[6402]=1,Be[34041]=Be[6410]=2,Be[6407]=Be[35904]=3,Be[6408]=Be[35906]=4;var Ye=h("HTMLCanvasElement"),ze=h("OffscreenCanvas"),Ee=h("CanvasRenderingContext2D"),Wt=h("ImageBitmap"),ee=h("HTMLImageElement"),Xt=h("HTMLVideoElement"),St=Object.keys(wt).concat([Ye,ze,Ee,Wt,ee,Xt]),Vt=[];Vt[5121]=1,Vt[5126]=4,Vt[36193]=2,Vt[5123]=2,Vt[5125]=4;var Zt=[];Zt[32854]=2,Zt[32855]=2,Zt[36194]=2,Zt[34041]=4,Zt[33776]=.5,Zt[33777]=.5,Zt[33778]=1,Zt[33779]=1,Zt[35986]=.5,Zt[35987]=1,Zt[34798]=1,Zt[35840]=.5,Zt[35841]=.25,Zt[35842]=.5,Zt[35843]=.25,Zt[36196]=.5;var qt=[];qt[32854]=2,qt[32855]=2,qt[36194]=2,qt[33189]=2,qt[36168]=1,qt[34041]=4,qt[35907]=4,qt[34836]=16,qt[34842]=8,qt[34843]=6;var Te=function(le,Qe,Ze,Ve,_r){function oe(Et){this.id=_e++,this.refCount=1,this.renderbuffer=Et,this.format=32854,this.height=this.width=0,_r.profile&&(this.stats={size:0})}function Ht(Et){var Mt=Et.renderbuffer;le.bindRenderbuffer(36161,null),le.deleteRenderbuffer(Mt),Et.renderbuffer=null,Et.refCount=0,delete Pe[Et.id],Ve.renderbufferCount--}var te={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};Qe.ext_srgb&&(te.srgba=35907),Qe.ext_color_buffer_half_float&&(te.rgba16f=34842,te.rgb16f=34843),Qe.webgl_color_buffer_float&&(te.rgba32f=34836);var ne=[];Object.keys(te).forEach(function(Et){ne[te[Et]]=Et});var _e=0,Pe={};return oe.prototype.decRef=function(){0>=--this.refCount&&Ht(this)},_r.profile&&(Ve.getTotalRenderbufferSize=function(){var Et=0;return Object.keys(Pe).forEach(function(Mt){Et+=Pe[Mt].stats.size}),Et}),{create:function(Et,Mt){function se(de,Se){var ye=0,Ae=0,Ge=32854;if(typeof de=="object"&&de?("shape"in de?(Ae=de.shape,ye=Ae[0]|0,Ae=Ae[1]|0):("radius"in de&&(ye=Ae=de.radius|0),"width"in de&&(ye=de.width|0),"height"in de&&(Ae=de.height|0)),"format"in de&&(Ge=te[de.format])):typeof de=="number"?(ye=de|0,Ae=typeof Se=="number"?Se|0:ye):de||(ye=Ae=1),ye!==ce.width||Ae!==ce.height||Ge!==ce.format)return se.width=ce.width=ye,se.height=ce.height=Ae,ce.format=Ge,le.bindRenderbuffer(36161,ce.renderbuffer),le.renderbufferStorage(36161,Ge,ye,Ae),_r.profile&&(ce.stats.size=qt[ce.format]*ce.width*ce.height),se.format=ne[ce.format],se}var ce=new oe(le.createRenderbuffer());return Pe[ce.id]=ce,Ve.renderbufferCount++,se(Et,Mt),se.resize=function(de,Se){var ye=de|0,Ae=Se|0||ye;return ye===ce.width&&Ae===ce.height||(se.width=ce.width=ye,se.height=ce.height=Ae,le.bindRenderbuffer(36161,ce.renderbuffer),le.renderbufferStorage(36161,ce.format,ye,Ae),_r.profile&&(ce.stats.size=qt[ce.format]*ce.width*ce.height)),se},se._reglType="renderbuffer",se._renderbuffer=ce,_r.profile&&(se.stats=ce.stats),se.destroy=function(){ce.decRef()},se},clear:function(){Rt(Pe).forEach(Ht)},restore:function(){Rt(Pe).forEach(function(Et){Et.renderbuffer=le.createRenderbuffer(),le.bindRenderbuffer(36161,Et.renderbuffer),le.renderbufferStorage(36161,Et.format,Et.width,Et.height)}),le.bindRenderbuffer(36161,null)}}},me=[];me[6408]=4,me[6407]=3;var Ne=[];Ne[5121]=1,Ne[5126]=4,Ne[36193]=2;var Ke=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],He=["x","y","z","w"],Xe="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),er={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},We={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},hr={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Wr={cw:2304,ccw:2305},dn=new q(!1,!1,!1,function(){}),Qr=function(le,Qe){function Ze(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function Ve(Pe,Et,Mt){var se=Ht.pop()||new Ze;se.startQueryIndex=Pe,se.endQueryIndex=Et,se.sum=0,se.stats=Mt,te.push(se)}if(!Qe.ext_disjoint_timer_query)return null;var _r=[],oe=[],Ht=[],te=[],ne=[],_e=[];return{beginQuery:function(Pe){var Et=_r.pop()||Qe.ext_disjoint_timer_query.createQueryEXT();Qe.ext_disjoint_timer_query.beginQueryEXT(35007,Et),oe.push(Et),Ve(oe.length-1,oe.length,Pe)},endQuery:function(){Qe.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:Ve,update:function(){var Pe,Et;if(Pe=oe.length,Pe!==0){_e.length=Math.max(_e.length,Pe+1),ne.length=Math.max(ne.length,Pe+1),ne[0]=0;var Mt=_e[0]=0;for(Et=Pe=0;Et<oe.length;++Et){var se=oe[Et];Qe.ext_disjoint_timer_query.getQueryObjectEXT(se,34919)?(Mt+=Qe.ext_disjoint_timer_query.getQueryObjectEXT(se,34918),_r.push(se)):oe[Pe++]=se,ne[Et+1]=Mt,_e[Et+1]=Pe}for(oe.length=Pe,Et=Pe=0;Et<te.length;++Et){var Mt=te[Et],ce=Mt.startQueryIndex,se=Mt.endQueryIndex;Mt.sum+=ne[se]-ne[ce],ce=_e[ce],se=_e[se],se===ce?(Mt.stats.gpuTime+=Mt.sum/1e6,Ht.push(Mt)):(Mt.startQueryIndex=ce,Mt.endQueryIndex=se,te[Pe++]=Mt)}te.length=Pe}},getNumPendingQueries:function(){return oe.length},clear:function(){_r.push.apply(_r,oe);for(var Pe=0;Pe<_r.length;Pe++)Qe.ext_disjoint_timer_query.deleteQueryEXT(_r[Pe]);oe.length=0,_r.length=0},restore:function(){oe.length=0,_r.length=0}}};return function(le){function Qe(){if(Fr.length===0)Ge&&Ge.update(),un=null;else{un=pt.next(Qe),Pe();for(var Dn=Fr.length-1;0<=Dn;--Dn){var Xn=Fr[Dn];Xn&&Xn(kr,null,0)}se.flush(),Ge&&Ge.update()}}function Ze(){!un&&0<Fr.length&&(un=pt.next(Qe))}function Ve(){un&&(pt.cancel(Qe),un=null)}function _r(Dn){Dn.preventDefault(),Ve(),Ar.forEach(function(Xn){Xn()})}function oe(Dn){se.getError(),de.restore(),Hr.restore(),ar.restore(),Cr.restore(),ae.restore(),Le.restore(),Ir.restore(),Ge&&Ge.restore(),$e.procs.refresh(),Ze(),Xr.forEach(function(Xn){Xn()})}function Ht(Dn){function Xn(Sn,Zn){var fi={},ri={};return Object.keys(Sn).forEach(function(Rn){var jn=Sn[Rn];if(ut.isDynamic(jn))ri[Rn]=ut.unbox(jn,Rn);else{if(Zn&&Array.isArray(jn)){for(var Gi=0;Gi<jn.length;++Gi)if(ut.isDynamic(jn[Gi])){ri[Rn]=ut.unbox(jn,Rn);return}}fi[Rn]=jn}}),{dynamic:ri,static:fi}}function Gn(Sn){for(;hn.length<Sn;)hn.push(null);return hn}var yi=Xn(Dn.context||{},!0),Pi=Xn(Dn.uniforms||{},!0),pa=Xn(Dn.attributes||{},!1);Dn=Xn(function(Sn){function Zn(ri){if(ri in fi){var Rn=fi[ri];delete fi[ri],Object.keys(Rn).forEach(function(jn){fi[ri+"."+jn]=Rn[jn]})}}var fi=ct({},Sn);return delete fi.uniforms,delete fi.attributes,delete fi.context,delete fi.vao,"stencil"in fi&&fi.stencil.op&&(fi.stencil.opBack=fi.stencil.opFront=fi.stencil.op,delete fi.stencil.op),Zn("blend"),Zn("depth"),Zn("cull"),Zn("stencil"),Zn("polygonOffset"),Zn("scissor"),Zn("sample"),"vao"in Sn&&(fi.vao=Sn.vao),fi}(Dn),!1);var Wi={gpuTime:0,cpuTime:0,count:0},Ji=$e.compile(Dn,pa,Pi,yi,Wi),ji=Ji.draw,Tr=Ji.batch,gn=Ji.scope,hn=[];return ct(function(Sn,Zn){var fi;if(typeof Sn=="function")return gn.call(this,null,Sn,0);if(typeof Zn=="function")if(typeof Sn=="number")for(fi=0;fi<Sn;++fi)gn.call(this,null,Zn,fi);else if(Array.isArray(Sn))for(fi=0;fi<Sn.length;++fi)gn.call(this,Sn[fi],Zn,fi);else return gn.call(this,Sn,Zn,0);else if(typeof Sn=="number"){if(0<Sn)return Tr.call(this,Gn(Sn|0),Sn|0)}else if(Array.isArray(Sn)){if(Sn.length)return Tr.call(this,Sn,Sn.length)}else return ji.call(this,Sn)},{stats:Wi,destroy:function(){Ji.destroy()}})}function te(Dn,Xn){var Gn=0;$e.procs.poll();var yi=Xn.color;yi&&(se.clearColor(+yi[0]||0,+yi[1]||0,+yi[2]||0,+yi[3]||0),Gn|=16384),"depth"in Xn&&(se.clearDepth(+Xn.depth),Gn|=256),"stencil"in Xn&&(se.clearStencil(Xn.stencil|0),Gn|=1024),se.clear(Gn)}function ne(Dn){return Fr.push(Dn),Ze(),{cancel:function(){function Xn(){var yi=ot(Fr,Xn);Fr[yi]=Fr[Fr.length-1],--Fr.length,0>=Fr.length&&Ve()}var Gn=ot(Fr,Dn);Fr[Gn]=Xn}}}function _e(){var Dn=Dr.viewport,Xn=Dr.scissor_box;Dn[0]=Dn[1]=Xn[0]=Xn[1]=0,kr.viewportWidth=kr.framebufferWidth=kr.drawingBufferWidth=Dn[2]=Xn[2]=se.drawingBufferWidth,kr.viewportHeight=kr.framebufferHeight=kr.drawingBufferHeight=Dn[3]=Xn[3]=se.drawingBufferHeight}function Pe(){kr.tick+=1,kr.time=Mt(),_e(),$e.procs.poll()}function Et(){Cr.refresh(),_e(),$e.procs.refresh(),Ge&&Ge.update()}function Mt(){return(yt()-sr)/1e3}if(le=d(le),!le)return null;var se=le.gl,ce=se.getContextAttributes();se.isContextLost();var de=s(se,le);if(!de)return null;var or=t(),Se={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},ye=le.cachedCode||{},Ae=de.extensions,Ge=Qr(se,Ae),sr=yt(),Mr=se.drawingBufferWidth,Er=se.drawingBufferHeight,kr={tick:0,time:0,viewportWidth:Mr,viewportHeight:Er,framebufferWidth:Mr,framebufferHeight:Er,drawingBufferWidth:Mr,drawingBufferHeight:Er,pixelRatio:le.pixelRatio},Mr={elements:null,primitive:4,count:-1,offset:0,instances:-1},Gr=kt(se,Ae),ar=A(se,Se,le,function(Dn){return Ir.destroyBuffer(Dn)}),xr=k(se,Ae,ar,Se),Ir=O(se,Ae,Gr,Se,ar,xr,Mr),Hr=G(se,or,Se,le),Cr=P(se,Ae,Gr,function(){$e.procs.poll()},kr,Se,le),ae=Te(se,Ae,Gr,Se,le),Le=I(se,Ae,Gr,Cr,ae,Se),$e=it(se,or,Ae,Gr,ar,xr,Cr,Le,{},Ir,Hr,Mr,kr,Ge,ye,le),or=$(se,Le,$e.procs.poll,kr),Dr=$e.next,Nr=se.canvas,Fr=[],Ar=[],Xr=[],Tn=[le.onDestroy],un=null;Nr&&(Nr.addEventListener("webglcontextlost",_r,!1),Nr.addEventListener("webglcontextrestored",oe,!1));var Un=Le.setFBO=Ht({framebuffer:ut.define.call(null,1,"framebuffer")});return Et(),ce=ct(Ht,{clear:function(Dn){if("framebuffer"in Dn)if(Dn.framebuffer&&Dn.framebuffer_reglType==="framebufferCube")for(var Xn=0;6>Xn;++Xn)Un(ct({framebuffer:Dn.framebuffer.faces[Xn]},Dn),te);else Un(Dn,te);else te(null,Dn)},prop:ut.define.bind(null,1),context:ut.define.bind(null,2),this:ut.define.bind(null,3),draw:Ht({}),buffer:function(Dn){return ar.create(Dn,34962,!1,!1)},elements:function(Dn){return xr.create(Dn,!1)},texture:Cr.create2D,cube:Cr.createCube,renderbuffer:ae.create,framebuffer:Le.create,framebufferCube:Le.createCube,vao:Ir.createVAO,attributes:ce,frame:ne,on:function(Dn,Xn){var Gn;switch(Dn){case"frame":return ne(Xn);case"lost":Gn=Ar;break;case"restore":Gn=Xr;break;case"destroy":Gn=Tn}return Gn.push(Xn),{cancel:function(){for(var yi=0;yi<Gn.length;++yi)if(Gn[yi]===Xn){Gn[yi]=Gn[Gn.length-1],Gn.pop();break}}}},limits:Gr,hasExtension:function(Dn){return 0<=Gr.extensions.indexOf(Dn.toLowerCase())},read:or,destroy:function(){Fr.length=0,Ve(),Nr&&(Nr.removeEventListener("webglcontextlost",_r),Nr.removeEventListener("webglcontextrestored",oe)),Hr.clear(),Le.clear(),ae.clear(),Ir.clear(),Cr.clear(),xr.clear(),ar.clear(),Ge&&Ge.clear(),Tn.forEach(function(Dn){Dn()})},_gl:se,_refresh:Et,poll:function(){Pe(),Ge&&Ge.update()},now:Mt,stats:Se,getCachedCode:function(){return ye},preloadCachedCode:function(Dn){Object.entries(Dn).forEach(function(Xn){ye[Xn[0]]=Xn[1]})}}),le.onDone(null,ce),ce}})},{}],285:[function(e,B,V){var f=e("buffer"),l=f.Buffer;function m(t,a){for(var i in t)a[i]=t[i]}l.from&&l.alloc&&l.allocUnsafe&&l.allocUnsafeSlow?B.exports=f:(m(f,V),V.Buffer=x);function x(t,a,i){return l(t,a,i)}x.prototype=Object.create(l.prototype),m(l,x),x.from=function(t,a,i){if(typeof t=="number")throw new TypeError("Argument must not be a number");return l(t,a,i)},x.alloc=function(t,a,i){if(typeof t!="number")throw new TypeError("Argument must be a number");var r=l(t);return a!==void 0?typeof i=="string"?r.fill(a,i):r.fill(a):r.fill(0),r},x.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return l(t)},x.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return f.SlowBuffer(t)}},{buffer:85}],286:[function(e,B,V){B.exports=m;var f=e("events").EventEmitter,l=e("inherits");l(m,f),m.Readable=e("readable-stream/lib/_stream_readable.js"),m.Writable=e("readable-stream/lib/_stream_writable.js"),m.Duplex=e("readable-stream/lib/_stream_duplex.js"),m.Transform=e("readable-stream/lib/_stream_transform.js"),m.PassThrough=e("readable-stream/lib/_stream_passthrough.js"),m.finished=e("readable-stream/lib/internal/streams/end-of-stream.js"),m.pipeline=e("readable-stream/lib/internal/streams/pipeline.js"),m.Stream=m;function m(){f.call(this)}m.prototype.pipe=function(x,t){var a=this;function i(g){x.writable&&x.write(g)===!1&&a.pause&&a.pause()}a.on("data",i);function r(){a.readable&&a.resume&&a.resume()}x.on("drain",r),!x._isStdio&&(!t||t.end!==!1)&&(a.on("end",d),a.on("close",s));var n=!1;function d(){n||(n=!0,x.end())}function s(){n||(n=!0,typeof x.destroy=="function"&&x.destroy())}function o(g){if(y(),f.listenerCount(this,"error")===0)throw g}a.on("error",o),x.on("error",o);function y(){a.removeListener("data",i),x.removeListener("drain",r),a.removeListener("end",d),a.removeListener("close",s),a.removeListener("error",o),x.removeListener("error",o),a.removeListener("end",y),a.removeListener("close",y),x.removeListener("close",y)}return a.on("end",y),a.on("close",y),x.on("close",y),x.emit("pipe",a),x}},{events:84,inherits:231,"readable-stream/lib/_stream_duplex.js":288,"readable-stream/lib/_stream_passthrough.js":289,"readable-stream/lib/_stream_readable.js":290,"readable-stream/lib/_stream_transform.js":291,"readable-stream/lib/_stream_writable.js":292,"readable-stream/lib/internal/streams/end-of-stream.js":296,"readable-stream/lib/internal/streams/pipeline.js":298}],287:[function(e,B,V){function f(r,n){r.prototype=Object.create(n.prototype),r.prototype.constructor=r,r.__proto__=n}var l={};function m(r,n,d){d||(d=Error);function s(y,g,b){return typeof n=="string"?n:n(y,g,b)}var o=function(y){f(g,y);function g(b,v,_){return y.call(this,s(b,v,_))||this}return g}(d);o.prototype.name=d.name,o.prototype.code=r,l[r]=o}function x(r,n){if(Array.isArray(r)){var d=r.length;return r=r.map(function(s){return String(s)}),d>2?"one of ".concat(n," ").concat(r.slice(0,d-1).join(", "),", or ")+r[d-1]:d===2?"one of ".concat(n," ").concat(r[0]," or ").concat(r[1]):"of ".concat(n," ").concat(r[0])}else return"of ".concat(n," ").concat(String(r))}function t(r,n,d){return r.substr(!d||d<0?0:+d,n.length)===n}function a(r,n,d){return(d===void 0||d>r.length)&&(d=r.length),r.substring(d-n.length,d)===n}function i(r,n,d){return typeof d!="number"&&(d=0),d+n.length>r.length?!1:r.indexOf(n,d)!==-1}m("ERR_INVALID_OPT_VALUE",function(r,n){return'The value "'+n+'" is invalid for option "'+r+'"'},TypeError),m("ERR_INVALID_ARG_TYPE",function(r,n,d){var s;typeof n=="string"&&t(n,"not ")?(s="must not be",n=n.replace(/^not /,"")):s="must be";var o;if(a(r," argument"))o="The ".concat(r," ").concat(s," ").concat(x(n,"type"));else{var y=i(r,".")?"property":"argument";o='The "'.concat(r,'" ').concat(y," ").concat(s," ").concat(x(n,"type"))}return o+=". Received type ".concat(typeof d),o},TypeError),m("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),m("ERR_METHOD_NOT_IMPLEMENTED",function(r){return"The "+r+" method is not implemented"}),m("ERR_STREAM_PREMATURE_CLOSE","Premature close"),m("ERR_STREAM_DESTROYED",function(r){return"Cannot call "+r+" after a stream was destroyed"}),m("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),m("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),m("ERR_STREAM_WRITE_AFTER_END","write after end"),m("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),m("ERR_UNKNOWN_ENCODING",function(r){return"Unknown encoding: "+r},TypeError),m("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),B.exports.codes=l},{}],288:[function(e,B,V){(function(f){(function(){var l=Object.keys||function(s){var o=[];for(var y in s)o.push(y);return o};B.exports=r;var m=e("./_stream_readable"),x=e("./_stream_writable");e("inherits")(r,m);for(var t=l(x.prototype),a=0;a<t.length;a++){var i=t[a];r.prototype[i]||(r.prototype[i]=x.prototype[i])}function r(s){if(!(this instanceof r))return new r(s);m.call(this,s),x.call(this,s),this.allowHalfOpen=!0,s&&(s.readable===!1&&(this.readable=!1),s.writable===!1&&(this.writable=!1),s.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",n)))}Object.defineProperty(r.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(r.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(r.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function n(){this._writableState.ended||f.nextTick(d,this)}function d(s){s.end()}Object.defineProperty(r.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(o){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=o,this._writableState.destroyed=o)}})}).call(this)}).call(this,e("_process"))},{"./_stream_readable":290,"./_stream_writable":292,_process:278,inherits:231}],289:[function(e,B,V){B.exports=l;var f=e("./_stream_transform");e("inherits")(l,f);function l(m){if(!(this instanceof l))return new l(m);f.call(this,m)}l.prototype._transform=function(m,x,t){t(null,m)}},{"./_stream_transform":291,inherits:231}],290:[function(e,B,V){(function(f,l){(function(){B.exports=M;var m;M.ReadableState=S,e("events").EventEmitter;var x=function(nt,it){return nt.listeners(it).length},t=e("./internal/streams/stream"),a=e("buffer").Buffer,i=l.Uint8Array||function(){};function r(K){return a.from(K)}function n(K){return a.isBuffer(K)||K instanceof i}var d=e("util"),s;d&&d.debuglog?s=d.debuglog("stream"):s=function(){};var o=e("./internal/streams/buffer_list"),y=e("./internal/streams/destroy"),g=e("./internal/streams/state"),b=g.getHighWaterMark,v=e("../errors").codes,_=v.ERR_INVALID_ARG_TYPE,u=v.ERR_STREAM_PUSH_AFTER_EOF,T=v.ERR_METHOD_NOT_IMPLEMENTED,c=v.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,A,k,p;e("inherits")(M,t);var w=y.errorOrDestroy,h=["error","close","destroy","pause","resume"];function D(K,nt,it){if(typeof K.prependListener=="function")return K.prependListener(nt,it);!K._events||!K._events[nt]?K.on(nt,it):Array.isArray(K._events[nt])?K._events[nt].unshift(it):K._events[nt]=[it,K._events[nt]]}function S(K,nt,it){m=m||e("./_stream_duplex"),K=K||{},typeof it!="boolean"&&(it=nt instanceof m),this.objectMode=!!K.objectMode,it&&(this.objectMode=this.objectMode||!!K.readableObjectMode),this.highWaterMark=b(this,K,"readableHighWaterMark",it),this.buffer=new o,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=K.emitClose!==!1,this.autoDestroy=!!K.autoDestroy,this.destroyed=!1,this.defaultEncoding=K.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,K.encoding&&(A||(A=e("string_decoder/").StringDecoder),this.decoder=new A(K.encoding),this.encoding=K.encoding)}function M(K){if(m=m||e("./_stream_duplex"),!(this instanceof M))return new M(K);var nt=this instanceof m;this._readableState=new S(K,this,nt),this.readable=!0,K&&(typeof K.read=="function"&&(this._read=K.read),typeof K.destroy=="function"&&(this._destroy=K.destroy)),t.call(this)}Object.defineProperty(M.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(nt){!this._readableState||(this._readableState.destroyed=nt)}}),M.prototype.destroy=y.destroy,M.prototype._undestroy=y.undestroy,M.prototype._destroy=function(K,nt){nt(K)},M.prototype.push=function(K,nt){var it=this._readableState,ot;return it.objectMode?ot=!0:typeof K=="string"&&(nt=nt||it.defaultEncoding,nt!==it.encoding&&(K=a.from(K,nt),nt=""),ot=!0),L(this,K,nt,!1,ot)},M.prototype.unshift=function(K){return L(this,K,null,!0,!1)};function L(K,nt,it,ot,ct){s("readableAddChunk",nt);var bt=K._readableState;if(nt===null)bt.reading=!1,O(K,bt);else{var ut;if(ct||(ut=z(bt,nt)),ut)w(K,ut);else if(bt.objectMode||nt&&nt.length>0)if(typeof nt!="string"&&!bt.objectMode&&Object.getPrototypeOf(nt)!==a.prototype&&(nt=r(nt)),ot)bt.endEmitted?w(K,new c):R(K,bt,nt,!0);else if(bt.ended)w(K,new u);else{if(bt.destroyed)return!1;bt.reading=!1,bt.decoder&&!it?(nt=bt.decoder.write(nt),bt.objectMode||nt.length!==0?R(K,bt,nt,!1):tt(K,bt)):R(K,bt,nt,!1)}else ot||(bt.reading=!1,tt(K,bt))}return!bt.ended&&(bt.length<bt.highWaterMark||bt.length===0)}function R(K,nt,it,ot){nt.flowing&&nt.length===0&&!nt.sync?(nt.awaitDrain=0,K.emit("data",it)):(nt.length+=nt.objectMode?1:it.length,ot?nt.buffer.unshift(it):nt.buffer.push(it),nt.needReadable&&G(K)),tt(K,nt)}function z(K,nt){var it;return!n(nt)&&typeof nt!="string"&&nt!==void 0&&!K.objectMode&&(it=new _("chunk",["string","Buffer","Uint8Array"],nt)),it}M.prototype.isPaused=function(){return this._readableState.flowing===!1},M.prototype.setEncoding=function(K){A||(A=e("string_decoder/").StringDecoder);var nt=new A(K);this._readableState.decoder=nt,this._readableState.encoding=this._readableState.decoder.encoding;for(var it=this._readableState.buffer.head,ot="";it!==null;)ot+=nt.write(it.data),it=it.next;return this._readableState.buffer.clear(),ot!==""&&this._readableState.buffer.push(ot),this._readableState.length=ot.length,this};var P=1073741824;function I(K){return K>=P?K=P:(K--,K|=K>>>1,K|=K>>>2,K|=K>>>4,K|=K>>>8,K|=K>>>16,K++),K}function U(K,nt){return K<=0||nt.length===0&&nt.ended?0:nt.objectMode?1:K!==K?nt.flowing&&nt.length?nt.buffer.head.data.length:nt.length:(K>nt.highWaterMark&&(nt.highWaterMark=I(K)),K<=nt.length?K:nt.ended?nt.length:(nt.needReadable=!0,0))}M.prototype.read=function(K){s("read",K),K=parseInt(K,10);var nt=this._readableState,it=K;if(K!==0&&(nt.emittedReadable=!1),K===0&&nt.needReadable&&((nt.highWaterMark!==0?nt.length>=nt.highWaterMark:nt.length>0)||nt.ended))return s("read: emitReadable",nt.length,nt.ended),nt.length===0&&nt.ended?et(this):G(this),null;if(K=U(K,nt),K===0&&nt.ended)return nt.length===0&&et(this),null;var ot=nt.needReadable;s("need readable",ot),(nt.length===0||nt.length-K<nt.highWaterMark)&&(ot=!0,s("length less than watermark",ot)),nt.ended||nt.reading?(ot=!1,s("reading or ended",ot)):ot&&(s("do read"),nt.reading=!0,nt.sync=!0,nt.length===0&&(nt.needReadable=!0),this._read(nt.highWaterMark),nt.sync=!1,nt.reading||(K=U(it,nt)));var ct;return K>0?ct=H(K,nt):ct=null,ct===null?(nt.needReadable=nt.length<=nt.highWaterMark,K=0):(nt.length-=K,nt.awaitDrain=0),nt.length===0&&(nt.ended||(nt.needReadable=!0),it!==K&&nt.ended&&et(this)),ct!==null&&this.emit("data",ct),ct};function O(K,nt){if(s("onEofChunk"),!nt.ended){if(nt.decoder){var it=nt.decoder.end();it&&it.length&&(nt.buffer.push(it),nt.length+=nt.objectMode?1:it.length)}nt.ended=!0,nt.sync?G(K):(nt.needReadable=!1,nt.emittedReadable||(nt.emittedReadable=!0,$(K)))}}function G(K){var nt=K._readableState;s("emitReadable",nt.needReadable,nt.emittedReadable),nt.needReadable=!1,nt.emittedReadable||(s("emitReadable",nt.flowing),nt.emittedReadable=!0,f.nextTick($,K))}function $(K){var nt=K._readableState;s("emitReadable_",nt.destroyed,nt.length,nt.ended),!nt.destroyed&&(nt.length||nt.ended)&&(K.emit("readable"),nt.emittedReadable=!1),nt.needReadable=!nt.flowing&&!nt.ended&&nt.length<=nt.highWaterMark,F(K)}function tt(K,nt){nt.readingMore||(nt.readingMore=!0,f.nextTick(Z,K,nt))}function Z(K,nt){for(;!nt.reading&&!nt.ended&&(nt.length<nt.highWaterMark||nt.flowing&&nt.length===0);){var it=nt.length;if(s("maybeReadMore read 0"),K.read(0),it===nt.length)break}nt.readingMore=!1}M.prototype._read=function(K){w(this,new T("_read()"))},M.prototype.pipe=function(K,nt){var it=this,ot=this._readableState;switch(ot.pipesCount){case 0:ot.pipes=K;break;case 1:ot.pipes=[ot.pipes,K];break;default:ot.pipes.push(K);break}ot.pipesCount+=1,s("pipe count=%d opts=%j",ot.pipesCount,nt);var ct=(!nt||nt.end!==!1)&&K!==f.stdout&&K!==f.stderr,bt=ct?pt:It;ot.endEmitted?f.nextTick(bt):it.once("end",bt),K.on("unpipe",ut);function ut($t,Qt){s("onunpipe"),$t===it&&Qt&&Qt.hasUnpiped===!1&&(Qt.hasUnpiped=!0,kt())}function pt(){s("onend"),K.end()}var yt=X(it);K.on("drain",yt);var Tt=!1;function kt(){s("cleanup"),K.removeListener("close",Gt),K.removeListener("finish",wt),K.removeListener("drain",yt),K.removeListener("error",Rt),K.removeListener("unpipe",ut),it.removeListener("end",pt),it.removeListener("end",It),it.removeListener("data",zt),Tt=!0,ot.awaitDrain&&(!K._writableState||K._writableState.needDrain)&&yt()}it.on("data",zt);function zt($t){s("ondata");var Qt=K.write($t);s("dest.write",Qt),Qt===!1&&((ot.pipesCount===1&&ot.pipes===K||ot.pipesCount>1&&W(ot.pipes,K)!==-1)&&!Tt&&(s("false write response, pause",ot.awaitDrain),ot.awaitDrain++),it.pause())}function Rt($t){s("onerror",$t),It(),K.removeListener("error",Rt),x(K,"error")===0&&w(K,$t)}D(K,"error",Rt);function Gt(){K.removeListener("finish",wt),It()}K.once("close",Gt);function wt(){s("onfinish"),K.removeListener("close",Gt),It()}K.once("finish",wt);function It(){s("unpipe"),it.unpipe(K)}return K.emit("pipe",it),ot.flowing||(s("pipe resume"),it.resume()),K};function X(K){return function(){var it=K._readableState;s("pipeOnDrain",it.awaitDrain),it.awaitDrain&&it.awaitDrain--,it.awaitDrain===0&&x(K,"data")&&(it.flowing=!0,F(K))}}M.prototype.unpipe=function(K){var nt=this._readableState,it={hasUnpiped:!1};if(nt.pipesCount===0)return this;if(nt.pipesCount===1)return K&&K!==nt.pipes?this:(K||(K=nt.pipes),nt.pipes=null,nt.pipesCount=0,nt.flowing=!1,K&&K.emit("unpipe",this,it),this);if(!K){var ot=nt.pipes,ct=nt.pipesCount;nt.pipes=null,nt.pipesCount=0,nt.flowing=!1;for(var bt=0;bt<ct;bt++)ot[bt].emit("unpipe",this,{hasUnpiped:!1});return this}var ut=W(nt.pipes,K);return ut===-1?this:(nt.pipes.splice(ut,1),nt.pipesCount-=1,nt.pipesCount===1&&(nt.pipes=nt.pipes[0]),K.emit("unpipe",this,it),this)},M.prototype.on=function(K,nt){var it=t.prototype.on.call(this,K,nt),ot=this._readableState;return K==="data"?(ot.readableListening=this.listenerCount("readable")>0,ot.flowing!==!1&&this.resume()):K==="readable"&&!ot.endEmitted&&!ot.readableListening&&(ot.readableListening=ot.needReadable=!0,ot.flowing=!1,ot.emittedReadable=!1,s("on readable",ot.length,ot.reading),ot.length?G(this):ot.reading||f.nextTick(st,this)),it},M.prototype.addListener=M.prototype.on,M.prototype.removeListener=function(K,nt){var it=t.prototype.removeListener.call(this,K,nt);return K==="readable"&&f.nextTick(J,this),it},M.prototype.removeAllListeners=function(K){var nt=t.prototype.removeAllListeners.apply(this,arguments);return(K==="readable"||K===void 0)&&f.nextTick(J,this),nt};function J(K){var nt=K._readableState;nt.readableListening=K.listenerCount("readable")>0,nt.resumeScheduled&&!nt.paused?nt.flowing=!0:K.listenerCount("data")>0&&K.resume()}function st(K){s("readable nexttick read 0"),K.read(0)}M.prototype.resume=function(){var K=this._readableState;return K.flowing||(s("resume"),K.flowing=!K.readableListening,at(this,K)),K.paused=!1,this};function at(K,nt){nt.resumeScheduled||(nt.resumeScheduled=!0,f.nextTick(lt,K,nt))}function lt(K,nt){s("resume",nt.reading),nt.reading||K.read(0),nt.resumeScheduled=!1,K.emit("resume"),F(K),nt.flowing&&!nt.reading&&K.read(0)}M.prototype.pause=function(){return s("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(s("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function F(K){var nt=K._readableState;for(s("flow",nt.flowing);nt.flowing&&K.read()!==null;);}M.prototype.wrap=function(K){var nt=this,it=this._readableState,ot=!1;K.on("end",function(){if(s("wrapped end"),it.decoder&&!it.ended){var ut=it.decoder.end();ut&&ut.length&&nt.push(ut)}nt.push(null)}),K.on("data",function(ut){if(s("wrapped data"),it.decoder&&(ut=it.decoder.write(ut)),!(it.objectMode&&ut==null)&&!(!it.objectMode&&(!ut||!ut.length))){var pt=nt.push(ut);pt||(ot=!0,K.pause())}});for(var ct in K)this[ct]===void 0&&typeof K[ct]=="function"&&(this[ct]=function(pt){return function(){return K[pt].apply(K,arguments)}}(ct));for(var bt=0;bt<h.length;bt++)K.on(h[bt],this.emit.bind(this,h[bt]));return this._read=function(ut){s("wrapped _read",ut),ot&&(ot=!1,K.resume())},this},typeof Symbol=="function"&&(M.prototype[Symbol.asyncIterator]=function(){return k===void 0&&(k=e("./internal/streams/async_iterator")),k(this)}),Object.defineProperty(M.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(M.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(M.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(nt){this._readableState&&(this._readableState.flowing=nt)}}),M._fromList=H,Object.defineProperty(M.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function H(K,nt){if(nt.length===0)return null;var it;return nt.objectMode?it=nt.buffer.shift():!K||K>=nt.length?(nt.decoder?it=nt.buffer.join(""):nt.buffer.length===1?it=nt.buffer.first():it=nt.buffer.concat(nt.length),nt.buffer.clear()):it=nt.buffer.consume(K,nt.decoder),it}function et(K){var nt=K._readableState;s("endReadable",nt.endEmitted),nt.endEmitted||(nt.ended=!0,f.nextTick(q,nt,K))}function q(K,nt){if(s("endReadableNT",K.endEmitted,K.length),!K.endEmitted&&K.length===0&&(K.endEmitted=!0,nt.readable=!1,nt.emit("end"),K.autoDestroy)){var it=nt._writableState;(!it||it.autoDestroy&&it.finished)&&nt.destroy()}}typeof Symbol=="function"&&(M.from=function(K,nt){return p===void 0&&(p=e("./internal/streams/from")),p(M,K,nt)});function W(K,nt){for(var it=0,ot=K.length;it<ot;it++)if(K[it]===nt)return it;return-1}}).call(this)}).call(this,e("_process"),typeof zo<"u"?zo:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":287,"./_stream_duplex":288,"./internal/streams/async_iterator":293,"./internal/streams/buffer_list":294,"./internal/streams/destroy":295,"./internal/streams/from":297,"./internal/streams/state":299,"./internal/streams/stream":300,_process:278,buffer:85,events:84,inherits:231,"string_decoder/":301,util:83}],291:[function(e,B,V){B.exports=r;var f=e("../errors").codes,l=f.ERR_METHOD_NOT_IMPLEMENTED,m=f.ERR_MULTIPLE_CALLBACK,x=f.ERR_TRANSFORM_ALREADY_TRANSFORMING,t=f.ERR_TRANSFORM_WITH_LENGTH_0,a=e("./_stream_duplex");e("inherits")(r,a);function i(s,o){var y=this._transformState;y.transforming=!1;var g=y.writecb;if(g===null)return this.emit("error",new m);y.writechunk=null,y.writecb=null,o!=null&&this.push(o),g(s);var b=this._readableState;b.reading=!1,(b.needReadable||b.length<b.highWaterMark)&&this._read(b.highWaterMark)}function r(s){if(!(this instanceof r))return new r(s);a.call(this,s),this._transformState={afterTransform:i.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,s&&(typeof s.transform=="function"&&(this._transform=s.transform),typeof s.flush=="function"&&(this._flush=s.flush)),this.on("prefinish",n)}function n(){var s=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(o,y){d(s,o,y)}):d(this,null,null)}r.prototype.push=function(s,o){return this._transformState.needTransform=!1,a.prototype.push.call(this,s,o)},r.prototype._transform=function(s,o,y){y(new l("_transform()"))},r.prototype._write=function(s,o,y){var g=this._transformState;if(g.writecb=y,g.writechunk=s,g.writeencoding=o,!g.transforming){var b=this._readableState;(g.needTransform||b.needReadable||b.length<b.highWaterMark)&&this._read(b.highWaterMark)}},r.prototype._read=function(s){var o=this._transformState;o.writechunk!==null&&!o.transforming?(o.transforming=!0,this._transform(o.writechunk,o.writeencoding,o.afterTransform)):o.needTransform=!0},r.prototype._destroy=function(s,o){a.prototype._destroy.call(this,s,function(y){o(y)})};function d(s,o,y){if(o)return s.emit("error",o);if(y!=null&&s.push(y),s._writableState.length)throw new t;if(s._transformState.transforming)throw new x;return s.push(null)}},{"../errors":287,"./_stream_duplex":288,inherits:231}],292:[function(e,B,V){(function(f,l){(function(){B.exports=S;function m(F){var H=this;this.next=null,this.entry=null,this.finish=function(){lt(H,F)}}var x;S.WritableState=h;var t={deprecate:e("util-deprecate")},a=e("./internal/streams/stream"),i=e("buffer").Buffer,r=l.Uint8Array||function(){};function n(F){return i.from(F)}function d(F){return i.isBuffer(F)||F instanceof r}var s=e("./internal/streams/destroy"),o=e("./internal/streams/state"),y=o.getHighWaterMark,g=e("../errors").codes,b=g.ERR_INVALID_ARG_TYPE,v=g.ERR_METHOD_NOT_IMPLEMENTED,_=g.ERR_MULTIPLE_CALLBACK,u=g.ERR_STREAM_CANNOT_PIPE,T=g.ERR_STREAM_DESTROYED,c=g.ERR_STREAM_NULL_VALUES,A=g.ERR_STREAM_WRITE_AFTER_END,k=g.ERR_UNKNOWN_ENCODING,p=s.errorOrDestroy;e("inherits")(S,a);function w(){}function h(F,H,et){x=x||e("./_stream_duplex"),F=F||{},typeof et!="boolean"&&(et=H instanceof x),this.objectMode=!!F.objectMode,et&&(this.objectMode=this.objectMode||!!F.writableObjectMode),this.highWaterMark=y(this,F,"writableHighWaterMark",et),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var q=F.decodeStrings===!1;this.decodeStrings=!q,this.defaultEncoding=F.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(W){O(H,W)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=F.emitClose!==!1,this.autoDestroy=!!F.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new m(this)}h.prototype.getBuffer=function(){for(var H=this.bufferedRequest,et=[];H;)et.push(H),H=H.next;return et},function(){try{Object.defineProperty(h.prototype,"buffer",{get:t.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var D;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(D=Function.prototype[Symbol.hasInstance],Object.defineProperty(S,Symbol.hasInstance,{value:function(H){return D.call(this,H)?!0:this!==S?!1:H&&H._writableState instanceof h}})):D=function(H){return H instanceof this};function S(F){x=x||e("./_stream_duplex");var H=this instanceof x;if(!H&&!D.call(S,this))return new S(F);this._writableState=new h(F,this,H),this.writable=!0,F&&(typeof F.write=="function"&&(this._write=F.write),typeof F.writev=="function"&&(this._writev=F.writev),typeof F.destroy=="function"&&(this._destroy=F.destroy),typeof F.final=="function"&&(this._final=F.final)),a.call(this)}S.prototype.pipe=function(){p(this,new u)};function M(F,H){var et=new A;p(F,et),f.nextTick(H,et)}function L(F,H,et,q){var W;return et===null?W=new c:typeof et!="string"&&!H.objectMode&&(W=new b("chunk",["string","Buffer"],et)),W?(p(F,W),f.nextTick(q,W),!1):!0}S.prototype.write=function(F,H,et){var q=this._writableState,W=!1,K=!q.objectMode&&d(F);return K&&!i.isBuffer(F)&&(F=n(F)),typeof H=="function"&&(et=H,H=null),K?H="buffer":H||(H=q.defaultEncoding),typeof et!="function"&&(et=w),q.ending?M(this,et):(K||L(this,q,F,et))&&(q.pendingcb++,W=z(this,q,K,F,H,et)),W},S.prototype.cork=function(){this._writableState.corked++},S.prototype.uncork=function(){var F=this._writableState;F.corked&&(F.corked--,!F.writing&&!F.corked&&!F.bufferProcessing&&F.bufferedRequest&&tt(this,F))},S.prototype.setDefaultEncoding=function(H){if(typeof H=="string"&&(H=H.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((H+"").toLowerCase())>-1))throw new k(H);return this._writableState.defaultEncoding=H,this},Object.defineProperty(S.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function R(F,H,et){return!F.objectMode&&F.decodeStrings!==!1&&typeof H=="string"&&(H=i.from(H,et)),H}Object.defineProperty(S.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function z(F,H,et,q,W,K){if(!et){var nt=R(H,q,W);q!==nt&&(et=!0,W="buffer",q=nt)}var it=H.objectMode?1:q.length;H.length+=it;var ot=H.length<H.highWaterMark;if(ot||(H.needDrain=!0),H.writing||H.corked){var ct=H.lastBufferedRequest;H.lastBufferedRequest={chunk:q,encoding:W,isBuf:et,callback:K,next:null},ct?ct.next=H.lastBufferedRequest:H.bufferedRequest=H.lastBufferedRequest,H.bufferedRequestCount+=1}else P(F,H,!1,it,q,W,K);return ot}function P(F,H,et,q,W,K,nt){H.writelen=q,H.writecb=nt,H.writing=!0,H.sync=!0,H.destroyed?H.onwrite(new T("write")):et?F._writev(W,H.onwrite):F._write(W,K,H.onwrite),H.sync=!1}function I(F,H,et,q,W){--H.pendingcb,et?(f.nextTick(W,q),f.nextTick(st,F,H),F._writableState.errorEmitted=!0,p(F,q)):(W(q),F._writableState.errorEmitted=!0,p(F,q),st(F,H))}function U(F){F.writing=!1,F.writecb=null,F.length-=F.writelen,F.writelen=0}function O(F,H){var et=F._writableState,q=et.sync,W=et.writecb;if(typeof W!="function")throw new _;if(U(et),H)I(F,et,q,H,W);else{var K=Z(et)||F.destroyed;!K&&!et.corked&&!et.bufferProcessing&&et.bufferedRequest&&tt(F,et),q?f.nextTick(G,F,et,K,W):G(F,et,K,W)}}function G(F,H,et,q){et||$(F,H),H.pendingcb--,q(),st(F,H)}function $(F,H){H.length===0&&H.needDrain&&(H.needDrain=!1,F.emit("drain"))}function tt(F,H){H.bufferProcessing=!0;var et=H.bufferedRequest;if(F._writev&&et&&et.next){var q=H.bufferedRequestCount,W=new Array(q),K=H.corkedRequestsFree;K.entry=et;for(var nt=0,it=!0;et;)W[nt]=et,et.isBuf||(it=!1),et=et.next,nt+=1;W.allBuffers=it,P(F,H,!0,H.length,W,"",K.finish),H.pendingcb++,H.lastBufferedRequest=null,K.next?(H.corkedRequestsFree=K.next,K.next=null):H.corkedRequestsFree=new m(H),H.bufferedRequestCount=0}else{for(;et;){var ot=et.chunk,ct=et.encoding,bt=et.callback,ut=H.objectMode?1:ot.length;if(P(F,H,!1,ut,ot,ct,bt),et=et.next,H.bufferedRequestCount--,H.writing)break}et===null&&(H.lastBufferedRequest=null)}H.bufferedRequest=et,H.bufferProcessing=!1}S.prototype._write=function(F,H,et){et(new v("_write()"))},S.prototype._writev=null,S.prototype.end=function(F,H,et){var q=this._writableState;return typeof F=="function"?(et=F,F=null,H=null):typeof H=="function"&&(et=H,H=null),F!=null&&this.write(F,H),q.corked&&(q.corked=1,this.uncork()),q.ending||at(this,q,et),this},Object.defineProperty(S.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function Z(F){return F.ending&&F.length===0&&F.bufferedRequest===null&&!F.finished&&!F.writing}function X(F,H){F._final(function(et){H.pendingcb--,et&&p(F,et),H.prefinished=!0,F.emit("prefinish"),st(F,H)})}function J(F,H){!H.prefinished&&!H.finalCalled&&(typeof F._final=="function"&&!H.destroyed?(H.pendingcb++,H.finalCalled=!0,f.nextTick(X,F,H)):(H.prefinished=!0,F.emit("prefinish")))}function st(F,H){var et=Z(H);if(et&&(J(F,H),H.pendingcb===0&&(H.finished=!0,F.emit("finish"),H.autoDestroy))){var q=F._readableState;(!q||q.autoDestroy&&q.endEmitted)&&F.destroy()}return et}function at(F,H,et){H.ending=!0,st(F,H),et&&(H.finished?f.nextTick(et):F.once("finish",et)),H.ended=!0,F.writable=!1}function lt(F,H,et){var q=F.entry;for(F.entry=null;q;){var W=q.callback;H.pendingcb--,W(et),q=q.next}H.corkedRequestsFree.next=F}Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(H){!this._writableState||(this._writableState.destroyed=H)}}),S.prototype.destroy=s.destroy,S.prototype._undestroy=s.undestroy,S.prototype._destroy=function(F,H){H(F)}}).call(this)}).call(this,e("_process"),typeof zo<"u"?zo:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":287,"./_stream_duplex":288,"./internal/streams/destroy":295,"./internal/streams/state":299,"./internal/streams/stream":300,_process:278,buffer:85,inherits:231,"util-deprecate":331}],293:[function(e,B,V){(function(f){(function(){var l;function m(T,c,A){return c in T?Object.defineProperty(T,c,{value:A,enumerable:!0,configurable:!0,writable:!0}):T[c]=A,T}var x=e("./end-of-stream"),t=Symbol("lastResolve"),a=Symbol("lastReject"),i=Symbol("error"),r=Symbol("ended"),n=Symbol("lastPromise"),d=Symbol("handlePromise"),s=Symbol("stream");function o(T,c){return{value:T,done:c}}function y(T){var c=T[t];if(c!==null){var A=T[s].read();A!==null&&(T[n]=null,T[t]=null,T[a]=null,c(o(A,!1)))}}function g(T){f.nextTick(y,T)}function b(T,c){return function(A,k){T.then(function(){if(c[r]){A(o(void 0,!0));return}c[d](A,k)},k)}}var v=Object.getPrototypeOf(function(){}),_=Object.setPrototypeOf((l={get stream(){return this[s]},next:function(){var c=this,A=this[i];if(A!==null)return Promise.reject(A);if(this[r])return Promise.resolve(o(void 0,!0));if(this[s].destroyed)return new Promise(function(h,D){f.nextTick(function(){c[i]?D(c[i]):h(o(void 0,!0))})});var k=this[n],p;if(k)p=new Promise(b(k,this));else{var w=this[s].read();if(w!==null)return Promise.resolve(o(w,!1));p=new Promise(this[d])}return this[n]=p,p}},m(l,Symbol.asyncIterator,function(){return this}),m(l,"return",function(){var c=this;return new Promise(function(A,k){c[s].destroy(null,function(p){if(p){k(p);return}A(o(void 0,!0))})})}),l),v),u=function(c){var A,k=Object.create(_,(A={},m(A,s,{value:c,writable:!0}),m(A,t,{value:null,writable:!0}),m(A,a,{value:null,writable:!0}),m(A,i,{value:null,writable:!0}),m(A,r,{value:c._readableState.endEmitted,writable:!0}),m(A,d,{value:function(w,h){var D=k[s].read();D?(k[n]=null,k[t]=null,k[a]=null,w(o(D,!1))):(k[t]=w,k[a]=h)},writable:!0}),A));return k[n]=null,x(c,function(p){if(p&&p.code!=="ERR_STREAM_PREMATURE_CLOSE"){var w=k[a];w!==null&&(k[n]=null,k[t]=null,k[a]=null,w(p)),k[i]=p;return}var h=k[t];h!==null&&(k[n]=null,k[t]=null,k[a]=null,h(o(void 0,!0))),k[r]=!0}),c.on("readable",g.bind(null,k)),k};B.exports=u}).call(this)}).call(this,e("_process"))},{"./end-of-stream":296,_process:278}],294:[function(e,B,V){function f(y,g){var b=Object.keys(y);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(y);g&&(v=v.filter(function(_){return Object.getOwnPropertyDescriptor(y,_).enumerable})),b.push.apply(b,v)}return b}function l(y){for(var g=1;g<arguments.length;g++){var b=arguments[g]!=null?arguments[g]:{};g%2?f(Object(b),!0).forEach(function(v){m(y,v,b[v])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(b)):f(Object(b)).forEach(function(v){Object.defineProperty(y,v,Object.getOwnPropertyDescriptor(b,v))})}return y}function m(y,g,b){return g in y?Object.defineProperty(y,g,{value:b,enumerable:!0,configurable:!0,writable:!0}):y[g]=b,y}function x(y,g){if(!(y instanceof g))throw new TypeError("Cannot call a class as a function")}function t(y,g){for(var b=0;b<g.length;b++){var v=g[b];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(y,v.key,v)}}function a(y,g,b){return g&&t(y.prototype,g),b&&t(y,b),y}var i=e("buffer"),r=i.Buffer,n=e("util"),d=n.inspect,s=d&&d.custom||"inspect";function o(y,g,b){r.prototype.copy.call(y,g,b)}B.exports=function(){function y(){x(this,y),this.head=null,this.tail=null,this.length=0}return a(y,[{key:"push",value:function(b){var v={data:b,next:null};this.length>0?this.tail.next=v:this.head=v,this.tail=v,++this.length}},{key:"unshift",value:function(b){var v={data:b,next:this.head};this.length===0&&(this.tail=v),this.head=v,++this.length}},{key:"shift",value:function(){if(this.length!==0){var b=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,b}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(b){if(this.length===0)return"";for(var v=this.head,_=""+v.data;v=v.next;)_+=b+v.data;return _}},{key:"concat",value:function(b){if(this.length===0)return r.alloc(0);for(var v=r.allocUnsafe(b>>>0),_=this.head,u=0;_;)o(_.data,v,u),u+=_.data.length,_=_.next;return v}},{key:"consume",value:function(b,v){var _;return b<this.head.data.length?(_=this.head.data.slice(0,b),this.head.data=this.head.data.slice(b)):b===this.head.data.length?_=this.shift():_=v?this._getString(b):this._getBuffer(b),_}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(b){var v=this.head,_=1,u=v.data;for(b-=u.length;v=v.next;){var T=v.data,c=b>T.length?T.length:b;if(c===T.length?u+=T:u+=T.slice(0,b),b-=c,b===0){c===T.length?(++_,v.next?this.head=v.next:this.head=this.tail=null):(this.head=v,v.data=T.slice(c));break}++_}return this.length-=_,u}},{key:"_getBuffer",value:function(b){var v=r.allocUnsafe(b),_=this.head,u=1;for(_.data.copy(v),b-=_.data.length;_=_.next;){var T=_.data,c=b>T.length?T.length:b;if(T.copy(v,v.length-b,0,c),b-=c,b===0){c===T.length?(++u,_.next?this.head=_.next:this.head=this.tail=null):(this.head=_,_.data=T.slice(c));break}++u}return this.length-=u,v}},{key:s,value:function(b,v){return d(this,l({},v,{depth:0,customInspect:!1}))}}]),y}()},{buffer:85,util:83}],295:[function(e,B,V){(function(f){(function(){function l(r,n){var d=this,s=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return s||o?(n?n(r):r&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,f.nextTick(a,this,r)):f.nextTick(a,this,r)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(r||null,function(y){!n&&y?d._writableState?d._writableState.errorEmitted?f.nextTick(x,d):(d._writableState.errorEmitted=!0,f.nextTick(m,d,y)):f.nextTick(m,d,y):n?(f.nextTick(x,d),n(y)):f.nextTick(x,d)}),this)}function m(r,n){a(r,n),x(r)}function x(r){r._writableState&&!r._writableState.emitClose||r._readableState&&!r._readableState.emitClose||r.emit("close")}function t(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function a(r,n){r.emit("error",n)}function i(r,n){var d=r._readableState,s=r._writableState;d&&d.autoDestroy||s&&s.autoDestroy?r.destroy(n):r.emit("error",n)}B.exports={destroy:l,undestroy:t,errorOrDestroy:i}}).call(this)}).call(this,e("_process"))},{_process:278}],296:[function(e,B,V){var f=e("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function l(a){var i=!1;return function(){if(!i){i=!0;for(var r=arguments.length,n=new Array(r),d=0;d<r;d++)n[d]=arguments[d];a.apply(this,n)}}}function m(){}function x(a){return a.setHeader&&typeof a.abort=="function"}function t(a,i,r){if(typeof i=="function")return t(a,null,i);i||(i={}),r=l(r||m);var n=i.readable||i.readable!==!1&&a.readable,d=i.writable||i.writable!==!1&&a.writable,s=function(){a.writable||y()},o=a._writableState&&a._writableState.finished,y=function(){d=!1,o=!0,n||r.call(a)},g=a._readableState&&a._readableState.endEmitted,b=function(){n=!1,g=!0,d||r.call(a)},v=function(c){r.call(a,c)},_=function(){var c;if(n&&!g)return(!a._readableState||!a._readableState.ended)&&(c=new f),r.call(a,c);if(d&&!o)return(!a._writableState||!a._writableState.ended)&&(c=new f),r.call(a,c)},u=function(){a.req.on("finish",y)};return x(a)?(a.on("complete",y),a.on("abort",_),a.req?u():a.on("request",u)):d&&!a._writableState&&(a.on("end",s),a.on("close",s)),a.on("end",b),a.on("finish",y),i.error!==!1&&a.on("error",v),a.on("close",_),function(){a.removeListener("complete",y),a.removeListener("abort",_),a.removeListener("request",u),a.req&&a.req.removeListener("finish",y),a.removeListener("end",s),a.removeListener("close",s),a.removeListener("finish",y),a.removeListener("end",b),a.removeListener("error",v),a.removeListener("close",_)}}B.exports=t},{"../../../errors":287}],297:[function(e,B,V){B.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],298:[function(e,B,V){var f;function l(y){var g=!1;return function(){g||(g=!0,y.apply(void 0,arguments))}}var m=e("../../../errors").codes,x=m.ERR_MISSING_ARGS,t=m.ERR_STREAM_DESTROYED;function a(y){if(y)throw y}function i(y){return y.setHeader&&typeof y.abort=="function"}function r(y,g,b,v){v=l(v);var _=!1;y.on("close",function(){_=!0}),f===void 0&&(f=e("./end-of-stream")),f(y,{readable:g,writable:b},function(T){if(T)return v(T);_=!0,v()});var u=!1;return function(T){if(!_&&!u){if(u=!0,i(y))return y.abort();if(typeof y.destroy=="function")return y.destroy();v(T||new t("pipe"))}}}function n(y){y()}function d(y,g){return y.pipe(g)}function s(y){return!y.length||typeof y[y.length-1]!="function"?a:y.pop()}function o(){for(var y=arguments.length,g=new Array(y),b=0;b<y;b++)g[b]=arguments[b];var v=s(g);if(Array.isArray(g[0])&&(g=g[0]),g.length<2)throw new x("streams");var _,u=g.map(function(T,c){var A=c<g.length-1,k=c>0;return r(T,A,k,function(p){_||(_=p),p&&u.forEach(n),!A&&(u.forEach(n),v(_))})});return g.reduce(d)}B.exports=o},{"../../../errors":287,"./end-of-stream":296}],299:[function(e,B,V){var f=e("../../../errors").codes.ERR_INVALID_OPT_VALUE;function l(x,t,a){return x.highWaterMark!=null?x.highWaterMark:t?x[a]:null}function m(x,t,a,i){var r=l(t,i,a);if(r!=null){if(!(isFinite(r)&&Math.floor(r)===r)||r<0){var n=i?a:"highWaterMark";throw new f(n,r)}return Math.floor(r)}return x.objectMode?16:16*1024}B.exports={getHighWaterMark:m}},{"../../../errors":287}],300:[function(e,B,V){B.exports=e("events").EventEmitter},{events:84}],301:[function(e,B,V){var f=e("safe-buffer").Buffer,l=f.isEncoding||function(u){switch(u=""+u,u&&u.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function m(u){if(!u)return"utf8";for(var T;;)switch(u){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return u;default:if(T)return;u=(""+u).toLowerCase(),T=!0}}function x(u){var T=m(u);if(typeof T!="string"&&(f.isEncoding===l||!l(u)))throw new Error("Unknown encoding: "+u);return T||u}V.StringDecoder=t;function t(u){this.encoding=x(u);var T;switch(this.encoding){case"utf16le":this.text=o,this.end=y,T=4;break;case"utf8":this.fillLast=n,T=4;break;case"base64":this.text=g,this.end=b,T=3;break;default:this.write=v,this.end=_;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=f.allocUnsafe(T)}t.prototype.write=function(u){if(u.length===0)return"";var T,c;if(this.lastNeed){if(T=this.fillLast(u),T===void 0)return"";c=this.lastNeed,this.lastNeed=0}else c=0;return c<u.length?T?T+this.text(u,c):this.text(u,c):T||""},t.prototype.end=s,t.prototype.text=d,t.prototype.fillLast=function(u){if(this.lastNeed<=u.length)return u.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);u.copy(this.lastChar,this.lastTotal-this.lastNeed,0,u.length),this.lastNeed-=u.length};function a(u){return u<=127?0:u>>5===6?2:u>>4===14?3:u>>3===30?4:u>>6===2?-1:-2}function i(u,T,c){var A=T.length-1;if(A<c)return 0;var k=a(T[A]);return k>=0?(k>0&&(u.lastNeed=k-1),k):--A<c||k===-2?0:(k=a(T[A]),k>=0?(k>0&&(u.lastNeed=k-2),k):--A<c||k===-2?0:(k=a(T[A]),k>=0?(k>0&&(k===2?k=0:u.lastNeed=k-3),k):0))}function r(u,T,c){if((T[0]&192)!==128)return u.lastNeed=0,"\uFFFD";if(u.lastNeed>1&&T.length>1){if((T[1]&192)!==128)return u.lastNeed=1,"\uFFFD";if(u.lastNeed>2&&T.length>2&&(T[2]&192)!==128)return u.lastNeed=2,"\uFFFD"}}function n(u){var T=this.lastTotal-this.lastNeed,c=r(this,u);if(c!==void 0)return c;if(this.lastNeed<=u.length)return u.copy(this.lastChar,T,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);u.copy(this.lastChar,T,0,u.length),this.lastNeed-=u.length}function d(u,T){var c=i(this,u,T);if(!this.lastNeed)return u.toString("utf8",T);this.lastTotal=c;var A=u.length-(c-this.lastNeed);return u.copy(this.lastChar,0,A),u.toString("utf8",T,A)}function s(u){var T=u&&u.length?this.write(u):"";return this.lastNeed?T+"\uFFFD":T}function o(u,T){if((u.length-T)%2===0){var c=u.toString("utf16le",T);if(c){var A=c.charCodeAt(c.length-1);if(A>=55296&&A<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=u[u.length-2],this.lastChar[1]=u[u.length-1],c.slice(0,-1)}return c}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=u[u.length-1],u.toString("utf16le",T,u.length-1)}function y(u){var T=u&&u.length?this.write(u):"";if(this.lastNeed){var c=this.lastTotal-this.lastNeed;return T+this.lastChar.toString("utf16le",0,c)}return T}function g(u,T){var c=(u.length-T)%3;return c===0?u.toString("base64",T):(this.lastNeed=3-c,this.lastTotal=3,c===1?this.lastChar[0]=u[u.length-1]:(this.lastChar[0]=u[u.length-2],this.lastChar[1]=u[u.length-1]),u.toString("base64",T,u.length-c))}function b(u){var T=u&&u.length?this.write(u):"";return this.lastNeed?T+this.lastChar.toString("base64",0,3-this.lastNeed):T}function v(u){return u.toString(this.encoding)}function _(u){return u&&u.length?this.write(u):""}},{"safe-buffer":285}],302:[function(e,B,V){(function(f,l){(function(){var m=e("assert"),x=e("debug")("stream-parser");B.exports=n;var t=-1,a=0,i=1,r=2;function n(c){var A=c&&typeof c._transform=="function",k=c&&typeof c._write=="function";if(!A&&!k)throw new Error("must pass a Writable or Transform stream in");x("extending Parser into stream"),c._bytes=s,c._skipBytes=o,A&&(c._passthrough=y),A?c._transform=b:c._write=g}function d(c){x("initializing parser stream"),c._parserBytesLeft=0,c._parserBuffers=[],c._parserBuffered=0,c._parserState=t,c._parserCallback=null,typeof c.push=="function"&&(c._parserOutput=c.push.bind(c)),c._parserInit=!0}function s(c,A){m(!this._parserCallback,'there is already a "callback" set!'),m(isFinite(c)&&c>0,'can only buffer a finite number of bytes > 0, got "'+c+'"'),this._parserInit||d(this),x("buffering %o bytes",c),this._parserBytesLeft=c,this._parserCallback=A,this._parserState=a}function o(c,A){m(!this._parserCallback,'there is already a "callback" set!'),m(c>0,'can only skip > 0 bytes, got "'+c+'"'),this._parserInit||d(this),x("skipping %o bytes",c),this._parserBytesLeft=c,this._parserCallback=A,this._parserState=i}function y(c,A){m(!this._parserCallback,'There is already a "callback" set!'),m(c>0,'can only pass through > 0 bytes, got "'+c+'"'),this._parserInit||d(this),x("passing through %o bytes",c),this._parserBytesLeft=c,this._parserCallback=A,this._parserState=r}function g(c,A,k){this._parserInit||d(this),x("write(%o bytes)",c.length),typeof A=="function"&&(k=A),u(this,c,null,k)}function b(c,A,k){this._parserInit||d(this),x("transform(%o bytes)",c.length),typeof A!="function"&&(A=this._parserOutput),u(this,c,A,k)}function v(c,A,k,p){return c._parserBytesLeft<=0?p(new Error("got data but not currently parsing anything")):A.length<=c._parserBytesLeft?function(){return _(c,A,k,p)}:function(){var w=A.slice(0,c._parserBytesLeft);return _(c,w,k,function(h){if(h)return p(h);if(A.length>w.length)return function(){return v(c,A.slice(w.length),k,p)}})}}function _(c,A,k,p){if(c._parserBytesLeft-=A.length,x("%o bytes left for stream piece",c._parserBytesLeft),c._parserState===a?(c._parserBuffers.push(A),c._parserBuffered+=A.length):c._parserState===r&&k(A),c._parserBytesLeft===0){var w=c._parserCallback;if(w&&c._parserState===a&&c._parserBuffers.length>1&&(A=l.concat(c._parserBuffers,c._parserBuffered)),c._parserState!==a&&(A=null),c._parserCallback=null,c._parserBuffered=0,c._parserState=t,c._parserBuffers.splice(0),w){var h=[];A&&h.push(A),k&&h.push(k);var D=w.length>h.length;D&&h.push(T(p));var S=w.apply(c,h);if(!D||p===S)return p}}else return p}var u=T(v);function T(c){return function(){for(var A=c.apply(this,arguments);typeof A=="function";)A=A();return A}}}).call(this)}).call(this,e("_process"),e("buffer").Buffer)},{_process:278,assert:75,buffer:85,debug:303}],303:[function(e,B,V){(function(f){(function(){V=B.exports=e("./debug"),V.log=x,V.formatArgs=m,V.save=t,V.load=a,V.useColors=l,V.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:i(),V.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function l(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}V.formatters.j=function(r){try{return JSON.stringify(r)}catch(n){return"[UnexpectedJSONParseError]: "+n.message}};function m(r){var n=this.useColors;if(r[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+r[0]+(n?"%c ":" ")+"+"+V.humanize(this.diff),!!n){var d="color: "+this.color;r.splice(1,0,d,"color: inherit");var s=0,o=0;r[0].replace(/%[a-zA-Z%]/g,function(y){y!=="%%"&&(s++,y==="%c"&&(o=s))}),r.splice(o,0,d)}}function x(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function t(r){try{r==null?V.storage.removeItem("debug"):V.storage.debug=r}catch{}}function a(){var r;try{r=V.storage.debug}catch{}return!r&&typeof f<"u"&&"env"in f&&(r=f.env.DEBUG),r}V.enable(a());function i(){try{return window.localStorage}catch{}}}).call(this)}).call(this,e("_process"))},{"./debug":304,_process:278}],304:[function(e,B,V){V=B.exports=m.debug=m.default=m,V.coerce=i,V.disable=t,V.enable=x,V.enabled=a,V.humanize=e("ms"),V.names=[],V.skips=[],V.formatters={};var f;function l(r){var n=0,d;for(d in r)n=(n<<5)-n+r.charCodeAt(d),n|=0;return V.colors[Math.abs(n)%V.colors.length]}function m(r){function n(){if(!!n.enabled){var d=n,s=+new Date,o=s-(f||s);d.diff=o,d.prev=f,d.curr=s,f=s;for(var y=new Array(arguments.length),g=0;g<y.length;g++)y[g]=arguments[g];y[0]=V.coerce(y[0]),typeof y[0]!="string"&&y.unshift("%O");var b=0;y[0]=y[0].replace(/%([a-zA-Z%])/g,function(_,u){if(_==="%%")return _;b++;var T=V.formatters[u];if(typeof T=="function"){var c=y[b];_=T.call(d,c),y.splice(b,1),b--}return _}),V.formatArgs.call(d,y);var v=n.log||V.log||console.log.bind(console);v.apply(d,y)}}return n.namespace=r,n.enabled=V.enabled(r),n.useColors=V.useColors(),n.color=l(r),typeof V.init=="function"&&V.init(n),n}function x(r){V.save(r),V.names=[],V.skips=[];for(var n=(typeof r=="string"?r:"").split(/[\s,]+/),d=n.length,s=0;s<d;s++)!n[s]||(r=n[s].replace(/\*/g,".*?"),r[0]==="-"?V.skips.push(new RegExp("^"+r.substr(1)+"$")):V.names.push(new RegExp("^"+r+"$")))}function t(){V.enable("")}function a(r){var n,d;for(n=0,d=V.skips.length;n<d;n++)if(V.skips[n].test(r))return!1;for(n=0,d=V.names.length;n<d;n++)if(V.names[n].test(r))return!0;return!1}function i(r){return r instanceof Error?r.stack||r.message:r}},{ms:305}],305:[function(e,B,V){var f=1e3,l=f*60,m=l*60,x=m*24,t=x*365.25;B.exports=function(d,s){s=s||{};var o=typeof d;if(o==="string"&&d.length>0)return a(d);if(o==="number"&&isNaN(d)===!1)return s.long?r(d):i(d);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(d))};function a(d){if(d=String(d),!(d.length>100)){var s=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(d);if(!!s){var o=parseFloat(s[1]),y=(s[2]||"ms").toLowerCase();switch(y){case"years":case"year":case"yrs":case"yr":case"y":return o*t;case"days":case"day":case"d":return o*x;case"hours":case"hour":case"hrs":case"hr":case"h":return o*m;case"minutes":case"minute":case"mins":case"min":case"m":return o*l;case"seconds":case"second":case"secs":case"sec":case"s":return o*f;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}function i(d){return d>=x?Math.round(d/x)+"d":d>=m?Math.round(d/m)+"h":d>=l?Math.round(d/l)+"m":d>=f?Math.round(d/f)+"s":d+"ms"}function r(d){return n(d,x,"day")||n(d,m,"hour")||n(d,l,"minute")||n(d,f,"second")||d+" ms"}function n(d,s,o){if(!(d<s))return d<s*1.5?Math.floor(d/s)+" "+o:Math.ceil(d/s)+" "+o+"s"}},{}],306:[function(e,B,V){var f=e("parenthesis");B.exports=function(m,x,t){if(m==null)throw Error("First argument should be a string");if(x==null)throw Error("Separator should be a string or a RegExp");t?(typeof t=="string"||Array.isArray(t))&&(t={ignore:t}):t={},t.escape==null&&(t.escape=!0),t.ignore==null?t.ignore=["[]","()","{}","<>",'""',"''","``","\u201C\u201D","\xAB\xBB"]:(typeof t.ignore=="string"&&(t.ignore=[t.ignore]),t.ignore=t.ignore.map(function(y){return y.length===1&&(y=y+y),y}));var a=f.parse(m,{flat:!0,brackets:t.ignore}),i=a[0],r=i.split(x);if(t.escape){for(var n=[],d=0;d<r.length;d++){var s=r[d],o=r[d+1];s[s.length-1]==="\\"&&s[s.length-2]!=="\\"?(n.push(s+x+o),d++):n.push(s)}r=n}for(var d=0;d<r.length;d++)a[0]=r[d],r[d]=f.stringify(a,{flat:!0});return r}},{parenthesis:248}],307:[function(e,B,V){B.exports=f;function f(l){for(var m=l.length,x=new Array(m),t=new Array(m),a=new Array(m),i=new Array(m),r=new Array(m),n=new Array(m),d=0;d<m;++d)x[d]=-1,t[d]=0,a[d]=!1,i[d]=0,r[d]=-1,n[d]=[];var s=0,o=[],y=[];function g(u){var T=[u],c=[u];for(x[u]=t[u]=s,a[u]=!0,s+=1;c.length>0;){u=c[c.length-1];var A=l[u];if(i[u]<A.length){for(var k=i[u];k<A.length;++k){var p=A[k];if(x[p]<0){x[p]=t[p]=s,a[p]=!0,s+=1,T.push(p),c.push(p);break}else a[p]&&(t[u]=Math.min(t[u],t[p])|0);r[p]>=0&&n[u].push(r[p])}i[u]=k}else{if(t[u]===x[u]){for(var w=[],h=[],D=0,k=T.length-1;k>=0;--k){var S=T[k];if(a[S]=!1,w.push(S),h.push(n[S]),D+=n[S].length,r[S]=o.length,S===u){T.length=k;break}}o.push(w);for(var M=new Array(D),k=0;k<h.length;k++)for(var L=0;L<h[k].length;L++)M[--D]=h[k][L];y.push(M)}c.pop()}}}for(var d=0;d<m;++d)x[d]<0&&g(d);for(var b,d=0;d<y.length;d++){var v=y[d];if(v.length!==0){v.sort(function(T,c){return T-c}),b=[v[0]];for(var _=1;_<v.length;_++)v[_]!==v[_-1]&&b.push(v[_]);y[d]=b}}return{components:o,adjacencyList:y}}},{}],308:[function(e,B,V){Object.defineProperty(V,"__esModule",{value:!0});var f=function(){function r(n,d){var s=[],o=!0,y=!1,g=void 0;try{for(var b=n[Symbol.iterator](),v;!(o=(v=b.next()).done)&&(s.push(v.value),!(d&&s.length===d));o=!0);}catch(_){y=!0,g=_}finally{try{!o&&b.return&&b.return()}finally{if(y)throw g}}return s}return function(n,d){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return r(n,d);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=Math.PI*2,m=function(n,d,s,o,y,g,b){var v=n.x,_=n.y;v*=d,_*=s;var u=o*v-y*_,T=y*v+o*_;return{x:u+g,y:T+b}},x=function(n,d){var s=d===1.5707963267948966?.551915024494:d===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(d/4),o=Math.cos(n),y=Math.sin(n),g=Math.cos(n+d),b=Math.sin(n+d);return[{x:o-y*s,y:y+o*s},{x:g+b*s,y:b-g*s},{x:g,y:b}]},t=function(n,d,s,o){var y=n*o-d*s<0?-1:1,g=n*s+d*o;return g>1&&(g=1),g<-1&&(g=-1),y*Math.acos(g)},a=function(n,d,s,o,y,g,b,v,_,u,T,c){var A=Math.pow(y,2),k=Math.pow(g,2),p=Math.pow(T,2),w=Math.pow(c,2),h=A*k-A*w-k*p;h<0&&(h=0),h/=A*w+k*p,h=Math.sqrt(h)*(b===v?-1:1);var D=h*y/g*c,S=h*-g/y*T,M=u*D-_*S+(n+s)/2,L=_*D+u*S+(d+o)/2,R=(T-D)/y,z=(c-S)/g,P=(-T-D)/y,I=(-c-S)/g,U=t(1,0,R,z),O=t(R,z,P,I);return v===0&&O>0&&(O-=l),v===1&&O<0&&(O+=l),[M,L,U,O]},i=function(n){var d=n.px,s=n.py,o=n.cx,y=n.cy,g=n.rx,b=n.ry,v=n.xAxisRotation,_=v===void 0?0:v,u=n.largeArcFlag,T=u===void 0?0:u,c=n.sweepFlag,A=c===void 0?0:c,k=[];if(g===0||b===0)return[];var p=Math.sin(_*l/360),w=Math.cos(_*l/360),h=w*(d-o)/2+p*(s-y)/2,D=-p*(d-o)/2+w*(s-y)/2;if(h===0&&D===0)return[];g=Math.abs(g),b=Math.abs(b);var S=Math.pow(h,2)/Math.pow(g,2)+Math.pow(D,2)/Math.pow(b,2);S>1&&(g*=Math.sqrt(S),b*=Math.sqrt(S));var M=a(d,s,o,y,g,b,T,A,p,w,h,D),L=f(M,4),R=L[0],z=L[1],P=L[2],I=L[3],U=Math.abs(I)/(l/4);Math.abs(1-U)<1e-7&&(U=1);var O=Math.max(Math.ceil(U),1);I/=O;for(var G=0;G<O;G++)k.push(x(P,I)),P+=I;return k.map(function($){var tt=m($[0],g,b,w,p,R,z),Z=tt.x,X=tt.y,J=m($[1],g,b,w,p,R,z),st=J.x,at=J.y,lt=m($[2],g,b,w,p,R,z),F=lt.x,H=lt.y;return{x1:Z,y1:X,x2:st,y2:at,x:F,y:H}})};V.default=i,B.exports=V.default},{}],309:[function(e,B,V){var f=e("parse-svg-path"),l=e("abs-svg-path"),m=e("normalize-svg-path"),x=e("is-svg-path"),t=e("assert");B.exports=a;function a(i){if(Array.isArray(i)&&i.length===1&&typeof i[0]=="string"&&(i=i[0]),typeof i=="string"&&(t(x(i),"String is not an SVG path."),i=f(i)),t(Array.isArray(i),"Argument should be a string or an array of path segments."),i=l(i),i=m(i),!i.length)return[0,0,0,0];for(var r=[1/0,1/0,-1/0,-1/0],n=0,d=i.length;n<d;n++)for(var s=i[n].slice(1),o=0;o<s.length;o+=2)s[o+0]<r[0]&&(r[0]=s[o+0]),s[o+1]<r[1]&&(r[1]=s[o+1]),s[o+0]>r[2]&&(r[2]=s[o+0]),s[o+1]>r[3]&&(r[3]=s[o+1]);return r}},{"abs-svg-path":70,assert:75,"is-svg-path":238,"normalize-svg-path":310,"parse-svg-path":250}],310:[function(e,B,V){B.exports=l;var f=e("svg-arc-to-cubic-bezier");function l(t){for(var a,i=[],r=0,n=0,d=0,s=0,o=null,y=null,g=0,b=0,v=0,_=t.length;v<_;v++){var u=t[v],T=u[0];switch(T){case"M":d=u[1],s=u[2];break;case"A":var c=f({px:g,py:b,cx:u[6],cy:u[7],rx:u[1],ry:u[2],xAxisRotation:u[3],largeArcFlag:u[4],sweepFlag:u[5]});if(!c.length)continue;for(var A=0,k;A<c.length;A++)k=c[A],u=["C",k.x1,k.y1,k.x2,k.y2,k.x,k.y],A<c.length-1&&i.push(u);break;case"S":var p=g,w=b;(a=="C"||a=="S")&&(p+=p-r,w+=w-n),u=["C",p,w,u[1],u[2],u[3],u[4]];break;case"T":a=="Q"||a=="T"?(o=g*2-o,y=b*2-y):(o=g,y=b),u=x(g,b,o,y,u[1],u[2]);break;case"Q":o=u[1],y=u[2],u=x(g,b,u[1],u[2],u[3],u[4]);break;case"L":u=m(g,b,u[1],u[2]);break;case"H":u=m(g,b,u[1],b);break;case"V":u=m(g,b,g,u[1]);break;case"Z":u=m(g,b,d,s);break}a=T,g=u[u.length-2],b=u[u.length-1],u.length>4?(r=u[u.length-4],n=u[u.length-3]):(r=g,n=b),i.push(u)}return i}function m(t,a,i,r){return["C",t,a,i,r,i,r]}function x(t,a,i,r,n,d){return["C",t/3+2/3*i,a/3+2/3*r,n/3+2/3*i,d/3+2/3*r,n,d]}},{"svg-arc-to-cubic-bezier":308}],311:[function(e,B,V){var f=e("svg-path-bounds"),l=e("parse-svg-path"),m=e("draw-svg-path"),x=e("is-svg-path"),t=e("bitmap-sdf"),a=document.createElement("canvas"),i=a.getContext("2d");B.exports=r;function r(s,o){if(!x(s))throw Error("Argument should be valid svg path string");o||(o={});var y,g;o.shape?(y=o.shape[0],g=o.shape[1]):(y=a.width=o.w||o.width||200,g=a.height=o.h||o.height||200);var b=Math.min(y,g),v=o.stroke||0,_=o.viewbox||o.viewBox||f(s),u=[y/(_[2]-_[0]),g/(_[3]-_[1])],T=Math.min(u[0]||0,u[1]||0)/2;if(i.fillStyle="black",i.fillRect(0,0,y,g),i.fillStyle="white",v&&(typeof v!="number"&&(v=1),v>0?i.strokeStyle="white":i.strokeStyle="black",i.lineWidth=Math.abs(v)),i.translate(y*.5,g*.5),i.scale(T,T),d()){var c=new Path2D(s);i.fill(c),v&&i.stroke(c)}else{var A=l(s);m(i,A),i.fill(),v&&i.stroke()}i.setTransform(1,0,0,1,0,0);var k=t(i,{cutoff:o.cutoff!=null?o.cutoff:.5,radius:o.radius!=null?o.radius:b*.5});return k}var n;function d(){if(n!=null)return n;var s=document.createElement("canvas").getContext("2d");if(s.canvas.width=s.canvas.height=1,!window.Path2D)return n=!1;var o=new Path2D("M0,0h1v1h-1v-1Z");s.fillStyle="black",s.fill(o);var y=s.getImageData(0,0,1,1);return n=y&&y.data&&y.data[3]===255}},{"bitmap-sdf":82,"draw-svg-path":126,"is-svg-path":238,"parse-svg-path":250,"svg-path-bounds":309}],312:[function(e,B,V){(function(f,l){(function(){var m=e("process/browser.js").nextTick,x=Function.prototype.apply,t=Array.prototype.slice,a={},i=0;V.setTimeout=function(){return new r(x.call(setTimeout,window,arguments),clearTimeout)},V.setInterval=function(){return new r(x.call(setInterval,window,arguments),clearInterval)},V.clearTimeout=V.clearInterval=function(n){n.close()};function r(n,d){this._id=n,this._clearFn=d}r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},V.enroll=function(n,d){clearTimeout(n._idleTimeoutId),n._idleTimeout=d},V.unenroll=function(n){clearTimeout(n._idleTimeoutId),n._idleTimeout=-1},V._unrefActive=V.active=function(n){clearTimeout(n._idleTimeoutId);var d=n._idleTimeout;d>=0&&(n._idleTimeoutId=setTimeout(function(){n._onTimeout&&n._onTimeout()},d))},V.setImmediate=typeof f=="function"?f:function(n){var d=i++,s=arguments.length<2?!1:t.call(arguments,1);return a[d]=!0,m(function(){a[d]&&(s?n.apply(null,s):n.call(null),V.clearImmediate(d))}),d},V.clearImmediate=typeof l=="function"?l:function(n){delete a[n]}}).call(this)}).call(this,e("timers").setImmediate,e("timers").clearImmediate)},{"process/browser.js":278,timers:312}],313:[function(e,B,V){(function(f){var l=/^\s+/,m=/\s+$/,x=0,t=f.round,a=f.min,i=f.max,r=f.random;function n(W,K){if(W=W||"",K=K||{},W instanceof n)return W;if(!(this instanceof n))return new n(W,K);var nt=d(W);this._originalInput=W,this._r=nt.r,this._g=nt.g,this._b=nt.b,this._a=nt.a,this._roundA=t(100*this._a)/100,this._format=K.format||nt.format,this._gradientType=K.gradientType,this._r<1&&(this._r=t(this._r)),this._g<1&&(this._g=t(this._g)),this._b<1&&(this._b=t(this._b)),this._ok=nt.ok,this._tc_id=x++}n.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var W=this.toRgb();return(W.r*299+W.g*587+W.b*114)/1e3},getLuminance:function(){var W=this.toRgb(),K,nt,it,ot,ct,bt;return K=W.r/255,nt=W.g/255,it=W.b/255,K<=.03928?ot=K/12.92:ot=f.pow((K+.055)/1.055,2.4),nt<=.03928?ct=nt/12.92:ct=f.pow((nt+.055)/1.055,2.4),it<=.03928?bt=it/12.92:bt=f.pow((it+.055)/1.055,2.4),.2126*ot+.7152*ct+.0722*bt},setAlpha:function(W){return this._a=O(W),this._roundA=t(100*this._a)/100,this},toHsv:function(){var W=g(this._r,this._g,this._b);return{h:W.h*360,s:W.s,v:W.v,a:this._a}},toHsvString:function(){var W=g(this._r,this._g,this._b),K=t(W.h*360),nt=t(W.s*100),it=t(W.v*100);return this._a==1?"hsv("+K+", "+nt+"%, "+it+"%)":"hsva("+K+", "+nt+"%, "+it+"%, "+this._roundA+")"},toHsl:function(){var W=o(this._r,this._g,this._b);return{h:W.h*360,s:W.s,l:W.l,a:this._a}},toHslString:function(){var W=o(this._r,this._g,this._b),K=t(W.h*360),nt=t(W.s*100),it=t(W.l*100);return this._a==1?"hsl("+K+", "+nt+"%, "+it+"%)":"hsla("+K+", "+nt+"%, "+it+"%, "+this._roundA+")"},toHex:function(W){return v(this._r,this._g,this._b,W)},toHexString:function(W){return"#"+this.toHex(W)},toHex8:function(W){return _(this._r,this._g,this._b,this._a,W)},toHex8String:function(W){return"#"+this.toHex8(W)},toRgb:function(){return{r:t(this._r),g:t(this._g),b:t(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+t(this._r)+", "+t(this._g)+", "+t(this._b)+")":"rgba("+t(this._r)+", "+t(this._g)+", "+t(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:t(G(this._r,255)*100)+"%",g:t(G(this._g,255)*100)+"%",b:t(G(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+t(G(this._r,255)*100)+"%, "+t(G(this._g,255)*100)+"%, "+t(G(this._b,255)*100)+"%)":"rgba("+t(G(this._r,255)*100)+"%, "+t(G(this._g,255)*100)+"%, "+t(G(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:I[v(this._r,this._g,this._b,!0)]||!1},toFilter:function(W){var K="#"+u(this._r,this._g,this._b,this._a),nt=K,it=this._gradientType?"GradientType = 1, ":"";if(W){var ot=n(W);nt="#"+u(ot._r,ot._g,ot._b,ot._a)}return"progid:DXImageTransform.Microsoft.gradient("+it+"startColorstr="+K+",endColorstr="+nt+")"},toString:function(W){var K=!!W;W=W||this._format;var nt=!1,it=this._a<1&&this._a>=0,ot=!K&&it&&(W==="hex"||W==="hex6"||W==="hex3"||W==="hex4"||W==="hex8"||W==="name");return ot?W==="name"&&this._a===0?this.toName():this.toRgbString():(W==="rgb"&&(nt=this.toRgbString()),W==="prgb"&&(nt=this.toPercentageRgbString()),(W==="hex"||W==="hex6")&&(nt=this.toHexString()),W==="hex3"&&(nt=this.toHexString(!0)),W==="hex4"&&(nt=this.toHex8String(!0)),W==="hex8"&&(nt=this.toHex8String()),W==="name"&&(nt=this.toName()),W==="hsl"&&(nt=this.toHslString()),W==="hsv"&&(nt=this.toHsvString()),nt||this.toHexString())},clone:function(){return n(this.toString())},_applyModification:function(W,K){var nt=W.apply(null,[this].concat([].slice.call(K)));return this._r=nt._r,this._g=nt._g,this._b=nt._b,this.setAlpha(nt._a),this},lighten:function(){return this._applyModification(k,arguments)},brighten:function(){return this._applyModification(p,arguments)},darken:function(){return this._applyModification(w,arguments)},desaturate:function(){return this._applyModification(T,arguments)},saturate:function(){return this._applyModification(c,arguments)},greyscale:function(){return this._applyModification(A,arguments)},spin:function(){return this._applyModification(h,arguments)},_applyCombination:function(W,K){return W.apply(null,[this].concat([].slice.call(K)))},analogous:function(){return this._applyCombination(R,arguments)},complement:function(){return this._applyCombination(D,arguments)},monochromatic:function(){return this._applyCombination(z,arguments)},splitcomplement:function(){return this._applyCombination(L,arguments)},triad:function(){return this._applyCombination(S,arguments)},tetrad:function(){return this._applyCombination(M,arguments)}},n.fromRatio=function(W,K){if(typeof W=="object"){var nt={};for(var it in W)W.hasOwnProperty(it)&&(it==="a"?nt[it]=W[it]:nt[it]=st(W[it]));W=nt}return n(W,K)};function d(W){var K={r:0,g:0,b:0},nt=1,it=null,ot=null,ct=null,bt=!1,ut=!1;return typeof W=="string"&&(W=et(W)),typeof W=="object"&&(H(W.r)&&H(W.g)&&H(W.b)?(K=s(W.r,W.g,W.b),bt=!0,ut=String(W.r).substr(-1)==="%"?"prgb":"rgb"):H(W.h)&&H(W.s)&&H(W.v)?(it=st(W.s),ot=st(W.v),K=b(W.h,it,ot),bt=!0,ut="hsv"):H(W.h)&&H(W.s)&&H(W.l)&&(it=st(W.s),ct=st(W.l),K=y(W.h,it,ct),bt=!0,ut="hsl"),W.hasOwnProperty("a")&&(nt=W.a)),nt=O(nt),{ok:bt,format:W.format||ut,r:a(255,i(K.r,0)),g:a(255,i(K.g,0)),b:a(255,i(K.b,0)),a:nt}}function s(W,K,nt){return{r:G(W,255)*255,g:G(K,255)*255,b:G(nt,255)*255}}function o(W,K,nt){W=G(W,255),K=G(K,255),nt=G(nt,255);var it=i(W,K,nt),ot=a(W,K,nt),ct,bt,ut=(it+ot)/2;if(it==ot)ct=bt=0;else{var pt=it-ot;switch(bt=ut>.5?pt/(2-it-ot):pt/(it+ot),it){case W:ct=(K-nt)/pt+(K<nt?6:0);break;case K:ct=(nt-W)/pt+2;break;case nt:ct=(W-K)/pt+4;break}ct/=6}return{h:ct,s:bt,l:ut}}function y(W,K,nt){var it,ot,ct;W=G(W,360),K=G(K,100),nt=G(nt,100);function bt(yt,Tt,kt){return kt<0&&(kt+=1),kt>1&&(kt-=1),kt<1/6?yt+(Tt-yt)*6*kt:kt<1/2?Tt:kt<2/3?yt+(Tt-yt)*(2/3-kt)*6:yt}if(K===0)it=ot=ct=nt;else{var ut=nt<.5?nt*(1+K):nt+K-nt*K,pt=2*nt-ut;it=bt(pt,ut,W+1/3),ot=bt(pt,ut,W),ct=bt(pt,ut,W-1/3)}return{r:it*255,g:ot*255,b:ct*255}}function g(W,K,nt){W=G(W,255),K=G(K,255),nt=G(nt,255);var it=i(W,K,nt),ot=a(W,K,nt),ct,bt,ut=it,pt=it-ot;if(bt=it===0?0:pt/it,it==ot)ct=0;else{switch(it){case W:ct=(K-nt)/pt+(K<nt?6:0);break;case K:ct=(nt-W)/pt+2;break;case nt:ct=(W-K)/pt+4;break}ct/=6}return{h:ct,s:bt,v:ut}}function b(W,K,nt){W=G(W,360)*6,K=G(K,100),nt=G(nt,100);var it=f.floor(W),ot=W-it,ct=nt*(1-K),bt=nt*(1-ot*K),ut=nt*(1-(1-ot)*K),pt=it%6,yt=[nt,bt,ct,ct,ut,nt][pt],Tt=[ut,nt,nt,bt,ct,ct][pt],kt=[ct,ct,ut,nt,nt,bt][pt];return{r:yt*255,g:Tt*255,b:kt*255}}function v(W,K,nt,it){var ot=[J(t(W).toString(16)),J(t(K).toString(16)),J(t(nt).toString(16))];return it&&ot[0].charAt(0)==ot[0].charAt(1)&&ot[1].charAt(0)==ot[1].charAt(1)&&ot[2].charAt(0)==ot[2].charAt(1)?ot[0].charAt(0)+ot[1].charAt(0)+ot[2].charAt(0):ot.join("")}function _(W,K,nt,it,ot){var ct=[J(t(W).toString(16)),J(t(K).toString(16)),J(t(nt).toString(16)),J(at(it))];return ot&&ct[0].charAt(0)==ct[0].charAt(1)&&ct[1].charAt(0)==ct[1].charAt(1)&&ct[2].charAt(0)==ct[2].charAt(1)&&ct[3].charAt(0)==ct[3].charAt(1)?ct[0].charAt(0)+ct[1].charAt(0)+ct[2].charAt(0)+ct[3].charAt(0):ct.join("")}function u(W,K,nt,it){var ot=[J(at(it)),J(t(W).toString(16)),J(t(K).toString(16)),J(t(nt).toString(16))];return ot.join("")}n.equals=function(W,K){return!W||!K?!1:n(W).toRgbString()==n(K).toRgbString()},n.random=function(){return n.fromRatio({r:r(),g:r(),b:r()})};function T(W,K){K=K===0?0:K||10;var nt=n(W).toHsl();return nt.s-=K/100,nt.s=$(nt.s),n(nt)}function c(W,K){K=K===0?0:K||10;var nt=n(W).toHsl();return nt.s+=K/100,nt.s=$(nt.s),n(nt)}function A(W){return n(W).desaturate(100)}function k(W,K){K=K===0?0:K||10;var nt=n(W).toHsl();return nt.l+=K/100,nt.l=$(nt.l),n(nt)}function p(W,K){K=K===0?0:K||10;var nt=n(W).toRgb();return nt.r=i(0,a(255,nt.r-t(255*-(K/100)))),nt.g=i(0,a(255,nt.g-t(255*-(K/100)))),nt.b=i(0,a(255,nt.b-t(255*-(K/100)))),n(nt)}function w(W,K){K=K===0?0:K||10;var nt=n(W).toHsl();return nt.l-=K/100,nt.l=$(nt.l),n(nt)}function h(W,K){var nt=n(W).toHsl(),it=(nt.h+K)%360;return nt.h=it<0?360+it:it,n(nt)}function D(W){var K=n(W).toHsl();return K.h=(K.h+180)%360,n(K)}function S(W){var K=n(W).toHsl(),nt=K.h;return[n(W),n({h:(nt+120)%360,s:K.s,l:K.l}),n({h:(nt+240)%360,s:K.s,l:K.l})]}function M(W){var K=n(W).toHsl(),nt=K.h;return[n(W),n({h:(nt+90)%360,s:K.s,l:K.l}),n({h:(nt+180)%360,s:K.s,l:K.l}),n({h:(nt+270)%360,s:K.s,l:K.l})]}function L(W){var K=n(W).toHsl(),nt=K.h;return[n(W),n({h:(nt+72)%360,s:K.s,l:K.l}),n({h:(nt+216)%360,s:K.s,l:K.l})]}function R(W,K,nt){K=K||6,nt=nt||30;var it=n(W).toHsl(),ot=360/nt,ct=[n(W)];for(it.h=(it.h-(ot*K>>1)+720)%360;--K;)it.h=(it.h+ot)%360,ct.push(n(it));return ct}function z(W,K){K=K||6;for(var nt=n(W).toHsv(),it=nt.h,ot=nt.s,ct=nt.v,bt=[],ut=1/K;K--;)bt.push(n({h:it,s:ot,v:ct})),ct=(ct+ut)%1;return bt}n.mix=function(W,K,nt){nt=nt===0?0:nt||50;var it=n(W).toRgb(),ot=n(K).toRgb(),ct=nt/100,bt={r:(ot.r-it.r)*ct+it.r,g:(ot.g-it.g)*ct+it.g,b:(ot.b-it.b)*ct+it.b,a:(ot.a-it.a)*ct+it.a};return n(bt)},n.readability=function(W,K){var nt=n(W),it=n(K);return(f.max(nt.getLuminance(),it.getLuminance())+.05)/(f.min(nt.getLuminance(),it.getLuminance())+.05)},n.isReadable=function(W,K,nt){var it=n.readability(W,K),ot,ct;switch(ct=!1,ot=q(nt),ot.level+ot.size){case"AAsmall":case"AAAlarge":ct=it>=4.5;break;case"AAlarge":ct=it>=3;break;case"AAAsmall":ct=it>=7;break}return ct},n.mostReadable=function(W,K,nt){var it=null,ot=0,ct,bt,ut,pt;nt=nt||{},bt=nt.includeFallbackColors,ut=nt.level,pt=nt.size;for(var yt=0;yt<K.length;yt++)ct=n.readability(W,K[yt]),ct>ot&&(ot=ct,it=n(K[yt]));return n.isReadable(W,it,{level:ut,size:pt})||!bt?it:(nt.includeFallbackColors=!1,n.mostReadable(W,["#fff","#000"],nt))};var P=n.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},I=n.hexNames=U(P);function U(W){var K={};for(var nt in W)W.hasOwnProperty(nt)&&(K[W[nt]]=nt);return K}function O(W){return W=parseFloat(W),(isNaN(W)||W<0||W>1)&&(W=1),W}function G(W,K){Z(W)&&(W="100%");var nt=X(W);return W=a(K,i(0,parseFloat(W))),nt&&(W=parseInt(W*K,10)/100),f.abs(W-K)<1e-6?1:W%K/parseFloat(K)}function $(W){return a(1,i(0,W))}function tt(W){return parseInt(W,16)}function Z(W){return typeof W=="string"&&W.indexOf(".")!=-1&&parseFloat(W)===1}function X(W){return typeof W=="string"&&W.indexOf("%")!=-1}function J(W){return W.length==1?"0"+W:""+W}function st(W){return W<=1&&(W=W*100+"%"),W}function at(W){return f.round(parseFloat(W)*255).toString(16)}function lt(W){return tt(W)/255}var F=function(){var W="[-\\+]?\\d+%?",K="[-\\+]?\\d*\\.\\d+%?",nt="(?:"+K+")|(?:"+W+")",it="[\\s|\\(]+("+nt+")[,|\\s]+("+nt+")[,|\\s]+("+nt+")\\s*\\)?",ot="[\\s|\\(]+("+nt+")[,|\\s]+("+nt+")[,|\\s]+("+nt+")[,|\\s]+("+nt+")\\s*\\)?";return{CSS_UNIT:new RegExp(nt),rgb:new RegExp("rgb"+it),rgba:new RegExp("rgba"+ot),hsl:new RegExp("hsl"+it),hsla:new RegExp("hsla"+ot),hsv:new RegExp("hsv"+it),hsva:new RegExp("hsva"+ot),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function H(W){return!!F.CSS_UNIT.exec(W)}function et(W){W=W.replace(l,"").replace(m,"").toLowerCase();var K=!1;if(P[W])W=P[W],K=!0;else if(W=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var nt;return(nt=F.rgb.exec(W))?{r:nt[1],g:nt[2],b:nt[3]}:(nt=F.rgba.exec(W))?{r:nt[1],g:nt[2],b:nt[3],a:nt[4]}:(nt=F.hsl.exec(W))?{h:nt[1],s:nt[2],l:nt[3]}:(nt=F.hsla.exec(W))?{h:nt[1],s:nt[2],l:nt[3],a:nt[4]}:(nt=F.hsv.exec(W))?{h:nt[1],s:nt[2],v:nt[3]}:(nt=F.hsva.exec(W))?{h:nt[1],s:nt[2],v:nt[3],a:nt[4]}:(nt=F.hex8.exec(W))?{r:tt(nt[1]),g:tt(nt[2]),b:tt(nt[3]),a:lt(nt[4]),format:K?"name":"hex8"}:(nt=F.hex6.exec(W))?{r:tt(nt[1]),g:tt(nt[2]),b:tt(nt[3]),format:K?"name":"hex"}:(nt=F.hex4.exec(W))?{r:tt(nt[1]+""+nt[1]),g:tt(nt[2]+""+nt[2]),b:tt(nt[3]+""+nt[3]),a:lt(nt[4]+""+nt[4]),format:K?"name":"hex8"}:(nt=F.hex3.exec(W))?{r:tt(nt[1]+""+nt[1]),g:tt(nt[2]+""+nt[2]),b:tt(nt[3]+""+nt[3]),format:K?"name":"hex"}:!1}function q(W){var K,nt;return W=W||{level:"AA",size:"small"},K=(W.level||"AA").toUpperCase(),nt=(W.size||"small").toLowerCase(),K!=="AA"&&K!=="AAA"&&(K="AA"),nt!=="small"&&nt!=="large"&&(nt="small"),{level:K,size:nt}}typeof B<"u"&&B.exports?B.exports=n:window.tinycolor=n})(Math)},{}],314:[function(e,B,V){B.exports=m,B.exports.float32=B.exports.float=m,B.exports.fract32=B.exports.fract=l;var f=new Float32Array(1);function l(x,t){if(x.length){if(x instanceof Float32Array)return new Float32Array(x.length);t instanceof Float32Array||(t=m(x));for(var a=0,i=t.length;a<i;a++)t[a]=x[a]-t[a];return t}return m(x-m(x))}function m(x){return x.length?x instanceof Float32Array?x:new Float32Array(x):(f[0]=x,f[0])}},{}],315:[function(e,B,V){var f=e("parse-unit");B.exports=t;var l=96;function m(a,i){var r=f(getComputedStyle(a).getPropertyValue(i));return r[0]*t(r[1],a)}function x(a,i){var r=document.createElement("div");r.style["font-size"]="128"+a,i.appendChild(r);var n=m(r,"font-size")/128;return i.removeChild(r),n}function t(a,i){switch(i=i||document.body,a=(a||"px").trim().toLowerCase(),(i===window||i===document)&&(i=document.body),a){case"%":return i.clientHeight/100;case"ch":case"ex":return x(a,i);case"em":return m(i,"font-size");case"rem":return m(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return l;case"cm":return l/2.54;case"mm":return l/25.4;case"pt":return l/72;case"pc":return l/6}return 1}},{"parse-unit":251}],316:[function(e,B,V){(function(f,l){typeof V=="object"&&typeof B<"u"?l(V):(f=f||self,l(f.topojson=f.topojson||{}))})(this,function(f){function l(c){return c}function m(c){if(c==null)return l;var A,k,p=c.scale[0],w=c.scale[1],h=c.translate[0],D=c.translate[1];return function(S,M){M||(A=k=0);var L=2,R=S.length,z=new Array(R);for(z[0]=(A+=S[0])*p+h,z[1]=(k+=S[1])*w+D;L<R;)z[L]=S[L],++L;return z}}function x(c){var A=m(c.transform),k,p=1/0,w=p,h=-p,D=-p;function S(L){L=A(L),L[0]<p&&(p=L[0]),L[0]>h&&(h=L[0]),L[1]<w&&(w=L[1]),L[1]>D&&(D=L[1])}function M(L){switch(L.type){case"GeometryCollection":L.geometries.forEach(M);break;case"Point":S(L.coordinates);break;case"MultiPoint":L.coordinates.forEach(S);break}}c.arcs.forEach(function(L){for(var R=-1,z=L.length,P;++R<z;)P=A(L[R],R),P[0]<p&&(p=P[0]),P[0]>h&&(h=P[0]),P[1]<w&&(w=P[1]),P[1]>D&&(D=P[1])});for(k in c.objects)M(c.objects[k]);return[p,w,h,D]}function t(c,A){for(var k,p=c.length,w=p-A;w<--p;)k=c[w],c[w++]=c[p],c[p]=k}function a(c,A){return typeof A=="string"&&(A=c.objects[A]),A.type==="GeometryCollection"?{type:"FeatureCollection",features:A.geometries.map(function(k){return i(c,k)})}:i(c,A)}function i(c,A){var k=A.id,p=A.bbox,w=A.properties==null?{}:A.properties,h=r(c,A);return k==null&&p==null?{type:"Feature",properties:w,geometry:h}:p==null?{type:"Feature",id:k,properties:w,geometry:h}:{type:"Feature",id:k,bbox:p,properties:w,geometry:h}}function r(c,A){var k=m(c.transform),p=c.arcs;function w(R,z){z.length&&z.pop();for(var P=p[R<0?~R:R],I=0,U=P.length;I<U;++I)z.push(k(P[I],I));R<0&&t(z,U)}function h(R){return k(R)}function D(R){for(var z=[],P=0,I=R.length;P<I;++P)w(R[P],z);return z.length<2&&z.push(z[0]),z}function S(R){for(var z=D(R);z.length<4;)z.push(z[0]);return z}function M(R){return R.map(S)}function L(R){var z=R.type,P;switch(z){case"GeometryCollection":return{type:z,geometries:R.geometries.map(L)};case"Point":P=h(R.coordinates);break;case"MultiPoint":P=R.coordinates.map(h);break;case"LineString":P=D(R.arcs);break;case"MultiLineString":P=R.arcs.map(D);break;case"Polygon":P=M(R.arcs);break;case"MultiPolygon":P=R.arcs.map(M);break;default:return null}return{type:z,coordinates:P}}return L(A)}function n(c,A){var k={},p={},w={},h=[],D=-1;A.forEach(function(L,R){var z=c.arcs[L<0?~L:L],P;z.length<3&&!z[1][0]&&!z[1][1]&&(P=A[++D],A[D]=L,A[R]=P)}),A.forEach(function(L){var R=S(L),z=R[0],P=R[1],I,U;if(I=w[z])if(delete w[I.end],I.push(L),I.end=P,U=p[P]){delete p[U.start];var O=U===I?I:I.concat(U);p[O.start=I.start]=w[O.end=U.end]=O}else p[I.start]=w[I.end]=I;else if(I=p[P])if(delete p[I.start],I.unshift(L),I.start=z,U=w[z]){delete w[U.end];var G=U===I?I:U.concat(I);p[G.start=U.start]=w[G.end=I.end]=G}else p[I.start]=w[I.end]=I;else I=[L],p[I.start=z]=w[I.end=P]=I});function S(L){var R=c.arcs[L<0?~L:L],z=R[0],P;return c.transform?(P=[0,0],R.forEach(function(I){P[0]+=I[0],P[1]+=I[1]})):P=R[R.length-1],L<0?[P,z]:[z,P]}function M(L,R){for(var z in L){var P=L[z];delete R[P.start],delete P.start,delete P.end,P.forEach(function(I){k[I<0?~I:I]=1}),h.push(P)}}return M(w,p),M(p,w),A.forEach(function(L){k[L<0?~L:L]||h.push([L])}),h}function d(c){return r(c,s.apply(this,arguments))}function s(c,A,k){var p,w,h;if(arguments.length>1)p=o(c,A,k);else for(w=0,p=new Array(h=c.arcs.length);w<h;++w)p[w]=w;return{type:"MultiLineString",arcs:n(c,p)}}function o(c,A,k){var p=[],w=[],h;function D(z){var P=z<0?~z:z;(w[P]||(w[P]=[])).push({i:z,g:h})}function S(z){z.forEach(D)}function M(z){z.forEach(S)}function L(z){z.forEach(M)}function R(z){switch(h=z,z.type){case"GeometryCollection":z.geometries.forEach(R);break;case"LineString":S(z.arcs);break;case"MultiLineString":case"Polygon":M(z.arcs);break;case"MultiPolygon":L(z.arcs);break}}return R(A),w.forEach(k==null?function(z){p.push(z[0].i)}:function(z){k(z[0].g,z[z.length-1].g)&&p.push(z[0].i)}),p}function y(c){for(var A=-1,k=c.length,p,w=c[k-1],h=0;++A<k;)p=w,w=c[A],h+=p[0]*w[1]-p[1]*w[0];return Math.abs(h)}function g(c){return r(c,b.apply(this,arguments))}function b(c,A){var k={},p=[],w=[];A.forEach(h);function h(M){switch(M.type){case"GeometryCollection":M.geometries.forEach(h);break;case"Polygon":D(M.arcs);break;case"MultiPolygon":M.arcs.forEach(D);break}}function D(M){M.forEach(function(L){L.forEach(function(R){(k[R=R<0?~R:R]||(k[R]=[])).push(M)})}),p.push(M)}function S(M){return y(r(c,{type:"Polygon",arcs:[M]}).coordinates[0])}return p.forEach(function(M){if(!M._){var L=[],R=[M];for(M._=1,w.push(L);M=R.pop();)L.push(M),M.forEach(function(z){z.forEach(function(P){k[P<0?~P:P].forEach(function(I){I._||(I._=1,R.push(I))})})})}}),p.forEach(function(M){delete M._}),{type:"MultiPolygon",arcs:w.map(function(M){var L=[],R;if(M.forEach(function(O){O.forEach(function(G){G.forEach(function($){k[$<0?~$:$].length<2&&L.push($)})})}),L=n(c,L),(R=L.length)>1)for(var z=1,P=S(L[0]),I,U;z<R;++z)(I=S(L[z]))>P&&(U=L[0],L[0]=L[z],L[z]=U,P=I);return L}).filter(function(M){return M.length>0})}}function v(c,A){for(var k=0,p=c.length;k<p;){var w=k+p>>>1;c[w]<A?k=w+1:p=w}return k}function _(c){var A={},k=c.map(function(){return[]});function p(O,G){O.forEach(function($){$<0&&($=~$);var tt=A[$];tt?tt.push(G):A[$]=[G]})}function w(O,G){O.forEach(function($){p($,G)})}function h(O,G){O.type==="GeometryCollection"?O.geometries.forEach(function($){h($,G)}):O.type in D&&D[O.type](O.arcs,G)}var D={LineString:p,MultiLineString:w,Polygon:w,MultiPolygon:function(O,G){O.forEach(function($){w($,G)})}};c.forEach(h);for(var S in A)for(var M=A[S],L=M.length,R=0;R<L;++R)for(var z=R+1;z<L;++z){var P=M[R],I=M[z],U;(U=k[P])[S=v(U,I)]!==I&&U.splice(S,0,I),(U=k[I])[S=v(U,P)]!==P&&U.splice(S,0,P)}return k}function u(c){if(c==null)return l;var A,k,p=c.scale[0],w=c.scale[1],h=c.translate[0],D=c.translate[1];return function(S,M){M||(A=k=0);var L=2,R=S.length,z=new Array(R),P=Math.round((S[0]-h)/p),I=Math.round((S[1]-D)/w);for(z[0]=P-A,A=P,z[1]=I-k,k=I;L<R;)z[L]=S[L],++L;return z}}function T(c,A){if(c.transform)throw new Error("already quantized");if(!A||!A.scale){if(!((D=Math.floor(A))>=2))throw new Error("n must be \u22652");M=c.bbox||x(c);var k=M[0],p=M[1],w=M[2],h=M[3],D;A={scale:[w-k?(w-k)/(D-1):1,h-p?(h-p)/(D-1):1],translate:[k,p]}}else M=c.bbox;var S=u(A),M,L,R=c.objects,z={};function P(O){return S(O)}function I(O){var G;switch(O.type){case"GeometryCollection":G={type:"GeometryCollection",geometries:O.geometries.map(I)};break;case"Point":G={type:"Point",coordinates:P(O.coordinates)};break;case"MultiPoint":G={type:"MultiPoint",coordinates:O.coordinates.map(P)};break;default:return O}return O.id!=null&&(G.id=O.id),O.bbox!=null&&(G.bbox=O.bbox),O.properties!=null&&(G.properties=O.properties),G}function U(O){var G=0,$=1,tt=O.length,Z,X=new Array(tt);for(X[0]=S(O[0],0);++G<tt;)((Z=S(O[G],G))[0]||Z[1])&&(X[$++]=Z);return $===1&&(X[$++]=[0,0]),X.length=$,X}for(L in R)z[L]=I(R[L]);return{type:"Topology",bbox:M,transform:A,objects:z,arcs:c.arcs.map(U)}}f.bbox=x,f.feature=a,f.merge=g,f.mergeArcs=b,f.mesh=d,f.meshArcs=s,f.neighbors=_,f.quantize=T,f.transform=m,f.untransform=u,Object.defineProperty(f,"__esModule",{value:!0})})},{}],317:[function(e,B,V){var f=e("../prototype/is");B.exports=function(l){if(typeof l!="function"||!hasOwnProperty.call(l,"length"))return!1;try{if(typeof l.length!="number"||typeof l.call!="function"||typeof l.apply!="function")return!1}catch{return!1}return!f(l)}},{"../prototype/is":324}],318:[function(e,B,V){var f=e("../value/is"),l=e("../object/is"),m=e("../string/coerce"),x=e("./to-short-string"),t=function(a,i){return a.replace("%v",x(i))};B.exports=function(a,i,r){if(!l(r))throw new TypeError(t(i,a));if(!f(a)){if("default"in r)return r.default;if(r.isOptional)return null}var n=m(r.errorMessage);throw f(n)||(n=i),new TypeError(t(n,a))}},{"../object/is":321,"../string/coerce":325,"../value/is":327,"./to-short-string":320}],319:[function(e,B,V){B.exports=function(f){try{return f.toString()}catch{try{return String(f)}catch{return null}}}},{}],320:[function(e,B,V){var f=e("./safe-to-string"),l=/[\n\r\u2028\u2029]/g;B.exports=function(m){var x=f(m);return x===null?"<Non-coercible to string value>":(x.length>100&&(x=x.slice(0,99)+"\u2026"),x=x.replace(l,function(t){switch(t){case`
`:return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}),x)}},{"./safe-to-string":319}],321:[function(e,B,V){var f=e("../value/is"),l={object:!0,function:!0,undefined:!0};B.exports=function(m){return f(m)?hasOwnProperty.call(l,typeof m):!1}},{"../value/is":327}],322:[function(e,B,V){var f=e("../lib/resolve-exception"),l=e("./is");B.exports=function(m){return l(m)?m:f(m,"%v is not a plain function",arguments[1])}},{"../lib/resolve-exception":318,"./is":323}],323:[function(e,B,V){var f=e("../function/is"),l=/^\s*class[\s{/}]/,m=Function.prototype.toString;B.exports=function(x){return!(!f(x)||l.test(m.call(x)))}},{"../function/is":317}],324:[function(e,B,V){var f=e("../object/is");B.exports=function(l){if(!f(l))return!1;try{return l.constructor?l.constructor.prototype===l:!1}catch{return!1}}},{"../object/is":321}],325:[function(e,B,V){var f=e("../value/is"),l=e("../object/is"),m=Object.prototype.toString;B.exports=function(x){if(!f(x))return null;if(l(x)){var t=x.toString;if(typeof t!="function"||t===m)return null}try{return""+x}catch{return null}}},{"../object/is":321,"../value/is":327}],326:[function(e,B,V){var f=e("../lib/resolve-exception"),l=e("./is");B.exports=function(m){return l(m)?m:f(m,"Cannot use %v",arguments[1])}},{"../lib/resolve-exception":318,"./is":327}],327:[function(e,B,V){var f=void 0;B.exports=function(l){return l!==f&&l!==null}},{}],328:[function(e,B,V){(function(f){(function(){var l=e("bit-twiddle"),m=e("dup"),x=e("buffer").Buffer;f.__TYPEDARRAY_POOL||(f.__TYPEDARRAY_POOL={UINT8:m([32,0]),UINT16:m([32,0]),UINT32:m([32,0]),BIGUINT64:m([32,0]),INT8:m([32,0]),INT16:m([32,0]),INT32:m([32,0]),BIGINT64:m([32,0]),FLOAT:m([32,0]),DOUBLE:m([32,0]),DATA:m([32,0]),UINT8C:m([32,0]),BUFFER:m([32,0])});var t=typeof Uint8ClampedArray<"u",a=typeof BigUint64Array<"u",i=typeof BigInt64Array<"u",r=f.__TYPEDARRAY_POOL;r.UINT8C||(r.UINT8C=m([32,0])),r.BIGUINT64||(r.BIGUINT64=m([32,0])),r.BIGINT64||(r.BIGINT64=m([32,0])),r.BUFFER||(r.BUFFER=m([32,0]));var n=r.DATA,d=r.BUFFER;V.free=function(M){if(x.isBuffer(M))d[l.log2(M.length)].push(M);else{if(Object.prototype.toString.call(M)!=="[object ArrayBuffer]"&&(M=M.buffer),!M)return;var L=M.length||M.byteLength,R=l.log2(L)|0;n[R].push(M)}};function s(S){if(!!S){var M=S.length||S.byteLength,L=l.log2(M);n[L].push(S)}}function o(S){s(S.buffer)}V.freeUint8=V.freeUint16=V.freeUint32=V.freeBigUint64=V.freeInt8=V.freeInt16=V.freeInt32=V.freeBigInt64=V.freeFloat32=V.freeFloat=V.freeFloat64=V.freeDouble=V.freeUint8Clamped=V.freeDataView=o,V.freeArrayBuffer=s,V.freeBuffer=function(M){d[l.log2(M.length)].push(M)},V.malloc=function(M,L){if(L===void 0||L==="arraybuffer")return y(M);switch(L){case"uint8":return g(M);case"uint16":return b(M);case"uint32":return v(M);case"int8":return _(M);case"int16":return u(M);case"int32":return T(M);case"float":case"float32":return c(M);case"double":case"float64":return A(M);case"uint8_clamped":return k(M);case"bigint64":return w(M);case"biguint64":return p(M);case"buffer":return D(M);case"data":case"dataview":return h(M);default:return null}return null};function y(M){var M=l.nextPow2(M),L=l.log2(M),R=n[L];return R.length>0?R.pop():new ArrayBuffer(M)}V.mallocArrayBuffer=y;function g(S){return new Uint8Array(y(S),0,S)}V.mallocUint8=g;function b(S){return new Uint16Array(y(2*S),0,S)}V.mallocUint16=b;function v(S){return new Uint32Array(y(4*S),0,S)}V.mallocUint32=v;function _(S){return new Int8Array(y(S),0,S)}V.mallocInt8=_;function u(S){return new Int16Array(y(2*S),0,S)}V.mallocInt16=u;function T(S){return new Int32Array(y(4*S),0,S)}V.mallocInt32=T;function c(S){return new Float32Array(y(4*S),0,S)}V.mallocFloat32=V.mallocFloat=c;function A(S){return new Float64Array(y(8*S),0,S)}V.mallocFloat64=V.mallocDouble=A;function k(S){return t?new Uint8ClampedArray(y(S),0,S):g(S)}V.mallocUint8Clamped=k;function p(S){return a?new BigUint64Array(y(8*S),0,S):null}V.mallocBigUint64=p;function w(S){return i?new BigInt64Array(y(8*S),0,S):null}V.mallocBigInt64=w;function h(S){return new DataView(y(S),0,S)}V.mallocDataView=h;function D(S){S=l.nextPow2(S);var M=l.log2(S),L=d[M];return L.length>0?L.pop():new x(S)}V.mallocBuffer=D,V.clearCache=function(){for(var M=0;M<32;++M)r.UINT8[M].length=0,r.UINT16[M].length=0,r.UINT32[M].length=0,r.INT8[M].length=0,r.INT16[M].length=0,r.INT32[M].length=0,r.FLOAT[M].length=0,r.DOUBLE[M].length=0,r.BIGUINT64[M].length=0,r.BIGINT64[M].length=0,r.UINT8C[M].length=0,n[M].length=0,d[M].length=0}}).call(this)}).call(this,typeof zo<"u"?zo:typeof self<"u"?self:typeof window<"u"?window:{})},{"bit-twiddle":81,buffer:85,dup:128}],329:[function(e,B,V){var f=/[\'\"]/;B.exports=function(m){return m?(f.test(m.charAt(0))&&(m=m.substr(1)),f.test(m.charAt(m.length-1))&&(m=m.substr(0,m.length-1)),m):""}},{}],330:[function(e,B,V){B.exports=function(l,m,x){Array.isArray(x)||(x=[].slice.call(arguments,2));for(var t=0,a=x.length;t<a;t++){var i=x[t];for(var r in i)if(!(m[r]!==void 0&&!Array.isArray(m[r])&&l[r]===m[r])&&r in m){var n;if(i[r]===!0)n=m[r];else{if(i[r]===!1)continue;if(typeof i[r]=="function"&&(n=i[r](m[r],l,m),n===void 0))continue}l[r]=n}}return l}},{}],331:[function(e,B,V){(function(f){(function(){B.exports=l;function l(x,t){if(m("noDeprecation"))return x;var a=!1;function i(){if(!a){if(m("throwDeprecation"))throw new Error(t);m("traceDeprecation")?console.trace(t):console.warn(t),a=!0}return x.apply(this,arguments)}return i}function m(x){try{if(!f.localStorage)return!1}catch{return!1}var t=f.localStorage[x];return t==null?!1:String(t).toLowerCase()==="true"}}).call(this)}).call(this,typeof zo<"u"?zo:typeof self<"u"?self:typeof window<"u"?window:{})},{}],332:[function(e,B,V){var f=e("get-canvas-context");B.exports=function(m){return f("webgl",m)}},{"get-canvas-context":194}],333:[function(e,B,V){var f=e("../main"),l=e("object-assign"),m=f.instance();function x(y){this.local=this.regionalOptions[y||""]||this.regionalOptions[""]}x.prototype=new f.baseCalendar,l(x.prototype,{name:"Chinese",jdEpoch:17214255e-1,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(y,g){if(typeof y=="string"){var b=y.match(a);return b?b[0]:""}var v=this._validateYear(y),_=y.month(),u=""+this.toChineseMonth(v,_);return g&&u.length<2&&(u="0"+u),this.isIntercalaryMonth(v,_)&&(u+="i"),u},monthNames:function(y){if(typeof y=="string"){var g=y.match(i);return g?g[0]:""}var b=this._validateYear(y),v=y.month(),_=this.toChineseMonth(b,v),u=["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"][_-1];return this.isIntercalaryMonth(b,v)&&(u="\u95F0"+u),u},monthNamesShort:function(y){if(typeof y=="string"){var g=y.match(r);return g?g[0]:""}var b=this._validateYear(y),v=y.month(),_=this.toChineseMonth(b,v),u=["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"][_-1];return this.isIntercalaryMonth(b,v)&&(u="\u95F0"+u),u},parseMonth:function(y,g){y=this._validateYear(y);var b=parseInt(g),v;if(isNaN(b))g[0]==="\u95F0"&&(v=!0,g=g.substring(1)),g[g.length-1]==="\u6708"&&(g=g.substring(0,g.length-1)),b=1+["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"].indexOf(g);else{var _=g[g.length-1];v=_==="i"||_==="I"}var u=this.toMonthIndex(y,b,v);return u},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(y,g){if(y.year&&(y=y.year()),typeof y!="number"||y<1888||y>2111)throw g.replace(/\{0\}/,this.local.name);return y},toMonthIndex:function(y,g,b){var v=this.intercalaryMonth(y),_=b&&g!==v;if(_||g<1||g>12)throw f.local.invalidMonth.replace(/\{0\}/,this.local.name);var u;return v?!b&&g<=v?u=g-1:u=g:u=g-1,u},toChineseMonth:function(y,g){y.year&&(y=y.year(),g=y.month());var b=this.intercalaryMonth(y),v=b?12:11;if(g<0||g>v)throw f.local.invalidMonth.replace(/\{0\}/,this.local.name);var _;return b?g<b?_=g+1:_=g:_=g+1,_},intercalaryMonth:function(y){y=this._validateYear(y);var g=n[y-n[0]],b=g>>13;return b},isIntercalaryMonth:function(y,g){y.year&&(y=y.year(),g=y.month());var b=this.intercalaryMonth(y);return!!b&&b===g},leapYear:function(y){return this.intercalaryMonth(y)!==0},weekOfYear:function(y,g,b){var v=this._validateYear(y,f.local.invalidyear),_=d[v-d[0]],u=_>>9&4095,T=_>>5&15,c=_&31,A;A=m.newDate(u,T,c),A.add(4-(A.dayOfWeek()||7),"d");var k=this.toJD(y,g,b)-A.toJD();return 1+Math.floor(k/7)},monthsInYear:function(y){return this.leapYear(y)?13:12},daysInMonth:function(y,g){y.year&&(g=y.month(),y=y.year()),y=this._validateYear(y);var b=n[y-n[0]],v=b>>13,_=v?12:11;if(g>_)throw f.local.invalidMonth.replace(/\{0\}/,this.local.name);var u=b&1<<12-g?30:29;return u},weekDay:function(y,g,b){return(this.dayOfWeek(y,g,b)||7)<6},toJD:function(y,g,b){var v=this._validate(y,u,b,f.local.invalidDate);y=this._validateYear(v.year()),g=v.month(),b=v.day();var _=this.isIntercalaryMonth(y,g),u=this.toChineseMonth(y,g),T=o(y,u,b,_);return m.toJD(T.year,T.month,T.day)},fromJD:function(y){var g=m.fromJD(y),b=s(g.year(),g.month(),g.day()),v=this.toMonthIndex(b.year,b.month,b.isIntercalary);return this.newDate(b.year,v,b.day)},fromString:function(y){var g=y.match(t),b=this._validateYear(+g[1]),v=+g[2],_=!!g[3],u=this.toMonthIndex(b,v,_),T=+g[4];return this.newDate(b,u,T)},add:function(y,g,b){var v=y.year(),_=y.month(),u=this.isIntercalaryMonth(v,_),T=this.toChineseMonth(v,_),c=Object.getPrototypeOf(x.prototype).add.call(this,y,g,b);if(b==="y"){var A=c.year(),k=c.month(),p=this.isIntercalaryMonth(A,T),w=u&&p?this.toMonthIndex(A,T,!0):this.toMonthIndex(A,T,!1);w!==k&&c.month(w)}return c}});var t=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,a=/^\d?\d[iI]?/m,i=/^闰?十?[一二三四五六七八九]?月/m,r=/^闰?十?[一二三四五六七八九]?/m;f.calendars.chinese=x;var n=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],d=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904];function s(y,g,b,v){var _,u;if(typeof y=="object")_=y,u=g||{};else{var T=typeof y=="number"&&y>=1888&&y<=2111;if(!T)throw new Error("Solar year outside range 1888-2111");var c=typeof g=="number"&&g>=1&&g<=12;if(!c)throw new Error("Solar month outside range 1 - 12");var A=typeof b=="number"&&b>=1&&b<=31;if(!A)throw new Error("Solar day outside range 1 - 31");_={year:y,month:g,day:b},u=v||{}}var k=d[_.year-d[0]],p=_.year<<9|_.month<<5|_.day;u.year=p>=k?_.year:_.year-1,k=d[u.year-d[0]];var w=k>>9&4095,h=k>>5&15,D=k&31,S,M=new Date(w,h-1,D),L=new Date(_.year,_.month-1,_.day);S=Math.round((L-M)/(24*3600*1e3));var R=n[u.year-n[0]],z;for(z=0;z<13;z++){var P=R&1<<12-z?30:29;if(S<P)break;S-=P}var I=R>>13;return!I||z<I?(u.isIntercalary=!1,u.month=1+z):z===I?(u.isIntercalary=!0,u.month=z):(u.isIntercalary=!1,u.month=z),u.day=1+S,u}function o(y,g,b,v,_){var u,T;if(typeof y=="object")T=y,u=g||{};else{var c=typeof y=="number"&&y>=1888&&y<=2111;if(!c)throw new Error("Lunar year outside range 1888-2111");var A=typeof g=="number"&&g>=1&&g<=12;if(!A)throw new Error("Lunar month outside range 1 - 12");var k=typeof b=="number"&&b>=1&&b<=30;if(!k)throw new Error("Lunar day outside range 1 - 30");var p;typeof v=="object"?(p=!1,u=v):(p=!!v,u=_||{}),T={year:y,month:g,day:b,isIntercalary:p}}var w;w=T.day-1;var h=n[T.year-n[0]],D=h>>13,S;D&&(T.month>D||T.isIntercalary)?S=T.month:S=T.month-1;for(var M=0;M<S;M++){var L=h&1<<12-M?30:29;w+=L}var R=d[T.year-d[0]],z=R>>9&4095,P=R>>5&15,I=R&31,U=new Date(z,P-1,I+w);return u.year=U.getFullYear(),u.month=1+U.getMonth(),u.day=U.getDate(),u}},{"../main":347,"object-assign":247}],334:[function(e,B,V){var f=e("../main"),l=e("object-assign");function m(x){this.local=this.regionalOptions[x||""]||this.regionalOptions[""]}m.prototype=new f.baseCalendar,l(m.prototype,{name:"Coptic",jdEpoch:18250295e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(a){var t=this._validate(a,this.minMonth,this.minDay,f.local.invalidYear),a=t.year()+(t.year()<0?1:0);return a%4===3||a%4===-1},monthsInYear:function(x){return this._validate(x,this.minMonth,this.minDay,f.local.invalidYear||f.regionalOptions[""].invalidYear),13},weekOfYear:function(x,t,a){var i=this.newDate(x,t,a);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(x,t){var a=this._validate(x,t,this.minDay,f.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(a.month()===13&&this.leapYear(a.year())?1:0)},weekDay:function(x,t,a){return(this.dayOfWeek(x,t,a)||7)<6},toJD:function(x,t,a){var i=this._validate(x,t,a,f.local.invalidDate);return x=i.year(),x<0&&x++,i.day()+(i.month()-1)*30+(x-1)*365+Math.floor(x/4)+this.jdEpoch-1},fromJD:function(x){var t=Math.floor(x)+.5-this.jdEpoch,a=Math.floor((t-Math.floor((t+366)/1461))/365)+1;a<=0&&a--,t=Math.floor(x)+.5-this.newDate(a,1,1).toJD();var i=Math.floor(t/30)+1,r=t-(i-1)*30+1;return this.newDate(a,i,r)}}),f.calendars.coptic=m},{"../main":347,"object-assign":247}],335:[function(e,B,V){var f=e("../main"),l=e("object-assign");function m(t){this.local=this.regionalOptions[t||""]||this.regionalOptions[""]}m.prototype=new f.baseCalendar,l(m.prototype,{name:"Discworld",jdEpoch:17214255e-1,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(t){return this._validate(t,this.minMonth,this.minDay,f.local.invalidYear),!1},monthsInYear:function(t){return this._validate(t,this.minMonth,this.minDay,f.local.invalidYear),13},daysInYear:function(t){return this._validate(t,this.minMonth,this.minDay,f.local.invalidYear),400},weekOfYear:function(t,a,i){var r=this.newDate(t,a,i);return r.add(-r.dayOfWeek(),"d"),Math.floor((r.dayOfYear()-1)/8)+1},daysInMonth:function(t,a){var i=this._validate(t,a,this.minDay,f.local.invalidMonth);return this.daysPerMonth[i.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(t,a,i){var r=this._validate(t,a,i,f.local.invalidDate);return(r.day()+1)%8},weekDay:function(t,a,i){var r=this.dayOfWeek(t,a,i);return r>=2&&r<=6},extraInfo:function(t,a,i){var r=this._validate(t,a,i,f.local.invalidDate);return{century:x[Math.floor((r.year()-1)/100)+1]||""}},toJD:function(t,a,i){var r=this._validate(t,a,i,f.local.invalidDate);return t=r.year()+(r.year()<0?1:0),a=r.month(),i=r.day(),i+(a>1?16:0)+(a>2?(a-2)*32:0)+(t-1)*400+this.jdEpoch-1},fromJD:function(t){t=Math.floor(t+.5)-Math.floor(this.jdEpoch)-1;var a=Math.floor(t/400)+1;t-=(a-1)*400,t+=t>15?16:0;var i=Math.floor(t/32)+1,r=t-(i-1)*32+1;return this.newDate(a<=0?a-1:a,i,r)}});var x={20:"Fruitbat",21:"Anchovy"};f.calendars.discworld=m},{"../main":347,"object-assign":247}],336:[function(e,B,V){var f=e("../main"),l=e("object-assign");function m(x){this.local=this.regionalOptions[x||""]||this.regionalOptions[""]}m.prototype=new f.baseCalendar,l(m.prototype,{name:"Ethiopian",jdEpoch:17242205e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(a){var t=this._validate(a,this.minMonth,this.minDay,f.local.invalidYear),a=t.year()+(t.year()<0?1:0);return a%4===3||a%4===-1},monthsInYear:function(x){return this._validate(x,this.minMonth,this.minDay,f.local.invalidYear||f.regionalOptions[""].invalidYear),13},weekOfYear:function(x,t,a){var i=this.newDate(x,t,a);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(x,t){var a=this._validate(x,t,this.minDay,f.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(a.month()===13&&this.leapYear(a.year())?1:0)},weekDay:function(x,t,a){return(this.dayOfWeek(x,t,a)||7)<6},toJD:function(x,t,a){var i=this._validate(x,t,a,f.local.invalidDate);return x=i.year(),x<0&&x++,i.day()+(i.month()-1)*30+(x-1)*365+Math.floor(x/4)+this.jdEpoch-1},fromJD:function(x){var t=Math.floor(x)+.5-this.jdEpoch,a=Math.floor((t-Math.floor((t+366)/1461))/365)+1;a<=0&&a--,t=Math.floor(x)+.5-this.newDate(a,1,1).toJD();var i=Math.floor(t/30)+1,r=t-(i-1)*30+1;return this.newDate(a,i,r)}}),f.calendars.ethiopian=m},{"../main":347,"object-assign":247}],337:[function(e,B,V){var f=e("../main"),l=e("object-assign");function m(t){this.local=this.regionalOptions[t||""]||this.regionalOptions[""]}m.prototype=new f.baseCalendar,l(m.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(t){var a=this._validate(t,this.minMonth,this.minDay,f.local.invalidYear);return this._leapYear(a.year())},_leapYear:function(t){return t=t<0?t+1:t,x(t*7+1,19)<7},monthsInYear:function(t){return this._validate(t,this.minMonth,this.minDay,f.local.invalidYear),this._leapYear(t.year?t.year():t)?13:12},weekOfYear:function(t,a,i){var r=this.newDate(t,a,i);return r.add(-r.dayOfWeek(),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInYear:function(t){var a=this._validate(t,this.minMonth,this.minDay,f.local.invalidYear);return t=a.year(),this.toJD(t===-1?1:t+1,7,1)-this.toJD(t,7,1)},daysInMonth:function(t,a){return t.year&&(a=t.month(),t=t.year()),this._validate(t,a,this.minDay,f.local.invalidMonth),a===12&&this.leapYear(t)||a===8&&x(this.daysInYear(t),10)===5?30:a===9&&x(this.daysInYear(t),10)===3?29:this.daysPerMonth[a-1]},weekDay:function(t,a,i){return this.dayOfWeek(t,a,i)!==6},extraInfo:function(t,a,i){var r=this._validate(t,a,i,f.local.invalidDate);return{yearType:(this.leapYear(r)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(r)%10-3]}},toJD:function(t,a,i){var r=this._validate(t,a,i,f.local.invalidDate);t=r.year(),a=r.month(),i=r.day();var n=t<=0?t+1:t,d=this.jdEpoch+this._delay1(n)+this._delay2(n)+i+1;if(a<7){for(var s=7;s<=this.monthsInYear(t);s++)d+=this.daysInMonth(t,s);for(var s=1;s<a;s++)d+=this.daysInMonth(t,s)}else for(var s=7;s<a;s++)d+=this.daysInMonth(t,s);return d},_delay1:function(t){var a=Math.floor((235*t-234)/19),i=12084+13753*a,r=a*29+Math.floor(i/25920);return x(3*(r+1),7)<3&&r++,r},_delay2:function(t){var a=this._delay1(t-1),i=this._delay1(t),r=this._delay1(t+1);return r-i===356?2:i-a===382?1:0},fromJD:function(t){t=Math.floor(t)+.5;for(var a=Math.floor((t-this.jdEpoch)*98496/35975351)-1;t>=this.toJD(a===-1?1:a+1,7,1);)a++;for(var i=t<this.toJD(a,1,1)?7:1;t>this.toJD(a,i,this.daysInMonth(a,i));)i++;var r=t-this.toJD(a,i,1)+1;return this.newDate(a,i,r)}});function x(t,a){return t-a*Math.floor(t/a)}f.calendars.hebrew=m},{"../main":347,"object-assign":247}],338:[function(e,B,V){var f=e("../main"),l=e("object-assign");function m(x){this.local=this.regionalOptions[x||""]||this.regionalOptions[""]}m.prototype=new f.baseCalendar,l(m.prototype,{name:"Islamic",jdEpoch:19484395e-1,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-kham\u012Bs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(x){var t=this._validate(x,this.minMonth,this.minDay,f.local.invalidYear);return(t.year()*11+14)%30<11},weekOfYear:function(x,t,a){var i=this.newDate(x,t,a);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInYear:function(x){return this.leapYear(x)?355:354},daysInMonth:function(x,t){var a=this._validate(x,t,this.minDay,f.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(a.month()===12&&this.leapYear(a.year())?1:0)},weekDay:function(x,t,a){return this.dayOfWeek(x,t,a)!==5},toJD:function(x,t,a){var i=this._validate(x,t,a,f.local.invalidDate);return x=i.year(),t=i.month(),a=i.day(),x=x<=0?x+1:x,a+Math.ceil(29.5*(t-1))+(x-1)*354+Math.floor((3+11*x)/30)+this.jdEpoch-1},fromJD:function(x){x=Math.floor(x)+.5;var t=Math.floor((30*(x-this.jdEpoch)+10646)/10631);t=t<=0?t-1:t;var a=Math.min(12,Math.ceil((x-29-this.toJD(t,1,1))/29.5)+1),i=x-this.toJD(t,a,1)+1;return this.newDate(t,a,i)}}),f.calendars.islamic=m},{"../main":347,"object-assign":247}],339:[function(e,B,V){var f=e("../main"),l=e("object-assign");function m(x){this.local=this.regionalOptions[x||""]||this.regionalOptions[""]}m.prototype=new f.baseCalendar,l(m.prototype,{name:"Julian",jdEpoch:17214235e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(a){var t=this._validate(a,this.minMonth,this.minDay,f.local.invalidYear),a=t.year()<0?t.year()+1:t.year();return a%4===0},weekOfYear:function(x,t,a){var i=this.newDate(x,t,a);return i.add(4-(i.dayOfWeek()||7),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(x,t){var a=this._validate(x,t,this.minDay,f.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(a.month()===2&&this.leapYear(a.year())?1:0)},weekDay:function(x,t,a){return(this.dayOfWeek(x,t,a)||7)<6},toJD:function(x,t,a){var i=this._validate(x,t,a,f.local.invalidDate);return x=i.year(),t=i.month(),a=i.day(),x<0&&x++,t<=2&&(x--,t+=12),Math.floor(365.25*(x+4716))+Math.floor(30.6001*(t+1))+a-1524.5},fromJD:function(x){var t=Math.floor(x+.5),a=t+1524,i=Math.floor((a-122.1)/365.25),r=Math.floor(365.25*i),n=Math.floor((a-r)/30.6001),d=n-Math.floor(n<14?1:13),s=i-Math.floor(d>2?4716:4715),o=a-r-Math.floor(30.6001*n);return s<=0&&s--,this.newDate(s,d,o)}}),f.calendars.julian=m},{"../main":347,"object-assign":247}],340:[function(e,B,V){var f=e("../main"),l=e("object-assign");function m(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}m.prototype=new f.baseCalendar,l(m.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(a){return this._validate(a,this.minMonth,this.minDay,f.local.invalidYear),!1},formatYear:function(a){var i=this._validate(a,this.minMonth,this.minDay,f.local.invalidYear);a=i.year();var r=Math.floor(a/400);a=a%400,a+=a<0?400:0;var n=Math.floor(a/20);return r+"."+n+"."+a%20},forYear:function(a){if(a=a.split("."),a.length<3)throw"Invalid Mayan year";for(var i=0,r=0;r<a.length;r++){var n=parseInt(a[r],10);if(Math.abs(n)>19||r>0&&n<0)throw"Invalid Mayan year";i=i*20+n}return i},monthsInYear:function(a){return this._validate(a,this.minMonth,this.minDay,f.local.invalidYear),18},weekOfYear:function(a,i,r){return this._validate(a,i,r,f.local.invalidDate),0},daysInYear:function(a){return this._validate(a,this.minMonth,this.minDay,f.local.invalidYear),360},daysInMonth:function(a,i){return this._validate(a,i,this.minDay,f.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(a,i,r){var n=this._validate(a,i,r,f.local.invalidDate);return n.day()},weekDay:function(a,i,r){return this._validate(a,i,r,f.local.invalidDate),!0},extraInfo:function(a,i,r){var n=this._validate(a,i,r,f.local.invalidDate),d=n.toJD(),s=this._toHaab(d),o=this._toTzolkin(d);return{haabMonthName:this.local.haabMonths[s[0]-1],haabMonth:s[0],haabDay:s[1],tzolkinDayName:this.local.tzolkinMonths[o[0]-1],tzolkinDay:o[0],tzolkinTrecena:o[1]}},_toHaab:function(a){a-=this.jdEpoch;var i=x(a+8+(18-1)*20,365);return[Math.floor(i/20)+1,x(i,20)]},_toTzolkin:function(a){return a-=this.jdEpoch,[t(a+20,20),t(a+4,13)]},toJD:function(a,i,r){var n=this._validate(a,i,r,f.local.invalidDate);return n.day()+n.month()*20+n.year()*360+this.jdEpoch},fromJD:function(a){a=Math.floor(a)+.5-this.jdEpoch;var i=Math.floor(a/360);a=a%360,a+=a<0?360:0;var r=Math.floor(a/20),n=a%20;return this.newDate(i,r,n)}});function x(a,i){return a-i*Math.floor(a/i)}function t(a,i){return x(a-1,i)+1}f.calendars.mayan=m},{"../main":347,"object-assign":247}],341:[function(e,B,V){var f=e("../main"),l=e("object-assign");function m(t){this.local=this.regionalOptions[t||""]||this.regionalOptions[""]}m.prototype=new f.baseCalendar;var x=f.instance("gregorian");l(m.prototype,{name:"Nanakshahi",jdEpoch:22576735e-1,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(t){var a=this._validate(t,this.minMonth,this.minDay,f.local.invalidYear||f.regionalOptions[""].invalidYear);return x.leapYear(a.year()+(a.year()<1?1:0)+1469)},weekOfYear:function(t,a,i){var r=this.newDate(t,a,i);return r.add(1-(r.dayOfWeek()||7),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInMonth:function(t,a){var i=this._validate(t,a,this.minDay,f.local.invalidMonth);return this.daysPerMonth[i.month()-1]+(i.month()===12&&this.leapYear(i.year())?1:0)},weekDay:function(t,a,i){return(this.dayOfWeek(t,a,i)||7)<6},toJD:function(n,a,i){var r=this._validate(n,a,i,f.local.invalidMonth),n=r.year();n<0&&n++;for(var d=r.day(),s=1;s<r.month();s++)d+=this.daysPerMonth[s-1];return d+x.toJD(n+1468,3,13)},fromJD:function(t){t=Math.floor(t+.5);for(var a=Math.floor((t-(this.jdEpoch-1))/366);t>=this.toJD(a+1,1,1);)a++;for(var i=t-Math.floor(this.toJD(a,1,1)+.5)+1,r=1;i>this.daysInMonth(a,r);)i-=this.daysInMonth(a,r),r++;return this.newDate(a,r,i)}}),f.calendars.nanakshahi=m},{"../main":347,"object-assign":247}],342:[function(e,B,V){var f=e("../main"),l=e("object-assign");function m(x){this.local=this.regionalOptions[x||""]||this.regionalOptions[""]}m.prototype=new f.baseCalendar,l(m.prototype,{name:"Nepali",jdEpoch:17007095e-1,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(x){return this.daysInYear(x)!==this.daysPerYear},weekOfYear:function(x,t,a){var i=this.newDate(x,t,a);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInYear:function(x){var t=this._validate(x,this.minMonth,this.minDay,f.local.invalidYear);if(x=t.year(),typeof this.NEPALI_CALENDAR_DATA[x]>"u")return this.daysPerYear;for(var a=0,i=this.minMonth;i<=12;i++)a+=this.NEPALI_CALENDAR_DATA[x][i];return a},daysInMonth:function(x,t){return x.year&&(t=x.month(),x=x.year()),this._validate(x,t,this.minDay,f.local.invalidMonth),typeof this.NEPALI_CALENDAR_DATA[x]>"u"?this.daysPerMonth[t-1]:this.NEPALI_CALENDAR_DATA[x][t]},weekDay:function(x,t,a){return this.dayOfWeek(x,t,a)!==6},toJD:function(x,t,a){var i=this._validate(x,t,a,f.local.invalidDate);x=i.year(),t=i.month(),a=i.day();var r=f.instance(),n=0,d=t,s=x;this._createMissingCalendarData(x);var o=x-(d>9||d===9&&a>=this.NEPALI_CALENDAR_DATA[s][0]?56:57);for(t!==9&&(n=a,d--);d!==9;)d<=0&&(d=12,s--),n+=this.NEPALI_CALENDAR_DATA[s][d],d--;return t===9?(n+=a-this.NEPALI_CALENDAR_DATA[s][0],n<0&&(n+=r.daysInYear(o))):n+=this.NEPALI_CALENDAR_DATA[s][9]-this.NEPALI_CALENDAR_DATA[s][0],r.newDate(o,1,1).add(n,"d").toJD()},fromJD:function(x){var t=f.instance(),a=t.fromJD(x),i=a.year(),r=a.dayOfYear(),n=i+56;this._createMissingCalendarData(n);for(var d=9,s=this.NEPALI_CALENDAR_DATA[n][0],o=this.NEPALI_CALENDAR_DATA[n][d]-s+1;r>o;)d++,d>12&&(d=1,n++),o+=this.NEPALI_CALENDAR_DATA[n][d];var y=this.NEPALI_CALENDAR_DATA[n][d]-(o-r);return this.newDate(n,d,y)},_createMissingCalendarData:function(x){var t=this.daysPerMonth.slice(0);t.unshift(17);for(var a=x-1;a<x+2;a++)typeof this.NEPALI_CALENDAR_DATA[a]>"u"&&(this.NEPALI_CALENDAR_DATA[a]=t)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),f.calendars.nepali=m},{"../main":347,"object-assign":247}],343:[function(e,B,V){var f=e("../main"),l=e("object-assign");function m(t){this.local=this.regionalOptions[t||""]||this.regionalOptions[""]}m.prototype=new f.baseCalendar,l(m.prototype,{name:"Persian",jdEpoch:19483205e-1,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Ch\xE6harshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch\xE6","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(t){var a=this._validate(t,this.minMonth,this.minDay,f.local.invalidYear);return((a.year()-(a.year()>0?474:473))%2820+474+38)*682%2816<682},weekOfYear:function(t,a,i){var r=this.newDate(t,a,i);return r.add(-((r.dayOfWeek()+1)%7),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInMonth:function(t,a){var i=this._validate(t,a,this.minDay,f.local.invalidMonth);return this.daysPerMonth[i.month()-1]+(i.month()===12&&this.leapYear(i.year())?1:0)},weekDay:function(t,a,i){return this.dayOfWeek(t,a,i)!==5},toJD:function(t,a,i){var r=this._validate(t,a,i,f.local.invalidDate);t=r.year(),a=r.month(),i=r.day();var n=t-(t>=0?474:473),d=474+x(n,2820);return i+(a<=7?(a-1)*31:(a-1)*30+6)+Math.floor((d*682-110)/2816)+(d-1)*365+Math.floor(n/2820)*1029983+this.jdEpoch-1},fromJD:function(t){t=Math.floor(t)+.5;var a=t-this.toJD(475,1,1),i=Math.floor(a/1029983),r=x(a,1029983),n=2820;if(r!==1029982){var d=Math.floor(r/366),s=x(r,366);n=Math.floor((2134*d+2816*s+2815)/1028522)+d+1}var o=n+2820*i+474;o=o<=0?o-1:o;var y=t-this.toJD(o,1,1)+1,g=y<=186?Math.ceil(y/31):Math.ceil((y-6)/30),b=t-this.toJD(o,g,1)+1;return this.newDate(o,g,b)}});function x(t,a){return t-a*Math.floor(t/a)}f.calendars.persian=m,f.calendars.jalali=m},{"../main":347,"object-assign":247}],344:[function(e,B,V){var f=e("../main"),l=e("object-assign"),m=f.instance();function x(t){this.local=this.regionalOptions[t||""]||this.regionalOptions[""]}x.prototype=new f.baseCalendar,l(x.prototype,{name:"Taiwan",jdEpoch:24194025e-1,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(i){var a=this._validate(i,this.minMonth,this.minDay,f.local.invalidYear),i=this._t2gYear(a.year());return m.leapYear(i)},weekOfYear:function(n,a,i){var r=this._validate(n,this.minMonth,this.minDay,f.local.invalidYear),n=this._t2gYear(r.year());return m.weekOfYear(n,r.month(),r.day())},daysInMonth:function(t,a){var i=this._validate(t,a,this.minDay,f.local.invalidMonth);return this.daysPerMonth[i.month()-1]+(i.month()===2&&this.leapYear(i.year())?1:0)},weekDay:function(t,a,i){return(this.dayOfWeek(t,a,i)||7)<6},toJD:function(n,a,i){var r=this._validate(n,a,i,f.local.invalidDate),n=this._t2gYear(r.year());return m.toJD(n,r.month(),r.day())},fromJD:function(t){var a=m.fromJD(t),i=this._g2tYear(a.year());return this.newDate(i,a.month(),a.day())},_t2gYear:function(t){return t+this.yearsOffset+(t>=-this.yearsOffset&&t<=-1?1:0)},_g2tYear:function(t){return t-this.yearsOffset-(t>=1&&t<=this.yearsOffset?1:0)}}),f.calendars.taiwan=x},{"../main":347,"object-assign":247}],345:[function(e,B,V){var f=e("../main"),l=e("object-assign"),m=f.instance();function x(t){this.local=this.regionalOptions[t||""]||this.regionalOptions[""]}x.prototype=new f.baseCalendar,l(x.prototype,{name:"Thai",jdEpoch:15230985e-1,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(i){var a=this._validate(i,this.minMonth,this.minDay,f.local.invalidYear),i=this._t2gYear(a.year());return m.leapYear(i)},weekOfYear:function(n,a,i){var r=this._validate(n,this.minMonth,this.minDay,f.local.invalidYear),n=this._t2gYear(r.year());return m.weekOfYear(n,r.month(),r.day())},daysInMonth:function(t,a){var i=this._validate(t,a,this.minDay,f.local.invalidMonth);return this.daysPerMonth[i.month()-1]+(i.month()===2&&this.leapYear(i.year())?1:0)},weekDay:function(t,a,i){return(this.dayOfWeek(t,a,i)||7)<6},toJD:function(n,a,i){var r=this._validate(n,a,i,f.local.invalidDate),n=this._t2gYear(r.year());return m.toJD(n,r.month(),r.day())},fromJD:function(t){var a=m.fromJD(t),i=this._g2tYear(a.year());return this.newDate(i,a.month(),a.day())},_t2gYear:function(t){return t-this.yearsOffset-(t>=1&&t<=this.yearsOffset?1:0)},_g2tYear:function(t){return t+this.yearsOffset+(t>=-this.yearsOffset&&t<=-1?1:0)}}),f.calendars.thai=x},{"../main":347,"object-assign":247}],346:[function(e,B,V){var f=e("../main"),l=e("object-assign");function m(t){this.local=this.regionalOptions[t||""]||this.regionalOptions[""]}m.prototype=new f.baseCalendar,l(m.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thal\u0101th\u0101\u2019","Yawm al-Arba\u2018\u0101\u2019","Yawm al-Kham\u012Bs","Yawm al-Jum\u2018a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(t){var a=this._validate(t,this.minMonth,this.minDay,f.local.invalidYear);return this.daysInYear(a.year())===355},weekOfYear:function(t,a,i){var r=this.newDate(t,a,i);return r.add(-r.dayOfWeek(),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInYear:function(t){for(var a=0,i=1;i<=12;i++)a+=this.daysInMonth(t,i);return a},daysInMonth:function(t,a){for(var i=this._validate(t,a,this.minDay,f.local.invalidMonth),r=i.toJD()-24e5+.5,n=0,d=0;d<x.length;d++){if(x[d]>r)return x[n]-x[n-1];n++}return 30},weekDay:function(t,a,i){return this.dayOfWeek(t,a,i)!==5},toJD:function(t,a,i){var r=this._validate(t,a,i,f.local.invalidDate),n=12*(r.year()-1)+r.month()-15292,d=r.day()+x[n-1]-1;return d+24e5-.5},fromJD:function(t){for(var a=t-24e5+.5,i=0,r=0;r<x.length&&!(x[r]>a);r++)i++;var n=i+15292,d=Math.floor((n-1)/12),s=d+1,o=n-12*d,y=a-x[i-1]+1;return this.newDate(s,o,y)},isValid:function(t,a,i){var r=f.baseCalendar.prototype.isValid.apply(this,arguments);return r&&(t=t.year!=null?t.year:t,r=t>=1276&&t<=1500),r},_validate:function(t,a,i,r){var n=f.baseCalendar.prototype._validate.apply(this,arguments);if(n.year<1276||n.year>1500)throw r.replace(/\{0\}/,this.local.name);return n}}),f.calendars.ummalqura=m;var x=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},{"../main":347,"object-assign":247}],347:[function(e,B,V){var f=e("object-assign");function l(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}f(l.prototype,{instance:function(r,n){r=(r||"gregorian").toLowerCase(),n=n||"";var d=this._localCals[r+"-"+n];if(!d&&this.calendars[r]&&(d=new this.calendars[r](n),this._localCals[r+"-"+n]=d),!d)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,r);return d},newDate:function(r,n,d,s,o){return s=(r!=null&&r.year?r.calendar():typeof s=="string"?this.instance(s,o):s)||this.instance(),s.newDate(r,n,d)},substituteDigits:function(r){return function(n){return(n+"").replace(/[0-9]/g,function(d){return r[d]})}},substituteChineseDigits:function(r,n){return function(d){for(var s="",o=0;d>0;){var y=d%10;s=(y===0?"":r[y]+n[o])+s,o++,d=Math.floor(d/10)}return s.indexOf(r[1]+n[1])===0&&(s=s.substr(1)),s||r[0]}}});function m(r,n,d,s){if(this._calendar=r,this._year=n,this._month=d,this._day=s,this._calendar._validateLevel===0&&!this._calendar.isValid(this._year,this._month,this._day))throw(i.local.invalidDate||i.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function x(r,n){return r=""+r,"000000".substring(0,n-r.length)+r}f(m.prototype,{newDate:function(r,n,d){return this._calendar.newDate(r==null?this:r,n,d)},year:function(r){return arguments.length===0?this._year:this.set(r,"y")},month:function(r){return arguments.length===0?this._month:this.set(r,"m")},day:function(r){return arguments.length===0?this._day:this.set(r,"d")},date:function(r,n,d){if(!this._calendar.isValid(r,n,d))throw(i.local.invalidDate||i.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=r,this._month=n,this._day=d,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(r,n){return this._calendar.add(this,r,n)},set:function(r,n){return this._calendar.set(this,r,n)},compareTo:function(r){if(this._calendar.name!==r._calendar.name)throw(i.local.differentCalendars||i.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,r._calendar.local.name);var n=this._year!==r._year?this._year-r._year:this._month!==r._month?this.monthOfYear()-r.monthOfYear():this._day-r._day;return n===0?0:n<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(r){return this._calendar.fromJD(r)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(r){return this._calendar.fromJSDate(r)},toString:function(){return(this.year()<0?"-":"")+x(Math.abs(this.year()),4)+"-"+x(this.month(),2)+"-"+x(this.day(),2)}});function t(){this.shortYearCutoff="+10"}f(t.prototype,{_validateLevel:0,newDate:function(r,n,d){return r==null?this.today():(r.year&&(this._validate(r,n,d,i.local.invalidDate||i.regionalOptions[""].invalidDate),d=r.day(),n=r.month(),r=r.year()),new m(this,r,n,d))},today:function(){return this.fromJSDate(new Date)},epoch:function(r){var n=this._validate(r,this.minMonth,this.minDay,i.local.invalidYear||i.regionalOptions[""].invalidYear);return n.year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(r){var n=this._validate(r,this.minMonth,this.minDay,i.local.invalidYear||i.regionalOptions[""].invalidYear);return(n.year()<0?"-":"")+x(Math.abs(n.year()),4)},monthsInYear:function(r){return this._validate(r,this.minMonth,this.minDay,i.local.invalidYear||i.regionalOptions[""].invalidYear),12},monthOfYear:function(r,n){var d=this._validate(r,n,this.minDay,i.local.invalidMonth||i.regionalOptions[""].invalidMonth);return(d.month()+this.monthsInYear(d)-this.firstMonth)%this.monthsInYear(d)+this.minMonth},fromMonthOfYear:function(r,n){var d=(n+this.firstMonth-2*this.minMonth)%this.monthsInYear(r)+this.minMonth;return this._validate(r,d,this.minDay,i.local.invalidMonth||i.regionalOptions[""].invalidMonth),d},daysInYear:function(r){var n=this._validate(r,this.minMonth,this.minDay,i.local.invalidYear||i.regionalOptions[""].invalidYear);return this.leapYear(n)?366:365},dayOfYear:function(r,n,d){var s=this._validate(r,n,d,i.local.invalidDate||i.regionalOptions[""].invalidDate);return s.toJD()-this.newDate(s.year(),this.fromMonthOfYear(s.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(r,n,d){var s=this._validate(r,n,d,i.local.invalidDate||i.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(s))+2)%this.daysInWeek()},extraInfo:function(r,n,d){return this._validate(r,n,d,i.local.invalidDate||i.regionalOptions[""].invalidDate),{}},add:function(r,n,d){return this._validate(r,this.minMonth,this.minDay,i.local.invalidDate||i.regionalOptions[""].invalidDate),this._correctAdd(r,this._add(r,n,d),n,d)},_add:function(r,n,d){if(this._validateLevel++,d==="d"||d==="w"){var s=r.toJD()+n*(d==="w"?this.daysInWeek():1),o=r.calendar().fromJD(s);return this._validateLevel--,[o.year(),o.month(),o.day()]}try{var y=r.year()+(d==="y"?n:0),g=r.monthOfYear()+(d==="m"?n:0),o=r.day(),b=function(u){for(;g<u.minMonth;)y--,g+=u.monthsInYear(y);for(var T=u.monthsInYear(y);g>T-1+u.minMonth;)y++,g-=T,T=u.monthsInYear(y)};d==="y"?(r.month()!==this.fromMonthOfYear(y,g)&&(g=this.newDate(y,r.month(),this.minDay).monthOfYear()),g=Math.min(g,this.monthsInYear(y)),o=Math.min(o,this.daysInMonth(y,this.fromMonthOfYear(y,g)))):d==="m"&&(b(this),o=Math.min(o,this.daysInMonth(y,this.fromMonthOfYear(y,g))));var v=[y,this.fromMonthOfYear(y,g),o];return this._validateLevel--,v}catch(_){throw this._validateLevel--,_}},_correctAdd:function(r,n,d,s){if(!this.hasYearZero&&(s==="y"||s==="m")&&(n[0]===0||r.year()>0!=n[0]>0)){var o={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[s],y=d<0?-1:1;n=this._add(r,d*o[0]+y*o[1],o[2])}return r.date(n[0],n[1],n[2])},set:function(r,n,d){this._validate(r,this.minMonth,this.minDay,i.local.invalidDate||i.regionalOptions[""].invalidDate);var s=d==="y"?n:r.year(),o=d==="m"?n:r.month(),y=d==="d"?n:r.day();return(d==="y"||d==="m")&&(y=Math.min(y,this.daysInMonth(s,o))),r.date(s,o,y)},isValid:function(r,n,d){this._validateLevel++;var s=this.hasYearZero||r!==0;if(s){var o=this.newDate(r,n,this.minDay);s=n>=this.minMonth&&n-this.minMonth<this.monthsInYear(o)&&d>=this.minDay&&d-this.minDay<this.daysInMonth(o)}return this._validateLevel--,s},toJSDate:function(r,n,d){var s=this._validate(r,n,d,i.local.invalidDate||i.regionalOptions[""].invalidDate);return i.instance().fromJD(this.toJD(s)).toJSDate()},fromJSDate:function(r){return this.fromJD(i.instance().fromJSDate(r).toJD())},_validate:function(r,n,d,s){if(r.year){if(this._validateLevel===0&&this.name!==r.calendar().name)throw(i.local.differentCalendars||i.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,r.calendar().local.name);return r}try{if(this._validateLevel++,this._validateLevel===1&&!this.isValid(r,n,d))throw s.replace(/\{0\}/,this.local.name);var o=this.newDate(r,n,d);return this._validateLevel--,o}catch(y){throw this._validateLevel--,y}}});function a(r){this.local=this.regionalOptions[r]||this.regionalOptions[""]}a.prototype=new t,f(a.prototype,{name:"Gregorian",jdEpoch:17214255e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(d){var n=this._validate(d,this.minMonth,this.minDay,i.local.invalidYear||i.regionalOptions[""].invalidYear),d=n.year()+(n.year()<0?1:0);return d%4===0&&(d%100!==0||d%400===0)},weekOfYear:function(r,n,d){var s=this.newDate(r,n,d);return s.add(4-(s.dayOfWeek()||7),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInMonth:function(r,n){var d=this._validate(r,n,this.minDay,i.local.invalidMonth||i.regionalOptions[""].invalidMonth);return this.daysPerMonth[d.month()-1]+(d.month()===2&&this.leapYear(d.year())?1:0)},weekDay:function(r,n,d){return(this.dayOfWeek(r,n,d)||7)<6},toJD:function(r,n,d){var s=this._validate(r,n,d,i.local.invalidDate||i.regionalOptions[""].invalidDate);r=s.year(),n=s.month(),d=s.day(),r<0&&r++,n<3&&(n+=12,r--);var o=Math.floor(r/100),y=2-o+Math.floor(o/4);return Math.floor(365.25*(r+4716))+Math.floor(30.6001*(n+1))+d+y-1524.5},fromJD:function(r){var n=Math.floor(r+.5),d=Math.floor((n-186721625e-2)/36524.25);d=n+1+d-Math.floor(d/4);var s=d+1524,o=Math.floor((s-122.1)/365.25),y=Math.floor(365.25*o),g=Math.floor((s-y)/30.6001),b=s-y-Math.floor(g*30.6001),v=g-(g>13.5?13:1),_=o-(v>2.5?4716:4715);return _<=0&&_--,this.newDate(_,v,b)},toJSDate:function(r,n,d){var s=this._validate(r,n,d,i.local.invalidDate||i.regionalOptions[""].invalidDate),o=new Date(s.year(),s.month()-1,s.day());return o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0),o.setHours(o.getHours()>12?o.getHours()+2:0),o},fromJSDate:function(r){return this.newDate(r.getFullYear(),r.getMonth()+1,r.getDate())}});var i=B.exports=new l;i.cdate=m,i.baseCalendar=t,i.calendars.gregorian=a},{"object-assign":247}],348:[function(e,B,V){var f=e("object-assign"),l=e("./main");f(l.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),l.local=l.regionalOptions[""],f(l.cdate.prototype,{formatDate:function(m,x){return typeof m!="string"&&(x=m,m=""),this._calendar.formatDate(m||"",this,x)}}),f(l.baseCalendar.prototype,{UNIX_EPOCH:l.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:24*60*60,TICKS_EPOCH:l.instance().jdEpoch,TICKS_PER_DAY:24*60*60*1e7,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(m,x,t){if(typeof m!="string"&&(t=x,x=m,m=""),!x)return"";if(x.calendar()!==this)throw l.local.invalidFormat||l.regionalOptions[""].invalidFormat;m=m||this.local.dateFormat,t=t||{};var a=t.dayNamesShort||this.local.dayNamesShort,i=t.dayNames||this.local.dayNames,r=t.monthNumbers||this.local.monthNumbers,n=t.monthNamesShort||this.local.monthNamesShort,d=t.monthNames||this.local.monthNames;t.calculateWeek||this.local.calculateWeek;for(var s=function(k,p){for(var w=1;A+w<m.length&&m.charAt(A+w)===k;)w++;return A+=w-1,Math.floor(w/(p||1))>1},o=function(k,p,w,h){var D=""+p;if(s(k,h))for(;D.length<w;)D="0"+D;return D},y=function(k,p,w,h){return s(k)?h[p]:w[p]},g=this,b=function(k){return typeof r=="function"?r.call(g,k,s("m")):u(o("m",k.month(),2))},v=function(k,p){return p?typeof d=="function"?d.call(g,k):d[k.month()-g.minMonth]:typeof n=="function"?n.call(g,k):n[k.month()-g.minMonth]},_=this.local.digits,u=function(k){return t.localNumbers&&_?_(k):k},T="",c=!1,A=0;A<m.length;A++)if(c)m.charAt(A)==="'"&&!s("'")?c=!1:T+=m.charAt(A);else switch(m.charAt(A)){case"d":T+=u(o("d",x.day(),2));break;case"D":T+=y("D",x.dayOfWeek(),a,i);break;case"o":T+=o("o",x.dayOfYear(),3);break;case"w":T+=o("w",x.weekOfYear(),2);break;case"m":T+=b(x);break;case"M":T+=v(x,s("M"));break;case"y":T+=s("y",2)?x.year():(x.year()%100<10?"0":"")+x.year()%100;break;case"Y":s("Y",2),T+=x.formatYear();break;case"J":T+=x.toJD();break;case"@":T+=(x.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":T+=(x.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":s("'")?T+="'":c=!0;break;default:T+=m.charAt(A)}return T},parseDate:function(m,x,t){if(x==null)throw l.local.invalidArguments||l.regionalOptions[""].invalidArguments;if(x=typeof x=="object"?x.toString():x+"",x==="")return null;m=m||this.local.dateFormat,t=t||{};var a=t.shortYearCutoff||this.shortYearCutoff;a=typeof a!="string"?a:this.today().year()%100+parseInt(a,10);for(var i=t.dayNamesShort||this.local.dayNamesShort,r=t.dayNames||this.local.dayNames,n=t.parseMonth||this.local.parseMonth,d=t.monthNumbers||this.local.monthNumbers,s=t.monthNamesShort||this.local.monthNamesShort,o=t.monthNames||this.local.monthNames,y=-1,g=-1,b=-1,v=-1,_=-1,u=!1,T=!1,c=function(z,P){for(var I=1;M+I<m.length&&m.charAt(M+I)===z;)I++;return M+=I-1,Math.floor(I/(P||1))>1},A=function(z,P){var I=c(z,P),U=[2,3,I?4:2,I?4:2,10,11,20]["oyYJ@!".indexOf(z)+1],O=new RegExp("^-?\\d{1,"+U+"}"),G=x.substring(S).match(O);if(!G)throw(l.local.missingNumberAt||l.regionalOptions[""].missingNumberAt).replace(/\{0\}/,S);return S+=G[0].length,parseInt(G[0],10)},k=this,p=function(){if(typeof d=="function"){c("m");var z=d.call(k,x.substring(S));return S+=z.length,z}return A("m")},w=function(z,P,I,U){for(var O=c(z,U)?I:P,G=0;G<O.length;G++)if(x.substr(S,O[G].length).toLowerCase()===O[G].toLowerCase())return S+=O[G].length,G+k.minMonth;throw(l.local.unknownNameAt||l.regionalOptions[""].unknownNameAt).replace(/\{0\}/,S)},h=function(){if(typeof o=="function"){var z=c("M")?o.call(k,x.substring(S)):s.call(k,x.substring(S));return S+=z.length,z}return w("M",s,o)},D=function(){if(x.charAt(S)!==m.charAt(M))throw(l.local.unexpectedLiteralAt||l.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,S);S++},S=0,M=0;M<m.length;M++)if(T)m.charAt(M)==="'"&&!c("'")?T=!1:D();else switch(m.charAt(M)){case"d":v=A("d");break;case"D":w("D",i,r);break;case"o":_=A("o");break;case"w":A("w");break;case"m":b=p();break;case"M":b=h();break;case"y":var L=M;u=!c("y",2),M=L,g=A("y",2);break;case"Y":g=A("Y",2);break;case"J":y=A("J")+.5,x.charAt(S)==="."&&(S++,A("J"));break;case"@":y=A("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":y=A("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":S=x.length;break;case"'":c("'")?D():T=!0;break;default:D()}if(S<x.length)throw l.local.unexpectedText||l.regionalOptions[""].unexpectedText;if(g===-1?g=this.today().year():g<100&&u&&(g+=a===-1?1900:this.today().year()-this.today().year()%100-(g<=a?0:100)),typeof b=="string"&&(b=n.call(this,g,b)),_>-1){b=1,v=_;for(var R=this.daysInMonth(g,b);v>R;R=this.daysInMonth(g,b))b++,v-=R}return y>-1?this.fromJD(y):this.newDate(g,b,v)},determineDate:function(m,x,t,a,i){t&&typeof t!="object"&&(i=a,a=t,t=null),typeof a!="string"&&(i=a,a="");var r=this,n=function(d){try{return r.parseDate(a,d,i)}catch{}d=d.toLowerCase();for(var s=(d.match(/^c/)&&t?t.newDate():null)||r.today(),o=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,y=o.exec(d);y;)s.add(parseInt(y[1],10),y[2]||"d"),y=o.exec(d);return s};return x=x?x.newDate():null,m=m==null?x:typeof m=="string"?n(m):typeof m=="number"?isNaN(m)||m===1/0||m===-1/0?x:r.today().add(m,"d"):r.newDate(m),m}})},{"./main":347,"object-assign":247}],349:[function(e,B,V){B.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},{}],350:[function(e,B,V){var f=e("./arrow_paths"),l=e("../../plots/font_attributes"),m=e("../../plots/cartesian/constants"),x=e("../../plot_api/plot_template").templatedArray;e("../../constants/axis_placeable_objects"),B.exports=x("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:l({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:f.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:f.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",m.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",m.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",m.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",m.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:l({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},{"../../constants/axis_placeable_objects":484,"../../plot_api/plot_template":555,"../../plots/cartesian/constants":573,"../../plots/font_attributes":594,"./arrow_paths":349}],351:[function(e,B,V){var f=e("../../lib"),l=e("../../plots/cartesian/axes"),m=e("./draw").draw;B.exports=function(i){var r=i._fullLayout,n=f.filterVisible(r.annotations);if(n.length&&i._fullData.length)return f.syncOrAsync([m,x],i)};function x(a){var i=a._fullLayout;f.filterVisible(i.annotations).forEach(function(r){var n=l.getFromId(a,r.xref),d=l.getFromId(a,r.yref),s=l.getRefType(r.xref),o=l.getRefType(r.yref);r._extremes={},s==="range"&&t(r,n),o==="range"&&t(r,d)})}function t(a,i){var r=i._id,n=r.charAt(0),d=a[n],s=a["a"+n],o=a[n+"ref"],y=a["a"+n+"ref"],g=a["_"+n+"padplus"],b=a["_"+n+"padminus"],v={x:1,y:-1}[n]*a[n+"shift"],_=3*a.arrowsize*a.arrowwidth||0,u=_+v,T=_-v,c=3*a.startarrowsize*a.arrowwidth||0,A=c+v,k=c-v,p;if(y===o){var w=l.findExtremes(i,[i.r2c(d)],{ppadplus:u,ppadminus:T}),h=l.findExtremes(i,[i.r2c(s)],{ppadplus:Math.max(g,A),ppadminus:Math.max(b,k)});p={min:[w.min[0],h.min[0]],max:[w.max[0],h.max[0]]}}else A=s?A+s:A,k=s?k-s:k,p=l.findExtremes(i,[i.r2c(d)],{ppadplus:Math.max(g,u,A),ppadminus:Math.max(b,T,k)});a._extremes[r]=p}},{"../../lib":515,"../../plots/cartesian/axes":566,"./draw":356}],352:[function(e,B,V){var f=e("../../lib"),l=e("../../registry"),m=e("../../plot_api/plot_template").arrayEditor;B.exports={hasClickToShow:x,onClick:t};function x(r,n){var d=a(r,n);return d.on.length>0||d.explicitOff.length>0}function t(r,n){var d=a(r,n),s=d.on,o=d.off.concat(d.explicitOff),y={},g=r._fullLayout.annotations,b,v;if(!!(s.length||o.length)){for(b=0;b<s.length;b++)v=m(r.layout,"annotations",g[s[b]]),v.modifyItem("visible",!0),f.extendFlat(y,v.getUpdateObj());for(b=0;b<o.length;b++)v=m(r.layout,"annotations",g[o[b]]),v.modifyItem("visible",!1),f.extendFlat(y,v.getUpdateObj());return l.call("update",r,{},y)}}function a(r,n){var d=r._fullLayout.annotations,s=[],o=[],y=[],g=(n||[]).length,b,v,_,u,T,c,A,k;for(b=0;b<d.length;b++)if(_=d[b],u=_.clicktoshow,u){for(v=0;v<g;v++)if(T=n[v],c=T.xaxis,A=T.yaxis,c._id===_.xref&&A._id===_.yref&&c.d2r(T.x)===i(_._xclick,c)&&A.d2r(T.y)===i(_._yclick,A)){_.visible?u==="onout"?k=o:k=y:k=s,k.push(b);break}v===g&&_.visible&&u==="onout"&&o.push(b)}return{on:s,off:o,explicitOff:y}}function i(r,n){return n.type==="log"?n.l2r(r):n.d2r(r)}},{"../../lib":515,"../../plot_api/plot_template":555,"../../registry":647}],353:[function(e,B,V){var f=e("../../lib"),l=e("../color");B.exports=function(x,t,a,i){i("opacity");var r=i("bgcolor"),n=i("bordercolor"),d=l.opacity(n);i("borderpad");var s=i("borderwidth"),o=i("showarrow");i("text",o?" ":a._dfltTitle.annotation),i("textangle"),f.coerceFont(i,"font",a.font),i("width"),i("align");var y=i("height");if(y&&i("valign"),o){var g=i("arrowside"),b,v;g.indexOf("end")!==-1&&(b=i("arrowhead"),v=i("arrowsize")),g.indexOf("start")!==-1&&(i("startarrowhead",b),i("startarrowsize",v)),i("arrowcolor",d?t.bordercolor:l.defaultLine),i("arrowwidth",(d&&s||1)*2),i("standoff"),i("startstandoff")}var _=i("hovertext"),u=a.hoverlabel||{};if(_){var T=i("hoverlabel.bgcolor",u.bgcolor||(l.opacity(r)?l.rgb(r):l.defaultLine)),c=i("hoverlabel.bordercolor",u.bordercolor||l.contrast(T));f.coerceFont(i,"hoverlabel.font",{family:u.font.family,size:u.font.size,color:u.font.color||c})}i("captureevents",!!_)}},{"../../lib":515,"../color":367}],354:[function(e,B,V){var f=e("fast-isnumeric"),l=e("../../lib/to_log_range");B.exports=function(x,t,a,i){t=t||{};var r=a==="log"&&t.type==="linear",n=a==="linear"&&t.type==="log";if(!(r||n))return;var d=x._fullLayout.annotations,s=t._id.charAt(0),o,y;function g(v){var _=o[v],u=null;r?u=l(_,t.range):u=Math.pow(10,_),f(u)||(u=null),i(y+v,u)}for(var b=0;b<d.length;b++)o=d[b],y="annotations["+b+"].",o[s+"ref"]===t._id&&g(s),o["a"+s+"ref"]===t._id&&g("a"+s)}},{"../../lib/to_log_range":543,"fast-isnumeric":190}],355:[function(e,B,V){var f=e("../../lib"),l=e("../../plots/cartesian/axes"),m=e("../../plots/array_container_defaults"),x=e("./common_defaults"),t=e("./attributes");B.exports=function(r,n){m(r,n,{name:"annotations",handleItemDefaults:a})};function a(i,r,n){function d(D,S){return f.coerce(i,r,t,D,S)}var s=d("visible"),o=d("clicktoshow");if(!!(s||o)){x(i,r,n,d);for(var y=r.showarrow,g=["x","y"],b=[-10,-30],v={_fullLayout:n},_=0;_<2;_++){var u=g[_],T=l.coerceRef(i,r,v,u,"","paper");if(T!=="paper"){var c=l.getFromId(v,T);c._annIndices.push(r._index)}if(l.coercePosition(r,v,d,T,u,.5),y){var A="a"+u,k=l.coerceRef(i,r,v,A,"pixel",["pixel","paper"]);k!=="pixel"&&k!==T&&(k=r[A]="pixel");var p=k==="pixel"?b[_]:.4;l.coercePosition(r,v,d,k,A,p)}d(u+"anchor"),d(u+"shift")}if(f.noneOrAll(i,r,["x","y"]),y&&f.noneOrAll(i,r,["ax","ay"]),o){var w=d("xclick"),h=d("yclick");r._xclick=w===void 0?r.x:l.cleanPosition(w,v,r.xref),r._yclick=h===void 0?r.y:l.cleanPosition(h,v,r.yref)}}}},{"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/cartesian/axes":566,"./attributes":350,"./common_defaults":353}],356:[function(e,B,V){var f=e("@plotly/d3"),l=e("../../registry"),m=e("../../plots/plots"),x=e("../../lib"),t=x.strTranslate,a=e("../../plots/cartesian/axes"),i=e("../color"),r=e("../drawing"),n=e("../fx"),d=e("../../lib/svg_text_utils"),s=e("../../lib/setcursor"),o=e("../dragelement"),y=e("../../plot_api/plot_template").arrayEditor,g=e("./draw_arrow_head");B.exports={draw:b,drawOne:v,drawRaw:u};function b(T){var c=T._fullLayout;c._infolayer.selectAll(".annotation").remove();for(var A=0;A<c.annotations.length;A++)c.annotations[A].visible&&v(T,A);return m.previousPromises(T)}function v(T,c){var A=T._fullLayout,k=A.annotations[c]||{},p=a.getFromId(T,k.xref),w=a.getFromId(T,k.yref);p&&p.setScale(),w&&w.setScale(),u(T,k,c,!1,p,w)}function _(T,c,A,k,p){var w=p[A],h=p[A+"ref"],D=A.indexOf("y")!==-1,S=a.getRefType(h)==="domain",M=D?k.h:k.w;return T?S?w+(D?-c:c)/T._length:T.p2r(T.r2p(w)+c):w+(D?-c:c)/M}function u(T,c,A,k,p,w){var h=T._fullLayout,D=T._fullLayout._size,S=T._context.edits,M,L;k?(M="annotation-"+k,L=k+".annotations"):(M="annotation",L="annotations");var R=y(T.layout,L,c),z=R.modifyBase,P=R.modifyItem,I=R.getUpdateObj;h._infolayer.selectAll("."+M+'[data-index="'+A+'"]').remove();var U="clip"+h._uid+"_ann"+A;if(!c._input||c.visible===!1){f.selectAll("#"+U).remove();return}var O={x:{},y:{}},G=+c.textangle||0,$=h._infolayer.append("g").classed(M,!0).attr("data-index",String(A)).style("opacity",c.opacity),tt=$.append("g").classed("annotation-text-g",!0),Z=S[c.showarrow?"annotationTail":"annotationPosition"],X=c.captureevents||S.annotationText||Z;function J(ct){var bt={index:A,annotation:c._input,fullAnnotation:c,event:ct};return k&&(bt.subplotId=k),bt}var st=tt.append("g").style("pointer-events",X?"all":null).call(s,"pointer").on("click",function(){T._dragging=!1,T.emit("plotly_clickannotation",J(f.event))});c.hovertext&&st.on("mouseover",function(){var ct=c.hoverlabel,bt=ct.font,ut=this.getBoundingClientRect(),pt=T.getBoundingClientRect();n.loneHover({x0:ut.left-pt.left,x1:ut.right-pt.left,y:(ut.top+ut.bottom)/2-pt.top,text:c.hovertext,color:ct.bgcolor,borderColor:ct.bordercolor,fontFamily:bt.family,fontSize:bt.size,fontColor:bt.color},{container:h._hoverlayer.node(),outerContainer:h._paper.node(),gd:T})}).on("mouseout",function(){n.loneUnhover(h._hoverlayer.node())});var at=c.borderwidth,lt=c.borderpad,F=at+lt,H=st.append("rect").attr("class","bg").style("stroke-width",at+"px").call(i.stroke,c.bordercolor).call(i.fill,c.bgcolor),et=c.width||c.height,q=h._topclips.selectAll("#"+U).data(et?[0]:[]);q.enter().append("clipPath").classed("annclip",!0).attr("id",U).append("rect"),q.exit().remove();var W=c.font,K=h._meta?x.templateString(c.text,h._meta):c.text,nt=st.append("text").classed("annotation-text",!0).text(K);function it(ct){return ct.call(r.font,W).attr({"text-anchor":{left:"start",right:"end"}[c.align]||"middle"}),d.convertToTspans(ct,T,ot),ct}function ot(){var ct=nt.selectAll("a");if(ct.size()===1&&ct.text()===nt.text()){var bt=st.insert("a",":first-child").attr({"xlink:xlink:href":ct.attr("xlink:href"),"xlink:xlink:show":ct.attr("xlink:show")}).style({cursor:"pointer"});bt.node().appendChild(H.node())}var ut=st.select(".annotation-text-math-group"),pt=!ut.empty(),yt=r.bBox((pt?ut:nt).node()),Tt=yt.width,kt=yt.height,zt=c.width||Tt,Rt=c.height||kt,Gt=Math.round(zt+2*F),wt=Math.round(Rt+2*F);function It(Qe,Ze){return Ze==="auto"&&(Qe<1/3?Ze="left":Qe>2/3?Ze="right":Ze="center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[Ze]}for(var $t=!1,Qt=["x","y"],Nt=0;Nt<Qt.length;Nt++){var Pt=Qt[Nt],Yt=c[Pt+"ref"]||Pt,ve=c["a"+Pt+"ref"],Re={x:p,y:w}[Pt],ir=(G+(Pt==="x"?0:-90))*Math.PI/180,Ie=Gt*Math.cos(ir),Be=wt*Math.sin(ir),Ye=Math.abs(Ie)+Math.abs(Be),ze=c[Pt+"anchor"],Ee=c[Pt+"shift"]*(Pt==="x"?1:-1),Wt=O[Pt],ee,Xt,St,Vt,Zt,qt=a.getRefType(Yt);if(Re&&qt!=="domain"){var Te=Re.r2fraction(c[Pt]);(Te<0||Te>1)&&(ve===Yt?(Te=Re.r2fraction(c["a"+Pt]),(Te<0||Te>1)&&($t=!0)):$t=!0),ee=Re._offset+Re.r2p(c[Pt]),Vt=.5}else{var me=qt==="domain";Pt==="x"?(St=c[Pt],ee=me?Re._offset+Re._length*St:ee=D.l+D.w*St):(St=1-c[Pt],ee=me?Re._offset+Re._length*St:ee=D.t+D.h*St),Vt=c.showarrow?.5:St}if(c.showarrow){Wt.head=ee;var Ne=c["a"+Pt];if(Zt=Ie*It(.5,c.xanchor)-Be*It(.5,c.yanchor),ve===Yt){var Ke=a.getRefType(ve);Ke==="domain"?(Pt==="y"&&(Ne=1-Ne),Wt.tail=Re._offset+Re._length*Ne):Ke==="paper"?Pt==="y"?(Ne=1-Ne,Wt.tail=D.t+D.h*Ne):Wt.tail=D.l+D.w*Ne:Wt.tail=Re._offset+Re.r2p(Ne),Xt=Zt}else Wt.tail=ee+Ne,Xt=Zt+Ne;Wt.text=Wt.tail+Zt;var He=h[Pt==="x"?"width":"height"];if(Yt==="paper"&&(Wt.head=x.constrain(Wt.head,1,He-1)),ve==="pixel"){var Xe=-Math.max(Wt.tail-3,Wt.text),er=Math.min(Wt.tail+3,Wt.text)-He;Xe>0?(Wt.tail+=Xe,Wt.text+=Xe):er>0&&(Wt.tail-=er,Wt.text-=er)}Wt.tail+=Ee,Wt.head+=Ee}else Zt=Ye*It(Vt,ze),Xt=Zt,Wt.text=ee+Zt;Wt.text+=Ee,Zt+=Ee,Xt+=Ee,c["_"+Pt+"padplus"]=Ye/2+Xt,c["_"+Pt+"padminus"]=Ye/2-Xt,c["_"+Pt+"size"]=Ye,c["_"+Pt+"shift"]=Zt}if($t){st.remove();return}var We=0,hr=0;if(c.align!=="left"&&(We=(zt-Tt)*(c.align==="center"?.5:1)),c.valign!=="top"&&(hr=(Rt-kt)*(c.valign==="middle"?.5:1)),pt)ut.select("svg").attr({x:F+We-1,y:F+hr}).call(r.setClipUrl,et?U:null,T);else{var Wr=F+hr-yt.top,dn=F+We-yt.left;nt.call(d.positionText,dn,Wr).call(r.setClipUrl,et?U:null,T)}q.select("rect").call(r.setRect,F,F,zt,Rt),H.call(r.setRect,at/2,at/2,Gt-at,wt-at),st.call(r.setTranslate,Math.round(O.x.text-Gt/2),Math.round(O.y.text-wt/2)),tt.attr({transform:"rotate("+G+","+O.x.text+","+O.y.text+")"});var Qr=function(Qe,Ze){$.selectAll(".annotation-arrow-g").remove();var Ve=O.x.head,_r=O.y.head,oe=O.x.tail+Qe,Ht=O.y.tail+Ze,te=O.x.text+Qe,ne=O.y.text+Ze,_e=x.rotationXYMatrix(G,te,ne),Pe=x.apply2DTransform(_e),Et=x.apply2DTransform2(_e),Mt=+H.attr("width"),se=+H.attr("height"),ce=te-.5*Mt,de=ce+Mt,Se=ne-.5*se,ye=Se+se,Ae=[[ce,Se,ce,ye],[ce,ye,de,ye],[de,ye,de,Se],[de,Se,ce,Se]].map(Et);if(!Ae.reduce(function(ae,Le){return ae^!!x.segmentsIntersect(Ve,_r,Ve+1e6,_r+1e6,Le[0],Le[1],Le[2],Le[3])},!1)){Ae.forEach(function(ae){var Le=x.segmentsIntersect(oe,Ht,Ve,_r,ae[0],ae[1],ae[2],ae[3]);Le&&(oe=Le.x,Ht=Le.y)});var Ge=c.arrowwidth,sr=c.arrowcolor,Er=c.arrowside,kr=$.append("g").style({opacity:i.opacity(sr)}).classed("annotation-arrow-g",!0),Mr=kr.append("path").attr("d","M"+oe+","+Ht+"L"+Ve+","+_r).style("stroke-width",Ge+"px").call(i.stroke,i.rgb(sr));if(g(Mr,Er,c),S.annotationPosition&&Mr.node().parentNode&&!k){var Gr=Ve,ar=_r;if(c.standoff){var xr=Math.sqrt(Math.pow(Ve-oe,2)+Math.pow(_r-Ht,2));Gr+=c.standoff*(oe-Ve)/xr,ar+=c.standoff*(Ht-_r)/xr}var Ir=kr.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(oe-Gr)+","+(Ht-ar),transform:t(Gr,ar)}).style("stroke-width",Ge+6+"px").call(i.stroke,"rgba(0,0,0,0)").call(i.fill,"rgba(0,0,0,0)"),Hr,Cr;o.init({element:Ir.node(),gd:T,prepFn:function(){var ae=r.getTranslate(st);Hr=ae.x,Cr=ae.y,p&&p.autorange&&z(p._name+".autorange",!0),w&&w.autorange&&z(w._name+".autorange",!0)},moveFn:function(ae,Le){var $e=Pe(Hr,Cr),or=$e[0]+ae,Dr=$e[1]+Le;st.call(r.setTranslate,or,Dr),P("x",_(p,ae,"x",D,c)),P("y",_(w,Le,"y",D,c)),c.axref===c.xref&&P("ax",_(p,ae,"ax",D,c)),c.ayref===c.yref&&P("ay",_(w,Le,"ay",D,c)),kr.attr("transform",t(ae,Le)),tt.attr({transform:"rotate("+G+","+or+","+Dr+")"})},doneFn:function(){l.call("_guiRelayout",T,I());var ae=document.querySelector(".js-notes-box-panel");ae&&ae.redraw(ae.selectedObj)}})}}};if(c.showarrow&&Qr(0,0),Z){var le;o.init({element:st.node(),gd:T,prepFn:function(){le=tt.attr("transform")},moveFn:function(Qe,Ze){var Ve="pointer";if(c.showarrow)c.axref===c.xref?P("ax",_(p,Qe,"ax",D,c)):P("ax",c.ax+Qe),c.ayref===c.yref?P("ay",_(w,Ze,"ay",D.w,c)):P("ay",c.ay+Ze),Qr(Qe,Ze);else{if(k)return;var _r,oe;if(p)_r=_(p,Qe,"x",D,c);else{var Ht=c._xsize/D.w,te=c.x+(c._xshift-c.xshift)/D.w-Ht/2;_r=o.align(te+Qe/D.w,Ht,0,1,c.xanchor)}if(w)oe=_(w,Ze,"y",D,c);else{var ne=c._ysize/D.h,_e=c.y-(c._yshift+c.yshift)/D.h-ne/2;oe=o.align(_e-Ze/D.h,ne,0,1,c.yanchor)}P("x",_r),P("y",oe),(!p||!w)&&(Ve=o.getCursor(p?.5:_r,w?.5:oe,c.xanchor,c.yanchor))}tt.attr({transform:t(Qe,Ze)+le}),s(st,Ve)},clickFn:function(Qe,Ze){c.captureevents&&T.emit("plotly_clickannotation",J(Ze))},doneFn:function(){s(st),l.call("_guiRelayout",T,I());var Qe=document.querySelector(".js-notes-box-panel");Qe&&Qe.redraw(Qe.selectedObj)}})}}S.annotationText?nt.call(d.makeEditable,{delegate:st,gd:T}).call(it).on("edit",function(ct){c.text=ct,this.call(it),P("text",ct),p&&p.autorange&&z(p._name+".autorange",!0),w&&w.autorange&&z(w._name+".autorange",!0),l.call("_guiRelayout",T,I())}):nt.call(it)}},{"../../lib":515,"../../lib/setcursor":536,"../../lib/svg_text_utils":541,"../../plot_api/plot_template":555,"../../plots/cartesian/axes":566,"../../plots/plots":628,"../../registry":647,"../color":367,"../dragelement":386,"../drawing":389,"../fx":407,"./draw_arrow_head":357,"@plotly/d3":58}],357:[function(e,B,V){var f=e("@plotly/d3"),l=e("../color"),m=e("./arrow_paths"),x=e("../../lib"),t=x.strScale,a=x.strRotate,i=x.strTranslate;B.exports=function(n,d,s){var o=n.node(),y=m[s.arrowhead||0],g=m[s.startarrowhead||0],b=(s.arrowwidth||1)*(s.arrowsize||1),v=(s.arrowwidth||1)*(s.startarrowsize||1),_=d.indexOf("start")>=0,u=d.indexOf("end")>=0,T=y.backoff*b+s.standoff,c=g.backoff*v+s.startstandoff,A,k,p,w;if(o.nodeName==="line"){A={x:+n.attr("x1"),y:+n.attr("y1")},k={x:+n.attr("x2"),y:+n.attr("y2")};var h=A.x-k.x,D=A.y-k.y;if(p=Math.atan2(D,h),w=p+Math.PI,T&&c&&T+c>Math.sqrt(h*h+D*D)){tt();return}if(T){if(T*T>h*h+D*D){tt();return}var S=T*Math.cos(p),M=T*Math.sin(p);k.x+=S,k.y+=M,n.attr({x2:k.x,y2:k.y})}if(c){if(c*c>h*h+D*D){tt();return}var L=c*Math.cos(p),R=c*Math.sin(p);A.x-=L,A.y-=R,n.attr({x1:A.x,y1:A.y})}}else if(o.nodeName==="path"){var z=o.getTotalLength(),P="";if(z<T+c){tt();return}var I=o.getPointAtLength(0),U=o.getPointAtLength(.1);p=Math.atan2(I.y-U.y,I.x-U.x),A=o.getPointAtLength(Math.min(c,z)),P="0px,"+c+"px,";var O=o.getPointAtLength(z),G=o.getPointAtLength(z-.1);w=Math.atan2(O.y-G.y,O.x-G.x),k=o.getPointAtLength(Math.max(0,z-T));var $=P?c+T:T;P+=z-$+"px,"+z+"px",n.style("stroke-dasharray",P)}function tt(){n.style("stroke-dasharray","0px,100px")}function Z(X,J,st,at){!X.path||(X.noRotate&&(st=0),f.select(o.parentNode).append("path").attr({class:n.attr("class"),d:X.path,transform:i(J.x,J.y)+a(st*180/Math.PI)+t(at)}).style({fill:l.rgb(s.arrowcolor),"stroke-width":0}))}_&&Z(g,A,p,v),u&&Z(y,k,w,b)}},{"../../lib":515,"../color":367,"./arrow_paths":349,"@plotly/d3":58}],358:[function(e,B,V){var f=e("./draw"),l=e("./click");B.exports={moduleType:"component",name:"annotations",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("annotations"),calcAutorange:e("./calc_autorange"),draw:f.draw,drawOne:f.drawOne,drawRaw:f.drawRaw,hasClickToShow:l.hasClickToShow,onClick:l.onClick,convertCoords:e("./convert_coords")}},{"../../plots/cartesian/include_components":577,"./attributes":350,"./calc_autorange":351,"./click":352,"./convert_coords":354,"./defaults":355,"./draw":356}],359:[function(e,B,V){var f=e("../annotations/attributes"),l=e("../../plot_api/edit_types").overrideAll,m=e("../../plot_api/plot_template").templatedArray;B.exports=l(m("annotation",{visible:f.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:f.xanchor,xshift:f.xshift,yanchor:f.yanchor,yshift:f.yshift,text:f.text,textangle:f.textangle,font:f.font,width:f.width,height:f.height,opacity:f.opacity,align:f.align,valign:f.valign,bgcolor:f.bgcolor,bordercolor:f.bordercolor,borderpad:f.borderpad,borderwidth:f.borderwidth,showarrow:f.showarrow,arrowcolor:f.arrowcolor,arrowhead:f.arrowhead,startarrowhead:f.startarrowhead,arrowside:f.arrowside,arrowsize:f.arrowsize,startarrowsize:f.startarrowsize,arrowwidth:f.arrowwidth,standoff:f.standoff,startstandoff:f.startstandoff,hovertext:f.hovertext,hoverlabel:f.hoverlabel,captureevents:f.captureevents}),"calc","from-root")},{"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../annotations/attributes":350}],360:[function(e,B,V){var f=e("../../lib"),l=e("../../plots/cartesian/axes");B.exports=function(t){for(var a=t.fullSceneLayout,i=a.annotations,r=0;r<i.length;r++)m(i[r],t);t.fullLayout._infolayer.selectAll(".annotation-"+t.id).remove()};function m(x,t){var a=t.fullSceneLayout,i=a.domain,r=t.fullLayout._size,n={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};x._xa={},f.extendFlat(x._xa,n),l.setConvert(x._xa),x._xa._offset=r.l+i.x[0]*r.w,x._xa.l2p=function(){return .5*(1+x._pdata[0]/x._pdata[3])*r.w*(i.x[1]-i.x[0])},x._ya={},f.extendFlat(x._ya,n),l.setConvert(x._ya),x._ya._offset=r.t+(1-i.y[1])*r.h,x._ya.l2p=function(){return .5*(1-x._pdata[1]/x._pdata[3])*r.h*(i.y[1]-i.y[0])}}},{"../../lib":515,"../../plots/cartesian/axes":566}],361:[function(e,B,V){var f=e("../../lib"),l=e("../../plots/cartesian/axes"),m=e("../../plots/array_container_defaults"),x=e("../annotations/common_defaults"),t=e("./attributes");B.exports=function(r,n,d){m(r,n,{name:"annotations",handleItemDefaults:a,fullLayout:d.fullLayout})};function a(i,r,n,d){function s(g,b){return f.coerce(i,r,t,g,b)}function o(g){var b=g+"axis",v={_fullLayout:{}};return v._fullLayout[b]=n[b],l.coercePosition(r,v,s,g,g,.5)}var y=s("visible");!y||(x(i,r,d.fullLayout,s),o("x"),o("y"),o("z"),f.noneOrAll(i,r,["x","y","z"]),r.xref="x",r.yref="y",r.zref="z",s("xanchor"),s("yanchor"),s("xshift"),s("yshift"),r.showarrow&&(r.axref="pixel",r.ayref="pixel",s("ax",-10),s("ay",-30),f.noneOrAll(i,r,["ax","ay"])))}},{"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/cartesian/axes":566,"../annotations/common_defaults":353,"./attributes":359}],362:[function(e,B,V){var f=e("../annotations/draw").drawRaw,l=e("../../plots/gl3d/project"),m=["x","y","z"];B.exports=function(t){for(var a=t.fullSceneLayout,i=t.dataScale,r=a.annotations,n=0;n<r.length;n++){for(var d=r[n],s=!1,o=0;o<3;o++){var y=m[o],g=d[y],b=a[y+"axis"],v=b.r2fraction(g);if(v<0||v>1){s=!0;break}}s?t.fullLayout._infolayer.select(".annotation-"+t.id+'[data-index="'+n+'"]').remove():(d._pdata=l(t.glplot.cameraParams,[a.xaxis.r2l(d.x)*i[0],a.yaxis.r2l(d.y)*i[1],a.zaxis.r2l(d.z)*i[2]]),f(t.graphDiv,d,n,t.id,d._xa,d._ya))}}},{"../../plots/gl3d/project":616,"../annotations/draw":356}],363:[function(e,B,V){var f=e("../../registry"),l=e("../../lib");B.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:e("./attributes")}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),includeBasePlot:m,convert:e("./convert"),draw:e("./draw")};function m(x,t){var a=f.subplotsRegistry.gl3d;if(!!a)for(var i=a.attrRegex,r=Object.keys(x),n=0;n<r.length;n++){var d=r[n];i.test(d)&&(x[d].annotations||[]).length&&(l.pushUnique(t._basePlotModules,a),l.pushUnique(t._subplots.gl3d,d))}}},{"../../lib":515,"../../registry":647,"./attributes":359,"./convert":360,"./defaults":361,"./draw":362}],364:[function(e,B,V){B.exports=e("world-calendars/dist/main"),e("world-calendars/dist/plus"),e("world-calendars/dist/calendars/chinese"),e("world-calendars/dist/calendars/coptic"),e("world-calendars/dist/calendars/discworld"),e("world-calendars/dist/calendars/ethiopian"),e("world-calendars/dist/calendars/hebrew"),e("world-calendars/dist/calendars/islamic"),e("world-calendars/dist/calendars/julian"),e("world-calendars/dist/calendars/mayan"),e("world-calendars/dist/calendars/nanakshahi"),e("world-calendars/dist/calendars/nepali"),e("world-calendars/dist/calendars/persian"),e("world-calendars/dist/calendars/taiwan"),e("world-calendars/dist/calendars/thai"),e("world-calendars/dist/calendars/ummalqura")},{"world-calendars/dist/calendars/chinese":333,"world-calendars/dist/calendars/coptic":334,"world-calendars/dist/calendars/discworld":335,"world-calendars/dist/calendars/ethiopian":336,"world-calendars/dist/calendars/hebrew":337,"world-calendars/dist/calendars/islamic":338,"world-calendars/dist/calendars/julian":339,"world-calendars/dist/calendars/mayan":340,"world-calendars/dist/calendars/nanakshahi":341,"world-calendars/dist/calendars/nepali":342,"world-calendars/dist/calendars/persian":343,"world-calendars/dist/calendars/taiwan":344,"world-calendars/dist/calendars/thai":345,"world-calendars/dist/calendars/ummalqura":346,"world-calendars/dist/main":347,"world-calendars/dist/plus":348}],365:[function(e,B,V){var f=e("./calendars"),l=e("../../lib"),m=e("../../constants/numerical"),x=m.EPOCHJD,t=m.ONEDAY,a={valType:"enumerated",values:l.sortObjectKeys(f.calendars),editType:"calc",dflt:"gregorian"},i=function(p,w,h,D){var S={};return S[h]=a,l.coerce(p,w,S,h,D)},r=function(p,w,h,D){for(var S=0;S<h.length;S++)i(p,w,h[S]+"calendar",D.calendar)},n={chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},d={chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},s={chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},o="##",y={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:o,w:o,c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}};function g(p,w,h){for(var D=Math.floor((w+.05)/t)+x,S=v(h).fromJD(D),M=0,L,R,z,P,I;(M=p.indexOf("%",M))!==-1;)L=p.charAt(M+1),L==="0"||L==="-"||L==="_"?(z=3,R=p.charAt(M+2),L==="_"&&(L="-")):(R=L,L="0",z=2),P=y[R],P?(P===o?I=o:I=S.formatDate(P[L]),p=p.substr(0,M)+I+p.substr(M+z),M+=I.length):M+=z;return p}var b={};function v(p){var w=b[p];return w||(w=b[p]=f.instance(p),w)}function _(p){return l.extendFlat({},a,{description:p})}function u(p){return"Sets the calendar system to use with `"+p+"` date data."}var T={xcalendar:_(u("x"))},c=l.extendFlat({},T,{ycalendar:_(u("y"))}),A=l.extendFlat({},c,{zcalendar:_(u("z"))}),k=_(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));B.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:c,bar:c,box:c,heatmap:c,contour:c,histogram:c,histogram2d:c,histogram2dcontour:c,scatter3d:A,surface:A,mesh3d:A,scattergl:c,ohlc:T,candlestick:T},layout:{calendar:_(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:k},yaxis:{calendar:k},scene:{xaxis:{calendar:k},yaxis:{calendar:k},zaxis:{calendar:k}},polar:{radialaxis:{calendar:k}}},transforms:{filter:{valuecalendar:_(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:_(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:a,handleDefaults:i,handleTraceDefaults:r,CANONICAL_SUNDAY:d,CANONICAL_TICK:n,DFLTRANGE:s,getCal:v,worldCalFmt:g}},{"../../constants/numerical":491,"../../lib":515,"./calendars":364}],366:[function(e,B,V){V.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],V.defaultLine="#444",V.lightLine="#eee",V.background="#fff",V.borderLine="#BEC8D9",V.lightFraction=100*(14-4)/(15-4)},{}],367:[function(e,B,V){var f=e("tinycolor2"),l=e("fast-isnumeric"),m=e("../../lib/array").isTypedArray,x=B.exports={},t=e("./attributes");x.defaults=t.defaults;var a=x.defaultLine=t.defaultLine;x.lightLine=t.lightLine;var i=x.background=t.background;x.tinyRGB=function(n){var d=n.toRgb();return"rgb("+Math.round(d.r)+", "+Math.round(d.g)+", "+Math.round(d.b)+")"},x.rgb=function(n){return x.tinyRGB(f(n))},x.opacity=function(n){return n?f(n).getAlpha():0},x.addOpacity=function(n,d){var s=f(n).toRgb();return"rgba("+Math.round(s.r)+", "+Math.round(s.g)+", "+Math.round(s.b)+", "+d+")"},x.combine=function(n,d){var s=f(n).toRgb();if(s.a===1)return f(n).toRgbString();var o=f(d||i).toRgb(),y=o.a===1?o:{r:255*(1-o.a)+o.r*o.a,g:255*(1-o.a)+o.g*o.a,b:255*(1-o.a)+o.b*o.a},g={r:y.r*(1-s.a)+s.r*s.a,g:y.g*(1-s.a)+s.g*s.a,b:y.b*(1-s.a)+s.b*s.a};return f(g).toRgbString()},x.contrast=function(n,d,s){var o=f(n);o.getAlpha()!==1&&(o=f(x.combine(n,i)));var y=o.isDark()?d?o.lighten(d):i:s?o.darken(s):a;return y.toString()},x.stroke=function(n,d){var s=f(d);n.style({stroke:x.tinyRGB(s),"stroke-opacity":s.getAlpha()})},x.fill=function(n,d){var s=f(d);n.style({fill:x.tinyRGB(s),"fill-opacity":s.getAlpha()})},x.clean=function(n){if(!(!n||typeof n!="object")){var d=Object.keys(n),s,o,y,g;for(s=0;s<d.length;s++)if(y=d[s],g=n[y],y.substr(y.length-5)==="color")if(Array.isArray(g))for(o=0;o<g.length;o++)g[o]=r(g[o]);else n[y]=r(g);else if(y.substr(y.length-10)==="colorscale"&&Array.isArray(g))for(o=0;o<g.length;o++)Array.isArray(g[o])&&(g[o][1]=r(g[o][1]));else if(Array.isArray(g)){var b=g[0];if(!Array.isArray(b)&&b&&typeof b=="object")for(o=0;o<g.length;o++)x.clean(g[o])}else g&&typeof g=="object"&&!m(g)&&x.clean(g)}};function r(n){if(l(n)||typeof n!="string")return n;var d=n.trim();if(d.substr(0,3)!=="rgb")return n;var s=d.match(/^rgba?\s*\(([^()]*)\)$/);if(!s)return n;var o=s[1].trim().split(/\s*[\s,]\s*/),y=d.charAt(3)==="a"&&o.length===4;if(!y&&o.length!==3)return n;for(var g=0;g<o.length;g++){if(!o[g].length||(o[g]=Number(o[g]),!(o[g]>=0)))return n;if(g===3)o[g]>1&&(o[g]=1);else if(o[g]>=1)return n}var b=Math.round(o[0]*255)+", "+Math.round(o[1]*255)+", "+Math.round(o[2]*255);return y?"rgba("+b+", "+o[3]+")":"rgb("+b+")"}},{"../../lib/array":497,"./attributes":366,"fast-isnumeric":190,tinycolor2:313}],368:[function(e,B,V){var f=e("../../plots/cartesian/layout_attributes"),l=e("../../plots/font_attributes"),m=e("../../lib/extend").extendFlat,x=e("../../plot_api/edit_types").overrideAll;B.exports=x({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:f.linecolor,outlinewidth:f.linewidth,bordercolor:f.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:f.tickmode,nticks:f.nticks,tick0:f.tick0,dtick:f.dtick,tickvals:f.tickvals,ticktext:f.ticktext,ticks:m({},f.ticks,{dflt:""}),ticklabeloverflow:m({},f.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:f.ticklen,tickwidth:f.tickwidth,tickcolor:f.tickcolor,ticklabelstep:f.ticklabelstep,showticklabels:f.showticklabels,tickfont:l({}),tickangle:f.tickangle,tickformat:f.tickformat,tickformatstops:f.tickformatstops,tickprefix:f.tickprefix,showtickprefix:f.showtickprefix,ticksuffix:f.ticksuffix,showticksuffix:f.showticksuffix,separatethousands:f.separatethousands,exponentformat:f.exponentformat,minexponent:f.minexponent,showexponent:f.showexponent,title:{text:{valType:"string"},font:l({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:l({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},{"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/cartesian/layout_attributes":579,"../../plots/font_attributes":594}],369:[function(e,B,V){B.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],370:[function(e,B,V){var f=e("../../lib"),l=e("../../plot_api/plot_template"),m=e("../../plots/cartesian/tick_value_defaults"),x=e("../../plots/cartesian/tick_mark_defaults"),t=e("../../plots/cartesian/tick_label_defaults"),a=e("../../plots/cartesian/prefix_suffix_defaults"),i=e("./attributes");B.exports=function(n,d,s){var o=l.newContainer(d,"colorbar"),y=n.colorbar||{};function g(S,M){return f.coerce(y,o,i,S,M)}var b=s.margin||{t:0,b:0,l:0,r:0},v=s.width-b.l-b.r,_=s.height-b.t-b.b,u=g("orientation"),T=u==="v",c=g("thicknessmode");g("thickness",c==="fraction"?30/(T?v:_):30);var A=g("lenmode");g("len",A==="fraction"?1:T?_:v),g("x",T?1.02:.5),g("xanchor",T?"left":"center"),g("xpad"),g("y",T?.5:1.02),g("yanchor",T?"middle":"bottom"),g("ypad"),f.noneOrAll(y,o,["x","y"]),g("outlinecolor"),g("outlinewidth"),g("bordercolor"),g("borderwidth"),g("bgcolor");var k=f.coerce(y,o,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:T?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");g("ticklabeloverflow",k.indexOf("inside")!==-1?"hide past domain":"hide past div"),m(y,o,g,"linear");var p=s.font,w={outerTicks:!1,font:p};k.indexOf("inside")!==-1&&(w.bgColor="black"),a(y,o,g,"linear",w),t(y,o,g,"linear",w),x(y,o,g,"linear",w),g("title.text",s._dfltTitle.colorbar);var h=o.tickfont,D=f.extendFlat({},h,{color:p.color,size:f.bigFont(h.size)});f.coerceFont(g,"title.font",D),g("title.side",T?"top":"right")}},{"../../lib":515,"../../plot_api/plot_template":555,"../../plots/cartesian/prefix_suffix_defaults":583,"../../plots/cartesian/tick_label_defaults":587,"../../plots/cartesian/tick_mark_defaults":588,"../../plots/cartesian/tick_value_defaults":589,"./attributes":368}],371:[function(e,B,V){var f=e("@plotly/d3"),l=e("tinycolor2"),m=e("../../plots/plots"),x=e("../../registry"),t=e("../../plots/cartesian/axes"),a=e("../dragelement"),i=e("../../lib"),r=i.strTranslate,n=e("../../lib/extend").extendFlat,d=e("../../lib/setcursor"),s=e("../drawing"),o=e("../color"),y=e("../titles"),g=e("../../lib/svg_text_utils"),b=e("../colorscale/helpers").flipScale,v=e("../../plots/cartesian/axis_defaults"),_=e("../../plots/cartesian/position_defaults"),u=e("../../plots/cartesian/layout_attributes"),T=e("../../constants/alignment"),c=T.LINE_SPACING,A=T.FROM_TL,k=T.FROM_BR,p=e("./constants").cn;function w(R){var z=R._fullLayout,P=z._infolayer.selectAll("g."+p.colorbar).data(h(R),function(I){return I._id});P.enter().append("g").attr("class",function(I){return I._id}).classed(p.colorbar,!0),P.each(function(I){var U=f.select(this);i.ensureSingle(U,"rect",p.cbbg),i.ensureSingle(U,"g",p.cbfills),i.ensureSingle(U,"g",p.cblines),i.ensureSingle(U,"g",p.cbaxis,function(G){G.classed(p.crisp,!0)}),i.ensureSingle(U,"g",p.cbtitleunshift,function(G){G.append("g").classed(p.cbtitle,!0)}),i.ensureSingle(U,"rect",p.cboutline);var O=D(U,I,R);O&&O.then&&(R._promises||[]).push(O),R._context.edits.colorbarPosition&&S(U,I,R)}),P.exit().each(function(I){m.autoMargin(R,I._id)}).remove(),P.order()}function h(R){var z=R._fullLayout,P=R.calcdata,I=[],U,O,G,$;function tt(W){return n(W,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function Z(){typeof $.calc=="function"?$.calc(R,G,U):(U._fillgradient=O.reversescale?b(O.colorscale):O.colorscale,U._zrange=[O[$.min],O[$.max]])}for(var X=0;X<P.length;X++){var J=P[X];G=J[0].trace;var st=G._module.colorbar;if(G.visible===!0&&st)for(var at=Array.isArray(st),lt=at?st:[st],F=0;F<lt.length;F++){$=lt[F];var H=$.container;O=H?G[H]:G,O&&O.showscale&&(U=tt(O.colorbar),U._id="cb"+G.uid+(at&&H?"-"+H:""),U._traceIndex=G.index,U._propPrefix=(H?H+".":"")+"colorbar.",U._meta=G._meta,Z(),I.push(U))}}for(var et in z._colorAxes)if(O=z[et],O.showscale){var q=z._colorAxes[et];U=tt(O.colorbar),U._id="cb"+et,U._propPrefix=et+".colorbar.",U._meta=z._meta,$={min:"cmin",max:"cmax"},q[0]!=="heatmap"&&(G=q[1],$.calc=G._module.colorbar.calc),Z(),I.push(U)}return I}function D(R,z,P){var I=z.orientation==="v",U=z.len,O=z.lenmode,G=z.thickness,$=z.thicknessmode,tt=z.outlinewidth,Z=z.borderwidth,X=z.bgcolor,J=z.xanchor,st=z.yanchor,at=z.xpad,lt=z.ypad,F=z.x,H=I?z.y:1-z.y,et=P._fullLayout,q=et._size,W=z._fillcolor,K=z._line,nt=z.title,it=nt.side,ot=z._zrange||f.extent((typeof W=="function"?W:K.color).domain()),ct=typeof K.color=="function"?K.color:function(){return K.color},bt=typeof W=="function"?W:function(){return W},ut=z._levels,pt=M(P,z,ot),yt=pt.fill,Tt=pt.line,kt=Math.round(G*($==="fraction"?I?q.w:q.h:1)),zt=kt/(I?q.w:q.h),Rt=Math.round(U*(O==="fraction"?I?q.h:q.w:1)),Gt=Rt/(I?q.h:q.w),wt=Math.round(I?F*q.w+at:H*q.h+lt),It={center:.5,right:1}[J]||0,$t={top:1,middle:.5}[st]||0,Qt=I?F-It*zt:H-$t*zt,Nt=I?H-$t*Gt:F-It*Gt,Pt=Math.round(I?q.h*(1-Nt):q.w*Nt);z._lenFrac=Gt,z._thickFrac=zt,z._uFrac=Qt,z._vFrac=Nt;var Yt=z._axis=L(P,z,ot);Yt.position=zt+(I?F+at/q.w:H+lt/q.h);var ve=["top","bottom"].indexOf(it)!==-1;if(I&&ve&&(Yt.title.side=it,Yt.titlex=F+at/q.w,Yt.titley=Nt+(nt.side==="top"?Gt-lt/q.h:lt/q.h)),!I&&!ve&&(Yt.title.side=it,Yt.titley=H+lt/q.h,Yt.titlex=Nt+at/q.w),K.color&&z.tickmode==="auto"){Yt.tickmode="linear",Yt.tick0=ut.start;var Re=ut.size,ir=i.constrain(Rt/50,4,15)+1,Ie=(ot[1]-ot[0])/((z.nticks||ir)*Re);if(Ie>1){var Be=Math.pow(10,Math.floor(Math.log(Ie)/Math.LN10));Re*=Be*i.roundUp(Ie/Be,[2,5,10]),(Math.abs(ut.start)/ut.size+1e-6)%1<2e-6&&(Yt.tick0=0)}Yt.dtick=Re}Yt.domain=I?[Nt+lt/q.h,Nt+Gt-lt/q.h]:[Nt+at/q.w,Nt+Gt-at/q.w],Yt.setScale(),R.attr("transform",r(Math.round(q.l),Math.round(q.t)));var Ye=R.select("."+p.cbtitleunshift).attr("transform",r(-Math.round(q.l),-Math.round(q.t))),ze=Yt.ticklabelposition,Ee=Yt.title.font.size,Wt=R.select("."+p.cbaxis),ee,Xt=0,St=0;function Vt(Ne,Ke){var He={propContainer:Yt,propName:z._propPrefix+"title",traceIndex:z._traceIndex,_meta:z._meta,placeholder:et._dfltTitle.colorbar,containerGroup:R.select("."+p.cbtitle)},Xe=Ne.charAt(0)==="h"?Ne.substr(1):"h"+Ne;R.selectAll("."+Xe+",."+Xe+"-math-group").remove(),y.draw(P,Ne,n(He,Ke||{}))}function Zt(){if(I&&ve||!I&&!ve){var Ne,Ke;it==="top"&&(Ne=at+q.l+q.w*F,Ke=lt+q.t+q.h*(1-Nt-Gt)+3+Ee*.75),it==="bottom"&&(Ne=at+q.l+q.w*F,Ke=lt+q.t+q.h*(1-Nt)-3-Ee*.25),it==="right"&&(Ke=lt+q.t+q.h*H+3+Ee*.75,Ne=at+q.l+q.w*Nt),Vt(Yt._id+"title",{attributes:{x:Ne,y:Ke,"text-anchor":I?"start":"middle"}})}}function qt(){if(I&&!ve||!I&&ve){var Ne=Yt.position||0,Ke=Yt._offset+Yt._length/2,He,Xe;if(it==="right")Xe=Ke,He=q.l+q.w*Ne+10+Ee*(Yt.showticklabels?1:.5);else if(He=Ke,it==="bottom"&&(Xe=q.t+q.h*Ne+10+(ze.indexOf("inside")===-1?Yt.tickfont.size:0)+(Yt.ticks!=="intside"&&z.ticklen||0)),it==="top"){var er=nt.text.split("<br>").length;Xe=q.t+q.h*Ne+10-kt-c*Ee*er}Vt((I?"h":"v")+Yt._id+"title",{avoid:{selection:f.select(P).selectAll("g."+Yt._id+"tick"),side:it,offsetTop:I?0:q.t,offsetLeft:I?q.l:0,maxShift:I?et.width:et.height},attributes:{x:He,y:Xe,"text-anchor":"middle"},transform:{rotate:I?-90:0,offset:0}})}}function Te(){if(!I&&!ve||I&&ve){var Ne=R.select("."+p.cbtitle),Ke=Ne.select("text"),He=[-tt/2,tt/2],Xe=Ne.select(".h"+Yt._id+"title-math-group").node(),er=15.6;Ke.node()&&(er=parseInt(Ke.node().style.fontSize,10)*c);var We;if(Xe?(We=s.bBox(Xe),St=We.width,Xt=We.height,Xt>er&&(He[1]-=(Xt-er)/2)):Ke.node()&&!Ke.classed(p.jsPlaceholder)&&(We=s.bBox(Ke.node()),St=We.width,Xt=We.height),I){if(Xt){if(Xt+=5,it==="top")Yt.domain[1]-=Xt/q.h,He[1]*=-1;else{Yt.domain[0]+=Xt/q.h;var hr=g.lineCount(Ke);He[1]+=(1-hr)*er}Ne.attr("transform",r(He[0],He[1])),Yt.setScale()}}else St&&(it==="right"&&(Yt.domain[0]+=(St+Ee/2)/q.w),Ne.attr("transform",r(He[0],He[1])),Yt.setScale())}R.selectAll("."+p.cbfills+",."+p.cblines).attr("transform",I?r(0,Math.round(q.h*(1-Yt.domain[1]))):r(Math.round(q.w*Yt.domain[0]),0)),Wt.attr("transform",I?r(0,Math.round(-q.t)):r(Math.round(-q.l),0));var Wr=R.select("."+p.cbfills).selectAll("rect."+p.cbfill).attr("style","").data(yt);Wr.enter().append("rect").classed(p.cbfill,!0).style("stroke","none"),Wr.exit().remove();var dn=ot.map(Yt.c2p).map(Math.round).sort(function(Ve,_r){return Ve-_r});Wr.each(function(Ve,_r){var oe=[_r===0?ot[0]:(yt[_r]+yt[_r-1])/2,_r===yt.length-1?ot[1]:(yt[_r]+yt[_r+1])/2].map(Yt.c2p).map(Math.round);I&&(oe[1]=i.constrain(oe[1]+(oe[1]>oe[0])?1:-1,dn[0],dn[1]));var Ht=f.select(this).attr(I?"x":"y",wt).attr(I?"y":"x",f.min(oe)).attr(I?"width":"height",Math.max(kt,2)).attr(I?"height":"width",Math.max(f.max(oe)-f.min(oe),2));if(z._fillgradient)s.gradient(Ht,P,z._id,I?"vertical":"horizontalreversed",z._fillgradient,"fill");else{var te=bt(Ve).replace("e-","");Ht.attr("fill",l(te).toHexString())}});var Qr=R.select("."+p.cblines).selectAll("path."+p.cbline).data(K.color&&K.width?Tt:[]);Qr.enter().append("path").classed(p.cbline,!0),Qr.exit().remove(),Qr.each(function(Ve){var _r=wt,oe=Math.round(Yt.c2p(Ve))+K.width/2%1;f.select(this).attr("d","M"+(I?_r+","+oe:oe+","+_r)+(I?"h":"v")+kt).call(s.lineGroupStyle,K.width,ct(Ve),K.dash)}),Wt.selectAll("g."+Yt._id+"tick,path").remove();var le=wt+kt+(tt||0)/2-(z.ticks==="outside"?1:0),Qe=t.calcTicks(Yt),Ze=t.getTickSigns(Yt)[2];return t.drawTicks(P,Yt,{vals:Yt.ticks==="inside"?t.clipEnds(Yt,Qe):Qe,layer:Wt,path:t.makeTickPath(Yt,le,Ze),transFn:t.makeTransTickFn(Yt)}),t.drawLabels(P,Yt,{vals:Qe,layer:Wt,transFn:t.makeTransTickLabelFn(Yt),labelFns:t.makeLabelFns(Yt,le)})}function me(){var Ne,Ke=kt+tt/2;ze.indexOf("inside")===-1&&(Ne=s.bBox(Wt.node()),Ke+=I?Ne.width:Ne.height),ee=Ye.select("text");var He=0,Xe=I&&it==="top",er=!I&&it==="right",We=0;if(ee.node()&&!ee.classed(p.jsPlaceholder)){var hr,Wr=Ye.select(".h"+Yt._id+"title-math-group").node();Wr&&(I&&ve||!I&&!ve)?(Ne=s.bBox(Wr),He=Ne.width,hr=Ne.height):(Ne=s.bBox(Ye.node()),He=Ne.right-q.l-(I?wt:Pt),hr=Ne.bottom-q.t-(I?Pt:wt),!I&&it==="top"&&(Ke+=Ne.height,We=Ne.height)),er&&(ee.attr("transform",r(He/2+Ee/2,0)),He*=2),Ke=Math.max(Ke,I?He:hr)}var dn=(I?at:lt)*2+Ke+Z+tt/2,Qr=0;!I&&nt.text&&st==="bottom"&&H<=0&&(Qr=dn/2,dn+=Qr,We+=Qr),et._hColorbarMoveTitle=Qr,et._hColorbarMoveCBTitle=We;var le=Z+tt;R.select("."+p.cbbg).attr("x",(I?wt:Pt)-le/2-(I?at:0)).attr("y",(I?Pt:wt)-(I?Rt:lt+We-Qr)).attr(I?"width":"height",Math.max(dn-Qr,2)).attr(I?"height":"width",Math.max(Rt+le,2)).call(o.fill,X).call(o.stroke,z.bordercolor).style("stroke-width",Z);var Qe=er?Math.max(He-10,0):0;if(R.selectAll("."+p.cboutline).attr("x",(I?wt:Pt+at)+Qe).attr("y",(I?Pt+lt-Rt:wt)+(Xe?Xt:0)).attr(I?"width":"height",Math.max(kt,2)).attr(I?"height":"width",Math.max(Rt-(I?2*lt+Xt:2*at+Qe),2)).call(o.stroke,z.outlinecolor).style({fill:"none","stroke-width":tt}),R.attr("transform",r(q.l-(I?It*dn:0),q.t-(I?0:(1-$t)*dn-We))),!I&&(Z||l(X).getAlpha()&&!l.equals(et.paper_bgcolor,X))){var Ze=Wt.selectAll("text"),Ve=Ze[0].length,_r=R.select("."+p.cbbg).node(),oe=s.bBox(_r),Ht=s.getTranslate(R),te=2;Ze.each(function(ce,de){var Se=0,ye=Ve-1;if(de===Se||de===ye){var Ae=s.bBox(this),Ge=s.getTranslate(this),sr;if(de===ye){var Er=Ae.right+Ge.x,kr=oe.right+Ht.x+Pt-Z-te+F;sr=kr-Er,sr>0&&(sr=0)}else if(de===Se){var Mr=Ae.left+Ge.x,Gr=oe.left+Ht.x+Pt+Z+te;sr=Gr-Mr,sr<0&&(sr=0)}sr&&(Ve<3?this.setAttribute("transform","translate("+sr+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var ne={},_e=A[J],Pe=k[J],Et=A[st],Mt=k[st],se=dn-kt;I?(O==="pixels"?(ne.y=H,ne.t=Rt*Et,ne.b=Rt*Mt):(ne.t=ne.b=0,ne.yt=H+U*Et,ne.yb=H-U*Mt),$==="pixels"?(ne.x=F,ne.l=dn*_e,ne.r=dn*Pe):(ne.l=se*_e,ne.r=se*Pe,ne.xl=F-G*_e,ne.xr=F+G*Pe)):(O==="pixels"?(ne.x=F,ne.l=Rt*_e,ne.r=Rt*Pe):(ne.l=ne.r=0,ne.xl=F+U*_e,ne.xr=F-U*Pe),$==="pixels"?(ne.y=1-H,ne.t=dn*Et,ne.b=dn*Mt):(ne.t=se*Et,ne.b=se*Mt,ne.yt=H-G*Et,ne.yb=H+G*Mt)),m.autoMargin(P,z._id,ne)}return i.syncOrAsync([m.previousPromises,Zt,Te,qt,m.previousPromises,me],P)}function S(R,z,P){var I=z.orientation==="v",U=P._fullLayout,O=U._size,G,$,tt;a.init({element:R.node(),gd:P,prepFn:function(){G=R.attr("transform"),d(R)},moveFn:function(Z,X){R.attr("transform",G+r(Z,X)),$=a.align((I?z._uFrac:z._vFrac)+Z/O.w,I?z._thickFrac:z._lenFrac,0,1,z.xanchor),tt=a.align((I?z._vFrac:1-z._uFrac)-X/O.h,I?z._lenFrac:z._thickFrac,0,1,z.yanchor);var J=a.getCursor($,tt,z.xanchor,z.yanchor);d(R,J)},doneFn:function(){if(d(R),$!==void 0&&tt!==void 0){var Z={};Z[z._propPrefix+"x"]=$,Z[z._propPrefix+"y"]=tt,z._traceIndex!==void 0?x.call("_guiRestyle",P,Z,z._traceIndex):x.call("_guiRelayout",P,Z)}}})}function M(R,z,P){var I=z._levels,U=[],O=[],G,$,tt=I.end+I.size/100,Z=I.size,X=1.001*P[0]-.001*P[1],J=1.001*P[1]-.001*P[0];for($=0;$<1e5&&(G=I.start+$*Z,!(Z>0?G>=tt:G<=tt));$++)G>X&&G<J&&U.push(G);if(z._fillgradient)O=[0];else if(typeof z._fillcolor=="function"){var st=z._filllevels;if(st)for(tt=st.end+st.size/100,Z=st.size,$=0;$<1e5&&(G=st.start+$*Z,!(Z>0?G>=tt:G<=tt));$++)G>P[0]&&G<P[1]&&O.push(G);else O=U.map(function(at){return at-I.size/2}),O.push(O[O.length-1]+I.size)}else z._fillcolor&&typeof z._fillcolor=="string"&&(O=[0]);return I.size<0&&(U.reverse(),O.reverse()),{line:U,fill:O}}function L(R,z,P){var I=R._fullLayout,U=z.orientation==="v",O={type:"linear",range:P,tickmode:z.tickmode,nticks:z.nticks,tick0:z.tick0,dtick:z.dtick,tickvals:z.tickvals,ticktext:z.ticktext,ticks:z.ticks,ticklen:z.ticklen,tickwidth:z.tickwidth,tickcolor:z.tickcolor,showticklabels:z.showticklabels,ticklabelposition:z.ticklabelposition,ticklabeloverflow:z.ticklabeloverflow,ticklabelstep:z.ticklabelstep,tickfont:z.tickfont,tickangle:z.tickangle,tickformat:z.tickformat,exponentformat:z.exponentformat,minexponent:z.minexponent,separatethousands:z.separatethousands,showexponent:z.showexponent,showtickprefix:z.showtickprefix,tickprefix:z.tickprefix,showticksuffix:z.showticksuffix,ticksuffix:z.ticksuffix,title:z.title,showline:!0,anchor:"free",side:U?"right":"bottom",position:1},G=U?"y":"x",$={type:"linear",_id:G+z._id},tt={letter:G,font:I.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,calendar:I.calendar};function Z(X,J){return i.coerce(O,$,u,X,J)}return v(O,$,Z,tt,I),_(O,$,Z,tt),$}B.exports={draw:w}},{"../../constants/alignment":483,"../../lib":515,"../../lib/extend":505,"../../lib/setcursor":536,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"../../plots/cartesian/axis_defaults":568,"../../plots/cartesian/layout_attributes":579,"../../plots/cartesian/position_defaults":582,"../../plots/plots":628,"../../registry":647,"../color":367,"../colorscale/helpers":378,"../dragelement":386,"../drawing":389,"../titles":476,"./constants":369,"@plotly/d3":58,tinycolor2:313}],372:[function(e,B,V){var f=e("../../lib");B.exports=function(m){return f.isPlainObject(m.colorbar)}},{"../../lib":515}],373:[function(e,B,V){B.exports={moduleType:"component",name:"colorbar",attributes:e("./attributes"),supplyDefaults:e("./defaults"),draw:e("./draw").draw,hasColorbar:e("./has_colorbar")}},{"./attributes":368,"./defaults":370,"./draw":371,"./has_colorbar":372}],374:[function(e,B,V){var f=e("../colorbar/attributes"),l=e("../../lib/regex").counter,m=e("../../lib/sort_object_keys"),x=e("./scales.js").scales;m(x),B.exports=function(a,i){a=a||"",i=i||{};var r=i.cLetter||"c";"onlyIfNumerical"in i?i.onlyIfNumerical:Boolean(a);var n="noScale"in i?i.noScale:a==="marker.line",d="showScaleDflt"in i?i.showScaleDflt:r==="z",s=typeof i.colorscaleDflt=="string"?x[i.colorscaleDflt]:null,o=i.editTypeOverride||"",y;"colorAttr"in i?(y=i.colorAttr,i.colorAttr):y={z:"z",c:"color"}[r];var g=r+"auto",b=r+"min",v=r+"max",_=r+"mid",u={};u[b]=u[v]=void 0;var T={};T[g]=!1;var c={};return y==="color"&&(c.color={valType:"color",arrayOk:!0,editType:o||"style"},i.anim&&(c.color.anim=!0)),c[g]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:u},c[b]={valType:"number",dflt:null,editType:o||"plot",impliedEdits:T},c[v]={valType:"number",dflt:null,editType:o||"plot",impliedEdits:T},c[_]={valType:"number",dflt:null,editType:"calc",impliedEdits:u},c.colorscale={valType:"colorscale",editType:"calc",dflt:s,impliedEdits:{autocolorscale:!1}},c.autocolorscale={valType:"boolean",dflt:i.autoColorDflt!==!1,editType:"calc",impliedEdits:{colorscale:void 0}},c.reversescale={valType:"boolean",dflt:!1,editType:"plot"},n||(c.showscale={valType:"boolean",dflt:d,editType:"calc"},c.colorbar=f),i.noColorAxis||(c.coloraxis={valType:"subplotid",regex:l("coloraxis"),dflt:null,editType:"calc"}),c}},{"../../lib/regex":532,"../../lib/sort_object_keys":538,"../colorbar/attributes":368,"./scales.js":382}],375:[function(e,B,V){var f=e("fast-isnumeric"),l=e("../../lib"),m=e("./helpers").extractOpts;B.exports=function(t,a,i){var r=t._fullLayout,n=i.vals,d=i.containerStr,s=d?l.nestedProperty(a,d).get():a,o=m(s),y=o.auto!==!1,g=o.min,b=o.max,v=o.mid,_=function(){return l.aggNums(Math.min,null,n)},u=function(){return l.aggNums(Math.max,null,n)};if(g===void 0?g=_():y&&(s._colorAx&&f(g)?g=Math.min(g,_()):g=_()),b===void 0?b=u():y&&(s._colorAx&&f(b)?b=Math.max(b,u()):b=u()),y&&v!==void 0&&(b-v>v-g?g=v-(b-v):b-v<v-g&&(b=v+(v-g))),g===b&&(g-=.5,b+=.5),o._sync("min",g),o._sync("max",b),o.autocolorscale){var T;g*b<0?T=r.colorscale.diverging:g>=0?T=r.colorscale.sequential:T=r.colorscale.sequentialminus,o._sync("colorscale",T)}}},{"../../lib":515,"./helpers":378,"fast-isnumeric":190}],376:[function(e,B,V){var f=e("../../lib"),l=e("./helpers").hasColorscale,m=e("./helpers").extractOpts;B.exports=function(t,a){function i(g,b){var v=g["_"+b];v!==void 0&&(g[b]=v)}function r(g,b){var v=b.container?f.nestedProperty(g,b.container).get():g;if(v)if(v.coloraxis)v._colorAx=a[v.coloraxis];else{var _=m(v),u=_.auto;(u||_.min===void 0)&&i(v,b.min),(u||_.max===void 0)&&i(v,b.max),_.autocolorscale&&i(v,"colorscale")}}for(var n=0;n<t.length;n++){var d=t[n],s=d._module.colorbar;if(s)if(Array.isArray(s))for(var o=0;o<s.length;o++)r(d,s[o]);else r(d,s);l(d,"marker.line")&&r(d,{container:"marker.line",min:"cmin",max:"cmax"})}for(var y in a._colorAxes)r(a[y],{min:"cmin",max:"cmax"})}},{"../../lib":515,"./helpers":378}],377:[function(e,B,V){var f=e("fast-isnumeric"),l=e("../../lib"),m=e("../colorbar/has_colorbar"),x=e("../colorbar/defaults"),t=e("./scales").isValid,a=e("../../registry").traceIs;function i(r,n){var d=n.slice(0,n.length-1);return n?l.nestedProperty(r,d).get()||{}:r}B.exports=function r(n,d,s,o,y){var g=y.prefix,b=y.cLetter,v="_module"in d,_=i(n,g),u=i(d,g),T=i(d._template||{},g)||{},c=function(){return delete n.coloraxis,delete d.coloraxis,r(n,d,s,o,y)};if(v){var A=s._colorAxes||{},k=o(g+"coloraxis");if(k){var p=a(d,"contour")&&l.nestedProperty(d,"contours.coloring").get()||"heatmap",w=A[k];w?(w[2].push(c),w[0]!==p&&(w[0]=!1,l.warn(["Ignoring coloraxis:",k,"setting","as it is linked to incompatible colorscales."].join(" ")))):A[k]=[p,d,[c]];return}}var h=_[b+"min"],D=_[b+"max"],S=f(h)&&f(D)&&h<D,M=o(g+b+"auto",!S);M?o(g+b+"mid"):(o(g+b+"min"),o(g+b+"max"));var L=_.colorscale,R=T.colorscale,z;if(L!==void 0&&(z=!t(L)),R!==void 0&&(z=!t(R)),o(g+"autocolorscale",z),o(g+"colorscale"),o(g+"reversescale"),g!=="marker.line."){var P;g&&v&&(P=m(_));var I=o(g+"showscale",P);I&&(g&&T&&(u._template=T),x(_,u,s))}}},{"../../lib":515,"../../registry":647,"../colorbar/defaults":370,"../colorbar/has_colorbar":372,"./scales":382,"fast-isnumeric":190}],378:[function(e,B,V){var f=e("@plotly/d3"),l=e("tinycolor2"),m=e("fast-isnumeric"),x=e("../../lib"),t=e("../color"),a=e("./scales").isValid;function i(v,_,u){var T=_?x.nestedProperty(v,_).get()||{}:v,c=T[u||"color"],A=!1;if(x.isArrayOrTypedArray(c)){for(var k=0;k<c.length;k++)if(m(c[k])){A=!0;break}}return x.isPlainObject(T)&&(A||T.showscale===!0||m(T.cmin)&&m(T.cmax)||a(T.colorscale)||x.isPlainObject(T.colorbar))}var r=["showscale","autocolorscale","colorscale","reversescale","colorbar"],n=["min","max","mid","auto"];function d(v){var _=v._colorAx,u=_||v,T={},c,A,k;for(A=0;A<r.length;A++)k=r[A],T[k]=u[k];if(_)for(c="c",A=0;A<n.length;A++)k=n[A],T[k]=u["c"+k];else{var p;for(A=0;A<n.length;A++){if(k=n[A],p="c"+k,p in u){T[k]=u[p];continue}p="z"+k,p in u&&(T[k]=u[p])}c=p.charAt(0)}return T._sync=function(w,h){var D=n.indexOf(w)!==-1?c+w:w;u[D]=u["_"+D]=h},T}function s(v){for(var _=d(v),u=_.min,T=_.max,c=_.reversescale?o(_.colorscale):_.colorscale,A=c.length,k=new Array(A),p=new Array(A),w=0;w<A;w++){var h=c[w];k[w]=u+h[0]*(T-u),p[w]=h[1]}return{domain:k,range:p}}function o(v){for(var _=v.length,u=new Array(_),T=_-1,c=0;T>=0;T--,c++){var A=v[T];u[c]=[1-A[0],A[1]]}return u}function y(v,_){_=_||{};for(var u=v.domain,T=v.range,c=T.length,A=new Array(c),k=0;k<c;k++){var p=l(T[k]).toRgb();A[k]=[p.r,p.g,p.b,p.a]}var w=f.scale.linear().domain(u).range(A).clamp(!0),h=_.noNumericCheck,D=_.returnArray,S;return h&&D?S=w:h?S=function(M){return b(w(M))}:D?S=function(M){return m(M)?w(M):l(M).isValid()?M:t.defaultLine}:S=function(M){return m(M)?b(w(M)):l(M).isValid()?M:t.defaultLine},S.domain=w.domain,S.range=function(){return T},S}function g(v,_){return y(s(v),_)}function b(v){var _={r:v[0],g:v[1],b:v[2],a:v[3]};return l(_).toRgbString()}B.exports={hasColorscale:i,extractOpts:d,extractScale:s,flipScale:o,makeColorScaleFunc:y,makeColorScaleFuncFromTrace:g}},{"../../lib":515,"../color":367,"./scales":382,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:313}],379:[function(e,B,V){var f=e("./scales"),l=e("./helpers");B.exports={moduleType:"component",name:"colorscale",attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyLayoutDefaults:e("./layout_defaults"),handleDefaults:e("./defaults"),crossTraceDefaults:e("./cross_trace_defaults"),calc:e("./calc"),scales:f.scales,defaultScale:f.defaultScale,getScale:f.get,isValidScale:f.isValid,hasColorscale:l.hasColorscale,extractOpts:l.extractOpts,extractScale:l.extractScale,flipScale:l.flipScale,makeColorScaleFunc:l.makeColorScaleFunc,makeColorScaleFuncFromTrace:l.makeColorScaleFuncFromTrace}},{"./attributes":374,"./calc":375,"./cross_trace_defaults":376,"./defaults":377,"./helpers":378,"./layout_attributes":380,"./layout_defaults":381,"./scales":382}],380:[function(e,B,V){var f=e("../../lib/extend").extendFlat,l=e("./attributes"),m=e("./scales").scales;B.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:m.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:m.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:m.RdBu,editType:"calc"}},coloraxis:f({_isSubplotObj:!0,editType:"calc"},l("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},{"../../lib/extend":505,"./attributes":374,"./scales":382}],381:[function(e,B,V){var f=e("../../lib"),l=e("../../plot_api/plot_template"),m=e("./layout_attributes"),x=e("./defaults");B.exports=function(a,i){function r(v,_){return f.coerce(a,i,m,v,_)}r("colorscale.sequential"),r("colorscale.sequentialminus"),r("colorscale.diverging");var n=i._colorAxes,d,s;function o(v,_){return f.coerce(d,s,m.coloraxis,v,_)}for(var y in n){var g=n[y];if(g[0])d=a[y]||{},s=l.newContainer(i,y,"coloraxis"),s._name=y,x(d,s,i,o,{prefix:"",cLetter:"c"});else{for(var b=0;b<g[2].length;b++)g[2][b]();delete i._colorAxes[y]}}}},{"../../lib":515,"../../plot_api/plot_template":555,"./defaults":377,"./layout_attributes":380}],382:[function(e,B,V){var f=e("tinycolor2"),l={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},m=l.RdBu;function x(i,r){if(r||(r=m),!i)return r;function n(){try{i=l[i]||JSON.parse(i)}catch{i=r}}return typeof i=="string"&&(n(),typeof i=="string"&&n()),t(i)?i:r}function t(i){var r=0;if(!Array.isArray(i)||i.length<2||!i[0]||!i[i.length-1]||+i[0][0]!=0||+i[i.length-1][0]!=1)return!1;for(var n=0;n<i.length;n++){var d=i[n];if(d.length!==2||+d[0]<r||!f(d[1]).isValid())return!1;r=+d[0]}return!0}function a(i){return l[i]!==void 0?!0:t(i)}B.exports={scales:l,defaultScale:m,get:x,isValid:a}},{tinycolor2:313}],383:[function(e,B,V){B.exports=function(l,m,x,t,a){var i=(l-x)/(t-x),r=i+m/(t-x),n=(i+r)/2;return a==="left"||a==="bottom"?i:a==="center"||a==="middle"?n:a==="right"||a==="top"?r:i<2/3-n?i:r>4/3-n?r:n}},{}],384:[function(e,B,V){var f=e("../../lib"),l=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];B.exports=function(x,t,a,i){return a==="left"?x=0:a==="center"?x=1:a==="right"?x=2:x=f.constrain(Math.floor(x*3),0,2),i==="bottom"?t=0:i==="middle"?t=1:i==="top"?t=2:t=f.constrain(Math.floor(t*3),0,2),l[t][x]}},{"../../lib":515}],385:[function(e,B,V){V.selectMode=function(f){return f==="lasso"||f==="select"},V.drawMode=function(f){return f==="drawclosedpath"||f==="drawopenpath"||f==="drawline"||f==="drawrect"||f==="drawcircle"},V.openMode=function(f){return f==="drawline"||f==="drawopenpath"},V.rectMode=function(f){return f==="select"||f==="drawline"||f==="drawrect"||f==="drawcircle"},V.freeMode=function(f){return f==="lasso"||f==="drawclosedpath"||f==="drawopenpath"},V.selectingOrDrawing=function(f){return V.freeMode(f)||V.rectMode(f)}},{}],386:[function(e,B,V){var f=e("mouse-event-offset"),l=e("has-hover"),m=e("has-passive-events"),x=e("../../lib").removeElement,t=e("../../plots/cartesian/constants"),a=B.exports={};a.align=e("./align"),a.getCursor=e("./cursor");var i=e("./unhover");a.unhover=i.wrapped,a.unhoverRaw=i.raw,a.init=function(s){var o=s.gd,y=1,g=o._context.doubleClickDelay,b=s.element,v,_,u,T,c,A,k,p;o._mouseDownTime||(o._mouseDownTime=0),b.style.pointerEvents="all",b.onmousedown=D,m?(b._ontouchstart&&b.removeEventListener("touchstart",b._ontouchstart),b._ontouchstart=D,b.addEventListener("touchstart",D,{passive:!1})):b.ontouchstart=D;function w(L,R,z){return Math.abs(L)<z&&(L=0),Math.abs(R)<z&&(R=0),[L,R]}var h=s.clampFn||w;function D(L){o._dragged=!1,o._dragging=!0;var R=n(L);v=R[0],_=R[1],k=L.target,A=L,p=L.buttons===2||L.ctrlKey,typeof L.clientX>"u"&&typeof L.clientY>"u"&&(L.clientX=v,L.clientY=_),u=new Date().getTime(),u-o._mouseDownTime<g?y+=1:(y=1,o._mouseDownTime=u),s.prepFn&&s.prepFn(L,v,_),l&&!p?(c=r(),c.style.cursor=window.getComputedStyle(b).cursor):l||(c=document,T=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(b).cursor),document.addEventListener("mouseup",M),document.addEventListener("touchend",M),s.dragmode!==!1&&(L.preventDefault(),document.addEventListener("mousemove",S),document.addEventListener("touchmove",S,{passive:!1}))}function S(L){L.preventDefault();var R=n(L),z=s.minDrag||t.MINDRAG,P=h(R[0]-v,R[1]-_,z),I=P[0],U=P[1];(I||U)&&(o._dragged=!0,a.unhover(o,L)),o._dragged&&s.moveFn&&!p&&(o._dragdata={element:b,dx:I,dy:U},s.moveFn(I,U))}function M(L){if(delete o._dragdata,s.dragmode!==!1&&(L.preventDefault(),document.removeEventListener("mousemove",S),document.removeEventListener("touchmove",S)),document.removeEventListener("mouseup",M),document.removeEventListener("touchend",M),l?x(c):T&&(c.documentElement.style.cursor=T,T=null),!o._dragging){o._dragged=!1;return}if(o._dragging=!1,new Date().getTime()-o._mouseDownTime>g&&(y=Math.max(y-1,1)),o._dragged)s.doneFn&&s.doneFn();else if(s.clickFn&&s.clickFn(y,A),!p){var R;try{R=new MouseEvent("click",L)}catch{var z=n(L);R=document.createEvent("MouseEvents"),R.initMouseEvent("click",L.bubbles,L.cancelable,L.view,L.detail,L.screenX,L.screenY,z[0],z[1],L.ctrlKey,L.altKey,L.shiftKey,L.metaKey,L.button,L.relatedTarget)}k.dispatchEvent(R)}o._dragging=!1,o._dragged=!1}};function r(){var d=document.createElement("div");d.className="dragcover";var s=d.style;return s.position="fixed",s.left=0,s.right=0,s.top=0,s.bottom=0,s.zIndex=999999999,s.background="none",document.body.appendChild(d),d}a.coverSlip=r;function n(d){return f(d.changedTouches?d.changedTouches[0]:d,document.body)}},{"../../lib":515,"../../plots/cartesian/constants":573,"./align":383,"./cursor":384,"./unhover":387,"has-hover":228,"has-passive-events":229,"mouse-event-offset":242}],387:[function(e,B,V){var f=e("../../lib/events"),l=e("../../lib/throttle"),m=e("../../lib/dom").getGraphDiv,x=e("../fx/constants"),t=B.exports={};t.wrapped=function(a,i,r){a=m(a),a._fullLayout&&l.clear(a._fullLayout._uid+x.HOVERID),t.raw(a,i,r)},t.raw=function(i,r){var n=i._fullLayout,d=i._hoverdata;r||(r={}),!(r.target&&!i._dragged&&f.triggerHandler(i,"plotly_beforehover",r)===!1)&&(n._hoverlayer.selectAll("g").remove(),n._hoverlayer.selectAll("line").remove(),n._hoverlayer.selectAll("circle").remove(),i._hoverdata=void 0,r.target&&d&&i.emit("plotly_unhover",{event:r,points:d}))}},{"../../lib/dom":503,"../../lib/events":504,"../../lib/throttle":542,"../fx/constants":401}],388:[function(e,B,V){V.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},V.pattern={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},{}],389:[function(e,B,V){var f=e("@plotly/d3"),l=e("../../lib"),m=l.numberFormat,x=e("fast-isnumeric"),t=e("tinycolor2"),a=e("../../registry"),i=e("../color"),r=e("../colorscale"),n=l.strTranslate,d=e("../../lib/svg_text_utils"),s=e("../../constants/xmlns_namespaces"),o=e("../../constants/alignment"),y=o.LINE_SPACING,g=e("../../constants/interactions").DESELECTDIM,b=e("../../traces/scatter/subtypes"),v=e("../../traces/scatter/make_bubble_size_func"),_=e("../../components/fx/helpers").appendArrayPointValue,u=B.exports={};u.font=function(J,st,at,lt){l.isPlainObject(st)&&(lt=st.color,at=st.size,st=st.family),st&&J.style("font-family",st),at+1&&J.style("font-size",at+"px"),lt&&J.call(i.fill,lt)},u.setPosition=function(J,st,at){J.attr("x",st).attr("y",at)},u.setSize=function(J,st,at){J.attr("width",st).attr("height",at)},u.setRect=function(J,st,at,lt,F){J.call(u.setPosition,st,at).call(u.setSize,lt,F)},u.translatePoint=function(J,st,at,lt){var F=at.c2p(J.x),H=lt.c2p(J.y);if(x(F)&&x(H)&&st.node())st.node().nodeName==="text"?st.attr("x",F).attr("y",H):st.attr("transform",n(F,H));else return!1;return!0},u.translatePoints=function(J,st,at){J.each(function(lt){var F=f.select(this);u.translatePoint(lt,F,st,at)})},u.hideOutsideRangePoint=function(J,st,at,lt,F,H){st.attr("display",at.isPtWithinRange(J,F)&&lt.isPtWithinRange(J,H)?null:"none")},u.hideOutsideRangePoints=function(J,st){if(!!st._hasClipOnAxisFalse){var at=st.xaxis,lt=st.yaxis;J.each(function(F){var H=F[0].trace,et=H.xcalendar,q=H.ycalendar,W=a.traceIs(H,"bar-like")?".bartext":".point,.textpoint";J.selectAll(W).each(function(K){u.hideOutsideRangePoint(K,f.select(this),at,lt,et,q)})})}},u.crispRound=function(J,st,at){return!st||!x(st)?at||0:J._context.staticPlot?st:st<1?1:Math.round(st)},u.singleLineStyle=function(J,st,at,lt,F){st.style("fill","none");var H=(((J||[])[0]||{}).trace||{}).line||{},et=at||H.width||0,q=F||H.dash||"";i.stroke(st,lt||H.color),u.dashLine(st,q,et)},u.lineGroupStyle=function(J,st,at,lt){J.style("fill","none").each(function(F){var H=(((F||[])[0]||{}).trace||{}).line||{},et=st||H.width||0,q=lt||H.dash||"";f.select(this).call(i.stroke,at||H.color).call(u.dashLine,q,et)})},u.dashLine=function(J,st,at){at=+at||0,st=u.dashStyle(st,at),J.style({"stroke-dasharray":st,"stroke-width":at+"px"})},u.dashStyle=function(J,st){st=+st||1;var at=Math.max(st,3);return J==="solid"?J="":J==="dot"?J=at+"px,"+at+"px":J==="dash"?J=3*at+"px,"+3*at+"px":J==="longdash"?J=5*at+"px,"+5*at+"px":J==="dashdot"?J=3*at+"px,"+at+"px,"+at+"px,"+at+"px":J==="longdashdot"&&(J=5*at+"px,"+2*at+"px,"+at+"px,"+2*at+"px"),J};function T(J,st,at){var lt=st.fillpattern,F=lt&&u.getPatternAttr(lt.shape,0,"");if(F){var H=u.getPatternAttr(lt.bgcolor,0,null),et=u.getPatternAttr(lt.fgcolor,0,null),q=lt.fgopacity,W=u.getPatternAttr(lt.size,0,8),K=u.getPatternAttr(lt.solidity,0,.3),nt=st.uid;u.pattern(J,"point",at,nt,F,W,K,void 0,lt.fillmode,H,et,q)}else st.fillcolor&&J.call(i.fill,st.fillcolor)}u.singleFillStyle=function(J,st){var at=f.select(J.node()),lt=at.data(),F=((lt[0]||[])[0]||{}).trace||{};T(J,F,st)},u.fillGroupStyle=function(J,st){J.style("stroke-width",0).each(function(at){var lt=f.select(this);at[0].trace&&T(lt,at[0].trace,st)})};var c=e("./symbol_defs");u.symbolNames=[],u.symbolFuncs=[],u.symbolNeedLines={},u.symbolNoDot={},u.symbolNoFill={},u.symbolList=[],Object.keys(c).forEach(function(J){var st=c[J],at=st.n;u.symbolList.push(at,String(at),J,at+100,String(at+100),J+"-open"),u.symbolNames[at]=J,u.symbolFuncs[at]=st.f,st.needLine&&(u.symbolNeedLines[at]=!0),st.noDot?u.symbolNoDot[at]=!0:u.symbolList.push(at+200,String(at+200),J+"-dot",at+300,String(at+300),J+"-open-dot"),st.noFill&&(u.symbolNoFill[at]=!0)});var A=u.symbolNames.length,k="M0,0.5L0.5,0L0,-0.5L-0.5,0Z";u.symbolNumber=function(J){if(x(J))J=+J;else if(typeof J=="string"){var st=0;J.indexOf("-open")>0&&(st=100,J=J.replace("-open","")),J.indexOf("-dot")>0&&(st+=200,J=J.replace("-dot","")),J=u.symbolNames.indexOf(J),J>=0&&(J+=st)}return J%100>=A||J>=400?0:Math.floor(Math.max(J,0))};function p(J,st){var at=J%100;return u.symbolFuncs[at](st)+(J>=200?k:"")}var w={x1:1,x2:0,y1:0,y2:0},h={x1:0,x2:0,y1:1,y2:0},D=m("~f"),S={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:w},horizontalreversed:{node:"linearGradient",attrs:w,reversed:!0},vertical:{node:"linearGradient",attrs:h},verticalreversed:{node:"linearGradient",attrs:h,reversed:!0}};u.gradient=function(J,st,at,lt,F,H){for(var et=F.length,q=S[lt],W=new Array(et),K=0;K<et;K++)q.reversed?W[et-1-K]=[D((1-F[K][0])*100),F[K][1]]:W[K]=[D(F[K][0]*100),F[K][1]];var nt=st._fullLayout,it="g"+nt._uid+"-"+at,ot=nt._defs.select(".gradients").selectAll("#"+it).data([lt+W.join(";")],l.identity);ot.exit().remove(),ot.enter().append(q.node).each(function(){var ct=f.select(this);q.attrs&&ct.attr(q.attrs),ct.attr("id",it);var bt=ct.selectAll("stop").data(W);bt.exit().remove(),bt.enter().append("stop"),bt.each(function(ut){var pt=t(ut[1]);f.select(this).attr({offset:ut[0]+"%","stop-color":i.tinyRGB(pt),"stop-opacity":pt.getAlpha()})})}),J.style(H,tt(it,st)).style(H+"-opacity",null),J.classed("gradient_filled",!0)},u.pattern=function(J,st,at,lt,F,H,et,q,W,K,nt,it){var ot=st==="legend";q&&(W==="overlay"?(K=q,nt=i.contrast(K)):(K=void 0,nt=q));var ct=at._fullLayout,bt="p"+ct._uid+"-"+lt,ut,pt,yt=function($t,Qt,Nt,Pt,Yt){return Pt+(Yt-Pt)*($t-Qt)/(Nt-Qt)},Tt,kt,zt,Rt,Gt={};switch(F){case"/":ut=H*Math.sqrt(2),pt=H*Math.sqrt(2),Tt="M-"+ut/4+","+pt/4+"l"+ut/2+",-"+pt/2+"M0,"+pt+"L"+ut+",0M"+ut/4*3+","+pt/4*5+"l"+ut/2+",-"+pt/2,kt=et*H,Rt="path",Gt={d:Tt,opacity:it,stroke:nt,"stroke-width":kt+"px"};break;case"\\":ut=H*Math.sqrt(2),pt=H*Math.sqrt(2),Tt="M"+ut/4*3+",-"+pt/4+"l"+ut/2+","+pt/2+"M0,0L"+ut+","+pt+"M-"+ut/4+","+pt/4*3+"l"+ut/2+","+pt/2,kt=et*H,Rt="path",Gt={d:Tt,opacity:it,stroke:nt,"stroke-width":kt+"px"};break;case"x":ut=H*Math.sqrt(2),pt=H*Math.sqrt(2),Tt="M-"+ut/4+","+pt/4+"l"+ut/2+",-"+pt/2+"M0,"+pt+"L"+ut+",0M"+ut/4*3+","+pt/4*5+"l"+ut/2+",-"+pt/2+"M"+ut/4*3+",-"+pt/4+"l"+ut/2+","+pt/2+"M0,0L"+ut+","+pt+"M-"+ut/4+","+pt/4*3+"l"+ut/2+","+pt/2,kt=H-H*Math.sqrt(1-et),Rt="path",Gt={d:Tt,opacity:it,stroke:nt,"stroke-width":kt+"px"};break;case"|":ut=H,pt=H,Rt="path",Tt="M"+ut/2+",0L"+ut/2+","+pt,kt=et*H,Rt="path",Gt={d:Tt,opacity:it,stroke:nt,"stroke-width":kt+"px"};break;case"-":ut=H,pt=H,Rt="path",Tt="M0,"+pt/2+"L"+ut+","+pt/2,kt=et*H,Rt="path",Gt={d:Tt,opacity:it,stroke:nt,"stroke-width":kt+"px"};break;case"+":ut=H,pt=H,Rt="path",Tt="M"+ut/2+",0L"+ut/2+","+pt+"M0,"+pt/2+"L"+ut+","+pt/2,kt=H-H*Math.sqrt(1-et),Rt="path",Gt={d:Tt,opacity:it,stroke:nt,"stroke-width":kt+"px"};break;case".":ut=H,pt=H,et<Math.PI/4?zt=Math.sqrt(et*H*H/Math.PI):zt=yt(et,Math.PI/4,1,H/2,H/Math.sqrt(2)),Rt="circle",Gt={cx:ut/2,cy:pt/2,r:zt,opacity:it,fill:nt};break}var wt=[F||"noSh",K||"noBg",nt||"noFg",H,et].join(";"),It=ct._defs.select(".patterns").selectAll("#"+bt).data([wt],l.identity);It.exit().remove(),It.enter().append("pattern").each(function(){var $t=f.select(this);if($t.attr({id:bt,width:ut+"px",height:pt+"px",patternUnits:"userSpaceOnUse",patternTransform:ot?"scale(0.8)":""}),K){var Qt=$t.selectAll("rect").data([0]);Qt.exit().remove(),Qt.enter().append("rect").attr({width:ut+"px",height:pt+"px",fill:K})}var Nt=$t.selectAll(Rt).data([0]);Nt.exit().remove(),Nt.enter().append(Rt).attr(Gt)}),J.style("fill",tt(bt,at)).style("fill-opacity",null),J.classed("pattern_filled",!0)},u.initGradients=function(J){var st=J._fullLayout,at=l.ensureSingle(st._defs,"g","gradients");at.selectAll("linearGradient,radialGradient").remove(),f.select(J).selectAll(".gradient_filled").classed("gradient_filled",!1)},u.initPatterns=function(J){var st=J._fullLayout,at=l.ensureSingle(st._defs,"g","patterns");at.selectAll("pattern").remove(),f.select(J).selectAll(".pattern_filled").classed("pattern_filled",!1)},u.getPatternAttr=function(J,st,at){return J&&l.isArrayOrTypedArray(J)?st<J.length?J[st]:at:J},u.pointStyle=function(J,st,at){if(!!J.size()){var lt=u.makePointStyleFns(st);J.each(function(F){u.singlePointStyle(F,f.select(this),st,lt,at)})}},u.singlePointStyle=function(J,st,at,lt,F){var H=at.marker,et=H.line;if(st.style("opacity",lt.selectedOpacityFn?lt.selectedOpacityFn(J):J.mo===void 0?H.opacity:J.mo),lt.ms2mrc){var q;J.ms==="various"||H.size==="various"?q=3:q=lt.ms2mrc(J.ms),J.mrc=q,lt.selectedSizeFn&&(q=J.mrc=lt.selectedSizeFn(J));var W=u.symbolNumber(J.mx||H.symbol)||0;J.om=W%200>=100,st.attr("d",p(W,q))}var K=!1,nt,it,ot;if(J.so)ot=et.outlierwidth,it=et.outliercolor,nt=H.outliercolor;else{var ct=(et||{}).width;ot=(J.mlw+1||ct+1||(J.trace?(J.trace.marker.line||{}).width:0)+1)-1||0,"mlc"in J?it=J.mlcc=lt.lineScale(J.mlc):l.isArrayOrTypedArray(et.color)?it=i.defaultLine:it=et.color,l.isArrayOrTypedArray(H.color)&&(nt=i.defaultLine,K=!0),"mc"in J?nt=J.mcc=lt.markerScale(J.mc):nt=H.color||"rgba(0,0,0,0)",lt.selectedColorFn&&(nt=lt.selectedColorFn(J))}if(J.om)st.call(i.stroke,nt).style({"stroke-width":(ot||1)+"px",fill:"none"});else{st.style("stroke-width",(J.isBlank?0:ot)+"px");var bt=H.gradient,ut=J.mgt;ut?K=!0:ut=bt&&bt.type,l.isArrayOrTypedArray(ut)&&(ut=ut[0],S[ut]||(ut=0));var pt=H.pattern,yt=pt&&u.getPatternAttr(pt.shape,J.i,"");if(ut&&ut!=="none"){var Tt=J.mgc;Tt?K=!0:Tt=bt.color;var kt=at.uid;K&&(kt+="-"+J.i),u.gradient(st,F,kt,ut,[[0,Tt],[1,nt]],"fill")}else if(yt){var zt=u.getPatternAttr(pt.bgcolor,J.i,null),Rt=u.getPatternAttr(pt.fgcolor,J.i,null),Gt=pt.fgopacity,wt=u.getPatternAttr(pt.size,J.i,8),It=u.getPatternAttr(pt.solidity,J.i,.3),$t=J.mcc||l.isArrayOrTypedArray(pt.shape)||l.isArrayOrTypedArray(pt.bgcolor)||l.isArrayOrTypedArray(pt.size)||l.isArrayOrTypedArray(pt.solidity),Qt=at.uid;$t&&(Qt+="-"+J.i),u.pattern(st,"point",F,Qt,yt,wt,It,J.mcc,pt.fillmode,zt,Rt,Gt)}else i.fill(st,nt);ot&&i.stroke(st,it)}},u.makePointStyleFns=function(J){var st={},at=J.marker;return st.markerScale=u.tryColorscale(at,""),st.lineScale=u.tryColorscale(at,"line"),a.traceIs(J,"symbols")&&(st.ms2mrc=b.isBubble(J)?v(J):function(){return(at.size||6)/2}),J.selectedpoints&&l.extendFlat(st,u.makeSelectedPointStyleFns(J)),st},u.makeSelectedPointStyleFns=function(J){var st={},at=J.selected||{},lt=J.unselected||{},F=J.marker||{},H=at.marker||{},et=lt.marker||{},q=F.opacity,W=H.opacity,K=et.opacity,nt=W!==void 0,it=K!==void 0;(l.isArrayOrTypedArray(q)||nt||it)&&(st.selectedOpacityFn=function(zt){var Rt=zt.mo===void 0?F.opacity:zt.mo;return zt.selected?nt?W:Rt:it?K:g*Rt});var ot=F.color,ct=H.color,bt=et.color;(ct||bt)&&(st.selectedColorFn=function(zt){var Rt=zt.mcc||ot;return zt.selected?ct||Rt:bt||Rt});var ut=F.size,pt=H.size,yt=et.size,Tt=pt!==void 0,kt=yt!==void 0;return a.traceIs(J,"symbols")&&(Tt||kt)&&(st.selectedSizeFn=function(zt){var Rt=zt.mrc||ut/2;return zt.selected?Tt?pt/2:Rt:kt?yt/2:Rt}),st},u.makeSelectedTextStyleFns=function(J){var st={},at=J.selected||{},lt=J.unselected||{},F=J.textfont||{},H=at.textfont||{},et=lt.textfont||{},q=F.color,W=H.color,K=et.color;return st.selectedTextColorFn=function(nt){var it=nt.tc||q;return nt.selected?W||it:K||(W?it:i.addOpacity(it,g))},st},u.selectedPointStyle=function(J,st){if(!(!J.size()||!st.selectedpoints)){var at=u.makeSelectedPointStyleFns(st),lt=st.marker||{},F=[];at.selectedOpacityFn&&F.push(function(H,et){H.style("opacity",at.selectedOpacityFn(et))}),at.selectedColorFn&&F.push(function(H,et){i.fill(H,at.selectedColorFn(et))}),at.selectedSizeFn&&F.push(function(H,et){var q=et.mx||lt.symbol||0,W=at.selectedSizeFn(et);H.attr("d",p(u.symbolNumber(q),W)),et.mrc2=W}),F.length&&J.each(function(H){for(var et=f.select(this),q=0;q<F.length;q++)F[q](et,H)})}},u.tryColorscale=function(J,st){var at=st?l.nestedProperty(J,st).get():J;if(at){var lt=at.color;if((at.colorscale||at._colorAx)&&l.isArrayOrTypedArray(lt))return r.makeColorScaleFuncFromTrace(at)}return l.identity};var M={start:1,end:-1,middle:0,bottom:1,top:-1};function L(J,st,at,lt,F){var H=f.select(J.node().parentNode),et=st.indexOf("top")!==-1?"top":st.indexOf("bottom")!==-1?"bottom":"middle",q=st.indexOf("left")!==-1?"end":st.indexOf("right")!==-1?"start":"middle",W=lt?lt/.8+1:0,K=(d.lineCount(J)-1)*y+1,nt=M[q]*W,it=at*.75+M[et]*W+(M[et]-1)*K*at/2;J.attr("text-anchor",q),F||H.attr("transform",n(nt,it))}function R(J,st){var at=J.ts||st.textfont.size;return x(at)&&at>0?at:0}u.textPointStyle=function(J,st,at){if(!!J.size()){var lt;if(st.selectedpoints){var F=u.makeSelectedTextStyleFns(st);lt=F.selectedTextColorFn}var H=st.texttemplate,et=at._fullLayout;J.each(function(q){var W=f.select(this),K=H?l.extractOption(q,st,"txt","texttemplate"):l.extractOption(q,st,"tx","text");if(!K&&K!==0){W.remove();return}if(H){var nt=st._module.formatLabels,it=nt?nt(q,st,et):{},ot={};_(ot,st,q.i);var ct=st._meta||{};K=l.texttemplateString(K,it,et._d3locale,ot,q,ct)}var bt=q.tp||st.textposition,ut=R(q,st),pt=lt?lt(q):q.tc||st.textfont.color;W.call(u.font,q.tf||st.textfont.family,ut,pt).text(K).call(d.convertToTspans,at).call(L,bt,ut,q.mrc)})}},u.selectedTextStyle=function(J,st){if(!(!J.size()||!st.selectedpoints)){var at=u.makeSelectedTextStyleFns(st);J.each(function(lt){var F=f.select(this),H=at.selectedTextColorFn(lt),et=lt.tp||st.textposition,q=R(lt,st);i.fill(F,H);var W=a.traceIs(st,"bar-like");L(F,et,q,lt.mrc2||lt.mrc,W)})}};var z=.5;u.smoothopen=function(J,st){if(J.length<3)return"M"+J.join("L");var at="M"+J[0],lt=[],F;for(F=1;F<J.length-1;F++)lt.push(P(J[F-1],J[F],J[F+1],st));for(at+="Q"+lt[0][0]+" "+J[1],F=2;F<J.length-1;F++)at+="C"+lt[F-2][1]+" "+lt[F-1][0]+" "+J[F];return at+="Q"+lt[J.length-3][1]+" "+J[J.length-1],at},u.smoothclosed=function(J,st){if(J.length<3)return"M"+J.join("L")+"Z";var at="M"+J[0],lt=J.length-1,F=[P(J[lt],J[0],J[1],st)],H;for(H=1;H<lt;H++)F.push(P(J[H-1],J[H],J[H+1],st));for(F.push(P(J[lt-1],J[lt],J[0],st)),H=1;H<=lt;H++)at+="C"+F[H-1][1]+" "+F[H][0]+" "+J[H];return at+="C"+F[lt][1]+" "+F[0][0]+" "+J[0]+"Z",at};function P(J,st,at,lt){var F=J[0]-st[0],H=J[1]-st[1],et=at[0]-st[0],q=at[1]-st[1],W=Math.pow(F*F+H*H,z/2),K=Math.pow(et*et+q*q,z/2),nt=(K*K*F-W*W*et)*lt,it=(K*K*H-W*W*q)*lt,ot=3*K*(W+K),ct=3*W*(W+K);return[[f.round(st[0]+(ot&&nt/ot),2),f.round(st[1]+(ot&&it/ot),2)],[f.round(st[0]-(ct&&nt/ct),2),f.round(st[1]-(ct&&it/ct),2)]]}var I={hv:function(J,st){return"H"+f.round(st[0],2)+"V"+f.round(st[1],2)},vh:function(J,st){return"V"+f.round(st[1],2)+"H"+f.round(st[0],2)},hvh:function(J,st){return"H"+f.round((J[0]+st[0])/2,2)+"V"+f.round(st[1],2)+"H"+f.round(st[0],2)},vhv:function(J,st){return"V"+f.round((J[1]+st[1])/2,2)+"H"+f.round(st[0],2)+"V"+f.round(st[1],2)}},U=function(J,st){return"L"+f.round(st[0],2)+","+f.round(st[1],2)};u.steps=function(J){var st=I[J]||U;return function(at){for(var lt="M"+f.round(at[0][0],2)+","+f.round(at[0][1],2),F=1;F<at.length;F++)lt+=st(at[F-1],at[F]);return lt}},u.makeTester=function(){var J=l.ensureSingleById(f.select("body"),"svg","js-plotly-tester",function(at){at.attr(s.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),st=l.ensureSingle(J,"path","js-reference-point",function(at){at.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});u.tester=J,u.testref=st},u.savedBBoxes={};var O=0,G=1e4;u.bBox=function(J,st,at){at||(at=$(J));var lt;if(at){if(lt=u.savedBBoxes[at],lt)return l.extendFlat({},lt)}else if(J.childNodes.length===1){var F=J.childNodes[0];if(at=$(F),at){var H=+F.getAttribute("x")||0,et=+F.getAttribute("y")||0,q=F.getAttribute("transform");if(!q){var W=u.bBox(F,!1,at);return H&&(W.left+=H,W.right+=H),et&&(W.top+=et,W.bottom+=et),W}if(at+="~"+H+"~"+et+"~"+q,lt=u.savedBBoxes[at],lt)return l.extendFlat({},lt)}}var K,nt;st?K=J:(nt=u.tester.node(),K=J.cloneNode(!0),nt.appendChild(K)),f.select(K).attr("transform",null).call(d.positionText,0,0);var it=K.getBoundingClientRect(),ot=u.testref.node().getBoundingClientRect();st||nt.removeChild(K);var ct={height:it.height,width:it.width,left:it.left-ot.left,top:it.top-ot.top,right:it.right-ot.left,bottom:it.bottom-ot.top};return O>=G&&(u.savedBBoxes={},O=0),at&&(u.savedBBoxes[at]=ct),O++,l.extendFlat({},ct)};function $(J){var st=J.getAttribute("data-unformatted");if(st!==null)return st+J.getAttribute("data-math")+J.getAttribute("text-anchor")+J.getAttribute("style")}u.setClipUrl=function(J,st,at){J.attr("clip-path",tt(st,at))};function tt(J,st){if(!J)return null;var at=st._context,lt=at._exportedPlot?"":at._baseUrl||"";return lt?"url('"+lt+"#"+J+"')":"url(#"+J+")"}u.getTranslate=function(J){var st=/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,at=J.attr?"attr":"getAttribute",lt=J[at]("transform")||"",F=lt.replace(st,function(H,et,q){return[et,q].join(" ")}).split(" ");return{x:+F[0]||0,y:+F[1]||0}},u.setTranslate=function(J,st,at){var lt=/(\btranslate\(.*?\);?)/,F=J.attr?"attr":"getAttribute",H=J.attr?"attr":"setAttribute",et=J[F]("transform")||"";return st=st||0,at=at||0,et=et.replace(lt,"").trim(),et+=n(st,at),et=et.trim(),J[H]("transform",et),et},u.getScale=function(J){var st=/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,at=J.attr?"attr":"getAttribute",lt=J[at]("transform")||"",F=lt.replace(st,function(H,et,q){return[et,q].join(" ")}).split(" ");return{x:+F[0]||1,y:+F[1]||1}},u.setScale=function(J,st,at){var lt=/(\bscale\(.*?\);?)/,F=J.attr?"attr":"getAttribute",H=J.attr?"attr":"setAttribute",et=J[F]("transform")||"";return st=st||1,at=at||1,et=et.replace(lt,"").trim(),et+="scale("+st+","+at+")",et=et.trim(),J[H]("transform",et),et};var Z=/\s*sc.*/;u.setPointGroupScale=function(J,st,at){if(st=st||1,at=at||1,!!J){var lt=st===1&&at===1?"":"scale("+st+","+at+")";J.each(function(){var F=(this.getAttribute("transform")||"").replace(Z,"");F+=lt,F=F.trim(),this.setAttribute("transform",F)})}};var X=/translate\([^)]*\)\s*$/;u.setTextPointsScale=function(J,st,at){!J||J.each(function(){var lt,F=f.select(this),H=F.select("text");if(!!H.node()){var et=parseFloat(H.attr("x")||0),q=parseFloat(H.attr("y")||0),W=(F.attr("transform")||"").match(X);st===1&&at===1?lt=[]:lt=[n(et,q),"scale("+st+","+at+")",n(-et,-q)],W&&lt.push(W),F.attr("transform",lt.join(""))}})}},{"../../components/fx/helpers":403,"../../constants/alignment":483,"../../constants/interactions":490,"../../constants/xmlns_namespaces":492,"../../lib":515,"../../lib/svg_text_utils":541,"../../registry":647,"../../traces/scatter/make_bubble_size_func":953,"../../traces/scatter/subtypes":961,"../color":367,"../colorscale":379,"./symbol_defs":390,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:313}],390:[function(e,B,V){var f=e("@plotly/d3");B.exports={circle:{n:0,f:function(l){var m=f.round(l,2);return"M"+m+",0A"+m+","+m+" 0 1,1 0,-"+m+"A"+m+","+m+" 0 0,1 "+m+",0Z"}},square:{n:1,f:function(l){var m=f.round(l,2);return"M"+m+","+m+"H-"+m+"V-"+m+"H"+m+"Z"}},diamond:{n:2,f:function(l){var m=f.round(l*1.3,2);return"M"+m+",0L0,"+m+"L-"+m+",0L0,-"+m+"Z"}},cross:{n:3,f:function(l){var m=f.round(l*.4,2),x=f.round(l*1.2,2);return"M"+x+","+m+"H"+m+"V"+x+"H-"+m+"V"+m+"H-"+x+"V-"+m+"H-"+m+"V-"+x+"H"+m+"V-"+m+"H"+x+"Z"}},x:{n:4,f:function(l){var m=f.round(l*.8/Math.sqrt(2),2),x="l"+m+","+m,t="l"+m+",-"+m,a="l-"+m+",-"+m,i="l-"+m+","+m;return"M0,"+m+x+t+a+t+a+i+a+i+x+i+x+"Z"}},"triangle-up":{n:5,f:function(l){var m=f.round(l*2/Math.sqrt(3),2),x=f.round(l/2,2),t=f.round(l,2);return"M-"+m+","+x+"H"+m+"L0,-"+t+"Z"}},"triangle-down":{n:6,f:function(l){var m=f.round(l*2/Math.sqrt(3),2),x=f.round(l/2,2),t=f.round(l,2);return"M-"+m+",-"+x+"H"+m+"L0,"+t+"Z"}},"triangle-left":{n:7,f:function(l){var m=f.round(l*2/Math.sqrt(3),2),x=f.round(l/2,2),t=f.round(l,2);return"M"+x+",-"+m+"V"+m+"L-"+t+",0Z"}},"triangle-right":{n:8,f:function(l){var m=f.round(l*2/Math.sqrt(3),2),x=f.round(l/2,2),t=f.round(l,2);return"M-"+x+",-"+m+"V"+m+"L"+t+",0Z"}},"triangle-ne":{n:9,f:function(l){var m=f.round(l*.6,2),x=f.round(l*1.2,2);return"M-"+x+",-"+m+"H"+m+"V"+x+"Z"}},"triangle-se":{n:10,f:function(l){var m=f.round(l*.6,2),x=f.round(l*1.2,2);return"M"+m+",-"+x+"V"+m+"H-"+x+"Z"}},"triangle-sw":{n:11,f:function(l){var m=f.round(l*.6,2),x=f.round(l*1.2,2);return"M"+x+","+m+"H-"+m+"V-"+x+"Z"}},"triangle-nw":{n:12,f:function(l){var m=f.round(l*.6,2),x=f.round(l*1.2,2);return"M-"+m+","+x+"V-"+m+"H"+x+"Z"}},pentagon:{n:13,f:function(l){var m=f.round(l*.951,2),x=f.round(l*.588,2),t=f.round(-l,2),a=f.round(l*-.309,2),i=f.round(l*.809,2);return"M"+m+","+a+"L"+x+","+i+"H-"+x+"L-"+m+","+a+"L0,"+t+"Z"}},hexagon:{n:14,f:function(l){var m=f.round(l,2),x=f.round(l/2,2),t=f.round(l*Math.sqrt(3)/2,2);return"M"+t+",-"+x+"V"+x+"L0,"+m+"L-"+t+","+x+"V-"+x+"L0,-"+m+"Z"}},hexagon2:{n:15,f:function(l){var m=f.round(l,2),x=f.round(l/2,2),t=f.round(l*Math.sqrt(3)/2,2);return"M-"+x+","+t+"H"+x+"L"+m+",0L"+x+",-"+t+"H-"+x+"L-"+m+",0Z"}},octagon:{n:16,f:function(l){var m=f.round(l*.924,2),x=f.round(l*.383,2);return"M-"+x+",-"+m+"H"+x+"L"+m+",-"+x+"V"+x+"L"+x+","+m+"H-"+x+"L-"+m+","+x+"V-"+x+"Z"}},star:{n:17,f:function(l){var m=l*1.4,x=f.round(m*.225,2),t=f.round(m*.951,2),a=f.round(m*.363,2),i=f.round(m*.588,2),r=f.round(-m,2),n=f.round(m*-.309,2),d=f.round(m*.118,2),s=f.round(m*.809,2),o=f.round(m*.382,2);return"M"+x+","+n+"H"+t+"L"+a+","+d+"L"+i+","+s+"L0,"+o+"L-"+i+","+s+"L-"+a+","+d+"L-"+t+","+n+"H-"+x+"L0,"+r+"Z"}},hexagram:{n:18,f:function(l){var m=f.round(l*.66,2),x=f.round(l*.38,2),t=f.round(l*.76,2);return"M-"+t+",0l-"+x+",-"+m+"h"+t+"l"+x+",-"+m+"l"+x+","+m+"h"+t+"l-"+x+","+m+"l"+x+","+m+"h-"+t+"l-"+x+","+m+"l-"+x+",-"+m+"h-"+t+"Z"}},"star-triangle-up":{n:19,f:function(l){var m=f.round(l*Math.sqrt(3)*.8,2),x=f.round(l*.8,2),t=f.round(l*1.6,2),a=f.round(l*4,2),i="A "+a+","+a+" 0 0 1 ";return"M-"+m+","+x+i+m+","+x+i+"0,-"+t+i+"-"+m+","+x+"Z"}},"star-triangle-down":{n:20,f:function(l){var m=f.round(l*Math.sqrt(3)*.8,2),x=f.round(l*.8,2),t=f.round(l*1.6,2),a=f.round(l*4,2),i="A "+a+","+a+" 0 0 1 ";return"M"+m+",-"+x+i+"-"+m+",-"+x+i+"0,"+t+i+m+",-"+x+"Z"}},"star-square":{n:21,f:function(l){var m=f.round(l*1.1,2),x=f.round(l*2,2),t="A "+x+","+x+" 0 0 1 ";return"M-"+m+",-"+m+t+"-"+m+","+m+t+m+","+m+t+m+",-"+m+t+"-"+m+",-"+m+"Z"}},"star-diamond":{n:22,f:function(l){var m=f.round(l*1.4,2),x=f.round(l*1.9,2),t="A "+x+","+x+" 0 0 1 ";return"M-"+m+",0"+t+"0,"+m+t+m+",0"+t+"0,-"+m+t+"-"+m+",0Z"}},"diamond-tall":{n:23,f:function(l){var m=f.round(l*.7,2),x=f.round(l*1.4,2);return"M0,"+x+"L"+m+",0L0,-"+x+"L-"+m+",0Z"}},"diamond-wide":{n:24,f:function(l){var m=f.round(l*1.4,2),x=f.round(l*.7,2);return"M0,"+x+"L"+m+",0L0,-"+x+"L-"+m+",0Z"}},hourglass:{n:25,f:function(l){var m=f.round(l,2);return"M"+m+","+m+"H-"+m+"L"+m+",-"+m+"H-"+m+"Z"},noDot:!0},bowtie:{n:26,f:function(l){var m=f.round(l,2);return"M"+m+","+m+"V-"+m+"L-"+m+","+m+"V-"+m+"Z"},noDot:!0},"circle-cross":{n:27,f:function(l){var m=f.round(l,2);return"M0,"+m+"V-"+m+"M"+m+",0H-"+m+"M"+m+",0A"+m+","+m+" 0 1,1 0,-"+m+"A"+m+","+m+" 0 0,1 "+m+",0Z"},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(l){var m=f.round(l,2),x=f.round(l/Math.sqrt(2),2);return"M"+x+","+x+"L-"+x+",-"+x+"M"+x+",-"+x+"L-"+x+","+x+"M"+m+",0A"+m+","+m+" 0 1,1 0,-"+m+"A"+m+","+m+" 0 0,1 "+m+",0Z"},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(l){var m=f.round(l,2);return"M0,"+m+"V-"+m+"M"+m+",0H-"+m+"M"+m+","+m+"H-"+m+"V-"+m+"H"+m+"Z"},needLine:!0,noDot:!0},"square-x":{n:30,f:function(l){var m=f.round(l,2);return"M"+m+","+m+"L-"+m+",-"+m+"M"+m+",-"+m+"L-"+m+","+m+"M"+m+","+m+"H-"+m+"V-"+m+"H"+m+"Z"},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(l){var m=f.round(l*1.3,2);return"M"+m+",0L0,"+m+"L-"+m+",0L0,-"+m+"ZM0,-"+m+"V"+m+"M-"+m+",0H"+m},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(l){var m=f.round(l*1.3,2),x=f.round(l*.65,2);return"M"+m+",0L0,"+m+"L-"+m+",0L0,-"+m+"ZM-"+x+",-"+x+"L"+x+","+x+"M-"+x+","+x+"L"+x+",-"+x},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(l){var m=f.round(l*1.4,2);return"M0,"+m+"V-"+m+"M"+m+",0H-"+m},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(l){var m=f.round(l,2);return"M"+m+","+m+"L-"+m+",-"+m+"M"+m+",-"+m+"L-"+m+","+m},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(l){var m=f.round(l*1.2,2),x=f.round(l*.85,2);return"M0,"+m+"V-"+m+"M"+m+",0H-"+m+"M"+x+","+x+"L-"+x+",-"+x+"M"+x+",-"+x+"L-"+x+","+x},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(l){var m=f.round(l/2,2),x=f.round(l,2);return"M"+m+","+x+"V-"+x+"m-"+x+",0V"+x+"M"+x+","+m+"H-"+x+"m0,-"+x+"H"+x},needLine:!0,noFill:!0},"y-up":{n:37,f:function(l){var m=f.round(l*1.2,2),x=f.round(l*1.6,2),t=f.round(l*.8,2);return"M-"+m+","+t+"L0,0M"+m+","+t+"L0,0M0,-"+x+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(l){var m=f.round(l*1.2,2),x=f.round(l*1.6,2),t=f.round(l*.8,2);return"M-"+m+",-"+t+"L0,0M"+m+",-"+t+"L0,0M0,"+x+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(l){var m=f.round(l*1.2,2),x=f.round(l*1.6,2),t=f.round(l*.8,2);return"M"+t+","+m+"L0,0M"+t+",-"+m+"L0,0M-"+x+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(l){var m=f.round(l*1.2,2),x=f.round(l*1.6,2),t=f.round(l*.8,2);return"M-"+t+","+m+"L0,0M-"+t+",-"+m+"L0,0M"+x+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(l){var m=f.round(l*1.4,2);return"M"+m+",0H-"+m},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(l){var m=f.round(l*1.4,2);return"M0,"+m+"V-"+m},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(l){var m=f.round(l,2);return"M"+m+",-"+m+"L-"+m+","+m},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(l){var m=f.round(l,2);return"M"+m+","+m+"L-"+m+",-"+m},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(l){var m=f.round(l,2),x=f.round(l*2,2);return"M0,0L-"+m+","+x+"H"+m+"Z"},noDot:!0},"arrow-down":{n:46,f:function(l){var m=f.round(l,2),x=f.round(l*2,2);return"M0,0L-"+m+",-"+x+"H"+m+"Z"},noDot:!0},"arrow-left":{n:47,f:function(l){var m=f.round(l*2,2),x=f.round(l,2);return"M0,0L"+m+",-"+x+"V"+x+"Z"},noDot:!0},"arrow-right":{n:48,f:function(l){var m=f.round(l*2,2),x=f.round(l,2);return"M0,0L-"+m+",-"+x+"V"+x+"Z"},noDot:!0},"arrow-bar-up":{n:49,f:function(l){var m=f.round(l,2),x=f.round(l*2,2);return"M-"+m+",0H"+m+"M0,0L-"+m+","+x+"H"+m+"Z"},needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(l){var m=f.round(l,2),x=f.round(l*2,2);return"M-"+m+",0H"+m+"M0,0L-"+m+",-"+x+"H"+m+"Z"},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(l){var m=f.round(l*2,2),x=f.round(l,2);return"M0,-"+x+"V"+x+"M0,0L"+m+",-"+x+"V"+x+"Z"},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(l){var m=f.round(l*2,2),x=f.round(l,2);return"M0,-"+x+"V"+x+"M0,0L-"+m+",-"+x+"V"+x+"Z"},needLine:!0,noDot:!0}}},{"@plotly/d3":58}],391:[function(e,B,V){B.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},{}],392:[function(e,B,V){var f=e("fast-isnumeric"),l=e("../../registry"),m=e("../../plots/cartesian/axes"),x=e("../../lib"),t=e("./compute_error");B.exports=function(r){for(var n=r.calcdata,d=0;d<n.length;d++){var s=n[d],o=s[0].trace;if(o.visible===!0&&l.traceIs(o,"errorBarsOK")){var y=m.getFromId(r,o.xaxis),g=m.getFromId(r,o.yaxis);a(s,o,y,"x"),a(s,o,g,"y")}}};function a(i,r,n,d){var s=r["error_"+d]||{},o=s.visible&&["linear","log"].indexOf(n.type)!==-1,y=[];if(!!o){for(var g=t(s),b=0;b<i.length;b++){var v=i[b],_=v.i;if(_===void 0)_=b;else if(_===null)continue;var u=v[d];if(!!f(n.c2l(u))){var T=g(u,_);if(f(T[0])&&f(T[1])){var c=v[d+"s"]=u-T[0],A=v[d+"h"]=u+T[1];y.push(c,A)}}}var k=n._id,p=r._extremes[k],w=m.findExtremes(n,y,x.extendFlat({tozero:p.opts.tozero},{padded:!0}));p.min=p.min.concat(w.min),p.max=p.max.concat(w.max)}}},{"../../lib":515,"../../plots/cartesian/axes":566,"../../registry":647,"./compute_error":393,"fast-isnumeric":190}],393:[function(e,B,V){B.exports=function(m){var x=m.type,t=m.symmetric;if(x==="data"){var a=m.array||[];if(t)return function(s,o){var y=+a[o];return[y,y]};var i=m.arrayminus||[];return function(s,o){var y=+a[o],g=+i[o];return!isNaN(y)||!isNaN(g)?[g||0,y||0]:[NaN,NaN]}}else{var r=f(x,m.value),n=f(x,m.valueminus);return t||m.valueminus===void 0?function(s){var o=r(s);return[o,o]}:function(s){return[n(s),r(s)]}}};function f(l,m){if(l==="percent")return function(x){return Math.abs(x*m/100)};if(l==="constant")return function(){return Math.abs(m)};if(l==="sqrt")return function(x){return Math.sqrt(Math.abs(x))}}},{}],394:[function(e,B,V){var f=e("fast-isnumeric"),l=e("../../registry"),m=e("../../lib"),x=e("../../plot_api/plot_template"),t=e("./attributes");B.exports=function(a,i,r,n){var d="error_"+n.axis,s=x.newContainer(i,d),o=a[d]||{};function y(c,A){return m.coerce(o,s,t,c,A)}var g=o.array!==void 0||o.value!==void 0||o.type==="sqrt",b=y("visible",g);if(b!==!1){var v=y("type","array"in o?"data":"percent"),_=!0;v!=="sqrt"&&(_=y("symmetric",!((v==="data"?"arrayminus":"valueminus")in o))),v==="data"?(y("array"),y("traceref"),_||(y("arrayminus"),y("tracerefminus"))):(v==="percent"||v==="constant")&&(y("value"),_||y("valueminus"));var u="copy_"+n.inherit+"style";if(n.inherit){var T=i["error_"+n.inherit];(T||{}).visible&&y(u,!(o.color||f(o.thickness)||f(o.width)))}(!n.inherit||!s[u])&&(y("color",r),y("thickness"),y("width",l.traceIs(i,"gl3d")?0:4))}}},{"../../lib":515,"../../plot_api/plot_template":555,"../../registry":647,"./attributes":391,"fast-isnumeric":190}],395:[function(e,B,V){var f=e("../../lib"),l=e("../../plot_api/edit_types").overrideAll,m=e("./attributes"),x={error_x:f.extendFlat({},m),error_y:f.extendFlat({},m)};delete x.error_x.copy_zstyle,delete x.error_y.copy_zstyle,delete x.error_y.copy_ystyle;var t={error_x:f.extendFlat({},m),error_y:f.extendFlat({},m),error_z:f.extendFlat({},m)};delete t.error_x.copy_ystyle,delete t.error_y.copy_ystyle,delete t.error_z.copy_ystyle,delete t.error_z.copy_zstyle,B.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:x,bar:x,histogram:x,scatter3d:l(t,"calc","nested"),scattergl:l(x,"calc","nested")}},supplyDefaults:e("./defaults"),calc:e("./calc"),makeComputeError:e("./compute_error"),plot:e("./plot"),style:e("./style"),hoverInfo:a};function a(i,r,n){(r.error_y||{}).visible&&(n.yerr=i.yh-i.y,r.error_y.symmetric||(n.yerrneg=i.y-i.ys)),(r.error_x||{}).visible&&(n.xerr=i.xh-i.x,r.error_x.symmetric||(n.xerrneg=i.x-i.xs))}},{"../../lib":515,"../../plot_api/edit_types":548,"./attributes":391,"./calc":392,"./compute_error":393,"./defaults":394,"./plot":396,"./style":397}],396:[function(e,B,V){var f=e("@plotly/d3"),l=e("fast-isnumeric"),m=e("../drawing"),x=e("../../traces/scatter/subtypes");B.exports=function(i,r,n,d){var s,o=n.xaxis,y=n.yaxis,g=d&&d.duration>0;r.each(function(b){var v=b[0].trace,_=v.error_x||{},u=v.error_y||{},T;v.ids&&(T=function(p){return p.id});var c=x.hasMarkers(v)&&v.marker.maxdisplayed>0;!u.visible&&!_.visible&&(b=[]);var A=f.select(this).selectAll("g.errorbar").data(b,T);if(A.exit().remove(),!!b.length){_.visible||A.selectAll("path.xerror").remove(),u.visible||A.selectAll("path.yerror").remove(),A.style("opacity",1);var k=A.enter().append("g").classed("errorbar",!0);g&&k.style("opacity",0).transition().duration(d.duration).style("opacity",1),m.setClipUrl(A,n.layerClipId,i),A.each(function(p){var w=f.select(this),h=t(p,o,y);if(!(c&&!p.vis)){var D,S=w.select("path.yerror");if(u.visible&&l(h.x)&&l(h.yh)&&l(h.ys)){var M=u.width;D="M"+(h.x-M)+","+h.yh+"h"+2*M+"m-"+M+",0V"+h.ys,h.noYS||(D+="m-"+M+",0h"+2*M),s=!S.size(),s?S=w.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0):g&&(S=S.transition().duration(d.duration).ease(d.easing)),S.attr("d",D)}else S.remove();var L=w.select("path.xerror");if(_.visible&&l(h.y)&&l(h.xh)&&l(h.xs)){var R=(_.copy_ystyle?u:_).width;D="M"+h.xh+","+(h.y-R)+"v"+2*R+"m0,-"+R+"H"+h.xs,h.noXS||(D+="m0,-"+R+"v"+2*R),s=!L.size(),s?L=w.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0):g&&(L=L.transition().duration(d.duration).ease(d.easing)),L.attr("d",D)}else L.remove()}})}})};function t(a,i,r){var n={x:i.c2p(a.x),y:r.c2p(a.y)};return a.yh!==void 0&&(n.yh=r.c2p(a.yh),n.ys=r.c2p(a.ys),l(n.ys)||(n.noYS=!0,n.ys=r.c2p(a.ys,!0))),a.xh!==void 0&&(n.xh=i.c2p(a.xh),n.xs=i.c2p(a.xs),l(n.xs)||(n.noXS=!0,n.xs=i.c2p(a.xs,!0))),n}},{"../../traces/scatter/subtypes":961,"../drawing":389,"@plotly/d3":58,"fast-isnumeric":190}],397:[function(e,B,V){var f=e("@plotly/d3"),l=e("../color");B.exports=function(x){x.each(function(t){var a=t[0].trace,i=a.error_y||{},r=a.error_x||{},n=f.select(this);n.selectAll("path.yerror").style("stroke-width",i.thickness+"px").call(l.stroke,i.color),r.copy_ystyle&&(r=i),n.selectAll("path.xerror").style("stroke-width",r.thickness+"px").call(l.stroke,r.color)})}},{"../color":367,"@plotly/d3":58}],398:[function(e,B,V){var f=e("../../plots/font_attributes"),l=e("./layout_attributes").hoverlabel,m=e("../../lib/extend").extendFlat;B.exports={hoverlabel:{bgcolor:m({},l.bgcolor,{arrayOk:!0}),bordercolor:m({},l.bordercolor,{arrayOk:!0}),font:f({arrayOk:!0,editType:"none"}),align:m({},l.align,{arrayOk:!0}),namelength:m({},l.namelength,{arrayOk:!0}),editType:"none"}}},{"../../lib/extend":505,"../../plots/font_attributes":594,"./layout_attributes":408}],399:[function(e,B,V){var f=e("../../lib"),l=e("../../registry");B.exports=function(t){var a=t.calcdata,i=t._fullLayout;function r(y){return function(g){return f.coerceHoverinfo({hoverinfo:g},{_module:y._module},i)}}for(var n=0;n<a.length;n++){var d=a[n],s=d[0].trace;if(!l.traceIs(s,"pie-like")){var o=l.traceIs(s,"2dMap")?m:f.fillArray;o(s.hoverinfo,d,"hi",r(s)),s.hovertemplate&&o(s.hovertemplate,d,"ht"),s.hoverlabel&&(o(s.hoverlabel.bgcolor,d,"hbg"),o(s.hoverlabel.bordercolor,d,"hbc"),o(s.hoverlabel.font.size,d,"hts"),o(s.hoverlabel.font.color,d,"htc"),o(s.hoverlabel.font.family,d,"htf"),o(s.hoverlabel.namelength,d,"hnl"),o(s.hoverlabel.align,d,"hta"))}}};function m(x,t,a,i){i=i||f.identity,Array.isArray(x)&&(t[0][a]=i(x))}},{"../../lib":515,"../../registry":647}],400:[function(e,B,V){var f=e("../../registry"),l=e("./hover").hover;B.exports=function(x,t,a){var i=f.getComponentMethod("annotations","onClick")(x,x._hoverdata);a!==void 0&&l(x,t,a,!0);function r(){x.emit("plotly_click",{points:x._hoverdata,event:t})}x._hoverdata&&t&&t.target&&(i&&i.then?i.then(r):r(),t.stopImmediatePropagation&&t.stopImmediatePropagation())}},{"../../registry":647,"./hover":404}],401:[function(e,B,V){B.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],402:[function(e,B,V){var f=e("../../lib"),l=e("./attributes"),m=e("./hoverlabel_defaults");B.exports=function(t,a,i,r){function n(s,o){return f.coerce(t,a,l,s,o)}var d=f.extendFlat({},r.hoverlabel);a.hovertemplate&&(d.namelength=-1),m(t,a,n,d)}},{"../../lib":515,"./attributes":398,"./hoverlabel_defaults":405}],403:[function(e,B,V){var f=e("../../lib");V.getSubplot=function(i){return i.subplot||i.xaxis+i.yaxis||i.geo},V.isTraceInSubplots=function(i,r){if(i.type==="splom"){for(var n=i.xaxes||[],d=i.yaxes||[],s=0;s<n.length;s++)for(var o=0;o<d.length;o++)if(r.indexOf(n[s]+d[o])!==-1)return!0;return!1}return r.indexOf(V.getSubplot(i))!==-1},V.flat=function(i,r){for(var n=new Array(i.length),d=0;d<i.length;d++)n[d]=r;return n},V.p2c=function(i,r){for(var n=new Array(i.length),d=0;d<i.length;d++)n[d]=i[d].p2c(r);return n},V.getDistanceFunction=function(i,r,n,d){return i==="closest"?d||V.quadrature(r,n):i.charAt(0)==="x"?r:n},V.getClosest=function(i,r,n){if(n.index!==!1)n.index>=0&&n.index<i.length?n.distance=0:n.index=!1;else for(var d=0;d<i.length;d++){var s=r(i[d]);s<=n.distance&&(n.index=d,n.distance=s)}return n},V.inbox=function(i,r,n){return i*r<0||i===0?n:1/0},V.quadrature=function(i,r){return function(n){var d=i(n),s=r(n);return Math.sqrt(d*d+s*s)}},V.makeEventData=function(i,r,n){var d="index"in i?i.index:i.pointNumber,s={data:r._input,fullData:r,curveNumber:r.index,pointNumber:d};if(r._indexToPoints){var o=r._indexToPoints[d];o.length===1?s.pointIndex=o[0]:s.pointIndices=o}else s.pointIndex=d;return r._module.eventData?s=r._module.eventData(s,i,r,n,d):("xVal"in i?s.x=i.xVal:"x"in i&&(s.x=i.x),"yVal"in i?s.y=i.yVal:"y"in i&&(s.y=i.y),i.xa&&(s.xaxis=i.xa),i.ya&&(s.yaxis=i.ya),i.zLabelVal!==void 0&&(s.z=i.zLabelVal)),V.appendArrayPointValue(s,r,d),s},V.appendArrayPointValue=function(i,r,n){var d=r._arrayAttrs;if(!!d)for(var s=0;s<d.length;s++){var o=d[s],y=m(o);if(i[y]===void 0){var g=f.nestedProperty(r,o).get(),b=x(g,n);b!==void 0&&(i[y]=b)}}},V.appendArrayMultiPointValues=function(i,r,n){var d=r._arrayAttrs;if(!!d)for(var s=0;s<d.length;s++){var o=d[s],y=m(o);if(i[y]===void 0){for(var g=f.nestedProperty(r,o).get(),b=new Array(n.length),v=0;v<n.length;v++)b[v]=x(g,n[v]);i[y]=b}}};var l={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function m(i){return l[i]||i}function x(i,r){if(Array.isArray(r)){if(Array.isArray(i)&&Array.isArray(i[r[0]]))return i[r[0]][r[1]]}else return i[r]}var t={x:!0,y:!0},a={"x unified":!0,"y unified":!0};V.isUnifiedHover=function(i){return typeof i!="string"?!1:!!a[i]},V.isXYhover=function(i){return typeof i!="string"?!1:!!t[i]}},{"../../lib":515}],404:[function(e,B,V){var f=e("@plotly/d3"),l=e("fast-isnumeric"),m=e("tinycolor2"),x=e("../../lib"),t=x.strTranslate,a=x.strRotate,i=e("../../lib/events"),r=e("../../lib/svg_text_utils"),n=e("../../lib/override_cursor"),d=e("../drawing"),s=e("../color"),o=e("../dragelement"),y=e("../../plots/cartesian/axes"),g=e("../../registry"),b=e("./helpers"),v=e("./constants"),_=e("../legend/defaults"),u=e("../legend/draw"),T=v.YANGLE,c=Math.PI*T/180,A=1/Math.sin(c),k=Math.cos(c),p=Math.sin(c),w=v.HOVERARROWSIZE,h=v.HOVERTEXTPAD,D={box:!0,ohlc:!0,violin:!0,candlestick:!0},S={scatter:!0,scattergl:!0,splom:!0};V.hover=function(H,et,q,W){H=x.getGraphDiv(H);var K=et.target;x.throttle(H._fullLayout._uid+v.HOVERID,v.HOVERMINTIME,function(){M(H,et,q,W,K)})},V.loneHover=function(H,et){var q=!0;Array.isArray(H)||(q=!1,H=[H]);var W=et.gd,K=st(W),nt=at(W),it=H.map(function(kt){var zt=kt._x0||kt.x0||kt.x||0,Rt=kt._x1||kt.x1||kt.x||0,Gt=kt._y0||kt.y0||kt.y||0,wt=kt._y1||kt.y1||kt.y||0,It=kt.eventData;if(It){var $t=Math.min(zt,Rt),Qt=Math.max(zt,Rt),Nt=Math.min(Gt,wt),Pt=Math.max(Gt,wt),Yt=kt.trace;if(g.traceIs(Yt,"gl3d")){var ve=W._fullLayout[Yt.scene]._scene.container,Re=ve.offsetLeft,ir=ve.offsetTop;$t+=Re,Qt+=Re,Nt+=ir,Pt+=ir}It.bbox={x0:$t+nt,x1:Qt+nt,y0:Nt+K,y1:Pt+K},et.inOut_bbox&&et.inOut_bbox.push(It.bbox)}else It=!1;return{color:kt.color||s.defaultLine,x0:kt.x0||kt.x||0,x1:kt.x1||kt.x||0,y0:kt.y0||kt.y||0,y1:kt.y1||kt.y||0,xLabel:kt.xLabel,yLabel:kt.yLabel,zLabel:kt.zLabel,text:kt.text,name:kt.name,idealAlign:kt.idealAlign,borderColor:kt.borderColor,fontFamily:kt.fontFamily,fontSize:kt.fontSize,fontColor:kt.fontColor,nameLength:kt.nameLength,textAlign:kt.textAlign,trace:kt.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:kt.hovertemplate||!1,hovertemplateLabels:kt.hovertemplateLabels||!1,eventData:It}}),ot=!1,ct=z(it,{gd:W,hovermode:"closest",rotateLabels:ot,bgColor:et.bgColor||s.background,container:f.select(et.container),outerContainer:et.outerContainer||et.container}),bt=5,ut=0,pt=0;ct.sort(function(kt,zt){return kt.y0-zt.y0}).each(function(kt,zt){var Rt=kt.y0-kt.by/2;Rt-bt<ut?kt.offset=ut-Rt+bt:kt.offset=0,ut=Rt+kt.by+kt.offset,zt===et.anchorIndex&&(pt=kt.offset)}).each(function(kt){kt.offset-=pt});var yt=W._fullLayout._invScaleX,Tt=W._fullLayout._invScaleY;return U(ct,ot,yt,Tt),q?ct:ct.node()};function M(F,H,et,q,W){et||(et="xy");var K=Array.isArray(et)?et:[et],nt=F._fullLayout,it=nt._plots||[],ot=it[et],ct=nt._has("cartesian");if(ot){var bt=ot.overlays.map(function(or){return or.id});K=K.concat(bt)}for(var ut=K.length,pt=new Array(ut),yt=new Array(ut),Tt=!1,kt=0;kt<ut;kt++){var zt=K[kt];if(it[zt])Tt=!0,pt[kt]=it[zt].xaxis,yt[kt]=it[zt].yaxis;else if(nt[zt]&&nt[zt]._subplot){var Rt=nt[zt]._subplot;pt[kt]=Rt.xaxis,yt[kt]=Rt.yaxis}else{x.warn("Unrecognized subplot: "+zt);return}}var Gt=H.hovermode||nt.hovermode;if(Gt&&!Tt&&(Gt="closest"),["x","y","closest","x unified","y unified"].indexOf(Gt)===-1||!F.calcdata||F.querySelector(".zoombox")||F._dragging)return o.unhoverRaw(F,H);var wt=nt.hoverdistance;wt===-1&&(wt=1/0);var It=nt.spikedistance;It===-1&&(It=1/0);var $t=[],Qt=[],Nt,Pt,Yt,ve,Re,ir,Ie,Be,Ye,ze,Ee,Wt,ee,Xt={hLinePoint:null,vLinePoint:null},St=!1;if(Array.isArray(H))for(Gt="array",Yt=0;Yt<H.length;Yt++)Re=F.calcdata[H[Yt].curveNumber||0],Re&&(ir=Re[0].trace,Re[0].trace.hoverinfo!=="skip"&&(Qt.push(Re),ir.orientation==="h"&&(St=!0)));else{for(ve=0;ve<F.calcdata.length;ve++)Re=F.calcdata[ve],ir=Re[0].trace,ir.hoverinfo!=="skip"&&b.isTraceInSubplots(ir,K)&&(Qt.push(Re),ir.orientation==="h"&&(St=!0));var Vt=!W,Zt,qt;if(Vt)"xpx"in H?Zt=H.xpx:Zt=pt[0]._length/2,"ypx"in H?qt=H.ypx:qt=yt[0]._length/2;else{if(i.triggerHandler(F,"plotly_beforehover",H)===!1)return;var Te=W.getBoundingClientRect();Zt=H.clientX-Te.left,qt=H.clientY-Te.top,nt._calcInverseTransform(F);var me=x.apply3DTransform(nt._invTransform)(Zt,qt);if(Zt=me[0],qt=me[1],Zt<0||Zt>pt[0]._length||qt<0||qt>yt[0]._length)return o.unhoverRaw(F,H)}if(H.pointerX=Zt+pt[0]._offset,H.pointerY=qt+yt[0]._offset,"xval"in H?Nt=b.flat(K,H.xval):Nt=b.p2c(pt,Zt),"yval"in H?Pt=b.flat(K,H.yval):Pt=b.p2c(yt,qt),!l(Nt[0])||!l(Pt[0]))return x.warn("Fx.hover failed",H,F),o.unhoverRaw(F,H)}var Ne=1/0;function Ke(or,Dr){for(ve=0;ve<Qt.length;ve++)if(Re=Qt[ve],!(!Re||!Re[0]||!Re[0].trace)&&(ir=Re[0].trace,!(ir.visible!==!0||ir._length===0)&&["carpet","contourcarpet"].indexOf(ir._module.name)===-1)){if(ir.type==="splom"?(Be=0,Ie=K[Be]):(Ie=b.getSubplot(ir),Be=K.indexOf(Ie)),Ye=Gt,b.isUnifiedHover(Ye)&&(Ye=Ye.charAt(0)),Wt={cd:Re,trace:ir,xa:pt[Be],ya:yt[Be],maxHoverDistance:wt,maxSpikeDistance:It,index:!1,distance:Math.min(Ne,wt),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:s.defaultLine,name:ir.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},nt[Ie]&&(Wt.subplot=nt[Ie]._subplot),nt._splomScenes&&nt._splomScenes[ir.uid]&&(Wt.scene=nt._splomScenes[ir.uid]),ee=$t.length,Ye==="array"){var Nr=H[ve];"pointNumber"in Nr?(Wt.index=Nr.pointNumber,Ye="closest"):(Ye="","xval"in Nr&&(ze=Nr.xval,Ye="x"),"yval"in Nr&&(Ee=Nr.yval,Ye=Ye?"closest":"y"))}else or!==void 0&&Dr!==void 0?(ze=or,Ee=Dr):(ze=Nt[Be],Ee=Pt[Be]);if(wt!==0)if(ir._module&&ir._module.hoverPoints){var Fr=ir._module.hoverPoints(Wt,ze,Ee,Ye,{finiteRange:!0,hoverLayer:nt._hoverlayer});if(Fr)for(var Ar,Xr=0;Xr<Fr.length;Xr++)Ar=Fr[Xr],l(Ar.x0)&&l(Ar.y0)&&$t.push(O(Ar,Gt))}else x.log("Unrecognized trace type in hover:",ir);if(Gt==="closest"&&$t.length>ee&&($t.splice(0,ee),Ne=$t[0].distance),ct&&It!==0&&$t.length===0){Wt.distance=It,Wt.index=!1;var Tn=ir._module.hoverPoints(Wt,ze,Ee,"closest",{hoverLayer:nt._hoverlayer});if(Tn&&(Tn=Tn.filter(function(yi){return yi.spikeDistance<=It})),Tn&&Tn.length){var un,Un=Tn.filter(function(yi){return yi.xa.showspikes&&yi.xa.spikesnap!=="hovered data"});if(Un.length){var Dn=Un[0];l(Dn.x0)&&l(Dn.y0)&&(un=Xe(Dn),(!Xt.vLinePoint||Xt.vLinePoint.spikeDistance>un.spikeDistance)&&(Xt.vLinePoint=un))}var Xn=Tn.filter(function(yi){return yi.ya.showspikes&&yi.ya.spikesnap!=="hovered data"});if(Xn.length){var Gn=Xn[0];l(Gn.x0)&&l(Gn.y0)&&(un=Xe(Gn),(!Xt.hLinePoint||Xt.hLinePoint.spikeDistance>un.spikeDistance)&&(Xt.hLinePoint=un))}}}}}Ke();function He(or,Dr,Nr){for(var Fr=null,Ar=1/0,Xr,Tn=0;Tn<or.length;Tn++)Xr=or[Tn].spikeDistance,Nr&&Tn===0&&(Xr=-1/0),Xr<=Ar&&Xr<=Dr&&(Fr=or[Tn],Ar=Xr);return Fr}function Xe(or){return or?{xa:or.xa,ya:or.ya,x:or.xSpike!==void 0?or.xSpike:(or.x0+or.x1)/2,y:or.ySpike!==void 0?or.ySpike:(or.y0+or.y1)/2,distance:or.distance,spikeDistance:or.spikeDistance,curveNumber:or.trace.index,color:or.color,pointNumber:or.index}:null}var er={fullLayout:nt,container:nt._hoverlayer,event:H},We=F._spikepoints,hr={vLinePoint:Xt.vLinePoint,hLinePoint:Xt.hLinePoint};F._spikepoints=hr;var Wr=function(){$t.sort(function(or,Dr){return or.distance-Dr.distance}),$t=X($t,Gt)};Wr();var dn=Gt.charAt(0),Qr=(dn==="x"||dn==="y")&&$t[0]&&S[$t[0].trace.type];if(ct&&It!==0&&$t.length!==0){var le=$t.filter(function(or){return or.ya.showspikes}),Qe=He(le,It,Qr);Xt.hLinePoint=Xe(Qe);var Ze=$t.filter(function(or){return or.xa.showspikes}),Ve=He(Ze,It,Qr);Xt.vLinePoint=Xe(Ve)}if($t.length===0){var _r=o.unhoverRaw(F,H);return ct&&(Xt.hLinePoint!==null||Xt.vLinePoint!==null)&&tt(We)&&G(F,Xt,er),_r}if(ct&&tt(We)&&G(F,Xt,er),b.isXYhover(Ye)&&$t[0].length!==0&&$t[0].trace.type!=="splom"){var oe=$t[0];D[oe.trace.type]?$t=$t.filter(function(or){return or.trace.index===oe.trace.index}):$t=[oe];var Ht=$t.length,te=J("x",oe,nt),ne=J("y",oe,nt);Ke(te,ne);var _e=[],Pe={},Et=0,Mt=function(or){var Dr=D[or.trace.type]?L(or):or.trace.index;if(!Pe[Dr])Et++,Pe[Dr]=Et,_e.push(or);else{var Nr=Pe[Dr]-1,Fr=_e[Nr];Nr>0&&Math.abs(or.distance)<Math.abs(Fr.distance)&&(_e[Nr]=or)}},se;for(se=0;se<Ht;se++)Mt($t[se]);for(se=$t.length-1;se>Ht-1;se--)Mt($t[se]);$t=_e,Wr()}var ce=F._hoverdata,de=[],Se=st(F),ye=at(F);for(Yt=0;Yt<$t.length;Yt++){var Ae=$t[Yt],Ge=b.makeEventData(Ae,Ae.trace,Ae.cd);if(Ae.hovertemplate!==!1){var sr=!1;Ae.cd[Ae.index]&&Ae.cd[Ae.index].ht&&(sr=Ae.cd[Ae.index].ht),Ae.hovertemplate=sr||Ae.trace.hovertemplate||!1}if(Ae.xa&&Ae.ya){var Er=Ae.x0+Ae.xa._offset,kr=Ae.x1+Ae.xa._offset,Mr=Ae.y0+Ae.ya._offset,Gr=Ae.y1+Ae.ya._offset,ar=Math.min(Er,kr),xr=Math.max(Er,kr),Ir=Math.min(Mr,Gr),Hr=Math.max(Mr,Gr);Ge.bbox={x0:ar+ye,x1:xr+ye,y0:Ir+Se,y1:Hr+Se}}Ae.eventData=[Ge],de.push(Ge)}F._hoverdata=de;var Cr=Gt==="y"&&(Qt.length>1||$t.length>1)||Gt==="closest"&&St&&$t.length>1,ae=s.combine(nt.plot_bgcolor||s.background,nt.paper_bgcolor),Le=z($t,{gd:F,hovermode:Gt,rotateLabels:Cr,bgColor:ae,container:nt._hoverlayer,outerContainer:nt._paper.node(),commonLabelOpts:nt.hoverlabel,hoverdistance:nt.hoverdistance});if(b.isUnifiedHover(Gt)||(I(Le,Cr?"xa":"ya",nt),U(Le,Cr,nt._invScaleX,nt._invScaleY)),W&&W.tagName){var $e=g.getComponentMethod("annotations","hasClickToShow")(F,de);n(f.select(W),$e?"pointer":"")}!W||q||!$(F,H,ce)||(ce&&F.emit("plotly_unhover",{event:H,points:ce}),F.emit("plotly_hover",{event:H,points:F._hoverdata,xaxes:pt,yaxes:yt,xvals:Nt,yvals:Pt}))}function L(F){return[F.trace.index,F.index,F.x0,F.y0,F.name,F.attr,F.xa?F.xa._id:"",F.ya?F.ya._id:""].join(",")}var R=/<extra>([\s\S]*)<\/extra>/;function z(F,H){var et=H.gd,q=et._fullLayout,W=H.hovermode,K=H.rotateLabels,nt=H.bgColor,it=H.container,ot=H.outerContainer,ct=H.commonLabelOpts||{};if(F.length===0)return[[]];var bt=H.fontFamily||v.HOVERFONT,ut=H.fontSize||v.HOVERFONTSIZE,pt=F[0],yt=pt.xa,Tt=pt.ya,kt=W.charAt(0),zt=pt[kt+"Label"],Rt=lt(et,ot),Gt=Rt.top,wt=Rt.width,It=Rt.height,$t=zt!==void 0&&pt.distance<=H.hoverdistance&&(W==="x"||W==="y");if($t){var Qt=!0,Nt,Pt;for(Nt=0;Nt<F.length;Nt++)if(Qt&&F[Nt].zLabel===void 0&&(Qt=!1),Pt=F[Nt].hoverinfo||F[Nt].trace.hoverinfo,Pt){var Yt=Array.isArray(Pt)?Pt:Pt.split("+");if(Yt.indexOf("all")===-1&&Yt.indexOf(W)===-1){$t=!1;break}}Qt&&($t=!1)}var ve=it.selectAll("g.axistext").data($t?[0]:[]);if(ve.enter().append("g").classed("axistext",!0),ve.exit().remove(),ve.each(function(){var Ve=f.select(this),_r=x.ensureSingle(Ve,"path","",function(Gr){Gr.style({"stroke-width":"1px"})}),oe=x.ensureSingle(Ve,"text","",function(Gr){Gr.attr("data-notex",1)}),Ht=ct.bgcolor||s.defaultLine,te=ct.bordercolor||s.contrast(Ht),ne=s.contrast(Ht),_e={family:ct.font.family||bt,size:ct.font.size||ut,color:ct.font.color||ne};_r.style({fill:Ht,stroke:te}),oe.text(zt).call(d.font,_e).call(r.positionText,0,0).call(r.convertToTspans,et),Ve.attr("transform","");var Pe=lt(et,oe.node()),Et,Mt;if(W==="x"){var se=yt.side==="top"?"-":"";oe.attr("text-anchor","middle").call(r.positionText,0,yt.side==="top"?Gt-Pe.bottom-w-h:Gt-Pe.top+w+h),Et=yt._offset+(pt.x0+pt.x1)/2,Mt=Tt._offset+(yt.side==="top"?0:Tt._length);var ce=Pe.width/2+h;Et<ce?(Et=ce,_r.attr("d","M-"+(ce-w)+",0L-"+(ce-w*2)+","+se+w+"H"+(h+Pe.width/2)+"v"+se+(h*2+Pe.height)+"H-"+ce+"V"+se+w+"Z")):Et>q.width-ce?(Et=q.width-ce,_r.attr("d","M"+(ce-w)+",0L"+ce+","+se+w+"v"+se+(h*2+Pe.height)+"H-"+ce+"V"+se+w+"H"+(ce-w*2)+"Z")):_r.attr("d","M0,0L"+w+","+se+w+"H"+(h+Pe.width/2)+"v"+se+(h*2+Pe.height)+"H-"+(h+Pe.width/2)+"V"+se+w+"H-"+w+"Z")}else{var de,Se,ye;Tt.side==="right"?(de="start",Se=1,ye="",Et=yt._offset+yt._length):(de="end",Se=-1,ye="-",Et=yt._offset),Mt=Tt._offset+(pt.y0+pt.y1)/2,oe.attr("text-anchor",de),_r.attr("d","M0,0L"+ye+w+","+w+"V"+(h+Pe.height/2)+"h"+ye+(h*2+Pe.width)+"V-"+(h+Pe.height/2)+"H"+ye+w+"V-"+w+"Z");var Ae=Pe.height/2,Ge=Gt-Pe.top-Ae,sr="clip"+q._uid+"commonlabel"+Tt._id,Er;if(Et<Pe.width+2*h+w){Er="M-"+(w+h)+"-"+Ae+"h-"+(Pe.width-h)+"V"+Ae+"h"+(Pe.width-h)+"Z";var kr=Pe.width-Et+h;r.positionText(oe,kr,Ge),de==="end"&&oe.selectAll("tspan").each(function(){var Gr=f.select(this),ar=d.tester.append("text").text(Gr.text()).call(d.font,_e),xr=lt(et,ar.node());Math.round(xr.width)<Math.round(Pe.width)&&Gr.attr("x",kr-xr.width),ar.remove()})}else r.positionText(oe,Se*(h+w),Ge),Er=null;var Mr=q._topclips.selectAll("#"+sr).data(Er?[0]:[]);Mr.enter().append("clipPath").attr("id",sr).append("path"),Mr.exit().remove(),Mr.select("path").attr("d",Er),d.setClipUrl(oe,Er?sr:null,et)}Ve.attr("transform",t(Et,Mt))}),b.isUnifiedHover(W)){it.selectAll("g.hovertext").remove();var Re=F.filter(function(Ve){return Ve.hoverinfo!=="none"});if(Re.length===0)return;var ir=q.hoverlabel,Ie=ir.font,Be={showlegend:!0,legend:{title:{text:zt,font:Ie},font:Ie,bgcolor:ir.bgcolor,bordercolor:ir.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:q.legend?q.legend.traceorder:void 0,orientation:"v"}},Ye={font:Ie};_(Be,Ye,et._fullData);var ze=Ye.legend;ze.entries=[];for(var Ee=0;Ee<Re.length;Ee++){var Wt=Re[Ee];if(Wt.hoverinfo!=="none"){var ee=P(Wt,!0,W,q,zt),Xt=ee[0],St=ee[1];Wt.name=St,St!==""?Wt.text=St+" : "+Xt:Wt.text=Xt;var Vt=Wt.cd[Wt.index];Vt&&(Vt.mc&&(Wt.mc=Vt.mc),Vt.mcc&&(Wt.mc=Vt.mcc),Vt.mlc&&(Wt.mlc=Vt.mlc),Vt.mlcc&&(Wt.mlc=Vt.mlcc),Vt.mlw&&(Wt.mlw=Vt.mlw),Vt.mrc&&(Wt.mrc=Vt.mrc),Vt.dir&&(Wt.dir=Vt.dir)),Wt._distinct=!0,ze.entries.push([Wt])}}ze.entries.sort(function(Ve,_r){return Ve[0].trace.index-_r[0].trace.index}),ze.layer=it,ze._inHover=!0,ze._groupTitleFont=ir.grouptitlefont,u(et,ze);var Zt=it.select("g.legend"),qt=lt(et,Zt.node()),Te=qt.width+2*h,me=qt.height+2*h,Ne=Re[0],Ke=(Ne.x0+Ne.x1)/2,He=(Ne.y0+Ne.y1)/2,Xe=!(g.traceIs(Ne.trace,"bar-like")||g.traceIs(Ne.trace,"box-violin")),er,We;kt==="y"?Xe?(We=He-h,er=He+h):(We=Math.min.apply(null,Re.map(function(Ve){return Math.min(Ve.y0,Ve.y1)})),er=Math.max.apply(null,Re.map(function(Ve){return Math.max(Ve.y0,Ve.y1)}))):We=er=x.mean(Re.map(function(Ve){return(Ve.y0+Ve.y1)/2}))-me/2;var hr,Wr;kt==="x"?Xe?(hr=Ke+h,Wr=Ke-h):(hr=Math.max.apply(null,Re.map(function(Ve){return Math.max(Ve.x0,Ve.x1)})),Wr=Math.min.apply(null,Re.map(function(Ve){return Math.min(Ve.x0,Ve.x1)}))):hr=Wr=x.mean(Re.map(function(Ve){return(Ve.x0+Ve.x1)/2}))-Te/2;var dn=yt._offset,Qr=Tt._offset;er+=Qr,hr+=dn,Wr+=dn-Te,We+=Qr-me;var le,Qe;return hr+Te<wt&&hr>=0?le=hr:Wr+Te<wt&&Wr>=0?le=Wr:dn+Te<wt?le=dn:hr-Ke<Ke-Wr+Te?le=wt-Te:le=0,le+=h,er+me<It&&er>=0?Qe=er:We+me<It&&We>=0?Qe=We:Qr+me<It?Qe=Qr:er-He<He-We+me?Qe=It-me:Qe=0,Qe+=h,Zt.attr("transform",t(le-1,Qe-1)),Zt}var Ze=it.selectAll("g.hovertext").data(F,function(Ve){return L(Ve)});return Ze.enter().append("g").classed("hovertext",!0).each(function(){var Ve=f.select(this);Ve.append("rect").call(s.fill,s.addOpacity(nt,.8)),Ve.append("text").classed("name",!0),Ve.append("path").style("stroke-width","1px"),Ve.append("text").classed("nums",!0).call(d.font,bt,ut)}),Ze.exit().remove(),Ze.each(function(Ve){var _r=f.select(this).attr("transform",""),oe=Ve.color;Array.isArray(oe)&&(oe=oe[Ve.eventData[0].pointNumber]);var Ht=Ve.bgcolor||oe,te=s.combine(s.opacity(Ht)?Ht:s.defaultLine,nt),ne=s.combine(s.opacity(oe)?oe:s.defaultLine,nt),_e=Ve.borderColor||s.contrast(te),Pe=P(Ve,$t,W,q,zt,_r),Et=Pe[0],Mt=Pe[1],se=_r.select("text.nums").call(d.font,Ve.fontFamily||bt,Ve.fontSize||ut,Ve.fontColor||_e).text(Et).attr("data-notex",1).call(r.positionText,0,0).call(r.convertToTspans,et),ce=_r.select("text.name"),de=0,Se=0;if(Mt&&Mt!==Et){ce.call(d.font,Ve.fontFamily||bt,Ve.fontSize||ut,ne).text(Mt).attr("data-notex",1).call(r.positionText,0,0).call(r.convertToTspans,et);var ye=lt(et,ce.node());de=ye.width+2*h,Se=ye.height+2*h}else ce.remove(),_r.select("rect").remove();_r.select("path").style({fill:te,stroke:_e});var Ae=Ve.xa._offset+(Ve.x0+Ve.x1)/2,Ge=Ve.ya._offset+(Ve.y0+Ve.y1)/2,sr=Math.abs(Ve.x1-Ve.x0),Er=Math.abs(Ve.y1-Ve.y0),kr=lt(et,se.node()),Mr=kr.width/q._invScaleX,Gr=kr.height/q._invScaleY;Ve.ty0=(Gt-kr.top)/q._invScaleY,Ve.bx=Mr+2*h,Ve.by=Math.max(Gr+2*h,Se),Ve.anchor="start",Ve.txwidth=Mr,Ve.tx2width=de,Ve.offset=0;var ar=(Mr+w+h+de)*q._invScaleX,xr,Ir;if(K)Ve.pos=Ae,xr=Ge+Er/2+ar<=It,Ir=Ge-Er/2-ar>=0,(Ve.idealAlign==="top"||!xr)&&Ir?(Ge-=Er/2,Ve.anchor="end"):xr?(Ge+=Er/2,Ve.anchor="start"):Ve.anchor="middle";else if(Ve.pos=Ge,xr=Ae+sr/2+ar<=wt,Ir=Ae-sr/2-ar>=0,(Ve.idealAlign==="left"||!xr)&&Ir)Ae-=sr/2,Ve.anchor="end";else if(xr)Ae+=sr/2,Ve.anchor="start";else{Ve.anchor="middle";var Hr=ar/2,Cr=Ae+Hr-wt,ae=Ae-Hr;Cr>0&&(Ae-=Cr),ae<0&&(Ae+=-ae)}se.attr("text-anchor",Ve.anchor),de&&ce.attr("text-anchor",Ve.anchor),_r.attr("transform",t(Ae,Ge)+(K?a(T):""))}),Ze}function P(F,H,et,q,W,K){var nt="",it="";F.nameOverride!==void 0&&(F.name=F.nameOverride),F.name&&(F.trace._meta&&(F.name=x.templateString(F.name,F.trace._meta)),nt=Z(F.name,F.nameLength));var ot=et.charAt(0),ct=ot==="x"?"y":"x";F.zLabel!==void 0?(F.xLabel!==void 0&&(it+="x: "+F.xLabel+"<br>"),F.yLabel!==void 0&&(it+="y: "+F.yLabel+"<br>"),F.trace.type!=="choropleth"&&F.trace.type!=="choroplethmapbox"&&(it+=(it?"z: ":"")+F.zLabel)):H&&F[ot+"Label"]===W?it=F[ct+"Label"]||"":F.xLabel===void 0?F.yLabel!==void 0&&F.trace.type!=="scattercarpet"&&(it=F.yLabel):F.yLabel===void 0?it=F.xLabel:it="("+F.xLabel+", "+F.yLabel+")",(F.text||F.text===0)&&!Array.isArray(F.text)&&(it+=(it?"<br>":"")+F.text),F.extraText!==void 0&&(it+=(it?"<br>":"")+F.extraText),K&&it===""&&!F.hovertemplate&&(nt===""&&K.remove(),it=nt);var bt=F.hovertemplate||!1;if(bt){var ut=F.hovertemplateLabels||F;F[ot+"Label"]!==W&&(ut[ot+"other"]=ut[ot+"Val"],ut[ot+"otherLabel"]=ut[ot+"Label"]),it=x.hovertemplateString(bt,ut,q._d3locale,F.eventData[0]||{},F.trace._meta),it=it.replace(R,function(pt,yt){return nt=Z(yt,F.nameLength),""})}return[it,nt]}function I(F,H,et){var q=0,W=1,K=F.size(),nt=new Array(K),it=0;F.each(function(Nt){var Pt=Nt[H],Yt=Pt._id.charAt(0)==="x",ve=Pt.range;it===0&&ve&&ve[0]>ve[1]!==Yt&&(W=-1),nt[it++]=[{datum:Nt,traceIndex:Nt.trace.index,dp:0,pos:Nt.pos,posref:Nt.posref,size:Nt.by*(Yt?A:1)/2,pmin:0,pmax:Yt?et.width:et.height}]}),nt.sort(function(Nt,Pt){return Nt[0].posref-Pt[0].posref||W*(Pt[0].traceIndex-Nt[0].traceIndex)});var ot,ct,bt,ut,pt,yt,Tt;function kt(Nt){var Pt=Nt[0],Yt=Nt[Nt.length-1];if(ct=Pt.pmin-Pt.pos-Pt.dp+Pt.size,bt=Yt.pos+Yt.dp+Yt.size-Pt.pmax,ct>.01){for(pt=Nt.length-1;pt>=0;pt--)Nt[pt].dp+=ct;ot=!1}if(!(bt<.01)){if(ct<-.01){for(pt=Nt.length-1;pt>=0;pt--)Nt[pt].dp-=bt;ot=!1}if(!!ot){var ve=0;for(ut=0;ut<Nt.length;ut++)yt=Nt[ut],yt.pos+yt.dp+yt.size>Pt.pmax&&ve++;for(ut=Nt.length-1;ut>=0&&!(ve<=0);ut--)yt=Nt[ut],yt.pos>Pt.pmax-1&&(yt.del=!0,ve--);for(ut=0;ut<Nt.length&&!(ve<=0);ut++)if(yt=Nt[ut],yt.pos<Pt.pmin+1)for(yt.del=!0,ve--,bt=yt.size*2,pt=Nt.length-1;pt>=0;pt--)Nt[pt].dp-=bt;for(ut=Nt.length-1;ut>=0&&!(ve<=0);ut--)yt=Nt[ut],yt.pos+yt.dp+yt.size>Pt.pmax&&(yt.del=!0,ve--)}}}for(;!ot&&q<=K;){for(q++,ot=!0,ut=0;ut<nt.length-1;){var zt=nt[ut],Rt=nt[ut+1],Gt=zt[zt.length-1],wt=Rt[0];if(ct=Gt.pos+Gt.dp+Gt.size-wt.pos-wt.dp+wt.size,ct>.01&&Gt.pmin===wt.pmin&&Gt.pmax===wt.pmax){for(pt=Rt.length-1;pt>=0;pt--)Rt[pt].dp+=ct;for(zt.push.apply(zt,Rt),nt.splice(ut+1,1),Tt=0,pt=zt.length-1;pt>=0;pt--)Tt+=zt[pt].dp;for(bt=Tt/zt.length,pt=zt.length-1;pt>=0;pt--)zt[pt].dp-=bt;ot=!1}else ut++}nt.forEach(kt)}for(ut=nt.length-1;ut>=0;ut--){var It=nt[ut];for(pt=It.length-1;pt>=0;pt--){var $t=It[pt],Qt=$t.datum;Qt.offset=$t.dp,Qt.del=$t.del}}}function U(F,H,et,q){var W=function(nt){return nt*et},K=function(nt){return nt*q};F.each(function(nt){var it=f.select(this);if(nt.del)return it.remove();var ot=it.select("text.nums"),ct=nt.anchor,bt=ct==="end"?-1:1,ut={start:1,end:-1,middle:0}[ct],pt=ut*(w+h),yt=pt+ut*(nt.txwidth+h),Tt=0,kt=nt.offset,zt=ct==="middle";zt&&(pt-=nt.tx2width/2,yt+=nt.txwidth/2+h),H&&(kt*=-p,Tt=nt.offset*k),it.select("path").attr("d",zt?"M-"+W(nt.bx/2+nt.tx2width/2)+","+K(kt-nt.by/2)+"h"+W(nt.bx)+"v"+K(nt.by)+"h-"+W(nt.bx)+"Z":"M0,0L"+W(bt*w+Tt)+","+K(w+kt)+"v"+K(nt.by/2-w)+"h"+W(bt*nt.bx)+"v-"+K(nt.by)+"H"+W(bt*w+Tt)+"V"+K(kt-w)+"Z");var Rt=Tt+pt,Gt=kt+nt.ty0-nt.by/2+h,wt=nt.textAlign||"auto";wt!=="auto"&&(wt==="left"&&ct!=="start"?(ot.attr("text-anchor","start"),Rt=zt?-nt.bx/2-nt.tx2width/2+h:-nt.bx-h):wt==="right"&&ct!=="end"&&(ot.attr("text-anchor","end"),Rt=zt?nt.bx/2-nt.tx2width/2-h:nt.bx+h)),ot.call(r.positionText,W(Rt),K(Gt)),nt.tx2width&&(it.select("text.name").call(r.positionText,W(yt+ut*h+Tt),K(kt+nt.ty0-nt.by/2+h)),it.select("rect").call(d.setRect,W(yt+(ut-1)*nt.tx2width/2+Tt),K(kt-nt.by/2-1),W(nt.tx2width),K(nt.by+2)))})}function O(F,H){var et=F.index,q=F.trace||{},W=F.cd[0],K=F.cd[et]||{};function nt(pt){return pt||l(pt)&&pt===0}var it=Array.isArray(et)?function(pt,yt){var Tt=x.castOption(W,et,pt);return nt(Tt)?Tt:x.extractOption({},q,"",yt)}:function(pt,yt){return x.extractOption(K,q,pt,yt)};function ot(pt,yt,Tt){var kt=it(yt,Tt);nt(kt)&&(F[pt]=kt)}if(ot("hoverinfo","hi","hoverinfo"),ot("bgcolor","hbg","hoverlabel.bgcolor"),ot("borderColor","hbc","hoverlabel.bordercolor"),ot("fontFamily","htf","hoverlabel.font.family"),ot("fontSize","hts","hoverlabel.font.size"),ot("fontColor","htc","hoverlabel.font.color"),ot("nameLength","hnl","hoverlabel.namelength"),ot("textAlign","hta","hoverlabel.align"),F.posref=H==="y"||H==="closest"&&q.orientation==="h"?F.xa._offset+(F.x0+F.x1)/2:F.ya._offset+(F.y0+F.y1)/2,F.x0=x.constrain(F.x0,0,F.xa._length),F.x1=x.constrain(F.x1,0,F.xa._length),F.y0=x.constrain(F.y0,0,F.ya._length),F.y1=x.constrain(F.y1,0,F.ya._length),F.xLabelVal!==void 0&&(F.xLabel="xLabel"in F?F.xLabel:y.hoverLabelText(F.xa,F.xLabelVal,q.xhoverformat),F.xVal=F.xa.c2d(F.xLabelVal)),F.yLabelVal!==void 0&&(F.yLabel="yLabel"in F?F.yLabel:y.hoverLabelText(F.ya,F.yLabelVal,q.yhoverformat),F.yVal=F.ya.c2d(F.yLabelVal)),F.zLabelVal!==void 0&&F.zLabel===void 0&&(F.zLabel=String(F.zLabelVal)),!isNaN(F.xerr)&&!(F.xa.type==="log"&&F.xerr<=0)){var ct=y.tickText(F.xa,F.xa.c2l(F.xerr),"hover").text;F.xerrneg!==void 0?F.xLabel+=" +"+ct+" / -"+y.tickText(F.xa,F.xa.c2l(F.xerrneg),"hover").text:F.xLabel+=" \xB1 "+ct,H==="x"&&(F.distance+=1)}if(!isNaN(F.yerr)&&!(F.ya.type==="log"&&F.yerr<=0)){var bt=y.tickText(F.ya,F.ya.c2l(F.yerr),"hover").text;F.yerrneg!==void 0?F.yLabel+=" +"+bt+" / -"+y.tickText(F.ya,F.ya.c2l(F.yerrneg),"hover").text:F.yLabel+=" \xB1 "+bt,H==="y"&&(F.distance+=1)}var ut=F.hoverinfo||F.trace.hoverinfo;return ut&&ut!=="all"&&(ut=Array.isArray(ut)?ut:ut.split("+"),ut.indexOf("x")===-1&&(F.xLabel=void 0),ut.indexOf("y")===-1&&(F.yLabel=void 0),ut.indexOf("z")===-1&&(F.zLabel=void 0),ut.indexOf("text")===-1&&(F.text=void 0),ut.indexOf("name")===-1&&(F.name=void 0)),F}function G(F,H,et){var q=et.container,W=et.fullLayout,K=W._size,nt=et.event,it=!!H.hLinePoint,ot=!!H.vLinePoint,ct,bt;if(q.selectAll(".spikeline").remove(),!!(ot||it)){var ut=s.combine(W.plot_bgcolor,W.paper_bgcolor);if(it){var pt=H.hLinePoint,yt,Tt;ct=pt&&pt.xa,bt=pt&&pt.ya;var kt=bt.spikesnap;kt==="cursor"?(yt=nt.pointerX,Tt=nt.pointerY):(yt=ct._offset+pt.x,Tt=bt._offset+pt.y);var zt=m.readability(pt.color,ut)<1.5?s.contrast(ut):pt.color,Rt=bt.spikemode,Gt=bt.spikethickness,wt=bt.spikecolor||zt,It=y.getPxPosition(F,bt),$t,Qt;if(Rt.indexOf("toaxis")!==-1||Rt.indexOf("across")!==-1){if(Rt.indexOf("toaxis")!==-1&&($t=It,Qt=yt),Rt.indexOf("across")!==-1){var Nt=bt._counterDomainMin,Pt=bt._counterDomainMax;bt.anchor==="free"&&(Nt=Math.min(Nt,bt.position),Pt=Math.max(Pt,bt.position)),$t=K.l+Nt*K.w,Qt=K.l+Pt*K.w}q.insert("line",":first-child").attr({x1:$t,x2:Qt,y1:Tt,y2:Tt,"stroke-width":Gt,stroke:wt,"stroke-dasharray":d.dashStyle(bt.spikedash,Gt)}).classed("spikeline",!0).classed("crisp",!0),q.insert("line",":first-child").attr({x1:$t,x2:Qt,y1:Tt,y2:Tt,"stroke-width":Gt+2,stroke:ut}).classed("spikeline",!0).classed("crisp",!0)}Rt.indexOf("marker")!==-1&&q.insert("circle",":first-child").attr({cx:It+(bt.side!=="right"?Gt:-Gt),cy:Tt,r:Gt,fill:wt}).classed("spikeline",!0)}if(ot){var Yt=H.vLinePoint,ve,Re;ct=Yt&&Yt.xa,bt=Yt&&Yt.ya;var ir=ct.spikesnap;ir==="cursor"?(ve=nt.pointerX,Re=nt.pointerY):(ve=ct._offset+Yt.x,Re=bt._offset+Yt.y);var Ie=m.readability(Yt.color,ut)<1.5?s.contrast(ut):Yt.color,Be=ct.spikemode,Ye=ct.spikethickness,ze=ct.spikecolor||Ie,Ee=y.getPxPosition(F,ct),Wt,ee;if(Be.indexOf("toaxis")!==-1||Be.indexOf("across")!==-1){if(Be.indexOf("toaxis")!==-1&&(Wt=Ee,ee=Re),Be.indexOf("across")!==-1){var Xt=ct._counterDomainMin,St=ct._counterDomainMax;ct.anchor==="free"&&(Xt=Math.min(Xt,ct.position),St=Math.max(St,ct.position)),Wt=K.t+(1-St)*K.h,ee=K.t+(1-Xt)*K.h}q.insert("line",":first-child").attr({x1:ve,x2:ve,y1:Wt,y2:ee,"stroke-width":Ye,stroke:ze,"stroke-dasharray":d.dashStyle(ct.spikedash,Ye)}).classed("spikeline",!0).classed("crisp",!0),q.insert("line",":first-child").attr({x1:ve,x2:ve,y1:Wt,y2:ee,"stroke-width":Ye+2,stroke:ut}).classed("spikeline",!0).classed("crisp",!0)}Be.indexOf("marker")!==-1&&q.insert("circle",":first-child").attr({cx:ve,cy:Ee-(ct.side!=="top"?Ye:-Ye),r:Ye,fill:ze}).classed("spikeline",!0)}}}function $(F,H,et){if(!et||et.length!==F._hoverdata.length)return!0;for(var q=et.length-1;q>=0;q--){var W=et[q],K=F._hoverdata[q];if(W.curveNumber!==K.curveNumber||String(W.pointNumber)!==String(K.pointNumber)||String(W.pointNumbers)!==String(K.pointNumbers))return!0}return!1}function tt(F,H){return!H||H.vLinePoint!==F._spikepoints.vLinePoint||H.hLinePoint!==F._spikepoints.hLinePoint}function Z(F,H){return r.plainText(F||"",{len:H,allowedTags:["br","sub","sup","b","i","em"]})}function X(F,H){for(var et=H.charAt(0),q=[],W=[],K=[],nt=0;nt<F.length;nt++){var it=F[nt];g.traceIs(it.trace,"bar-like")||g.traceIs(it.trace,"box-violin")?K.push(it):it.trace[et+"period"]?W.push(it):q.push(it)}return q.concat(W).concat(K)}function J(F,H,et){var q=H[F+"a"],W=H[F+"Val"],K=H.cd[0];if(q.type==="category")W=q._categoriesMap[W];else if(q.type==="date"){var nt=H.trace[F+"periodalignment"];if(nt){var it=H.cd[H.index],ot=it[F+"Start"];ot===void 0&&(ot=it[F]);var ct=it[F+"End"];ct===void 0&&(ct=it[F]);var bt=ct-ot;nt==="end"?W+=bt:nt==="middle"&&(W+=bt/2)}W=q.d2c(W)}return K&&K.t&&K.t.posLetter===q._id&&(et.boxmode==="group"||et.violinmode==="group")&&(W+=K.t.dPos),W}function st(F){return F.offsetTop+F.clientTop}function at(F){return F.offsetLeft+F.clientLeft}function lt(F,H){var et=F._fullLayout,q=H.getBoundingClientRect(),W=q.x,K=q.y,nt=W+q.width,it=K+q.height,ot=x.apply3DTransform(et._invTransform)(W,K),ct=x.apply3DTransform(et._invTransform)(nt,it),bt=ot[0],ut=ot[1],pt=ct[0],yt=ct[1];return{x:bt,y:ut,width:pt-bt,height:yt-ut,top:Math.min(ut,yt),left:Math.min(bt,pt),right:Math.max(bt,pt),bottom:Math.max(ut,yt)}}},{"../../lib":515,"../../lib/events":504,"../../lib/override_cursor":526,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"../../registry":647,"../color":367,"../dragelement":386,"../drawing":389,"../legend/defaults":419,"../legend/draw":420,"./constants":401,"./helpers":403,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:313}],405:[function(e,B,V){var f=e("../../lib"),l=e("../color"),m=e("./helpers").isUnifiedHover;B.exports=function(t,a,i,r){r=r||{};var n=a.legend;function d(s){r.font[s]||(r.font[s]=n?a.legend.font[s]:a.font[s])}a&&m(a.hovermode)&&(r.font||(r.font={}),d("size"),d("family"),d("color"),n?(r.bgcolor||(r.bgcolor=l.combine(a.legend.bgcolor,a.paper_bgcolor)),r.bordercolor||(r.bordercolor=a.legend.bordercolor)):r.bgcolor||(r.bgcolor=a.paper_bgcolor)),i("hoverlabel.bgcolor",r.bgcolor),i("hoverlabel.bordercolor",r.bordercolor),i("hoverlabel.namelength",r.namelength),f.coerceFont(i,"hoverlabel.font",r.font),i("hoverlabel.align",r.align)}},{"../../lib":515,"../color":367,"./helpers":403}],406:[function(e,B,V){var f=e("../../lib"),l=e("./layout_attributes");B.exports=function(x,t){function a(i,r){return t[i]!==void 0?t[i]:f.coerce(x,t,l,i,r)}return a("clickmode"),a("hovermode")}},{"../../lib":515,"./layout_attributes":408}],407:[function(e,B,V){var f=e("@plotly/d3"),l=e("../../lib"),m=e("../dragelement"),x=e("./helpers"),t=e("./layout_attributes"),a=e("./hover");B.exports={moduleType:"component",name:"fx",constants:e("./constants"),schema:{layout:t},attributes:e("./attributes"),layoutAttributes:t,supplyLayoutGlobalDefaults:e("./layout_global_defaults"),supplyDefaults:e("./defaults"),supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),getDistanceFunction:x.getDistanceFunction,getClosest:x.getClosest,inbox:x.inbox,quadrature:x.quadrature,appendArrayPointValue:x.appendArrayPointValue,castHoverOption:r,castHoverinfo:n,hover:a.hover,unhover:m.unhover,loneHover:a.loneHover,loneUnhover:i,click:e("./click")};function i(d){var s=l.isD3Selection(d)?d:f.select(d);s.selectAll("g.hovertext").remove(),s.selectAll(".spikeline").remove()}function r(d,s,o){return l.castOption(d,s,"hoverlabel."+o)}function n(d,s,o){function y(g){return l.coerceHoverinfo({hoverinfo:g},{_module:d._module},s)}return l.castOption(d,o,"hoverinfo",y)}},{"../../lib":515,"../dragelement":386,"./attributes":398,"./calc":399,"./click":400,"./constants":401,"./defaults":402,"./helpers":403,"./hover":404,"./layout_attributes":408,"./layout_defaults":409,"./layout_global_defaults":410,"@plotly/d3":58}],408:[function(e,B,V){var f=e("./constants"),l=e("../../plots/font_attributes"),m=l({editType:"none"});m.family.dflt=f.HOVERFONT,m.size.dflt=f.HOVERFONTSIZE,B.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:m,grouptitlefont:l({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},{"../../plots/font_attributes":594,"./constants":401}],409:[function(e,B,V){var f=e("../../lib"),l=e("./layout_attributes"),m=e("./hovermode_defaults"),x=e("./hoverlabel_defaults");B.exports=function(a,i){function r(g,b){return f.coerce(a,i,l,g,b)}var n=m(a,i);n&&(r("hoverdistance"),r("spikedistance"));var d=r("dragmode");d==="select"&&r("selectdirection");var s=i._has("mapbox"),o=i._has("geo"),y=i._basePlotModules.length;i.dragmode==="zoom"&&((s||o)&&y===1||s&&o&&y===2)&&(i.dragmode="pan"),x(a,i,r),f.coerceFont(r,"hoverlabel.grouptitlefont",i.hoverlabel.font)}},{"../../lib":515,"./hoverlabel_defaults":405,"./hovermode_defaults":406,"./layout_attributes":408}],410:[function(e,B,V){var f=e("../../lib"),l=e("./hoverlabel_defaults"),m=e("./layout_attributes");B.exports=function(t,a){function i(r,n){return f.coerce(t,a,m,r,n)}l(t,a,i)}},{"../../lib":515,"./hoverlabel_defaults":405,"./layout_attributes":408}],411:[function(e,B,V){var f=e("../../lib"),l=e("../../lib/regex").counter,m=e("../../plots/domain").attributes,x=e("../../plots/cartesian/constants").idRegex,t=e("../../plot_api/plot_template"),a={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[l("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[x.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[x.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:m({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function i(o,y,g){var b=y[g+"axes"],v=Object.keys((o._splomAxes||{})[g]||{});if(Array.isArray(b))return b;if(v.length)return v}function r(o,y){var g=o.grid||{},b=i(y,g,"x"),v=i(y,g,"y");if(!o.grid&&!b&&!v)return;var _=Array.isArray(g.subplots)&&Array.isArray(g.subplots[0]),u=Array.isArray(b),T=Array.isArray(v),c=u&&b!==g.xaxes&&T&&v!==g.yaxes,A,k;_?(A=g.subplots.length,k=g.subplots[0].length):(T&&(A=v.length),u&&(k=b.length));var p=t.newContainer(y,"grid");function w(U,O){return f.coerce(g,p,a,U,O)}var h=w("rows",A),D=w("columns",k);if(!(h*D>1)){delete y.grid;return}if(!_&&!u&&!T){var S=w("pattern")==="independent";S&&(_=!0)}p._hasSubplotGrid=_;var M=w("roworder"),L=M==="top to bottom",R=_?.2:.1,z=_?.3:.1,P,I;c&&y._splomGridDflt&&(P=y._splomGridDflt.xside,I=y._splomGridDflt.yside),p._domains={x:n("x",w,R,P,D),y:n("y",w,z,I,h,L)}}function n(o,y,g,b,v,_){var u=y(o+"gap",g),T=y("domain."+o);y(o+"side",b);for(var c=new Array(v),A=T[0],k=(T[1]-A)/(v-u),p=k*(1-u),w=0;w<v;w++){var h=A+k*w;c[_?v-1-w:w]=[h,h+p]}return c}function d(o,y){var g=y.grid;if(!(!g||!g._domains)){var b=o.grid||{},v=y._subplots,_=g._hasSubplotGrid,u=g.rows,T=g.columns,c=g.pattern==="independent",A,k,p,w,h,D,S,M=g._axisMap={};if(_){var L=b.subplots||[];D=g.subplots=new Array(u);var R=1;for(A=0;A<u;A++){var z=D[A]=new Array(T),P=L[A]||[];for(k=0;k<T;k++)if(c?(h=R===1?"xy":"x"+R+"y"+R,R++):h=P[k],z[k]="",v.cartesian.indexOf(h)!==-1){if(S=h.indexOf("y"),p=h.slice(0,S),w=h.slice(S),M[p]!==void 0&&M[p]!==k||M[w]!==void 0&&M[w]!==A)continue;z[k]=h,M[p]=k,M[w]=A}}}else{var I=i(y,b,"x"),U=i(y,b,"y");g.xaxes=s(I,v.xaxis,T,M,"x"),g.yaxes=s(U,v.yaxis,u,M,"y")}var O=g._anchors={},G=g.roworder==="top to bottom";for(var $ in M){var tt=$.charAt(0),Z=g[tt+"side"],X,J,st;if(Z.length<8)O[$]="free";else if(tt==="x"){if(Z.charAt(0)==="t"===G?(X=0,J=1,st=u):(X=u-1,J=-1,st=-1),_){var at=M[$];for(A=X;A!==st;A+=J)if(h=D[A][at],!!h&&(S=h.indexOf("y"),h.slice(0,S)===$)){O[$]=h.slice(S);break}}else for(A=X;A!==st;A+=J)if(w=g.yaxes[A],v.cartesian.indexOf($+w)!==-1){O[$]=w;break}}else if(Z.charAt(0)==="l"?(X=0,J=1,st=T):(X=T-1,J=-1,st=-1),_){var lt=M[$];for(A=X;A!==st;A+=J)if(h=D[lt][A],!!h&&(S=h.indexOf("y"),h.slice(S)===$)){O[$]=h.slice(0,S);break}}else for(A=X;A!==st;A+=J)if(p=g.xaxes[A],v.cartesian.indexOf(p+$)!==-1){O[$]=p;break}}}}function s(o,y,g,b,v){var _=new Array(g),u;function T(c,A){y.indexOf(A)!==-1&&b[A]===void 0?(_[c]=A,b[A]=c):_[c]=""}if(Array.isArray(o))for(u=0;u<g;u++)T(u,o[u]);else for(T(0,v),u=1;u<g;u++)T(u,v+(u+1));return _}B.exports={moduleType:"component",name:"grid",schema:{layout:{grid:a}},layoutAttributes:a,sizeDefaults:r,contentDefaults:d}},{"../../lib":515,"../../lib/regex":532,"../../plot_api/plot_template":555,"../../plots/cartesian/constants":573,"../../plots/domain":593}],412:[function(e,B,V){var f=e("../../plots/cartesian/constants"),l=e("../../plot_api/plot_template").templatedArray;e("../../constants/axis_placeable_objects"),B.exports=l("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",f.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",f.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":484,"../../plot_api/plot_template":555,"../../plots/cartesian/constants":573}],413:[function(e,B,V){var f=e("fast-isnumeric"),l=e("../../lib/to_log_range");B.exports=function(x,t,a,i){t=t||{};var r=a==="log"&&t.type==="linear",n=a==="linear"&&t.type==="log";if(!!(r||n)){for(var d=x._fullLayout.images,s=t._id.charAt(0),o,y,g=0;g<d.length;g++)if(o=d[g],y="images["+g+"].",o[s+"ref"]===t._id){var b=o[s],v=o["size"+s],_=null,u=null;if(r){_=l(b,t.range);var T=v/Math.pow(10,_)/2;u=2*Math.log(T+Math.sqrt(1+T*T))/Math.LN10}else _=Math.pow(10,b),u=_*(Math.pow(10,v/2)-Math.pow(10,-v/2));f(_)?f(u)||(u=null):(_=null,u=null),i(y+s,_),i(y+"size"+s,u)}}}},{"../../lib/to_log_range":543,"fast-isnumeric":190}],414:[function(e,B,V){var f=e("../../lib"),l=e("../../plots/cartesian/axes"),m=e("../../plots/array_container_defaults"),x=e("./attributes"),t="images";B.exports=function(r,n){var d={name:t,handleItemDefaults:a};m(r,n,d)};function a(i,r,n){function d(T,c){return f.coerce(i,r,x,T,c)}var s=d("source"),o=d("visible",!!s);if(!o)return r;d("layer"),d("xanchor"),d("yanchor"),d("sizex"),d("sizey"),d("sizing"),d("opacity");for(var y={_fullLayout:n},g=["x","y"],b=0;b<2;b++){var v=g[b],_=l.coerceRef(i,r,y,v,"paper",void 0);if(_!=="paper"){var u=l.getFromId(y,_);u._imgIndices.push(r._index)}l.coercePosition(r,y,d,_,v,0)}return r}},{"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/cartesian/axes":566,"./attributes":412}],415:[function(e,B,V){var f=e("@plotly/d3"),l=e("../drawing"),m=e("../../plots/cartesian/axes"),x=e("../../plots/cartesian/axis_ids"),t=e("../../constants/xmlns_namespaces");B.exports=function(i){var r=i._fullLayout,n=[],d={},s=[],o,y;for(y=0;y<r.images.length;y++){var g=r.images[y];if(g.visible)if(g.layer==="below"&&g.xref!=="paper"&&g.yref!=="paper"){o=x.ref2id(g.xref)+x.ref2id(g.yref);var b=r._plots[o];if(!b){s.push(g);continue}b.mainplot&&(o=b.mainplot.id),d[o]||(d[o]=[]),d[o].push(g)}else g.layer==="above"?n.push(g):s.push(g)}var v={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-1/2},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-1/2},bottom:{sizing:"YMax",offset:-1}}};function _(w){var h=f.select(this);if(this._imgSrc!==w.source)if(h.attr("xmlns",t.svg),w.source&&w.source.slice(0,5)==="data:")h.attr("xlink:href",w.source),this._imgSrc=w.source;else{var D=new Promise(function(S){var M=new Image;this.img=M,M.setAttribute("crossOrigin","anonymous"),M.onerror=L,M.onload=function(){var R=document.createElement("canvas");R.width=this.width,R.height=this.height;var z=R.getContext("2d",{willReadFrequently:!0});z.drawImage(this,0,0);var P=R.toDataURL("image/png");h.attr("xlink:href",P),S()},h.on("error",L),M.src=w.source,this._imgSrc=w.source;function L(){h.remove(),S()}}.bind(this));i._promises.push(D)}}function u(w){var h=f.select(this),D=m.getFromId(i,w.xref),S=m.getFromId(i,w.yref),M=m.getRefType(w.xref)==="domain",L=m.getRefType(w.yref)==="domain",R=r._size,z,P;D!==void 0?z=typeof w.xref=="string"&&M?D._length*w.sizex:Math.abs(D.l2p(w.sizex)-D.l2p(0)):z=w.sizex*R.w,S!==void 0?P=typeof w.yref=="string"&&L?S._length*w.sizey:Math.abs(S.l2p(w.sizey)-S.l2p(0)):P=w.sizey*R.h;var I=z*v.x[w.xanchor].offset,U=P*v.y[w.yanchor].offset,O=v.x[w.xanchor].sizing+v.y[w.yanchor].sizing,G,$;switch(D!==void 0?G=typeof w.xref=="string"&&M?D._length*w.x+D._offset:D.r2p(w.x)+D._offset:G=w.x*R.w+R.l,G+=I,S!==void 0?$=typeof w.yref=="string"&&L?S._length*(1-w.y)+S._offset:S.r2p(w.y)+S._offset:$=R.h-w.y*R.h+R.t,$+=U,w.sizing){case"fill":O+=" slice";break;case"stretch":O="none";break}h.attr({x:G,y:$,width:z,height:P,preserveAspectRatio:O,opacity:w.opacity});var tt=D&&m.getRefType(w.xref)!=="domain"?D._id:"",Z=S&&m.getRefType(w.yref)!=="domain"?S._id:"",X=tt+Z;l.setClipUrl(h,X?"clip"+r._uid+X:null,i)}var T=r._imageLowerLayer.selectAll("image").data(s),c=r._imageUpperLayer.selectAll("image").data(n);T.enter().append("image"),c.enter().append("image"),T.exit().remove(),c.exit().remove(),T.each(function(w){_.bind(this)(w),u.bind(this)(w)}),c.each(function(w){_.bind(this)(w),u.bind(this)(w)});var A=Object.keys(r._plots);for(y=0;y<A.length;y++){o=A[y];var k=r._plots[o];if(!!k.imagelayer){var p=k.imagelayer.selectAll("image").data(d[o]||[]);p.enter().append("image"),p.exit().remove(),p.each(function(w){_.bind(this)(w),u.bind(this)(w)})}}}},{"../../constants/xmlns_namespaces":492,"../../plots/cartesian/axes":566,"../../plots/cartesian/axis_ids":570,"../drawing":389,"@plotly/d3":58}],416:[function(e,B,V){B.exports={moduleType:"component",name:"images",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("images"),draw:e("./draw"),convertCoords:e("./convert_coords")}},{"../../plots/cartesian/include_components":577,"./attributes":412,"./convert_coords":413,"./defaults":414,"./draw":415}],417:[function(e,B,V){var f=e("../../plots/font_attributes"),l=e("../color/attributes");B.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:l.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:f({editType:"legend"}),grouptitlefont:f({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",min:-2,max:3,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:f({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left"],editType:"legend"},editType:"legend"},editType:"legend"}},{"../../plots/font_attributes":594,"../color/attributes":366}],418:[function(e,B,V){B.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},{}],419:[function(e,B,V){var f=e("../../registry"),l=e("../../lib"),m=e("../../plot_api/plot_template"),x=e("../../plots/attributes"),t=e("./attributes"),a=e("../../plots/layout_attributes"),i=e("./helpers");B.exports=function(n,d,s){var o=n.legend||{},y=m.newContainer(d,"legend");function g(P,I){return l.coerce(o,y,t,P,I)}for(var b,v=function(P,I){var U=b._input,O=b;return l.coerce(U,O,x,P,I)},_=d.font||{},u=l.coerceFont(g,"grouptitlefont",l.extendFlat({},_,{size:Math.round(_.size*1.1)})),T=0,c=!1,A="normal",k=0;k<s.length;k++)b=s[k],b.visible&&((b.showlegend||b._dfltShowLegend&&!(b._module&&b._module.attributes&&b._module.attributes.showlegend&&b._module.attributes.showlegend.dflt===!1))&&(T++,b.showlegend&&(c=!0,(f.traceIs(b,"pie-like")||b._input.showlegend===!0)&&T++),l.coerceFont(v,"legendgrouptitle.font",u)),(f.traceIs(b,"bar")&&d.barmode==="stack"||["tonextx","tonexty"].indexOf(b.fill)!==-1)&&(A=i.isGrouped({traceorder:A})?"grouped+reversed":"reversed"),b.legendgroup!==void 0&&b.legendgroup!==""&&(A=i.isReversed({traceorder:A})?"reversed+grouped":"grouped"));var p=l.coerce(n,d,a,"showlegend",c&&T>1);if(p===!1&&(d.legend=void 0),!(p===!1&&!o.uirevision)&&(g("uirevision",d.uirevision),p!==!1)){g("bgcolor",d.paper_bgcolor),g("bordercolor"),g("borderwidth");var w=l.coerceFont(g,"font",d.font),h=g("orientation"),D=h==="h",S,M,L;D?(S=0,f.getComponentMethod("rangeslider","isVisible")(n.xaxis)?(M=1.1,L="bottom"):(M=-.1,L="top")):(S=1.02,M=1,L="auto"),g("traceorder",A),i.isGrouped(d.legend)&&g("tracegroupgap"),g("itemsizing"),g("itemwidth"),g("itemclick"),g("itemdoubleclick"),g("groupclick"),g("x",S),g("xanchor"),g("y",M),g("yanchor",L),g("valign"),l.noneOrAll(o,y,["x","y"]);var R=g("title.text");if(R){g("title.side",D?"left":"top");var z=l.extendFlat({},w,{size:l.bigFont(w.size)});l.coerceFont(g,"title.font",z)}}}},{"../../lib":515,"../../plot_api/plot_template":555,"../../plots/attributes":562,"../../plots/layout_attributes":619,"../../registry":647,"./attributes":417,"./helpers":423}],420:[function(e,B,V){var f=e("@plotly/d3"),l=e("../../lib"),m=e("../../plots/plots"),x=e("../../registry"),t=e("../../lib/events"),a=e("../dragelement"),i=e("../drawing"),r=e("../color"),n=e("../../lib/svg_text_utils"),d=e("./handle_click"),s=e("./constants"),o=e("../../constants/alignment"),y=o.LINE_SPACING,g=o.FROM_TL,b=o.FROM_BR,v=e("./get_legend_data"),_=e("./style"),u=e("./helpers"),T=1;B.exports=function(I,U){return U||(U=I._fullLayout.legend||{}),c(I,U)};function c(P,I){var U=P._fullLayout,O="legend"+U._uid,G,$=I._inHover;if($?(G=I.layer,O+="-hover"):G=U._infolayer,!!G){P._legendMouseDownTime||(P._legendMouseDownTime=0);var tt;if($){if(!I.entries)return;tt=v(I.entries,I)}else{if(!P.calcdata)return;tt=U.showlegend&&v(P.calcdata,I)}var Z=U.hiddenlabels||[];if(!$&&(!U.showlegend||!tt.length))return G.selectAll(".legend").remove(),U._topdefs.select("#"+O).remove(),m.autoMargin(P,"legend");var X=l.ensureSingle(G,"g","legend",function(W){$||W.attr("pointer-events","all")}),J=l.ensureSingleById(U._topdefs,"clipPath",O,function(W){W.append("rect")}),st=l.ensureSingle(X,"rect","bg",function(W){W.attr("shape-rendering","crispEdges")});st.call(r.stroke,I.bordercolor).call(r.fill,I.bgcolor).style("stroke-width",I.borderwidth+"px");var at=l.ensureSingle(X,"g","scrollbox"),lt=I.title;if(I._titleWidth=0,I._titleHeight=0,lt.text){var F=l.ensureSingle(at,"text","legendtitletext");F.attr("text-anchor","start").call(i.font,lt.font).text(lt.text),h(F,at,P,I,T)}else at.selectAll(".legendtitletext").remove();var H=l.ensureSingle(X,"rect","scrollbar",function(W){W.attr(s.scrollBarEnterAttrs).call(r.fill,s.scrollBarColor)}),et=at.selectAll("g.groups").data(tt);et.enter().append("g").attr("class","groups"),et.exit().remove();var q=et.selectAll("g.traces").data(l.identity);q.enter().append("g").attr("class","traces"),q.exit().remove(),q.style("opacity",function(W){var K=W[0].trace;return x.traceIs(K,"pie-like")?Z.indexOf(W[0].label)!==-1?.5:1:K.visible==="legendonly"?.5:1}).each(function(){f.select(this).call(k,P,I)}).call(_,P,I).each(function(){$||f.select(this).call(w,P)}),l.syncOrAsync([m.previousPromises,function(){return M(P,et,q,I)},function(){var W=U._size,K=I.borderwidth;if(!$){var nt=L(P);if(nt)return;var it=W.l+W.w*I.x-g[R(I)]*I._width,ot=W.t+W.h*(1-I.y)-g[z(I)]*I._effHeight;if(U.margin.autoexpand){var ct=it,bt=ot;it=l.constrain(it,0,U.width-I._width),ot=l.constrain(ot,0,U.height-I._effHeight),it!==ct&&l.log("Constrain legend.x to make legend fit inside graph"),ot!==bt&&l.log("Constrain legend.y to make legend fit inside graph")}i.setTranslate(X,it,ot)}if(H.on(".drag",null),X.on("wheel",null),$||I._height<=I._maxHeight||P._context.staticPlot){var ut=I._effHeight;$&&(ut=I._height),st.attr({width:I._width-K,height:ut-K,x:K/2,y:K/2}),i.setTranslate(at,0,0),J.select("rect").attr({width:I._width-2*K,height:ut-2*K,x:K,y:K}),i.setClipUrl(at,O,P),i.setRect(H,0,0,0,0),delete I._scrollY}else{var pt=Math.max(s.scrollBarMinHeight,I._effHeight*I._effHeight/I._height),yt=I._effHeight-pt-2*s.scrollBarMargin,Tt=I._height-I._effHeight,kt=yt/Tt,zt=Math.min(I._scrollY||0,Tt);st.attr({width:I._width-2*K+s.scrollBarWidth+s.scrollBarMargin,height:I._effHeight-K,x:K/2,y:K/2}),J.select("rect").attr({width:I._width-2*K+s.scrollBarWidth+s.scrollBarMargin,height:I._effHeight-2*K,x:K,y:K+zt}),i.setClipUrl(at,O,P),Pt(zt,pt,kt),X.on("wheel",function(){zt=l.constrain(I._scrollY+f.event.deltaY/yt*Tt,0,Tt),Pt(zt,pt,kt),zt!==0&&zt!==Tt&&f.event.preventDefault()});var Rt,Gt,wt,It=function(Ie,Be,Ye){var ze=(Ye-Be)/kt+Ie;return l.constrain(ze,0,Tt)},$t=function(Ie,Be,Ye){var ze=(Be-Ye)/kt+Ie;return l.constrain(ze,0,Tt)},Qt=f.behavior.drag().on("dragstart",function(){var Ie=f.event.sourceEvent;Ie.type==="touchstart"?Rt=Ie.changedTouches[0].clientY:Rt=Ie.clientY,wt=zt}).on("drag",function(){var Ie=f.event.sourceEvent;Ie.buttons===2||Ie.ctrlKey||(Ie.type==="touchmove"?Gt=Ie.changedTouches[0].clientY:Gt=Ie.clientY,zt=It(wt,Rt,Gt),Pt(zt,pt,kt))});H.call(Qt);var Nt=f.behavior.drag().on("dragstart",function(){var Ie=f.event.sourceEvent;Ie.type==="touchstart"&&(Rt=Ie.changedTouches[0].clientY,wt=zt)}).on("drag",function(){var Ie=f.event.sourceEvent;Ie.type==="touchmove"&&(Gt=Ie.changedTouches[0].clientY,zt=$t(wt,Rt,Gt),Pt(zt,pt,kt))});at.call(Nt)}function Pt(Ie,Be,Ye){I._scrollY=P._fullLayout.legend._scrollY=Ie,i.setTranslate(at,0,-Ie),i.setRect(H,I._width,s.scrollBarMargin+Ie*Ye,s.scrollBarWidth,Be),J.select("rect").attr("y",K+Ie)}if(P._context.edits.legendPosition){var Yt,ve,Re,ir;X.classed("cursor-move",!0),a.init({element:X.node(),gd:P,prepFn:function(){var Ie=i.getTranslate(X);Re=Ie.x,ir=Ie.y},moveFn:function(Ie,Be){var Ye=Re+Ie,ze=ir+Be;i.setTranslate(X,Ye,ze),Yt=a.align(Ye,0,W.l,W.l+W.w,I.xanchor),ve=a.align(ze,0,W.t+W.h,W.t,I.yanchor)},doneFn:function(){Yt!==void 0&&ve!==void 0&&x.call("_guiRelayout",P,{"legend.x":Yt,"legend.y":ve})},clickFn:function(Ie,Be){var Ye=G.selectAll("g.traces").filter(function(){var ze=this.getBoundingClientRect();return Be.clientX>=ze.left&&Be.clientX<=ze.right&&Be.clientY>=ze.top&&Be.clientY<=ze.bottom});Ye.size()>0&&A(P,X,Ye,Ie,Be)}})}}],P)}}function A(P,I,U,O,G){var $=U.data()[0][0].trace,tt={event:G,node:U.node(),curveNumber:$.index,expandedIndex:$._expandedIndex,data:P.data,layout:P.layout,frames:P._transitionData._frames,config:P._context,fullData:P._fullData,fullLayout:P._fullLayout};$._group&&(tt.group=$._group),x.traceIs($,"pie-like")&&(tt.label=U.datum()[0].label);var Z=t.triggerHandler(P,"plotly_legendclick",tt);if(Z!==!1){if(O===1)I._clickTimeout=setTimeout(function(){!P._fullLayout||d(U,P,O)},P._context.doubleClickDelay);else if(O===2){I._clickTimeout&&clearTimeout(I._clickTimeout),P._legendMouseDownTime=0;var X=t.triggerHandler(P,"plotly_legenddoubleclick",tt);X!==!1&&d(U,P,O)}}}function k(P,I,U){var O=P.data()[0][0],G=O.trace,$=x.traceIs(G,"pie-like"),tt=!U._inHover&&I._context.edits.legendText&&!$,Z=U._maxNameLength,X,J;O.groupTitle?(X=O.groupTitle.text,J=O.groupTitle.font):(J=U.font,U.entries?X=O.text:(X=$?O.label:G.name,G._meta&&(X=l.templateString(X,G._meta))));var st=l.ensureSingle(P,"text","legendtext");st.attr("text-anchor","start").call(i.font,J).text(tt?p(X,Z):X);var at=U.itemwidth+s.itemGap*2;n.positionText(st,at,0),tt?st.call(n.makeEditable,{gd:I,text:X}).call(h,P,I,U).on("edit",function(lt){this.text(p(lt,Z)).call(h,P,I,U);var F=O.trace._fullInput||{},H={};if(x.hasTransform(F,"groupby")){var et=x.getTransformIndices(F,"groupby"),q=et[et.length-1],W=l.keyedContainer(F,"transforms["+q+"].styles","target","value.name");W.set(O.trace._group,lt),H=W.constructUpdate()}else H.name=lt;return x.call("_guiRestyle",I,H,G.index)}):h(st,P,I,U)}function p(P,I){var U=Math.max(4,I);if(P&&P.trim().length>=U/2)return P;P=P||"";for(var O=U-P.length;O>0;O--)P+=" ";return P}function w(P,I){var U=I._context.doubleClickDelay,O,G=1,$=l.ensureSingle(P,"rect","legendtoggle",function(tt){I._context.staticPlot||tt.style("cursor","pointer").attr("pointer-events","all"),tt.call(r.fill,"rgba(0,0,0,0)")});I._context.staticPlot||($.on("mousedown",function(){O=new Date().getTime(),O-I._legendMouseDownTime<U?G+=1:(G=1,I._legendMouseDownTime=O)}),$.on("mouseup",function(){if(!(I._dragged||I._editing)){var tt=I._fullLayout.legend;new Date().getTime()-I._legendMouseDownTime>U&&(G=Math.max(G-1,1)),A(I,tt,P,G,f.event)}}))}function h(P,I,U,O,G){O._inHover&&P.attr("data-notex",!0),n.convertToTspans(P,U,function(){D(I,U,O,G)})}function D(P,I,U,O){var G=P.data()[0][0];if(!U._inHover&&G&&!G.trace.showlegend){P.remove();return}var $=P.select("g[class*=math-group]"),tt=$.node();U||(U=I._fullLayout.legend);var Z=U.borderwidth,X;O===T?X=U.title.font:G.groupTitle?X=G.groupTitle.font:X=U.font;var J=X.size*y,st,at;if(tt){var lt=i.bBox(tt);st=lt.height,at=lt.width,O===T?i.setTranslate($,Z,Z+st*.75):i.setTranslate($,0,st*.25)}else{var F=P.select(O===T?".legendtitletext":".legendtext"),H=n.lineCount(F),et=F.node();if(st=J*H,at=et?i.bBox(et).width:0,O===T)U.title.side==="left"&&(at+=s.itemGap*2),n.positionText(F,Z+s.titlePad,Z+J);else{var q=s.itemGap*2+U.itemwidth;G.groupTitle&&(q=s.itemGap,at-=U.itemwidth),n.positionText(F,q,-J*((H-1)/2-.3))}}O===T?(U._titleWidth=at,U._titleHeight=st):(G.lineHeight=J,G.height=Math.max(st,16)+3,G.width=at)}function S(P){var I=0,U=0,O=P.title.side;return O&&(O.indexOf("left")!==-1&&(I=P._titleWidth),O.indexOf("top")!==-1&&(U=P._titleHeight)),[I,U]}function M(P,I,U,O){var G=P._fullLayout;O||(O=G.legend);var $=G._size,tt=u.isVertical(O),Z=u.isGrouped(O),X=O.borderwidth,J=2*X,st=s.itemGap,at=O.itemwidth+st*2,lt=2*(X+st),F=z(O),H=O.y<0||O.y===0&&F==="top",et=O.y>1||O.y===1&&F==="bottom",q=O.tracegroupgap;O._maxHeight=Math.max(H||et?G.height/2:$.h,30);var W=0;O._width=0,O._height=0;var K=S(O);if(tt)U.each(function(Yt){var ve=Yt[0].height;i.setTranslate(this,X+K[0],X+K[1]+O._height+ve/2+st),O._height+=ve,O._width=Math.max(O._width,Yt[0].width)}),W=at+O._width,O._width+=st+at+J,O._height+=lt,Z&&(I.each(function(Yt,ve){i.setTranslate(this,0,ve*O.tracegroupgap)}),O._height+=(O._lgroupsLength-1)*O.tracegroupgap);else{var nt=R(O),it=O.x<0||O.x===0&&nt==="right",ot=O.x>1||O.x===1&&nt==="left",ct=et||H,bt=G.width/2;O._maxWidth=Math.max(it?ct&&nt==="left"?$.l+$.w:bt:ot?ct&&nt==="right"?$.r+$.w:bt:$.w,2*at);var ut=0,pt=0;U.each(function(Yt){var ve=Yt[0].width+at;ut=Math.max(ut,ve),pt+=ve}),W=null;var yt=0;if(Z){var Tt=0,kt=0,zt=0;I.each(function(){var Yt=0,ve=0;f.select(this).selectAll("g.traces").each(function(ir){var Ie=ir[0].width,Be=ir[0].height;i.setTranslate(this,K[0],K[1]+X+st+Be/2+ve),ve+=Be,Yt=Math.max(Yt,at+Ie)});var Re=Yt+st;kt>0&&Re+X+kt>O._maxWidth?(yt=Math.max(yt,kt),kt=0,zt+=Tt+q,Tt=ve):Tt=Math.max(Tt,ve),i.setTranslate(this,kt,zt),kt+=Re}),O._width=Math.max(yt,kt)+X,O._height=zt+Tt+lt}else{var Rt=U.size(),Gt=pt+J+(Rt-1)*st<O._maxWidth,wt=0,It=0,$t=0,Qt=0;U.each(function(Yt){var ve=Yt[0].height,Re=at+Yt[0].width,ir=(Gt?Re:ut)+st;ir+X+It-st>=O._maxWidth&&(yt=Math.max(yt,Qt),It=0,$t+=wt,O._height+=wt,wt=0),i.setTranslate(this,K[0]+X+It,K[1]+X+$t+ve/2+st),Qt=It+Re+st,It+=ir,wt=Math.max(wt,ve)}),Gt?(O._width=It+J,O._height=wt+lt):(O._width=Math.max(yt,Qt)+J,O._height+=wt+lt)}}O._width=Math.ceil(Math.max(O._width+K[0],O._titleWidth+2*(X+s.titlePad))),O._height=Math.ceil(Math.max(O._height+K[1],O._titleHeight+2*(X+s.itemGap))),O._effHeight=Math.min(O._height,O._maxHeight);var Nt=P._context.edits,Pt=Nt.legendText||Nt.legendPosition;U.each(function(Yt){var ve=f.select(this).select(".legendtoggle"),Re=Yt[0].height,ir=Pt?at:W||at+Yt[0].width;tt||(ir+=st/2),i.setRect(ve,0,-Re/2,ir,Re)})}function L(P){var I=P._fullLayout,U=I.legend,O=R(U),G=z(U);return m.autoMargin(P,"legend",{x:U.x,y:U.y,l:U._width*g[O],r:U._width*b[O],b:U._effHeight*b[G],t:U._effHeight*g[G]})}function R(P){return l.isRightAnchor(P)?"right":l.isCenterAnchor(P)?"center":"left"}function z(P){return l.isBottomAnchor(P)?"bottom":l.isMiddleAnchor(P)?"middle":"top"}},{"../../constants/alignment":483,"../../lib":515,"../../lib/events":504,"../../lib/svg_text_utils":541,"../../plots/plots":628,"../../registry":647,"../color":367,"../dragelement":386,"../drawing":389,"./constants":418,"./get_legend_data":421,"./handle_click":422,"./helpers":423,"./style":425,"@plotly/d3":58}],421:[function(e,B,V){var f=e("../../registry"),l=e("./helpers");B.exports=function(x,t){var a=t._inHover,i=l.isGrouped(t),r=l.isReversed(t),n={},d=[],s=!1,o={},y=0,g=0,b,v;function _(U,O){if(U===""||!l.isGrouped(t)){var G="~~i"+y;d.push(G),n[G]=[O],y++}else d.indexOf(U)===-1?(d.push(U),s=!0,n[U]=[O]):n[U].push(O)}for(b=0;b<x.length;b++){var u=x[b],T=u[0],c=T.trace,A=c.legendgroup;if(!(!a&&(!c.visible||!c.showlegend)))if(f.traceIs(c,"pie-like"))for(o[A]||(o[A]={}),v=0;v<u.length;v++){var k=u[v].label;o[A][k]||(_(A,{label:k,color:u[v].color,i:u[v].i,trace:c,pts:u[v].pts}),o[A][k]=!0,g=Math.max(g,(k||"").length))}else _(A,T),g=Math.max(g,(c.name||"").length)}if(!d.length)return[];var p=!s||!i,w=[];for(b=0;b<d.length;b++){var h=n[d[b]];p?w.push(h[0]):w.push(h)}for(p&&(w=[w]),b=0;b<w.length;b++){var D=1/0;for(v=0;v<w[b].length;v++){var S=w[b][v].trace.legendrank;D>S&&(D=S)}w[b][0]._groupMinRank=D,w[b][0]._preGroupSort=b}var M=function(U,O){return U[0]._groupMinRank-O[0]._groupMinRank||U[0]._preGroupSort-O[0]._preGroupSort},L=function(U,O){return U.trace.legendrank-O.trace.legendrank||U._preSort-O._preSort};for(w.forEach(function(U,O){U[0]._preGroupSort=O}),w.sort(M),b=0;b<w.length;b++){w[b].forEach(function(U,O){U._preSort=O}),w[b].sort(L);var R=w[b][0].trace,z=null;for(v=0;v<w[b].length;v++){var P=w[b][v].trace.legendgrouptitle;if(P&&P.text){z=P,a&&(P.font=t._groupTitleFont);break}}if(r&&w[b].reverse(),z){var I=!1;for(v=0;v<w[b].length;v++)if(f.traceIs(w[b][v].trace,"pie-like")){I=!0;break}w[b].unshift({i:-1,groupTitle:z,noClick:I,trace:{showlegend:R.showlegend,legendgroup:R.legendgroup,visible:t.groupclick==="toggleitem"?!0:R.visible}})}for(v=0;v<w[b].length;v++)w[b][v]=[w[b][v]]}return t._lgroupsLength=w.length,t._maxNameLength=g,w}},{"../../registry":647,"./helpers":423}],422:[function(e,B,V){var f=e("../../lib"),l=e("../../registry"),m=!0;B.exports=function(t,a,i){var r=a._fullLayout;if(a._dragged||a._editing)return;var n=r.legend.itemclick,d=r.legend.itemdoubleclick,s=r.legend.groupclick;i===1&&n==="toggle"&&d==="toggleothers"&&m&&a.data&&a._context.showTips&&f.notifier(f._(a,"Double-click on legend to isolate one trace"),"long"),m=!1;var o;if(i===1?o=n:i===2&&(o=d),!o)return;var y=s==="togglegroup",g=r.hiddenlabels?r.hiddenlabels.slice():[],b=t.data()[0][0];if(b.groupTitle&&b.noClick)return;var v=a._fullData,_=b.trace,u=_.legendgroup,T,c,A,k,p,w,h={},D=[],S=[],M=[];function L(lt,F,H){var et=D.indexOf(lt),q=h[F];return q||(q=h[F]=[]),D.indexOf(lt)===-1&&(D.push(lt),et=D.length-1),q[et]=H,et}function R(lt,F){if(!(b.groupTitle&&!y)){var H=lt._fullInput;if(l.hasTransform(H,"groupby")){var et=S[H.index];if(!et){var q=l.getTransformIndices(H,"groupby"),W=q[q.length-1];et=f.keyedContainer(H,"transforms["+W+"].styles","target","value.visible"),S[H.index]=et}var K=et.get(lt._group);K===void 0&&(K=!0),K!==!1&&et.set(lt._group,F),M[H.index]=L(H.index,"visible",H.visible!==!1)}else{var nt=H.visible===!1?!1:F;L(H.index,"visible",nt)}}}if(l.traceIs(_,"pie-like")){var z=b.label,P=g.indexOf(z);o==="toggle"?P===-1?g.push(z):g.splice(P,1):o==="toggleothers"&&(g=[],a.calcdata[0].forEach(function(lt){z!==lt.label&&g.push(lt.label)}),a._fullLayout.hiddenlabels&&a._fullLayout.hiddenlabels.length===g.length&&P===-1&&(g=[])),l.call("_guiRelayout",a,"hiddenlabels",g)}else{var I=u&&u.length,U=[],O;if(I)for(T=0;T<v.length;T++)O=v[T],!!O.visible&&O.legendgroup===u&&U.push(T);if(o==="toggle"){var G;switch(_.visible){case!0:G="legendonly";break;case!1:G=!1;break;case"legendonly":G=!0;break}if(I)if(y)for(T=0;T<v.length;T++)v[T].visible!==!1&&v[T].legendgroup===u&&R(v[T],G);else R(_,G);else R(_,G)}else if(o==="toggleothers"){var $,tt,Z,X,J=!0;for(T=0;T<v.length;T++)if($=v[T]===_,Z=v[T].showlegend!==!0,!($||Z)&&(tt=I&&v[T].legendgroup===u,!tt&&v[T].visible===!0&&!l.traceIs(v[T],"notLegendIsolatable"))){J=!1;break}for(T=0;T<v.length;T++)if(v[T].visible!==!1&&!l.traceIs(v[T],"notLegendIsolatable"))switch(_.visible){case"legendonly":R(v[T],!0);break;case!0:X=J?!0:"legendonly",$=v[T]===_,Z=v[T].showlegend!==!0&&!v[T].legendgroup,tt=$||I&&v[T].legendgroup===u,R(v[T],tt||Z?!0:X);break}}for(T=0;T<S.length;T++)if(A=S[T],!!A){var st=A.constructUpdate(),at=Object.keys(st);for(c=0;c<at.length;c++)k=at[c],w=h[k]=h[k]||[],w[M[T]]=st[k]}for(p=Object.keys(h),T=0;T<p.length;T++)for(k=p[T],c=0;c<D.length;c++)h[k].hasOwnProperty(c)||(h[k][c]=void 0);l.call("_guiRestyle",a,h,D)}}},{"../../lib":515,"../../registry":647}],423:[function(e,B,V){V.isGrouped=function(l){return(l.traceorder||"").indexOf("grouped")!==-1},V.isVertical=function(l){return l.orientation!=="h"},V.isReversed=function(l){return(l.traceorder||"").indexOf("reversed")!==-1}},{}],424:[function(e,B,V){B.exports={moduleType:"component",name:"legend",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),draw:e("./draw"),style:e("./style")}},{"./attributes":417,"./defaults":419,"./draw":420,"./style":425}],425:[function(e,B,V){var f=e("@plotly/d3"),l=e("../../registry"),m=e("../../lib"),x=m.strTranslate,t=e("../drawing"),a=e("../color"),i=e("../colorscale/helpers").extractOpts,r=e("../../traces/scatter/subtypes"),n=e("../../traces/pie/style_one"),d=e("../../traces/pie/helpers").castOption,s=e("./constants"),o=12,y=5,g=2,b=10,v=5;B.exports=function(A,k,p){var w=k._fullLayout;p||(p=w.legend);var h=p.itemsizing==="constant",D=p.itemwidth,S=(D+s.itemGap*2)/2,M=x(S,0),L=function(at,lt,F,H){var et;if(at+1)et=at;else if(lt&&lt.width>0)et=lt.width;else return 0;return h?H:Math.min(et,F)};A.each(function(at){var lt=f.select(this),F=m.ensureSingle(lt,"g","layers");F.style("opacity",at[0].trace.opacity);var H=p.valign,et=at[0].lineHeight,q=at[0].height;if(H==="middle"||!et||!q)F.attr("transform",null);else{var W={top:1,bottom:-1}[H],K=W*(.5*(et-q+3));F.attr("transform",x(0,K))}var nt=F.selectAll("g.legendfill").data([at]);nt.enter().append("g").classed("legendfill",!0);var it=F.selectAll("g.legendlines").data([at]);it.enter().append("g").classed("legendlines",!0);var ot=F.selectAll("g.legendsymbols").data([at]);ot.enter().append("g").classed("legendsymbols",!0),ot.selectAll("g.legendpoints").data([at]).enter().append("g").classed("legendpoints",!0)}).each(st).each(P).each(U).each(I).each(G).each(X).each(Z).each(R).each(z).each($).each(tt);function R(at){var lt=u(at),F=lt.showFill,H=lt.showLine,et=lt.showGradientLine,q=lt.showGradientFill,W=lt.anyFill,K=lt.anyLine,nt=at[0],it=nt.trace,ot,ct,bt=i(it),ut=bt.colorscale,pt=bt.reversescale,yt=function(It){if(It.size())if(F)t.fillGroupStyle(It,k);else{var $t="legendfill-"+it.uid;t.gradient(It,k,$t,_(pt),ut,"fill")}},Tt=function(It){if(It.size()){var $t="legendline-"+it.uid;t.lineGroupStyle(It),t.gradient(It,k,$t,_(pt),ut,"stroke")}},kt=r.hasMarkers(it)||!W?"M5,0":K?"M5,-2":"M5,-3",zt=f.select(this),Rt=zt.select(".legendfill").selectAll("path").data(F||q?[at]:[]);if(Rt.enter().append("path").classed("js-fill",!0),Rt.exit().remove(),Rt.attr("d",kt+"h"+D+"v6h-"+D+"z").call(yt),H||et){var Gt=L(void 0,it.line,b,y);ct=m.minExtend(it,{line:{width:Gt}}),ot=[m.minExtend(nt,{trace:ct})]}var wt=zt.select(".legendlines").selectAll("path").data(H||et?[ot]:[]);wt.enter().append("path").classed("js-line",!0),wt.exit().remove(),wt.attr("d",kt+(et?"l"+D+",0.0001":"h"+D)).call(H?t.lineGroupStyle:Tt)}function z(at){var lt=u(at),F=lt.anyFill,H=lt.anyLine,et=lt.showLine,q=lt.showMarker,W=at[0],K=W.trace,nt=!q&&!H&&!F&&r.hasText(K),it,ot;function ct(Rt,Gt,wt,It){var $t=m.nestedProperty(K,Rt).get(),Qt=m.isArrayOrTypedArray($t)&&Gt?Gt($t):$t;if(h&&Qt&&It!==void 0&&(Qt=It),wt){if(Qt<wt[0])return wt[0];if(Qt>wt[1])return wt[1]}return Qt}function bt(Rt){return W._distinct&&W.index&&Rt[W.index]?Rt[W.index]:Rt[0]}if(q||nt||et){var ut={},pt={};if(q){ut.mc=ct("marker.color",bt),ut.mx=ct("marker.symbol",bt),ut.mo=ct("marker.opacity",m.mean,[.2,1]),ut.mlc=ct("marker.line.color",bt),ut.mlw=ct("marker.line.width",m.mean,[0,5],g),pt.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var yt=ct("marker.size",m.mean,[2,16],o);ut.ms=yt,pt.marker.size=yt}et&&(pt.line={width:ct("line.width",bt,[0,10],y)}),nt&&(ut.tx="Aa",ut.tp=ct("textposition",bt),ut.ts=10,ut.tc=ct("textfont.color",bt),ut.tf=ct("textfont.family",bt)),it=[m.minExtend(W,ut)],ot=m.minExtend(K,pt),ot.selectedpoints=null,ot.texttemplate=null}var Tt=f.select(this).select("g.legendpoints"),kt=Tt.selectAll("path.scatterpts").data(q?it:[]);kt.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",M),kt.exit().remove(),kt.call(t.pointStyle,ot,k),q&&(it[0].mrc=3);var zt=Tt.selectAll("g.pointtext").data(nt?it:[]);zt.enter().append("g").classed("pointtext",!0).append("text").attr("transform",M),zt.exit().remove(),zt.selectAll("text").call(t.textPointStyle,ot,k)}function P(at){var lt=at[0].trace,F=lt.type==="waterfall";if(at[0]._distinct&&F){var H=at[0].trace[at[0].dir].marker;return at[0].mc=H.color,at[0].mlw=H.line.width,at[0].mlc=H.line.color,O(at,this,"waterfall")}var et=[];lt.visible&&F&&(et=at[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var q=f.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(et);q.enter().append("path").classed("legendwaterfall",!0).attr("transform",M).style("stroke-miterlimit",1),q.exit().remove(),q.each(function(W){var K=f.select(this),nt=lt[W[0]].marker,it=L(void 0,nt.line,v,g);K.attr("d",W[1]).style("stroke-width",it+"px").call(a.fill,nt.color),it&&K.call(a.stroke,nt.line.color)})}function I(at){O(at,this)}function U(at){O(at,this,"funnel")}function O(at,lt,F){var H=at[0].trace,et=H.marker||{},q=et.line||{},W=F?H.visible&&H.type===F:l.traceIs(H,"bar"),K=f.select(lt).select("g.legendpoints").selectAll("path.legend"+F).data(W?[at]:[]);K.enter().append("path").classed("legend"+F,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",M),K.exit().remove(),K.each(function(nt){var it=f.select(this),ot=nt[0],ct=L(ot.mlw,et.line,v,g);it.style("stroke-width",ct+"px");var bt=ot.mcc;if(!p._inHover&&"mc"in ot){var ut=i(et),pt=ut.mid;pt===void 0&&(pt=(ut.max+ut.min)/2),bt=t.tryColorscale(et,"")(pt)}var yt=bt||ot.mc||et.color,Tt=et.pattern,kt=Tt&&t.getPatternAttr(Tt.shape,0,"");if(kt){var zt=t.getPatternAttr(Tt.bgcolor,0,null),Rt=t.getPatternAttr(Tt.fgcolor,0,null),Gt=Tt.fgopacity,wt=T(Tt.size,8,10),It=T(Tt.solidity,.5,1),$t="legend-"+H.uid;it.call(t.pattern,"legend",k,$t,kt,wt,It,bt,Tt.fillmode,zt,Rt,Gt)}else it.call(a.fill,yt);ct&&a.stroke(it,ot.mlc||q.color)})}function G(at){var lt=at[0].trace,F=f.select(this).select("g.legendpoints").selectAll("path.legendbox").data(lt.visible&&l.traceIs(lt,"box-violin")?[at]:[]);F.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",M),F.exit().remove(),F.each(function(){var H=f.select(this);if((lt.boxpoints==="all"||lt.points==="all")&&a.opacity(lt.fillcolor)===0&&a.opacity((lt.line||{}).color)===0){var et=m.minExtend(lt,{marker:{size:h?o:m.constrain(lt.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});F.call(t.pointStyle,et,k)}else{var q=L(void 0,lt.line,v,g);H.style("stroke-width",q+"px").call(a.fill,lt.fillcolor),q&&a.stroke(H,lt.line.color)}})}function $(at){var lt=at[0].trace,F=f.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(lt.visible&&lt.type==="candlestick"?[at,at]:[]);F.enter().append("path").classed("legendcandle",!0).attr("d",function(H,et){return et?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",M).style("stroke-miterlimit",1),F.exit().remove(),F.each(function(H,et){var q=f.select(this),W=lt[et?"increasing":"decreasing"],K=L(void 0,W.line,v,g);q.style("stroke-width",K+"px").call(a.fill,W.fillcolor),K&&a.stroke(q,W.line.color)})}function tt(at){var lt=at[0].trace,F=f.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(lt.visible&&lt.type==="ohlc"?[at,at]:[]);F.enter().append("path").classed("legendohlc",!0).attr("d",function(H,et){return et?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",M).style("stroke-miterlimit",1),F.exit().remove(),F.each(function(H,et){var q=f.select(this),W=lt[et?"increasing":"decreasing"],K=L(void 0,W.line,v,g);q.style("fill","none").call(t.dashLine,W.line.dash,K),K&&a.stroke(q,W.line.color)})}function Z(at){J(at,this,"pie")}function X(at){J(at,this,"funnelarea")}function J(at,lt,F){var H=at[0],et=H.trace,q=F?et.visible&&et.type===F:l.traceIs(et,F),W=f.select(lt).select("g.legendpoints").selectAll("path.legend"+F).data(q?[at]:[]);if(W.enter().append("path").classed("legend"+F,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",M),W.exit().remove(),W.size()){var K=(et.marker||{}).line,nt=L(d(K.width,H.pts),K,v,g),it=m.minExtend(et,{marker:{line:{width:nt}}});it.marker.line.color=K.color;var ot=m.minExtend(H,{trace:it});n(W,ot,it)}}function st(at){var lt=at[0].trace,F,H=[];if(lt.visible)switch(lt.type){case"histogram2d":case"heatmap":H=[["M-15,-2V4H15V-2Z"]],F=!0;break;case"choropleth":case"choroplethmapbox":H=[["M-6,-6V6H6V-6Z"]],F=!0;break;case"densitymapbox":H=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],F="radial";break;case"cone":H=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],F=!1;break;case"streamtube":H=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],F=!1;break;case"surface":H=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],F=!0;break;case"mesh3d":H=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],F=!1;break;case"volume":H=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],F=!0;break;case"isosurface":H=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],F=!1;break}var et=f.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(H);et.enter().append("path").classed("legend3dandfriends",!0).attr("transform",M).style("stroke-miterlimit",1),et.exit().remove(),et.each(function(q,W){var K=f.select(this),nt=i(lt),it=nt.colorscale,ot=nt.reversescale,ct=function(yt){if(yt.size()){var Tt="legendfill-"+lt.uid;t.gradient(yt,k,Tt,_(ot,F==="radial"),it,"fill")}},bt;if(it){if(!F){var pt=it.length;bt=W===0?it[ot?pt-1:0][1]:W===1?it[ot?0:pt-1][1]:it[Math.floor((pt-1)/2)][1]}}else{var ut=lt.vertexcolor||lt.facecolor||lt.color;bt=m.isArrayOrTypedArray(ut)?ut[W]||ut[0]:ut}K.attr("d",q[0]),bt?K.call(a.fill,bt):K.call(ct)})}};function _(c,A){var k=A?"radial":"horizontal";return k+(c?"":"reversed")}function u(c){var A=c[0].trace,k=A.contours,p=r.hasLines(A),w=r.hasMarkers(A),h=A.visible&&A.fill&&A.fill!=="none",D=!1,S=!1;if(k){var M=k.coloring;M==="lines"?D=!0:p=M==="none"||M==="heatmap"||k.showlines,k.type==="constraint"?h=k._operation!=="=":(M==="fill"||M==="heatmap")&&(S=!0)}return{showMarker:w,showLine:p,showFill:h,showGradientLine:D,showGradientFill:S,anyLine:p||D,anyFill:h||S}}function T(c,A,k){return c&&m.isArrayOrTypedArray(c)?A:c>k?k:c}},{"../../lib":515,"../../registry":647,"../../traces/pie/helpers":915,"../../traces/pie/style_one":921,"../../traces/scatter/subtypes":961,"../color":367,"../colorscale/helpers":378,"../drawing":389,"./constants":418,"@plotly/d3":58}],426:[function(e,B,V){e("./constants"),B.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},{"./constants":428}],427:[function(e,B,V){var f=e("../../registry"),l=e("../../plots/plots"),m=e("../../plots/cartesian/axis_ids"),x=e("../../fonts/ploticon"),t=e("../shapes/draw").eraseActiveShape,a=e("../../lib"),i=a._,r=B.exports={};r.toImage={name:"toImage",title:function(c){var A=c._context.toImageButtonOptions||{},k=A.format||"png";return k==="png"?i(c,"Download plot as a png"):i(c,"Download plot")},icon:x.camera,click:function(c){var A=c._context.toImageButtonOptions,k={format:A.format||"png"};a.notifier(i(c,"Taking snapshot - this may take a few seconds"),"long"),k.format!=="svg"&&a.isIE()&&(a.notifier(i(c,"IE only supports svg.  Changing format to svg."),"long"),k.format="svg"),["filename","width","height","scale"].forEach(function(p){p in A&&(k[p]=A[p])}),f.call("downloadImage",c,k).then(function(p){a.notifier(i(c,"Snapshot succeeded")+" - "+p,"long")}).catch(function(){a.notifier(i(c,"Sorry, there was a problem downloading your snapshot!"),"long")})}},r.sendDataToCloud={name:"sendDataToCloud",title:function(c){return i(c,"Edit in Chart Studio")},icon:x.disk,click:function(c){l.sendDataToCloud(c)}},r.editInChartStudio={name:"editInChartStudio",title:function(c){return i(c,"Edit in Chart Studio")},icon:x.pencil,click:function(c){l.sendDataToCloud(c)}},r.zoom2d={name:"zoom2d",_cat:"zoom",title:function(c){return i(c,"Zoom")},attr:"dragmode",val:"zoom",icon:x.zoombox,click:n},r.pan2d={name:"pan2d",_cat:"pan",title:function(c){return i(c,"Pan")},attr:"dragmode",val:"pan",icon:x.pan,click:n},r.select2d={name:"select2d",_cat:"select",title:function(c){return i(c,"Box Select")},attr:"dragmode",val:"select",icon:x.selectbox,click:n},r.lasso2d={name:"lasso2d",_cat:"lasso",title:function(c){return i(c,"Lasso Select")},attr:"dragmode",val:"lasso",icon:x.lasso,click:n},r.drawclosedpath={name:"drawclosedpath",title:function(c){return i(c,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:x.drawclosedpath,click:n},r.drawopenpath={name:"drawopenpath",title:function(c){return i(c,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:x.drawopenpath,click:n},r.drawline={name:"drawline",title:function(c){return i(c,"Draw line")},attr:"dragmode",val:"drawline",icon:x.drawline,click:n},r.drawrect={name:"drawrect",title:function(c){return i(c,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:x.drawrect,click:n},r.drawcircle={name:"drawcircle",title:function(c){return i(c,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:x.drawcircle,click:n},r.eraseshape={name:"eraseshape",title:function(c){return i(c,"Erase active shape")},icon:x.eraseshape,click:t},r.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(c){return i(c,"Zoom in")},attr:"zoom",val:"in",icon:x.zoom_plus,click:n},r.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(c){return i(c,"Zoom out")},attr:"zoom",val:"out",icon:x.zoom_minus,click:n},r.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(c){return i(c,"Autoscale")},attr:"zoom",val:"auto",icon:x.autoscale,click:n},r.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(c){return i(c,"Reset axes")},attr:"zoom",val:"reset",icon:x.home,click:n},r.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(c){return i(c,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:x.tooltip_basic,gravity:"ne",click:n},r.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(c){return i(c,"Compare data on hover")},attr:"hovermode",val:function(c){return c._fullLayout._isHoriz?"y":"x"},icon:x.tooltip_compare,gravity:"ne",click:n};function n(c,A){var k=A.currentTarget,p=k.getAttribute("data-attr"),w=k.getAttribute("data-val")||!0,h=c._fullLayout,D={},S=m.list(c,null,!0),M=h._cartesianSpikesEnabled,L,R;if(p==="zoom"){var z=w==="in"?.5:2,P=(1+z)/2,I=(1-z)/2,U;for(R=0;R<S.length;R++)if(L=S[R],!L.fixedrange)if(U=L._name,w==="auto")D[U+".autorange"]=!0;else if(w==="reset"){if(L._rangeInitial===void 0)D[U+".autorange"]=!0;else{var O=L._rangeInitial.slice();D[U+".range[0]"]=O[0],D[U+".range[1]"]=O[1]}L._showSpikeInitial!==void 0&&(D[U+".showspikes"]=L._showSpikeInitial,M==="on"&&!L._showSpikeInitial&&(M="off"))}else{var G=[L.r2l(L.range[0]),L.r2l(L.range[1])],$=[P*G[0]+I*G[1],P*G[1]+I*G[0]];D[U+".range[0]"]=L.l2r($[0]),D[U+".range[1]"]=L.l2r($[1])}}else p==="hovermode"&&(w==="x"||w==="y")&&(w=h._isHoriz?"y":"x",k.setAttribute("data-val",w)),D[p]=w;h._cartesianSpikesEnabled=M,f.call("_guiRelayout",c,D)}r.zoom3d={name:"zoom3d",_cat:"zoom",title:function(c){return i(c,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:x.zoombox,click:d},r.pan3d={name:"pan3d",_cat:"pan",title:function(c){return i(c,"Pan")},attr:"scene.dragmode",val:"pan",icon:x.pan,click:d},r.orbitRotation={name:"orbitRotation",title:function(c){return i(c,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:x["3d_rotate"],click:d},r.tableRotation={name:"tableRotation",title:function(c){return i(c,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:x["z-axis"],click:d};function d(c,A){for(var k=A.currentTarget,p=k.getAttribute("data-attr"),w=k.getAttribute("data-val")||!0,h=c._fullLayout._subplots.gl3d||[],D={},S=p.split("."),M=0;M<h.length;M++)D[h[M]+"."+S[1]]=w;var L=w==="pan"?w:"zoom";D.dragmode=L,f.call("_guiRelayout",c,D)}r.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(c){return i(c,"Reset camera to default")},attr:"resetDefault",icon:x.home,click:s},r.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(c){return i(c,"Reset camera to last save")},attr:"resetLastSave",icon:x.movie,click:s};function s(c,A){for(var k=A.currentTarget,p=k.getAttribute("data-attr"),w=p==="resetLastSave",h=p==="resetDefault",D=c._fullLayout,S=D._subplots.gl3d||[],M={},L=0;L<S.length;L++){var R=S[L],z=R+".camera",P=R+".aspectratio",I=R+".aspectmode",U=D[R]._scene,O;w?(M[z+".up"]=U.viewInitial.up,M[z+".eye"]=U.viewInitial.eye,M[z+".center"]=U.viewInitial.center,O=!0):h&&(M[z+".up"]=null,M[z+".eye"]=null,M[z+".center"]=null,O=!0),O&&(M[P+".x"]=U.viewInitial.aspectratio.x,M[P+".y"]=U.viewInitial.aspectratio.y,M[P+".z"]=U.viewInitial.aspectratio.z,M[I]=U.viewInitial.aspectmode)}f.call("_guiRelayout",c,M)}r.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(c){return i(c,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:x.tooltip_basic,gravity:"ne",click:y};function o(c,A){var k=A.currentTarget,p=k._previousVal,w=c._fullLayout,h=w._subplots.gl3d||[],D=["xaxis","yaxis","zaxis"],S={},M={};if(p)M=p,k._previousVal=null;else{for(var L=0;L<h.length;L++){var R=h[L],z=w[R],P=R+".hovermode";S[P]=z.hovermode,M[P]=!1;for(var I=0;I<3;I++){var U=D[I],O=R+"."+U+".showspikes";M[O]=!1,S[O]=z[U].showspikes}}k._previousVal=S}return M}function y(c,A){var k=o(c,A);f.call("_guiRelayout",c,k)}r.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(c){return i(c,"Zoom in")},attr:"zoom",val:"in",icon:x.zoom_plus,click:g},r.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(c){return i(c,"Zoom out")},attr:"zoom",val:"out",icon:x.zoom_minus,click:g},r.resetGeo={name:"resetGeo",_cat:"reset",title:function(c){return i(c,"Reset")},attr:"reset",val:null,icon:x.autoscale,click:g},r.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(c){return i(c,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:x.tooltip_basic,gravity:"ne",click:v};function g(c,A){for(var k=A.currentTarget,p=k.getAttribute("data-attr"),w=k.getAttribute("data-val")||!0,h=c._fullLayout,D=h._subplots.geo||[],S=0;S<D.length;S++){var M=D[S],L=h[M];if(p==="zoom"){var R=L.projection.scale,z=w==="in"?2*R:.5*R;f.call("_guiRelayout",c,M+".projection.scale",z)}}p==="reset"&&T(c,"geo")}r.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(c){return i(c,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:x.tooltip_basic,gravity:"ne",click:v},r.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(c){return i(c,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:x.tooltip_basic,gravity:"ne",click:v};function b(c){var A=c._fullLayout;return A.hovermode?!1:A._has("cartesian")?A._isHoriz?"y":"x":"closest"}function v(c){var A=b(c);f.call("_guiRelayout",c,"hovermode",A)}r.resetViewSankey={name:"resetSankeyGroup",title:function(c){return i(c,"Reset view")},icon:x.home,click:function(c){for(var A={"node.groups":[],"node.x":[],"node.y":[]},k=0;k<c._fullData.length;k++){var p=c._fullData[k]._viewInitial;A["node.groups"].push(p.node.groups.slice()),A["node.x"].push(p.node.x.slice()),A["node.y"].push(p.node.y.slice())}f.call("restyle",c,A)}},r.toggleHover={name:"toggleHover",title:function(c){return i(c,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:x.tooltip_basic,gravity:"ne",click:function(c,A){var k=o(c,A);k.hovermode=b(c),f.call("_guiRelayout",c,k)}},r.resetViews={name:"resetViews",title:function(c){return i(c,"Reset views")},icon:x.home,click:function(c,A){var k=A.currentTarget;k.setAttribute("data-attr","zoom"),k.setAttribute("data-val","reset"),n(c,A),k.setAttribute("data-attr","resetLastSave"),s(c,A),T(c,"geo"),T(c,"mapbox")}},r.toggleSpikelines={name:"toggleSpikelines",title:function(c){return i(c,"Toggle Spike Lines")},icon:x.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(c){var A=c._fullLayout,k=A._cartesianSpikesEnabled;A._cartesianSpikesEnabled=k==="on"?"off":"on",f.call("_guiRelayout",c,_(c))}};function _(c){for(var A=c._fullLayout,k=A._cartesianSpikesEnabled==="on",p=m.list(c,null,!0),w={},h=0;h<p.length;h++){var D=p[h];w[D._name+".showspikes"]=k?!0:D._showSpikeInitial}return w}r.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(c){return i(c,"Reset view")},attr:"reset",icon:x.home,click:function(c){T(c,"mapbox")}},r.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(c){return i(c,"Zoom in")},attr:"zoom",val:"in",icon:x.zoom_plus,click:u},r.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(c){return i(c,"Zoom out")},attr:"zoom",val:"out",icon:x.zoom_minus,click:u};function u(c,A){for(var k=A.currentTarget,p=k.getAttribute("data-val"),w=c._fullLayout,h=w._subplots.mapbox||[],D=1.05,S={},M=0;M<h.length;M++){var L=h[M],R=w[L].zoom,z=p==="in"?D*R:R/D;S[L+".zoom"]=z}f.call("_guiRelayout",c,S)}function T(c,A){for(var k=c._fullLayout,p=k._subplots[A]||[],w={},h=0;h<p.length;h++)for(var D=p[h],S=k[D]._subplot,M=S.viewInitial,L=Object.keys(M),R=0;R<L.length;R++){var z=L[R];w[D+"."+z]=M[z]}f.call("_guiRelayout",c,w)}},{"../../fonts/ploticon":494,"../../lib":515,"../../plots/cartesian/axis_ids":570,"../../plots/plots":628,"../../registry":647,"../shapes/draw":462}],428:[function(e,B,V){var f=e("./buttons"),l=Object.keys(f),m=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],x=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(m),t=[],a=function(i){if(x.indexOf(i._cat||i.name)===-1){var r=i.name,n=(i._cat||i.name).toLowerCase();t.indexOf(r)===-1&&t.push(r),t.indexOf(n)===-1&&t.push(n)}};l.forEach(function(i){a(f[i])}),t.sort(),B.exports={DRAW_MODES:m,backButtons:x,foreButtons:t}},{"./buttons":427}],429:[function(e,B,V){var f=e("../../lib"),l=e("../color"),m=e("../../plot_api/plot_template"),x=e("./attributes");B.exports=function(a,i){var r=a.modebar||{},n=m.newContainer(i,"modebar");function d(o,y){return f.coerce(r,n,x,o,y)}d("orientation"),d("bgcolor",l.addOpacity(i.paper_bgcolor,.5));var s=l.contrast(l.rgb(i.modebar.bgcolor));d("color",l.addOpacity(s,.3)),d("activecolor",l.addOpacity(s,.7)),d("uirevision",i.uirevision),d("add"),d("remove")}},{"../../lib":515,"../../plot_api/plot_template":555,"../color":367,"./attributes":426}],430:[function(e,B,V){B.exports={moduleType:"component",name:"modebar",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),manage:e("./manage")}},{"./attributes":426,"./defaults":429,"./manage":431}],431:[function(e,B,V){var f=e("../../plots/cartesian/axis_ids"),l=e("../../traces/scatter/subtypes"),m=e("../../registry"),x=e("../fx/helpers").isUnifiedHover,t=e("./modebar"),a=e("./buttons"),i=e("./constants").DRAW_MODES,r=e("../../lib").extendDeep;B.exports=function(v){var _=v._fullLayout,u=v._context,T=_._modeBar;if(!u.displayModeBar&&!u.watermark){T&&(T.destroy(),delete _._modeBar);return}if(!Array.isArray(u.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(u.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var c=u.modeBarButtons,A;Array.isArray(c)&&c.length?A=g(c):!u.displayModeBar&&u.watermark?A=[]:A=n(v),T?T.update(v,A):_._modeBar=t(v,A)};function n(b){var v=b._fullLayout,_=b._fullData,u=b._context;function T(W,K){if(typeof K=="string"){if(K.toLowerCase()===W.toLowerCase())return!0}else{var nt=K.name,it=K._cat||K.name;if(nt===W||it===W.toLowerCase())return!0}return!1}var c=v.modebar.add;typeof c=="string"&&(c=[c]);var A=v.modebar.remove;typeof A=="string"&&(A=[A]);var k=u.modeBarButtonsToAdd.concat(c.filter(function(W){for(var K=0;K<u.modeBarButtonsToRemove.length;K++)if(T(W,u.modeBarButtonsToRemove[K]))return!1;return!0})),p=u.modeBarButtonsToRemove.concat(A.filter(function(W){for(var K=0;K<u.modeBarButtonsToAdd.length;K++)if(T(W,u.modeBarButtonsToAdd[K]))return!1;return!0})),w=v._has("cartesian"),h=v._has("gl3d"),D=v._has("geo"),S=v._has("pie"),M=v._has("funnelarea"),L=v._has("gl2d"),R=v._has("ternary"),z=v._has("mapbox"),P=v._has("polar"),I=v._has("smith"),U=v._has("sankey"),O=d(v),G=x(v.hovermode),$=[];function tt(W){if(!!W.length){for(var K=[],nt=0;nt<W.length;nt++){for(var it=W[nt],ot=a[it],ct=ot.name.toLowerCase(),bt=(ot._cat||ot.name).toLowerCase(),ut=!1,pt=0;pt<p.length;pt++){var yt=p[pt].toLowerCase();if(yt===ct||yt===bt){ut=!0;break}}ut||K.push(a[it])}$.push(K)}}var Z=["toImage"];u.showEditInChartStudio?Z.push("editInChartStudio"):u.showSendToCloud&&Z.push("sendDataToCloud"),tt(Z);var X=[],J=[],st=[],at=[];(w||L||S||M||R)+D+h+z+P+I>1?(J=["toggleHover"],st=["resetViews"]):D?(X=["zoomInGeo","zoomOutGeo"],J=["hoverClosestGeo"],st=["resetGeo"]):h?(J=["hoverClosest3d"],st=["resetCameraDefault3d","resetCameraLastSave3d"]):z?(X=["zoomInMapbox","zoomOutMapbox"],J=["toggleHover"],st=["resetViewMapbox"]):L?J=["hoverClosestGl2d"]:S?J=["hoverClosestPie"]:U?(J=["hoverClosestCartesian","hoverCompareCartesian"],st=["resetViewSankey"]):J=["toggleHover"],w&&(J=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(o(_)||G)&&(J=[]),(w||L)&&!O&&(X=["zoomIn2d","zoomOut2d","autoScale2d"],st[0]!=="resetViews"&&(st=["resetScale2d"])),h?at=["zoom3d","pan3d","orbitRotation","tableRotation"]:(w||L)&&!O||R?at=["zoom2d","pan2d"]:z||D?at=["pan2d"]:P&&(at=["zoom2d"]),s(_)&&at.push("select2d","lasso2d");var lt=[],F=function(W){lt.indexOf(W)===-1&&J.indexOf(W)!==-1&&lt.push(W)};if(Array.isArray(k)){for(var H=[],et=0;et<k.length;et++){var q=k[et];typeof q=="string"?(q=q.toLowerCase(),i.indexOf(q)!==-1?(v._has("mapbox")||v._has("cartesian"))&&at.push(q):q==="togglespikelines"?F("toggleSpikelines"):q==="togglehover"?F("toggleHover"):q==="hovercompare"?F("hoverCompareCartesian"):q==="hoverclosest"?(F("hoverClosestCartesian"),F("hoverClosestGeo"),F("hoverClosest3d"),F("hoverClosestGl2d"),F("hoverClosestPie")):q==="v1hovermode"&&(F("toggleHover"),F("hoverClosestCartesian"),F("hoverCompareCartesian"),F("hoverClosestGeo"),F("hoverClosest3d"),F("hoverClosestGl2d"),F("hoverClosestPie"))):H.push(q)}k=H}return tt(at),tt(X.concat(st)),tt(lt),y($,k)}function d(b){for(var v=f.list({_fullLayout:b},null,!0),_=0;_<v.length;_++)if(!v[_].fixedrange)return!1;return!0}function s(b){for(var v=!1,_=0;_<b.length&&!v;_++){var u=b[_];!u._module||!u._module.selectPoints||(m.traceIs(u,"scatter-like")?(l.hasMarkers(u)||l.hasText(u))&&(v=!0):m.traceIs(u,"box-violin")?(u.boxpoints==="all"||u.points==="all")&&(v=!0):v=!0)}return v}function o(b){for(var v=0;v<b.length;v++)if(!m.traceIs(b[v],"noHover"))return!1;return!0}function y(b,v){if(v.length)if(Array.isArray(v[0]))for(var _=0;_<v.length;_++)b.push(v[_]);else b.push(v);return b}function g(b){for(var v=r([],b),_=0;_<v.length;_++)for(var u=v[_],T=0;T<u.length;T++){var c=u[T];if(typeof c=="string")if(a[c]!==void 0)v[_][T]=a[c];else throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "))}return v}},{"../../lib":515,"../../plots/cartesian/axis_ids":570,"../../registry":647,"../../traces/scatter/subtypes":961,"../fx/helpers":403,"./buttons":427,"./constants":428,"./modebar":432}],432:[function(e,B,V){var f=e("@plotly/d3"),l=e("fast-isnumeric"),m=e("../../lib"),x=e("../../fonts/ploticon"),t=e("../../version").version,a=new DOMParser;function i(s){this.container=s.container,this.element=document.createElement("div"),this.update(s.graphInfo,s.buttons),this.container.appendChild(this.element)}var r=i.prototype;r.update=function(s,o){this.graphInfo=s;var y=this.graphInfo._context,g=this.graphInfo._fullLayout,b="modebar-"+g._uid;this.element.setAttribute("id",b),this._uid=b,this.element.className="modebar",y.displayModeBar==="hover"&&(this.element.className+=" modebar--hover ease-bg"),g.modebar.orientation==="v"&&(this.element.className+=" vertical",o=o.reverse());var v=g.modebar,_=y.displayModeBar==="hover"?".js-plotly-plot .plotly:hover ":"";m.deleteRelatedStyleRule(b),m.addRelatedStyleRule(b,_+"#"+b+" .modebar-group","background-color: "+v.bgcolor),m.addRelatedStyleRule(b,"#"+b+" .modebar-btn .icon path","fill: "+v.color),m.addRelatedStyleRule(b,"#"+b+" .modebar-btn:hover .icon path","fill: "+v.activecolor),m.addRelatedStyleRule(b,"#"+b+" .modebar-btn.active .icon path","fill: "+v.activecolor);var u=!this.hasButtons(o),T=this.hasLogo!==y.displaylogo,c=this.locale!==y.locale;if(this.locale=y.locale,(u||T||c)&&(this.removeAllButtons(),this.updateButtons(o),y.watermark||y.displaylogo)){var A=this.getLogo();y.watermark&&(A.className=A.className+" watermark"),g.modebar.orientation==="v"?this.element.insertBefore(A,this.element.childNodes[0]):this.element.appendChild(A),this.hasLogo=!0}this.updateActiveButton()},r.updateButtons=function(s){var o=this;this.buttons=s,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(y){var g=o.createGroup();y.forEach(function(b){var v=b.name;if(!v)throw new Error("must provide button 'name' in button config");if(o.buttonsNames.indexOf(v)!==-1)throw new Error("button name '"+v+"' is taken");o.buttonsNames.push(v);var _=o.createButton(b);o.buttonElements.push(_),g.appendChild(_)}),o.element.appendChild(g)})},r.createGroup=function(){var s=document.createElement("div");return s.className="modebar-group",s},r.createButton=function(s){var o=this,y=document.createElement("a");y.setAttribute("rel","tooltip"),y.className="modebar-btn";var g=s.title;g===void 0?g=s.name:typeof g=="function"&&(g=g(this.graphInfo)),(g||g===0)&&y.setAttribute("data-title",g),s.attr!==void 0&&y.setAttribute("data-attr",s.attr);var b=s.val;b!==void 0&&(typeof b=="function"&&(b=b(this.graphInfo)),y.setAttribute("data-val",b));var v=s.click;if(typeof v!="function")throw new Error("must provide button 'click' function in button config");y.addEventListener("click",function(u){s.click(o.graphInfo,u),o.updateActiveButton(u.currentTarget)}),y.setAttribute("data-toggle",s.toggle||!1),s.toggle&&f.select(y).classed("active",!0);var _=s.icon;return typeof _=="function"?y.appendChild(_()):y.appendChild(this.createIcon(_||x.question)),y.setAttribute("data-gravity",s.gravity||"n"),y},r.createIcon=function(s){var o=l(s.height)?Number(s.height):s.ascent-s.descent,y="http://www.w3.org/2000/svg",g;if(s.path){g=document.createElementNS(y,"svg"),g.setAttribute("viewBox",[0,0,s.width,o].join(" ")),g.setAttribute("class","icon");var b=document.createElementNS(y,"path");b.setAttribute("d",s.path),s.transform?b.setAttribute("transform",s.transform):s.ascent!==void 0&&b.setAttribute("transform","matrix(1 0 0 -1 0 "+s.ascent+")"),g.appendChild(b)}if(s.svg){var v=a.parseFromString(s.svg,"application/xml");g=v.childNodes[0]}return g.setAttribute("height","1em"),g.setAttribute("width","1em"),g},r.updateActiveButton=function(s){var o=this.graphInfo._fullLayout,y=s!==void 0?s.getAttribute("data-attr"):null;this.buttonElements.forEach(function(g){var b=g.getAttribute("data-val")||!0,v=g.getAttribute("data-attr"),_=g.getAttribute("data-toggle")==="true",u=f.select(g);if(_)v===y&&u.classed("active",!u.classed("active"));else{var T=v===null?v:m.nestedProperty(o,v).get();u.classed("active",T===b)}})},r.hasButtons=function(s){var o=this.buttons;if(!o||s.length!==o.length)return!1;for(var y=0;y<s.length;++y){if(s[y].length!==o[y].length)return!1;for(var g=0;g<s[y].length;g++)if(s[y][g].name!==o[y][g].name)return!1}return!0};function n(s){return s+" (v"+t+")"}r.getLogo=function(){var s=this.createGroup(),o=document.createElement("a");return o.href="https://plotly.com/",o.target="_blank",o.setAttribute("data-title",n(m._(this.graphInfo,"Produced with Plotly.js"))),o.className="modebar-btn plotlyjsicon modebar-btn--logo",o.appendChild(this.createIcon(x.newplotlylogo)),s.appendChild(o),s},r.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},r.destroy=function(){m.removeElement(this.container.querySelector(".modebar")),m.deleteRelatedStyleRule(this._uid)};function d(s,o){var y=s._fullLayout,g=new i({graphInfo:s,container:y._modebardiv.node(),buttons:o});return y._privateplot&&f.select(g.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),g}B.exports=d},{"../../fonts/ploticon":494,"../../lib":515,"../../version":1132,"@plotly/d3":58,"fast-isnumeric":190}],433:[function(e,B,V){var f=e("../../plots/font_attributes"),l=e("../color/attributes"),m=e("../../plot_api/plot_template").templatedArray,x=m("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});B.exports={visible:{valType:"boolean",editType:"plot"},buttons:x,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:f({editType:"plot"}),bgcolor:{valType:"color",dflt:l.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:l.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},{"../../plot_api/plot_template":555,"../../plots/font_attributes":594,"../color/attributes":366}],434:[function(e,B,V){B.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],435:[function(e,B,V){var f=e("../../lib"),l=e("../color"),m=e("../../plot_api/plot_template"),x=e("../../plots/array_container_defaults"),t=e("./attributes"),a=e("./constants");B.exports=function(d,s,o,y,g){var b=d.rangeselector||{},v=m.newContainer(s,"rangeselector");function _(k,p){return f.coerce(b,v,t,k,p)}var u=x(b,v,{name:"buttons",handleItemDefaults:i,calendar:g}),T=_("visible",u.length>0);if(T){var c=r(s,o,y);_("x",c[0]),_("y",c[1]),f.noneOrAll(d,s,["x","y"]),_("xanchor"),_("yanchor"),f.coerceFont(_,"font",o.font);var A=_("bgcolor");_("activecolor",l.contrast(A,a.lightAmount,a.darkAmount)),_("bordercolor"),_("borderwidth")}};function i(n,d,s,o){var y=o.calendar;function g(_,u){return f.coerce(n,d,t.buttons,_,u)}var b=g("visible");if(b){var v=g("step");v!=="all"&&(y&&y!=="gregorian"&&(v==="month"||v==="year")?d.stepmode="backward":g("stepmode"),g("count")),g("label")}}function r(n,d,s){for(var o=s.filter(function(v){return d[v].anchor===n._id}),y=0,g=0;g<o.length;g++){var b=d[o[g]].domain;b&&(y=Math.max(b[1],y))}return[n.domain[0],y+a.yPad]}},{"../../lib":515,"../../plot_api/plot_template":555,"../../plots/array_container_defaults":561,"../color":367,"./attributes":433,"./constants":434}],436:[function(e,B,V){var f=e("@plotly/d3"),l=e("../../registry"),m=e("../../plots/plots"),x=e("../color"),t=e("../drawing"),a=e("../../lib"),i=a.strTranslate,r=e("../../lib/svg_text_utils"),n=e("../../plots/cartesian/axis_ids"),d=e("../../constants/alignment"),s=d.LINE_SPACING,o=d.FROM_TL,y=d.FROM_BR,g=e("./constants"),b=e("./get_update_object");B.exports=function(h){var D=h._fullLayout,S=D._infolayer.selectAll(".rangeselector").data(v(h),_);S.enter().append("g").classed("rangeselector",!0),S.exit().remove(),S.style({cursor:"pointer","pointer-events":"all"}),S.each(function(M){var L=f.select(this),R=M,z=R.rangeselector,P=L.selectAll("g.button").data(a.filterVisible(z.buttons));P.enter().append("g").classed("button",!0),P.exit().remove(),P.each(function(I){var U=f.select(this),O=b(R,I);I._isActive=u(R,I,O),U.call(T,z,I),U.call(A,z,I,h),U.on("click",function(){h._dragged||l.call("_guiRelayout",h,O)}),U.on("mouseover",function(){I._isHovered=!0,U.call(T,z,I)}),U.on("mouseout",function(){I._isHovered=!1,U.call(T,z,I)})}),p(h,P,z,R._name,L)})};function v(w){for(var h=n.list(w,"x",!0),D=[],S=0;S<h.length;S++){var M=h[S];M.rangeselector&&M.rangeselector.visible&&D.push(M)}return D}function _(w){return w._id}function u(w,h,D){if(h.step==="all")return w.autorange===!0;var S=Object.keys(D);return w.range[0]===D[S[0]]&&w.range[1]===D[S[1]]}function T(w,h,D){var S=a.ensureSingle(w,"rect","selector-rect",function(M){M.attr("shape-rendering","crispEdges")});S.attr({rx:g.rx,ry:g.ry}),S.call(x.stroke,h.bordercolor).call(x.fill,c(h,D)).style("stroke-width",h.borderwidth+"px")}function c(w,h){return h._isActive||h._isHovered?w.activecolor:w.bgcolor}function A(w,h,D,S){function M(R){r.convertToTspans(R,S)}var L=a.ensureSingle(w,"text","selector-text",function(R){R.attr("text-anchor","middle")});L.call(t.font,h.font).text(k(D,S._fullLayout._meta)).call(M)}function k(w,h){return w.label?h?a.templateString(w.label,h):w.label:w.step==="all"?"all":w.count+w.step.charAt(0)}function p(w,h,D,S,M){var L=0,R=0,z=D.borderwidth;h.each(function(){var $=f.select(this),tt=$.select(".selector-text"),Z=D.font.size*s,X=Math.max(Z*r.lineCount(tt),16)+3;R=Math.max(R,X)}),h.each(function(){var $=f.select(this),tt=$.select(".selector-rect"),Z=$.select(".selector-text"),X=Z.node()&&t.bBox(Z.node()).width,J=D.font.size*s,st=r.lineCount(Z),at=Math.max(X+10,g.minButtonWidth);$.attr("transform",i(z+L,z)),tt.attr({x:0,y:0,width:at,height:R}),r.positionText(Z,at/2,R/2-(st-1)*J/2+3),L+=at+5});var P=w._fullLayout._size,I=P.l+P.w*D.x,U=P.t+P.h*(1-D.y),O="left";a.isRightAnchor(D)&&(I-=L,O="right"),a.isCenterAnchor(D)&&(I-=L/2,O="center");var G="top";a.isBottomAnchor(D)&&(U-=R,G="bottom"),a.isMiddleAnchor(D)&&(U-=R/2,G="middle"),L=Math.ceil(L),R=Math.ceil(R),I=Math.round(I),U=Math.round(U),m.autoMargin(w,S+"-range-selector",{x:D.x,y:D.y,l:L*o[O],r:L*y[O],b:R*y[G],t:R*o[G]}),M.attr("transform",i(I,U))}},{"../../constants/alignment":483,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/cartesian/axis_ids":570,"../../plots/plots":628,"../../registry":647,"../color":367,"../drawing":389,"./constants":434,"./get_update_object":437,"@plotly/d3":58}],437:[function(e,B,V){var f=e("d3-time"),l=e("../../lib").titleCase;B.exports=function(t,a){var i=t._name,r={};if(a.step==="all")r[i+".autorange"]=!0;else{var n=m(t,a);r[i+".range[0]"]=n[0],r[i+".range[1]"]=n[1]}return r};function m(x,t){var a=x.range,i=new Date(x.r2l(a[1])),r=t.step,n=f["utc"+l(r)],d=t.count,s;switch(t.stepmode){case"backward":s=x.l2r(+n.offset(i,-d));break;case"todate":var o=n.offset(i,-d);s=x.l2r(+n.ceil(o));break}var y=a[1];return[s,y]}},{"../../lib":515,"d3-time":122}],438:[function(e,B,V){B.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:e("./attributes")}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),draw:e("./draw")}},{"./attributes":433,"./defaults":435,"./draw":436}],439:[function(e,B,V){var f=e("../color/attributes");B.exports={bgcolor:{valType:"color",dflt:f.background,editType:"plot"},bordercolor:{valType:"color",dflt:f.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},{"../color/attributes":366}],440:[function(e,B,V){var f=e("../../plots/cartesian/axis_ids").list,l=e("../../plots/cartesian/autorange").getAutoRange,m=e("./constants");B.exports=function(t){for(var a=f(t,"x",!0),i=0;i<a.length;i++){var r=a[i],n=r[m.name];n&&n.visible&&n.autorange&&(n._input.autorange=!0,n._input.range=n.range=l(t,r))}}},{"../../plots/cartesian/autorange":565,"../../plots/cartesian/axis_ids":570,"./constants":441}],441:[function(e,B,V){B.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},{}],442:[function(e,B,V){var f=e("../../lib"),l=e("../../plot_api/plot_template"),m=e("../../plots/cartesian/axis_ids"),x=e("./attributes"),t=e("./oppaxis_attributes");B.exports=function(i,r,n){var d=i[n],s=r[n];if(!(d.rangeslider||r._requestRangeslider[s._id]))return;f.isPlainObject(d.rangeslider)||(d.rangeslider={});var o=d.rangeslider,y=l.newContainer(s,"rangeslider");function g(S,M){return f.coerce(o,y,x,S,M)}var b,v;function _(S,M){return f.coerce(b,v,t,S,M)}var u=g("visible");if(!!u){g("bgcolor",r.plot_bgcolor),g("bordercolor"),g("borderwidth"),g("thickness"),g("autorange",!s.isValidRange(o.range)),g("range");var T=r._subplots;if(T)for(var c=T.cartesian.filter(function(S){return S.substr(0,S.indexOf("y"))===m.name2id(n)}).map(function(S){return S.substr(S.indexOf("y"),S.length)}),A=f.simpleMap(c,m.id2name),k=0;k<A.length;k++){var p=A[k];b=o[p]||{},v=l.newContainer(y,p,"yaxis");var w=r[p],h;b.range&&w.isValidRange(b.range)&&(h="fixed");var D=_("rangemode",h);D!=="match"&&_("range",w.range.slice())}y._input=o}}},{"../../lib":515,"../../plot_api/plot_template":555,"../../plots/cartesian/axis_ids":570,"./attributes":439,"./oppaxis_attributes":446}],443:[function(e,B,V){var f=e("@plotly/d3"),l=e("../../registry"),m=e("../../plots/plots"),x=e("../../lib"),t=x.strTranslate,a=e("../drawing"),i=e("../color"),r=e("../titles"),n=e("../../plots/cartesian"),d=e("../../plots/cartesian/axis_ids"),s=e("../dragelement"),o=e("../../lib/setcursor"),y=e("./constants");B.exports=function(w){for(var h=w._fullLayout,D=h._rangeSliderData,S=0;S<D.length;S++){var M=D[S][y.name];M._clipId=M._id+"-"+h._uid}function L(z){return z._name}var R=h._infolayer.selectAll("g."+y.containerClassName).data(D,L);R.exit().each(function(z){var P=z[y.name];h._topdefs.select("#"+P._clipId).remove()}).remove(),D.length!==0&&(R.enter().append("g").classed(y.containerClassName,!0).attr("pointer-events","all"),R.each(function(z){var P=f.select(this),I=z[y.name],U=h[d.id2name(z.anchor)],O=I[d.id2name(z.anchor)];if(I.range){var G=x.simpleMap(I.range,z.r2l),$=x.simpleMap(z.range,z.r2l),tt;$[0]<$[1]?tt=[Math.min(G[0],$[0]),Math.max(G[1],$[1])]:tt=[Math.max(G[0],$[0]),Math.min(G[1],$[1])],I.range=I._input.range=x.simpleMap(tt,z.l2r)}z.cleanRange("rangeslider.range");var Z=h._size,X=z.domain;I._width=Z.w*(X[1]-X[0]);var J=Math.round(Z.l+Z.w*X[0]),st=Math.round(Z.t+Z.h*(1-z._counterDomainMin)+(z.side==="bottom"?z._depth:0)+I._offsetShift+y.extraPad);P.attr("transform",t(J,st)),I._rl=x.simpleMap(I.range,z.r2l);var at=I._rl[0],lt=I._rl[1],F=lt-at;if(I.p2d=function(bt){return bt/I._width*F+at},I.d2p=function(bt){return(bt-at)/F*I._width},z.rangebreaks){var H=z.locateBreaks(at,lt);if(H.length){var et,q,W=0;for(et=0;et<H.length;et++)q=H[et],W+=q.max-q.min;var K=I._width/(lt-at-W),nt=[-K*at];for(et=0;et<H.length;et++)q=H[et],nt.push(nt[nt.length-1]-K*(q.max-q.min));for(I.d2p=function(bt){for(var ut=nt[0],pt=0;pt<H.length;pt++){var yt=H[pt];if(bt>=yt.max)ut=nt[pt+1];else if(bt<yt.min)break}return ut+K*bt},et=0;et<H.length;et++)q=H[et],q.pmin=I.d2p(q.min),q.pmax=I.d2p(q.max);I.p2d=function(bt){for(var ut=nt[0],pt=0;pt<H.length;pt++){var yt=H[pt];if(bt>=yt.pmax)ut=nt[pt+1];else if(bt<yt.pmin)break}return(bt-ut)/K}}}if(O.rangemode!=="match"){var it=U.r2l(O.range[0]),ot=U.r2l(O.range[1]),ct=ot-it;I.d2pOppAxis=function(bt){return(bt-it)/ct*I._height}}P.call(_,w,z,I).call(u,w,z,I).call(T,w,z,I).call(A,w,z,I,O).call(k,w,z,I).call(p,w,z,I),g(P,w,z,I),v(P,w,z,I,U,O),z.side==="bottom"&&r.draw(w,z._id+"title",{propContainer:z,propName:z._name+".title",placeholder:h._dfltTitle.x,attributes:{x:z._offset+z._length/2,y:st+I._height+I._offsetShift+10+1.5*z.title.font.size,"text-anchor":"middle"}})}))};function g(w,h,D,S){if(h._context.staticPlot)return;var M=w.select("rect."+y.slideBoxClassName).node(),L=w.select("rect."+y.grabAreaMinClassName).node(),R=w.select("rect."+y.grabAreaMaxClassName).node();function z(){var P=f.event,I=P.target,U=P.clientX||P.touches[0].clientX,O=U-w.node().getBoundingClientRect().left,G=S.d2p(D._rl[0]),$=S.d2p(D._rl[1]),tt=s.coverSlip();this.addEventListener("touchmove",Z),this.addEventListener("touchend",X),tt.addEventListener("mousemove",Z),tt.addEventListener("mouseup",X);function Z(J){var st=J.clientX||J.touches[0].clientX,at=+st-U,lt,F,H;switch(I){case M:H="ew-resize",lt=G+at,F=$+at;break;case L:H="col-resize",lt=G+at,F=$;break;case R:H="col-resize",lt=G,F=$+at;break;default:H="ew-resize",lt=O,F=O+at;break}if(F<lt){var et=F;F=lt,lt=et}S._pixelMin=lt,S._pixelMax=F,o(f.select(tt),H),b(w,h,D,S)}function X(){tt.removeEventListener("mousemove",Z),tt.removeEventListener("mouseup",X),this.removeEventListener("touchmove",Z),this.removeEventListener("touchend",X),x.removeElement(tt)}}w.on("mousedown",z),w.on("touchstart",z)}function b(w,h,D,S){function M(z){return D.l2r(x.constrain(z,S._rl[0],S._rl[1]))}var L=M(S.p2d(S._pixelMin)),R=M(S.p2d(S._pixelMax));window.requestAnimationFrame(function(){l.call("_guiRelayout",h,D._name+".range",[L,R])})}function v(w,h,D,S,M,L){var R=y.handleWidth/2;function z(J){return x.constrain(J,0,S._width)}function P(J){return x.constrain(J,0,S._height)}function I(J){return x.constrain(J,-R,S._width+R)}var U=z(S.d2p(D._rl[0])),O=z(S.d2p(D._rl[1]));if(w.select("rect."+y.slideBoxClassName).attr("x",U).attr("width",O-U),w.select("rect."+y.maskMinClassName).attr("width",U),w.select("rect."+y.maskMaxClassName).attr("x",O).attr("width",S._width-O),L.rangemode!=="match"){var G=S._height-P(S.d2pOppAxis(M._rl[1])),$=S._height-P(S.d2pOppAxis(M._rl[0]));w.select("rect."+y.maskMinOppAxisClassName).attr("x",U).attr("height",G).attr("width",O-U),w.select("rect."+y.maskMaxOppAxisClassName).attr("x",U).attr("y",$).attr("height",S._height-$).attr("width",O-U),w.select("rect."+y.slideBoxClassName).attr("y",G).attr("height",$-G)}var tt=.5,Z=Math.round(I(U-R))-tt,X=Math.round(I(O-R))+tt;w.select("g."+y.grabberMinClassName).attr("transform",t(Z,tt)),w.select("g."+y.grabberMaxClassName).attr("transform",t(X,tt))}function _(w,h,D,S){var M=x.ensureSingle(w,"rect",y.bgClassName,function(P){P.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),L=S.borderwidth%2===0?S.borderwidth:S.borderwidth-1,R=-S._offsetShift,z=a.crispRound(h,S.borderwidth);M.attr({width:S._width+L,height:S._height+L,transform:t(R,R),fill:S.bgcolor,stroke:S.bordercolor,"stroke-width":z})}function u(w,h,D,S){var M=h._fullLayout,L=x.ensureSingleById(M._topdefs,"clipPath",S._clipId,function(R){R.append("rect").attr({x:0,y:0})});L.select("rect").attr({width:S._width,height:S._height})}function T(w,h,D,S){var M=h.calcdata,L=w.selectAll("g."+y.rangePlotClassName).data(D._subplotsWith,x.identity);L.enter().append("g").attr("class",function(z){return y.rangePlotClassName+" "+z}).call(a.setClipUrl,S._clipId,h),L.order(),L.exit().remove();var R;L.each(function(z,P){var I=f.select(this),U=P===0,O=d.getFromId(h,z,"y"),G=O._name,$=S[G],tt={data:[],layout:{xaxis:{type:D.type,domain:[0,1],range:S.range.slice(),calendar:D.calendar},width:S._width,height:S._height,margin:{t:0,b:0,l:0,r:0}},_context:h._context};D.rangebreaks&&(tt.layout.xaxis.rangebreaks=D.rangebreaks),tt.layout[G]={type:O.type,domain:[0,1],range:$.rangemode!=="match"?$.range.slice():O.range.slice(),calendar:O.calendar},O.rangebreaks&&(tt.layout[G].rangebreaks=O.rangebreaks),m.supplyDefaults(tt);var Z=tt._fullLayout.xaxis,X=tt._fullLayout[G];Z.clearCalc(),Z.setScale(),X.clearCalc(),X.setScale();var J={id:z,plotgroup:I,xaxis:Z,yaxis:X,isRangePlot:!0};U?R=J:(J.mainplot="xy",J.mainplotinfo=R),n.rangePlot(h,J,c(M,z))})}function c(w,h){for(var D=[],S=0;S<w.length;S++){var M=w[S],L=M[0].trace;L.xaxis+L.yaxis===h&&D.push(M)}return D}function A(w,h,D,S,M){var L=x.ensureSingle(w,"rect",y.maskMinClassName,function(I){I.attr({x:0,y:0,"shape-rendering":"crispEdges"})});L.attr("height",S._height).call(i.fill,y.maskColor);var R=x.ensureSingle(w,"rect",y.maskMaxClassName,function(I){I.attr({y:0,"shape-rendering":"crispEdges"})});if(R.attr("height",S._height).call(i.fill,y.maskColor),M.rangemode!=="match"){var z=x.ensureSingle(w,"rect",y.maskMinOppAxisClassName,function(I){I.attr({y:0,"shape-rendering":"crispEdges"})});z.attr("width",S._width).call(i.fill,y.maskOppAxisColor);var P=x.ensureSingle(w,"rect",y.maskMaxOppAxisClassName,function(I){I.attr({y:0,"shape-rendering":"crispEdges"})});P.attr("width",S._width).style("border-top",y.maskOppBorder).call(i.fill,y.maskOppAxisColor)}}function k(w,h,D,S){if(!h._context.staticPlot){var M=x.ensureSingle(w,"rect",y.slideBoxClassName,function(L){L.attr({y:0,cursor:y.slideBoxCursor,"shape-rendering":"crispEdges"})});M.attr({height:S._height,fill:y.slideBoxFill})}}function p(w,h,D,S){var M=x.ensureSingle(w,"g",y.grabberMinClassName),L=x.ensureSingle(w,"g",y.grabberMaxClassName),R={x:0,width:y.handleWidth,rx:y.handleRadius,fill:i.background,stroke:i.defaultLine,"stroke-width":y.handleStrokeWidth,"shape-rendering":"crispEdges"},z={y:Math.round(S._height/4),height:Math.round(S._height/2)},P=x.ensureSingle(M,"rect",y.handleMinClassName,function($){$.attr(R)});P.attr(z);var I=x.ensureSingle(L,"rect",y.handleMaxClassName,function($){$.attr(R)});I.attr(z);var U={width:y.grabAreaWidth,x:0,y:0,fill:y.grabAreaFill,cursor:h._context.staticPlot?void 0:y.grabAreaCursor},O=x.ensureSingle(M,"rect",y.grabAreaMinClassName,function($){$.attr(U)});O.attr("height",S._height);var G=x.ensureSingle(L,"rect",y.grabAreaMaxClassName,function($){$.attr(U)});G.attr("height",S._height)}},{"../../lib":515,"../../lib/setcursor":536,"../../plots/cartesian":578,"../../plots/cartesian/axis_ids":570,"../../plots/plots":628,"../../registry":647,"../color":367,"../dragelement":386,"../drawing":389,"../titles":476,"./constants":441,"@plotly/d3":58}],444:[function(e,B,V){var f=e("../../plots/cartesian/axis_ids"),l=e("../../lib/svg_text_utils"),m=e("./constants"),x=e("../../constants/alignment").LINE_SPACING,t=m.name;function a(i){var r=i&&i[t];return r&&r.visible}V.isVisible=a,V.makeData=function(i){var r=f.list({_fullLayout:i},"x",!0),n=i.margin,d=[];if(!i._has("gl2d"))for(var s=0;s<r.length;s++){var o=r[s];if(a(o)){d.push(o);var y=o[t];y._id=t+o._id,y._height=(i.height-n.b-n.t)*y.thickness,y._offsetShift=Math.floor(y.borderwidth/2)}}i._rangeSliderData=d},V.autoMarginOpts=function(i,r){var n=i._fullLayout,d=r[t],s=r._id.charAt(0),o=0,y=0;if(r.side==="bottom"&&(o=r._depth,r.title.text!==n._dfltTitle[s])){y=1.5*r.title.font.size+10+d._offsetShift;var g=(r.title.text.match(l.BR_TAG_ALL)||[]).length;y+=g*r.title.font.size*x}return{x:0,y:r._counterDomainMin,l:0,r:0,t:0,b:d._height+o+Math.max(n.margin.b,y),pad:m.extraPad+d._offsetShift*2}}},{"../../constants/alignment":483,"../../lib/svg_text_utils":541,"../../plots/cartesian/axis_ids":570,"./constants":441}],445:[function(e,B,V){var f=e("../../lib"),l=e("./attributes"),m=e("./oppaxis_attributes"),x=e("./helpers");B.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:f.extendFlat({},l,{yaxis:m})}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),calcAutorange:e("./calc_autorange"),draw:e("./draw"),isVisible:x.isVisible,makeData:x.makeData,autoMarginOpts:x.autoMarginOpts}},{"../../lib":515,"./attributes":439,"./calc_autorange":440,"./defaults":442,"./draw":443,"./helpers":444,"./oppaxis_attributes":446}],446:[function(e,B,V){B.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},{}],447:[function(e,B,V){var f=e("../annotations/attributes"),l=e("../../traces/scatter/attributes").line,m=e("../drawing/attributes").dash,x=e("../../lib/extend").extendFlat,t=e("../../plot_api/edit_types").overrideAll,a=e("../../plot_api/plot_template").templatedArray;e("../../constants/axis_placeable_objects"),B.exports=t(a("selection",{type:{valType:"enumerated",values:["rect","path"]},xref:x({},f.xref,{}),yref:x({},f.yref,{}),x0:{valType:"any"},x1:{valType:"any"},y0:{valType:"any"},y1:{valType:"any"},path:{valType:"string",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:.7,editType:"arraydraw"},line:{color:l.color,width:x({},l.width,{min:1,dflt:1}),dash:x({},m,{dflt:"dot"})}}),"arraydraw","from-root")},{"../../constants/axis_placeable_objects":484,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../../traces/scatter/attributes":936,"../annotations/attributes":350,"../drawing/attributes":388}],448:[function(e,B,V){B.exports={BENDPX:1.5,MINSELECT:12,SELECTDELAY:100,SELECTID:"-select"}},{}],449:[function(e,B,V){var f=e("../../lib"),l=e("../../plots/cartesian/axes"),m=e("../../plots/array_container_defaults"),x=e("./attributes"),t=e("../shapes/helpers");B.exports=function(r,n){m(r,n,{name:"selections",handleItemDefaults:a});for(var d=n.selections,s=0;s<d.length;s++){var o=d[s];!o||o.path===void 0&&(o.x0===void 0||o.x1===void 0||o.y0===void 0||o.y1===void 0)&&(n.selections[s]=null)}};function a(i,r,n){function d(L,R){return f.coerce(i,r,x,L,R)}var s=d("path"),o=s?"path":"rect",y=d("type",o),g=y!=="path";g&&delete r.path,d("opacity"),d("line.color"),d("line.width"),d("line.dash");for(var b=["x","y"],v=0;v<2;v++){var _=b[v],u={_fullLayout:n},T,c,A,k=l.coerceRef(i,r,u,_);if(T=l.getFromId(u,k),T._selectionIndices.push(r._index),A=t.rangeToShapePosition(T),c=t.shapePositionToRange(T),g){var p=_+"0",w=_+"1",h=i[p],D=i[w];i[p]=c(i[p],!0),i[w]=c(i[w],!0),l.coercePosition(r,u,d,k,p),l.coercePosition(r,u,d,k,w);var S=r[p],M=r[w];S!==void 0&&M!==void 0&&(r[p]=A(S),r[w]=A(M),i[p]=h,i[w]=D)}}g&&f.noneOrAll(i,r,["x0","x1","y0","y1"])}},{"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/cartesian/axes":566,"../shapes/helpers":469,"./attributes":447}],450:[function(e,B,V){var f=e("../shapes/draw_newshape/helpers").readPaths,l=e("../shapes/display_outlines"),m=e("../shapes/handle_outline").clearOutlineControllers,x=e("../color"),t=e("../drawing"),a=e("../../plot_api/plot_template").arrayEditor,i=e("../shapes/helpers"),r=i.getPathString;B.exports={draw:n,drawOne:s,activateLastSelection:g};function n(v){var _=v._fullLayout;m(v),_._selectionLayer.selectAll("path").remove();for(var u in _._plots){var T=_._plots[u].selectionLayer;T&&T.selectAll("path").remove()}for(var c=0;c<_.selections.length;c++)s(v,c)}function d(v){return v._context.editSelection}function s(v,_){v._fullLayout._paperdiv.selectAll('.selectionlayer [data-index="'+_+'"]').remove();var u=i.makeSelectionsOptionsAndPlotinfo(v,_),T=u.options,c=u.plotinfo;if(!T._input)return;A(v._fullLayout._selectionLayer);function A(k){var p=r(v,T),w={"data-index":_,"fill-rule":"evenodd",d:p},h=T.opacity,D="rgba(0,0,0,0)",S=T.line.color||x.contrast(v._fullLayout.plot_bgcolor),M=T.line.width,L=T.line.dash;M||(M=5,L="solid");var R=d(v)&&v._fullLayout._activeSelectionIndex===_;R&&(D=v._fullLayout.activeselection.fillcolor,h=v._fullLayout.activeselection.opacity);for(var z=[],P=1;P>=0;P--){var I=k.append("path").attr(w).style("opacity",P?.1:h).call(x.stroke,S).call(x.fill,D).call(t.dashLine,P?"solid":L,P?4+M:M);if(o(I,v,T),R){var U=a(v.layout,"selections",T);I.style({cursor:"move"});var O={element:I.node(),plotinfo:c,gd:v,editHelpers:U,isActiveSelection:!0},G=f(p,v);l(G,I,O)}else I.style("pointer-events",P?"all":"none");z[P]=I}var $=z[0],tt=z[1];tt.node().addEventListener("click",function(){return y(v,$)})}}function o(v,_,u){var T=u.xref+u.yref;t.setClipUrl(v,"clip"+_._fullLayout._uid+T,_)}function y(v,_){if(!!d(v)){var u=_.node(),T=+u.getAttribute("data-index");if(T>=0){if(T===v._fullLayout._activeSelectionIndex){b(v);return}v._fullLayout._activeSelectionIndex=T,v._fullLayout._deactivateSelection=b,n(v)}}}function g(v){if(!!d(v)){var _=v._fullLayout.selections.length-1;v._fullLayout._activeSelectionIndex=_,v._fullLayout._deactivateSelection=b,n(v)}}function b(v){if(!!d(v)){var _=v._fullLayout._activeSelectionIndex;_>=0&&(m(v),delete v._fullLayout._activeSelectionIndex,n(v))}}},{"../../plot_api/plot_template":555,"../color":367,"../drawing":389,"../shapes/display_outlines":461,"../shapes/draw_newshape/helpers":466,"../shapes/handle_outline":468,"../shapes/helpers":469}],451:[function(e,B,V){var f=e("../../drawing/attributes").dash,l=e("../../../lib/extend").extendFlat;B.exports={newselection:{mode:{valType:"enumerated",values:["immediate","gradual"],dflt:"immediate",editType:"none"},line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:1,dflt:1,editType:"none"},dash:l({},f,{dflt:"dot",editType:"none"}),editType:"none"},editType:"none"},activeselection:{fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},{"../../../lib/extend":505,"../../drawing/attributes":388}],452:[function(e,B,V){B.exports=function(l,m,x){x("newselection.mode");var t=x("newselection.line.width");t&&(x("newselection.line.color"),x("newselection.line.dash")),x("activeselection.fillcolor"),x("activeselection.opacity")}},{}],453:[function(e,B,V){var f=e("../../dragelement/helpers"),l=f.selectMode,m=e("../../shapes/handle_outline"),x=m.clearOutline,t=e("../../shapes/draw_newshape/helpers"),a=t.readPaths,i=t.writePaths,r=t.fixDatesForPaths;B.exports=function(d,s){if(!!d.length){var o=d[0][0];if(!!o){var y=o.getAttribute("d"),g=s.gd,b=g._fullLayout.newselection,v=s.plotinfo,_=v.xaxis,u=v.yaxis,T=s.isActiveSelection,c=s.dragmode,A=(g.layout||{}).selections||[];if(!l(c)&&T!==void 0){var k=g._fullLayout._activeSelectionIndex;if(k<A.length)switch(g._fullLayout.selections[k].type){case"rect":c="select";break;case"path":c="lasso";break}}var p=a(y,g,v,T),w={xref:_._id,yref:u._id,opacity:b.opacity,line:{color:b.line.color,width:b.line.width,dash:b.line.dash}},h;p.length===1&&(h=p[0]),h&&h.length===5&&c==="select"?(w.type="rect",w.x0=h[0][1],w.y0=h[0][2],w.x1=h[2][1],w.y1=h[2][2]):(w.type="path",_&&u&&r(p,_,u),w.path=i(p),h=null),x(g);for(var D=s.editHelpers,S=(D||{}).modifyItem,M=[],L=0;L<A.length;L++){var R=g._fullLayout.selections[L];if(!R){M[L]=R;continue}if(M[L]=R._input,T!==void 0&&L===g._fullLayout._activeSelectionIndex){var z=w;switch(R.type){case"rect":S("x0",z.x0),S("x1",z.x1),S("y0",z.y0),S("y1",z.y1);break;case"path":S("path",z.path);break}}}return T===void 0?(M.push(w),M):D?D.getUpdateObj():{}}}}},{"../../dragelement/helpers":385,"../../shapes/draw_newshape/helpers":466,"../../shapes/handle_outline":468}],454:[function(e,B,V){var f=e("../../lib").strTranslate;function l(a,i){switch(a.type){case"log":return a.p2d(i);case"date":return a.p2r(i,0,a.calendar);default:return a.p2r(i)}}function m(a,i){switch(a.type){case"log":return a.d2p(i);case"date":return a.r2p(i,0,a.calendar);default:return a.r2p(i)}}function x(a){var i=a._id.charAt(0)==="y"?1:0;return function(r){return l(a,r[i])}}function t(a){return f(a.xaxis._offset,a.yaxis._offset)}B.exports={p2r:l,r2p:m,axValue:x,getTransform:t}},{"../../lib":515}],455:[function(e,B,V){var f=e("./draw"),l=e("./select");B.exports={moduleType:"component",name:"selections",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),supplyDrawNewSelectionDefaults:e("./draw_newselection/defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("selections"),draw:f.draw,drawOne:f.drawOne,reselect:l.reselect,prepSelect:l.prepSelect,clearOutline:l.clearOutline,clearSelectionsCache:l.clearSelectionsCache,selectOnClick:l.selectOnClick}},{"../../plots/cartesian/include_components":577,"./attributes":447,"./defaults":449,"./draw":450,"./draw_newselection/defaults":452,"./select":456}],456:[function(e,B,V){var f=e("polybooljs"),l=e("point-in-polygon/nested"),m=e("../../registry"),x=e("../drawing").dashStyle,t=e("../color"),a=e("../fx"),i=e("../fx/helpers").makeEventData,r=e("../dragelement/helpers"),n=r.freeMode,d=r.rectMode,s=r.drawMode,o=r.openMode,y=r.selectMode,g=e("../shapes/helpers"),b=e("../shapes/constants"),v=e("../shapes/display_outlines"),_=e("../shapes/handle_outline").clearOutline,u=e("../shapes/draw_newshape/helpers"),T=u.handleEllipse,c=u.readPaths,A=e("../shapes/draw_newshape/newshapes"),k=e("./draw_newselection/newselections"),p=e("./draw").activateLastSelection,w=e("../../lib"),h=w.sorterAsc,D=e("../../lib/polygon"),S=e("../../lib/throttle"),M=e("../../plots/cartesian/axis_ids").getFromId,L=e("../../lib/clear_gl_canvases"),R=e("../../plot_api/subroutines").redrawReglTraces,z=e("./constants"),P=z.MINSELECT,I=D.filter,U=D.tester,O=e("./helpers"),G=O.p2r,$=O.axValue,tt=O.getTransform;function Z(Wt){return Wt.subplot!==void 0}function X(Wt,ee,Xt,St,Vt){var Zt=!Z(St),qt=n(Vt),Te=d(Vt),me=o(Vt),Ne=s(Vt),Ke=y(Vt),He=Vt==="drawline",Xe=Vt==="drawcircle",er=He||Xe,We=St.gd,hr=We._fullLayout,Wr=Ke&&hr.newselection.mode==="immediate"&&Zt,dn=hr._zoomlayer,Qr=St.element.getBoundingClientRect(),le=St.plotinfo,Qe=tt(le),Ze=ee-Qr.left,Ve=Xt-Qr.top;hr._calcInverseTransform(We);var _r=w.apply3DTransform(hr._invTransform)(Ze,Ve);Ze=_r[0],Ve=_r[1];var oe=hr._invScaleX,Ht=hr._invScaleY,te=Ze,ne=Ve,_e="M"+Ze+","+Ve,Pe=St.xaxes[0],Et=St.yaxes[0],Mt=Pe._length,se=Et._length,ce=Wt.altKey&&!(s(Vt)&&me),de,Se,ye,Ae,Ge,sr,Er;H(Wt,We,St),qt&&(de=I([[Ze,Ve]],z.BENDPX));var kr=dn.selectAll("path.select-outline-"+le.id).data([1]),Mr=Ne?hr.newshape:hr.newselection;kr.enter().append("path").attr("class","select-outline select-outline-"+le.id).style({opacity:Ne?Mr.opacity/2:1,fill:Ne&&!me?Mr.fillcolor:"none",stroke:Mr.line.color||(Zt?t.contrast(We._fullLayout.plot_bgcolor):"#7f7f7f"),"stroke-dasharray":x(Mr.line.dash,Mr.line.width),"stroke-width":Mr.line.width+"px","shape-rendering":"crispEdges"}).attr("fill-rule","evenodd").classed("cursor-move",!!Ne).attr("transform",Qe).attr("d",_e+"Z");var Gr=dn.append("path").attr("class","zoombox-corners").style({fill:t.background,stroke:t.defaultLine,"stroke-width":1}).attr("transform",Qe).attr("d","M0,0Z"),ar=hr._uid+z.SELECTID,xr=[],Ir=nt(We,St.xaxes,St.yaxes,St.subplot);Wr&&!Wt.shiftKey&&(St._clearSubplotSelections=function(){if(!!Zt){var Cr=Pe._id,ae=Et._id;Qt(We,Cr,ae,Ir);for(var Le=(We.layout||{}).selections||[],$e=[],or=!1,Dr=0;Dr<Le.length;Dr++){var Nr=hr.selections[Dr];Nr.xref!==Cr||Nr.yref!==ae?$e.push(Le[Dr]):or=!0}or&&(We._fullLayout._noEmitSelectedAtStart=!0,m.call("_guiRelayout",We,{selections:$e}))}});var Hr=Be(St);St.moveFn=function(Cr,ae){St._clearSubplotSelections&&(St._clearSubplotSelections(),St._clearSubplotSelections=void 0),te=Math.max(0,Math.min(Mt,oe*Cr+Ze)),ne=Math.max(0,Math.min(se,Ht*ae+Ve));var Le=Math.abs(te-Ze),$e=Math.abs(ne-Ve);if(Te){var or,Dr,Nr;if(Ke){var Fr=hr.selectdirection;switch(Fr==="any"?$e<Math.min(Le*.6,P)?or="h":Le<Math.min($e*.6,P)?or="v":or="d":or=Fr,or){case"h":Dr=Xe?se/2:0,Nr=se;break;case"v":Dr=Xe?Mt/2:0,Nr=Mt;break}}if(Ne)switch(hr.newshape.drawdirection){case"vertical":or="h",Dr=Xe?se/2:0,Nr=se;break;case"horizontal":or="v",Dr=Xe?Mt/2:0,Nr=Mt;break;case"ortho":Le<$e?(or="h",Dr=Ve,Nr=ne):(or="v",Dr=Ze,Nr=te);break;default:or="d"}or==="h"?(Ae=er?T(Xe,[te,Dr],[te,Nr]):[[Ze,Dr],[Ze,Nr],[te,Nr],[te,Dr]],Ae.xmin=er?te:Math.min(Ze,te),Ae.xmax=er?te:Math.max(Ze,te),Ae.ymin=Math.min(Dr,Nr),Ae.ymax=Math.max(Dr,Nr),Gr.attr("d","M"+Ae.xmin+","+(Ve-P)+"h-4v"+2*P+"h4ZM"+(Ae.xmax-1)+","+(Ve-P)+"h4v"+2*P+"h-4Z")):or==="v"?(Ae=er?T(Xe,[Dr,ne],[Nr,ne]):[[Dr,Ve],[Dr,ne],[Nr,ne],[Nr,Ve]],Ae.xmin=Math.min(Dr,Nr),Ae.xmax=Math.max(Dr,Nr),Ae.ymin=er?ne:Math.min(Ve,ne),Ae.ymax=er?ne:Math.max(Ve,ne),Gr.attr("d","M"+(Ze-P)+","+Ae.ymin+"v-4h"+2*P+"v4ZM"+(Ze-P)+","+(Ae.ymax-1)+"v4h"+2*P+"v-4Z")):or==="d"&&(Ae=er?T(Xe,[Ze,Ve],[te,ne]):[[Ze,Ve],[Ze,ne],[te,ne],[te,Ve]],Ae.xmin=Math.min(Ze,te),Ae.xmax=Math.max(Ze,te),Ae.ymin=Math.min(Ve,ne),Ae.ymax=Math.max(Ve,ne),Gr.attr("d","M0,0Z"))}else qt&&(de.addPt([te,ne]),Ae=de.filtered);if(St.selectionDefs&&St.selectionDefs.length?(ye=kt(St.mergedPolygons,Ae,ce),Ae.subtract=ce,Se=F(St.selectionDefs.concat([Ae]))):(ye=[Ae],Se=U(Ae)),v(Rt(ye,me),kr,St),Ke){var Ar=wt(We,!1),Xr=Ar.eventData?Ar.eventData.points.slice():[];Ar=wt(We,!1,Se,Ir,St),Se=Ar.selectionTesters,Er=Ar.eventData;var Tn;de?Tn=de.filtered:Tn=Re(ye),S.throttle(ar,z.SELECTDELAY,function(){xr=Gt(Se,Ir);for(var un=xr.slice(),Un=0;Un<Xr.length;Un++){for(var Dn=Xr[Un],Xn=!1,Gn=0;Gn<un.length;Gn++)if(un[Gn].curveNumber===Dn.curveNumber&&un[Gn].pointNumber===Dn.pointNumber){Xn=!0;break}Xn||un.push(Dn)}un.length&&(Er||(Er={}),Er.points=un),Hr(Er,Tn),Ye(We,Er)})}},St.clickFn=function(Cr,ae){if(Gr.remove(),We._fullLayout._activeShapeIndex>=0){We._fullLayout._deactivateShape(We);return}if(!Ne){var Le=hr.clickmode;S.done(ar).then(function(){if(S.clear(ar),Cr===2){for(kr.remove(),Ge=0;Ge<Ir.length;Ge++)sr=Ir[Ge],sr._module.selectPoints(sr,!1);if(yt(We,Ir),W(St),Ee(We),Ir.length){var $e=Ir[0].xaxis,or=Ir[0].yaxis;if($e&&or){for(var Dr=[],Nr=We._fullLayout.selections,Fr=0;Fr<Nr.length;Fr++){var Ar=Nr[Fr];!Ar||(Ar.xref!==$e._id||Ar.yref!==or._id)&&Dr.push(Ar)}Dr.length<Nr.length&&(We._fullLayout._noEmitSelectedAtStart=!0,m.call("_guiRelayout",We,{selections:Dr}))}}}else Le.indexOf("select")>-1&&J(ae,We,St.xaxes,St.yaxes,St.subplot,St,kr),Le==="event"&&ze(We,void 0);a.click(We,ae)}).catch(w.error)}},St.doneFn=function(){Gr.remove(),S.done(ar).then(function(){S.clear(ar),!Wr&&Ae&&St.selectionDefs&&(Ae.subtract=ce,St.selectionDefs.push(Ae),St.mergedPolygons.length=0,[].push.apply(St.mergedPolygons,ye)),(Wr||Ne)&&W(St,Wr),St.doneFnCompleted&&St.doneFnCompleted(xr),Ke&&ze(We,Er)}).catch(w.error)}}function J(Wt,ee,Xt,St,Vt,Zt,qt){var Te=ee._hoverdata,me=ee._fullLayout,Ne=me.clickmode,Ke=Ne.indexOf("event")>-1,He=[],Xe,er,We,hr,Wr,dn,Qr,le,Qe,Ze;if(ot(Te)){H(Wt,ee,Zt),Xe=nt(ee,Xt,St,Vt);var Ve=ct(Te,Xe),_r=Ve.pointNumbers.length>0;if(_r?ut(Xe,Ve):pt(Xe)&&(Qr=bt(Ve))){for(qt&&qt.remove(),Ze=0;Ze<Xe.length;Ze++)er=Xe[Ze],er._module.selectPoints(er,!1);yt(ee,Xe),W(Zt),Ke&&Ee(ee)}else{le=Wt.shiftKey&&(Qr!==void 0?Qr:bt(Ve)),We=st(Ve.pointNumber,Ve.searchInfo,le);var oe=Zt.selectionDefs.concat([We]);for(hr=F(oe),Ze=0;Ze<Xe.length;Ze++)if(Wr=Xe[Ze]._module.selectPoints(Xe[Ze],hr),dn=zt(Wr,Xe[Ze]),He.length)for(var Ht=0;Ht<dn.length;Ht++)He.push(dn[Ht]);else He=dn;if(Qe={points:He},yt(ee,Xe,Qe),We&&Zt&&Zt.selectionDefs.push(We),qt){var te=Zt.mergedPolygons,ne=o(Zt.dragmode);v(Rt(te,ne),qt,Zt)}Ke&&ze(ee,Qe)}}}function st(Wt,ee,Xt){return{pointNumber:Wt,searchInfo:ee,subtract:!!Xt}}function at(Wt){return"pointNumber"in Wt&&"searchInfo"in Wt}function lt(Wt){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(ee,Xt,St,Vt){var Zt=Wt.searchInfo.cd[0].trace._expandedIndex,qt=Vt.cd[0].trace._expandedIndex;return qt===Zt&&St===Wt.pointNumber},isRect:!1,degenerate:!1,subtract:!!Wt.subtract}}function F(Wt){if(!Wt.length)return;for(var ee=[],Xt=at(Wt[0])?0:Wt[0][0][0],St=Xt,Vt=at(Wt[0])?0:Wt[0][0][1],Zt=Vt,qt=0;qt<Wt.length;qt++)if(at(Wt[qt]))ee.push(lt(Wt[qt]));else{var Te=U(Wt[qt]);Te.subtract=!!Wt[qt].subtract,ee.push(Te),Xt=Math.min(Xt,Te.xmin),St=Math.max(St,Te.xmax),Vt=Math.min(Vt,Te.ymin),Zt=Math.max(Zt,Te.ymax)}function me(Ne,Ke,He,Xe){for(var er=!1,We=0;We<ee.length;We++)ee[We].contains(Ne,Ke,He,Xe)&&(er=!ee[We].subtract);return er}return{xmin:Xt,xmax:St,ymin:Vt,ymax:Zt,pts:[],contains:me,isRect:!1,degenerate:!1}}function H(Wt,ee,Xt){var St=ee._fullLayout,Vt=Xt.plotinfo,Zt=Xt.dragmode,qt=St._lastSelectedSubplot&&St._lastSelectedSubplot===Vt.id,Te=(Wt.shiftKey||Wt.altKey)&&!(s(Zt)&&o(Zt));qt&&Te&&Vt.selection&&Vt.selection.selectionDefs&&!Xt.selectionDefs?(Xt.selectionDefs=Vt.selection.selectionDefs,Xt.mergedPolygons=Vt.selection.mergedPolygons):(!Te||!Vt.selection)&&W(Xt),qt||(_(ee),St._lastSelectedSubplot=Vt.id)}function et(Wt){return Wt._fullLayout._activeShapeIndex>=0}function q(Wt){return Wt._fullLayout._activeSelectionIndex>=0}function W(Wt,ee){var Xt=Wt.dragmode,St=Wt.plotinfo,Vt=Wt.gd;et(Vt)&&Vt._fullLayout._deactivateShape(Vt),q(Vt)&&Vt._fullLayout._deactivateSelection(Vt);var Zt=Vt._fullLayout,qt=Zt._zoomlayer,Te=s(Xt),me=y(Xt);if(Te||me){var Ne=qt.selectAll(".select-outline-"+St.id);if(Ne&&Vt._fullLayout._outlining){var Ke;Te&&(Ke=A(Ne,Wt)),Ke&&m.call("_guiRelayout",Vt,{shapes:Ke});var He;me&&!Z(Wt)&&(He=k(Ne,Wt)),He&&(Vt._fullLayout._noEmitSelectedAtStart=!0,m.call("_guiRelayout",Vt,{selections:He}).then(function(){ee&&p(Vt)})),Vt._fullLayout._outlining=!1}}St.selection={},St.selection.selectionDefs=Wt.selectionDefs=[],St.selection.mergedPolygons=Wt.mergedPolygons=[]}function K(Wt){return Wt._id}function nt(Wt,ee,Xt,St){if(!Wt.calcdata)return[];var Vt=[],Zt=ee.map(K),qt=Xt.map(K),Te,me,Ne;for(Ne=0;Ne<Wt.calcdata.length;Ne++)if(Te=Wt.calcdata[Ne],me=Te[0].trace,!(me.visible!==!0||!me._module||!me._module.selectPoints))if(Z({subplot:St})&&(me.subplot===St||me.geo===St))Vt.push(it(me._module,Te,ee[0],Xt[0]));else if(me.type==="splom"){if(me._xaxes[Zt[0]]&&me._yaxes[qt[0]]){var Ke=it(me._module,Te,ee[0],Xt[0]);Ke.scene=Wt._fullLayout._splomScenes[me.uid],Vt.push(Ke)}}else if(me.type==="sankey"){var He=it(me._module,Te,ee[0],Xt[0]);Vt.push(He)}else{if(Zt.indexOf(me.xaxis)===-1||qt.indexOf(me.yaxis)===-1)continue;Vt.push(it(me._module,Te,M(Wt,me.xaxis),M(Wt,me.yaxis)))}return Vt}function it(Wt,ee,Xt,St){return{_module:Wt,cd:ee,xaxis:Xt,yaxis:St}}function ot(Wt){return Wt&&Array.isArray(Wt)&&Wt[0].hoverOnBox!==!0}function ct(Wt,ee){var Xt=Wt[0],St=-1,Vt=[],Zt,qt;for(qt=0;qt<ee.length;qt++)if(Zt=ee[qt],Xt.fullData._expandedIndex===Zt.cd[0].trace._expandedIndex){if(Xt.hoverOnBox===!0)break;Xt.pointNumber!==void 0?St=Xt.pointNumber:Xt.binNumber!==void 0&&(St=Xt.binNumber,Vt=Xt.pointNumbers);break}return{pointNumber:St,pointNumbers:Vt,searchInfo:Zt}}function bt(Wt){var ee=Wt.searchInfo.cd[0].trace,Xt=Wt.pointNumber,St=Wt.pointNumbers,Vt=St.length>0,Zt=Vt?St[0]:Xt;return ee.selectedpoints?ee.selectedpoints.indexOf(Zt)>-1:!1}function ut(Wt,ee){var Xt=[],St,Vt,Zt,qt;for(qt=0;qt<Wt.length;qt++)St=Wt[qt],St.cd[0].trace.selectedpoints&&St.cd[0].trace.selectedpoints.length>0&&Xt.push(St);if(Xt.length===1&&(Zt=Xt[0]===ee.searchInfo,Zt&&(Vt=ee.searchInfo.cd[0].trace,Vt.selectedpoints.length===ee.pointNumbers.length))){for(qt=0;qt<ee.pointNumbers.length;qt++)if(Vt.selectedpoints.indexOf(ee.pointNumbers[qt])<0)return!1;return!0}return!1}function pt(Wt){var ee=0,Xt,St,Vt;for(Vt=0;Vt<Wt.length;Vt++)if(Xt=Wt[Vt],St=Xt.cd[0].trace,St.selectedpoints&&(St.selectedpoints.length>1||(ee+=St.selectedpoints.length,ee>1)))return!1;return ee===1}function yt(Wt,ee,Xt){var St;for(St=0;St<ee.length;St++){var Vt=ee[St].cd[0].trace._fullInput,Zt=Wt._fullLayout._tracePreGUI[Vt.uid]||{};Zt.selectedpoints===void 0&&(Zt.selectedpoints=Vt._input.selectedpoints||null)}var qt;if(Xt){var Te=Xt.points||[];for(St=0;St<ee.length;St++)qt=ee[St].cd[0].trace,qt._input.selectedpoints=qt._fullInput.selectedpoints=[],qt._fullInput!==qt&&(qt.selectedpoints=[]);for(var me=0;me<Te.length;me++){var Ne=Te[me],Ke=Ne.data,He=Ne.fullData,Xe=Ne.pointIndex,er=Ne.pointIndices;er?([].push.apply(Ke.selectedpoints,er),qt._fullInput!==qt&&[].push.apply(He.selectedpoints,er)):(Ke.selectedpoints.push(Xe),qt._fullInput!==qt&&He.selectedpoints.push(Xe))}}else for(St=0;St<ee.length;St++)qt=ee[St].cd[0].trace,delete qt.selectedpoints,delete qt._input.selectedpoints,qt._fullInput!==qt&&delete qt._fullInput.selectedpoints;Tt(Wt,ee)}function Tt(Wt,ee){for(var Xt=!1,St=0;St<ee.length;St++){var Vt=ee[St],Zt=Vt.cd;m.traceIs(Zt[0].trace,"regl")&&(Xt=!0);var qt=Vt._module,Te=qt.styleOnSelect||qt.style;Te&&(Te(Wt,Zt,Zt[0].node3),Zt[0].nodeRangePlot3&&Te(Wt,Zt,Zt[0].nodeRangePlot3))}Xt&&(L(Wt),R(Wt))}function kt(Wt,ee,Xt){for(var St=Xt?f.difference:f.union,Vt=St({regions:Wt},{regions:[ee]}),Zt=Vt.regions.reverse(),qt=0;qt<Zt.length;qt++){var Te=Zt[qt];Te.subtract=Yt(Te,Zt.slice(0,qt))}return Zt}function zt(Wt,ee){if(Array.isArray(Wt))for(var Xt=ee.cd,St=ee.cd[0].trace,Vt=0;Vt<Wt.length;Vt++)Wt[Vt]=i(Wt[Vt],St,Xt);return Wt}function Rt(Wt,ee){for(var Xt=[],St=0;St<Wt.length;St++){Xt[St]=[];for(var Vt=0;Vt<Wt[St].length;Vt++){Xt[St][Vt]=[],Xt[St][Vt][0]=Vt?"L":"M";for(var Zt=0;Zt<Wt[St][Vt].length;Zt++)Xt[St][Vt].push(Wt[St][Vt][Zt])}ee||Xt[St].push(["Z",Xt[St][0][1],Xt[St][0][2]])}return Xt}function Gt(Wt,ee){for(var Xt=[],St,Vt,Zt=0;Zt<ee.length;Zt++){var qt=ee[Zt];Vt=qt._module.selectPoints(qt,Wt),St=zt(Vt,qt),Xt=Xt.concat(St)}return Xt}function wt(Wt,ee,Xt,St,Vt){var Zt=!!St,qt,Te,me;Vt&&(qt=Vt.plotinfo,Te=Vt.xaxes[0]._id,me=Vt.yaxes[0]._id);var Ne=[],Ke=[],He=Pt(Wt),Xe=Wt._fullLayout;if(qt){var er=Xe._zoomlayer,We=Xe.dragmode,hr=s(We),Wr=y(We);if(hr||Wr){var dn=M(Wt,Te,"x"),Qr=M(Wt,me,"y");if(dn&&Qr){var le=er.selectAll(".select-outline-"+qt.id);if(le&&Wt._fullLayout._outlining&&le.length){for(var Qe=le[0][0],Ze=Qe.getAttribute("d"),Ve=c(Ze,Wt,qt),_r=[],oe=0;oe<Ve.length;oe++){for(var Ht=Ve[oe],te=[],ne=0;ne<Ht.length;ne++)te.push([ve(dn,Ht[ne][1]),ve(Qr,Ht[ne][2])]);te.xref=Te,te.yref=me,te.subtract=Yt(te,_r),_r.push(te)}He=He.concat(_r)}}}}var _e=Te&&me?[Te+me]:Xe._subplots.cartesian;It(Wt);for(var Pe={},Et=0;Et<_e.length;Et++){var Mt=_e[Et],se=Mt.indexOf("y"),ce=Mt.slice(0,se),de=Mt.slice(se),Se=Te&&me?Xt:void 0;if(Se=Nt(He,ce,de,Se),Se){var ye=St;if(!Zt){var Ae=M(Wt,ce,"x"),Ge=M(Wt,de,"y");ye=nt(Wt,[Ae],[Ge],Mt);for(var sr=0;sr<ye.length;sr++){var Er=ye[sr],kr=Er.cd[0],Mr=kr.trace;if(Er._module.name==="scattergl"&&!kr.t.xpx){var Gr=Mr.x,ar=Mr.y,xr=Mr._length;kr.t.xpx=[],kr.t.ypx=[];for(var Ir=0;Ir<xr;Ir++)kr.t.xpx[Ir]=Ae.c2p(Gr[Ir]),kr.t.ypx[Ir]=Ge.c2p(ar[Ir])}Er._module.name==="splom"&&(Pe[Mr.uid]||(Pe[Mr.uid]=!0))}}var Hr=Gt(Se,ye);Ne=Ne.concat(Hr),Ke=Ke.concat(ye)}}var Cr={points:Ne};yt(Wt,Ke,Cr);var ae=Xe.clickmode,Le=ae.indexOf("event")>-1&&ee;if(!qt&&ee){var $e=Pt(Wt,!0);if($e.length){var or=$e[0].xref,Dr=$e[0].yref;if(or&&Dr){var Nr=Re($e),Fr=Ie([M(Wt,or,"x"),M(Wt,Dr,"y")]);Fr(Cr,Nr)}}Wt._fullLayout._noEmitSelectedAtStart?Wt._fullLayout._noEmitSelectedAtStart=!1:Le&&ze(Wt,Cr),Xe._reselect=!1}if(!qt&&Xe._deselect){var Ar=Xe._deselect;Te=Ar.xref,me=Ar.yref,$t(Te,me,Ke)||Qt(Wt,Te,me,St),Le&&(Cr.points.length?ze(Wt,Cr):Ee(Wt)),Xe._deselect=!1}return{eventData:Cr,selectionTesters:Xt}}function It(Wt){var ee=Wt.calcdata;if(!!ee)for(var Xt=0;Xt<ee.length;Xt++){var St=ee[Xt][0],Vt=St.trace,Zt=Wt._fullLayout._splomScenes;if(Zt){var qt=Zt[Vt.uid];qt&&(qt.selectBatch=[])}}}function $t(Wt,ee,Xt){for(var St=0;St<Xt.length;St++){var Vt=Xt[St];if(Vt.xaxis&&Vt.xaxis._id===Wt&&Vt.yaxis&&Vt.yaxis._id===ee)return!0}return!1}function Qt(Wt,ee,Xt,St){St=nt(Wt,[M(Wt,ee,"x")],[M(Wt,Xt,"y")],ee+Xt);for(var Vt=0;Vt<St.length;Vt++){var Zt=St[Vt];Zt._module.selectPoints(Zt,!1)}yt(Wt,St)}function Nt(Wt,ee,Xt,St){for(var Vt,Zt=0;Zt<Wt.length;Zt++){var qt=Wt[Zt];if(!(ee!==qt.xref||Xt!==qt.yref))if(Vt){var Te=!!qt.subtract;Vt=kt(Vt,qt,Te),St=F(Vt)}else Vt=[qt],St=U(qt)}return St}function Pt(Wt,ee){for(var Xt=[],St=Wt._fullLayout,Vt=St.selections,Zt=Vt.length,qt=0;qt<Zt;qt++)if(!(ee&&qt!==St._activeSelectionIndex)){var Te=Vt[qt];if(!!Te){var me=Te.xref,Ne=Te.yref,Ke=M(Wt,me,"x"),He=M(Wt,Ne,"y"),Xe,er,We,hr,Wr;if(Te.type==="rect"){Wr=[];var dn=ve(Ke,Te.x0),Qr=ve(Ke,Te.x1),le=ve(He,Te.y0),Qe=ve(He,Te.y1);Wr=[[dn,le],[dn,Qe],[Qr,Qe],[Qr,le]],Xe=Math.min(dn,Qr),er=Math.max(dn,Qr),We=Math.min(le,Qe),hr=Math.max(le,Qe),Wr.xmin=Xe,Wr.xmax=er,Wr.ymin=We,Wr.ymax=hr,Wr.xref=me,Wr.yref=Ne,Wr.subtract=!1,Wr.isRect=!0,Xt.push(Wr)}else if(Te.type==="path")for(var Ze=Te.path.split("Z"),Ve=[],_r=0;_r<Ze.length;_r++){var oe=Ze[_r];if(!!oe){oe+="Z";var Ht=g.extractPathCoords(oe,b.paramIsX,"raw"),te=g.extractPathCoords(oe,b.paramIsY,"raw");Xe=1/0,er=-1/0,We=1/0,hr=-1/0,Wr=[];for(var ne=0;ne<Ht.length;ne++){var _e=ve(Ke,Ht[ne]),Pe=ve(He,te[ne]);Wr.push([_e,Pe]),Xe=Math.min(_e,Xe),er=Math.max(_e,er),We=Math.min(Pe,We),hr=Math.max(Pe,hr)}Wr.xmin=Xe,Wr.xmax=er,Wr.ymin=We,Wr.ymax=hr,Wr.xref=me,Wr.yref=Ne,Wr.subtract=Yt(Wr,Ve),Ve.push(Wr),Xt.push(Wr)}}}}return Xt}function Yt(Wt,ee){for(var Xt=!1,St=0;St<ee.length;St++)for(var Vt=ee[St],Zt=0;Zt<Wt.length;Zt++)if(l(Wt[Zt],Vt)){Xt=!Xt;break}return Xt}function ve(Wt,ee){return Wt.type==="date"&&(ee=ee.replace("_"," ")),Wt.type==="log"?Wt.c2p(ee):Wt.r2p(ee,null,Wt.calendar)}function Re(Wt){for(var ee=Wt.length,Xt=[],St=0;St<ee;St++){var Vt=Wt[St];Xt=Xt.concat(Vt),Xt=Xt.concat([Vt[0]])}return ir(Xt)}function ir(Wt){return Wt.isRect=Wt.length===5&&Wt[0][0]===Wt[4][0]&&Wt[0][1]===Wt[4][1]&&Wt[0][0]===Wt[1][0]&&Wt[2][0]===Wt[3][0]&&Wt[0][1]===Wt[3][1]&&Wt[1][1]===Wt[2][1]||Wt[0][1]===Wt[1][1]&&Wt[2][1]===Wt[3][1]&&Wt[0][0]===Wt[3][0]&&Wt[1][0]===Wt[2][0],Wt.isRect&&(Wt.xmin=Math.min(Wt[0][0],Wt[2][0]),Wt.xmax=Math.max(Wt[0][0],Wt[2][0]),Wt.ymin=Math.min(Wt[0][1],Wt[2][1]),Wt.ymax=Math.max(Wt[0][1],Wt[2][1])),Wt}function Ie(Wt){return function(ee,Xt){for(var St,Vt,Zt=0;Zt<Wt.length;Zt++){var qt=Wt[Zt],Te=qt._id,me=Te.charAt(0);if(Xt.isRect){St||(St={});var Ne=Xt[me+"min"],Ke=Xt[me+"max"];Ne!==void 0&&Ke!==void 0&&(St[Te]=[G(qt,Ne),G(qt,Ke)].sort(h))}else Vt||(Vt={}),Vt[Te]=Xt.map($(qt))}St&&(ee.range=St),Vt&&(ee.lassoPoints=Vt)}}function Be(Wt){var ee=Wt.plotinfo;return ee.fillRangeItems||Ie(Wt.xaxes.concat(Wt.yaxes))}function Ye(Wt,ee){Wt.emit("plotly_selecting",ee)}function ze(Wt,ee){ee&&(ee.selections=(Wt.layout||{}).selections||[]),Wt.emit("plotly_selected",ee)}function Ee(Wt){Wt.emit("plotly_deselect",null)}B.exports={reselect:wt,prepSelect:X,clearOutline:_,clearSelectionsCache:W,selectOnClick:J}},{"../../lib":515,"../../lib/clear_gl_canvases":499,"../../lib/polygon":527,"../../lib/throttle":542,"../../plot_api/subroutines":556,"../../plots/cartesian/axis_ids":570,"../../registry":647,"../color":367,"../dragelement/helpers":385,"../drawing":389,"../fx":407,"../fx/helpers":403,"../shapes/constants":459,"../shapes/display_outlines":461,"../shapes/draw_newshape/helpers":466,"../shapes/draw_newshape/newshapes":467,"../shapes/handle_outline":468,"../shapes/helpers":469,"./constants":448,"./draw":450,"./draw_newselection/newselections":453,"./helpers":454,"point-in-polygon/nested":254,polybooljs:255}],457:[function(e,B,V){var f=e("../annotations/attributes"),l=e("../../traces/scatter/attributes").line,m=e("../drawing/attributes").dash,x=e("../../lib/extend").extendFlat,t=e("../../plot_api/plot_template").templatedArray;e("../../constants/axis_placeable_objects"),B.exports=t("shape",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:x({},f.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:x({},f.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:x({},l.color,{editType:"arraydraw"}),width:x({},l.width,{editType:"calc+arraydraw"}),dash:x({},m,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":484,"../../lib/extend":505,"../../plot_api/plot_template":555,"../../traces/scatter/attributes":936,"../annotations/attributes":350,"../drawing/attributes":388}],458:[function(e,B,V){var f=e("../../lib"),l=e("../../plots/cartesian/axes"),m=e("./constants"),x=e("./helpers");B.exports=function(d){var s=d._fullLayout,o=f.filterVisible(s.shapes);if(!(!o.length||!d._fullData.length))for(var y=0;y<o.length;y++){var g=o[y];g._extremes={};var b,v,_=l.getRefType(g.xref),u=l.getRefType(g.yref);if(g.xref!=="paper"&&_!=="domain"){var T=g.xsizemode==="pixel"?g.xanchor:g.x0,c=g.xsizemode==="pixel"?g.xanchor:g.x1;b=l.getFromId(d,g.xref),v=r(b,T,c,g.path,m.paramIsX),v&&(g._extremes[b._id]=l.findExtremes(b,v,t(g)))}if(g.yref!=="paper"&&u!=="domain"){var A=g.ysizemode==="pixel"?g.yanchor:g.y0,k=g.ysizemode==="pixel"?g.yanchor:g.y1;b=l.getFromId(d,g.yref),v=r(b,A,k,g.path,m.paramIsY),v&&(g._extremes[b._id]=l.findExtremes(b,v,a(g)))}}};function t(n){return i(n.line.width,n.xsizemode,n.x0,n.x1,n.path,!1)}function a(n){return i(n.line.width,n.ysizemode,n.y0,n.y1,n.path,!0)}function i(n,d,s,o,y,g){var b=n/2,v=g;if(d==="pixel"){var _=y?x.extractPathCoords(y,g?m.paramIsY:m.paramIsX):[s,o],u=f.aggNums(Math.max,null,_),T=f.aggNums(Math.min,null,_),c=T<0?Math.abs(T)+b:b,A=u>0?u+b:b;return{ppad:b,ppadplus:v?c:A,ppadminus:v?A:c}}else return{ppad:b}}function r(n,d,s,o,y){var g=n.type==="category"||n.type==="multicategory"?n.r2c:n.d2c;if(d!==void 0)return[g(d),g(s)];if(!!o){var b=1/0,v=-1/0,_=o.match(m.segmentRE),u,T,c,A,k;for(n.type==="date"&&(g=x.decodeDate(g)),u=0;u<_.length;u++)T=_[u],c=y[T.charAt(0)].drawn,c!==void 0&&(A=_[u].substr(1).match(m.paramRE),!(!A||A.length<c)&&(k=g(A[c]),k<b&&(b=k),k>v&&(v=k)));if(v>=b)return[b,v]}}},{"../../lib":515,"../../plots/cartesian/axes":566,"./constants":459,"./helpers":469}],459:[function(e,B,V){B.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],460:[function(e,B,V){var f=e("../../lib"),l=e("../../plots/cartesian/axes"),m=e("../../plots/array_container_defaults"),x=e("./attributes"),t=e("./helpers");B.exports=function(r,n){m(r,n,{name:"shapes",handleItemDefaults:a})};function a(i,r,n){function d($,tt){return f.coerce(i,r,x,$,tt)}var s=d("visible");if(!!s){var o=d("path"),y=o?"path":"rect",g=d("type",y),b=g!=="path";b&&delete r.path,d("editable"),d("layer"),d("opacity"),d("fillcolor"),d("fillrule");var v=d("line.width");v&&(d("line.color"),d("line.dash"));for(var _=d("xsizemode"),u=d("ysizemode"),T=["x","y"],c=0;c<2;c++){var A=T[c],k=A+"anchor",p=A==="x"?_:u,w={_fullLayout:n},h,D,S,M=l.coerceRef(i,r,w,A,void 0,"paper"),L=l.getRefType(M);if(L==="range"?(h=l.getFromId(w,M),h._shapeIndices.push(r._index),S=t.rangeToShapePosition(h),D=t.shapePositionToRange(h)):D=S=f.identity,b){var R=.25,z=.75,P=A+"0",I=A+"1",U=i[P],O=i[I];i[P]=D(i[P],!0),i[I]=D(i[I],!0),p==="pixel"?(d(P,0),d(I,10)):(l.coercePosition(r,w,d,M,P,R),l.coercePosition(r,w,d,M,I,z)),r[P]=S(r[P]),r[I]=S(r[I]),i[P]=U,i[I]=O}if(p==="pixel"){var G=i[k];i[k]=D(i[k],!0),l.coercePosition(r,w,d,M,k,.25),r[k]=S(r[k]),i[k]=G}}b&&f.noneOrAll(i,r,["x0","x1","y0","y1"])}}},{"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/cartesian/axes":566,"./attributes":457,"./helpers":469}],461:[function(e,B,V){var f=e("../../lib"),l=f.strTranslate,m=e("../dragelement"),x=e("../dragelement/helpers"),t=x.drawMode,a=x.selectMode,i=e("../../registry"),r=e("../color"),n=e("./draw_newshape/constants"),d=n.i000,s=n.i090,o=n.i180,y=n.i270,g=e("./handle_outline"),b=g.clearOutlineControllers,v=e("./draw_newshape/helpers"),_=v.pointsOnRectangle,u=v.pointsOnEllipse,T=v.writePaths,c=e("./draw_newshape/newshapes"),A=e("../selections/draw_newselection/newselections");B.exports=function h(D,S,M,L){L||(L=0);var R=M.gd;function z(){h(D,S,M,L++),u(D[0])&&P({redrawing:!0})}function P(ut){var pt={};M.isActiveShape!==void 0&&(M.isActiveShape=!1,pt=c(S,M)),M.isActiveSelection!==void 0&&(M.isActiveSelection=!1,pt=A(S,M),R._fullLayout._reselect=!0),Object.keys(pt).length&&i.call((ut||{}).redrawing?"relayout":"_guiRelayout",R,pt)}var I=R._fullLayout,U=I._zoomlayer,O=M.dragmode,G=t(O),$=a(O);(G||$)&&(R._fullLayout._outlining=!0),b(R),S.attr("d",T(D));var tt,Z,X,J,st;if(!L&&(M.isActiveShape||M.isActiveSelection)){st=k([],D);var at=U.append("g").attr("class","outline-controllers");W(at),bt()}function lt(ut){X=+ut.srcElement.getAttribute("data-i"),J=+ut.srcElement.getAttribute("data-j"),tt[X][J].moveFn=F}function F(ut,pt){if(!!D.length){var yt=st[X][J][1],Tt=st[X][J][2],kt=D[X],zt=kt.length;if(_(kt)){var Rt=ut,Gt=pt;if(M.isActiveSelection){var wt=p(kt,J);wt[1]===kt[J][1]?Gt=0:Rt=0}for(var It=0;It<zt;It++)if(It!==J){var $t=kt[It];$t[1]===kt[J][1]&&($t[1]=yt+Rt),$t[2]===kt[J][2]&&($t[2]=Tt+Gt)}if(kt[J][1]=yt+Rt,kt[J][2]=Tt+Gt,!_(kt))for(var Qt=0;Qt<zt;Qt++)for(var Nt=0;Nt<kt[Qt].length;Nt++)kt[Qt][Nt]=st[X][Qt][Nt]}else kt[J][1]=yt+ut,kt[J][2]=Tt+pt;z()}}function H(){P()}function et(){if(!!D.length&&!!D[X]&&!!D[X].length){for(var ut=[],pt=0;pt<D[X].length;pt++)pt!==J&&ut.push(D[X][pt]);ut.length>1&&!(ut.length===2&&ut[1][0]==="Z")&&(J===0&&(ut[0][0]="M"),D[X]=ut,z(),P())}}function q(ut,pt){if(ut===2){X=+pt.srcElement.getAttribute("data-i"),J=+pt.srcElement.getAttribute("data-j");var yt=D[X];!_(yt)&&!u(yt)&&et()}}function W(ut){tt=[];for(var pt=0;pt<D.length;pt++){var yt=D[pt],Tt=_(yt),kt=!Tt&&u(yt);tt[pt]=[];for(var zt=yt.length,Rt=0;Rt<zt;Rt++)if(yt[Rt][0]!=="Z"&&!(kt&&Rt!==d&&Rt!==s&&Rt!==o&&Rt!==y)){var Gt=Tt&&M.isActiveSelection,wt;Gt&&(wt=p(yt,Rt));var It=yt[Rt][1],$t=yt[Rt][2],Qt=ut.append(Gt?"rect":"circle").attr("data-i",pt).attr("data-j",Rt).style({fill:r.background,stroke:r.defaultLine,"stroke-width":1,"shape-rendering":"crispEdges"});if(Gt){var Nt=wt[1]-It,Pt=wt[2]-$t,Yt=Pt?5:Math.max(Math.min(25,Math.abs(Nt)-5),5),ve=Nt?5:Math.max(Math.min(25,Math.abs(Pt)-5),5);Qt.classed(Pt?"cursor-ew-resize":"cursor-ns-resize",!0).attr("width",Yt).attr("height",ve).attr("x",It-Yt/2).attr("y",$t-ve/2).attr("transform",l(Nt/2,Pt/2))}else Qt.classed("cursor-grab",!0).attr("r",5).attr("cx",It).attr("cy",$t);tt[pt][Rt]={element:Qt.node(),gd:R,prepFn:lt,doneFn:H,clickFn:q},m.init(tt[pt][Rt])}}}function K(ut,pt){if(!!D.length)for(var yt=0;yt<D.length;yt++)for(var Tt=0;Tt<D[yt].length;Tt++)for(var kt=0;kt+2<D[yt][Tt].length;kt+=2)D[yt][Tt][kt+1]=st[yt][Tt][kt+1]+ut,D[yt][Tt][kt+2]=st[yt][Tt][kt+2]+pt}function nt(ut,pt){K(ut,pt),z()}function it(ut){X=+ut.srcElement.getAttribute("data-i"),X||(X=0),Z[X].moveFn=nt}function ot(){P()}function ct(ut){ut===2&&w(R)}function bt(){if(Z=[],!!D.length){var ut=0;Z[ut]={element:S[0][0],gd:R,prepFn:it,doneFn:ot,clickFn:ct},m.init(Z[ut])}}};function k(h,D){for(var S=0;S<D.length;S++){var M=D[S];h[S]=[];for(var L=0;L<M.length;L++){h[S][L]=[];for(var R=0;R<M[L].length;R++)h[S][L][R]=M[L][R]}}return h}function p(h,D){var S=h[D][1],M=h[D][2],L=h.length,R,z,P;return R=(D+1)%L,z=h[R][1],P=h[R][2],z===S&&P===M&&(R=(D+2)%L,z=h[R][1],P=h[R][2]),[R,z,P]}function w(h){if(!!a(h._fullLayout.dragmode)){b(h);var D=h._fullLayout._activeSelectionIndex,S=(h.layout||{}).selections||[];if(D<S.length){for(var M=[],L=0;L<S.length;L++)L!==D&&M.push(S[L]);delete h._fullLayout._activeSelectionIndex;var R=h._fullLayout.selections[D];h._fullLayout._deselect={xref:R.xref,yref:R.yref},i.call("_guiRelayout",h,{selections:M})}}}},{"../../lib":515,"../../registry":647,"../color":367,"../dragelement":386,"../dragelement/helpers":385,"../selections/draw_newselection/newselections":453,"./draw_newshape/constants":464,"./draw_newshape/helpers":466,"./draw_newshape/newshapes":467,"./handle_outline":468}],462:[function(e,B,V){var f=e("../../registry"),l=e("../../lib"),m=e("../../plots/cartesian/axes"),x=e("./draw_newshape/helpers").readPaths,t=e("./display_outlines"),a=e("./handle_outline").clearOutlineControllers,i=e("../color"),r=e("../drawing"),n=e("../../plot_api/plot_template").arrayEditor,d=e("../dragelement"),s=e("../../lib/setcursor"),o=e("./constants"),y=e("./helpers"),g=y.getPathString;B.exports={draw:b,drawOne:u,eraseActiveShape:w};function b(h){var D=h._fullLayout;D._shapeUpperLayer.selectAll("path").remove(),D._shapeLowerLayer.selectAll("path").remove();for(var S in D._plots){var M=D._plots[S].shapelayer;M&&M.selectAll("path").remove()}for(var L=0;L<D.shapes.length;L++)D.shapes[L].visible&&u(h,L)}function v(h){return!!h._fullLayout._outlining}function _(h){return!h._context.edits.shapePosition}function u(h,D){h._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+D+'"]').remove();var S=y.makeShapesOptionsAndPlotinfo(h,D),M=S.options,L=S.plotinfo;if(!M._input||M.visible===!1)return;if(M.layer!=="below")z(h._fullLayout._shapeUpperLayer);else if(M.xref==="paper"||M.yref==="paper")z(h._fullLayout._shapeLowerLayer);else if(L._hadPlotinfo){var R=L.mainplotinfo||L;z(R.shapelayer)}else z(h._fullLayout._shapeLowerLayer);function z(P){var I=g(h,M),U={"data-index":D,"fill-rule":M.fillrule,d:I},O=M.opacity,G=M.fillcolor,$=M.line.width?M.line.color:"rgba(0,0,0,0)",tt=M.line.width,Z=M.line.dash;!tt&&M.editable===!0&&(tt=5,Z="solid");var X=I[I.length-1]!=="Z",J=_(h)&&M.editable&&h._fullLayout._activeShapeIndex===D;J&&(G=X?"rgba(0,0,0,0)":h._fullLayout.activeshape.fillcolor,O=h._fullLayout.activeshape.opacity);var st=P.append("path").attr(U).style("opacity",O).call(i.stroke,$).call(i.fill,G).call(r.dashLine,Z,tt);T(st,h,M);var at;if((J||h._context.edits.shapePosition)&&(at=n(h.layout,"shapes",M)),J){st.style({cursor:"move"});var lt={element:st.node(),plotinfo:L,gd:h,editHelpers:at,isActiveShape:!0},F=x(I,h);t(F,st,lt)}else h._context.edits.shapePosition?c(h,st,M,D,P,at):M.editable===!0&&st.style("pointer-events",X||i.opacity(G)*O<=.5?"stroke":"all");st.node().addEventListener("click",function(){return k(h,st)})}}function T(h,D,S){var M=(S.xref+S.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");r.setClipUrl(h,M?"clip"+D._fullLayout._uid+M:null,D)}function c(h,D,S,M,L,R){var z=10,P=10,I=S.xsizemode==="pixel",U=S.ysizemode==="pixel",O=S.type==="line",G=S.type==="path",$=R.modifyItem,tt,Z,X,J,st,at,lt,F,H,et,q,W,K,nt,it,ot=m.getFromId(h,S.xref),ct=m.getRefType(S.xref),bt=m.getFromId(h,S.yref),ut=m.getRefType(S.yref),pt=y.getDataToPixel(h,ot,!1,ct),yt=y.getDataToPixel(h,bt,!0,ut),Tt=y.getPixelToData(h,ot,!1,ct),kt=y.getPixelToData(h,bt,!0,ut),zt=wt(),Rt={element:zt.node(),gd:h,prepFn:Qt,doneFn:Nt,clickFn:Pt},Gt;d.init(Rt),zt.node().onmousemove=$t;function wt(){return O?It():D}function It(){var Be=10,Ye=Math.max(S.line.width,Be),ze=L.append("g").attr("data-index",M);ze.append("path").attr("d",D.attr("d")).style({cursor:"move","stroke-width":Ye,"stroke-opacity":"0"});var Ee={"fill-opacity":"0"},Wt=Math.max(Ye/2,Be);return ze.append("circle").attr({"data-line-point":"start-point",cx:I?pt(S.xanchor)+S.x0:pt(S.x0),cy:U?yt(S.yanchor)-S.y0:yt(S.y0),r:Wt}).style(Ee).classed("cursor-grab",!0),ze.append("circle").attr({"data-line-point":"end-point",cx:I?pt(S.xanchor)+S.x1:pt(S.x1),cy:U?yt(S.yanchor)-S.y1:yt(S.y1),r:Wt}).style(Ee).classed("cursor-grab",!0),ze}function $t(Be){if(v(h)){Gt=null;return}if(O)Be.target.tagName==="path"?Gt="move":Gt=Be.target.attributes["data-line-point"].value==="start-point"?"resize-over-start-point":"resize-over-end-point";else{var Ye=Rt.element.getBoundingClientRect(),ze=Ye.right-Ye.left,Ee=Ye.bottom-Ye.top,Wt=Be.clientX-Ye.left,ee=Be.clientY-Ye.top,Xt=!G&&ze>z&&Ee>P&&!Be.shiftKey?d.getCursor(Wt/ze,1-ee/Ee):"move";s(D,Xt),Gt=Xt.split("-")[0]}}function Qt(Be){v(h)||(I&&(st=pt(S.xanchor)),U&&(at=yt(S.yanchor)),S.type==="path"?it=S.path:(tt=I?S.x0:pt(S.x0),Z=U?S.y0:yt(S.y0),X=I?S.x1:pt(S.x1),J=U?S.y1:yt(S.y1)),tt<X?(H=tt,K="x0",et=X,nt="x1"):(H=X,K="x1",et=tt,nt="x0"),!U&&Z<J||U&&Z>J?(lt=Z,q="y0",F=J,W="y1"):(lt=J,q="y1",F=Z,W="y0"),$t(Be),Re(L,S),Ie(D,S,h),Rt.moveFn=Gt==="move"?Yt:ve,Rt.altKey=Be.altKey)}function Nt(){v(h)||(s(D),ir(L),T(D,h,S),f.call("_guiRelayout",h,R.getUpdateObj()))}function Pt(){v(h)||ir(L)}function Yt(Be,Ye){if(S.type==="path"){var ze=function(ee){return ee},Ee=ze,Wt=ze;I?$("xanchor",S.xanchor=Tt(st+Be)):(Ee=function(Xt){return Tt(pt(Xt)+Be)},ot&&ot.type==="date"&&(Ee=y.encodeDate(Ee))),U?$("yanchor",S.yanchor=kt(at+Ye)):(Wt=function(Xt){return kt(yt(Xt)+Ye)},bt&&bt.type==="date"&&(Wt=y.encodeDate(Wt))),$("path",S.path=A(it,Ee,Wt))}else I?$("xanchor",S.xanchor=Tt(st+Be)):($("x0",S.x0=Tt(tt+Be)),$("x1",S.x1=Tt(X+Be))),U?$("yanchor",S.yanchor=kt(at+Ye)):($("y0",S.y0=kt(Z+Ye)),$("y1",S.y1=kt(J+Ye)));D.attr("d",g(h,S)),Re(L,S)}function ve(Be,Ye){if(G){var ze=function(We){return We},Ee=ze,Wt=ze;I?$("xanchor",S.xanchor=Tt(st+Be)):(Ee=function(hr){return Tt(pt(hr)+Be)},ot&&ot.type==="date"&&(Ee=y.encodeDate(Ee))),U?$("yanchor",S.yanchor=kt(at+Ye)):(Wt=function(hr){return kt(yt(hr)+Ye)},bt&&bt.type==="date"&&(Wt=y.encodeDate(Wt))),$("path",S.path=A(it,Ee,Wt))}else if(O){if(Gt==="resize-over-start-point"){var ee=tt+Be,Xt=U?Z-Ye:Z+Ye;$("x0",S.x0=I?ee:Tt(ee)),$("y0",S.y0=U?Xt:kt(Xt))}else if(Gt==="resize-over-end-point"){var St=X+Be,Vt=U?J-Ye:J+Ye;$("x1",S.x1=I?St:Tt(St)),$("y1",S.y1=U?Vt:kt(Vt))}}else{var Zt=function(We){return Gt.indexOf(We)!==-1},qt=Zt("n"),Te=Zt("s"),me=Zt("w"),Ne=Zt("e"),Ke=qt?lt+Ye:lt,He=Te?F+Ye:F,Xe=me?H+Be:H,er=Ne?et+Be:et;U&&(qt&&(Ke=lt-Ye),Te&&(He=F-Ye)),(!U&&He-Ke>P||U&&Ke-He>P)&&($(q,S[q]=U?Ke:kt(Ke)),$(W,S[W]=U?He:kt(He))),er-Xe>z&&($(K,S[K]=I?Xe:Tt(Xe)),$(nt,S[nt]=I?er:Tt(er)))}D.attr("d",g(h,S)),Re(L,S)}function Re(Be,Ye){(I||U)&&ze();function ze(){var Ee=Ye.type!=="path",Wt=Be.selectAll(".visual-cue").data([0]),ee=1;Wt.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":ee}).classed("visual-cue",!0);var Xt=pt(I?Ye.xanchor:l.midRange(Ee?[Ye.x0,Ye.x1]:y.extractPathCoords(Ye.path,o.paramIsX))),St=yt(U?Ye.yanchor:l.midRange(Ee?[Ye.y0,Ye.y1]:y.extractPathCoords(Ye.path,o.paramIsY)));if(Xt=y.roundPositionForSharpStrokeRendering(Xt,ee),St=y.roundPositionForSharpStrokeRendering(St,ee),I&&U){var Vt="M"+(Xt-1-ee)+","+(St-1-ee)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";Wt.attr("d",Vt)}else if(I){var Zt="M"+(Xt-1-ee)+","+(St-9-ee)+"v18 h2 v-18 Z";Wt.attr("d",Zt)}else{var qt="M"+(Xt-9-ee)+","+(St-1-ee)+"h18 v2 h-18 Z";Wt.attr("d",qt)}}}function ir(Be){Be.selectAll(".visual-cue").remove()}function Ie(Be,Ye,ze){var Ee=Ye.xref,Wt=Ye.yref,ee=m.getFromId(ze,Ee),Xt=m.getFromId(ze,Wt),St="";Ee!=="paper"&&!ee.autorange&&(St+=Ee),Wt!=="paper"&&!Xt.autorange&&(St+=Wt),r.setClipUrl(Be,St?"clip"+ze._fullLayout._uid+St:null,ze)}}function A(h,D,S){return h.replace(o.segmentRE,function(M){var L=0,R=M.charAt(0),z=o.paramIsX[R],P=o.paramIsY[R],I=o.numParams[R],U=M.substr(1).replace(o.paramRE,function(O){return L>=I||(z[L]?O=D(O):P[L]&&(O=S(O)),L++),O});return R+U})}function k(h,D){if(!!_(h)){var S=D.node(),M=+S.getAttribute("data-index");if(M>=0){if(M===h._fullLayout._activeShapeIndex){p(h);return}h._fullLayout._activeShapeIndex=M,h._fullLayout._deactivateShape=p,b(h)}}}function p(h){if(!!_(h)){var D=h._fullLayout._activeShapeIndex;D>=0&&(a(h),delete h._fullLayout._activeShapeIndex,b(h))}}function w(h){if(!!_(h)){a(h);var D=h._fullLayout._activeShapeIndex,S=(h.layout||{}).shapes||[];if(D<S.length){for(var M=[],L=0;L<S.length;L++)L!==D&&M.push(S[L]);delete h._fullLayout._activeShapeIndex,f.call("_guiRelayout",h,{shapes:M})}}}},{"../../lib":515,"../../lib/setcursor":536,"../../plot_api/plot_template":555,"../../plots/cartesian/axes":566,"../../registry":647,"../color":367,"../dragelement":386,"../drawing":389,"./constants":459,"./display_outlines":461,"./draw_newshape/helpers":466,"./handle_outline":468,"./helpers":469}],463:[function(e,B,V){var f=e("../../drawing/attributes").dash,l=e("../../../lib/extend").extendFlat;B.exports={newshape:{line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:0,dflt:4,editType:"none"},dash:l({},f,{dflt:"solid",editType:"none"}),editType:"none"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"none"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"none"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",editType:"none"},editType:"none"},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},{"../../../lib/extend":505,"../../drawing/attributes":388}],464:[function(e,B,V){var f=32;B.exports={CIRCLE_SIDES:f,i000:0,i090:f/4,i180:f/2,i270:f/4*3,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},{}],465:[function(e,B,V){var f=e("../../color");B.exports=function(m,x,t){t("newshape.drawdirection"),t("newshape.layer"),t("newshape.fillcolor"),t("newshape.fillrule"),t("newshape.opacity");var a=t("newshape.line.width");if(a){var i=(m||{}).plot_bgcolor||"#FFF";t("newshape.line.color",f.contrast(i)),t("newshape.line.dash")}t("activeshape.fillcolor"),t("activeshape.opacity")}},{"../../color":367}],466:[function(e,B,V){var f=e("parse-svg-path"),l=e("./constants"),m=l.CIRCLE_SIDES,x=l.SQRT2,t=e("../../selections/helpers"),a=t.p2r,i=t.r2p,r=[0,3,4,5,6,1,2],n=[0,3,4,1,2];V.writePaths=function(o){var y=o.length;if(!y)return"M0,0Z";for(var g="",b=0;b<y;b++)for(var v=o[b].length,_=0;_<v;_++){var u=o[b][_][0];if(u==="Z")g+="Z";else for(var T=o[b][_].length,c=0;c<T;c++){var A=c;u==="Q"||u==="S"?A=n[c]:u==="C"&&(A=r[c]),g+=o[b][_][A],c>0&&c<T-1&&(g+=",")}}return g},V.readPaths=function(o,y,g,b){var v=f(o),_=[],u=-1,T=function(){u++,_[u]=[]},c,A=0,k=0,p,w,h=function(){p=A,w=k};h();for(var D=0;D<v.length;D++){var S=[],M,L,R,z,P=v[D][0],I=P;switch(P){case"M":T(),A=+v[D][1],k=+v[D][2],S.push([I,A,k]),h();break;case"Q":case"S":M=+v[D][1],R=+v[D][2],A=+v[D][3],k=+v[D][4],S.push([I,A,k,M,R]);break;case"C":M=+v[D][1],R=+v[D][2],L=+v[D][3],z=+v[D][4],A=+v[D][5],k=+v[D][6],S.push([I,A,k,M,R,L,z]);break;case"T":case"L":A=+v[D][1],k=+v[D][2],S.push([I,A,k]);break;case"H":I="L",A=+v[D][1],S.push([I,A,k]);break;case"V":I="L",k=+v[D][1],S.push([I,A,k]);break;case"A":I="L";var U=+v[D][1],O=+v[D][2];+v[D][4]||(U=-U,O=-O);var G=A-U,$=k;for(c=1;c<=m/2;c++){var tt=2*Math.PI*c/m;S.push([I,G+U*Math.cos(tt),$+O*Math.sin(tt)])}break;case"Z":(A!==p||k!==w)&&(A=p,k=w,S.push([I,A,k]));break}for(var Z=(g||{}).domain,X=y._fullLayout._size,J=g&&g.xsizemode==="pixel",st=g&&g.ysizemode==="pixel",at=b===!1,lt=0;lt<S.length;lt++){for(c=0;c+2<7;c+=2){var F=S[lt][c+1],H=S[lt][c+2];F===void 0||H===void 0||(A=F,k=H,g&&(g.xaxis&&g.xaxis.p2r?(at&&(F-=g.xaxis._offset),J?F=i(g.xaxis,g.xanchor)+F:F=a(g.xaxis,F)):(at&&(F-=X.l),Z?F=Z.x[0]+F/X.w:F=F/X.w),g.yaxis&&g.yaxis.p2r?(at&&(H-=g.yaxis._offset),st?H=i(g.yaxis,g.yanchor)-H:H=a(g.yaxis,H)):(at&&(H-=X.t),Z?H=Z.y[1]-H/X.h:H=1-H/X.h)),S[lt][c+1]=F,S[lt][c+2]=H)}_[u].push(S[lt].slice())}}return _};function d(o,y){return Math.abs(o-y)<=1e-6}function s(o,y){var g=y[1]-o[1],b=y[2]-o[2];return Math.sqrt(g*g+b*b)}V.pointsOnRectangle=function(o){var y=o.length;if(y!==5)return!1;for(var g=1;g<3;g++){var b=o[0][g]-o[1][g],v=o[3][g]-o[2][g];if(!d(b,v))return!1;var _=o[0][g]-o[3][g],u=o[1][g]-o[2][g];if(!d(_,u))return!1}return!d(o[0][1],o[1][1])&&!d(o[0][1],o[3][1])?!1:!!(s(o[0],o[1])*s(o[0],o[3]))},V.pointsOnEllipse=function(o){var y=o.length;if(y!==m+1)return!1;y=m;for(var g=0;g<y;g++){var b=(y*2-g)%y,v=(y/2+b)%y,_=(y/2+g)%y;if(!d(s(o[g],o[_]),s(o[b],o[v])))return!1}return!0},V.handleEllipse=function(o,y,g){if(!o)return[y,g];var b=V.ellipseOver({x0:y[0],y0:y[1],x1:g[0],y1:g[1]}),v=(b.x1+b.x0)/2,_=(b.y1+b.y0)/2,u=(b.x1-b.x0)/2,T=(b.y1-b.y0)/2;u||(u=T=T/x),T||(T=u=u/x);for(var c=[],A=0;A<m;A++){var k=A*2*Math.PI/m;c.push([v+u*Math.cos(k),_+T*Math.sin(k)])}return c},V.ellipseOver=function(o){var y=o.x0,g=o.y0,b=o.x1,v=o.y1,_=b-y,u=v-g;y-=_,g-=u;var T=(y+b)/2,c=(g+v)/2,A=x;return _*=A,u*=A,{x0:T-_,y0:c-u,x1:T+_,y1:c+u}},V.fixDatesForPaths=function(o,y,g){var b=y.type==="date",v=g.type==="date";if(!b&&!v)return o;for(var _=0;_<o.length;_++)for(var u=0;u<o[_].length;u++)for(var T=0;T+2<o[_][u].length;T+=2)b&&(o[_][u][T+1]=o[_][u][T+1].replace(" ","_")),v&&(o[_][u][T+2]=o[_][u][T+2].replace(" ","_"));return o}},{"../../selections/helpers":454,"./constants":464,"parse-svg-path":250}],467:[function(e,B,V){var f=e("../../dragelement/helpers"),l=f.drawMode,m=f.openMode,x=e("./constants"),t=x.i000,a=x.i090,i=x.i180,r=x.i270,n=x.cos45,d=x.sin45,s=e("../../selections/helpers"),o=s.p2r,y=s.r2p,g=e(".././handle_outline"),b=g.clearOutline,v=e("./helpers"),_=v.readPaths,u=v.writePaths,T=v.ellipseOver,c=v.fixDatesForPaths;B.exports=function(k,p){if(!!k.length){var w=k[0][0];if(!!w){var h=w.getAttribute("d"),D=p.gd,S=D._fullLayout.newshape,M=p.plotinfo,L=M.xaxis,R=M.yaxis,z=!!M.domain||!M.xaxis,P=!!M.domain||!M.yaxis,I=p.isActiveShape,U=p.dragmode,O=(D.layout||{}).shapes||[];if(!l(U)&&I!==void 0){var G=D._fullLayout._activeShapeIndex;if(G<O.length)switch(D._fullLayout.shapes[G].type){case"rect":U="drawrect";break;case"circle":U="drawcircle";break;case"line":U="drawline";break;case"path":var $=O[G].path||"";$[$.length-1]==="Z"?U="drawclosedpath":U="drawopenpath";break}}var tt=m(U),Z=_(h,D,M,I),X={editable:!0,xref:z?"paper":L._id,yref:P?"paper":R._id,layer:S.layer,opacity:S.opacity,line:{color:S.line.color,width:S.line.width,dash:S.line.dash}};tt||(X.fillcolor=S.fillcolor,X.fillrule=S.fillrule);var J;if(Z.length===1&&(J=Z[0]),J&&J.length===5&&U==="drawrect")X.type="rect",X.x0=J[0][1],X.y0=J[0][2],X.x1=J[2][1],X.y1=J[2][2];else if(J&&U==="drawline")X.type="line",X.x0=J[0][1],X.y0=J[0][2],X.x1=J[1][1],X.y1=J[1][2];else if(J&&U==="drawcircle"){X.type="circle";var st=J[t][1],at=J[a][1],lt=J[i][1],F=J[r][1],H=J[t][2],et=J[a][2],q=J[i][2],W=J[r][2],K=M.xaxis&&(M.xaxis.type==="date"||M.xaxis.type==="log"),nt=M.yaxis&&(M.yaxis.type==="date"||M.yaxis.type==="log");K&&(st=y(M.xaxis,st),at=y(M.xaxis,at),lt=y(M.xaxis,lt),F=y(M.xaxis,F)),nt&&(H=y(M.yaxis,H),et=y(M.yaxis,et),q=y(M.yaxis,q),W=y(M.yaxis,W));var it=(at+F)/2,ot=(H+q)/2,ct=(F-at+lt-st)/2,bt=(W-et+q-H)/2,ut=T({x0:it,y0:ot,x1:it+ct*n,y1:ot+bt*d});K&&(ut.x0=o(M.xaxis,ut.x0),ut.x1=o(M.xaxis,ut.x1)),nt&&(ut.y0=o(M.yaxis,ut.y0),ut.y1=o(M.yaxis,ut.y1)),X.x0=ut.x0,X.y0=ut.y0,X.x1=ut.x1,X.y1=ut.y1}else X.type="path",L&&R&&c(Z,L,R),X.path=u(Z),J=null;b(D);for(var pt=p.editHelpers,yt=(pt||{}).modifyItem,Tt=[],kt=0;kt<O.length;kt++){var zt=D._fullLayout.shapes[kt];if(Tt[kt]=zt._input,I!==void 0&&kt===D._fullLayout._activeShapeIndex){var Rt=X;switch(zt.type){case"line":case"rect":case"circle":yt("x0",Rt.x0),yt("x1",Rt.x1),yt("y0",Rt.y0),yt("y1",Rt.y1);break;case"path":yt("path",Rt.path);break}}}return I===void 0?(Tt.push(X),Tt):pt?pt.getUpdateObj():{}}}}},{"../../dragelement/helpers":385,"../../selections/helpers":454,".././handle_outline":468,"./constants":464,"./helpers":466}],468:[function(e,B,V){function f(m){var x=m._fullLayout._zoomlayer;x&&x.selectAll(".outline-controllers").remove()}function l(m){var x=m._fullLayout._zoomlayer;x&&x.selectAll(".select-outline").remove(),m._fullLayout._outlining=!1}B.exports={clearOutlineControllers:f,clearOutline:l}},{}],469:[function(e,B,V){var f=e("./constants"),l=e("../../lib"),m=e("../../plots/cartesian/axes");V.rangeToShapePosition=function(t){return t.type==="log"?t.r2d:function(a){return a}},V.shapePositionToRange=function(t){return t.type==="log"?t.d2r:function(a){return a}},V.decodeDate=function(t){return function(a){return a.replace&&(a=a.replace("_"," ")),t(a)}},V.encodeDate=function(t){return function(a){return t(a).replace(" ","_")}},V.extractPathCoords=function(t,a,i){var r=[],n=t.match(f.segmentRE);return n.forEach(function(d){var s=a[d.charAt(0)].drawn;if(s!==void 0){var o=d.substr(1).match(f.paramRE);if(!(!o||o.length<s)){var y=o[s],g=i?y:l.cleanNumber(y);r.push(g)}}}),r},V.getDataToPixel=function(t,a,i,r){var n=t._fullLayout._size,d;if(a)if(r==="domain")d=function(o){return a._length*(i?1-o:o)+a._offset};else{var s=V.shapePositionToRange(a);d=function(o){return a._offset+a.r2p(s(o,!0))},a.type==="date"&&(d=V.decodeDate(d))}else i?d=function(o){return n.t+n.h*(1-o)}:d=function(o){return n.l+n.w*o};return d},V.getPixelToData=function(t,a,i,r){var n=t._fullLayout._size,d;if(a)if(r==="domain")d=function(o){var y=(o-a._offset)/a._length;return i?1-y:y};else{var s=V.rangeToShapePosition(a);d=function(o){return s(a.p2r(o-a._offset))}}else i?d=function(o){return 1-(o-n.t)/n.h}:d=function(o){return(o-n.l)/n.w};return d},V.roundPositionForSharpStrokeRendering=function(t,a){var i=Math.round(a%2)===1,r=Math.round(t);return i?r+.5:r},V.makeShapesOptionsAndPlotinfo=function(t,a){var i=t._fullLayout.shapes[a]||{},r=t._fullLayout._plots[i.xref+i.yref],n=!!r;return n?r._hadPlotinfo=!0:(r={},i.xref&&i.xref!=="paper"&&(r.xaxis=t._fullLayout[i.xref+"axis"]),i.yref&&i.yref!=="paper"&&(r.yaxis=t._fullLayout[i.yref+"axis"])),r.xsizemode=i.xsizemode,r.ysizemode=i.ysizemode,r.xanchor=i.xanchor,r.yanchor=i.yanchor,{options:i,plotinfo:r}},V.makeSelectionsOptionsAndPlotinfo=function(t,a){var i=t._fullLayout.selections[a]||{},r=t._fullLayout._plots[i.xref+i.yref],n=!!r;return n?r._hadPlotinfo=!0:(r={},i.xref&&(r.xaxis=t._fullLayout[i.xref+"axis"]),i.yref&&(r.yaxis=t._fullLayout[i.yref+"axis"])),{options:i,plotinfo:r}},V.getPathString=function(t,a){var i=a.type,r=m.getRefType(a.xref),n=m.getRefType(a.yref),d=m.getFromId(t,a.xref),s=m.getFromId(t,a.yref),o=t._fullLayout._size,y,g,b,v,_,u,T,c;if(d?r==="domain"?g=function(R){return d._offset+d._length*R}:(y=V.shapePositionToRange(d),g=function(R){return d._offset+d.r2p(y(R,!0))}):g=function(R){return o.l+o.w*R},s?n==="domain"?v=function(R){return s._offset+s._length*(1-R)}:(b=V.shapePositionToRange(s),v=function(R){return s._offset+s.r2p(b(R,!0))}):v=function(R){return o.t+o.h*(1-R)},i==="path")return d&&d.type==="date"&&(g=V.decodeDate(g)),s&&s.type==="date"&&(v=V.decodeDate(v)),x(a,g,v);if(a.xsizemode==="pixel"){var A=g(a.xanchor);_=A+a.x0,u=A+a.x1}else _=g(a.x0),u=g(a.x1);if(a.ysizemode==="pixel"){var k=v(a.yanchor);T=k-a.y0,c=k-a.y1}else T=v(a.y0),c=v(a.y1);if(i==="line")return"M"+_+","+T+"L"+u+","+c;if(i==="rect")return"M"+_+","+T+"H"+u+"V"+c+"H"+_+"Z";var p=(_+u)/2,w=(T+c)/2,h=Math.abs(p-_),D=Math.abs(w-T),S="A"+h+","+D,M=p+h+","+w,L=p+","+(w-D);return"M"+M+S+" 0 1,1 "+L+S+" 0 0,1 "+M+"Z"};function x(t,a,i){var r=t.path,n=t.xsizemode,d=t.ysizemode,s=t.xanchor,o=t.yanchor;return r.replace(f.segmentRE,function(y){var g=0,b=y.charAt(0),v=f.paramIsX[b],_=f.paramIsY[b],u=f.numParams[b],T=y.substr(1).replace(f.paramRE,function(c){return v[g]?n==="pixel"?c=a(s)+Number(c):c=a(c):_[g]&&(d==="pixel"?c=i(o)-Number(c):c=i(c)),g++,g>u&&(c="X"),c});return g>u&&(T=T.replace(/[\s,]*X.*/,""),l.log("Ignoring extra params in segment "+y)),b+T})}},{"../../lib":515,"../../plots/cartesian/axes":566,"./constants":459}],470:[function(e,B,V){var f=e("./draw");B.exports={moduleType:"component",name:"shapes",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),supplyDrawNewShapeDefaults:e("./draw_newshape/defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("shapes"),calcAutorange:e("./calc_autorange"),draw:f.draw,drawOne:f.drawOne}},{"../../plots/cartesian/include_components":577,"./attributes":457,"./calc_autorange":458,"./defaults":460,"./draw":462,"./draw_newshape/defaults":465}],471:[function(e,B,V){var f=e("../../plots/font_attributes"),l=e("../../plots/pad_attributes"),m=e("../../lib/extend").extendDeepAll,x=e("../../plot_api/edit_types").overrideAll,t=e("../../plots/animation_attributes"),a=e("../../plot_api/plot_template").templatedArray,i=e("./constants"),r=a("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});B.exports=x(a("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:r,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:m(l({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:t.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:f({})},font:f({}),activebgcolor:{valType:"color",dflt:i.gripBgActiveColor},bgcolor:{valType:"color",dflt:i.railBgColor},bordercolor:{valType:"color",dflt:i.railBorderColor},borderwidth:{valType:"number",min:0,dflt:i.railBorderWidth},ticklen:{valType:"number",min:0,dflt:i.tickLength},tickcolor:{valType:"color",dflt:i.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:i.minorTickLength}}),"arraydraw","from-root")},{"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../../plots/animation_attributes":560,"../../plots/font_attributes":594,"../../plots/pad_attributes":627,"./constants":472}],472:[function(e,B,V){B.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],473:[function(e,B,V){var f=e("../../lib"),l=e("../../plots/array_container_defaults"),m=e("./attributes"),x=e("./constants"),t=x.name,a=m.steps;B.exports=function(d,s){l(d,s,{name:t,handleItemDefaults:i})};function i(n,d,s){function o(c,A){return f.coerce(n,d,m,c,A)}for(var y=l(n,d,{name:"steps",handleItemDefaults:r}),g=0,b=0;b<y.length;b++)y[b].visible&&g++;var v;if(g<2?v=d.visible=!1:v=o("visible"),!!v){d._stepCount=g;var _=d._visibleSteps=f.filterVisible(y),u=o("active");(y[u]||{}).visible||(d.active=_[0]._index),o("x"),o("y"),f.noneOrAll(n,d,["x","y"]),o("xanchor"),o("yanchor"),o("len"),o("lenmode"),o("pad.t"),o("pad.r"),o("pad.b"),o("pad.l"),f.coerceFont(o,"font",s.font);var T=o("currentvalue.visible");T&&(o("currentvalue.xanchor"),o("currentvalue.prefix"),o("currentvalue.suffix"),o("currentvalue.offset"),f.coerceFont(o,"currentvalue.font",d.font)),o("transition.duration"),o("transition.easing"),o("bgcolor"),o("activebgcolor"),o("bordercolor"),o("borderwidth"),o("ticklen"),o("tickwidth"),o("tickcolor"),o("minorticklen")}}function r(n,d){function s(g,b){return f.coerce(n,d,a,g,b)}var o;if(n.method!=="skip"&&!Array.isArray(n.args)?o=d.visible=!1:o=s("visible"),o){s("method"),s("args");var y=s("label","step-"+d._index);s("value",y),s("execute")}}},{"../../lib":515,"../../plots/array_container_defaults":561,"./attributes":471,"./constants":472}],474:[function(e,B,V){var f=e("@plotly/d3"),l=e("../../plots/plots"),m=e("../color"),x=e("../drawing"),t=e("../../lib"),a=t.strTranslate,i=e("../../lib/svg_text_utils"),r=e("../../plot_api/plot_template").arrayEditor,n=e("./constants"),d=e("../../constants/alignment"),s=d.LINE_SPACING,o=d.FROM_TL,y=d.FROM_BR;B.exports=function(U){var O=U._fullLayout,G=b(O,U),$=O._infolayer.selectAll("g."+n.containerClassName).data(G.length>0?[0]:[]);$.enter().append("g").classed(n.containerClassName,!0).style("cursor","ew-resize");function tt(st){st._commandObserver&&(st._commandObserver.remove(),delete st._commandObserver),l.autoMargin(U,g(st))}if($.exit().each(function(){f.select(this).selectAll("g."+n.groupClassName).each(tt)}).remove(),G.length!==0){var Z=$.selectAll("g."+n.groupClassName).data(G,v);Z.enter().append("g").classed(n.groupClassName,!0),Z.exit().each(tt).remove();for(var X=0;X<G.length;X++){var J=G[X];_(U,J)}Z.each(function(st){var at=f.select(this);S(st),l.manageCommandObserver(U,st,st._visibleSteps,function(lt){var F=at.data()[0];F.active!==lt.index&&(F._dragging||w(U,at,F,lt.index,!1,!0))}),u(U,f.select(this),st)})}};function g(I){return n.autoMarginIdRoot+I._index}function b(I,U){for(var O=I[n.name],G=[],$=0;$<O.length;$++){var tt=O[$];!tt.visible||(tt._gd=U,G.push(tt))}return G}function v(I){return I._index}function _(I,U){var O=x.tester.selectAll("g."+n.labelGroupClass).data(U._visibleSteps);O.enter().append("g").classed(n.labelGroupClass,!0);var G=0,$=0;O.each(function(et){var q=f.select(this),W=A(q,{step:et},U),K=W.node();if(K){var nt=x.bBox(K);$=Math.max($,nt.height),G=Math.max(G,nt.width)}}),O.remove();var tt=U._dims={};tt.inputAreaWidth=Math.max(n.railWidth,n.gripHeight);var Z=I._fullLayout._size;tt.lx=Z.l+Z.w*U.x,tt.ly=Z.t+Z.h*(1-U.y),U.lenmode==="fraction"?tt.outerLength=Math.round(Z.w*U.len):tt.outerLength=U.len,tt.inputAreaStart=0,tt.inputAreaLength=Math.round(tt.outerLength-U.pad.l-U.pad.r);var X=tt.inputAreaLength-2*n.stepInset,J=X/(U._stepCount-1),st=G+n.labelPadding;if(tt.labelStride=Math.max(1,Math.ceil(st/J)),tt.labelHeight=$,tt.currentValueMaxWidth=0,tt.currentValueHeight=0,tt.currentValueTotalHeight=0,tt.currentValueMaxLines=1,U.currentvalue.visible){var at=x.tester.append("g");O.each(function(et){var q=T(at,U,et.label),W=q.node()&&x.bBox(q.node())||{width:0,height:0},K=i.lineCount(q);tt.currentValueMaxWidth=Math.max(tt.currentValueMaxWidth,Math.ceil(W.width)),tt.currentValueHeight=Math.max(tt.currentValueHeight,Math.ceil(W.height)),tt.currentValueMaxLines=Math.max(tt.currentValueMaxLines,K)}),tt.currentValueTotalHeight=tt.currentValueHeight+U.currentvalue.offset,at.remove()}tt.height=tt.currentValueTotalHeight+n.tickOffset+U.ticklen+n.labelOffset+tt.labelHeight+U.pad.t+U.pad.b;var lt="left";t.isRightAnchor(U)&&(tt.lx-=tt.outerLength,lt="right"),t.isCenterAnchor(U)&&(tt.lx-=tt.outerLength/2,lt="center");var F="top";t.isBottomAnchor(U)&&(tt.ly-=tt.height,F="bottom"),t.isMiddleAnchor(U)&&(tt.ly-=tt.height/2,F="middle"),tt.outerLength=Math.ceil(tt.outerLength),tt.height=Math.ceil(tt.height),tt.lx=Math.round(tt.lx),tt.ly=Math.round(tt.ly);var H={y:U.y,b:tt.height*y[F],t:tt.height*o[F]};U.lenmode==="fraction"?(H.l=0,H.xl=U.x-U.len*o[lt],H.r=0,H.xr=U.x+U.len*y[lt]):(H.x=U.x,H.l=tt.outerLength*o[lt],H.r=tt.outerLength*y[lt]),l.autoMargin(I,g(U),H)}function u(I,U,O){(O.steps[O.active]||{}).visible||(O.active=O._visibleSteps[0]._index),U.call(T,O).call(P,O).call(k,O).call(D,O).call(z,I,O).call(c,I,O);var G=O._dims;x.setTranslate(U,G.lx+O.pad.l,G.ly+O.pad.t),U.call(M,O,!1),U.call(T,O)}function T(I,U,O){if(!!U.currentvalue.visible){var G=U._dims,$,tt;switch(U.currentvalue.xanchor){case"right":$=G.inputAreaLength-n.currentValueInset-G.currentValueMaxWidth,tt="left";break;case"center":$=G.inputAreaLength*.5,tt="middle";break;default:$=n.currentValueInset,tt="left"}var Z=t.ensureSingle(I,"text",n.labelClass,function(F){F.attr({"text-anchor":tt,"data-notex":1})}),X=U.currentvalue.prefix?U.currentvalue.prefix:"";if(typeof O=="string")X+=O;else{var J=U.steps[U.active].label,st=U._gd._fullLayout._meta;st&&(J=t.templateString(J,st)),X+=J}U.currentvalue.suffix&&(X+=U.currentvalue.suffix),Z.call(x.font,U.currentvalue.font).text(X).call(i.convertToTspans,U._gd);var at=i.lineCount(Z),lt=(G.currentValueMaxLines+1-at)*U.currentvalue.font.size*s;return i.positionText(Z,$,lt),Z}}function c(I,U,O){var G=t.ensureSingle(I,"rect",n.gripRectClass,function($){$.call(h,U,I,O).style("pointer-events","all")});G.attr({width:n.gripWidth,height:n.gripHeight,rx:n.gripRadius,ry:n.gripRadius}).call(m.stroke,O.bordercolor).call(m.fill,O.bgcolor).style("stroke-width",O.borderwidth+"px")}function A(I,U,O){var G=t.ensureSingle(I,"text",n.labelClass,function(Z){Z.attr({"text-anchor":"middle","data-notex":1})}),$=U.step.label,tt=O._gd._fullLayout._meta;return tt&&($=t.templateString($,tt)),G.call(x.font,O.font).text($).call(i.convertToTspans,O._gd),G}function k(I,U){var O=t.ensureSingle(I,"g",n.labelsClass),G=U._dims,$=O.selectAll("g."+n.labelGroupClass).data(G.labelSteps);$.enter().append("g").classed(n.labelGroupClass,!0),$.exit().remove(),$.each(function(tt){var Z=f.select(this);Z.call(A,tt,U),x.setTranslate(Z,L(U,tt.fraction),n.tickOffset+U.ticklen+U.font.size*s+n.labelOffset+G.currentValueTotalHeight)})}function p(I,U,O,G,$){var tt=Math.round(G*(O._stepCount-1)),Z=O._visibleSteps[tt]._index;Z!==O.active&&w(I,U,O,Z,!0,$)}function w(I,U,O,G,$,tt){var Z=O.active;O.active=G,r(I.layout,n.name,O).applyUpdate("active",G);var X=O.steps[O.active];U.call(M,O,tt),U.call(T,O),I.emit("plotly_sliderchange",{slider:O,step:O.steps[O.active],interaction:$,previousActive:Z}),X&&X.method&&$&&(U._nextMethod?(U._nextMethod.step=X,U._nextMethod.doCallback=$,U._nextMethod.doTransition=tt):(U._nextMethod={step:X,doCallback:$,doTransition:tt},U._nextMethodRaf=window.requestAnimationFrame(function(){var J=U._nextMethod.step;!J.method||(J.execute&&l.executeAPICommand(I,J.method,J.args),U._nextMethod=null,U._nextMethodRaf=null)})))}function h(I,U,O){var G=O.node(),$=f.select(U);function tt(){return O.data()[0]}function Z(){var X=tt();U.emit("plotly_sliderstart",{slider:X});var J=O.select("."+n.gripRectClass);f.event.stopPropagation(),f.event.preventDefault(),J.call(m.fill,X.activebgcolor);var st=R(X,f.mouse(G)[0]);p(U,O,X,st,!0),X._dragging=!0;function at(){var F=tt(),H=R(F,f.mouse(G)[0]);p(U,O,F,H,!1)}$.on("mousemove",at),$.on("touchmove",at);function lt(){var F=tt();F._dragging=!1,J.call(m.fill,F.bgcolor),$.on("mouseup",null),$.on("mousemove",null),$.on("touchend",null),$.on("touchmove",null),U.emit("plotly_sliderend",{slider:F,step:F.steps[F.active]})}$.on("mouseup",lt),$.on("touchend",lt)}I.on("mousedown",Z),I.on("touchstart",Z)}function D(I,U){var O=I.selectAll("rect."+n.tickRectClass).data(U._visibleSteps),G=U._dims;O.enter().append("rect").classed(n.tickRectClass,!0),O.exit().remove(),O.attr({width:U.tickwidth+"px","shape-rendering":"crispEdges"}),O.each(function($,tt){var Z=tt%G.labelStride===0,X=f.select(this);X.attr({height:Z?U.ticklen:U.minorticklen}).call(m.fill,U.tickcolor),x.setTranslate(X,L(U,tt/(U._stepCount-1))-.5*U.tickwidth,(Z?n.tickOffset:n.minorTickOffset)+G.currentValueTotalHeight)})}function S(I){var U=I._dims;U.labelSteps=[];for(var O=I._stepCount,G=0;G<O;G+=U.labelStride)U.labelSteps.push({fraction:G/(O-1),step:I._visibleSteps[G]})}function M(I,U,O){for(var G=I.select("rect."+n.gripRectClass),$=0,tt=0;tt<U._stepCount;tt++)if(U._visibleSteps[tt]._index===U.active){$=tt;break}var Z=L(U,$/(U._stepCount-1));if(!U._invokingCommand){var X=G;O&&U.transition.duration>0&&(X=X.transition().duration(U.transition.duration).ease(U.transition.easing)),X.attr("transform",a(Z-n.gripWidth*.5,U._dims.currentValueTotalHeight))}}function L(I,U){var O=I._dims;return O.inputAreaStart+n.stepInset+(O.inputAreaLength-2*n.stepInset)*Math.min(1,Math.max(0,U))}function R(I,U){var O=I._dims;return Math.min(1,Math.max(0,(U-n.stepInset-O.inputAreaStart)/(O.inputAreaLength-2*n.stepInset-2*O.inputAreaStart)))}function z(I,U,O){var G=O._dims,$=t.ensureSingle(I,"rect",n.railTouchRectClass,function(tt){tt.call(h,U,I,O).style("pointer-events","all")});$.attr({width:G.inputAreaLength,height:Math.max(G.inputAreaWidth,n.tickOffset+O.ticklen+G.labelHeight)}).call(m.fill,O.bgcolor).attr("opacity",0),x.setTranslate($,0,G.currentValueTotalHeight)}function P(I,U){var O=U._dims,G=O.inputAreaLength-n.railInset*2,$=t.ensureSingle(I,"rect",n.railRectClass);$.attr({width:G,height:n.railWidth,rx:n.railRadius,ry:n.railRadius,"shape-rendering":"crispEdges"}).call(m.stroke,U.bordercolor).call(m.fill,U.bgcolor).style("stroke-width",U.borderwidth+"px"),x.setTranslate($,n.railInset,(O.inputAreaWidth-n.railWidth)*.5+O.currentValueTotalHeight)}},{"../../constants/alignment":483,"../../lib":515,"../../lib/svg_text_utils":541,"../../plot_api/plot_template":555,"../../plots/plots":628,"../color":367,"../drawing":389,"./constants":472,"@plotly/d3":58}],475:[function(e,B,V){var f=e("./constants");B.exports={moduleType:"component",name:f.name,layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),draw:e("./draw")}},{"./attributes":471,"./constants":472,"./defaults":473,"./draw":474}],476:[function(e,B,V){var f=e("@plotly/d3"),l=e("fast-isnumeric"),m=e("../../plots/plots"),x=e("../../registry"),t=e("../../lib"),a=t.strTranslate,i=e("../drawing"),r=e("../color"),n=e("../../lib/svg_text_utils"),d=e("../../constants/interactions"),s=e("../../constants/alignment").OPPOSITE_SIDE,o=/ [XY][0-9]* /;function y(g,b,v){var _=v.propContainer,u=v.propName,T=v.placeholder,c=v.traceIndex,A=v.avoid||{},k=v.attributes,p=v.transform,w=v.containerGroup,h=g._fullLayout,D=1,S=!1,M=_.title,L=(M&&M.text?M.text:"").trim(),R=M&&M.font?M.font:{},z=R.family,P=R.size,I=R.color,U;u==="title.text"?U="titleText":u.indexOf("axis")!==-1?U="axisTitleText":u.indexOf("colorbar"!==-1)&&(U="colorbarTitleText");var O=g._context.edits[U];L===""?D=0:L.replace(o," % ")===T.replace(o," % ")&&(D=.2,S=!0,O||(L="")),v._meta?L=t.templateString(L,v._meta):h._meta&&(L=t.templateString(L,h._meta));var G=L||O,$;w||(w=t.ensureSingle(h._infolayer,"g","g-"+b),$=h._hColorbarMoveTitle);var tt=w.selectAll("text").data(G?[0]:[]);if(tt.enter().append("text"),tt.text(L).attr("class",b),tt.exit().remove(),!G)return w;function Z(at){t.syncOrAsync([X,J],at)}function X(at){var lt;return!p&&$&&(p={}),p?(lt="",p.rotate&&(lt+="rotate("+[p.rotate,k.x,k.y]+")"),(p.offset||$)&&(lt+=a(0,(p.offset||0)-($||0)))):lt=null,at.attr("transform",lt),at.style({"font-family":z,"font-size":f.round(P,2)+"px",fill:r.rgb(I),opacity:D*r.opacity(I),"font-weight":m.fontWeight}).attr(k).call(n.convertToTspans,g),m.previousPromises(g)}function J(at){var lt=f.select(at.node().parentNode);if(A&&A.selection&&A.side&&L){lt.attr("transform",null);var F=s[A.side],H=A.side==="left"||A.side==="top"?-1:1,et=l(A.pad)?A.pad:2,q=i.bBox(lt.node()),W={left:0,top:0,right:h.width,bottom:h.height},K=A.maxShift||H*(W[A.side]-q[A.side]),nt=0;if(K<0)nt=K;else{var it=A.offsetLeft||0,ot=A.offsetTop||0;q.left-=it,q.right-=it,q.top-=ot,q.bottom-=ot,A.selection.each(function(){var bt=i.bBox(this);t.bBoxIntersect(q,bt,et)&&(nt=Math.max(nt,H*(bt[A.side]-q[F])+et))}),nt=Math.min(K,nt)}if(nt>0||K<0){var ct={left:[-nt,0],right:[nt,0],top:[0,-nt],bottom:[0,nt]}[A.side];lt.attr("transform",a(ct[0],ct[1]))}}}tt.call(Z);function st(){D=0,S=!0,tt.text(T).on("mouseover.opacity",function(){f.select(this).transition().duration(d.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){f.select(this).transition().duration(d.HIDE_PLACEHOLDER).style("opacity",0)})}return O&&(L?tt.on(".opacity",null):st(),tt.call(n.makeEditable,{gd:g}).on("edit",function(at){c!==void 0?x.call("_guiRestyle",g,u,at,c):x.call("_guiRelayout",g,u,at)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(Z)}).on("input",function(at){this.text(at||" ").call(n.positionText,k.x,k.y)})),tt.classed("js-placeholder",S),w}B.exports={draw:y}},{"../../constants/alignment":483,"../../constants/interactions":490,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/plots":628,"../../registry":647,"../color":367,"../drawing":389,"@plotly/d3":58,"fast-isnumeric":190}],477:[function(e,B,V){var f=e("../../plots/font_attributes"),l=e("../color/attributes"),m=e("../../lib/extend").extendFlat,x=e("../../plot_api/edit_types").overrideAll,t=e("../../plots/pad_attributes"),a=e("../../plot_api/plot_template").templatedArray,i=a("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});B.exports=x(a("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:i,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:m(t({editType:"arraydraw"}),{}),font:f({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:l.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},{"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../../plots/font_attributes":594,"../../plots/pad_attributes":627,"../color/attributes":366}],478:[function(e,B,V){B.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"\u25C4",right:"\u25BA",up:"\u25B2",down:"\u25BC"}}},{}],479:[function(e,B,V){var f=e("../../lib"),l=e("../../plots/array_container_defaults"),m=e("./attributes"),x=e("./constants"),t=x.name,a=m.buttons;B.exports=function(d,s){var o={name:t,handleItemDefaults:i};l(d,s,o)};function i(n,d,s){function o(b,v){return f.coerce(n,d,m,b,v)}var y=l(n,d,{name:"buttons",handleItemDefaults:r}),g=o("visible",y.length>0);!g||(o("active"),o("direction"),o("type"),o("showactive"),o("x"),o("y"),f.noneOrAll(n,d,["x","y"]),o("xanchor"),o("yanchor"),o("pad.t"),o("pad.r"),o("pad.b"),o("pad.l"),f.coerceFont(o,"font",s.font),o("bgcolor",s.paper_bgcolor),o("bordercolor"),o("borderwidth"))}function r(n,d){function s(y,g){return f.coerce(n,d,a,y,g)}var o=s("visible",n.method==="skip"||Array.isArray(n.args));o&&(s("method"),s("args"),s("args2"),s("label"),s("execute"))}},{"../../lib":515,"../../plots/array_container_defaults":561,"./attributes":477,"./constants":478}],480:[function(e,B,V){var f=e("@plotly/d3"),l=e("../../plots/plots"),m=e("../color"),x=e("../drawing"),t=e("../../lib"),a=e("../../lib/svg_text_utils"),i=e("../../plot_api/plot_template").arrayEditor,r=e("../../constants/alignment").LINE_SPACING,n=e("./constants"),d=e("./scrollbox");B.exports=function(R){var z=R._fullLayout,P=t.filterVisible(z[n.name]);function I(J){l.autoMargin(R,D(J))}var U=z._menulayer.selectAll("g."+n.containerClassName).data(P.length>0?[0]:[]);if(U.enter().append("g").classed(n.containerClassName,!0).style("cursor","pointer"),U.exit().each(function(){f.select(this).selectAll("g."+n.headerGroupClassName).each(I)}).remove(),P.length!==0){var O=U.selectAll("g."+n.headerGroupClassName).data(P,s);O.enter().append("g").classed(n.headerGroupClassName,!0);for(var G=t.ensureSingle(U,"g",n.dropdownButtonGroupClassName,function(J){J.style("pointer-events","all")}),$=0;$<P.length;$++){var tt=P[$];h(R,tt)}var Z="updatemenus"+z._uid,X=new d(R,G,Z);O.enter().size()&&(G.node().parentNode.appendChild(G.node()),G.call(M)),O.exit().each(function(J){G.call(M),I(J)}).remove(),O.each(function(J){var st=f.select(this),at=J.type==="dropdown"?G:null;l.manageCommandObserver(R,J,J.buttons,function(lt){g(R,J,J.buttons[lt.index],st,at,X,lt.index,!0)}),J.type==="dropdown"?(b(R,st,G,X,J),y(G,J)&&v(R,st,G,X,J)):v(R,st,null,null,J)})}};function s(L){return L._index}function o(L){return+L.attr(n.menuIndexAttrName)==-1}function y(L,R){return+L.attr(n.menuIndexAttrName)===R._index}function g(L,R,z,P,I,U,O,G){R.active=O,i(L.layout,n.name,R).applyUpdate("active",O),R.type==="buttons"?v(L,P,null,null,R):R.type==="dropdown"&&(I.attr(n.menuIndexAttrName,"-1"),b(L,P,I,U,R),G||v(L,P,I,U,R))}function b(L,R,z,P,I){var U=t.ensureSingle(R,"g",n.headerClassName,function(J){J.style("pointer-events","all")}),O=I._dims,G=I.active,$=I.buttons[G]||n.blankHeaderOpts,tt={y:I.pad.t,yPad:0,x:I.pad.l,xPad:0,index:0},Z={width:O.headerWidth,height:O.headerHeight};U.call(T,I,$,L).call(S,I,tt,Z);var X=t.ensureSingle(R,"text",n.headerArrowClassName,function(J){J.attr("text-anchor","end").call(x.font,I.font).text(n.arrowSymbol[I.direction])});X.attr({x:O.headerWidth-n.arrowOffsetX+I.pad.l,y:O.headerHeight/2+n.textOffsetY+I.pad.t}),U.on("click",function(){z.call(M,String(y(z,I)?-1:I._index)),v(L,R,z,P,I)}),U.on("mouseover",function(){U.call(p)}),U.on("mouseout",function(){U.call(w,I)}),x.setTranslate(R,O.lx,O.ly)}function v(L,R,z,P,I){z||(z=R,z.attr("pointer-events","all"));var U=!o(z)||I.type==="buttons"?I.buttons:[],O=I.type==="dropdown"?n.dropdownButtonClassName:n.buttonClassName,G=z.selectAll("g."+O).data(t.filterVisible(U)),$=G.enter().append("g").classed(O,!0),tt=G.exit();I.type==="dropdown"?($.attr("opacity","0").transition().attr("opacity","1"),tt.transition().attr("opacity","0").remove()):tt.remove();var Z=0,X=0,J=I._dims,st=["up","down"].indexOf(I.direction)!==-1;I.type==="dropdown"&&(st?X=J.headerHeight+n.gapButtonHeader:Z=J.headerWidth+n.gapButtonHeader),I.type==="dropdown"&&I.direction==="up"&&(X=-n.gapButtonHeader+n.gapButton-J.openHeight),I.type==="dropdown"&&I.direction==="left"&&(Z=-n.gapButtonHeader+n.gapButton-J.openWidth);var at={x:J.lx+Z+I.pad.l,y:J.ly+X+I.pad.t,yPad:n.gapButton,xPad:n.gapButton,index:0},lt={l:at.x+I.borderwidth,t:at.y+I.borderwidth};G.each(function(F,H){var et=f.select(this);et.call(T,I,F,L).call(S,I,at),et.on("click",function(){f.event.defaultPrevented||(F.execute&&(F.args2&&I.active===H?(g(L,I,F,R,z,P,-1),l.executeAPICommand(L,F.method,F.args2)):(g(L,I,F,R,z,P,H),l.executeAPICommand(L,F.method,F.args))),L.emit("plotly_buttonclicked",{menu:I,button:F,active:I.active}))}),et.on("mouseover",function(){et.call(p)}),et.on("mouseout",function(){et.call(w,I),G.call(k,I)})}),G.call(k,I),st?(lt.w=Math.max(J.openWidth,J.headerWidth),lt.h=at.y-lt.t):(lt.w=at.x-lt.l,lt.h=Math.max(J.openHeight,J.headerHeight)),lt.direction=I.direction,P&&(G.size()?_(L,R,z,P,I,lt):u(P))}function _(L,R,z,P,I,U){var O=I.direction,G=O==="up"||O==="down",$=I._dims,tt=I.active,Z,X,J;if(G)for(X=0,J=0;J<tt;J++)X+=$.heights[J]+n.gapButton;else for(Z=0,J=0;J<tt;J++)Z+=$.widths[J]+n.gapButton;P.enable(U,Z,X),P.hbar&&P.hbar.attr("opacity","0").transition().attr("opacity","1"),P.vbar&&P.vbar.attr("opacity","0").transition().attr("opacity","1")}function u(L){var R=!!L.hbar,z=!!L.vbar;R&&L.hbar.transition().attr("opacity","0").each("end",function(){R=!1,z||L.disable()}),z&&L.vbar.transition().attr("opacity","0").each("end",function(){z=!1,R||L.disable()})}function T(L,R,z,P){L.call(c,R).call(A,R,z,P)}function c(L,R){var z=t.ensureSingle(L,"rect",n.itemRectClassName,function(P){P.attr({rx:n.rx,ry:n.ry,"shape-rendering":"crispEdges"})});z.call(m.stroke,R.bordercolor).call(m.fill,R.bgcolor).style("stroke-width",R.borderwidth+"px")}function A(L,R,z,P){var I=t.ensureSingle(L,"text",n.itemTextClassName,function(G){G.attr({"text-anchor":"start","data-notex":1})}),U=z.label,O=P._fullLayout._meta;O&&(U=t.templateString(U,O)),I.call(x.font,R.font).text(U).call(a.convertToTspans,P)}function k(L,R){var z=R.active;L.each(function(P,I){var U=f.select(this);I===z&&R.showactive&&U.select("rect."+n.itemRectClassName).call(m.fill,n.activeColor)})}function p(L){L.select("rect."+n.itemRectClassName).call(m.fill,n.hoverColor)}function w(L,R){L.select("rect."+n.itemRectClassName).call(m.fill,R.bgcolor)}function h(L,R){var z=R._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},P=x.tester.selectAll("g."+n.dropdownButtonClassName).data(t.filterVisible(R.buttons));P.enter().append("g").classed(n.dropdownButtonClassName,!0);var I=["up","down"].indexOf(R.direction)!==-1;P.each(function(Z,X){var J=f.select(this);J.call(T,R,Z,L);var st=J.select("."+n.itemTextClassName),at=st.node()&&x.bBox(st.node()).width,lt=Math.max(at+n.textPadX,n.minWidth),F=R.font.size*r,H=a.lineCount(st),et=Math.max(F*H,n.minHeight)+n.textOffsetY;et=Math.ceil(et),lt=Math.ceil(lt),z.widths[X]=lt,z.heights[X]=et,z.height1=Math.max(z.height1,et),z.width1=Math.max(z.width1,lt),I?(z.totalWidth=Math.max(z.totalWidth,lt),z.openWidth=z.totalWidth,z.totalHeight+=et+n.gapButton,z.openHeight+=et+n.gapButton):(z.totalWidth+=lt+n.gapButton,z.openWidth+=lt+n.gapButton,z.totalHeight=Math.max(z.totalHeight,et),z.openHeight=z.totalHeight)}),I?z.totalHeight-=n.gapButton:z.totalWidth-=n.gapButton,z.headerWidth=z.width1+n.arrowPadX,z.headerHeight=z.height1,R.type==="dropdown"&&(I?(z.width1+=n.arrowPadX,z.totalHeight=z.height1):z.totalWidth=z.width1,z.totalWidth+=n.arrowPadX),P.remove();var U=z.totalWidth+R.pad.l+R.pad.r,O=z.totalHeight+R.pad.t+R.pad.b,G=L._fullLayout._size;z.lx=G.l+G.w*R.x,z.ly=G.t+G.h*(1-R.y);var $="left";t.isRightAnchor(R)&&(z.lx-=U,$="right"),t.isCenterAnchor(R)&&(z.lx-=U/2,$="center");var tt="top";t.isBottomAnchor(R)&&(z.ly-=O,tt="bottom"),t.isMiddleAnchor(R)&&(z.ly-=O/2,tt="middle"),z.totalWidth=Math.ceil(z.totalWidth),z.totalHeight=Math.ceil(z.totalHeight),z.lx=Math.round(z.lx),z.ly=Math.round(z.ly),l.autoMargin(L,D(R),{x:R.x,y:R.y,l:U*({right:1,center:.5}[$]||0),r:U*({left:1,center:.5}[$]||0),b:O*({top:1,middle:.5}[tt]||0),t:O*({bottom:1,middle:.5}[tt]||0)})}function D(L){return n.autoMarginIdRoot+L._index}function S(L,R,z,P){P=P||{};var I=L.select("."+n.itemRectClassName),U=L.select("."+n.itemTextClassName),O=R.borderwidth,G=z.index,$=R._dims;x.setTranslate(L,O+z.x,O+z.y);var tt=["up","down"].indexOf(R.direction)!==-1,Z=P.height||(tt?$.heights[G]:$.height1);I.attr({x:0,y:0,width:P.width||(tt?$.width1:$.widths[G]),height:Z});var X=R.font.size*r,J=a.lineCount(U),st=(J-1)*X/2;a.positionText(U,n.textOffsetX,Z/2-st+n.textOffsetY),tt?z.y+=$.heights[G]+z.yPad:z.x+=$.widths[G]+z.xPad,z.index++}function M(L,R){L.attr(n.menuIndexAttrName,R||"-1").selectAll("g."+n.dropdownButtonClassName).remove()}},{"../../constants/alignment":483,"../../lib":515,"../../lib/svg_text_utils":541,"../../plot_api/plot_template":555,"../../plots/plots":628,"../color":367,"../drawing":389,"./constants":478,"./scrollbox":482,"@plotly/d3":58}],481:[function(e,B,V){arguments[4][475][0].apply(V,arguments)},{"./attributes":477,"./constants":478,"./defaults":479,"./draw":480,dup:475}],482:[function(e,B,V){B.exports=t;var f=e("@plotly/d3"),l=e("../color"),m=e("../drawing"),x=e("../../lib");function t(a,i,r){this.gd=a,this.container=i,this.id=r,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}t.barWidth=2,t.barLength=20,t.barRadius=2,t.barPad=1,t.barColor="#808BA4",t.prototype.enable=function(i,r,n){var d=this.gd._fullLayout,s=d.width,o=d.height;this.position=i;var y=this.position.l,g=this.position.w,b=this.position.t,v=this.position.h,_=this.position.direction,u=_==="down",T=_==="left",c=_==="right",A=_==="up",k=g,p=v,w,h,D,S;!u&&!T&&!c&&!A&&(this.position.direction="down",u=!0);var M=u||A;M?(w=y,h=w+k,u?(D=b,S=Math.min(D+p,o),p=S-D):(S=b+p,D=Math.max(S-p,0),p=S-D)):(D=b,S=D+p,T?(h=y+k,w=Math.max(h-k,0),k=h-w):(w=y,h=Math.min(w+k,s),k=h-w)),this._box={l:w,t:D,w:k,h:p};var L=g>k,R=t.barLength+2*t.barPad,z=t.barWidth+2*t.barPad,P=y,I=b+v;I+z>o&&(I=o-z);var U=this.container.selectAll("rect.scrollbar-horizontal").data(L?[0]:[]);U.exit().on(".drag",null).remove(),U.enter().append("rect").classed("scrollbar-horizontal",!0).call(l.fill,t.barColor),L?(this.hbar=U.attr({rx:t.barRadius,ry:t.barRadius,x:P,y:I,width:R,height:z}),this._hbarXMin=P+R/2,this._hbarTranslateMax=k-R):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var O=v>p,G=t.barWidth+2*t.barPad,$=t.barLength+2*t.barPad,tt=y+g,Z=b;tt+G>s&&(tt=s-G);var X=this.container.selectAll("rect.scrollbar-vertical").data(O?[0]:[]);X.exit().on(".drag",null).remove(),X.enter().append("rect").classed("scrollbar-vertical",!0).call(l.fill,t.barColor),O?(this.vbar=X.attr({rx:t.barRadius,ry:t.barRadius,x:tt,y:Z,width:G,height:$}),this._vbarYMin=Z+$/2,this._vbarTranslateMax=p-$):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var J=this.id,st=w-.5,at=O?h+G+.5:h+.5,lt=D-.5,F=L?S+z+.5:S+.5,H=d._topdefs.selectAll("#"+J).data(L||O?[0]:[]);if(H.exit().remove(),H.enter().append("clipPath").attr("id",J).append("rect"),L||O?(this._clipRect=H.select("rect").attr({x:Math.floor(st),y:Math.floor(lt),width:Math.ceil(at)-Math.floor(st),height:Math.ceil(F)-Math.floor(lt)}),this.container.call(m.setClipUrl,J,this.gd),this.bg.attr({x:y,y:b,width:g,height:v})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(m.setClipUrl,null),delete this._clipRect),L||O){var et=f.behavior.drag().on("dragstart",function(){f.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(et);var q=f.behavior.drag().on("dragstart",function(){f.event.sourceEvent.preventDefault(),f.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));L&&this.hbar.on(".drag",null).call(q),O&&this.vbar.on(".drag",null).call(q)}this.setTranslate(r,n)},t.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(m.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},t.prototype._onBoxDrag=function(){var i=this.translateX,r=this.translateY;this.hbar&&(i-=f.event.dx),this.vbar&&(r-=f.event.dy),this.setTranslate(i,r)},t.prototype._onBoxWheel=function(){var i=this.translateX,r=this.translateY;this.hbar&&(i+=f.event.deltaY),this.vbar&&(r+=f.event.deltaY),this.setTranslate(i,r)},t.prototype._onBarDrag=function(){var i=this.translateX,r=this.translateY;if(this.hbar){var n=i+this._hbarXMin,d=n+this._hbarTranslateMax,s=x.constrain(f.event.x,n,d),o=(s-n)/(d-n),y=this.position.w-this._box.w;i=o*y}if(this.vbar){var g=r+this._vbarYMin,b=g+this._vbarTranslateMax,v=x.constrain(f.event.y,g,b),_=(v-g)/(b-g),u=this.position.h-this._box.h;r=_*u}this.setTranslate(i,r)},t.prototype.setTranslate=function(i,r){var n=this.position.w-this._box.w,d=this.position.h-this._box.h;if(i=x.constrain(i||0,0,n),r=x.constrain(r||0,0,d),this.translateX=i,this.translateY=r,this.container.call(m.setTranslate,this._box.l-this.position.l-i,this._box.t-this.position.t-r),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+i-.5),y:Math.floor(this.position.t+r-.5)}),this.hbar){var s=i/n;this.hbar.call(m.setTranslate,i+s*this._hbarTranslateMax,r)}if(this.vbar){var o=r/d;this.vbar.call(m.setTranslate,i,r+o*this._vbarTranslateMax)}}},{"../../lib":515,"../color":367,"../drawing":389,"@plotly/d3":58}],483:[function(e,B,V){B.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},{}],484:[function(e,B,V){B.exports={axisRefDescription:function(f,l,m){return["If set to a",f,"axis id (e.g. *"+f+"* or","*"+f+"2*), the `"+f+"` position refers to a",f,"coordinate. If set to *paper*, the `"+f+"`","position refers to the distance from the",l,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",l,"("+m+"). If set to a",f,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",l,"of the domain of that axis: e.g.,","*"+f+"2 domain* refers to the domain of the second",f," axis and a",f,"position of 0.5 refers to the","point between the",l,"and the",m,"of the domain of the","second",f,"axis."].join(" ")}}},{}],485:[function(e,B,V){B.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:"\u25B2"},DECREASING:{COLOR:"#FF4136",SYMBOL:"\u25BC"}}},{}],486:[function(e,B,V){B.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},{}],487:[function(e,B,V){B.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},{}],488:[function(e,B,V){B.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},{}],489:[function(e,B,V){B.exports={circle:"\u25CF","circle-open":"\u25CB",square:"\u25A0","square-open":"\u25A1",diamond:"\u25C6","diamond-open":"\u25C7",cross:"+",x:"\u274C"}},{}],490:[function(e,B,V){B.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},{}],491:[function(e,B,V){B.exports={BADNUM:void 0,FP_SAFE:Number.MAX_VALUE*1e-4,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:24405875e-1,ALMOST_EQUAL:1-1e-6,LOG_CLIP:10,MINUS_SIGN:"\u2212"}},{}],492:[function(e,B,V){V.xmlns="http://www.w3.org/2000/xmlns/",V.svg="http://www.w3.org/2000/svg",V.xlink="http://www.w3.org/1999/xlink",V.svgAttrs={xmlns:V.svg,"xmlns:xlink":V.xlink}},{}],493:[function(e,B,V){V.version=e("./version").version,e("native-promise-only"),e("../build/plotcss");for(var f=e("./registry"),l=V.register=f.register,m=e("./plot_api"),x=Object.keys(m),t=0;t<x.length;t++){var a=x[t];a.charAt(0)!=="_"&&(V[a]=m[a]),l({moduleType:"apiMethod",name:a,fn:m[a]})}l(e("./traces/scatter")),l([e("./components/legend"),e("./components/fx"),e("./components/annotations"),e("./components/annotations3d"),e("./components/selections"),e("./components/shapes"),e("./components/images"),e("./components/updatemenus"),e("./components/sliders"),e("./components/rangeslider"),e("./components/rangeselector"),e("./components/grid"),e("./components/errorbars"),e("./components/colorscale"),e("./components/colorbar"),e("./components/modebar")]),l([e("./locale-en"),e("./locale-en-us")]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(l(window.PlotlyLocales),delete window.PlotlyLocales),V.Icons=e("./fonts/ploticon");var i=e("./components/fx"),r=e("./plots/plots");V.Plots={resize:r.resize,graphJson:r.graphJson,sendDataToCloud:r.sendDataToCloud},V.Fx={hover:i.hover,unhover:i.unhover,loneHover:i.loneHover,loneUnhover:i.loneUnhover},V.Snapshot=e("./snapshot"),V.PlotSchema=e("./plot_api/plot_schema")},{"../build/plotcss":1,"./components/annotations":358,"./components/annotations3d":363,"./components/colorbar":373,"./components/colorscale":379,"./components/errorbars":395,"./components/fx":407,"./components/grid":411,"./components/images":416,"./components/legend":424,"./components/modebar":430,"./components/rangeselector":438,"./components/rangeslider":445,"./components/selections":455,"./components/shapes":470,"./components/sliders":475,"./components/updatemenus":481,"./fonts/ploticon":494,"./locale-en":546,"./locale-en-us":545,"./plot_api":550,"./plot_api/plot_schema":554,"./plots/plots":628,"./registry":647,"./snapshot":652,"./traces/scatter":948,"./version":1132,"native-promise-only":245}],494:[function(e,B,V){B.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:["<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'>","<defs>"," <style>","  .cls-0{fill:#000;}","  .cls-1{fill:#FFF;}","  .cls-2{fill:#F26;}","  .cls-3{fill:#D69;}","  .cls-4{fill:#BAC;}","  .cls-5{fill:#9EF;}"," </style>","</defs>"," <title>plotly-logomark</title>"," <g id='symbol'>","  <rect class='cls-0' x='0' y='0' width='132' height='132' rx='18' ry='18'/>","  <circle class='cls-5' cx='102' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='54' r='6'/>","  <circle class='cls-3' cx='54' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='54' r='6'/>","  <path class='cls-1' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/>","  <path class='cls-1' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/>","  <path class='cls-1' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/>","  <path class='cls-1' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/>"," </g>","</svg>"].join("")}}},{}],495:[function(e,B,V){V.isLeftAnchor=function(l){return l.xanchor==="left"||l.xanchor==="auto"&&l.x<=1/3},V.isCenterAnchor=function(l){return l.xanchor==="center"||l.xanchor==="auto"&&l.x>1/3&&l.x<2/3},V.isRightAnchor=function(l){return l.xanchor==="right"||l.xanchor==="auto"&&l.x>=2/3},V.isTopAnchor=function(l){return l.yanchor==="top"||l.yanchor==="auto"&&l.y>=2/3},V.isMiddleAnchor=function(l){return l.yanchor==="middle"||l.yanchor==="auto"&&l.y>1/3&&l.y<2/3},V.isBottomAnchor=function(l){return l.yanchor==="bottom"||l.yanchor==="auto"&&l.y<=1/3}},{}],496:[function(e,B,V){var f=e("./mod"),l=f.mod,m=f.modHalf,x=Math.PI,t=2*x;function a(_){return _/180*x}function i(_){return _/x*180}function r(_){return Math.abs(_[1]-_[0])>t-1e-14}function n(_,u){return m(u-_,t)}function d(_,u){return Math.abs(n(_,u))}function s(_,u){if(r(u))return!0;var T,c;u[0]<u[1]?(T=u[0],c=u[1]):(T=u[1],c=u[0]),T=l(T,t),c=l(c,t),T>c&&(c+=t);var A=l(_,t),k=A+t;return A>=T&&A<=c||k>=T&&k<=c}function o(_,u,T,c){if(!s(u,c))return!1;var A,k;return T[0]<T[1]?(A=T[0],k=T[1]):(A=T[1],k=T[0]),_>=A&&_<=k}function y(_,u,T,c,A,k,p){A=A||0,k=k||0;var w=r([T,c]),h,D,S,M,L;w?(h=0,D=x,S=t):T<c?(h=T,S=c):(h=c,S=T),_<u?(M=_,L=u):(M=u,L=_);function R(U,O){return[U*Math.cos(O)+A,k-U*Math.sin(O)]}var z=Math.abs(S-h)<=x?0:1;function P(U,O,G){return"A"+[U,U]+" "+[0,z,G]+" "+R(U,O)}var I;return w?M===null?I="M"+R(L,h)+P(L,D,0)+P(L,S,0)+"Z":I="M"+R(M,h)+P(M,D,0)+P(M,S,0)+"ZM"+R(L,h)+P(L,D,1)+P(L,S,1)+"Z":M===null?(I="M"+R(L,h)+P(L,S,0),p&&(I+="L0,0Z")):I="M"+R(M,h)+"L"+R(L,h)+P(L,S,0)+"L"+R(M,S)+P(M,h,1)+"Z",I}function g(_,u,T,c,A){return y(null,_,u,T,c,A,0)}function b(_,u,T,c,A){return y(null,_,u,T,c,A,1)}function v(_,u,T,c,A,k){return y(_,u,T,c,A,k,1)}B.exports={deg2rad:a,rad2deg:i,angleDelta:n,angleDist:d,isFullCircle:r,isAngleInsideSector:s,isPtInsideSector:o,pathArc:g,pathSector:b,pathAnnulus:v}},{"./mod":522}],497:[function(e,B,V){var f=Array.isArray,l=ArrayBuffer,m=DataView;function x(r){return l.isView(r)&&!(r instanceof m)}V.isTypedArray=x;function t(r){return f(r)||x(r)}V.isArrayOrTypedArray=t;function a(r){return!t(r[0])}V.isArray1D=a,V.ensureArray=function(r,n){return f(r)||(r=[]),r.length=n,r},V.concat=function(){var r=[],n=!0,d=0,s,o,y,g,b,v,_,u;for(y=0;y<arguments.length;y++)g=arguments[y],v=g.length,v&&(o?r.push(g):(o=g,b=v),f(g)?s=!1:(n=!1,d?s!==g.constructor&&(s=!1):s=g.constructor),d+=v);if(!d)return[];if(!r.length)return o;if(n)return o.concat.apply(o,r);if(s){for(_=new s(d),_.set(o),y=0;y<r.length;y++)g=r[y],_.set(g,b),b+=g.length;return _}for(_=new Array(d),u=0;u<o.length;u++)_[u]=o[u];for(y=0;y<r.length;y++){for(g=r[y],u=0;u<g.length;u++)_[b+u]=g[u];b+=u}return _},V.maxRowLength=function(r){return i(r,Math.max,0)},V.minRowLength=function(r){return i(r,Math.min,1/0)};function i(r,n,d){if(t(r))if(t(r[0])){for(var s=d,o=0;o<r.length;o++)s=n(s,r[o].length);return s}else return r.length;return 0}},{}],498:[function(e,B,V){var f=e("fast-isnumeric"),l=e("../constants/numerical").BADNUM,m=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;B.exports=function(t){return typeof t=="string"&&(t=t.replace(m,"")),f(t)?Number(t):l}},{"../constants/numerical":491,"fast-isnumeric":190}],499:[function(e,B,V){B.exports=function(l){var m=l._fullLayout;m._glcanvas&&m._glcanvas.size()&&m._glcanvas.each(function(x){x.regl&&x.regl.clear({color:!0,depth:!0})})}},{}],500:[function(e,B,V){B.exports=function(l){l._responsiveChartHandler&&(window.removeEventListener("resize",l._responsiveChartHandler),delete l._responsiveChartHandler)}},{}],501:[function(e,B,V){var f=e("fast-isnumeric"),l=e("tinycolor2"),m=e("../plots/attributes"),x=e("../components/colorscale/scales"),t=e("../components/color"),a=e("../constants/interactions").DESELECTDIM,i=e("./nested_property"),r=e("./regex").counter,n=e("./mod").modHalf,d=e("./array").isArrayOrTypedArray;V.valObjectMeta={data_array:{coerceFunction:function(o,y,g){d(o)?y.set(o):g!==void 0&&y.set(g)}},enumerated:{coerceFunction:function(o,y,g,b){b.coerceNumber&&(o=+o),b.values.indexOf(o)===-1?y.set(g):y.set(o)},validateFunction:function(o,y){y.coerceNumber&&(o=+o);for(var g=y.values,b=0;b<g.length;b++){var v=String(g[b]);if(v.charAt(0)==="/"&&v.charAt(v.length-1)==="/"){var _=new RegExp(v.substr(1,v.length-2));if(_.test(o))return!0}else if(o===g[b])return!0}return!1}},boolean:{coerceFunction:function(o,y,g){o===!0||o===!1?y.set(o):y.set(g)}},number:{coerceFunction:function(o,y,g,b){!f(o)||b.min!==void 0&&o<b.min||b.max!==void 0&&o>b.max?y.set(g):y.set(+o)}},integer:{coerceFunction:function(o,y,g,b){o%1||!f(o)||b.min!==void 0&&o<b.min||b.max!==void 0&&o>b.max?y.set(g):y.set(+o)}},string:{coerceFunction:function(o,y,g,b){if(typeof o!="string"){var v=typeof o=="number";b.strict===!0||!v?y.set(g):y.set(String(o))}else b.noBlank&&!o?y.set(g):y.set(o)}},color:{coerceFunction:function(o,y,g){l(o).isValid()?y.set(o):y.set(g)}},colorlist:{coerceFunction:function(o,y,g){function b(v){return l(v).isValid()}!Array.isArray(o)||!o.length?y.set(g):o.every(b)?y.set(o):y.set(g)}},colorscale:{coerceFunction:function(o,y,g){y.set(x.get(o,g))}},angle:{coerceFunction:function(o,y,g){o==="auto"?y.set("auto"):f(o)?y.set(n(+o,360)):y.set(g)}},subplotid:{coerceFunction:function(o,y,g,b){var v=b.regex||r(g);if(typeof o=="string"&&v.test(o)){y.set(o);return}y.set(g)},validateFunction:function(o,y){var g=y.dflt;return o===g?!0:typeof o!="string"?!1:!!r(g).test(o)}},flaglist:{coerceFunction:function(o,y,g,b){if((b.extras||[]).indexOf(o)!==-1){y.set(o);return}if(typeof o!="string"){y.set(g);return}for(var v=o.split("+"),_=0;_<v.length;){var u=v[_];b.flags.indexOf(u)===-1||v.indexOf(u)<_?v.splice(_,1):_++}v.length?y.set(v.join("+")):y.set(g)}},any:{coerceFunction:function(o,y,g){o===void 0?y.set(g):y.set(o)}},info_array:{coerceFunction:function(o,y,g,b){function v(R,z,P){var I,U={set:function(O){I=O}};return P===void 0&&(P=z.dflt),V.valObjectMeta[z.valType].coerceFunction(R,U,P,z),I}var _=b.dimensions===2||b.dimensions==="1-2"&&Array.isArray(o)&&Array.isArray(o[0]);if(!Array.isArray(o)){y.set(g);return}var u=b.items,T=[],c=Array.isArray(u),A=c&&_&&Array.isArray(u[0]),k=_&&c&&!A,p=c&&!k?u.length:o.length,w,h,D,S,M,L;if(g=Array.isArray(g)?g:[],_)for(w=0;w<p;w++)for(T[w]=[],D=Array.isArray(o[w])?o[w]:[],k?M=u.length:c?M=u[w].length:M=D.length,h=0;h<M;h++)k?S=u[h]:c?S=u[w][h]:S=u,L=v(D[h],S,(g[w]||[])[h]),L!==void 0&&(T[w][h]=L);else for(w=0;w<p;w++)L=v(o[w],c?u[w]:u,g[w]),L!==void 0&&(T[w]=L);y.set(T)},validateFunction:function(o,y){if(!Array.isArray(o))return!1;var g=y.items,b=Array.isArray(g),v=y.dimensions===2;if(!y.freeLength&&o.length!==g.length)return!1;for(var _=0;_<o.length;_++)if(v){if(!Array.isArray(o[_])||!y.freeLength&&o[_].length!==g[_].length)return!1;for(var u=0;u<o[_].length;u++)if(!s(o[_][u],b?g[_][u]:g))return!1}else if(!s(o[_],b?g[_]:g))return!1;return!0}}},V.coerce=function(o,y,g,b,v){var _=i(g,b).get(),u=i(o,b),T=i(y,b),c=u.get(),A=y._template;if(c===void 0&&A&&(c=i(A,b).get(),A=0),v===void 0&&(v=_.dflt),_.arrayOk&&d(c))return T.set(c),c;var k=V.valObjectMeta[_.valType].coerceFunction;k(c,T,v,_);var p=T.get();return A&&p===v&&!s(c,_)&&(c=i(A,b).get(),k(c,T,v,_),p=T.get()),p},V.coerce2=function(o,y,g,b,v){var _=i(o,b),u=V.coerce(o,y,g,b,v),T=_.get();return T!=null?u:!1},V.coerceFont=function(o,y,g){var b={};return g=g||{},b.family=o(y+".family",g.family),b.size=o(y+".size",g.size),b.color=o(y+".color",g.color),b},V.coercePattern=function(o,y,g,b){var v=o(y+".shape");if(v){o(y+".solidity"),o(y+".size");var _=o(y+".fillmode"),u=_==="overlay";if(!b){var T=o(y+".bgcolor",u?g:void 0);o(y+".fgcolor",u?t.contrast(T):g)}o(y+".fgopacity",u?.5:1)}},V.coerceHoverinfo=function(o,y,g){var b=y._module.attributes,v=b.hoverinfo?b:m,_=v.hoverinfo,u;if(g._dataLength===1){var T=_.dflt==="all"?_.flags.slice():_.dflt.split("+");T.splice(T.indexOf("name"),1),u=T.join("+")}return V.coerce(o,y,v,"hoverinfo",u)},V.coerceSelectionMarkerOpacity=function(o,y){if(!!o.marker){var g=o.marker.opacity;if(g!==void 0){var b,v;!d(g)&&!o.selected&&!o.unselected&&(b=g,v=a*g),y("selected.marker.opacity",b),y("unselected.marker.opacity",v)}}};function s(o,y){var g=V.valObjectMeta[y.valType];if(y.arrayOk&&d(o))return!0;if(g.validateFunction)return g.validateFunction(o,y);var b={},v=b,_={set:function(u){v=u}};return g.coerceFunction(o,_,b,y),v!==b}V.validate=s},{"../components/color":367,"../components/colorscale/scales":382,"../constants/interactions":490,"../plots/attributes":562,"./array":497,"./mod":522,"./nested_property":523,"./regex":532,"fast-isnumeric":190,tinycolor2:313}],502:[function(e,B,V){var f=e("d3-time-format").timeFormat,l=e("fast-isnumeric"),m=e("./loggers"),x=e("./mod").mod,t=e("../constants/numerical"),a=t.BADNUM,i=t.ONEDAY,r=t.ONEHOUR,n=t.ONEMIN,d=t.ONESEC,s=t.EPOCHJD,o=e("../registry"),y=e("d3-time-format").utcFormat,g=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,b=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,v=new Date().getFullYear()-70;function _(I){return I&&o.componentsRegistry.calendars&&typeof I=="string"&&I!=="gregorian"}V.dateTick0=function(I,U){var O=u(I,!!U);if(U<2)return O;var G=V.dateTime2ms(O,I);return G+=i*(U-1),V.ms2DateTime(G,0,I)};function u(I,U){return _(I)?U?o.getComponentMethod("calendars","CANONICAL_SUNDAY")[I]:o.getComponentMethod("calendars","CANONICAL_TICK")[I]:U?"2000-01-02":"2000-01-01"}V.dfltRange=function(I){return _(I)?o.getComponentMethod("calendars","DFLTRANGE")[I]:["2000-01-01","2001-01-01"]},V.isJSDate=function(I){return typeof I=="object"&&I!==null&&typeof I.getTime=="function"};var T,c;V.dateTime2ms=function(I,U){if(V.isJSDate(I)){var O=I.getTimezoneOffset()*n,G=(I.getUTCMinutes()-I.getMinutes())*n+(I.getUTCSeconds()-I.getSeconds())*d+(I.getUTCMilliseconds()-I.getMilliseconds());if(G){var $=3*n;O=O-$/2+x(G-O+$/2,$)}return I=Number(I)-O,I>=T&&I<=c?I:a}if(typeof I!="string"&&typeof I!="number")return a;I=String(I);var tt=_(U),Z=I.charAt(0);tt&&(Z==="G"||Z==="g")&&(I=I.substr(1),U="");var X=tt&&U.substr(0,7)==="chinese",J=I.match(X?b:g);if(!J)return a;var st=J[1],at=J[3]||"1",lt=Number(J[5]||1),F=Number(J[7]||0),H=Number(J[9]||0),et=Number(J[11]||0);if(tt){if(st.length===2)return a;st=Number(st);var q;try{var W=o.getComponentMethod("calendars","getCal")(U);if(X){var K=at.charAt(at.length-1)==="i";at=parseInt(at,10),q=W.newDate(st,W.toMonthIndex(st,at,K),lt)}else q=W.newDate(st,Number(at),lt)}catch{return a}return q?(q.toJD()-s)*i+F*r+H*n+et*d:a}st.length===2?st=(Number(st)+2e3-v)%100+v:st=Number(st),at-=1;var nt=new Date(Date.UTC(2e3,at,lt,F,H));return nt.setUTCFullYear(st),nt.getUTCMonth()!==at||nt.getUTCDate()!==lt?a:nt.getTime()+et*d},T=V.MIN_MS=V.dateTime2ms("-9999"),c=V.MAX_MS=V.dateTime2ms("9999-12-31 23:59:59.9999"),V.isDateTime=function(I,U){return V.dateTime2ms(I,U)!==a};function A(I,U){return String(I+Math.pow(10,U)).substr(1)}var k=90*i,p=3*r,w=5*n;V.ms2DateTime=function(I,U,O){if(typeof I!="number"||!(I>=T&&I<=c))return a;U||(U=0);var G=Math.floor(x(I+.05,1)*10),$=Math.round(I-G/10),tt,Z,X,J,st,at;if(_(O)){var lt=Math.floor($/i)+s,F=Math.floor(x(I,i));try{tt=o.getComponentMethod("calendars","getCal")(O).fromJD(lt).formatDate("yyyy-mm-dd")}catch{tt=y("G%Y-%m-%d")(new Date($))}if(tt.charAt(0)==="-")for(;tt.length<11;)tt="-0"+tt.substr(1);else for(;tt.length<10;)tt="0"+tt;Z=U<k?Math.floor(F/r):0,X=U<k?Math.floor(F%r/n):0,J=U<p?Math.floor(F%n/d):0,st=U<w?F%d*10+G:0}else at=new Date($),tt=y("%Y-%m-%d")(at),Z=U<k?at.getUTCHours():0,X=U<k?at.getUTCMinutes():0,J=U<p?at.getUTCSeconds():0,st=U<w?at.getUTCMilliseconds()*10+G:0;return h(tt,Z,X,J,st)},V.ms2DateTimeLocal=function(I){if(!(I>=T+i&&I<=c-i))return a;var U=Math.floor(x(I+.05,1)*10),O=new Date(Math.round(I-U/10)),G=f("%Y-%m-%d")(O),$=O.getHours(),tt=O.getMinutes(),Z=O.getSeconds(),X=O.getUTCMilliseconds()*10+U;return h(G,$,tt,Z,X)};function h(I,U,O,G,$){if((U||O||G||$)&&(I+=" "+A(U,2)+":"+A(O,2),(G||$)&&(I+=":"+A(G,2),$))){for(var tt=4;$%10===0;)tt-=1,$/=10;I+="."+A($,tt)}return I}V.cleanDate=function(I,U,O){if(I===a)return U;if(V.isJSDate(I)||typeof I=="number"&&isFinite(I)){if(_(O))return m.error("JS Dates and milliseconds are incompatible with world calendars",I),U;if(I=V.ms2DateTimeLocal(+I),!I&&U!==void 0)return U}else if(!V.isDateTime(I,O))return m.error("unrecognized date",I),U;return I};var D=/%\d?f/g,S=/%h/g,M={1:"1",2:"1",3:"2",4:"2"};function L(I,U,O,G){I=I.replace(D,function(tt){var Z=Math.min(+tt.charAt(1)||6,6),X=(U/1e3%1+2).toFixed(Z).substr(2).replace(/0+$/,"")||"0";return X});var $=new Date(Math.floor(U+.05));if(I=I.replace(S,function(){return M[O("%q")($)]}),_(G))try{I=o.getComponentMethod("calendars","worldCalFmt")(I,U,G)}catch{return"Invalid"}return O(I)($)}var R=[59,59.9,59.99,59.999,59.9999];function z(I,U){var O=x(I+.05,i),G=A(Math.floor(O/r),2)+":"+A(x(Math.floor(O/n),60),2);if(U!=="M"){l(U)||(U=0);var $=Math.min(x(I/d,60),R[U]),tt=(100+$).toFixed(U).substr(1);U>0&&(tt=tt.replace(/0+$/,"").replace(/[\.]$/,"")),G+=":"+tt}return G}V.formatDate=function(I,U,O,G,$,tt){if($=_($)&&$,!U)if(O==="y")U=tt.year;else if(O==="m")U=tt.month;else if(O==="d")U=tt.dayMonth+`
`+tt.year;else return z(I,O)+`
`+L(tt.dayMonthYear,I,G,$);return L(U,I,G,$)};var P=3*i;V.incrementMonth=function(I,U,O){O=_(O)&&O;var G=x(I,i);if(I=Math.round(I-G),O)try{var $=Math.round(I/i)+s,tt=o.getComponentMethod("calendars","getCal")(O),Z=tt.fromJD($);return U%12?tt.add(Z,U,"m"):tt.add(Z,U/12,"y"),(Z.toJD()-s)*i+G}catch{m.error("invalid ms "+I+" in calendar "+O)}var X=new Date(I+P);return X.setUTCMonth(X.getUTCMonth()+U)+G-P},V.findExactDates=function(I,U){for(var O=0,G=0,$=0,tt=0,Z,X,J=_(U)&&o.getComponentMethod("calendars","getCal")(U),st=0;st<I.length;st++){if(X=I[st],!l(X)){tt++;continue}if(!(X%i))if(J)try{Z=J.fromJD(X/i+s),Z.day()===1?Z.month()===1?O++:G++:$++}catch{}else Z=new Date(X),Z.getUTCDate()===1?Z.getUTCMonth()===0?O++:G++:$++}G+=O,$+=G;var at=I.length-tt;return{exactYears:O/at,exactMonths:G/at,exactDays:$/at}}},{"../constants/numerical":491,"../registry":647,"./loggers":519,"./mod":522,"d3-time-format":120,"fast-isnumeric":190}],503:[function(e,B,V){var f=e("@plotly/d3"),l=e("./loggers"),m=e("./matrix"),x=e("gl-mat4");function t(v){var _;if(typeof v=="string"){if(_=document.getElementById(v),_===null)throw new Error("No DOM element with id '"+v+"' exists on the page.");return _}else if(v==null)throw new Error("DOM element provided is null or undefined");return v}function a(v){var _=f.select(v);return _.node()instanceof HTMLElement&&_.size()&&_.classed("js-plotly-plot")}function i(v){var _=v&&v.parentNode;_&&_.removeChild(v)}function r(v,_){n("global",v,_)}function n(v,_,u){var T="plotly.js-style-"+v,c=document.getElementById(T);c||(c=document.createElement("style"),c.setAttribute("id",T),c.appendChild(document.createTextNode("")),document.head.appendChild(c));var A=c.sheet;A.insertRule?A.insertRule(_+"{"+u+"}",0):A.addRule?A.addRule(_,u,0):l.warn("addStyleRule failed")}function d(v){var _="plotly.js-style-"+v,u=document.getElementById(_);u&&i(u)}function s(v){var _=y(v),u=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return _.forEach(function(T){var c=o(T);if(c){var A=m.convertCssMatrix(c);u=x.multiply(u,u,A)}}),u}function o(v){var _=window.getComputedStyle(v,null),u=_.getPropertyValue("-webkit-transform")||_.getPropertyValue("-moz-transform")||_.getPropertyValue("-ms-transform")||_.getPropertyValue("-o-transform")||_.getPropertyValue("transform");return u==="none"?null:u.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(T){return+T})}function y(v){for(var _=[];g(v);)_.push(v),v=v.parentNode;return _}function g(v){return v&&(v instanceof Element||v instanceof HTMLElement)}function b(v,_){return v&&_&&v.x===_.x&&v.y===_.y&&v.top===_.top&&v.left===_.left&&v.right===_.right&&v.bottom===_.bottom}B.exports={getGraphDiv:t,isPlotDiv:a,removeElement:i,addStyleRule:r,addRelatedStyleRule:n,deleteRelatedStyleRule:d,getFullTransformMatrix:s,getElementTransformMatrix:o,getElementAndAncestors:y,equalDomRects:b}},{"./loggers":519,"./matrix":521,"@plotly/d3":58,"gl-mat4":210}],504:[function(e,B,V){var f=e("events").EventEmitter,l={init:function(m){if(m._ev instanceof f)return m;var x=new f,t=new f;return m._ev=x,m._internalEv=t,m.on=x.on.bind(x),m.once=x.once.bind(x),m.removeListener=x.removeListener.bind(x),m.removeAllListeners=x.removeAllListeners.bind(x),m._internalOn=t.on.bind(t),m._internalOnce=t.once.bind(t),m._removeInternalListener=t.removeListener.bind(t),m._removeAllInternalListeners=t.removeAllListeners.bind(t),m.emit=function(a,i){typeof jQuery<"u"&&jQuery(m).trigger(a,i),x.emit(a,i),t.emit(a,i)},m},triggerHandler:function(m,x,t){var a,i;typeof jQuery<"u"&&(a=jQuery(m).triggerHandler(x,t));var r=m._ev;if(!r)return a;var n=r._events[x];if(!n)return a;function d(o){if(o.listener){if(r.removeListener(x,o.listener),!o.fired)return o.fired=!0,o.listener.apply(r,[t])}else return o.apply(r,[t])}n=Array.isArray(n)?n:[n];var s;for(s=0;s<n.length-1;s++)d(n[s]);return i=d(n[s]),a!==void 0?a:i},purge:function(m){return delete m._ev,delete m.on,delete m.once,delete m.removeListener,delete m.removeAllListeners,delete m.emit,delete m._ev,delete m._internalEv,delete m._internalOn,delete m._internalOnce,delete m._removeInternalListener,delete m._removeAllInternalListeners,m}};B.exports=l},{events:84}],505:[function(e,B,V){var f=e("./is_plain_object.js"),l=Array.isArray;function m(t,a){var i,r;for(i=0;i<t.length;i++){if(r=t[i],r!==null&&typeof r=="object")return!1;r!==void 0&&(a[i]=r)}return!0}V.extendFlat=function(){return x(arguments,!1,!1,!1)},V.extendDeep=function(){return x(arguments,!0,!1,!1)},V.extendDeepAll=function(){return x(arguments,!0,!0,!1)},V.extendDeepNoArrays=function(){return x(arguments,!0,!1,!0)};function x(t,a,i,r){var n=t[0],d=t.length,s,o,y,g,b,v,_;if(d===2&&l(n)&&l(t[1])&&n.length===0){if(_=m(t[1],n),_)return n;n.splice(0,n.length)}for(var u=1;u<d;u++){s=t[u];for(o in s)y=n[o],g=s[o],r&&l(g)?n[o]=g:a&&g&&(f(g)||(b=l(g)))?(b?(b=!1,v=y&&l(y)?y:[]):v=y&&f(y)?y:{},n[o]=x([v,g],a,i,r)):(typeof g<"u"||i)&&(n[o]=g)}return n}},{"./is_plain_object.js":516}],506:[function(e,B,V){B.exports=function(l){for(var m={},x=[],t=0,a=0;a<l.length;a++){var i=l[a];m[i]!==1&&(m[i]=1,x[t++]=i)}return x}},{}],507:[function(e,B,V){B.exports=function(t){for(var a=m(t)?l:f,i=[],r=0;r<t.length;r++){var n=t[r];a(n)&&i.push(n)}return i};function f(x){return x.visible===!0}function l(x){var t=x[0].trace;return t.visible===!0&&t._length!==0}function m(x){return Array.isArray(x)&&Array.isArray(x[0])&&x[0][0]&&x[0][0].trace}},{}],508:[function(e,B,V){var f=e("@plotly/d3"),l=e("country-regex"),m=e("@turf/area"),x=e("@turf/centroid"),t=e("@turf/bbox"),a=e("./identity"),i=e("./loggers"),r=e("./is_plain_object"),n=e("./nested_property"),d=e("./polygon"),s=Object.keys(l),o={"ISO-3":a,"USA-states":a,"country names":y};function y(A){for(var k=0;k<s.length;k++){var p=s[k],w=new RegExp(l[p]);if(w.test(A.trim().toLowerCase()))return p}return i.log("Unrecognized country name: "+A+"."),!1}function g(A,k,p){if(!k||typeof k!="string")return!1;var w=o[A](k),h,D,S;if(w){if(A==="USA-states")for(h=[],S=0;S<p.length;S++)D=p[S],D.properties&&D.properties.gu&&D.properties.gu==="USA"&&h.push(D);else h=p;for(S=0;S<h.length;S++)if(D=h[S],D.id===w)return D;i.log(["Location with id",w,"does not have a matching topojson feature at this resolution."].join(" "))}return!1}function b(A){var k=A.geometry,p=k.coordinates,w=A.id,h=[],D,S,M,L;function R(z){for(var P=0;P<z.length-1;P++)if(z[P][0]>0&&z[P+1][0]<0)return P;return null}switch(w==="RUS"||w==="FJI"?D=function(z){var P;if(R(z)===null)P=z;else for(P=new Array(z.length),L=0;L<z.length;L++)P[L]=[z[L][0]<0?z[L][0]+360:z[L][0],z[L][1]];h.push(d.tester(P))}:w==="ATA"?D=function(z){var P=R(z);if(P===null)return h.push(d.tester(z));var I=new Array(z.length+1),U=0;for(L=0;L<z.length;L++)L>P?I[U++]=[z[L][0]+360,z[L][1]]:L===P?(I[U++]=z[L],I[U++]=[z[L][0],-90]):I[U++]=z[L];var O=d.tester(I);O.pts.pop(),h.push(O)}:D=function(z){h.push(d.tester(z))},k.type){case"MultiPolygon":for(S=0;S<p.length;S++)for(M=0;M<p[S].length;M++)D(p[S][M]);break;case"Polygon":for(S=0;S<p.length;S++)D(p[S]);break}return h}function v(A){var k=A.geojson,p=window.PlotlyGeoAssets||{},w=typeof k=="string"?p[k]:k;return r(w)?w:(i.error("Oops ... something went wrong when fetching "+k),!1)}function _(A){var k=A[0].trace,p=v(k);if(!p)return!1;var w={},h=[],D;for(D=0;D<k._length;D++){var S=A[D];(S.loc||S.loc===0)&&(w[S.loc]=S)}function M(z){var P=n(z,k.featureidkey||"id").get(),I=w[P];if(I){var U=z.geometry;if(U.type==="Polygon"||U.type==="MultiPolygon"){var O={type:"Feature",id:P,geometry:U,properties:{}};O.properties.ct=u(O),I.fIn=z,I.fOut=O,h.push(O)}else i.log(["Location",I.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete w[P]}switch(p.type){case"FeatureCollection":var L=p.features;for(D=0;D<L.length;D++)M(L[D]);break;case"Feature":M(p);break;default:return i.warn(["Invalid GeoJSON type",(p.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var R in w)i.log(["Location *"+R+"*","does not have a matching feature with id-key","*"+k.featureidkey+"*."].join(" "));return h}function u(A){var k=A.geometry,p;if(k.type==="MultiPolygon")for(var w=k.coordinates,h=0,D=0;D<w.length;D++){var S={type:"Polygon",coordinates:w[D]},M=m.default(S);M>h&&(h=M,p=S)}else p=k;return x.default(p).geometry.coordinates}function T(A){var k=window.PlotlyGeoAssets||{},p=[];function w(L){return new Promise(function(R,z){f.json(L,function(P,I){if(P){delete k[L];var U=P.status===404?'GeoJSON at URL "'+L+'" does not exist.':"Unexpected error while fetching from "+L;return z(new Error(U))}return k[L]=I,R(I)})})}function h(L){return new Promise(function(R,z){var P=0,I=setInterval(function(){if(k[L]&&k[L]!=="pending")return clearInterval(I),R(k[L]);if(P>100)return clearInterval(I),z("Unexpected error while fetching from "+L);P++},50)})}for(var D=0;D<A.length;D++){var S=A[D][0].trace,M=S.geojson;typeof M=="string"&&(k[M]?k[M]==="pending"&&p.push(h(M)):(k[M]="pending",p.push(w(M))))}return p}function c(A){return t.default(A)}B.exports={locationToFeature:g,feature2polygons:b,getTraceGeojson:v,extractTraceFeature:_,fetchTraceGeoData:T,computeBbox:c}},{"./identity":513,"./is_plain_object":516,"./loggers":519,"./nested_property":523,"./polygon":527,"@plotly/d3":58,"@turf/area":61,"@turf/bbox":64,"@turf/centroid":67,"country-regex":94}],509:[function(e,B,V){var f=e("../constants/numerical").BADNUM;V.calcTraceToLineCoords=function(l){for(var m=l[0].trace,x=m.connectgaps,t=[],a=[],i=0;i<l.length;i++){var r=l[i],n=r.lonlat;n[0]!==f?a.push(n):!x&&a.length>0&&(t.push(a),a=[])}return a.length>0&&t.push(a),t},V.makeLine=function(l){return l.length===1?{type:"LineString",coordinates:l[0]}:{type:"MultiLineString",coordinates:l}},V.makePolygon=function(l){if(l.length===1)return{type:"Polygon",coordinates:l};for(var m=new Array(l.length),x=0;x<l.length;x++)m[x]=[l[x]];return{type:"MultiPolygon",coordinates:m}},V.makeBlank=function(){return{type:"Point",coordinates:[]}}},{"../constants/numerical":491}],510:[function(e,B,V){var f=e("./mod").mod;V.segmentsIntersect=l;function l(i,r,n,d,s,o,y,g){var b=n-i,v=s-i,_=y-s,u=d-r,T=o-r,c=g-o,A=b*c-_*u;if(A===0)return null;var k=(v*c-_*T)/A,p=(v*u-b*T)/A;return p<0||p>1||k<0||k>1?null:{x:i+b*k,y:r+u*k}}V.segmentDistance=function(r,n,d,s,o,y,g,b){if(l(r,n,d,s,o,y,g,b))return 0;var v=d-r,_=s-n,u=g-o,T=b-y,c=v*v+_*_,A=u*u+T*T,k=Math.min(m(v,_,c,o-r,y-n),m(v,_,c,g-r,b-n),m(u,T,A,r-o,n-y),m(u,T,A,d-o,s-y));return Math.sqrt(k)};function m(i,r,n,d,s){var o=d*i+s*r;if(o<0)return d*d+s*s;if(o>n){var y=d-i,g=s-r;return y*y+g*g}else{var b=d*r-s*i;return b*b/n}}var x,t,a;V.getTextLocation=function(r,n,d,s){if((r!==t||s!==a)&&(x={},t=r,a=s),x[d])return x[d];var o=r.getPointAtLength(f(d-s/2,n)),y=r.getPointAtLength(f(d+s/2,n)),g=Math.atan((y.y-o.y)/(y.x-o.x)),b=r.getPointAtLength(f(d,n)),v=(b.x*4+o.x+y.x)/6,_=(b.y*4+o.y+y.y)/6,u={x:v,y:_,theta:g};return x[d]=u,u},V.clearLocationCache=function(){t=null},V.getVisibleSegment=function(r,n,d){var s=n.left,o=n.right,y=n.top,g=n.bottom,b=0,v=r.getTotalLength(),_=v,u,T;function c(k){var p=r.getPointAtLength(k);k===0?u=p:k===v&&(T=p);var w=p.x<s?s-p.x:p.x>o?p.x-o:0,h=p.y<y?y-p.y:p.y>g?p.y-g:0;return Math.sqrt(w*w+h*h)}for(var A=c(b);A;){if(b+=A+d,b>_)return;A=c(b)}for(A=c(_);A;){if(_-=A+d,b>_)return;A=c(_)}return{min:b,max:_,len:_-b,total:v,isClosed:b===0&&_===v&&Math.abs(u.x-T.x)<.1&&Math.abs(u.y-T.y)<.1}},V.findPointOnPath=function(r,n,d,s){s=s||{};for(var o=s.pathLength||r.getTotalLength(),y=s.tolerance||.001,g=s.iterationLimit||30,b=r.getPointAtLength(0)[d]>r.getPointAtLength(o)[d]?-1:1,v=0,_=0,u=o,T,c,A;v<g;){if(T=(_+u)/2,c=r.getPointAtLength(T),A=c[d]-n,Math.abs(A)<y)return c;b*A>0?u=T:_=T,v++}return c}},{"./mod":522}],511:[function(e,B,V){var f=e("fast-isnumeric"),l=e("tinycolor2"),m=e("color-normalize"),x=e("../components/colorscale"),t=e("../components/color/attributes").defaultLine,a=e("./array").isArrayOrTypedArray,i=m(t),r=1;function n(g,b){var v=g;return v[3]*=b,v}function d(g){if(f(g))return i;var b=m(g);return b.length?b:i}function s(g){return f(g)?g:r}function o(g,b,v){var _=g.color,u=a(_),T=a(b),c=x.extractOpts(g),A=[],k,p,w,h,D;if(c.colorscale!==void 0?k=x.makeColorScaleFuncFromTrace(g):k=d,u?p=function(M,L){return M[L]===void 0?i:m(k(M[L]))}:p=d,T?w=function(M,L){return M[L]===void 0?r:s(M[L])}:w=s,u||T)for(var S=0;S<v;S++)h=p(_,S),D=w(b,S),A[S]=n(h,D);else A=n(m(_),b);return A}function y(g){var b=x.extractOpts(g),v=b.colorscale;return b.reversescale&&(v=x.flipScale(b.colorscale)),v.map(function(_){var u=_[0],T=l(_[1]),c=T.toRgb();return{index:u,rgb:[c.r,c.g,c.b,c.a]}})}B.exports={formatColor:o,parseColorScale:y}},{"../components/color/attributes":366,"../components/colorscale":379,"./array":497,"color-normalize":89,"fast-isnumeric":190,tinycolor2:313}],512:[function(e,B,V){var f=e("./identity");function l(m){return[m]}B.exports={keyFun:function(m){return m.key},repeat:l,descend:f,wrap:l,unwrap:function(m){return m[0]}}},{"./identity":513}],513:[function(e,B,V){B.exports=function(l){return l}},{}],514:[function(e,B,V){B.exports=function(l,m){if(!m)return l;var x=1/Math.abs(m),t=x>1?(x*l+x*m)/x:l+m,a=String(t).length;if(a>16){var i=String(m).length,r=String(l).length;if(a>=r+i){var n=parseFloat(t).toPrecision(12);n.indexOf("e+")===-1&&(t=+n)}}return t}},{}],515:[function(e,B,V){var f=e("@plotly/d3"),l=e("d3-time-format").utcFormat,m=e("d3-format").format,x=e("fast-isnumeric"),t=e("../constants/numerical"),a=t.FP_SAFE,i=-a,r=t.BADNUM,n=B.exports={};n.adjustFormat=function(at){return!at||/^\d[.]\df/.test(at)||/[.]\d%/.test(at)?at:at==="0.f"?"~f":/^\d%/.test(at)?"~%":/^\ds/.test(at)?"~s":!/^[~,.0$]/.test(at)&&/[&fps]/.test(at)?"~"+at:at};var d={};n.warnBadFormat=function(st){var at=String(st);d[at]||(d[at]=1,n.warn('encountered bad format: "'+at+'"'))},n.noFormat=function(st){return String(st)},n.numberFormat=function(st){var at;try{at=m(n.adjustFormat(st))}catch{return n.warnBadFormat(st),n.noFormat}return at},n.nestedProperty=e("./nested_property"),n.keyedContainer=e("./keyed_container"),n.relativeAttr=e("./relative_attr"),n.isPlainObject=e("./is_plain_object"),n.toLogRange=e("./to_log_range"),n.relinkPrivateKeys=e("./relink_private");var s=e("./array");n.isTypedArray=s.isTypedArray,n.isArrayOrTypedArray=s.isArrayOrTypedArray,n.isArray1D=s.isArray1D,n.ensureArray=s.ensureArray,n.concat=s.concat,n.maxRowLength=s.maxRowLength,n.minRowLength=s.minRowLength;var o=e("./mod");n.mod=o.mod,n.modHalf=o.modHalf;var y=e("./coerce");n.valObjectMeta=y.valObjectMeta,n.coerce=y.coerce,n.coerce2=y.coerce2,n.coerceFont=y.coerceFont,n.coercePattern=y.coercePattern,n.coerceHoverinfo=y.coerceHoverinfo,n.coerceSelectionMarkerOpacity=y.coerceSelectionMarkerOpacity,n.validate=y.validate;var g=e("./dates");n.dateTime2ms=g.dateTime2ms,n.isDateTime=g.isDateTime,n.ms2DateTime=g.ms2DateTime,n.ms2DateTimeLocal=g.ms2DateTimeLocal,n.cleanDate=g.cleanDate,n.isJSDate=g.isJSDate,n.formatDate=g.formatDate,n.incrementMonth=g.incrementMonth,n.dateTick0=g.dateTick0,n.dfltRange=g.dfltRange,n.findExactDates=g.findExactDates,n.MIN_MS=g.MIN_MS,n.MAX_MS=g.MAX_MS;var b=e("./search");n.findBin=b.findBin,n.sorterAsc=b.sorterAsc,n.sorterDes=b.sorterDes,n.distinctVals=b.distinctVals,n.roundUp=b.roundUp,n.sort=b.sort,n.findIndexOfMin=b.findIndexOfMin,n.sortObjectKeys=e("./sort_object_keys");var v=e("./stats");n.aggNums=v.aggNums,n.len=v.len,n.mean=v.mean,n.median=v.median,n.midRange=v.midRange,n.variance=v.variance,n.stdev=v.stdev,n.interp=v.interp;var _=e("./matrix");n.init2dArray=_.init2dArray,n.transposeRagged=_.transposeRagged,n.dot=_.dot,n.translationMatrix=_.translationMatrix,n.rotationMatrix=_.rotationMatrix,n.rotationXYMatrix=_.rotationXYMatrix,n.apply3DTransform=_.apply3DTransform,n.apply2DTransform=_.apply2DTransform,n.apply2DTransform2=_.apply2DTransform2,n.convertCssMatrix=_.convertCssMatrix,n.inverseTransformMatrix=_.inverseTransformMatrix;var u=e("./angles");n.deg2rad=u.deg2rad,n.rad2deg=u.rad2deg,n.angleDelta=u.angleDelta,n.angleDist=u.angleDist,n.isFullCircle=u.isFullCircle,n.isAngleInsideSector=u.isAngleInsideSector,n.isPtInsideSector=u.isPtInsideSector,n.pathArc=u.pathArc,n.pathSector=u.pathSector,n.pathAnnulus=u.pathAnnulus;var T=e("./anchor_utils");n.isLeftAnchor=T.isLeftAnchor,n.isCenterAnchor=T.isCenterAnchor,n.isRightAnchor=T.isRightAnchor,n.isTopAnchor=T.isTopAnchor,n.isMiddleAnchor=T.isMiddleAnchor,n.isBottomAnchor=T.isBottomAnchor;var c=e("./geometry2d");n.segmentsIntersect=c.segmentsIntersect,n.segmentDistance=c.segmentDistance,n.getTextLocation=c.getTextLocation,n.clearLocationCache=c.clearLocationCache,n.getVisibleSegment=c.getVisibleSegment,n.findPointOnPath=c.findPointOnPath;var A=e("./extend");n.extendFlat=A.extendFlat,n.extendDeep=A.extendDeep,n.extendDeepAll=A.extendDeepAll,n.extendDeepNoArrays=A.extendDeepNoArrays;var k=e("./loggers");n.log=k.log,n.warn=k.warn,n.error=k.error;var p=e("./regex");n.counterRegex=p.counter;var w=e("./throttle");n.throttle=w.throttle,n.throttleDone=w.done,n.clearThrottle=w.clear;var h=e("./dom");n.getGraphDiv=h.getGraphDiv,n.isPlotDiv=h.isPlotDiv,n.removeElement=h.removeElement,n.addStyleRule=h.addStyleRule,n.addRelatedStyleRule=h.addRelatedStyleRule,n.deleteRelatedStyleRule=h.deleteRelatedStyleRule,n.getFullTransformMatrix=h.getFullTransformMatrix,n.getElementTransformMatrix=h.getElementTransformMatrix,n.getElementAndAncestors=h.getElementAndAncestors,n.equalDomRects=h.equalDomRects,n.clearResponsive=e("./clear_responsive"),n.preserveDrawingBuffer=e("./preserve_drawing_buffer"),n.makeTraceGroups=e("./make_trace_groups"),n._=e("./localize"),n.notifier=e("./notifier"),n.filterUnique=e("./filter_unique"),n.filterVisible=e("./filter_visible"),n.pushUnique=e("./push_unique"),n.increment=e("./increment"),n.cleanNumber=e("./clean_number"),n.ensureNumber=function(at){return x(at)?(at=Number(at),at>a||at<i?r:at):r},n.isIndex=function(st,at){return at!==void 0&&st>=at?!1:x(st)&&st>=0&&st%1===0},n.noop=e("./noop"),n.identity=e("./identity"),n.repeat=function(st,at){for(var lt=new Array(at),F=0;F<at;F++)lt[F]=st;return lt},n.swapAttrs=function(st,at,lt,F){lt||(lt="x"),F||(F="y");for(var H=0;H<at.length;H++){var et=at[H],q=n.nestedProperty(st,et.replace("?",lt)),W=n.nestedProperty(st,et.replace("?",F)),K=q.get();q.set(W.get()),W.set(K)}},n.raiseToTop=function(at){at.parentNode.appendChild(at)},n.cancelTransition=function(st){return st.transition().duration(0)},n.constrain=function(st,at,lt){return at>lt?Math.max(lt,Math.min(at,st)):Math.max(at,Math.min(lt,st))},n.bBoxIntersect=function(st,at,lt){return lt=lt||0,st.left<=at.right+lt&&at.left<=st.right+lt&&st.top<=at.bottom+lt&&at.top<=st.bottom+lt},n.simpleMap=function(st,at,lt,F,H){for(var et=st.length,q=new Array(et),W=0;W<et;W++)q[W]=at(st[W],lt,F,H);return q},n.randstr=function st(at,lt,F,H){if(F||(F=16),lt===void 0&&(lt=24),lt<=0)return"0";var et=Math.log(Math.pow(2,lt))/Math.log(F),q="",W,K,nt;for(W=2;et===1/0;W*=2)et=Math.log(Math.pow(2,lt/W))/Math.log(F)*W;var it=et-Math.floor(et);for(W=0;W<Math.floor(et);W++)nt=Math.floor(Math.random()*F).toString(F),q=nt+q;it&&(K=Math.pow(F,it),nt=Math.floor(Math.random()*K).toString(F),q=nt+q);var ot=parseInt(q,F);return at&&at[q]||ot!==1/0&&ot>=Math.pow(2,lt)?H>10?(n.warn("randstr failed uniqueness"),q):st(at,lt,F,(H||0)+1):q},n.OptionControl=function(st,at){st||(st={}),at||(at="opt");var lt={};return lt.optionList=[],lt._newoption=function(F){F[at]=st,lt[F.name]=F,lt.optionList.push(F)},lt["_"+at]=st,lt},n.smooth=function(st,at){if(at=Math.round(at)||0,at<2)return st;var lt=st.length,F=2*lt,H=2*at-1,et=new Array(H),q=new Array(lt),W,K,nt,it;for(W=0;W<H;W++)et[W]=(1-Math.cos(Math.PI*(W+1)/at))/(2*at);for(W=0;W<lt;W++){for(it=0,K=0;K<H;K++)nt=W+K+1-at,nt<-lt?nt-=F*Math.round(nt/F):nt>=F&&(nt-=F*Math.floor(nt/F)),nt<0?nt=-1-nt:nt>=lt&&(nt=F-1-nt),it+=st[nt]*et[K];q[W]=it}return q},n.syncOrAsync=function(st,at,lt){var F,H;function et(){return n.syncOrAsync(st,at,lt)}for(;st.length;)if(H=st.splice(0,1)[0],F=H(at),F&&F.then)return F.then(et);return lt&&lt(at)},n.stripTrailingSlash=function(st){return st.substr(-1)==="/"?st.substr(0,st.length-1):st},n.noneOrAll=function(st,at,lt){if(!!st){var F=!1,H=!0,et,q;for(et=0;et<lt.length;et++)q=st[lt[et]],q!=null?F=!0:H=!1;if(F&&!H)for(et=0;et<lt.length;et++)st[lt[et]]=at[lt[et]]}},n.mergeArray=function(st,at,lt,F){var H=typeof F=="function";if(n.isArrayOrTypedArray(st))for(var et=Math.min(st.length,at.length),q=0;q<et;q++){var W=st[q];at[q][lt]=H?F(W):W}},n.mergeArrayCastPositive=function(st,at,lt){return n.mergeArray(st,at,lt,function(F){var H=+F;return isFinite(H)&&H>0?H:0})},n.fillArray=function(st,at,lt,F){if(F=F||n.identity,n.isArrayOrTypedArray(st))for(var H=0;H<at.length;H++)at[H][lt]=F(st[H])},n.castOption=function(st,at,lt,F){F=F||n.identity;var H=n.nestedProperty(st,lt).get();return n.isArrayOrTypedArray(H)?Array.isArray(at)&&n.isArrayOrTypedArray(H[at[0]])?F(H[at[0]][at[1]]):F(H[at]):H},n.extractOption=function(st,at,lt,F){if(lt in st)return st[lt];var H=n.nestedProperty(at,F).get();if(!Array.isArray(H))return H};function D(st){var at={};for(var lt in st)for(var F=st[lt],H=0;H<F.length;H++)at[F[H]]=+lt;return at}n.tagSelected=function(st,at,lt){var F=at.selectedpoints,H=at._indexToPoints,et;H&&(et=D(H));function q(ot){return ot!==void 0&&ot<st.length}for(var W=0;W<F.length;W++){var K=F[W];if(n.isIndex(K)||n.isArrayOrTypedArray(K)&&n.isIndex(K[0])&&n.isIndex(K[1])){var nt=et?et[K]:K,it=lt?lt[nt]:nt;q(it)&&(st[it].selected=1)}}},n.selIndices2selPoints=function(st){var at=st.selectedpoints,lt=st._indexToPoints;if(lt){for(var F=D(lt),H=[],et=0;et<at.length;et++){var q=at[et];if(n.isIndex(q)){var W=F[q];n.isIndex(W)&&H.push(W)}}return H}else return at},n.getTargetArray=function(st,at){var lt=at.target;if(typeof lt=="string"&&lt){var F=n.nestedProperty(st,lt).get();return Array.isArray(F)?F:!1}else if(Array.isArray(lt))return lt;return!1},n.minExtend=function(st,at){var lt={};typeof at!="object"&&(at={});var F=3,H=Object.keys(st),et,q,W;for(et=0;et<H.length;et++)q=H[et],W=st[q],!(q.charAt(0)==="_"||typeof W=="function")&&(q==="module"?lt[q]=W:Array.isArray(W)?q==="colorscale"?lt[q]=W.slice():lt[q]=W.slice(0,F):n.isTypedArray(W)?lt[q]=W.subarray(0,F):W&&typeof W=="object"?lt[q]=n.minExtend(st[q],at[q]):lt[q]=W);for(H=Object.keys(at),et=0;et<H.length;et++)q=H[et],W=at[q],(typeof W!="object"||!(q in lt)||typeof lt[q]!="object")&&(lt[q]=W);return lt},n.titleCase=function(st){return st.charAt(0).toUpperCase()+st.substr(1)},n.containsAny=function(st,at){for(var lt=0;lt<at.length;lt++)if(st.indexOf(at[lt])!==-1)return!0;return!1},n.isIE=function(){return typeof window.navigator.msSaveBlob<"u"};var S=/Version\/[\d\.]+.*Safari/;n.isSafari=function(){return S.test(window.navigator.userAgent)};var M=/iPad|iPhone|iPod/;n.isIOS=function(){return M.test(window.navigator.userAgent)};var L=/Firefox\/(\d+)\.\d+/;n.getFirefoxVersion=function(){var st=L.exec(window.navigator.userAgent);if(st&&st.length===2){var at=parseInt(st[1]);if(!isNaN(at))return at}return null},n.isD3Selection=function(st){return st instanceof f.selection},n.ensureSingle=function(st,at,lt,F){var H=st.select(at+(lt?"."+lt:""));if(H.size())return H;var et=st.append(at);return lt&&et.classed(lt,!0),F&&et.call(F),et},n.ensureSingleById=function(st,at,lt,F){var H=st.select(at+"#"+lt);if(H.size())return H;var et=st.append(at).attr("id",lt);return F&&et.call(F),et},n.objectFromPath=function(st,at){for(var lt=st.split("."),F,H=F={},et=0;et<lt.length;et++){var q=lt[et],W=null,K=lt[et].match(/(.*)\[([0-9]+)\]/);K?(q=K[1],W=K[2],F=F[q]=[],et===lt.length-1?F[W]=at:F[W]={},F=F[W]):(et===lt.length-1?F[q]=at:F[q]={},F=F[q])}return H};var R=/^([^\[\.]+)\.(.+)?/,z=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;n.expandObjectPaths=function(st){var at,lt,F,H,et,q,W;if(typeof st=="object"&&!Array.isArray(st))for(lt in st)st.hasOwnProperty(lt)&&((at=lt.match(R))?(H=st[lt],F=at[1],delete st[lt],st[F]=n.extendDeepNoArrays(st[F]||{},n.objectFromPath(lt,n.expandObjectPaths(H))[F])):(at=lt.match(z))?(H=st[lt],F=at[1],et=parseInt(at[2]),delete st[lt],st[F]=st[F]||[],at[3]==="."?(W=at[4],q=st[F][et]=st[F][et]||{},n.extendDeepNoArrays(q,n.objectFromPath(W,n.expandObjectPaths(H)))):st[F][et]=n.expandObjectPaths(H)):st[lt]=n.expandObjectPaths(st[lt]));return st},n.numSeparate=function(st,at,lt){if(lt||(lt=!1),typeof at!="string"||at.length===0)throw new Error("Separator string required for formatting!");typeof st=="number"&&(st=String(st));var F=/(\d+)(\d{3})/,H=at.charAt(0),et=at.charAt(1),q=st.split("."),W=q[0],K=q.length>1?H+q[1]:"";if(et&&(q.length>1||W.length>4||lt))for(;F.test(W);)W=W.replace(F,"$1"+et+"$2");return W+K},n.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var P=/^\w*$/;n.templateString=function(st,at){var lt={};return st.replace(n.TEMPLATE_STRING_REGEX,function(F,H){var et;return P.test(H)?et=at[H]:(lt[H]=lt[H]||n.nestedProperty(at,H).get,et=lt[H]()),n.isValidTextValue(et)?et:""})};var I={max:10,count:0,name:"hovertemplate"};n.hovertemplateString=function(){return G.apply(I,arguments)};var U={max:10,count:0,name:"texttemplate"};n.texttemplateString=function(){return G.apply(U,arguments)};var O=/^[:|\|]/;function G(st,at,lt){var F=this,H=arguments;at||(at={});var et={};return st.replace(n.TEMPLATE_STRING_REGEX,function(q,W,K){var nt=W==="xother"||W==="yother",it=W==="_xother"||W==="_yother",ot=W==="_xother_"||W==="_yother_",ct=W==="xother_"||W==="yother_",bt=nt||it||ct||ot,ut=W;(it||ot)&&(ut=ut.substring(1)),(ct||ot)&&(ut=ut.substring(0,ut.length-1));var pt;if(bt){if(pt=at[ut],pt===void 0)return""}else{var yt,Tt;for(Tt=3;Tt<H.length;Tt++)if(yt=H[Tt],!!yt){if(yt.hasOwnProperty(ut)){pt=yt[ut];break}if(P.test(ut)||(pt=n.nestedProperty(yt,ut).get(),pt=et[ut]||n.nestedProperty(yt,ut).get(),pt&&(et[ut]=pt)),pt!==void 0)break}}if(pt===void 0&&F)return F.count<F.max&&(n.warn("Variable '"+ut+"' in "+F.name+" could not be found!"),pt=q),F.count===F.max&&n.warn("Too many "+F.name+" warnings - additional warnings will be suppressed"),F.count++,q;if(K){var kt;if(K[0]===":"&&(kt=lt?lt.numberFormat:n.numberFormat,pt=kt(K.replace(O,""))(pt)),K[0]==="|"){kt=lt?lt.timeFormat:l;var zt=n.dateTime2ms(pt);pt=n.formatDate(zt,K.replace(O,""),!1,kt)}}else{var Rt=ut+"Label";at.hasOwnProperty(Rt)&&(pt=at[Rt])}return bt&&(pt="("+pt+")",(it||ot)&&(pt=" "+pt),(ct||ot)&&(pt=pt+" ")),pt})}var $=48,tt=57;n.subplotSort=function(st,at){for(var lt=Math.min(st.length,at.length)+1,F=0,H=0,et=0;et<lt;et++){var q=st.charCodeAt(et)||0,W=at.charCodeAt(et)||0,K=q>=$&&q<=tt,nt=W>=$&&W<=tt;if(K&&(F=10*F+q-$),nt&&(H=10*H+W-$),!K||!nt){if(F!==H)return F-H;if(q!==W)return q-W}}return H-F};var Z=2e9;n.seedPseudoRandom=function(){Z=2e9},n.pseudoRandom=function(){var st=Z;return Z=(69069*Z+1)%4294967296,Math.abs(Z-st)<429496729?n.pseudoRandom():Z/4294967296},n.fillText=function(st,at,lt){var F=Array.isArray(lt)?function(q){lt.push(q)}:function(q){lt.text=q},H=n.extractOption(st,at,"htx","hovertext");if(n.isValidTextValue(H))return F(H);var et=n.extractOption(st,at,"tx","text");if(n.isValidTextValue(et))return F(et)},n.isValidTextValue=function(st){return st||st===0},n.formatPercent=function(st,at){at=at||0;for(var lt=(Math.round(100*st*Math.pow(10,at))*Math.pow(.1,at)).toFixed(at)+"%",F=0;F<at;F++)lt.indexOf(".")!==-1&&(lt=lt.replace("0%","%"),lt=lt.replace(".%","%"));return lt},n.isHidden=function(st){var at=window.getComputedStyle(st).display;return!at||at==="none"},n.strTranslate=function(st,at){return st||at?"translate("+st+","+at+")":""},n.strRotate=function(st){return st?"rotate("+st+")":""},n.strScale=function(st){return st!==1?"scale("+st+")":""},n.getTextTransform=function(st){var at=st.noCenter,lt=st.textX,F=st.textY,H=st.targetX,et=st.targetY,q=st.anchorX||0,W=st.anchorY||0,K=st.rotate,nt=st.scale;return nt?nt>1&&(nt=1):nt=0,n.strTranslate(H-nt*(lt+q),et-nt*(F+W))+n.strScale(nt)+(K?"rotate("+K+(at?"":" "+lt+" "+F)+")":"")},n.ensureUniformFontSize=function(st,at){var lt=n.extendFlat({},at);return lt.size=Math.max(at.size,st._fullLayout.uniformtext.minsize||0),lt},n.join2=function(st,at,lt){var F=st.length;return F>1?st.slice(0,-1).join(at)+lt+st[F-1]:st.join(at)},n.bigFont=function(st){return Math.round(1.2*st)};var X=n.getFirefoxVersion(),J=X!==null&&X<86;n.getPositionFromD3Event=function(){return J?[f.event.layerX,f.event.layerY]:[f.event.offsetX,f.event.offsetY]}},{"../constants/numerical":491,"./anchor_utils":495,"./angles":496,"./array":497,"./clean_number":498,"./clear_responsive":500,"./coerce":501,"./dates":502,"./dom":503,"./extend":505,"./filter_unique":506,"./filter_visible":507,"./geometry2d":510,"./identity":513,"./increment":514,"./is_plain_object":516,"./keyed_container":517,"./localize":518,"./loggers":519,"./make_trace_groups":520,"./matrix":521,"./mod":522,"./nested_property":523,"./noop":524,"./notifier":525,"./preserve_drawing_buffer":529,"./push_unique":530,"./regex":532,"./relative_attr":533,"./relink_private":534,"./search":535,"./sort_object_keys":538,"./stats":539,"./throttle":542,"./to_log_range":543,"@plotly/d3":58,"d3-format":112,"d3-time-format":120,"fast-isnumeric":190}],516:[function(e,B,V){B.exports=function(l){return window&&window.process&&window.process.versions?Object.prototype.toString.call(l)==="[object Object]":Object.prototype.toString.call(l)==="[object Object]"&&Object.getPrototypeOf(l).hasOwnProperty("hasOwnProperty")}},{}],517:[function(e,B,V){var f=e("./nested_property"),l=/^\w*$/,m=0,x=1,t=2,a=3,i=4;B.exports=function(n,d,s,o){s=s||"name",o=o||"value";var y,g,b,v={};d&&d.length?(b=f(n,d),g=b.get()):g=n,d=d||"";var _={};if(g)for(y=0;y<g.length;y++)_[g[y][s]]=y;var u=l.test(o),T={set:function(c,A){var k=A===null?i:m;if(!g){if(!b||k===i)return;g=[],b.set(g)}var p=_[c];if(p===void 0){if(k===i)return;k=k|a,p=g.length,_[c]=p}else A!==(u?g[p][o]:f(g[p],o).get())&&(k=k|t);var w=g[p]=g[p]||{};return w[s]=c,u?w[o]=A:f(w,o).set(A),A!==null&&(k=k&~i),v[p]=v[p]|k,T},get:function(c){if(!!g){var A=_[c];if(A!==void 0)return u?g[A][o]:f(g[A],o).get()}},rename:function(c,A){var k=_[c];return k===void 0||(v[k]=v[k]|x,_[A]=k,delete _[c],g[k][s]=A),T},remove:function(c){var A=_[c];if(A===void 0)return T;var k=g[A];if(Object.keys(k).length>2)return v[A]=v[A]|t,T.set(c,null);if(u){for(y=A;y<g.length;y++)v[y]=v[y]|a;for(y=A;y<g.length;y++)_[g[y][s]]--;g.splice(A,1),delete _[c]}else f(k,o).set(null),v[A]=v[A]|t|i;return T},constructUpdate:function(){for(var c,A,k={},p=Object.keys(v),w=0;w<p.length;w++)A=p[w],c=d+"["+A+"]",g[A]?(v[A]&x&&(k[c+"."+s]=g[A][s]),v[A]&t&&(u?k[c+"."+o]=v[A]&i?null:g[A][o]:k[c+"."+o]=v[A]&i?null:f(g[A],o).get())):k[c]=null;return k}};return T}},{"./nested_property":523}],518:[function(e,B,V){var f=e("../registry");B.exports=function(m,x){for(var t=m._context.locale,a=0;a<2;a++){for(var i=m._context.locales,r=0;r<2;r++){var n=(i[t]||{}).dictionary;if(n){var d=n[x];if(d)return d}i=f.localeRegistry}var s=t.split("-")[0];if(s===t)break;t=s}return x}},{"../registry":647}],519:[function(e,B,V){var f=e("../plot_api/plot_config").dfltConfig,l=e("./notifier"),m=B.exports={};m.log=function(){var x;if(f.logging>1){var t=["LOG:"];for(x=0;x<arguments.length;x++)t.push(arguments[x]);console.trace.apply(console,t)}if(f.notifyOnLogging>1){var a=[];for(x=0;x<arguments.length;x++)a.push(arguments[x]);l(a.join("<br>"),"long")}},m.warn=function(){var x;if(f.logging>0){var t=["WARN:"];for(x=0;x<arguments.length;x++)t.push(arguments[x]);console.trace.apply(console,t)}if(f.notifyOnLogging>0){var a=[];for(x=0;x<arguments.length;x++)a.push(arguments[x]);l(a.join("<br>"),"stick")}},m.error=function(){var x;if(f.logging>0){var t=["ERROR:"];for(x=0;x<arguments.length;x++)t.push(arguments[x]);console.error.apply(console,t)}if(f.notifyOnLogging>0){var a=[];for(x=0;x<arguments.length;x++)a.push(arguments[x]);l(a.join("<br>"),"stick")}}},{"../plot_api/plot_config":553,"./notifier":525}],520:[function(e,B,V){var f=e("@plotly/d3");B.exports=function(m,x,t){var a=m.selectAll("g."+t.replace(/\s/g,".")).data(x,function(r){return r[0].trace.uid});a.exit().remove(),a.enter().append("g").attr("class",t),a.order();var i=m.classed("rangeplot")?"nodeRangePlot3":"node3";return a.each(function(r){r[0][i]=f.select(this)}),a}},{"@plotly/d3":58}],521:[function(e,B,V){var f=e("gl-mat4");V.init2dArray=function(l,m){for(var x=new Array(l),t=0;t<l;t++)x[t]=new Array(m);return x},V.transposeRagged=function(l){var m=0,x=l.length,t,a;for(t=0;t<x;t++)m=Math.max(m,l[t].length);var i=new Array(m);for(t=0;t<m;t++)for(i[t]=new Array(x),a=0;a<x;a++)i[t][a]=l[a][t];return i},V.dot=function(l,m){if(!(l.length&&m.length)||l.length!==m.length)return null;var x=l.length,t,a;if(l[0].length)for(t=new Array(x),a=0;a<x;a++)t[a]=V.dot(l[a],m);else if(m[0].length){var i=V.transposeRagged(m);for(t=new Array(i.length),a=0;a<i.length;a++)t[a]=V.dot(l,i[a])}else for(t=0,a=0;a<x;a++)t+=l[a]*m[a];return t},V.translationMatrix=function(l,m){return[[1,0,l],[0,1,m],[0,0,1]]},V.rotationMatrix=function(l){var m=l*Math.PI/180;return[[Math.cos(m),-Math.sin(m),0],[Math.sin(m),Math.cos(m),0],[0,0,1]]},V.rotationXYMatrix=function(l,m,x){return V.dot(V.dot(V.translationMatrix(m,x),V.rotationMatrix(l)),V.translationMatrix(-m,-x))},V.apply3DTransform=function(l){return function(){var m=arguments,x=arguments.length===1?m[0]:[m[0],m[1],m[2]||0];return V.dot(l,[x[0],x[1],x[2],1]).slice(0,3)}},V.apply2DTransform=function(l){return function(){var m=arguments;m.length===3&&(m=m[0]);var x=arguments.length===1?m[0]:[m[0],m[1]];return V.dot(l,[x[0],x[1],1]).slice(0,2)}},V.apply2DTransform2=function(l){var m=V.apply2DTransform(l);return function(x){return m(x.slice(0,2)).concat(m(x.slice(2,4)))}},V.convertCssMatrix=function(l){if(l){var m=l.length;if(m===16)return l;if(m===6)return[l[0],l[1],0,0,l[2],l[3],0,0,0,0,1,0,l[4],l[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},V.inverseTransformMatrix=function(l){var m=[];return f.invert(m,l),[[m[0],m[1],m[2],m[3]],[m[4],m[5],m[6],m[7]],[m[8],m[9],m[10],m[11]],[m[12],m[13],m[14],m[15]]]}},{"gl-mat4":210}],522:[function(e,B,V){function f(m,x){var t=m%x;return t<0?t+x:t}function l(m,x){return Math.abs(m)>x/2?m-Math.round(m/x)*x:m}B.exports={mod:f,modHalf:l}},{}],523:[function(e,B,V){var f=e("fast-isnumeric"),l=e("./array").isArrayOrTypedArray;B.exports=function(o,y){if(f(y))y=String(y);else if(typeof y!="string"||y.substr(y.length-4)==="[-1]")throw"bad property string";for(var g=0,b=y.split("."),v,_,u;g<b.length;){if(v=String(b[g]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/),v){if(v[1])b[g]=v[1];else if(g===0)b.splice(0,1);else throw"bad property string";for(_=v[2].substr(1,v[2].length-2).split("]["),u=0;u<_.length;u++)g++,b.splice(g,0,Number(_[u]))}g++}return typeof o!="object"?d(o,y,b):{set:a(o,b,y),get:m(o,b),astr:y,parts:b,obj:o}};function m(s,o){return function(){var y=s,g,b,v,_,u;for(_=0;_<o.length-1;_++){if(g=o[_],g===-1){for(b=!0,v=[],u=0;u<y.length;u++)v[u]=m(y[u],o.slice(_+1))(),v[u]!==v[0]&&(b=!1);return b?v[0]:v}if(typeof g=="number"&&!l(y)||(y=y[g],typeof y!="object"||y===null))return}if(!(typeof y!="object"||y===null)&&(v=y[o[_]],v!==null))return v}}var x=/(^|\.)args\[/;function t(s,o){return s===void 0||s===null&&!o.match(x)}function a(s,o,y){return function(g){var b=s,v="",_=t(g,y),u,T;for(T=0;T<o.length-1;T++){if(u=o[T],typeof u=="number"&&!l(b))throw"array index but container is not an array";if(u===-1){if(_=!r(b,o.slice(T+1),g,y),_)break;return}if(!n(b,u,o[T+1],_))break;if(b=b[u],typeof b!="object"||b===null)throw"container is not an object";v=i(v,u)}if(_){if(T===o.length-1&&(delete b[o[T]],Array.isArray(b)&&+o[T]===b.length-1))for(;b.length&&b[b.length-1]===void 0;)b.pop()}else b[o[T]]=g}}function i(s,o){var y=o;return f(o)?y="["+o+"]":s&&(y="."+o),s+y}function r(s,o,y,g){var b=l(y),v=!0,_=y,u=g.replace("-1",0),T=b?!1:t(y,u),c=o[0],A;for(A=0;A<s.length;A++)u=g.replace("-1",A),b&&(_=y[A%y.length],T=t(_,u)),T&&(v=!1),n(s,A,c,T)&&a(s[A],o,g.replace("-1",A))(_);return v}function n(s,o,y,g){if(s[o]===void 0){if(g)return!1;typeof y=="number"?s[o]=[]:s[o]={}}return!0}function d(s,o,y){return{set:function(){throw"bad container"},get:function(){},astr:o,parts:y,obj:s}}},{"./array":497,"fast-isnumeric":190}],524:[function(e,B,V){B.exports=function(){}},{}],525:[function(e,B,V){var f=e("@plotly/d3"),l=e("fast-isnumeric"),m=[];B.exports=function(x,t){if(m.indexOf(x)!==-1)return;m.push(x);var a=1e3;l(t)?a=t:t==="long"&&(a=3e3);var i=f.select("body").selectAll(".plotly-notifier").data([0]);i.enter().append("div").classed("plotly-notifier",!0);var r=i.selectAll(".notifier-note").data(m);function n(d){d.duration(700).style("opacity",0).each("end",function(s){var o=m.indexOf(s);o!==-1&&m.splice(o,1),f.select(this).remove()})}r.enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(d){var s=f.select(this);s.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){s.transition().call(n)});for(var o=s.append("p"),y=d.split(/<br\s*\/?>/g),g=0;g<y.length;g++)g&&o.append("br"),o.append("span").text(y[g]);t==="stick"?s.transition().duration(350).style("opacity",1):s.transition().duration(700).style("opacity",1).transition().delay(a).call(n)})}},{"@plotly/d3":58,"fast-isnumeric":190}],526:[function(e,B,V){var f=e("./setcursor"),l="data-savedcursor",m="!!";B.exports=function(t,a){var i=t.attr(l);if(a){if(!i){for(var r=(t.attr("class")||"").split(" "),n=0;n<r.length;n++){var d=r[n];d.indexOf("cursor-")===0&&t.attr(l,d.substr(7)).classed(d,!1)}t.attr(l)||t.attr(l,m)}f(t,a)}else i&&(t.attr(l,null),i===m?f(t):f(t,i))}},{"./setcursor":536}],527:[function(e,B,V){var f=e("./matrix").dot,l=e("../constants/numerical").BADNUM,m=B.exports={};m.tester=function(t){var a=t.slice(),i=a[0][0],r=i,n=a[0][1],d=n,s;for((a[a.length-1][0]!==a[0][0]||a[a.length-1][1]!==a[0][1])&&a.push(a[0]),s=1;s<a.length;s++)i=Math.min(i,a[s][0]),r=Math.max(r,a[s][0]),n=Math.min(n,a[s][1]),d=Math.max(d,a[s][1]);var o=!1,y;a.length===5&&(a[0][0]===a[1][0]?a[2][0]===a[3][0]&&a[0][1]===a[3][1]&&a[1][1]===a[2][1]&&(o=!0,y=function(u){return u[0]===a[0][0]}):a[0][1]===a[1][1]&&a[2][1]===a[3][1]&&a[0][0]===a[3][0]&&a[1][0]===a[2][0]&&(o=!0,y=function(u){return u[1]===a[0][1]}));function g(u,T){var c=u[0],A=u[1];return!(c===l||c<i||c>r||A===l||A<n||A>d||T&&y(u))}function b(u,T){var c=u[0],A=u[1];if(c===l||c<i||c>r||A===l||A<n||A>d)return!1;var k=a.length,p=a[0][0],w=a[0][1],h=0,D,S,M,L,R;for(D=1;D<k;D++)if(S=p,M=w,p=a[D][0],w=a[D][1],L=Math.min(S,p),!(c<L||c>Math.max(S,p)||A>Math.max(M,w)))if(A<Math.min(M,w))c!==L&&h++;else{if(p===S?R=A:R=M+(c-S)*(w-M)/(p-S),A===R)return!(D===1&&T);A<=R&&c!==L&&h++}return h%2===1}var v=!0,_=a[0];for(s=1;s<a.length;s++)if(_[0]!==a[s][0]||_[1]!==a[s][1]){v=!1;break}return{xmin:i,xmax:r,ymin:n,ymax:d,pts:a,contains:o?g:b,isRect:o,degenerate:v}},m.isSegmentBent=function(t,a,i,r){var n=t[a],d=[t[i][0]-n[0],t[i][1]-n[1]],s=f(d,d),o=Math.sqrt(s),y=[-d[1]/o,d[0]/o],g,b,v;for(g=a+1;g<i;g++)if(b=[t[g][0]-n[0],t[g][1]-n[1]],v=f(b,d),v<0||v>s||Math.abs(f(b,y))>r)return!0;return!1},m.filter=function(t,a){var i=[t[0]],r=0,n=0;function d(o){t.push(o);var y=i.length,g=r;i.splice(n+1);for(var b=g+1;b<t.length;b++)(b===t.length-1||m.isSegmentBent(t,g,b+1,a))&&(i.push(t[b]),i.length<y-2&&(r=b,n=i.length-1),g=b)}if(t.length>1){var s=t.pop();d(s)}return{addPt:d,raw:t,filtered:i}}},{"../constants/numerical":491,"./matrix":521}],528:[function(e,B,V){(function(f){(function(){var l=e("./show_no_webgl_msg"),m=e("regl");B.exports=function(t,a,i){var r=t._fullLayout,n=!0;return r._glcanvas.each(function(d){if(d.regl){d.regl.preloadCachedCode(i);return}if(!(d.pick&&!r._has("parcoords"))){try{d.regl=m({canvas:this,attributes:{antialias:!d.pick,preserveDrawingBuffer:!0},pixelRatio:t._context.plotGlPixelRatio||f.devicePixelRatio,extensions:a||[],cachedCode:i||{}})}catch{n=!1}d.regl||(n=!1),n&&this.addEventListener("webglcontextlost",function(s){t&&t.emit&&t.emit("plotly_webglcontextlost",{event:s,layer:d.key})},!1)}}),n||l({container:r._glcontainer.node()}),n}}).call(this)}).call(this,typeof zo<"u"?zo:typeof self<"u"?self:typeof window<"u"?window:{})},{"./show_no_webgl_msg":537,regl:284}],529:[function(e,B,V){var f=e("fast-isnumeric"),l=e("is-mobile");B.exports=function(t){var a;if(t&&t.hasOwnProperty("userAgent")?a=t.userAgent:a=m(),typeof a!="string")return!0;var i=l({ua:{headers:{"user-agent":a}},tablet:!0,featureDetect:!1});if(!i)for(var r=a.split(" "),n=1;n<r.length;n++){var d=r[n];if(d.indexOf("Safari")!==-1)for(var s=n-1;s>-1;s--){var o=r[s];if(o.substr(0,8)==="Version/"){var y=o.substr(8).split(".")[0];if(f(y)&&(y=+y),y>=13)return!0}}}return i};function m(){var x;return typeof navigator<"u"&&(x=navigator.userAgent),x&&x.headers&&typeof x.headers["user-agent"]=="string"&&(x=x.headers["user-agent"]),x}},{"fast-isnumeric":190,"is-mobile":234}],530:[function(e,B,V){B.exports=function(l,m){if(m instanceof RegExp){for(var x=m.toString(),t=0;t<l.length;t++)if(l[t]instanceof RegExp&&l[t].toString()===x)return l;l.push(m)}else(m||m===0)&&l.indexOf(m)===-1&&l.push(m);return l}},{}],531:[function(e,B,V){var f=e("../lib"),l=e("../plot_api/plot_config").dfltConfig;function m(t,a){for(var i=[],r,n=0;n<a.length;n++)r=a[n],r===t?i[n]=r:typeof r=="object"?i[n]=Array.isArray(r)?f.extendDeep([],r):f.extendDeepAll({},r):i[n]=r;return i}var x={};x.add=function(t,a,i,r,n){var d,s;if(t.undoQueue=t.undoQueue||{index:0,queue:[],sequence:!1},s=t.undoQueue.index,t.autoplay){t.undoQueue.inSequence||(t.autoplay=!1);return}!t.undoQueue.sequence||t.undoQueue.beginSequence?(d={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},t.undoQueue.queue.splice(s,t.undoQueue.queue.length-s,d),t.undoQueue.index+=1):d=t.undoQueue.queue[s-1],t.undoQueue.beginSequence=!1,d&&(d.undo.calls.unshift(a),d.undo.args.unshift(i),d.redo.calls.push(r),d.redo.args.push(n)),t.undoQueue.queue.length>l.queueLength&&(t.undoQueue.queue.shift(),t.undoQueue.index--)},x.startSequence=function(t){t.undoQueue=t.undoQueue||{index:0,queue:[],sequence:!1},t.undoQueue.sequence=!0,t.undoQueue.beginSequence=!0},x.stopSequence=function(t){t.undoQueue=t.undoQueue||{index:0,queue:[],sequence:!1},t.undoQueue.sequence=!1,t.undoQueue.beginSequence=!1},x.undo=function(a){var i,r;if(!(a.undoQueue===void 0||isNaN(a.undoQueue.index)||a.undoQueue.index<=0)){for(a.undoQueue.index--,i=a.undoQueue.queue[a.undoQueue.index],a.undoQueue.inSequence=!0,r=0;r<i.undo.calls.length;r++)x.plotDo(a,i.undo.calls[r],i.undo.args[r]);a.undoQueue.inSequence=!1,a.autoplay=!1}},x.redo=function(a){var i,r;if(!(a.undoQueue===void 0||isNaN(a.undoQueue.index)||a.undoQueue.index>=a.undoQueue.queue.length)){for(i=a.undoQueue.queue[a.undoQueue.index],a.undoQueue.inSequence=!0,r=0;r<i.redo.calls.length;r++)x.plotDo(a,i.redo.calls[r],i.redo.args[r]);a.undoQueue.inSequence=!1,a.autoplay=!1,a.undoQueue.index++}},x.plotDo=function(t,a,i){t.autoplay=!0,i=m(t,i),a.apply(null,i)},B.exports=x},{"../lib":515,"../plot_api/plot_config":553}],532:[function(e,B,V){V.counter=function(f,l,m,x){var t=(l||"")+(m?"":"$"),a=x===!1?"":"^";return f==="xy"?new RegExp(a+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+t):new RegExp(a+f+"([2-9]|[1-9][0-9]+)?"+t)}},{}],533:[function(e,B,V){var f=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,l=/^[^\.\[\]]+$/;B.exports=function(m,x){for(;x;){var t=m.match(f);if(t)m=t[1];else if(m.match(l))m="";else throw new Error("bad relativeAttr call:"+[m,x]);if(x.charAt(0)==="^")x=x.slice(1);else break}return m&&x.charAt(0)!=="["?m+"."+x:m+x}},{}],534:[function(e,B,V){var f=e("./array").isArrayOrTypedArray,l=e("./is_plain_object");B.exports=function m(x,t){for(var a in t){var i=t[a],r=x[a];if(r!==i)if(a.charAt(0)==="_"||typeof i=="function"){if(a in x)continue;x[a]=i}else if(f(i)&&f(r)&&l(i[0])){if(a==="customdata"||a==="ids")continue;for(var n=Math.min(i.length,r.length),d=0;d<n;d++)r[d]!==i[d]&&l(i[d])&&l(r[d])&&m(r[d],i[d])}else l(i)&&l(r)&&(m(r,i),Object.keys(r).length||delete x[a])}}},{"./array":497,"./is_plain_object":516}],535:[function(e,B,V){var f=e("fast-isnumeric"),l=e("./loggers"),m=e("./identity"),x=e("../constants/numerical").BADNUM,t=1e-9;V.findBin=function(d,s,o){if(f(s.start))return o?Math.ceil((d-s.start)/s.size-t)-1:Math.floor((d-s.start)/s.size+t);var y=0,g=s.length,b=0,v=g>1?(s[g-1]-s[0])/(g-1):1,_,u;for(v>=0?u=o?a:i:u=o?n:r,d+=v*t*(o?-1:1)*(v>=0?1:-1);y<g&&b++<100;)_=Math.floor((y+g)/2),u(s[_],d)?y=_+1:g=_;return b>90&&l.log("Long binary search..."),y-1};function a(d,s){return d<s}function i(d,s){return d<=s}function r(d,s){return d>s}function n(d,s){return d>=s}V.sorterAsc=function(d,s){return d-s},V.sorterDes=function(d,s){return s-d},V.distinctVals=function(d){var s=d.slice();s.sort(V.sorterAsc);var o;for(o=s.length-1;o>-1&&s[o]===x;o--);for(var y=s[o]-s[0]||1,g=y/(o||1)/1e4,b=[],v,_=0;_<=o;_++){var u=s[_],T=u-v;v===void 0?(b.push(u),v=u):T>g&&(y=Math.min(y,T),b.push(u),v=u)}return{vals:b,minDiff:y}},V.roundUp=function(d,s,o){for(var y=0,g=s.length-1,b,v=0,_=o?0:1,u=o?1:0,T=o?Math.ceil:Math.floor;y<g&&v++<100;)b=T((y+g)/2),s[b]<=d?y=b+_:g=b-u;return s[y]},V.sort=function(d,s){for(var o=0,y=0,g=1;g<d.length;g++){var b=s(d[g],d[g-1]);if(b<0?o=1:b>0&&(y=1),o&&y)return d.sort(s)}return y?d:d.reverse()},V.findIndexOfMin=function(d,s){s=s||m;for(var o=1/0,y,g=0;g<d.length;g++){var b=s(d[g]);b<o&&(o=b,y=g)}return y}},{"../constants/numerical":491,"./identity":513,"./loggers":519,"fast-isnumeric":190}],536:[function(e,B,V){B.exports=function(l,m){(l.attr("class")||"").split(" ").forEach(function(x){x.indexOf("cursor-")===0&&l.classed(x,!1)}),m&&l.classed("cursor-"+m,!0)}},{}],537:[function(e,B,V){var f=e("../components/color"),l=function(){};B.exports=function(x){for(var t in x)typeof x[t]=="function"&&(x[t]=l);x.destroy=function(){x.container.parentNode.removeChild(x.container)};var a=document.createElement("div");a.className="no-webgl",a.style.cursor="pointer",a.style.fontSize="24px",a.style.color=f.defaults[0],a.style.position="absolute",a.style.left=a.style.top="0px",a.style.width=a.style.height="100%",a.style["background-color"]=f.lightLine,a.style["z-index"]=30;var i=document.createElement("p");return i.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",i.style.position="relative",i.style.top="50%",i.style.left="50%",i.style.height="30%",i.style.width="50%",i.style.margin="-15% 0 0 -25%",a.appendChild(i),x.container.appendChild(a),x.container.style.background="#FFFFFF",x.container.onclick=function(){window.open("https://get.webgl.org")},!1}},{"../components/color":367}],538:[function(e,B,V){B.exports=function(l){return Object.keys(l).sort()}},{}],539:[function(e,B,V){var f=e("fast-isnumeric"),l=e("./array").isArrayOrTypedArray;V.aggNums=function(m,x,t,a){var i,r;if((!a||a>t.length)&&(a=t.length),f(x)||(x=!1),l(t[0])){for(r=new Array(a),i=0;i<a;i++)r[i]=V.aggNums(m,x,t[i]);t=r}for(i=0;i<a;i++)f(x)?f(t[i])&&(x=m(+x,+t[i])):x=t[i];return x},V.len=function(m){return V.aggNums(function(x){return x+1},0,m)},V.mean=function(m,x){return x||(x=V.len(m)),V.aggNums(function(t,a){return t+a},0,m)/x},V.midRange=function(m){if(!(m===void 0||m.length===0))return(V.aggNums(Math.max,null,m)+V.aggNums(Math.min,null,m))/2},V.variance=function(m,x,t){return x||(x=V.len(m)),f(t)||(t=V.mean(m,x)),V.aggNums(function(a,i){return a+Math.pow(i-t,2)},0,m)/x},V.stdev=function(m,x,t){return Math.sqrt(V.variance(m,x,t))},V.median=function(m){var x=m.slice().sort();return V.interp(x,.5)},V.interp=function(m,x){if(!f(x))throw"n should be a finite number";if(x=x*m.length-.5,x<0)return m[0];if(x>m.length-1)return m[m.length-1];var t=x%1;return t*m[Math.ceil(x)]+(1-t)*m[Math.floor(x)]}},{"./array":497,"fast-isnumeric":190}],540:[function(e,B,V){var f=e("color-normalize");function l(m){return m?f(m):[0,0,0,1]}B.exports=l},{"color-normalize":89}],541:[function(e,B,V){var f=e("@plotly/d3"),l=e("../lib"),m=l.strTranslate,x=e("../constants/xmlns_namespaces"),t=e("../constants/alignment").LINE_SPACING,a=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;V.convertToTspans=function(O,G,$){var tt=O.text(),Z=!O.attr("data-notex")&&G&&G._context.typesetMath&&typeof MathJax<"u"&&tt.match(a),X=f.select(O.node().parentNode);if(X.empty())return;var J=O.attr("class")?O.attr("class").split(" ")[0]:"text";J+="-math",X.selectAll("svg."+J).remove(),X.selectAll("g."+J+"-group").remove(),O.style("display",null).attr({"data-unformatted":tt,"data-math":"N"});function st(){X.empty()||(J=O.attr("class")+"-math",X.select("svg."+J).remove()),O.text("").style("white-space","pre");var at=z(O.node(),tt);at&&O.style("pointer-events","all"),V.positionText(O),$&&$.call(O)}return Z?(G&&G._promises||[]).push(new Promise(function(at){O.style("display","none");var lt=parseInt(O.node().style.fontSize,10),F={fontSize:lt};s(Z[2],F,function(H,et,q){X.selectAll("svg."+J).remove(),X.selectAll("g."+J+"-group").remove();var W=H&&H.select("svg");if(!W||!W.node()){st(),at();return}var K=X.append("g").classed(J+"-group",!0).attr({"pointer-events":"none","data-unformatted":tt,"data-math":"Y"});K.node().appendChild(W.node()),et&&et.node()&&W.node().insertBefore(et.node().cloneNode(!0),W.node().firstChild);var nt=q.width,it=q.height;W.attr({class:J,height:it,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var ot=O.node().style.fill||"black",ct=W.select("g");ct.attr({fill:ot,stroke:ot});var bt=ct.node().getBoundingClientRect(),ut=bt.width,pt=bt.height;(ut>nt||pt>it)&&(W.style("overflow","hidden"),bt=W.node().getBoundingClientRect(),ut=bt.width,pt=bt.height);var yt=+O.attr("x"),Tt=+O.attr("y"),kt=lt||O.node().getBoundingClientRect().height,zt=-kt/4;if(J[0]==="y")K.attr({transform:"rotate("+[-90,yt,Tt]+")"+m(-ut/2,zt-pt/2)});else if(J[0]==="l")Tt=zt-pt/2;else if(J[0]==="a"&&J.indexOf("atitle")!==0)yt=0,Tt=zt;else{var Rt=O.attr("text-anchor");yt=yt-ut*(Rt==="middle"?.5:Rt==="end"?1:0),Tt=Tt+zt-pt/2}W.attr({x:yt,y:Tt}),$&&$.call(O,K),at(K)})})):st(),O};var i=/(<|&lt;|&#60;)/g,r=/(>|&gt;|&#62;)/g;function n(O){return O.replace(i,"\\lt ").replace(r,"\\gt ")}var d=[["$","$"],["\\(","\\)"]];function s(O,G,$){var tt=parseInt((MathJax.version||"").split(".")[0]);if(tt!==2&&tt!==3){l.warn("No MathJax version:",MathJax.version);return}var Z,X,J,st,at=function(){return X=l.extendDeepAll({},MathJax.Hub.config),J=MathJax.Hub.processSectionDelay,MathJax.Hub.processSectionDelay!==void 0&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:d},displayAlign:"left"})},lt=function(){X=l.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=d},F=function(){if(Z=MathJax.Hub.config.menuSettings.renderer,Z!=="SVG")return MathJax.Hub.setRenderer("SVG")},H=function(){Z=MathJax.config.startup.output,Z!=="svg"&&(MathJax.config.startup.output="svg")},et=function(){var ot="math-output-"+l.randstr({},64);st=f.select("body").append("div").attr({id:ot}).style({visibility:"hidden",position:"absolute","font-size":G.fontSize+"px"}).text(n(O));var ct=st.node();return tt===2?MathJax.Hub.Typeset(ct):MathJax.typeset([ct])},q=function(){var ot=st.select(tt===2?".MathJax_SVG":".MathJax"),ct=!ot.empty()&&st.select("svg").node();if(!ct)l.log("There was an error in the tex syntax.",O),$();else{var bt=ct.getBoundingClientRect(),ut;tt===2?ut=f.select("body").select("#MathJax_SVG_glyphs"):ut=ot.select("defs"),$(ot,ut,bt)}st.remove()},W=function(){if(Z!=="SVG")return MathJax.Hub.setRenderer(Z)},K=function(){Z!=="svg"&&(MathJax.config.startup.output=Z)},nt=function(){return J!==void 0&&(MathJax.Hub.processSectionDelay=J),MathJax.Hub.Config(X)},it=function(){MathJax.config=X};tt===2?MathJax.Hub.Queue(at,F,et,q,W,nt):tt===3&&(lt(),H(),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){et(),q(),K(),it()}))}var o={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},y={sub:"0.3em",sup:"-0.6em"},g={sub:"-0.21em",sup:"0.42em"},b="\u200B",v=["http:","https:","mailto:","",void 0,":"],_=V.NEWLINES=/(\r\n?|\n)/g,u=/(<[^<>]*>)/,T=/<(\/?)([^ >]*)(\s+(.*))?>/i,c=/<br(\s+.*)?>/i;V.BR_TAG_ALL=/<br(\s+.*)?>/gi;var A=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,k=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,p=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,w=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function h(O,G){if(!O)return null;var $=O.match(G),tt=$&&($[3]||$[4]);return tt&&L(tt)}var D=/(^|;)\s*color:/;V.plainText=function(O,G){G=G||{};for(var $=G.len!==void 0&&G.len!==-1?G.len:1/0,tt=G.allowedTags!==void 0?G.allowedTags:["br"],Z="...",X=Z.length,J=O.split(u),st=[],at="",lt=0,F=0;F<J.length;F++){var H=J[F],et=H.match(T),q=et&&et[2].toLowerCase();if(q)tt.indexOf(q)!==-1&&(st.push(H),at=q);else{var W=H.length;if(lt+W<$)st.push(H),lt+=W;else if(lt<$){var K=$-lt;at&&(at!=="br"||K<=X||W<=X)&&st.pop(),$>X?st.push(H.substr(0,K-X)+Z):st.push(H.substr(0,K));break}at=""}}return st.join("")};var S={mu:"\u03BC",amp:"&",lt:"<",gt:">",nbsp:"\xA0",times:"\xD7",plusmn:"\xB1",deg:"\xB0"},M=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function L(O){return O.replace(M,function(G,$){var tt;return $.charAt(0)==="#"?tt=R($.charAt(1)==="x"?parseInt($.substr(2),16):parseInt($.substr(1),10)):tt=S[$],tt||G})}V.convertEntities=L;function R(O){if(!(O>1114111)){var G=String.fromCodePoint;if(G)return G(O);var $=String.fromCharCode;return O<=65535?$(O):$((O>>10)+55232,O%1024+56320)}}function z(O,G){G=G.replace(_," ");var $=!1,tt=[],Z,X=-1;function J(){X++;var pt=document.createElementNS(x.svg,"tspan");f.select(pt).attr({class:"line",dy:X*t+"em"}),O.appendChild(pt),Z=pt;var yt=tt;if(tt=[{node:pt}],yt.length>1)for(var Tt=1;Tt<yt.length;Tt++)st(yt[Tt])}function st(pt){var yt=pt.type,Tt={},kt;if(yt==="a"){kt="a";var zt=pt.target,Rt=pt.href,Gt=pt.popup;Rt&&(Tt={"xlink:xlink:show":zt==="_blank"||zt.charAt(0)!=="_"?"new":"replace",target:zt,"xlink:xlink:href":Rt},Gt&&(Tt.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+Gt+'");return false;'))}else kt="tspan";pt.style&&(Tt.style=pt.style);var wt=document.createElementNS(x.svg,kt);if(yt==="sup"||yt==="sub"){at(Z,b),Z.appendChild(wt);var It=document.createElementNS(x.svg,"tspan");at(It,b),f.select(It).attr("dy",g[yt]),Tt.dy=y[yt],Z.appendChild(wt),Z.appendChild(It)}else Z.appendChild(wt);f.select(wt).attr(Tt),Z=pt.node=wt,tt.push(pt)}function at(pt,yt){pt.appendChild(document.createTextNode(yt))}function lt(pt){if(tt.length===1){l.log("Ignoring unexpected end tag </"+pt+">.",G);return}var yt=tt.pop();pt!==yt.type&&l.log("Start tag <"+yt.type+"> doesnt match end tag <"+pt+">. Pretending it did match.",G),Z=tt[tt.length-1].node}var F=c.test(G);F?J():(Z=O,tt=[{node:O}]);for(var H=G.split(u),et=0;et<H.length;et++){var q=H[et],W=q.match(T),K=W&&W[2].toLowerCase(),nt=o[K];if(K==="br")J();else if(nt===void 0)at(Z,L(q));else if(W[1])lt(K);else{var it=W[4],ot={type:K},ct=h(it,A);if(ct?(ct=ct.replace(D,"$1 fill:"),nt&&(ct+=";"+nt)):nt&&(ct=nt),ct&&(ot.style=ct),K==="a"){$=!0;var bt=h(it,k);if(bt){var ut=P(bt);ut&&(ot.href=ut,ot.target=h(it,p)||"_blank",ot.popup=h(it,w))}}st(ot)}}return $}function P(O){var G=encodeURI(decodeURI(O)),$=document.createElement("a"),tt=document.createElement("a");$.href=O,tt.href=G;var Z=$.protocol,X=tt.protocol;return v.indexOf(Z)!==-1&&v.indexOf(X)!==-1?G:""}V.sanitizeHTML=function(G){G=G.replace(_," ");for(var $=document.createElement("p"),tt=$,Z=[],X=G.split(u),J=0;J<X.length;J++){var st=X[J],at=st.match(T),lt=at&&at[2].toLowerCase();if(lt in o)if(at[1])Z.length&&(tt=Z.pop());else{var F=at[4],H=h(F,A),et=H?{style:H}:{};if(lt==="a"){var q=h(F,k);if(q){var W=P(q);if(W){et.href=W;var K=h(F,p);K&&(et.target=K)}}}var nt=document.createElement(lt);tt.appendChild(nt),f.select(nt).attr(et),tt=nt,Z.push(nt)}else tt.appendChild(document.createTextNode(L(st)))}var it="innerHTML";return $[it]},V.lineCount=function(G){return G.selectAll("tspan.line").size()||1},V.positionText=function(G,$,tt){return G.each(function(){var Z=f.select(this);function X(at,lt){return lt===void 0?(lt=Z.attr(at),lt===null&&(Z.attr(at,0),lt=0)):Z.attr(at,lt),lt}var J=X("x",$),st=X("y",tt);this.nodeName==="text"&&Z.selectAll("tspan.line").attr({x:J,y:st})})};function I(O,G,$){var tt=$.horizontalAlign,Z=$.verticalAlign||"top",X=O.node().getBoundingClientRect(),J=G.node().getBoundingClientRect(),st,at,lt;return Z==="bottom"?at=function(){return X.bottom-st.height}:Z==="middle"?at=function(){return X.top+(X.height-st.height)/2}:at=function(){return X.top},tt==="right"?lt=function(){return X.right-st.width}:tt==="center"?lt=function(){return X.left+(X.width-st.width)/2}:lt=function(){return X.left},function(){st=this.node().getBoundingClientRect();var F=lt()-J.left,H=at()-J.top,et=$.gd||{};if($.gd){et._fullLayout._calcInverseTransform(et);var q=l.apply3DTransform(et._fullLayout._invTransform)(F,H);F=q[0],H=q[1]}return this.style({top:H+"px",left:F+"px","z-index":1e3}),this}}var U="1px ";V.makeTextShadow=function(O){var G=U,$=U,tt=U;return G+$+tt+O+", -"+G+"-"+$+tt+O+", "+G+"-"+$+tt+O+", -"+G+$+tt+O},V.makeEditable=function(O,G){var $=G.gd,tt=G.delegate,Z=f.dispatch("edit","input","cancel"),X=tt||O;if(O.style({"pointer-events":tt?"none":"all"}),O.size()!==1)throw new Error("boo");function J(){at(),O.style({opacity:0});var lt=X.attr("class"),F;lt?F="."+lt.split(" ")[0]+"-math-group":F="[class*=-math-group]",F&&f.select(O.node().parentNode).select(F).style({opacity:0})}function st(lt){var F=lt.node(),H=document.createRange();H.selectNodeContents(F);var et=window.getSelection();et.removeAllRanges(),et.addRange(H),F.focus()}function at(){var lt=f.select($),F=lt.select(".svg-container"),H=F.append("div"),et=O.node().style,q=parseFloat(et.fontSize||12),W=G.text;W===void 0&&(W=O.attr("data-unformatted")),H.classed("plugin-editable editable",!0).style({position:"absolute","font-family":et.fontFamily||"Arial","font-size":q,color:G.fill||et.fill||"black",opacity:1,"background-color":G.background||"transparent",outline:"#ffffff33 1px solid",margin:[-q/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(W).call(I(O,F,G)).on("blur",function(){$._editing=!1,O.text(this.textContent).style({opacity:1});var K=f.select(this).attr("class"),nt;K?nt="."+K.split(" ")[0]+"-math-group":nt="[class*=-math-group]",nt&&f.select(O.node().parentNode).select(nt).style({opacity:0});var it=this.textContent;f.select(this).transition().duration(0).remove(),f.select(document).on("mouseup",null),Z.edit.call(O,it)}).on("focus",function(){var K=this;$._editing=!0,f.select(document).on("mouseup",function(){if(f.event.target===K)return!1;document.activeElement===H.node()&&H.node().blur()})}).on("keyup",function(){f.event.which===27?($._editing=!1,O.style({opacity:1}),f.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),Z.cancel.call(O,this.textContent)):(Z.input.call(O,this.textContent),f.select(this).call(I(O,F,G)))}).on("keydown",function(){f.event.which===13&&this.blur()}).call(st)}return G.immediate?J():X.on("click",J),f.rebind(O,Z,"on")}},{"../constants/alignment":483,"../constants/xmlns_namespaces":492,"../lib":515,"@plotly/d3":58}],542:[function(e,B,V){var f={};V.throttle=function(x,t,a){var i=f[x],r=Date.now();if(!i){for(var n in f)f[n].ts<r-6e4&&delete f[n];i=f[x]={ts:0,timer:null}}l(i);function d(){a(),i.ts=Date.now(),i.onDone&&(i.onDone(),i.onDone=null)}if(r>i.ts+t){d();return}i.timer=setTimeout(function(){d(),i.timer=null},t)},V.done=function(m){var x=f[m];return!x||!x.timer?Promise.resolve():new Promise(function(t){var a=x.onDone;x.onDone=function(){a&&a(),t(),x.onDone=null}})},V.clear=function(m){if(m)l(f[m]),delete f[m];else for(var x in f)V.clear(x)};function l(m){m&&m.timer!==null&&(clearTimeout(m.timer),m.timer=null)}},{}],543:[function(e,B,V){var f=e("fast-isnumeric");B.exports=function(m,x){if(m>0)return Math.log(m)/Math.LN10;var t=Math.log(Math.min(x[0],x[1]))/Math.LN10;return f(t)||(t=Math.log(Math.max(x[0],x[1]))/Math.LN10-6),t}},{"fast-isnumeric":190}],544:[function(e,B,V){var f=B.exports={},l=e("../plots/geo/constants").locationmodeToLayer,m=e("topojson-client").feature;f.getTopojsonName=function(x){return[x.scope.replace(/ /g,"-"),"_",x.resolution.toString(),"m"].join("")},f.getTopojsonPath=function(x,t){return x+t+".json"},f.getTopojsonFeatures=function(x,t){var a=l[x.locationmode],i=t.objects[a];return m(t,i).features}},{"../plots/geo/constants":596,"topojson-client":316}],545:[function(e,B,V){B.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],546:[function(e,B,V){B.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},{}],547:[function(e,B,V){var f=e("../registry");B.exports=function(m){for(var x=f.layoutArrayContainers,t=f.layoutArrayRegexes,a=m.split("[")[0],i,r,n=0;n<t.length;n++)if(r=m.match(t[n]),r&&r.index===0){i=r[0];break}if(i||(i=x[x.indexOf(a)]),!i)return!1;var d=m.substr(i.length);return d?(r=d.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/),r?{array:i,index:Number(r[1]),property:r[3]||""}:!1):{array:i,index:"",property:""}}},{"../registry":647}],548:[function(e,B,V){var f=e("../lib"),l=f.extendFlat,m=f.isPlainObject,x={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},t={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},a=x.flags.slice().concat(["fullReplot"]),i=t.flags.slice().concat("layoutReplot");B.exports={traces:x,layout:t,traceFlags:function(){return r(a)},layoutFlags:function(){return r(i)},update:function(s,o){var y=o.editType;if(y&&y!=="none")for(var g=y.split("+"),b=0;b<g.length;b++)s[g[b]]=!0},overrideAll:n};function r(s){for(var o={},y=0;y<s.length;y++)o[s[y]]=!1;return o}function n(s,o,y){var g=l({},s);for(var b in g){var v=g[b];m(v)&&(g[b]=d(v,o,y,b))}return y==="from-root"&&(g.editType=o),g}function d(s,o,y,g){if(s.valType){var b=l({},s);if(b.editType=o,Array.isArray(s.items)){b.items=new Array(s.items.length);for(var v=0;v<s.items.length;v++)b.items[v]=d(s.items[v],o)}return b}else return n(s,o,g.charAt(0)==="_"?"nested":"from-root")}},{"../lib":515}],549:[function(e,B,V){var f=e("fast-isnumeric"),l=e("gl-mat4/fromQuat"),m=e("../registry"),x=e("../lib"),t=e("../plots/plots"),a=e("../plots/cartesian/axis_ids"),i=e("../components/color"),r=a.cleanId,n=a.getFromTrace,d=m.traceIs;V.clearPromiseQueue=function(c){Array.isArray(c._promises)&&c._promises.length>0&&x.log("Clearing previous rejected promises from queue."),c._promises=[]},V.cleanLayout=function(c){var A,k;c||(c={}),c.xaxis1&&(c.xaxis||(c.xaxis=c.xaxis1),delete c.xaxis1),c.yaxis1&&(c.yaxis||(c.yaxis=c.yaxis1),delete c.yaxis1),c.scene1&&(c.scene||(c.scene=c.scene1),delete c.scene1);var p=(t.subplotsRegistry.cartesian||{}).attrRegex,w=(t.subplotsRegistry.polar||{}).attrRegex,h=(t.subplotsRegistry.ternary||{}).attrRegex,D=(t.subplotsRegistry.gl3d||{}).attrRegex,S=Object.keys(c);for(A=0;A<S.length;A++){var M=S[A];if(p&&p.test(M)){var L=c[M];L.anchor&&L.anchor!=="free"&&(L.anchor=r(L.anchor)),L.overlaying&&(L.overlaying=r(L.overlaying)),L.type||(L.isdate?L.type="date":L.islog?L.type="log":L.isdate===!1&&L.islog===!1&&(L.type="linear")),(L.autorange==="withzero"||L.autorange==="tozero")&&(L.autorange=!0,L.rangemode="tozero"),delete L.islog,delete L.isdate,delete L.categories,v(L,"domain")&&delete L.domain,L.autotick!==void 0&&(L.tickmode===void 0&&(L.tickmode=L.autotick?"auto":"linear"),delete L.autotick),o(L)}else if(w&&w.test(M)){var R=c[M];o(R.radialaxis)}else if(h&&h.test(M)){var z=c[M];o(z.aaxis),o(z.baxis),o(z.caxis)}else if(D&&D.test(M)){var P=c[M],I=P.cameraposition;if(Array.isArray(I)&&I[0].length===4){var U=I[0],O=I[1],G=I[2],$=l([],U),tt=[];for(k=0;k<3;++k)tt[k]=O[k]+G*$[2+4*k];P.camera={eye:{x:tt[0],y:tt[1],z:tt[2]},center:{x:O[0],y:O[1],z:O[2]},up:{x:0,y:0,z:1}},delete P.cameraposition}o(P.xaxis),o(P.yaxis),o(P.zaxis)}}var Z=Array.isArray(c.annotations)?c.annotations.length:0;for(A=0;A<Z;A++){var X=c.annotations[A];!x.isPlainObject(X)||(X.ref&&(X.ref==="paper"?(X.xref="paper",X.yref="paper"):X.ref==="data"&&(X.xref="x",X.yref="y"),delete X.ref),s(X,"xref"),s(X,"yref"))}var J=Array.isArray(c.shapes)?c.shapes.length:0;for(A=0;A<J;A++){var st=c.shapes[A];!x.isPlainObject(st)||(s(st,"xref"),s(st,"yref"))}var at=Array.isArray(c.images)?c.images.length:0;for(A=0;A<at;A++){var lt=c.images[A];!x.isPlainObject(lt)||(s(lt,"xref"),s(lt,"yref"))}var F=c.legend;return F&&(F.x>3?(F.x=1.02,F.xanchor="left"):F.x<-2&&(F.x=-.02,F.xanchor="right"),F.y>3?(F.y=1.02,F.yanchor="bottom"):F.y<-2&&(F.y=-.02,F.yanchor="top")),o(c),c.dragmode==="rotate"&&(c.dragmode="orbit"),i.clean(c),c.template&&c.template.layout&&V.cleanLayout(c.template.layout),c};function s(c,A){var k=c[A],p=A.charAt(0);k&&k!=="paper"&&(c[A]=r(k,p,!0))}function o(c){c&&((typeof c.title=="string"||typeof c.title=="number")&&(c.title={text:c.title}),A("titlefont","font"),A("titleposition","position"),A("titleside","side"),A("titleoffset","offset"));function A(k,p){var w=c[k],h=c.title&&c.title[p];w&&!h&&(c.title||(c.title={}),c.title[p]=c[k],delete c[k])}}V.cleanData=function(c){for(var A=0;A<c.length;A++){var k=c[A],p;if(k.type==="histogramy"&&"xbins"in k&&!("ybins"in k)&&(k.ybins=k.xbins,delete k.xbins),k.error_y&&"opacity"in k.error_y){var w=i.defaults,h=k.error_y.color||(d(k,"bar")?i.defaultLine:w[A%w.length]);k.error_y.color=i.addOpacity(i.rgb(h),i.opacity(h)*k.error_y.opacity),delete k.error_y.opacity}if("bardir"in k&&(k.bardir==="h"&&(d(k,"bar")||k.type.substr(0,9)==="histogram")&&(k.orientation="h",V.swapXYData(k)),delete k.bardir),k.type==="histogramy"&&V.swapXYData(k),(k.type==="histogramx"||k.type==="histogramy")&&(k.type="histogram"),"scl"in k&&!("colorscale"in k)&&(k.colorscale=k.scl,delete k.scl),"reversescl"in k&&!("reversescale"in k)&&(k.reversescale=k.reversescl,delete k.reversescl),k.xaxis&&(k.xaxis=r(k.xaxis,"x")),k.yaxis&&(k.yaxis=r(k.yaxis,"y")),d(k,"gl3d")&&k.scene&&(k.scene=t.subplotsRegistry.gl3d.cleanId(k.scene)),!d(k,"pie-like")&&!d(k,"bar-like"))if(Array.isArray(k.textposition))for(p=0;p<k.textposition.length;p++)k.textposition[p]=b(k.textposition[p]);else k.textposition&&(k.textposition=b(k.textposition));var D=m.getModule(k);if(D&&D.colorbar){var S=D.colorbar.container,M=S?k[S]:k;M&&M.colorscale&&(M.colorscale==="YIGnBu"&&(M.colorscale="YlGnBu"),M.colorscale==="YIOrRd"&&(M.colorscale="YlOrRd"))}if(k.type==="surface"&&x.isPlainObject(k.contours)){var L=["x","y","z"];for(p=0;p<L.length;p++){var R=k.contours[L[p]];!x.isPlainObject(R)||(R.highlightColor&&(R.highlightcolor=R.highlightColor,delete R.highlightColor),R.highlightWidth&&(R.highlightwidth=R.highlightWidth,delete R.highlightWidth))}}if(k.type==="candlestick"||k.type==="ohlc"){var z=(k.increasing||{}).showlegend!==!1,P=(k.decreasing||{}).showlegend!==!1,I=y(k.increasing),U=y(k.decreasing);if(I!==!1&&U!==!1){var O=g(I,U,z,P);O&&(k.name=O)}else(I||U)&&!k.name&&(k.name=I||U)}if(Array.isArray(k.transforms)){var G=k.transforms;for(p=0;p<G.length;p++){var $=G[p];if(!!x.isPlainObject($))switch($.type){case"filter":$.filtersrc&&($.target=$.filtersrc,delete $.filtersrc),$.calendar&&($.valuecalendar||($.valuecalendar=$.calendar),delete $.calendar);break;case"groupby":if($.styles=$.styles||$.style,$.styles&&!Array.isArray($.styles)){var tt=$.styles,Z=Object.keys(tt);$.styles=[];for(var X=0;X<Z.length;X++)$.styles.push({target:Z[X],value:tt[Z[X]]})}break}}}v(k,"line")&&delete k.line,"marker"in k&&(v(k.marker,"line")&&delete k.marker.line,v(k,"marker")&&delete k.marker),i.clean(k),k.autobinx&&(delete k.autobinx,delete k.xbins),k.autobiny&&(delete k.autobiny,delete k.ybins),o(k),k.colorbar&&o(k.colorbar),k.marker&&k.marker.colorbar&&o(k.marker.colorbar),k.line&&k.line.colorbar&&o(k.line.colorbar),k.aaxis&&o(k.aaxis),k.baxis&&o(k.baxis)}};function y(c){if(!x.isPlainObject(c))return!1;var A=c.name;return delete c.name,delete c.showlegend,(typeof A=="string"||typeof A=="number")&&String(A)}function g(c,A,k,p){if(k&&!p)return c;if(p&&!k||!c.trim())return A;if(!A.trim())return c;var w=Math.min(c.length,A.length),h;for(h=0;h<w&&c.charAt(h)===A.charAt(h);h++);var D=c.substr(0,h);return D.trim()}function b(c){var A="middle",k="center";return typeof c=="string"&&(c.indexOf("top")!==-1?A="top":c.indexOf("bottom")!==-1&&(A="bottom"),c.indexOf("left")!==-1?k="left":c.indexOf("right")!==-1&&(k="right")),A+" "+k}function v(c,A){return A in c&&typeof c[A]=="object"&&Object.keys(c[A]).length===0}V.swapXYData=function(c){var A;if(x.swapAttrs(c,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(c.z)&&Array.isArray(c.z[0])&&(c.transpose?delete c.transpose:c.transpose=!0),c.error_x&&c.error_y){var k=c.error_y,p="copy_ystyle"in k?k.copy_ystyle:!(k.color||k.thickness||k.width);x.swapAttrs(c,["error_?.copy_ystyle"]),p&&x.swapAttrs(c,["error_?.color","error_?.thickness","error_?.width"])}if(typeof c.hoverinfo=="string"){var w=c.hoverinfo.split("+");for(A=0;A<w.length;A++)w[A]==="x"?w[A]="y":w[A]==="y"&&(w[A]="x");c.hoverinfo=w.join("+")}},V.coerceTraceIndices=function(c,A){if(f(A))return[A];if(!Array.isArray(A)||!A.length)return c.data.map(function(w,h){return h});if(Array.isArray(A)){for(var k=[],p=0;p<A.length;p++)x.isIndex(A[p],c.data.length)?k.push(A[p]):x.warn("trace index (",A[p],") is not a number or is out of bounds");return k}return A},V.manageArrayContainers=function(c,A,k){var p=c.obj,w=c.parts,h=w.length,D=w[h-1],S=f(D);if(S&&A===null){var M=w.slice(0,h-1).join("."),L=x.nestedProperty(p,M).get();L.splice(D,1)}else S&&c.get()===void 0&&c.get()===void 0&&(k[c.astr]=null),c.set(A)};var _=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function u(c){var A=c.search(_);if(A>0)return c.substr(0,A)}V.hasParent=function(c,A){for(var k=u(A);k;){if(k in c)return!0;k=u(k)}return!1};var T=["x","y","z"];V.clearAxisTypes=function(c,A,k){for(var p=0;p<A.length;p++)for(var w=c._fullData[p],h=0;h<3;h++){var D=n(c,w,T[h]);if(D&&D.type!=="log"){var S=D._name,M=D._id.substr(1);if(M.substr(0,5)==="scene"){if(k[M]!==void 0)continue;S=M+"."+S}var L=S+".type";k[S]===void 0&&k[L]===void 0&&x.nestedProperty(c.layout,L).set(null)}}}},{"../components/color":367,"../lib":515,"../plots/cartesian/axis_ids":570,"../plots/plots":628,"../registry":647,"fast-isnumeric":190,"gl-mat4/fromQuat":200}],550:[function(e,B,V){var f=e("./plot_api");V._doPlot=f._doPlot,V.newPlot=f.newPlot,V.restyle=f.restyle,V.relayout=f.relayout,V.redraw=f.redraw,V.update=f.update,V._guiRestyle=f._guiRestyle,V._guiRelayout=f._guiRelayout,V._guiUpdate=f._guiUpdate,V._storeDirectGUIEdit=f._storeDirectGUIEdit,V.react=f.react,V.extendTraces=f.extendTraces,V.prependTraces=f.prependTraces,V.addTraces=f.addTraces,V.deleteTraces=f.deleteTraces,V.moveTraces=f.moveTraces,V.purge=f.purge,V.addFrames=f.addFrames,V.deleteFrames=f.deleteFrames,V.animate=f.animate,V.setPlotConfig=f.setPlotConfig,V.toImage=e("./to_image"),V.validate=e("./validate"),V.downloadImage=e("../snapshot/download");var l=e("./template_api");V.makeTemplate=l.makeTemplate,V.validateTemplate=l.validateTemplate},{"../snapshot/download":649,"./plot_api":552,"./template_api":557,"./to_image":558,"./validate":559}],551:[function(e,B,V){var f=e("../lib/is_plain_object"),l=e("../lib/noop"),m=e("../lib/loggers"),x=e("../lib/search").sorterAsc,t=e("../registry");V.containerArrayMatch=e("./container_array_match");var a=V.isAddVal=function(n){return n==="add"||f(n)},i=V.isRemoveVal=function(n){return n===null||n==="remove"};V.applyContainerArrayChanges=function(n,d,s,o,y){var g=d.astr,b=t.getComponentMethod(g,"supplyLayoutDefaults"),v=t.getComponentMethod(g,"draw"),_=t.getComponentMethod(g,"drawOne"),u=o.replot||o.recalc||b===l||v===l,T=n.layout,c=n._fullLayout;if(s[""]){Object.keys(s).length>1&&m.warn("Full array edits are incompatible with other edits",g);var A=s[""][""];if(i(A))d.set(null);else if(Array.isArray(A))d.set(A);else return m.warn("Unrecognized full array edit value",g,A),!0;return u?!1:(b(T,c),v(n),!0)}var k=Object.keys(s).map(Number).sort(x),p=d.get(),w=p||[],h=y(c,g).get(),D=[],S=-1,M=w.length,L,R,z,P,I,U,O,G;for(L=0;L<k.length;L++){if(z=k[L],P=s[z],I=Object.keys(P),U=P[""],O=a(U),z<0||z>w.length-(O?0:1)){m.warn("index out of range",g,z);continue}if(U!==void 0)I.length>1&&m.warn("Insertion & removal are incompatible with edits to the same index.",g,z),i(U)?D.push(z):O?(U==="add"&&(U={}),w.splice(z,0,U),h&&h.splice(z,0,{})):m.warn("Unrecognized full object edit value",g,z,U),S===-1&&(S=z);else for(R=0;R<I.length;R++)G=g+"["+z+"].",y(w[z],I[R],G).set(P[I[R]])}for(L=D.length-1;L>=0;L--)w.splice(D[L],1),h&&h.splice(D[L],1);if(w.length?p||d.set(w):d.set(null),u)return!1;if(b(T,c),_!==l){var $;if(S===-1)$=k;else{for(M=Math.max(w.length,M),$=[],L=0;L<k.length&&(z=k[L],!(z>=S));L++)$.push(z);for(L=S;L<M;L++)$.push(L)}for(L=0;L<$.length;L++)_(n,$[L])}else v(n);return!0}},{"../lib/is_plain_object":516,"../lib/loggers":519,"../lib/noop":524,"../lib/search":535,"../registry":647,"./container_array_match":547}],552:[function(e,B,V){var f=e("@plotly/d3"),l=e("fast-isnumeric"),m=e("has-hover"),x=e("../lib"),t=x.nestedProperty,a=e("../lib/events"),i=e("../lib/queue"),r=e("../registry"),n=e("./plot_schema"),d=e("../plots/plots"),s=e("../plots/cartesian/axes"),o=e("../components/drawing"),y=e("../components/color"),g=e("../plots/cartesian/graph_interact").initInteractions,b=e("../constants/xmlns_namespaces"),v=e("../components/selections").clearOutline,_=e("./plot_config").dfltConfig,u=e("./manage_arrays"),T=e("./helpers"),c=e("./subroutines"),A=e("./edit_types"),k=e("../plots/cartesian/constants").AX_NAME_PATTERN,p=0,w=5;function h(St,Vt,Zt,qt){var Te;if(St=x.getGraphDiv(St),a.init(St),x.isPlainObject(Vt)){var me=Vt;Vt=me.data,Zt=me.layout,qt=me.config,Te=me.frames}var Ne=a.triggerHandler(St,"plotly_beforeplot",[Vt,Zt,qt]);if(Ne===!1)return Promise.reject();!Vt&&!Zt&&!x.isPlotDiv(St)&&x.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",St);function Ke(){if(Te)return V.addFrames(St,Te)}R(St,qt),Zt||(Zt={}),f.select(St).classed("js-plotly-plot",!0),o.makeTester(),Array.isArray(St._promises)||(St._promises=[]);var He=(St.data||[]).length===0&&Array.isArray(Vt);Array.isArray(Vt)&&(T.cleanData(Vt),He?St.data=Vt:St.data.push.apply(St.data,Vt),St.empty=!1),(!St.layout||He)&&(St.layout=T.cleanLayout(Zt)),d.supplyDefaults(St);var Xe=St._fullLayout,er=Xe._has("cartesian");Xe._replotting=!0,(He||Xe._shouldCreateBgLayer)&&(Xt(St),Xe._shouldCreateBgLayer&&delete Xe._shouldCreateBgLayer),o.initGradients(St),o.initPatterns(St),He&&s.saveShowSpikeInitial(St);var We=!St.calcdata||St.calcdata.length!==(St._fullData||[]).length;We&&d.doCalcdata(St);for(var hr=0;hr<St.calcdata.length;hr++)St.calcdata[hr][0].trace=St._fullData[hr];St._context.responsive?St._responsiveChartHandler||(St._responsiveChartHandler=function(){x.isHidden(St)||d.resize(St)},window.addEventListener("resize",St._responsiveChartHandler)):x.clearResponsive(St);var Wr=x.extendFlat({},Xe._size),dn=0;function Qr(){for(var ne=Xe._basePlotModules,_e=0;_e<ne.length;_e++)ne[_e].drawFramework&&ne[_e].drawFramework(St);!Xe._glcanvas&&Xe._has("gl")&&(Xe._glcanvas=Xe._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(se){return se.key}),Xe._glcanvas.enter().append("canvas").attr("class",function(se){return"gl-canvas gl-canvas-"+se.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var Pe=St._context.plotGlPixelRatio;if(Xe._glcanvas){Xe._glcanvas.attr("width",Xe.width*Pe).attr("height",Xe.height*Pe).style("width",Xe.width+"px").style("height",Xe.height+"px");var Et=Xe._glcanvas.data()[0].regl;if(Et&&(Math.floor(Xe.width*Pe)!==Et._gl.drawingBufferWidth||Math.floor(Xe.height*Pe)!==Et._gl.drawingBufferHeight)){var Mt="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(dn)x.error(Mt);else return x.log(Mt+" Clearing graph and plotting again."),d.cleanPlot([],{},St._fullData,Xe),d.supplyDefaults(St),Xe=St._fullLayout,d.doCalcdata(St),dn++,Qr()}}return Xe.modebar.orientation==="h"?Xe._modebardiv.style("height",null).style("width","100%"):Xe._modebardiv.style("width",null).style("height",Xe.height+"px"),d.previousPromises(St)}function le(){if(d.clearAutoMarginIds(St),c.drawMarginPushers(St),s.allowAutoMargin(St),Xe._has("pie"))for(var ne=St._fullData,_e=0;_e<ne.length;_e++){var Pe=ne[_e];Pe.type==="pie"&&Pe.automargin&&d.allowAutoMargin(St,"pie."+Pe.uid+".automargin")}return d.doAutoMargin(St),d.previousPromises(St)}function Qe(){if(!!d.didMarginChange(Wr,Xe._size))return x.syncOrAsync([le,c.layoutStyles],St)}function Ze(){if(!We){Ve();return}return x.syncOrAsync([r.getComponentMethod("shapes","calcAutorange"),r.getComponentMethod("annotations","calcAutorange"),Ve],St)}function Ve(){St._transitioning||(c.doAutoRangeAndConstraints(St),He&&s.saveRangeInitial(St),r.getComponentMethod("rangeslider","calcAutorange")(St))}function _r(){return s.draw(St,He?"":"redraw")}var oe=[d.previousPromises,Ke,Qr,le,Qe];er&&oe.push(Ze),oe.push(c.layoutStyles),er&&oe.push(_r,function(_e){_e._fullLayout._insideTickLabelsAutorange&&ot(_e,_e._fullLayout._insideTickLabelsAutorange).then(function(){_e._fullLayout._insideTickLabelsAutorange=void 0})}),oe.push(c.drawData,c.finalDraw,g,d.addLinks,d.rehover,d.redrag,d.reselect,d.doAutoMargin,Ht,d.previousPromises);function Ht(ne){ne._fullLayout._insideTickLabelsAutorange&&He&&s.saveRangeInitial(ne,!0)}var te=x.syncOrAsync(oe,St);return(!te||!te.then)&&(te=Promise.resolve()),te.then(function(){return D(St),St})}function D(St){var Vt=St._fullLayout;Vt._redrawFromAutoMarginCount?Vt._redrawFromAutoMarginCount--:St.emit("plotly_afterplot")}function S(St){return x.extendFlat(_,St)}function M(St,Vt){try{St._fullLayout._paper.style("background",Vt)}catch(Zt){x.error(Zt)}}function L(St,Vt){var Zt=y.combine(Vt,"white");M(St,Zt)}function R(St,Vt){if(!St._context){St._context=x.extendDeep({},_);var Zt=f.select("base");St._context._baseUrl=Zt.size()&&Zt.attr("href")?window.location.href.split("#")[0]:""}var qt=St._context,Te,me,Ne;if(Vt){for(me=Object.keys(Vt),Te=0;Te<me.length;Te++)Ne=me[Te],!(Ne==="editable"||Ne==="edits")&&Ne in qt&&(Ne==="setBackground"&&Vt[Ne]==="opaque"?qt[Ne]=L:qt[Ne]=Vt[Ne]);Vt.plot3dPixelRatio&&!qt.plotGlPixelRatio&&(qt.plotGlPixelRatio=qt.plot3dPixelRatio);var Ke=Vt.editable;if(Ke!==void 0)for(qt.editable=Ke,me=Object.keys(qt.edits),Te=0;Te<me.length;Te++)qt.edits[me[Te]]=Ke;if(Vt.edits)for(me=Object.keys(Vt.edits),Te=0;Te<me.length;Te++)Ne=me[Te],Ne in qt.edits&&(qt.edits[Ne]=Vt.edits[Ne]);qt._exportedPlot=Vt._exportedPlot}qt.staticPlot&&(qt.editable=!1,qt.edits={},qt.autosizable=!1,qt.scrollZoom=!1,qt.doubleClick=!1,qt.showTips=!1,qt.showLink=!1,qt.displayModeBar=!1),qt.displayModeBar==="hover"&&!m&&(qt.displayModeBar=!0),(qt.setBackground==="transparent"||typeof qt.setBackground!="function")&&(qt.setBackground=M),qt._hasZeroHeight=qt._hasZeroHeight||St.clientHeight===0,qt._hasZeroWidth=qt._hasZeroWidth||St.clientWidth===0;var He=qt.scrollZoom,Xe=qt._scrollZoom={};if(He===!0)Xe.cartesian=1,Xe.gl3d=1,Xe.geo=1,Xe.mapbox=1;else if(typeof He=="string"){var er=He.split("+");for(Te=0;Te<er.length;Te++)Xe[er[Te]]=1}else He!==!1&&(Xe.gl3d=1,Xe.geo=1,Xe.mapbox=1)}function z(St){if(St=x.getGraphDiv(St),!x.isPlotDiv(St))throw new Error("This element is not a Plotly plot: "+St);return T.cleanData(St.data),T.cleanLayout(St.layout),St.calcdata=void 0,V._doPlot(St).then(function(){return St.emit("plotly_redraw"),St})}function P(St,Vt,Zt,qt){return St=x.getGraphDiv(St),d.cleanPlot([],{},St._fullData||[],St._fullLayout||{}),d.purge(St),V._doPlot(St,Vt,Zt,qt)}function I(St,Vt){var Zt=Vt+1,qt=[],Te,me;for(Te=0;Te<St.length;Te++)me=St[Te],me<0?qt.push(Zt+me):qt.push(me);return qt}function U(St,Vt,Zt){var qt,Te;for(qt=0;qt<Vt.length;qt++){if(Te=Vt[qt],Te!==parseInt(Te,10))throw new Error("all values in "+Zt+" must be integers");if(Te>=St.data.length||Te<-St.data.length)throw new Error(Zt+" must be valid indices for gd.data.");if(Vt.indexOf(Te,qt+1)>-1||Te>=0&&Vt.indexOf(-St.data.length+Te)>-1||Te<0&&Vt.indexOf(St.data.length+Te)>-1)throw new Error("each index in "+Zt+" must be unique.")}}function O(St,Vt,Zt){if(!Array.isArray(St.data))throw new Error("gd.data must be an array.");if(typeof Vt>"u")throw new Error("currentIndices is a required argument.");if(Array.isArray(Vt)||(Vt=[Vt]),U(St,Vt,"currentIndices"),typeof Zt<"u"&&!Array.isArray(Zt)&&(Zt=[Zt]),typeof Zt<"u"&&U(St,Zt,"newIndices"),typeof Zt<"u"&&Vt.length!==Zt.length)throw new Error("current and new indices must be of equal length.")}function G(St,Vt,Zt){var qt,Te;if(!Array.isArray(St.data))throw new Error("gd.data must be an array.");if(typeof Vt>"u")throw new Error("traces must be defined.");for(Array.isArray(Vt)||(Vt=[Vt]),qt=0;qt<Vt.length;qt++)if(Te=Vt[qt],typeof Te!="object"||Array.isArray(Te)||Te===null)throw new Error("all values in traces array must be non-array objects");if(typeof Zt<"u"&&!Array.isArray(Zt)&&(Zt=[Zt]),typeof Zt<"u"&&Zt.length!==Vt.length)throw new Error("if indices is specified, traces.length must equal indices.length")}function $(St,Vt,Zt,qt){var Te=x.isPlainObject(qt);if(!Array.isArray(St.data))throw new Error("gd.data must be an array");if(!x.isPlainObject(Vt))throw new Error("update must be a key:value object");if(typeof Zt>"u")throw new Error("indices must be an integer or array of integers");U(St,Zt,"indices");for(var me in Vt){if(!Array.isArray(Vt[me])||Vt[me].length!==Zt.length)throw new Error("attribute "+me+" must be an array of length equal to indices array length");if(Te&&(!(me in qt)||!Array.isArray(qt[me])||qt[me].length!==Vt[me].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}function tt(St,Vt,Zt,qt){var Te=x.isPlainObject(qt),me=[],Ne,Ke,He,Xe,er;Array.isArray(Zt)||(Zt=[Zt]),Zt=I(Zt,St.data.length-1);for(var We in Vt)for(var hr=0;hr<Zt.length;hr++){if(Ne=St.data[Zt[hr]],He=t(Ne,We),Ke=He.get(),Xe=Vt[We][hr],!x.isArrayOrTypedArray(Xe))throw new Error("attribute: "+We+" index: "+hr+" must be an array");if(!x.isArrayOrTypedArray(Ke))throw new Error("cannot extend missing or non-array attribute: "+We);if(Ke.constructor!==Xe.constructor)throw new Error("cannot extend array with an array of a different type: "+We);er=Te?qt[We][hr]:qt,l(er)||(er=-1),me.push({prop:He,target:Ke,insert:Xe,maxp:Math.floor(er)})}return me}function Z(St,Vt,Zt,qt,Te){$(St,Vt,Zt,qt);for(var me=tt(St,Vt,Zt,qt),Ne={},Ke={},He=0;He<me.length;He++){var Xe=me[He].prop,er=me[He].maxp,We=Te(me[He].target,me[He].insert,er);Xe.set(We[0]),Array.isArray(Ne[Xe.astr])||(Ne[Xe.astr]=[]),Ne[Xe.astr].push(We[1]),Array.isArray(Ke[Xe.astr])||(Ke[Xe.astr]=[]),Ke[Xe.astr].push(me[He].target.length)}return{update:Ne,maxPoints:Ke}}function X(St,Vt){var Zt=new St.constructor(St.length+Vt.length);return Zt.set(St),Zt.set(Vt,St.length),Zt}function J(St,Vt,Zt,qt){St=x.getGraphDiv(St);function Te(He,Xe,er){var We,hr;if(x.isTypedArray(He))if(er<0){var Wr=new He.constructor(0),dn=X(He,Xe);er<0?(We=dn,hr=Wr):(We=Wr,hr=dn)}else if(We=new He.constructor(er),hr=new He.constructor(He.length+Xe.length-er),er===Xe.length)We.set(Xe),hr.set(He);else if(er<Xe.length){var Qr=Xe.length-er;We.set(Xe.subarray(Qr)),hr.set(He),hr.set(Xe.subarray(0,Qr),He.length)}else{var le=er-Xe.length,Qe=He.length-le;We.set(He.subarray(Qe)),We.set(Xe,le),hr.set(He.subarray(0,Qe))}else We=He.concat(Xe),hr=er>=0&&er<We.length?We.splice(0,We.length-er):[];return[We,hr]}var me=Z(St,Vt,Zt,qt,Te),Ne=V.redraw(St),Ke=[St,me.update,Zt,me.maxPoints];return i.add(St,V.prependTraces,Ke,J,arguments),Ne}function st(St,Vt,Zt,qt){St=x.getGraphDiv(St);function Te(He,Xe,er){var We,hr;if(x.isTypedArray(He))if(er<=0){var Wr=new He.constructor(0),dn=X(Xe,He);er<0?(We=dn,hr=Wr):(We=Wr,hr=dn)}else if(We=new He.constructor(er),hr=new He.constructor(He.length+Xe.length-er),er===Xe.length)We.set(Xe),hr.set(He);else if(er<Xe.length){var Qr=Xe.length-er;We.set(Xe.subarray(0,Qr)),hr.set(Xe.subarray(Qr)),hr.set(He,Qr)}else{var le=er-Xe.length;We.set(Xe),We.set(He.subarray(0,le),Xe.length),hr.set(He.subarray(le))}else We=Xe.concat(He),hr=er>=0&&er<We.length?We.splice(er,We.length):[];return[We,hr]}var me=Z(St,Vt,Zt,qt,Te),Ne=V.redraw(St),Ke=[St,me.update,Zt,me.maxPoints];return i.add(St,V.extendTraces,Ke,st,arguments),Ne}function at(St,Vt,Zt){St=x.getGraphDiv(St);var qt=[],Te=V.deleteTraces,me=at,Ne=[St,qt],Ke=[St,Vt],He,Xe;for(G(St,Vt,Zt),Array.isArray(Vt)||(Vt=[Vt]),Vt=Vt.map(function(er){return x.extendFlat({},er)}),T.cleanData(Vt),He=0;He<Vt.length;He++)St.data.push(Vt[He]);for(He=0;He<Vt.length;He++)qt.push(-Vt.length+He);if(typeof Zt>"u")return Xe=V.redraw(St),i.add(St,Te,Ne,me,Ke),Xe;Array.isArray(Zt)||(Zt=[Zt]);try{O(St,qt,Zt)}catch(er){throw St.data.splice(St.data.length-Vt.length,Vt.length),er}return i.startSequence(St),i.add(St,Te,Ne,me,Ke),Xe=V.moveTraces(St,qt,Zt),i.stopSequence(St),Xe}function lt(St,Vt){St=x.getGraphDiv(St);var Zt=[],qt=V.addTraces,Te=lt,me=[St,Zt,Vt],Ne=[St,Vt],Ke,He;if(typeof Vt>"u")throw new Error("indices must be an integer or array of integers.");for(Array.isArray(Vt)||(Vt=[Vt]),U(St,Vt,"indices"),Vt=I(Vt,St.data.length-1),Vt.sort(x.sorterDes),Ke=0;Ke<Vt.length;Ke+=1)He=St.data.splice(Vt[Ke],1)[0],Zt.push(He);var Xe=V.redraw(St);return i.add(St,qt,me,Te,Ne),Xe}function F(St,Vt,Zt){St=x.getGraphDiv(St);var qt=[],Te=[],me=F,Ne=F,Ke=[St,Zt,Vt],He=[St,Vt,Zt],Xe;if(O(St,Vt,Zt),Vt=Array.isArray(Vt)?Vt:[Vt],typeof Zt>"u")for(Zt=[],Xe=0;Xe<Vt.length;Xe++)Zt.push(-Vt.length+Xe);for(Zt=Array.isArray(Zt)?Zt:[Zt],Vt=I(Vt,St.data.length-1),Zt=I(Zt,St.data.length-1),Xe=0;Xe<St.data.length;Xe++)Vt.indexOf(Xe)===-1&&qt.push(St.data[Xe]);for(Xe=0;Xe<Vt.length;Xe++)Te.push({newIndex:Zt[Xe],trace:St.data[Vt[Xe]]});for(Te.sort(function(We,hr){return We.newIndex-hr.newIndex}),Xe=0;Xe<Te.length;Xe+=1)qt.splice(Te[Xe].newIndex,0,Te[Xe].trace);St.data=qt;var er=V.redraw(St);return i.add(St,me,Ke,Ne,He),er}function H(St,Vt,Zt,qt){St=x.getGraphDiv(St),T.clearPromiseQueue(St);var Te={};if(typeof Vt=="string")Te[Vt]=Zt;else if(x.isPlainObject(Vt))Te=x.extendFlat({},Vt),qt===void 0&&(qt=Zt);else return x.warn("Restyle fail.",Vt,Zt,qt),Promise.reject();Object.keys(Te).length&&(St.changed=!0);var me=T.coerceTraceIndices(St,qt),Ne=nt(St,Te,me),Ke=Ne.flags;Ke.calc&&(St.calcdata=void 0),Ke.clearAxisTypes&&T.clearAxisTypes(St,me,{});var He=[];Ke.fullReplot?He.push(V._doPlot):(He.push(d.previousPromises),d.supplyDefaults(St),Ke.markerSize&&(d.doCalcdata(St),bt(He)),Ke.style&&He.push(c.doTraceStyle),Ke.colorbars&&He.push(c.doColorBars),He.push(D)),He.push(d.rehover,d.redrag,d.reselect),i.add(St,H,[St,Ne.undoit,Ne.traces],H,[St,Ne.redoit,Ne.traces]);var Xe=x.syncOrAsync(He,St);return(!Xe||!Xe.then)&&(Xe=Promise.resolve()),Xe.then(function(){return St.emit("plotly_restyle",Ne.eventData),St})}function et(St){return St===void 0?null:St}function q(St,Vt){return Vt?function(Zt,qt,Te){var me=t(Zt,qt),Ne=me.set;return me.set=function(Ke){var He=(Te||"")+qt;W(He,me.get(),Ke,St),Ne(Ke)},me}:t}function W(St,Vt,Zt,qt){if(Array.isArray(Vt)||Array.isArray(Zt))for(var Te=Array.isArray(Vt)?Vt:[],me=Array.isArray(Zt)?Zt:[],Ne=Math.max(Te.length,me.length),Ke=0;Ke<Ne;Ke++)W(St+"["+Ke+"]",Te[Ke],me[Ke],qt);else if(x.isPlainObject(Vt)||x.isPlainObject(Zt)){var He=x.isPlainObject(Vt)?Vt:{},Xe=x.isPlainObject(Zt)?Zt:{},er=x.extendFlat({},He,Xe);for(var We in er)W(St+"."+We,He[We],Xe[We],qt)}else qt[St]===void 0&&(qt[St]=et(Vt))}function K(St,Vt,Zt){for(var qt in Zt){var Te=t(St,qt);W(qt,Te.get(),Zt[qt],Vt)}}function nt(St,Vt,Zt){var qt=St._fullLayout,Te=St._fullData,me=St.data,Ne=qt._guiEditing,Ke=q(qt._preGUI,Ne),He=x.extendDeepAll({},Vt),Xe;it(Vt);var er=A.traceFlags(),We={},hr={},Wr;function dn(){return Zt.map(function(){})}function Qr($e){var or=s.id2name($e);Wr.indexOf(or)===-1&&Wr.push(or)}function le($e){return"LAYOUT"+$e+".autorange"}function Qe($e){return"LAYOUT"+$e+".range"}function Ze($e){for(var or=$e;or<Te.length;or++)if(Te[or]._input===me[$e])return Te[or]}function Ve($e,or,Dr){if(Array.isArray($e)){$e.forEach(function(Xr){Ve(Xr,or,Dr)});return}if(!($e in Vt||T.hasParent(Vt,$e))){var Nr;if($e.substr(0,6)==="LAYOUT")Nr=Ke(St.layout,$e.replace("LAYOUT",""));else{var Fr=Zt[Dr],Ar=qt._tracePreGUI[Ze(Fr)._fullInput.uid];Nr=q(Ar,Ne)(me[Fr],$e)}$e in hr||(hr[$e]=dn()),hr[$e][Dr]===void 0&&(hr[$e][Dr]=et(Nr.get())),or!==void 0&&Nr.set(or)}}function _r($e){return function(or){return Te[or][$e]}}function oe($e){return function(or,Dr){return or===!1?Te[Zt[Dr]][$e]:null}}for(var Ht in Vt){if(T.hasParent(Vt,Ht))throw new Error("cannot set "+Ht+" and a parent attribute simultaneously");var te=Vt[Ht],ne,_e,Pe,Et,Mt,se;if((Ht==="autobinx"||Ht==="autobiny")&&(Ht=Ht.charAt(Ht.length-1)+"bins",Array.isArray(te)?te=te.map(oe(Ht)):te===!1?te=Zt.map(_r(Ht)):te=null),We[Ht]=te,Ht.substr(0,6)==="LAYOUT"){Pe=Ke(St.layout,Ht.replace("LAYOUT","")),hr[Ht]=[et(Pe.get())],Pe.set(Array.isArray(te)?te[0]:te),er.calc=!0;continue}for(hr[Ht]=dn(),Xe=0;Xe<Zt.length;Xe++){ne=me[Zt[Xe]],_e=Ze(Zt[Xe]);var ce=qt._tracePreGUI[_e._fullInput.uid];if(Pe=q(ce,Ne)(ne,Ht),Et=Pe.get(),Mt=Array.isArray(te)?te[Xe%te.length]:te,Mt!==void 0){var de=Pe.parts[Pe.parts.length-1],Se=Ht.substr(0,Ht.length-de.length-1),ye=Se?Se+".":"",Ae=Se?t(_e,Se).get():_e;if(se=n.getTraceValObject(_e,Pe.parts),se&&se.impliedEdits&&Mt!==null)for(var Ge in se.impliedEdits)Ve(x.relativeAttr(Ht,Ge),se.impliedEdits[Ge],Xe);else if((de==="thicknessmode"||de==="lenmode")&&Et!==Mt&&(Mt==="fraction"||Mt==="pixels")&&Ae){var sr=qt._size,Er=Ae.orient,kr=Er==="top"||Er==="bottom";if(de==="thicknessmode"){var Mr=kr?sr.h:sr.w;Ve(ye+"thickness",Ae.thickness*(Mt==="fraction"?1/Mr:Mr),Xe)}else{var Gr=kr?sr.w:sr.h;Ve(ye+"len",Ae.len*(Mt==="fraction"?1/Gr:Gr),Xe)}}else if(Ht==="type"&&(Mt==="pie"!=(Et==="pie")||Mt==="funnelarea"!=(Et==="funnelarea"))){var ar="x",xr="y";(Mt==="bar"||Et==="bar")&&ne.orientation==="h"&&(ar="y",xr="x"),x.swapAttrs(ne,["?","?src"],"labels",ar),x.swapAttrs(ne,["d?","?0"],"label",ar),x.swapAttrs(ne,["?","?src"],"values",xr),Et==="pie"||Et==="funnelarea"?(t(ne,"marker.color").set(t(ne,"marker.colors").get()),qt._pielayer.selectAll("g.trace").remove()):r.traceIs(ne,"cartesian")&&t(ne,"marker.colors").set(t(ne,"marker.color").get())}hr[Ht][Xe]=et(Et);var Ir=["swapxy","swapxyaxes","orientation","orientationaxes"];if(Ir.indexOf(Ht)!==-1){if(Ht==="orientation"){Pe.set(Mt);var Hr=ne.x&&!ne.y?"h":"v";if((Pe.get()||Hr)===_e.orientation)continue}else Ht==="orientationaxes"&&(ne.orientation={v:"h",h:"v"}[_e.orientation]);T.swapXYData(ne),er.calc=er.clearAxisTypes=!0}else d.dataArrayContainers.indexOf(Pe.parts[0])!==-1?(T.manageArrayContainers(Pe,Mt,hr),er.calc=!0):(se?se.arrayOk&&!r.traceIs(_e,"regl")&&(x.isArrayOrTypedArray(Mt)||x.isArrayOrTypedArray(Et))?er.calc=!0:A.update(er,se):er.calc=!0,Pe.set(Mt))}}if(["swapxyaxes","orientationaxes"].indexOf(Ht)!==-1&&s.swap(St,Zt),Ht==="orientationaxes"){var Cr=t(St.layout,"hovermode"),ae=Cr.get();ae==="x"?Cr.set("y"):ae==="y"?Cr.set("x"):ae==="x unified"?Cr.set("y unified"):ae==="y unified"&&Cr.set("x unified")}if(["orientation","type"].indexOf(Ht)!==-1){for(Wr=[],Xe=0;Xe<Zt.length;Xe++){var Le=me[Zt[Xe]];r.traceIs(Le,"cartesian")&&(Qr(Le.xaxis||"x"),Qr(Le.yaxis||"y"))}Ve(Wr.map(le),!0,0),Ve(Wr.map(Qe),[0,1],0)}}return(er.calc||er.plot)&&(er.fullReplot=!0),{flags:er,undoit:hr,redoit:We,traces:Zt,eventData:x.extendDeepNoArrays([],[He,Zt])}}function it(St){var Vt=x.counterRegex("axis",".title",!1,!1),Zt=/colorbar\.title$/,qt=Object.keys(St),Te,me,Ne;for(Te=0;Te<qt.length;Te++)me=qt[Te],Ne=St[me],(me==="title"||Vt.test(me)||Zt.test(me))&&(typeof Ne=="string"||typeof Ne=="number")?Ke(me,me.replace("title","title.text")):me.indexOf("titlefont")>-1&&me.indexOf("grouptitlefont")===-1?Ke(me,me.replace("titlefont","title.font")):me.indexOf("titleposition")>-1?Ke(me,me.replace("titleposition","title.position")):me.indexOf("titleside")>-1?Ke(me,me.replace("titleside","title.side")):me.indexOf("titleoffset")>-1&&Ke(me,me.replace("titleoffset","title.offset"));function Ke(He,Xe){St[Xe]=St[He],delete St[He]}}function ot(St,Vt,Zt){St=x.getGraphDiv(St),T.clearPromiseQueue(St);var qt={};if(typeof Vt=="string")qt[Vt]=Zt;else if(x.isPlainObject(Vt))qt=x.extendFlat({},Vt);else return x.warn("Relayout fail.",Vt,Zt),Promise.reject();Object.keys(qt).length&&(St.changed=!0);var Te=Tt(St,qt),me=Te.flags;me.calc&&(St.calcdata=void 0);var Ne=[d.previousPromises];me.layoutReplot?Ne.push(c.layoutReplot):Object.keys(qt).length&&(ct(St,me,Te)||d.supplyDefaults(St),me.legend&&Ne.push(c.doLegend),me.layoutstyle&&Ne.push(c.layoutStyles),me.axrange&&bt(Ne,Te.rangesAltered),me.ticks&&Ne.push(c.doTicksRelayout),me.modebar&&Ne.push(c.doModeBar),me.camera&&Ne.push(c.doCamera),me.colorbars&&Ne.push(c.doColorBars),Ne.push(D)),Ne.push(d.rehover,d.redrag,d.reselect),i.add(St,ot,[St,Te.undoit],ot,[St,Te.redoit]);var Ke=x.syncOrAsync(Ne,St);return(!Ke||!Ke.then)&&(Ke=Promise.resolve(St)),Ke.then(function(){return St.emit("plotly_relayout",Te.eventData),St})}function ct(St,Vt,Zt){var qt=St._fullLayout;if(!Vt.axrange)return!1;for(var Te in Vt)if(Te!=="axrange"&&Vt[Te])return!1;for(var me in Zt.rangesAltered){var Ne=s.id2name(me),Ke=St.layout[Ne],He=qt[Ne];if(He.autorange=Ke.autorange,Ke.range&&(He.range=Ke.range.slice()),He.cleanRange(),He._matchGroup){for(var Xe in He._matchGroup)if(Xe!==me){var er=qt[s.id2name(Xe)];er.autorange=He.autorange,er.range=He.range.slice(),er._input.range=He.range.slice()}}}return!0}function bt(St,Vt){var Zt=Vt?function(qt){var Te=[],me=!0;for(var Ne in Vt){var Ke=s.getFromId(qt,Ne);if(Te.push(Ne),(Ke.ticklabelposition||"").indexOf("inside")!==-1&&Ke._anchorAxis&&Te.push(Ke._anchorAxis._id),Ke._matchGroup)for(var He in Ke._matchGroup)Vt[He]||Te.push(He);Ke.automargin&&(me=!1)}return s.draw(qt,Te,{skipTitle:me})}:function(qt){return s.draw(qt,"redraw")};St.push(v,c.doAutoRangeAndConstraints,Zt,c.drawData,c.finalDraw)}var ut=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,pt=/^[xyz]axis[0-9]*\.autorange$/,yt=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function Tt(St,Vt){var Zt=St.layout,qt=St._fullLayout,Te=qt._guiEditing,me=q(qt._preGUI,Te),Ne=Object.keys(Vt),Ke=s.list(St),He=x.extendDeepAll({},Vt),Xe={},er,We,hr;for(it(Vt),Ne=Object.keys(Vt),We=0;We<Ne.length;We++)if(Ne[We].indexOf("allaxes")===0){for(hr=0;hr<Ke.length;hr++){var Wr=Ke[hr]._id.substr(1),dn=Wr.indexOf("scene")!==-1?Wr+".":"",Qr=Ne[We].replace("allaxes",dn+Ke[hr]._name);Vt[Qr]||(Vt[Qr]=Vt[Ne[We]])}delete Vt[Ne[We]]}var le=A.layoutFlags(),Qe={},Ze={};function Ve(Fr,Ar){if(Array.isArray(Fr)){Fr.forEach(function(Tn){Ve(Tn,Ar)});return}if(!(Fr in Vt||T.hasParent(Vt,Fr))){var Xr=me(Zt,Fr);Fr in Ze||(Ze[Fr]=et(Xr.get())),Ar!==void 0&&Xr.set(Ar)}}var _r={},oe;function Ht(Fr){var Ar=s.name2id(Fr.split(".")[0]);return _r[Ar]=1,Ar}for(var te in Vt){if(T.hasParent(Vt,te))throw new Error("cannot set "+te+" and a parent attribute simultaneously");for(var ne=me(Zt,te),_e=Vt[te],Pe=ne.parts.length,Et=Pe-1;Et>0&&typeof ne.parts[Et]!="string";)Et--;var Mt=ne.parts[Et],se=ne.parts[Et-1]+"."+Mt,ce=ne.parts.slice(0,Et).join("."),de=t(St.layout,ce).get(),Se=t(qt,ce).get(),ye=ne.get();if(_e!==void 0){Qe[te]=_e,Ze[te]=Mt==="reverse"?_e:et(ye);var Ae=n.getLayoutValObject(qt,ne.parts);if(Ae&&Ae.impliedEdits&&_e!==null)for(var Ge in Ae.impliedEdits)Ve(x.relativeAttr(te,Ge),Ae.impliedEdits[Ge]);if(["width","height"].indexOf(te)!==-1)if(_e){Ve("autosize",null);var sr=te==="height"?"width":"height";Ve(sr,qt[sr])}else qt[te]=St._initialAutoSize[te];else if(te==="autosize")Ve("width",_e?null:qt.width),Ve("height",_e?null:qt.height);else if(se.match(ut))Ht(se),t(qt,ce+"._inputRange").set(null);else if(se.match(pt)){Ht(se),t(qt,ce+"._inputRange").set(null);var Er=t(qt,ce).get();Er._inputDomain&&(Er._input.domain=Er._inputDomain.slice())}else se.match(yt)&&t(qt,ce+"._inputDomain").set(null);if(Mt==="type"){oe=de;var kr=Se.type==="linear"&&_e==="log",Mr=Se.type==="log"&&_e==="linear";if(kr||Mr){if(!oe||!oe.range)Ve(ce+".autorange",!0);else if(Se.autorange)kr&&(oe.range=oe.range[1]>oe.range[0]?[1,2]:[2,1]);else{var Gr=oe.range[0],ar=oe.range[1];kr?(Gr<=0&&ar<=0&&Ve(ce+".autorange",!0),Gr<=0?Gr=ar/1e6:ar<=0&&(ar=Gr/1e6),Ve(ce+".range[0]",Math.log(Gr)/Math.LN10),Ve(ce+".range[1]",Math.log(ar)/Math.LN10)):(Ve(ce+".range[0]",Math.pow(10,Gr)),Ve(ce+".range[1]",Math.pow(10,ar)))}Array.isArray(qt._subplots.polar)&&qt._subplots.polar.length&&qt[ne.parts[0]]&&ne.parts[1]==="radialaxis"&&delete qt[ne.parts[0]]._subplot.viewInitial["radialaxis.range"],r.getComponentMethod("annotations","convertCoords")(St,Se,_e,Ve),r.getComponentMethod("images","convertCoords")(St,Se,_e,Ve)}else Ve(ce+".autorange",!0),Ve(ce+".range",null);t(qt,ce+"._inputRange").set(null)}else if(Mt.match(k)){var xr=t(qt,te).get(),Ir=(_e||{}).type;(!Ir||Ir==="-")&&(Ir="linear"),r.getComponentMethod("annotations","convertCoords")(St,xr,Ir,Ve),r.getComponentMethod("images","convertCoords")(St,xr,Ir,Ve)}var Hr=u.containerArrayMatch(te);if(Hr){er=Hr.array,We=Hr.index;var Cr=Hr.property,ae=Ae||{editType:"calc"};We!==""&&Cr===""&&(u.isAddVal(_e)?Ze[te]=null:u.isRemoveVal(_e)?Ze[te]=(t(Zt,er).get()||[])[We]:x.warn("unrecognized full object value",Vt)),A.update(le,ae),Xe[er]||(Xe[er]={});var Le=Xe[er][We];Le||(Le=Xe[er][We]={}),Le[Cr]=_e,delete Vt[te]}else Mt==="reverse"?(de.range?de.range.reverse():(Ve(ce+".autorange",!0),de.range=[1,0]),Se.autorange?le.calc=!0:le.plot=!0):(te==="dragmode"&&(_e===!1&&ye!==!1||_e!==!1&&ye===!1)||qt._has("scatter-like")&&qt._has("regl")&&te==="dragmode"&&(_e==="lasso"||_e==="select")&&!(ye==="lasso"||ye==="select")||qt._has("gl2d")?le.plot=!0:Ae?A.update(le,Ae):le.calc=!0,ne.set(_e))}}for(er in Xe){var $e=u.applyContainerArrayChanges(St,me(Zt,er),Xe[er],le,me);$e||(le.plot=!0)}for(var or in _r){oe=s.getFromId(St,or);var Dr=oe&&oe._constraintGroup;if(Dr){le.calc=!0;for(var Nr in Dr)_r[Nr]||(s.getFromId(St,Nr)._constraintShrinkable=!0)}}return(kt(St)||Vt.height||Vt.width)&&(le.plot=!0),(le.plot||le.calc)&&(le.layoutReplot=!0),{flags:le,rangesAltered:_r,undoit:Ze,redoit:Qe,eventData:He}}function kt(St){var Vt=St._fullLayout,Zt=Vt.width,qt=Vt.height;return St.layout.autosize&&d.plotAutoSize(St,St.layout,Vt),Vt.width!==Zt||Vt.height!==qt}function zt(St,Vt,Zt,qt){St=x.getGraphDiv(St),T.clearPromiseQueue(St),x.isPlainObject(Vt)||(Vt={}),x.isPlainObject(Zt)||(Zt={}),Object.keys(Vt).length&&(St.changed=!0),Object.keys(Zt).length&&(St.changed=!0);var Te=T.coerceTraceIndices(St,qt),me=nt(St,x.extendFlat({},Vt),Te),Ne=me.flags,Ke=Tt(St,x.extendFlat({},Zt)),He=Ke.flags;(Ne.calc||He.calc)&&(St.calcdata=void 0),Ne.clearAxisTypes&&T.clearAxisTypes(St,Te,Zt);var Xe=[];He.layoutReplot?Xe.push(c.layoutReplot):Ne.fullReplot?Xe.push(V._doPlot):(Xe.push(d.previousPromises),ct(St,He,Ke)||d.supplyDefaults(St),Ne.style&&Xe.push(c.doTraceStyle),(Ne.colorbars||He.colorbars)&&Xe.push(c.doColorBars),He.legend&&Xe.push(c.doLegend),He.layoutstyle&&Xe.push(c.layoutStyles),He.axrange&&bt(Xe,Ke.rangesAltered),He.ticks&&Xe.push(c.doTicksRelayout),He.modebar&&Xe.push(c.doModeBar),He.camera&&Xe.push(c.doCamera),Xe.push(D)),Xe.push(d.rehover,d.redrag,d.reselect),i.add(St,zt,[St,me.undoit,Ke.undoit,me.traces],zt,[St,me.redoit,Ke.redoit,me.traces]);var er=x.syncOrAsync(Xe,St);return(!er||!er.then)&&(er=Promise.resolve(St)),er.then(function(){return St.emit("plotly_update",{data:me.eventData,layout:Ke.eventData}),St})}function Rt(St){return function(Zt){Zt._fullLayout._guiEditing=!0;var qt=St.apply(null,arguments);return Zt._fullLayout._guiEditing=!1,qt}}var Gt=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],wt=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function It(St,Vt){for(var Zt=0;Zt<Vt.length;Zt++){var qt=Vt[Zt],Te=St.match(qt.pattern);if(Te){var me=Te[1]||"";return{head:me,tail:St.substr(me.length+1),attr:qt.attr}}}}function $t(St,Vt){var Zt=t(Vt,St).get();if(Zt!==void 0)return Zt;var qt=St.split(".");for(qt.pop();qt.length>1;)if(qt.pop(),Zt=t(Vt,qt.join(".")+".uirevision").get(),Zt!==void 0)return Zt;return Vt.uirevision}function Qt(St,Vt){for(var Zt=0;Zt<Vt.length;Zt++)if(Vt[Zt]._fullInput.uid===St)return Zt;return-1}function Nt(St,Vt,Zt){for(var qt=0;qt<Vt.length;qt++)if(Vt[qt].uid===St)return qt;return!Vt[Zt]||Vt[Zt].uid?-1:Zt}function Pt(St,Vt){var Zt=x.isPlainObject(St),qt=Array.isArray(St);return Zt||qt?(Zt&&x.isPlainObject(Vt)||qt&&Array.isArray(Vt))&&JSON.stringify(St)===JSON.stringify(Vt):St===Vt}function Yt(St,Vt,Zt,qt){var Te=qt._preGUI,me,Ne,Ke,He,Xe,er,We,hr,Wr,dn,Qr=[],le={},Qe={};for(me in Te){if(Xe=It(me,Gt),Xe){if(Wr=Xe.head,dn=Xe.tail,Ne=Xe.attr||Wr+".uirevision",Ke=t(qt,Ne).get(),He=Ke&&$t(Ne,Vt),He&&He===Ke){if(er=Te[me],er===null&&(er=void 0),We=t(Vt,me),hr=We.get(),Pt(hr,er)){hr===void 0&&dn==="autorange"&&Qr.push(Wr),We.set(et(t(qt,me).get()));continue}else if(dn==="autorange"||dn.substr(0,6)==="range["){var Ze=Te[Wr+".range[0]"],Ve=Te[Wr+".range[1]"],_r=Te[Wr+".autorange"];if(_r||_r===null&&Ze===null&&Ve===null){if(!(Wr in le)){var oe=t(Vt,Wr).get();le[Wr]=oe&&(oe.autorange||oe.autorange!==!1&&(!oe.range||oe.range.length!==2))}if(le[Wr]){We.set(et(t(qt,me).get()));continue}}}}}else x.warn("unrecognized GUI edit: "+me);delete Te[me],Xe&&Xe.tail.substr(0,6)==="range["&&(Qe[Xe.head]=1)}for(var Ht=0;Ht<Qr.length;Ht++){var te=Qr[Ht];if(Qe[te]){var ne=t(Vt,te).get();ne&&delete ne.autorange}}var _e=qt._tracePreGUI;for(var Pe in _e){var Et=_e[Pe],Mt=null,se;for(me in Et){if(!Mt){var ce=Qt(Pe,Zt);if(ce<0){delete _e[Pe];break}var de=Zt[ce];se=de._fullInput;var Se=Nt(Pe,St,se.index);if(Se<0){delete _e[Pe];break}Mt=St[Se]}if(Xe=It(me,wt),Xe){if(Xe.attr?(Ke=t(qt,Xe.attr).get(),He=Ke&&$t(Xe.attr,Vt)):(Ke=se.uirevision,He=Mt.uirevision,He===void 0&&(He=Vt.uirevision)),He&&He===Ke&&(er=Et[me],er===null&&(er=void 0),We=t(Mt,me),hr=We.get(),Pt(hr,er))){We.set(et(t(se,me).get()));continue}}else x.warn("unrecognized GUI edit: "+me+" in trace uid "+Pe);delete Et[me]}}}function ve(St,Vt,Zt,qt){var Te,me;function Ne(){return V.addFrames(St,Te)}St=x.getGraphDiv(St),T.clearPromiseQueue(St);var Ke=St._fullData,He=St._fullLayout;if(!x.isPlotDiv(St)||!Ke||!He)me=V.newPlot(St,Vt,Zt,qt);else{if(x.isPlainObject(Vt)){var Xe=Vt;Vt=Xe.data,Zt=Xe.layout,qt=Xe.config,Te=Xe.frames}var er=!1;if(qt){var We=x.extendDeep({},St._context);St._context=void 0,R(St,qt),er=Be(We,St._context)}St.data=Vt||[],T.cleanData(St.data),St.layout=Zt||{},T.cleanLayout(St.layout),Yt(St.data,St.layout,Ke,He),d.supplyDefaults(St,{skipUpdateCalc:!0});var hr=St._fullData,Wr=St._fullLayout,dn=Wr.datarevision===void 0,Qr=Wr.transition,le=ir(St,He,Wr,dn,Qr),Qe=le.newDataRevision,Ze=Re(St,Ke,hr,dn,Qr,Qe);if(kt(St)&&(le.layoutReplot=!0),Ze.calc||le.calc){St.calcdata=void 0;for(var Ve=Object.getOwnPropertyNames(Wr),_r=0;_r<Ve.length;_r++){var oe=Ve[_r],Ht=oe.substring(0,5);if(Ht==="xaxis"||Ht==="yaxis"){var te=Wr[oe]._emptyCategories;te&&te()}}}else d.supplyDefaultsUpdateCalc(St.calcdata,hr);var ne=[];if(Te&&(St._transitionData={},d.createTransitionData(St),ne.push(Ne)),Wr.transition&&!er&&(Ze.anim||le.anim))le.ticks&&ne.push(c.doTicksRelayout),d.doCalcdata(St),c.doAutoRangeAndConstraints(St),ne.push(function(){return d.transitionFromReact(St,Ze,le,He)});else if(Ze.fullReplot||le.layoutReplot||er)St._fullLayout._skipDefaults=!0,ne.push(V._doPlot);else{for(var _e in le.arrays){var Pe=le.arrays[_e];if(Pe.length){var Et=r.getComponentMethod(_e,"drawOne");if(Et!==x.noop)for(var Mt=0;Mt<Pe.length;Mt++)Et(St,Pe[Mt]);else{var se=r.getComponentMethod(_e,"draw");if(se===x.noop)throw new Error("cannot draw components: "+_e);se(St)}}}ne.push(d.previousPromises),Ze.style&&ne.push(c.doTraceStyle),(Ze.colorbars||le.colorbars)&&ne.push(c.doColorBars),le.legend&&ne.push(c.doLegend),le.layoutstyle&&ne.push(c.layoutStyles),le.axrange&&bt(ne),le.ticks&&ne.push(c.doTicksRelayout),le.modebar&&ne.push(c.doModeBar),le.camera&&ne.push(c.doCamera),ne.push(D)}ne.push(d.rehover,d.redrag,d.reselect),me=x.syncOrAsync(ne,St),(!me||!me.then)&&(me=Promise.resolve(St))}return me.then(function(){return St.emit("plotly_react",{data:Vt,layout:Zt}),St})}function Re(St,Vt,Zt,qt,Te,me){var Ne=Vt.length===Zt.length;if(!Te&&!Ne)return{fullReplot:!0,calc:!0};var Ke=A.traceFlags();Ke.arrays={},Ke.nChanges=0,Ke.nChangesAnim=0;var He,Xe;function er(Wr){var dn=n.getTraceValObject(Xe,Wr);return!Xe._module.animatable&&dn.anim&&(dn.anim=!1),dn}var We={getValObject:er,flags:Ke,immutable:qt,transition:Te,newDataRevision:me,gd:St},hr={};for(He=0;He<Vt.length;He++)if(Zt[He]){if(Xe=Zt[He]._fullInput,d.hasMakesDataTransform(Xe)&&(Xe=Zt[He]),hr[Xe.uid])continue;hr[Xe.uid]=1,Ie(Vt[He]._fullInput,Xe,[],We)}return(Ke.calc||Ke.plot)&&(Ke.fullReplot=!0),Te&&Ke.nChanges&&Ke.nChangesAnim&&(Ke.anim=Ke.nChanges===Ke.nChangesAnim&&Ne?"all":"some"),Ke}function ir(St,Vt,Zt,qt,Te){var me=A.layoutFlags();me.arrays={},me.rangesAltered={},me.nChanges=0,me.nChangesAnim=0;function Ne(He){return n.getLayoutValObject(Zt,He)}var Ke={getValObject:Ne,flags:me,immutable:qt,transition:Te,gd:St};return Ie(Vt,Zt,[],Ke),(me.plot||me.calc)&&(me.layoutReplot=!0),Te&&me.nChanges&&me.nChangesAnim&&(me.anim=me.nChanges===me.nChangesAnim?"all":"some"),me}function Ie(St,Vt,Zt,qt){var Te,me,Ne,Ke=qt.getValObject,He=qt.flags,Xe=qt.immutable,er=qt.inArray,We=qt.arrayIndex;function hr(){var ce=Te.editType;if(er&&ce.indexOf("arraydraw")!==-1){x.pushUnique(He.arrays[er],We);return}A.update(He,Te),ce!=="none"&&He.nChanges++,qt.transition&&Te.anim&&He.nChangesAnim++,(ut.test(Ne)||pt.test(Ne))&&(He.rangesAltered[Zt[0]]=1),yt.test(Ne)&&t(Vt,"_inputDomain").set(null),me==="datarevision"&&(He.newDataRevision=1)}function Wr(ce){return ce.valType==="data_array"||ce.arrayOk}for(me in St){if(He.calc&&!qt.transition)return;var dn=St[me],Qr=Vt[me],le=Zt.concat(me);if(Ne=le.join("."),!(me.charAt(0)==="_"||typeof dn=="function"||dn===Qr)){if((me==="tick0"||me==="dtick")&&Zt[0]!=="geo"){var Qe=Vt.tickmode;if(Qe==="auto"||Qe==="array"||!Qe)continue}if(!(me==="range"&&Vt.autorange)&&!((me==="zmin"||me==="zmax")&&Vt.type==="contourcarpet")&&(Te=Ke(le),!!Te&&!(Te._compareAsJSON&&JSON.stringify(dn)===JSON.stringify(Qr)))){var Ze=Te.valType,Ve,_r=Wr(Te),oe=Array.isArray(dn),Ht=Array.isArray(Qr);if(oe&&Ht){var te="_input_"+me,ne=St[te],_e=Vt[te];if(Array.isArray(ne)&&ne===_e)continue}if(Qr===void 0)_r&&oe?He.calc=!0:hr();else if(Te._isLinkedToArray){var Pe=[],Et=!1;er||(He.arrays[me]=Pe);var Mt=Math.min(dn.length,Qr.length),se=Math.max(dn.length,Qr.length);if(Mt!==se)if(Te.editType==="arraydraw")Et=!0;else{hr();continue}for(Ve=0;Ve<Mt;Ve++)Ie(dn[Ve],Qr[Ve],le.concat(Ve),x.extendFlat({inArray:me,arrayIndex:Ve},qt));if(Et)for(Ve=Mt;Ve<se;Ve++)Pe.push(Ve)}else!Ze&&x.isPlainObject(dn)?Ie(dn,Qr,le,qt):_r?oe&&Ht?(Xe&&(He.calc=!0),(Xe||qt.newDataRevision)&&hr()):oe!==Ht?He.calc=!0:hr():oe&&Ht?(dn.length!==Qr.length||String(dn)!==String(Qr))&&hr():hr()}}}for(me in Vt)if(!(me in St||me.charAt(0)==="_"||typeof Vt[me]=="function"))if(Te=Ke(Zt.concat(me)),Wr(Te)&&Array.isArray(Vt[me])){He.calc=!0;return}else hr()}function Be(St,Vt){var Zt;for(Zt in St)if(Zt.charAt(0)!=="_"){var qt=St[Zt],Te=Vt[Zt];if(qt!==Te)if(x.isPlainObject(qt)&&x.isPlainObject(Te)){if(Be(qt,Te))return!0}else if(Array.isArray(qt)&&Array.isArray(Te)){if(qt.length!==Te.length)return!0;for(var me=0;me<qt.length;me++)if(qt[me]!==Te[me])if(x.isPlainObject(qt[me])&&x.isPlainObject(Te[me])){if(Be(qt[me],Te[me]))return!0}else return!0}else return!0}}function Ye(St,Vt,Zt){if(St=x.getGraphDiv(St),!x.isPlotDiv(St))throw new Error("This element is not a Plotly plot: "+St+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var qt=St._transitionData;qt._frameQueue||(qt._frameQueue=[]),Zt=d.supplyAnimationDefaults(Zt);var Te=Zt.transition,me=Zt.frame;qt._frameWaitingCnt===void 0&&(qt._frameWaitingCnt=0);function Ne(Xe){return Array.isArray(Te)?Xe>=Te.length?Te[0]:Te[Xe]:Te}function Ke(Xe){return Array.isArray(me)?Xe>=me.length?me[0]:me[Xe]:me}function He(Xe,er){var We=0;return function(){if(Xe&&++We===er)return Xe()}}return new Promise(function(Xe,er){function We(){if(qt._frameQueue.length!==0){for(;qt._frameQueue.length;){var Mt=qt._frameQueue.pop();Mt.onInterrupt&&Mt.onInterrupt()}St.emit("plotly_animationinterrupted",[])}}function hr(Mt){if(Mt.length!==0){for(var se=0;se<Mt.length;se++){var ce;Mt[se].type==="byname"?ce=d.computeFrame(St,Mt[se].name):ce=Mt[se].data;var de=Ke(se),Se=Ne(se);Se.duration=Math.min(Se.duration,de.duration);var ye={frame:ce,name:Mt[se].name,frameOpts:de,transitionOpts:Se};se===Mt.length-1&&(ye.onComplete=He(Xe,2),ye.onInterrupt=er),qt._frameQueue.push(ye)}Zt.mode==="immediate"&&(qt._lastFrameAt=-1/0),qt._animationRaf||Qr()}}function Wr(){St.emit("plotly_animated"),window.cancelAnimationFrame(qt._animationRaf),qt._animationRaf=null}function dn(){qt._currentFrame&&qt._currentFrame.onComplete&&qt._currentFrame.onComplete();var Mt=qt._currentFrame=qt._frameQueue.shift();if(Mt){var se=Mt.name?Mt.name.toString():null;St._fullLayout._currentFrame=se,qt._lastFrameAt=Date.now(),qt._timeToNext=Mt.frameOpts.duration,d.transition(St,Mt.frame.data,Mt.frame.layout,T.coerceTraceIndices(St,Mt.frame.traces),Mt.frameOpts,Mt.transitionOpts).then(function(){Mt.onComplete&&Mt.onComplete()}),St.emit("plotly_animatingframe",{name:se,frame:Mt.frame,animation:{frame:Mt.frameOpts,transition:Mt.transitionOpts}})}else Wr()}function Qr(){St.emit("plotly_animating"),qt._lastFrameAt=-1/0,qt._timeToNext=0,qt._runningTransitions=0,qt._currentFrame=null;var Mt=function(){qt._animationRaf=window.requestAnimationFrame(Mt),Date.now()-qt._lastFrameAt>qt._timeToNext&&dn()};Mt()}var le=0;function Qe(Mt){return Array.isArray(Te)?le>=Te.length?Mt.transitionOpts=Te[le]:Mt.transitionOpts=Te[0]:Mt.transitionOpts=Te,le++,Mt}var Ze,Ve,_r=[],oe=Vt==null,Ht=Array.isArray(Vt),te=!oe&&!Ht&&x.isPlainObject(Vt);if(te)_r.push({type:"object",data:Qe(x.extendFlat({},Vt))});else if(oe||["string","number"].indexOf(typeof Vt)!==-1)for(Ze=0;Ze<qt._frames.length;Ze++)Ve=qt._frames[Ze],!!Ve&&(oe||String(Ve.group)===String(Vt))&&_r.push({type:"byname",name:String(Ve.name),data:Qe({name:Ve.name})});else if(Ht)for(Ze=0;Ze<Vt.length;Ze++){var ne=Vt[Ze];["number","string"].indexOf(typeof ne)!==-1?(ne=String(ne),_r.push({type:"byname",name:ne,data:Qe({name:ne})})):x.isPlainObject(ne)&&_r.push({type:"object",data:Qe(x.extendFlat({},ne))})}for(Ze=0;Ze<_r.length;Ze++)if(Ve=_r[Ze],Ve.type==="byname"&&!qt._frameHash[Ve.data.name]){x.warn('animate failure: frame not found: "'+Ve.data.name+'"'),er();return}["next","immediate"].indexOf(Zt.mode)!==-1&&We(),Zt.direction==="reverse"&&_r.reverse();var _e=St._fullLayout._currentFrame;if(_e&&Zt.fromcurrent){var Pe=-1;for(Ze=0;Ze<_r.length;Ze++)if(Ve=_r[Ze],Ve.type==="byname"&&Ve.name===_e){Pe=Ze;break}if(Pe>0&&Pe<_r.length-1){var Et=[];for(Ze=0;Ze<_r.length;Ze++)Ve=_r[Ze],(_r[Ze].type!=="byname"||Ze>Pe)&&Et.push(Ve);_r=Et}}_r.length>0?hr(_r):(St.emit("plotly_animated"),Xe())})}function ze(St,Vt,Zt){if(St=x.getGraphDiv(St),Vt==null)return Promise.resolve();if(!x.isPlotDiv(St))throw new Error("This element is not a Plotly plot: "+St+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var qt,Te,me,Ne,Ke=St._transitionData._frames,He=St._transitionData._frameHash;if(!Array.isArray(Vt))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+Vt);var Xe=Ke.length+Vt.length*2,er=[],We={};for(qt=Vt.length-1;qt>=0;qt--)if(!!x.isPlainObject(Vt[qt])){var hr=Vt[qt].name,Wr=(He[hr]||We[hr]||{}).name,dn=Vt[qt].name,Qr=He[Wr]||We[Wr];Wr&&dn&&typeof dn=="number"&&Qr&&p<w&&(p++,x.warn('addFrames: overwriting frame "'+(He[Wr]||We[Wr]).name+'" with a frame whose name of type "number" also equates to "'+Wr+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),p===w&&x.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),We[hr]={name:hr},er.push({frame:d.supplyFrameDefaults(Vt[qt]),index:Zt&&Zt[qt]!==void 0&&Zt[qt]!==null?Zt[qt]:Xe+qt})}er.sort(function(te,ne){return te.index>ne.index?-1:te.index<ne.index?1:0});var le=[],Qe=[],Ze=Ke.length;for(qt=er.length-1;qt>=0;qt--){if(Te=er[qt].frame,typeof Te.name=="number"&&x.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!Te.name)for(;He[Te.name="frame "+St._transitionData._counter++];);if(He[Te.name]){for(me=0;me<Ke.length&&(Ke[me]||{}).name!==Te.name;me++);le.push({type:"replace",index:me,value:Te}),Qe.unshift({type:"replace",index:me,value:Ke[me]})}else Ne=Math.max(0,Math.min(er[qt].index,Ze)),le.push({type:"insert",index:Ne,value:Te}),Qe.unshift({type:"delete",index:Ne}),Ze++}var Ve=d.modifyFrames,_r=d.modifyFrames,oe=[St,Qe],Ht=[St,le];return i&&i.add(St,Ve,oe,_r,Ht),d.modifyFrames(St,le)}function Ee(St,Vt){if(St=x.getGraphDiv(St),!x.isPlotDiv(St))throw new Error("This element is not a Plotly plot: "+St);var Zt,qt,Te=St._transitionData._frames,me=[],Ne=[];if(!Vt)for(Vt=[],Zt=0;Zt<Te.length;Zt++)Vt.push(Zt);for(Vt=Vt.slice(),Vt.sort(),Zt=Vt.length-1;Zt>=0;Zt--)qt=Vt[Zt],me.push({type:"delete",index:qt}),Ne.unshift({type:"insert",index:qt,value:Te[qt]});var Ke=d.modifyFrames,He=d.modifyFrames,Xe=[St,Ne],er=[St,me];return i&&i.add(St,Ke,Xe,He,er),d.modifyFrames(St,me)}function Wt(St){St=x.getGraphDiv(St);var Vt=St._fullLayout||{},Zt=St._fullData||[];return d.cleanPlot([],{},Zt,Vt),d.purge(St),a.purge(St),Vt._container&&Vt._container.remove(),delete St._context,St}function ee(St){var Vt=St._fullLayout,Zt=St.getBoundingClientRect();if(!x.equalDomRects(Zt,Vt._lastBBox)){var qt=Vt._invTransform=x.inverseTransformMatrix(x.getFullTransformMatrix(St));Vt._invScaleX=Math.sqrt(qt[0][0]*qt[0][0]+qt[0][1]*qt[0][1]+qt[0][2]*qt[0][2]),Vt._invScaleY=Math.sqrt(qt[1][0]*qt[1][0]+qt[1][1]*qt[1][1]+qt[1][2]*qt[1][2]),Vt._lastBBox=Zt}}function Xt(St){var Vt=f.select(St),Zt=St._fullLayout;if(Zt._calcInverseTransform=ee,Zt._calcInverseTransform(St),Zt._container=Vt.selectAll(".plot-container").data([0]),Zt._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),Zt._paperdiv=Zt._container.selectAll(".svg-container").data([0]),Zt._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),Zt._glcontainer=Zt._paperdiv.selectAll(".gl-container").data([{}]),Zt._glcontainer.enter().append("div").classed("gl-container",!0),Zt._paperdiv.selectAll(".main-svg").remove(),Zt._paperdiv.select(".modebar-container").remove(),Zt._paper=Zt._paperdiv.insert("svg",":first-child").classed("main-svg",!0),Zt._toppaper=Zt._paperdiv.append("svg").classed("main-svg",!0),Zt._modebardiv=Zt._paperdiv.append("div"),delete Zt._modeBar,Zt._hoverpaper=Zt._paperdiv.append("svg").classed("main-svg",!0),!Zt._uid){var qt={};f.selectAll("defs").each(function(){this.id&&(qt[this.id.split("-")[1]]=1)}),Zt._uid=x.randstr(qt)}Zt._paperdiv.selectAll(".main-svg").attr(b.svgAttrs),Zt._defs=Zt._paper.append("defs").attr("id","defs-"+Zt._uid),Zt._clips=Zt._defs.append("g").classed("clips",!0),Zt._topdefs=Zt._toppaper.append("defs").attr("id","topdefs-"+Zt._uid),Zt._topclips=Zt._topdefs.append("g").classed("clips",!0),Zt._bgLayer=Zt._paper.append("g").classed("bglayer",!0),Zt._draggers=Zt._paper.append("g").classed("draglayer",!0);var Te=Zt._paper.append("g").classed("layer-below",!0);Zt._imageLowerLayer=Te.append("g").classed("imagelayer",!0),Zt._shapeLowerLayer=Te.append("g").classed("shapelayer",!0),Zt._cartesianlayer=Zt._paper.append("g").classed("cartesianlayer",!0),Zt._polarlayer=Zt._paper.append("g").classed("polarlayer",!0),Zt._smithlayer=Zt._paper.append("g").classed("smithlayer",!0),Zt._ternarylayer=Zt._paper.append("g").classed("ternarylayer",!0),Zt._geolayer=Zt._paper.append("g").classed("geolayer",!0),Zt._funnelarealayer=Zt._paper.append("g").classed("funnelarealayer",!0),Zt._pielayer=Zt._paper.append("g").classed("pielayer",!0),Zt._iciclelayer=Zt._paper.append("g").classed("iciclelayer",!0),Zt._treemaplayer=Zt._paper.append("g").classed("treemaplayer",!0),Zt._sunburstlayer=Zt._paper.append("g").classed("sunburstlayer",!0),Zt._indicatorlayer=Zt._toppaper.append("g").classed("indicatorlayer",!0),Zt._glimages=Zt._paper.append("g").classed("glimages",!0);var me=Zt._toppaper.append("g").classed("layer-above",!0);Zt._imageUpperLayer=me.append("g").classed("imagelayer",!0),Zt._shapeUpperLayer=me.append("g").classed("shapelayer",!0),Zt._selectionLayer=Zt._toppaper.append("g").classed("selectionlayer",!0),Zt._infolayer=Zt._toppaper.append("g").classed("infolayer",!0),Zt._menulayer=Zt._toppaper.append("g").classed("menulayer",!0),Zt._zoomlayer=Zt._toppaper.append("g").classed("zoomlayer",!0),Zt._hoverlayer=Zt._hoverpaper.append("g").classed("hoverlayer",!0),Zt._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),St.emit("plotly_framework")}V.animate=Ye,V.addFrames=ze,V.deleteFrames=Ee,V.addTraces=at,V.deleteTraces=lt,V.extendTraces=J,V.moveTraces=F,V.prependTraces=st,V.newPlot=P,V._doPlot=h,V.purge=Wt,V.react=ve,V.redraw=z,V.relayout=ot,V.restyle=H,V.setPlotConfig=S,V.update=zt,V._guiRelayout=Rt(ot),V._guiRestyle=Rt(H),V._guiUpdate=Rt(zt),V._storeDirectGUIEdit=K},{"../components/color":367,"../components/drawing":389,"../components/selections":455,"../constants/xmlns_namespaces":492,"../lib":515,"../lib/events":504,"../lib/queue":531,"../plots/cartesian/axes":566,"../plots/cartesian/constants":573,"../plots/cartesian/graph_interact":576,"../plots/plots":628,"../registry":647,"./edit_types":548,"./helpers":549,"./manage_arrays":551,"./plot_config":553,"./plot_schema":554,"./subroutines":556,"@plotly/d3":58,"fast-isnumeric":190,"has-hover":228}],553:[function(e,B,V){var f={staticPlot:{valType:"boolean",dflt:!1},typesetMath:{valType:"boolean",dflt:!0},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},editSelection:{valType:"boolean",dflt:!0},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},l={};function m(x,t){for(var a in x){var i=x[a];i.valType?t[a]=i.dflt:(t[a]||(t[a]={}),m(i,t[a]))}}m(f,l),B.exports={configAttributes:f,dfltConfig:l}},{}],554:[function(e,B,V){var f=e("../registry"),l=e("../lib"),m=e("../plots/attributes"),x=e("../plots/layout_attributes"),t=e("../plots/frame_attributes"),a=e("../plots/animation_attributes"),i=e("./plot_config").configAttributes,r=e("./edit_types"),n=l.extendDeepAll,d=l.isPlainObject,s=l.isArrayOrTypedArray,o=l.nestedProperty,y=l.valObjectMeta,g="_isSubplotObj",b="_isLinkedToArray",v="_arrayAttrRegexps",_="_deprecated",u=[g,b,v,_];V.IS_SUBPLOT_OBJ=g,V.IS_LINKED_TO_ARRAY=b,V.DEPRECATED=_,V.UNDERSCORE_ATTRS=u,V.get=function(){var P={};f.allTypes.forEach(function(U){P[U]=k(U)});var I={};return Object.keys(f.transformsRegistry).forEach(function(U){I[U]=w(U)}),{defs:{valObjects:y,metaKeys:u.concat(["description","role","editType","impliedEdits"]),editType:{traces:r.traces,layout:r.layout},impliedEdits:{}},traces:P,layout:p(),transforms:I,frames:h(),animation:D(a),config:D(i)}},V.crawl=function(P,I,U,O){var G=U||0;O=O||"",Object.keys(P).forEach(function($){var tt=P[$];if(u.indexOf($)===-1){var Z=(O?O+".":"")+$;I(tt,$,P,G,Z),!V.isValObject(tt)&&d(tt)&&$!=="impliedEdits"&&V.crawl(tt,I,G+1,Z)}})},V.isValObject=function(P){return P&&P.valType!==void 0},V.findArrayAttributes=function(P){var I=[],U=[],O=[],G,$;function tt(lt,F,H,et){U=U.slice(0,et).concat([F]),O=O.slice(0,et).concat([lt&&lt._isLinkedToArray]);var q=lt&&(lt.valType==="data_array"||lt.arrayOk===!0)&&!(U[et-1]==="colorbar"&&(F==="ticktext"||F==="tickvals"));!q||Z(G,0,"")}function Z(lt,F,H){var et=lt[U[F]],q=H+U[F];if(F===U.length-1)s(et)&&I.push($+q);else if(O[F]){if(Array.isArray(et))for(var W=0;W<et.length;W++)d(et[W])&&Z(et[W],F+1,q+"["+W+"].")}else d(et)&&Z(et,F+1,q+".")}G=P,$="",V.crawl(m,tt),P._module&&P._module.attributes&&V.crawl(P._module.attributes,tt);var X=P.transforms;if(X)for(var J=0;J<X.length;J++){var st=X[J],at=st._module;at&&($="transforms["+J+"].",G=st,V.crawl(at.attributes,tt))}return I},V.getTraceValObject=function(P,I){var U=I[0],O=1,G,$;if(U==="transforms"){if(I.length===1)return m.transforms;var tt=P.transforms;if(!Array.isArray(tt)||!tt.length)return!1;var Z=I[1];if(!A(Z)||Z>=tt.length)return!1;G=(f.transformsRegistry[tt[Z].type]||{}).attributes,$=G&&G[I[2]],O=3}else{var X=P._module;if(X||(X=(f.modules[P.type||m.type.dflt]||{})._module),!X)return!1;if(G=X.attributes,$=G&&G[U],!$){var J=X.basePlotModule;J&&J.attributes&&($=J.attributes[U])}$||($=m[U])}return c($,I,O)},V.getLayoutValObject=function(P,I){var U=T(P,I[0]);return c(U,I,1)};function T(P,I){var U,O,G,$,tt=P._basePlotModules;if(tt){var Z;for(U=0;U<tt.length;U++){if(G=tt[U],G.attrRegex&&G.attrRegex.test(I)){if(G.layoutAttrOverrides)return G.layoutAttrOverrides;!Z&&G.layoutAttributes&&(Z=G.layoutAttributes)}var X=G.baseLayoutAttrOverrides;if(X&&I in X)return X[I]}if(Z)return Z}var J=P._modules;if(J){for(U=0;U<J.length;U++)if($=J[U].layoutAttributes,$&&I in $)return $[I]}for(O in f.componentsRegistry){if(G=f.componentsRegistry[O],G.name==="colorscale"&&I.indexOf("coloraxis")===0)return G.layoutAttributes[I];if(!G.schema&&I===G.name)return G.layoutAttributes}return I in x?x[I]:!1}function c(P,I,U){if(!P)return!1;if(P._isLinkedToArray){if(A(I[U]))U++;else if(U<I.length)return!1}for(;U<I.length;U++){var O=P[I[U]];if(d(O))P=O;else break;if(U===I.length-1)break;if(P._isLinkedToArray){if(U++,!A(I[U]))return!1}else if(P.valType==="info_array"){U++;var G=I[U];if(!A(G))return!1;var $=P.items;if(Array.isArray($)){if(G>=$.length)return!1;if(P.dimensions===2){if(U++,I.length===U)return P;var tt=I[U];if(!A(tt))return!1;P=$[G][tt]}else P=$[G]}else P=$}}return P}function A(P){return P===Math.round(P)&&P>=0}function k(P){var I,U;I=f.modules[P]._module,U=I.basePlotModule;var O={};O.type=null;var G=n({},m),$=n({},I.attributes);V.crawl($,function(X,J,st,at,lt){o(G,lt).set(void 0),X===void 0&&o($,lt).set(void 0)}),n(O,G),f.traceIs(P,"noOpacity")&&delete O.opacity,f.traceIs(P,"showLegend")||(delete O.showlegend,delete O.legendgroup),f.traceIs(P,"noHover")&&(delete O.hoverinfo,delete O.hoverlabel),I.selectPoints||delete O.selectedpoints,n(O,$),U.attributes&&n(O,U.attributes),O.type=P;var tt={meta:I.meta||{},categories:I.categories||{},animatable:Boolean(I.animatable),type:P,attributes:D(O)};if(I.layoutAttributes){var Z={};n(Z,I.layoutAttributes),tt.layoutAttributes=D(Z)}return I.animatable||V.crawl(tt,function(X){V.isValObject(X)&&"anim"in X&&delete X.anim}),tt}function p(){var P={},I,U;n(P,x);for(I in f.subplotsRegistry)if(U=f.subplotsRegistry[I],!!U.layoutAttributes)if(Array.isArray(U.attr))for(var O=0;O<U.attr.length;O++)R(P,U,U.attr[O]);else{var G=U.attr==="subplot"?U.name:U.attr;R(P,U,G)}for(I in f.componentsRegistry){U=f.componentsRegistry[I];var $=U.schema;if($&&($.subplots||$.layout)){var tt=$.subplots;if(tt&&tt.xaxis&&!tt.yaxis)for(var Z in tt.xaxis)delete P.yaxis[Z]}else U.name==="colorscale"?n(P,U.layoutAttributes):U.layoutAttributes&&z(P,U.layoutAttributes,U.name)}return{layoutAttributes:D(P)}}function w(P){var I=f.transformsRegistry[P],U=n({},I.attributes);return Object.keys(f.componentsRegistry).forEach(function(O){var G=f.componentsRegistry[O];G.schema&&G.schema.transforms&&G.schema.transforms[P]&&Object.keys(G.schema.transforms[P]).forEach(function($){z(U,G.schema.transforms[P][$],$)})}),{attributes:D(U)}}function h(){var P={frames:n({},t)};return D(P),P.frames}function D(P){return S(P),M(P),L(P),P}function S(P){function I(O){return{valType:"string",editType:"none"}}function U(O,G,$){V.isValObject(O)?(O.arrayOk===!0||O.valType==="data_array")&&($[G+"src"]=I()):d(O)&&(O.role="object")}V.crawl(P,U)}function M(P){function I(U,O,G){if(!!U){var $=U[b];!$||(delete U[b],G[O]={items:{}},G[O].items[$]=U,G[O].role="object")}}V.crawl(P,I)}function L(P){function I(U){for(var O in U)if(d(U[O]))I(U[O]);else if(Array.isArray(U[O]))for(var G=0;G<U[O].length;G++)I(U[O][G]);else U[O]instanceof RegExp&&(U[O]=U[O].toString())}I(P)}function R(P,I,U){var O=o(P,U),G=n({},I.layoutAttributes);G[g]=!0,O.set(G)}function z(P,I,U){var O=o(P,U);O.set(n(O.get()||{},I))}},{"../lib":515,"../plots/animation_attributes":560,"../plots/attributes":562,"../plots/frame_attributes":595,"../plots/layout_attributes":619,"../registry":647,"./edit_types":548,"./plot_config":553}],555:[function(e,B,V){var f=e("../lib"),l=e("../plots/attributes"),m="templateitemname",x={name:{valType:"string",editType:"none"}};x[m]={valType:"string",editType:"calc"},V.templatedArray=function(i,r){return r._isLinkedToArray=i,r.name=x.name,r[m]=x[m],r},V.traceTemplater=function(i){var r={},n,d;for(n in i)d=i[n],Array.isArray(d)&&d.length&&(r[n]=0);function s(o){n=f.coerce(o,{},l,"type");var y={type:n,_template:null};if(n in r){d=i[n];var g=r[n]%d.length;r[n]++,y._template=d[g]}return y}return{newTrace:s}},V.newContainer=function(i,r,n){var d=i._template,s=d&&(d[r]||n&&d[n]);f.isPlainObject(s)||(s=null);var o=i[r]={_template:s};return o},V.arrayTemplater=function(i,r,n){var d=i._template,s=d&&d[a(r)],o=d&&d[r];(!Array.isArray(o)||!o.length)&&(o=[]);var y={};function g(v){var _={name:v.name,_input:v},u=_[m]=v[m];if(!t(u))return _._template=s,_;for(var T=0;T<o.length;T++){var c=o[T];if(c.name===u)return y[u]=1,_._template=c,_}return _[n]=v[n]||!1,_._template=!1,_}function b(){for(var v=[],_=0;_<o.length;_++){var u=o[_],T=u.name;if(t(T)&&!y[T]){var c={_template:u,name:T,_input:{_templateitemname:T}};c[m]=u[m],v.push(c),y[T]=1}}return v}return{newItem:g,defaultItems:b}};function t(i){return i&&typeof i=="string"}function a(i){var r=i.length-1;return i.charAt(r)!=="s"&&f.warn("bad argument to arrayDefaultKey: "+i),i.substr(0,i.length-1)+"defaults"}V.arrayDefaultKey=a,V.arrayEditor=function(i,r,n){var d=(f.nestedProperty(i,r).get()||[]).length,s=n._index,o=s>=d&&(n._input||{})._templateitemname;o&&(s=d);var y=r+"["+s+"]",g;function b(){g={},o&&(g[y]={},g[y][m]=o)}b();function v(c,A){g[c]=A}function _(c,A){o?f.nestedProperty(g[y],c).set(A):g[y+"."+c]=A}function u(){var c=g;return b(),c}function T(c,A){c&&_(c,A);var k=u();for(var p in k)f.nestedProperty(i,p).set(k[p])}return{modifyBase:v,modifyItem:_,getUpdateObj:u,applyUpdate:T}}},{"../lib":515,"../plots/attributes":562}],556:[function(e,B,V){var f=e("@plotly/d3"),l=e("../registry"),m=e("../plots/plots"),x=e("../lib"),t=e("../lib/clear_gl_canvases"),a=e("../components/color"),i=e("../components/drawing"),r=e("../components/titles"),n=e("../components/modebar"),d=e("../plots/cartesian/axes"),s=e("../constants/alignment"),o=e("../plots/cartesian/constraints"),y=o.enforce,g=o.clean,b=e("../plots/cartesian/autorange").doAutoRange,v="start",_="middle",u="end";V.layoutStyles=function(M){return x.syncOrAsync([m.doAutoMargin,c],M)};function T(M,L,R){for(var z=0;z<R.length;z++){var P=R[z][0],I=R[z][1];if(!(P[0]>=M[1]||P[1]<=M[0])&&I[0]<L[1]&&I[1]>L[0])return!0}return!1}function c(M){var L=M._fullLayout,R=L._size,z=R.p,P=d.list(M,"",!0),I,U,O,G,$,tt;if(L._paperdiv.style({width:M._context.responsive&&L.autosize&&!M._context._hasZeroWidth&&!M.layout.width?"100%":L.width+"px",height:M._context.responsive&&L.autosize&&!M._context._hasZeroHeight&&!M.layout.height?"100%":L.height+"px"}).selectAll(".main-svg").call(i.setSize,L.width,L.height),M._context.setBackground(M,L.paper_bgcolor),V.drawMainTitle(M),n.manage(M),!L._has("cartesian"))return m.previousPromises(M);function Z(Be,Ye,ze){var Ee=Be._lw/2;if(Be._id.charAt(0)==="x"){if(Ye){if(ze==="top")return Ye._offset-z-Ee}else return R.t+R.h*(1-(Be.position||0))+Ee%1;return Ye._offset+Ye._length+z+Ee}if(Ye){if(ze==="right")return Ye._offset+Ye._length+z+Ee}else return R.l+R.w*(Be.position||0)+Ee%1;return Ye._offset-z-Ee}for(I=0;I<P.length;I++){G=P[I];var X=G._anchorAxis;G._linepositions={},G._lw=i.crispRound(M,G.linewidth,1),G._mainLinePosition=Z(G,X,G.side),G._mainMirrorPosition=G.mirror&&X?Z(G,X,s.OPPOSITE_SIDE[G.side]):null}var J=[],st=[],at=[],lt=a.opacity(L.paper_bgcolor)===1&&a.opacity(L.plot_bgcolor)===1&&L.paper_bgcolor===L.plot_bgcolor;for(U in L._plots)if(O=L._plots[U],O.mainplot)O.bg&&O.bg.remove(),O.bg=void 0;else{var F=O.xaxis.domain,H=O.yaxis.domain,et=O.plotgroup;if(T(F,H,at)){var q=et.node(),W=O.bg=x.ensureSingle(et,"rect","bg");q.insertBefore(W.node(),q.childNodes[0]),st.push(U)}else et.select("rect.bg").remove(),at.push([F,H]),lt||(J.push(U),st.push(U))}var K=L._bgLayer.selectAll(".bg").data(J);for(K.enter().append("rect").classed("bg",!0),K.exit().remove(),K.each(function(Be){L._plots[Be].bg=f.select(this)}),I=0;I<st.length;I++)O=L._plots[st[I]],$=O.xaxis,tt=O.yaxis,O.bg&&$._offset!==void 0&&tt._offset!==void 0&&O.bg.call(i.setRect,$._offset-z,tt._offset-z,$._length+2*z,tt._length+2*z).call(a.fill,L.plot_bgcolor).style("stroke-width",0);if(!L._hasOnlyLargeSploms)for(U in L._plots){O=L._plots[U],$=O.xaxis,tt=O.yaxis;var nt=O.clipId="clip"+L._uid+U+"plot",it=x.ensureSingleById(L._clips,"clipPath",nt,function(Be){Be.classed("plotclip",!0).append("rect")});O.clipRect=it.select("rect").attr({width:$._length,height:tt._length}),i.setTranslate(O.plot,$._offset,tt._offset);var ot,ct;O._hasClipOnAxisFalse?(ot=null,ct=nt):(ot=nt,ct=null),i.setClipUrl(O.plot,ot,M),O.layerClipId=ct}var bt,ut,pt,yt,Tt,kt,zt,Rt,Gt,wt,It,$t,Qt;function Nt(Be){return"M"+bt+","+Be+"H"+ut}function Pt(Be){return"M"+$._offset+","+Be+"h"+$._length}function Yt(Be){return"M"+Be+","+Rt+"V"+zt}function ve(Be){return"M"+Be+","+tt._offset+"v"+tt._length}function Re(Be,Ye,ze){if(!Be.showline||U!==Be._mainSubplot)return"";if(!Be._anchorAxis)return ze(Be._mainLinePosition);var Ee=Ye(Be._mainLinePosition);return Be.mirror&&(Ee+=Ye(Be._mainMirrorPosition)),Ee}for(U in L._plots){O=L._plots[U],$=O.xaxis,tt=O.yaxis;var ir="M0,0";A($,U)&&(Tt=p($,"left",tt,P),bt=$._offset-(Tt?z+Tt:0),kt=p($,"right",tt,P),ut=$._offset+$._length+(kt?z+kt:0),pt=Z($,tt,"bottom"),yt=Z($,tt,"top"),Qt=!$._anchorAxis||U!==$._mainSubplot,Qt&&($.mirror==="allticks"||$.mirror==="all")&&($._linepositions[U]=[pt,yt]),ir=Re($,Nt,Pt),Qt&&$.showline&&($.mirror==="all"||$.mirror==="allticks")&&(ir+=Nt(pt)+Nt(yt)),O.xlines.style("stroke-width",$._lw+"px").call(a.stroke,$.showline?$.linecolor:"rgba(0,0,0,0)")),O.xlines.attr("d",ir);var Ie="M0,0";A(tt,U)&&(It=p(tt,"bottom",$,P),zt=tt._offset+tt._length+(It?z:0),$t=p(tt,"top",$,P),Rt=tt._offset-($t?z:0),Gt=Z(tt,$,"left"),wt=Z(tt,$,"right"),Qt=!tt._anchorAxis||U!==tt._mainSubplot,Qt&&(tt.mirror==="allticks"||tt.mirror==="all")&&(tt._linepositions[U]=[Gt,wt]),Ie=Re(tt,Yt,ve),Qt&&tt.showline&&(tt.mirror==="all"||tt.mirror==="allticks")&&(Ie+=Yt(Gt)+Yt(wt)),O.ylines.style("stroke-width",tt._lw+"px").call(a.stroke,tt.showline?tt.linecolor:"rgba(0,0,0,0)")),O.ylines.attr("d",Ie)}return d.makeClipPaths(M),m.previousPromises(M)}function A(M,L){return(M.ticks||M.showline)&&(L===M._mainSubplot||M.mirror==="all"||M.mirror==="allticks")}function k(M,L,R){if(!R.showline||!R._lw)return!1;if(R.mirror==="all"||R.mirror==="allticks")return!0;var z=R._anchorAxis;if(!z)return!1;var P=s.FROM_BL[L];return R.side===L?z.domain[P]===M.domain[P]:R.mirror&&z.domain[1-P]===M.domain[1-P]}function p(M,L,R,z){if(k(M,L,R))return R._lw;for(var P=0;P<z.length;P++){var I=z[P];if(I._mainAxis===R._mainAxis&&k(M,L,I))return I._lw}return 0}V.drawMainTitle=function(M){var L=M._fullLayout,R=D(L),z=S(L);r.draw(M,"gtitle",{propContainer:L,propName:"title.text",placeholder:L._dfltTitle.plot,attributes:{x:w(L,R),y:h(L,z),"text-anchor":R,dy:z}})};function w(M,L){var R=M.title,z=M._size,P=0;switch(L===v?P=R.pad.l:L===u&&(P=-R.pad.r),R.xref){case"paper":return z.l+z.w*R.x+P;case"container":default:return M.width*R.x+P}}function h(M,L){var R=M.title,z=M._size,P=0;if(L==="0em"||!L?P=-R.pad.b:L===s.CAP_SHIFT+"em"&&(P=R.pad.t),R.y==="auto")return z.t/2;switch(R.yref){case"paper":return z.t+z.h-z.h*R.y+P;case"container":default:return M.height-M.height*R.y+P}}function D(M){var L=M.title,R=_;return x.isRightAnchor(L)?R=u:x.isLeftAnchor(L)&&(R=v),R}function S(M){var L=M.title,R="0em";return x.isTopAnchor(L)?R=s.CAP_SHIFT+"em":x.isMiddleAnchor(L)&&(R=s.MID_SHIFT+"em"),R}V.doTraceStyle=function(M){var L=M.calcdata,R=[],z;for(z=0;z<L.length;z++){var P=L[z],I=P[0]||{},U=I.trace||{},O=U._module||{},G=O.arraysToCalcdata;G&&G(P,U);var $=O.editStyle;$&&R.push({fn:$,cd0:I})}if(R.length){for(z=0;z<R.length;z++){var tt=R[z];tt.fn(M,tt.cd0)}t(M),V.redrawReglTraces(M)}return m.style(M),l.getComponentMethod("legend","draw")(M),m.previousPromises(M)},V.doColorBars=function(M){return l.getComponentMethod("colorbar","draw")(M),m.previousPromises(M)},V.layoutReplot=function(M){var L=M.layout;return M.layout=void 0,l.call("_doPlot",M,"",L)},V.doLegend=function(M){return l.getComponentMethod("legend","draw")(M),m.previousPromises(M)},V.doTicksRelayout=function(M){return d.draw(M,"redraw"),M._fullLayout._hasOnlyLargeSploms&&(l.subplotsRegistry.splom.updateGrid(M),t(M),V.redrawReglTraces(M)),V.drawMainTitle(M),m.previousPromises(M)},V.doModeBar=function(M){var L=M._fullLayout;n.manage(M);for(var R=0;R<L._basePlotModules.length;R++){var z=L._basePlotModules[R].updateFx;z&&z(M)}return m.previousPromises(M)},V.doCamera=function(M){for(var L=M._fullLayout,R=L._subplots.gl3d,z=0;z<R.length;z++){var P=L[R[z]],I=P._scene;I.setViewport(P)}},V.drawData=function(M){var L=M._fullLayout;t(M);for(var R=L._basePlotModules,z=0;z<R.length;z++)R[z].plot(M);return V.redrawReglTraces(M),m.style(M),l.getComponentMethod("selections","draw")(M),l.getComponentMethod("shapes","draw")(M),l.getComponentMethod("annotations","draw")(M),l.getComponentMethod("images","draw")(M),L._replotting=!1,m.previousPromises(M)},V.redrawReglTraces=function(M){var L=M._fullLayout;if(L._has("regl")){var R=M._fullData,z=[],P=[],I,U;for(L._hasOnlyLargeSploms&&L._splomGrid.draw(),I=0;I<R.length;I++){var O=R[I];O.visible===!0&&O._length!==0&&(O.type==="splom"?L._splomScenes[O.uid].draw():O.type==="scattergl"?x.pushUnique(z,O.xaxis+O.yaxis):O.type==="scatterpolargl"&&x.pushUnique(P,O.subplot))}for(I=0;I<z.length;I++)U=L._plots[z[I]],U._scene&&U._scene.draw();for(I=0;I<P.length;I++)U=L[P[I]]._subplot,U._scene&&U._scene.draw()}},V.doAutoRangeAndConstraints=function(M){for(var L=d.list(M,"",!0),R,z={},P=0;P<L.length;P++)if(R=L[P],!z[R._id]){z[R._id]=1,g(M,R),b(M,R);var I=R._matchGroup;if(I)for(var U in I){var O=d.getFromId(M,U);b(M,O,R.range),z[U]=1}}y(M)},V.finalDraw=function(M){l.getComponentMethod("rangeslider","draw")(M),l.getComponentMethod("rangeselector","draw")(M)},V.drawMarginPushers=function(M){l.getComponentMethod("legend","draw")(M),l.getComponentMethod("rangeselector","draw")(M),l.getComponentMethod("sliders","draw")(M),l.getComponentMethod("updatemenus","draw")(M),l.getComponentMethod("colorbar","draw")(M)}},{"../components/color":367,"../components/drawing":389,"../components/modebar":430,"../components/titles":476,"../constants/alignment":483,"../lib":515,"../lib/clear_gl_canvases":499,"../plots/cartesian/autorange":565,"../plots/cartesian/axes":566,"../plots/cartesian/constraints":574,"../plots/plots":628,"../registry":647,"@plotly/d3":58}],557:[function(e,B,V){var f=e("../lib"),l=f.isPlainObject,m=e("./plot_schema"),x=e("../plots/plots"),t=e("../plots/attributes"),a=e("./plot_template"),i=e("./plot_config").dfltConfig;V.makeTemplate=function(v){v=f.isPlainObject(v)?v:f.getGraphDiv(v),v=f.extendDeep({_context:i},{data:v.data,layout:v.layout}),x.supplyDefaults(v);var _=v.data||[],u=v.layout||{};u._basePlotModules=v._fullLayout._basePlotModules,u._modules=v._fullLayout._modules;var T={data:{},layout:{}};_.forEach(function(L){var R={};d(L,R,o.bind(null,L));var z=f.coerce(L,{},t,"type"),P=T.data[z];P||(P=T.data[z]=[]),P.push(R)}),d(u,T.layout,s.bind(null,u)),delete T.layout.template;var c=u.template;if(l(c)){var A=c.layout,k,p,w,h,D,S;l(A)&&r(A,T.layout);var M=c.data;if(l(M)){for(p in T.data)if(w=M[p],Array.isArray(w)){for(D=T.data[p],S=D.length,h=w.length,k=0;k<S;k++)r(w[k%h],D[k]);for(k=S;k<h;k++)D.push(f.extendDeep({},w[k]))}for(p in M)p in T.data||(T.data[p]=f.extendDeep([],M[p]))}}return T};function r(v,_){v=f.extendDeep({},v);var u=Object.keys(v).sort(),T,c;function A(D,S,M){if(l(S)&&l(D))r(D,S);else if(Array.isArray(S)&&Array.isArray(D)){var L=a.arrayTemplater({_template:v},M);for(c=0;c<S.length;c++){var R=S[c],z=L.newItem(R)._template;z&&r(z,R)}var P=L.defaultItems();for(c=0;c<P.length;c++)S.push(P[c]._template);for(c=0;c<S.length;c++)delete S[c].templateitemname}}for(T=0;T<u.length;T++){var k=u[T],p=v[k];if(k in _?A(p,_[k],k):_[k]=p,n(k)===k)for(var w in _){var h=n(w);w!==h&&h===k&&!(w in v)&&A(p,_[w],k)}}}function n(v){return v.replace(/[0-9]+$/,"")}function d(v,_,u,T,c){var A=c&&u(c);for(var k in v){var p=v[k],w=y(v,k,T),h=y(v,k,c),D=u(h);if(!D){var S=n(k);S!==k&&(h=y(v,S,c),D=u(h))}if(!(A&&A===D)&&!(!D||D._noTemplating||D.valType==="data_array"||D.arrayOk&&Array.isArray(p)))if(!D.valType&&l(p))d(p,_,u,w,h);else if(D._isLinkedToArray&&Array.isArray(p))for(var M=!1,L=0,R={},z=0;z<p.length;z++){var P=p[z];if(l(P)){var I=P.name;if(I)R[I]||(d(P,_,u,y(p,L,w),y(p,L,h)),L++,R[I]=1);else if(!M){var U=a.arrayDefaultKey(k),O=y(v,U,T),G=y(p,L,w);d(P,_,u,G,y(p,L,h));var $=f.nestedProperty(_,G),tt=f.nestedProperty(_,O);tt.set($.get()),$.set(null),M=!0}}}else{var Z=f.nestedProperty(_,w);Z.set(p)}}}function s(v,_){return m.getLayoutValObject(v,f.nestedProperty({},_).parts)}function o(v,_){return m.getTraceValObject(v,f.nestedProperty({},_).parts)}function y(v,_,u){var T;return u?Array.isArray(v)?T=u+"["+_+"]":T=u+"."+_:T=_,T}V.validateTemplate=function(v,_){var u=f.extendDeep({},{_context:i,data:v.data,layout:v.layout}),T=u.layout||{};l(_)||(_=T.template||{});var c=_.layout,A=_.data,k=[];u.layout=T,u.layout.template=_,x.supplyDefaults(u);var p=u._fullLayout,w=u._fullData,h={};function D(O,G){for(var $ in O)if($.charAt(0)!=="_"&&l(O[$])){var tt=n($),Z=[],X;for(X=0;X<G.length;X++)Z.push(y(O,$,G[X])),tt!==$&&Z.push(y(O,tt,G[X]));for(X=0;X<Z.length;X++)h[Z[X]]=1;D(O[$],Z)}}function S(O,G){for(var $ in O)if($.indexOf("defaults")===-1&&l(O[$])){var tt=y(O,$,G);h[tt]?S(O[$],tt):k.push({code:"unused",path:tt})}}if(l(c)?(D(p,["layout"]),S(c,"layout")):k.push({code:"layout"}),!l(A))k.push({code:"data"});else{for(var M={},L,R=0;R<w.length;R++){var z=w[R];L=z.type,M[L]=(M[L]||0)+1,z._fullInput._template||k.push({code:"missing",index:z._fullInput.index,traceType:L})}for(L in A){var P=A[L].length,I=M[L]||0;P>I?k.push({code:"unused",traceType:L,templateCount:P,dataCount:I}):I>P&&k.push({code:"reused",traceType:L,templateCount:P,dataCount:I})}}function U(O,G){for(var $ in O)if($.charAt(0)!=="_"){var tt=O[$],Z=y(O,$,G);l(tt)?(Array.isArray(O)&&tt._template===!1&&tt.templateitemname&&k.push({code:"missing",path:Z,templateitemname:tt.templateitemname}),U(tt,Z)):Array.isArray(tt)&&g(tt)&&U(tt,Z)}}if(U({data:w,layout:p},""),k.length)return k.map(b)};function g(v){for(var _=0;_<v.length;_++)if(l(v[_]))return!0}function b(v){var _;switch(v.code){case"data":_="The template has no key data.";break;case"layout":_="The template has no key layout.";break;case"missing":v.path?_="There are no templates for item "+v.path+" with name "+v.templateitemname:_="There are no templates for trace "+v.index+", of type "+v.traceType+".";break;case"unused":v.path?_="The template item at "+v.path+" was not used in constructing the plot.":v.dataCount?_="Some of the templates of type "+v.traceType+" were not used. The template has "+v.templateCount+" traces, the data only has "+v.dataCount+" of this type.":_="The template has "+v.templateCount+" traces of type "+v.traceType+" but there are none in the data.";break;case"reused":_="Some of the templates of type "+v.traceType+" were used more than once. The template has "+v.templateCount+" traces, the data has "+v.dataCount+" of this type.";break}return v.msg=_,v}},{"../lib":515,"../plots/attributes":562,"../plots/plots":628,"./plot_config":553,"./plot_schema":554,"./plot_template":555}],558:[function(e,B,V){var f=e("fast-isnumeric"),l=e("./plot_api"),m=e("../plots/plots"),x=e("../lib"),t=e("../snapshot/helpers"),a=e("../snapshot/tosvg"),i=e("../snapshot/svgtoimg"),r=e("../version").version,n={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};function d(s,o){o=o||{};var y,g,b,v;x.isPlainObject(s)?(y=s.data||[],g=s.layout||{},b=s.config||{},v={}):(s=x.getGraphDiv(s),y=x.extendDeep([],s.data),g=x.extendDeep({},s.layout),b=s._context,v=s._fullLayout||{});function _(I){return!(I in o)||x.validate(o[I],n[I])}if(!_("width")&&o.width!==null||!_("height")&&o.height!==null)throw new Error("Height and width should be pixel values.");if(!_("format"))throw new Error("Export format is not "+x.join2(n.format.values,", "," or ")+".");var u={};function T(I,U){return x.coerce(o,u,n,I,U)}var c=T("format"),A=T("width"),k=T("height"),p=T("scale"),w=T("setBackground"),h=T("imageDataOnly"),D=document.createElement("div");D.style.position="absolute",D.style.left="-5000px",document.body.appendChild(D);var S=x.extendFlat({},g);A?S.width=A:o.width===null&&f(v.width)&&(S.width=v.width),k?S.height=k:o.height===null&&f(v.height)&&(S.height=v.height);var M=x.extendFlat({},b,{_exportedPlot:!0,staticPlot:!0,setBackground:w}),L=t.getRedrawFunc(D);function R(){return new Promise(function(I){setTimeout(I,t.getDelay(D._fullLayout))})}function z(){return new Promise(function(I,U){var O=a(D,c,p),G=D._fullLayout.width,$=D._fullLayout.height;function tt(){l.purge(D),document.body.removeChild(D)}if(c==="full-json"){var Z=m.graphJson(D,!1,"keepdata","object",!0,!0);return Z.version=r,Z=JSON.stringify(Z),tt(),I(h?Z:t.encodeJSON(Z))}if(tt(),c==="svg")return I(h?O:t.encodeSVG(O));var X=document.createElement("canvas");X.id=x.randstr(),i({format:c,width:G,height:$,scale:p,canvas:X,svg:O,promise:!0}).then(I).catch(U)})}function P(I){return h?I.replace(t.IMAGE_URL_PREFIX,""):I}return new Promise(function(I,U){l.newPlot(D,y,S,M).then(L).then(R).then(z).then(function(O){I(P(O))}).catch(function(O){U(O)})})}B.exports=d},{"../lib":515,"../plots/plots":628,"../snapshot/helpers":651,"../snapshot/svgtoimg":653,"../snapshot/tosvg":655,"../version":1132,"./plot_api":552,"fast-isnumeric":190}],559:[function(e,B,V){var f=e("../lib"),l=e("../plots/plots"),m=e("./plot_schema"),x=e("./plot_config").dfltConfig,t=f.isPlainObject,a=Array.isArray,i=f.isArrayOrTypedArray;B.exports=function(T,c){T===void 0&&(T=[]),c===void 0&&(c={});var A=m.get(),k=[],p={_context:f.extendFlat({},x)},w,h;a(T)?(p.data=f.extendDeep([],T),w=T):(p.data=[],w=[],k.push(o("array","data"))),t(c)?(p.layout=f.extendDeep({},c),h=c):(p.layout={},h={},arguments.length>1&&k.push(o("object","layout"))),l.supplyDefaults(p);for(var D=p._fullData,S=w.length,M=0;M<S;M++){var L=w[M],R=["data",M];if(!t(L)){k.push(o("object",R));continue}var z=D[M],P=z.type,I=A.traces[P].attributes;I.type={valType:"enumerated",values:[P]},z.visible===!1&&L.visible!==!1&&k.push(o("invisible",R)),r(L,z,I,k,R);var U=L.transforms,O=z.transforms;if(U){a(U)||k.push(o("array",R,["transforms"])),R.push("transforms");for(var G=0;G<U.length;G++){var $=["transforms",G],tt=U[G].type;if(!t(U[G])){k.push(o("object",R,$));continue}var Z=A.transforms[tt]?A.transforms[tt].attributes:{};Z.type={valType:"enumerated",values:Object.keys(A.transforms)},r(U[G],O[G],Z,k,R,$)}}}var X=p._fullLayout,J=n(A,D);return r(h,X,J,k,"layout"),k.length===0?void 0:k};function r(u,T,c,A,k,p){p=p||[];for(var w=Object.keys(u),h=0;h<w.length;h++){var D=w[h];if(D!=="transforms"){var S=p.slice();S.push(D);var M=u[D],L=T[D],R=g(c,D),z=(R||{}).valType,P=z==="info_array",I=z==="colorscale",U=(R||{}).items;if(!y(c,D))A.push(o("schema",k,S));else if(t(M)&&t(L)&&z!=="any")r(M,L,R,A,k,S);else if(P&&a(M)){M.length>L.length&&A.push(o("unused",k,S.concat(L.length)));var O=L.length,G=Array.isArray(U);G&&(O=Math.min(O,U.length));var $,tt,Z,X,J;if(R.dimensions===2)for(tt=0;tt<O;tt++)if(a(M[tt])){M[tt].length>L[tt].length&&A.push(o("unused",k,S.concat(tt,L[tt].length)));var st=L[tt].length;for($=0;$<(G?Math.min(st,U[tt].length):st);$++)Z=G?U[tt][$]:U,X=M[tt][$],J=L[tt][$],f.validate(X,Z)?J!==X&&J!==+X&&A.push(o("dynamic",k,S.concat(tt,$),X,J)):A.push(o("value",k,S.concat(tt,$),X))}else A.push(o("array",k,S.concat(tt),M[tt]));else for(tt=0;tt<O;tt++)Z=G?U[tt]:U,X=M[tt],J=L[tt],f.validate(X,Z)?J!==X&&J!==+X&&A.push(o("dynamic",k,S.concat(tt),X,J)):A.push(o("value",k,S.concat(tt),X))}else if(R.items&&!P&&a(M)){var at=U[Object.keys(U)[0]],lt=[],F,H;for(F=0;F<L.length;F++){var et=L[F]._index||F;if(H=S.slice(),H.push(et),t(M[et])&&t(L[F])){lt.push(et);var q=M[et],W=L[F];t(q)&&q.visible!==!1&&W.visible===!1?A.push(o("invisible",k,H)):r(q,W,at,A,k,H)}}for(F=0;F<M.length;F++)H=S.slice(),H.push(F),t(M[F])?lt.indexOf(F)===-1&&A.push(o("unused",k,H)):A.push(o("object",k,H,M[F]))}else!t(M)&&t(L)?A.push(o("object",k,S,M)):!i(M)&&i(L)&&!P&&!I?A.push(o("array",k,S,M)):D in T?f.validate(M,R)?R.valType==="enumerated"&&(R.coerceNumber&&M!==+L||M!==L)&&A.push(o("dynamic",k,S,M,L)):A.push(o("value",k,S,M)):A.push(o("unused",k,S,M))}}return A}function n(u,T){for(var c=u.layout.layoutAttributes,A=0;A<T.length;A++){var k=T[A],p=u.traces[k.type],w=p.layoutAttributes;w&&(k.subplot?f.extendFlat(c[p.attributes.subplot.dflt],w):f.extendFlat(c,w))}return c}var d={object:function(u,T){var c;return u==="layout"&&T===""?c="The layout argument":u[0]==="data"&&T===""?c="Trace "+u[1]+" in the data argument":c=s(u)+"key "+T,c+" must be linked to an object container"},array:function(u,T){var c;return u==="data"?c="The data argument":c=s(u)+"key "+T,c+" must be linked to an array container"},schema:function(u,T){return s(u)+"key "+T+" is not part of the schema"},unused:function(u,T,c){var A=t(c)?"container":"key";return s(u)+A+" "+T+" did not get coerced"},dynamic:function(u,T,c,A){return[s(u)+"key",T,"(set to '"+c+"')","got reset to","'"+A+"'","during defaults."].join(" ")},invisible:function(u,T){return(T?s(u)+"item "+T:"Trace "+u[1])+" got defaulted to be not visible"},value:function(u,T,c){return[s(u)+"key "+T,"is set to an invalid value ("+c+")"].join(" ")}};function s(u){return a(u)?"In data trace "+u[1]+", ":"In "+u+", "}function o(u,T,c,A,k){c=c||"";var p,w;a(T)?(p=T[0],w=T[1]):(p=T,w=null);var h=_(c),D=d[u](T,h,A,k);return f.log(D),{code:u,container:p,trace:w,path:c,astr:h,msg:D}}function y(u,T){var c=v(T),A=c.keyMinusId,k=c.id;return A in u&&u[A]._isSubplotObj&&k?!0:T in u}function g(u,T){if(T in u)return u[T];var c=v(T);return u[c.keyMinusId]}var b=f.counterRegex("([a-z]+)");function v(u){var T=u.match(b);return{keyMinusId:T&&T[1],id:T&&T[2]}}function _(u){if(!a(u))return String(u);for(var T="",c=0;c<u.length;c++){var A=u[c];typeof A=="number"?T=T.substr(0,T.length-1)+"["+A+"]":T+=A,c<u.length-1&&(T+=".")}return T}},{"../lib":515,"../plots/plots":628,"./plot_config":553,"./plot_schema":554}],560:[function(e,B,V){B.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},{}],561:[function(e,B,V){var f=e("../lib"),l=e("../plot_api/plot_template");B.exports=function(x,t,a){var i=a.name,r=a.inclusionAttr||"visible",n=t[i],d=f.isArrayOrTypedArray(x[i])?x[i]:[],s=t[i]=[],o=l.arrayTemplater(t,i,r),y,g;for(y=0;y<d.length;y++){var b=d[y];f.isPlainObject(b)?g=o.newItem(b):(g=o.newItem({}),g[r]=!1),g._index=y,g[r]!==!1&&a.handleItemDefaults(b,g,t,a),s.push(g)}var v=o.defaultItems();for(y=0;y<v.length;y++)g=v[y],g._index=s.length,a.handleItemDefaults({},g,t,a,{}),s.push(g);if(f.isArrayOrTypedArray(n)){var _=Math.min(n.length,s.length);for(y=0;y<_;y++)f.relinkPrivateKeys(s[y],n[y])}return s}},{"../lib":515,"../plot_api/plot_template":555}],562:[function(e,B,V){var f=e("./font_attributes"),l=e("../components/fx/attributes");B.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:f({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:l.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},{"../components/fx/attributes":398,"./font_attributes":594}],563:[function(e,B,V){var f=e("fast-isnumeric"),l=e("../../lib"),m=l.dateTime2ms,x=l.incrementMonth,t=e("../../constants/numerical"),a=t.ONEAVGMONTH;B.exports=function(r,n,d,s){if(n.type!=="date")return{vals:s};var o=r[d+"periodalignment"];if(!o)return{vals:s};var y=r[d+"period"],g;if(f(y)){if(y=+y,y<=0)return{vals:s}}else if(typeof y=="string"&&y.charAt(0)==="M"){var b=+y.substring(1);if(b>0&&Math.round(b)===b)g=b;else return{vals:s}}for(var v=n.calendar,_=o==="start",u=o==="end",T=r[d+"period0"],c=m(T,v)||0,A=[],k=[],p=[],w=s.length,h=0;h<w;h++){var D=s[h],S,M,L;if(g){for(S=Math.round((D-c)/(g*a)),L=x(c,g*S,v);L>D;)L=x(L,-g,v);for(;L<=D;)L=x(L,g,v);M=x(L,-g,v)}else{for(S=Math.round((D-c)/y),L=c+S*y;L>D;)L-=y;for(;L<=D;)L+=y;M=L-y}A[h]=_?M:u?L:(M+L)/2,k[h]=M,p[h]=L}return{vals:A,starts:k,ends:p}}},{"../../constants/numerical":491,"../../lib":515,"fast-isnumeric":190}],564:[function(e,B,V){B.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},{}],565:[function(e,B,V){var f=e("@plotly/d3"),l=e("fast-isnumeric"),m=e("../../lib"),x=e("../../constants/numerical").FP_SAFE,t=e("../../registry"),a=e("../../components/drawing"),i=e("./axis_ids"),r=i.getFromId,n=i.isLinked;B.exports={getAutoRange:d,makePadFn:o,doAutoRange:v,findExtremes:_,concatExtremes:b};function d(w,h){var D,S,M=[],L=w._fullLayout,R=o(L,h,0),z=o(L,h,1),P=b(w,h),I=P.min,U=P.max;if(I.length===0||U.length===0)return m.simpleMap(h.range,h.r2l);var O=I[0].val,G=U[0].val;for(D=1;D<I.length&&O===G;D++)O=Math.min(O,I[D].val);for(D=1;D<U.length&&O===G;D++)G=Math.max(G,U[D].val);var $=!1;if(h.range){var tt=m.simpleMap(h.range,h.r2l);$=tt[1]<tt[0]}h.autorange==="reversed"&&($=!0,h.autorange=!0);var Z=h.rangemode,X=Z==="tozero",J=Z==="nonnegative",st=h._length,at=st/10,lt=0,F,H,et,q,W,K;for(D=0;D<I.length;D++)for(F=I[D],S=0;S<U.length;S++)H=U[S],K=H.val-F.val-s(h,F.val,H.val),K>0&&(W=st-R(F)-z(H),W>at?K/W>lt&&(et=F,q=H,lt=K/W):K/st>lt&&(et={val:F.val,nopad:1},q={val:H.val,nopad:1},lt=K/st));function nt(ut,pt){return Math.max(ut,z(pt))}if(O===G){var it=O-1,ot=O+1;if(X)if(O===0)M=[0,1];else{var ct=(O>0?U:I).reduce(nt,0),bt=O/(1-Math.min(.5,ct/st));M=O>0?[0,bt]:[bt,0]}else J?M=[Math.max(0,it),Math.max(1,ot)]:M=[it,ot]}else X?(et.val>=0&&(et={val:0,nopad:1}),q.val<=0&&(q={val:0,nopad:1})):J&&(et.val-lt*R(et)<0&&(et={val:0,nopad:1}),q.val<=0&&(q={val:1,nopad:1})),lt=(q.val-et.val-s(h,F.val,H.val))/(st-R(et)-z(q)),M=[et.val-lt*R(et),q.val+lt*z(q)];return $&&M.reverse(),m.simpleMap(M,h.l2r||Number)}function s(w,h,D){var S=0;if(w.rangebreaks)for(var M=w.locateBreaks(h,D),L=0;L<M.length;L++){var R=M[L];S+=R.max-R.min}return S}function o(w,h,D){var S=.05*h._length,M=h._anchorAxis||{};if((h.ticklabelposition||"").indexOf("inside")!==-1||(M.ticklabelposition||"").indexOf("inside")!==-1){var L=h.autorange==="reversed";if(!L){var R=m.simpleMap(h.range,h.r2l);L=R[1]<R[0]}L&&(D=!D)}var z=0;return n(w,h._id)||(z=g(w,h,D)),S=Math.max(z,S),h.constrain==="domain"&&h._inputDomain&&(S*=(h._inputDomain[1]-h._inputDomain[0])/(h.domain[1]-h.domain[0])),function(I){return I.nopad?0:I.pad+(I.extrapad?S:z)}}var y=3;function g(w,h,D){var S=0,M=h._id.charAt(0)==="x";for(var L in w._plots){var R=w._plots[L];if(!(h._id!==R.xaxis._id&&h._id!==R.yaxis._id)){var z=(M?R.yaxis:R.xaxis)||{};if((z.ticklabelposition||"").indexOf("inside")!==-1&&(!D&&(z.side==="left"||z.side==="bottom")||D&&(z.side==="top"||z.side==="right"))){if(z._vals){var P=m.deg2rad(z._tickAngles[z._id+"tick"]||0),I=Math.abs(Math.cos(P)),U=Math.abs(Math.sin(P));if(!z._vals[0].bb){var O=z._id+"tick",G=z._selections[O];G.each(function(st){var at=f.select(this),lt=at.select(".text-math-group");lt.empty()&&(st.bb=a.bBox(at.node()))})}for(var $=0;$<z._vals.length;$++){var tt=z._vals[$],Z=tt.bb;if(Z){var X=2*y+Z.width,J=2*y+Z.height;S=Math.max(S,M?Math.max(X*I,J*U):Math.max(J*I,X*U))}}}z.ticks==="inside"&&z.ticklabelposition==="inside"&&(S+=z.ticklen||0)}}}return S}function b(w,h,D){var S=h._id,M=w._fullData,L=w._fullLayout,R=[],z=[],P,I,U;function O(X,J){for(P=0;P<J.length;P++){var st=X[J[P]],at=(st._extremes||{})[S];if(st.visible===!0&&at){for(I=0;I<at.min.length;I++)U=at.min[I],u(R,U.val,U.pad,{extrapad:U.extrapad});for(I=0;I<at.max.length;I++)U=at.max[I],T(z,U.val,U.pad,{extrapad:U.extrapad})}}}if(O(M,h._traceIndices),O(L.annotations||[],h._annIndices||[]),O(L.shapes||[],h._shapeIndices||[]),h._matchGroup&&!D){for(var G in h._matchGroup)if(G!==h._id){var $=r(w,G),tt=b(w,$,!0),Z=h._length/$._length;for(I=0;I<tt.min.length;I++)U=tt.min[I],u(R,U.val,U.pad*Z,{extrapad:U.extrapad});for(I=0;I<tt.max.length;I++)U=tt.max[I],T(z,U.val,U.pad*Z,{extrapad:U.extrapad})}}return{min:R,max:z}}function v(w,h,D){if(h.setScale(),h.autorange){h.range=D?D.slice():d(w,h),h._r=h.range.slice(),h._rl=m.simpleMap(h._r,h.r2l);var S=h._input,M={};M[h._attr+".range"]=h.range,M[h._attr+".autorange"]=h.autorange,t.call("_storeDirectGUIEdit",w.layout,w._fullLayout._preGUI,M),S.range=h.range.slice(),S.autorange=h.autorange}var L=h._anchorAxis;if(L&&L.rangeslider){var R=L.rangeslider[h._name];R&&R.rangemode==="auto"&&(R.range=d(w,h)),L._input.rangeslider[h._name]=m.extendFlat({},R)}}function _(w,h,D){D||(D={}),w._m||w.setScale();var S=[],M=[],L=h.length,R=D.padded||!1,z=D.tozero&&(w.type==="linear"||w.type==="-"),P=w.type==="log",I=!1,U=D.vpadLinearized||!1,O,G,$,tt,Z,X,J,st,at;function lt(it){if(Array.isArray(it))return I=!0,function(ct){return Math.max(Number(it[ct]||0),0)};var ot=Math.max(Number(it||0),0);return function(){return ot}}var F=lt((w._m>0?D.ppadplus:D.ppadminus)||D.ppad||0),H=lt((w._m>0?D.ppadminus:D.ppadplus)||D.ppad||0),et=lt(D.vpadplus||D.vpad),q=lt(D.vpadminus||D.vpad);if(!I){if(st=1/0,at=-1/0,P)for(O=0;O<L;O++)G=h[O],G<st&&G>0&&(st=G),G>at&&G<x&&(at=G);else for(O=0;O<L;O++)G=h[O],G<st&&G>-x&&(st=G),G>at&&G<x&&(at=G);h=[st,at],L=2}var W={tozero:z,extrapad:R};function K(it){$=h[it],l($)&&(X=F(it),J=H(it),U?(tt=w.c2l($)-q(it),Z=w.c2l($)+et(it)):(st=$-q(it),at=$+et(it),P&&st<at/10&&(st=at/10),tt=w.c2l(st),Z=w.c2l(at)),z&&(tt=Math.min(0,tt),Z=Math.max(0,Z)),A(tt)&&u(S,tt,J,W),A(Z)&&T(M,Z,X,W))}var nt=Math.min(6,L);for(O=0;O<nt;O++)K(O);for(O=L-1;O>=nt;O--)K(O);return{min:S,max:M,opts:D}}function u(w,h,D,S){c(w,h,D,S,k)}function T(w,h,D,S){c(w,h,D,S,p)}function c(w,h,D,S,M){for(var L=S.tozero,R=S.extrapad,z=!0,P=0;P<w.length&&z;P++){var I=w[P];if(M(I.val,h)&&I.pad>=D&&(I.extrapad||!R)){z=!1;break}else M(h,I.val)&&I.pad<=D&&(R||!I.extrapad)&&(w.splice(P,1),P--)}if(z){var U=L&&h===0;w.push({val:h,pad:U?0:D,extrapad:U?!1:R})}}function A(w){return l(w)&&Math.abs(w)<x}function k(w,h){return w<=h}function p(w,h){return w>=h}},{"../../components/drawing":389,"../../constants/numerical":491,"../../lib":515,"../../registry":647,"./axis_ids":570,"@plotly/d3":58,"fast-isnumeric":190}],566:[function(e,B,V){var f=e("@plotly/d3"),l=e("fast-isnumeric"),m=e("../../plots/plots"),x=e("../../registry"),t=e("../../lib"),a=t.strTranslate,i=e("../../lib/svg_text_utils"),r=e("../../components/titles"),n=e("../../components/color"),d=e("../../components/drawing"),s=e("./layout_attributes"),o=e("./clean_ticks"),y=e("../../constants/numerical"),g=y.ONEMAXYEAR,b=y.ONEAVGYEAR,v=y.ONEMINYEAR,_=y.ONEMAXQUARTER,u=y.ONEAVGQUARTER,T=y.ONEMINQUARTER,c=y.ONEMAXMONTH,A=y.ONEAVGMONTH,k=y.ONEMINMONTH,p=y.ONEWEEK,w=y.ONEDAY,h=w/2,D=y.ONEHOUR,S=y.ONEMIN,M=y.ONESEC,L=y.MINUS_SIGN,R=y.BADNUM,z={K:"zeroline"},P={K:"gridline",L:"path"},I={K:"minor-gridline",L:"path"},U={K:"tick",L:"path"},O={K:"tick",L:"text"},G={width:["x","r","l","xl","xr"],height:["y","t","b","yt","yb"],right:["r","xr"],left:["l","xl"],top:["t","yt"],bottom:["b","yb"]},$=e("../../constants/alignment"),tt=$.MID_SHIFT,Z=$.CAP_SHIFT,X=$.LINE_SPACING,J=$.OPPOSITE_SIDE,st=3,at=B.exports={};at.setConvert=e("./set_convert");var lt=e("./axis_autotype"),F=e("./axis_ids"),H=F.idSort,et=F.isLinked;at.id2name=F.id2name,at.name2id=F.name2id,at.cleanId=F.cleanId,at.list=F.list,at.listIds=F.listIds,at.getFromId=F.getFromId,at.getFromTrace=F.getFromTrace;var q=e("./autorange");at.getAutoRange=q.getAutoRange,at.findExtremes=q.findExtremes;var W=1e-4;function K(Et){var Mt=(Et[1]-Et[0])*W;return[Et[0]-Mt,Et[1]+Mt]}at.coerceRef=function(Et,Mt,se,ce,de,Se){var ye=ce.charAt(ce.length-1),Ae=se._fullLayout._subplots[ye+"axis"],Ge=ce+"ref",sr={};return de||(de=Ae[0]||(typeof Se=="string"?Se:Se[0])),Se||(Se=de),Ae=Ae.concat(Ae.map(function(Er){return Er+" domain"})),sr[Ge]={valType:"enumerated",values:Ae.concat(Se?typeof Se=="string"?[Se]:Se:[]),dflt:de},t.coerce(Et,Mt,sr,Ge)},at.getRefType=function(Et){return Et===void 0?Et:Et==="paper"?"paper":Et==="pixel"?"pixel":/( domain)$/.test(Et)?"domain":"range"},at.coercePosition=function(Et,Mt,se,ce,de,Se){var ye,Ae,Ge=at.getRefType(ce);if(Ge!=="range")ye=t.ensureNumber,Ae=se(de,Se);else{var sr=at.getFromId(Mt,ce);Se=sr.fraction2r(Se),Ae=se(de,Se),ye=sr.cleanPos}Et[de]=ye(Ae)},at.cleanPosition=function(Et,Mt,se){var ce=se==="paper"||se==="pixel"?t.ensureNumber:at.getFromId(Mt,se).cleanPos;return ce(Et)},at.redrawComponents=function(Et,Mt){Mt=Mt||at.listIds(Et);var se=Et._fullLayout;function ce(de,Se,ye,Ae){for(var Ge=x.getComponentMethod(de,Se),sr={},Er=0;Er<Mt.length;Er++)for(var kr=se[at.id2name(Mt[Er])],Mr=kr[ye],Gr=0;Gr<Mr.length;Gr++){var ar=Mr[Gr];if(!sr[ar]&&(Ge(Et,ar),sr[ar]=1,Ae))return}}ce("annotations","drawOne","_annIndices"),ce("shapes","drawOne","_shapeIndices"),ce("images","draw","_imgIndices",!0),ce("selections","drawOne","_selectionIndices")};var nt=at.getDataConversions=function(Et,Mt,se,ce){var de,Se=se==="x"||se==="y"||se==="z"?se:ce;if(Array.isArray(Se)){if(de={type:lt(ce,void 0,{autotypenumbers:Et._fullLayout.autotypenumbers}),_categories:[]},at.setConvert(de),de.type==="category")for(var ye=0;ye<ce.length;ye++)de.d2c(ce[ye])}else de=at.getFromTrace(Et,Mt,Se);return de?{d2c:de.d2c,c2d:de.c2d}:Se==="ids"?{d2c:ot,c2d:ot}:{d2c:it,c2d:it}};function it(Et){return+Et}function ot(Et){return String(Et)}at.getDataToCoordFunc=function(Et,Mt,se,ce){return nt(Et,Mt,se,ce).d2c},at.counterLetter=function(Et){var Mt=Et.charAt(0);if(Mt==="x")return"y";if(Mt==="y")return"x"},at.minDtick=function(Et,Mt,se,ce){["log","category","multicategory"].indexOf(Et.type)!==-1||!ce?Et._minDtick=0:Et._minDtick===void 0?(Et._minDtick=Mt,Et._forceTick0=se):Et._minDtick&&((Et._minDtick/Mt+1e-6)%1<2e-6&&((se-Et._forceTick0)/Mt%1+1.000001)%1<2e-6?(Et._minDtick=Mt,Et._forceTick0=se):((Mt/Et._minDtick+1e-6)%1>2e-6||((se-Et._forceTick0)/Et._minDtick%1+1.000001)%1>2e-6)&&(Et._minDtick=0))},at.saveRangeInitial=function(Et,Mt){for(var se=at.list(Et,"",!0),ce=!1,de=0;de<se.length;de++){var Se=se[de],ye=Se._rangeInitial===void 0,Ae=ye||!(Se.range[0]===Se._rangeInitial[0]&&Se.range[1]===Se._rangeInitial[1]);(ye&&Se.autorange===!1||Mt&&Ae)&&(Se._rangeInitial=Se.range.slice(),ce=!0)}return ce},at.saveShowSpikeInitial=function(Et,Mt){for(var se=at.list(Et,"",!0),ce=!1,de="on",Se=0;Se<se.length;Se++){var ye=se[Se],Ae=ye._showSpikeInitial===void 0,Ge=Ae||ye.showspikes!==ye._showspikes;(Ae||Mt&&Ge)&&(ye._showSpikeInitial=ye.showspikes,ce=!0),de==="on"&&!ye.showspikes&&(de="off")}return Et._fullLayout._cartesianSpikesEnabled=de,ce},at.autoBin=function(Et,Mt,se,ce,de,Se){var ye=t.aggNums(Math.min,null,Et),Ae=t.aggNums(Math.max,null,Et);if(Mt.type==="category"||Mt.type==="multicategory")return{start:ye-.5,end:Ae+.5,size:Math.max(1,Math.round(Se)||1),_dataSpan:Ae-ye};de||(de=Mt.calendar);var Ge;if(Mt.type==="log"?Ge={type:"linear",range:[ye,Ae]}:Ge={type:Mt.type,range:t.simpleMap([ye,Ae],Mt.c2r,0,de),calendar:de},at.setConvert(Ge),Se=Se&&o.dtick(Se,Ge.type),Se)Ge.dtick=Se,Ge.tick0=o.tick0(void 0,Ge.type,de);else{var sr;if(se)sr=(Ae-ye)/se;else{var Er=t.distinctVals(Et),kr=Math.pow(10,Math.floor(Math.log(Er.minDiff)/Math.LN10)),Mr=kr*t.roundUp(Er.minDiff/kr,[.9,1.9,4.9,9.9],!0);sr=Math.max(Mr,2*t.stdev(Et)/Math.pow(Et.length,ce?.25:.4)),l(sr)||(sr=1)}at.autoTicks(Ge,sr)}var Gr=Ge.dtick,ar=at.tickIncrement(at.tickFirst(Ge),Gr,"reverse",de),xr,Ir;if(typeof Gr=="number")ar=ct(ar,Et,Ge,ye,Ae),Ir=1+Math.floor((Ae-ar)/Gr),xr=ar+Ir*Gr;else for(Ge.dtick.charAt(0)==="M"&&(ar=bt(ar,Et,Gr,ye,de)),xr=ar,Ir=0;xr<=Ae;)xr=at.tickIncrement(xr,Gr,!1,de),Ir++;return{start:Mt.c2r(ar,0,de),end:Mt.c2r(xr,0,de),size:Gr,_dataSpan:Ae-ye}};function ct(Et,Mt,se,ce,de){var Se=0,ye=0,Ae=0,Ge=0;function sr(Gr){return(1+(Gr-Et)*100/se.dtick)%100<2}for(var Er=0;Er<Mt.length;Er++)Mt[Er]%1===0?Ae++:l(Mt[Er])||Ge++,sr(Mt[Er])&&Se++,sr(Mt[Er]+se.dtick/2)&&ye++;var kr=Mt.length-Ge;if(Ae===kr&&se.type!=="date")se.dtick<1?Et=ce-.5*se.dtick:(Et-=.5,Et+se.dtick<ce&&(Et+=se.dtick));else if(ye<kr*.1&&(Se>kr*.3||sr(ce)||sr(de))){var Mr=se.dtick/2;Et+=Et+Mr<ce?Mr:-Mr}return Et}function bt(Et,Mt,se,ce,de){var Se=t.findExactDates(Mt,de),ye=.8;if(Se.exactDays>ye){var Ae=Number(se.substr(1));Se.exactYears>ye&&Ae%12===0?Et=at.tickIncrement(Et,"M6","reverse")+w*1.5:Se.exactMonths>ye?Et=at.tickIncrement(Et,"M1","reverse")+w*15.5:Et-=h;var Ge=at.tickIncrement(Et,se);if(Ge<=ce)return Ge}return Et}at.prepMinorTicks=function(Et,Mt,se){if(!Mt.minor.dtick){delete Et.dtick;var ce=Mt.dtick&&l(Mt._tmin),de;if(ce){var Se=at.tickIncrement(Mt._tmin,Mt.dtick,!0);de=[Mt._tmin,Se*.99+Mt._tmin*.01]}else{var ye=t.simpleMap(Mt.range,Mt.r2l);de=[ye[0],.8*ye[0]+.2*ye[1]]}if(Et.range=t.simpleMap(de,Mt.l2r),Et._isMinor=!0,at.prepTicks(Et,se),ce){var Ae=l(Mt.dtick),Ge=l(Et.dtick),sr=Ae?Mt.dtick:+Mt.dtick.substring(1),Er=Ge?Et.dtick:+Et.dtick.substring(1);Ae&&Ge?ut(sr,Er)?sr===2*p&&Er===2*w&&(Et.dtick=p):sr===2*p&&Er===3*w?Et.dtick=p:sr===p&&!(Mt._input.minor||{}).nticks?Et.dtick=w:pt(sr/Er,2.5)?Et.dtick=sr/2:Et.dtick=sr:String(Mt.dtick).charAt(0)==="M"?Ge?Et.dtick="M1":ut(sr,Er)?sr>=12&&Er===2&&(Et.dtick="M3"):Et.dtick=Mt.dtick:String(Et.dtick).charAt(0)==="L"?String(Mt.dtick).charAt(0)==="L"?ut(sr,Er)||(Et.dtick=pt(sr/Er,2.5)?Mt.dtick/2:Mt.dtick):Et.dtick="D1":Et.dtick==="D2"&&+Mt.dtick>1&&(Et.dtick=1)}Et.range=Mt.range}Mt.minor._tick0Init===void 0&&(Et.tick0=Mt.tick0)};function ut(Et,Mt){return Math.abs((Et/Mt+.5)%1-.5)<.001}function pt(Et,Mt){return Math.abs(Et/Mt-1)<.001}at.prepTicks=function(Et,Mt){var se=t.simpleMap(Et.range,Et.r2l,void 0,void 0,Mt);if(Et.tickmode==="auto"||!Et.dtick){var ce=Et.nticks,de;ce||(Et.type==="category"||Et.type==="multicategory"?(de=Et.tickfont?t.bigFont(Et.tickfont.size||12):15,ce=Et._length/de):(de=Et._id.charAt(0)==="y"?40:80,ce=t.constrain(Et._length/de,4,9)+1),Et._name==="radialaxis"&&(ce*=2)),Et.minor&&Et.minor.tickmode!=="array"||Et.tickmode==="array"&&(ce*=100),Et._roughDTick=Math.abs(se[1]-se[0])/ce,at.autoTicks(Et,Et._roughDTick),Et._minDtick>0&&Et.dtick<Et._minDtick*2&&(Et.dtick=Et._minDtick,Et.tick0=Et.l2r(Et._forceTick0))}Et.ticklabelmode==="period"&&Tt(Et),Et.tick0||(Et.tick0=Et.type==="date"?"2000-01-01":0),Et.type==="date"&&Et.dtick<.1&&(Et.dtick=.1),Yt(Et)};function yt(Et){return+Et.substring(1)}function Tt(Et){var Mt;function se(){return!(l(Et.dtick)||Et.dtick.charAt(0)!=="M")}var ce=se(),de=at.getTickFormat(Et);if(de){var Se=Et._dtickInit!==Et.dtick;/%[fLQsSMX]/.test(de)||(/%[HI]/.test(de)?(Mt=D,Se&&!ce&&Et.dtick<D&&(Et.dtick=D)):/%p/.test(de)?(Mt=h,Se&&!ce&&Et.dtick<h&&(Et.dtick=h)):/%[Aadejuwx]/.test(de)?(Mt=w,Se&&!ce&&Et.dtick<w&&(Et.dtick=w)):/%[UVW]/.test(de)?(Mt=p,Se&&!ce&&Et.dtick<p&&(Et.dtick=p)):/%[Bbm]/.test(de)?(Mt=A,Se&&(ce?yt(Et.dtick)<1:Et.dtick<k)&&(Et.dtick="M1")):/%[q]/.test(de)?(Mt=u,Se&&(ce?yt(Et.dtick)<3:Et.dtick<T)&&(Et.dtick="M3")):/%[Yy]/.test(de)&&(Mt=b,Se&&(ce?yt(Et.dtick)<12:Et.dtick<v)&&(Et.dtick="M12")))}ce=se(),ce&&Et.tick0===Et._dowTick0&&(Et.tick0=Et._rawTick0),Et._definedDelta=Mt}function kt(Et,Mt,se){for(var ce=0;ce<Et.length;ce++){var de=Et[ce].value,Se=ce,ye=ce+1;ce<Et.length-1?(Se=ce,ye=ce+1):ce>0?(Se=ce-1,ye=ce):(Se=ce,ye=ce);var Ae=Et[Se].value,Ge=Et[ye].value,sr=Math.abs(Ge-Ae),Er=se||sr,kr=0;Er>=v?sr>=v&&sr<=g?kr=sr:kr=b:se===u&&Er>=T?sr>=T&&sr<=_?kr=sr:kr=u:Er>=k?sr>=k&&sr<=c?kr=sr:kr=A:se===p&&Er>=p?kr=p:Er>=w?kr=w:se===h&&Er>=h?kr=h:se===D&&Er>=D&&(kr=D);var Mr;kr>=sr&&(kr=sr,Mr=!0);var Gr=de+kr;if(Mt.rangebreaks&&kr>0){for(var ar=84,xr=0,Ir=0;Ir<ar;Ir++){var Hr=(Ir+.5)/ar;Mt.maskBreaks(de*(1-Hr)+Hr*Gr)!==R&&xr++}kr*=xr/ar,kr||(Et[ce].drop=!0),Mr&&sr>p&&(kr=sr)}(kr>0||ce===0)&&(Et[ce].periodX=de+kr/2)}}at.calcTicks=function(Mt,se){for(var ce=Mt.type,de=Mt.calendar,Se=Mt.ticklabelstep,ye=Mt.ticklabelmode==="period",Ae=t.simpleMap(Mt.range,Mt.r2l,void 0,void 0,se),Ge=Ae[1]<Ae[0],sr=Math.min(Ae[0],Ae[1]),Er=Math.max(Ae[0],Ae[1]),kr=Math.max(1e3,Mt._length||0),Mr=[],Gr=[],ar=[],xr=[],Ir=Mt.minor&&(Mt.minor.ticks||Mt.minor.showgrid),Hr=1;Hr>=(Ir?0:1);Hr--){var Cr=!Hr;Hr?(Mt._dtickInit=Mt.dtick,Mt._tick0Init=Mt.tick0):(Mt.minor._dtickInit=Mt.minor.dtick,Mt.minor._tick0Init=Mt.minor.tick0);var ae=Hr?Mt:t.extendFlat({},Mt,Mt.minor);if(Cr?at.prepMinorTicks(ae,Mt,se):at.prepTicks(ae,se),ae.tickmode==="array"){Hr?(ar=[],Mr=zt(Mt)):(xr=[],Gr=zt(Mt));continue}var Le=K(Ae),$e=Le[0],or=Le[1],Dr=l(ae.dtick),Nr=ce==="log"&&!(Dr||ae.dtick.charAt(0)==="L"),Fr=at.tickFirst(ae,se);if(Hr){if(Mt._tmin=Fr,Fr<$e!==Ge)break;(ce==="category"||ce==="multicategory")&&(or=Ge?Math.max(-.5,or):Math.min(Mt._categories.length-.5,or))}var Ar=null,Xr=Fr,Tn;if(Hr){var un;Dr?un=Mt.dtick:ce==="date"?typeof Mt.dtick=="string"&&Mt.dtick.charAt(0)==="M"&&(un=A*Mt.dtick.substring(1)):un=Mt._roughDTick,Tn=Math.round((Mt.r2l(Xr)-Mt.r2l(Mt.tick0))/un)-1}var Un=ae.dtick;for(ae.rangebreaks&&ae._tick0Init!==ae.tick0&&(Xr=ne(Xr,Mt),Ge||(Xr=at.tickIncrement(Xr,Un,!Ge,de))),Hr&&ye&&(Xr=at.tickIncrement(Xr,Un,!Ge,de),Tn--);Ge?Xr>=or:Xr<=or;Xr=at.tickIncrement(Xr,Un,Ge,de)){if(Hr&&Tn++,ae.rangebreaks&&!Ge){if(Xr<$e)continue;if(ae.maskBreaks(Xr)===R&&ne(Xr,ae)>=Er)break}if(ar.length>kr||Xr===Ar)break;Ar=Xr;var Dn={value:Xr};Hr?(Nr&&Xr!==(Xr|0)&&(Dn.simpleLabel=!0),Se>1&&Tn%Se&&(Dn.skipLabel=!0),ar.push(Dn)):(Dn.minor=!0,xr.push(Dn))}}if(Ir){var Xn=Mt.minor.ticks==="inside"&&Mt.ticks==="outside"||Mt.minor.ticks==="outside"&&Mt.ticks==="inside";if(!Xn){for(var Gn=ar.map(function(Ue){return Ue.value}),yi=[],Pi=0;Pi<xr.length;Pi++){var pa=xr[Pi],Wi=pa.value;if(Gn.indexOf(Wi)===-1){for(var Ji=!1,ji=0;!Ji&&ji<ar.length;ji++)1e7+ar[ji].value===1e7+Wi&&(Ji=!0);Ji||yi.push(pa)}}xr=yi}}ye&&kt(ar,Mt,Mt._definedDelta);var Tr;if(Mt.rangebreaks){var gn=Mt._id.charAt(0)==="y",hn=1;Mt.tickmode==="auto"&&(hn=Mt.tickfont?Mt.tickfont.size:12);var Sn=NaN;for(Tr=ar.length-1;Tr>-1;Tr--){if(ar[Tr].drop){ar.splice(Tr,1);continue}ar[Tr].value=ne(ar[Tr].value,Mt);var Zn=Mt.c2p(ar[Tr].value);(gn?Sn>Zn-hn:Sn<Zn+hn)?ar.splice(Ge?Tr+1:Tr,1):Sn=Zn}}te(Mt)&&Math.abs(Ae[1]-Ae[0])===360&&ar.pop(),Mt._tmax=(ar[ar.length-1]||{}).value,Mt._prevDateHead="",Mt._inCalcTicks=!0;var fi,ri=function(Ue){Ue.text="",Mt._prevDateHead=fi};ar=ar.concat(xr);var Rn,jn;for(Tr=0;Tr<ar.length;Tr++){var Gi=ar[Tr].minor,fa=ar[Tr].value;Gi?Gr.push({x:fa,minor:!0}):(fi=Mt._prevDateHead,Rn=at.tickText(Mt,fa,!1,ar[Tr].simpleLabel),jn=ar[Tr].periodX,jn!==void 0&&(Rn.periodX=jn,(jn>Er||jn<sr)&&(jn>Er&&(Rn.periodX=Er),jn<sr&&(Rn.periodX=sr),ri(Rn))),ar[Tr].skipLabel&&ri(Rn),Mr.push(Rn))}return Mr=Mr.concat(Gr),Mt._inCalcTicks=!1,ye&&Mr.length&&(Mr[0].noTick=!0),Mr};function zt(Et){var Mt=t.simpleMap(Et.range,Et.r2l),se=K(Mt),ce=Math.min(se[0],se[1]),de=Math.max(se[0],se[1]),Se=Et.type==="category"?Et.d2l_noadd:Et.d2l;Et.type==="log"&&String(Et.dtick).charAt(0)!=="L"&&(Et.dtick="L"+Math.pow(10,Math.floor(Math.min(Et.range[0],Et.range[1]))-1));for(var ye=[],Ae=0;Ae<=1;Ae++)if(!(Ae&&!Et.minor)){var Ge=Ae?Et.minor.tickvals:Et.tickvals,sr=Ae?[]:Et.ticktext;if(!!Ge){Array.isArray(sr)||(sr=[]);for(var Er=0;Er<Ge.length;Er++){var kr=Se(Ge[Er]);if(kr>ce&&kr<de){var Mr=sr[Er]===void 0?at.tickText(Et,kr):ve(Et,kr,String(sr[Er]));Ae&&(Mr.minor=!0,Mr.text=""),ye.push(Mr)}}}}return Et.rangebreaks&&(ye=ye.filter(function(Gr){return Et.maskBreaks(Gr.x)!==R})),ye}var Rt=[2,5,10],Gt=[1,2,3,6,12],wt=[1,2,5,10,15,30],It=[1,2,3,7,14],$t=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],Qt=[-.301,0,.301,.699,1],Nt=[15,30,45,90,180];function Pt(Et,Mt,se){return Mt*t.roundUp(Et/Mt,se)}at.autoTicks=function(Et,Mt,se){var ce;function de(kr){return Math.pow(kr,Math.floor(Math.log(Mt)/Math.LN10))}if(Et.type==="date"){Et.tick0=t.dateTick0(Et.calendar,0);var Se=2*Mt;if(Se>b)Mt/=b,ce=de(10),Et.dtick="M"+12*Pt(Mt,ce,Rt);else if(Se>A)Mt/=A,Et.dtick="M"+Pt(Mt,1,Gt);else if(Se>w){if(Et.dtick=Pt(Mt,w,Et._hasDayOfWeekBreaks?[1,2,7,14]:It),!se){var ye=at.getTickFormat(Et),Ae=Et.ticklabelmode==="period";Ae&&(Et._rawTick0=Et.tick0),/%[uVW]/.test(ye)?Et.tick0=t.dateTick0(Et.calendar,2):Et.tick0=t.dateTick0(Et.calendar,1),Ae&&(Et._dowTick0=Et.tick0)}}else Se>D?Et.dtick=Pt(Mt,D,Gt):Se>S?Et.dtick=Pt(Mt,S,wt):Se>M?Et.dtick=Pt(Mt,M,wt):(ce=de(10),Et.dtick=Pt(Mt,ce,Rt))}else if(Et.type==="log"){Et.tick0=0;var Ge=t.simpleMap(Et.range,Et.r2l);if(Et._isMinor&&(Mt*=1.5),Mt>.7)Et.dtick=Math.ceil(Mt);else if(Math.abs(Ge[1]-Ge[0])<1){var sr=1.5*Math.abs((Ge[1]-Ge[0])/Mt);Mt=Math.abs(Math.pow(10,Ge[1])-Math.pow(10,Ge[0]))/sr,ce=de(10),Et.dtick="L"+Pt(Mt,ce,Rt)}else Et.dtick=Mt>.3?"D2":"D1"}else Et.type==="category"||Et.type==="multicategory"?(Et.tick0=0,Et.dtick=Math.ceil(Math.max(Mt,1))):te(Et)?(Et.tick0=0,ce=1,Et.dtick=Pt(Mt,ce,Nt)):(Et.tick0=0,ce=de(10),Et.dtick=Pt(Mt,ce,Rt));if(Et.dtick===0&&(Et.dtick=1),!l(Et.dtick)&&typeof Et.dtick!="string"){var Er=Et.dtick;throw Et.dtick=1,"ax.dtick error: "+String(Er)}};function Yt(Et){var Mt=Et.dtick;if(Et._tickexponent=0,!l(Mt)&&typeof Mt!="string"&&(Mt=1),(Et.type==="category"||Et.type==="multicategory")&&(Et._tickround=null),Et.type==="date"){var se=Et.r2l(Et.tick0),ce=Et.l2r(se).replace(/(^-|i)/g,""),de=ce.length;if(String(Mt).charAt(0)==="M")de>10||ce.substr(5)!=="01-01"?Et._tickround="d":Et._tickround=+Mt.substr(1)%12===0?"y":"m";else if(Mt>=w&&de<=10||Mt>=w*15)Et._tickround="d";else if(Mt>=S&&de<=16||Mt>=D)Et._tickround="M";else if(Mt>=M&&de<=19||Mt>=S)Et._tickround="S";else{var Se=Et.l2r(se+Mt).replace(/^-/,"").length;Et._tickround=Math.max(de,Se)-20,Et._tickround<0&&(Et._tickround=4)}}else if(l(Mt)||Mt.charAt(0)==="L"){var ye=Et.range.map(Et.r2d||Number);l(Mt)||(Mt=Number(Mt.substr(1))),Et._tickround=2-Math.floor(Math.log(Mt)/Math.LN10+.01);var Ae=Math.max(Math.abs(ye[0]),Math.abs(ye[1])),Ge=Math.floor(Math.log(Ae)/Math.LN10+.01),sr=Et.minexponent===void 0?3:Et.minexponent;Math.abs(Ge)>sr&&(ee(Et.exponentformat)&&!Xt(Ge)?Et._tickexponent=3*Math.round((Ge-1)/3):Et._tickexponent=Ge)}else Et._tickround=null}at.tickIncrement=function(Et,Mt,se,ce){var de=se?-1:1;if(l(Mt))return t.increment(Et,de*Mt);var Se=Mt.charAt(0),ye=de*Number(Mt.substr(1));if(Se==="M")return t.incrementMonth(Et,ye,ce);if(Se==="L")return Math.log(Math.pow(10,Et)+ye)/Math.LN10;if(Se==="D"){var Ae=Mt==="D2"?Qt:$t,Ge=Et+de*.01,sr=t.roundUp(t.mod(Ge,1),Ae,se);return Math.floor(Ge)+Math.log(f.round(Math.pow(10,sr),1))/Math.LN10}throw"unrecognized dtick "+String(Mt)},at.tickFirst=function(Et,Mt){var se=Et.r2l||Number,ce=t.simpleMap(Et.range,se,void 0,void 0,Mt),de=ce[1]<ce[0],Se=de?Math.floor:Math.ceil,ye=K(ce)[0],Ae=Et.dtick,Ge=se(Et.tick0);if(l(Ae)){var sr=Se((ye-Ge)/Ae)*Ae+Ge;return(Et.type==="category"||Et.type==="multicategory")&&(sr=t.constrain(sr,0,Et._categories.length-1)),sr}var Er=Ae.charAt(0),kr=Number(Ae.substr(1));if(Er==="M"){for(var Mr=0,Gr=Ge,ar,xr,Ir;Mr<10;){if(ar=at.tickIncrement(Gr,Ae,de,Et.calendar),(ar-ye)*(Gr-ye)<=0)return de?Math.min(Gr,ar):Math.max(Gr,ar);xr=(ye-(Gr+ar)/2)/(ar-Gr),Ir=Er+(Math.abs(Math.round(xr))||1)*kr,Gr=at.tickIncrement(Gr,Ir,xr<0?!de:de,Et.calendar),Mr++}return t.error("tickFirst did not converge",Et),Gr}else{if(Er==="L")return Math.log(Se((Math.pow(10,ye)-Ge)/kr)*kr+Ge)/Math.LN10;if(Er==="D"){var Hr=Ae==="D2"?Qt:$t,Cr=t.roundUp(t.mod(ye,1),Hr,de);return Math.floor(ye)+Math.log(f.round(Math.pow(10,Cr),1))/Math.LN10}else throw"unrecognized dtick "+String(Ae)}},at.tickText=function(Et,Mt,se,ce){var de=ve(Et,Mt),Se=Et.tickmode==="array",ye=se||Se,Ae=Et.type,Ge=Ae==="category"?Et.d2l_noadd:Et.d2l,sr;if(Se&&Array.isArray(Et.ticktext)){var Er=t.simpleMap(Et.range,Et.r2l),kr=(Math.abs(Er[1]-Er[0])-(Et._lBreaks||0))/1e4;for(sr=0;sr<Et.ticktext.length&&!(Math.abs(Mt-Ge(Et.tickvals[sr]))<kr);sr++);if(sr<Et.ticktext.length)return de.text=String(Et.ticktext[sr]),de}function Mr(xr){if(xr===void 0)return!0;if(se)return xr==="none";var Ir={first:Et._tmin,last:Et._tmax}[xr];return xr!=="all"&&Mt!==Ir}var Gr=se?"never":Et.exponentformat!=="none"&&Mr(Et.showexponent)?"hide":"";if(Ae==="date"?Re(Et,de,se,ye):Ae==="log"?ir(Et,de,se,ye,Gr):Ae==="category"?Ie(Et,de):Ae==="multicategory"?Be(Et,de,se):te(Et)?ze(Et,de,se,ye,Gr):Ye(Et,de,se,ye,Gr),ce||(Et.tickprefix&&!Mr(Et.showtickprefix)&&(de.text=Et.tickprefix+de.text),Et.ticksuffix&&!Mr(Et.showticksuffix)&&(de.text+=Et.ticksuffix)),Et.tickson==="boundaries"||Et.showdividers){var ar=function(xr){var Ir=Et.l2p(xr);return Ir>=0&&Ir<=Et._length?xr:null};de.xbnd=[ar(de.x-.5),ar(de.x+Et.dtick-.5)]}return de},at.hoverLabelText=function(Et,Mt,se){se&&(Et=t.extendFlat({},Et,{hoverformat:se}));var ce=Array.isArray(Mt)?Mt[0]:Mt,de=Array.isArray(Mt)?Mt[1]:void 0;if(de!==void 0&&de!==ce)return at.hoverLabelText(Et,ce,se)+" - "+at.hoverLabelText(Et,de,se);var Se=Et.type==="log"&&ce<=0,ye=at.tickText(Et,Et.c2l(Se?-ce:ce),"hover").text;return Se?ce===0?"0":L+ye:ye};function ve(Et,Mt,se){var ce=Et.tickfont||{};return{x:Mt,dx:0,dy:0,text:se||"",fontSize:ce.size,font:ce.family,fontColor:ce.color}}function Re(Et,Mt,se,ce){var de=Et._tickround,Se=se&&Et.hoverformat||at.getTickFormat(Et);ce&&(l(de)?de=4:de={y:"m",m:"d",d:"M",M:"S",S:4}[de]);var ye=t.formatDate(Mt.x,Se,de,Et._dateFormat,Et.calendar,Et._extraFormat),Ae,Ge=ye.indexOf(`
`);if(Ge!==-1&&(Ae=ye.substr(Ge+1),ye=ye.substr(0,Ge)),ce&&(ye==="00:00:00"||ye==="00:00"?(ye=Ae,Ae=""):ye.length===8&&(ye=ye.replace(/:00$/,""))),Ae)if(se)de==="d"?ye+=", "+Ae:ye=Ae+(ye?", "+ye:"");else if(!Et._inCalcTicks||Et._prevDateHead!==Ae)Et._prevDateHead=Ae,ye+="<br>"+Ae;else{var sr=_e(Et),Er=Et._trueSide||Et.side;(!sr&&Er==="top"||sr&&Er==="bottom")&&(ye+="<br> ")}Mt.text=ye}function ir(Et,Mt,se,ce,de){var Se=Et.dtick,ye=Mt.x,Ae=Et.tickformat,Ge=typeof Se=="string"&&Se.charAt(0);if(de==="never"&&(de=""),ce&&Ge!=="L"&&(Se="L3",Ge="L"),Ae||Ge==="L")Mt.text=St(Math.pow(10,ye),Et,de,ce);else if(l(Se)||Ge==="D"&&t.mod(ye+.01,1)<.1){var sr=Math.round(ye),Er=Math.abs(sr),kr=Et.exponentformat;kr==="power"||ee(kr)&&Xt(sr)?(sr===0?Mt.text=1:sr===1?Mt.text="10":Mt.text="10<sup>"+(sr>1?"":L)+Er+"</sup>",Mt.fontSize*=1.25):(kr==="e"||kr==="E")&&Er>2?Mt.text="1"+kr+(sr>0?"+":L)+Er:(Mt.text=St(Math.pow(10,ye),Et,"","fakehover"),Se==="D1"&&Et._id.charAt(0)==="y"&&(Mt.dy-=Mt.fontSize/6))}else if(Ge==="D")Mt.text=String(Math.round(Math.pow(10,t.mod(ye,1)))),Mt.fontSize*=.75;else throw"unrecognized dtick "+String(Se);if(Et.dtick==="D1"){var Mr=String(Mt.text).charAt(0);(Mr==="0"||Mr==="1")&&(Et._id.charAt(0)==="y"?Mt.dx-=Mt.fontSize/4:(Mt.dy+=Mt.fontSize/2,Mt.dx+=(Et.range[1]>Et.range[0]?1:-1)*Mt.fontSize*(ye<0?.5:.25)))}}function Ie(Et,Mt){var se=Et._categories[Math.round(Mt.x)];se===void 0&&(se=""),Mt.text=String(se)}function Be(Et,Mt,se){var ce=Math.round(Mt.x),de=Et._categories[ce]||[],Se=de[1]===void 0?"":String(de[1]),ye=de[0]===void 0?"":String(de[0]);se?Mt.text=ye+" - "+Se:(Mt.text=Se,Mt.text2=ye)}function Ye(Et,Mt,se,ce,de){de==="never"?de="":Et.showexponent==="all"&&Math.abs(Mt.x/Et.dtick)<1e-6&&(de="hide"),Mt.text=St(Mt.x,Et,de,ce)}function ze(Et,Mt,se,ce,de){if(Et.thetaunit==="radians"&&!se){var Se=Mt.x/180;if(Se===0)Mt.text="0";else{var ye=Ee(Se);if(ye[1]>=100)Mt.text=St(t.deg2rad(Mt.x),Et,de,ce);else{var Ae=Mt.x<0;ye[1]===1?ye[0]===1?Mt.text="\u03C0":Mt.text=ye[0]+"\u03C0":Mt.text=["<sup>",ye[0],"</sup>","\u2044","<sub>",ye[1],"</sub>","\u03C0"].join(""),Ae&&(Mt.text=L+Mt.text)}}}else Mt.text=St(Mt.x,Et,de,ce)}function Ee(Et){function Mt(Ae,Ge){return Math.abs(Ae-Ge)<=1e-6}function se(Ae,Ge){return Mt(Ge,0)?Ae:se(Ge,Ae%Ge)}function ce(Ae){for(var Ge=1;!Mt(Math.round(Ae*Ge)/Ge,Ae);)Ge*=10;return Ge}var de=ce(Et),Se=Et*de,ye=Math.abs(se(Se,de));return[Math.round(Se/ye),Math.round(de/ye)]}var Wt=["f","p","n","\u03BC","m","","k","M","G","T"];function ee(Et){return Et==="SI"||Et==="B"}function Xt(Et){return Et>14||Et<-15}function St(Et,Mt,se,ce){var de=Et<0,Se=Mt._tickround,ye=se||Mt.exponentformat||"B",Ae=Mt._tickexponent,Ge=at.getTickFormat(Mt),sr=Mt.separatethousands;if(ce){var Er={exponentformat:ye,minexponent:Mt.minexponent,dtick:Mt.showexponent==="none"?Mt.dtick:l(Et)&&Math.abs(Et)||1,range:Mt.showexponent==="none"?Mt.range.map(Mt.r2d):[0,Et||1]};Yt(Er),Se=(Number(Er._tickround)||0)+4,Ae=Er._tickexponent,Mt.hoverformat&&(Ge=Mt.hoverformat)}if(Ge)return Mt._numFormat(Ge)(Et).replace(/-/g,L);var kr=Math.pow(10,-Se)/2;if(ye==="none"&&(Ae=0),Et=Math.abs(Et),Et<kr)Et="0",de=!1;else{if(Et+=kr,Ae&&(Et*=Math.pow(10,-Ae),Se+=Ae),Se===0)Et=String(Math.floor(Et));else if(Se<0){Et=String(Math.round(Et)),Et=Et.substr(0,Et.length+Se);for(var Mr=Se;Mr<0;Mr++)Et+="0"}else{Et=String(Et);var Gr=Et.indexOf(".")+1;Gr&&(Et=Et.substr(0,Gr+Se).replace(/\.?0+$/,""))}Et=t.numSeparate(Et,Mt._separators,sr)}if(Ae&&ye!=="hide"){ee(ye)&&Xt(Ae)&&(ye="power");var ar;Ae<0?ar=L+-Ae:ye!=="power"?ar="+"+Ae:ar=String(Ae),ye==="e"||ye==="E"?Et+=ye+ar:ye==="power"?Et+="\xD710<sup>"+ar+"</sup>":ye==="B"&&Ae===9?Et+="B":ee(ye)&&(Et+=Wt[Ae/3+5])}return de?L+Et:Et}at.getTickFormat=function(Et){var Mt;function se(Ge){return typeof Ge!="string"?Ge:Number(Ge.replace("M",""))*A}function ce(Ge,sr){var Er=["L","D"];if(typeof Ge==typeof sr){if(typeof Ge=="number")return Ge-sr;var kr=Er.indexOf(Ge.charAt(0)),Mr=Er.indexOf(sr.charAt(0));return kr===Mr?Number(Ge.replace(/(L|D)/g,""))-Number(sr.replace(/(L|D)/g,"")):kr-Mr}else return typeof Ge=="number"?1:-1}function de(Ge,sr,Er){var kr=Er||function(ar){return ar},Mr=sr[0],Gr=sr[1];return(!Mr&&typeof Mr!="number"||kr(Mr)<=kr(Ge))&&(!Gr&&typeof Gr!="number"||kr(Gr)>=kr(Ge))}function Se(Ge,sr){var Er=sr[0]===null,kr=sr[1]===null,Mr=ce(Ge,sr[0])>=0,Gr=ce(Ge,sr[1])<=0;return(Er||Mr)&&(kr||Gr)}var ye,Ae;if(Et.tickformatstops&&Et.tickformatstops.length>0)switch(Et.type){case"date":case"linear":{for(Mt=0;Mt<Et.tickformatstops.length;Mt++)if(Ae=Et.tickformatstops[Mt],Ae.enabled&&de(Et.dtick,Ae.dtickrange,se)){ye=Ae;break}break}case"log":{for(Mt=0;Mt<Et.tickformatstops.length;Mt++)if(Ae=Et.tickformatstops[Mt],Ae.enabled&&Se(Et.dtick,Ae.dtickrange)){ye=Ae;break}break}}return ye?ye.value:Et.tickformat},at.getSubplots=function(Et,Mt){var se=Et._fullLayout._subplots,ce=se.cartesian.concat(se.gl2d||[]),de=Mt?at.findSubplotsWithAxis(ce,Mt):ce;return de.sort(function(Se,ye){var Ae=Se.substr(1).split("y"),Ge=ye.substr(1).split("y");return Ae[0]===Ge[0]?+Ae[1]-+Ge[1]:+Ae[0]-+Ge[0]}),de},at.findSubplotsWithAxis=function(Et,Mt){for(var se=new RegExp(Mt._id.charAt(0)==="x"?"^"+Mt._id+"y":Mt._id+"$"),ce=[],de=0;de<Et.length;de++){var Se=Et[de];se.test(Se)&&ce.push(Se)}return ce},at.makeClipPaths=function(Et){var Mt=Et._fullLayout;if(!Mt._hasOnlyLargeSploms){var se={_offset:0,_length:Mt.width,_id:""},ce={_offset:0,_length:Mt.height,_id:""},de=at.list(Et,"x",!0),Se=at.list(Et,"y",!0),ye=[],Ae,Ge;for(Ae=0;Ae<de.length;Ae++)for(ye.push({x:de[Ae],y:ce}),Ge=0;Ge<Se.length;Ge++)Ae===0&&ye.push({x:se,y:Se[Ge]}),ye.push({x:de[Ae],y:Se[Ge]});var sr=Mt._clips.selectAll(".axesclip").data(ye,function(Er){return Er.x._id+Er.y._id});sr.enter().append("clipPath").classed("axesclip",!0).attr("id",function(Er){return"clip"+Mt._uid+Er.x._id+Er.y._id}).append("rect"),sr.exit().remove(),sr.each(function(Er){f.select(this).select("rect").attr({x:Er.x._offset||0,y:Er.y._offset||0,width:Er.x._length||1,height:Er.y._length||1})})}},at.draw=function(Et,Mt,se){var ce=Et._fullLayout;Mt==="redraw"&&ce._paper.selectAll("g.subplot").each(function(Se){var ye=Se[0],Ae=ce._plots[ye];if(Ae){var Ge=Ae.xaxis,sr=Ae.yaxis;Ae.xaxislayer.selectAll("."+Ge._id+"tick").remove(),Ae.yaxislayer.selectAll("."+sr._id+"tick").remove(),Ae.xaxislayer.selectAll("."+Ge._id+"tick2").remove(),Ae.yaxislayer.selectAll("."+sr._id+"tick2").remove(),Ae.xaxislayer.selectAll("."+Ge._id+"divider").remove(),Ae.yaxislayer.selectAll("."+sr._id+"divider").remove(),Ae.minorGridlayer&&Ae.minorGridlayer.selectAll("path").remove(),Ae.gridlayer&&Ae.gridlayer.selectAll("path").remove(),Ae.zerolinelayer&&Ae.zerolinelayer.selectAll("path").remove(),ce._infolayer.select(".g-"+Ge._id+"title").remove(),ce._infolayer.select(".g-"+sr._id+"title").remove()}});var de=!Mt||Mt==="redraw"?at.listIds(Et):Mt;return t.syncOrAsync(de.map(function(Se){return function(){if(!!Se){var ye=at.getFromId(Et,Se),Ae=at.drawOne(Et,ye,se);return ye._r=ye.range.slice(),ye._rl=t.simpleMap(ye._r,ye.r2l),Ae}}}))},at.drawOne=function(Et,Mt,se){se=se||{};var ce,de,Se;Mt.setScale();var ye=Et._fullLayout,Ae=Mt._id,Ge=Ae.charAt(0),sr=at.counterLetter(Ae),Er=ye._plots[Mt._mainSubplot];if(!Er)return;var kr=Er[Ge+"axislayer"],Mr=Mt._mainLinePosition,Gr=Mt._mainMirrorPosition,ar=Mt._vals=at.calcTicks(Mt),xr=[Mt.mirror,Mr,Gr].join("_");for(ce=0;ce<ar.length;ce++)ar[ce].axInfo=xr;Mt._selections={},Mt._tickAngles&&(Mt._prevTickAngles=Mt._tickAngles),Mt._tickAngles={},Mt._depth=null;var Ir={};function Hr(Ue){var pr=Ae+(Ue||"tick");return Ir[pr]||(Ir[pr]=me(Mt,pr)),Ir[pr]}if(!!Mt.visible){var Cr=at.makeTransTickFn(Mt),ae=at.makeTransTickLabelFn(Mt),Le,$e,or=Mt.ticks==="inside",Dr=Mt.ticks==="outside";if(Mt.tickson==="boundaries"){var Nr=Zt(Mt,ar);$e=at.clipEnds(Mt,Nr),Le=or?$e:Nr}else $e=at.clipEnds(Mt,ar),Le=or&&Mt.ticklabelmode!=="period"?$e:ar;var Fr=Mt._gridVals=$e,Ar=Te(Mt,ar);if(!ye._hasOnlyLargeSploms){var Xr=Mt._subplotsWith,Tn={};for(ce=0;ce<Xr.length;ce++){de=Xr[ce],Se=ye._plots[de];var un=Se[sr+"axis"],Un=un._mainAxis._id;if(!Tn[Un]){Tn[Un]=1;var Dn=Ge==="x"?"M0,"+un._offset+"v"+un._length:"M"+un._offset+",0h"+un._length;at.drawGrid(Et,Mt,{vals:Fr,counterAxis:un,layer:Se.gridlayer.select("."+Ae),minorLayer:Se.minorGridlayer.select("."+Ae),path:Dn,transFn:Cr}),at.drawZeroLine(Et,Mt,{counterAxis:un,layer:Se.zerolinelayer,path:Dn,transFn:Cr})}}}var Xn,Gn=at.getTickSigns(Mt),yi=at.getTickSigns(Mt,"minor");if(Mt.ticks||Mt.minor&&Mt.minor.ticks){var Pi=at.makeTickPath(Mt,Mr,Gn[2]),pa=at.makeTickPath(Mt,Mr,yi[2],{minor:!0}),Wi,Ji,ji,Tr;if(Mt._anchorAxis&&Mt.mirror&&Mt.mirror!==!0?(Wi=at.makeTickPath(Mt,Gr,Gn[3]),Ji=at.makeTickPath(Mt,Gr,yi[3],{minor:!0}),ji=Pi+Wi,Tr=pa+Ji):(Wi="",Ji="",ji=Pi,Tr=pa),Mt.showdividers&&Dr&&Mt.tickson==="boundaries"){var gn={};for(ce=0;ce<Ar.length;ce++)gn[Ar[ce].x]=1;Xn=function(Ue){return gn[Ue.x]?Wi:ji}}else Xn=function(Ue){return Ue.minor?Tr:ji}}if(at.drawTicks(Et,Mt,{vals:Le,layer:kr,path:Xn,transFn:Cr}),Mt.mirror==="allticks"){var hn=Object.keys(Mt._linepositions||{});for(ce=0;ce<hn.length;ce++){de=hn[ce],Se=ye._plots[de];var Sn=Mt._linepositions[de]||[],Zn=Sn[0],fi=Sn[1],ri=Sn[2],Rn=at.makeTickPath(Mt,Zn,ri?Gn[0]:yi[0],{minor:ri})+at.makeTickPath(Mt,fi,ri?Gn[1]:yi[1],{minor:ri});at.drawTicks(Et,Mt,{vals:Le,layer:Se[Ge+"axislayer"],path:Rn,transFn:Cr})}}var jn=[];if(jn.push(function(){return at.drawLabels(Et,Mt,{vals:ar,layer:kr,plotinfo:Se,transFn:ae,labelFns:at.makeLabelFns(Mt,Mr)})}),Mt.type==="multicategory"){var Gi={x:2,y:10}[Ge];jn.push(function(){var Ue={x:"height",y:"width"}[Ge],pr=Hr()[Ue]+Gi+(Mt._tickAngles[Ae+"tick"]?Mt.tickfont.size*X:0);return at.drawLabels(Et,Mt,{vals:qt(Mt,ar),layer:kr,cls:Ae+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:Cr,labelFns:at.makeLabelFns(Mt,Mr+pr*Gn[4])})}),jn.push(function(){return Mt._depth=Gn[4]*(Hr("tick2")[Mt.side]-Mr),Xe(Et,Mt,{vals:Ar,layer:kr,path:at.makeTickPath(Mt,Mr,Gn[4],{len:Mt._depth}),transFn:Cr})})}else Mt.title.hasOwnProperty("standoff")&&jn.push(function(){Mt._depth=Gn[4]*(Hr()[Mt.side]-Mr)});var fa=x.getComponentMethod("rangeslider","isVisible")(Mt);return jn.push(function(){var Ue=Mt.side.charAt(0),pr=J[Mt.side].charAt(0),an=at.getPxPosition(Et,Mt),vn=Dr?Mt.ticklen:0,rn,An,wn,fn;if((Mt.automargin||fa)&&(Mt.type==="multicategory"?rn=Hr("tick2"):(rn=Hr(),Ge==="x"&&Ue==="b"&&(Mt._depth=Math.max(rn.width>0?rn.bottom-an:0,vn)))),Mt.automargin){An={x:0,y:0,r:0,l:0,t:0,b:0};var yr=[0,1];if(Ge==="x"){if(Ue==="b"?An[Ue]=Mt._depth:(An[Ue]=Mt._depth=Math.max(rn.width>0?an-rn.top:0,vn),yr.reverse()),rn.width>0){var br=rn.right-(Mt._offset+Mt._length);br>0&&(An.xr=1,An.r=br);var Or=Mt._offset-rn.left;Or>0&&(An.xl=0,An.l=Or)}}else if(Ue==="l"?An[Ue]=Mt._depth=Math.max(rn.height>0?an-rn.left:0,vn):(An[Ue]=Mt._depth=Math.max(rn.height>0?rn.right-an:0,vn),yr.reverse()),rn.height>0){var yn=rn.bottom-(Mt._offset+Mt._length);yn>0&&(An.yb=0,An.b=yn);var Nn=Mt._offset-rn.top;Nn>0&&(An.yt=1,An.t=Nn)}An[sr]=Mt.anchor==="free"?Mt.position:Mt._anchorAxis.domain[yr[0]],Mt.title.text!==ye._dfltTitle[Ge]&&(An[Ue]+=er(Mt)+(Mt.title.standoff||0)),Mt.mirror&&Mt.anchor!=="free"&&(wn={x:0,y:0,r:0,l:0,t:0,b:0},wn[pr]=Mt.linewidth,Mt.mirror&&Mt.mirror!==!0&&(wn[pr]+=vn),Mt.mirror===!0||Mt.mirror==="ticks"?wn[sr]=Mt._anchorAxis.domain[yr[1]]:(Mt.mirror==="all"||Mt.mirror==="allticks")&&(wn[sr]=[Mt._counterDomainMin,Mt._counterDomainMax][yr[1]]))}fa&&(fn=x.getComponentMethod("rangeslider","autoMarginOpts")(Et,Mt)),typeof Mt.automargin=="string"&&(Vt(An,Mt.automargin),Vt(wn,Mt.automargin)),m.autoMargin(Et,le(Mt),An),m.autoMargin(Et,Qe(Mt),wn),m.autoMargin(Et,Ze(Mt),fn)}),!se.skipTitle&&!(fa&&Mt.side==="bottom")&&jn.push(function(){return We(Et,Mt)}),t.syncOrAsync(jn)}};function Vt(Et,Mt){if(!!Et){var se=Object.keys(G).reduce(function(ce,de){return Mt.indexOf(de)!==-1&&G[de].forEach(function(Se){ce[Se]=1}),ce},{});Object.keys(Et).forEach(function(ce){se[ce]||(ce.length===1?Et[ce]=0:delete Et[ce])})}}function Zt(Et,Mt){var se=[],ce,de=function(Se,ye){var Ae=Se.xbnd[ye];Ae!==null&&se.push(t.extendFlat({},Se,{x:Ae}))};if(Mt.length){for(ce=0;ce<Mt.length;ce++)de(Mt[ce],0);de(Mt[ce-1],1)}return se}function qt(Et,Mt){for(var se=[],ce={},de=0;de<Mt.length;de++){var Se=Mt[de];ce[Se.text2]?ce[Se.text2].push(Se.x):ce[Se.text2]=[Se.x]}for(var ye in ce)se.push(ve(Et,t.interp(ce[ye],.5),ye));return se}function Te(Et,Mt){var se=[],ce,de,Se=Mt.length&&Mt[Mt.length-1].x<Mt[0].x,ye=function(Ge,sr){var Er=Ge.xbnd[sr];Er!==null&&se.push(t.extendFlat({},Ge,{x:Er}))};if(Et.showdividers&&Mt.length){for(ce=0;ce<Mt.length;ce++){var Ae=Mt[ce];Ae.text2!==de&&ye(Ae,Se?1:0),de=Ae.text2}ye(Mt[ce-1],Se?0:1)}return se}function me(Et,Mt){var se,ce,de,Se;return Et._selections[Mt].size()?(se=1/0,ce=-1/0,de=1/0,Se=-1/0,Et._selections[Mt].each(function(){var ye=Qr(this),Ae=d.bBox(ye.node().parentNode);se=Math.min(se,Ae.top),ce=Math.max(ce,Ae.bottom),de=Math.min(de,Ae.left),Se=Math.max(Se,Ae.right)})):(se=0,ce=0,de=0,Se=0),{top:se,bottom:ce,left:de,right:Se,height:ce-se,width:Se-de}}at.getTickSigns=function(Et,Mt){var se=Et._id.charAt(0),ce={x:"top",y:"right"}[se],de=Et.side===ce?1:-1,Se=[-1,1,de,-de],ye=Mt?(Et.minor||{}).ticks:Et.ticks;return ye!=="inside"==(se==="x")&&(Se=Se.map(function(Ae){return-Ae})),Et.side&&Se.push({l:-1,t:-1,r:1,b:1}[Et.side.charAt(0)]),Se},at.makeTransTickFn=function(Et){return Et._id.charAt(0)==="x"?function(Mt){return a(Et._offset+Et.l2p(Mt.x),0)}:function(Mt){return a(0,Et._offset+Et.l2p(Mt.x))}},at.makeTransTickLabelFn=function(Et){var Mt=Ke(Et),se=Mt[0],ce=Mt[1];return Et._id.charAt(0)==="x"?function(de){return a(se+Et._offset+Et.l2p(Ne(de)),ce)}:function(de){return a(ce,se+Et._offset+Et.l2p(Ne(de)))}};function Ne(Et){return Et.periodX!==void 0?Et.periodX:Et.x}function Ke(Et){var Mt=Et.ticklabelposition||"",se=function(Gr){return Mt.indexOf(Gr)!==-1},ce=se("top"),de=se("left"),Se=se("right"),ye=se("bottom"),Ae=se("inside"),Ge=ye||de||ce||Se;if(!Ge&&!Ae)return[0,0];var sr=Et.side,Er=Ge?(Et.tickwidth||0)/2:0,kr=st,Mr=Et.tickfont?Et.tickfont.size:12;return(ye||ce)&&(Er+=Mr*Z,kr+=(Et.linewidth||0)/2),(de||Se)&&(Er+=(Et.linewidth||0)/2,kr+=st),Ae&&sr==="top"&&(kr-=Mr*(1-Z)),(de||ce)&&(Er=-Er),(sr==="bottom"||sr==="right")&&(kr=-kr),[Ge?Er:0,Ae?kr:0]}at.makeTickPath=function(Et,Mt,se,ce){ce||(ce={});var de=ce.minor;if(de&&!Et.minor)return"";var Se=ce.len!==void 0?ce.len:de?Et.minor.ticklen:Et.ticklen,ye=Et._id.charAt(0),Ae=(Et.linewidth||1)/2;return ye==="x"?"M0,"+(Mt+Ae*se)+"v"+Se*se:"M"+(Mt+Ae*se)+",0h"+Se*se},at.makeLabelFns=function(Et,Mt,se){var ce=Et.ticklabelposition||"",de=function(Tn){return ce.indexOf(Tn)!==-1},Se=de("top"),ye=de("left"),Ae=de("right"),Ge=de("bottom"),sr=Ge||ye||Se||Ae,Er=de("inside"),kr=ce==="inside"&&Et.ticks==="inside"||!Er&&Et.ticks==="outside"&&Et.tickson!=="boundaries",Mr=0,Gr=0,ar=kr?Et.ticklen:0;if(Er?ar*=-1:sr&&(ar=0),kr&&(Mr+=ar,se)){var xr=t.deg2rad(se);Mr=ar*Math.cos(xr)+1,Gr=ar*Math.sin(xr)}Et.showticklabels&&(kr||Et.showline)&&(Mr+=.2*Et.tickfont.size),Mr+=(Et.linewidth||1)/2*(Er?-1:1);var Ir={labelStandoff:Mr,labelShift:Gr},Hr,Cr,ae,Le,$e=0,or=Et.side,Dr=Et._id.charAt(0),Nr=Et.tickangle,Fr;if(Dr==="x")Fr=!Er&&or==="bottom"||Er&&or==="top",Le=Fr?1:-1,Er&&(Le*=-1),Hr=Gr*Le,Cr=Mt+Mr*Le,ae=Fr?1:-.2,Math.abs(Nr)===90&&(Er?ae+=tt:Nr===-90&&or==="bottom"?ae=Z:Nr===90&&or==="top"?ae=tt:ae=.5,$e=tt/2*(Nr/90)),Ir.xFn=function(Tn){return Tn.dx+Hr+$e*Tn.fontSize},Ir.yFn=function(Tn){return Tn.dy+Cr+Tn.fontSize*ae},Ir.anchorFn=function(Tn,un){if(sr){if(ye)return"end";if(Ae)return"start"}return!l(un)||un===0||un===180?"middle":un*Le<0!==Er?"end":"start"},Ir.heightFn=function(Tn,un,Un){return un<-60||un>60?-.5*Un:Et.side==="top"!==Er?-Un:0};else if(Dr==="y"){if(Fr=!Er&&or==="left"||Er&&or==="right",Le=Fr?1:-1,Er&&(Le*=-1),Hr=Mr,Cr=Gr*Le,ae=0,!Er&&Math.abs(Nr)===90&&(Nr===-90&&or==="left"||Nr===90&&or==="right"?ae=Z:ae=.5),Er){var Ar=l(Nr)?+Nr:0;if(Ar!==0){var Xr=t.deg2rad(Ar);$e=Math.abs(Math.sin(Xr))*Z*Le,ae=0}}Ir.xFn=function(Tn){return Tn.dx+Mt-(Hr+Tn.fontSize*ae)*Le+$e*Tn.fontSize},Ir.yFn=function(Tn){return Tn.dy+Cr+Tn.fontSize*tt},Ir.anchorFn=function(Tn,un){return l(un)&&Math.abs(un)===90?"middle":Fr?"end":"start"},Ir.heightFn=function(Tn,un,Un){return Et.side==="right"&&(un*=-1),un<-30?-Un:un<30?-.5*Un:0}}return Ir};function He(Et){return[Et.text,Et.x,Et.axInfo,Et.font,Et.fontSize,Et.fontColor].join("_")}at.drawTicks=function(Et,Mt,se){se=se||{};var ce=Mt._id+"tick",de=[].concat(Mt.minor&&Mt.minor.ticks?se.vals.filter(function(ye){return ye.minor&&!ye.noTick}):[]).concat(Mt.ticks?se.vals.filter(function(ye){return!ye.minor&&!ye.noTick}):[]),Se=se.layer.selectAll("path."+ce).data(de,He);Se.exit().remove(),Se.enter().append("path").classed(ce,1).classed("ticks",1).classed("crisp",se.crisp!==!1).each(function(ye){return n.stroke(f.select(this),ye.minor?Mt.minor.tickcolor:Mt.tickcolor)}).style("stroke-width",function(ye){return d.crispRound(Et,ye.minor?Mt.minor.tickwidth:Mt.tickwidth,1)+"px"}).attr("d",se.path).style("display",null),Pe(Mt,[U]),Se.attr("transform",se.transFn)},at.drawGrid=function(Et,Mt,se){se=se||{};var ce=Mt._id+"grid",de=Mt.minor&&Mt.minor.showgrid,Se=de?se.vals.filter(function(Hr){return Hr.minor}):[],ye=Mt.showgrid?se.vals.filter(function(Hr){return!Hr.minor}):[],Ae=se.counterAxis;if(Ae&&at.shouldShowZeroLine(Et,Mt,Ae))for(var Ge=Mt.tickmode==="array",sr=0;sr<ye.length;sr++){var Er=ye[sr].x;if(Ge?!Er:Math.abs(Er)<Mt.dtick/100)if(ye=ye.slice(0,sr).concat(ye.slice(sr+1)),Ge)sr--;else break}Mt._gw=d.crispRound(Et,Mt.gridwidth,1);for(var kr=de?d.crispRound(Et,Mt.minor.gridwidth,1):0,Mr=se.layer,Gr=se.minorLayer,ar=1;ar>=0;ar--){var xr=ar?Mr:Gr;if(!!xr){var Ir=xr.selectAll("path."+ce).data(ar?ye:Se,He);Ir.exit().remove(),Ir.enter().append("path").classed(ce,1).classed("crisp",se.crisp!==!1),Ir.attr("transform",se.transFn).attr("d",se.path).each(function(Hr){return n.stroke(f.select(this),Hr.minor?Mt.minor.gridcolor:Mt.gridcolor||"#ddd")}).style("stroke-dasharray",function(Hr){return d.dashStyle(Hr.minor?Mt.minor.griddash:Mt.griddash,Hr.minor?Mt.minor.gridwidth:Mt.gridwidth)}).style("stroke-width",function(Hr){return(Hr.minor?kr:Mt._gw)+"px"}).style("display",null),typeof se.path=="function"&&Ir.attr("d",se.path)}}Pe(Mt,[P,I])},at.drawZeroLine=function(Et,Mt,se){se=se||se;var ce=Mt._id+"zl",de=at.shouldShowZeroLine(Et,Mt,se.counterAxis),Se=se.layer.selectAll("path."+ce).data(de?[{x:0,id:Mt._id}]:[]);Se.exit().remove(),Se.enter().append("path").classed(ce,1).classed("zl",1).classed("crisp",se.crisp!==!1).each(function(){se.layer.selectAll("path").sort(function(ye,Ae){return H(ye.id,Ae.id)})}),Se.attr("transform",se.transFn).attr("d",se.path).call(n.stroke,Mt.zerolinecolor||n.defaultLine).style("stroke-width",d.crispRound(Et,Mt.zerolinewidth,Mt._gw||1)+"px").style("display",null),Pe(Mt,[z])},at.drawLabels=function(Et,Mt,se){se=se||{};var ce=Et._fullLayout,de=Mt._id,Se=de.charAt(0),ye=se.cls||de+"tick",Ae=se.vals.filter(function(Le){return Le.text}),Ge=se.labelFns,sr=se.secondary?0:Mt.tickangle,Er=(Mt._prevTickAngles||{})[ye],kr=se.layer.selectAll("g."+ye).data(Mt.showticklabels?Ae:[],He),Mr=[];kr.enter().append("g").classed(ye,1).append("text").attr("text-anchor","middle").each(function(Le){var $e=f.select(this),or=Et._promises.length;$e.call(i.positionText,Ge.xFn(Le),Ge.yFn(Le)).call(d.font,Le.font,Le.fontSize,Le.fontColor).text(Le.text).call(i.convertToTspans,Et),Et._promises[or]?Mr.push(Et._promises.pop().then(function(){Gr($e,sr)})):Gr($e,sr)}),Pe(Mt,[O]),kr.exit().remove(),se.repositionOnUpdate&&kr.each(function(Le){f.select(this).select("text").call(i.positionText,Ge.xFn(Le),Ge.yFn(Le))});function Gr(Le,$e){Le.each(function(or){var Dr=f.select(this),Nr=Dr.select(".text-math-group"),Fr=Ge.anchorFn(or,$e),Ar=se.transFn.call(Dr.node(),or)+(l($e)&&+$e!=0?" rotate("+$e+","+Ge.xFn(or)+","+(Ge.yFn(or)-or.fontSize/2)+")":""),Xr=i.lineCount(Dr),Tn=X*or.fontSize,un=Ge.heightFn(or,l($e)?+$e:0,(Xr-1)*Tn);if(un&&(Ar+=a(0,un)),Nr.empty()){var Un=Dr.select("text");Un.attr({transform:Ar,"text-anchor":Fr}),Un.style("opacity",1),Mt._adjustTickLabelsOverflow&&Mt._adjustTickLabelsOverflow()}else{var Dn=d.bBox(Nr.node()).width,Xn=Dn*{end:-.5,start:.5}[Fr];Nr.attr("transform",Ar+a(Xn,0))}})}Mt._adjustTickLabelsOverflow=function(){var Le=Mt.ticklabeloverflow;if(!(!Le||Le==="allow")){var $e=Le.indexOf("hide")!==-1,or=Mt._id.charAt(0)==="x",Dr=0,Nr=or?Et._fullLayout.width:Et._fullLayout.height;if(Le.indexOf("domain")!==-1){var Fr=t.simpleMap(Mt.range,Mt.r2l);Dr=Mt.l2p(Fr[0])+Mt._offset,Nr=Mt.l2p(Fr[1])+Mt._offset}var Ar=Math.min(Dr,Nr),Xr=Math.max(Dr,Nr),Tn=Mt.side,un=1/0,Un=-1/0;kr.each(function(yi){var Pi=f.select(this),pa=Pi.select(".text-math-group");if(pa.empty()){var Wi=d.bBox(Pi.node()),Ji=0;or?(Wi.right>Xr||Wi.left<Ar)&&(Ji=1):(Wi.bottom>Xr||Wi.top+(Mt.tickangle?0:yi.fontSize/4)<Ar)&&(Ji=1);var ji=Pi.select("text");Ji?$e&&ji.style("opacity",0):(ji.style("opacity",1),Tn==="bottom"||Tn==="right"?un=Math.min(un,or?Wi.top:Wi.left):un=-1/0,Tn==="top"||Tn==="left"?Un=Math.max(Un,or?Wi.bottom:Wi.right):Un=1/0)}});for(var Dn in ce._plots){var Xn=ce._plots[Dn];if(!(Mt._id!==Xn.xaxis._id&&Mt._id!==Xn.yaxis._id)){var Gn=or?Xn.yaxis:Xn.xaxis;Gn&&(Gn["_visibleLabelMin_"+Mt._id]=un,Gn["_visibleLabelMax_"+Mt._id]=Un)}}}},Mt._hideCounterAxisInsideTickLabels=function(Le){var $e=Mt._id.charAt(0)==="x",or=[];for(var Dr in ce._plots){var Nr=ce._plots[Dr];Mt._id!==Nr.xaxis._id&&Mt._id!==Nr.yaxis._id||or.push($e?Nr.yaxis:Nr.xaxis)}or.forEach(function(Fr,Ar){Fr&&_e(Fr)&&(Le||[z,I,P,U,O]).forEach(function(Xr){var Tn=Xr.K==="tick"&&Xr.L==="text"&&Mt.ticklabelmode==="period",un=ce._plots[Mt._mainSubplot],Un;Xr.K===z.K?Un=un.zerolinelayer.selectAll("."+Mt._id+"zl"):Xr.K===I.K?Un=un.minorGridlayer.selectAll("."+Mt._id):Xr.K===P.K?Un=un.gridlayer.selectAll("."+Mt._id):Un=un[Mt._id.charAt(0)+"axislayer"],Un.each(function(){var Dn=f.select(this);Xr.L&&(Dn=Dn.selectAll(Xr.L)),Dn.each(function(Xn){var Gn=Mt.l2p(Tn?Ne(Xn):Xn.x)+Mt._offset,yi=f.select(this);Gn<Mt["_visibleLabelMax_"+Fr._id]&&Gn>Mt["_visibleLabelMin_"+Fr._id]?yi.style("display","none"):Xr.K==="tick"&&!Ar&&yi.style("display",null)})})})})},Gr(kr,Er+1?Er:sr);function ar(){return Mr.length&&Promise.all(Mr)}var xr=null;function Ir(){if(Gr(kr,sr),Ae.length&&Se==="x"&&!l(sr)&&(Mt.type!=="log"||String(Mt.dtick).charAt(0)!=="D")){xr=0;var Le=0,$e=[],or;if(kr.each(function(Wi){Le=Math.max(Le,Wi.fontSize);var Ji=Mt.l2p(Wi.x),ji=Qr(this),Tr=d.bBox(ji.node());$e.push({top:0,bottom:10,height:10,left:Ji-Tr.width/2,right:Ji+Tr.width/2+2,width:Tr.width+2})}),(Mt.tickson==="boundaries"||Mt.showdividers)&&!se.secondary){var Dr=2;for(Mt.ticks&&(Dr+=Mt.tickwidth/2),or=0;or<$e.length;or++){var Nr=Ae[or].xbnd,Fr=$e[or];if(Nr[0]!==null&&Fr.left-Mt.l2p(Nr[0])<Dr||Nr[1]!==null&&Mt.l2p(Nr[1])-Fr.right<Dr){xr=90;break}}}else{var Ar=Ae.length,Xr=Math.abs((Ae[Ar-1].x-Ae[0].x)*Mt._m)/(Ar-1),Tn=Mt.ticklabelposition||"",un=function(Wi){return Tn.indexOf(Wi)!==-1},Un=un("top"),Dn=un("left"),Xn=un("right"),Gn=un("bottom"),yi=Gn||Dn||Un||Xn,Pi=yi?(Mt.tickwidth||0)+2*st:0,pa=Xr<Le*2.5||Mt.type==="multicategory"||Mt._name==="realaxis";for(or=0;or<$e.length-1;or++)if(t.bBoxIntersect($e[or],$e[or+1],Pi)){xr=pa?90:30;break}}xr&&Gr(kr,xr)}}Mt._selections&&(Mt._selections[ye]=kr);var Hr=[ar];Mt.automargin&&ce._redrawFromAutoMarginCount&&Er===90?(xr=90,Hr.push(function(){Gr(kr,Er)})):Hr.push(Ir),Mt._tickAngles&&Hr.push(function(){Mt._tickAngles[ye]=xr===null?l(sr)?sr:0:xr});var Cr=Mt._anchorAxis;Cr&&Cr.autorange&&_e(Mt)&&!et(ce,Mt._id)&&(ce._insideTickLabelsAutorange||(ce._insideTickLabelsAutorange={}),ce._insideTickLabelsAutorange[Cr._name+".autorange"]=Cr.autorange,Hr.push(function(){kr.each(function($e,or){var Dr=Qr(this),Nr=Dr.select(".text-math-group");Nr.empty()&&(Mt._vals[or].bb=d.bBox(Dr.node()))})}));var ae=t.syncOrAsync(Hr);return ae&&ae.then&&Et._promises.push(ae),ae};function Xe(Et,Mt,se){var ce=Mt._id+"divider",de=se.vals,Se=se.layer.selectAll("path."+ce).data(de,He);Se.exit().remove(),Se.enter().insert("path",":first-child").classed(ce,1).classed("crisp",1).call(n.stroke,Mt.dividercolor).style("stroke-width",d.crispRound(Et,Mt.dividerwidth,1)+"px"),Se.attr("transform",se.transFn).attr("d",se.path)}at.getPxPosition=function(Et,Mt){var se=Et._fullLayout._size,ce=Mt._id.charAt(0),de=Mt.side,Se;if(Mt.anchor!=="free"?Se=Mt._anchorAxis:ce==="x"?Se={_offset:se.t+(1-(Mt.position||0))*se.h,_length:0}:ce==="y"&&(Se={_offset:se.l+(Mt.position||0)*se.w,_length:0}),de==="top"||de==="left")return Se._offset;if(de==="bottom"||de==="right")return Se._offset+Se._length};function er(Et){var Mt=Et.title.font.size,se=(Et.title.text.match(i.BR_TAG_ALL)||[]).length;return Et.title.hasOwnProperty("standoff")?se?Mt*(Z+se*X):Mt*Z:se?Mt*(se+1)*X:Mt}function We(Et,Mt){var se=Et._fullLayout,ce=Mt._id,de=ce.charAt(0),Se=Mt.title.font.size,ye;if(Mt.title.hasOwnProperty("standoff"))ye=Mt._depth+Mt.title.standoff+er(Mt);else{var Ae=_e(Mt);if(Mt.type==="multicategory")ye=Mt._depth;else{var Ge=1.5*Se;Ae&&(Ge=.5*Se,Mt.ticks==="outside"&&(Ge+=Mt.ticklen)),ye=10+Ge+(Mt.linewidth?Mt.linewidth-1:0)}Ae||(de==="x"?ye+=Mt.side==="top"?Se*(Mt.showticklabels?1:0):Se*(Mt.showticklabels?1.5:.5):ye+=Mt.side==="right"?Se*(Mt.showticklabels?1:.5):Se*(Mt.showticklabels?.5:0))}var sr=at.getPxPosition(Et,Mt),Er,kr,Mr;de==="x"?(kr=Mt._offset+Mt._length/2,Mr=Mt.side==="top"?sr-ye:sr+ye):(Mr=Mt._offset+Mt._length/2,kr=Mt.side==="right"?sr+ye:sr-ye,Er={rotate:"-90",offset:0});var Gr;if(Mt.type!=="multicategory"){var ar=Mt._selections[Mt._id+"tick"];if(Gr={selection:ar,side:Mt.side},ar&&ar.node()&&ar.node().parentNode){var xr=d.getTranslate(ar.node().parentNode);Gr.offsetLeft=xr.x,Gr.offsetTop=xr.y}Mt.title.hasOwnProperty("standoff")&&(Gr.pad=0)}return r.draw(Et,ce+"title",{propContainer:Mt,propName:Mt._name+".title.text",placeholder:se._dfltTitle[de],avoid:Gr,transform:Er,attributes:{x:kr,y:Mr,"text-anchor":"middle"}})}at.shouldShowZeroLine=function(Et,Mt,se){var ce=t.simpleMap(Mt.range,Mt.r2l);return ce[0]*ce[1]<=0&&Mt.zeroline&&(Mt.type==="linear"||Mt.type==="-")&&!(Mt.rangebreaks&&Mt.maskBreaks(0)===R)&&(hr(Mt,0)||!Wr(Et,Mt,se,ce)||dn(Et,Mt))},at.clipEnds=function(Et,Mt){return Mt.filter(function(se){return hr(Et,se.x)})};function hr(Et,Mt){var se=Et.l2p(Mt);return se>1&&se<Et._length-1}function Wr(Et,Mt,se,ce){var de=se._mainAxis;if(!de)return;var Se=Et._fullLayout,ye=Mt._id.charAt(0),Ae=at.counterLetter(Mt._id),Ge=Mt._offset+(Math.abs(ce[0])<Math.abs(ce[1])==(ye==="x")?0:Mt._length);function sr(ar){if(!ar.showline||!ar.linewidth)return!1;var xr=Math.max((ar.linewidth+Mt.zerolinewidth)/2,1);function Ir(ae){return typeof ae=="number"&&Math.abs(ae-Ge)<xr}if(Ir(ar._mainLinePosition)||Ir(ar._mainMirrorPosition))return!0;var Hr=ar._linepositions||{};for(var Cr in Hr)if(Ir(Hr[Cr][0])||Ir(Hr[Cr][1]))return!0}var Er=Se._plots[se._mainSubplot];if(!(Er.mainplotinfo||Er).overlays.length)return sr(se);for(var kr=at.list(Et,Ae),Mr=0;Mr<kr.length;Mr++){var Gr=kr[Mr];if(Gr._mainAxis===de&&sr(Gr))return!0}}function dn(Et,Mt){for(var se=Et._fullData,ce=Mt._mainSubplot,de=Mt._id.charAt(0),Se=0;Se<se.length;Se++){var ye=se[Se];if(ye.visible===!0&&ye.xaxis+ye.yaxis===ce&&(x.traceIs(ye,"bar-like")&&ye.orientation==={x:"h",y:"v"}[de]||ye.fill&&ye.fill.charAt(ye.fill.length-1)===de))return!0}return!1}function Qr(Et){var Mt=f.select(Et),se=Mt.select(".text-math-group");return se.empty()?Mt.select("text"):se}at.allowAutoMargin=function(Et){for(var Mt=at.list(Et,"",!0),se=0;se<Mt.length;se++){var ce=Mt[se];ce.automargin&&(m.allowAutoMargin(Et,le(ce)),ce.mirror&&m.allowAutoMargin(Et,Qe(ce))),x.getComponentMethod("rangeslider","isVisible")(ce)&&m.allowAutoMargin(Et,Ze(ce))}};function le(Et){return Et._id+".automargin"}function Qe(Et){return le(Et)+".mirror"}function Ze(Et){return Et._id+".rangeslider"}at.swap=function(Et,Mt){for(var se=Ve(Et,Mt),ce=0;ce<se.length;ce++)oe(Et,se[ce].x,se[ce].y)};function Ve(Et,Mt){var se=[],ce,de;for(ce=0;ce<Mt.length;ce++){var Se=[],ye=Et._fullData[Mt[ce]].xaxis,Ae=Et._fullData[Mt[ce]].yaxis;if(!(!ye||!Ae)){for(de=0;de<se.length;de++)(se[de].x.indexOf(ye)!==-1||se[de].y.indexOf(Ae)!==-1)&&Se.push(de);if(!Se.length){se.push({x:[ye],y:[Ae]});continue}var Ge=se[Se[0]],sr;if(Se.length>1)for(de=1;de<Se.length;de++)sr=se[Se[de]],_r(Ge.x,sr.x),_r(Ge.y,sr.y);_r(Ge.x,[ye]),_r(Ge.y,[Ae])}}return se}function _r(Et,Mt){for(var se=0;se<Mt.length;se++)Et.indexOf(Mt[se])===-1&&Et.push(Mt[se])}function oe(Et,Mt,se){var ce=[],de=[],Se=Et.layout,ye,Ae;for(ye=0;ye<Mt.length;ye++)ce.push(at.getFromId(Et,Mt[ye]));for(ye=0;ye<se.length;ye++)de.push(at.getFromId(Et,se[ye]));var Ge=Object.keys(s),sr=["anchor","domain","overlaying","position","side","tickangle","editType"],Er=["linear","log"];for(ye=0;ye<Ge.length;ye++){var kr=Ge[ye],Mr=ce[0][kr],Gr=de[0][kr],ar=!0,xr=!1,Ir=!1;if(!(kr.charAt(0)==="_"||typeof Mr=="function"||sr.indexOf(kr)!==-1)){for(Ae=1;Ae<ce.length&&ar;Ae++){var Hr=ce[Ae][kr];kr==="type"&&Er.indexOf(Mr)!==-1&&Er.indexOf(Hr)!==-1&&Mr!==Hr?xr=!0:Hr!==Mr&&(ar=!1)}for(Ae=1;Ae<de.length&&ar;Ae++){var Cr=de[Ae][kr];kr==="type"&&Er.indexOf(Gr)!==-1&&Er.indexOf(Cr)!==-1&&Gr!==Cr?Ir=!0:de[Ae][kr]!==Gr&&(ar=!1)}ar&&(xr&&(Se[ce[0]._name].type="linear"),Ir&&(Se[de[0]._name].type="linear"),Ht(Se,kr,ce,de,Et._fullLayout._dfltTitle))}}for(ye=0;ye<Et._fullLayout.annotations.length;ye++){var ae=Et._fullLayout.annotations[ye];Mt.indexOf(ae.xref)!==-1&&se.indexOf(ae.yref)!==-1&&t.swapAttrs(Se.annotations[ye],["?"])}}function Ht(Et,Mt,se,ce,de){var Se=t.nestedProperty,ye=Se(Et[se[0]._name],Mt).get(),Ae=Se(Et[ce[0]._name],Mt).get(),Ge;for(Mt==="title"&&(ye&&ye.text===de.x&&(ye.text=de.y),Ae&&Ae.text===de.y&&(Ae.text=de.x)),Ge=0;Ge<se.length;Ge++)Se(Et,se[Ge]._name+"."+Mt).set(Ae);for(Ge=0;Ge<ce.length;Ge++)Se(Et,ce[Ge]._name+"."+Mt).set(ye)}function te(Et){return Et._id==="angularaxis"}function ne(Et,Mt){for(var se=Mt._rangebreaks.length,ce=0;ce<se;ce++){var de=Mt._rangebreaks[ce];if(Et>=de.min&&Et<de.max)return de.max}return Et}function _e(Et){return(Et.ticklabelposition||"").indexOf("inside")!==-1}function Pe(Et,Mt){_e(Et._anchorAxis||{})&&Et._hideCounterAxisInsideTickLabels&&Et._hideCounterAxisInsideTickLabels(Mt)}},{"../../components/color":367,"../../components/drawing":389,"../../components/titles":476,"../../constants/alignment":483,"../../constants/numerical":491,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/plots":628,"../../registry":647,"./autorange":565,"./axis_autotype":567,"./axis_ids":570,"./clean_ticks":572,"./layout_attributes":579,"./set_convert":585,"@plotly/d3":58,"fast-isnumeric":190}],567:[function(e,B,V){var f=e("fast-isnumeric"),l=e("../../lib"),m=e("../../constants/numerical").BADNUM,x=l.isArrayOrTypedArray,t=l.isDateTime,a=l.cleanNumber,i=Math.round;B.exports=function(b,v,_){var u=b,T=_.noMultiCategory;if(x(u)&&!u.length)return"-";if(!T&&y(u))return"multicategory";if(T&&Array.isArray(u[0])){for(var c=[],A=0;A<u.length;A++)if(x(u[A]))for(var k=0;k<u[A].length;k++)c.push(u[A][k]);u=c}if(d(u,v))return"date";var p=_.autotypenumbers!=="strict";return o(u,p)?"category":n(u,p)?"linear":"-"};function r(g,b){return b?f(g):typeof g=="number"}function n(g,b){for(var v=g.length,_=0;_<v;_++)if(r(g[_],b))return!0;return!1}function d(g,b){for(var v=g.length,_=s(v),u=0,T=0,c={},A=0;A<v;A+=_){var k=i(A),p=g[k],w=String(p);c[w]||(c[w]=1,t(p,b)&&u++,f(p)&&T++)}return u>T*2}function s(g){return Math.max(1,(g-1)/1e3)}function o(g,b){for(var v=g.length,_=s(v),u=0,T=0,c={},A=0;A<v;A+=_){var k=i(A),p=g[k],w=String(p);if(!c[w]){c[w]=1;var h=typeof p;h==="boolean"?T++:(b?a(p)!==m:h==="number")?u++:h==="string"&&T++}}return T>u*2}function y(g){return x(g[0])&&x(g[1])}},{"../../constants/numerical":491,"../../lib":515,"fast-isnumeric":190}],568:[function(e,B,V){var f=e("fast-isnumeric"),l=e("../../registry"),m=e("../../lib"),x=e("../../plot_api/plot_template"),t=e("../array_container_defaults"),a=e("./layout_attributes"),i=e("./tick_value_defaults"),r=e("./tick_mark_defaults"),n=e("./tick_label_defaults"),d=e("./prefix_suffix_defaults"),s=e("./category_order_defaults"),o=e("./line_grid_defaults"),y=e("./set_convert"),g=e("./constants").WEEKDAY_PATTERN,b=e("./constants").HOUR_PATTERN;B.exports=function(c,A,k,p,w){var h=p.letter,D=p.font||{},S=p.splomStash||{},M=k("visible",!p.visibleDflt),L=A._template||{},R=A.type||L.type||"-",z;if(R==="date"){var P=l.getComponentMethod("calendars","handleDefaults");P(c,A,"calendar",p.calendar),p.noTicklabelmode||(z=k("ticklabelmode"))}var I="";(!p.noTicklabelposition||R==="multicategory")&&(I=m.coerce(c,A,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:z==="period"?["outside","inside"]:h==="x"?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),p.noTicklabeloverflow||k("ticklabeloverflow",I.indexOf("inside")!==-1?"hide past domain":R==="category"||R==="multicategory"?"allow":"hide past div"),y(A,w);var U=!A.isValidRange(c.range);U&&p.reverseDflt&&(U="reversed");var O=k("autorange",U);O&&(R==="linear"||R==="-")&&k("rangemode"),k("range"),A.cleanRange(),s(c,A,k,p),R!=="category"&&!p.noHover&&k("hoverformat");var G=k("color"),$=G!==a.color.dflt?G:D.color,tt=S.label||w._dfltTitle[h];if(d(c,A,k,R,p),!M)return A;k("title.text",tt),m.coerceFont(k,"title.font",{family:D.family,size:m.bigFont(D.size),color:$}),i(c,A,k,R);var Z=p.hasMinor;if(Z&&(x.newContainer(A,"minor"),i(c,A,k,R,{isMinor:!0})),n(c,A,k,R,p),r(c,A,k,p),Z){var X=p.isMinor;p.isMinor=!0,r(c,A,k,p),p.isMinor=X}o(c,A,k,{dfltColor:G,bgColor:p.bgColor,showGrid:p.showGrid,hasMinor:Z,attributes:a}),Z&&!A.minor.ticks&&!A.minor.showgrid&&delete A.minor,(A.showline||A.ticks)&&k("mirror"),p.automargin&&k("automargin");var J=R==="multicategory";if(!p.noTickson&&(R==="category"||J)&&(A.ticks||A.showgrid)){var st;J&&(st="boundaries");var at=k("tickson",st);at==="boundaries"&&delete A.ticklabelposition}if(J){var lt=k("showdividers");lt&&(k("dividercolor"),k("dividerwidth"))}if(R==="date")if(t(c,A,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:v}),!A.rangebreaks.length)delete A.rangebreaks;else{for(var F=0;F<A.rangebreaks.length;F++)if(A.rangebreaks[F].pattern===g){A._hasDayOfWeekBreaks=!0;break}if(y(A,w),w._has("scattergl")||w._has("splom"))for(var H=0;H<p.data.length;H++){var et=p.data[H];(et.type==="scattergl"||et.type==="splom")&&(et.visible=!1,m.warn(et.type+" traces do not work on axes with rangebreaks. Setting trace "+et.index+" to `visible: false`."))}}return A};function v(T,c,A){function k(z,P){return m.coerce(T,c,a.rangebreaks,z,P)}var p=k("enabled");if(p){var w=k("bounds");if(w&&w.length>=2){var h="",D,S;if(w.length===2){for(D=0;D<2;D++)if(S=u(w[D]),S){h=g;break}}var M=k("pattern",h);if(M===g)for(D=0;D<2;D++)S=u(w[D]),S&&(c.bounds[D]=w[D]=S-1);if(M)for(D=0;D<2;D++)switch(S=w[D],M){case g:if(!f(S)){c.enabled=!1;return}if(S=+S,S!==Math.floor(S)||S<0||S>=7){c.enabled=!1;return}c.bounds[D]=w[D]=S;break;case b:if(!f(S)){c.enabled=!1;return}if(S=+S,S<0||S>24){c.enabled=!1;return}c.bounds[D]=w[D]=S;break}if(A.autorange===!1){var L=A.range;if(L[0]<L[1]){if(w[0]<L[0]&&w[1]>L[1]){c.enabled=!1;return}}else if(w[0]>L[0]&&w[1]<L[1]){c.enabled=!1;return}}}else{var R=k("values");if(R&&R.length)k("dvalue");else{c.enabled=!1;return}}}}var _={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function u(T){if(typeof T=="string")return _[T.substr(0,3).toLowerCase()]}},{"../../lib":515,"../../plot_api/plot_template":555,"../../registry":647,"../array_container_defaults":561,"./category_order_defaults":571,"./constants":573,"./layout_attributes":579,"./line_grid_defaults":581,"./prefix_suffix_defaults":583,"./set_convert":585,"./tick_label_defaults":587,"./tick_mark_defaults":588,"./tick_value_defaults":589,"fast-isnumeric":190}],569:[function(e,B,V){var f=e("../../constants/docs"),l=f.FORMAT_LINK,m=f.DATE_FORMAT_LINK;function x(i,r){return{valType:"string",dflt:"",editType:"none",description:(r?t:a)("hover text",i)+["By default the values are formatted using "+(r?"generic number format":"`"+i+"axis.hoverformat`")+"."].join(" ")}}function t(i,r){return["Sets the "+i+" formatting rule"+(r?"for `"+r+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+l+"."].join(" ")}function a(i,r){return t(i,r)+[" And for dates see: "+m+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}B.exports={axisHoverFormat:x,descriptionOnlyNumbers:t,descriptionWithDates:a}},{"../../constants/docs":486}],570:[function(e,B,V){var f=e("../../registry"),l=e("./constants");V.id2name=function(t){if(!(typeof t!="string"||!t.match(l.AX_ID_PATTERN))){var a=t.split(" ")[0].substr(1);return a==="1"&&(a=""),t.charAt(0)+"axis"+a}},V.name2id=function(t){if(!!t.match(l.AX_NAME_PATTERN)){var a=t.substr(5);return a==="1"&&(a=""),t.charAt(0)+a}},V.cleanId=function(t,a,i){var r=/( domain)$/.test(t);if(!(typeof t!="string"||!t.match(l.AX_ID_PATTERN))&&!(a&&t.charAt(0)!==a)&&!(r&&!i)){var n=t.split(" ")[0].substr(1).replace(/^0+/,"");return n==="1"&&(n=""),t.charAt(0)+n+(r&&i?" domain":"")}},V.list=function(x,t,a){var i=x._fullLayout;if(!i)return[];var r=V.listIds(x,t),n=new Array(r.length),d;for(d=0;d<r.length;d++){var s=r[d];n[d]=i[s.charAt(0)+"axis"+s.substr(1)]}if(!a){var o=i._subplots.gl3d||[];for(d=0;d<o.length;d++){var y=i[o[d]];t?n.push(y[t+"axis"]):n.push(y.xaxis,y.yaxis,y.zaxis)}}return n},V.listIds=function(x,t){var a=x._fullLayout;if(!a)return[];var i=a._subplots;return t?i[t+"axis"]:i.xaxis.concat(i.yaxis)},V.getFromId=function(x,t,a){var i=x._fullLayout;return t=t===void 0||typeof t!="string"?t:t.replace(" domain",""),a==="x"?t=t.replace(/y[0-9]*/,""):a==="y"&&(t=t.replace(/x[0-9]*/,"")),i[V.id2name(t)]},V.getFromTrace=function(x,t,a){var i=x._fullLayout,r=null;if(f.traceIs(t,"gl3d")){var n=t.scene;n.substr(0,5)==="scene"&&(r=i[n][a+"axis"])}else r=V.getFromId(x,t[a+"axis"]||a);return r},V.idSort=function(x,t){var a=x.charAt(0),i=t.charAt(0);return a!==i?a>i?1:-1:+(x.substr(1)||1)-+(t.substr(1)||1)},V.ref2id=function(x){return/^[xyz]/.test(x)?x.split(" ")[0]:!1};function m(x,t){if(t&&t.length){for(var a=0;a<t.length;a++)if(t[a][x])return!0}return!1}V.isLinked=function(x,t){return m(t,x._axisMatchGroups)||m(t,x._axisConstraintGroups)}},{"../../registry":647,"./constants":573}],571:[function(e,B,V){function f(l,m){var x=m.dataAttr||l._id.charAt(0),t={},a,i,r;if(m.axData)a=m.axData;else for(a=[],i=0;i<m.data.length;i++){var n=m.data[i];n[x+"axis"]===l._id&&a.push(n)}for(i=0;i<a.length;i++){var d=a[i][x];for(r=0;r<d.length;r++){var s=d[r];s!=null&&(t[s]=1)}}return Object.keys(t)}B.exports=function(m,x,t,a){if(x.type==="category"){var i=m.categoryarray,r=Array.isArray(i)&&i.length>0,n;r&&(n="array");var d=t("categoryorder",n),s;d==="array"&&(s=t("categoryarray")),!r&&d==="array"&&(d=x.categoryorder="trace"),d==="trace"?x._initialCategories=[]:d==="array"?x._initialCategories=s.slice():(s=f(x,a).sort(),d==="category ascending"?x._initialCategories=s:d==="category descending"&&(x._initialCategories=s.reverse()))}}},{}],572:[function(e,B,V){var f=e("fast-isnumeric"),l=e("../../lib"),m=e("../../constants/numerical"),x=m.ONEDAY,t=m.ONEWEEK;V.dtick=function(a,i){var r=i==="log",n=i==="date",d=i==="category",s=n?x:1;if(!a)return s;if(f(a))return a=Number(a),a<=0?s:d?Math.max(1,Math.round(a)):n?Math.max(.1,a):a;if(typeof a!="string"||!(n||r))return s;var o=a.charAt(0),y=a.substr(1);return y=f(y)?Number(y):0,y<=0||!(n&&o==="M"&&y===Math.round(y)||r&&o==="L"||r&&o==="D"&&(y===1||y===2))?s:a},V.tick0=function(a,i,r,n){if(i==="date")return l.cleanDate(a,l.dateTick0(r,n%t===0?1:0));if(!(n==="D1"||n==="D2"))return f(a)?Number(a):0}},{"../../constants/numerical":491,"../../lib":515,"fast-isnumeric":190}],573:[function(e,B,V){var f=e("../../lib/regex").counter;B.exports={idRegex:{x:f("x","( domain)?"),y:f("y","( domain)?")},attrRegex:f("[xy]axis"),xAxisMatch:f("xaxis"),yAxisMatch:f("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINZOOM:20,DRAGGERSIZE:20,REDRAWDELAY:50,DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},{"../../lib/regex":532}],574:[function(e,B,V){var f=e("../../lib"),l=e("./autorange"),m=e("./axis_ids").id2name,x=e("./layout_attributes"),t=e("./scale_zoom"),a=e("./set_convert"),i=e("../../constants/numerical").ALMOST_EQUAL,r=e("../../constants/alignment").FROM_BL;V.handleDefaults=function(v,_,u){var T=u.axIds,c=u.axHasImage,A=_._axisConstraintGroups=[],k=_._axisMatchGroups=[],p,w,h,D,S,M,L,R;for(p=0;p<T.length;p++)D=m(T[p]),S=v[D],M=_[D],n(S,M,{axIds:T,layoutOut:_,hasImage:c[D]});function z(X,J){for(p=0;p<X.length;p++){w=X[p];for(h in w)_[m(h)][J]=w}}for(z(k,"_matchGroup"),p=0;p<A.length;p++){w=A[p];for(h in w)if(M=_[m(h)],M.fixedrange){for(var P in w){var I=m(P);(v[I]||{}).fixedrange===!1&&f.warn("fixedrange was specified as false for axis "+I+" but was overridden because another axis in its constraint group has fixedrange true"),_[I].fixedrange=!0}break}}for(p=0;p<A.length;){w=A[p];for(h in w){M=_[m(h)],M._matchGroup&&Object.keys(M._matchGroup).length===Object.keys(w).length&&(A.splice(p,1),p--);break}p++}z(A,"_constraintGroup");var U=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],O=!1,G=!1;function $(){R=M[L],L==="rangebreaks"&&(G=M._hasDayOfWeekBreaks)}for(p=0;p<k.length;p++){w=k[p];for(var tt=0;tt<U.length;tt++){L=U[tt],R=null;var Z;for(h in w)if(D=m(h),S=v[D],M=_[D],L in M){if(!M.matches&&(Z=M,L in S)){$();break}R===null&&L in S&&$()}if(L==="range"&&R&&(O=!0),L==="autorange"&&R===null&&O&&(R=!1),R===null&&L in Z&&(R=Z[L]),R!==null)for(h in w)M=_[m(h)],M[L]=L==="range"?R.slice():R,L==="rangebreaks"&&(M._hasDayOfWeekBreaks=G,a(M,_))}}};function n(v,_,u){var T=u.axIds,c=u.layoutOut,A=u.hasImage,k=c._axisConstraintGroups,p=c._axisMatchGroups,w=_._id,h=w.charAt(0),D=((c._splomAxes||{})[h]||{})[w]||{},S=_._id,M=S.charAt(0)==="x";_._matchGroup=null,_._constraintGroup=null;function L(lt,F){return f.coerce(v,_,x,lt,F)}L("constrain",A?"domain":"range"),f.coerce(v,_,{constraintoward:{valType:"enumerated",values:M?["left","center","right"]:["bottom","middle","top"],dflt:M?"center":"middle"}},"constraintoward");var R=_.type,z,P,I=[];for(z=0;z<T.length;z++)if(P=T[z],P!==S){var U=c[m(P)];U.type===R&&I.push(P)}var O=s(k,S);if(O){var G=[];for(z=0;z<I.length;z++)P=I[z],O[P]||G.push(P);I=G}var $=I.length,tt,Z;$&&(v.matches||D.matches)&&(tt=f.coerce(v,_,{matches:{valType:"enumerated",values:I,dflt:I.indexOf(D.matches)!==-1?D.matches:void 0}},"matches"));var X=A&&!M?_.anchor:void 0;if($&&!tt&&(v.scaleanchor||X)&&(Z=f.coerce(v,_,{scaleanchor:{valType:"enumerated",values:I}},"scaleanchor",X)),tt){_._matchGroup=o(p,S,tt,1);var J=c[m(tt)],st=d(c,_)/d(c,J);M!==(tt.charAt(0)==="x")&&(st=(M?"x":"y")+st),o(k,S,tt,st)}else v.matches&&T.indexOf(v.matches)!==-1&&f.warn("ignored "+_._name+'.matches: "'+v.matches+'" to avoid an infinite loop');if(Z){var at=L("scaleratio");at||(at=_.scaleratio=1),o(k,S,Z,at)}else v.scaleanchor&&T.indexOf(v.scaleanchor)!==-1&&f.warn("ignored "+_._name+'.scaleanchor: "'+v.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function d(v,_){var u=_.domain;return u||(u=v[m(_.overlaying)].domain),u[1]-u[0]}function s(v,_){for(var u=0;u<v.length;u++)if(v[u][_])return v[u];return null}function o(v,_,u,T){var c,A,k,p,w,h=s(v,_);h===null?(h={},h[_]=1,w=v.length,v.push(h)):w=v.indexOf(h);var D=Object.keys(h);for(c=0;c<v.length;c++)if(k=v[c],c!==w&&k[u]){var S=k[u];for(A=0;A<D.length;A++)p=D[A],k[p]=y(S,y(T,h[p]));v.splice(w,1);return}if(T!==1)for(A=0;A<D.length;A++){var M=D[A];h[M]=y(T,h[M])}h[u]=1}function y(v,_){var u="",T="",c,A;typeof v=="string"&&(u=v.match(/^[xy]*/)[0],c=u.length,v=+v.substr(c)),typeof _=="string"&&(T=_.match(/^[xy]*/)[0],A=T.length,_=+_.substr(A));var k=v*_;return!c&&!A?k:!c||!A||u.charAt(0)===T.charAt(0)?u+T+v*_:c===A?k:(c>A?u.substr(A):T.substr(c))+k}function g(v,_){for(var u=_._size,T=u.h/u.w,c={},A=Object.keys(v),k=0;k<A.length;k++){var p=A[k],w=v[p];if(typeof w=="string"){var h=w.match(/^[xy]*/)[0],D=h.length;w=+w.substr(D);for(var S=h.charAt(0)==="y"?T:1/T,M=0;M<D;M++)w*=S}c[p]=w}return c}V.enforce=function(_){var u=_._fullLayout,T=u._axisConstraintGroups||[],c,A,k,p,w,h,D,S;for(c=0;c<T.length;c++){k=g(T[c],u);var M=Object.keys(k),L=1/0,R=0,z=1/0,P={},I={},U=!1;for(A=0;A<M.length;A++)p=M[A],I[p]=w=u[m(p)],w._inputDomain?w.domain=w._inputDomain.slice():w._inputDomain=w.domain.slice(),w._inputRange||(w._inputRange=w.range.slice()),w.setScale(),P[p]=h=Math.abs(w._m)/k[p],L=Math.min(L,h),(w.constrain==="domain"||!w._constraintShrinkable)&&(z=Math.min(z,h)),delete w._constraintShrinkable,R=Math.max(R,h),w.constrain==="domain"&&(U=!0);if(!(L>i*R&&!U)){for(A=0;A<M.length;A++)if(p=M[A],h=P[p],w=I[p],D=w.constrain,h!==z||D==="domain")if(S=h/z,D==="range")t(w,S);else{var O=w._inputDomain,G=(w.domain[1]-w.domain[0])/(O[1]-O[0]),$=(w.r2l(w.range[1])-w.r2l(w.range[0]))/(w.r2l(w._inputRange[1])-w.r2l(w._inputRange[0]));if(S/=G,S*$<1){w.domain=w._input.domain=O.slice(),t(w,S);continue}if($<1&&(w.range=w._input.range=w._inputRange.slice(),S*=$),w.autorange){var tt=w.r2l(w.range[0]),Z=w.r2l(w.range[1]),X=(tt+Z)/2,J=X,st=X,at=Math.abs(Z-X),lt=X-at*S*1.0001,F=X+at*S*1.0001,H=l.makePadFn(u,w,0),et=l.makePadFn(u,w,1);b(w,S);var q=Math.abs(w._m),W=l.concatExtremes(_,w),K=W.min,nt=W.max,it,ot;for(ot=0;ot<K.length;ot++)it=K[ot].val-H(K[ot])/q,it>lt&&it<J&&(J=it);for(ot=0;ot<nt.length;ot++)it=nt[ot].val+et(nt[ot])/q,it<F&&it>st&&(st=it);var ct=(st-J)/(2*at);S/=ct,J=w.l2r(J),st=w.l2r(st),w.range=w._input.range=tt<Z?[J,st]:[st,J]}b(w,S)}}}},V.getAxisGroup=function(_,u){for(var T=_._axisMatchGroups,c=0;c<T.length;c++){var A=T[c];if(A[u])return"g"+c}return u},V.clean=function(_,u){if(u._inputDomain){for(var T=!1,c=u._id,A=_._fullLayout._axisConstraintGroups,k=0;k<A.length;k++)if(A[k][c]){T=!0;break}(!T||u.constrain!=="domain")&&(u._input.domain=u.domain=u._inputDomain,delete u._inputDomain)}};function b(v,_){var u=v._inputDomain,T=r[v.constraintoward],c=u[0]+(u[1]-u[0])*T;v.domain=v._input.domain=[c+(u[0]-c)/_,c+(u[1]-c)/_],v.setScale()}},{"../../constants/alignment":483,"../../constants/numerical":491,"../../lib":515,"./autorange":565,"./axis_ids":570,"./layout_attributes":579,"./scale_zoom":584,"./set_convert":585}],575:[function(e,B,V){var f=e("@plotly/d3"),l=e("../../lib"),m=l.numberFormat,x=e("tinycolor2"),t=e("has-passive-events"),a=e("../../registry"),i=l.strTranslate,r=e("../../lib/svg_text_utils"),n=e("../../components/color"),d=e("../../components/drawing"),s=e("../../components/fx"),o=e("./axes"),y=e("../../lib/setcursor"),g=e("../../components/dragelement"),b=e("../../components/dragelement/helpers"),v=b.selectingOrDrawing,_=b.freeMode,u=e("../../constants/alignment").FROM_TL,T=e("../../lib/clear_gl_canvases"),c=e("../../plot_api/subroutines").redrawReglTraces,A=e("../plots"),k=e("./axis_ids").getFromId,p=e("../../components/selections").prepSelect,w=e("../../components/selections").clearOutline,h=e("../../components/selections").selectOnClick,D=e("./scale_zoom"),S=e("./constants"),M=S.MINDRAG,L=S.MINZOOM,R=!0;function z(it,ot,ct,bt,ut,pt,yt,Tt){var kt=it._fullLayout._zoomlayer,zt=yt+Tt==="nsew",Rt=(yt+Tt).length===1,Gt,wt,It,$t,Qt,Nt,Pt,Yt,ve,Re,ir,Ie,Be,Ye,ze,Ee,Wt,ee,Xt,St,Vt,Zt,qt;function Te(){if(Gt=ot.xaxis,wt=ot.yaxis,ve=Gt._length,Re=wt._length,Pt=Gt._offset,Yt=wt._offset,It={},It[Gt._id]=Gt,$t={},$t[wt._id]=wt,yt&&Tt)for(var kr=ot.overlays,Mr=0;Mr<kr.length;Mr++){var Gr=kr[Mr].xaxis;It[Gr._id]=Gr;var ar=kr[Mr].yaxis;$t[ar._id]=ar}Qt=nt(It),Nt=nt($t),Be=U(Qt,Tt),Ye=U(Nt,yt),ze=!Ye&&!Be,Ie=W(it,it._fullLayout._axisMatchGroups,It,$t),ir=W(it,it._fullLayout._axisConstraintGroups,It,$t,Ie);var xr=ir.isSubplotConstrained||Ie.isSubplotConstrained;Ee=Tt||xr,Wt=yt||xr;var Ir=it._fullLayout;ee=Ir._has("scattergl"),Xt=Ir._has("splom"),St=Ir._has("svg")}Te();var me=Z(Ye+Be,it._fullLayout.dragmode,zt),Ne=I(ot,yt+Tt+"drag",me,ct,bt,ut,pt);if(ze&&!zt)return Ne.onmousedown=null,Ne.style.pointerEvents="none",Ne;var Ke={element:Ne,gd:it,plotinfo:ot};Ke.prepFn=function(kr,Mr,Gr){var ar=Ke.dragmode,xr=it._fullLayout.dragmode;xr!==ar&&(Ke.dragmode=xr),Te(),Zt=it._fullLayout._invScaleX,qt=it._fullLayout._invScaleY,ze||(zt?kr.shiftKey?xr==="pan"?xr="zoom":v(xr)||(xr="pan"):kr.ctrlKey&&(xr="pan"):xr="pan"),_(xr)?Ke.minDrag=1:Ke.minDrag=void 0,v(xr)?(Ke.xaxes=Qt,Ke.yaxes=Nt,p(kr,Mr,Gr,Ke,xr)):(Ke.clickFn=Xe,v(ar)&&He(),ze||(xr==="zoom"?(Ke.moveFn=oe,Ke.doneFn=te,Ke.minDrag=1,_r(kr,Mr,Gr)):xr==="pan"&&(Ke.moveFn=se,Ke.doneFn=ye))),it._fullLayout._redrag=function(){var Ir=it._dragdata;if(Ir&&Ir.element===Ne){var Hr=it._fullLayout.dragmode;v(Hr)||(Te(),Ae([0,0,ve,Re]),Ke.moveFn(Ir.dx,Ir.dy))}}};function He(){Ke.plotinfo.selection=!1,w(it)}function Xe(kr,Mr){var Gr=Ke.gd;if(Gr._fullLayout._activeShapeIndex>=0){Gr._fullLayout._deactivateShape(Gr);return}var ar=Gr._fullLayout.clickmode;if(lt(Gr),kr===2&&!Rt&&Se(),zt)ar.indexOf("select")>-1&&h(Mr,Gr,Qt,Nt,ot.id,Ke),ar.indexOf("event")>-1&&s.click(Gr,Mr,ot.id);else if(kr===1&&Rt){var xr=yt?wt:Gt,Ir=yt==="s"||Tt==="w"?0:1,Hr=xr._name+".range["+Ir+"]",Cr=O(xr,Ir),ae="left",Le="middle";if(xr.fixedrange)return;yt?(Le=yt==="n"?"top":"bottom",xr.side==="right"&&(ae="right")):Tt==="e"&&(ae="right"),Gr._context.showAxisRangeEntryBoxes&&f.select(Ne).call(r.makeEditable,{gd:Gr,immediate:!0,background:Gr._fullLayout.paper_bgcolor,text:String(Cr),fill:xr.tickfont?xr.tickfont.color:"#444",horizontalAlign:ae,verticalAlign:Le}).on("edit",function($e){var or=xr.d2r($e);or!==void 0&&a.call("_guiRelayout",Gr,Hr,or)})}}g.init(Ke);var er,We,hr,Wr,dn,Qr,le,Qe,Ze,Ve;function _r(kr,Mr,Gr){var ar=Ne.getBoundingClientRect();er=Mr-ar.left,We=Gr-ar.top,it._fullLayout._calcInverseTransform(it);var xr=l.apply3DTransform(it._fullLayout._invTransform)(er,We);er=xr[0],We=xr[1],hr={l:er,r:er,w:0,t:We,b:We,h:0},Wr=it._hmpixcount?it._hmlumcount/it._hmpixcount:x(it._fullLayout.plot_bgcolor).getLuminance(),dn="M0,0H"+ve+"V"+Re+"H0V0",Qr=!1,le="xy",Ve=!1,Qe=X(kt,Wr,Pt,Yt,dn),Ze=J(kt,Pt,Yt)}function oe(kr,Mr){if(it._transitioningWithDuration)return!1;var Gr=Math.max(0,Math.min(ve,Zt*kr+er)),ar=Math.max(0,Math.min(Re,qt*Mr+We)),xr=Math.abs(Gr-er),Ir=Math.abs(ar-We);hr.l=Math.min(er,Gr),hr.r=Math.max(er,Gr),hr.t=Math.min(We,ar),hr.b=Math.max(We,ar);function Hr(){le="",hr.r=hr.l,hr.t=hr.b,Ze.attr("d","M0,0Z")}if(ir.isSubplotConstrained)xr>L||Ir>L?(le="xy",xr/ve>Ir/Re?(Ir=xr*Re/ve,We>ar?hr.t=We-Ir:hr.b=We+Ir):(xr=Ir*ve/Re,er>Gr?hr.l=er-xr:hr.r=er+xr),Ze.attr("d",q(hr))):Hr();else if(Ie.isSubplotConstrained)if(xr>L||Ir>L){le="xy";var Cr=Math.min(hr.l/ve,(Re-hr.b)/Re),ae=Math.max(hr.r/ve,(Re-hr.t)/Re);hr.l=Cr*ve,hr.r=ae*ve,hr.b=(1-Cr)*Re,hr.t=(1-ae)*Re,Ze.attr("d",q(hr))}else Hr();else!Ye||Ir<Math.min(Math.max(xr*.6,M),L)?xr<M||!Be?Hr():(hr.t=0,hr.b=Re,le="x",Ze.attr("d",H(hr,We))):!Be||xr<Math.min(Ir*.6,L)?(hr.l=0,hr.r=ve,le="y",Ze.attr("d",et(hr,er))):(le="xy",Ze.attr("d",q(hr)));hr.w=hr.r-hr.l,hr.h=hr.b-hr.t,le&&(Ve=!0),it._dragged=Ve,st(Qe,Ze,hr,dn,Qr,Wr),Ht(),it.emit("plotly_relayouting",Vt),Qr=!0}function Ht(){Vt={},(le==="xy"||le==="x")&&(G(Qt,hr.l/ve,hr.r/ve,Vt,ir.xaxes),ce("x",Vt)),(le==="xy"||le==="y")&&(G(Nt,(Re-hr.b)/Re,(Re-hr.t)/Re,Vt,ir.yaxes),ce("y",Vt))}function te(){Ht(),lt(it),ye(),F(it)}var ne=[0,0,ve,Re],_e=null,Pe=S.REDRAWDELAY,Et=ot.mainplot?it._fullLayout._plots[ot.mainplot]:ot;function Mt(kr){if(!it._context._scrollZoom.cartesian&&!it._fullLayout._enablescrollzoom)return;if(He(),it._transitioningWithDuration){kr.preventDefault(),kr.stopPropagation();return}Te(),clearTimeout(_e);var Mr=-kr.deltaY;if(isFinite(Mr)||(Mr=kr.wheelDelta/10),!isFinite(Mr)){l.log("Did not find wheel motion attributes: ",kr);return}var Gr=Math.exp(-Math.min(Math.max(Mr,-20),20)/200),ar=Et.draglayer.select(".nsewdrag").node().getBoundingClientRect(),xr=(kr.clientX-ar.left)/ar.width,Ir=(ar.bottom-kr.clientY)/ar.height,Hr;function Cr(ae,Le,$e){if(ae.fixedrange)return;var or=l.simpleMap(ae.range,ae.r2l),Dr=or[0]+(or[1]-or[0])*Le;function Nr(Fr){return ae.l2r(Dr+(Fr-Dr)*$e)}ae.range=or.map(Nr)}if(Ee){for(Tt||(xr=.5),Hr=0;Hr<Qt.length;Hr++)Cr(Qt[Hr],xr,Gr);ce("x"),ne[2]*=Gr,ne[0]+=ne[2]*xr*(1/Gr-1)}if(Wt){for(yt||(Ir=.5),Hr=0;Hr<Nt.length;Hr++)Cr(Nt[Hr],Ir,Gr);ce("y"),ne[3]*=Gr,ne[1]+=ne[3]*(1-Ir)*(1/Gr-1)}Ae(ne),de(),it.emit("plotly_relayouting",Vt),_e=setTimeout(function(){!it._fullLayout||(ne=[0,0,ve,Re],ye())},Pe),kr.preventDefault()}yt.length*Tt.length!==1&&K(Ne,Mt);function se(kr,Mr){if(kr=kr*Zt,Mr=Mr*qt,it._transitioningWithDuration)return;if(it._fullLayout._replotting=!0,Be==="ew"||Ye==="ns"){var Gr=Be?-kr:0,ar=Ye?-Mr:0;if(Ie.isSubplotConstrained){if(Be&&Ye){var xr=(kr/ve-Mr/Re)/2;kr=xr*ve,Mr=-xr*Re,Gr=-kr,ar=-Mr}Ye?Gr=-ar*ve/Re:ar=-Gr*Re/ve}Be&&($(Qt,kr),ce("x")),Ye&&($(Nt,Mr),ce("y")),Ae([Gr,ar,ve,Re]),de(),it.emit("plotly_relayouting",Vt);return}function Ir(Nr,Fr,Ar){for(var Xr=1-Fr,Tn,un,Un=0;Un<Nr.length;Un++){var Dn=Nr[Un];if(!Dn.fixedrange){Tn=Dn,un=Dn._rl[Xr]+(Dn._rl[Fr]-Dn._rl[Xr])/tt(Ar/Dn._length);var Xn=Dn.l2r(un);Xn!==!1&&Xn!==void 0&&(Dn.range[Fr]=Xn)}}return Tn._length*(Tn._rl[Fr]-un)/(Tn._rl[Fr]-Tn._rl[Xr])}var Hr=Be==="w"==(Ye==="n")?1:-1;if(Be&&Ye&&(ir.isSubplotConstrained||Ie.isSubplotConstrained)){var Cr=(kr/ve+Hr*Mr/Re)/2;kr=Cr*ve,Mr=Hr*Cr*Re}var ae,Le;if(Be==="w"?kr=Ir(Qt,0,kr):Be==="e"?kr=Ir(Qt,1,-kr):Be||(kr=0),Ye==="n"?Mr=Ir(Nt,1,Mr):Ye==="s"?Mr=Ir(Nt,0,-Mr):Ye||(Mr=0),ae=Be==="w"?kr:0,Le=Ye==="n"?Mr:0,ir.isSubplotConstrained&&!Ie.isSubplotConstrained||Ie.isSubplotConstrained&&Be&&Ye&&Hr>0){var $e;if(Ie.isSubplotConstrained||!Be&&Ye.length===1){for($e=0;$e<Qt.length;$e++)Qt[$e].range=Qt[$e]._r.slice(),D(Qt[$e],1-Mr/Re);kr=Mr*ve/Re,ae=kr/2}if(Ie.isSubplotConstrained||!Ye&&Be.length===1){for($e=0;$e<Nt.length;$e++)Nt[$e].range=Nt[$e]._r.slice(),D(Nt[$e],1-kr/ve);Mr=kr*Re/ve,Le=Mr/2}}(!Ie.isSubplotConstrained||!Ye)&&ce("x"),(!Ie.isSubplotConstrained||!Be)&&ce("y");var or=ve-kr,Dr=Re-Mr;Ie.isSubplotConstrained&&!(Be&&Ye)&&(Be?(Le=ae?0:kr*Re/ve,Dr=or*Re/ve):(ae=Le?0:Mr*ve/Re,or=Dr*ve/Re)),Ae([ae,Le,or,Dr]),de(),it.emit("plotly_relayouting",Vt)}function ce(kr,Mr){for(var Gr=Ie.isSubplotConstrained?{x:Nt,y:Qt}[kr]:Ie[kr+"axes"],ar=Ie.isSubplotConstrained?{x:Qt,y:Nt}[kr]:[],xr=0;xr<Gr.length;xr++){var Ir=Gr[xr],Hr=Ir._id,Cr=Ie.xLinks[Hr]||Ie.yLinks[Hr],ae=ar[0]||It[Cr]||$t[Cr];ae&&(Mr?(Mr[Ir._name+".range[0]"]=Mr[ae._name+".range[0]"],Mr[Ir._name+".range[1]"]=Mr[ae._name+".range[1]"]):Ir.range=ae.range.slice())}}function de(){var kr=[],Mr;function Gr(Ir){for(Mr=0;Mr<Ir.length;Mr++)Ir[Mr].fixedrange||kr.push(Ir[Mr]._id)}for(Ee&&(Gr(Qt),Gr(ir.xaxes),Gr(Ie.xaxes)),Wt&&(Gr(Nt),Gr(ir.yaxes),Gr(Ie.yaxes)),Vt={},Mr=0;Mr<kr.length;Mr++){var ar=kr[Mr],xr=k(it,ar);o.drawOne(it,xr,{skipTitle:!0}),Vt[xr._name+".range[0]"]=xr.range[0],Vt[xr._name+".range[1]"]=xr.range[1]}o.redrawComponents(it,kr)}function Se(){if(!it._transitioningWithDuration){var kr=it._context.doubleClick,Mr=[];Be&&(Mr=Mr.concat(Qt)),Ye&&(Mr=Mr.concat(Nt)),Ie.xaxes&&(Mr=Mr.concat(Ie.xaxes)),Ie.yaxes&&(Mr=Mr.concat(Ie.yaxes));var Gr={},ar,xr,Ir;if(kr==="reset+autosize"){for(kr="autosize",xr=0;xr<Mr.length;xr++)if(ar=Mr[xr],ar._rangeInitial&&(ar.range[0]!==ar._rangeInitial[0]||ar.range[1]!==ar._rangeInitial[1])||!ar._rangeInitial&&!ar.autorange){kr="reset";break}}if(kr==="autosize")for(xr=0;xr<Mr.length;xr++)ar=Mr[xr],ar.fixedrange||(Gr[ar._name+".autorange"]=!0);else if(kr==="reset")for((Be||ir.isSubplotConstrained)&&(Mr=Mr.concat(ir.xaxes)),Ye&&!ir.isSubplotConstrained&&(Mr=Mr.concat(ir.yaxes)),ir.isSubplotConstrained&&(Be?Ye||(Mr=Mr.concat(Nt)):Mr=Mr.concat(Qt)),xr=0;xr<Mr.length;xr++)ar=Mr[xr],ar.fixedrange||(ar._rangeInitial?(Ir=ar._rangeInitial,Gr[ar._name+".range[0]"]=Ir[0],Gr[ar._name+".range[1]"]=Ir[1]):Gr[ar._name+".autorange"]=!0);it.emit("plotly_doubleclick",null),a.call("_guiRelayout",it,Gr)}}function ye(){Ae([0,0,ve,Re]),l.syncOrAsync([A.previousPromises,function(){it._fullLayout._replotting=!1,a.call("_guiRelayout",it,Vt)}],it)}function Ae(kr){var Mr=it._fullLayout,Gr=Mr._plots,ar=Mr._subplots.cartesian,xr,Ir,Hr,Cr;if(Xt&&a.subplotsRegistry.splom.drag(it),ee){for(xr=0;xr<ar.length;xr++)if(Ir=Gr[ar[xr]],Hr=Ir.xaxis,Cr=Ir.yaxis,Ir._scene){var ae=l.simpleMap(Hr.range,Hr.r2l),Le=l.simpleMap(Cr.range,Cr.r2l);Ir._scene.update({range:[ae[0],Le[0],ae[1],Le[1]]})}}if((Xt||ee)&&(T(it),c(it)),St){var $e=kr[2]/Gt._length,or=kr[3]/wt._length;for(xr=0;xr<ar.length;xr++){Ir=Gr[ar[xr]],Hr=Ir.xaxis,Cr=Ir.yaxis;var Dr=(Ee||Ie.isSubplotConstrained)&&!Hr.fixedrange&&It[Hr._id],Nr=(Wt||Ie.isSubplotConstrained)&&!Cr.fixedrange&&$t[Cr._id],Fr,Ar,Xr,Tn;if(Dr?(Fr=$e,Xr=Tt||Ie.isSubplotConstrained?kr[0]:Er(Hr,Fr)):Ie.xaHash[Hr._id]?(Fr=$e,Xr=kr[0]*Hr._length/Gt._length):Ie.yaHash[Hr._id]?(Fr=or,Xr=Ye==="ns"?-kr[1]*Hr._length/wt._length:Er(Hr,Fr,{n:"top",s:"bottom"}[Ye])):(Fr=Ge(Hr,$e,or),Xr=sr(Hr,Fr)),Nr?(Ar=or,Tn=yt||Ie.isSubplotConstrained?kr[1]:Er(Cr,Ar)):Ie.yaHash[Cr._id]?(Ar=or,Tn=kr[1]*Cr._length/wt._length):Ie.xaHash[Cr._id]?(Ar=$e,Tn=Be==="ew"?-kr[0]*Cr._length/Gt._length:Er(Cr,Ar,{e:"right",w:"left"}[Be])):(Ar=Ge(Cr,$e,or),Tn=sr(Cr,Ar)),!(!Fr&&!Ar)){Fr||(Fr=1),Ar||(Ar=1);var un=Hr._offset-Xr/Fr,Un=Cr._offset-Tn/Ar;Ir.clipRect.call(d.setTranslate,Xr,Tn).call(d.setScale,Fr,Ar),Ir.plot.call(d.setTranslate,un,Un).call(d.setScale,1/Fr,1/Ar),(Fr!==Ir.xScaleFactor||Ar!==Ir.yScaleFactor)&&(d.setPointGroupScale(Ir.zoomScalePts,Fr,Ar),d.setTextPointsScale(Ir.zoomScaleTxt,Fr,Ar)),d.hideOutsideRangePoints(Ir.clipOnAxisFalseTraces,Ir),Ir.xScaleFactor=Fr,Ir.yScaleFactor=Ar}}}}function Ge(kr,Mr,Gr){return kr.fixedrange?0:Ee&&ir.xaHash[kr._id]?Mr:Wt&&(ir.isSubplotConstrained?ir.xaHash:ir.yaHash)[kr._id]?Gr:0}function sr(kr,Mr){return Mr?(kr.range=kr._r.slice(),D(kr,Mr),Er(kr,Mr)):0}function Er(kr,Mr,Gr){return kr._length*(1-Mr)*u[Gr||kr.constraintoward||"middle"]}return Ne}function P(it,ot,ct,bt){var ut=l.ensureSingle(it.draglayer,ot,ct,function(pt){pt.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",it.id)});return ut.call(y,bt),ut.node()}function I(it,ot,ct,bt,ut,pt,yt){var Tt=P(it,"rect",ot,ct);return f.select(Tt).call(d.setRect,bt,ut,pt,yt),Tt}function U(it,ot){for(var ct=0;ct<it.length;ct++)if(!it[ct].fixedrange)return ot;return""}function O(it,ot){var ct=it.range[ot],bt=Math.abs(ct-it.range[1-ot]),ut;return it.type==="date"?ct:it.type==="log"?(ut=Math.ceil(Math.max(0,-Math.log(bt)/Math.LN10))+3,m("."+ut+"g")(Math.pow(10,ct))):(ut=Math.floor(Math.log(Math.abs(ct))/Math.LN10)-Math.floor(Math.log(bt)/Math.LN10)+4,m("."+String(ut)+"g")(ct))}function G(it,ot,ct,bt,ut){for(var pt=0;pt<it.length;pt++){var yt=it[pt];if(!yt.fixedrange)if(yt.rangebreaks){var Tt=yt._id.charAt(0)==="y",kt=Tt?1-ot:ot,zt=Tt?1-ct:ct;bt[yt._name+".range[0]"]=yt.l2r(yt.p2l(kt*yt._length)),bt[yt._name+".range[1]"]=yt.l2r(yt.p2l(zt*yt._length))}else{var Rt=yt._rl[0],Gt=yt._rl[1]-Rt;bt[yt._name+".range[0]"]=yt.l2r(Rt+Gt*ot),bt[yt._name+".range[1]"]=yt.l2r(Rt+Gt*ct)}}if(ut&&ut.length){var wt=(ot+(1-ct))/2;G(ut,wt,1-wt,bt,[])}}function $(it,ot){for(var ct=0;ct<it.length;ct++){var bt=it[ct];if(!bt.fixedrange)if(bt.rangebreaks){var ut=0,pt=bt._length,yt=bt.p2l(ut+ot)-bt.p2l(ut),Tt=bt.p2l(pt+ot)-bt.p2l(pt),kt=(yt+Tt)/2;bt.range=[bt.l2r(bt._rl[0]-kt),bt.l2r(bt._rl[1]-kt)]}else bt.range=[bt.l2r(bt._rl[0]-ot/bt._m),bt.l2r(bt._rl[1]-ot/bt._m)]}}function tt(it){return 1-(it>=0?Math.min(it,.9):1/(1/Math.max(it,-.3)+3.222))}function Z(it,ot,ct){return it?it==="nsew"?ct?"":ot==="pan"?"move":"crosshair":it.toLowerCase()+"-resize":"pointer"}function X(it,ot,ct,bt,ut){return it.append("path").attr("class","zoombox").style({fill:ot>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",i(ct,bt)).attr("d",ut+"Z")}function J(it,ot,ct){return it.append("path").attr("class","zoombox-corners").style({fill:n.background,stroke:n.defaultLine,"stroke-width":1,opacity:0}).attr("transform",i(ot,ct)).attr("d","M0,0Z")}function st(it,ot,ct,bt,ut,pt){it.attr("d",bt+"M"+ct.l+","+ct.t+"v"+ct.h+"h"+ct.w+"v-"+ct.h+"h-"+ct.w+"Z"),at(it,ot,ut,pt)}function at(it,ot,ct,bt){ct||(it.transition().style("fill",bt>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),ot.transition().style("opacity",1).duration(200))}function lt(it){f.select(it).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function F(it){R&&it.data&&it._context.showTips&&(l.notifier(l._(it,"Double-click to zoom back out"),"long"),R=!1)}function H(it,ot){return"M"+(it.l-.5)+","+(ot-L-.5)+"h-3v"+(2*L+1)+"h3ZM"+(it.r+.5)+","+(ot-L-.5)+"h3v"+(2*L+1)+"h-3Z"}function et(it,ot){return"M"+(ot-L-.5)+","+(it.t-.5)+"v-3h"+(2*L+1)+"v3ZM"+(ot-L-.5)+","+(it.b+.5)+"v3h"+(2*L+1)+"v-3Z"}function q(it){var ot=Math.floor(Math.min(it.b-it.t,it.r-it.l,L)/2);return"M"+(it.l-3.5)+","+(it.t-.5+ot)+"h3v"+-ot+"h"+ot+"v-3h-"+(ot+3)+"ZM"+(it.r+3.5)+","+(it.t-.5+ot)+"h-3v"+-ot+"h"+-ot+"v-3h"+(ot+3)+"ZM"+(it.r+3.5)+","+(it.b+.5-ot)+"h-3v"+ot+"h"+-ot+"v3h"+(ot+3)+"ZM"+(it.l-3.5)+","+(it.b+.5-ot)+"h3v"+ot+"h"+ot+"v3h-"+(ot+3)+"Z"}function W(it,ot,ct,bt,ut){for(var pt=!1,yt={},Tt={},kt,zt,Rt,Gt,wt=(ut||{}).xaHash,It=(ut||{}).yaHash,$t=0;$t<ot.length;$t++){var Qt=ot[$t];for(kt in ct)if(Qt[kt]){for(Rt in Qt)!(ut&&(wt[Rt]||It[Rt]))&&!(Rt.charAt(0)==="x"?ct:bt)[Rt]&&(yt[Rt]=kt);for(zt in bt)!(ut&&(wt[zt]||It[zt]))&&Qt[zt]&&(pt=!0)}for(zt in bt)if(Qt[zt])for(Gt in Qt)!(ut&&(wt[Gt]||It[Gt]))&&!(Gt.charAt(0)==="x"?ct:bt)[Gt]&&(Tt[Gt]=zt)}pt&&(l.extendFlat(yt,Tt),Tt={});var Nt={},Pt=[];for(Rt in yt){var Yt=k(it,Rt);Pt.push(Yt),Nt[Yt._id]=Yt}var ve={},Re=[];for(Gt in Tt){var ir=k(it,Gt);Re.push(ir),ve[ir._id]=ir}return{xaHash:Nt,yaHash:ve,xaxes:Pt,yaxes:Re,xLinks:yt,yLinks:Tt,isSubplotConstrained:pt}}function K(it,ot){if(!t)it.onwheel!==void 0?it.onwheel=ot:it.onmousewheel!==void 0?it.onmousewheel=ot:it.isAddedWheelEvent||(it.isAddedWheelEvent=!0,it.addEventListener("wheel",ot,{passive:!1}));else{var ct=it.onwheel!==void 0?"wheel":"mousewheel";it._onwheel&&it.removeEventListener(ct,it._onwheel),it._onwheel=ot,it.addEventListener(ct,ot,{passive:!1})}}function nt(it){var ot=[];for(var ct in it)ot.push(it[ct]);return ot}B.exports={makeDragBox:z,makeDragger:P,makeRectDragger:I,makeZoombox:X,makeCorners:J,updateZoombox:st,xyCorners:q,transitionZoombox:at,removeZoombox:lt,showDoubleClickNotifier:F,attachWheelEventHandler:K}},{"../../components/color":367,"../../components/dragelement":386,"../../components/dragelement/helpers":385,"../../components/drawing":389,"../../components/fx":407,"../../components/selections":455,"../../constants/alignment":483,"../../lib":515,"../../lib/clear_gl_canvases":499,"../../lib/setcursor":536,"../../lib/svg_text_utils":541,"../../plot_api/subroutines":556,"../../registry":647,"../plots":628,"./axes":566,"./axis_ids":570,"./constants":573,"./scale_zoom":584,"@plotly/d3":58,"has-passive-events":229,tinycolor2:313}],576:[function(e,B,V){var f=e("@plotly/d3"),l=e("../../components/fx"),m=e("../../components/dragelement"),x=e("../../lib/setcursor"),t=e("./dragbox").makeDragBox,a=e("./constants").DRAGGERSIZE;V.initInteractions=function(r){var n=r._fullLayout;if(r._context.staticPlot){f.select(r).selectAll(".drag").remove();return}if(!(!n._has("cartesian")&&!n._has("splom"))){var d=Object.keys(n._plots||{}).sort(function(o,y){if((n._plots[o].mainplot&&!0)===(n._plots[y].mainplot&&!0)){var g=o.split("y"),b=y.split("y");return g[0]===b[0]?Number(g[1]||1)-Number(b[1]||1):Number(g[0]||1)-Number(b[0]||1)}return n._plots[o].mainplot?1:-1});d.forEach(function(o){var y=n._plots[o],g=y.xaxis,b=y.yaxis;if(!y.mainplot){var v=t(r,y,g._offset,b._offset,g._length,b._length,"ns","ew");v.onmousemove=function(T){r._fullLayout._rehover=function(){r._fullLayout._hoversubplot===o&&r._fullLayout._plots[o]&&l.hover(r,T,o)},l.hover(r,T,o),r._fullLayout._lasthover=v,r._fullLayout._hoversubplot=o},v.onmouseout=function(T){r._dragging||(r._fullLayout._hoversubplot=null,m.unhover(r,T))},r._context.showAxisDragHandles&&(t(r,y,g._offset-a,b._offset-a,a,a,"n","w"),t(r,y,g._offset+g._length,b._offset-a,a,a,"n","e"),t(r,y,g._offset-a,b._offset+b._length,a,a,"s","w"),t(r,y,g._offset+g._length,b._offset+b._length,a,a,"s","e"))}if(r._context.showAxisDragHandles){if(o===g._mainSubplot){var _=g._mainLinePosition;g.side==="top"&&(_-=a),t(r,y,g._offset+g._length*.1,_,g._length*.8,a,"","ew"),t(r,y,g._offset,_,g._length*.1,a,"","w"),t(r,y,g._offset+g._length*.9,_,g._length*.1,a,"","e")}if(o===b._mainSubplot){var u=b._mainLinePosition;b.side!=="right"&&(u-=a),t(r,y,u,b._offset+b._length*.1,a,b._length*.8,"ns",""),t(r,y,u,b._offset+b._length*.9,a,b._length*.1,"s",""),t(r,y,u,b._offset,a,b._length*.1,"n","")}}});var s=n._hoverlayer.node();s.onmousemove=function(o){o.target=r._fullLayout._lasthover,l.hover(r,o,n._hoversubplot)},s.onclick=function(o){o.target=r._fullLayout._lasthover,l.click(r,o)},s.onmousedown=function(o){r._fullLayout._lasthover.onmousedown(o)},V.updateFx(r)}},V.updateFx=function(i){var r=i._fullLayout,n=r.dragmode==="pan"?"move":"crosshair";x(r._draggers,n)}},{"../../components/dragelement":386,"../../components/fx":407,"../../lib/setcursor":536,"./constants":573,"./dragbox":575,"@plotly/d3":58}],577:[function(e,B,V){var f=e("../../registry"),l=e("../../lib"),m=e("./axis_ids");B.exports=function(t){return function(i,r){var n=i[t];if(!!Array.isArray(n))for(var d=f.subplotsRegistry.cartesian,s=d.idRegex,o=r._subplots,y=o.xaxis,g=o.yaxis,b=o.cartesian,v=r._has("cartesian")||r._has("gl2d"),_=0;_<n.length;_++){var u=n[_];if(!!l.isPlainObject(u)){var T=m.cleanId(u.xref,"x",!1),c=m.cleanId(u.yref,"y",!1),A=s.x.test(T),k=s.y.test(c);if(A||k){v||l.pushUnique(r._basePlotModules,d);var p=!1;A&&y.indexOf(T)===-1&&(y.push(T),p=!0),k&&g.indexOf(c)===-1&&(g.push(c),p=!0),p&&A&&k&&b.push(T+c)}}}}}},{"../../lib":515,"../../registry":647,"./axis_ids":570}],578:[function(e,B,V){var f=e("@plotly/d3"),l=e("../../registry"),m=e("../../lib"),x=e("../plots"),t=e("../../components/drawing"),a=e("../get_data").getModuleCalcData,i=e("./axis_ids"),r=e("./constants"),n=e("../../constants/xmlns_namespaces"),d=m.ensureSingle;function s(_,u,T){return m.ensureSingle(_,u,T,function(c){c.datum(T)})}V.name="cartesian",V.attr=["xaxis","yaxis"],V.idRoot=["x","y"],V.idRegex=r.idRegex,V.attrRegex=r.attrRegex,V.attributes=e("./attributes"),V.layoutAttributes=e("./layout_attributes"),V.supplyLayoutDefaults=e("./layout_defaults"),V.transitionAxes=e("./transition_axes"),V.finalizeSubplots=function(_,u){var T=u._subplots,c=T.xaxis,A=T.yaxis,k=T.cartesian,p=k.concat(T.gl2d||[]),w={},h={},D,S,M;for(D=0;D<p.length;D++){var L=p[D].split("y");w[L[0]]=1,h["y"+L[1]]=1}for(D=0;D<c.length;D++)S=c[D],w[S]||(M=(_[i.id2name(S)]||{}).anchor,r.idRegex.y.test(M)||(M="y"),k.push(S+M),p.push(S+M),h[M]||(h[M]=1,m.pushUnique(A,M)));for(D=0;D<A.length;D++)M=A[D],h[M]||(S=(_[i.id2name(M)]||{}).anchor,r.idRegex.x.test(S)||(S="x"),k.push(S+M),p.push(S+M),w[S]||(w[S]=1,m.pushUnique(c,S)));if(!p.length){S="",M="";for(var R in _)if(r.attrRegex.test(R)){var z=R.charAt(0);z==="x"?(!S||+R.substr(5)<+S.substr(5))&&(S=R):(!M||+R.substr(5)<+M.substr(5))&&(M=R)}S=S?i.name2id(S):"x",M=M?i.name2id(M):"y",c.push(S),A.push(M),k.push(S+M)}},V.plot=function(_,u,T,c){var A=_._fullLayout,k=A._subplots.cartesian,p=_.calcdata,w;if(!Array.isArray(u))for(u=[],w=0;w<p.length;w++)u.push(w);for(w=0;w<k.length;w++){for(var h=k[w],D=A._plots[h],S=[],M,L=0;L<p.length;L++){var R=p[L],z=R[0].trace;z.xaxis+z.yaxis===h&&((u.indexOf(z.index)!==-1||z.carpet)&&(M&&M[0].trace.xaxis+M[0].trace.yaxis===h&&["tonextx","tonexty","tonext"].indexOf(z.fill)!==-1&&S.indexOf(M)===-1&&S.push(M),S.push(R)),M=R)}o(_,D,S,T,c)}};function o(_,u,T,c,A){for(var k=r.traceLayerClasses,p=_._fullLayout,w=p._modules,h,D,S,M=[],L=[],R=0;R<w.length;R++){h=w[R];var z=h.name,P=l.modules[z].categories;if(P.svg){var I=h.layerName||z+"layer",U=h.plot;D=a(T,U),S=D[0],T=D[1],S.length&&M.push({i:k.indexOf(I),className:I,plotMethod:U,cdModule:S}),P.zoomScale&&L.push("."+I)}}M.sort(function($,tt){return $.i-tt.i});var O=u.plot.selectAll("g.mlayer").data(M,function($){return $.className});if(O.enter().append("g").attr("class",function($){return $.className}).classed("mlayer",!0).classed("rangeplot",u.isRangePlot),O.exit().remove(),O.order(),O.each(function($){var tt=f.select(this),Z=$.className;$.plotMethod(_,u,$.cdModule,tt,c,A),r.clipOnAxisFalseQuery.indexOf("."+Z)===-1&&t.setClipUrl(tt,u.layerClipId,_)}),p._has("scattergl")&&(h=l.getModule("scattergl"),S=a(T,h)[0],h.plot(_,u,S)),!_._context.staticPlot&&(u._hasClipOnAxisFalse&&(u.clipOnAxisFalseTraces=u.plot.selectAll(r.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),L.length)){var G=u.plot.selectAll(L.join(",")).selectAll(".trace");u.zoomScalePts=G.selectAll("path.point"),u.zoomScaleTxt=G.selectAll(".textpoint")}}V.clean=function(_,u,T,c){var A=c._plots||{},k=u._plots||{},p=c._subplots||{},w,h,D;if(c._hasOnlyLargeSploms&&!u._hasOnlyLargeSploms)for(D in A)w=A[D],w.plotgroup&&w.plotgroup.remove();var S=c._has&&c._has("gl"),M=u._has&&u._has("gl");if(S&&!M)for(D in A)w=A[D],w._scene&&w._scene.destroy();if(p.xaxis&&p.yaxis){var L=i.listIds({_fullLayout:c});for(h=0;h<L.length;h++){var R=L[h];u[i.id2name(R)]||c._infolayer.selectAll(".g-"+R+"title").remove()}}var z=c._has&&c._has("cartesian"),P=u._has&&u._has("cartesian");if(z&&!P)b(c._cartesianlayer.selectAll(".subplot"),c),c._defs.selectAll(".axesclip").remove(),delete c._axisConstraintGroups,delete c._axisMatchGroups;else if(p.cartesian)for(h=0;h<p.cartesian.length;h++){var I=p.cartesian[h];if(!k[I]){var U="."+I+",."+I+"-x,."+I+"-y";c._cartesianlayer.selectAll(U).remove(),v(I,c)}}},V.drawFramework=function(_){var u=_._fullLayout,T=y(_),c=u._cartesianlayer.selectAll(".subplot").data(T,String);c.enter().append("g").attr("class",function(A){return"subplot "+A[0]}),c.order(),c.exit().call(b,u),c.each(function(A){var k=A[0],p=u._plots[k];p.plotgroup=f.select(this),g(_,p),p.draglayer=d(u._draggers,"g",k)})},V.rangePlot=function(_,u,T){g(_,u),o(_,u,T),x.style(_)};function y(_){var u=_._fullLayout,T=u._subplots.cartesian,c=T.length,A,k,p,w,h,D,S=[],M=[];for(A=0;A<c;A++){p=T[A],w=u._plots[p],h=w.xaxis,D=w.yaxis;var L=h._mainAxis,R=D._mainAxis,z=L._id+R._id,P=u._plots[z];w.overlays=[],z!==p&&P?(w.mainplot=z,w.mainplotinfo=P,M.push(p)):(w.mainplot=void 0,w.mainplotinfo=void 0,S.push(p))}for(A=0;A<M.length;A++)p=M[A],w=u._plots[p],w.mainplotinfo.overlays.push(w);var I=S.concat(M),U=new Array(c);for(A=0;A<c;A++){p=I[A],w=u._plots[p],h=w.xaxis,D=w.yaxis;var O=[p,h.layer,D.layer,h.overlaying||"",D.overlaying||""];for(k=0;k<w.overlays.length;k++)O.push(w.overlays[k].id);U[A]=O}return U}function g(_,u){var T=u.plotgroup,c=u.id,A=r.layerValue2layerClass[u.xaxis.layer],k=r.layerValue2layerClass[u.yaxis.layer],p=_._fullLayout._hasOnlyLargeSploms;if(u.mainplot){var h=u.mainplotinfo,D=h.plotgroup,S=c+"-x",M=c+"-y";u.minorGridlayer=h.minorGridlayer,u.gridlayer=h.gridlayer,u.zerolinelayer=h.zerolinelayer,d(h.overlinesBelow,"path",S),d(h.overlinesBelow,"path",M),d(h.overaxesBelow,"g",S),d(h.overaxesBelow,"g",M),u.plot=d(h.overplot,"g",c),d(h.overlinesAbove,"path",S),d(h.overlinesAbove,"path",M),d(h.overaxesAbove,"g",S),d(h.overaxesAbove,"g",M),u.xlines=D.select(".overlines-"+A).select("."+S),u.ylines=D.select(".overlines-"+k).select("."+M),u.xaxislayer=D.select(".overaxes-"+A).select("."+S),u.yaxislayer=D.select(".overaxes-"+k).select("."+M)}else if(p)u.xlines=d(T,"path","xlines-above"),u.ylines=d(T,"path","ylines-above"),u.xaxislayer=d(T,"g","xaxislayer-above"),u.yaxislayer=d(T,"g","yaxislayer-above");else{var w=d(T,"g","layer-subplot");u.shapelayer=d(w,"g","shapelayer"),u.imagelayer=d(w,"g","imagelayer"),u.minorGridlayer=d(T,"g","minor-gridlayer"),u.gridlayer=d(T,"g","gridlayer"),u.zerolinelayer=d(T,"g","zerolinelayer"),d(T,"path","xlines-below"),d(T,"path","ylines-below"),u.overlinesBelow=d(T,"g","overlines-below"),d(T,"g","xaxislayer-below"),d(T,"g","yaxislayer-below"),u.overaxesBelow=d(T,"g","overaxes-below"),u.plot=d(T,"g","plot"),u.overplot=d(T,"g","overplot"),u.xlines=d(T,"path","xlines-above"),u.ylines=d(T,"path","ylines-above"),u.overlinesAbove=d(T,"g","overlines-above"),d(T,"g","xaxislayer-above"),d(T,"g","yaxislayer-above"),u.overaxesAbove=d(T,"g","overaxes-above"),u.xlines=T.select(".xlines-"+A),u.ylines=T.select(".ylines-"+k),u.xaxislayer=T.select(".xaxislayer-"+A),u.yaxislayer=T.select(".yaxislayer-"+k)}p||(s(u.minorGridlayer,"g",u.xaxis._id),s(u.minorGridlayer,"g",u.yaxis._id),u.minorGridlayer.selectAll("g").map(function(L){return L[0]}).sort(i.idSort),s(u.gridlayer,"g",u.xaxis._id),s(u.gridlayer,"g",u.yaxis._id),u.gridlayer.selectAll("g").map(function(L){return L[0]}).sort(i.idSort)),u.xlines.style("fill","none").classed("crisp",!0),u.ylines.style("fill","none").classed("crisp",!0)}function b(_,u){if(!!_){var T={};_.each(function(h){var D=h[0],S=f.select(this);S.remove(),v(D,u),T[D]=!0});for(var c in u._plots)for(var A=u._plots[c],k=A.overlays||[],p=0;p<k.length;p++){var w=k[p];T[w.id]&&w.plot.selectAll(".trace").remove()}}}function v(_,u){u._draggers.selectAll("g."+_).remove(),u._defs.select("#clip"+u._uid+_+"plot").remove()}V.toSVG=function(_){var u=_._fullLayout._glimages,T=f.select(_).selectAll(".svg-container"),c=T.filter(function(k,p){return p===T.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function A(){var k=this,p=k.toDataURL("image/png"),w=u.append("svg:image");w.attr({xmlns:n.svg,"xlink:href":p,preserveAspectRatio:"none",x:0,y:0,width:k.style.width,height:k.style.height})}c.each(A)},V.updateFx=e("./graph_interact").updateFx},{"../../components/drawing":389,"../../constants/xmlns_namespaces":492,"../../lib":515,"../../registry":647,"../get_data":602,"../plots":628,"./attributes":564,"./axis_ids":570,"./constants":573,"./graph_interact":576,"./layout_attributes":579,"./layout_defaults":580,"./transition_axes":590,"@plotly/d3":58}],579:[function(e,B,V){var f=e("../font_attributes"),l=e("../../components/color/attributes"),m=e("../../components/drawing/attributes").dash,x=e("../../lib/extend").extendFlat,t=e("../../plot_api/plot_template").templatedArray,a=e("../../plots/cartesian/axis_format_attributes").descriptionWithDates,i=e("../../constants/numerical").ONEDAY,r=e("./constants"),n=r.HOUR_PATTERN,d=r.WEEKDAY_PATTERN,s={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}};function o(w){return{valType:"integer",min:0,dflt:w?5:0,editType:"ticks"}}var y={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},g={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},b={valType:"data_array",editType:"ticks"},v={valType:"enumerated",values:["outside","inside",""],editType:"ticks"};function _(w){var h={valType:"number",min:0,editType:"ticks"};return w||(h.dflt=5),h}function u(w){var h={valType:"number",min:0,editType:"ticks"};return w||(h.dflt=1),h}var T={valType:"color",dflt:l.defaultLine,editType:"ticks"},c={valType:"color",dflt:l.lightLine,editType:"ticks"};function A(w){var h={valType:"number",min:0,editType:"ticks"};return w||(h.dflt=1),h}var k=x({},m,{editType:"ticks"}),p={valType:"boolean",editType:"ticks"};B.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:l.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:f({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[r.idRegex.x.toString(),r.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[r.idRegex.x.toString(),r.idRegex.y.toString()],editType:"calc"},rangebreaks:t("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[d,n,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:i},editType:"calc"}),tickmode:s,nticks:o(),tick0:y,dtick:g,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:b,ticktext:{valType:"data_array",editType:"ticks"},ticks:v,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:_(),tickwidth:u(),tickcolor:T,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},automargin:{valType:"flaglist",flags:["height","width","left","right","top","bottom"],extras:[!0,!1],dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:x({},m,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:f({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:a("tick label")},tickformatstops:t("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:a("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:l.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:p,gridcolor:c,gridwidth:A(),griddash:k,zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:l.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:l.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",r.idRegex.x.toString(),r.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",r.idRegex.x.toString(),r.idRegex.y.toString()],editType:"plot"},minor:{tickmode:s,nticks:o("minor"),tick0:y,dtick:g,tickvals:b,ticks:v,ticklen:_("minor"),tickwidth:u("minor"),tickcolor:T,gridcolor:c,gridwidth:A("minor"),griddash:k,showgrid:p,editType:"ticks"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:f({editType:"ticks"})}}},{"../../components/color/attributes":366,"../../components/drawing/attributes":388,"../../constants/numerical":491,"../../lib/extend":505,"../../plot_api/plot_template":555,"../../plots/cartesian/axis_format_attributes":569,"../font_attributes":594,"./constants":573}],580:[function(e,B,V){var f=e("../../lib"),l=e("../../components/color"),m=e("../../components/fx/helpers").isUnifiedHover,x=e("../../components/fx/hovermode_defaults"),t=e("../../plot_api/plot_template"),a=e("../layout_attributes"),i=e("./layout_attributes"),r=e("./type_defaults"),n=e("./axis_defaults"),d=e("./constraints"),s=e("./position_defaults"),o=e("./axis_ids"),y=o.id2name,g=o.name2id,b=e("./constants").AX_ID_PATTERN,v=e("../../registry"),_=v.traceIs,u=v.getComponentMethod;function T(c,A,k){Array.isArray(c[A])?c[A].push(k):c[A]=[k]}B.exports=function(A,k,p){var w=k.autotypenumbers,h={},D={},S={},M={},L={},R={},z={},P={},I={},U={},O,G;for(O=0;O<p.length;O++){var $=p[O];if(!(!_($,"cartesian")&&!_($,"gl2d"))){var tt;if($.xaxis)tt=y($.xaxis),T(h,tt,$);else if($.xaxes)for(G=0;G<$.xaxes.length;G++)T(h,y($.xaxes[G]),$);var Z;if($.yaxis)Z=y($.yaxis),T(h,Z,$);else if($.yaxes)for(G=0;G<$.yaxes.length;G++)T(h,y($.yaxes[G]),$);if($.type==="funnel"?$.orientation==="h"?(tt&&(D[tt]=!0),Z&&(z[Z]=!0)):Z&&(S[Z]=!0):$.type==="image"?(Z&&(P[Z]=!0),tt&&(P[tt]=!0)):(Z&&(L[Z]=!0,R[Z]=!0),(!_($,"carpet")||$.type==="carpet"&&!$._cheater)&&tt&&(M[tt]=!0)),$.type==="carpet"&&$._cheater&&tt&&(D[tt]=!0),_($,"2dMap")&&(I[tt]=!0,I[Z]=!0),_($,"oriented")){var X=$.orientation==="h"?Z:tt;U[X]=!0}}}var J=k._subplots,st=J.xaxis,at=J.yaxis,lt=f.simpleMap(st,y),F=f.simpleMap(at,y),H=lt.concat(F),et=l.background;st.length&&at.length&&(et=f.coerce(A,k,a,"plot_bgcolor"));var q=l.combine(et,k.paper_bgcolor),W,K,nt,it,ot;function ct(){var Xt=h[W]||[];ot._traceIndices=Xt.map(function(St){return St._expandedIndex}),ot._annIndices=[],ot._shapeIndices=[],ot._selectionIndices=[],ot._imgIndices=[],ot._subplotsWith=[],ot._counterAxes=[],ot._name=ot._attr=W,ot._id=K}function bt(Xt,St){return f.coerce(it,ot,i,Xt,St)}function ut(Xt,St){return f.coerce2(it,ot,i,Xt,St)}function pt(Xt){return Xt==="x"?at:st}function yt(Xt,St){for(var Vt=Xt==="x"?lt:F,Zt=[],qt=0;qt<Vt.length;qt++){var Te=Vt[qt];Te!==St&&!(A[Te]||{}).overlaying&&Zt.push(g(Te))}return Zt}var Tt={x:pt("x"),y:pt("y")},kt=Tt.x.concat(Tt.y),zt={},Rt=[];function Gt(){var Xt=it.matches;b.test(Xt)&&kt.indexOf(Xt)===-1&&(zt[Xt]=it.type,Rt=Object.keys(zt))}var wt=x(A,k),It=m(wt);for(O=0;O<H.length;O++){W=H[O],K=g(W),nt=W.charAt(0),f.isPlainObject(A[W])||(A[W]={}),it=A[W],ot=t.newContainer(k,W,nt+"axis"),ct();var $t=nt==="x"&&!M[W]&&D[W]||nt==="y"&&!L[W]&&S[W],Qt=nt==="y"&&(!R[W]&&z[W]||P[W]),Nt={hasMinor:!0,letter:nt,font:k.font,outerTicks:I[W],showGrid:!U[W],data:h[W]||[],bgColor:q,calendar:k.calendar,automargin:!0,visibleDflt:$t,reverseDflt:Qt,autotypenumbersDflt:w,splomStash:((k._splomAxes||{})[nt]||{})[K]};bt("uirevision",k.uirevision),r(it,ot,bt,Nt),n(it,ot,bt,Nt,k);var Pt=It&&nt===wt.charAt(0),Yt=ut("spikecolor",It?ot.color:void 0),ve=ut("spikethickness",It?1.5:void 0),Re=ut("spikedash",It?"dot":void 0),ir=ut("spikemode",It?"across":void 0),Ie=ut("spikesnap"),Be=bt("showspikes",!!Pt||!!Yt||!!ve||!!Re||!!ir||!!Ie);Be||(delete ot.spikecolor,delete ot.spikethickness,delete ot.spikedash,delete ot.spikemode,delete ot.spikesnap),s(it,ot,bt,{letter:nt,counterAxes:Tt[nt],overlayableAxes:yt(nt,W),grid:k.grid}),bt("title.standoff"),Gt(),ot._input=it}for(O=0;O<Rt.length;){K=Rt[O++],W=y(K),nt=W.charAt(0),f.isPlainObject(A[W])||(A[W]={}),it=A[W],ot=t.newContainer(k,W,nt+"axis"),ct();var Ye={letter:nt,font:k.font,outerTicks:I[W],showGrid:!U[W],data:[],bgColor:q,calendar:k.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:w,splomStash:((k._splomAxes||{})[nt]||{})[K]};bt("uirevision",k.uirevision),ot.type=zt[K]||"linear",n(it,ot,bt,Ye,k),s(it,ot,bt,{letter:nt,counterAxes:Tt[nt],overlayableAxes:yt(nt,W),grid:k.grid}),bt("fixedrange"),Gt(),ot._input=it}var ze=u("rangeslider","handleDefaults"),Ee=u("rangeselector","handleDefaults");for(O=0;O<lt.length;O++)W=lt[O],it=A[W],ot=k[W],ze(A,k,W),ot.type==="date"&&Ee(it,ot,k,F,ot.calendar),bt("fixedrange");for(O=0;O<F.length;O++){W=F[O],it=A[W],ot=k[W];var Wt=k[y(ot.anchor)],ee=u("rangeslider","isVisible")(Wt);bt("fixedrange",ee)}d.handleDefaults(A,k,{axIds:kt.concat(Rt).sort(o.idSort),axHasImage:P})}},{"../../components/color":367,"../../components/fx/helpers":403,"../../components/fx/hovermode_defaults":406,"../../lib":515,"../../plot_api/plot_template":555,"../../registry":647,"../layout_attributes":619,"./axis_defaults":568,"./axis_ids":570,"./constants":573,"./constraints":574,"./layout_attributes":579,"./position_defaults":582,"./type_defaults":591}],581:[function(e,B,V){var f=e("tinycolor2").mix,l=e("../../components/color/attributes"),m=e("../../lib");B.exports=function(t,a,i,r){r=r||{};var n=r.dfltColor;function d(S,M){return m.coerce2(t,a,r.attributes,S,M)}var s=d("linecolor",n),o=d("linewidth"),y=i("showline",r.showLine||!!s||!!o);y||(delete a.linecolor,delete a.linewidth);var g=f(n,r.bgColor,r.blend||l.lightFraction).toRgbString(),b=d("gridcolor",g),v=d("gridwidth"),_=d("griddash"),u=i("showgrid",r.showGrid||!!b||!!v||!!_);if(u||(delete a.gridcolor,delete a.gridwidth,delete a.griddash),r.hasMinor){var T=f(a.gridcolor,r.bgColor,67).toRgbString(),c=d("minor.gridcolor",T),A=d("minor.gridwidth",a.gridwidth||1),k=d("minor.griddash",a.griddash||"solid"),p=i("minor.showgrid",!!c||!!A||!!k);p||(delete a.minor.gridcolor,delete a.minor.gridwidth,delete a.minor.griddash)}if(!r.noZeroLine){var w=d("zerolinecolor",n),h=d("zerolinewidth"),D=i("zeroline",r.showGrid||!!w||!!h);D||(delete a.zerolinecolor,delete a.zerolinewidth)}}},{"../../components/color/attributes":366,"../../lib":515,tinycolor2:313}],582:[function(e,B,V){var f=e("fast-isnumeric"),l=e("../../lib");B.exports=function(x,t,a,i){var r=i.counterAxes||[],n=i.overlayableAxes||[],d=i.letter,s=i.grid,o,y,g,b;s&&(y=s._domains[d][s._axisMap[t._id]],o=s._anchors[t._id],y&&(g=s[d+"side"].split(" ")[0],b=s.domain[d][g==="right"||g==="top"?1:0])),y=y||[0,1],o=o||(f(x.position)?"free":r[0]||"free"),g=g||(d==="x"?"bottom":"left"),b=b||0;var v=l.coerce(x,t,{anchor:{valType:"enumerated",values:["free"].concat(r),dflt:o}},"anchor");v==="free"&&a("position",b),l.coerce(x,t,{side:{valType:"enumerated",values:d==="x"?["bottom","top"]:["left","right"],dflt:g}},"side");var _=!1;if(n.length&&(_=l.coerce(x,t,{overlaying:{valType:"enumerated",values:[!1].concat(n),dflt:!1}},"overlaying")),!_){var u=a("domain",y);u[0]>u[1]-1/4096&&(t.domain=y),l.noneOrAll(x.domain,t.domain,y)}return a("layer"),t}},{"../../lib":515,"fast-isnumeric":190}],583:[function(e,B,V){var f=e("./show_dflt");B.exports=function(m,x,t,a,i){i||(i={});var r=i.tickSuffixDflt,n=f(m),d=t("tickprefix");d&&t("showtickprefix",n);var s=t("ticksuffix",r);s&&t("showticksuffix",n)}},{"./show_dflt":586}],584:[function(e,B,V){var f=e("../../constants/alignment").FROM_BL;B.exports=function(m,x,t){t===void 0&&(t=f[m.constraintoward||"center"]);var a=[m.r2l(m.range[0]),m.r2l(m.range[1])],i=a[0]+(a[1]-a[0])*t;m.range=m._input.range=[m.l2r(i+(a[0]-i)*x),m.l2r(i+(a[1]-i)*x)],m.setScale()}},{"../../constants/alignment":483}],585:[function(e,B,V){var f=e("@plotly/d3"),l=e("d3-time-format").utcFormat,m=e("../../lib"),x=m.numberFormat,t=e("fast-isnumeric"),a=m.cleanNumber,i=m.ms2DateTime,r=m.dateTime2ms,n=m.ensureNumber,d=m.isArrayOrTypedArray,s=e("../../constants/numerical"),o=s.FP_SAFE,y=s.BADNUM,g=s.LOG_CLIP,b=s.ONEWEEK,v=s.ONEDAY,_=s.ONEHOUR,u=s.ONEMIN,T=s.ONESEC,c=e("./axis_ids"),A=e("./constants"),k=A.HOUR_PATTERN,p=A.WEEKDAY_PATTERN;function w(D){return Math.pow(10,D)}function h(D){return D!=null}B.exports=function(S,M){M=M||{};var L=S._id||"x",R=L.charAt(0);function z(H,et){if(H>0)return Math.log(H)/Math.LN10;if(H<=0&&et&&S.range&&S.range.length===2){var q=S.range[0],W=S.range[1];return .5*(q+W-2*g*Math.abs(q-W))}else return y}function P(H,et,q,W){if((W||{}).msUTC&&t(H))return+H;var K=r(H,q||S.calendar);if(K===y)if(t(H)){H=+H;var nt=Math.floor(m.mod(H+.05,1)*10),it=Math.round(H-nt/10);K=r(new Date(it))+nt/10}else return y;return K}function I(H,et,q){return i(H,et,q||S.calendar)}function U(H){return S._categories[Math.round(H)]}function O(H){if(h(H)){if(S._categoriesMap===void 0&&(S._categoriesMap={}),S._categoriesMap[H]!==void 0)return S._categoriesMap[H];S._categories.push(typeof H=="number"?String(H):H);var et=S._categories.length-1;return S._categoriesMap[H]=et,et}return y}function G(H,et){for(var q=new Array(et),W=0;W<et;W++){var K=(H[0]||[])[W],nt=(H[1]||[])[W];q[W]=$([K,nt])}return q}function $(H){if(S._categoriesMap)return S._categoriesMap[H]}function tt(H){var et=$(H);if(et!==void 0)return et;if(t(H))return+H}function Z(H){return t(H)?+H:$(H)}function X(H,et,q){return f.round(q+et*H,2)}function J(H,et,q){return(H-q)/et}var st=function(et){return t(et)?X(et,S._m,S._b):y},at=function(H){return J(H,S._m,S._b)};if(S.rangebreaks){var lt=R==="y";st=function(H){if(!t(H))return y;var et=S._rangebreaks.length;if(!et)return X(H,S._m,S._b);var q=lt;S.range[0]>S.range[1]&&(q=!q);for(var W=q?-1:1,K=W*H,nt=0,it=0;it<et;it++){var ot=W*S._rangebreaks[it].min,ct=W*S._rangebreaks[it].max;if(K<ot)break;if(K>ct)nt=it+1;else{nt=K<(ot+ct)/2?it:it+1;break}}var bt=S._B[nt]||0;return isFinite(bt)?X(H,S._m2,bt):0},at=function(H){var et=S._rangebreaks.length;if(!et)return J(H,S._m,S._b);for(var q=0,W=0;W<et&&!(H<S._rangebreaks[W].pmin);W++)H>S._rangebreaks[W].pmax&&(q=W+1);return J(H,S._m2,S._B[q])}}S.c2l=S.type==="log"?z:n,S.l2c=S.type==="log"?w:n,S.l2p=st,S.p2l=at,S.c2p=S.type==="log"?function(H,et){return st(z(H,et))}:st,S.p2c=S.type==="log"?function(H){return w(at(H))}:at,["linear","-"].indexOf(S.type)!==-1?(S.d2r=S.r2d=S.d2c=S.r2c=S.d2l=S.r2l=a,S.c2d=S.c2r=S.l2d=S.l2r=n,S.d2p=S.r2p=function(H){return S.l2p(a(H))},S.p2d=S.p2r=at,S.cleanPos=n):S.type==="log"?(S.d2r=S.d2l=function(H,et){return z(a(H),et)},S.r2d=S.r2c=function(H){return w(a(H))},S.d2c=S.r2l=a,S.c2d=S.l2r=n,S.c2r=z,S.l2d=w,S.d2p=function(H,et){return S.l2p(S.d2r(H,et))},S.p2d=function(H){return w(at(H))},S.r2p=function(H){return S.l2p(a(H))},S.p2r=at,S.cleanPos=n):S.type==="date"?(S.d2r=S.r2d=m.identity,S.d2c=S.r2c=S.d2l=S.r2l=P,S.c2d=S.c2r=S.l2d=S.l2r=I,S.d2p=S.r2p=function(H,et,q){return S.l2p(P(H,0,q))},S.p2d=S.p2r=function(H,et,q){return I(at(H),et,q)},S.cleanPos=function(H){return m.cleanDate(H,y,S.calendar)}):S.type==="category"?(S.d2c=S.d2l=O,S.r2d=S.c2d=S.l2d=U,S.d2r=S.d2l_noadd=tt,S.r2c=function(H){var et=Z(H);return et!==void 0?et:S.fraction2r(.5)},S.l2r=S.c2r=n,S.r2l=Z,S.d2p=function(H){return S.l2p(S.r2c(H))},S.p2d=function(H){return U(at(H))},S.r2p=S.d2p,S.p2r=at,S.cleanPos=function(H){return typeof H=="string"&&H!==""?H:n(H)}):S.type==="multicategory"&&(S.r2d=S.c2d=S.l2d=U,S.d2r=S.d2l_noadd=tt,S.r2c=function(H){var et=tt(H);return et!==void 0?et:S.fraction2r(.5)},S.r2c_just_indices=$,S.l2r=S.c2r=n,S.r2l=tt,S.d2p=function(H){return S.l2p(S.r2c(H))},S.p2d=function(H){return U(at(H))},S.r2p=S.d2p,S.p2r=at,S.cleanPos=function(H){return Array.isArray(H)||typeof H=="string"&&H!==""?H:n(H)},S.setupMultiCategory=function(H){var et=S._traceIndices,q,W,K=S._matchGroup;if(K&&S._categories.length===0){for(var nt in K)if(nt!==L){var it=M[c.id2name(nt)];et=et.concat(it._traceIndices)}}var ot=[[0,{}],[0,{}]],ct=[];for(q=0;q<et.length;q++){var bt=H[et[q]];if(R in bt){var ut=bt[R],pt=bt._length||m.minRowLength(ut);if(d(ut[0])&&d(ut[1]))for(W=0;W<pt;W++){var yt=ut[0][W],Tt=ut[1][W];h(yt)&&h(Tt)&&(ct.push([yt,Tt]),yt in ot[0][1]||(ot[0][1][yt]=ot[0][0]++),Tt in ot[1][1]||(ot[1][1][Tt]=ot[1][0]++))}}}for(ct.sort(function(kt,zt){var Rt=ot[0][1],Gt=Rt[kt[0]]-Rt[zt[0]];if(Gt)return Gt;var wt=ot[1][1];return wt[kt[1]]-wt[zt[1]]}),q=0;q<ct.length;q++)O(ct[q])}),S.fraction2r=function(H){var et=S.r2l(S.range[0]),q=S.r2l(S.range[1]);return S.l2r(et+H*(q-et))},S.r2fraction=function(H){var et=S.r2l(S.range[0]),q=S.r2l(S.range[1]);return(S.r2l(H)-et)/(q-et)},S.cleanRange=function(H,et){et||(et={}),H||(H="range");var q=m.nestedProperty(S,H).get(),W,K;if(S.type==="date"?K=m.dfltRange(S.calendar):R==="y"?K=A.DFLTRANGEY:S._name==="realaxis"?K=[0,1]:K=et.dfltRange||A.DFLTRANGEX,K=K.slice(),(S.rangemode==="tozero"||S.rangemode==="nonnegative")&&(K[0]=0),!q||q.length!==2){m.nestedProperty(S,H).set(K);return}for(S.type==="date"&&!S.autorange&&(q[0]=m.cleanDate(q[0],y,S.calendar),q[1]=m.cleanDate(q[1],y,S.calendar)),W=0;W<2;W++)if(S.type==="date"){if(!m.isDateTime(q[W],S.calendar)){S[H]=K;break}if(S.r2l(q[0])===S.r2l(q[1])){var nt=m.constrain(S.r2l(q[0]),m.MIN_MS+1e3,m.MAX_MS-1e3);q[0]=S.l2r(nt-1e3),q[1]=S.l2r(nt+1e3);break}}else{if(!t(q[W]))if(t(q[1-W]))q[W]=q[1-W]*(W?10:.1);else{S[H]=K;break}if(q[W]<-o?q[W]=-o:q[W]>o&&(q[W]=o),q[0]===q[1]){var it=Math.max(1,Math.abs(q[0]*1e-6));q[0]-=it,q[1]+=it}}},S.setScale=function(H){var et=M._size;if(S.overlaying){var q=c.getFromId({_fullLayout:M},S.overlaying);S.domain=q.domain}var W=H&&S._r?"_r":"range",K=S.calendar;S.cleanRange(W);var nt=S.r2l(S[W][0],K),it=S.r2l(S[W][1],K),ot=R==="y";if(ot?(S._offset=et.t+(1-S.domain[1])*et.h,S._length=et.h*(S.domain[1]-S.domain[0]),S._m=S._length/(nt-it),S._b=-S._m*it):(S._offset=et.l+S.domain[0]*et.w,S._length=et.w*(S.domain[1]-S.domain[0]),S._m=S._length/(it-nt),S._b=-S._m*nt),S._rangebreaks=[],S._lBreaks=0,S._m2=0,S._B=[],S.rangebreaks){var ct,bt;if(S._rangebreaks=S.locateBreaks(Math.min(nt,it),Math.max(nt,it)),S._rangebreaks.length){for(ct=0;ct<S._rangebreaks.length;ct++)bt=S._rangebreaks[ct],S._lBreaks+=Math.abs(bt.max-bt.min);var ut=ot;nt>it&&(ut=!ut),ut&&S._rangebreaks.reverse();var pt=ut?-1:1;for(S._m2=pt*S._length/(Math.abs(it-nt)-S._lBreaks),S._B.push(-S._m2*(ot?it:nt)),ct=0;ct<S._rangebreaks.length;ct++)bt=S._rangebreaks[ct],S._B.push(S._B[S._B.length-1]-pt*S._m2*(bt.max-bt.min));for(ct=0;ct<S._rangebreaks.length;ct++)bt=S._rangebreaks[ct],bt.pmin=st(bt.min),bt.pmax=st(bt.max)}}if(!isFinite(S._m)||!isFinite(S._b)||S._length<0)throw M._replotting=!1,new Error("Something went wrong with axis scaling")},S.maskBreaks=function(H){var et=S.rangebreaks||[],q,W,K,nt,it;et._cachedPatterns||(et._cachedPatterns=et.map(function(Rt){return Rt.enabled&&Rt.bounds?m.simpleMap(Rt.bounds,Rt.pattern?a:S.d2c):null})),et._cachedValues||(et._cachedValues=et.map(function(Rt){return Rt.enabled&&Rt.values?m.simpleMap(Rt.values,S.d2c).sort(m.sorterAsc):null}));for(var ot=0;ot<et.length;ot++){var ct=et[ot];if(ct.enabled){if(ct.bounds){var bt=ct.pattern;switch(q=et._cachedPatterns[ot],W=q[0],K=q[1],bt){case p:it=new Date(H),nt=it.getUTCDay(),W>K&&(K+=7,nt<W&&(nt+=7));break;case k:it=new Date(H);var ut=it.getUTCHours(),pt=it.getUTCMinutes(),yt=it.getUTCSeconds(),Tt=it.getUTCMilliseconds();nt=ut+(pt/60+yt/3600+Tt/36e5),W>K&&(K+=24,nt<W&&(nt+=24));break;case"":nt=H;break}if(nt>=W&&nt<K)return y}else for(var kt=et._cachedValues[ot],zt=0;zt<kt.length;zt++)if(W=kt[zt],K=W+ct.dvalue,H>=W&&H<K)return y}}return H},S.locateBreaks=function(H,et){var q,W,K,nt,it=[];if(!S.rangebreaks)return it;var ot=S.rangebreaks.slice().sort(function(wt,It){return wt.pattern===p&&It.pattern===k?-1:It.pattern===p&&wt.pattern===k?1:0}),ct=function(wt,It){if(wt=m.constrain(wt,H,et),It=m.constrain(It,H,et),wt!==It){for(var $t=!0,Qt=0;Qt<it.length;Qt++){var Nt=it[Qt];wt<Nt.max&&It>=Nt.min&&(wt<Nt.min&&(Nt.min=wt),It>Nt.max&&(Nt.max=It),$t=!1)}$t&&it.push({min:wt,max:It})}};for(q=0;q<ot.length;q++){var bt=ot[q];if(bt.enabled)if(bt.bounds){var ut=H,pt=et;bt.pattern&&(ut=Math.floor(ut)),W=m.simpleMap(bt.bounds,bt.pattern?a:S.r2l),K=W[0],nt=W[1];var yt=new Date(ut),Tt,kt;switch(bt.pattern){case p:kt=b,Tt=((nt<K?7:0)+(nt-K))*v,ut+=K*v-(yt.getUTCDay()*v+yt.getUTCHours()*_+yt.getUTCMinutes()*u+yt.getUTCSeconds()*T+yt.getUTCMilliseconds());break;case k:kt=v,Tt=((nt<K?24:0)+(nt-K))*_,ut+=K*_-(yt.getUTCHours()*_+yt.getUTCMinutes()*u+yt.getUTCSeconds()*T+yt.getUTCMilliseconds());break;default:ut=Math.min(W[0],W[1]),pt=Math.max(W[0],W[1]),kt=pt-ut,Tt=kt}for(var zt=ut;zt<pt;zt+=kt)ct(zt,zt+Tt)}else for(var Rt=m.simpleMap(bt.values,S.d2c),Gt=0;Gt<Rt.length;Gt++)K=Rt[Gt],nt=K+bt.dvalue,ct(K,nt)}return it.sort(function(wt,It){return wt.min-It.min}),it},S.makeCalcdata=function(H,et,q){var W,K,nt,it,ot=S.type,ct=ot==="date"&&H[et+"calendar"];if(et in H){if(W=H[et],it=H._length||m.minRowLength(W),m.isTypedArray(W)&&(ot==="linear"||ot==="log")){if(it===W.length)return W;if(W.subarray)return W.subarray(0,it)}if(ot==="multicategory")return G(W,it);for(K=new Array(it),nt=0;nt<it;nt++)K[nt]=S.d2c(W[nt],0,ct,q)}else{var bt=et+"0"in H?S.d2c(H[et+"0"],0,ct):0,ut=H["d"+et]?Number(H["d"+et]):1;for(W=H[{x:"y",y:"x"}[et]],it=H._length||W.length,K=new Array(it),nt=0;nt<it;nt++)K[nt]=bt+nt*ut}if(S.rangebreaks)for(nt=0;nt<it;nt++)K[nt]=S.maskBreaks(K[nt]);return K},S.isValidRange=function(H){return Array.isArray(H)&&H.length===2&&t(S.r2l(H[0]))&&t(S.r2l(H[1]))},S.isPtWithinRange=function(H,et){var q=S.c2l(H[R],null,et),W=S.r2l(S.range[0]),K=S.r2l(S.range[1]);return W<K?W<=q&&q<=K:K<=q&&q<=W},S._emptyCategories=function(){S._categories=[],S._categoriesMap={}},S.clearCalc=function(){var H=S._matchGroup;if(H){var et=null,q=null;for(var W in H){var K=M[c.id2name(W)];if(K._categories){et=K._categories,q=K._categoriesMap;break}}et&&q?(S._categories=et,S._categoriesMap=q):S._emptyCategories()}else S._emptyCategories();if(S._initialCategories)for(var nt=0;nt<S._initialCategories.length;nt++)O(S._initialCategories[nt])},S.sortByInitialCategories=function(){var H=[];if(S._emptyCategories(),S._initialCategories)for(var et=0;et<S._initialCategories.length;et++)O(S._initialCategories[et]);H=H.concat(S._traceIndices);var q=S._matchGroup;for(var W in q)if(L!==W){var K=M[c.id2name(W)];K._categories=S._categories,K._categoriesMap=S._categoriesMap,H=H.concat(K._traceIndices)}return H};var F=M._d3locale;S.type==="date"&&(S._dateFormat=F?F.timeFormat:l,S._extraFormat=M._extraFormat),S._separators=M.separators,S._numFormat=F?F.numberFormat:x,delete S._minDtick,delete S._forceTick0}},{"../../constants/numerical":491,"../../lib":515,"./axis_ids":570,"./constants":573,"@plotly/d3":58,"d3-time-format":120,"fast-isnumeric":190}],586:[function(e,B,V){B.exports=function(l){var m=["showexponent","showtickprefix","showticksuffix"],x=m.filter(function(a){return l[a]!==void 0}),t=function(a){return l[a]===l[x[0]]};if(x.every(t)||x.length===1)return l[x[0]]}},{}],587:[function(e,B,V){var f=e("../../lib"),l=e("../../components/color").contrast,m=e("./layout_attributes"),x=e("./show_dflt"),t=e("../array_container_defaults");B.exports=function(r,n,d,s,o){o||(o={});var y=x(r),g=d("showticklabels");if(g){var b=o.font||{},v=n.color,_=n.ticklabelposition||"",u=_.indexOf("inside")!==-1?l(o.bgColor):v&&v!==m.color.dflt?v:b.color;if(f.coerceFont(d,"tickfont",{family:b.family,size:b.size,color:u}),!o.noTicklabelstep&&s!=="multicategory"&&s!=="log"&&d("ticklabelstep"),o.noAng||d("tickangle"),s!=="category"){var T=d("tickformat");t(r,n,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:a}),n.tickformatstops.length||delete n.tickformatstops,!o.noExp&&!T&&s!=="date"&&(d("showexponent",y),d("exponentformat"),d("minexponent"),d("separatethousands"))}}};function a(i,r){function n(s,o){return f.coerce(i,r,m.tickformatstops,s,o)}var d=n("enabled");d&&(n("dtickrange"),n("value"))}},{"../../components/color":367,"../../lib":515,"../array_container_defaults":561,"./layout_attributes":579,"./show_dflt":586}],588:[function(e,B,V){var f=e("../../lib"),l=e("./layout_attributes");B.exports=function(x,t,a,i){var r=i.isMinor,n=r?x.minor||{}:x,d=r?t.minor:t,s=r?l.minor:l,o=r?"minor.":"",y=f.coerce2(n,d,s,"ticklen",r?(t.ticklen||5)*.6:void 0),g=f.coerce2(n,d,s,"tickwidth",r?t.tickwidth||1:void 0),b=f.coerce2(n,d,s,"tickcolor",(r?t.tickcolor:void 0)||d.color),v=a(o+"ticks",!r&&i.outerTicks||y||g||b?"outside":"");v||(delete d.ticklen,delete d.tickwidth,delete d.tickcolor)}},{"../../lib":515,"./layout_attributes":579}],589:[function(e,B,V){var f=e("./clean_ticks"),l=e("../../lib").isArrayOrTypedArray;B.exports=function(x,t,a,i,r){r||(r={});var n=r.isMinor,d=n?x.minor||{}:x,s=n?t.minor:t,o=n?"minor.":"";function y(A){var k=d[A];return k!==void 0?k:(s._template||{})[A]}var g=y("tick0"),b=y("dtick"),v=y("tickvals"),_=l(v)?"array":b?"linear":"auto",u=a(o+"tickmode",_);if(u==="auto")a(o+"nticks");else if(u==="linear"){var T=s.dtick=f.dtick(b,i);s.tick0=f.tick0(g,i,t.calendar,T)}else if(i!=="multicategory"){var c=a(o+"tickvals");c===void 0?s.tickmode="auto":n||a("ticktext")}}},{"../../lib":515,"./clean_ticks":572}],590:[function(e,B,V){var f=e("@plotly/d3"),l=e("../../registry"),m=e("../../lib"),x=e("../../components/drawing"),t=e("./axes");B.exports=function(i,r,n,d){var s=i._fullLayout;if(r.length===0){t.redrawComponents(i);return}function o(k){var p=k.xaxis,w=k.yaxis;s._defs.select("#"+k.clipId+"> rect").call(x.setTranslate,0,0).call(x.setScale,1,1),k.plot.call(x.setTranslate,p._offset,w._offset).call(x.setScale,1,1);var h=k.plot.selectAll(".scatterlayer .trace");h.selectAll(".point").call(x.setPointGroupScale,1,1),h.selectAll(".textpoint").call(x.setTextPointsScale,1,1),h.call(x.hideOutsideRangePoints,k)}function y(k,p){var w=k.plotinfo,h=w.xaxis,D=w.yaxis,S=h._length,M=D._length,L=!!k.xr1,R=!!k.yr1,z=[];if(L){var P=m.simpleMap(k.xr0,h.r2l),I=m.simpleMap(k.xr1,h.r2l),U=P[1]-P[0],O=I[1]-I[0];z[0]=(P[0]*(1-p)+p*I[0]-P[0])/(P[1]-P[0])*S,z[2]=S*(1-p+p*O/U),h.range[0]=h.l2r(P[0]*(1-p)+p*I[0]),h.range[1]=h.l2r(P[1]*(1-p)+p*I[1])}else z[0]=0,z[2]=S;if(R){var G=m.simpleMap(k.yr0,D.r2l),$=m.simpleMap(k.yr1,D.r2l),tt=G[1]-G[0],Z=$[1]-$[0];z[1]=(G[1]*(1-p)+p*$[1]-G[1])/(G[0]-G[1])*M,z[3]=M*(1-p+p*Z/tt),D.range[0]=h.l2r(G[0]*(1-p)+p*$[0]),D.range[1]=D.l2r(G[1]*(1-p)+p*$[1])}else z[1]=0,z[3]=M;t.drawOne(i,h,{skipTitle:!0}),t.drawOne(i,D,{skipTitle:!0}),t.redrawComponents(i,[h._id,D._id]);var X=L?S/z[2]:1,J=R?M/z[3]:1,st=L?z[0]:0,at=R?z[1]:0,lt=L?z[0]/z[2]*S:0,F=R?z[1]/z[3]*M:0,H=h._offset-lt,et=D._offset-F;w.clipRect.call(x.setTranslate,st,at).call(x.setScale,1/X,1/J),w.plot.call(x.setTranslate,H,et).call(x.setScale,X,J),x.setPointGroupScale(w.zoomScalePts,1/X,1/J),x.setTextPointsScale(w.zoomScaleTxt,1/X,1/J)}var g;d&&(g=d());function b(){for(var k={},p=0;p<r.length;p++){var w=r[p],h=w.plotinfo.xaxis,D=w.plotinfo.yaxis;w.xr1&&(k[h._name+".range"]=w.xr1.slice()),w.yr1&&(k[D._name+".range"]=w.yr1.slice())}return g&&g(),l.call("relayout",i,k).then(function(){for(var S=0;S<r.length;S++)o(r[S].plotinfo)})}function v(){for(var k={},p=0;p<r.length;p++){var w=r[p],h=w.plotinfo.xaxis,D=w.plotinfo.yaxis;w.xr0&&(k[h._name+".range"]=w.xr0.slice()),w.yr0&&(k[D._name+".range"]=w.yr0.slice())}return l.call("relayout",i,k).then(function(){for(var S=0;S<r.length;S++)o(r[S].plotinfo)})}var _,u,T,c=f.ease(n.easing);i._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(T),T=null,v()});function A(){u=Date.now();for(var k=Math.min(1,(u-_)/n.duration),p=c(k),w=0;w<r.length;w++)y(r[w],p);u-_>n.duration?(b(),T=window.cancelAnimationFrame(A)):T=window.requestAnimationFrame(A)}return _=Date.now(),T=window.requestAnimationFrame(A),Promise.resolve()}},{"../../components/drawing":389,"../../lib":515,"../../registry":647,"./axes":566,"@plotly/d3":58}],591:[function(e,B,V){var f=e("../../registry").traceIs,l=e("./axis_autotype");B.exports=function(r,n,d,s){d("autotypenumbers",s.autotypenumbersDflt);var o=d("type",(s.splomStash||{}).type);o==="-"&&(m(n,s.data),n.type==="-"?n.type="linear":r.type=n.type)};function m(i,r){if(i.type==="-"){var n=i._id,d=n.charAt(0),s;n.indexOf("scene")!==-1&&(n=d);var o=x(r,n,d);if(!!o){if(o.type==="histogram"&&d==={v:"y",h:"x"}[o.orientation||"v"]){i.type="linear";return}var y=d+"calendar",g=o[y],b={noMultiCategory:!f(o,"cartesian")||f(o,"noMultiCategory")};if(o.type==="box"&&o._hasPreCompStats&&d==={h:"x",v:"y"}[o.orientation||"v"]&&(b.noMultiCategory=!0),b.autotypenumbers=i.autotypenumbers,a(o,d)){var v=t(o),_=[];for(s=0;s<r.length;s++){var u=r[s];!f(u,"box-violin")||(u[d+"axis"]||d)!==n||(u[v]!==void 0?_.push(u[v][0]):u.name!==void 0?_.push(u.name):_.push("text"),u[y]!==g&&(g=void 0))}i.type=l(_,g,b)}else if(o.type==="splom"){var T=o.dimensions,c=T[o._axesDim[n]];c.visible&&(i.type=l(c.values,g,b))}else i.type=l(o[d]||[o[d+"0"]],g,b)}}}function x(i,r,n){for(var d=0;d<i.length;d++){var s=i[d];if(s.type==="splom"&&s._length>0&&(s["_"+n+"axes"]||{})[r])return s;if((s[n+"axis"]||n)===r){if(a(s,n))return s;if((s[n]||[]).length||s[n+"0"])return s}}}function t(i){return{v:"x",h:"y"}[i.orientation||"v"]}function a(i,r){var n=t(i),d=f(i,"box-violin"),s=f(i._fullInput||{},"candlestick");return d&&!s&&r===n&&i[n]===void 0&&i[n+"0"]===void 0}},{"../../registry":647,"./axis_autotype":567}],592:[function(e,B,V){var f=e("../registry"),l=e("../lib");V.manageCommandObserver=function(r,n,d,s){var o={},y=!0;n&&n._commandObserver&&(o=n._commandObserver),o.cache||(o.cache={}),o.lookupTable={};var g=V.hasSimpleAPICommandBindings(r,d,o.lookupTable);if(n&&n._commandObserver){if(g)return o;if(n._commandObserver.remove)return n._commandObserver.remove(),n._commandObserver=null,o}if(g){m(r,g,o.cache),o.check=function(){if(!!y){var u=m(r,g,o.cache);return u.changed&&s&&o.lookupTable[u.value]!==void 0&&(o.disable(),Promise.resolve(s({value:u.value,type:g.type,prop:g.prop,traces:g.traces,index:o.lookupTable[u.value]})).then(o.enable,o.enable)),u.changed}};for(var b=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],v=0;v<b.length;v++)r._internalOn(b[v],o.check);o.remove=function(){for(var _=0;_<b.length;_++)r._removeInternalListener(b[_],o.check)}}else l.log("Unable to automatically bind plot updates to API command"),o.lookupTable={},o.remove=function(){};return o.disable=function(){y=!1},o.enable=function(){y=!0},n&&(n._commandObserver=o),o},V.hasSimpleAPICommandBindings=function(r,n,d){var s,o=n.length,y;for(s=0;s<o;s++){var g,b=n[s],v=b.method,_=b.args;if(Array.isArray(_)||(_=[]),!v)return!1;var u=V.computeAPICommandBindings(r,v,_);if(u.length!==1)return!1;if(!y)y=u[0],Array.isArray(y.traces)&&y.traces.sort();else{if(g=u[0],g.type!==y.type||g.prop!==y.prop)return!1;if(Array.isArray(y.traces))if(Array.isArray(g.traces)){g.traces.sort();for(var T=0;T<y.traces.length;T++)if(y.traces[T]!==g.traces[T])return!1}else return!1;else if(g.prop!==y.prop)return!1}g=u[0];var c=g.value;if(Array.isArray(c))if(c.length===1)c=c[0];else return!1;d&&(d[c]=s)}return y};function m(r,n,d){var s,o,y,g=!1;if(n.type==="data")s=r._fullData[n.traces!==null?n.traces[0]:0];else if(n.type==="layout")s=r._fullLayout;else return!1;return o=l.nestedProperty(s,n.prop).get(),y=d[n.type]=d[n.type]||{},y.hasOwnProperty(n.prop)&&y[n.prop]!==o&&(g=!0),y[n.prop]=o,{changed:g,value:o}}V.executeAPICommand=function(r,n,d){if(n==="skip")return Promise.resolve();var s=f.apiMethodRegistry[n],o=[r];Array.isArray(d)||(d=[]);for(var y=0;y<d.length;y++)o.push(d[y]);return s.apply(null,o).catch(function(g){return l.warn("API call to Plotly."+n+" rejected.",g),Promise.reject(g)})},V.computeAPICommandBindings=function(r,n,d){var s;switch(Array.isArray(d)||(d=[]),n){case"restyle":s=a(r,d);break;case"relayout":s=t(r,d);break;case"update":s=a(r,[d[0],d[2]]).concat(t(r,[d[1]]));break;case"animate":s=x(r,d);break;default:s=[]}return s};function x(r,n){return Array.isArray(n[0])&&n[0].length===1&&["string","number"].indexOf(typeof n[0][0])!==-1?[{type:"layout",prop:"_currentFrame",value:n[0][0].toString()}]:[]}function t(r,n){var d=[],s=n[0],o={};if(typeof s=="string")o[s]=n[1];else if(l.isPlainObject(s))o=s;else return d;return i(o,function(y,g,b){d.push({type:"layout",prop:y,value:b})},"",0),d}function a(r,n){var d,s,o,y,g=[];if(s=n[0],o=n[1],d=n[2],y={},typeof s=="string")y[s]=o;else if(l.isPlainObject(s))y=s,d===void 0&&(d=o);else return g;return d===void 0&&(d=null),i(y,function(b,v,_){var u,T;if(Array.isArray(_)){T=_.slice();var c=Math.min(T.length,r.data.length);d&&(c=Math.min(c,d.length)),u=[];for(var A=0;A<c;A++)u[A]=d?d[A]:A}else T=_,u=d?d.slice():null;if(u===null)Array.isArray(T)&&(T=T[0]);else if(Array.isArray(u)){if(!Array.isArray(T)){var k=T;T=[];for(var p=0;p<u.length;p++)T[p]=k}T.length=Math.min(u.length,T.length)}g.push({type:"data",prop:b,traces:u,value:T})},"",0),g}function i(r,n,d,s){Object.keys(r).forEach(function(o){var y=r[o];if(o[0]!=="_"){var g=d+(s>0?".":"")+o;l.isPlainObject(y)?i(y,n,g,s+1):n(g,o,y)}})}},{"../lib":515,"../registry":647}],593:[function(e,B,V){var f=e("../lib/extend").extendFlat;V.attributes=function(l,m){l=l||{},m=m||{};var x={valType:"info_array",editType:l.editType,items:[{valType:"number",min:0,max:1,editType:l.editType},{valType:"number",min:0,max:1,editType:l.editType}],dflt:[0,1]};l.name&&l.name+"",l.trace,m.description&&""+m.description;var t={x:f({},x,{}),y:f({},x,{}),editType:l.editType};return l.noGridCell||(t.row={valType:"integer",min:0,dflt:0,editType:l.editType},t.column={valType:"integer",min:0,dflt:0,editType:l.editType}),t},V.defaults=function(l,m,x,t){var a=t&&t.x||[0,1],i=t&&t.y||[0,1],r=m.grid;if(r){var n=x("domain.column");n!==void 0&&(n<r.columns?a=r._domains.x[n]:delete l.domain.column);var d=x("domain.row");d!==void 0&&(d<r.rows?i=r._domains.y[d]:delete l.domain.row)}var s=x("domain.x",a),o=x("domain.y",i);s[0]<s[1]||(l.domain.x=a.slice()),o[0]<o[1]||(l.domain.y=i.slice())}},{"../lib/extend":505}],594:[function(e,B,V){B.exports=function(f){var l=f.editType,m=f.colorEditType;m===void 0&&(m=l);var x={family:{valType:"string",noBlank:!0,strict:!0,editType:l},size:{valType:"number",min:1,editType:l},color:{valType:"color",editType:m},editType:l};return f.autoSize&&(x.size.dflt="auto"),f.autoColor&&(x.color.dflt="auto"),f.arrayOk&&(x.family.arrayOk=!0,x.size.arrayOk=!0,x.color.arrayOk=!0),x}},{}],595:[function(e,B,V){B.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},{}],596:[function(e,B,V){V.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr",equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"},V.axesNames=["lonaxis","lataxis"],V.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},V.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},V.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},V.clipPad=.001,V.precision=.1,V.landColor="#F0DC82",V.waterColor="#3399FF",V.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},V.sphereSVG={type:"Sphere"},V.fillLayers={ocean:1,land:1,lakes:1},V.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},V.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],V.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],V.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},{}],597:[function(e,B,V){var f=e("@plotly/d3"),l=e("d3-geo"),m=l.geoPath,x=l.geoDistance,t=e("d3-geo-projection"),a=e("../../registry"),i=e("../../lib"),r=i.strTranslate,n=e("../../components/color"),d=e("../../components/drawing"),s=e("../../components/fx"),o=e("../plots"),y=e("../cartesian/axes"),g=e("../cartesian/autorange").getAutoRange,b=e("../../components/dragelement"),v=e("../../components/selections").prepSelect,_=e("../../components/selections").clearOutline,u=e("../../components/selections").selectOnClick,T=e("./zoom"),c=e("./constants"),A=e("../../lib/geo_location_utils"),k=e("../../lib/topojson_utils"),p=e("topojson-client").feature;function w(L){this.id=L.id,this.graphDiv=L.graphDiv,this.container=L.container,this.topojsonURL=L.topojsonURL,this.isStatic=L.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}var h=w.prototype;B.exports=function(R){return new w(R)},h.plot=function(L,R,z){var P=this,I=R[this.id],U=[],O=!1;for(var G in c.layerNameToAdjective)if(G!=="frame"&&I["show"+G]){O=!0;break}for(var $=0;$<L.length;$++)if(L[0][0].trace.locationmode){O=!0;break}if(O){var tt=k.getTopojsonName(I);(P.topojson===null||tt!==P.topojsonName)&&(P.topojsonName=tt,PlotlyGeoAssets.topojson[P.topojsonName]===void 0&&U.push(P.fetchTopojson()))}U=U.concat(A.fetchTraceGeoData(L)),z.push(new Promise(function(Z,X){Promise.all(U).then(function(){P.topojson=PlotlyGeoAssets.topojson[P.topojsonName],P.update(L,R),Z()}).catch(X)}))},h.fetchTopojson=function(){var L=this,R=k.getTopojsonPath(L.topojsonURL,L.topojsonName);return new Promise(function(z,P){f.json(R,function(I,U){if(I)return I.status===404?P(new Error(["plotly.js could not find topojson file at",R+".","Make sure the *topojsonURL* plot config option","is set properly."].join(" "))):P(new Error(["unexpected error while fetching topojson file at",R].join(" ")));PlotlyGeoAssets.topojson[L.topojsonName]=U,z()})})},h.update=function(L,R){var z=R[this.id];this.hasChoropleth=!1;for(var P=0;P<L.length;P++){var I=L[P],U=I[0].trace;U.type==="choropleth"&&(this.hasChoropleth=!0),U.visible===!0&&U._length>0&&U._module.calcGeoJSON(I,R)}var O=this.updateProjection(L,R);if(!O){(!this.viewInitial||this.scope!==z.scope)&&this.saveViewInitial(z),this.scope=z.scope,this.updateBaseLayers(R,z),this.updateDims(R,z),this.updateFx(R,z),o.generalUpdatePerTraceModule(this.graphDiv,this,L,z);var G=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=G.selectAll(".point"),this.dataPoints.text=G.selectAll("text"),this.dataPaths.line=G.selectAll(".js-line");var $=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=$.selectAll("path"),this.render()}},h.updateProjection=function(L,R){var z=this.graphDiv,P=R[this.id],I=R._size,U=P.domain,O=P.projection,G=P.lonaxis,$=P.lataxis,tt=G._ax,Z=$._ax,X=this.projection=D(P),J=[[I.l+I.w*U.x[0],I.t+I.h*(1-U.y[1])],[I.l+I.w*U.x[1],I.t+I.h*(1-U.y[0])]],st=P.center||{},at=O.rotation||{},lt=G.range||[],F=$.range||[];if(P.fitbounds){tt._length=J[1][0]-J[0][0],Z._length=J[1][1]-J[0][1],tt.range=g(z,tt),Z.range=g(z,Z);var H=(tt.range[0]+tt.range[1])/2,et=(Z.range[0]+Z.range[1])/2;if(P._isScoped)st={lon:H,lat:et};else if(P._isClipped){st={lon:H,lat:et},at={lon:H,lat:et,roll:at.roll};var q=O.type,W=c.lonaxisSpan[q]/2||180,K=c.lataxisSpan[q]/2||90;lt=[H-W,H+W],F=[et-K,et+K]}else st={lon:H,lat:et},at={lon:H,lat:at.lat,roll:at.roll}}X.center([st.lon-at.lon,st.lat-at.lat]).rotate([-at.lon,-at.lat,at.roll]).parallels(O.parallels);var nt=M(lt,F);X.fitExtent(J,nt);var it=this.bounds=X.getBounds(nt),ot=this.fitScale=X.scale(),ct=X.translate();if(P.fitbounds){var bt=X.getBounds(M(tt.range,Z.range)),ut=Math.min((it[1][0]-it[0][0])/(bt[1][0]-bt[0][0]),(it[1][1]-it[0][1])/(bt[1][1]-bt[0][1]));isFinite(ut)?X.scale(ut*ot):i.warn("Something went wrong during"+this.id+"fitbounds computations.")}else X.scale(O.scale*ot);var pt=this.midPt=[(it[0][0]+it[1][0])/2,(it[0][1]+it[1][1])/2];if(X.translate([ct[0]+(pt[0]-ct[0]),ct[1]+(pt[1]-ct[1])]).clipExtent(it),P._isAlbersUsa){var yt=X([st.lon,st.lat]),Tt=X.translate();X.translate([Tt[0]-(yt[0]-Tt[0]),Tt[1]-(yt[1]-Tt[1])])}},h.updateBaseLayers=function(L,R){var z=this,P=z.topojson,I=z.layers,U=z.basePaths;function O(J){return J==="lonaxis"||J==="lataxis"}function G(J){return Boolean(c.lineLayers[J])}function $(J){return Boolean(c.fillLayers[J])}var tt=this.hasChoropleth?c.layersForChoropleth:c.layers,Z=tt.filter(function(J){return G(J)||$(J)?R["show"+J]:O(J)?R[J].showgrid:!0}),X=z.framework.selectAll(".layer").data(Z,String);X.exit().each(function(J){delete I[J],delete U[J],f.select(this).remove()}),X.enter().append("g").attr("class",function(J){return"layer "+J}).each(function(J){var st=I[J]=f.select(this);J==="bg"?z.bgRect=st.append("rect").style("pointer-events","all"):O(J)?U[J]=st.append("path").style("fill","none"):J==="backplot"?st.append("g").classed("choroplethlayer",!0):J==="frontplot"?st.append("g").classed("scatterlayer",!0):G(J)?U[J]=st.append("path").style("fill","none").style("stroke-miterlimit",2):$(J)&&(U[J]=st.append("path").style("stroke","none"))}),X.order(),X.each(function(J){var st=U[J],at=c.layerNameToAdjective[J];J==="frame"?st.datum(c.sphereSVG):G(J)||$(J)?st.datum(p(P,P.objects[J])):O(J)&&st.datum(S(J,R,L)).call(n.stroke,R[J].gridcolor).call(d.dashLine,R[J].griddash,R[J].gridwidth),G(J)?st.call(n.stroke,R[at+"color"]).call(d.dashLine,"",R[at+"width"]):$(J)&&st.call(n.fill,R[at+"color"])})},h.updateDims=function(L,R){var z=this.bounds,P=(R.framewidth||0)/2,I=z[0][0]-P,U=z[0][1]-P,O=z[1][0]-I+P,G=z[1][1]-U+P;d.setRect(this.clipRect,I,U,O,G),this.bgRect.call(d.setRect,I,U,O,G).call(n.fill,R.bgcolor),this.xaxis._offset=I,this.xaxis._length=O,this.yaxis._offset=U,this.yaxis._length=G},h.updateFx=function(L,R){var z=this,P=z.graphDiv,I=z.bgRect,U=L.dragmode,O=L.clickmode;if(z.isStatic)return;function G(){var X=z.viewInitial,J={};for(var st in X)J[z.id+"."+st]=X[st];a.call("_guiRelayout",P,J),P.emit("plotly_doubleclick",null)}function $(X){return z.projection.invert([X[0]+z.xaxis._offset,X[1]+z.yaxis._offset])}var tt=function(X,J){if(J.isRect){var st=X.range={};st[z.id]=[$([J.xmin,J.ymin]),$([J.xmax,J.ymax])]}else{var at=X.lassoPoints={};at[z.id]=J.map($)}},Z={element:z.bgRect.node(),gd:P,plotinfo:{id:z.id,xaxis:z.xaxis,yaxis:z.yaxis,fillRangeItems:tt},xaxes:[z.xaxis],yaxes:[z.yaxis],subplot:z.id,clickFn:function(X){X===2&&_(P)}};U==="pan"?(I.node().onmousedown=null,I.call(T(z,R)),I.on("dblclick.zoom",G),P._context._scrollZoom.geo||I.on("wheel.zoom",null)):(U==="select"||U==="lasso")&&(I.on(".zoom",null),Z.prepFn=function(X,J,st){v(X,J,st,Z,U)},b.init(Z)),I.on("mousemove",function(){var X=z.projection.invert(i.getPositionFromD3Event());if(!X)return b.unhover(P,f.event);z.xaxis.p2c=function(){return X[0]},z.yaxis.p2c=function(){return X[1]},s.hover(P,f.event,z.id)}),I.on("mouseout",function(){P._dragging||b.unhover(P,f.event)}),I.on("click",function(){U!=="select"&&U!=="lasso"&&(O.indexOf("select")>-1&&u(f.event,P,[z.xaxis],[z.yaxis],z.id,Z),O.indexOf("event")>-1&&s.click(P,f.event))})},h.makeFramework=function(){var L=this,R=L.graphDiv,z=R._fullLayout,P="clip"+z._uid+L.id;L.clipDef=z._clips.append("clipPath").attr("id",P),L.clipRect=L.clipDef.append("rect"),L.framework=f.select(L.container).append("g").attr("class","geo "+L.id).call(d.setClipUrl,P,R),L.project=function(I){var U=L.projection(I);return U?[U[0]-L.xaxis._offset,U[1]-L.yaxis._offset]:[null,null]},L.xaxis={_id:"x",c2p:function(I){return L.project(I)[0]}},L.yaxis={_id:"y",c2p:function(I){return L.project(I)[1]}},L.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},y.setConvert(L.mockAxis,z)},h.saveViewInitial=function(L){var R=L.center||{},z=L.projection,P=z.rotation||{};this.viewInitial={fitbounds:L.fitbounds,"projection.scale":z.scale};var I;L._isScoped?I={"center.lon":R.lon,"center.lat":R.lat}:L._isClipped?I={"projection.rotation.lon":P.lon,"projection.rotation.lat":P.lat}:I={"center.lon":R.lon,"center.lat":R.lat,"projection.rotation.lon":P.lon},i.extendFlat(this.viewInitial,I)},h.render=function(){var L=this.projection,R=L.getPath(),z;function P(U){var O=L(U.lonlat);return O?r(O[0],O[1]):null}function I(U){return L.isLonLatOverEdges(U.lonlat)?"none":null}for(z in this.basePaths)this.basePaths[z].attr("d",R);for(z in this.dataPaths)this.dataPaths[z].attr("d",function(U){return R(U.geojson)});for(z in this.dataPoints)this.dataPoints[z].attr("display",I).attr("transform",P)};function D(L){var R=L.projection,z=R.type,P=c.projNames[z];P="geo"+i.titleCase(P);for(var I=l[P]||t[P],U=I(),O=L._isSatellite?Math.acos(1/R.distance)*180/Math.PI:L._isClipped?c.lonaxisSpan[z]/2:null,G=["center","rotate","parallels","clipExtent"],$=function(X){return X?U:[]},tt=0;tt<G.length;tt++){var Z=G[tt];typeof U[Z]!="function"&&(U[Z]=$)}return U.isLonLatOverEdges=function(X){if(U(X)===null)return!0;if(O){var J=U.rotate(),st=x(X,[-J[0],-J[1]]),at=O*Math.PI/180;return st>at}else return!1},U.getPath=function(){return m().projection(U)},U.getBounds=function(X){return U.getPath().bounds(X)},U.precision(c.precision),L._isSatellite&&U.tilt(R.tilt).distance(R.distance),O&&U.clipAngle(O-c.clipPad),U}function S(L,R,z){var P=1e-6,I=2.5,U=R[L],O=c.scopeDefaults[R.scope],G,$,tt;L==="lonaxis"?(G=O.lonaxisRange,$=O.lataxisRange,tt=function(et,q){return[et,q]}):L==="lataxis"&&(G=O.lataxisRange,$=O.lonaxisRange,tt=function(et,q){return[q,et]});var Z={type:"linear",range:[G[0],G[1]-P],tick0:U.tick0,dtick:U.dtick};y.setConvert(Z,z);var X=y.calcTicks(Z);!R.isScoped&&L==="lonaxis"&&X.pop();for(var J=X.length,st=new Array(J),at=0;at<J;at++)for(var lt=X[at].x,F=st[at]=[],H=$[0];H<$[1]+I;H+=I)F.push(tt(lt,H));return{type:"MultiLineString",coordinates:st}}function M(L,R){var z=c.clipPad,P=L[0]+z,I=L[1]-z,U=R[0]+z,O=R[1]-z;P>0&&I<0&&(I+=360);var G=(I-P)/4;return{type:"Polygon",coordinates:[[[P,U],[P,O],[P+G,O],[P+2*G,O],[P+3*G,O],[I,O],[I,U],[I-G,U],[I-2*G,U],[I-3*G,U],[P,U]]]}}},{"../../components/color":367,"../../components/dragelement":386,"../../components/drawing":389,"../../components/fx":407,"../../components/selections":455,"../../lib":515,"../../lib/geo_location_utils":508,"../../lib/topojson_utils":544,"../../registry":647,"../cartesian/autorange":565,"../cartesian/axes":566,"../plots":628,"./constants":596,"./zoom":601,"@plotly/d3":58,"d3-geo":114,"d3-geo-projection":113,"topojson-client":316}],598:[function(e,B,V){var f=e("../../plots/get_data").getSubplotCalcData,l=e("../../lib").counterRegex,m=e("./geo"),x="geo",t=l(x),a={};a[x]={valType:"subplotid",dflt:x,editType:"calc"};function i(d){for(var s=d._fullLayout,o=d.calcdata,y=s._subplots[x],g=0;g<y.length;g++){var b=y[g],v=f(o,x,b),_=s[b],u=_._subplot;u||(u=m({id:b,graphDiv:d,container:s._geolayer.node(),topojsonURL:d._context.topojsonURL,staticPlot:d._context.staticPlot}),s[b]._subplot=u),u.plot(v,s,d._promises)}}function r(d,s,o,y){for(var g=y._subplots[x]||[],b=0;b<g.length;b++){var v=g[b],_=y[v]._subplot;!s[v]&&!!_&&(_.framework.remove(),_.clipDef.remove())}}function n(d){for(var s=d._fullLayout,o=s._subplots[x],y=0;y<o.length;y++){var g=s[o[y]],b=g._subplot;b.updateFx(s,g)}}B.exports={attr:x,name:x,idRoot:x,idRegex:t,attrRegex:t,attributes:a,layoutAttributes:e("./layout_attributes"),supplyLayoutDefaults:e("./layout_defaults"),plot:i,updateFx:n,clean:r}},{"../../lib":515,"../../plots/get_data":602,"./geo":597,"./layout_attributes":599,"./layout_defaults":600}],599:[function(e,B,V){var f=e("../../components/color/attributes"),l=e("../domain").attributes,m=e("../../components/drawing/attributes").dash,x=e("./constants"),t=e("../../plot_api/edit_types").overrideAll,a=e("../../lib/sort_object_keys"),i={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:f.lightLine},gridwidth:{valType:"number",min:0,dflt:1},griddash:m},r=B.exports=t({domain:l({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:a(x.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:a(x.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},tilt:{valType:"number",dflt:0},distance:{valType:"number",min:1.001,dflt:2},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:f.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:x.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:x.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:x.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:x.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:f.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:f.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:f.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:f.background},lonaxis:i,lataxis:i},"plot","from-root");r.uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":366,"../../components/drawing/attributes":388,"../../lib/sort_object_keys":538,"../../plot_api/edit_types":548,"../domain":593,"./constants":596}],600:[function(e,B,V){var f=e("../../lib"),l=e("../subplot_defaults"),m=e("../get_data").getSubplotData,x=e("./constants"),t=e("./layout_attributes"),a=x.axesNames;B.exports=function(n,d,s){l(n,d,s,{type:"geo",attributes:t,handleDefaults:i,fullData:s,partition:"y"})};function i(r,n,d,s){var o=m(s.fullData,"geo",s.id),y=o.map(function(F){return F._expandedIndex}),g=d("resolution"),b=d("scope"),v=x.scopeDefaults[b],_=d("projection.type",v.projType),u=n._isAlbersUsa=_==="albers usa";u&&(b=n.scope="usa");var T=n._isScoped=b!=="world",c=n._isSatellite=_==="satellite",A=n._isConic=_.indexOf("conic")!==-1||_==="albers",k=n._isClipped=!!x.lonaxisSpan[_];if(r.visible===!1){var p=f.extendDeep({},n._template);p.showcoastlines=!1,p.showcountries=!1,p.showframe=!1,p.showlakes=!1,p.showland=!1,p.showocean=!1,p.showrivers=!1,p.showsubunits=!1,p.lonaxis&&(p.lonaxis.showgrid=!1),p.lataxis&&(p.lataxis.showgrid=!1),n._template=p}for(var w=d("visible"),h,D=0;D<a.length;D++){var S=a[D],M=[30,10][D],L;if(T)L=v[S+"Range"];else{var R=x[S+"Span"],z=(R[_]||R["*"])/2,P=d("projection.rotation."+S.substr(0,3),v.projRotate[D]);L=[P-z,P+z]}var I=d(S+".range",L);d(S+".tick0"),d(S+".dtick",M),h=d(S+".showgrid",w?void 0:!1),h&&(d(S+".gridcolor"),d(S+".gridwidth"),d(S+".griddash")),n[S]._ax={type:"linear",_id:S.slice(0,3),_traceIndices:y,setScale:f.identity,c2l:f.identity,r2l:f.identity,autorange:!0,range:I.slice(),_m:1,_input:{}}}var U=n.lonaxis.range,O=n.lataxis.range,G=U[0],$=U[1];G>0&&$<0&&($+=360);var tt=(G+$)/2,Z;if(!u){var X=T?v.projRotate:[tt,0,0];Z=d("projection.rotation.lon",X[0]),d("projection.rotation.lat",X[1]),d("projection.rotation.roll",X[2]),h=d("showcoastlines",!T&&w),h&&(d("coastlinecolor"),d("coastlinewidth")),h=d("showocean",w?void 0:!1),h&&d("oceancolor")}var J,st;if(u?(J=-96.6,st=38.7):(J=T?tt:Z,st=(O[0]+O[1])/2),d("center.lon",J),d("center.lat",st),c&&(d("projection.tilt"),d("projection.distance")),A){var at=v.projParallels||[0,60];d("projection.parallels",at)}d("projection.scale"),h=d("showland",w?void 0:!1),h&&d("landcolor"),h=d("showlakes",w?void 0:!1),h&&d("lakecolor"),h=d("showrivers",w?void 0:!1),h&&(d("rivercolor"),d("riverwidth")),h=d("showcountries",T&&b!=="usa"&&w),h&&(d("countrycolor"),d("countrywidth")),(b==="usa"||b==="north america"&&g===50)&&(d("showsubunits",w),d("subunitcolor"),d("subunitwidth")),T||(h=d("showframe",w),h&&(d("framecolor"),d("framewidth"))),d("bgcolor");var lt=d("fitbounds");lt&&(delete n.projection.scale,T?(delete n.center.lon,delete n.center.lat):k?(delete n.center.lon,delete n.center.lat,delete n.projection.rotation.lon,delete n.projection.rotation.lat,delete n.lonaxis.range,delete n.lataxis.range):(delete n.center.lon,delete n.center.lat,delete n.projection.rotation.lon))}},{"../../lib":515,"../get_data":602,"../subplot_defaults":641,"./constants":596,"./layout_attributes":599}],601:[function(e,B,V){var f=e("@plotly/d3"),l=e("../../lib"),m=e("../../registry"),x=Math.PI/180,t=180/Math.PI,a={cursor:"pointer"},i={cursor:"auto"};function r(S,M){var L=S.projection,R;return M._isScoped?R=s:M._isClipped?R=y:R=o,R(S,L)}B.exports=r;function n(S,M){return f.behavior.zoom().translate(M.translate()).scale(M.scale())}function d(S,M,L){var R=S.id,z=S.graphDiv,P=z.layout,I=P[R],U=z._fullLayout,O=U[R],G={},$={};function tt(Z,X){G[R+"."+Z]=l.nestedProperty(I,Z).get(),m.call("_storeDirectGUIEdit",P,U._preGUI,G);var J=l.nestedProperty(O,Z);J.get()!==X&&(J.set(X),l.nestedProperty(I,Z).set(X),$[R+"."+Z]=X)}L(tt),tt("projection.scale",M.scale()/S.fitScale),tt("fitbounds",!1),z.emit("plotly_relayout",$)}function s(S,M){var L=n(S,M);function R(){f.select(this).style(a)}function z(){M.scale(f.event.scale).translate(f.event.translate),S.render();var U=M.invert(S.midPt);S.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":M.scale()/S.fitScale,"geo.center.lon":U[0],"geo.center.lat":U[1]})}function P(U){var O=M.invert(S.midPt);U("center.lon",O[0]),U("center.lat",O[1])}function I(){f.select(this).style(i),d(S,M,P)}return L.on("zoomstart",R).on("zoom",z).on("zoomend",I),L}function o(S,M){var L=n(S,M),R=2,z,P,I,U,O,G,$,tt,Z;function X(H){return M.invert(H)}function J(H){var et=X(H);if(!et)return!0;var q=M(et);return Math.abs(q[0]-H[0])>R||Math.abs(q[1]-H[1])>R}function st(){f.select(this).style(a),z=f.mouse(this),P=M.rotate(),I=M.translate(),U=P,O=X(z)}function at(){if(G=f.mouse(this),J(z)){L.scale(M.scale()),L.translate(M.translate());return}M.scale(f.event.scale),M.translate([I[0],f.event.translate[1]]),O?X(G)&&(tt=X(G),$=[U[0]+(tt[0]-O[0]),P[1],P[2]],M.rotate($),U=$):(z=G,O=X(z)),Z=!0,S.render();var H=M.rotate(),et=M.invert(S.midPt);S.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":M.scale()/S.fitScale,"geo.center.lon":et[0],"geo.center.lat":et[1],"geo.projection.rotation.lon":-H[0]})}function lt(){f.select(this).style(i),Z&&d(S,M,F)}function F(H){var et=M.rotate(),q=M.invert(S.midPt);H("projection.rotation.lon",-et[0]),H("center.lon",q[0]),H("center.lat",q[1])}return L.on("zoomstart",st).on("zoom",at).on("zoomend",lt),L}function y(S,M){M.rotate(),M.scale();var L=n(S,M),R=D(L,"zoomstart","zoom","zoomend"),z=0,P=L.on,I;L.on("zoomstart",function(){f.select(this).style(a);var tt=f.mouse(this),Z=M.rotate(),X=Z,J=M.translate(),st=b(Z);I=g(M,tt),P.call(L,"zoom",function(){var at=f.mouse(this);if(M.scale(f.event.scale),!I)tt=at,I=g(M,tt);else if(g(M,at)){M.rotate(Z).translate(J);var lt=g(M,at),F=_(I,lt),H=k(v(st,F)),et=u(H,I,X);(!isFinite(et[0])||!isFinite(et[1])||!isFinite(et[2]))&&(et=X),M.rotate(et),X=et}O(R.of(this,arguments))}),U(R.of(this,arguments))}).on("zoomend",function(){f.select(this).style(i),P.call(L,"zoom",null),G(R.of(this,arguments)),d(S,M,$)}).on("zoom.redraw",function(){S.render();var tt=M.rotate();S.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":M.scale()/S.fitScale,"geo.projection.rotation.lon":-tt[0],"geo.projection.rotation.lat":-tt[1]})});function U(tt){z++||tt({type:"zoomstart"})}function O(tt){tt({type:"zoom"})}function G(tt){--z||tt({type:"zoomend"})}function $(tt){var Z=M.rotate();tt("projection.rotation.lon",-Z[0]),tt("projection.rotation.lat",-Z[1])}return f.rebind(L,R,"on")}function g(S,M){var L=S.invert(M);return L&&isFinite(L[0])&&isFinite(L[1])&&p(L)}function b(S){var M=.5*S[0]*x,L=.5*S[1]*x,R=.5*S[2]*x,z=Math.sin(M),P=Math.cos(M),I=Math.sin(L),U=Math.cos(L),O=Math.sin(R),G=Math.cos(R);return[P*U*G+z*I*O,z*U*G-P*I*O,P*I*G+z*U*O,P*U*O-z*I*G]}function v(S,M){var L=S[0],R=S[1],z=S[2],P=S[3],I=M[0],U=M[1],O=M[2],G=M[3];return[L*I-R*U-z*O-P*G,L*U+R*I+z*G-P*O,L*O-R*G+z*I+P*U,L*G+R*O-z*U+P*I]}function _(S,M){if(!(!S||!M)){var L=h(S,M),R=Math.sqrt(w(L,L)),z=.5*Math.acos(Math.max(-1,Math.min(1,w(S,M)))),P=Math.sin(z)/R;return R&&[Math.cos(z),L[2]*P,-L[1]*P,L[0]*P]}}function u(S,M,L){var R=A(M,2,S[0]);R=A(R,1,S[1]),R=A(R,0,S[2]-L[2]);var z=M[0],P=M[1],I=M[2],U=R[0],O=R[1],G=R[2],$=Math.atan2(P,z)*t,tt=Math.sqrt(z*z+P*P),Z,X;Math.abs(O)>tt?(X=(O>0?90:-90)-$,Z=0):(X=Math.asin(O/tt)*t-$,Z=Math.sqrt(tt*tt-O*O));var J=180-X-2*$,st=(Math.atan2(G,U)-Math.atan2(I,Z))*t,at=(Math.atan2(G,U)-Math.atan2(I,-Z))*t,lt=T(L[0],L[1],X,st),F=T(L[0],L[1],J,at);return lt<=F?[X,st,L[2]]:[J,at,L[2]]}function T(S,M,L,R){var z=c(L-S),P=c(R-M);return Math.sqrt(z*z+P*P)}function c(S){return(S%360+540)%360-180}function A(S,M,L){var R=L*x,z=S.slice(),P=M===0?1:0,I=M===2?1:2,U=Math.cos(R),O=Math.sin(R);return z[P]=S[P]*U-S[I]*O,z[I]=S[I]*U+S[P]*O,z}function k(S){return[Math.atan2(2*(S[0]*S[1]+S[2]*S[3]),1-2*(S[1]*S[1]+S[2]*S[2]))*t,Math.asin(Math.max(-1,Math.min(1,2*(S[0]*S[2]-S[3]*S[1]))))*t,Math.atan2(2*(S[0]*S[3]+S[1]*S[2]),1-2*(S[2]*S[2]+S[3]*S[3]))*t]}function p(S){var M=S[0]*x,L=S[1]*x,R=Math.cos(L);return[R*Math.cos(M),R*Math.sin(M),Math.sin(L)]}function w(S,M){for(var L=0,R=0,z=S.length;R<z;++R)L+=S[R]*M[R];return L}function h(S,M){return[S[1]*M[2]-S[2]*M[1],S[2]*M[0]-S[0]*M[2],S[0]*M[1]-S[1]*M[0]]}function D(S){for(var M=0,L=arguments.length,R=[];++M<L;)R.push(arguments[M]);var z=f.dispatch.apply(null,R);return z.of=function(P,I){return function(U){var O;try{O=U.sourceEvent=f.event,U.target=S,f.event=U,z[U.type].apply(P,I)}finally{f.event=O}}},z}},{"../../lib":515,"../../registry":647,"@plotly/d3":58}],602:[function(e,B,V){var f=e("../registry"),l=e("./cartesian/constants").SUBPLOT_PATTERN;V.getSubplotCalcData=function(m,x,t){var a=f.subplotsRegistry[x];if(!a)return[];for(var i=a.attr,r=[],n=0;n<m.length;n++){var d=m[n],s=d[0].trace;s[i]===t&&r.push(d)}return r},V.getModuleCalcData=function(m,x){var t=[],a=[],i;if(typeof x=="string"?i=f.getModule(x).plot:typeof x=="function"?i=x:i=x.plot,!i)return[t,m];for(var r=0;r<m.length;r++){var n=m[r],d=n[0].trace;d.visible!==!0||d._length===0||(d._module.plot===i?t.push(n):a.push(n))}return[t,a]},V.getSubplotData=function(x,t,a){if(!f.subplotsRegistry[t])return[];var i=f.subplotsRegistry[t].attr,r=[],n,d,s;if(t==="gl2d"){var o=a.match(l);d="x"+o[1],s="y"+o[2]}for(var y=0;y<x.length;y++)n=x[y],t==="gl2d"&&f.traceIs(n,"gl2d")?n[i[0]]===d&&n[i[1]]===s&&r.push(n):n[i]===a&&r.push(n);return r}},{"../registry":647,"./cartesian/constants":573}],603:[function(e,B,V){var f=e("mouse-change"),l=e("mouse-wheel"),m=e("mouse-event-offset"),x=e("../cartesian/constants"),t=e("has-passive-events");B.exports=i;function a(r,n){this.element=r,this.plot=n,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}function i(r){var n=r.mouseContainer,d=r.glplot,s=new a(n,d);function o(){r.xaxis.autorange=!1,r.yaxis.autorange=!1}function y(){for(var b=r.graphDiv._fullLayout._axisConstraintGroups,v=r.xaxis._id,_=r.yaxis._id,u=0;u<b.length;u++)if(b[u][v]!==-1){if(b[u][_]!==-1)return!0;break}return!1}s.mouseListener=f(n,g),n.addEventListener("touchstart",function(b){var v=m(b.changedTouches[0],n);g(0,v[0],v[1]),g(1,v[0],v[1]),b.preventDefault()},t?{passive:!1}:!1),n.addEventListener("touchmove",function(b){b.preventDefault();var v=m(b.changedTouches[0],n);g(1,v[0],v[1]),b.preventDefault()},t?{passive:!1}:!1),n.addEventListener("touchend",function(b){g(0,s.lastPos[0],s.lastPos[1]),b.preventDefault()},t?{passive:!1}:!1);function g(b,v,_){var u=r.calcDataBox(),T=d.viewBox,c=s.lastPos[0],A=s.lastPos[1],k=x.MINDRAG*d.pixelRatio,p=x.MINZOOM*d.pixelRatio,w,h;v*=d.pixelRatio,_*=d.pixelRatio,_=T[3]-T[1]-_;function D(P,I,U){var O=Math.min(I,U),G=Math.max(I,U);O!==G?(u[P]=O,u[P+2]=G,s.dataBox=u,r.setRanges(u)):(r.selectBox.selectBox=[0,0,1,1],r.glplot.setDirty())}switch(r.fullLayout.dragmode){case"zoom":if(b){var S=v/(T[2]-T[0])*(u[2]-u[0])+u[0],M=_/(T[3]-T[1])*(u[3]-u[1])+u[1];s.boxInited||(s.boxStart[0]=S,s.boxStart[1]=M,s.dragStart[0]=v,s.dragStart[1]=_),s.boxEnd[0]=S,s.boxEnd[1]=M,s.boxInited=!0,!s.boxEnabled&&(s.boxStart[0]!==s.boxEnd[0]||s.boxStart[1]!==s.boxEnd[1])&&(s.boxEnabled=!0);var L=Math.abs(s.dragStart[0]-v)<p,R=Math.abs(s.dragStart[1]-_)<p;if(y()&&!(L&&R)){w=s.boxEnd[0]-s.boxStart[0],h=s.boxEnd[1]-s.boxStart[1];var z=(u[3]-u[1])/(u[2]-u[0]);Math.abs(w*z)>Math.abs(h)?(s.boxEnd[1]=s.boxStart[1]+Math.abs(w)*z*(h>=0?1:-1),s.boxEnd[1]<u[1]?(s.boxEnd[1]=u[1],s.boxEnd[0]=s.boxStart[0]+(u[1]-s.boxStart[1])/Math.abs(z)):s.boxEnd[1]>u[3]&&(s.boxEnd[1]=u[3],s.boxEnd[0]=s.boxStart[0]+(u[3]-s.boxStart[1])/Math.abs(z))):(s.boxEnd[0]=s.boxStart[0]+Math.abs(h)/z*(w>=0?1:-1),s.boxEnd[0]<u[0]?(s.boxEnd[0]=u[0],s.boxEnd[1]=s.boxStart[1]+(u[0]-s.boxStart[0])*Math.abs(z)):s.boxEnd[0]>u[2]&&(s.boxEnd[0]=u[2],s.boxEnd[1]=s.boxStart[1]+(u[2]-s.boxStart[0])*Math.abs(z)))}else L&&(s.boxEnd[0]=s.boxStart[0]),R&&(s.boxEnd[1]=s.boxStart[1])}else s.boxEnabled?(w=s.boxStart[0]!==s.boxEnd[0],h=s.boxStart[1]!==s.boxEnd[1],w||h?(w&&(D(0,s.boxStart[0],s.boxEnd[0]),r.xaxis.autorange=!1),h&&(D(1,s.boxStart[1],s.boxEnd[1]),r.yaxis.autorange=!1),r.relayoutCallback()):r.glplot.setDirty(),s.boxEnabled=!1,s.boxInited=!1):s.boxInited&&(s.boxInited=!1);break;case"pan":s.boxEnabled=!1,s.boxInited=!1,b?(s.panning||(s.dragStart[0]=v,s.dragStart[1]=_),Math.abs(s.dragStart[0]-v)<k&&(v=s.dragStart[0]),Math.abs(s.dragStart[1]-_)<k&&(_=s.dragStart[1]),w=(c-v)*(u[2]-u[0])/(d.viewBox[2]-d.viewBox[0]),h=(A-_)*(u[3]-u[1])/(d.viewBox[3]-d.viewBox[1]),u[0]+=w,u[2]+=w,u[1]+=h,u[3]+=h,r.setRanges(u),s.panning=!0,s.lastInputTime=Date.now(),o(),r.cameraChanged(),r.handleAnnotations()):s.panning&&(s.panning=!1,r.relayoutCallback());break}s.lastPos[0]=v,s.lastPos[1]=_}return s.wheelListener=l(n,function(b,v){if(!r.scrollZoom)return!1;var _=r.calcDataBox(),u=d.viewBox,T=s.lastPos[0],c=s.lastPos[1],A=Math.exp(5*v/(u[3]-u[1])),k=T/(u[2]-u[0])*(_[2]-_[0])+_[0],p=c/(u[3]-u[1])*(_[3]-_[1])+_[1];return _[0]=(_[0]-k)*A+k,_[2]=(_[2]-k)*A+k,_[1]=(_[1]-p)*A+p,_[3]=(_[3]-p)*A+p,r.setRanges(_),s.lastInputTime=Date.now(),o(),r.cameraChanged(),r.handleAnnotations(),r.relayoutCallback(),!0},!0),s}},{"../cartesian/constants":573,"has-passive-events":229,"mouse-change":241,"mouse-event-offset":242,"mouse-wheel":244}],604:[function(e,B,V){var f=e("../cartesian/axes"),l=e("../../lib/str2rgbarray");function m(i){this.scene=i,this.gl=i.gl,this.pixelRatio=i.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var x=m.prototype,t=["xaxis","yaxis"];x.merge=function(i){this.titleEnable=!1,this.backgroundColor=l(i.plot_bgcolor);var r,n,d,s,o,y,g,b,v,_,u;for(_=0;_<2;++_){r=t[_];var T=r.charAt(0);for(n=i[this.scene[r]._name],d=n.title.text===this.scene.fullLayout._dfltTitle[T]?"":n.title.text,u=0;u<=2;u+=2)this.labelEnable[_+u]=!1,this.labels[_+u]=d,this.labelColor[_+u]=l(n.title.font.color),this.labelFont[_+u]=n.title.font.family,this.labelSize[_+u]=n.title.font.size,this.labelPad[_+u]=this.getLabelPad(r,n),this.tickEnable[_+u]=!1,this.tickColor[_+u]=l((n.tickfont||{}).color),this.tickAngle[_+u]=n.tickangle==="auto"?0:Math.PI*-n.tickangle/180,this.tickPad[_+u]=this.getTickPad(n),this.tickMarkLength[_+u]=0,this.tickMarkWidth[_+u]=n.tickwidth||0,this.tickMarkColor[_+u]=l(n.tickcolor),this.borderLineEnable[_+u]=!1,this.borderLineColor[_+u]=l(n.linecolor),this.borderLineWidth[_+u]=n.linewidth||0;g=this.hasSharedAxis(n),o=this.hasAxisInDfltPos(r,n)&&!g,y=this.hasAxisInAltrPos(r,n)&&!g,s=n.mirror||!1,b=g?String(s).indexOf("all")!==-1:!!s,v=g?s==="allticks":String(s).indexOf("ticks")!==-1,o?this.labelEnable[_]=!0:y&&(this.labelEnable[_+2]=!0),o?this.tickEnable[_]=n.showticklabels:y&&(this.tickEnable[_+2]=n.showticklabels),(o||b)&&(this.borderLineEnable[_]=n.showline),(y||b)&&(this.borderLineEnable[_+2]=n.showline),(o||v)&&(this.tickMarkLength[_]=this.getTickMarkLength(n)),(y||v)&&(this.tickMarkLength[_+2]=this.getTickMarkLength(n)),this.gridLineEnable[_]=n.showgrid,this.gridLineColor[_]=l(n.gridcolor),this.gridLineWidth[_]=n.gridwidth,this.zeroLineEnable[_]=n.zeroline,this.zeroLineColor[_]=l(n.zerolinecolor),this.zeroLineWidth[_]=n.zerolinewidth}},x.hasSharedAxis=function(i){var r=this.scene,n=r.fullLayout._subplots.gl2d,d=f.findSubplotsWithAxis(n,i);return d.indexOf(r.id)!==0},x.hasAxisInDfltPos=function(i,r){var n=r.side;if(i==="xaxis")return n==="bottom";if(i==="yaxis")return n==="left"},x.hasAxisInAltrPos=function(i,r){var n=r.side;if(i==="xaxis")return n==="top";if(i==="yaxis")return n==="right"},x.getLabelPad=function(i,r){var n=1.5,d=r.title.font.size,s=r.showticklabels;if(i==="xaxis")return r.side==="top"?-10+d*(n+(s?1:0)):-10+d*(n+(s?.5:0));if(i==="yaxis")return r.side==="right"?10+d*(n+(s?1:.5)):10+d*(n+(s?.5:0))},x.getTickPad=function(i){return i.ticks==="outside"?10+i.ticklen:15},x.getTickMarkLength=function(i){if(!i.ticks)return 0;var r=i.ticklen;return i.ticks==="inside"?-r:r};function a(i){return new m(i)}B.exports=a},{"../../lib/str2rgbarray":540,"../cartesian/axes":566}],605:[function(e,B,V){var f=e("../../plot_api/edit_types").overrideAll,l=e("./scene2d"),m=e("../layout_attributes"),x=e("../../constants/xmlns_namespaces"),t=e("../cartesian/constants"),a=e("../cartesian"),i=e("../../components/fx/layout_attributes"),r=e("../get_data").getSubplotData;V.name="gl2d",V.attr=["xaxis","yaxis"],V.idRoot=["x","y"],V.idRegex=t.idRegex,V.attrRegex=t.attrRegex,V.attributes=e("../cartesian/attributes"),V.supplyLayoutDefaults=function(n,d,s){d._has("cartesian")||a.supplyLayoutDefaults(n,d,s)},V.layoutAttrOverrides=f(a.layoutAttributes,"plot","from-root"),V.baseLayoutAttrOverrides=f({plot_bgcolor:m.plot_bgcolor,hoverlabel:i.hoverlabel},"plot","nested"),V.plot=function(d){for(var s=d._fullLayout,o=d._fullData,y=s._subplots.gl2d,g=0;g<y.length;g++){var b=y[g],v=s._plots[b],_=r(o,"gl2d",b),u=v._scene2d;u===void 0&&(u=new l({id:b,graphDiv:d,container:d.querySelector(".gl-container"),staticPlot:d._context.staticPlot,plotGlPixelRatio:d._context.plotGlPixelRatio},s),v._scene2d=u),u.plot(_,d.calcdata,s,d.layout)}},V.clean=function(n,d,s,o){for(var y=o._subplots.gl2d||[],g=0;g<y.length;g++){var b=y[g],v=o._plots[b];if(!!v._scene2d){var _=r(n,"gl2d",b);_.length===0&&(v._scene2d.destroy(),delete o._plots[b])}}a.clean.apply(this,arguments)},V.drawFramework=function(n){n._context.staticPlot||a.drawFramework(n)},V.toSVG=function(n){for(var d=n._fullLayout,s=d._subplots.gl2d,o=0;o<s.length;o++){var y=d._plots[s[o]],g=y._scene2d,b=g.toImage("png"),v=d._glimages.append("svg:image");v.attr({xmlns:x.svg,"xlink:href":b,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),g.destroy()}},V.updateFx=function(n){for(var d=n._fullLayout,s=d._subplots.gl2d,o=0;o<s.length;o++){var y=d._plots[s[o]]._scene2d;y.updateFx(d.dragmode)}}},{"../../components/fx/layout_attributes":408,"../../constants/xmlns_namespaces":492,"../../plot_api/edit_types":548,"../cartesian":578,"../cartesian/attributes":564,"../cartesian/constants":573,"../get_data":602,"../layout_attributes":619,"./scene2d":606}],606:[function(e,B,V){var f=e("../../registry"),l=e("../../plots/cartesian/axes"),m=e("../../components/fx"),x=e("../../../stackgl_modules").gl_plot2d,t=e("../../../stackgl_modules").gl_spikes2d,a=e("../../../stackgl_modules").gl_select_box,i=e("webgl-context"),r=e("./convert"),n=e("./camera"),d=e("../../lib/show_no_webgl_msg"),s=e("../cartesian/constraints"),o=s.enforce,y=s.clean,g=e("../cartesian/autorange").doAutoRange,b=e("../../components/dragelement/helpers"),v=b.drawMode,_=b.selectMode,u=["xaxis","yaxis"],T,c,A=e("../cartesian/constants").SUBPLOT_PATTERN;function k(h,D){this.container=h.container,this.graphDiv=h.graphDiv,this.pixelRatio=h.plotGlPixelRatio||window.devicePixelRatio,this.id=h.id,this.staticPlot=!!h.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(D),this.makeFramework(),!this.stopped&&(this.glplotOptions=r(this),this.glplotOptions.merge(D),this.glplot=x(this.glplotOptions),this.camera=n(this),this.traces={},this.spikes=t(this.glplot),this.selectBox=a(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}B.exports=k;var p=k.prototype;p.makeFramework=function(){if(this.staticPlot){if(!c&&(T=document.createElement("canvas"),c=i({canvas:T,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}),!c))throw new Error("Error creating static canvas/context for image server");this.canvas=T,this.gl=c}else{var h=this.container.querySelector(".gl-canvas-focus"),D=i({canvas:h,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!D){d(this),this.stopped=!0;return}this.canvas=h,this.gl=D}var S=this.canvas;S.style.width="100%",S.style.height="100%",S.style.position="absolute",S.style.top="0px",S.style.left="0px",S.style["pointer-events"]="none",this.updateSize(S);var M=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");M.style.position="absolute",M.style.top=M.style.left="0px",M.style.width=M.style.height="100%",M.style["z-index"]=20,M.style["pointer-events"]="none";var L=this.mouseContainer=document.createElement("div");L.style.position="absolute",L.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var R=this.container;R.appendChild(M),R.appendChild(L);var z=this;L.addEventListener("mouseout",function(){z.isMouseOver=!1,z.unhover()}),L.addEventListener("mouseover",function(){z.isMouseOver=!0})},p.toImage=function(h){h||(h="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(T),this.updateSize(this.canvas);var D=this.glplot.gl,S=D.drawingBufferWidth,M=D.drawingBufferHeight;D.clearColor(1,1,1,0),D.clear(D.COLOR_BUFFER_BIT|D.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),D.bindFramebuffer(D.FRAMEBUFFER,null);var L=new Uint8Array(S*M*4);D.readPixels(0,0,S,M,D.RGBA,D.UNSIGNED_BYTE,L);for(var R=0,z=M-1;R<z;++R,--z)for(var P=0;P<S;++P)for(var I=0;I<4;++I){var U=L[4*(S*R+P)+I];L[4*(S*R+P)+I]=L[4*(S*z+P)+I],L[4*(S*z+P)+I]=U}var O=document.createElement("canvas");O.width=S,O.height=M;var G=O.getContext("2d",{willReadFrequently:!0}),$=G.createImageData(S,M);$.data.set(L),G.putImageData($,0,0);var tt;switch(h){case"jpeg":tt=O.toDataURL("image/jpeg");break;case"webp":tt=O.toDataURL("image/webp");break;default:tt=O.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(T),tt},p.updateSize=function(h){h||(h=this.canvas);var D=this.pixelRatio,S=this.fullLayout,M=S.width,L=S.height,R=Math.ceil(D*M)|0,z=Math.ceil(D*L)|0;return(h.width!==R||h.height!==z)&&(h.width=R,h.height=z),h},p.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var h=[l.calcTicks(this.xaxis),l.calcTicks(this.yaxis)],D=0;D<2;++D)for(var S=0;S<h[D].length;++S)h[D][S].text=h[D][S].text+"";return h};function w(h,D){for(var S=0;S<2;++S){var M=h[S],L=D[S];if(M.length!==L.length)return!0;for(var R=0;R<M.length;++R)if(M[R].x!==L[R].x)return!0}return!1}p.updateRefs=function(h){this.fullLayout=h;var D=this.id.match(A),S="xaxis"+D[1],M="yaxis"+D[2];this.xaxis=this.fullLayout[S],this.yaxis=this.fullLayout[M]},p.relayoutCallback=function(){var h=this.graphDiv,D=this.xaxis,S=this.yaxis,M=h.layout,L={},R=L[D._name+".range"]=D.range.slice(),z=L[S._name+".range"]=S.range.slice();L[D._name+".autorange"]=D.autorange,L[S._name+".autorange"]=S.autorange,f.call("_storeDirectGUIEdit",h.layout,h._fullLayout._preGUI,L);var P=M[D._name];P.range=R,P.autorange=D.autorange;var I=M[S._name];I.range=z,I.autorange=S.autorange,L.lastInputTime=this.camera.lastInputTime,h.emit("plotly_relayout",L)},p.cameraChanged=function(){var h=this.camera;this.glplot.setDataBox(this.calcDataBox());var D=this.computeTickMarks(),S=this.glplotOptions.ticks;w(D,S)&&(this.glplotOptions.ticks=D,this.glplotOptions.dataBox=h.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},p.handleAnnotations=function(){for(var h=this.graphDiv,D=this.fullLayout.annotations,S=0;S<D.length;S++){var M=D[S];M.xref===this.xaxis._id&&M.yref===this.yaxis._id&&f.getComponentMethod("annotations","drawOne")(h,S)}},p.destroy=function(){if(!!this.glplot){var h=this.traces;h&&Object.keys(h).map(function(D){h[D].dispose(),delete h[D]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},p.plot=function(h,D,S){var M=this.glplot;this.updateRefs(S),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(h,D),this.updateFx(S.dragmode);var L=S.width,R=S.height;this.updateSize(this.canvas);var z=this.glplotOptions;z.merge(S),z.screenBox=[0,0,L,R];var P={_fullLayout:{_axisConstraintGroups:S._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:S._size}};y(P,this.xaxis),y(P,this.yaxis);var I=S._size,U=this.xaxis.domain,O=this.yaxis.domain;z.viewBox=[I.l+U[0]*I.w,I.b+O[0]*I.h,L-I.r-(1-U[1])*I.w,R-I.t-(1-O[1])*I.h],this.mouseContainer.style.width=I.w*(U[1]-U[0])+"px",this.mouseContainer.style.height=I.h*(O[1]-O[0])+"px",this.mouseContainer.height=I.h*(O[1]-O[0]),this.mouseContainer.style.left=I.l+U[0]*I.w+"px",this.mouseContainer.style.top=I.t+(1-O[1])*I.h+"px";var G,$;for($=0;$<2;++$)G=this[u[$]],G._length=z.viewBox[$+2]-z.viewBox[$],g(this.graphDiv,G),G.setScale();o(P),z.ticks=this.computeTickMarks(),z.dataBox=this.calcDataBox(),z.merge(S),M.update(z),this.glplot.draw()},p.calcDataBox=function(){var h=this.xaxis,D=this.yaxis,S=h.range,M=D.range,L=h.r2l,R=D.r2l;return[L(S[0]),R(M[0]),L(S[1]),R(M[1])]},p.setRanges=function(h){var D=this.xaxis,S=this.yaxis,M=D.l2r,L=S.l2r;D.range=[M(h[0]),M(h[2])],S.range=[L(h[1]),L(h[3])]},p.updateTraces=function(h,D){var S=Object.keys(this.traces),M,L,R;this.fullData=h;t:for(M=0;M<S.length;M++){var z=S[M],P=this.traces[z];for(L=0;L<h.length;L++)if(R=h[L],R.uid===z&&R.type===P.type)continue t;P.dispose(),delete this.traces[z]}for(M=0;M<h.length;M++){R=h[M];var I=D[M],U=this.traces[R.uid];U?U.update(R,I):(U=R._module.plot(this,R,I),this.traces[R.uid]=U)}this.glplot.objects.sort(function(O,G){return O._trace.index-G._trace.index})},p.updateFx=function(h){_(h)||v(h)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),h==="pan"?this.mouseContainer.style.cursor="move":h==="zoom"?this.mouseContainer.style.cursor="crosshair":this.mouseContainer.style.cursor=null},p.emitPointAction=function(h,D){for(var S=h.trace.uid,M=h.pointIndex,L,R=0;R<this.fullData.length;R++)this.fullData[R].uid===S&&(L=this.fullData[R]);var z={x:h.traceCoord[0],y:h.traceCoord[1],curveNumber:L.index,pointNumber:M,data:L._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};m.appendArrayPointValue(z,L,M),this.graphDiv.emit(D,{points:[z]})},p.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var h=this.glplot,D=this.camera,S=D.mouseListener,M=this.lastButtonState===1&&S.buttons===0,L=this.fullLayout;this.lastButtonState=S.buttons,this.cameraChanged();var R=S.x*h.pixelRatio,z=this.canvas.height-h.pixelRatio*S.y,P;if(D.boxEnabled&&L.dragmode==="zoom"){this.selectBox.enabled=!0;for(var I=this.selectBox.selectBox=[Math.min(D.boxStart[0],D.boxEnd[0]),Math.min(D.boxStart[1],D.boxEnd[1]),Math.max(D.boxStart[0],D.boxEnd[0]),Math.max(D.boxStart[1],D.boxEnd[1])],U=0;U<2;U++)D.boxStart[U]===D.boxEnd[U]&&(I[U]=h.dataBox[U],I[U+2]=h.dataBox[U+2]);h.setDirty()}else if(!D.panning&&this.isMouseOver){this.selectBox.enabled=!1;var O=L._size,G=this.xaxis.domain,$=this.yaxis.domain;P=h.pick(R/h.pixelRatio+O.l+G[0]*O.w,z/h.pixelRatio-(O.t+(1-$[1])*O.h));var tt=P&&P.object._trace.handlePick(P);if(tt&&M&&this.emitPointAction(tt,"plotly_click"),P&&P.object._trace.hoverinfo!=="skip"&&L.hovermode&&tt&&(!this.lastPickResult||this.lastPickResult.traceUid!==tt.trace.uid||this.lastPickResult.dataCoord[0]!==tt.dataCoord[0]||this.lastPickResult.dataCoord[1]!==tt.dataCoord[1])){var Z=tt;this.lastPickResult={traceUid:tt.trace?tt.trace.uid:null,dataCoord:tt.dataCoord.slice()},this.spikes.update({center:P.dataCoord}),Z.screenCoord=[((h.viewBox[2]-h.viewBox[0])*(P.dataCoord[0]-h.dataBox[0])/(h.dataBox[2]-h.dataBox[0])+h.viewBox[0])/h.pixelRatio,(this.canvas.height-(h.viewBox[3]-h.viewBox[1])*(P.dataCoord[1]-h.dataBox[1])/(h.dataBox[3]-h.dataBox[1])-h.viewBox[1])/h.pixelRatio],this.emitPointAction(tt,"plotly_hover");var X=this.fullData[Z.trace.index]||{},J=Z.pointIndex,st=m.castHoverinfo(X,L,J);if(st&&st!=="all"){var at=st.split("+");at.indexOf("x")===-1&&(Z.traceCoord[0]=void 0),at.indexOf("y")===-1&&(Z.traceCoord[1]=void 0),at.indexOf("z")===-1&&(Z.traceCoord[2]=void 0),at.indexOf("text")===-1&&(Z.textLabel=void 0),at.indexOf("name")===-1&&(Z.name=void 0)}m.loneHover({x:Z.screenCoord[0],y:Z.screenCoord[1],xLabel:this.hoverFormatter("xaxis",Z.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",Z.traceCoord[1]),zLabel:Z.traceCoord[2],text:Z.textLabel,name:Z.name,color:m.castHoverOption(X,J,"bgcolor")||Z.color,borderColor:m.castHoverOption(X,J,"bordercolor"),fontFamily:m.castHoverOption(X,J,"font.family"),fontSize:m.castHoverOption(X,J,"font.size"),fontColor:m.castHoverOption(X,J,"font.color"),nameLength:m.castHoverOption(X,J,"namelength"),textAlign:m.castHoverOption(X,J,"align")},{container:this.svgContainer,gd:this.graphDiv})}}P||this.unhover(),h.draw()}},p.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),m.loneUnhover(this.svgContainer))},p.hoverFormatter=function(h,D){if(D!==void 0){var S=this[h];return l.tickText(S,S.c2l(D),"hover").text}}},{"../../../stackgl_modules":1133,"../../components/dragelement/helpers":385,"../../components/fx":407,"../../lib/show_no_webgl_msg":537,"../../plots/cartesian/axes":566,"../../registry":647,"../cartesian/autorange":565,"../cartesian/constants":573,"../cartesian/constraints":574,"./camera":603,"./convert":604,"webgl-context":332}],607:[function(e,B,V){var f=e("../../plot_api/edit_types").overrideAll,l=e("../../components/fx/layout_attributes"),m=e("./scene"),x=e("../get_data").getSubplotData,t=e("../../lib"),a=e("../../constants/xmlns_namespaces"),i="gl3d",r="scene";V.name=i,V.attr=r,V.idRoot=r,V.idRegex=V.attrRegex=t.counterRegex("scene"),V.attributes=e("./layout/attributes"),V.layoutAttributes=e("./layout/layout_attributes"),V.baseLayoutAttrOverrides=f({hoverlabel:l.hoverlabel},"plot","nested"),V.supplyLayoutDefaults=e("./layout/defaults"),V.plot=function(d){for(var s=d._fullLayout,o=d._fullData,y=s._subplots[i],g=0;g<y.length;g++){var b=y[g],v=x(o,i,b),_=s[b],u=_.camera,T=_._scene;T||(T=new m({id:b,graphDiv:d,container:d.querySelector(".gl-container"),staticPlot:d._context.staticPlot,plotGlPixelRatio:d._context.plotGlPixelRatio,camera:u},s),_._scene=T),T.viewInitial||(T.viewInitial={up:{x:u.up.x,y:u.up.y,z:u.up.z},eye:{x:u.eye.x,y:u.eye.y,z:u.eye.z},center:{x:u.center.x,y:u.center.y,z:u.center.z}}),T.plot(v,s,d.layout)}},V.clean=function(n,d,s,o){for(var y=o._subplots[i]||[],g=0;g<y.length;g++){var b=y[g];!d[b]&&!!o[b]._scene&&(o[b]._scene.destroy(),o._infolayer&&o._infolayer.selectAll(".annotation-"+b).remove())}},V.toSVG=function(n){for(var d=n._fullLayout,s=d._subplots[i],o=d._size,y=0;y<s.length;y++){var g=d[s[y]],b=g.domain,v=g._scene,_=v.toImage("png"),u=d._glimages.append("svg:image");u.attr({xmlns:a.svg,"xlink:href":_,x:o.l+o.w*b.x[0],y:o.t+o.h*(1-b.y[1]),width:o.w*(b.x[1]-b.x[0]),height:o.h*(b.y[1]-b.y[0]),preserveAspectRatio:"none"}),v.destroy()}},V.cleanId=function(d){if(!!d.match(/^scene[0-9]*$/)){var s=d.substr(5);return s==="1"&&(s=""),r+s}},V.updateFx=function(n){for(var d=n._fullLayout,s=d._subplots[i],o=0;o<s.length;o++){var y=d[s[o]]._scene;y.updateFx(d.dragmode,d.hovermode)}}},{"../../components/fx/layout_attributes":408,"../../constants/xmlns_namespaces":492,"../../lib":515,"../../plot_api/edit_types":548,"../get_data":602,"./layout/attributes":608,"./layout/defaults":612,"./layout/layout_attributes":613,"./scene":617}],608:[function(e,B,V){B.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},{}],609:[function(e,B,V){var f=e("../../../components/color"),l=e("../../cartesian/layout_attributes"),m=e("../../../lib/extend").extendFlat,x=e("../../../plot_api/edit_types").overrideAll;B.exports=x({visible:l.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:f.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:l.color,categoryorder:l.categoryorder,categoryarray:l.categoryarray,title:{text:l.title.text,font:l.title.font},type:m({},l.type,{values:["-","linear","log","date","category"]}),autotypenumbers:l.autotypenumbers,autorange:l.autorange,rangemode:l.rangemode,range:m({},l.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:l.tickmode,nticks:l.nticks,tick0:l.tick0,dtick:l.dtick,tickvals:l.tickvals,ticktext:l.ticktext,ticks:l.ticks,mirror:l.mirror,ticklen:l.ticklen,tickwidth:l.tickwidth,tickcolor:l.tickcolor,showticklabels:l.showticklabels,tickfont:l.tickfont,tickangle:l.tickangle,tickprefix:l.tickprefix,showtickprefix:l.showtickprefix,ticksuffix:l.ticksuffix,showticksuffix:l.showticksuffix,showexponent:l.showexponent,exponentformat:l.exponentformat,minexponent:l.minexponent,separatethousands:l.separatethousands,tickformat:l.tickformat,tickformatstops:l.tickformatstops,hoverformat:l.hoverformat,showline:l.showline,linecolor:l.linecolor,linewidth:l.linewidth,showgrid:l.showgrid,gridcolor:m({},l.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:l.gridwidth,zeroline:l.zeroline,zerolinecolor:l.zerolinecolor,zerolinewidth:l.zerolinewidth,_deprecated:{title:l._deprecated.title,titlefont:l._deprecated.titlefont}},"plot","from-root")},{"../../../components/color":367,"../../../lib/extend":505,"../../../plot_api/edit_types":548,"../../cartesian/layout_attributes":579}],610:[function(e,B,V){var f=e("tinycolor2").mix,l=e("../../../lib"),m=e("../../../plot_api/plot_template"),x=e("./axis_attributes"),t=e("../../cartesian/type_defaults"),a=e("../../cartesian/axis_defaults"),i=["xaxis","yaxis","zaxis"],r=100*(204-68)/(255-68);B.exports=function(d,s,o){var y,g;function b(u,T){return l.coerce(y,g,x,u,T)}for(var v=0;v<i.length;v++){var _=i[v];y=d[_]||{},g=m.newContainer(s,_),g._id=_[0]+o.scene,g._name=_,t(y,g,b,o),a(y,g,b,{font:o.font,letter:_[0],data:o.data,showGrid:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelstep:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,bgColor:o.bgColor,calendar:o.calendar},o.fullLayout),b("gridcolor",f(g.color,o.bgColor,r).toRgbString()),b("title.text",_[0]),g.setScale=l.noop,b("showspikes")&&(b("spikesides"),b("spikethickness"),b("spikecolor",g.color)),b("showaxeslabels"),b("showbackground")&&b("backgroundcolor")}}},{"../../../lib":515,"../../../plot_api/plot_template":555,"../../cartesian/axis_defaults":568,"../../cartesian/type_defaults":591,"./axis_attributes":609,tinycolor2:313}],611:[function(e,B,V){var f=e("../../../lib/str2rgbarray"),l=e("../../../lib"),m=["xaxis","yaxis","zaxis"];function x(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}var t=x.prototype;t.merge=function(i,r){for(var n=this,d=0;d<3;++d){var s=r[m[d]];if(!s.visible){n.tickEnable[d]=!1,n.labelEnable[d]=!1,n.lineEnable[d]=!1,n.lineTickEnable[d]=!1,n.gridEnable[d]=!1,n.zeroEnable[d]=!1,n.backgroundEnable[d]=!1;continue}n.labels[d]=i._meta?l.templateString(s.title.text,i._meta):s.title.text,"font"in s.title&&(s.title.font.color&&(n.labelColor[d]=f(s.title.font.color)),s.title.font.family&&(n.labelFont[d]=s.title.font.family),s.title.font.size&&(n.labelSize[d]=s.title.font.size)),"showline"in s&&(n.lineEnable[d]=s.showline),"linecolor"in s&&(n.lineColor[d]=f(s.linecolor)),"linewidth"in s&&(n.lineWidth[d]=s.linewidth),"showgrid"in s&&(n.gridEnable[d]=s.showgrid),"gridcolor"in s&&(n.gridColor[d]=f(s.gridcolor)),"gridwidth"in s&&(n.gridWidth[d]=s.gridwidth),s.type==="log"?n.zeroEnable[d]=!1:"zeroline"in s&&(n.zeroEnable[d]=s.zeroline),"zerolinecolor"in s&&(n.zeroLineColor[d]=f(s.zerolinecolor)),"zerolinewidth"in s&&(n.zeroLineWidth[d]=s.zerolinewidth),"ticks"in s&&!!s.ticks?n.lineTickEnable[d]=!0:n.lineTickEnable[d]=!1,"ticklen"in s&&(n.lineTickLength[d]=n._defaultLineTickLength[d]=s.ticklen),"tickcolor"in s&&(n.lineTickColor[d]=f(s.tickcolor)),"tickwidth"in s&&(n.lineTickWidth[d]=s.tickwidth),"tickangle"in s&&(n.tickAngle[d]=s.tickangle==="auto"?-3600:Math.PI*-s.tickangle/180),"showticklabels"in s&&(n.tickEnable[d]=s.showticklabels),"tickfont"in s&&(s.tickfont.color&&(n.tickColor[d]=f(s.tickfont.color)),s.tickfont.family&&(n.tickFont[d]=s.tickfont.family),s.tickfont.size&&(n.tickSize[d]=s.tickfont.size)),"mirror"in s?["ticks","all","allticks"].indexOf(s.mirror)!==-1?(n.lineTickMirror[d]=!0,n.lineMirror[d]=!0):s.mirror===!0?(n.lineTickMirror[d]=!1,n.lineMirror[d]=!0):(n.lineTickMirror[d]=!1,n.lineMirror[d]=!1):n.lineMirror[d]=!1,"showbackground"in s&&s.showbackground!==!1?(n.backgroundEnable[d]=!0,n.backgroundColor[d]=f(s.backgroundcolor)):n.backgroundEnable[d]=!1}};function a(i,r){var n=new x;return n.merge(i,r),n}B.exports=a},{"../../../lib":515,"../../../lib/str2rgbarray":540}],612:[function(e,B,V){var f=e("../../../lib"),l=e("../../../components/color"),m=e("../../../registry"),x=e("../../subplot_defaults"),t=e("./axis_defaults"),a=e("./layout_attributes"),i=e("../../get_data").getSubplotData,r="gl3d";B.exports=function(s,o,y){var g=o._basePlotModules.length>1;function b(v){if(!g){var _=f.validate(s[v],a[v]);if(_)return s[v]}}x(s,o,y,{type:r,attributes:a,handleDefaults:n,fullLayout:o,font:o.font,fullData:y,getDfltFromLayout:b,autotypenumbersDflt:o.autotypenumbers,paper_bgcolor:o.paper_bgcolor,calendar:o.calendar})};function n(d,s,o,y){for(var g=o("bgcolor"),b=l.combine(g,y.paper_bgcolor),v=["up","center","eye"],_=0;_<v.length;_++)o("camera."+v[_]+".x"),o("camera."+v[_]+".y"),o("camera."+v[_]+".z");o("camera.projection.type");var u=!!o("aspectratio.x")&&!!o("aspectratio.y")&&!!o("aspectratio.z"),T=u?"manual":"auto",c=o("aspectmode",T);u||(d.aspectratio=s.aspectratio={x:1,y:1,z:1},c==="manual"&&(s.aspectmode="auto"),d.aspectmode=s.aspectmode);var A=i(y.fullData,r,y.id);t(d,s,{font:y.font,scene:y.id,data:A,bgColor:b,calendar:y.calendar,autotypenumbersDflt:y.autotypenumbersDflt,fullLayout:y.fullLayout}),m.getComponentMethod("annotations3d","handleDefaults")(d,s,y);var k=y.getDfltFromLayout("dragmode");if(k!==!1&&!k)if(k="orbit",d.camera&&d.camera.up){var p=d.camera.up.x,w=d.camera.up.y,h=d.camera.up.z;h!==0&&(!p||!w||!h||h/Math.sqrt(p*p+w*w+h*h)>.999)&&(k="turntable")}else k="turntable";o("dragmode",k),o("hovermode",y.getDfltFromLayout("hovermode"))}},{"../../../components/color":367,"../../../lib":515,"../../../registry":647,"../../get_data":602,"../../subplot_defaults":641,"./axis_defaults":610,"./layout_attributes":613}],613:[function(e,B,V){var f=e("./axis_attributes"),l=e("../../domain").attributes,m=e("../../../lib/extend").extendFlat,x=e("../../../lib").counterRegex;function t(a,i,r){return{x:{valType:"number",dflt:a,editType:"camera"},y:{valType:"number",dflt:i,editType:"camera"},z:{valType:"number",dflt:r,editType:"camera"},editType:"camera"}}B.exports={_arrayAttrRegexps:[x("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:m(t(0,0,1),{}),center:m(t(0,0,0),{}),eye:m(t(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:l({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:f,yaxis:f,zaxis:f,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},{"../../../lib":515,"../../../lib/extend":505,"../../domain":593,"./axis_attributes":609}],614:[function(e,B,V){var f=e("../../../lib/str2rgbarray"),l=["xaxis","yaxis","zaxis"];function m(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}var x=m.prototype;x.merge=function(a){for(var i=0;i<3;++i){var r=a[l[i]];if(!r.visible){this.enabled[i]=!1,this.drawSides[i]=!1;continue}this.enabled[i]=r.showspikes,this.colors[i]=f(r.spikecolor),this.drawSides[i]=r.spikesides,this.lineWidth[i]=r.spikethickness}};function t(a){var i=new m;return i.merge(a),i}B.exports=t},{"../../../lib/str2rgbarray":540}],615:[function(e,B,V){B.exports=t;var f=e("../../cartesian/axes"),l=e("../../../lib"),m=["xaxis","yaxis","zaxis"];function x(a){for(var i=new Array(3),r=0;r<3;++r){for(var n=a[r],d=new Array(n.length),s=0;s<n.length;++s)d[s]=n[s].x;i[r]=d}return i}function t(a){for(var i=a.axesOptions,r=a.glplot.axesPixels,n=a.fullSceneLayout,d=[[],[],[]],s=0;s<3;++s){var o=n[m[s]];if(o._length=(r[s].hi-r[s].lo)*r[s].pixelsPerDataUnit/a.dataScale[s],Math.abs(o._length)===1/0||isNaN(o._length))d[s]=[];else{o._input_range=o.range.slice(),o.range[0]=r[s].lo/a.dataScale[s],o.range[1]=r[s].hi/a.dataScale[s],o._m=1/(a.dataScale[s]*r[s].pixelsPerDataUnit),o.range[0]===o.range[1]&&(o.range[0]-=1,o.range[1]+=1);var y=o.tickmode;if(o.tickmode==="auto"){o.tickmode="linear";var g=o.nticks||l.constrain(o._length/40,4,9);f.autoTicks(o,Math.abs(o.range[1]-o.range[0])/g)}for(var b=f.calcTicks(o,{msUTC:!0}),v=0;v<b.length;++v)b[v].x=b[v].x*a.dataScale[s],o.type==="date"&&(b[v].text=b[v].text.replace(/\<br\>/g," "));d[s]=b,o.tickmode=y}}i.ticks=d;for(var s=0;s<3;++s){.5*(a.glplot.bounds[0][s]+a.glplot.bounds[1][s]);for(var v=0;v<2;++v)i.bounds[v][s]=a.glplot.bounds[v][s]}a.contourLevels=x(d)}},{"../../../lib":515,"../../cartesian/axes":566}],616:[function(e,B,V){function f(m,x){var t=[0,0,0,0],a,i;for(a=0;a<4;++a)for(i=0;i<4;++i)t[i]+=m[4*a+i]*x[a];return t}function l(m,x){var t=f(m.projection,f(m.view,f(m.model,[x[0],x[1],x[2],1])));return t}B.exports=l},{}],617:[function(e,B,V){var f=e("../../../stackgl_modules").gl_plot3d,l=f.createCamera,m=f.createScene,x=e("webgl-context"),t=e("has-passive-events"),a=e("../../registry"),i=e("../../lib"),r=i.preserveDrawingBuffer(),n=e("../../plots/cartesian/axes"),d=e("../../components/fx"),s=e("../../lib/str2rgbarray"),o=e("../../lib/show_no_webgl_msg"),y=e("./project"),g=e("./layout/convert"),b=e("./layout/spikes"),v=e("./layout/tick_marks"),_,u;function T(L,R){var z=document.createElement("div"),P=L.container;this.graphDiv=L.graphDiv;var I=document.createElementNS("http://www.w3.org/2000/svg","svg");I.style.position="absolute",I.style.top=I.style.left="0px",I.style.width=I.style.height="100%",I.style["z-index"]=20,I.style["pointer-events"]="none",z.appendChild(I),this.svgContainer=I,z.id=L.id,z.style.position="absolute",z.style.top=z.style.left="0px",z.style.width=z.style.height="100%",P.appendChild(z),this.fullLayout=R,this.id=L.id||"scene",this.fullSceneLayout=R[this.id],this.plotArgs=[[],{},{}],this.axesOptions=g(R,R[this.id]),this.spikeOptions=b(R[this.id]),this.container=z,this.staticMode=!!L.staticPlot,this.pixelRatio=this.pixelRatio||L.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=a.getComponentMethod("annotations3d","convert"),this.drawAnnotations=a.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var c=T.prototype;c.prepareOptions=function(){var L=this,R={canvas:L.canvas,gl:L.gl,glOptions:{preserveDrawingBuffer:r,premultipliedAlpha:!0,antialias:!0},container:L.container,axes:L.axesOptions,spikes:L.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:L.camera,pixelRatio:L.pixelRatio};if(L.staticMode){if(!u&&(_=document.createElement("canvas"),u=x({canvas:_,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}),!u))throw new Error("error creating static canvas/context for image server");R.gl=u,R.canvas=_}return R};var A=!0;c.tryCreatePlot=function(){var L=this,R=L.prepareOptions(),z=!0;try{L.glplot=m(R)}catch{if(L.staticMode||!A||r)z=!1;else{i.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{r=R.glOptions.preserveDrawingBuffer=!0,L.glplot=m(R)}catch{r=R.glOptions.preserveDrawingBuffer=!1,z=!1}}}return A=!1,z},c.initializeGLCamera=function(){var L=this,R=L.fullSceneLayout.camera,z=R.projection.type==="orthographic";L.camera=l(L.container,{center:[R.center.x,R.center.y,R.center.z],eye:[R.eye.x,R.eye.y,R.eye.z],up:[R.up.x,R.up.y,R.up.z],_ortho:z,zoomMin:.01,zoomMax:100,mode:"orbit"})},c.initializeGLPlot=function(){var L=this;L.initializeGLCamera();var R=L.tryCreatePlot();if(!R)return o(L);L.traces={},L.make4thDimension();var z=L.graphDiv,P=z.layout,I=function(){var O={};return L.isCameraChanged(P)&&(O[L.id+".camera"]=L.getCamera()),L.isAspectChanged(P)&&(O[L.id+".aspectratio"]=L.glplot.getAspectratio(),P[L.id].aspectmode!=="manual"&&(L.fullSceneLayout.aspectmode=P[L.id].aspectmode=O[L.id+".aspectmode"]="manual")),O},U=function(O){if(O.fullSceneLayout.dragmode!==!1){var G=I();O.saveLayout(P),O.graphDiv.emit("plotly_relayout",G)}};return L.glplot.canvas&&(L.glplot.canvas.addEventListener("mouseup",function(){U(L)}),L.glplot.canvas.addEventListener("wheel",function(O){if(z._context._scrollZoom.gl3d){if(L.camera._ortho){var G=O.deltaX>O.deltaY?1.1:.9090909090909091,$=L.glplot.getAspectratio();L.glplot.setAspectratio({x:G*$.x,y:G*$.y,z:G*$.z})}U(L)}},t?{passive:!1}:!1),L.glplot.canvas.addEventListener("mousemove",function(){if(L.fullSceneLayout.dragmode!==!1&&L.camera.mouseListener.buttons!==0){var O=I();L.graphDiv.emit("plotly_relayouting",O)}}),L.staticMode||L.glplot.canvas.addEventListener("webglcontextlost",function(O){z&&z.emit&&z.emit("plotly_webglcontextlost",{event:O,layer:L.id})},!1)),L.glplot.oncontextloss=function(){L.recoverContext()},L.glplot.onrender=function(){L.render()},!0},c.render=function(){var L=this,R=L.graphDiv,z,P=L.svgContainer,I=L.container.getBoundingClientRect();R._fullLayout._calcInverseTransform(R);var U=R._fullLayout._invScaleX,O=R._fullLayout._invScaleY,G=I.width*U,$=I.height*O;P.setAttributeNS(null,"viewBox","0 0 "+G+" "+$),P.setAttributeNS(null,"width",G),P.setAttributeNS(null,"height",$),v(L),L.glplot.axes.update(L.axesOptions);for(var tt=Object.keys(L.traces),Z=null,X=L.glplot.selection,J=0;J<tt.length;++J)z=L.traces[tt[J]],z.data.hoverinfo!=="skip"&&z.handlePick(X)&&(Z=z),z.setContourLevels&&z.setContourLevels();function st(bt,ut,pt){var yt=L.fullSceneLayout[bt+"axis"];return yt.type!=="log"&&(ut=yt.d2l(ut)),n.hoverLabelText(yt,ut,pt)}if(Z!==null){var at=y(L.glplot.cameraParams,X.dataCoordinate);z=Z.data;var lt=R._fullData[z.index],F=X.index,H={xLabel:st("x",X.traceCoordinate[0],z.xhoverformat),yLabel:st("y",X.traceCoordinate[1],z.yhoverformat),zLabel:st("z",X.traceCoordinate[2],z.zhoverformat)},et=d.castHoverinfo(lt,L.fullLayout,F),q=(et||"").split("+"),W=et&&et==="all";!lt.hovertemplate&&!W&&(q.indexOf("x")===-1&&(H.xLabel=void 0),q.indexOf("y")===-1&&(H.yLabel=void 0),q.indexOf("z")===-1&&(H.zLabel=void 0),q.indexOf("text")===-1&&(X.textLabel=void 0),q.indexOf("name")===-1&&(Z.name=void 0));var K,nt=[];z.type==="cone"||z.type==="streamtube"?(H.uLabel=st("x",X.traceCoordinate[3],z.uhoverformat),(W||q.indexOf("u")!==-1)&&nt.push("u: "+H.uLabel),H.vLabel=st("y",X.traceCoordinate[4],z.vhoverformat),(W||q.indexOf("v")!==-1)&&nt.push("v: "+H.vLabel),H.wLabel=st("z",X.traceCoordinate[5],z.whoverformat),(W||q.indexOf("w")!==-1)&&nt.push("w: "+H.wLabel),H.normLabel=X.traceCoordinate[6].toPrecision(3),(W||q.indexOf("norm")!==-1)&&nt.push("norm: "+H.normLabel),z.type==="streamtube"&&(H.divergenceLabel=X.traceCoordinate[7].toPrecision(3),(W||q.indexOf("divergence")!==-1)&&nt.push("divergence: "+H.divergenceLabel)),X.textLabel&&nt.push(X.textLabel),K=nt.join("<br>")):z.type==="isosurface"||z.type==="volume"?(H.valueLabel=n.hoverLabelText(L._mockAxis,L._mockAxis.d2l(X.traceCoordinate[3]),z.valuehoverformat),nt.push("value: "+H.valueLabel),X.textLabel&&nt.push(X.textLabel),K=nt.join("<br>")):K=X.textLabel;var it={x:X.traceCoordinate[0],y:X.traceCoordinate[1],z:X.traceCoordinate[2],data:lt._input,fullData:lt,curveNumber:lt.index,pointNumber:F};d.appendArrayPointValue(it,lt,F),z._module.eventData&&(it=lt._module.eventData(it,X,lt,{},F));var ot={points:[it]};if(L.fullSceneLayout.hovermode){var ct=[];d.loneHover({trace:lt,x:(.5+.5*at[0]/at[3])*G,y:(.5-.5*at[1]/at[3])*$,xLabel:H.xLabel,yLabel:H.yLabel,zLabel:H.zLabel,text:K,name:Z.name,color:d.castHoverOption(lt,F,"bgcolor")||Z.color,borderColor:d.castHoverOption(lt,F,"bordercolor"),fontFamily:d.castHoverOption(lt,F,"font.family"),fontSize:d.castHoverOption(lt,F,"font.size"),fontColor:d.castHoverOption(lt,F,"font.color"),nameLength:d.castHoverOption(lt,F,"namelength"),textAlign:d.castHoverOption(lt,F,"align"),hovertemplate:i.castOption(lt,F,"hovertemplate"),hovertemplateLabels:i.extendFlat({},it,H),eventData:[it]},{container:P,gd:R,inOut_bbox:ct}),it.bbox=ct[0]}X.buttons&&X.distance<5?R.emit("plotly_click",ot):R.emit("plotly_hover",ot),this.oldEventData=ot}else d.loneUnhover(P),this.oldEventData&&R.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;L.drawAnnotations(L)},c.recoverContext=function(){var L=this;L.glplot.dispose();var R=function(){if(L.glplot.gl.isContextLost()){requestAnimationFrame(R);return}if(!L.initializeGLPlot()){i.error("Catastrophic and unrecoverable WebGL error. Context lost.");return}L.plot.apply(L,L.plotArgs)};requestAnimationFrame(R)};var k=["xaxis","yaxis","zaxis"];function p(L,R,z){for(var P=L.fullSceneLayout,I=0;I<3;I++){var U=k[I],O=U.charAt(0),G=P[U],$=R[O],tt=R[O+"calendar"],Z=R["_"+O+"length"];if(!i.isArrayOrTypedArray($))z[0][I]=Math.min(z[0][I],0),z[1][I]=Math.max(z[1][I],Z-1);else for(var X,J=0;J<(Z||$.length);J++)if(i.isArrayOrTypedArray($[J]))for(var st=0;st<$[J].length;++st)X=G.d2l($[J][st],0,tt),!isNaN(X)&&isFinite(X)&&(z[0][I]=Math.min(z[0][I],X),z[1][I]=Math.max(z[1][I],X));else X=G.d2l($[J],0,tt),!isNaN(X)&&isFinite(X)&&(z[0][I]=Math.min(z[0][I],X),z[1][I]=Math.max(z[1][I],X))}}function w(L,R){for(var z=L.fullSceneLayout,P=z.annotations||[],I=0;I<3;I++)for(var U=k[I],O=U.charAt(0),G=z[U],$=0;$<P.length;$++){var tt=P[$];if(tt.visible){var Z=G.r2l(tt[O]);!isNaN(Z)&&isFinite(Z)&&(R[0][I]=Math.min(R[0][I],Z),R[1][I]=Math.max(R[1][I],Z))}}}c.plot=function(L,R,z){var P=this;if(P.plotArgs=[L,R,z],P.glplot.contextLost)return;var I,U,O,G,$,tt,Z=R[P.id],X=z[P.id];P.fullLayout=R,P.fullSceneLayout=Z,P.axesOptions.merge(R,Z),P.spikeOptions.merge(Z),P.setViewport(Z),P.updateFx(Z.dragmode,Z.hovermode),P.camera.enableWheel=P.graphDiv._context._scrollZoom.gl3d,P.glplot.setClearColor(s(Z.bgcolor)),P.setConvert($),L?Array.isArray(L)||(L=[L]):L=[];var J=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(O=0;O<L.length;++O)I=L[O],!(I.visible!==!0||I._length===0)&&p(this,I,J);w(this,J);var st=[1,1,1];for(G=0;G<3;++G)J[1][G]===J[0][G]?st[G]=1:st[G]=1/(J[1][G]-J[0][G]);for(P.dataScale=st,P.convertAnnotations(this),O=0;O<L.length;++O)I=L[O],!(I.visible!==!0||I._length===0)&&(U=P.traces[I.uid],U?U.data.type===I.type?U.update(I):(U.dispose(),U=I._module.plot(this,I),P.traces[I.uid]=U):(U=I._module.plot(this,I),P.traces[I.uid]=U),U.name=I.name);var at=Object.keys(P.traces);t:for(O=0;O<at.length;++O){for(G=0;G<L.length;++G)if(L[G].uid===at[O]&&L[G].visible===!0&&L[G]._length!==0)continue t;U=P.traces[at[O]],U.dispose(),delete P.traces[at[O]]}P.glplot.objects.sort(function(It,$t){return It._trace.data.index-$t._trace.data.index});var lt=[[0,0,0],[0,0,0]],F={};for(O=0;O<3;++O){if($=Z[k[O]],tt=$.type,tt in F?(F[tt].acc*=st[O],F[tt].count+=1):F[tt]={acc:st[O],count:1},$.autorange){lt[0][O]=1/0,lt[1][O]=-1/0;var H=P.glplot.objects,et=P.fullSceneLayout.annotations||[],q=$._name.charAt(0);for(G=0;G<H.length;G++){var W=H[G],K=W.bounds,nt=W._trace.data._pad||0;W.constructor.name==="ErrorBars"&&$._lowerLogErrorBound?lt[0][O]=Math.min(lt[0][O],$._lowerLogErrorBound):lt[0][O]=Math.min(lt[0][O],K[0][O]/st[O]-nt),lt[1][O]=Math.max(lt[1][O],K[1][O]/st[O]+nt)}for(G=0;G<et.length;G++){var it=et[G];if(it.visible){var ot=$.r2l(it[q]);lt[0][O]=Math.min(lt[0][O],ot),lt[1][O]=Math.max(lt[1][O],ot)}}if("rangemode"in $&&$.rangemode==="tozero"&&(lt[0][O]=Math.min(lt[0][O],0),lt[1][O]=Math.max(lt[1][O],0)),lt[0][O]>lt[1][O])lt[0][O]=-1,lt[1][O]=1;else{var ct=lt[1][O]-lt[0][O];lt[0][O]-=ct/32,lt[1][O]+=ct/32}if($.autorange==="reversed"){var bt=lt[0][O];lt[0][O]=lt[1][O],lt[1][O]=bt}}else{var ut=$.range;lt[0][O]=$.r2l(ut[0]),lt[1][O]=$.r2l(ut[1])}lt[0][O]===lt[1][O]&&(lt[0][O]-=1,lt[1][O]+=1),P.glplot.setBounds(O,{min:lt[0][O]*st[O],max:lt[1][O]*st[O]})}var pt,yt=Z.aspectmode;if(yt==="cube")pt=[1,1,1];else if(yt==="manual"){var Tt=Z.aspectratio;pt=[Tt.x,Tt.y,Tt.z]}else if(yt==="auto"||yt==="data"){var kt=[1,1,1];for(O=0;O<3;++O){$=Z[k[O]],tt=$.type;var zt=F[tt];kt[O]=Math.pow(zt.acc,1/zt.count)/st[O]}yt==="data"||Math.max.apply(null,kt)/Math.min.apply(null,kt)<=4?pt=kt:pt=[1,1,1]}else throw new Error("scene.js aspectRatio was not one of the enumerated types");Z.aspectratio.x=X.aspectratio.x=pt[0],Z.aspectratio.y=X.aspectratio.y=pt[1],Z.aspectratio.z=X.aspectratio.z=pt[2],P.glplot.setAspectratio(Z.aspectratio),P.viewInitial.aspectratio||(P.viewInitial.aspectratio={x:Z.aspectratio.x,y:Z.aspectratio.y,z:Z.aspectratio.z}),P.viewInitial.aspectmode||(P.viewInitial.aspectmode=Z.aspectmode);var Rt=Z.domain||null,Gt=R._size||null;if(Rt&&Gt){var wt=P.container.style;wt.position="absolute",wt.left=Gt.l+Rt.x[0]*Gt.w+"px",wt.top=Gt.t+(1-Rt.y[1])*Gt.h+"px",wt.width=Gt.w*(Rt.x[1]-Rt.x[0])+"px",wt.height=Gt.h*(Rt.y[1]-Rt.y[0])+"px"}P.glplot.redraw()},c.destroy=function(){var L=this;!L.glplot||(L.camera.mouseListener.enabled=!1,L.container.removeEventListener("wheel",L.camera.wheelListener),L.camera=null,L.glplot.dispose(),L.container.parentNode.removeChild(L.container),L.glplot=null)};function h(L){return[[L.eye.x,L.eye.y,L.eye.z],[L.center.x,L.center.y,L.center.z],[L.up.x,L.up.y,L.up.z]]}function D(L){return{up:{x:L.up[0],y:L.up[1],z:L.up[2]},center:{x:L.center[0],y:L.center[1],z:L.center[2]},eye:{x:L.eye[0],y:L.eye[1],z:L.eye[2]},projection:{type:L._ortho===!0?"orthographic":"perspective"}}}c.getCamera=function(){var L=this;return L.camera.view.recalcMatrix(L.camera.view.lastT()),D(L.camera)},c.setViewport=function(L){var R=this,z=L.camera;R.camera.lookAt.apply(this,h(z)),R.glplot.setAspectratio(L.aspectratio);var P=z.projection.type==="orthographic",I=R.camera._ortho;P!==I&&(R.glplot.redraw(),R.glplot.clearRGBA(),R.glplot.dispose(),R.initializeGLPlot())},c.isCameraChanged=function(L){var R=this,z=R.getCamera(),P=i.nestedProperty(L,R.id+".camera"),I=P.get();function U(tt,Z,X,J){var st=["up","center","eye"],at=["x","y","z"];return Z[st[X]]&&tt[st[X]][at[J]]===Z[st[X]][at[J]]}var O=!1;if(I===void 0)O=!0;else{for(var G=0;G<3;G++)for(var $=0;$<3;$++)if(!U(z,I,G,$)){O=!0;break}(!I.projection||z.projection&&z.projection.type!==I.projection.type)&&(O=!0)}return O},c.isAspectChanged=function(L){var R=this,z=R.glplot.getAspectratio(),P=i.nestedProperty(L,R.id+".aspectratio"),I=P.get();return I===void 0||I.x!==z.x||I.y!==z.y||I.z!==z.z},c.saveLayout=function(L){var R=this,z=R.fullLayout,P,I,U,O,G,$,tt=R.isCameraChanged(L),Z=R.isAspectChanged(L),X=tt||Z;if(X){var J={};if(tt&&(P=R.getCamera(),I=i.nestedProperty(L,R.id+".camera"),U=I.get(),J[R.id+".camera"]=U),Z&&(O=R.glplot.getAspectratio(),G=i.nestedProperty(L,R.id+".aspectratio"),$=G.get(),J[R.id+".aspectratio"]=$),a.call("_storeDirectGUIEdit",L,z._preGUI,J),tt){I.set(P);var st=i.nestedProperty(z,R.id+".camera");st.set(P)}if(Z){G.set(O);var at=i.nestedProperty(z,R.id+".aspectratio");at.set(O),R.glplot.redraw()}}return X},c.updateFx=function(L,R){var z=this,P=z.camera;if(P)if(L==="orbit")P.mode="orbit",P.keyBindingMode="rotate";else if(L==="turntable"){P.up=[0,0,1],P.mode="turntable",P.keyBindingMode="rotate";var I=z.graphDiv,U=I._fullLayout,O=z.fullSceneLayout.camera,G=O.up.x,$=O.up.y,tt=O.up.z;if(tt/Math.sqrt(G*G+$*$+tt*tt)<.999){var Z=z.id+".camera.up",X={x:0,y:0,z:1},J={};J[Z]=X;var st=I.layout;a.call("_storeDirectGUIEdit",st,U._preGUI,J),O.up=X,i.nestedProperty(st,Z).set(X)}}else P.keyBindingMode=L;z.fullSceneLayout.hovermode=R};function S(L,R,z){for(var P=0,I=z-1;P<I;++P,--I)for(var U=0;U<R;++U)for(var O=0;O<4;++O){var G=4*(R*P+U)+O,$=4*(R*I+U)+O,tt=L[G];L[G]=L[$],L[$]=tt}}function M(L,R,z){for(var P=0;P<z;++P)for(var I=0;I<R;++I){var U=4*(R*P+I),O=L[U+3];if(O>0)for(var G=255/O,$=0;$<3;++$)L[U+$]=Math.min(G*L[U+$],255)}}c.toImage=function(L){var R=this;L||(L="png"),R.staticMode&&R.container.appendChild(_),R.glplot.redraw();var z=R.glplot.gl,P=z.drawingBufferWidth,I=z.drawingBufferHeight;z.bindFramebuffer(z.FRAMEBUFFER,null);var U=new Uint8Array(P*I*4);z.readPixels(0,0,P,I,z.RGBA,z.UNSIGNED_BYTE,U),S(U,P,I),M(U,P,I);var O=document.createElement("canvas");O.width=P,O.height=I;var G=O.getContext("2d",{willReadFrequently:!0}),$=G.createImageData(P,I);$.data.set(U),G.putImageData($,0,0);var tt;switch(L){case"jpeg":tt=O.toDataURL("image/jpeg");break;case"webp":tt=O.toDataURL("image/webp");break;default:tt=O.toDataURL("image/png")}return R.staticMode&&R.container.removeChild(_),tt},c.setConvert=function(){for(var L=this,R=0;R<3;R++){var z=L.fullSceneLayout[k[R]];n.setConvert(z,L.fullLayout),z.setScale=i.noop}},c.make4thDimension=function(){var L=this,R=L.graphDiv,z=R._fullLayout;L._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},n.setConvert(L._mockAxis,z)},B.exports=T},{"../../../stackgl_modules":1133,"../../components/fx":407,"../../lib":515,"../../lib/show_no_webgl_msg":537,"../../lib/str2rgbarray":540,"../../plots/cartesian/axes":566,"../../registry":647,"./layout/convert":611,"./layout/spikes":614,"./layout/tick_marks":615,"./project":616,"has-passive-events":229,"webgl-context":332}],618:[function(e,B,V){B.exports=function(l,m,x,t){t=t||l.length;for(var a=new Array(t),i=0;i<t;i++)a[i]=[l[i],m[i],x[i]];return a}},{}],619:[function(e,B,V){var f=e("./font_attributes"),l=e("./animation_attributes"),m=e("../components/color/attributes"),x=e("../components/shapes/draw_newshape/attributes"),t=e("../components/selections/draw_newselection/attributes"),a=e("./pad_attributes"),i=e("../lib/extend").extendFlat,r=f({editType:"calc"});r.family.dflt='"Open Sans", verdana, arial, sans-serif',r.size.dflt=12,r.color.dflt=m.defaultLine,B.exports={font:r,title:{text:{valType:"string",editType:"layoutstyle"},font:f({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:i(a({editType:"layoutstyle"}),{}),editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:m.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:m.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:m.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:x.newshape,activeshape:x.activeshape,newselection:t.newselection,activeselection:t.activeselection,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:i({},l.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:f({editType:"layoutstyle"})}}},{"../components/color/attributes":366,"../components/selections/draw_newselection/attributes":451,"../components/shapes/draw_newshape/attributes":463,"../lib/extend":505,"./animation_attributes":560,"./font_attributes":594,"./pad_attributes":627}],620:[function(e,B,V){var f=e("../../lib/sort_object_keys"),l="1.10.1",m='\xA9 <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',x=['\xA9 <a target="_blank" href="https://carto.com/">Carto</a>',m].join(" "),t=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>'].join(" "),a=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'].join(" "),i={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:m,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}]},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}]},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:x,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}]},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:x,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}]},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:t,tiles:["https://stamen-tiles.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}]},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:t,tiles:["https://stamen-tiles.a.ssl.fastly.net/toner/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}]},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:a,tiles:["https://stamen-tiles.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}]}},r=f(i);B.exports={requiredVersion:l,styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:i,styleValuesNonMapbox:r,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install mapbox-gl@"+l+"."].join(`
`),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join(`
`),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",r.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join(`
`),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join(`
`),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":`content: ""; cursor: pointer; position: absolute; background-image: url('data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;`,"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":`display:block; width: 21px; height: 21px; background-image: url('data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E')`}}},{"../../lib/sort_object_keys":538}],621:[function(e,B,V){var f=e("../../lib");B.exports=function(m,x){var t=m.split(" "),a=t[0],i=t[1],r=f.isArrayOrTypedArray(x)?f.mean(x):x,n=.5+r/100,d=1.5+r/100,s=["",""],o=[0,0];switch(a){case"top":s[0]="top",o[1]=-d;break;case"bottom":s[0]="bottom",o[1]=d;break}switch(i){case"left":s[1]="right",o[0]=-n;break;case"right":s[1]="left",o[0]=n;break}var y;return s[0]&&s[1]?y=s.join("-"):s[0]?y=s[0]:s[1]?y=s[1]:y="center",{anchor:y,offset:o}}},{"../../lib":515}],622:[function(e,B,V){var f=e("mapbox-gl/dist/mapbox-gl-unminified"),l=e("../../lib"),m=l.strTranslate,x=l.strScale,t=e("../../plots/get_data").getSubplotCalcData,a=e("../../constants/xmlns_namespaces"),i=e("@plotly/d3"),r=e("../../components/drawing"),n=e("../../lib/svg_text_utils"),d=e("./mapbox"),s="mapbox",o=V.constants=e("./constants");V.name=s,V.attr="subplot",V.idRoot=s,V.idRegex=V.attrRegex=l.counterRegex(s),V.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}},V.layoutAttributes=e("./layout_attributes"),V.supplyLayoutDefaults=e("./layout_defaults"),V.plot=function(v){var _=v._fullLayout,u=v.calcdata,T=_._subplots[s];if(f.version!==o.requiredVersion)throw new Error(o.wrongVersionErrorMsg);var c=y(v,T);f.accessToken=c;for(var A=0;A<T.length;A++){var k=T[A],p=t(u,s,k),w=_[k],h=w._subplot;h||(h=new d(v,k),_[k]._subplot=h),h.viewInitial||(h.viewInitial={center:l.extendFlat({},w.center),zoom:w.zoom,bearing:w.bearing,pitch:w.pitch}),h.plot(p,_,v._promises)}},V.clean=function(b,v,_,u){for(var T=u._subplots[s]||[],c=0;c<T.length;c++){var A=T[c];!v[A]&&!!u[A]._subplot&&u[A]._subplot.destroy()}},V.toSVG=function(b){for(var v=b._fullLayout,_=v._subplots[s],u=v._size,T=0;T<_.length;T++){var c=v[_[T]],A=c.domain,k=c._subplot,p=k.toImage("png"),w=v._glimages.append("svg:image");w.attr({xmlns:a.svg,"xlink:href":p,x:u.l+u.w*A.x[0],y:u.t+u.h*(1-A.y[1]),width:u.w*(A.x[1]-A.x[0]),height:u.h*(A.y[1]-A.y[0]),preserveAspectRatio:"none"});var h=i.select(c._subplot.div),D=h.select(".mapboxgl-ctrl-logo").node().offsetParent===null;if(!D){var S=v._glimages.append("g");S.attr("transform",m(u.l+u.w*A.x[0]+10,u.t+u.h*(1-A.y[0])-31)),S.append("path").attr("d",o.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),S.append("path").attr("d",o.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),S.append("path").attr("d",o.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),S.append("polygon").attr("points",o.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var M=h.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),L=v._glimages.append("g"),R=L.append("text");R.text(M).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":M});var z=r.bBox(R.node()),P=u.w*(A.x[1]-A.x[0]);if(z.width>P/2){var I=M.split("|").join("<br>");R.text(I).attr("data-unformatted",I).call(n.convertToTspans,b),z=r.bBox(R.node())}R.attr("transform",m(-3,-z.height+8)),L.insert("rect",".static-attribution").attr({x:-z.width-6,y:-z.height-3,width:z.width+6,height:z.height+3,fill:"rgba(255, 255, 255, 0.75)"});var U=1;z.width+6>P&&(U=P/(z.width+6));var O=[u.l+u.w*A.x[1],u.t+u.h*(1-A.y[0])];L.attr("transform",m(O[0],O[1])+x(U))}};function y(b,v){var _=b._fullLayout,u=b._context;if(u.mapboxAccessToken==="")return"";for(var T=[],c=[],A=!1,k=!1,p=0;p<v.length;p++){var w=_[v[p]],h=w.accesstoken;g(w.style)&&(h?l.pushUnique(T,h):(g(w._input.style)&&(l.error("Uses Mapbox map style, but did not set an access token."),A=!0),k=!0)),h&&l.pushUnique(c,h)}if(k){var D=A?o.noAccessTokenErrorMsg:o.missingStyleErrorMsg;throw l.error(D),new Error(D)}return T.length?(T.length>1&&l.warn(o.multipleTokensErrorMsg),T[0]):(c.length&&l.log(["Listed mapbox access token(s)",c.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}function g(b){return typeof b=="string"&&(o.styleValuesMapbox.indexOf(b)!==-1||b.indexOf("mapbox://")===0)}V.updateFx=function(b){for(var v=b._fullLayout,_=v._subplots[s],u=0;u<_.length;u++){var T=v[_[u]]._subplot;T.updateFx(v)}}},{"../../components/drawing":389,"../../constants/xmlns_namespaces":492,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/get_data":602,"./constants":620,"./layout_attributes":624,"./layout_defaults":625,"./mapbox":626,"@plotly/d3":58,"mapbox-gl/dist/mapbox-gl-unminified":239}],623:[function(e,B,V){var f=e("../../lib"),l=e("../../lib/svg_text_utils").sanitizeHTML,m=e("./convert_text_opts"),x=e("./constants");function t(d,s){this.subplot=d,this.uid=d.uid+"-"+s,this.index=s,this.idSource="source-"+this.uid,this.idLayer=x.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var a=t.prototype;a.update=function(s){this.visible?this.needsNewImage(s)?this.updateImage(s):this.needsNewSource(s)?(this.removeLayer(),this.updateSource(s),this.updateLayer(s)):this.needsNewLayer(s)?this.updateLayer(s):this.updateStyle(s):(this.updateSource(s),this.updateLayer(s)),this.visible=i(s)},a.needsNewImage=function(d){var s=this.subplot.map;return s.getSource(this.idSource)&&this.sourceType==="image"&&d.sourcetype==="image"&&(this.source!==d.source||JSON.stringify(this.coordinates)!==JSON.stringify(d.coordinates))},a.needsNewSource=function(d){return this.sourceType!==d.sourcetype||JSON.stringify(this.source)!==JSON.stringify(d.source)||this.layerType!==d.type},a.needsNewLayer=function(d){return this.layerType!==d.type||this.below!==this.subplot.belowLookup["layout-"+this.index]},a.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]},a.updateImage=function(d){var s=this.subplot.map;s.getSource(this.idSource).updateImage({url:d.source,coordinates:d.coordinates});var o=this.findFollowingMapboxLayerId(this.lookupBelow());o!==null&&this.subplot.map.moveLayer(this.idLayer,o)},a.updateSource=function(d){var s=this.subplot.map;if(s.getSource(this.idSource)&&s.removeSource(this.idSource),this.sourceType=d.sourcetype,this.source=d.source,!!i(d)){var o=n(d);s.addSource(this.idSource,o)}},a.findFollowingMapboxLayerId=function(d){if(d==="traces")for(var s=this.subplot.getMapLayers(),o=0;o<s.length;o++){var y=s[o].id;if(typeof y=="string"&&y.indexOf(x.traceLayerPrefix)===0){d=y;break}}return d},a.updateLayer=function(d){var s=this.subplot,o=r(d),y=this.lookupBelow(),g=this.findFollowingMapboxLayerId(y);this.removeLayer(),i(d)&&s.addLayer({id:this.idLayer,source:this.idSource,"source-layer":d.sourcelayer||"",type:d.type,minzoom:d.minzoom,maxzoom:d.maxzoom,layout:o.layout,paint:o.paint},g),this.layerType=d.type,this.below=y},a.updateStyle=function(d){if(i(d)){var s=r(d);this.subplot.setOptions(this.idLayer,"setLayoutProperty",s.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",s.paint)}},a.removeLayer=function(){var d=this.subplot.map;d.getLayer(this.idLayer)&&d.removeLayer(this.idLayer)},a.dispose=function(){var d=this.subplot.map;d.getLayer(this.idLayer)&&d.removeLayer(this.idLayer),d.getSource(this.idSource)&&d.removeSource(this.idSource)};function i(d){if(!d.visible)return!1;var s=d.source;if(Array.isArray(s)&&s.length>0){for(var o=0;o<s.length;o++)if(typeof s[o]!="string"||s[o].length===0)return!1;return!0}return f.isPlainObject(s)||typeof s=="string"&&s.length>0}function r(d){var s={},o={};switch(d.type){case"circle":f.extendFlat(o,{"circle-radius":d.circle.radius,"circle-color":d.color,"circle-opacity":d.opacity});break;case"line":f.extendFlat(o,{"line-width":d.line.width,"line-color":d.color,"line-opacity":d.opacity,"line-dasharray":d.line.dash});break;case"fill":f.extendFlat(o,{"fill-color":d.color,"fill-outline-color":d.fill.outlinecolor,"fill-opacity":d.opacity});break;case"symbol":var y=d.symbol,g=m(y.textposition,y.iconsize);f.extendFlat(s,{"icon-image":y.icon+"-15","icon-size":y.iconsize/10,"text-field":y.text,"text-size":y.textfont.size,"text-anchor":g.anchor,"text-offset":g.offset,"symbol-placement":y.placement}),f.extendFlat(o,{"icon-color":d.color,"text-color":y.textfont.color,"text-opacity":d.opacity});break;case"raster":f.extendFlat(o,{"raster-fade-duration":0,"raster-opacity":d.opacity});break}return{layout:s,paint:o}}function n(d){var s=d.sourcetype,o=d.source,y={type:s},g;return s==="geojson"?g="data":s==="vector"?g=typeof o=="string"?"url":"tiles":s==="raster"?(g="tiles",y.tileSize=256):s==="image"&&(g="url",y.coordinates=d.coordinates),y[g]=o,d.sourceattribution&&(y.attribution=l(d.sourceattribution)),y}B.exports=function(s,o,y){var g=new t(s,o);return g.update(y),g}},{"../../lib":515,"../../lib/svg_text_utils":541,"./constants":620,"./convert_text_opts":621}],624:[function(e,B,V){var f=e("../../lib"),l=e("../../components/color").defaultLine,m=e("../domain").attributes,x=e("../font_attributes"),t=e("../../traces/scatter/attributes").textposition,a=e("../../plot_api/edit_types").overrideAll,i=e("../../plot_api/plot_template").templatedArray,r=e("./constants"),n=x({});n.family.dflt="Open Sans Regular, Arial Unicode MS Regular";var d=B.exports=a({_arrayAttrRegexps:[f.counterRegex("mapbox",".layers",!0)],domain:m({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:r.styleValuesMapbox.concat(r.styleValuesNonMapbox),dflt:r.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},layers:i("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:l},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:l}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:n,textposition:f.extendFlat({},t,{arrayOk:!1})}})},"plot","from-root");d.uirevision={valType:"any",editType:"none"}},{"../../components/color":367,"../../lib":515,"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../../traces/scatter/attributes":936,"../domain":593,"../font_attributes":594,"./constants":620}],625:[function(e,B,V){var f=e("../../lib"),l=e("../subplot_defaults"),m=e("../array_container_defaults"),x=e("./layout_attributes");B.exports=function(r,n,d){l(r,n,d,{type:"mapbox",attributes:x,handleDefaults:t,partition:"y",accessToken:n._mapboxAccessToken})};function t(i,r,n,d){n("accesstoken",d.accessToken),n("style"),n("center.lon"),n("center.lat"),n("zoom"),n("bearing"),n("pitch"),m(i,r,{name:"layers",handleItemDefaults:a}),r._input=i}function a(i,r){function n(b,v){return f.coerce(i,r,x.layers,b,v)}var d=n("visible");if(d){var s=n("sourcetype"),o=s==="raster"||s==="image";n("source"),n("sourceattribution"),s==="vector"&&n("sourcelayer"),s==="image"&&n("coordinates");var y;o&&(y="raster");var g=n("type",y);o&&g!=="raster"&&(g=r.type="raster",f.log("Source types *raster* and *image* must drawn *raster* layer type.")),n("below"),n("color"),n("opacity"),n("minzoom"),n("maxzoom"),g==="circle"&&n("circle.radius"),g==="line"&&(n("line.width"),n("line.dash")),g==="fill"&&n("fill.outlinecolor"),g==="symbol"&&(n("symbol.icon"),n("symbol.iconsize"),n("symbol.text"),f.coerceFont(n,"symbol.textfont"),n("symbol.textposition"),n("symbol.placement"))}}},{"../../lib":515,"../array_container_defaults":561,"../subplot_defaults":641,"./layout_attributes":624}],626:[function(e,B,V){var f=e("mapbox-gl/dist/mapbox-gl-unminified"),l=e("../../lib"),m=e("../../lib/geo_location_utils"),x=e("../../registry"),t=e("../cartesian/axes"),a=e("../../components/dragelement"),i=e("../../components/fx"),r=e("../../components/dragelement/helpers"),n=r.drawMode,d=r.selectMode,s=e("../../components/selections").prepSelect,o=e("../../components/selections").clearOutline,y=e("../../components/selections").clearSelectionsCache,g=e("../../components/selections").selectOnClick,b=e("./constants"),v=e("./layers");function _(p,w){this.id=w,this.gd=p;var h=p._fullLayout,D=p._context;this.container=h._glcontainer.node(),this.isStatic=D.staticPlot,this.uid=h._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(h),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var u=_.prototype;u.plot=function(p,w,h){var D=this,S=w[D.id];D.map&&S.accesstoken!==D.accessToken&&(D.map.remove(),D.map=null,D.styleObj=null,D.traceHash={},D.layerList=[]);var M;D.map?M=new Promise(function(L,R){D.updateMap(p,w,L,R)}):M=new Promise(function(L,R){D.createMap(p,w,L,R)}),h.push(M)},u.createMap=function(p,w,h,D){var S=this,M=w[S.id],L=S.styleObj=c(M.style);S.accessToken=M.accesstoken;var R=S.map=new f.Map({container:S.div,style:L.style,center:k(M.center),zoom:M.zoom,bearing:M.bearing,pitch:M.pitch,interactive:!S.isStatic,preserveDrawingBuffer:S.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new f.AttributionControl({compact:!0}));R._canvas.style.left="0px",R._canvas.style.top="0px",S.rejectOnError(D),S.isStatic||S.initFx(p,w);var z=[];z.push(new Promise(function(P){R.once("load",P)})),z=z.concat(m.fetchTraceGeoData(p)),Promise.all(z).then(function(){S.fillBelowLookup(p,w),S.updateData(p),S.updateLayout(w),S.resolveOnRender(h)}).catch(D)},u.updateMap=function(p,w,h,D){var S=this,M=S.map,L=w[this.id];S.rejectOnError(D);var R=[],z=c(L.style);JSON.stringify(S.styleObj)!==JSON.stringify(z)&&(S.styleObj=z,M.setStyle(z.style),S.traceHash={},R.push(new Promise(function(P){M.once("styledata",P)}))),R=R.concat(m.fetchTraceGeoData(p)),Promise.all(R).then(function(){S.fillBelowLookup(p,w),S.updateData(p),S.updateLayout(w),S.resolveOnRender(h)}).catch(D)},u.fillBelowLookup=function(p,w){var h=w[this.id],D=h.layers,S,M,L=this.belowLookup={},R=!1;for(S=0;S<p.length;S++){var z=p[S][0].trace,P=z._module;typeof z.below=="string"?M=z.below:P.getBelow&&(M=P.getBelow(z,this)),M===""&&(R=!0),L["trace-"+z.uid]=M||""}for(S=0;S<D.length;S++){var I=D[S];typeof I.below=="string"?M=I.below:R?M="traces":M="",L["layout-"+S]=M}var U={},O,G;for(O in L)M=L[O],U[M]?U[M].push(O):U[M]=[O];for(M in U){var $=U[M];if($.length>1)for(S=0;S<$.length;S++)O=$[S],O.indexOf("trace-")===0?(G=O.split("trace-")[1],this.traceHash[G]&&(this.traceHash[G].below=null)):O.indexOf("layout-")===0&&(G=O.split("layout-")[1],this.layerList[G]&&(this.layerList[G].below=null))}};var T={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};u.updateData=function(p){var w=this.traceHash,h,D,S,M,L=p.slice().sort(function(U,O){return T[U[0].trace.type]-T[O[0].trace.type]});for(S=0;S<L.length;S++){var R=L[S];D=R[0].trace,h=w[D.uid];var z=!1;h&&(h.type===D.type?(h.update(R),z=!0):h.dispose()),!z&&D._module&&(w[D.uid]=D._module.plot(this,R))}var P=Object.keys(w);t:for(S=0;S<P.length;S++){var I=P[S];for(M=0;M<p.length;M++)if(D=p[M][0].trace,I===D.uid)continue t;h=w[I],h.dispose(),delete w[I]}},u.updateLayout=function(p){var w=this.map,h=p[this.id];!this.dragging&&!this.wheeling&&(w.setCenter(k(h.center)),w.setZoom(h.zoom),w.setBearing(h.bearing),w.setPitch(h.pitch)),this.updateLayers(p),this.updateFramework(p),this.updateFx(p),this.map.resize(),this.gd._context._scrollZoom.mapbox?w.scrollZoom.enable():w.scrollZoom.disable()},u.resolveOnRender=function(p){var w=this.map;w.on("render",function h(){w.loaded()&&(w.off("render",h),setTimeout(p,10))})},u.rejectOnError=function(p){var w=this.map;function h(){p(new Error(b.mapOnErrorMsg))}w.once("error",h),w.once("style.error",h),w.once("source.error",h),w.once("tile.error",h),w.once("layer.error",h)},u.createFramework=function(p){var w=this,h=w.div=document.createElement("div");h.id=w.uid,h.style.position="absolute",w.container.appendChild(h),w.xaxis={_id:"x",c2p:function(D){return w.project(D).x}},w.yaxis={_id:"y",c2p:function(D){return w.project(D).y}},w.updateFramework(p),w.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},t.setConvert(w.mockAxis,p)},u.initFx=function(p,w){var h=this,D=h.gd,S=h.map;S.on("moveend",function(R){if(!!h.map){var z=D._fullLayout;if(R.originalEvent||h.wheeling){var P=z[h.id];x.call("_storeDirectGUIEdit",D.layout,z._preGUI,h.getViewEdits(P));var I=h.getView();P._input.center=P.center=I.center,P._input.zoom=P.zoom=I.zoom,P._input.bearing=P.bearing=I.bearing,P._input.pitch=P.pitch=I.pitch,D.emit("plotly_relayout",h.getViewEditsWithDerived(I))}R.originalEvent&&R.originalEvent.type==="mouseup"?h.dragging=!1:h.wheeling&&(h.wheeling=!1),z._rehover&&z._rehover()}}),S.on("wheel",function(){h.wheeling=!0}),S.on("mousemove",function(R){var z=h.div.getBoundingClientRect(),P=[R.originalEvent.offsetX,R.originalEvent.offsetY];R.target.getBoundingClientRect=function(){return z},h.xaxis.p2c=function(){return S.unproject(P).lng},h.yaxis.p2c=function(){return S.unproject(P).lat},D._fullLayout._rehover=function(){D._fullLayout._hoversubplot===h.id&&D._fullLayout[h.id]&&i.hover(D,R,h.id)},i.hover(D,R,h.id),D._fullLayout._hoversubplot=h.id});function M(){i.loneUnhover(w._hoverlayer)}S.on("dragstart",function(){h.dragging=!0,M()}),S.on("zoomstart",M),S.on("mouseout",function(){D._fullLayout._hoversubplot=null});function L(){var R=h.getView();D.emit("plotly_relayouting",h.getViewEditsWithDerived(R))}S.on("drag",L),S.on("zoom",L),S.on("dblclick",function(){var R=D._fullLayout[h.id];x.call("_storeDirectGUIEdit",D.layout,D._fullLayout._preGUI,h.getViewEdits(R));var z=h.viewInitial;S.setCenter(k(z.center)),S.setZoom(z.zoom),S.setBearing(z.bearing),S.setPitch(z.pitch);var P=h.getView();R._input.center=R.center=P.center,R._input.zoom=R.zoom=P.zoom,R._input.bearing=R.bearing=P.bearing,R._input.pitch=R.pitch=P.pitch,D.emit("plotly_doubleclick",null),D.emit("plotly_relayout",h.getViewEditsWithDerived(P))}),h.clearOutline=function(){y(h.dragOptions),o(h.dragOptions.gd)},h.onClickInPanFn=function(R){return function(z){var P=D._fullLayout.clickmode;P.indexOf("select")>-1&&g(z.originalEvent,D,[h.xaxis],[h.yaxis],h.id,R),P.indexOf("event")>-1&&i.click(D,z.originalEvent)}}},u.updateFx=function(p){var w=this,h=w.map,D=w.gd;if(w.isStatic)return;function S(z){var P=w.map.unproject(z);return[P.lng,P.lat]}var M=p.dragmode,L;L=function(z,P){if(P.isRect){var I=z.range={};I[w.id]=[S([P.xmin,P.ymin]),S([P.xmax,P.ymax])]}else{var U=z.lassoPoints={};U[w.id]=P.map(S)}};var R=w.dragOptions;w.dragOptions=l.extendDeep(R||{},{dragmode:p.dragmode,element:w.div,gd:D,plotinfo:{id:w.id,domain:p[w.id].domain,xaxis:w.xaxis,yaxis:w.yaxis,fillRangeItems:L},xaxes:[w.xaxis],yaxes:[w.yaxis],subplot:w.id}),h.off("click",w.onClickInPanHandler),d(M)||n(M)?(h.dragPan.disable(),h.on("zoomstart",w.clearSelect),w.dragOptions.prepFn=function(z,P,I){s(z,P,I,w.dragOptions,M)},a.init(w.dragOptions)):(h.dragPan.enable(),h.off("zoomstart",w.clearSelect),w.div.onmousedown=null,w.onClickInPanHandler=w.onClickInPanFn(w.dragOptions),h.on("click",w.onClickInPanHandler))},u.updateFramework=function(p){var w=p[this.id].domain,h=p._size,D=this.div.style;D.width=h.w*(w.x[1]-w.x[0])+"px",D.height=h.h*(w.y[1]-w.y[0])+"px",D.left=h.l+w.x[0]*h.w+"px",D.top=h.t+(1-w.y[1])*h.h+"px",this.xaxis._offset=h.l+w.x[0]*h.w,this.xaxis._length=h.w*(w.x[1]-w.x[0]),this.yaxis._offset=h.t+(1-w.y[1])*h.h,this.yaxis._length=h.h*(w.y[1]-w.y[0])},u.updateLayers=function(p){var w=p[this.id],h=w.layers,D=this.layerList,S;if(h.length!==D.length){for(S=0;S<D.length;S++)D[S].dispose();for(D=this.layerList=[],S=0;S<h.length;S++)D.push(v(this,S,h[S]))}else for(S=0;S<h.length;S++)D[S].update(h[S])},u.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},u.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()},u.setOptions=function(p,w,h){for(var D in h)this.map[w](p,D,h[D])},u.getMapLayers=function(){return this.map.getStyle().layers},u.addLayer=function(p,w){var h=this.map;if(typeof w=="string"){if(w===""){h.addLayer(p,w);return}for(var D=this.getMapLayers(),S=0;S<D.length;S++)if(w===D[S].id){h.addLayer(p,w);return}l.warn(["Trying to add layer with *below* value",w,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}h.addLayer(p)},u.project=function(p){return this.map.project(new f.LngLat(p[0],p[1]))},u.getView=function(){var p=this.map,w=p.getCenter(),h=w.lng,D=w.lat,S={lon:h,lat:D},M=p.getCanvas(),L=parseInt(M.style.width),R=parseInt(M.style.height);return{center:S,zoom:p.getZoom(),bearing:p.getBearing(),pitch:p.getPitch(),_derived:{coordinates:[p.unproject([0,0]).toArray(),p.unproject([L,0]).toArray(),p.unproject([L,R]).toArray(),p.unproject([0,R]).toArray()]}}},u.getViewEdits=function(p){for(var w=this.id,h=["center","zoom","bearing","pitch"],D={},S=0;S<h.length;S++){var M=h[S];D[w+"."+M]=p[M]}return D},u.getViewEditsWithDerived=function(p){var w=this.id,h=this.getViewEdits(p);return h[w+"._derived"]=p._derived,h};function c(p){var w={};return l.isPlainObject(p)?(w.id=p.id,w.style=p):typeof p=="string"?(w.id=p,b.styleValuesMapbox.indexOf(p)!==-1?w.style=A(p):b.stylesNonMapbox[p]?w.style=b.stylesNonMapbox[p]:w.style=p):(w.id=b.styleValueDflt,w.style=A(b.styleValueDflt)),w.transition={duration:0,delay:0},w}function A(p){return b.styleUrlPrefix+p+"-"+b.styleUrlSuffix}function k(p){return[p.lon,p.lat]}B.exports=_},{"../../components/dragelement":386,"../../components/dragelement/helpers":385,"../../components/fx":407,"../../components/selections":455,"../../lib":515,"../../lib/geo_location_utils":508,"../../registry":647,"../cartesian/axes":566,"./constants":620,"./layers":623,"mapbox-gl/dist/mapbox-gl-unminified":239}],627:[function(e,B,V){B.exports=function(f){var l=f.editType;return{t:{valType:"number",dflt:0,editType:l},r:{valType:"number",dflt:0,editType:l},b:{valType:"number",dflt:0,editType:l},l:{valType:"number",dflt:0,editType:l},editType:l}}},{}],628:[function(e,B,V){var f=e("@plotly/d3"),l=e("d3-time-format").timeFormatLocale,m=e("d3-format").formatLocale,x=e("fast-isnumeric"),t=e("../registry"),a=e("../plot_api/plot_schema"),i=e("../plot_api/plot_template"),r=e("../lib"),n=e("../components/color"),d=e("../constants/numerical").BADNUM,s=e("./cartesian/axis_ids"),o=e("../components/shapes/handle_outline").clearOutline,y=e("./animation_attributes"),g=e("./frame_attributes"),b=e("../plots/get_data").getModuleCalcData,v=r.relinkPrivateKeys,_=r._,u=B.exports={};r.extendFlat(u,t),u.attributes=e("./attributes"),u.attributes.type.values=u.allTypes,u.fontAttrs=e("./font_attributes"),u.layoutAttributes=e("./layout_attributes"),u.fontWeight="normal";var T=u.transformsRegistry,c=e("./command");u.executeAPICommand=c.executeAPICommand,u.computeAPICommandBindings=c.computeAPICommandBindings,u.manageCommandObserver=c.manageCommandObserver,u.hasSimpleAPICommandBindings=c.hasSimpleAPICommandBindings,u.redrawText=function(F){return F=r.getGraphDiv(F),new Promise(function(H){setTimeout(function(){!F._fullLayout||(t.getComponentMethod("annotations","draw")(F),t.getComponentMethod("legend","draw")(F),t.getComponentMethod("colorbar","draw")(F),H(u.previousPromises(F)))},300)})},u.resize=function(F){F=r.getGraphDiv(F);var H,et=new Promise(function(q,W){(!F||r.isHidden(F))&&W(new Error("Resize must be passed a displayed plot div element.")),F._redrawTimer&&clearTimeout(F._redrawTimer),F._resolveResize&&(H=F._resolveResize),F._resolveResize=q,F._redrawTimer=setTimeout(function(){if(!F.layout||F.layout.width&&F.layout.height||r.isHidden(F)){q(F);return}delete F.layout.width,delete F.layout.height;var K=F.changed;F.autoplay=!0,t.call("relayout",F,{autosize:!0}).then(function(){F.changed=K,F._resolveResize===q&&(delete F._resolveResize,q(F))})},100)});return H&&H(et),et},u.previousPromises=function(F){if((F._promises||[]).length)return Promise.all(F._promises).then(function(){F._promises=[]})},u.addLinks=function(F){if(!(!F._context.showLink&&!F._context.showSources)){var H=F._fullLayout,et=r.ensureSingle(H._paper,"text","js-plot-link-container",function(ot){ot.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:n.defaultLine,"pointer-events":"all"}).each(function(){var ct=f.select(this);ct.append("tspan").classed("js-link-to-tool",!0),ct.append("tspan").classed("js-link-spacer",!0),ct.append("tspan").classed("js-sourcelinks",!0)})}),q=et.node(),W={y:H._paper.attr("height")-9};document.body.contains(q)&&q.getComputedTextLength()>=H.width-20?(W["text-anchor"]="start",W.x=5):(W["text-anchor"]="end",W.x=H._paper.attr("width")-7),et.attr(W);var K=et.select(".js-link-to-tool"),nt=et.select(".js-link-spacer"),it=et.select(".js-sourcelinks");F._context.showSources&&F._context.showSources(F),F._context.showLink&&A(F,K),nt.text(K.text()&&it.text()?" - ":"")}};function A(F,H){H.text("");var et=H.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(F._context.linkText+" "+String.fromCharCode(187));if(F._context.sendData)et.on("click",function(){u.sendDataToCloud(F)});else{var q=window.location.pathname.split("/"),W=window.location.search;et.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+q[2].split(".")[0]+"/"+q[1]+W})}}u.sendDataToCloud=function(F){var H=(window.PLOTLYENV||{}).BASE_URL||F._context.plotlyServerURL;if(!!H){F.emit("plotly_beforeexport");var et=f.select(F).append("div").attr("id","hiddenform").style("display","none"),q=et.append("form").attr({action:H+"/external",method:"post",target:"_blank"}),W=q.append("input").attr({type:"text",name:"data"});return W.node().value=u.graphJson(F,!1,"keepdata"),q.node().submit(),et.remove(),F.emit("plotly_afterexport"),!1}};var k=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],p=["year","month","dayMonth","dayMonthYear"];u.supplyDefaults=function(F,H){var et=H&&H.skipUpdateCalc,q=F._fullLayout||{};if(q._skipDefaults){delete q._skipDefaults;return}var W=F._fullLayout={},K=F.layout||{},nt=F._fullData||[],it=F._fullData=[],ot=F.data||[],ct=F.calcdata||[],bt=F._context||{},ut;F._transitionData||u.createTransitionData(F),W._dfltTitle={plot:_(F,"Click to enter Plot title"),x:_(F,"Click to enter X axis title"),y:_(F,"Click to enter Y axis title"),colorbar:_(F,"Click to enter Colorscale title"),annotation:_(F,"new text")},W._traceWord=_(F,"trace");var pt=D(F,k);if(W._mapboxAccessToken=bt.mapboxAccessToken,q._initialAutoSizeIsDone){var yt=q.width,Tt=q.height;u.supplyLayoutGlobalDefaults(K,W,pt),K.width||(W.width=yt),K.height||(W.height=Tt),u.sanitizeMargins(W)}else{u.supplyLayoutGlobalDefaults(K,W,pt);var kt=!K.width||!K.height,zt=W.autosize,Rt=bt.autosizable,Gt=kt&&(zt||Rt);Gt?u.plotAutoSize(F,K,W):kt&&u.sanitizeMargins(W),!zt&&kt&&(K.width=W.width,K.height=W.height)}W._d3locale=S(pt,W.separators),W._extraFormat=D(F,p),W._initialAutoSizeIsDone=!0,W._dataLength=ot.length,W._modules=[],W._visibleModules=[],W._basePlotModules=[];var wt=W._subplots=h(),It=W._splomAxes={x:{},y:{}},$t=W._splomSubplots={};W._splomGridDflt={},W._scatterStackOpts={},W._firstScatter={},W._alignmentOpts={},W._colorAxes={},W._requestRangeslider={},W._traceUids=w(nt,ot),W._globalTransforms=(F._context||{}).globalTransforms,u.supplyDataDefaults(ot,it,K,W);var Qt=Object.keys(It.x),Nt=Object.keys(It.y);if(Qt.length>1&&Nt.length>1){for(t.getComponentMethod("grid","sizeDefaults")(K,W),ut=0;ut<Qt.length;ut++)r.pushUnique(wt.xaxis,Qt[ut]);for(ut=0;ut<Nt.length;ut++)r.pushUnique(wt.yaxis,Nt[ut]);for(var Pt in $t)r.pushUnique(wt.cartesian,Pt)}if(W._has=u._hasPlotType.bind(W),nt.length===it.length)for(ut=0;ut<it.length;ut++)v(it[ut],nt[ut]);u.supplyLayoutModuleDefaults(K,W,it,F._transitionData);var Yt=W._visibleModules,ve=[];for(ut=0;ut<Yt.length;ut++){var Re=Yt[ut].crossTraceDefaults;Re&&r.pushUnique(ve,Re)}for(ut=0;ut<ve.length;ut++)ve[ut](it,W);W._hasOnlyLargeSploms=W._basePlotModules.length===1&&W._basePlotModules[0].name==="splom"&&Qt.length>15&&Nt.length>15&&W.shapes.length===0&&W.images.length===0,u.linkSubplots(it,W,nt,q),u.cleanPlot(it,W,nt,q);var ir=!!(q._has&&q._has("gl2d")),Ie=!!(W._has&&W._has("gl2d")),Be=!!(q._has&&q._has("cartesian")),Ye=!!(W._has&&W._has("cartesian")),ze=Be||ir,Ee=Ye||Ie;ze&&!Ee?q._bgLayer.remove():Ee&&!ze&&(W._shouldCreateBgLayer=!0),q._zoomlayer&&!F._dragging&&o({_fullLayout:q}),M(it,W),v(W,q),t.getComponentMethod("colorscale","crossTraceDefaults")(it,W),W._preGUI||(W._preGUI={}),W._tracePreGUI||(W._tracePreGUI={});var Wt=W._tracePreGUI,ee={},Xt;for(Xt in Wt)ee[Xt]="old";for(ut=0;ut<it.length;ut++)Xt=it[ut]._fullInput.uid,ee[Xt]||(Wt[Xt]={}),ee[Xt]="new";for(Xt in ee)ee[Xt]==="old"&&delete Wt[Xt];I(W),t.getComponentMethod("rangeslider","makeData")(W),!et&&ct.length===it.length&&u.supplyDefaultsUpdateCalc(ct,it)},u.supplyDefaultsUpdateCalc=function(F,H){for(var et=0;et<H.length;et++){var q=H[et],W=(F[et]||[])[0];if(W&&W.trace){var K=W.trace;if(K._hasCalcTransform){var nt=K._arrayAttrs,it,ot,ct;for(it=0;it<nt.length;it++)ot=nt[it],ct=r.nestedProperty(K,ot).get().slice(),r.nestedProperty(q,ot).set(ct)}W.trace=q}}};function w(F,H){var et=H.length,q=[],W,K;for(W=0;W<F.length;W++){var nt=F[W]._fullInput;nt!==K&&q.push(nt),K=nt}var it=q.length,ot=new Array(et),ct={};function bt(yt,Tt){ot[Tt]=yt,ct[yt]=1}function ut(yt,Tt){if(yt&&typeof yt=="string"&&!ct[yt])return bt(yt,Tt),!0}for(W=0;W<et;W++){var pt=H[W].uid;typeof pt=="number"&&(pt=String(pt)),!ut(pt,W)&&(W<it&&ut(q[W].uid,W)||bt(r.randstr(ct),W))}return ot}function h(){var F=t.collectableSubplotTypes,H={},et,q;if(!F){F=[];var W=t.subplotsRegistry;for(var K in W){var nt=W[K],it=nt.attr;if(it&&(F.push(K),Array.isArray(it)))for(q=0;q<it.length;q++)r.pushUnique(F,it[q])}}for(et=0;et<F.length;et++)H[F[et]]=[];return H}function D(F,H){var et=F._context.locale;et||(et="en-US");var q=!1,W={};function K(ut){for(var pt=!0,yt=0;yt<H.length;yt++){var Tt=H[yt];W[Tt]||(ut[Tt]?W[Tt]=ut[Tt]:pt=!1)}pt&&(q=!0)}for(var nt=0;nt<2;nt++){for(var it=F._context.locales,ot=0;ot<2;ot++){var ct=(it[et]||{}).format;if(ct&&(K(ct),q))break;it=t.localeRegistry}var bt=et.split("-")[0];if(q||bt===et)break;et=bt}return q||K(t.localeRegistry.en.format),W}function S(F,H){return F.decimal=H.charAt(0),F.thousands=H.charAt(1),{numberFormat:function(et){try{et=m(F).format(r.adjustFormat(et))}catch{return r.warnBadFormat(et),r.noFormat}return et},timeFormat:l(F).utcFormat}}function M(F,H){var et,q=[];H.meta&&(et=H._meta={meta:H.meta,layout:{meta:H.meta}});for(var W=0;W<F.length;W++){var K=F[W];K.meta?q[K.index]=K._meta={meta:K.meta}:H.meta&&(K._meta={meta:H.meta}),H.meta&&(K._meta.layout={meta:H.meta})}q.length&&(et||(et=H._meta={}),et.data=q)}u.createTransitionData=function(F){F._transitionData||(F._transitionData={}),F._transitionData._frames||(F._transitionData._frames=[]),F._transitionData._frameHash||(F._transitionData._frameHash={}),F._transitionData._counter||(F._transitionData._counter=0),F._transitionData._interruptCallbacks||(F._transitionData._interruptCallbacks=[])},u._hasPlotType=function(F){var H,et=this._basePlotModules||[];for(H=0;H<et.length;H++)if(et[H].name===F)return!0;var q=this._modules||[];for(H=0;H<q.length;H++){var W=q[H].name;if(W===F)return!0;var K=t.modules[W];if(K&&K.categories[F])return!0}return!1},u.cleanPlot=function(F,H,et,q){var W,K,nt=q._basePlotModules||[];for(W=0;W<nt.length;W++){var it=nt[W];it.clean&&it.clean(F,H,et,q)}var ot=q._has&&q._has("gl"),ct=H._has&&H._has("gl");ot&&!ct&&q._glcontainer!==void 0&&(q._glcontainer.selectAll(".gl-canvas").remove(),q._glcontainer.selectAll(".no-webgl").remove(),q._glcanvas=null);var bt=!!q._infolayer;t:for(W=0;W<et.length;W++){var ut=et[W],pt=ut.uid;for(K=0;K<F.length;K++){var yt=F[K];if(pt===yt.uid)continue t}bt&&q._infolayer.select(".cb"+pt).remove()}},u.linkSubplots=function(F,H,et,q){var W,K,nt=q._plots||{},it=H._plots={},ot=H._subplots,ct={_fullData:F,_fullLayout:H},bt=ot.cartesian.concat(ot.gl2d||[]);for(W=0;W<bt.length;W++){var ut=bt[W],pt=nt[ut],yt=s.getFromId(ct,ut,"x"),Tt=s.getFromId(ct,ut,"y"),kt;for(pt?kt=it[ut]=pt:(kt=it[ut]={},kt.id=ut),yt._counterAxes.push(Tt._id),Tt._counterAxes.push(yt._id),yt._subplotsWith.push(ut),Tt._subplotsWith.push(ut),kt.xaxis=yt,kt.yaxis=Tt,kt._hasClipOnAxisFalse=!1,K=0;K<F.length;K++){var zt=F[K];if(zt.xaxis===kt.xaxis._id&&zt.yaxis===kt.yaxis._id&&zt.cliponaxis===!1){kt._hasClipOnAxisFalse=!0;break}}}var Rt=s.list(ct,null,!0),Gt;for(W=0;W<Rt.length;W++){Gt=Rt[W];var wt=null;Gt.overlaying&&(wt=s.getFromId(ct,Gt.overlaying),wt&&wt.overlaying&&(Gt.overlaying=!1,wt=null)),Gt._mainAxis=wt||Gt,wt&&(Gt.domain=wt.domain.slice()),Gt._anchorAxis=Gt.anchor==="free"?null:s.getFromId(ct,Gt.anchor)}for(W=0;W<Rt.length;W++)if(Gt=Rt[W],Gt._counterAxes.sort(s.idSort),Gt._subplotsWith.sort(r.subplotSort),Gt._mainSubplot=L(Gt,H),Gt._counterAxes.length&&(Gt.spikemode&&Gt.spikemode.indexOf("across")!==-1||Gt.automargin&&Gt.mirror&&Gt.anchor!=="free"||t.getComponentMethod("rangeslider","isVisible")(Gt))){var It=1,$t=0;for(K=0;K<Gt._counterAxes.length;K++){var Qt=s.getFromId(ct,Gt._counterAxes[K]);It=Math.min(It,Qt.domain[0]),$t=Math.max($t,Qt.domain[1])}It<$t&&(Gt._counterDomainMin=It,Gt._counterDomainMax=$t)}};function L(F,H){var et={_fullLayout:H},q=F._id.charAt(0)==="x",W=F._mainAxis._anchorAxis,K="",nt="",it="";if(W&&(it=W._mainAxis._id,K=q?F._id+it:it+F._id),!K||!H._plots[K]){K="";for(var ot=F._counterAxes,ct=0;ct<ot.length;ct++){var bt=ot[ct],ut=q?F._id+bt:bt+F._id;nt||(nt=ut);var pt=s.getFromId(et,bt);if(it&&pt.overlaying===it){K=ut;break}}}return K||nt}u.clearExpandedTraceDefaultColors=function(F){var H,et,q;function W(nt,it,ot,ct){et[ct]=it,et.length=ct+1,nt.valType==="color"&&nt.dflt===void 0&&H.push(et.join("."))}for(et=[],H=F._module._colorAttrs,H||(F._module._colorAttrs=H=[],a.crawl(F._module.attributes,W)),q=0;q<H.length;q++){var K=r.nestedProperty(F,"_input."+H[q]);K.get()||r.nestedProperty(F,H[q]).set(null)}},u.supplyDataDefaults=function(F,H,et,q){var W=q._modules,K=q._visibleModules,nt=q._basePlotModules,it=0,ot=0,ct,bt,ut;q._transformModules=[];function pt(Nt){H.push(Nt);var Pt=Nt._module;!Pt||(r.pushUnique(W,Pt),Nt.visible===!0&&r.pushUnique(K,Pt),r.pushUnique(nt,Nt._module.basePlotModule),it++,Nt._input.visible!==!1&&ot++)}var yt={},Tt=[],kt=(et.template||{}).data||{},zt=i.traceTemplater(kt);for(ct=0;ct<F.length;ct++){if(ut=F[ct],bt=zt.newTrace(ut),bt.uid=q._traceUids[ct],u.supplyTraceDefaults(ut,bt,ot,q,ct),bt.index=ct,bt._input=ut,bt._expandedIndex=it,bt.transforms&&bt.transforms.length)for(var Rt=ut.visible!==!1&&bt.visible===!1,Gt=z(bt,H,et,q),wt=0;wt<Gt.length;wt++){var It=Gt[wt],$t={_template:bt._template,type:bt.type,uid:bt.uid+wt};Rt&&It.visible===!1&&delete It.visible,u.supplyTraceDefaults(It,$t,it,q,ct),v($t,It),$t.index=ct,$t._input=ut,$t._fullInput=bt,$t._expandedIndex=it,$t._expandedInput=It,pt($t)}else bt._fullInput=bt,bt._expandedInput=bt,pt(bt);t.traceIs(bt,"carpetAxis")&&(yt[bt.carpet]=bt),t.traceIs(bt,"carpetDependent")&&Tt.push(ct)}for(ct=0;ct<Tt.length;ct++)if(bt=H[Tt[ct]],!!bt.visible){var Qt=yt[bt.carpet];if(bt._carpet=Qt,!Qt||!Qt.visible){bt.visible=!1;continue}bt.xaxis=Qt.xaxis,bt.yaxis=Qt.yaxis}},u.supplyAnimationDefaults=function(F){F=F||{};var H,et={};function q(W,K){return r.coerce(F||{},et,y,W,K)}if(q("mode"),q("direction"),q("fromcurrent"),Array.isArray(F.frame))for(et.frame=[],H=0;H<F.frame.length;H++)et.frame[H]=u.supplyAnimationFrameDefaults(F.frame[H]||{});else et.frame=u.supplyAnimationFrameDefaults(F.frame||{});if(Array.isArray(F.transition))for(et.transition=[],H=0;H<F.transition.length;H++)et.transition[H]=u.supplyAnimationTransitionDefaults(F.transition[H]||{});else et.transition=u.supplyAnimationTransitionDefaults(F.transition||{});return et},u.supplyAnimationFrameDefaults=function(F){var H={};function et(q,W){return r.coerce(F||{},H,y.frame,q,W)}return et("duration"),et("redraw"),H},u.supplyAnimationTransitionDefaults=function(F){var H={};function et(q,W){return r.coerce(F||{},H,y.transition,q,W)}return et("duration"),et("easing"),H},u.supplyFrameDefaults=function(F){var H={};function et(q,W){return r.coerce(F,H,g,q,W)}return et("group"),et("name"),et("traces"),et("baseframe"),et("data"),et("layout"),H},u.supplyTraceDefaults=function(F,H,et,q,W){var K=q.colorway||n.defaults,nt=K[et%K.length],it;function ot(Gt,wt){return r.coerce(F,H,u.attributes,Gt,wt)}var ct=ot("visible");ot("type"),ot("name",q._traceWord+" "+W),ot("uirevision",q.uirevision);var bt=u.getModule(H);if(H._module=bt,bt){var ut=bt.basePlotModule,pt=ut.attr,yt=ut.attributes;if(pt&&yt){var Tt=q._subplots,kt="";if(ct||ut.name!=="gl2d"){if(Array.isArray(pt))for(it=0;it<pt.length;it++){var zt=pt[it],Rt=r.coerce(F,H,yt,zt);Tt[zt]&&r.pushUnique(Tt[zt],Rt),kt+=Rt}else kt=r.coerce(F,H,yt,pt);Tt[ut.name]&&r.pushUnique(Tt[ut.name],kt)}}}return ct&&(ot("customdata"),ot("ids"),ot("meta"),t.traceIs(H,"showLegend")?(r.coerce(F,H,bt.attributes.showlegend?bt.attributes:u.attributes,"showlegend"),ot("legendgroup"),ot("legendgrouptitle.text"),ot("legendrank"),H._dfltShowLegend=!0):H._dfltShowLegend=!1,bt&&bt.supplyDefaults(F,H,nt,q),t.traceIs(H,"noOpacity")||ot("opacity"),t.traceIs(H,"notLegendIsolatable")&&(H.visible=!!H.visible),t.traceIs(H,"noHover")||(H.hovertemplate||r.coerceHoverinfo(F,H,q),H.type!=="parcats"&&t.getComponentMethod("fx","supplyDefaults")(F,H,nt,q)),bt&&bt.selectPoints&&ot("selectedpoints"),u.supplyTransformDefaults(F,H,q)),H};function R(F){var H=F.transforms;if(Array.isArray(H)&&H.length)for(var et=0;et<H.length;et++){var q=H[et],W=q._module||T[q.type];if(W&&W.makesData)return!0}return!1}u.hasMakesDataTransform=R,u.supplyTransformDefaults=function(F,H,et){if(!!(H._length||R(F))){var q=et._globalTransforms||[],W=et._transformModules||[];if(!(!Array.isArray(F.transforms)&&q.length===0))for(var K=F.transforms||[],nt=q.concat(K),it=H.transforms=[],ot=0;ot<nt.length;ot++){var ct=nt[ot],bt=ct.type,ut=T[bt],pt,yt=!(ct._module&&ct._module===ut),Tt=ut&&typeof ut.transform=="function";ut||r.warn("Unrecognized transform type "+bt+"."),ut&&ut.supplyDefaults&&(yt||Tt)?(pt=ut.supplyDefaults(ct,H,et,F),pt.type=bt,pt._module=ut,r.pushUnique(W,ut)):pt=r.extendFlat({},ct),it.push(pt)}}};function z(F,H,et,q){for(var W=F.transforms,K=[F],nt=0;nt<W.length;nt++){var it=W[nt],ot=T[it.type];ot&&ot.transform&&(K=ot.transform(K,{transform:it,fullTrace:F,fullData:H,layout:et,fullLayout:q,transformIndex:nt}))}return K}u.supplyLayoutGlobalDefaults=function(F,H,et){function q(ct,bt){return r.coerce(F,H,u.layoutAttributes,ct,bt)}var W=F.template;r.isPlainObject(W)&&(H.template=W,H._template=W.layout,H._dataTemplate=W.data),q("autotypenumbers");var K=r.coerceFont(q,"font"),nt=K.size;r.coerceFont(q,"title.font",r.extendFlat({},K,{size:Math.round(nt*1.4)})),q("title.text",H._dfltTitle.plot),q("title.xref"),q("title.yref"),q("title.x"),q("title.y"),q("title.xanchor"),q("title.yanchor"),q("title.pad.t"),q("title.pad.r"),q("title.pad.b"),q("title.pad.l");var it=q("uniformtext.mode");it&&q("uniformtext.minsize"),q("autosize",!(F.width&&F.height)),q("width"),q("height"),q("margin.l"),q("margin.r"),q("margin.t"),q("margin.b"),q("margin.pad"),q("margin.autoexpand"),F.width&&F.height&&u.sanitizeMargins(H),t.getComponentMethod("grid","sizeDefaults")(F,H),q("paper_bgcolor"),q("separators",et.decimal+et.thousands),q("hidesources"),q("colorway"),q("datarevision");var ot=q("uirevision");q("editrevision",ot),q("selectionrevision",ot),t.getComponentMethod("modebar","supplyLayoutDefaults")(F,H),t.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(F,H,q),t.getComponentMethod("selections","supplyDrawNewSelectionDefaults")(F,H,q),q("meta"),r.isPlainObject(F.transition)&&(q("transition.duration"),q("transition.easing"),q("transition.ordering")),t.getComponentMethod("calendars","handleDefaults")(F,H,"calendar"),t.getComponentMethod("fx","supplyLayoutGlobalDefaults")(F,H,q)};function P(F){return typeof F=="string"&&F.substr(F.length-2)==="px"&&parseFloat(F)}u.plotAutoSize=function(H,et,q){var W=H._context||{},K=W.frameMargins,nt,it,ot=r.isPlotDiv(H);if(ot&&H.emit("plotly_autosize"),W.fillFrame)nt=window.innerWidth,it=window.innerHeight,document.body.style.overflow="hidden";else{var ct=ot?window.getComputedStyle(H):{};if(nt=P(ct.width)||P(ct.maxWidth)||q.width,it=P(ct.height)||P(ct.maxHeight)||q.height,x(K)&&K>0){var bt=1-2*K;nt=Math.round(bt*nt),it=Math.round(bt*it)}}var ut=u.layoutAttributes.width.min,pt=u.layoutAttributes.height.min;nt<ut&&(nt=ut),it<pt&&(it=pt);var yt=!et.width&&Math.abs(q.width-nt)>1,Tt=!et.height&&Math.abs(q.height-it)>1;(Tt||yt)&&(yt&&(q.width=nt),Tt&&(q.height=it)),H._initialAutoSize||(H._initialAutoSize={width:nt,height:it}),u.sanitizeMargins(q)},u.supplyLayoutModuleDefaults=function(F,H,et,q){var W=t.componentsRegistry,K=H._basePlotModules,nt,it,ot,ct=t.subplotsRegistry.cartesian;for(nt in W)ot=W[nt],ot.includeBasePlot&&ot.includeBasePlot(F,H);K.length||K.push(ct),H._has("cartesian")&&(t.getComponentMethod("grid","contentDefaults")(F,H),ct.finalizeSubplots(F,H));for(var bt in H._subplots)H._subplots[bt].sort(r.subplotSort);for(it=0;it<K.length;it++)ot=K[it],ot.supplyLayoutDefaults&&ot.supplyLayoutDefaults(F,H,et);var ut=H._modules;for(it=0;it<ut.length;it++)ot=ut[it],ot.supplyLayoutDefaults&&ot.supplyLayoutDefaults(F,H,et);var pt=H._transformModules;for(it=0;it<pt.length;it++)ot=pt[it],ot.supplyLayoutDefaults&&ot.supplyLayoutDefaults(F,H,et,q);for(nt in W)ot=W[nt],ot.supplyLayoutDefaults&&ot.supplyLayoutDefaults(F,H,et)},u.purge=function(F){var H=F._fullLayout||{};H._glcontainer!==void 0&&(H._glcontainer.selectAll(".gl-canvas").remove(),H._glcontainer.remove(),H._glcanvas=null),H._modeBar&&H._modeBar.destroy(),F._transitionData&&(F._transitionData._interruptCallbacks&&(F._transitionData._interruptCallbacks.length=0),F._transitionData._animationRaf&&window.cancelAnimationFrame(F._transitionData._animationRaf)),r.clearThrottle(),r.clearResponsive(F),delete F.data,delete F.layout,delete F._fullData,delete F._fullLayout,delete F.calcdata,delete F.empty,delete F.fid,delete F.undoqueue,delete F.undonum,delete F.autoplay,delete F.changed,delete F._promises,delete F._redrawTimer,delete F._hmlumcount,delete F._hmpixcount,delete F._transitionData,delete F._transitioning,delete F._initialAutoSize,delete F._transitioningWithDuration,delete F._dragging,delete F._dragged,delete F._dragdata,delete F._hoverdata,delete F._snapshotInProgress,delete F._editing,delete F._mouseDownTime,delete F._legendMouseDownTime,F.removeAllListeners&&F.removeAllListeners()},u.style=function(F){var H=F._fullLayout._visibleModules,et=[],q;for(q=0;q<H.length;q++){var W=H[q];W.style&&r.pushUnique(et,W.style)}for(q=0;q<et.length;q++)et[q](F)},u.sanitizeMargins=function(F){if(!(!F||!F.margin)){var H=F.width,et=F.height,q=F.margin,W=H-(q.l+q.r),K=et-(q.t+q.b),nt;W<0&&(nt=(H-1)/(q.l+q.r),q.l=Math.floor(nt*q.l),q.r=Math.floor(nt*q.r)),K<0&&(nt=(et-1)/(q.t+q.b),q.t=Math.floor(nt*q.t),q.b=Math.floor(nt*q.b))}},u.clearAutoMarginIds=function(F){F._fullLayout._pushmarginIds={}},u.allowAutoMargin=function(F,H){F._fullLayout._pushmarginIds[H]=1};function I(F){var H=F.margin;if(!F._size){var et=F._size={l:Math.round(H.l),r:Math.round(H.r),t:Math.round(H.t),b:Math.round(H.b),p:Math.round(H.pad)};et.w=Math.round(F.width)-et.l-et.r,et.h=Math.round(F.height)-et.t-et.b}F._pushmargin||(F._pushmargin={}),F._pushmarginIds||(F._pushmarginIds={})}var U=2,O=2,G=64,$=64;u.autoMargin=function(F,H,et){var q=F._fullLayout,W=q.width,K=q.height,nt=q.margin,it=r.constrain(W-nt.l-nt.r,U,G),ot=r.constrain(K-nt.t-nt.b,O,$),ct=Math.max(0,W-it),bt=Math.max(0,K-ot),ut=q._pushmargin,pt=q._pushmarginIds;if(nt.autoexpand!==!1){if(!et)delete ut[H],delete pt[H];else{var yt=et.pad;if(yt===void 0&&(yt=Math.min(12,nt.l,nt.r,nt.t,nt.b)),ct){var Tt=(et.l+et.r)/ct;Tt>1&&(et.l/=Tt,et.r/=Tt)}if(bt){var kt=(et.t+et.b)/bt;kt>1&&(et.t/=kt,et.b/=kt)}var zt=et.xl!==void 0?et.xl:et.x,Rt=et.xr!==void 0?et.xr:et.x,Gt=et.yt!==void 0?et.yt:et.y,wt=et.yb!==void 0?et.yb:et.y;ut[H]={l:{val:zt,size:et.l+yt},r:{val:Rt,size:et.r+yt},b:{val:wt,size:et.b+yt},t:{val:Gt,size:et.t+yt}},pt[H]=1}if(!q._replotting)return u.doAutoMargin(F)}},u.doAutoMargin=function(F){var H=F._fullLayout,et=H.width,q=H.height;H._size||(H._size={}),I(H);var W=H._size,K=H.margin,nt=r.extendFlat({},W),it=K.l,ot=K.r,ct=K.t,bt=K.b,ut=H._pushmargin,pt=H._pushmarginIds;if(H.margin.autoexpand!==!1){for(var yt in ut)pt[yt]||delete ut[yt];ut.base={l:{val:0,size:it},r:{val:1,size:ot},t:{val:1,size:ct},b:{val:0,size:bt}};for(var Tt in ut){var kt=ut[Tt].l||{},zt=ut[Tt].b||{},Rt=kt.val,Gt=kt.size,wt=zt.val,It=zt.size;for(var $t in ut){if(x(Gt)&&ut[$t].r){var Qt=ut[$t].r.val,Nt=ut[$t].r.size;if(Qt>Rt){var Pt=(Gt*Qt+(Nt-et)*Rt)/(Qt-Rt),Yt=(Nt*(1-Rt)+(Gt-et)*(1-Qt))/(Qt-Rt);Pt+Yt>it+ot&&(it=Pt,ot=Yt)}}if(x(It)&&ut[$t].t){var ve=ut[$t].t.val,Re=ut[$t].t.size;if(ve>wt){var ir=(It*ve+(Re-q)*wt)/(ve-wt),Ie=(Re*(1-wt)+(It-q)*(1-ve))/(ve-wt);ir+Ie>bt+ct&&(bt=ir,ct=Ie)}}}}}var Be=r.constrain(et-K.l-K.r,U,G),Ye=r.constrain(q-K.t-K.b,O,$),ze=Math.max(0,et-Be),Ee=Math.max(0,q-Ye);if(ze){var Wt=(it+ot)/ze;Wt>1&&(it/=Wt,ot/=Wt)}if(Ee){var ee=(bt+ct)/Ee;ee>1&&(bt/=ee,ct/=ee)}if(W.l=Math.round(it),W.r=Math.round(ot),W.t=Math.round(ct),W.b=Math.round(bt),W.p=Math.round(K.pad),W.w=Math.round(et)-W.l-W.r,W.h=Math.round(q)-W.t-W.b,!H._replotting&&u.didMarginChange(nt,W)){"_redrawFromAutoMarginCount"in H?H._redrawFromAutoMarginCount++:H._redrawFromAutoMarginCount=1;var Xt=3*(1+Object.keys(pt).length);if(H._redrawFromAutoMarginCount<Xt)return t.call("_doPlot",F);H._size=nt,r.warn("Too many auto-margin redraws.")}tt(F)};function tt(F){var H=s.list(F,"",!0);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(et){for(var q=0;q<H.length;q++){var W=H[q][et];W&&W()}})}var Z=["l","r","t","b","p","w","h"];u.didMarginChange=function(F,H){for(var et=0;et<Z.length;et++){var q=Z[et],W=F[q],K=H[q];if(!x(W)||Math.abs(K-W)>1)return!0}return!1},u.graphJson=function(F,H,et,q,W,K){(W&&H&&!F._fullData||W&&!H&&!F._fullLayout)&&u.supplyDefaults(F);var nt=W?F._fullData:F.data,it=W?F._fullLayout:F.layout,ot=(F._transitionData||{})._frames;function ct(pt,yt){if(typeof pt=="function")return yt?"_function_":null;if(r.isPlainObject(pt)){var Tt={},kt;return Object.keys(pt).sort().forEach(function(zt){if(["_","["].indexOf(zt.charAt(0))===-1){if(typeof pt[zt]=="function"){yt&&(Tt[zt]="_function");return}if(et==="keepdata"){if(zt.substr(zt.length-3)==="src")return}else if(et==="keepstream"){if(kt=pt[zt+"src"],typeof kt=="string"&&kt.indexOf(":")>0&&!r.isPlainObject(pt.stream))return}else if(et!=="keepall"&&(kt=pt[zt+"src"],typeof kt=="string"&&kt.indexOf(":")>0))return;Tt[zt]=ct(pt[zt],yt)}}),Tt}return Array.isArray(pt)?pt.map(function(zt){return ct(zt,yt)}):r.isTypedArray(pt)?r.simpleMap(pt,r.identity):r.isJSDate(pt)?r.ms2DateTimeLocal(+pt):pt}var bt={data:(nt||[]).map(function(pt){var yt=ct(pt);return H&&delete yt.fit,yt})};if(!H&&(bt.layout=ct(it),W)){var ut=it._size;bt.layout.computed={margin:{b:ut.b,l:ut.l,r:ut.r,t:ut.t}}}return ot&&(bt.frames=ct(ot)),K&&(bt.config=ct(F._context,!0)),q==="object"?bt:JSON.stringify(bt)},u.modifyFrames=function(F,H){var et,q,W,K=F._transitionData._frames,nt=F._transitionData._frameHash;for(et=0;et<H.length;et++)switch(q=H[et],q.type){case"replace":W=q.value;var it=(K[q.index]||{}).name,ot=W.name;K[q.index]=nt[ot]=W,ot!==it&&(delete nt[it],nt[ot]=W);break;case"insert":W=q.value,nt[W.name]=W,K.splice(q.index,0,W);break;case"delete":W=K[q.index],delete nt[W.name],K.splice(q.index,1);break}return Promise.resolve()},u.computeFrame=function(F,H){var et=F._transitionData._frameHash,q,W,K,nt;if(!H)throw new Error("computeFrame must be given a string frame name");var it=et[H.toString()];if(!it)return!1;for(var ot=[it],ct=[it.name];it.baseframe&&(it=et[it.baseframe.toString()])&&ct.indexOf(it.name)===-1;)ot.push(it),ct.push(it.name);for(var bt={};it=ot.pop();)if(it.layout&&(bt.layout=u.extendLayout(bt.layout,it.layout)),it.data){if(bt.data||(bt.data=[]),W=it.traces,!W)for(W=[],q=0;q<it.data.length;q++)W[q]=q;for(bt.traces||(bt.traces=[]),q=0;q<it.data.length;q++)K=W[q],K!=null&&(nt=bt.traces.indexOf(K),nt===-1&&(nt=bt.data.length,bt.traces[nt]=K),bt.data[nt]=u.extendTrace(bt.data[nt],it.data[q]))}return bt},u.recomputeFrameHash=function(F){for(var H=F._transitionData._frameHash={},et=F._transitionData._frames,q=0;q<et.length;q++){var W=et[q];W&&W.name&&(H[W.name]=W)}},u.extendObjectWithContainers=function(F,H,et){var q,W,K,nt,it,ot,ct,bt,ut=r.extendDeepNoArrays({},H||{}),pt=r.expandObjectPaths(ut),yt={};if(et&&et.length)for(K=0;K<et.length;K++)q=r.nestedProperty(pt,et[K]),W=q.get(),W===void 0?r.nestedProperty(yt,et[K]).set(null):(q.set(null),r.nestedProperty(yt,et[K]).set(W));if(F=r.extendDeepNoArrays(F||{},pt),et&&et.length){for(K=0;K<et.length;K++)if(it=r.nestedProperty(yt,et[K]),ct=it.get(),!!ct){for(ot=r.nestedProperty(F,et[K]),bt=ot.get(),Array.isArray(bt)||(bt=[],ot.set(bt)),nt=0;nt<ct.length;nt++){var Tt=ct[nt];Tt===null?bt[nt]=null:bt[nt]=u.extendObjectWithContainers(bt[nt],Tt)}ot.set(bt)}}return F},u.dataArrayContainers=["transforms","dimensions"],u.layoutArrayContainers=t.layoutArrayContainers,u.extendTrace=function(F,H){return u.extendObjectWithContainers(F,H,u.dataArrayContainers)},u.extendLayout=function(F,H){return u.extendObjectWithContainers(F,H,u.layoutArrayContainers)},u.transition=function(F,H,et,q,W,K){var nt={redraw:W.redraw},it={},ot=[];return nt.prepareFn=function(){for(var ct=Array.isArray(H)?H.length:0,bt=q.slice(0,ct),ut=0;ut<bt.length;ut++){var pt=bt[ut],yt=F._fullData[pt],Tt=yt._module;if(!!Tt){if(Tt.animatable){var kt=Tt.basePlotModule.name;it[kt]||(it[kt]=[]),it[kt].push(pt)}F.data[bt[ut]]=u.extendTrace(F.data[bt[ut]],H[ut])}}var zt=r.expandObjectPaths(r.extendDeepNoArrays({},et)),Rt=/^[xy]axis[0-9]*$/;for(var Gt in zt)!Rt.test(Gt)||delete zt[Gt].range;u.extendLayout(F.layout,zt),delete F.calcdata,u.supplyDefaults(F),u.doCalcdata(F);var wt=r.expandObjectPaths(et);if(wt){var It=F._fullLayout._plots;for(var $t in It){var Qt=It[$t],Nt=Qt.xaxis,Pt=Qt.yaxis,Yt=Nt.range.slice(),ve=Pt.range.slice(),Re=null,ir=null,Ie=null,Be=null;Array.isArray(wt[Nt._name+".range"])?Re=wt[Nt._name+".range"].slice():Array.isArray((wt[Nt._name]||{}).range)&&(Re=wt[Nt._name].range.slice()),Array.isArray(wt[Pt._name+".range"])?ir=wt[Pt._name+".range"].slice():Array.isArray((wt[Pt._name]||{}).range)&&(ir=wt[Pt._name].range.slice()),Yt&&Re&&(Nt.r2l(Yt[0])!==Nt.r2l(Re[0])||Nt.r2l(Yt[1])!==Nt.r2l(Re[1]))&&(Ie={xr0:Yt,xr1:Re}),ve&&ir&&(Pt.r2l(ve[0])!==Pt.r2l(ir[0])||Pt.r2l(ve[1])!==Pt.r2l(ir[1]))&&(Be={yr0:ve,yr1:ir}),(Ie||Be)&&ot.push(r.extendFlat({plotinfo:Qt},Ie,Be))}}return Promise.resolve()},nt.runFn=function(ct){var bt,ut=F._fullLayout._basePlotModules,pt=ot.length,yt;if(et)for(yt=0;yt<ut.length;yt++)ut[yt].transitionAxes&&ut[yt].transitionAxes(F,ot,K,ct);pt?(bt=r.extendFlat({},K),bt.duration=0,delete it.cartesian):bt=K;for(var Tt in it){var kt=it[Tt],zt=F._fullData[kt[0]]._module;zt.basePlotModule.plot(F,kt,bt,ct)}},X(F,K,nt)},u.transitionFromReact=function(F,H,et,q){var W=F._fullLayout,K=W.transition,nt={},it=[];return nt.prepareFn=function(){var ot=W._plots;nt.redraw=!1,H.anim==="some"&&(nt.redraw=!0),et.anim==="some"&&(nt.redraw=!0);for(var ct in ot){var bt=ot[ct],ut=bt.xaxis,pt=bt.yaxis,yt=q[ut._name].range.slice(),Tt=q[pt._name].range.slice(),kt=ut.range.slice(),zt=pt.range.slice();ut.setScale(),pt.setScale();var Rt=null,Gt=null;(ut.r2l(yt[0])!==ut.r2l(kt[0])||ut.r2l(yt[1])!==ut.r2l(kt[1]))&&(Rt={xr0:yt,xr1:kt}),(pt.r2l(Tt[0])!==pt.r2l(zt[0])||pt.r2l(Tt[1])!==pt.r2l(zt[1]))&&(Gt={yr0:Tt,yr1:zt}),(Rt||Gt)&&it.push(r.extendFlat({plotinfo:bt},Rt,Gt))}return Promise.resolve()},nt.runFn=function(ot){for(var ct=F._fullData,bt=F._fullLayout,ut=bt._basePlotModules,pt,yt,Tt,kt=[],zt=0;zt<ct.length;zt++)kt.push(zt);function Rt(){if(!!F._fullLayout)for(var wt=0;wt<ut.length;wt++)ut[wt].transitionAxes&&ut[wt].transitionAxes(F,it,pt,ot)}function Gt(){if(!!F._fullLayout)for(var wt=0;wt<ut.length;wt++)ut[wt].plot(F,Tt,yt,ot)}it.length&&H.anim?K.ordering==="traces first"?(pt=r.extendFlat({},K,{duration:0}),Tt=kt,yt=K,setTimeout(Rt,K.duration),Gt()):(pt=K,Tt=null,yt=r.extendFlat({},K,{duration:0}),setTimeout(Gt,pt.duration),Rt()):it.length?(pt=K,Rt()):H.anim&&(Tt=kt,yt=K,Gt())},X(F,K,nt)};function X(F,H,et){var q=!1;function W(ut){var pt=Promise.resolve();if(!ut)return pt;for(;ut.length;)pt=pt.then(ut.shift());return pt}function K(ut){if(!!ut)for(;ut.length;)ut.shift()}function nt(){return F.emit("plotly_transitioning",[]),new Promise(function(ut){F._transitioning=!0,H.duration>0&&(F._transitioningWithDuration=!0),F._transitionData._interruptCallbacks.push(function(){q=!0}),et.redraw&&F._transitionData._interruptCallbacks.push(function(){return t.call("redraw",F)}),F._transitionData._interruptCallbacks.push(function(){F.emit("plotly_transitioninterrupted",[])});var pt=0,yt=0;function Tt(){return pt++,function(){yt++,!q&&yt===pt&&it(ut)}}et.runFn(Tt),setTimeout(Tt())})}function it(ut){if(!!F._transitionData)return K(F._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(et.redraw)return t.call("redraw",F)}).then(function(){F._transitioning=!1,F._transitioningWithDuration=!1,F.emit("plotly_transitioned",[])}).then(ut)}function ot(){if(!!F._transitionData)return F._transitioning=!1,W(F._transitionData._interruptCallbacks)}var ct=[u.previousPromises,ot,et.prepareFn,u.rehover,u.reselect,nt],bt=r.syncOrAsync(ct,F);return(!bt||!bt.then)&&(bt=Promise.resolve()),bt.then(function(){return F})}u.doCalcdata=function(F,H){var et=s.list(F),q=F._fullData,W=F._fullLayout,K,nt,it,ot,ct=new Array(q.length),bt=(F.calcdata||[]).slice();for(F.calcdata=ct,W._numBoxes=0,W._numViolins=0,W._violinScaleGroupStats={},F._hmpixcount=0,F._hmlumcount=0,W._piecolormap={},W._sunburstcolormap={},W._treemapcolormap={},W._iciclecolormap={},W._funnelareacolormap={},it=0;it<q.length;it++)if(Array.isArray(H)&&H.indexOf(it)===-1){ct[it]=bt[it];continue}for(it=0;it<q.length;it++)K=q[it],K._arrayAttrs=a.findArrayAttributes(K),K._extremes={};var ut=W._subplots.polar||[];for(it=0;it<ut.length;it++)et.push(W[ut[it]].radialaxis,W[ut[it]].angularaxis);for(var pt in W._colorAxes){var yt=W[pt];yt.cauto!==!1&&(delete yt.cmin,delete yt.cmax)}var Tt=!1;function kt(Gt){if(K=q[Gt],nt=K._module,K.visible===!0&&K.transforms){if(nt&&nt.calc){var wt=nt.calc(F,K);wt[0]&&wt[0].t&&wt[0].t._scene&&delete wt[0].t._scene.dirty}for(ot=0;ot<K.transforms.length;ot++){var It=K.transforms[ot];nt=T[It.type],nt&&nt.calcTransform&&(K._hasCalcTransform=!0,Tt=!0,nt.calcTransform(F,K,It))}}}function zt(Gt,wt){if(K=q[Gt],nt=K._module,!!nt.isContainer===wt){var It=[];if(K.visible===!0&&K._length!==0){delete K._indexToPoints;var $t=K.transforms||[];for(ot=$t.length-1;ot>=0;ot--)if($t[ot].enabled){K._indexToPoints=$t[ot]._indexToPoints;break}nt&&nt.calc&&(It=nt.calc(F,K))}(!Array.isArray(It)||!It[0])&&(It=[{x:d,y:d}]),It[0].t||(It[0].t={}),It[0].trace=K,ct[Gt]=It}}for(at(et,q,W),it=0;it<q.length;it++)zt(it,!0);for(it=0;it<q.length;it++)kt(it);for(Tt&&at(et,q,W),it=0;it<q.length;it++)zt(it,!0);for(it=0;it<q.length;it++)zt(it,!1);lt(F);var Rt=st(et,F);if(Rt.length){for(W._numBoxes=0,W._numViolins=0,it=0;it<Rt.length;it++)zt(Rt[it],!0);for(it=0;it<Rt.length;it++)zt(Rt[it],!1);lt(F)}t.getComponentMethod("fx","calc")(F),t.getComponentMethod("errorbars","calc")(F)};var J=/(total|sum|min|max|mean|median) (ascending|descending)/;function st(F,H){var et=[],q,W,K,nt,it;function ot(ze,Ee,Wt){var ee=Ee._id.charAt(0);if(ze==="histogram2dcontour"){var Xt=Ee._counterAxes[0],St=s.getFromId(H,Xt),Vt=ee==="x"||Xt==="x"&&St.type==="category",Zt=ee==="y"||Xt==="y"&&St.type==="category";return function(qt,Te){return qt===0||Te===0||Vt&&qt===Wt[Te].length-1||Zt&&Te===Wt.length-1?-1:(ee==="y"?Te:qt)-1}}else return function(qt,Te){return ee==="y"?Te:qt}}var ct={min:function(ze){return r.aggNums(Math.min,null,ze)},max:function(ze){return r.aggNums(Math.max,null,ze)},sum:function(ze){return r.aggNums(function(Ee,Wt){return Ee+Wt},null,ze)},total:function(ze){return r.aggNums(function(Ee,Wt){return Ee+Wt},null,ze)},mean:function(ze){return r.mean(ze)},median:function(ze){return r.median(ze)}};for(q=0;q<F.length;q++){var bt=F[q];if(bt.type==="category"){var ut=bt.categoryorder.match(J);if(ut){var pt=ut[1],yt=ut[2],Tt=bt._id.charAt(0),kt=Tt==="x",zt=[];for(W=0;W<bt._categories.length;W++)zt.push([bt._categories[W],[]]);for(W=0;W<bt._traceIndices.length;W++){var Rt=bt._traceIndices[W],Gt=H._fullData[Rt];if(Gt.visible===!0){var wt=Gt.type;t.traceIs(Gt,"histogram")&&(delete Gt._xautoBinFinished,delete Gt._yautoBinFinished);var It=wt==="splom",$t=wt==="scattergl",Qt=H.calcdata[Rt];for(K=0;K<Qt.length;K++){var Nt=Qt[K],Pt,Yt;if(It){var ve=Gt._axesDim[bt._id];if(!kt){var Re=Gt._diag[ve][0];Re&&(bt=H._fullLayout[s.id2name(Re)])}var ir=Nt.trace.dimensions[ve].values;for(nt=0;nt<ir.length;nt++)for(Pt=bt._categoriesMap[ir[nt]],it=0;it<Nt.trace.dimensions.length;it++)if(it!==ve){var Ie=Nt.trace.dimensions[it];zt[Pt][1].push(Ie.values[nt])}}else if($t){for(nt=0;nt<Nt.t.x.length;nt++)kt?(Pt=Nt.t.x[nt],Yt=Nt.t.y[nt]):(Pt=Nt.t.y[nt],Yt=Nt.t.x[nt]),zt[Pt][1].push(Yt);Nt.t&&Nt.t._scene&&delete Nt.t._scene.dirty}else if(Nt.hasOwnProperty("z")){Yt=Nt.z;var Be=ot(Gt.type,bt,Yt);for(nt=0;nt<Yt.length;nt++)for(it=0;it<Yt[nt].length;it++)Pt=Be(it,nt),Pt+1&&zt[Pt][1].push(Yt[nt][it])}else for(Pt=Nt.p,Pt===void 0&&(Pt=Nt[Tt]),Yt=Nt.s,Yt===void 0&&(Yt=Nt.v),Yt===void 0&&(Yt=kt?Nt.y:Nt.x),Array.isArray(Yt)||(Yt===void 0?Yt=[]:Yt=[Yt]),nt=0;nt<Yt.length;nt++)zt[Pt][1].push(Yt[nt])}}}bt._categoriesValue=zt;var Ye=[];for(W=0;W<zt.length;W++)Ye.push([zt[W][0],ct[pt](zt[W][1])]);Ye.sort(function(ze,Ee){return ze[1]-Ee[1]}),bt._categoriesAggregatedValue=Ye,bt._initialCategories=Ye.map(function(ze){return ze[0]}),yt==="descending"&&bt._initialCategories.reverse(),et=et.concat(bt.sortByInitialCategories())}}}return et}function at(F,H,et){var q={};function W(ot){ot.clearCalc(),ot.type==="multicategory"&&ot.setupMultiCategory(H),q[ot._id]=1}r.simpleMap(F,W);for(var K=et._axisMatchGroups||[],nt=0;nt<K.length;nt++)for(var it in K[nt])q[it]||W(et[s.id2name(it)])}function lt(F){var H=F._fullLayout,et=H._visibleModules,q={},W,K,nt;for(K=0;K<et.length;K++){var it=et[K],ot=it.crossTraceCalc;if(ot){var ct=it.basePlotModule.name;q[ct]?r.pushUnique(q[ct],ot):q[ct]=[ot]}}for(nt in q){var bt=q[nt],ut=H._subplots[nt];if(Array.isArray(ut))for(W=0;W<ut.length;W++){var pt=ut[W],yt=nt==="cartesian"?H._plots[pt]:H[pt];for(K=0;K<bt.length;K++)bt[K](F,yt,pt)}else for(K=0;K<bt.length;K++)bt[K](F)}}u.rehover=function(F){F._fullLayout._rehover&&F._fullLayout._rehover()},u.redrag=function(F){F._fullLayout._redrag&&F._fullLayout._redrag()},u.reselect=function(F){var H=F._fullLayout,et=(F.layout||{}).selections,q=H._previousSelections;H._previousSelections=et;var W=H._reselect||JSON.stringify(et)!==JSON.stringify(q);t.getComponentMethod("selections","reselect")(F,W)},u.generalUpdatePerTraceModule=function(F,H,et,q){var W=H.traceHash,K={},nt;for(nt=0;nt<et.length;nt++){var it=et[nt],ot=it[0].trace;ot.visible&&(K[ot.type]=K[ot.type]||[],K[ot.type].push(it))}for(var ct in W)if(!K[ct]){var bt=W[ct][0],ut=bt[0].trace;ut.visible=!1,K[ct]=[bt]}for(var pt in K){var yt=K[pt],Tt=yt[0][0].trace._module;Tt.plot(F,H,r.filterVisible(yt),q)}H.traceHash=K},u.plotBasePlot=function(F,H,et,q,W){var K=t.getModule(F),nt=b(H.calcdata,K)[0];K.plot(H,nt,q,W)},u.cleanBasePlot=function(F,H,et,q,W){var K=W._has&&W._has(F),nt=et._has&&et._has(F);K&&!nt&&W["_"+F+"layer"].selectAll("g.trace").remove()}},{"../components/color":367,"../components/shapes/handle_outline":468,"../constants/numerical":491,"../lib":515,"../plot_api/plot_schema":554,"../plot_api/plot_template":555,"../plots/get_data":602,"../registry":647,"./animation_attributes":560,"./attributes":562,"./cartesian/axis_ids":570,"./command":592,"./font_attributes":594,"./frame_attributes":595,"./layout_attributes":619,"@plotly/d3":58,"d3-format":112,"d3-time-format":120,"fast-isnumeric":190}],629:[function(e,B,V){B.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},{}],630:[function(e,B,V){var f=e("../../lib"),l=e("../../lib/polygon").tester,m=f.findIndexOfMin,x=f.isAngleInsideSector,t=f.angleDelta,a=f.angleDist;function i(T,c,A,k,p){if(!x(c,k))return!1;var w,h;A[0]<A[1]?(w=A[0],h=A[1]):(w=A[1],h=A[0]);var D=l(o(w,k[0],k[1],p)),S=l(o(h,k[0],k[1],p)),M=[T*Math.cos(c),T*Math.sin(c)];return S.contains(M)&&!D.contains(M)}function r(T,c,A,k){var p,w,h=k[0],D=k[1],S=b(Math.sin(c)-Math.sin(T)),M=b(Math.cos(c)-Math.cos(T)),L=Math.tan(A),R=b(1/L),z=S/M,P=D-z*h;return R?S&&M?(p=P/(L-z),w=L*p):M?(p=D*R,w=D):(p=h,w=h*L):S&&M?(p=0,w=P):M?(p=0,w=D):p=w=NaN,[p,w]}function n(T,c,A,k){var p=-c*A,w=c*c+1,h=2*(c*p-A),D=p*p+A*A-T*T,S=Math.sqrt(h*h-4*w*D),M=(-h+S)/(2*w),L=(-h-S)/(2*w);return[[M,c*M+p+k],[L,c*L+p+k]]}function d(T,c){var A=c.length,k=new Array(A+1),p;for(p=0;p<A;p++){var w=c[p];k[p]=[T*Math.cos(w),T*Math.sin(w)]}return k[p]=k[0].slice(),k}function s(T,c,A,k){var p=k.length,w=[],h,D;function S(G){return[T*Math.cos(G),T*Math.sin(G)]}function M(G,$,tt){return r(G,$,tt,S(G))}function L(G){return f.mod(G,p)}function R(G){return x(G,[c,A])}var z=m(k,function(G){return R(G)?a(G,c):1/0}),P=M(k[z],k[L(z-1)],c);for(w.push(P),h=z,D=0;D<p;h++,D++){var I=k[L(h)];if(!R(I))break;w.push(S(I))}var U=m(k,function(G){return R(G)?a(G,A):1/0}),O=M(k[U],k[L(U+1)],A);return w.push(O),w.push([0,0]),w.push(w[0].slice()),w}function o(T,c,A,k){return f.isFullCircle([c,A])?d(T,k):s(T,c,A,k)}function y(T,c,A,k){for(var p=1/0,w=1/0,h=o(T,c,A,k),D=0;D<h.length;D++){var S=h[D];p=Math.min(p,S[0]),w=Math.min(w,-S[1])}return[p,w]}function g(T,c){var A=function(w){var h=t(w,T);return h>0?h:1/0},k=m(c,A),p=f.mod(k+1,c.length);return[c[k],c[p]]}function b(T){return Math.abs(T)>1e-10?T:0}function v(T,c,A){c=c||0,A=A||0;for(var k=T.length,p=new Array(k),w=0;w<k;w++){var h=T[w];p[w]=[c+h[0],A-h[1]]}return p}function _(T,c,A,k,p,w){var h=o(T,c,A,k);return"M"+v(h,p,w).join("L")}function u(T,c,A,k,p,w,h){var D,S;T<c?(D=T,S=c):(D=c,S=T);var M=v(o(D,A,k,p),w,h),L=v(o(S,A,k,p),w,h);return"M"+L.reverse().join("L")+"M"+M.join("L")}B.exports={isPtInsidePolygon:i,findPolygonOffset:y,findEnclosingVertexAngles:g,findIntersectionXY:r,findXYatLength:n,clampTiny:b,pathPolygon:_,pathPolygonAnnulus:u}},{"../../lib":515,"../../lib/polygon":527}],631:[function(e,B,V){var f=e("../get_data").getSubplotCalcData,l=e("../../lib").counterRegex,m=e("./polar"),x=e("./constants"),t=x.attr,a=x.name,i=l(a),r={};r[t]={valType:"subplotid",dflt:a,editType:"calc"};function n(s){for(var o=s._fullLayout,y=s.calcdata,g=o._subplots[a],b=0;b<g.length;b++){var v=g[b],_=f(y,a,v),u=o[v]._subplot;u||(u=m(s,v),o[v]._subplot=u),u.plot(_,o,s._promises)}}function d(s,o,y,g){for(var b=g._subplots[a]||[],v=g._has&&g._has("gl"),_=o._has&&o._has("gl"),u=v&&!_,T=0;T<b.length;T++){var c=b[T],A=g[c]._subplot;if(!o[c]&&!!A){A.framework.remove(),A.layers["radial-axis-title"].remove();for(var k in A.clipPaths)A.clipPaths[k].remove()}u&&A._scene&&(A._scene.destroy(),A._scene=null)}}B.exports={attr:t,name:a,idRoot:a,idRegex:i,attrRegex:i,attributes:r,layoutAttributes:e("./layout_attributes"),supplyLayoutDefaults:e("./layout_defaults"),plot:n,clean:d,toSVG:e("../cartesian").toSVG}},{"../../lib":515,"../cartesian":578,"../get_data":602,"./constants":629,"./layout_attributes":632,"./layout_defaults":633,"./polar":634}],632:[function(e,B,V){var f=e("../../components/color/attributes"),l=e("../cartesian/layout_attributes"),m=e("../domain").attributes,x=e("../../lib").extendFlat,t=e("../../plot_api/edit_types").overrideAll,a=t({color:l.color,showline:x({},l.showline,{dflt:!0}),linecolor:l.linecolor,linewidth:l.linewidth,showgrid:x({},l.showgrid,{dflt:!0}),gridcolor:l.gridcolor,gridwidth:l.gridwidth,griddash:l.griddash},"plot","from-root"),i=t({tickmode:l.tickmode,nticks:l.nticks,tick0:l.tick0,dtick:l.dtick,tickvals:l.tickvals,ticktext:l.ticktext,ticks:l.ticks,ticklen:l.ticklen,tickwidth:l.tickwidth,tickcolor:l.tickcolor,ticklabelstep:l.ticklabelstep,showticklabels:l.showticklabels,showtickprefix:l.showtickprefix,tickprefix:l.tickprefix,showticksuffix:l.showticksuffix,ticksuffix:l.ticksuffix,showexponent:l.showexponent,exponentformat:l.exponentformat,minexponent:l.minexponent,separatethousands:l.separatethousands,tickfont:l.tickfont,tickangle:l.tickangle,tickformat:l.tickformat,tickformatstops:l.tickformatstops,layer:l.layer},"plot","from-root"),r={visible:x({},l.visible,{dflt:!0}),type:x({},l.type,{values:["-","linear","log","date","category"]}),autotypenumbers:l.autotypenumbers,autorange:x({},l.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},range:x({},l.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:l.categoryorder,categoryarray:l.categoryarray,angle:{valType:"angle",editType:"plot"},side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:x({},l.title.text,{editType:"plot",dflt:""}),font:x({},l.title.font,{editType:"plot"}),editType:"plot"},hoverformat:l.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:l._deprecated.title,titlefont:l._deprecated.titlefont}};x(r,a,i);var n={visible:x({},l.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:l.autotypenumbers,categoryorder:l.categoryorder,categoryarray:l.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:l.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};x(n,a,i),B.exports={domain:m({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:f.background},radialaxis:r,angularaxis:n,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},{"../../components/color/attributes":366,"../../lib":515,"../../plot_api/edit_types":548,"../cartesian/layout_attributes":579,"../domain":593}],633:[function(e,B,V){var f=e("../../lib"),l=e("../../components/color"),m=e("../../plot_api/plot_template"),x=e("../subplot_defaults"),t=e("../get_data").getSubplotData,a=e("../cartesian/tick_value_defaults"),i=e("../cartesian/tick_mark_defaults"),r=e("../cartesian/tick_label_defaults"),n=e("../cartesian/prefix_suffix_defaults"),d=e("../cartesian/category_order_defaults"),s=e("../cartesian/line_grid_defaults"),o=e("../cartesian/axis_autotype"),y=e("./layout_attributes"),g=e("./set_convert"),b=e("./constants"),v=b.axisNames;function _(T,c,A,k){var p=A("bgcolor");k.bgColor=l.combine(p,k.paper_bgcolor);var w=A("sector");A("hole");var h=t(k.fullData,b.name,k.id),D=k.layoutOut,S;function M(at,lt){return A(S+"."+at,lt)}for(var L=0;L<v.length;L++){S=v[L],f.isPlainObject(T[S])||(T[S]={});var R=T[S],z=m.newContainer(c,S);z._id=z._name=S,z._attr=k.id+"."+S,z._traceIndices=h.map(function(at){return at._expandedIndex});var P=b.axisName2dataArray[S],I=u(R,z,M,h,P,k);d(R,z,M,{axData:h,dataAttr:P});var U=M("visible");switch(g(z,c,D),M("uirevision",c.uirevision),z._m=1,S){case"radialaxis":var O=M("autorange",!z.isValidRange(R.range));R.autorange=O,O&&(I==="linear"||I==="-")&&M("rangemode"),O==="reversed"&&(z._m=-1),M("range"),z.cleanRange("range",{dfltRange:[0,1]});break;case"angularaxis":if(I==="date"){f.log("Polar plots do not support date angular axes yet.");for(var G=0;G<h.length;G++)h[G].visible=!1;I=R.type=z.type="linear"}M(I==="linear"?"thetaunit":"period");var $=M("direction");M("rotation",{counterclockwise:0,clockwise:90}[$]);break}if(n(R,z,M,z.type,{tickSuffixDflt:z.thetaunit==="degrees"?"\xB0":void 0}),U){var tt,Z,X,J,st=k.font||{};tt=M("color"),Z=tt===R.color?tt:st.color,X=st.size,J=st.family,a(R,z,M,z.type),r(R,z,M,z.type,{font:{color:Z,size:X,family:J}}),i(R,z,M,{outerTicks:!0}),s(R,z,M,{dfltColor:tt,bgColor:k.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:y[S]}),M("layer"),S==="radialaxis"&&(M("side"),M("angle",w[0]),M("title.text"),f.coerceFont(M,"title.font",{color:Z,size:f.bigFont(X),family:J}))}I!=="category"&&M("hoverformat"),z._input=R}c.angularaxis.type==="category"&&A("gridshape")}function u(T,c,A,k,p,w){var h=A("autotypenumbers",w.autotypenumbersDflt),D=A("type");if(D==="-"){for(var S,M=0;M<k.length;M++)if(k[M].visible){S=k[M];break}S&&S[p]&&(c.type=o(S[p],"gregorian",{noMultiCategory:!0,autotypenumbers:h})),c.type==="-"?c.type="linear":T.type=c.type}return c.type}B.exports=function(c,A,k){x(c,A,k,{type:b.name,attributes:y,handleDefaults:_,font:A.font,autotypenumbersDflt:A.autotypenumbers,paper_bgcolor:A.paper_bgcolor,fullData:k,layoutOut:A})}},{"../../components/color":367,"../../lib":515,"../../plot_api/plot_template":555,"../cartesian/axis_autotype":567,"../cartesian/category_order_defaults":571,"../cartesian/line_grid_defaults":581,"../cartesian/prefix_suffix_defaults":583,"../cartesian/tick_label_defaults":587,"../cartesian/tick_mark_defaults":588,"../cartesian/tick_value_defaults":589,"../get_data":602,"../subplot_defaults":641,"./constants":629,"./layout_attributes":632,"./set_convert":635}],634:[function(e,B,V){var f=e("@plotly/d3"),l=e("tinycolor2"),m=e("../../registry"),x=e("../../lib"),t=x.strRotate,a=x.strTranslate,i=e("../../components/color"),r=e("../../components/drawing"),n=e("../plots"),d=e("../../plots/cartesian/axes"),s=e("../cartesian/set_convert"),o=e("./set_convert"),y=e("../cartesian/autorange").doAutoRange,g=e("../cartesian/dragbox"),b=e("../../components/dragelement"),v=e("../../components/fx"),_=e("../../components/titles"),u=e("../../components/selections").prepSelect,T=e("../../components/selections").selectOnClick,c=e("../../components/selections").clearOutline,A=e("../../lib/setcursor"),k=e("../../lib/clear_gl_canvases"),p=e("../../plot_api/subroutines").redrawReglTraces,w=e("../../constants/alignment").MID_SHIFT,h=e("./constants"),D=e("./helpers"),S=e("../smith/helpers"),M=S.smith,L=S.reactanceArc,R=S.resistanceArc,z=S.smithTransform,P=x._,I=x.mod,U=x.deg2rad,O=x.rad2deg;function G(st,at,lt){this.isSmith=lt||!1,this.id=at,this.gd=st,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var F=st._fullLayout,H="clip"+F._uid+at;this.clipIds.forTraces=H+"-for-traces",this.clipPaths.forTraces=F._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=F["_"+(lt?"smith":"polar")+"layer"].append("g").attr("class",at),this.getHole=function(et){return this.isSmith?0:et.hole},this.getSector=function(et){return this.isSmith?[0,360]:et.sector},this.getRadial=function(et){return this.isSmith?et.realaxis:et.radialaxis},this.getAngular=function(et){return this.isSmith?et.imaginaryaxis:et.angularaxis},lt||(this.radialTickLayout=null,this.angularTickLayout=null)}var $=G.prototype;B.exports=function(at,lt,F){return new G(at,lt,F)},$.plot=function(st,at){for(var lt=this,F=at[lt.id],H=!1,et=0;et<st.length;et++){var q=st[et][0].trace;if(q.cliponaxis===!1){H=!0;break}}lt._hasClipOnAxisFalse=H,lt.updateLayers(at,F),lt.updateLayout(at,F),n.generalUpdatePerTraceModule(lt.gd,lt,st,F),lt.updateFx(at,F),lt.isSmith&&(delete F.realaxis.range,delete F.imaginaryaxis.range)},$.updateLayers=function(st,at){var lt=this,F=lt.isSmith,H=lt.layers,et=lt.getRadial(at),q=lt.getAngular(at),W=h.layerNames,K=W.indexOf("frontplot"),nt=W.slice(0,K),it=q.layer==="below traces",ot=et.layer==="below traces";it&&nt.push("angular-line"),ot&&nt.push("radial-line"),it&&nt.push("angular-axis"),ot&&nt.push("radial-axis"),nt.push("frontplot"),it||nt.push("angular-line"),ot||nt.push("radial-line"),it||nt.push("angular-axis"),ot||nt.push("radial-axis");var ct=(F?"smith":"polar")+"sublayer",bt=lt.framework.selectAll("."+ct).data(nt,String);bt.enter().append("g").attr("class",function(ut){return ct+" "+ut}).each(function(ut){var pt=H[ut]=f.select(this);switch(ut){case"frontplot":F||pt.append("g").classed("barlayer",!0),pt.append("g").classed("scatterlayer",!0);break;case"backplot":pt.append("g").classed("maplayer",!0);break;case"plotbg":H.bg=pt.append("path");break;case"radial-grid":pt.style("fill","none");break;case"angular-grid":pt.style("fill","none");break;case"radial-line":pt.append("line").style("fill","none");break;case"angular-line":pt.append("path").style("fill","none");break}}),bt.order()},$.updateLayout=function(st,at){var lt=this,F=lt.layers,H=st._size,et=lt.getRadial(at),q=lt.getAngular(at),W=at.domain.x,K=at.domain.y;lt.xOffset=H.l+H.w*W[0],lt.yOffset=H.t+H.h*(1-K[1]);var nt=lt.xLength=H.w*(W[1]-W[0]),it=lt.yLength=H.h*(K[1]-K[0]),ot=lt.getSector(at);lt.sectorInRad=ot.map(U);var ct=lt.sectorBBox=Z(ot),bt=ct[2]-ct[0],ut=ct[3]-ct[1],pt=it/nt,yt=Math.abs(ut/bt),Tt,kt,zt,Rt,Gt;pt>yt?(Tt=nt,kt=nt*yt,Gt=(it-kt)/H.h/2,zt=[W[0],W[1]],Rt=[K[0]+Gt,K[1]-Gt]):(Tt=it/yt,kt=it,Gt=(nt-Tt)/H.w/2,zt=[W[0]+Gt,W[1]-Gt],Rt=[K[0],K[1]]),lt.xLength2=Tt,lt.yLength2=kt,lt.xDomain2=zt,lt.yDomain2=Rt;var wt=lt.xOffset2=H.l+H.w*zt[0],It=lt.yOffset2=H.t+H.h*(1-Rt[1]),$t=lt.radius=Tt/bt,Qt=lt.innerRadius=lt.getHole(at)*$t,Nt=lt.cx=wt-$t*ct[0],Pt=lt.cy=It+$t*ct[3],Yt=lt.cxx=Nt-wt,ve=lt.cyy=Pt-It,Re=et.side,ir;Re==="counterclockwise"?(ir=Re,Re="top"):Re==="clockwise"&&(ir=Re,Re="bottom"),lt.radialAxis=lt.mockAxis(st,at,et,{_id:"x",side:Re,_trueSide:ir,domain:[Qt/H.w,$t/H.w]}),lt.angularAxis=lt.mockAxis(st,at,q,{side:"right",domain:[0,Math.PI],autorange:!1}),lt.doAutoRange(st,at),lt.updateAngularAxis(st,at),lt.updateRadialAxis(st,at),lt.updateRadialAxisTitle(st,at),lt.xaxis=lt.mockCartesianAxis(st,at,{_id:"x",domain:zt}),lt.yaxis=lt.mockCartesianAxis(st,at,{_id:"y",domain:Rt});var Ie=lt.pathSubplot();lt.clipPaths.forTraces.select("path").attr("d",Ie).attr("transform",a(Yt,ve)),F.frontplot.attr("transform",a(wt,It)).call(r.setClipUrl,lt._hasClipOnAxisFalse?null:lt.clipIds.forTraces,lt.gd),F.bg.attr("d",Ie).attr("transform",a(Nt,Pt)).call(i.fill,at.bgcolor)},$.mockAxis=function(st,at,lt,F){var H=x.extendFlat({},lt,F);return o(H,at,st),H},$.mockCartesianAxis=function(st,at,lt){var F=this,H=F.isSmith,et=lt._id,q=x.extendFlat({type:"linear"},lt);s(q,st);var W={x:[0,2],y:[1,3]};return q.setRange=function(){var K=F.sectorBBox,nt=W[et],it=F.radialAxis._rl,ot=(it[1]-it[0])/(1-F.getHole(at));q.range=[K[nt[0]]*ot,K[nt[1]]*ot]},q.isPtWithinRange=et==="x"&&!H?function(K){return F.isPtInside(K)}:function(){return!0},q.setRange(),q.setScale(),q},$.doAutoRange=function(st,at){var lt=this,F=lt.gd,H=lt.radialAxis,et=lt.getRadial(at);y(F,H);var q=H.range;et.range=q.slice(),et._input.range=q.slice(),H._rl=[H.r2l(q[0],null,"gregorian"),H.r2l(q[1],null,"gregorian")]},$.updateRadialAxis=function(st,at){var lt=this,F=lt.gd,H=lt.layers,et=lt.radius,q=lt.innerRadius,W=lt.cx,K=lt.cy,nt=lt.getRadial(at),it=I(lt.getSector(at)[0],360),ot=lt.radialAxis,ct=q<et,bt=lt.isSmith;bt||(lt.fillViewInitialKey("radialaxis.angle",nt.angle),lt.fillViewInitialKey("radialaxis.range",ot.range.slice()),ot.setGeometry()),ot.tickangle==="auto"&&it>90&&it<=270&&(ot.tickangle=180);var ut=bt?function($t){var Qt=z(lt,M([$t.x,0]));return a(Qt[0]-W,Qt[1]-K)}:function($t){return a(ot.l2p($t.x)+q,0)},pt=bt?function($t){return R(lt,$t.x,-1/0,1/0)}:function($t){return lt.pathArc(ot.r2p($t.x)+q)},yt=tt(nt);if(lt.radialTickLayout!==yt&&(H["radial-axis"].selectAll(".xtick").remove(),lt.radialTickLayout=yt),ct){ot.setScale();var Tt=0,kt=bt?(ot.tickvals||[]).filter(function($t){return $t>=0}).map(function($t){return d.tickText(ot,$t,!0,!1)}):d.calcTicks(ot),zt=bt?kt:d.clipEnds(ot,kt),Rt=d.getTickSigns(ot)[2];bt&&((ot.ticks==="top"&&ot.side==="bottom"||ot.ticks==="bottom"&&ot.side==="top")&&(Rt=-Rt),ot.ticks==="top"&&ot.side==="top"&&(Tt=-ot.ticklen),ot.ticks==="bottom"&&ot.side==="bottom"&&(Tt=ot.ticklen)),d.drawTicks(F,ot,{vals:kt,layer:H["radial-axis"],path:d.makeTickPath(ot,0,Rt),transFn:ut,crisp:!1}),d.drawGrid(F,ot,{vals:zt,layer:H["radial-grid"],path:pt,transFn:x.noop,crisp:!1}),d.drawLabels(F,ot,{vals:kt,layer:H["radial-axis"],transFn:ut,labelFns:d.makeLabelFns(ot,Tt)})}var Gt=lt.radialAxisAngle=lt.vangles?O(X(U(nt.angle),lt.vangles)):nt.angle,wt=a(W,K),It=wt+t(-Gt);J(H["radial-axis"],ct&&(nt.showticklabels||nt.ticks),{transform:It}),J(H["radial-grid"],ct&&nt.showgrid,{transform:bt?"":wt}),J(H["radial-line"].select("line"),ct&&nt.showline,{x1:bt?-et:q,y1:0,x2:et,y2:0,transform:It}).attr("stroke-width",nt.linewidth).call(i.stroke,nt.linecolor)},$.updateRadialAxisTitle=function(st,at,lt){if(!this.isSmith){var F=this,H=F.gd,et=F.radius,q=F.cx,W=F.cy,K=F.getRadial(at),nt=F.id+"title",it=0;if(K.title){var ot=r.bBox(F.layers["radial-axis"].node()).height,ct=K.title.font.size,bt=K.side;it=bt==="top"?ct:bt==="counterclockwise"?-(ot+ct*.4):ot+ct*.8}var ut=lt!==void 0?lt:F.radialAxisAngle,pt=U(ut),yt=Math.cos(pt),Tt=Math.sin(pt),kt=q+et/2*yt+it*Tt,zt=W-et/2*Tt+it*yt;F.layers["radial-axis-title"]=_.draw(H,nt,{propContainer:K,propName:F.id+".radialaxis.title",placeholder:P(H,"Click to enter radial axis title"),attributes:{x:kt,y:zt,"text-anchor":"middle"},transform:{rotate:-ut}})}},$.updateAngularAxis=function(st,at){var lt=this,F=lt.gd,H=lt.layers,et=lt.radius,q=lt.innerRadius,W=lt.cx,K=lt.cy,nt=lt.getAngular(at),it=lt.angularAxis,ot=lt.isSmith;ot||(lt.fillViewInitialKey("angularaxis.rotation",nt.rotation),it.setGeometry(),it.setScale());var ct=ot?function(Qt){var Nt=z(lt,M([0,Qt.x]));return Math.atan2(Nt[0]-W,Nt[1]-K)-Math.PI/2}:function(Qt){return it.t2g(Qt.x)};it.type==="linear"&&it.thetaunit==="radians"&&(it.tick0=O(it.tick0),it.dtick=O(it.dtick));var bt=function(Qt){return a(W+et*Math.cos(Qt),K-et*Math.sin(Qt))},ut=ot?function(Qt){var Nt=z(lt,M([0,Qt.x]));return a(Nt[0],Nt[1])}:function(Qt){return bt(ct(Qt))},pt=ot?function(Qt){var Nt=z(lt,M([0,Qt.x])),Pt=Math.atan2(Nt[0]-W,Nt[1]-K)-Math.PI/2;return a(Nt[0],Nt[1])+t(-O(Pt))}:function(Qt){var Nt=ct(Qt);return bt(Nt)+t(-O(Nt))},yt=ot?function(Qt){return L(lt,Qt.x,0,1/0)}:function(Qt){var Nt=ct(Qt),Pt=Math.cos(Nt),Yt=Math.sin(Nt);return"M"+[W+q*Pt,K-q*Yt]+"L"+[W+et*Pt,K-et*Yt]},Tt=d.makeLabelFns(it,0),kt=Tt.labelStandoff,zt={};zt.xFn=function(Qt){var Nt=ct(Qt);return Math.cos(Nt)*kt},zt.yFn=function(Qt){var Nt=ct(Qt),Pt=Math.sin(Nt)>0?.2:1;return-Math.sin(Nt)*(kt+Qt.fontSize*Pt)+Math.abs(Math.cos(Nt))*(Qt.fontSize*w)},zt.anchorFn=function(Qt){var Nt=ct(Qt),Pt=Math.cos(Nt);return Math.abs(Pt)<.1?"middle":Pt>0?"start":"end"},zt.heightFn=function(Qt,Nt,Pt){var Yt=ct(Qt);return-.5*(1+Math.sin(Yt))*Pt};var Rt=tt(nt);lt.angularTickLayout!==Rt&&(H["angular-axis"].selectAll("."+it._id+"tick").remove(),lt.angularTickLayout=Rt);var Gt=ot?[1/0].concat(it.tickvals||[]).map(function(Qt){return d.tickText(it,Qt,!0,!1)}):d.calcTicks(it);ot&&(Gt[0].text="\u221E",Gt[0].fontSize*=1.75);var wt;if(at.gridshape==="linear"?(wt=Gt.map(ct),x.angleDelta(wt[0],wt[1])<0&&(wt=wt.slice().reverse())):wt=null,lt.vangles=wt,it.type==="category"&&(Gt=Gt.filter(function(Qt){return x.isAngleInsideSector(ct(Qt),lt.sectorInRad)})),it.visible){var It=it.ticks==="inside"?-1:1,$t=(it.linewidth||1)/2;d.drawTicks(F,it,{vals:Gt,layer:H["angular-axis"],path:"M"+It*$t+",0h"+It*it.ticklen,transFn:pt,crisp:!1}),d.drawGrid(F,it,{vals:Gt,layer:H["angular-grid"],path:yt,transFn:x.noop,crisp:!1}),d.drawLabels(F,it,{vals:Gt,layer:H["angular-axis"],repositionOnUpdate:!0,transFn:ut,labelFns:zt})}J(H["angular-line"].select("path"),nt.showline,{d:lt.pathSubplot(),transform:a(W,K)}).attr("stroke-width",nt.linewidth).call(i.stroke,nt.linecolor)},$.updateFx=function(st,at){if(!this.gd._context.staticPlot){var lt=!this.isSmith;lt&&(this.updateAngularDrag(st),this.updateRadialDrag(st,at,0),this.updateRadialDrag(st,at,1)),this.updateHoverAndMainDrag(st)}},$.updateHoverAndMainDrag=function(st){var at=this,lt=at.isSmith,F=at.gd,H=at.layers,et=st._zoomlayer,q=h.MINZOOM,W=h.OFFEDGE,K=at.radius,nt=at.innerRadius,it=at.cx,ot=at.cy,ct=at.cxx,bt=at.cyy,ut=at.sectorInRad,pt=at.vangles,yt=at.radialAxis,Tt=D.clampTiny,kt=D.findXYatLength,zt=D.findEnclosingVertexAngles,Rt=h.cornerHalfWidth,Gt=h.cornerLen/2,wt,It,$t=g.makeDragger(H,"path","maindrag",st.dragmode===!1?"none":"crosshair");f.select($t).attr("d",at.pathSubplot()).attr("transform",a(it,ot)),$t.onmousemove=function(er){v.hover(F,er,at.id),F._fullLayout._lasthover=$t,F._fullLayout._hoversubplot=at.id},$t.onmouseout=function(er){F._dragging||b.unhover(F,er)};var Qt={element:$t,gd:F,subplot:at.id,plotinfo:{id:at.id,xaxis:at.xaxis,yaxis:at.yaxis},xaxes:[at.xaxis],yaxes:[at.yaxis]},Nt,Pt,Yt,ve,Re,ir,Ie,Be,Ye;function ze(er,We){return Math.sqrt(er*er+We*We)}function Ee(er,We){return ze(er-ct,We-bt)}function Wt(er,We){return Math.atan2(bt-We,er-ct)}function ee(er,We){return[er*Math.cos(We),er*Math.sin(-We)]}function Xt(er,We){if(er===0)return at.pathSector(2*Rt);var hr=Gt/er,Wr=We-hr,dn=We+hr,Qr=Math.max(0,Math.min(er,K)),le=Qr-Rt,Qe=Qr+Rt;return"M"+ee(le,Wr)+"A"+[le,le]+" 0,0,0 "+ee(le,dn)+"L"+ee(Qe,dn)+"A"+[Qe,Qe]+" 0,0,1 "+ee(Qe,Wr)+"Z"}function St(er,We,hr){if(er===0)return at.pathSector(2*Rt);var Wr=ee(er,We),dn=ee(er,hr),Qr=Tt((Wr[0]+dn[0])/2),le=Tt((Wr[1]+dn[1])/2),Qe,Ze;if(Qr&&le){var Ve=le/Qr,_r=-1/Ve,oe=kt(Rt,Ve,Qr,le);Qe=kt(Gt,_r,oe[0][0],oe[0][1]),Ze=kt(Gt,_r,oe[1][0],oe[1][1])}else{var Ht,te;le?(Ht=Gt,te=Rt):(Ht=Rt,te=Gt),Qe=[[Qr-Ht,le-te],[Qr+Ht,le-te]],Ze=[[Qr-Ht,le+te],[Qr+Ht,le+te]]}return"M"+Qe.join("L")+"L"+Ze.reverse().join("L")+"Z"}function Vt(){Yt=null,ve=null,Re=at.pathSubplot(),ir=!1;var er=F._fullLayout[at.id];Ie=l(er.bgcolor).getLuminance(),Be=g.makeZoombox(et,Ie,it,ot,Re),Be.attr("fill-rule","evenodd"),Ye=g.makeCorners(et,it,ot),c(F)}function Zt(er,We){return We=Math.max(Math.min(We,K),nt),er<W?er=0:K-er<W?er=K:We<W?We=0:K-We<W&&(We=K),Math.abs(We-er)>q?(er<We?(Yt=er,ve=We):(Yt=We,ve=er),!0):(Yt=null,ve=null,!1)}function qt(er,We){er=er||Re,We=We||"M0,0Z",Be.attr("d",er),Ye.attr("d",We),g.transitionZoombox(Be,Ye,ir,Ie),ir=!0;var hr={};He(hr),F.emit("plotly_relayouting",hr)}function Te(er,We){er=er*wt,We=We*It;var hr=Nt+er,Wr=Pt+We,dn=Ee(Nt,Pt),Qr=Math.min(Ee(hr,Wr),K),le=Wt(Nt,Pt),Qe,Ze;Zt(dn,Qr)&&(Qe=Re+at.pathSector(ve),Yt&&(Qe+=at.pathSector(Yt)),Ze=Xt(Yt,le)+Xt(ve,le)),qt(Qe,Ze)}function me(er,We,hr,Wr){var dn=D.findIntersectionXY(hr,Wr,hr,[er-ct,bt-We]);return ze(dn[0],dn[1])}function Ne(er,We){var hr=Nt+er,Wr=Pt+We,dn=Wt(Nt,Pt),Qr=Wt(hr,Wr),le=zt(dn,pt),Qe=zt(Qr,pt),Ze=me(Nt,Pt,le[0],le[1]),Ve=Math.min(me(hr,Wr,Qe[0],Qe[1]),K),_r,oe;Zt(Ze,Ve)&&(_r=Re+at.pathSector(ve),Yt&&(_r+=at.pathSector(Yt)),oe=[St(Yt,le[0],le[1]),St(ve,le[0],le[1])].join(" ")),qt(_r,oe)}function Ke(){if(g.removeZoombox(F),!(Yt===null||ve===null)){var er={};He(er),g.showDoubleClickNotifier(F),m.call("_guiRelayout",F,er)}}function He(er){var We=yt._rl,hr=(We[1]-We[0])/(1-nt/K)/K,Wr=[We[0]+(Yt-nt)*hr,We[0]+(ve-nt)*hr];er[at.id+".radialaxis.range"]=Wr}function Xe(er,We){var hr=F._fullLayout.clickmode;if(g.removeZoombox(F),er===2){var Wr={};for(var dn in at.viewInitial)Wr[at.id+"."+dn]=at.viewInitial[dn];F.emit("plotly_doubleclick",null),m.call("_guiRelayout",F,Wr)}hr.indexOf("select")>-1&&er===1&&T(We,F,[at.xaxis],[at.yaxis],at.id,Qt),hr.indexOf("event")>-1&&v.click(F,We,at.id)}Qt.prepFn=function(er,We,hr){var Wr=F._fullLayout.dragmode,dn=$t.getBoundingClientRect();F._fullLayout._calcInverseTransform(F);var Qr=F._fullLayout._invTransform;wt=F._fullLayout._invScaleX,It=F._fullLayout._invScaleY;var le=x.apply3DTransform(Qr)(We-dn.left,hr-dn.top);if(Nt=le[0],Pt=le[1],pt){var Qe=D.findPolygonOffset(K,ut[0],ut[1],pt);Nt+=ct+Qe[0],Pt+=bt+Qe[1]}switch(Wr){case"zoom":Qt.clickFn=Xe,lt||(pt?Qt.moveFn=Ne:Qt.moveFn=Te,Qt.doneFn=Ke,Vt());break;case"select":case"lasso":u(er,We,hr,Qt,Wr);break}},b.init(Qt)},$.updateRadialDrag=function(st,at,lt){var F=this,H=F.gd,et=F.layers,q=F.radius,W=F.innerRadius,K=F.cx,nt=F.cy,it=F.radialAxis,ot=h.radialDragBoxSize,ct=ot/2;if(!it.visible)return;var bt=U(F.radialAxisAngle),ut=it._rl,pt=ut[0],yt=ut[1],Tt=ut[lt],kt=.75*(ut[1]-ut[0])/(1-F.getHole(at))/q,zt,Rt,Gt;lt?(zt=K+(q+ct)*Math.cos(bt),Rt=nt-(q+ct)*Math.sin(bt),Gt="radialdrag"):(zt=K+(W-ct)*Math.cos(bt),Rt=nt-(W-ct)*Math.sin(bt),Gt="radialdrag-inner");var wt=g.makeRectDragger(et,Gt,"crosshair",-ct,-ct,ot,ot),It={element:wt,gd:H};st.dragmode===!1&&(It.dragmode=!1),J(f.select(wt),it.visible&&W<q,{transform:a(zt,Rt)});var $t,Qt,Nt;function Pt(Ie,Be){if($t)$t(Ie,Be);else{var Ye=[Ie,-Be],ze=[Math.cos(bt),Math.sin(bt)],Ee=Math.abs(x.dot(Ye,ze)/Math.sqrt(x.dot(Ye,Ye)));isNaN(Ee)||($t=Ee<.5?Re:ir)}var Wt={};Yt(Wt),H.emit("plotly_relayouting",Wt)}function Yt(Ie){Qt!==null?Ie[F.id+".radialaxis.angle"]=Qt:Nt!==null&&(Ie[F.id+".radialaxis.range["+lt+"]"]=Nt)}function ve(){Qt!==null?m.call("_guiRelayout",H,F.id+".radialaxis.angle",Qt):Nt!==null&&m.call("_guiRelayout",H,F.id+".radialaxis.range["+lt+"]",Nt)}function Re(Ie,Be){if(lt!==0){var Ye=zt+Ie,ze=Rt+Be;Qt=Math.atan2(nt-ze,Ye-K),F.vangles&&(Qt=X(Qt,F.vangles)),Qt=O(Qt);var Ee=a(K,nt)+t(-Qt);et["radial-axis"].attr("transform",Ee),et["radial-line"].select("line").attr("transform",Ee);var Wt=F.gd._fullLayout,ee=Wt[F.id];F.updateRadialAxisTitle(Wt,ee,Qt)}}function ir(Ie,Be){var Ye=x.dot([Ie,-Be],[Math.cos(bt),Math.sin(bt)]);if(Nt=Tt-kt*Ye,kt>0!=(lt?Nt>pt:Nt<yt)){Nt=null;return}var ze=H._fullLayout,Ee=ze[F.id];it.range[lt]=Nt,it._rl[lt]=Nt,F.updateRadialAxis(ze,Ee),F.xaxis.setRange(),F.xaxis.setScale(),F.yaxis.setRange(),F.yaxis.setScale();var Wt=!1;for(var ee in F.traceHash){var Xt=F.traceHash[ee],St=x.filterVisible(Xt),Vt=Xt[0][0].trace._module;Vt.plot(H,F,St,Ee),m.traceIs(ee,"gl")&&St.length&&(Wt=!0)}Wt&&(k(H),p(H))}It.prepFn=function(){$t=null,Qt=null,Nt=null,It.moveFn=Pt,It.doneFn=ve,c(H)},It.clampFn=function(Ie,Be){return Math.sqrt(Ie*Ie+Be*Be)<h.MINDRAG&&(Ie=0,Be=0),[Ie,Be]},b.init(It)},$.updateAngularDrag=function(st){var at=this,lt=at.gd,F=at.layers,H=at.radius,et=at.angularAxis,q=at.cx,W=at.cy,K=at.cxx,nt=at.cyy,it=h.angularDragBoxSize,ot=g.makeDragger(F,"path","angulardrag",st.dragmode===!1?"none":"move"),ct={element:ot,gd:lt};st.dragmode===!1?ct.dragmode=!1:f.select(ot).attr("d",at.pathAnnulus(H,H+it)).attr("transform",a(q,W)).call(A,"move");function bt(Nt,Pt){return Math.atan2(nt+it-Pt,Nt-K-it)}var ut=F.frontplot.select(".scatterlayer").selectAll(".trace"),pt=ut.selectAll(".point"),yt=ut.selectAll(".textpoint"),Tt,kt,zt,Rt,Gt,wt;function It(Nt,Pt){var Yt=at.gd._fullLayout,ve=Yt[at.id],Re=Tt+Nt*st._invScaleX,ir=kt+Pt*st._invScaleY,Ie=bt(Re,ir),Be=O(Ie-wt);if(Rt=zt+Be,F.frontplot.attr("transform",a(at.xOffset2,at.yOffset2)+t([-Be,K,nt])),at.vangles){Gt=at.radialAxisAngle+Be;var Ye=a(q,W)+t(-Be),ze=a(q,W)+t(-Gt);F.bg.attr("transform",Ye),F["radial-grid"].attr("transform",Ye),F["radial-axis"].attr("transform",ze),F["radial-line"].select("line").attr("transform",ze),at.updateRadialAxisTitle(Yt,ve,Gt)}else at.clipPaths.forTraces.select("path").attr("transform",a(K,nt)+t(Be));pt.each(function(){var Zt=f.select(this),qt=r.getTranslate(Zt);Zt.attr("transform",a(qt.x,qt.y)+t([Be]))}),yt.each(function(){var Zt=f.select(this),qt=Zt.select("text"),Te=r.getTranslate(Zt);Zt.attr("transform",t([Be,qt.attr("x"),qt.attr("y")])+a(Te.x,Te.y))}),et.rotation=x.modHalf(Rt,360),at.updateAngularAxis(Yt,ve),at._hasClipOnAxisFalse&&!x.isFullCircle(at.sectorInRad)&&ut.call(r.hideOutsideRangePoints,at);var Ee=!1;for(var Wt in at.traceHash)if(m.traceIs(Wt,"gl")){var ee=at.traceHash[Wt],Xt=x.filterVisible(ee),St=ee[0][0].trace._module;St.plot(lt,at,Xt,ve),Xt.length&&(Ee=!0)}Ee&&(k(lt),p(lt));var Vt={};$t(Vt),lt.emit("plotly_relayouting",Vt)}function $t(Nt){Nt[at.id+".angularaxis.rotation"]=Rt,at.vangles&&(Nt[at.id+".radialaxis.angle"]=Gt)}function Qt(){yt.select("text").attr("transform",null);var Nt={};$t(Nt),m.call("_guiRelayout",lt,Nt)}ct.prepFn=function(Nt,Pt,Yt){var ve=st[at.id];zt=ve.angularaxis.rotation;var Re=ot.getBoundingClientRect();Tt=Pt-Re.left,kt=Yt-Re.top,lt._fullLayout._calcInverseTransform(lt);var ir=x.apply3DTransform(st._invTransform)(Tt,kt);Tt=ir[0],kt=ir[1],wt=bt(Tt,kt),ct.moveFn=It,ct.doneFn=Qt,c(lt)},at.vangles&&!x.isFullCircle(at.sectorInRad)&&(ct.prepFn=x.noop,A(f.select(ot),null)),b.init(ct)},$.isPtInside=function(st){if(this.isSmith)return!0;var at=this.sectorInRad,lt=this.vangles,F=this.angularAxis.c2g(st.theta),H=this.radialAxis,et=H.c2l(st.r),q=H._rl,W=lt?D.isPtInsidePolygon:x.isPtInsideSector;return W(et,F,q,at,lt)},$.pathArc=function(st){var at=this.sectorInRad,lt=this.vangles,F=lt?D.pathPolygon:x.pathArc;return F(st,at[0],at[1],lt)},$.pathSector=function(st){var at=this.sectorInRad,lt=this.vangles,F=lt?D.pathPolygon:x.pathSector;return F(st,at[0],at[1],lt)},$.pathAnnulus=function(st,at){var lt=this.sectorInRad,F=this.vangles,H=F?D.pathPolygonAnnulus:x.pathAnnulus;return H(st,at,lt[0],lt[1],F)},$.pathSubplot=function(){var st=this.innerRadius,at=this.radius;return st?this.pathAnnulus(st,at):this.pathSector(at)},$.fillViewInitialKey=function(st,at){st in this.viewInitial||(this.viewInitial[st]=at)};function tt(st){var at=st.ticks+String(st.ticklen)+String(st.showticklabels);return"side"in st&&(at+=st.side),at}function Z(st){var at=st[0],lt=st[1],F=lt-at,H=I(at,360),et=H+F,q=Math.cos(U(H)),W=Math.sin(U(H)),K=Math.cos(U(et)),nt=Math.sin(U(et)),it,ot,ct,bt;return H<=90&&et>=90||H>90&&et>=450?bt=1:W<=0&&nt<=0?bt=0:bt=Math.max(W,nt),H<=180&&et>=180||H>180&&et>=540?it=-1:q>=0&&K>=0?it=0:it=Math.min(q,K),H<=270&&et>=270||H>270&&et>=630?ot=-1:W>=0&&nt>=0?ot=0:ot=Math.min(W,nt),et>=360?ct=1:q<=0&&K<=0?ct=0:ct=Math.max(q,K),[it,ot,ct,bt]}function X(st,at){var lt=function(H){return x.angleDist(st,H)},F=x.findIndexOfMin(at,lt);return at[F]}function J(st,at,lt){return at?(st.attr("display",null),st.attr(lt)):st&&st.attr("display","none"),st}},{"../../components/color":367,"../../components/dragelement":386,"../../components/drawing":389,"../../components/fx":407,"../../components/selections":455,"../../components/titles":476,"../../constants/alignment":483,"../../lib":515,"../../lib/clear_gl_canvases":499,"../../lib/setcursor":536,"../../plot_api/subroutines":556,"../../plots/cartesian/axes":566,"../../registry":647,"../cartesian/autorange":565,"../cartesian/dragbox":575,"../cartesian/set_convert":585,"../plots":628,"../smith/helpers":637,"./constants":629,"./helpers":630,"./set_convert":635,"@plotly/d3":58,tinycolor2:313}],635:[function(e,B,V){var f=e("../../lib"),l=e("../cartesian/set_convert"),m=f.deg2rad,x=f.rad2deg;B.exports=function(d,s,o){switch(l(d,o),d._id){case"x":case"radialaxis":t(d,s);break;case"angularaxis":r(d,s);break}};function t(n,d){var s=d._subplot;n.setGeometry=function(){var o=n._rl[0],y=n._rl[1],g=s.innerRadius,b=(s.radius-g)/(y-o),v=g/b,_=o>y?function(u){return u<=0}:function(u){return u>=0};n.c2g=function(u){var T=n.c2l(u)-o;return(_(T)?T:0)+v},n.g2c=function(u){return n.l2c(u+o-v)},n.g2p=function(u){return u*b},n.c2p=function(u){return n.g2p(n.c2g(u))}}}function a(n,d){return d==="degrees"?m(n):n}function i(n,d){return d==="degrees"?x(n):n}function r(n,d){var s=n.type;if(s==="linear"){var o=n.d2c,y=n.c2d;n.d2c=function(g,b){return a(o(g),b)},n.c2d=function(g,b){return y(i(g,b))}}n.makeCalcdata=function(g,b){var v=g[b],_=g._length,u,T,c=function(h){return n.d2c(h,g.thetaunit)};if(v){if(f.isTypedArray(v)&&s==="linear"){if(_===v.length)return v;if(v.subarray)return v.subarray(0,_)}for(u=new Array(_),T=0;T<_;T++)u[T]=c(v[T])}else{var A=b+"0",k="d"+b,p=A in g?c(g[A]):0,w=g[k]?c(g[k]):(n.period||2*Math.PI)/_;for(u=new Array(_),T=0;T<_;T++)u[T]=p+T*w}return u},n.setGeometry=function(){var g=d.sector,b=g.map(m),v={clockwise:-1,counterclockwise:1}[n.direction],_=m(n.rotation),u=function(D){return v*D+_},T=function(D){return(D-_)/v},c,A,k,p;switch(s){case"linear":A=c=f.identity,p=m,k=x,n.range=f.isFullCircle(b)?[g[0],g[0]+360]:b.map(T).map(x);break;case"category":var w=n._categories.length,h=n.period?Math.max(n.period,w):w;h===0&&(h=1),A=p=function(D){return D*2*Math.PI/h},c=k=function(D){return D*h/Math.PI/2},n.range=[0,h];break}n.c2g=function(D){return u(A(D))},n.g2c=function(D){return c(T(D))},n.t2g=function(D){return u(p(D))},n.g2t=function(D){return k(T(D))}}}},{"../../lib":515,"../cartesian/set_convert":585}],636:[function(e,B,V){B.exports={attr:"subplot",name:"smith",axisNames:["realaxis","imaginaryaxis"],axisName2dataArray:{imaginaryaxis:"imag",realaxis:"real"}}},{}],637:[function(e,B,V){function f(i){return i<0?-1:i>0?1:0}function l(i){var r=i[0],n=i[1];if(!isFinite(r)||!isFinite(n))return[1,0];var d=(r+1)*(r+1)+n*n;return[(r*r+n*n-1)/d,2*n/d]}function m(i,r){var n=r[0],d=r[1];return[n*i.radius+i.cx,-d*i.radius+i.cy]}function x(i,r){return r*i.radius}function t(i,r,n,d){var s=m(i,l([n,r])),o=s[0],y=s[1],g=m(i,l([d,r])),b=g[0],v=g[1];if(r===0)return["M"+o+","+y,"L"+b+","+v].join(" ");var _=x(i,1/Math.abs(r));return["M"+o+","+y,"A"+_+","+_+" 0 0,"+(r<0?1:0)+" "+b+","+v].join(" ")}function a(i,r,n,d){var s=x(i,1/(r+1)),o=m(i,l([r,n])),y=o[0],g=o[1],b=m(i,l([r,d])),v=b[0],_=b[1];if(f(n)!==f(d)){var u=m(i,l([r,0])),T=u[0],c=u[1];return["M"+y+","+g,"A"+s+","+s+" 0 0,"+(0<n?0:1)+" "+T+","+c,"A"+s+","+s+" 0 0,"+(d<0?0:1)+v+","+_].join(" ")}return["M"+y+","+g,"A"+s+","+s+" 0 0,"+(d<n?0:1)+" "+v+","+_].join(" ")}B.exports={smith:l,reactanceArc:t,resistanceArc:a,smithTransform:m}},{}],638:[function(e,B,V){var f=e("../get_data").getSubplotCalcData,l=e("../../lib").counterRegex,m=e("../polar/polar"),x=e("./constants"),t=x.attr,a=x.name,i=l(a),r={};r[t]={valType:"subplotid",dflt:a,editType:"calc"};function n(s){for(var o=s._fullLayout,y=s.calcdata,g=o._subplots[a],b=0;b<g.length;b++){var v=g[b],_=f(y,a,v),u=o[v]._subplot;u||(u=m(s,v,!0),o[v]._subplot=u),u.plot(_,o,s._promises)}}function d(s,o,y,g){for(var b=g._subplots[a]||[],v=0;v<b.length;v++){var _=b[v],u=g[_]._subplot;if(!o[_]&&!!u){u.framework.remove();for(var T in u.clipPaths)u.clipPaths[T].remove()}}}B.exports={attr:t,name:a,idRoot:a,idRegex:i,attrRegex:i,attributes:r,layoutAttributes:e("./layout_attributes"),supplyLayoutDefaults:e("./layout_defaults"),plot:n,clean:d,toSVG:e("../cartesian").toSVG}},{"../../lib":515,"../cartesian":578,"../get_data":602,"../polar/polar":634,"./constants":636,"./layout_attributes":639,"./layout_defaults":640}],639:[function(e,B,V){var f=e("../../components/color/attributes"),l=e("../cartesian/layout_attributes"),m=e("../domain").attributes,x=e("../../lib").extendFlat,t=e("../../plot_api/edit_types").overrideAll,a=t({color:l.color,showline:x({},l.showline,{dflt:!0}),linecolor:l.linecolor,linewidth:l.linewidth,showgrid:x({},l.showgrid,{dflt:!0}),gridcolor:l.gridcolor,gridwidth:l.gridwidth,griddash:l.griddash},"plot","from-root"),i=t({ticklen:l.ticklen,tickwidth:x({},l.tickwidth,{dflt:2}),tickcolor:l.tickcolor,showticklabels:l.showticklabels,showtickprefix:l.showtickprefix,tickprefix:l.tickprefix,showticksuffix:l.showticksuffix,ticksuffix:l.ticksuffix,tickfont:l.tickfont,tickformat:l.tickformat,hoverformat:l.hoverformat,layer:l.layer},"plot","from-root"),r=x({visible:x({},l.visible,{dflt:!0}),tickvals:{dflt:[.2,.5,1,2,5],valType:"data_array",editType:"plot"},tickangle:x({},l.tickangle,{dflt:90}),ticks:{valType:"enumerated",values:["top","bottom",""],editType:"ticks"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},editType:"calc"},a,i),n=x({visible:x({},l.visible,{dflt:!0}),tickvals:{valType:"data_array",editType:"plot"},ticks:l.ticks,editType:"calc"},a,i);B.exports={domain:m({name:"smith",editType:"plot"}),bgcolor:{valType:"color",editType:"plot",dflt:f.background},realaxis:r,imaginaryaxis:n,editType:"calc"}},{"../../components/color/attributes":366,"../../lib":515,"../../plot_api/edit_types":548,"../cartesian/layout_attributes":579,"../domain":593}],640:[function(e,B,V){var f=e("../../lib"),l=e("../../components/color"),m=e("../../plot_api/plot_template"),x=e("../subplot_defaults"),t=e("../get_data").getSubplotData,a=e("../cartesian/prefix_suffix_defaults"),i=e("../cartesian/tick_label_defaults"),r=e("../cartesian/line_grid_defaults"),n=e("../cartesian/set_convert"),d=e("./layout_attributes"),s=e("./constants"),o=s.axisNames,y=b(function(v){return v.slice().reverse().map(function(_){return-_}).concat([0]).concat(v)},String);function g(v,_,u,T){var c=u("bgcolor");T.bgColor=l.combine(c,T.paper_bgcolor);var A=t(T.fullData,s.name,T.id),k=T.layoutOut,p;function w($,tt){return u(p+"."+$,tt)}for(var h=0;h<o.length;h++){p=o[h],f.isPlainObject(v[p])||(v[p]={});var D=v[p],S=m.newContainer(_,p);S._id=S._name=p,S._attr=T.id+"."+p,S._traceIndices=A.map(function($){return $._expandedIndex});var M=w("visible");if(S.type="linear",n(S,k),a(D,S,w,S.type),M){var L=p==="realaxis";if(L&&w("side"),L)w("tickvals");else{var R=y(_.realaxis.tickvals||d.realaxis.tickvals.dflt);w("tickvals",R)}var z,P,I,U,O=T.font||{};M&&(z=w("color"),P=z===D.color?z:O.color,I=O.size,U=O.family),i(D,S,w,S.type,{noTicklabelstep:!0,noAng:!L,noExp:!0,font:{color:P,size:I,family:U}}),f.coerce2(v,_,d,p+".ticklen"),f.coerce2(v,_,d,p+".tickwidth"),f.coerce2(v,_,d,p+".tickcolor",_.color);var G=w("ticks");G||(delete _[p].ticklen,delete _[p].tickwidth,delete _[p].tickcolor),r(D,S,w,{dfltColor:z,bgColor:T.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:d[p]}),w("layer")}w("hoverformat"),delete S.type,S._input=D}}B.exports=function(_,u,T){x(_,u,T,{noUirevision:!0,type:s.name,attributes:d,handleDefaults:g,font:u.font,paper_bgcolor:u.paper_bgcolor,fullData:T,layoutOut:u})};function b(v,_){var u={};return function(T){var c=_?_(T):T;if(c in u)return u[c];var A=v(T);return u[c]=A,A}}},{"../../components/color":367,"../../lib":515,"../../plot_api/plot_template":555,"../cartesian/line_grid_defaults":581,"../cartesian/prefix_suffix_defaults":583,"../cartesian/set_convert":585,"../cartesian/tick_label_defaults":587,"../get_data":602,"../subplot_defaults":641,"./constants":636,"./layout_attributes":639}],641:[function(e,B,V){var f=e("../lib"),l=e("../plot_api/plot_template"),m=e("./domain").defaults;B.exports=function(t,a,i,r){var n=r.type,d=r.attributes,s=r.handleDefaults,o=r.partition||"x",y=a._subplots[n],g=y.length,b=g&&y[0].replace(/\d+$/,""),v,_;function u(k,p){return f.coerce(v,_,d,k,p)}for(var T=0;T<g;T++){var c=y[T];t[c]?v=t[c]:v=t[c]={},_=l.newContainer(a,c,b),r.noUirevision||u("uirevision",a.uirevision);var A={};A[o]=[T/g,(T+1)/g],m(_,a,u,A),r.id=c,s(v,_,u,r)}}},{"../lib":515,"../plot_api/plot_template":555,"./domain":593}],642:[function(e,B,V){var f=e("../constants/docs");f.FORMAT_LINK,f.DATE_FORMAT_LINK;function l(m){var x=m.description?" "+m.description:"",t=m.keys||[];if(t.length>0){for(var a=[],i=0;i<t.length;i++)a[i]="`"+t[i]+"`";x=x+"Finally, the template string has access to ",t.length===1?x="variable "+a[0]:x="variables "+a.slice(0,-1).join(", ")+" and "+a.slice(-1)+"."}return x}V.hovertemplateAttrs=function(m,x){m=m||{},x=x||{},l(x);var t={valType:"string",dflt:"",editType:m.editType||"none"};return m.arrayOk!==!1&&(t.arrayOk=!0),t},V.texttemplateAttrs=function(m,x){m=m||{},x=x||{},l(x);var t={valType:"string",dflt:"",editType:m.editType||"calc"};return m.arrayOk!==!1&&(t.arrayOk=!0),t}},{"../constants/docs":486}],643:[function(e,B,V){var f=e("./ternary"),l=e("../../plots/get_data").getSubplotCalcData,m=e("../../lib").counterRegex,x="ternary";V.name=x;var t=V.attr="subplot";V.idRoot=x,V.idRegex=V.attrRegex=m(x);var a=V.attributes={};a[t]={valType:"subplotid",dflt:"ternary",editType:"calc"},V.layoutAttributes=e("./layout_attributes"),V.supplyLayoutDefaults=e("./layout_defaults"),V.plot=function(r){for(var n=r._fullLayout,d=r.calcdata,s=n._subplots[x],o=0;o<s.length;o++){var y=s[o],g=l(d,x,y),b=n[y]._subplot;b||(b=new f({id:y,graphDiv:r,container:n._ternarylayer.node()},n),n[y]._subplot=b),b.plot(g,n,r._promises)}},V.clean=function(i,r,n,d){for(var s=d._subplots[x]||[],o=0;o<s.length;o++){var y=s[o],g=d[y]._subplot;!r[y]&&!!g&&(g.plotContainer.remove(),g.clipDef.remove(),g.clipDefRelative.remove(),g.layers["a-title"].remove(),g.layers["b-title"].remove(),g.layers["c-title"].remove())}}},{"../../lib":515,"../../plots/get_data":602,"./layout_attributes":644,"./layout_defaults":645,"./ternary":646}],644:[function(e,B,V){var f=e("../../components/color/attributes"),l=e("../domain").attributes,m=e("../cartesian/layout_attributes"),x=e("../../plot_api/edit_types").overrideAll,t=e("../../lib/extend").extendFlat,a={title:{text:m.title.text,font:m.title.font},color:m.color,tickmode:m.tickmode,nticks:t({},m.nticks,{dflt:6,min:1}),tick0:m.tick0,dtick:m.dtick,tickvals:m.tickvals,ticktext:m.ticktext,ticks:m.ticks,ticklen:m.ticklen,tickwidth:m.tickwidth,tickcolor:m.tickcolor,ticklabelstep:m.ticklabelstep,showticklabels:m.showticklabels,showtickprefix:m.showtickprefix,tickprefix:m.tickprefix,showticksuffix:m.showticksuffix,ticksuffix:m.ticksuffix,showexponent:m.showexponent,exponentformat:m.exponentformat,minexponent:m.minexponent,separatethousands:m.separatethousands,tickfont:m.tickfont,tickangle:m.tickangle,tickformat:m.tickformat,tickformatstops:m.tickformatstops,hoverformat:m.hoverformat,showline:t({},m.showline,{dflt:!0}),linecolor:m.linecolor,linewidth:m.linewidth,showgrid:t({},m.showgrid,{dflt:!0}),gridcolor:m.gridcolor,gridwidth:m.gridwidth,griddash:m.griddash,layer:m.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:m._deprecated.title,titlefont:m._deprecated.titlefont}},i=B.exports=x({domain:l({name:"ternary"}),bgcolor:{valType:"color",dflt:f.background},sum:{valType:"number",dflt:1,min:0},aaxis:a,baxis:a,caxis:a},"plot","from-root");i.uirevision={valType:"any",editType:"none"},i.aaxis.uirevision=i.baxis.uirevision=i.caxis.uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":366,"../../lib/extend":505,"../../plot_api/edit_types":548,"../cartesian/layout_attributes":579,"../domain":593}],645:[function(e,B,V){var f=e("../../components/color"),l=e("../../plot_api/plot_template"),m=e("../../lib"),x=e("../subplot_defaults"),t=e("../cartesian/tick_label_defaults"),a=e("../cartesian/prefix_suffix_defaults"),i=e("../cartesian/tick_mark_defaults"),r=e("../cartesian/tick_value_defaults"),n=e("../cartesian/line_grid_defaults"),d=e("./layout_attributes"),s=["aaxis","baxis","caxis"];B.exports=function(b,v,_){x(b,v,_,{type:"ternary",attributes:d,handleDefaults:o,font:v.font,paper_bgcolor:v.paper_bgcolor})};function o(g,b,v,_){var u=v("bgcolor"),T=v("sum");_.bgColor=f.combine(u,_.paper_bgcolor);for(var c,A,k,p=0;p<s.length;p++)c=s[p],A=g[c]||{},k=l.newContainer(b,c),k._name=c,y(A,k,_,b);var w=b.aaxis,h=b.baxis,D=b.caxis;w.min+h.min+D.min>=T&&(w.min=0,h.min=0,D.min=0,g.aaxis&&delete g.aaxis.min,g.baxis&&delete g.baxis.min,g.caxis&&delete g.caxis.min)}function y(g,b,v,_){var u=d[b._name];function T(S,M){return m.coerce(g,b,u,S,M)}T("uirevision",_.uirevision),b.type="linear";var c=T("color"),A=c!==u.color.dflt?c:v.font.color,k=b._name,p=k.charAt(0).toUpperCase(),w="Component "+p,h=T("title.text",w);b._hovertitle=h===w?h:p,m.coerceFont(T,"title.font",{family:v.font.family,size:m.bigFont(v.font.size),color:A}),T("min"),r(g,b,T,"linear"),a(g,b,T,"linear"),t(g,b,T,"linear"),i(g,b,T,{outerTicks:!0});var D=T("showticklabels");D&&(m.coerceFont(T,"tickfont",{family:v.font.family,size:v.font.size,color:A}),T("tickangle"),T("tickformat")),n(g,b,T,{dfltColor:c,bgColor:v.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:u}),T("hoverformat"),T("layer")}},{"../../components/color":367,"../../lib":515,"../../plot_api/plot_template":555,"../cartesian/line_grid_defaults":581,"../cartesian/prefix_suffix_defaults":583,"../cartesian/tick_label_defaults":587,"../cartesian/tick_mark_defaults":588,"../cartesian/tick_value_defaults":589,"../subplot_defaults":641,"./layout_attributes":644}],646:[function(e,B,V){var f=e("@plotly/d3"),l=e("tinycolor2"),m=e("../../registry"),x=e("../../lib"),t=x.strTranslate,a=x._,i=e("../../components/color"),r=e("../../components/drawing"),n=e("../cartesian/set_convert"),d=e("../../lib/extend").extendFlat,s=e("../plots"),o=e("../cartesian/axes"),y=e("../../components/dragelement"),g=e("../../components/fx"),b=e("../../components/dragelement/helpers"),v=b.freeMode,_=b.rectMode,u=e("../../components/titles"),T=e("../../components/selections").prepSelect,c=e("../../components/selections").selectOnClick,A=e("../../components/selections").clearOutline,k=e("../../components/selections").clearSelectionsCache,p=e("../cartesian/constants");function w(O,G){this.id=O.id,this.graphDiv=O.graphDiv,this.init(G),this.makeFramework(G),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}B.exports=w;var h=w.prototype;h.init=function(O){this.container=O._ternarylayer,this.defs=O._defs,this.layoutId=O._uid,this.traceHash={},this.layers={}},h.plot=function(O,G){var $=this,tt=G[$.id],Z=G._size;$._hasClipOnAxisFalse=!1;for(var X=0;X<O.length;X++){var J=O[X][0].trace;if(J.cliponaxis===!1){$._hasClipOnAxisFalse=!0;break}}$.updateLayers(tt),$.adjustLayout(tt,Z),s.generalUpdatePerTraceModule($.graphDiv,$,O,tt),$.layers.plotbg.select("path").call(i.fill,tt.bgcolor)},h.makeFramework=function(O){var G=this,$=G.graphDiv,tt=O[G.id],Z=G.clipId="clip"+G.layoutId+G.id,X=G.clipIdRelative="clip-relative"+G.layoutId+G.id;G.clipDef=x.ensureSingleById(O._clips,"clipPath",Z,function(J){J.append("path").attr("d","M0,0Z")}),G.clipDefRelative=x.ensureSingleById(O._clips,"clipPath",X,function(J){J.append("path").attr("d","M0,0Z")}),G.plotContainer=x.ensureSingle(G.container,"g",G.id),G.updateLayers(tt),r.setClipUrl(G.layers.backplot,Z,$),r.setClipUrl(G.layers.grids,Z,$)},h.updateLayers=function(O){var G=this,$=G.layers,tt=["draglayer","plotbg","backplot","grids"];O.aaxis.layer==="below traces"&&tt.push("aaxis","aline"),O.baxis.layer==="below traces"&&tt.push("baxis","bline"),O.caxis.layer==="below traces"&&tt.push("caxis","cline"),tt.push("frontplot"),O.aaxis.layer==="above traces"&&tt.push("aaxis","aline"),O.baxis.layer==="above traces"&&tt.push("baxis","bline"),O.caxis.layer==="above traces"&&tt.push("caxis","cline");var Z=G.plotContainer.selectAll("g.toplevel").data(tt,String),X=["agrid","bgrid","cgrid"];Z.enter().append("g").attr("class",function(J){return"toplevel "+J}).each(function(J){var st=f.select(this);$[J]=st,J==="frontplot"?st.append("g").classed("scatterlayer",!0):J==="backplot"?st.append("g").classed("maplayer",!0):J==="plotbg"?st.append("path").attr("d","M0,0Z"):J==="aline"||J==="bline"||J==="cline"?st.append("path"):J==="grids"&&X.forEach(function(at){$[at]=st.append("g").classed("grid "+at,!0)})}),Z.order()};var D=Math.sqrt(4/3);h.adjustLayout=function(O,G){var $=this,tt=O.domain,Z=(tt.x[0]+tt.x[1])/2,X=(tt.y[0]+tt.y[1])/2,J=tt.x[1]-tt.x[0],st=tt.y[1]-tt.y[0],at=J*G.w,lt=st*G.h,F=O.sum,H=O.aaxis.min,et=O.baxis.min,q=O.caxis.min,W,K,nt,it,ot,ct;at>D*lt?(it=lt,nt=it*D):(nt=at,it=nt/D),ot=J*nt/at,ct=st*it/lt,W=G.l+G.w*Z-nt/2,K=G.t+G.h*(1-X)-it/2,$.x0=W,$.y0=K,$.w=nt,$.h=it,$.sum=F,$.xaxis={type:"linear",range:[H+2*q-F,F-H-2*et],domain:[Z-ot/2,Z+ot/2],_id:"x"},n($.xaxis,$.graphDiv._fullLayout),$.xaxis.setScale(),$.xaxis.isPtWithinRange=function(It){return It.a>=$.aaxis.range[0]&&It.a<=$.aaxis.range[1]&&It.b>=$.baxis.range[1]&&It.b<=$.baxis.range[0]&&It.c>=$.caxis.range[1]&&It.c<=$.caxis.range[0]},$.yaxis={type:"linear",range:[H,F-et-q],domain:[X-ct/2,X+ct/2],_id:"y"},n($.yaxis,$.graphDiv._fullLayout),$.yaxis.setScale(),$.yaxis.isPtWithinRange=function(){return!0};var bt=$.yaxis.domain[0],ut=$.aaxis=d({},O.aaxis,{range:[H,F-et-q],side:"left",tickangle:(+O.aaxis.tickangle||0)-30,domain:[bt,bt+ct*D],anchor:"free",position:0,_id:"y",_length:nt});n(ut,$.graphDiv._fullLayout),ut.setScale();var pt=$.baxis=d({},O.baxis,{range:[F-H-q,et],side:"bottom",domain:$.xaxis.domain,anchor:"free",position:0,_id:"x",_length:nt});n(pt,$.graphDiv._fullLayout),pt.setScale();var yt=$.caxis=d({},O.caxis,{range:[F-H-et,q],side:"right",tickangle:(+O.caxis.tickangle||0)+30,domain:[bt,bt+ct*D],anchor:"free",position:0,_id:"y",_length:nt});n(yt,$.graphDiv._fullLayout),yt.setScale();var Tt="M"+W+","+(K+it)+"h"+nt+"l-"+nt/2+",-"+it+"Z";$.clipDef.select("path").attr("d",Tt),$.layers.plotbg.select("path").attr("d",Tt);var kt="M0,"+it+"h"+nt+"l-"+nt/2+",-"+it+"Z";$.clipDefRelative.select("path").attr("d",kt);var zt=t(W,K);$.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",zt),$.clipDefRelative.select("path").attr("transform",null);var Rt=t(W-pt._offset,K+it);$.layers.baxis.attr("transform",Rt),$.layers.bgrid.attr("transform",Rt);var Gt=t(W+nt/2,K)+"rotate(30)"+t(0,-ut._offset);$.layers.aaxis.attr("transform",Gt),$.layers.agrid.attr("transform",Gt);var wt=t(W+nt/2,K)+"rotate(-30)"+t(0,-yt._offset);$.layers.caxis.attr("transform",wt),$.layers.cgrid.attr("transform",wt),$.drawAxes(!0),$.layers.aline.select("path").attr("d",ut.showline?"M"+W+","+(K+it)+"l"+nt/2+",-"+it:"M0,0").call(i.stroke,ut.linecolor||"#000").style("stroke-width",(ut.linewidth||0)+"px"),$.layers.bline.select("path").attr("d",pt.showline?"M"+W+","+(K+it)+"h"+nt:"M0,0").call(i.stroke,pt.linecolor||"#000").style("stroke-width",(pt.linewidth||0)+"px"),$.layers.cline.select("path").attr("d",yt.showline?"M"+(W+nt/2)+","+K+"l"+nt/2+","+it:"M0,0").call(i.stroke,yt.linecolor||"#000").style("stroke-width",(yt.linewidth||0)+"px"),$.graphDiv._context.staticPlot||$.initInteractions(),r.setClipUrl($.layers.frontplot,$._hasClipOnAxisFalse?null:$.clipId,$.graphDiv)},h.drawAxes=function(O){var G=this,$=G.graphDiv,tt=G.id.substr(7)+"title",Z=G.layers,X=G.aaxis,J=G.baxis,st=G.caxis;if(G.drawAx(X),G.drawAx(J),G.drawAx(st),O){var at=Math.max(X.showticklabels?X.tickfont.size/2:0,(st.showticklabels?st.tickfont.size*.75:0)+(st.ticks==="outside"?st.ticklen*.87:0)),lt=(J.showticklabels?J.tickfont.size:0)+(J.ticks==="outside"?J.ticklen:0)+3;Z["a-title"]=u.draw($,"a"+tt,{propContainer:X,propName:G.id+".aaxis.title",placeholder:a($,"Click to enter Component A title"),attributes:{x:G.x0+G.w/2,y:G.y0-X.title.font.size/3-at,"text-anchor":"middle"}}),Z["b-title"]=u.draw($,"b"+tt,{propContainer:J,propName:G.id+".baxis.title",placeholder:a($,"Click to enter Component B title"),attributes:{x:G.x0-lt,y:G.y0+G.h+J.title.font.size*.83+lt,"text-anchor":"middle"}}),Z["c-title"]=u.draw($,"c"+tt,{propContainer:st,propName:G.id+".caxis.title",placeholder:a($,"Click to enter Component C title"),attributes:{x:G.x0+G.w+lt,y:G.y0+G.h+st.title.font.size*.83+lt,"text-anchor":"middle"}})}},h.drawAx=function(O){var G=this,$=G.graphDiv,tt=O._name,Z=tt.charAt(0),X=O._id,J=G.layers[tt],st=30,at=Z+"tickLayout",lt=S(O);G[at]!==lt&&(J.selectAll("."+X+"tick").remove(),G[at]=lt),O.setScale();var F=o.calcTicks(O),H=o.clipEnds(O,F),et=o.makeTransTickFn(O),q=o.getTickSigns(O)[2],W=x.deg2rad(st),K=q*(O.linewidth||1)/2,nt=q*O.ticklen,it=G.w,ot=G.h,ct=Z==="b"?"M0,"+K+"l"+Math.sin(W)*nt+","+Math.cos(W)*nt:"M"+K+",0l"+Math.cos(W)*nt+","+-Math.sin(W)*nt,bt={a:"M0,0l"+ot+",-"+it/2,b:"M0,0l-"+it/2+",-"+ot,c:"M0,0l-"+ot+","+it/2}[Z];o.drawTicks($,O,{vals:O.ticks==="inside"?H:F,layer:J,path:ct,transFn:et,crisp:!1}),o.drawGrid($,O,{vals:H,layer:G.layers[Z+"grid"],path:bt,transFn:et,crisp:!1}),o.drawLabels($,O,{vals:F,layer:J,transFn:et,labelFns:o.makeLabelFns(O,0,st)})};function S(O){return O.ticks+String(O.ticklen)+String(O.showticklabels)}var M=p.MINZOOM/2+.87,L="m-0.87,.5h"+M+"v3h-"+(M+5.2)+"l"+(M/2+2.6)+",-"+(M*.87+4.5)+"l2.6,1.5l-"+M/2+","+M*.87+"Z",R="m0.87,.5h-"+M+"v3h"+(M+5.2)+"l-"+(M/2+2.6)+",-"+(M*.87+4.5)+"l-2.6,1.5l"+M/2+","+M*.87+"Z",z="m0,1l"+M/2+","+M*.87+"l2.6,-1.5l-"+(M/2+2.6)+",-"+(M*.87+4.5)+"l-"+(M/2+2.6)+","+(M*.87+4.5)+"l2.6,1.5l"+M/2+",-"+M*.87+"Z",P="m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2Z",I=!0;h.clearOutline=function(){k(this.dragOptions),A(this.dragOptions.gd)},h.initInteractions=function(){var O=this,G=O.layers.plotbg.select("path").node(),$=O.graphDiv,tt=$._fullLayout._zoomlayer,Z,X;this.dragOptions={element:G,gd:$,plotinfo:{id:O.id,domain:$._fullLayout[O.id].domain,xaxis:O.xaxis,yaxis:O.yaxis},subplot:O.id,prepFn:function(Rt,Gt,wt){O.dragOptions.xaxes=[O.xaxis],O.dragOptions.yaxes=[O.yaxis],Z=$._fullLayout._invScaleX,X=$._fullLayout._invScaleY;var It=O.dragOptions.dragmode=$._fullLayout.dragmode;v(It)?O.dragOptions.minDrag=1:O.dragOptions.minDrag=void 0,It==="zoom"?(O.dragOptions.moveFn=pt,O.dragOptions.clickFn=it,O.dragOptions.doneFn=yt,ot(Rt,Gt,wt)):It==="pan"?(O.dragOptions.moveFn=kt,O.dragOptions.clickFn=it,O.dragOptions.doneFn=zt,Tt(),O.clearOutline($)):(_(It)||v(It))&&T(Rt,Gt,wt,O.dragOptions,It)}};var J,st,at,lt,F,H,et,q,W,K;function nt(Rt){var Gt={};return Gt[O.id+".aaxis.min"]=Rt.a,Gt[O.id+".baxis.min"]=Rt.b,Gt[O.id+".caxis.min"]=Rt.c,Gt}function it(Rt,Gt){var wt=$._fullLayout.clickmode;U($),Rt===2&&($.emit("plotly_doubleclick",null),m.call("_guiRelayout",$,nt({a:0,b:0,c:0}))),wt.indexOf("select")>-1&&Rt===1&&c(Gt,$,[O.xaxis],[O.yaxis],O.id,O.dragOptions),wt.indexOf("event")>-1&&g.click($,Gt,O.id)}function ot(Rt,Gt,wt){var It=G.getBoundingClientRect();J=Gt-It.left,st=wt-It.top,$._fullLayout._calcInverseTransform($);var $t=$._fullLayout._invTransform,Qt=x.apply3DTransform($t)(J,st);J=Qt[0],st=Qt[1],at={a:O.aaxis.range[0],b:O.baxis.range[1],c:O.caxis.range[1]},F=at,lt=O.aaxis.range[1]-at.a,H=l(O.graphDiv._fullLayout[O.id].bgcolor).getLuminance(),et="M0,"+O.h+"L"+O.w/2+", 0L"+O.w+","+O.h+"Z",q=!1,W=tt.append("path").attr("class","zoombox").attr("transform",t(O.x0,O.y0)).style({fill:H>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",et),K=tt.append("path").attr("class","zoombox-corners").attr("transform",t(O.x0,O.y0)).style({fill:i.background,stroke:i.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),O.clearOutline($)}function ct(Rt,Gt){return 1-Gt/O.h}function bt(Rt,Gt){return 1-(Rt+(O.h-Gt)/Math.sqrt(3))/O.w}function ut(Rt,Gt){return(Rt-(O.h-Gt)/Math.sqrt(3))/O.w}function pt(Rt,Gt){var wt=J+Rt*Z,It=st+Gt*X,$t=Math.max(0,Math.min(1,ct(J,st),ct(wt,It))),Qt=Math.max(0,Math.min(1,bt(J,st),bt(wt,It))),Nt=Math.max(0,Math.min(1,ut(J,st),ut(wt,It))),Pt=($t/2+Nt)*O.w,Yt=(1-$t/2-Qt)*O.w,ve=(Pt+Yt)/2,Re=Yt-Pt,ir=(1-$t)*O.h,Ie=ir-Re/D;Re<p.MINZOOM?(F=at,W.attr("d",et),K.attr("d","M0,0Z")):(F={a:at.a+$t*lt,b:at.b+Qt*lt,c:at.c+Nt*lt},W.attr("d",et+"M"+Pt+","+ir+"H"+Yt+"L"+ve+","+Ie+"L"+Pt+","+ir+"Z"),K.attr("d","M"+J+","+st+P+"M"+Pt+","+ir+L+"M"+Yt+","+ir+R+"M"+ve+","+Ie+z)),q||(W.transition().style("fill",H>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),K.transition().style("opacity",1).duration(200),q=!0),$.emit("plotly_relayouting",nt(F))}function yt(){U($),F!==at&&(m.call("_guiRelayout",$,nt(F)),I&&$.data&&$._context.showTips&&(x.notifier(a($,"Double-click to zoom back out"),"long"),I=!1))}function Tt(){at={a:O.aaxis.range[0],b:O.baxis.range[1],c:O.caxis.range[1]},F=at}function kt(Rt,Gt){var wt=Rt/O.xaxis._m,It=Gt/O.yaxis._m;F={a:at.a-It,b:at.b+(wt+It)/2,c:at.c-(wt-It)/2};var $t=[F.a,F.b,F.c].sort(x.sorterAsc),Qt={a:$t.indexOf(F.a),b:$t.indexOf(F.b),c:$t.indexOf(F.c)};$t[0]<0&&($t[1]+$t[0]/2<0?($t[2]+=$t[0]+$t[1],$t[0]=$t[1]=0):($t[2]+=$t[0]/2,$t[1]+=$t[0]/2,$t[0]=0),F={a:$t[Qt.a],b:$t[Qt.b],c:$t[Qt.c]},Gt=(at.a-F.a)*O.yaxis._m,Rt=(at.c-F.c-at.b+F.b)*O.xaxis._m);var Nt=t(O.x0+Rt,O.y0+Gt);O.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",Nt);var Pt=t(-Rt,-Gt);O.clipDefRelative.select("path").attr("transform",Pt),O.aaxis.range=[F.a,O.sum-F.b-F.c],O.baxis.range=[O.sum-F.a-F.c,F.b],O.caxis.range=[O.sum-F.a-F.b,F.c],O.drawAxes(!1),O._hasClipOnAxisFalse&&O.plotContainer.select(".scatterlayer").selectAll(".trace").call(r.hideOutsideRangePoints,O),$.emit("plotly_relayouting",nt(F))}function zt(){m.call("_guiRelayout",$,nt(F))}G.onmousemove=function(Rt){g.hover($,Rt,O.id),$._fullLayout._lasthover=G,$._fullLayout._hoversubplot=O.id},G.onmouseout=function(Rt){$._dragging||y.unhover($,Rt)},y.init(this.dragOptions)};function U(O){f.select(O).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}},{"../../components/color":367,"../../components/dragelement":386,"../../components/dragelement/helpers":385,"../../components/drawing":389,"../../components/fx":407,"../../components/selections":455,"../../components/titles":476,"../../lib":515,"../../lib/extend":505,"../../registry":647,"../cartesian/axes":566,"../cartesian/constants":573,"../cartesian/set_convert":585,"../plots":628,"@plotly/d3":58,tinycolor2:313}],647:[function(e,B,V){var f=e("./lib/loggers"),l=e("./lib/noop"),m=e("./lib/push_unique"),x=e("./lib/is_plain_object"),t=e("./lib/dom").addStyleRule,a=e("./lib/extend"),i=e("./plots/attributes"),r=e("./plots/layout_attributes"),n=a.extendFlat,d=a.extendDeepAll;V.modules={},V.allCategories={},V.allTypes=[],V.subplotsRegistry={},V.transformsRegistry={},V.componentsRegistry={},V.layoutArrayContainers=[],V.layoutArrayRegexes=[],V.traceLayoutAttributes={},V.localeRegistry={},V.apiMethodRegistry={},V.collectableSubplotTypes=null,V.register=function(k){if(V.collectableSubplotTypes=null,k)k&&!Array.isArray(k)&&(k=[k]);else throw new Error("No argument passed to Plotly.register.");for(var p=0;p<k.length;p++){var w=k[p];if(!w)throw new Error("Invalid module was attempted to be registered!");switch(w.moduleType){case"trace":s(w);break;case"transform":g(w);break;case"component":y(w);break;case"locale":b(w);break;case"apiMethod":var h=w.name;V.apiMethodRegistry[h]=w.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},V.getModule=function(A){var k=V.modules[c(A)];return k?k._module:!1},V.traceIs=function(A,k){if(A=c(A),A==="various")return!1;var p=V.modules[A];return p||(A&&f.log("Unrecognized trace type "+A+"."),p=V.modules[i.type.dflt]),!!p.categories[k]},V.getTransformIndices=function(A,k){for(var p=[],w=A.transforms||[],h=0;h<w.length;h++)w[h].type===k&&p.push(h);return p},V.hasTransform=function(A,k){for(var p=A.transforms||[],w=0;w<p.length;w++)if(p[w].type===k)return!0;return!1},V.getComponentMethod=function(A,k){var p=V.componentsRegistry[A];return p&&p[k]||l},V.call=function(){var A=arguments[0],k=[].slice.call(arguments,1);return V.apiMethodRegistry[A].apply(null,k)};function s(A){var k=A.name,p=A.categories,w=A.meta;if(V.modules[k]){f.log("Type "+k+" already registered");return}V.subplotsRegistry[A.basePlotModule.name]||o(A.basePlotModule);for(var h={},D=0;D<p.length;D++)h[p[D]]=!0,V.allCategories[p[D]]=!0;V.modules[k]={_module:A,categories:h},w&&Object.keys(w).length&&(V.modules[k].meta=w),V.allTypes.push(k);for(var S in V.componentsRegistry)_(S,k);A.layoutAttributes&&n(V.traceLayoutAttributes,A.layoutAttributes);var M=A.basePlotModule,L=M.name;if(L==="mapbox"){var R=M.constants.styleRules;for(var z in R)t(".js-plotly-plot .plotly .mapboxgl-"+z,R[z])}(L==="geo"||L==="mapbox")&&window.PlotlyGeoAssets===void 0&&(window.PlotlyGeoAssets={topojson:{}})}function o(A){var k=A.name;if(V.subplotsRegistry[k]){f.log("Plot type "+k+" already registered.");return}v(A),V.subplotsRegistry[k]=A;for(var p in V.componentsRegistry)T(p,A.name)}function y(A){if(typeof A.name!="string")throw new Error("Component module *name* must be a string.");var k=A.name;V.componentsRegistry[k]=A,A.layoutAttributes&&(A.layoutAttributes._isLinkedToArray&&m(V.layoutArrayContainers,k),v(A));for(var p in V.modules)_(k,p);for(var w in V.subplotsRegistry)T(k,w);for(var h in V.transformsRegistry)u(k,h);A.schema&&A.schema.layout&&d(r,A.schema.layout)}function g(A){if(typeof A.name!="string")throw new Error("Transform module *name* must be a string.");var k="Transform module "+A.name,p=typeof A.transform=="function",w=typeof A.calcTransform=="function";if(!p&&!w)throw new Error(k+" is missing a *transform* or *calcTransform* method.");p&&w&&f.log([k+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),x(A.attributes)||f.log(k+" registered without an *attributes* object."),typeof A.supplyDefaults!="function"&&f.log(k+" registered without a *supplyDefaults* method."),V.transformsRegistry[A.name]=A;for(var h in V.componentsRegistry)u(h,A.name)}function b(A){var k=A.name,p=k.split("-")[0],w=A.dictionary,h=A.format,D=w&&Object.keys(w).length,S=h&&Object.keys(h).length,M=V.localeRegistry,L=M[k];if(L||(M[k]=L={}),p!==k){var R=M[p];R||(M[p]=R={}),D&&R.dictionary===L.dictionary&&(R.dictionary=w),S&&R.format===L.format&&(R.format=h)}D&&(L.dictionary=w),S&&(L.format=h)}function v(A){if(A.layoutAttributes){var k=A.layoutAttributes._arrayAttrRegexps;if(k)for(var p=0;p<k.length;p++)m(V.layoutArrayRegexes,k[p])}}function _(A,k){var p=V.componentsRegistry[A].schema;if(!(!p||!p.traces)){var w=p.traces[k];w&&d(V.modules[k]._module.attributes,w)}}function u(A,k){var p=V.componentsRegistry[A].schema;if(!(!p||!p.transforms)){var w=p.transforms[k];w&&d(V.transformsRegistry[k].attributes,w)}}function T(A,k){var p=V.componentsRegistry[A].schema;if(!(!p||!p.subplots)){var w=V.subplotsRegistry[k],h=w.layoutAttributes,D=w.attr==="subplot"?w.name:w.attr;Array.isArray(D)&&(D=D[0]);var S=p.subplots[D];h&&S&&d(h,S)}}function c(A){return typeof A=="object"&&(A=A.type),A}},{"./lib/dom":503,"./lib/extend":505,"./lib/is_plain_object":516,"./lib/loggers":519,"./lib/noop":524,"./lib/push_unique":530,"./plots/attributes":562,"./plots/layout_attributes":619}],648:[function(e,B,V){var f=e("../registry"),l=e("../lib"),m=l.extendFlat,x=l.extendDeep;function t(i){var r;switch(i){case"themes__thumb":r={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":r={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:r={}}return r}function a(i){var r=["xaxis","yaxis","zaxis"];return r.indexOf(i.slice(0,5))>-1}B.exports=function(r,n){var d,s=r.data,o=r.layout,y=x([],s),g=x({},o,t(n.tileClass)),b=r._context||{};if(n.width&&(g.width=n.width),n.height&&(g.height=n.height),n.tileClass==="thumbnail"||n.tileClass==="themes__thumb"){g.annotations=[];var v=Object.keys(g);for(d=0;d<v.length;d++)a(v[d])&&(g[v[d]].title={text:""});for(d=0;d<y.length;d++){var _=y[d];_.showscale=!1,_.marker&&(_.marker.showscale=!1),f.traceIs(_,"pie-like")&&(_.textposition="none")}}if(Array.isArray(n.annotations))for(d=0;d<n.annotations.length;d++)g.annotations.push(n.annotations[d]);var u=Object.keys(g).filter(function(p){return p.match(/^scene\d*$/)});if(u.length){var T={};for(n.tileClass==="thumbnail"&&(T={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),d=0;d<u.length;d++){var c=g[u[d]];c.xaxis||(c.xaxis={}),c.yaxis||(c.yaxis={}),c.zaxis||(c.zaxis={}),m(c.xaxis,T),m(c.yaxis,T),m(c.zaxis,T),c._scene=null}}var A=document.createElement("div");n.tileClass&&(A.className=n.tileClass);var k={gd:A,td:A,layout:g,data:y,config:{staticPlot:n.staticPlot===void 0?!0:n.staticPlot,plotGlPixelRatio:n.plotGlPixelRatio===void 0?2:n.plotGlPixelRatio,displaylogo:n.displaylogo||!1,showLink:n.showLink||!1,showTips:n.showTips||!1,mapboxAccessToken:b.mapboxAccessToken}};return n.setBackground!=="transparent"&&(k.config.setBackground=n.setBackground||"opaque"),k.gd.defaultLayout=t(n.tileClass),k}},{"../lib":515,"../registry":647}],649:[function(e,B,V){var f=e("../lib"),l=e("../plot_api/to_image"),m=e("./filesaver"),x=e("./helpers");function t(a,i){var r;return f.isPlainObject(a)||(r=f.getGraphDiv(a)),i=i||{},i.format=i.format||"png",i.width=i.width||null,i.height=i.height||null,i.imageDataOnly=!0,new Promise(function(n,d){r&&r._snapshotInProgress&&d(new Error("Snapshotting already in progress.")),f.isIE()&&i.format!=="svg"&&d(new Error(x.MSG_IE_BAD_FORMAT)),r&&(r._snapshotInProgress=!0);var s=l(a,i),o=i.filename||a.fn||"newplot";o+="."+i.format.replace("-","."),s.then(function(y){return r&&(r._snapshotInProgress=!1),m(y,o,i.format)}).then(function(y){n(y)}).catch(function(y){r&&(r._snapshotInProgress=!1),d(y)})})}B.exports=t},{"../lib":515,"../plot_api/to_image":558,"./filesaver":650,"./helpers":651}],650:[function(e,B,V){var f=e("../lib"),l=e("./helpers");function m(x,t,a){var i=document.createElement("a"),r="download"in i,n=new Promise(function(d,s){var o,y;if(f.isIE())return o=l.createBlob(x,"svg"),window.navigator.msSaveBlob(o,t),o=null,d(t);if(r)return o=l.createBlob(x,a),y=l.createObjectURL(o),i.href=y,i.download=t,document.body.appendChild(i),i.click(),document.body.removeChild(i),l.revokeObjectURL(y),o=null,d(t);if(f.isSafari()){var g=a==="svg"?",":";base64,";return l.octetStream(g+encodeURIComponent(x)),d(t)}s(new Error("download error"))});return n}B.exports=m},{"../lib":515,"./helpers":651}],651:[function(e,B,V){var f=e("../registry");V.getDelay=function(x){return x._has&&(x._has("gl3d")||x._has("gl2d")||x._has("mapbox"))?500:0},V.getRedrawFunc=function(x){return function(){f.getComponentMethod("colorbar","draw")(x)}},V.encodeSVG=function(x){return"data:image/svg+xml,"+encodeURIComponent(x)},V.encodeJSON=function(x){return"data:application/json,"+encodeURIComponent(x)};var l=window.URL||window.webkitURL;V.createObjectURL=function(x){return l.createObjectURL(x)},V.revokeObjectURL=function(x){return l.revokeObjectURL(x)},V.createBlob=function(x,t){if(t==="svg")return new window.Blob([x],{type:"image/svg+xml;charset=utf-8"});if(t==="full-json")return new window.Blob([x],{type:"application/json;charset=utf-8"});var a=m(window.atob(x));return new window.Blob([a],{type:"image/"+t})},V.octetStream=function(x){document.location.href="data:application/octet-stream"+x};function m(x){for(var t=x.length,a=new ArrayBuffer(t),i=new Uint8Array(a),r=0;r<t;r++)i[r]=x.charCodeAt(r);return a}V.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,V.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},{"../registry":647}],652:[function(e,B,V){var f=e("./helpers"),l={getDelay:f.getDelay,getRedrawFunc:f.getRedrawFunc,clone:e("./cloneplot"),toSVG:e("./tosvg"),svgToImg:e("./svgtoimg"),toImage:e("./toimage"),downloadImage:e("./download")};B.exports=l},{"./cloneplot":648,"./download":649,"./helpers":651,"./svgtoimg":653,"./toimage":654,"./tosvg":655}],653:[function(e,B,V){var f=e("../lib"),l=e("events").EventEmitter,m=e("./helpers");function x(t){var a=t.emitter||new l,i=new Promise(function(r,n){var d=window.Image,s=t.svg,o=t.format||"png";if(f.isIE()&&o!=="svg"){var y=new Error(m.MSG_IE_BAD_FORMAT);return n(y),t.promise?i:a.emit("error",y)}var g=t.canvas,b=t.scale||1,v=t.width||300,_=t.height||150,u=b*v,T=b*_,c=g.getContext("2d",{willReadFrequently:!0}),A=new d,k,p;o==="svg"||f.isSafari()?p=m.encodeSVG(s):(k=m.createBlob(s,"svg"),p=m.createObjectURL(k)),g.width=u,g.height=T,A.onload=function(){var w;switch(k=null,m.revokeObjectURL(p),o!=="svg"&&c.drawImage(A,0,0,u,T),o){case"jpeg":w=g.toDataURL("image/jpeg");break;case"png":w=g.toDataURL("image/png");break;case"webp":w=g.toDataURL("image/webp");break;case"svg":w=p;break;default:var h="Image format is not jpeg, png, svg or webp.";if(n(new Error(h)),!t.promise)return a.emit("error",h)}r(w),t.promise||a.emit("success",w)},A.onerror=function(w){if(k=null,m.revokeObjectURL(p),n(w),!t.promise)return a.emit("error",w)},A.src=p});return t.promise?i:a}B.exports=x},{"../lib":515,"./helpers":651,events:84}],654:[function(e,B,V){var f=e("events").EventEmitter,l=e("../registry"),m=e("../lib"),x=e("./helpers"),t=e("./cloneplot"),a=e("./tosvg"),i=e("./svgtoimg");function r(n,d){var s=new f,o=t(n,{format:"png"}),y=o.gd;y.style.position="absolute",y.style.left="-5000px",document.body.appendChild(y);function g(){var v=x.getDelay(y._fullLayout);setTimeout(function(){var _=a(y),u=document.createElement("canvas");u.id=m.randstr(),s=i({format:d.format,width:y._fullLayout.width,height:y._fullLayout.height,canvas:u,emitter:s,svg:_}),s.clean=function(){y&&document.body.removeChild(y)}},v)}var b=x.getRedrawFunc(y);return l.call("_doPlot",y,o.data,o.layout,o.config).then(b).then(g).catch(function(v){s.emit("error",v)}),s}B.exports=r},{"../lib":515,"../registry":647,"./cloneplot":648,"./helpers":651,"./svgtoimg":653,"./tosvg":655,events:84}],655:[function(e,B,V){var f=e("@plotly/d3"),l=e("../lib"),m=e("../components/drawing"),x=e("../components/color"),t=e("../constants/xmlns_namespaces"),a=/"/g,i="TOBESTRIPPED",r=new RegExp('("'+i+")|("+i+'")',"g");function n(s){var o=f.select("body").append("div").style({display:"none"}).html(""),y=s.replace(/(&[^;]*;)/gi,function(g){return g==="&lt;"?"&#60;":g==="&rt;"?"&#62;":g.indexOf("<")!==-1||g.indexOf(">")!==-1?"":o.html(g).text()});return o.remove(),y}function d(s){return s.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")}B.exports=function(o,y,g){var b=o._fullLayout,v=b._paper,_=b._toppaper,u=b.width,T=b.height,c;v.insert("rect",":first-child").call(m.setRect,0,0,u,T).call(x.fill,b.paper_bgcolor);var A=b._basePlotModules||[];for(c=0;c<A.length;c++){var k=A[c];k.toSVG&&k.toSVG(o)}if(_){var p=_.node().childNodes,w=Array.prototype.slice.call(p);for(c=0;c<w.length;c++){var h=w[c];h.childNodes.length&&v.node().appendChild(h)}}b._draggers&&b._draggers.remove(),v.node().style.background="",v.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var S=f.select(this);if(this.style.visibility==="hidden"||this.style.display==="none"){S.remove();return}else S.style({visibility:null,display:null});var M=this.style.fontFamily;M&&M.indexOf('"')!==-1&&S.style("font-family",M.replace(a,i))}),v.selectAll(".gradient_filled,.pattern_filled").each(function(){var S=f.select(this),M=this.style.fill;M&&M.indexOf("url(")!==-1&&S.style("fill",M.replace(a,i));var L=this.style.stroke;L&&L.indexOf("url(")!==-1&&S.style("stroke",L.replace(a,i))}),(y==="pdf"||y==="eps")&&v.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),v.node().setAttributeNS(t.xmlns,"xmlns",t.svg),v.node().setAttributeNS(t.xmlns,"xmlns:xlink",t.xlink),y==="svg"&&g&&(v.attr("width",g*u),v.attr("height",g*T),v.attr("viewBox","0 0 "+u+" "+T));var D=new window.XMLSerializer().serializeToString(v.node());return D=n(D),D=d(D),D=D.replace(r,"'"),l.isIE()&&(D=D.replace(/"/gi,"'"),D=D.replace(/(\('#)([^']*)('\))/gi,'("#$2")'),D=D.replace(/(\\')/gi,'"')),D}},{"../components/color":367,"../components/drawing":389,"../constants/xmlns_namespaces":492,"../lib":515,"@plotly/d3":58}],656:[function(e,B,V){var f=e("../../lib");B.exports=function(m,x){for(var t=0;t<m.length;t++)m[t].i=t;f.mergeArray(x.text,m,"tx"),f.mergeArray(x.hovertext,m,"htx");var a=x.marker;if(a){f.mergeArray(a.opacity,m,"mo",!0),f.mergeArray(a.color,m,"mc");var i=a.line;i&&(f.mergeArray(i.color,m,"mlc"),f.mergeArrayCastPositive(i.width,m,"mlw"))}}},{"../../lib":515}],657:[function(e,B,V){var f=e("../scatter/attributes"),l=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,m=e("../../plots/template_attributes").hovertemplateAttrs,x=e("../../plots/template_attributes").texttemplateAttrs,t=e("../../components/colorscale/attributes"),a=e("../../plots/font_attributes"),i=e("./constants"),r=e("../../components/drawing/attributes").pattern,n=e("../../lib/extend").extendFlat,d=a({editType:"calc",arrayOk:!0,colorEditType:"style"}),s=f.marker,o=s.line,y=n({},o.width,{dflt:0}),g=n({width:y,editType:"calc"},t("marker.line")),b=n({line:g,editType:"calc"},t("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:r});B.exports={x:f.x,x0:f.x0,dx:f.dx,y:f.y,y0:f.y0,dy:f.dy,xperiod:f.xperiod,yperiod:f.yperiod,xperiod0:f.xperiod0,yperiod0:f.yperiod0,xperiodalignment:f.xperiodalignment,yperiodalignment:f.yperiodalignment,xhoverformat:l("x"),yhoverformat:l("y"),text:f.text,texttemplate:x({editType:"plot"},{keys:i.eventDataKeys}),hovertext:f.hovertext,hovertemplate:m({},{keys:i.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:n({},d,{}),insidetextfont:n({},d,{}),outsidetextfont:n({},d,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:n({},f.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:b,offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},selected:{marker:{opacity:f.selected.marker.opacity,color:f.selected.marker.color,editType:"style"},textfont:f.selected.textfont,editType:"style"},unselected:{marker:{opacity:f.unselected.marker.opacity,color:f.unselected.marker.color,editType:"style"},textfont:f.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},{"../../components/colorscale/attributes":374,"../../components/drawing/attributes":388,"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../../plots/font_attributes":594,"../../plots/template_attributes":642,"../scatter/attributes":936,"./constants":659}],658:[function(e,B,V){var f=e("../../plots/cartesian/axes"),l=e("../../plots/cartesian/align_period"),m=e("../../components/colorscale/helpers").hasColorscale,x=e("../../components/colorscale/calc"),t=e("./arrays_to_calcdata"),a=e("../scatter/calc_selection");B.exports=function(r,n){var d=f.getFromId(r,n.xaxis||"x"),s=f.getFromId(r,n.yaxis||"y"),o,y,g,b,v,_,u={msUTC:!!(n.base||n.base===0)};n.orientation==="h"?(o=d.makeCalcdata(n,"x",u),g=s.makeCalcdata(n,"y"),b=l(n,s,"y",g),v=!!n.yperiodalignment,_="y"):(o=s.makeCalcdata(n,"y",u),g=d.makeCalcdata(n,"x"),b=l(n,d,"x",g),v=!!n.xperiodalignment,_="x"),y=b.vals;for(var T=Math.min(y.length,o.length),c=new Array(T),A=0;A<T;A++)c[A]={p:y[A],s:o[A]},v&&(c[A].orig_p=g[A],c[A][_+"End"]=b.ends[A],c[A][_+"Start"]=b.starts[A]),n.ids&&(c[A].id=String(n.ids[A]));return m(n,"marker")&&x(r,n,{vals:n.marker.color,containerStr:"marker",cLetter:"c"}),m(n,"marker.line")&&x(r,n,{vals:n.marker.line.color,containerStr:"marker.line",cLetter:"c"}),t(c,n),a(c,n),c}},{"../../components/colorscale/calc":375,"../../components/colorscale/helpers":378,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"../scatter/calc_selection":938,"./arrays_to_calcdata":656}],659:[function(e,B,V){B.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},{}],660:[function(e,B,V){var f=e("fast-isnumeric"),l=e("../../lib").isArrayOrTypedArray,m=e("../../constants/numerical").BADNUM,x=e("../../registry"),t=e("../../plots/cartesian/axes"),a=e("../../plots/cartesian/constraints").getAxisGroup,i=e("./sieve.js");function r(D,S){for(var M=S.xaxis,L=S.yaxis,R=D._fullLayout,z=D._fullData,P=D.calcdata,I=[],U=[],O=0;O<z.length;O++){var G=z[O];if(G.visible===!0&&x.traceIs(G,"bar")&&G.xaxis===M._id&&G.yaxis===L._id&&(G.orientation==="h"?I.push(P[O]):U.push(P[O]),G._computePh))for(var $=D.calcdata[O],tt=0;tt<$.length;tt++)typeof $[tt].ph0=="function"&&($[tt].ph0=$[tt].ph0()),typeof $[tt].ph1=="function"&&($[tt].ph1=$[tt].ph1())}var Z={xCat:M.type==="category"||M.type==="multicategory",yCat:L.type==="category"||L.type==="multicategory",mode:R.barmode,norm:R.barnorm,gap:R.bargap,groupgap:R.bargroupgap};n(D,M,L,U,Z),n(D,L,M,I,Z)}function n(D,S,M,L,R){if(!!L.length){var z,P,I,U,O;switch(d(M,L),R.mode){case"overlay":s(S,M,L,R);break;case"group":for(z=[],P=[],I=0;I<L.length;I++)U=L[I],O=U[0].trace,O.offset===void 0?P.push(U):z.push(U);P.length&&o(D,S,M,P,R),z.length&&s(S,M,z,R);break;case"stack":case"relative":for(z=[],P=[],I=0;I<L.length;I++)U=L[I],O=U[0].trace,O.base===void 0?P.push(U):z.push(U);P.length&&y(D,S,M,P,R),z.length&&s(S,M,z,R);break}w(L,S)}}function d(D,S){var M,L;for(M=0;M<S.length;M++){var R=S[M],z=R[0].trace,P=z.type==="funnel"?z._base:z.base,I,U=z.orientation==="h"?z.xcalendar:z.ycalendar,O=D.type==="category"||D.type==="multicategory"?function(){return null}:D.d2c;if(l(P)){for(L=0;L<Math.min(P.length,R.length);L++)I=O(P[L],0,U),f(I)?(R[L].b=+I,R[L].hasB=1):R[L].b=0;for(;L<R.length;L++)R[L].b=0}else{I=O(P,0,U);var G=f(I);for(I=G?I:0,L=0;L<R.length;L++)R[L].b=I,G&&(R[L].hasB=1)}}}function s(D,S,M,L){for(var R=0;R<M.length;R++){var z=M[R],P=new i([z],{posAxis:D,sepNegVal:!1,overlapNoMerge:!L.norm});g(D,P,L),L.norm?(A(P),p(S,P,L)):T(S,P)}}function o(D,S,M,L,R){var z=new i(L,{posAxis:S,sepNegVal:!1,overlapNoMerge:!R.norm});b(D,S,z,R),k(z,S),R.norm?(A(z),p(M,z,R)):T(M,z)}function y(D,S,M,L,R){var z=new i(L,{posAxis:S,sepNegVal:R.mode==="relative",overlapNoMerge:!(R.norm||R.mode==="stack"||R.mode==="relative")});g(S,z,R),c(M,z,R);for(var P=0;P<L.length;P++)for(var I=L[P],U=0;U<I.length;U++){var O=I[U];if(O.s!==m){var G=O.b+O.s===z.get(O.p,O.s);G&&(O._outmost=!0)}}R.norm&&p(M,z,R)}function g(D,S,M){for(var L=S.minDiff,R=S.traces,z=L*(1-M.gap),P=z,I=P*(1-(M.groupgap||0)),U=-I/2,O=0;O<R.length;O++){var G=R[O],$=G[0].t;$.barwidth=I,$.poffset=U,$.bargroupwidth=z,$.bardelta=L}S.binWidth=R[0][0].t.barwidth/100,v(S),_(D,S),u(D,S)}function b(D,S,M,L){for(var R=D._fullLayout,z=M.positions,P=M.distinctPositions,I=M.minDiff,U=M.traces,O=U.length,G=z.length!==P.length,$=I*(1-L.gap),tt=a(R,S._id)+U[0][0].trace.orientation,Z=R._alignmentOpts[tt]||{},X=0;X<O;X++){var J=U[X],st=J[0].trace,at=Z[st.alignmentgroup]||{},lt=Object.keys(at.offsetGroups||{}).length,F;lt?F=$/lt:F=G?$/O:$;var H=F*(1-(L.groupgap||0)),et;lt?et=((2*st._offsetIndex+1-lt)*F-H)/2:et=G?((2*X+1-O)*F-H)/2:-H/2;var q=J[0].t;q.barwidth=H,q.poffset=et,q.bargroupwidth=$,q.bardelta=I}M.binWidth=U[0][0].t.barwidth/100,v(M),_(S,M),u(S,M,G)}function v(D){var S=D.traces,M,L;for(M=0;M<S.length;M++){var R=S[M],z=R[0],P=z.trace,I=z.t,U=P._offset||P.offset,O=I.poffset,G;if(l(U)){for(G=Array.prototype.slice.call(U,0,R.length),L=0;L<G.length;L++)f(G[L])||(G[L]=O);for(L=G.length;L<R.length;L++)G.push(O);I.poffset=G}else U!==void 0&&(I.poffset=U);var $=P._width||P.width,tt=I.barwidth;if(l($)){var Z=Array.prototype.slice.call($,0,R.length);for(L=0;L<Z.length;L++)f(Z[L])||(Z[L]=tt);for(L=Z.length;L<R.length;L++)Z.push(tt);if(I.barwidth=Z,U===void 0){for(G=[],L=0;L<R.length;L++)G.push(O+(tt-Z[L])/2);I.poffset=G}}else $!==void 0&&(I.barwidth=$,U===void 0&&(I.poffset=O+(tt-$)/2))}}function _(D,S){for(var M=S.traces,L=h(D),R=0;R<M.length;R++)for(var z=M[R],P=z[0].t,I=P.poffset,U=Array.isArray(I),O=P.barwidth,G=Array.isArray(O),$=0;$<z.length;$++){var tt=z[$],Z=tt.w=G?O[$]:O;tt[L]=tt.p+(U?I[$]:I)+Z/2}}function u(D,S,M){var L=S.traces,R=S.minDiff,z=R/2;t.minDtick(D,S.minDiff,S.distinctPositions[0],M);for(var P=0;P<L.length;P++){var I=L[P],U=I[0],O=U.trace,G=[],$,tt,Z,X;for(X=0;X<I.length;X++)$=I[X],tt=$.p-z,Z=$.p+z,G.push(tt,Z);if(O.width||O.offset){var J=U.t,st=J.poffset,at=J.barwidth,lt=Array.isArray(st),F=Array.isArray(at);for(X=0;X<I.length;X++){$=I[X];var H=lt?st[X]:st,et=F?at[X]:at;tt=$.p+H,Z=tt+et,G.push(tt,Z)}}O._extremes[D._id]=t.findExtremes(D,G,{padded:!1})}}function T(D,S){for(var M=S.traces,L=h(D),R=0;R<M.length;R++){for(var z=M[R],P=z[0].trace,I=[],U=!1,O=0;O<z.length;O++){var G=z[O],$=G.b,tt=$+G.s;G[L]=tt,I.push(tt),G.hasB&&I.push($),(!G.hasB||!G.b)&&(U=!0)}P._extremes[D._id]=t.findExtremes(D,I,{tozero:U,padded:!0})}}function c(D,S,M){var L=h(D),R=S.traces,z,P,I,U,O,G;for(U=0;U<R.length;U++)if(z=R[U],P=z[0].trace,P.type==="funnel")for(O=0;O<z.length;O++)G=z[O],G.s!==m&&S.put(G.p,-.5*G.s);for(U=0;U<R.length;U++){z=R[U],P=z[0].trace,I=P.type==="funnel";var $=[];for(O=0;O<z.length;O++)if(G=z[O],G.s!==m){var tt;I?tt=G.s:tt=G.s+G.b;var Z=S.put(G.p,tt),X=Z+tt;G.b=Z,G[L]=X,M.norm||($.push(X),G.hasB&&$.push(Z))}M.norm||(P._extremes[D._id]=t.findExtremes(D,$,{tozero:!0,padded:!0}))}}function A(D){for(var S=D.traces,M=0;M<S.length;M++)for(var L=S[M],R=0;R<L.length;R++){var z=L[R];z.s!==m&&D.put(z.p,z.b+z.s)}}function k(D,S){for(var M=D.traces,L=0;L<M.length;L++){var R=M[L],z=R[0].trace;if(z.base===void 0)for(var P=new i([R],{posAxis:S,sepNegVal:!0,overlapNoMerge:!0}),I=0;I<R.length;I++){var U=R[I];if(U.p!==m){var O=P.put(U.p,U.b+U.s);O&&(U.b=O)}}}}function p(D,S,M){var L=S.traces,R=h(D),z=M.norm==="fraction"?1:100,P=z/1e9,I=D.l2c(D.c2l(0)),U=M.mode==="stack"?z:I;function O(et){return f(D.c2l(et))&&(et<I-P||et>U+P||!f(I))}for(var G=0;G<L.length;G++){for(var $=L[G],tt=$[0].trace,Z=[],X=!1,J=!1,st=0;st<$.length;st++){var at=$[st];if(at.s!==m){var lt=Math.abs(z/S.get(at.p,at.s));at.b*=lt,at.s*=lt;var F=at.b,H=F+at.s;at[R]=H,Z.push(H),J=J||O(H),at.hasB&&(Z.push(F),J=J||O(F)),(!at.hasB||!at.b)&&(X=!0)}}tt._extremes[D._id]=t.findExtremes(D,Z,{tozero:X,padded:J})}}function w(D,S){var M=h(S),L={},R,z,P,I=1/0,U=-1/0;for(R=0;R<D.length;R++)for(P=D[R],z=0;z<P.length;z++){var O=P[z].p;f(O)&&(I=Math.min(I,O),U=Math.max(U,O))}var G=1e4/(U-I),$=L.round=function(lt){return String(Math.round(G*(lt-I)))};for(R=0;R<D.length;R++){P=D[R],P[0].t.extents=L;var tt=P[0].t.poffset,Z=Array.isArray(tt);for(z=0;z<P.length;z++){var X=P[z],J=X[M]-X.w/2;if(f(J)){var st=X[M]+X.w/2,at=$(X.p);L[at]?L[at]=[Math.min(J,L[at][0]),Math.max(st,L[at][1])]:L[at]=[J,st]}X.p0=X.p+(Z?tt[z]:tt),X.p1=X.p0+X.w,X.s0=X.b,X.s1=X.s0+X.s}}}function h(D){return D._id.charAt(0)}B.exports={crossTraceCalc:r,setGroupPositions:n}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/axes":566,"../../plots/cartesian/constraints":574,"../../registry":647,"./sieve.js":670,"fast-isnumeric":190}],661:[function(e,B,V){var f=e("../../lib"),l=e("../../components/color"),m=e("../../registry"),x=e("../scatter/xy_defaults"),t=e("../scatter/period_defaults"),a=e("./style_defaults"),i=e("../../plots/cartesian/constraints").getAxisGroup,r=e("./attributes"),n=f.coerceFont;function d(g,b,v,_){function u(p,w){return f.coerce(g,b,r,p,w)}var T=x(g,b,_,u);if(!T){b.visible=!1;return}t(g,b,_,u),u("xhoverformat"),u("yhoverformat"),u("orientation",b.x&&!b.y?"h":"v"),u("base"),u("offset"),u("width"),u("text"),u("hovertext"),u("hovertemplate");var c=u("textposition");y(g,b,_,u,c,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),a(g,b,u,v,_);var A=(b.marker.line||{}).color,k=m.getComponentMethod("errorbars","supplyDefaults");k(g,b,A||l.defaultLine,{axis:"y"}),k(g,b,A||l.defaultLine,{axis:"x",inherit:"y"}),f.coerceSelectionMarkerOpacity(b,u)}function s(g,b,v,_){var u=b.orientation,T=b[{v:"x",h:"y"}[u]+"axis"],c=i(v,T)+u,A=v._alignmentOpts||{},k=_("alignmentgroup"),p=A[c];p||(p=A[c]={});var w=p[k];w?w.traces.push(b):w=p[k]={traces:[b],alignmentIndex:Object.keys(p).length,offsetGroups:{}};var h=_("offsetgroup"),D=w.offsetGroups,S=D[h];h&&(S||(S=D[h]={offsetIndex:Object.keys(D).length}),b._offsetIndex=S.offsetIndex)}function o(g,b){var v,_;function u(c){return f.coerce(_._input,_,r,c)}if(b.barmode==="group")for(var T=0;T<g.length;T++)_=g[T],_.type==="bar"&&(v=_._input,s(v,_,b,u))}function y(g,b,v,_,u,T){T=T||{};var c=T.moduleHasSelected!==!1,A=T.moduleHasUnselected!==!1,k=T.moduleHasConstrain!==!1,p=T.moduleHasCliponaxis!==!1,w=T.moduleHasTextangle!==!1,h=T.moduleHasInsideanchor!==!1,D=!!T.hasPathbar,S=Array.isArray(u)||u==="auto",M=S||u==="inside",L=S||u==="outside";if(M||L){var R=n(_,"textfont",v.font),z=f.extendFlat({},R),P=g.textfont&&g.textfont.color,I=!P;if(I&&delete z.color,n(_,"insidetextfont",z),D){var U=f.extendFlat({},R);I&&delete U.color,n(_,"pathbar.textfont",U)}L&&n(_,"outsidetextfont",R),c&&_("selected.textfont.color"),A&&_("unselected.textfont.color"),k&&_("constraintext"),p&&_("cliponaxis"),w&&_("textangle"),_("texttemplate")}M&&h&&_("insidetextanchor")}B.exports={supplyDefaults:d,crossTraceDefaults:o,handleGroupingDefaults:s,handleText:y}},{"../../components/color":367,"../../lib":515,"../../plots/cartesian/constraints":574,"../../registry":647,"../scatter/period_defaults":956,"../scatter/xy_defaults":963,"./attributes":657,"./style_defaults":672}],662:[function(e,B,V){B.exports=function(l,m,x){return l.x="xVal"in m?m.xVal:m.x,l.y="yVal"in m?m.yVal:m.y,m.xa&&(l.xaxis=m.xa),m.ya&&(l.yaxis=m.ya),x.orientation==="h"?(l.label=l.y,l.value=l.x):(l.label=l.x,l.value=l.y),l}},{}],663:[function(e,B,V){var f=e("fast-isnumeric"),l=e("tinycolor2"),m=e("../../lib").isArrayOrTypedArray;V.coerceString=function(x,t,a){if(typeof t=="string"){if(t||!x.noBlank)return t}else if((typeof t=="number"||t===!0)&&!x.strict)return String(t);return a!==void 0?a:x.dflt},V.coerceNumber=function(x,t,a){if(f(t)){t=+t;var i=x.min,r=x.max,n=i!==void 0&&t<i||r!==void 0&&t>r;if(!n)return t}return a!==void 0?a:x.dflt},V.coerceColor=function(x,t,a){return l(t).isValid()?t:a!==void 0?a:x.dflt},V.coerceEnumerated=function(x,t,a){return x.coerceNumber&&(t=+t),x.values.indexOf(t)!==-1?t:a!==void 0?a:x.dflt},V.getValue=function(x,t){var a;return Array.isArray(x)?t<x.length&&(a=x[t]):a=x,a},V.getLineWidth=function(x,t){var a=0<t.mlw?t.mlw:m(x.marker.line.width)?0:x.marker.line.width;return a}},{"../../lib":515,"fast-isnumeric":190,tinycolor2:313}],664:[function(e,B,V){var f=e("../../components/fx"),l=e("../../registry"),m=e("../../components/color"),x=e("../../lib").fillText,t=e("./helpers").getLineWidth,a=e("../../plots/cartesian/axes").hoverLabelText,i=e("../../constants/numerical").BADNUM;function r(s,o,y,g,b){var v=n(s,o,y,g,b);if(v){var _=v.cd,u=_[0].trace,T=_[v.index];return v.color=d(u,T),l.getComponentMethod("errorbars","hoverInfo")(T,u,v),[v]}}function n(s,o,y,g,b){var v=s.cd,_=v[0].trace,u=v[0].t,T=g==="closest",c=_.type==="waterfall",A=s.maxHoverDistance,k=s.maxSpikeDistance,p,w,h,D,S,M,L;_.orientation==="h"?(p=y,w=o,h="y",D="x",S=st,M=Z):(p=o,w=y,h="x",D="y",M=st,S=Z);var R=_[h+"period"],z=T||R;function P(ot){return U(ot,-1)}function I(ot){return U(ot,1)}function U(ot,ct){var bt=ot.w;return ot[h]+ct*bt/2}function O(ot){return ot[h+"End"]-ot[h+"Start"]}var G=T?P:R?function(ot){return ot.p-O(ot)/2}:function(ot){return Math.min(P(ot),ot.p-u.bardelta/2)},$=T?I:R?function(ot){return ot.p+O(ot)/2}:function(ot){return Math.max(I(ot),ot.p+u.bardelta/2)};function tt(ot,ct,bt){return b.finiteRange&&(bt=0),f.inbox(ot-p,ct-p,bt+Math.min(1,Math.abs(ct-ot)/L)-1)}function Z(ot){return tt(G(ot),$(ot),A)}function X(ot){return tt(P(ot),I(ot),k)}function J(ot){var ct=ot[D];if(c){var bt=Math.abs(ot.rawS)||0;w>0?ct+=bt:w<0&&(ct-=bt)}return ct}function st(ot){var ct=w,bt=ot.b,ut=J(ot);return f.inbox(bt-ct,ut-ct,A+(ut-ct)/(ut-bt)-1)}function at(ot){var ct=w,bt=ot.b,ut=J(ot);return f.inbox(bt-ct,ut-ct,k+(ut-ct)/(ut-bt)-1)}var lt=s[h+"a"],F=s[D+"a"];L=Math.abs(lt.r2c(lt.range[1])-lt.r2c(lt.range[0]));function H(ot){return(S(ot)+M(ot))/2}var et=f.getDistanceFunction(g,S,M,H);if(f.getClosest(v,et,s),s.index!==!1&&v[s.index].p!==i){z||(G=function(ot){return Math.min(P(ot),ot.p-u.bargroupwidth/2)},$=function(ot){return Math.max(I(ot),ot.p+u.bargroupwidth/2)});var q=s.index,W=v[q],K=_.base?W.b+W.s:W.s;s[D+"0"]=s[D+"1"]=F.c2p(W[D],!0),s[D+"LabelVal"]=K;var nt=u.extents[u.extents.round(W.p)];s[h+"0"]=lt.c2p(T?G(W):nt[0],!0),s[h+"1"]=lt.c2p(T?$(W):nt[1],!0);var it=W.orig_p!==void 0;return s[h+"LabelVal"]=it?W.orig_p:W.p,s.labelLabel=a(lt,s[h+"LabelVal"],_[h+"hoverformat"]),s.valueLabel=a(F,s[D+"LabelVal"],_[D+"hoverformat"]),s.baseLabel=a(F,W.b,_[D+"hoverformat"]),s.spikeDistance=(at(W)+X(W))/2,s[h+"Spike"]=lt.c2p(W.p,!0),x(W,_,s),s.hovertemplate=_.hovertemplate,s}}function d(s,o){var y=o.mcc||s.marker.color,g=o.mlcc||s.marker.line.color,b=t(s,o);if(m.opacity(y))return y;if(m.opacity(g)&&b)return g}B.exports={hoverPoints:r,hoverOnBars:n,getTraceColor:d}},{"../../components/color":367,"../../components/fx":407,"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/axes":566,"../../registry":647,"./helpers":663}],665:[function(e,B,V){B.exports={attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults").supplyDefaults,crossTraceDefaults:e("./defaults").crossTraceDefaults,supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),crossTraceCalc:e("./cross_trace_calc").crossTraceCalc,colorbar:e("../scatter/marker_colorbar"),arraysToCalcdata:e("./arrays_to_calcdata"),plot:e("./plot").plot,style:e("./style").style,styleOnSelect:e("./style").styleOnSelect,hoverPoints:e("./hover").hoverPoints,eventData:e("./event_data"),selectPoints:e("./select"),moduleType:"trace",name:"bar",basePlotModule:e("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},{"../../plots/cartesian":578,"../scatter/marker_colorbar":954,"./arrays_to_calcdata":656,"./attributes":657,"./calc":658,"./cross_trace_calc":660,"./defaults":661,"./event_data":662,"./hover":664,"./layout_attributes":666,"./layout_defaults":667,"./plot":668,"./select":669,"./style":671}],666:[function(e,B,V){B.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],667:[function(e,B,V){var f=e("../../registry"),l=e("../../plots/cartesian/axes"),m=e("../../lib"),x=e("./layout_attributes");B.exports=function(t,a,i){function r(u,T){return m.coerce(t,a,x,u,T)}for(var n=!1,d=!1,s=!1,o={},y=r("barmode"),g=0;g<i.length;g++){var b=i[g];if(f.traceIs(b,"bar")&&b.visible)n=!0;else continue;if(y==="group"){var v=b.xaxis+b.yaxis;o[v]&&(s=!0),o[v]=!0}if(b.visible&&b.type==="histogram"){var _=l.getFromId({_fullLayout:a},b[b.orientation==="v"?"xaxis":"yaxis"]);_.type!=="category"&&(d=!0)}}if(!n){delete a.barmode;return}y!=="overlay"&&r("barnorm"),r("bargap",d&&!s?0:.2),r("bargroupgap")}},{"../../lib":515,"../../plots/cartesian/axes":566,"../../registry":647,"./layout_attributes":666}],668:[function(e,B,V){var f=e("@plotly/d3"),l=e("fast-isnumeric"),m=e("../../lib"),x=e("../../lib/svg_text_utils"),t=e("../../components/color"),a=e("../../components/drawing"),i=e("../../registry"),r=e("../../plots/cartesian/axes").tickText,n=e("./uniform_text"),d=n.recordMinTextSize,s=n.clearMinTextSize,o=e("./style"),y=e("./helpers"),g=e("./constants"),b=e("./attributes"),v=b.text,_=b.textposition,u=e("../../components/fx/helpers").appendArrayPointValue,T=g.TEXTPAD;function c(G){return G.id}function A(G){if(G.ids)return c}function k(G,$){return G<$?1:-1}function p(G,$,tt,Z){var X=[],J=[],st=Z?$:tt,at=Z?tt:$;return X[0]=st.c2p(G.s0,!0),J[0]=at.c2p(G.p0,!0),X[1]=st.c2p(G.s1,!0),J[1]=at.c2p(G.p1,!0),Z?[X,J]:[J,X]}function w(G,$,tt,Z){if(!$.uniformtext.mode&&h(tt)){var X;return Z&&(X=Z()),G.transition().duration(tt.duration).ease(tt.easing).each("end",function(){X&&X()}).each("interrupt",function(){X&&X()})}else return G}function h(G){return G&&G.duration>0}function D(G,$,tt,Z,X,J){var st=$.xaxis,at=$.yaxis,lt=G._fullLayout;X||(X={mode:lt.barmode,norm:lt.barmode,gap:lt.bargap,groupgap:lt.bargroupgap},s("bar",lt));var F=m.makeTraceGroups(Z,tt,"trace bars").each(function(H){var et=f.select(this),q=H[0].trace,W=q.type==="waterfall",K=q.type==="funnel",nt=q.type==="bar",it=nt||K,ot=0;W&&q.connector.visible&&q.connector.mode==="between"&&(ot=q.connector.line.width/2);var ct=q.orientation==="h",bt=h(X),ut=m.ensureSingle(et,"g","points"),pt=A(q),yt=ut.selectAll("g.point").data(m.identity,pt);yt.enter().append("g").classed("point",!0),yt.exit().remove(),yt.each(function(kt,zt){var Rt=f.select(this),Gt=p(kt,st,at,ct),wt=Gt[0][0],It=Gt[0][1],$t=Gt[1][0],Qt=Gt[1][1],Nt=(ct?It-wt:Qt-$t)===0;Nt&&it&&y.getLineWidth(q,kt)&&(Nt=!1),Nt||(Nt=!l(wt)||!l(It)||!l($t)||!l(Qt)),kt.isBlank=Nt,Nt&&(ct?It=wt:Qt=$t),ot&&!Nt&&(ct?(wt-=k(wt,It)*ot,It+=k(wt,It)*ot):($t-=k($t,Qt)*ot,Qt+=k($t,Qt)*ot));var Pt,Yt;if(q.type==="waterfall"){if(!Nt){var ve=q[kt.dir].marker;Pt=ve.line.width,Yt=ve.color}}else Pt=y.getLineWidth(q,kt),Yt=kt.mc||q.marker.color;function Re(Ee){var Wt=f.round(Pt/2%1,2);return X.gap===0&&X.groupgap===0?f.round(Math.round(Ee)-Wt,2):Ee}function ir(Ee,Wt,ee){return ee&&Ee===Wt?Ee:Math.abs(Ee-Wt)>=2?Re(Ee):Ee>Wt?Math.ceil(Ee):Math.floor(Ee)}if(!G._context.staticPlot){var Ie=t.opacity(Yt),Be=Ie<1||Pt>.01?Re:ir;wt=Be(wt,It,ct),It=Be(It,wt,ct),$t=Be($t,Qt,!ct),Qt=Be(Qt,$t,!ct)}var Ye=w(m.ensureSingle(Rt,"path"),lt,X,J);if(Ye.style("vector-effect","non-scaling-stroke").attr("d",isNaN((It-wt)*(Qt-$t))||Nt&&G._context.staticPlot?"M0,0Z":"M"+wt+","+$t+"V"+Qt+"H"+It+"V"+$t+"Z").call(a.setClipUrl,$.layerClipId,G),!lt.uniformtext.mode&&bt){var ze=a.makePointStyleFns(q);a.singlePointStyle(kt,Ye,q,ze,G)}S(G,$,Rt,H,zt,wt,It,$t,Qt,X,J),$.layerClipId&&a.hideOutsideRangePoint(kt,Rt.select("text"),st,at,q.xcalendar,q.ycalendar)});var Tt=q.cliponaxis===!1;a.setClipUrl(et,Tt?null:$.layerClipId,G)});i.getComponentMethod("errorbars","plot")(G,F,$,X)}function S(G,$,tt,Z,X,J,st,at,lt,F,H){var et=$.xaxis,q=$.yaxis,W=G._fullLayout,K;function nt(Ee,Wt,ee){var Xt=m.ensureSingle(Ee,"text").text(Wt).attr({class:"bartext bartext-"+K,"text-anchor":"middle","data-notex":1}).call(a.font,ee).call(x.convertToTspans,G);return Xt}var it=Z[0].trace,ot=it.orientation==="h",ct=P(W,Z,X,et,q);K=I(it,X);var bt=F.mode==="stack"||F.mode==="relative",ut=Z[X],pt=!bt||ut._outmost;if(!ct||K==="none"||(ut.isBlank||J===st||at===lt)&&(K==="auto"||K==="inside")){tt.select("text").remove();return}var yt=W.font,Tt=o.getBarColor(Z[X],it),kt=o.getInsideTextFont(it,X,yt,Tt),zt=o.getOutsideTextFont(it,X,yt),Rt=tt.datum();ot?et.type==="log"&&Rt.s0<=0&&(et.range[0]<et.range[1]?J=0:J=et._length):q.type==="log"&&Rt.s0<=0&&(q.range[0]<q.range[1]?at=q._length:at=0);var Gt=Math.abs(st-J)-2*T,wt=Math.abs(lt-at)-2*T,It,$t,Qt,Nt,Pt;if(K==="outside"&&!pt&&!ut.hasB&&(K="inside"),K==="auto")if(pt){K="inside",Pt=m.ensureUniformFontSize(G,kt),It=nt(tt,ct,Pt),$t=a.bBox(It.node()),Qt=$t.width,Nt=$t.height;var Yt=Qt>0&&Nt>0,ve=Qt<=Gt&&Nt<=wt,Re=Qt<=wt&&Nt<=Gt,ir=ot?Gt>=Qt*(wt/Nt):wt>=Nt*(Gt/Qt);Yt&&(ve||Re||ir)?K="inside":(K="outside",It.remove(),It=null)}else K="inside";if(!It){Pt=m.ensureUniformFontSize(G,K==="outside"?zt:kt),It=nt(tt,ct,Pt);var Ie=It.attr("transform");if(It.attr("transform",""),$t=a.bBox(It.node()),Qt=$t.width,Nt=$t.height,It.attr("transform",Ie),Qt<=0||Nt<=0){It.remove();return}}var Be=it.textangle,Ye,ze;K==="outside"?(ze=it.constraintext==="both"||it.constraintext==="outside",Ye=z(J,st,at,lt,$t,{isHorizontal:ot,constrained:ze,angle:Be})):(ze=it.constraintext==="both"||it.constraintext==="inside",Ye=R(J,st,at,lt,$t,{isHorizontal:ot,constrained:ze,angle:Be,anchor:it.insidetextanchor})),Ye.fontSize=Pt.size,d(it.type==="histogram"?"bar":it.type,Ye,W),ut.transform=Ye,w(It,W,F,H).attr("transform",m.getTextTransform(Ye))}function M(G){return G==="auto"?0:G}function L(G,$){var tt=Math.PI/180*$,Z=Math.abs(Math.sin(tt)),X=Math.abs(Math.cos(tt));return{x:G.width*X+G.height*Z,y:G.width*Z+G.height*X}}function R(G,$,tt,Z,X,J){var st=!!J.isHorizontal,at=!!J.constrained,lt=J.angle||0,F=J.anchor||"end",H=F==="end",et=F==="start",q=J.leftToRight||0,W=(q+1)/2,K=1-W,nt=X.width,it=X.height,ot=Math.abs($-G),ct=Math.abs(Z-tt),bt=ot>2*T&&ct>2*T?T:0;ot-=2*bt,ct-=2*bt;var ut=M(lt);lt==="auto"&&!(nt<=ot&&it<=ct)&&(nt>ot||it>ct)&&(!(nt>ct||it>ot)||nt<it!=ot<ct)&&(ut+=90);var pt=L(X,ut),yt=1;at&&(yt=Math.min(1,ot/pt.x,ct/pt.y));var Tt=X.left*K+X.right*W,kt=(X.top+X.bottom)/2,zt=(G+T)*K+($-T)*W,Rt=(tt+Z)/2,Gt=0,wt=0;if(et||H){var It=(st?pt.x:pt.y)/2,$t=st?k(G,$):k(tt,Z);st?et?(zt=G+$t*bt,Gt=-$t*It):(zt=$-$t*bt,Gt=$t*It):et?(Rt=tt+$t*bt,wt=-$t*It):(Rt=Z-$t*bt,wt=$t*It)}return{textX:Tt,textY:kt,targetX:zt,targetY:Rt,anchorX:Gt,anchorY:wt,scale:yt,rotate:ut}}function z(G,$,tt,Z,X,J){var st=!!J.isHorizontal,at=!!J.constrained,lt=J.angle||0,F=X.width,H=X.height,et=Math.abs($-G),q=Math.abs(Z-tt),W;st?W=q>2*T?T:0:W=et>2*T?T:0;var K=1;at&&(K=st?Math.min(1,q/H):Math.min(1,et/F));var nt=M(lt),it=L(X,nt),ot=(st?it.x:it.y)/2,ct=(X.left+X.right)/2,bt=(X.top+X.bottom)/2,ut=(G+$)/2,pt=(tt+Z)/2,yt=0,Tt=0,kt=st?k($,G):k(tt,Z);return st?(ut=$-kt*W,yt=kt*ot):(pt=Z+kt*W,Tt=-kt*ot),{textX:ct,textY:bt,targetX:ut,targetY:pt,anchorX:yt,anchorY:Tt,scale:K,rotate:nt}}function P(G,$,tt,Z,X){var J=$[0].trace,st=J.texttemplate,at;return st?at=U(G,$,tt,Z,X):J.textinfo?at=O($,tt,Z,X):at=y.getValue(J.text,tt),y.coerceString(v,at)}function I(G,$){var tt=y.getValue(G.textposition,$);return y.coerceEnumerated(_,tt)}function U(G,$,tt,Z,X){var J=$[0].trace,st=m.castOption(J,tt,"texttemplate");if(!st)return"";var at=J.type==="histogram",lt=J.type==="waterfall",F=J.type==="funnel",H=J.orientation==="h",et,q,W,K;H?(et="y",q=X,W="x",K=Z):(et="x",q=Z,W="y",K=X);function nt(yt){return r(q,q.c2l(yt),!0).text}function it(yt){return r(K,K.c2l(yt),!0).text}var ot=$[tt],ct={};ct.label=ot.p,ct.labelLabel=ct[et+"Label"]=nt(ot.p);var bt=m.castOption(J,ot.i,"text");(bt===0||bt)&&(ct.text=bt),ct.value=ot.s,ct.valueLabel=ct[W+"Label"]=it(ot.s);var ut={};u(ut,J,ot.i),(at||ut.x===void 0)&&(ut.x=H?ct.value:ct.label),(at||ut.y===void 0)&&(ut.y=H?ct.label:ct.value),(at||ut.xLabel===void 0)&&(ut.xLabel=H?ct.valueLabel:ct.labelLabel),(at||ut.yLabel===void 0)&&(ut.yLabel=H?ct.labelLabel:ct.valueLabel),lt&&(ct.delta=+ot.rawS||ot.s,ct.deltaLabel=it(ct.delta),ct.final=ot.v,ct.finalLabel=it(ct.final),ct.initial=ct.final-ct.delta,ct.initialLabel=it(ct.initial)),F&&(ct.value=ot.s,ct.valueLabel=it(ct.value),ct.percentInitial=ot.begR,ct.percentInitialLabel=m.formatPercent(ot.begR),ct.percentPrevious=ot.difR,ct.percentPreviousLabel=m.formatPercent(ot.difR),ct.percentTotal=ot.sumR,ct.percenTotalLabel=m.formatPercent(ot.sumR));var pt=m.castOption(J,ot.i,"customdata");return pt&&(ct.customdata=pt),m.texttemplateString(st,ct,G._d3locale,ut,ct,J._meta||{})}function O(G,$,tt,Z){var X=G[0].trace,J=X.orientation==="h",st=X.type==="waterfall",at=X.type==="funnel";function lt(pt){var yt=J?Z:tt;return r(yt,pt,!0).text}function F(pt){var yt=J?tt:Z;return r(yt,+pt,!0).text}var H=X.textinfo,et=G[$],q=H.split("+"),W=[],K,nt=function(pt){return q.indexOf(pt)!==-1};if(nt("label")&&W.push(lt(G[$].p)),nt("text")&&(K=m.castOption(X,et.i,"text"),(K===0||K)&&W.push(K)),st){var it=+et.rawS||et.s,ot=et.v,ct=ot-it;nt("initial")&&W.push(F(ct)),nt("delta")&&W.push(F(it)),nt("final")&&W.push(F(ot))}if(at){nt("value")&&W.push(F(et.s));var bt=0;nt("percent initial")&&bt++,nt("percent previous")&&bt++,nt("percent total")&&bt++;var ut=bt>1;nt("percent initial")&&(K=m.formatPercent(et.begR),ut&&(K+=" of initial"),W.push(K)),nt("percent previous")&&(K=m.formatPercent(et.difR),ut&&(K+=" of previous"),W.push(K)),nt("percent total")&&(K=m.formatPercent(et.sumR),ut&&(K+=" of total"),W.push(K))}return W.join("<br>")}B.exports={plot:D,toMoveInsideBar:R}},{"../../components/color":367,"../../components/drawing":389,"../../components/fx/helpers":403,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"../../registry":647,"./attributes":657,"./constants":659,"./helpers":663,"./style":671,"./uniform_text":673,"@plotly/d3":58,"fast-isnumeric":190}],669:[function(e,B,V){B.exports=function(m,x){var t=m.cd,a=m.xaxis,i=m.yaxis,r=t[0].trace,n=r.type==="funnel",d=r.orientation==="h",s=[],o;if(x===!1)for(o=0;o<t.length;o++)t[o].selected=0;else for(o=0;o<t.length;o++){var y=t[o],g="ct"in y?y.ct:f(y,a,i,d,n);x.contains(g,!1,o,m)?(s.push({pointNumber:o,x:a.c2d(y.x),y:i.c2d(y.y)}),y.selected=1):y.selected=0}return s};function f(l,m,x,t,a){var i=m.c2p(t?l.s0:l.p0,!0),r=m.c2p(t?l.s1:l.p1,!0),n=x.c2p(t?l.p0:l.s0,!0),d=x.c2p(t?l.p1:l.s1,!0);return a?[(i+r)/2,(n+d)/2]:t?[r,(n+d)/2]:[(i+r)/2,d]}},{}],670:[function(e,B,V){B.exports=m;var f=e("../../lib").distinctVals,l=e("../../constants/numerical").BADNUM;function m(x,t){this.traces=x,this.sepNegVal=t.sepNegVal,this.overlapNoMerge=t.overlapNoMerge;for(var a=1/0,i=[],r=0;r<x.length;r++){for(var n=x[r],d=0;d<n.length;d++){var s=n[d];s.p!==l&&i.push(s.p)}n[0]&&n[0].width1&&(a=Math.min(n[0].width1,a))}this.positions=i;var o=f(i);this.distinctPositions=o.vals,o.vals.length===1&&a!==1/0?this.minDiff=a:this.minDiff=Math.min(o.minDiff,a);var y=(t.posAxis||{}).type;(y==="category"||y==="multicategory")&&(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}m.prototype.put=function(t,a){var i=this.getLabel(t,a),r=this.bins[i]||0;return this.bins[i]=r+a,r},m.prototype.get=function(t,a){var i=this.getLabel(t,a);return this.bins[i]||0},m.prototype.getLabel=function(t,a){var i=a<0&&this.sepNegVal?"v":"^",r=this.overlapNoMerge?t:Math.round(t/this.binWidth);return i+r}},{"../../constants/numerical":491,"../../lib":515}],671:[function(e,B,V){var f=e("@plotly/d3"),l=e("../../components/color"),m=e("../../components/drawing"),x=e("../../lib"),t=e("../../registry"),a=e("./uniform_text").resizeText,i=e("./attributes"),r=i.textfont,n=i.insidetextfont,d=i.outsidetextfont,s=e("./helpers");function o(w){var h=f.select(w).selectAll("g.barlayer").selectAll("g.trace");a(w,h,"bar");var D=h.size(),S=w._fullLayout;h.style("opacity",function(M){return M[0].trace.opacity}).each(function(M){(S.barmode==="stack"&&D>1||S.bargap===0&&S.bargroupgap===0&&!M[0].trace.marker.line.width)&&f.select(this).attr("shape-rendering","crispEdges")}),h.selectAll("g.points").each(function(M){var L=f.select(this),R=M[0].trace;y(L,R,w)}),t.getComponentMethod("errorbars","style")(h)}function y(w,h,D){m.pointStyle(w.selectAll("path"),h,D),g(w,h,D)}function g(w,h,D){w.selectAll("text").each(function(S){var M=f.select(this),L=x.ensureUniformFontSize(D,u(M,S,h,D));m.font(M,L)})}function b(w,h,D){var S=h[0].trace;S.selectedpoints?v(D,S,w):(y(D,S,w),t.getComponentMethod("errorbars","style")(D))}function v(w,h,D){m.selectedPointStyle(w.selectAll("path"),h),_(w.selectAll("text"),h,D)}function _(w,h,D){w.each(function(S){var M=f.select(this),L;if(S.selected){L=x.ensureUniformFontSize(D,u(M,S,h,D));var R=h.selected.textfont&&h.selected.textfont.color;R&&(L.color=R),m.font(M,L)}else m.selectedTextStyle(M,h)})}function u(w,h,D,S){var M=S._fullLayout.font,L=D.textfont;if(w.classed("bartext-inside")){var R=p(h,D);L=c(D,h.i,M,R)}else w.classed("bartext-outside")&&(L=A(D,h.i,M));return L}function T(w,h,D){return k(r,w.textfont,h,D)}function c(w,h,D,S){var M=T(w,h,D),L=w._input.textfont===void 0||w._input.textfont.color===void 0||Array.isArray(w.textfont.color)&&w.textfont.color[h]===void 0;return L&&(M={color:l.contrast(S),family:M.family,size:M.size}),k(n,w.insidetextfont,h,M)}function A(w,h,D){var S=T(w,h,D);return k(d,w.outsidetextfont,h,S)}function k(w,h,D,S){h=h||{};var M=s.getValue(h.family,D),L=s.getValue(h.size,D),R=s.getValue(h.color,D);return{family:s.coerceString(w.family,M,S.family),size:s.coerceNumber(w.size,L,S.size),color:s.coerceColor(w.color,R,S.color)}}function p(w,h){return h.type==="waterfall"?h[w.dir].marker.color:w.mcc||w.mc||h.marker.color}B.exports={style:o,styleTextPoints:g,styleOnSelect:b,getInsideTextFont:c,getOutsideTextFont:A,getBarColor:p,resizeText:a}},{"../../components/color":367,"../../components/drawing":389,"../../lib":515,"../../registry":647,"./attributes":657,"./helpers":663,"./uniform_text":673,"@plotly/d3":58}],672:[function(e,B,V){var f=e("../../components/color"),l=e("../../components/colorscale/helpers").hasColorscale,m=e("../../components/colorscale/defaults"),x=e("../../lib").coercePattern;B.exports=function(a,i,r,n,d){var s=r("marker.color",n),o=l(a,"marker");o&&m(a,i,d,r,{prefix:"marker.",cLetter:"c"}),r("marker.line.color",f.defaultLine),l(a,"marker.line")&&m(a,i,d,r,{prefix:"marker.line.",cLetter:"c"}),r("marker.line.width"),r("marker.opacity"),x(r,"marker.pattern",s,o),r("selected.marker.color"),r("unselected.marker.color")}},{"../../components/color":367,"../../components/colorscale/defaults":377,"../../components/colorscale/helpers":378,"../../lib":515}],673:[function(e,B,V){var f=e("@plotly/d3"),l=e("../../lib");function m(i,r,n){var d=i._fullLayout,s=d["_"+n+"Text_minsize"];if(s){var o=d.uniformtext.mode==="hide",y;switch(n){case"funnelarea":case"pie":case"sunburst":y="g.slice";break;case"treemap":case"icicle":y="g.slice, g.pathbar";break;default:y="g.points > g.point"}r.selectAll(y).each(function(g){var b=g.transform;if(b){b.scale=o&&b.hide?0:s/b.fontSize;var v=f.select(this).select("text");v.attr("transform",l.getTextTransform(b))}})}}function x(i,r,n){if(n.uniformtext.mode){var d=a(i),s=n.uniformtext.minsize,o=r.scale*r.fontSize;r.hide=o<s,n[d]=n[d]||1/0,r.hide||(n[d]=Math.min(n[d],Math.max(o,s)))}}function t(i,r){var n=a(i);r[n]=void 0}function a(i){return"_"+i+"Text_minsize"}B.exports={recordMinTextSize:x,clearMinTextSize:t,resizeText:m}},{"../../lib":515,"@plotly/d3":58}],674:[function(e,B,V){var f=e("../../plots/template_attributes").hovertemplateAttrs,l=e("../../lib/extend").extendFlat,m=e("../scatterpolar/attributes"),x=e("../bar/attributes");B.exports={r:m.r,theta:m.theta,r0:m.r0,dr:m.dr,theta0:m.theta0,dtheta:m.dtheta,thetaunit:m.thetaunit,base:l({},x.base,{}),offset:l({},x.offset,{}),width:l({},x.width,{}),text:l({},x.text,{}),hovertext:l({},x.hovertext,{}),marker:x.marker,hoverinfo:m.hoverinfo,hovertemplate:f(),selected:x.selected,unselected:x.unselected}},{"../../lib/extend":505,"../../plots/template_attributes":642,"../bar/attributes":657,"../scatterpolar/attributes":1011}],675:[function(e,B,V){var f=e("../../components/colorscale/helpers").hasColorscale,l=e("../../components/colorscale/calc"),m=e("../bar/arrays_to_calcdata"),x=e("../bar/cross_trace_calc").setGroupPositions,t=e("../scatter/calc_selection"),a=e("../../registry").traceIs,i=e("../../lib").extendFlat;function r(d,s){for(var o=d._fullLayout,y=s.subplot,g=o[y].radialaxis,b=o[y].angularaxis,v=g.makeCalcdata(s,"r"),_=b.makeCalcdata(s,"theta"),u=s._length,T=new Array(u),c=v,A=_,k=0;k<u;k++)T[k]={p:A[k],s:c[k]};function p(w){var h=s[w];h!==void 0&&(s["_"+w]=Array.isArray(h)?b.makeCalcdata(s,w):b.d2c(h,s.thetaunit))}return b.type==="linear"&&(p("width"),p("offset")),f(s,"marker")&&l(d,s,{vals:s.marker.color,containerStr:"marker",cLetter:"c"}),f(s,"marker.line")&&l(d,s,{vals:s.marker.line.color,containerStr:"marker.line",cLetter:"c"}),m(T,s),t(T,s),T}function n(d,s,o){for(var y=d.calcdata,g=[],b=0;b<y.length;b++){var v=y[b],_=v[0].trace;_.visible===!0&&a(_,"bar")&&_.subplot===o&&g.push(v)}var u=i({},s.radialaxis,{_id:"x"}),T=s.angularaxis;x(d,T,u,g,{mode:s.barmode,norm:s.barnorm,gap:s.bargap,groupgap:s.bargroupgap})}B.exports={calc:r,crossTraceCalc:n}},{"../../components/colorscale/calc":375,"../../components/colorscale/helpers":378,"../../lib":515,"../../registry":647,"../bar/arrays_to_calcdata":656,"../bar/cross_trace_calc":660,"../scatter/calc_selection":938}],676:[function(e,B,V){var f=e("../../lib"),l=e("../scatterpolar/defaults").handleRThetaDefaults,m=e("../bar/style_defaults"),x=e("./attributes");B.exports=function(a,i,r,n){function d(o,y){return f.coerce(a,i,x,o,y)}var s=l(a,i,n,d);if(!s){i.visible=!1;return}d("thetaunit"),d("base"),d("offset"),d("width"),d("text"),d("hovertext"),d("hovertemplate"),m(a,i,d,r,n),f.coerceSelectionMarkerOpacity(i,d)}},{"../../lib":515,"../bar/style_defaults":672,"../scatterpolar/defaults":1013,"./attributes":674}],677:[function(e,B,V){var f=e("../../components/fx"),l=e("../../lib"),m=e("../bar/hover").getTraceColor,x=l.fillText,t=e("../scatterpolar/hover").makeHoverPointText,a=e("../../plots/polar/helpers").isPtInsidePolygon;B.exports=function(r,n,d){var s=r.cd,o=s[0].trace,y=r.subplot,g=y.radialAxis,b=y.angularAxis,v=y.vangles,_=v?a:l.isPtInsideSector,u=r.maxHoverDistance,T=b._period||2*Math.PI,c=Math.abs(g.g2p(Math.sqrt(n*n+d*d))),A=Math.atan2(d,n);g.range[0]>g.range[1]&&(A+=Math.PI);var k=function(D){return _(c,A,[D.rp0,D.rp1],[D.thetag0,D.thetag1],v)?u+Math.min(1,Math.abs(D.thetag1-D.thetag0)/T)-1+(D.rp1-c)/(D.rp1-D.rp0)-1:1/0};if(f.getClosest(s,k,r),r.index!==!1){var p=r.index,w=s[p];r.x0=r.x1=w.ct[0],r.y0=r.y1=w.ct[1];var h=l.extendFlat({},w,{r:w.s,theta:w.p});return x(w,o,r),t(h,o,y,r),r.hovertemplate=o.hovertemplate,r.color=m(o,w),r.xLabelVal=r.yLabelVal=void 0,w.s<0&&(r.idealAlign="left"),[r]}}},{"../../components/fx":407,"../../lib":515,"../../plots/polar/helpers":630,"../bar/hover":664,"../scatterpolar/hover":1015}],678:[function(e,B,V){B.exports={moduleType:"trace",name:"barpolar",basePlotModule:e("../../plots/polar"),categories:["polar","bar","showLegend"],attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults"),supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc").calc,crossTraceCalc:e("./calc").crossTraceCalc,plot:e("./plot"),colorbar:e("../scatter/marker_colorbar"),formatLabels:e("../scatterpolar/format_labels"),style:e("../bar/style").style,styleOnSelect:e("../bar/style").styleOnSelect,hoverPoints:e("./hover"),selectPoints:e("../bar/select"),meta:{}}},{"../../plots/polar":631,"../bar/select":669,"../bar/style":671,"../scatter/marker_colorbar":954,"../scatterpolar/format_labels":1014,"./attributes":674,"./calc":675,"./defaults":676,"./hover":677,"./layout_attributes":679,"./layout_defaults":680,"./plot":681}],679:[function(e,B,V){B.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},{}],680:[function(e,B,V){var f=e("../../lib"),l=e("./layout_attributes");B.exports=function(m,x,t){var a={},i;function r(s,o){return f.coerce(m[i]||{},x[i],l,s,o)}for(var n=0;n<t.length;n++){var d=t[n];d.type==="barpolar"&&d.visible===!0&&(i=d.subplot,a[i]||(r("barmode"),r("bargap"),a[i]=1))}}},{"../../lib":515,"./layout_attributes":679}],681:[function(e,B,V){var f=e("@plotly/d3"),l=e("fast-isnumeric"),m=e("../../lib"),x=e("../../components/drawing"),t=e("../../plots/polar/helpers");B.exports=function(r,n,d){var s=n.xaxis,o=n.yaxis,y=n.radialAxis,g=n.angularAxis,b=a(n),v=n.layers.frontplot.select("g.barlayer");m.makeTraceGroups(v,d,"trace bars").each(function(){var _=f.select(this),u=m.ensureSingle(_,"g","points"),T=u.selectAll("g.point").data(m.identity);T.enter().append("g").style("vector-effect","non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),T.exit().remove(),T.each(function(c){var A=f.select(this),k=c.rp0=y.c2p(c.s0),p=c.rp1=y.c2p(c.s1),w=c.thetag0=g.c2g(c.p0),h=c.thetag1=g.c2g(c.p1),D;if(!l(k)||!l(p)||!l(w)||!l(h)||k===p||w===h)D="M0,0Z";else{var S=y.c2g(c.s1),M=(w+h)/2;c.ct=[s.c2p(S*Math.cos(M)),o.c2p(S*Math.sin(M))],D=b(k,p,w,h)}m.ensureSingle(A,"path").attr("d",D)}),x.setClipUrl(_,n._hasClipOnAxisFalse?n.clipIds.forTraces:null,r)})};function a(i){var r=i.cxx,n=i.cyy;return i.vangles?function(d,s,o,y){var g,b;m.angleDelta(o,y)>0?(g=o,b=y):(g=y,b=o);var v=t.findEnclosingVertexAngles(g,i.vangles)[0],_=t.findEnclosingVertexAngles(b,i.vangles)[1],u=[v,(g+b)/2,_];return t.pathPolygonAnnulus(d,s,g,b,u,r,n)}:function(d,s,o,y){return m.pathAnnulus(d,s,o,y,r,n)}}},{"../../components/drawing":389,"../../lib":515,"../../plots/polar/helpers":630,"@plotly/d3":58,"fast-isnumeric":190}],682:[function(e,B,V){var f=e("../scatter/attributes"),l=e("../bar/attributes"),m=e("../../components/color/attributes"),x=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,t=e("../../plots/template_attributes").hovertemplateAttrs,a=e("../../lib/extend").extendFlat,i=f.marker,r=i.line;B.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:f.xperiod,yperiod:f.yperiod,xperiod0:f.xperiod0,yperiod0:f.yperiod0,xperiodalignment:f.xperiodalignment,yperiodalignment:f.yperiodalignment,xhoverformat:x("x"),yhoverformat:x("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:a({},i.symbol,{arrayOk:!1,editType:"plot"}),opacity:a({},i.opacity,{arrayOk:!1,dflt:1,editType:"style"}),size:a({},i.size,{arrayOk:!1,editType:"calc"}),color:a({},i.color,{arrayOk:!1,editType:"style"}),line:{color:a({},r.color,{arrayOk:!1,dflt:m.defaultLine,editType:"style"}),width:a({},r.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:f.fillcolor,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},offsetgroup:l.offsetgroup,alignmentgroup:l.alignmentgroup,selected:{marker:f.selected.marker,editType:"style"},unselected:{marker:f.unselected.marker,editType:"style"},text:a({},f.text,{}),hovertext:a({},f.hovertext,{}),hovertemplate:t({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},{"../../components/color/attributes":366,"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../bar/attributes":657,"../scatter/attributes":936}],683:[function(e,B,V){var f=e("fast-isnumeric"),l=e("../../plots/cartesian/axes"),m=e("../../plots/cartesian/align_period"),x=e("../../lib"),t=e("../../constants/numerical").BADNUM,a=x._;B.exports=function(A,k){var p=A._fullLayout,w=l.getFromId(A,k.xaxis||"x"),h=l.getFromId(A,k.yaxis||"y"),D=[],S=k.type==="violin"?"_numViolins":"_numBoxes",M,L,R,z,P,I,U;k.orientation==="h"?(R=w,z="x",P=h,I="y",U=!!k.yperiodalignment):(R=h,z="y",P=w,I="x",U=!!k.xperiodalignment);var O=i(k,I,P,p[S]),G=O[0],$=O[1],tt=x.distinctVals(G,P),Z=tt.vals,X=tt.minDiff/2,J,st,at,lt,F,H,et=(k.boxpoints||k.points)==="all"?x.identity:function(Ie){return Ie.v<J.lf||Ie.v>J.uf};if(k._hasPreCompStats){var q=k[z],W=function(Ie){return R.d2c((k[Ie]||[])[M])},K=1/0,nt=-1/0;for(M=0;M<k._length;M++){var it=G[M];if(!!f(it)){if(J={},J.pos=J[I]=it,U&&$&&(J.orig_p=$[M]),J.q1=W("q1"),J.med=W("median"),J.q3=W("q3"),st=[],q&&x.isArrayOrTypedArray(q[M]))for(L=0;L<q[M].length;L++)H=R.d2c(q[M][L]),H!==t&&(F={v:H,i:[M,L]},s(F,k,[M,L]),st.push(F));if(J.pts=st.sort(y),at=J[z]=st.map(g),lt=at.length,J.med!==t&&J.q1!==t&&J.q3!==t&&J.med>=J.q1&&J.q3>=J.med){var ot=W("lowerfence");J.lf=ot!==t&&ot<=J.q1?ot:b(J,at,lt);var ct=W("upperfence");J.uf=ct!==t&&ct>=J.q3?ct:v(J,at,lt);var bt=W("mean");J.mean=bt!==t?bt:lt?x.mean(at,lt):(J.q1+J.q3)/2;var ut=W("sd");J.sd=bt!==t&&ut>=0?ut:lt?x.stdev(at,lt,J.mean):J.q3-J.q1,J.lo=_(J),J.uo=u(J);var pt=W("notchspan");pt=pt!==t&&pt>0?pt:T(J,lt),J.ln=J.med-pt,J.un=J.med+pt;var yt=J.lf,Tt=J.uf;k.boxpoints&&at.length&&(yt=Math.min(yt,at[0]),Tt=Math.max(Tt,at[lt-1])),k.notched&&(yt=Math.min(yt,J.ln),Tt=Math.max(Tt,J.un)),J.min=yt,J.max=Tt}else{x.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+J.q1,"median = "+J.med,"q3 = "+J.q3].join(`
`));var kt;J.med!==t?kt=J.med:J.q1!==t?J.q3!==t?kt=(J.q1+J.q3)/2:kt=J.q1:J.q3!==t?kt=J.q3:kt=0,J.med=kt,J.q1=J.q3=kt,J.lf=J.uf=kt,J.mean=J.sd=kt,J.ln=J.un=kt,J.min=J.max=kt}K=Math.min(K,J.min),nt=Math.max(nt,J.max),J.pts2=st.filter(et),D.push(J)}}k._extremes[R._id]=l.findExtremes(R,[K,nt],{padded:!0})}else{var zt=R.makeCalcdata(k,z),Rt=r(Z,X),Gt=Z.length,wt=n(Gt);for(M=0;M<k._length;M++)if(H=zt[M],!!f(H)){var It=x.findBin(G[M],Rt);It>=0&&It<Gt&&(F={v:H,i:M},s(F,k,M),wt[It].push(F))}var $t=1/0,Qt=-1/0,Nt=k.quartilemethod,Pt=Nt==="exclusive",Yt=Nt==="inclusive";for(M=0;M<Gt;M++)if(wt[M].length>0){if(J={},J.pos=J[I]=Z[M],st=J.pts=wt[M].sort(y),at=J[z]=st.map(g),lt=at.length,J.min=at[0],J.max=at[lt-1],J.mean=x.mean(at,lt),J.sd=x.stdev(at,lt,J.mean),J.med=x.interp(at,.5),lt%2&&(Pt||Yt)){var ve,Re;Pt?(ve=at.slice(0,lt/2),Re=at.slice(lt/2+1)):Yt&&(ve=at.slice(0,lt/2+1),Re=at.slice(lt/2)),J.q1=x.interp(ve,.5),J.q3=x.interp(Re,.5)}else J.q1=x.interp(at,.25),J.q3=x.interp(at,.75);J.lf=b(J,at,lt),J.uf=v(J,at,lt),J.lo=_(J),J.uo=u(J);var ir=T(J,lt);J.ln=J.med-ir,J.un=J.med+ir,$t=Math.min($t,J.ln),Qt=Math.max(Qt,J.un),J.pts2=st.filter(et),D.push(J)}k._extremes[R._id]=l.findExtremes(R,k.notched?zt.concat([$t,Qt]):zt,{padded:!0})}return o(D,k),D.length>0?(D[0].t={num:p[S],dPos:X,posLetter:I,valLetter:z,labels:{med:a(A,"median:"),min:a(A,"min:"),q1:a(A,"q1:"),q3:a(A,"q3:"),max:a(A,"max:"),mean:k.boxmean==="sd"?a(A,"mean \xB1 \u03C3:"):a(A,"mean:"),lf:a(A,"lower fence:"),uf:a(A,"upper fence:")}},p[S]++,D):[{t:{empty:!0}}]};function i(c,A,k,p){var w=A in c,h=A+"0"in c,D="d"+A in c;if(w||h&&D){var S=k.makeCalcdata(c,A),M=m(c,k,A,S).vals;return[M,S]}var L;h?L=c[A+"0"]:"name"in c&&(k.type==="category"||f(c.name)&&["linear","log"].indexOf(k.type)!==-1||x.isDateTime(c.name)&&k.type==="date")?L=c.name:L=p;for(var R=k.type==="multicategory"?k.r2c_just_indices(L):k.d2c(L,0,c[A+"calendar"]),z=c._length,P=new Array(z),I=0;I<z;I++)P[I]=R;return[P]}function r(c,A){for(var k=c.length,p=new Array(k+1),w=0;w<k;w++)p[w]=c[w]-A;return p[k]=c[k-1]+A,p}function n(c){for(var A=new Array(c),k=0;k<c;k++)A[k]=[];return A}var d={text:"tx",hovertext:"htx"};function s(c,A,k){for(var p in d)x.isArrayOrTypedArray(A[p])&&(Array.isArray(k)?x.isArrayOrTypedArray(A[p][k[0]])&&(c[d[p]]=A[p][k[0]][k[1]]):c[d[p]]=A[p][k])}function o(c,A){if(x.isArrayOrTypedArray(A.selectedpoints))for(var k=0;k<c.length;k++){for(var p=c[k].pts||[],w={},h=0;h<p.length;h++)w[p[h].i]=h;x.tagSelected(p,A,w)}}function y(c,A){return c.v-A.v}function g(c){return c.v}function b(c,A,k){return k===0?c.q1:Math.min(c.q1,A[Math.min(x.findBin(2.5*c.q1-1.5*c.q3,A,!0)+1,k-1)])}function v(c,A,k){return k===0?c.q3:Math.max(c.q3,A[Math.max(x.findBin(2.5*c.q3-1.5*c.q1,A),0)])}function _(c){return 4*c.q1-3*c.q3}function u(c){return 4*c.q3-3*c.q1}function T(c,A){return A===0?0:1.57*(c.q3-c.q1)/Math.sqrt(A)}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"fast-isnumeric":190}],684:[function(e,B,V){var f=e("../../plots/cartesian/axes"),l=e("../../lib"),m=e("../../plots/cartesian/constraints").getAxisGroup,x=["v","h"];function t(i,r){for(var n=i.calcdata,d=r.xaxis,s=r.yaxis,o=0;o<x.length;o++){for(var y=x[o],g=y==="h"?s:d,b=[],v=0;v<n.length;v++){var _=n[v],u=_[0].t,T=_[0].trace;T.visible===!0&&(T.type==="box"||T.type==="candlestick")&&!u.empty&&(T.orientation||"v")===y&&T.xaxis===d._id&&T.yaxis===s._id&&b.push(v)}a("box",i,b,g)}}function a(i,r,n,d){var s=r.calcdata,o=r._fullLayout,y=d._id,g=y.charAt(0),b,v,_,u=[],T=0;for(b=0;b<n.length;b++)for(_=s[n[b]],v=0;v<_.length;v++)u.push(d.c2l(_[v].pos,!0)),T+=(_[v].pts2||[]).length;if(!!u.length){var c=l.distinctVals(u);(d.type==="category"||d.type==="multicategory")&&(c.minDiff=1);var A=c.minDiff/2;f.minDtick(d,c.minDiff,c.vals[0],!0);var k=i==="violin"?"_numViolins":"_numBoxes",p=o[k],w=o[i+"mode"]==="group"&&p>1,h=1-o[i+"gap"],D=1-o[i+"groupgap"];for(b=0;b<n.length;b++){_=s[n[b]];var S=_[0].trace,M=_[0].t,L=S.width,R=S.side,z,P,I,U;if(L)z=P=U=L/2,I=0;else if(z=A,w){var O=m(o,d._id)+S.orientation,G=o._alignmentOpts[O]||{},$=G[S.alignmentgroup]||{},tt=Object.keys($.offsetGroups||{}).length,Z=tt||p,X=tt?S._offsetIndex:M.num;P=z*h*D/Z,I=2*z*(-.5+(X+.5)/Z)*h,U=z*h/Z}else P=z*h*D,I=0,U=z;M.dPos=z,M.bPos=I,M.bdPos=P,M.wHover=U;var J,st,at=I+P,lt,F,H,et,q,W,K=Boolean(L),nt=(S.boxpoints||S.points)&&T>0;if(R==="positive"?(J=z*(L?1:.5),lt=at,st=lt=I):R==="negative"?(J=lt=I,st=z*(L?1:.5),F=at):(J=st=z,lt=F=at),nt){var it=S.pointpos,ot=S.jitter,ct=S.marker.size/2,bt=0;it+ot>=0&&(bt=at*(it+ot),bt>J?(K=!0,q=ct,H=bt):bt>lt&&(q=ct,H=J)),bt<=J&&(H=J);var ut=0;it-ot<=0&&(ut=-at*(it-ot),ut>st?(K=!0,W=ct,et=ut):ut>F&&(W=ct,et=st)),ut<=st&&(et=st)}else H=J,et=st;var pt=new Array(_.length);for(v=0;v<_.length;v++)pt[v]=_[v].pos;S._extremes[y]=f.findExtremes(d,pt,{padded:K,vpadminus:et,vpadplus:H,vpadLinearized:!0,ppadminus:{x:W,y:q}[g],ppadplus:{x:q,y:W}[g]})}}}B.exports={crossTraceCalc:t,setPositionOffset:a}},{"../../lib":515,"../../plots/cartesian/axes":566,"../../plots/cartesian/constraints":574}],685:[function(e,B,V){var f=e("../../lib"),l=e("../../registry"),m=e("../../components/color"),x=e("../scatter/period_defaults"),t=e("../bar/defaults").handleGroupingDefaults,a=e("../../plots/cartesian/axis_autotype"),i=e("./attributes");function r(o,y,g,b){function v(w,h){return f.coerce(o,y,i,w,h)}if(n(o,y,v,b),y.visible!==!1){x(o,y,b,v),v("xhoverformat"),v("yhoverformat");var _=y._hasPreCompStats;_&&(v("lowerfence"),v("upperfence")),v("line.color",(o.marker||{}).color||g),v("line.width"),v("fillcolor",m.addOpacity(y.line.color,.5));var u=!1;if(_){var T=v("mean"),c=v("sd");T&&T.length&&(u=!0,c&&c.length&&(u="sd"))}v("boxmean",u),v("whiskerwidth"),v("width"),v("quartilemethod");var A=!1;if(_){var k=v("notchspan");k&&k.length&&(A=!0)}else f.validate(o.notchwidth,i.notchwidth)&&(A=!0);var p=v("notched",A);p&&v("notchwidth"),d(o,y,v,{prefix:"box"})}}function n(o,y,g,b){function v(tt){var Z=0;return tt&&tt.length&&(Z+=1,f.isArrayOrTypedArray(tt[0])&&tt[0].length&&(Z+=1)),Z}function _(tt){return f.validate(o[tt],i[tt])}var u=g("y"),T=g("x"),c;if(y.type==="box"){var A=g("q1"),k=g("median"),p=g("q3");y._hasPreCompStats=A&&A.length&&k&&k.length&&p&&p.length,c=Math.min(f.minRowLength(A),f.minRowLength(k),f.minRowLength(p))}var w=v(u),h=v(T),D=w&&f.minRowLength(u),S=h&&f.minRowLength(T),M=b.calendar,L={autotypenumbers:b.autotypenumbers},R,z;if(y._hasPreCompStats)switch(String(h)+String(w)){case"00":var P=_("x0")||_("dx"),I=_("y0")||_("dy");I&&!P?R="h":R="v",z=c;break;case"10":R="v",z=Math.min(c,S);break;case"20":R="h",z=Math.min(c,T.length);break;case"01":R="h",z=Math.min(c,D);break;case"02":R="v",z=Math.min(c,u.length);break;case"12":R="v",z=Math.min(c,S,u.length);break;case"21":R="h",z=Math.min(c,T.length,D);break;case"11":z=0;break;case"22":var U=!1,O;for(O=0;O<T.length;O++)if(a(T[O],M,L)==="category"){U=!0;break}if(U)R="v",z=Math.min(c,S,u.length);else{for(O=0;O<u.length;O++)if(a(u[O],M,L)==="category"){U=!0;break}U?(R="h",z=Math.min(c,T.length,D)):(R="v",z=Math.min(c,S,u.length))}break}else w>0?(R="v",h>0?z=Math.min(S,D):z=Math.min(D)):h>0?(R="h",z=Math.min(S)):z=0;if(!z){y.visible=!1;return}y._length=z;var G=g("orientation",R);y._hasPreCompStats?G==="v"&&h===0?(g("x0",0),g("dx",1)):G==="h"&&w===0&&(g("y0",0),g("dy",1)):G==="v"&&h===0?g("x0"):G==="h"&&w===0&&g("y0");var $=l.getComponentMethod("calendars","handleTraceDefaults");$(o,y,["x","y"],b)}function d(o,y,g,b){var v=b.prefix,_=f.coerce2(o,y,i,"marker.outliercolor"),u=g("marker.line.outliercolor"),T="outliers";y._hasPreCompStats?T="all":(_||u)&&(T="suspectedoutliers");var c=g(v+"points",T);c?(g("jitter",c==="all"?.3:0),g("pointpos",c==="all"?-1.5:0),g("marker.symbol"),g("marker.opacity"),g("marker.size"),g("marker.color",y.line.color),g("marker.line.color"),g("marker.line.width"),c==="suspectedoutliers"&&(g("marker.line.outliercolor",y.marker.color),g("marker.line.outlierwidth")),g("selected.marker.color"),g("unselected.marker.color"),g("selected.marker.size"),g("unselected.marker.size"),g("text"),g("hovertext")):delete y.marker;var A=g("hoveron");(A==="all"||A.indexOf("points")!==-1)&&g("hovertemplate"),f.coerceSelectionMarkerOpacity(y,g)}function s(o,y){var g,b;function v(T){return f.coerce(b._input,b,i,T)}for(var _=0;_<o.length;_++){b=o[_];var u=b.type;(u==="box"||u==="violin")&&(g=b._input,y[u+"mode"]==="group"&&t(g,b,y,v))}}B.exports={supplyDefaults:r,crossTraceDefaults:s,handleSampleDefaults:n,handlePointsDefaults:d}},{"../../components/color":367,"../../lib":515,"../../plots/cartesian/axis_autotype":567,"../../registry":647,"../bar/defaults":661,"../scatter/period_defaults":956,"./attributes":682}],686:[function(e,B,V){B.exports=function(l,m){return m.hoverOnBox&&(l.hoverOnBox=m.hoverOnBox),"xVal"in m&&(l.x=m.xVal),"yVal"in m&&(l.y=m.yVal),m.xa&&(l.xaxis=m.xa),m.ya&&(l.yaxis=m.ya),l}},{}],687:[function(e,B,V){var f=e("../../plots/cartesian/axes"),l=e("../../lib"),m=e("../../components/fx"),x=e("../../components/color"),t=l.fillText;function a(n,d,s,o){var y=n.cd,g=y[0].trace,b=g.hoveron,v=[],_;return b.indexOf("boxes")!==-1&&(v=v.concat(i(n,d,s,o))),b.indexOf("points")!==-1&&(_=r(n,d,s)),o==="closest"?_?[_]:v:(_&&v.push(_),v)}function i(n,d,s,o){var y=n.cd,g=n.xa,b=n.ya,v=y[0].trace,_=y[0].t,u=v.type==="violin",T,c,A,k,p,w,h,D,S,M,L,R=_.bdPos,z,P,I=_.wHover,U=function(ut){return A.c2l(ut.pos)+_.bPos-A.c2l(w)};u&&v.side!=="both"?(v.side==="positive"&&(S=function(ut){var pt=U(ut);return m.inbox(pt,pt+I,M)},z=R,P=0),v.side==="negative"&&(S=function(ut){var pt=U(ut);return m.inbox(pt-I,pt,M)},z=0,P=R)):(S=function(ut){var pt=U(ut);return m.inbox(pt-I,pt+I,M)},z=P=R);var O;u?O=function(ut){return m.inbox(ut.span[0]-p,ut.span[1]-p,M)}:O=function(ut){return m.inbox(ut.min-p,ut.max-p,M)},v.orientation==="h"?(p=d,w=s,h=O,D=S,T="y",A=b,c="x",k=g):(p=s,w=d,h=S,D=O,T="x",A=g,c="y",k=b);var G=Math.min(1,R/Math.abs(A.r2c(A.range[1])-A.r2c(A.range[0])));M=n.maxHoverDistance-G,L=n.maxSpikeDistance-G;function $(ut){return(h(ut)+D(ut))/2}var tt=m.getDistanceFunction(o,h,D,$);if(m.getClosest(y,tt,n),n.index===!1)return[];var Z=y[n.index],X=v.line.color,J=(v.marker||{}).color;x.opacity(X)&&v.line.width?n.color=X:x.opacity(J)&&v.boxpoints?n.color=J:n.color=v.fillcolor,n[T+"0"]=A.c2p(Z.pos+_.bPos-P,!0),n[T+"1"]=A.c2p(Z.pos+_.bPos+z,!0),n[T+"LabelVal"]=Z.orig_p!==void 0?Z.orig_p:Z.pos;var st=T+"Spike";n.spikeDistance=$(Z)*L/M,n[st]=A.c2p(Z.pos,!0);var at=v.boxmean||(v.meanline||{}).visible,lt=v.boxpoints||v.points,F=lt&&at?["max","uf","q3","med","mean","q1","lf","min"]:lt&&!at?["max","uf","q3","med","q1","lf","min"]:!lt&&at?["max","q3","med","mean","q1","min"]:["max","q3","med","q1","min"],H=k.range[1]<k.range[0];v.orientation===(H?"v":"h")&&F.reverse();for(var et=n.spikeDistance,q=n[st],W=[],K=0;K<F.length;K++){var nt=F[K];if(nt in Z){var it=Z[nt],ot=k.c2p(it,!0),ct=l.extendFlat({},n);ct.attr=nt,ct[c+"0"]=ct[c+"1"]=ot,ct[c+"LabelVal"]=it,ct[c+"Label"]=(_.labels?_.labels[nt]+" ":"")+f.hoverLabelText(k,it,v[c+"hoverformat"]),ct.hoverOnBox=!0,nt==="mean"&&"sd"in Z&&v.boxmean==="sd"&&(ct[c+"err"]=Z.sd),ct.hovertemplate=!1,W.push(ct)}}n.name="",n.spikeDistance=void 0,n[st]=void 0;for(var bt=0;bt<W.length;bt++)W[bt].attr!=="med"?(W[bt].name="",W[bt].spikeDistance=void 0,W[bt][st]=void 0):(W[bt].spikeDistance=et,W[bt][st]=q);return W}function r(n,d,s){for(var o=n.cd,y=n.xa,g=n.ya,b=o[0].trace,v=y.c2p(d),_=g.c2p(s),u,T=function(O){var G=Math.max(3,O.mrc||0);return Math.max(Math.abs(y.c2p(O.x)-v)-G,1-3/G)},c=function(O){var G=Math.max(3,O.mrc||0);return Math.max(Math.abs(g.c2p(O.y)-_)-G,1-3/G)},A=m.quadrature(T,c),k=!1,p,w,h=0;h<o.length;h++){p=o[h];for(var D=0;D<(p.pts||[]).length;D++){w=p.pts[D];var S=A(w);S<=n.distance&&(n.distance=S,k=[h,D])}}if(!k)return!1;p=o[k[0]],w=p.pts[k[1]];var M=y.c2p(w.x,!0),L=g.c2p(w.y,!0),R=w.mrc||1;u=l.extendFlat({},n,{index:w.i,color:(b.marker||{}).color,name:b.name,x0:M-R,x1:M+R,y0:L-R,y1:L+R,spikeDistance:n.distance,hovertemplate:b.hovertemplate});var z=p.orig_p,P=z!==void 0?z:p.pos,I;b.orientation==="h"?(I=g,u.xLabelVal=w.x,u.yLabelVal=P):(I=y,u.xLabelVal=P,u.yLabelVal=w.y);var U=I._id.charAt(0);return u[U+"Spike"]=I.c2p(p.pos,!0),t(w,b,u),u}B.exports={hoverPoints:a,hoverOnBoxes:i,hoverOnPoints:r}},{"../../components/color":367,"../../components/fx":407,"../../lib":515,"../../plots/cartesian/axes":566}],688:[function(e,B,V){B.exports={attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults").supplyDefaults,crossTraceDefaults:e("./defaults").crossTraceDefaults,supplyLayoutDefaults:e("./layout_defaults").supplyLayoutDefaults,calc:e("./calc"),crossTraceCalc:e("./cross_trace_calc").crossTraceCalc,plot:e("./plot").plot,style:e("./style").style,styleOnSelect:e("./style").styleOnSelect,hoverPoints:e("./hover").hoverPoints,eventData:e("./event_data"),selectPoints:e("./select"),moduleType:"trace",name:"box",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":578,"./attributes":682,"./calc":683,"./cross_trace_calc":684,"./defaults":685,"./event_data":686,"./hover":687,"./layout_attributes":689,"./layout_defaults":690,"./plot":691,"./select":692,"./style":693}],689:[function(e,B,V){B.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},{}],690:[function(e,B,V){var f=e("../../registry"),l=e("../../lib"),m=e("./layout_attributes");function x(a,i,r,n,d){for(var s=d+"Layout",o=!1,y=0;y<r.length;y++){var g=r[y];if(f.traceIs(g,s)){o=!0;break}}!o||(n(d+"mode"),n(d+"gap"),n(d+"groupgap"))}function t(a,i,r){function n(d,s){return l.coerce(a,i,m,d,s)}x(a,i,r,n,"box")}B.exports={supplyLayoutDefaults:t,_supply:x}},{"../../lib":515,"../../registry":647,"./layout_attributes":689}],691:[function(e,B,V){var f=e("@plotly/d3"),l=e("../../lib"),m=e("../../components/drawing"),x=5,t=.01;function a(d,s,o,y){var g=s.xaxis,b=s.yaxis;l.makeTraceGroups(y,o,"trace boxes").each(function(v){var _=f.select(this),u=v[0],T=u.t,c=u.trace;if(T.wdPos=T.bdPos*c.whiskerwidth,c.visible!==!0||T.empty){_.remove();return}var A,k;c.orientation==="h"?(A=b,k=g):(A=g,k=b),i(_,{pos:A,val:k},c,T),r(_,{x:g,y:b},c,T),n(_,{pos:A,val:k},c,T)})}function i(d,s,o,y){var g=o.orientation==="h",b=s.val,v=s.pos,_=!!v.rangebreaks,u=y.bPos,T=y.wdPos||0,c=y.bPosPxOffset||0,A=o.whiskerwidth||0,k=o.notched||!1,p=k?1-2*o.notchwidth:1,w,h;Array.isArray(y.bdPos)?(w=y.bdPos[0],h=y.bdPos[1]):(w=y.bdPos,h=y.bdPos);var D=d.selectAll("path.box").data(o.type!=="violin"||o.box.visible?l.identity:[]);D.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","box"),D.exit().remove(),D.each(function(S){if(S.empty)return"M0,0Z";var M=v.c2l(S.pos+u,!0),L=v.l2p(M-w)+c,R=v.l2p(M+h)+c,z=_?(L+R)/2:v.l2p(M)+c,P=o.whiskerwidth,I=_?L*P+(1-P)*z:v.l2p(M-T)+c,U=_?R*P+(1-P)*z:v.l2p(M+T)+c,O=v.l2p(M-w*p)+c,G=v.l2p(M+h*p)+c,$=b.c2p(S.q1,!0),tt=b.c2p(S.q3,!0),Z=l.constrain(b.c2p(S.med,!0),Math.min($,tt)+1,Math.max($,tt)-1),X=S.lf===void 0||o.boxpoints===!1,J=b.c2p(X?S.min:S.lf,!0),st=b.c2p(X?S.max:S.uf,!0),at=b.c2p(S.ln,!0),lt=b.c2p(S.un,!0);g?f.select(this).attr("d","M"+Z+","+O+"V"+G+"M"+$+","+L+"V"+R+(k?"H"+at+"L"+Z+","+G+"L"+lt+","+R:"")+"H"+tt+"V"+L+(k?"H"+lt+"L"+Z+","+O+"L"+at+","+L:"")+"ZM"+$+","+z+"H"+J+"M"+tt+","+z+"H"+st+(A===0?"":"M"+J+","+I+"V"+U+"M"+st+","+I+"V"+U)):f.select(this).attr("d","M"+O+","+Z+"H"+G+"M"+L+","+$+"H"+R+(k?"V"+at+"L"+G+","+Z+"L"+R+","+lt:"")+"V"+tt+"H"+L+(k?"V"+lt+"L"+O+","+Z+"L"+L+","+at:"")+"ZM"+z+","+$+"V"+J+"M"+z+","+tt+"V"+st+(A===0?"":"M"+I+","+J+"H"+U+"M"+I+","+st+"H"+U))})}function r(d,s,o,y){var g=s.x,b=s.y,v=y.bdPos,_=y.bPos,u=o.boxpoints||o.points;l.seedPseudoRandom();var T=function(k){return k.forEach(function(p){p.t=y,p.trace=o}),k},c=d.selectAll("g.points").data(u?T:[]);c.enter().append("g").attr("class","points"),c.exit().remove();var A=c.selectAll("path").data(function(k){var p,w=k.pts2,h=Math.max((k.max-k.min)/10,k.q3-k.q1),D=h*1e-9,S=h*t,M=[],L=0,R;if(o.jitter){if(h===0)for(L=1,M=new Array(w.length),p=0;p<w.length;p++)M[p]=1;else for(p=0;p<w.length;p++){var z=Math.max(0,p-x),P=w[z].v,I=Math.min(w.length-1,p+x),U=w[I].v;u!=="all"&&(w[p].v<k.lf?U=Math.min(U,k.lf):P=Math.max(P,k.uf));var O=Math.sqrt(S*(I-z)/(U-P+D))||0;O=l.constrain(Math.abs(O),0,1),M.push(O),L=Math.max(O,L)}R=o.jitter*2/(L||1)}for(p=0;p<w.length;p++){var G=w[p],$=G.v,tt=o.jitter?R*M[p]*(l.pseudoRandom()-.5):0,Z=k.pos+_+v*(o.pointpos+tt);o.orientation==="h"?(G.y=Z,G.x=$):(G.x=Z,G.y=$),u==="suspectedoutliers"&&$<k.uo&&$>k.lo&&(G.so=!0)}return w});A.enter().append("path").classed("point",!0),A.exit().remove(),A.call(m.translatePoints,g,b)}function n(d,s,o,y){var g=s.val,b=s.pos,v=!!b.rangebreaks,_=y.bPos,u=y.bPosPxOffset||0,T=o.boxmean||(o.meanline||{}).visible,c,A;Array.isArray(y.bdPos)?(c=y.bdPos[0],A=y.bdPos[1]):(c=y.bdPos,A=y.bdPos);var k=d.selectAll("path.mean").data(o.type==="box"&&o.boxmean||o.type==="violin"&&o.box.visible&&o.meanline.visible?l.identity:[]);k.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),k.exit().remove(),k.each(function(p){var w=b.c2l(p.pos+_,!0),h=b.l2p(w-c)+u,D=b.l2p(w+A)+u,S=v?(h+D)/2:b.l2p(w)+u,M=g.c2p(p.mean,!0),L=g.c2p(p.mean-p.sd,!0),R=g.c2p(p.mean+p.sd,!0);o.orientation==="h"?f.select(this).attr("d","M"+M+","+h+"V"+D+(T==="sd"?"m0,0L"+L+","+S+"L"+M+","+h+"L"+R+","+S+"Z":"")):f.select(this).attr("d","M"+h+","+M+"H"+D+(T==="sd"?"m0,0L"+S+","+L+"L"+h+","+M+"L"+S+","+R+"Z":""))})}B.exports={plot:a,plotBoxAndWhiskers:i,plotPoints:r,plotBoxMean:n}},{"../../components/drawing":389,"../../lib":515,"@plotly/d3":58}],692:[function(e,B,V){B.exports=function(l,m){var x=l.cd,t=l.xaxis,a=l.yaxis,i=[],r,n;if(m===!1)for(r=0;r<x.length;r++)for(n=0;n<(x[r].pts||[]).length;n++)x[r].pts[n].selected=0;else for(r=0;r<x.length;r++)for(n=0;n<(x[r].pts||[]).length;n++){var d=x[r].pts[n],s=t.c2p(d.x),o=a.c2p(d.y);m.contains([s,o],null,d.i,l)?(i.push({pointNumber:d.i,x:t.c2d(d.x),y:a.c2d(d.y)}),d.selected=1):d.selected=0}return i}},{}],693:[function(e,B,V){var f=e("@plotly/d3"),l=e("../../components/color"),m=e("../../components/drawing");function x(a,i,r){var n=r||f.select(a).selectAll("g.trace.boxes");n.style("opacity",function(d){return d[0].trace.opacity}),n.each(function(d){var s=f.select(this),o=d[0].trace,y=o.line.width;function g(_,u,T,c){_.style("stroke-width",u+"px").call(l.stroke,T).call(l.fill,c)}var b=s.selectAll("path.box");if(o.type==="candlestick")b.each(function(_){if(!_.empty){var u=f.select(this),T=o[_.dir];g(u,T.line.width,T.line.color,T.fillcolor),u.style("opacity",o.selectedpoints&&!_.selected?.3:1)}});else{g(b,y,o.line.color,o.fillcolor),s.selectAll("path.mean").style({"stroke-width":y,"stroke-dasharray":2*y+"px,"+y+"px"}).call(l.stroke,o.line.color);var v=s.selectAll("path.point");m.pointStyle(v,o,a)}})}function t(a,i,r){var n=i[0].trace,d=r.selectAll("path.point");n.selectedpoints?m.selectedPointStyle(d,n):m.pointStyle(d,n,a)}B.exports={style:x,styleOnSelect:t}},{"../../components/color":367,"../../components/drawing":389,"@plotly/d3":58}],694:[function(e,B,V){var f=e("../../lib").extendFlat,l=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,m=e("../ohlc/attributes"),x=e("../box/attributes");function t(a){return{line:{color:f({},x.line.color,{dflt:a}),width:x.line.width,editType:"style"},fillcolor:x.fillcolor,editType:"style"}}B.exports={xperiod:m.xperiod,xperiod0:m.xperiod0,xperiodalignment:m.xperiodalignment,xhoverformat:l("x"),yhoverformat:l("y"),x:m.x,open:m.open,high:m.high,low:m.low,close:m.close,line:{width:f({},x.line.width,{}),editType:"style"},increasing:t(m.increasing.line.color.dflt),decreasing:t(m.decreasing.line.color.dflt),text:m.text,hovertext:m.hovertext,whiskerwidth:f({},x.whiskerwidth,{dflt:0}),hoverlabel:m.hoverlabel}},{"../../lib":515,"../../plots/cartesian/axis_format_attributes":569,"../box/attributes":682,"../ohlc/attributes":881}],695:[function(e,B,V){var f=e("../../lib"),l=e("../../plots/cartesian/axes"),m=e("../../plots/cartesian/align_period"),x=e("../ohlc/calc").calcCommon;B.exports=function(a,i){var r=a._fullLayout,n=l.getFromId(a,i.xaxis),d=l.getFromId(a,i.yaxis),s=n.makeCalcdata(i,"x"),o=m(i,n,"x",s).vals,y=x(a,i,s,o,d,t);return y.length?(f.extendFlat(y[0].t,{num:r._numBoxes,dPos:f.distinctVals(o).minDiff/2,posLetter:"x",valLetter:"y"}),r._numBoxes++,y):[{t:{empty:!0}}]};function t(a,i,r,n){return{min:r,q1:Math.min(a,n),med:n,q3:Math.max(a,n),max:i}}},{"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"../ohlc/calc":882}],696:[function(e,B,V){var f=e("../../lib"),l=e("../../components/color"),m=e("../ohlc/ohlc_defaults"),x=e("../scatter/period_defaults"),t=e("./attributes");B.exports=function(r,n,d,s){function o(g,b){return f.coerce(r,n,t,g,b)}var y=m(r,n,o,s);if(!y){n.visible=!1;return}x(r,n,s,o,{x:!0}),o("xhoverformat"),o("yhoverformat"),o("line.width"),a(r,n,o,"increasing"),a(r,n,o,"decreasing"),o("text"),o("hovertext"),o("whiskerwidth"),s._requestRangeslider[n.xaxis]=!0};function a(i,r,n,d){var s=n(d+".line.color");n(d+".line.width",r.line.width),n(d+".fillcolor",l.addOpacity(s,.5))}},{"../../components/color":367,"../../lib":515,"../ohlc/ohlc_defaults":886,"../scatter/period_defaults":956,"./attributes":694}],697:[function(e,B,V){B.exports={moduleType:"trace",name:"candlestick",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:e("./attributes"),layoutAttributes:e("../box/layout_attributes"),supplyLayoutDefaults:e("../box/layout_defaults").supplyLayoutDefaults,crossTraceCalc:e("../box/cross_trace_calc").crossTraceCalc,supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("../box/plot").plot,layerName:"boxlayer",style:e("../box/style").style,hoverPoints:e("../ohlc/hover").hoverPoints,selectPoints:e("../ohlc/select")}},{"../../plots/cartesian":578,"../box/cross_trace_calc":684,"../box/layout_attributes":689,"../box/layout_defaults":690,"../box/plot":691,"../box/style":693,"../ohlc/hover":884,"../ohlc/select":888,"./attributes":694,"./calc":695,"./defaults":696}],698:[function(e,B,V){var f=e("./axis_defaults"),l=e("../../plot_api/plot_template");B.exports=function(t,a,i,r,n){var d=r("a");d||(r("da"),r("a0"));var s=r("b");s||(r("db"),r("b0")),m(t,a,i,n)};function m(x,t,a,i){var r=["aaxis","baxis"];r.forEach(function(n){var d=n.charAt(0),s=x[n]||{},o=l.newContainer(t,n),y={noTicklabelstep:!0,tickfont:"x",id:d+"axis",letter:d,font:t.font,name:n,data:x[d],calendar:t.calendar,dfltColor:i,bgColor:a.paper_bgcolor,autotypenumbersDflt:a.autotypenumbers,fullLayout:a};f(s,o,y),o._categories=o._categories||[],!x[n]&&s.type!=="-"&&(x[n]={type:s.type})})}},{"../../plot_api/plot_template":555,"./axis_defaults":703}],699:[function(e,B,V){var f=e("../../lib").isArrayOrTypedArray;B.exports=function(m){return l(m,0)};function l(m,x){if(!f(m)||x>=10)return null;for(var t=1/0,a=-1/0,i=m.length,r=0;r<i;r++){var n=m[r];if(f(n)){var d=l(n,x+1);d&&(t=Math.min(d[0],t),a=Math.max(d[1],a))}else t=Math.min(n,t),a=Math.max(n,a)}return[t,a]}},{"../../lib":515}],700:[function(e,B,V){var f=e("../../plots/font_attributes"),l=e("./axis_attributes"),m=e("../../components/color/attributes"),x=f({editType:"calc"});x.family.dflt='"Open Sans", verdana, arial, sans-serif',x.size.dflt=12,x.color.dflt=m.defaultLine,B.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:l,baxis:l,font:x,color:{valType:"color",dflt:m.defaultLine,editType:"plot"},transforms:void 0}},{"../../components/color/attributes":366,"../../plots/font_attributes":594,"./axis_attributes":702}],701:[function(e,B,V){var f=e("../../lib").isArrayOrTypedArray;B.exports=function(l,m,x,t){var a,i,r,n,d,s,o,y,g,b,v,_,u,T=f(x)?"a":"b",c=T==="a"?l.aaxis:l.baxis,A=c.smoothing,k=T==="a"?l.a2i:l.b2j,p=T==="a"?x:t,w=T==="a"?t:x,h=T==="a"?m.a.length:m.b.length,D=T==="a"?m.b.length:m.a.length,S=Math.floor(T==="a"?l.b2j(w):l.a2i(w)),M=T==="a"?function(X){return l.evalxy([],X,S)}:function(X){return l.evalxy([],S,X)};A&&(r=Math.max(0,Math.min(D-2,S)),n=S-r,i=T==="a"?function(X,J){return l.dxydi([],X,r,J,n)}:function(X,J){return l.dxydj([],r,X,n,J)});var L=k(p[0]),R=k(p[1]),z=L<R?1:-1,P=(R-L)*1e-8,I=z>0?Math.floor:Math.ceil,U=z>0?Math.ceil:Math.floor,O=z>0?Math.min:Math.max,G=z>0?Math.max:Math.min,$=I(L+P),tt=U(R-P);o=M(L);var Z=[[o]];for(a=$;a*z<tt*z;a+=z)d=[],v=G(L,a),_=O(R,a+z),u=_-v,s=Math.max(0,Math.min(h-2,Math.floor(.5*(v+_)))),y=M(_),A&&(g=i(s,v-s),b=i(s,_-s),d.push([o[0]+g[0]/3*u,o[1]+g[1]/3*u]),d.push([y[0]-b[0]/3*u,y[1]-b[1]/3*u])),d.push(y),Z.push(d),o=y;return Z}},{"../../lib":515}],702:[function(e,B,V){var f=e("../../plots/font_attributes"),l=e("../../components/color/attributes"),m=e("../../plots/cartesian/layout_attributes"),x=e("../../plots/cartesian/axis_format_attributes").descriptionWithDates,t=e("../../plot_api/edit_types").overrideAll,a=e("../../components/drawing/attributes").dash,i=e("../../lib/extend").extendFlat;B.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:f({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:m.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},tickfont:f({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc",description:x("tick label")},tickformatstops:t(m.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:l.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},griddash:i({},a,{editType:"calc"}),showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgriddash:i({},a,{editType:"calc"}),minorgridcolor:{valType:"color",dflt:l.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:f({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},{"../../components/color/attributes":366,"../../components/drawing/attributes":388,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/cartesian/axis_format_attributes":569,"../../plots/cartesian/layout_attributes":579,"../../plots/font_attributes":594}],703:[function(e,B,V){var f=e("./attributes"),l=e("../../components/color").addOpacity,m=e("../../registry"),x=e("../../lib"),t=e("../../plots/cartesian/tick_value_defaults"),a=e("../../plots/cartesian/tick_label_defaults"),i=e("../../plots/cartesian/prefix_suffix_defaults"),r=e("../../plots/cartesian/category_order_defaults"),n=e("../../plots/cartesian/set_convert"),d=e("../../plots/cartesian/axis_autotype");B.exports=function(y,g,b){var v=b.letter,_=b.font||{},u=f[v+"axis"];function T($,tt){return x.coerce(y,g,u,$,tt)}function c($,tt){return x.coerce2(y,g,u,$,tt)}b.name&&(g._name=b.name,g._id=b.name),T("autotypenumbers",b.autotypenumbersDflt);var A=T("type");if(A==="-"&&(b.data&&s(g,b.data),g.type==="-"?g.type="linear":A=y.type=g.type),T("smoothing"),T("cheatertype"),T("showticklabels"),T("labelprefix",v+" = "),T("labelsuffix"),T("showtickprefix"),T("showticksuffix"),T("separatethousands"),T("tickformat"),T("exponentformat"),T("minexponent"),T("showexponent"),T("categoryorder"),T("tickmode"),T("tickvals"),T("ticktext"),T("tick0"),T("dtick"),g.tickmode==="array"&&(T("arraytick0"),T("arraydtick")),T("labelpadding"),g._hovertitle=v,A==="date"){var k=m.getComponentMethod("calendars","handleDefaults");k(y,g,"calendar",b.calendar)}n(g,b.fullLayout),g.c2p=x.identity;var p=T("color",b.dfltColor),w=p===y.color?p:_.color,h=T("title.text");h&&(x.coerceFont(T,"title.font",{family:_.family,size:x.bigFont(_.size),color:w}),T("title.offset")),T("tickangle");var D=T("autorange",!g.isValidRange(y.range));D&&T("rangemode"),T("range"),g.cleanRange(),T("fixedrange"),t(y,g,T,A),i(y,g,T,A,b),a(y,g,T,A,b),r(y,g,T,{data:b.data,dataAttr:v});var S=c("gridcolor",l(p,.3)),M=c("gridwidth"),L=c("griddash"),R=T("showgrid");R||(delete g.gridcolor,delete g.gridwidth,delete g.griddash);var z=c("startlinecolor",p),P=c("startlinewidth",M),I=T("startline",g.showgrid||!!z||!!P);I||(delete g.startlinecolor,delete g.startlinewidth);var U=c("endlinecolor",p),O=c("endlinewidth",M),G=T("endline",g.showgrid||!!U||!!O);return G||(delete g.endlinecolor,delete g.endlinewidth),R?(T("minorgridcount"),T("minorgridwidth",M),T("minorgriddash",L),T("minorgridcolor",l(S,.06)),g.minorgridcount||(delete g.minorgridwidth,delete g.minorgriddash,delete g.minorgridcolor)):(delete g.gridcolor,delete g.gridwidth,delete g.griddash),g.showticklabels==="none"&&(delete g.tickfont,delete g.tickangle,delete g.showexponent,delete g.exponentformat,delete g.minexponent,delete g.tickformat,delete g.showticksuffix,delete g.showtickprefix),g.showticksuffix||delete g.ticksuffix,g.showtickprefix||delete g.tickprefix,T("tickmode"),g};function s(o,y){if(o.type==="-"){var g=o._id,b=g.charAt(0),v=b+"calendar",_=o[v];o.type=d(y,_,{autotypenumbers:o.autotypenumbers})}}},{"../../components/color":367,"../../lib":515,"../../plots/cartesian/axis_autotype":567,"../../plots/cartesian/category_order_defaults":571,"../../plots/cartesian/prefix_suffix_defaults":583,"../../plots/cartesian/set_convert":585,"../../plots/cartesian/tick_label_defaults":587,"../../plots/cartesian/tick_value_defaults":589,"../../registry":647,"./attributes":700}],704:[function(e,B,V){var f=e("../../plots/cartesian/axes"),l=e("../../lib").isArray1D,m=e("./cheater_basis"),x=e("./array_minmax"),t=e("./calc_gridlines"),a=e("./calc_labels"),i=e("./calc_clippath"),r=e("../heatmap/clean_2d_array"),n=e("./smooth_fill_2d_array"),d=e("../heatmap/convert_column_xyz"),s=e("./set_convert");B.exports=function(y,g){var b=f.getFromId(y,g.xaxis),v=f.getFromId(y,g.yaxis),_=g.aaxis,u=g.baxis,T=g.x,c=g.y,A=[];T&&l(T)&&A.push("x"),c&&l(c)&&A.push("y"),A.length&&d(g,_,u,"a","b",A);var k=g._a=g._a||g.a,p=g._b=g._b||g.b;T=g._x||g.x,c=g._y||g.y;var w={};if(g._cheater){var h=_.cheatertype==="index"?k.length:k,D=u.cheatertype==="index"?p.length:p;T=m(h,D,g.cheaterslope)}g._x=T=r(T),g._y=c=r(c),n(T,k,p),n(c,k,p),s(g),g.setScale();var S=x(T),M=x(c),L=.5*(S[1]-S[0]),R=.5*(S[1]+S[0]),z=.5*(M[1]-M[0]),P=.5*(M[1]+M[0]),I=1.3;return S=[R-L*I,R+L*I],M=[P-z*I,P+z*I],g._extremes[b._id]=f.findExtremes(b,S,{padded:!0}),g._extremes[v._id]=f.findExtremes(v,M,{padded:!0}),t(g,"a","b"),t(g,"b","a"),a(g,_),a(g,u),w.clipsegments=i(g._xctrl,g._yctrl,_,u),w.x=T,w.y=c,w.a=k,w.b=p,[w]}},{"../../lib":515,"../../plots/cartesian/axes":566,"../heatmap/clean_2d_array":803,"../heatmap/convert_column_xyz":805,"./array_minmax":699,"./calc_clippath":705,"./calc_gridlines":706,"./calc_labels":707,"./cheater_basis":709,"./set_convert":722,"./smooth_fill_2d_array":723}],705:[function(e,B,V){B.exports=function(l,m,x,t){var a,i,r,n=[],d=!!x.smoothing,s=!!t.smoothing,o=l[0].length-1,y=l.length-1;for(a=0,i=[],r=[];a<=o;a++)i[a]=l[0][a],r[a]=m[0][a];for(n.push({x:i,y:r,bicubic:d}),a=0,i=[],r=[];a<=y;a++)i[a]=l[a][o],r[a]=m[a][o];for(n.push({x:i,y:r,bicubic:s}),a=o,i=[],r=[];a>=0;a--)i[o-a]=l[y][a],r[o-a]=m[y][a];for(n.push({x:i,y:r,bicubic:d}),a=y,i=[],r=[];a>=0;a--)i[y-a]=l[a][0],r[y-a]=m[a][0];return n.push({x:i,y:r,bicubic:s}),n}},{}],706:[function(e,B,V){var f=e("../../plots/cartesian/axes"),l=e("../../lib/extend").extendFlat;B.exports=function(x,t,a){var i,r,n,d,s,o,y,g,b,v,_,u,T,c,A=x["_"+t],k=x[t+"axis"],p=k._gridlines=[],w=k._minorgridlines=[],h=k._boundarylines=[],D=x["_"+a],S=x[a+"axis"];k.tickmode==="array"&&(k.tickvals=A.slice());var M=x._xctrl,L=x._yctrl,R=M[0].length,z=M.length,P=x._a.length,I=x._b.length;f.prepTicks(k),k.tickmode==="array"&&delete k.tickvals;var U=k.smoothing?3:1;function O($){var tt,Z,X,J,st,at,lt,F,H,et,q,W,K=[],nt=[],it={};if(t==="b")for(Z=x.b2j($),X=Math.floor(Math.max(0,Math.min(I-2,Z))),J=Z-X,it.length=I,it.crossLength=P,it.xy=function(ot){return x.evalxy([],ot,Z)},it.dxy=function(ot,ct){return x.dxydi([],ot,X,ct,J)},tt=0;tt<P;tt++)at=Math.min(P-2,tt),lt=tt-at,F=x.evalxy([],tt,Z),S.smoothing&&tt>0&&(H=x.dxydi([],tt-1,X,0,J),K.push(st[0]+H[0]/3),nt.push(st[1]+H[1]/3),et=x.dxydi([],tt-1,X,1,J),K.push(F[0]-et[0]/3),nt.push(F[1]-et[1]/3)),K.push(F[0]),nt.push(F[1]),st=F;else for(tt=x.a2i($),at=Math.floor(Math.max(0,Math.min(P-2,tt))),lt=tt-at,it.length=P,it.crossLength=I,it.xy=function(ot){return x.evalxy([],tt,ot)},it.dxy=function(ot,ct){return x.dxydj([],at,ot,lt,ct)},Z=0;Z<I;Z++)X=Math.min(I-2,Z),J=Z-X,F=x.evalxy([],tt,Z),S.smoothing&&Z>0&&(q=x.dxydj([],at,Z-1,lt,0),K.push(st[0]+q[0]/3),nt.push(st[1]+q[1]/3),W=x.dxydj([],at,Z-1,lt,1),K.push(F[0]-W[0]/3),nt.push(F[1]-W[1]/3)),K.push(F[0]),nt.push(F[1]),st=F;return it.axisLetter=t,it.axis=k,it.crossAxis=S,it.value=$,it.constvar=a,it.index=g,it.x=K,it.y=nt,it.smoothing=S.smoothing,it}function G($){var tt,Z,X,J,st,at=[],lt=[],F={};if(F.length=A.length,F.crossLength=D.length,t==="b")for(X=Math.max(0,Math.min(I-2,$)),st=Math.min(1,Math.max(0,$-X)),F.xy=function(H){return x.evalxy([],H,$)},F.dxy=function(H,et){return x.dxydi([],H,X,et,st)},tt=0;tt<R;tt++)at[tt]=M[$*U][tt],lt[tt]=L[$*U][tt];else for(Z=Math.max(0,Math.min(P-2,$)),J=Math.min(1,Math.max(0,$-Z)),F.xy=function(H){return x.evalxy([],$,H)},F.dxy=function(H,et){return x.dxydj([],Z,H,J,et)},tt=0;tt<z;tt++)at[tt]=M[tt][$*U],lt[tt]=L[tt][$*U];return F.axisLetter=t,F.axis=k,F.crossAxis=S,F.value=A[$],F.constvar=a,F.index=$,F.x=at,F.y=lt,F.smoothing=S.smoothing,F}if(k.tickmode==="array"){for(d=5e-15,s=[Math.floor((A.length-1-k.arraytick0)/k.arraydtick*(1+d)),Math.ceil(-k.arraytick0/k.arraydtick/(1+d))].sort(function($,tt){return $-tt}),o=s[0]-1,y=s[1]+1,g=o;g<y;g++)r=k.arraytick0+k.arraydtick*g,!(r<0||r>A.length-1)&&p.push(l(G(r),{color:k.gridcolor,width:k.gridwidth,dash:k.griddash}));for(g=o;g<y;g++)if(n=k.arraytick0+k.arraydtick*g,_=Math.min(n+k.arraydtick,A.length-1),!(n<0||n>A.length-1)&&!(_<0||_>A.length-1))for(u=A[n],T=A[_],i=0;i<k.minorgridcount;i++)c=_-n,!(c<=0)&&(v=u+(T-u)*(i+1)/(k.minorgridcount+1)*(k.arraydtick/c),!(v<A[0]||v>A[A.length-1])&&w.push(l(O(v),{color:k.minorgridcolor,width:k.minorgridwidth,dash:k.minorgriddash})));k.startline&&h.push(l(G(0),{color:k.startlinecolor,width:k.startlinewidth})),k.endline&&h.push(l(G(A.length-1),{color:k.endlinecolor,width:k.endlinewidth}))}else{for(d=5e-15,s=[Math.floor((A[A.length-1]-k.tick0)/k.dtick*(1+d)),Math.ceil((A[0]-k.tick0)/k.dtick/(1+d))].sort(function($,tt){return $-tt}),o=s[0],y=s[1],g=o;g<=y;g++)b=k.tick0+k.dtick*g,p.push(l(O(b),{color:k.gridcolor,width:k.gridwidth,dash:k.griddash}));for(g=o-1;g<y+1;g++)for(b=k.tick0+k.dtick*g,i=0;i<k.minorgridcount;i++)v=b+k.dtick*(i+1)/(k.minorgridcount+1),!(v<A[0]||v>A[A.length-1])&&w.push(l(O(v),{color:k.minorgridcolor,width:k.minorgridwidth,dash:k.minorgriddash}));k.startline&&h.push(l(O(A[0]),{color:k.startlinecolor,width:k.startlinewidth})),k.endline&&h.push(l(O(A[A.length-1]),{color:k.endlinecolor,width:k.endlinewidth}))}}},{"../../lib/extend":505,"../../plots/cartesian/axes":566}],707:[function(e,B,V){var f=e("../../plots/cartesian/axes"),l=e("../../lib/extend").extendFlat;B.exports=function(x,t){var a,i,r,n,d,s=t._labels=[],o=t._gridlines;for(a=0;a<o.length;a++)d=o[a],["start","both"].indexOf(t.showticklabels)!==-1&&(i=f.tickText(t,d.value),l(i,{prefix:r,suffix:n,endAnchor:!0,xy:d.xy(0),dxy:d.dxy(0,0),axis:d.axis,length:d.crossAxis.length,font:d.axis.tickfont,isFirst:a===0,isLast:a===o.length-1}),s.push(i)),["end","both"].indexOf(t.showticklabels)!==-1&&(i=f.tickText(t,d.value),l(i,{endAnchor:!1,xy:d.xy(d.crossLength-1),dxy:d.dxy(d.crossLength-2,1),axis:d.axis,length:d.crossAxis.length,font:d.axis.tickfont,isFirst:a===0,isLast:a===o.length-1}),s.push(i))}},{"../../lib/extend":505,"../../plots/cartesian/axes":566}],708:[function(e,B,V){var f=.5;B.exports=function(m,x,t,a){var i=m[0]-x[0],r=m[1]-x[1],n=t[0]-x[0],d=t[1]-x[1],s=Math.pow(i*i+r*r,f/2),o=Math.pow(n*n+d*d,f/2),y=(o*o*i-s*s*n)*a,g=(o*o*r-s*s*d)*a,b=o*(s+o)*3,v=s*(s+o)*3;return[[x[0]+(b&&y/b),x[1]+(b&&g/b)],[x[0]-(v&&y/v),x[1]-(v&&g/v)]]}},{}],709:[function(e,B,V){var f=e("../../lib").isArrayOrTypedArray;B.exports=function(l,m,x){var t,a,i,r,n,d,s=[],o=f(l)?l.length:l,y=f(m)?m.length:m,g=f(l)?l:null,b=f(m)?m:null;g&&(i=(g.length-1)/(g[g.length-1]-g[0])/(o-1)),b&&(r=(b.length-1)/(b[b.length-1]-b[0])/(y-1));var v,_=1/0,u=-1/0;for(a=0;a<y;a++)for(s[a]=[],d=b?(b[a]-b[0])*r:a/(y-1),t=0;t<o;t++)n=g?(g[t]-g[0])*i:t/(o-1),v=n-d*x,_=Math.min(v,_),u=Math.max(v,u),s[a][t]=v;var T=1/(u-_),c=-_*T;for(a=0;a<y;a++)for(t=0;t<o;t++)s[a][t]=T*s[a][t]+c;return s}},{"../../lib":515}],710:[function(e,B,V){var f=e("./catmull_rom"),l=e("../../lib").ensureArray;function m(x,t,a){var i=-.5*a[0]+1.5*t[0],r=-.5*a[1]+1.5*t[1];return[(2*i+x[0])/3,(2*r+x[1])/3]}B.exports=function(t,a,i,r,n,d){var s,o,y,g,b,v,_,u,T,c,A=i[0].length,k=i.length,p=n?3*A-2:A,w=d?3*k-2:k;for(t=l(t,w),a=l(a,w),y=0;y<w;y++)t[y]=l(t[y],p),a[y]=l(a[y],p);for(o=0,g=0;o<k;o++,g+=d?3:1)for(b=t[g],v=a[g],_=i[o],u=r[o],s=0,y=0;s<A;s++,y+=n?3:1)b[y]=_[s],v[y]=u[s];if(n)for(o=0,g=0;o<k;o++,g+=d?3:1){for(s=1,y=3;s<A-1;s++,y+=3)T=f([i[o][s-1],r[o][s-1]],[i[o][s],r[o][s]],[i[o][s+1],r[o][s+1]],n),t[g][y-1]=T[0][0],a[g][y-1]=T[0][1],t[g][y+1]=T[1][0],a[g][y+1]=T[1][1];c=m([t[g][0],a[g][0]],[t[g][2],a[g][2]],[t[g][3],a[g][3]]),t[g][1]=c[0],a[g][1]=c[1],c=m([t[g][p-1],a[g][p-1]],[t[g][p-3],a[g][p-3]],[t[g][p-4],a[g][p-4]]),t[g][p-2]=c[0],a[g][p-2]=c[1]}if(d)for(y=0;y<p;y++){for(g=3;g<w-3;g+=3)T=f([t[g-3][y],a[g-3][y]],[t[g][y],a[g][y]],[t[g+3][y],a[g+3][y]],d),t[g-1][y]=T[0][0],a[g-1][y]=T[0][1],t[g+1][y]=T[1][0],a[g+1][y]=T[1][1];c=m([t[0][y],a[0][y]],[t[2][y],a[2][y]],[t[3][y],a[3][y]]),t[1][y]=c[0],a[1][y]=c[1],c=m([t[w-1][y],a[w-1][y]],[t[w-3][y],a[w-3][y]],[t[w-4][y],a[w-4][y]]),t[w-2][y]=c[0],a[w-2][y]=c[1]}if(n&&d)for(g=1;g<w;g+=(g+1)%3===0?2:1){for(y=3;y<p-3;y+=3)T=f([t[g][y-3],a[g][y-3]],[t[g][y],a[g][y]],[t[g][y+3],a[g][y+3]],n),t[g][y-1]=.5*(t[g][y-1]+T[0][0]),a[g][y-1]=.5*(a[g][y-1]+T[0][1]),t[g][y+1]=.5*(t[g][y+1]+T[1][0]),a[g][y+1]=.5*(a[g][y+1]+T[1][1]);c=m([t[g][0],a[g][0]],[t[g][2],a[g][2]],[t[g][3],a[g][3]]),t[g][1]=.5*(t[g][1]+c[0]),a[g][1]=.5*(a[g][1]+c[1]),c=m([t[g][p-1],a[g][p-1]],[t[g][p-3],a[g][p-3]],[t[g][p-4],a[g][p-4]]),t[g][p-2]=.5*(t[g][p-2]+c[0]),a[g][p-2]=.5*(a[g][p-2]+c[1])}return[t,a]}},{"../../lib":515,"./catmull_rom":708}],711:[function(e,B,V){B.exports={RELATIVE_CULL_TOLERANCE:1e-6}},{}],712:[function(e,B,V){B.exports=function(f,l,m){return l&&m?function(x,t,a,i,r){x||(x=[]);var n,d,s,o,y,g;t*=3,a*=3;var b=i*i,v=1-i,_=v*v,u=v*i*2,T=-3*_,c=3*(_-u),A=3*(u-b),k=3*b,p=r*r,w=p*r,h=1-r,D=h*h,S=D*h;for(g=0;g<f.length;g++)y=f[g],n=T*y[a][t]+c*y[a][t+1]+A*y[a][t+2]+k*y[a][t+3],d=T*y[a+1][t]+c*y[a+1][t+1]+A*y[a+1][t+2]+k*y[a+1][t+3],s=T*y[a+2][t]+c*y[a+2][t+1]+A*y[a+2][t+2]+k*y[a+2][t+3],o=T*y[a+3][t]+c*y[a+3][t+1]+A*y[a+3][t+2]+k*y[a+3][t+3],x[g]=S*n+3*(D*r*d+h*p*s)+w*o;return x}:l?function(x,t,a,i,r){x||(x=[]);var n,d,s,o;t*=3;var y=i*i,g=1-i,b=g*g,v=g*i*2,_=-3*b,u=3*(b-v),T=3*(v-y),c=3*y,A=1-r;for(s=0;s<f.length;s++)o=f[s],n=_*o[a][t]+u*o[a][t+1]+T*o[a][t+2]+c*o[a][t+3],d=_*o[a+1][t]+u*o[a+1][t+1]+T*o[a+1][t+2]+c*o[a+1][t+3],x[s]=A*n+r*d;return x}:m?function(x,t,a,i,r){x||(x=[]);var n,d,s,o,y,g;a*=3;var b=r*r,v=b*r,_=1-r,u=_*_,T=u*_;for(y=0;y<f.length;y++)g=f[y],n=g[a][t+1]-g[a][t],d=g[a+1][t+1]-g[a+1][t],s=g[a+2][t+1]-g[a+2][t],o=g[a+3][t+1]-g[a+3][t],x[y]=T*n+3*(u*r*d+_*b*s)+v*o;return x}:function(x,t,a,i,r){x||(x=[]);var n,d,s,o,y=1-r;for(s=0;s<f.length;s++)o=f[s],n=o[a][t+1]-o[a][t],d=o[a+1][t+1]-o[a+1][t],x[s]=y*n+r*d;return x}}},{}],713:[function(e,B,V){B.exports=function(f,l,m){return l&&m?function(x,t,a,i,r){x||(x=[]);var n,d,s,o,y,g;t*=3,a*=3;var b=i*i,v=b*i,_=1-i,u=_*_,T=u*_,c=r*r,A=1-r,k=A*A,p=A*r*2,w=-3*k,h=3*(k-p),D=3*(p-c),S=3*c;for(g=0;g<f.length;g++)y=f[g],n=w*y[a][t]+h*y[a+1][t]+D*y[a+2][t]+S*y[a+3][t],d=w*y[a][t+1]+h*y[a+1][t+1]+D*y[a+2][t+1]+S*y[a+3][t+1],s=w*y[a][t+2]+h*y[a+1][t+2]+D*y[a+2][t+2]+S*y[a+3][t+2],o=w*y[a][t+3]+h*y[a+1][t+3]+D*y[a+2][t+3]+S*y[a+3][t+3],x[g]=T*n+3*(u*i*d+_*b*s)+v*o;return x}:l?function(x,t,a,i,r){x||(x=[]);var n,d,s,o,y,g;t*=3;var b=r*r,v=b*r,_=1-r,u=_*_,T=u*_;for(y=0;y<f.length;y++)g=f[y],n=g[a+1][t]-g[a][t],d=g[a+1][t+1]-g[a][t+1],s=g[a+1][t+2]-g[a][t+2],o=g[a+1][t+3]-g[a][t+3],x[y]=T*n+3*(u*r*d+_*b*s)+v*o;return x}:m?function(x,t,a,i,r){x||(x=[]);var n,d,s,o;a*=3;var y=1-i,g=r*r,b=1-r,v=b*b,_=b*r*2,u=-3*v,T=3*(v-_),c=3*(_-g),A=3*g;for(s=0;s<f.length;s++)o=f[s],n=u*o[a][t]+T*o[a+1][t]+c*o[a+2][t]+A*o[a+3][t],d=u*o[a][t+1]+T*o[a+1][t+1]+c*o[a+2][t+1]+A*o[a+3][t+1],x[s]=y*n+i*d;return x}:function(x,t,a,i,r){x||(x=[]);var n,d,s,o,y=1-i;for(s=0;s<f.length;s++)o=f[s],n=o[a+1][t]-o[a][t],d=o[a+1][t+1]-o[a][t+1],x[s]=y*n+i*d;return x}}},{}],714:[function(e,B,V){B.exports=function(f,l,m,x,t){var a=l-2,i=m-2;return x&&t?function(r,n,d){r||(r=[]);var s,o,y,g,b,v,_=Math.max(0,Math.min(Math.floor(n),a)),u=Math.max(0,Math.min(Math.floor(d),i)),T=Math.max(0,Math.min(1,n-_)),c=Math.max(0,Math.min(1,d-u));_*=3,u*=3;var A=T*T,k=A*T,p=1-T,w=p*p,h=w*p,D=c*c,S=D*c,M=1-c,L=M*M,R=L*M;for(v=0;v<f.length;v++)b=f[v],s=h*b[u][_]+3*(w*T*b[u][_+1]+p*A*b[u][_+2])+k*b[u][_+3],o=h*b[u+1][_]+3*(w*T*b[u+1][_+1]+p*A*b[u+1][_+2])+k*b[u+1][_+3],y=h*b[u+2][_]+3*(w*T*b[u+2][_+1]+p*A*b[u+2][_+2])+k*b[u+2][_+3],g=h*b[u+3][_]+3*(w*T*b[u+3][_+1]+p*A*b[u+3][_+2])+k*b[u+3][_+3],r[v]=R*s+3*(L*c*o+M*D*y)+S*g;return r}:x?function(r,n,d){r||(r=[]);var s=Math.max(0,Math.min(Math.floor(n),a)),o=Math.max(0,Math.min(Math.floor(d),i)),y=Math.max(0,Math.min(1,n-s)),g=Math.max(0,Math.min(1,d-o)),b,v,_,u,T,c;s*=3;var A=y*y,k=A*y,p=1-y,w=p*p,h=w*p,D=1-g;for(T=0;T<f.length;T++)c=f[T],b=D*c[o][s]+g*c[o+1][s],v=D*c[o][s+1]+g*c[o+1][s+1],_=D*c[o][s+2]+g*c[o+1][s+1],u=D*c[o][s+3]+g*c[o+1][s+1],r[T]=h*b+3*(w*y*v+p*A*_)+k*u;return r}:t?function(r,n,d){r||(r=[]);var s=Math.max(0,Math.min(Math.floor(n),a)),o=Math.max(0,Math.min(Math.floor(d),i)),y=Math.max(0,Math.min(1,n-s)),g=Math.max(0,Math.min(1,d-o)),b,v,_,u,T,c;o*=3;var A=g*g,k=A*g,p=1-g,w=p*p,h=w*p,D=1-y;for(T=0;T<f.length;T++)c=f[T],b=D*c[o][s]+y*c[o][s+1],v=D*c[o+1][s]+y*c[o+1][s+1],_=D*c[o+2][s]+y*c[o+2][s+1],u=D*c[o+3][s]+y*c[o+3][s+1],r[T]=h*b+3*(w*g*v+p*A*_)+k*u;return r}:function(r,n,d){r||(r=[]);var s=Math.max(0,Math.min(Math.floor(n),a)),o=Math.max(0,Math.min(Math.floor(d),i)),y=Math.max(0,Math.min(1,n-s)),g=Math.max(0,Math.min(1,d-o)),b,v,_,u,T=1-g,c=1-y;for(_=0;_<f.length;_++)u=f[_],b=c*u[o][s]+y*u[o][s+1],v=c*u[o+1][s]+y*u[o+1][s+1],r[_]=T*b+g*v;return r}}},{}],715:[function(e,B,V){var f=e("../../lib"),l=e("./xy_defaults"),m=e("./ab_defaults"),x=e("./attributes"),t=e("../../components/color/attributes");B.exports=function(i,r,n,d){function s(g,b){return f.coerce(i,r,x,g,b)}r._clipPathId="clip"+r.uid+"carpet";var o=s("color",t.defaultLine);if(f.coerceFont(s,"font"),s("carpet"),m(i,r,d,s,o),!r.a||!r.b){r.visible=!1;return}r.a.length<3&&(r.aaxis.smoothing=0),r.b.length<3&&(r.baxis.smoothing=0);var y=l(i,r,s);y||(r.visible=!1),r._cheater&&s("cheaterslope")}},{"../../components/color/attributes":366,"../../lib":515,"./ab_defaults":698,"./attributes":700,"./xy_defaults":724}],716:[function(e,B,V){B.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),plot:e("./plot"),calc:e("./calc"),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{}}},{"../../plots/cartesian":578,"./attributes":700,"./calc":704,"./defaults":715,"./plot":721}],717:[function(e,B,V){B.exports=function(f,l){for(var m=f._fullData.length,x,t=0;t<m;t++){var a=f._fullData[t];if(a.index!==l.index&&a.type==="carpet"&&(x||(x=a),a.carpet===l.carpet))return a}return x}},{}],718:[function(e,B,V){B.exports=function(l,m,x){if(l.length===0)return"";var t,a=[],i=x?3:1;for(t=0;t<l.length;t+=i)a.push(l[t]+","+m[t]),x&&t<l.length-i&&(a.push("C"),a.push([l[t+1]+","+m[t+1],l[t+2]+","+m[t+2]+" "].join(" ")));return a.join(x?"":"L")}},{}],719:[function(e,B,V){var f=e("../../lib").isArrayOrTypedArray;B.exports=function(m,x,t){var a;for(f(m)?m.length>x.length&&(m=m.slice(0,x.length)):m=[],a=0;a<x.length;a++)m[a]=t(x[a]);return m}},{"../../lib":515}],720:[function(e,B,V){B.exports=function(l,m,x,t,a,i){var r=a[0]*l.dpdx(m),n=a[1]*l.dpdy(x),d=1,s=1;if(i){var o=Math.sqrt(a[0]*a[0]+a[1]*a[1]),y=Math.sqrt(i[0]*i[0]+i[1]*i[1]),g=(a[0]*i[0]+a[1]*i[1])/o/y;s=Math.max(0,g)}var b=Math.atan2(n,r)*180/Math.PI;return b<-90?(b+=180,d=-d):b>90&&(b-=180,d=-d),{angle:b,flip:d,p:l.c2p(t,m,x),offsetMultplier:s}}},{}],721:[function(e,B,V){var f=e("@plotly/d3"),l=e("../../components/drawing"),m=e("./map_1d_array"),x=e("./makepath"),t=e("./orient_text"),a=e("../../lib/svg_text_utils"),i=e("../../lib"),r=i.strRotate,n=i.strTranslate,d=e("../../constants/alignment");B.exports=function(T,c,A,k){var p=c.xaxis,w=c.yaxis,h=T._fullLayout,D=h._clips;i.makeTraceGroups(k,A,"trace").each(function(S){var M=f.select(this),L=S[0],R=L.trace,z=R.aaxis,P=R.baxis,I=i.ensureSingle(M,"g","minorlayer"),U=i.ensureSingle(M,"g","majorlayer"),O=i.ensureSingle(M,"g","boundarylayer"),G=i.ensureSingle(M,"g","labellayer");M.style("opacity",R.opacity),o(p,w,U,z,"a",z._gridlines),o(p,w,U,P,"b",P._gridlines),o(p,w,I,z,"a",z._minorgridlines),o(p,w,I,P,"b",P._minorgridlines),o(p,w,O,z,"a-boundary",z._boundarylines),o(p,w,O,P,"b-boundary",P._boundarylines);var $=y(T,p,w,R,L,G,z._labels,"a-label"),tt=y(T,p,w,R,L,G,P._labels,"b-label");g(T,G,R,L,p,w,$,tt),s(R,L,D,p,w)})};function s(u,T,c,A,k){var p,w,h,D,S=c.select("#"+u._clipPathId);S.size()||(S=c.append("clipPath").classed("carpetclip",!0));var M=i.ensureSingle(S,"path","carpetboundary"),L=T.clipsegments,R=[];for(D=0;D<L.length;D++)p=L[D],w=m([],p.x,A.c2p),h=m([],p.y,k.c2p),R.push(x(w,h,p.bicubic));var z="M"+R.join("L")+"Z";S.attr("id",u._clipPathId),M.attr("d",z)}function o(u,T,c,A,k,p){var w="const-"+k+"-lines",h=c.selectAll("."+w).data(p);h.enter().append("path").classed(w,!0).style("vector-effect","non-scaling-stroke"),h.each(function(D){var S=D,M=S.x,L=S.y,R=m([],M,u.c2p),z=m([],L,T.c2p),P="M"+x(R,z,S.smoothing),I=f.select(this);I.attr("d",P).style("stroke-width",S.width).style("stroke",S.color).style("stroke-dasharray",l.dashStyle(S.dash,S.width)).style("fill","none")}),h.exit().remove()}function y(u,T,c,A,k,p,w,h){var D=p.selectAll("text."+h).data(w);D.enter().append("text").classed(h,!0);var S=0,M={};return D.each(function(L,R){var z;if(L.axis.tickangle==="auto")z=t(A,T,c,L.xy,L.dxy);else{var P=(L.axis.tickangle+180)*Math.PI/180;z=t(A,T,c,L.xy,[Math.cos(P),Math.sin(P)])}R||(M={angle:z.angle,flip:z.flip});var I=(L.endAnchor?-1:1)*z.flip,U=f.select(this).attr({"text-anchor":I>0?"start":"end","data-notex":1}).call(l.font,L.font).text(L.text).call(a.convertToTspans,u),O=l.bBox(this);U.attr("transform",n(z.p[0],z.p[1])+r(z.angle)+n(L.axis.labelpadding*I,O.height*.3)),S=Math.max(S,O.width+L.axis.labelpadding)}),D.exit().remove(),M.maxExtent=S,M}function g(u,T,c,A,k,p,w,h){var D,S,M,L,R=i.aggNums(Math.min,null,c.a),z=i.aggNums(Math.max,null,c.a),P=i.aggNums(Math.min,null,c.b),I=i.aggNums(Math.max,null,c.b);D=.5*(R+z),S=P,M=c.ab2xy(D,S,!0),L=c.dxyda_rough(D,S),w.angle===void 0&&i.extendFlat(w,t(c,k,p,M,c.dxydb_rough(D,S))),_(u,T,c,A,M,L,c.aaxis,k,p,w,"a-title"),D=R,S=.5*(P+I),M=c.ab2xy(D,S,!0),L=c.dxydb_rough(D,S),h.angle===void 0&&i.extendFlat(h,t(c,k,p,M,c.dxyda_rough(D,S))),_(u,T,c,A,M,L,c.baxis,k,p,h,"b-title")}var b=d.LINE_SPACING,v=(1-d.MID_SHIFT)/b+1;function _(u,T,c,A,k,p,w,h,D,S,M){var L=[];w.title.text&&L.push(w.title.text);var R=T.selectAll("text."+M).data(L),z=S.maxExtent;R.enter().append("text").classed(M,!0),R.each(function(){var P=t(c,h,D,k,p);["start","both"].indexOf(w.showticklabels)===-1&&(z=0);var I=w.title.font.size;z+=I+w.title.offset;var U=S.angle+(S.flip<0?180:0),O=(U-P.angle+450)%360,G=O>90&&O<270,$=f.select(this);$.text(w.title.text).call(a.convertToTspans,u),G&&(z=(-a.lineCount($)+v)*b*I-z),$.attr("transform",n(P.p[0],P.p[1])+r(P.angle)+n(0,z)).attr("text-anchor","middle").call(l.font,w.title.font)}),R.exit().remove()}},{"../../components/drawing":389,"../../constants/alignment":483,"../../lib":515,"../../lib/svg_text_utils":541,"./makepath":718,"./map_1d_array":719,"./orient_text":720,"@plotly/d3":58}],722:[function(e,B,V){var f=e("./constants"),l=e("../../lib/search").findBin,m=e("./compute_control_points"),x=e("./create_spline_evaluator"),t=e("./create_i_derivative_evaluator"),a=e("./create_j_derivative_evaluator");B.exports=function(r){var n=r._a,d=r._b,s=n.length,o=d.length,y=r.aaxis,g=r.baxis,b=n[0],v=n[s-1],_=d[0],u=d[o-1],T=n[n.length-1]-n[0],c=d[d.length-1]-d[0],A=T*f.RELATIVE_CULL_TOLERANCE,k=c*f.RELATIVE_CULL_TOLERANCE;b-=A,v+=A,_-=k,u+=k,r.isVisible=function(p,w){return p>b&&p<v&&w>_&&w<u},r.isOccluded=function(p,w){return p<b||p>v||w<_||w>u},r.setScale=function(){var p=r._x,w=r._y,h=m(r._xctrl,r._yctrl,p,w,y.smoothing,g.smoothing);r._xctrl=h[0],r._yctrl=h[1],r.evalxy=x([r._xctrl,r._yctrl],s,o,y.smoothing,g.smoothing),r.dxydi=t([r._xctrl,r._yctrl],y.smoothing,g.smoothing),r.dxydj=a([r._xctrl,r._yctrl],y.smoothing,g.smoothing)},r.i2a=function(p){var w=Math.max(0,Math.floor(p[0]),s-2),h=p[0]-w;return(1-h)*n[w]+h*n[w+1]},r.j2b=function(p){var w=Math.max(0,Math.floor(p[1]),s-2),h=p[1]-w;return(1-h)*d[w]+h*d[w+1]},r.ij2ab=function(p){return[r.i2a(p[0]),r.j2b(p[1])]},r.a2i=function(p){var w=Math.max(0,Math.min(l(p,n),s-2)),h=n[w],D=n[w+1];return Math.max(0,Math.min(s-1,w+(p-h)/(D-h)))},r.b2j=function(p){var w=Math.max(0,Math.min(l(p,d),o-2)),h=d[w],D=d[w+1];return Math.max(0,Math.min(o-1,w+(p-h)/(D-h)))},r.ab2ij=function(p){return[r.a2i(p[0]),r.b2j(p[1])]},r.i2c=function(p,w){return r.evalxy([],p,w)},r.ab2xy=function(p,w,h){if(!h&&(p<n[0]||p>n[s-1]|w<d[0]||w>d[o-1]))return[!1,!1];var D=r.a2i(p),S=r.b2j(w),M=r.evalxy([],D,S);if(h){var L=0,R=0,z=[],P,I,U,O;p<n[0]?(P=0,I=0,L=(p-n[0])/(n[1]-n[0])):p>n[s-1]?(P=s-2,I=1,L=(p-n[s-1])/(n[s-1]-n[s-2])):(P=Math.max(0,Math.min(s-2,Math.floor(D))),I=D-P),w<d[0]?(U=0,O=0,R=(w-d[0])/(d[1]-d[0])):w>d[o-1]?(U=o-2,O=1,R=(w-d[o-1])/(d[o-1]-d[o-2])):(U=Math.max(0,Math.min(o-2,Math.floor(S))),O=S-U),L&&(r.dxydi(z,P,U,I,O),M[0]+=z[0]*L,M[1]+=z[1]*L),R&&(r.dxydj(z,P,U,I,O),M[0]+=z[0]*R,M[1]+=z[1]*R)}return M},r.c2p=function(p,w,h){return[w.c2p(p[0]),h.c2p(p[1])]},r.p2x=function(p,w,h){return[w.p2c(p[0]),h.p2c(p[1])]},r.dadi=function(p){var w=Math.max(0,Math.min(n.length-2,p));return n[w+1]-n[w]},r.dbdj=function(p){var w=Math.max(0,Math.min(d.length-2,p));return d[w+1]-d[w]},r.dxyda=function(p,w,h,D){var S=r.dxydi(null,p,w,h,D),M=r.dadi(p,h);return[S[0]/M,S[1]/M]},r.dxydb=function(p,w,h,D){var S=r.dxydj(null,p,w,h,D),M=r.dbdj(w,D);return[S[0]/M,S[1]/M]},r.dxyda_rough=function(p,w,h){var D=T*(h||.1),S=r.ab2xy(p+D,w,!0),M=r.ab2xy(p-D,w,!0);return[(S[0]-M[0])*.5/D,(S[1]-M[1])*.5/D]},r.dxydb_rough=function(p,w,h){var D=c*(h||.1),S=r.ab2xy(p,w+D,!0),M=r.ab2xy(p,w-D,!0);return[(S[0]-M[0])*.5/D,(S[1]-M[1])*.5/D]},r.dpdx=function(p){return p._m},r.dpdy=function(p){return p._m}}},{"../../lib/search":535,"./compute_control_points":710,"./constants":711,"./create_i_derivative_evaluator":712,"./create_j_derivative_evaluator":713,"./create_spline_evaluator":714}],723:[function(e,B,V){var f=e("../../lib");B.exports=function(m,x,t){var a,i,r,n=[],d=[],s=m[0].length,o=m.length;function y(Z,X){var J=0,st,at=0;return Z>0&&(st=m[X][Z-1])!==void 0&&(at++,J+=st),Z<s-1&&(st=m[X][Z+1])!==void 0&&(at++,J+=st),X>0&&(st=m[X-1][Z])!==void 0&&(at++,J+=st),X<o-1&&(st=m[X+1][Z])!==void 0&&(at++,J+=st),J/Math.max(1,at)}var g=0;for(a=0;a<s;a++)for(i=0;i<o;i++)m[i][a]===void 0&&(n.push(a),d.push(i),m[i][a]=y(a,i)),g=Math.max(g,Math.abs(m[i][a]));if(!n.length)return m;var b,v,_,u,T,c,A,k,p,w,h,D=1e-5,S=0,M=100,L=0,R=n.length;do{for(S=0,r=0;r<R;r++){a=n[r],i=d[r];var z=0,P=0,I,U,O,G,$,tt;a===0?($=Math.min(s-1,2),O=x[$],G=x[1],I=m[i][$],U=m[i][1],P+=U+(U-I)*(x[0]-G)/(G-O),z++):a===s-1&&($=Math.max(0,s-3),O=x[$],G=x[s-2],I=m[i][$],U=m[i][s-2],P+=U+(U-I)*(x[s-1]-G)/(G-O),z++),(a===0||a===s-1)&&i>0&&i<o-1&&(b=t[i+1]-t[i],v=t[i]-t[i-1],P+=(v*m[i+1][a]+b*m[i-1][a])/(v+b),z++),i===0?(tt=Math.min(o-1,2),O=t[tt],G=t[1],I=m[tt][a],U=m[1][a],P+=U+(U-I)*(t[0]-G)/(G-O),z++):i===o-1&&(tt=Math.max(0,o-3),O=t[tt],G=t[o-2],I=m[tt][a],U=m[o-2][a],P+=U+(U-I)*(t[o-1]-G)/(G-O),z++),(i===0||i===o-1)&&a>0&&a<s-1&&(b=x[a+1]-x[a],v=x[a]-x[a-1],P+=(v*m[i][a+1]+b*m[i][a-1])/(v+b),z++),z?P/=z:(_=x[a+1]-x[a],u=x[a]-x[a-1],T=t[i+1]-t[i],c=t[i]-t[i-1],A=_*u*(_+u),k=T*c*(T+c),P=(A*(c*m[i+1][a]+T*m[i-1][a])+k*(u*m[i][a+1]+_*m[i][a-1]))/(k*(u+_)+A*(c+T))),p=P-m[i][a],w=p/g,S+=w*w,h=z?0:.85,m[i][a]+=p*(1+h)}S=Math.sqrt(S)}while(L++<M&&S>D);return f.log("Smoother converged to",S,"after",L,"iterations"),m}},{"../../lib":515}],724:[function(e,B,V){var f=e("../../lib").isArray1D;B.exports=function(m,x,t){var a=t("x"),i=a&&a.length,r=t("y"),n=r&&r.length;if(!i&&!n)return!1;if(x._cheater=!a,(!i||f(a))&&(!n||f(r))){var d=i?a.length:1/0;n&&(d=Math.min(d,r.length)),x.a&&x.a.length&&(d=Math.min(d,x.a.length)),x.b&&x.b.length&&(d=Math.min(d,x.b.length)),x._length=d}else x._length=null;return!0}},{"../../lib":515}],725:[function(e,B,V){var f=e("../../plots/template_attributes").hovertemplateAttrs,l=e("../scattergeo/attributes"),m=e("../../components/colorscale/attributes"),x=e("../../plots/attributes"),t=e("../../components/color/attributes").defaultLine,a=e("../../lib/extend").extendFlat,i=l.marker.line;B.exports=a({locations:{valType:"data_array",editType:"calc"},locationmode:l.locationmode,z:{valType:"data_array",editType:"calc"},geojson:a({},l.geojson,{}),featureidkey:l.featureidkey,text:a({},l.text,{}),hovertext:a({},l.hovertext,{}),marker:{line:{color:a({},i.color,{dflt:t}),width:a({},i.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:l.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:l.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:a({},x.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:f(),showlegend:a({},x.showlegend,{dflt:!1})},m("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/color/attributes":366,"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scattergeo/attributes":978}],726:[function(e,B,V){var f=e("fast-isnumeric"),l=e("../../constants/numerical").BADNUM,m=e("../../components/colorscale/calc"),x=e("../scatter/arrays_to_calcdata"),t=e("../scatter/calc_selection");function a(i){return i&&typeof i=="string"}B.exports=function(r,n){var d=n._length,s=new Array(d),o;n.geojson?o=function(_){return a(_)||f(_)}:o=a;for(var y=0;y<d;y++){var g=s[y]={},b=n.locations[y],v=n.z[y];o(b)&&f(v)?(g.loc=b,g.z=v):(g.loc=null,g.z=l),g.index=y}return x(s,n),m(r,n,{vals:n.z,containerStr:"",cLetter:"z"}),t(s,n),s}},{"../../components/colorscale/calc":375,"../../constants/numerical":491,"../scatter/arrays_to_calcdata":935,"../scatter/calc_selection":938,"fast-isnumeric":190}],727:[function(e,B,V){var f=e("../../lib"),l=e("../../components/colorscale/defaults"),m=e("./attributes");B.exports=function(t,a,i,r){function n(v,_){return f.coerce(t,a,m,v,_)}var d=n("locations"),s=n("z");if(!(d&&d.length&&f.isArrayOrTypedArray(s)&&s.length)){a.visible=!1;return}a._length=Math.min(d.length,s.length);var o=n("geojson"),y;(typeof o=="string"&&o!==""||f.isPlainObject(o))&&(y="geojson-id");var g=n("locationmode",y);g==="geojson-id"&&n("featureidkey"),n("text"),n("hovertext"),n("hovertemplate");var b=n("marker.line.width");b&&n("marker.line.color"),n("marker.opacity"),l(t,a,r,n,{prefix:"",cLetter:"z"}),f.coerceSelectionMarkerOpacity(a,n)}},{"../../components/colorscale/defaults":377,"../../lib":515,"./attributes":725}],728:[function(e,B,V){B.exports=function(l,m,x,t,a){l.location=m.location,l.z=m.z;var i=t[a];return i.fIn&&i.fIn.properties&&(l.properties=i.fIn.properties),l.ct=i.ct,l}},{}],729:[function(e,B,V){var f=e("../../plots/cartesian/axes"),l=e("./attributes"),m=e("../../lib").fillText;B.exports=function(a,i,r){var n=a.cd,d=n[0].trace,s=a.subplot,o,y,g,b,v=[i,r],_=[i+360,r];for(y=0;y<n.length;y++)if(o=n[y],b=!1,o._polygons){for(g=0;g<o._polygons.length;g++)o._polygons[g].contains(v)&&(b=!b),o._polygons[g].contains(_)&&(b=!b);if(b)break}if(!(!b||!o))return a.x0=a.x1=a.xa.c2p(o.ct),a.y0=a.y1=a.ya.c2p(o.ct),a.index=o.index,a.location=o.loc,a.z=o.z,a.zLabel=f.tickText(s.mockAxis,s.mockAxis.c2l(o.z),"hover").text,a.hovertemplate=o.hovertemplate,x(a,d,o),[a]};function x(t,a,i){if(!a.hovertemplate){var r=i.hi||a.hoverinfo,n=String(i.loc),d=r==="all"?l.hoverinfo.flags:r.split("+"),s=d.indexOf("name")!==-1,o=d.indexOf("location")!==-1,y=d.indexOf("z")!==-1,g=d.indexOf("text")!==-1,b=!s&&o,v=[];b?t.nameOverride=n:(s&&(t.nameOverride=a.name),o&&v.push(n)),y&&v.push(t.zLabel),g&&m(i,a,v),t.extraText=v.join("<br>")}}},{"../../lib":515,"../../plots/cartesian/axes":566,"./attributes":725}],730:[function(e,B,V){B.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../heatmap/colorbar"),calc:e("./calc"),calcGeoJSON:e("./plot").calcGeoJSON,plot:e("./plot").plot,style:e("./style").style,styleOnSelect:e("./style").styleOnSelect,hoverPoints:e("./hover"),eventData:e("./event_data"),selectPoints:e("./select"),moduleType:"trace",name:"choropleth",basePlotModule:e("../../plots/geo"),categories:["geo","noOpacity","showLegend"],meta:{}}},{"../../plots/geo":598,"../heatmap/colorbar":804,"./attributes":725,"./calc":726,"./defaults":727,"./event_data":728,"./hover":729,"./plot":731,"./select":732,"./style":733}],731:[function(e,B,V){var f=e("@plotly/d3"),l=e("../../lib"),m=e("../../lib/geo_location_utils"),x=e("../../lib/topojson_utils").getTopojsonFeatures,t=e("../../plots/cartesian/autorange").findExtremes,a=e("./style").style;function i(n,d,s){var o=d.layers.backplot.select(".choroplethlayer");l.makeTraceGroups(o,s,"trace choropleth").each(function(y){var g=f.select(this),b=g.selectAll("path.choroplethlocation").data(l.identity);b.enter().append("path").classed("choroplethlocation",!0),b.exit().remove(),a(n,y)})}function r(n,d){for(var s=n[0].trace,o=d[s.geo],y=o._subplot,g=s.locationmode,b=s._length,v=g==="geojson-id"?m.extractTraceFeature(n):x(s,y.topojson),_=[],u=[],T=0;T<b;T++){var c=n[T],A=g==="geojson-id"?c.fOut:m.locationToFeature(g,c.loc,v);if(A){c.geojson=A,c.ct=A.properties.ct,c._polygons=m.feature2polygons(A);var k=m.computeBbox(A);_.push(k[0],k[2]),u.push(k[1],k[3])}else c.geojson=null}if(o.fitbounds==="geojson"&&g==="geojson-id"){var p=m.computeBbox(m.getTraceGeojson(s));_=[p[0],p[2]],u=[p[1],p[3]]}var w={padded:!0};s._extremes.lon=t(o.lonaxis._ax,_,w),s._extremes.lat=t(o.lataxis._ax,u,w)}B.exports={calcGeoJSON:r,plot:i}},{"../../lib":515,"../../lib/geo_location_utils":508,"../../lib/topojson_utils":544,"../../plots/cartesian/autorange":565,"./style":733,"@plotly/d3":58}],732:[function(e,B,V){B.exports=function(l,m){var x=l.cd,t=l.xaxis,a=l.yaxis,i=[],r,n,d,s,o;if(m===!1)for(r=0;r<x.length;r++)x[r].selected=0;else for(r=0;r<x.length;r++)n=x[r],d=n.ct,d&&(s=t.c2p(d),o=a.c2p(d),m.contains([s,o],null,r,l)?(i.push({pointNumber:r,lon:d[0],lat:d[1]}),n.selected=1):n.selected=0);return i}},{}],733:[function(e,B,V){var f=e("@plotly/d3"),l=e("../../components/color"),m=e("../../components/drawing"),x=e("../../components/colorscale");function t(r,n){n&&a(r,n)}function a(r,n){var d=n[0].trace,s=n[0].node3,o=s.selectAll(".choroplethlocation"),y=d.marker||{},g=y.line||{},b=x.makeColorScaleFuncFromTrace(d);o.each(function(v){f.select(this).attr("fill",b(v.z)).call(l.stroke,v.mlc||g.color).call(m.dashLine,"",v.mlw||g.width||0).style("opacity",y.opacity)}),m.selectedPointStyle(o,d,r)}function i(r,n){var d=n[0].node3,s=n[0].trace;s.selectedpoints?m.selectedPointStyle(d.selectAll(".choroplethlocation"),s,r):a(r,n)}B.exports={style:t,styleOnSelect:i}},{"../../components/color":367,"../../components/colorscale":379,"../../components/drawing":389,"@plotly/d3":58}],734:[function(e,B,V){var f=e("../choropleth/attributes"),l=e("../../components/colorscale/attributes"),m=e("../../plots/template_attributes").hovertemplateAttrs,x=e("../../plots/attributes"),t=e("../../lib/extend").extendFlat;B.exports=t({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:t({},f.featureidkey,{}),below:{valType:"string",editType:"plot"},text:f.text,hovertext:f.hovertext,marker:{line:{color:t({},f.marker.line.color,{editType:"plot"}),width:t({},f.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:t({},f.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:t({},f.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:t({},f.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:f.hoverinfo,hovertemplate:m({},{keys:["properties"]}),showlegend:t({},x.showlegend,{dflt:!1})},l("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../choropleth/attributes":725}],735:[function(e,B,V){var f=e("fast-isnumeric"),l=e("../../lib"),m=e("../../components/colorscale"),x=e("../../components/drawing"),t=e("../../lib/geojson_utils").makeBlank,a=e("../../lib/geo_location_utils");function i(n){var d=n[0].trace,s=d.visible===!0&&d._length!==0,o={layout:{visibility:"none"},paint:{}},y={layout:{visibility:"none"},paint:{}},g=d._opts={fill:o,line:y,geojson:t()};if(!s)return g;var b=a.extractTraceFeature(n);if(!b)return g;var v=m.makeColorScaleFuncFromTrace(d),_=d.marker,u=_.line||{},T;l.isArrayOrTypedArray(_.opacity)&&(T=function(S){var M=S.mo;return f(M)?+l.constrain(M,0,1):0});var c;l.isArrayOrTypedArray(u.color)&&(c=function(S){return S.mlc});var A;l.isArrayOrTypedArray(u.width)&&(A=function(S){return S.mlw});for(var k=0;k<n.length;k++){var p=n[k],w=p.fOut;if(w){var h=w.properties;h.fc=v(p.z),T&&(h.mo=T(p)),c&&(h.mlc=c(p)),A&&(h.mlw=A(p)),p.ct=h.ct,p._polygons=a.feature2polygons(w)}}var D=T?{type:"identity",property:"mo"}:_.opacity;return l.extendFlat(o.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":D}),l.extendFlat(y.paint,{"line-color":c?{type:"identity",property:"mlc"}:u.color,"line-width":A?{type:"identity",property:"mlw"}:u.width,"line-opacity":D}),o.layout.visibility="visible",y.layout.visibility="visible",g.geojson={type:"FeatureCollection",features:b},r(n),g}function r(n){var d=n[0].trace,s=d._opts,o;if(d.selectedpoints){for(var y=x.makeSelectedPointStyleFns(d),g=0;g<n.length;g++){var b=n[g];b.fOut&&(b.fOut.properties.mo2=y.selectedOpacityFn(b))}o={type:"identity",property:"mo2"}}else o=l.isArrayOrTypedArray(d.marker.opacity)?{type:"identity",property:"mo"}:d.marker.opacity;return l.extendFlat(s.fill.paint,{"fill-opacity":o}),l.extendFlat(s.line.paint,{"line-opacity":o}),s}B.exports={convert:i,convertOnSelect:r}},{"../../components/colorscale":379,"../../components/drawing":389,"../../lib":515,"../../lib/geo_location_utils":508,"../../lib/geojson_utils":509,"fast-isnumeric":190}],736:[function(e,B,V){var f=e("../../lib"),l=e("../../components/colorscale/defaults"),m=e("./attributes");B.exports=function(t,a,i,r){function n(g,b){return f.coerce(t,a,m,g,b)}var d=n("locations"),s=n("z"),o=n("geojson");if(!f.isArrayOrTypedArray(d)||!d.length||!f.isArrayOrTypedArray(s)||!s.length||!(typeof o=="string"&&o!==""||f.isPlainObject(o))){a.visible=!1;return}n("featureidkey"),a._length=Math.min(d.length,s.length),n("below"),n("text"),n("hovertext"),n("hovertemplate");var y=n("marker.line.width");y&&n("marker.line.color"),n("marker.opacity"),l(t,a,r,n,{prefix:"",cLetter:"z"}),f.coerceSelectionMarkerOpacity(a,n)}},{"../../components/colorscale/defaults":377,"../../lib":515,"./attributes":734}],737:[function(e,B,V){B.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../heatmap/colorbar"),calc:e("../choropleth/calc"),plot:e("./plot"),hoverPoints:e("../choropleth/hover"),eventData:e("../choropleth/event_data"),selectPoints:e("../choropleth/select"),styleOnSelect:function(f,l){if(l){var m=l[0].trace;m._glTrace.updateOnSelect(l)}},getBelow:function(f,l){for(var m=l.getMapLayers(),x=m.length-2;x>=0;x--){var t=m[x].id;if(typeof t=="string"&&t.indexOf("water")===0){for(var a=x+1;a<m.length;a++)if(t=m[a].id,typeof t=="string"&&t.indexOf("plotly-")===-1)return t}}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:e("../../plots/mapbox"),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},{"../../plots/mapbox":622,"../choropleth/calc":726,"../choropleth/event_data":728,"../choropleth/hover":729,"../choropleth/select":732,"../heatmap/colorbar":804,"./attributes":734,"./defaults":736,"./plot":738}],738:[function(e,B,V){var f=e("./convert").convert,l=e("./convert").convertOnSelect,m=e("../../plots/mapbox/constants").traceLayerPrefix;function x(a,i){this.type="choroplethmapbox",this.subplot=a,this.uid=i,this.sourceId="source-"+i,this.layerList=[["fill",m+i+"-fill"],["line",m+i+"-line"]],this.below=null}var t=x.prototype;t.update=function(a){this._update(f(a))},t.updateOnSelect=function(a){this._update(l(a))},t._update=function(a){var i=this.subplot,r=this.layerList,n=i.belowLookup["trace-"+this.uid];i.map.getSource(this.sourceId).setData(a.geojson),n!==this.below&&(this._removeLayers(),this._addLayers(a,n),this.below=n);for(var d=0;d<r.length;d++){var s=r[d],o=s[0],y=s[1],g=a[o];i.setOptions(y,"setLayoutProperty",g.layout),g.layout.visibility==="visible"&&i.setOptions(y,"setPaintProperty",g.paint)}},t._addLayers=function(a,i){for(var r=this.subplot,n=this.layerList,d=this.sourceId,s=0;s<n.length;s++){var o=n[s],y=o[0],g=a[y];r.addLayer({type:y,id:o[1],source:d,layout:g.layout,paint:g.paint},i)}},t._removeLayers=function(){for(var a=this.subplot.map,i=this.layerList,r=i.length-1;r>=0;r--)a.removeLayer(i[r][1])},t.dispose=function(){var a=this.subplot.map;this._removeLayers(),a.removeSource(this.sourceId)},B.exports=function(i,r){var n=r[0].trace,d=new x(i,n.uid),s=d.sourceId,o=f(r),y=d.below=i.belowLookup["trace-"+n.uid];return i.map.addSource(s,{type:"geojson",data:o.geojson}),d._addLayers(o,y),r[0].trace._glTrace=d,d}},{"../../plots/mapbox/constants":620,"./convert":735}],739:[function(e,B,V){var f=e("../../components/colorscale/attributes"),l=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,m=e("../../plots/template_attributes").hovertemplateAttrs,x=e("../mesh3d/attributes"),t=e("../../plots/attributes"),a=e("../../lib/extend").extendFlat,i={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:m({editType:"calc"},{keys:["norm"]}),uhoverformat:l("u",1),vhoverformat:l("v",1),whoverformat:l("w",1),xhoverformat:l("x"),yhoverformat:l("y"),zhoverformat:l("z"),showlegend:a({},t.showlegend,{dflt:!1})};a(i,f("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}));var r=["opacity","lightposition","lighting"];r.forEach(function(n){i[n]=x[n]}),i.hoverinfo=a({},t.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),i.transforms=void 0,B.exports=i},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../mesh3d/attributes":876}],740:[function(e,B,V){var f=e("../../components/colorscale/calc");B.exports=function(m,x){for(var t=x.u,a=x.v,i=x.w,r=Math.min(x.x.length,x.y.length,x.z.length,t.length,a.length,i.length),n=-1/0,d=1/0,s=0;s<r;s++){var o=t[s],y=a[s],g=i[s],b=Math.sqrt(o*o+y*y+g*g);n=Math.max(n,b),d=Math.min(d,b)}x._len=r,x._normMax=n,f(m,x,{vals:[d,n],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":375}],741:[function(e,B,V){var f=e("../../../stackgl_modules").gl_cone3d,l=e("../../../stackgl_modules").gl_cone3d.createConeMesh,m=e("../../lib").simpleMap,x=e("../../lib/gl_format_color").parseColorScale,t=e("../../components/colorscale").extractOpts,a=e("../../plots/gl3d/zip3");function i(g,b){this.scene=g,this.uid=b,this.mesh=null,this.data=null}var r=i.prototype;r.handlePick=function(g){if(g.object===this.mesh){var b=g.index=g.data.index,v=this.data.x[b],_=this.data.y[b],u=this.data.z[b],T=this.data.u[b],c=this.data.v[b],A=this.data.w[b];g.traceCoordinate=[v,_,u,T,c,A,Math.sqrt(T*T+c*c+A*A)];var k=this.data.hovertext||this.data.text;return Array.isArray(k)&&k[b]!==void 0?g.textLabel=k[b]:k&&(g.textLabel=k),!0}};var n={xaxis:0,yaxis:1,zaxis:2},d={tip:1,tail:0,cm:.25,center:.5},s={tip:1,tail:1,cm:.75,center:.5};function o(g,b){var v=g.fullSceneLayout,_=g.dataScale,u={};function T(p,w){var h=v[w],D=_[n[w]];return m(p,function(S){return h.d2l(S)*D})}u.vectors=a(T(b.u,"xaxis"),T(b.v,"yaxis"),T(b.w,"zaxis"),b._len),u.positions=a(T(b.x,"xaxis"),T(b.y,"yaxis"),T(b.z,"zaxis"),b._len);var c=t(b);u.colormap=x(b),u.vertexIntensityBounds=[c.min/b._normMax,c.max/b._normMax],u.coneOffset=d[b.anchor],b.sizemode==="scaled"?u.coneSize=b.sizeref||.5:u.coneSize=b.sizeref&&b._normMax?b.sizeref/b._normMax:.5;var A=f(u),k=b.lightposition;return A.lightPosition=[k.x,k.y,k.z],A.ambient=b.lighting.ambient,A.diffuse=b.lighting.diffuse,A.specular=b.lighting.specular,A.roughness=b.lighting.roughness,A.fresnel=b.lighting.fresnel,A.opacity=b.opacity,b._pad=s[b.anchor]*A.vectorScale*A.coneScale*b._normMax,A}r.update=function(g){this.data=g;var b=o(this.scene,g);this.mesh.update(b)},r.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function y(g,b){var v=g.glplot.gl,_=o(g,b),u=l(v,_),T=new i(g,b.uid);return T.mesh=u,T.data=b,u._trace=T,g.glplot.add(u),T}B.exports=y},{"../../../stackgl_modules":1133,"../../components/colorscale":379,"../../lib":515,"../../lib/gl_format_color":511,"../../plots/gl3d/zip3":618}],742:[function(e,B,V){var f=e("../../lib"),l=e("../../components/colorscale/defaults"),m=e("./attributes");B.exports=function(t,a,i,r){function n(v,_){return f.coerce(t,a,m,v,_)}var d=n("u"),s=n("v"),o=n("w"),y=n("x"),g=n("y"),b=n("z");if(!d||!d.length||!s||!s.length||!o||!o.length||!y||!y.length||!g||!g.length||!b||!b.length){a.visible=!1;return}n("sizeref"),n("sizemode"),n("anchor"),n("lighting.ambient"),n("lighting.diffuse"),n("lighting.specular"),n("lighting.roughness"),n("lighting.fresnel"),n("lightposition.x"),n("lightposition.y"),n("lightposition.z"),l(t,a,r,n,{prefix:"",cLetter:"c"}),n("text"),n("hovertext"),n("hovertemplate"),n("uhoverformat"),n("vhoverformat"),n("whoverformat"),n("xhoverformat"),n("yhoverformat"),n("zhoverformat"),a._length=null}},{"../../components/colorscale/defaults":377,"../../lib":515,"./attributes":739}],743:[function(e,B,V){B.exports={moduleType:"trace",name:"cone",basePlotModule:e("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:e("./calc"),plot:e("./convert"),eventData:function(f,l){return f.norm=l.traceCoordinate[6],f},meta:{}}},{"../../plots/gl3d":607,"./attributes":739,"./calc":740,"./convert":741,"./defaults":742}],744:[function(e,B,V){var f=e("../heatmap/attributes"),l=e("../scatter/attributes"),m=e("../../plots/cartesian/axis_format_attributes"),x=m.axisHoverFormat,t=m.descriptionOnlyNumbers,a=e("../../components/colorscale/attributes"),i=e("../../components/drawing/attributes").dash,r=e("../../plots/font_attributes"),n=e("../../lib/extend").extendFlat,d=e("../../constants/filter_ops"),s=d.COMPARISON_OPS2,o=d.INTERVAL_OPS,y=l.line;B.exports=n({z:f.z,x:f.x,x0:f.x0,dx:f.dx,y:f.y,y0:f.y0,dy:f.dy,xperiod:f.xperiod,yperiod:f.yperiod,xperiod0:l.xperiod0,yperiod0:l.yperiod0,xperiodalignment:f.xperiodalignment,yperiodalignment:f.yperiodalignment,text:f.text,hovertext:f.hovertext,transpose:f.transpose,xtype:f.xtype,ytype:f.ytype,xhoverformat:x("x"),yhoverformat:x("y"),zhoverformat:x("z",1),hovertemplate:f.hovertemplate,texttemplate:n({},f.texttemplate,{}),textfont:n({},f.textfont,{}),hoverongaps:f.hoverongaps,connectgaps:n({},f.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:r({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:t("contour label")},operation:{valType:"enumerated",values:[].concat(s).concat(o),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:n({},y.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:i,smoothing:n({},y.smoothing,{}),editType:"plot"}},a("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":374,"../../components/drawing/attributes":388,"../../constants/filter_ops":487,"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../../plots/font_attributes":594,"../heatmap/attributes":801,"../scatter/attributes":936}],745:[function(e,B,V){var f=e("../../components/colorscale"),l=e("../heatmap/calc"),m=e("./set_contours"),x=e("./end_plus");B.exports=function(a,i){var r=l(a,i),n=r[0].z;m(i,n);var d=i.contours,s=f.extractOpts(i),o;if(d.coloring==="heatmap"&&s.auto&&i.autocontour===!1){var y=d.start,g=x(d),b=d.size||1,v=Math.floor((g-y)/b)+1;isFinite(b)||(b=1,v=1);var _=y-b/2,u=_+v*b;o=[_,u]}else o=n;return f.calc(a,i,{vals:o,cLetter:"z"}),r}},{"../../components/colorscale":379,"../heatmap/calc":802,"./end_plus":755,"./set_contours":763}],746:[function(e,B,V){B.exports=function(f,l){var m=f[0],x=m.z,t;switch(l.type){case"levels":var a=Math.min(x[0][0],x[0][1]);for(t=0;t<f.length;t++){var i=f[t];i.prefixBoundary=!i.edgepaths.length&&(a>i.level||i.starts.length&&a===i.level)}break;case"constraint":if(m.prefixBoundary=!1,m.edgepaths.length)return;var r=m.x.length,n=m.y.length,d=-1/0,s=1/0;for(t=0;t<n;t++)s=Math.min(s,x[t][0]),s=Math.min(s,x[t][r-1]),d=Math.max(d,x[t][0]),d=Math.max(d,x[t][r-1]);for(t=1;t<r-1;t++)s=Math.min(s,x[0][t]),s=Math.min(s,x[n-1][t]),d=Math.max(d,x[0][t]),d=Math.max(d,x[n-1][t]);var o=l.value,y,g;switch(l._operation){case">":o>d&&(m.prefixBoundary=!0);break;case"<":(o<s||m.starts.length&&o===s)&&(m.prefixBoundary=!0);break;case"[]":y=Math.min(o[0],o[1]),g=Math.max(o[0],o[1]),(g<s||y>d||m.starts.length&&g===s)&&(m.prefixBoundary=!0);break;case"][":y=Math.min(o[0],o[1]),g=Math.max(o[0],o[1]),y<s&&g>d&&(m.prefixBoundary=!0);break}break}}},{}],747:[function(e,B,V){var f=e("../../components/colorscale"),l=e("./make_color_map"),m=e("./end_plus");function x(t,a,i){var r=a.contours,n=a.line,d=r.size||1,s=r.coloring,o=l(a,{isColorbar:!0});if(s==="heatmap"){var y=f.extractOpts(a);i._fillgradient=y.reversescale?f.flipScale(y.colorscale):y.colorscale,i._zrange=[y.min,y.max]}else s==="fill"&&(i._fillcolor=o);i._line={color:s==="lines"?o:n.color,width:r.showlines!==!1?n.width:0,dash:n.dash},i._levels={start:r.start,end:m(r),size:d}}B.exports={min:"zmin",max:"zmax",calc:x}},{"../../components/colorscale":379,"./end_plus":755,"./make_color_map":760}],748:[function(e,B,V){B.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},{}],749:[function(e,B,V){var f=e("fast-isnumeric"),l=e("./label_defaults"),m=e("../../components/color"),x=m.addOpacity,t=m.opacity,a=e("../../constants/filter_ops"),i=a.CONSTRAINT_REDUCTION,r=a.COMPARISON_OPS2;B.exports=function(s,o,y,g,b,v){var _=o.contours,u,T,c,A=y("contours.operation");if(_._operation=i[A],n(y,_),A==="="?u=_.showlines=!0:(u=y("contours.showlines"),c=y("fillcolor",x((s.line||{}).color||b,.5))),u){var k=c&&t(c)?x(o.fillcolor,1):b;T=y("line.color",k),y("line.width",2),y("line.dash")}y("line.smoothing"),l(y,g,T,v)};function n(d,s){var o;r.indexOf(s.operation)===-1?(d("contours.value",[0,1]),Array.isArray(s.value)?s.value.length>2?s.value=s.value.slice(2):s.length===0?s.value=[0,1]:s.length<2?(o=parseFloat(s.value[0]),s.value=[o,o+1]):s.value=[parseFloat(s.value[0]),parseFloat(s.value[1])]:f(s.value)&&(o=parseFloat(s.value),s.value=[o,o+1])):(d("contours.value",0),f(s.value)||(Array.isArray(s.value)?s.value=parseFloat(s.value[0]):s.value=0))}},{"../../components/color":367,"../../constants/filter_ops":487,"./label_defaults":759,"fast-isnumeric":190}],750:[function(e,B,V){var f=e("../../constants/filter_ops"),l=e("fast-isnumeric");B.exports={"[]":x("[]"),"][":x("]["),">":t(">"),"<":t("<"),"=":t("=")};function m(a,i){var r=Array.isArray(i),n;function d(s){return l(s)?+s:null}return f.COMPARISON_OPS2.indexOf(a)!==-1?n=d(r?i[0]:i):f.INTERVAL_OPS.indexOf(a)!==-1?n=r?[d(i[0]),d(i[1])]:[d(i),d(i)]:f.SET_OPS.indexOf(a)!==-1&&(n=r?i.map(d):[d(i)]),n}function x(a){return function(i){i=m(a,i);var r=Math.min(i[0],i[1]),n=Math.max(i[0],i[1]);return{start:r,end:n,size:n-r}}}function t(a){return function(i){return i=m(a,i),{start:i,end:1/0,size:1/0}}}},{"../../constants/filter_ops":487,"fast-isnumeric":190}],751:[function(e,B,V){B.exports=function(l,m,x,t){var a=t("contours.start"),i=t("contours.end"),r=a===!1||i===!1,n=x("contours.size"),d;r?d=m.autocontour=!0:d=x("autocontour",!1),(d||!n)&&x("ncontours")}},{}],752:[function(e,B,V){var f=e("../../lib");B.exports=function(m,x){var t,a,i,r=function(s){return s.reverse()},n=function(s){return s};switch(x){case"=":case"<":return m;case">":for(m.length!==1&&f.warn("Contour data invalid for the specified inequality operation."),a=m[0],t=0;t<a.edgepaths.length;t++)a.edgepaths[t]=r(a.edgepaths[t]);for(t=0;t<a.paths.length;t++)a.paths[t]=r(a.paths[t]);for(t=0;t<a.starts.length;t++)a.starts[t]=r(a.starts[t]);return m;case"][":var d=r;r=n,n=d;case"[]":for(m.length!==2&&f.warn("Contour data invalid for the specified inequality range operation."),a=l(m[0]),i=l(m[1]),t=0;t<a.edgepaths.length;t++)a.edgepaths[t]=r(a.edgepaths[t]);for(t=0;t<a.paths.length;t++)a.paths[t]=r(a.paths[t]);for(t=0;t<a.starts.length;t++)a.starts[t]=r(a.starts[t]);for(;i.edgepaths.length;)a.edgepaths.push(n(i.edgepaths.shift()));for(;i.paths.length;)a.paths.push(n(i.paths.shift()));for(;i.starts.length;)a.starts.push(n(i.starts.shift()));return[a]}};function l(m){return f.extendFlat({},m,{edgepaths:f.extendDeep([],m.edgepaths),paths:f.extendDeep([],m.paths),starts:f.extendDeep([],m.starts)})}},{"../../lib":515}],753:[function(e,B,V){var f=e("../../lib"),l=e("../heatmap/xyz_defaults"),m=e("../scatter/period_defaults"),x=e("./constraint_defaults"),t=e("./contours_defaults"),a=e("./style_defaults"),i=e("../heatmap/label_defaults"),r=e("./attributes");B.exports=function(d,s,o,y){function g(u,T){return f.coerce(d,s,r,u,T)}function b(u){return f.coerce2(d,s,r,u)}var v=l(d,s,g,y);if(!v){s.visible=!1;return}m(d,s,y,g),g("xhoverformat"),g("yhoverformat"),g("text"),g("hovertext"),g("hoverongaps"),g("hovertemplate");var _=g("contours.type")==="constraint";g("connectgaps",f.isArray1D(s.z)),_?x(d,s,g,y,o):(t(d,s,g,b),a(d,s,g,y)),s.contours&&s.contours.coloring==="heatmap"&&i(g,y)}},{"../../lib":515,"../heatmap/label_defaults":811,"../heatmap/xyz_defaults":816,"../scatter/period_defaults":956,"./attributes":744,"./constraint_defaults":749,"./contours_defaults":751,"./style_defaults":765}],754:[function(e,B,V){var f=e("../../lib"),l=e("./constraint_mapping"),m=e("./end_plus");B.exports=function(t,a,i){for(var r=t.type==="constraint"?l[t._operation](t.value):t,n=r.size,d=[],s=m(r),o=i.trace._carpetTrace,y=o?{xaxis:o.aaxis,yaxis:o.baxis,x:i.a,y:i.b}:{xaxis:a.xaxis,yaxis:a.yaxis,x:i.x,y:i.y},g=r.start;g<s;g+=n)if(d.push(f.extendFlat({level:g,crossings:{},starts:[],edgepaths:[],paths:[],z:i.z,smoothing:i.trace.line.smoothing},y)),d.length>1e3){f.warn("Too many contours, clipping at 1000",t);break}return d}},{"../../lib":515,"./constraint_mapping":750,"./end_plus":755}],755:[function(e,B,V){B.exports=function(l){return l.end+l.size/1e6}},{}],756:[function(e,B,V){var f=e("../../lib"),l=e("./constants");B.exports=function(n,d,s){var o,y,g,b,v;for(d=d||.01,s=s||.01,g=0;g<n.length;g++){for(b=n[g],v=0;v<b.starts.length;v++)y=b.starts[v],t(b,y,"edge",d,s);for(o=0;Object.keys(b.crossings).length&&o<1e4;)o++,y=Object.keys(b.crossings)[0].split(",").map(Number),t(b,y,void 0,d,s);o===1e4&&f.log("Infinite loop in contour?")}};function m(r,n,d,s){return Math.abs(r[0]-n[0])<d&&Math.abs(r[1]-n[1])<s}function x(r,n){var d=r[2]-n[2],s=r[3]-n[3];return Math.sqrt(d*d+s*s)}function t(r,n,d,s,o){var y=n.join(","),g=r.crossings[y],b=a(g,d,n),v=[i(r,n,[-b[0],-b[1]])],_=r.z.length,u=r.z[0].length,T=n.slice(),c=b.slice(),A;for(A=0;A<1e4;A++){if(g>20?(g=l.CHOOSESADDLE[g][(b[0]||b[1])<0?0:1],r.crossings[y]=l.SADDLEREMAINDER[g]):delete r.crossings[y],b=l.NEWDELTA[g],!b){f.log("Found bad marching index:",g,n,r.level);break}v.push(i(r,n,b)),n[0]+=b[0],n[1]+=b[1],y=n.join(","),m(v[v.length-1],v[v.length-2],s,o)&&v.pop();var k=b[0]&&(n[0]<0||n[0]>u-2)||b[1]&&(n[1]<0||n[1]>_-2),p=n[0]===T[0]&&n[1]===T[1]&&b[0]===c[0]&&b[1]===c[1];if(p||d&&k)break;g=r.crossings[y]}A===1e4&&f.log("Infinite loop in contour?");var w=m(v[0],v[v.length-1],s,o),h=0,D=.2*r.smoothing,S=[],M=0,L,R,z,P,I,U,O,G,$,tt,Z;for(A=1;A<v.length;A++)O=x(v[A],v[A-1]),h+=O,S.push(O);var X=h/S.length*D;function J(lt){return v[lt%v.length]}for(A=v.length-2;A>=M;A--)if(L=S[A],L<X){for(z=0,R=A-1;R>=M&&L+S[R]<X;R--)L+=S[R];if(w&&A===v.length-2)for(z=0;z<R&&L+S[z]<X;z++)L+=S[z];I=A-R+z+1,U=Math.floor((A+R+z+2)/2),!w&&A===v.length-2?P=v[v.length-1]:!w&&R===-1?P=v[0]:I%2?P=J(U):P=[(J(U)[0]+J(U+1)[0])/2,(J(U)[1]+J(U+1)[1])/2],v.splice(R+1,A-R+1,P),A=R+1,z&&(M=z),w&&(A===v.length-2?v[z]=v[v.length-1]:A===0&&(v[v.length-1]=v[0]))}for(v.splice(0,M),A=0;A<v.length;A++)v[A].length=2;if(!(v.length<2))if(w)v.pop(),r.paths.push(v);else{d||f.log("Unclosed interior contour?",r.level,T.join(","),v.join("L"));var st=!1;for(G=0;G<r.edgepaths.length;G++)if(tt=r.edgepaths[G],!st&&m(tt[0],v[v.length-1],s,o)){v.pop(),st=!0;var at=!1;for($=0;$<r.edgepaths.length;$++)if(Z=r.edgepaths[$],m(Z[Z.length-1],v[0],s,o)){at=!0,v.shift(),r.edgepaths.splice(G,1),$===G?r.paths.push(v.concat(Z)):($>G&&$--,r.edgepaths[$]=Z.concat(v,tt));break}at||(r.edgepaths[G]=v.concat(tt))}for(G=0;G<r.edgepaths.length&&!st;G++)tt=r.edgepaths[G],m(tt[tt.length-1],v[0],s,o)&&(v.shift(),r.edgepaths[G]=tt.concat(v),st=!0);st||r.edgepaths.push(v)}}function a(r,n,d){var s=0,o=0;return r>20&&n?r===208||r===1114?s=d[0]===0?1:-1:o=d[1]===0?1:-1:l.BOTTOMSTART.indexOf(r)!==-1?o=1:l.LEFTSTART.indexOf(r)!==-1?s=1:l.TOPSTART.indexOf(r)!==-1?o=-1:s=-1,[s,o]}function i(r,n,d){var s=n[0]+Math.max(d[0],0),o=n[1]+Math.max(d[1],0),y=r.z[o][s],g=r.xaxis,b=r.yaxis;if(d[1]){var v=(r.level-y)/(r.z[o][s+1]-y),_=(v!==1?(1-v)*g.c2l(r.x[s]):0)+(v!==0?v*g.c2l(r.x[s+1]):0);return[g.c2p(g.l2c(_),!0),b.c2p(r.y[o],!0),s+v,o]}else{var u=(r.level-y)/(r.z[o+1][s]-y),T=(u!==1?(1-u)*b.c2l(r.y[o]):0)+(u!==0?u*b.c2l(r.y[o+1]):0);return[g.c2p(r.x[s],!0),b.c2p(b.l2c(T),!0),s,o+u]}}},{"../../lib":515,"./constants":748}],757:[function(e,B,V){var f=e("../../components/color"),l=e("../heatmap/hover");B.exports=function(x,t,a,i,r){r||(r={}),r.isContour=!0;var n=l(x,t,a,i,r);return n&&n.forEach(function(d){var s=d.trace;s.contours.type==="constraint"&&(s.fillcolor&&f.opacity(s.fillcolor)?d.color=f.addOpacity(s.fillcolor,1):s.contours.showlines&&f.opacity(s.line.color)&&(d.color=f.addOpacity(s.line.color,1)))}),n}},{"../../components/color":367,"../heatmap/hover":808}],758:[function(e,B,V){B.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("./plot").plot,style:e("./style"),colorbar:e("./colorbar"),hoverPoints:e("./hover"),moduleType:"trace",name:"contour",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},{"../../plots/cartesian":578,"./attributes":744,"./calc":745,"./colorbar":747,"./defaults":753,"./hover":757,"./plot":762,"./style":764}],759:[function(e,B,V){var f=e("../../lib");B.exports=function(m,x,t,a){a||(a={});var i=m("contours.showlabels");if(i){var r=x.font;f.coerceFont(m,"contours.labelfont",{family:r.family,size:r.size,color:t}),m("contours.labelformat")}a.hasHover!==!1&&m("zhoverformat")}},{"../../lib":515}],760:[function(e,B,V){var f=e("@plotly/d3"),l=e("../../components/colorscale"),m=e("./end_plus");B.exports=function(t){var a=t.contours,i=a.start,r=m(a),n=a.size||1,d=Math.floor((r-i)/n)+1,s=a.coloring==="lines"?0:1,o=l.extractOpts(t);isFinite(n)||(n=1,d=1);var y=o.reversescale?l.flipScale(o.colorscale):o.colorscale,g=y.length,b=new Array(g),v=new Array(g),_,u;if(a.coloring==="heatmap"){var T=o.min,c=o.max;for(u=0;u<g;u++)_=y[u],b[u]=_[0]*(c-T)+T,v[u]=_[1];var A=f.extent([T,c,a.start,a.start+n*(d-1)]),k=A[T<c?0:1],p=A[T<c?1:0];k!==T&&(b.splice(0,0,k),v.splice(0,0,v[0])),p!==c&&(b.push(p),v.push(v[v.length-1]))}else for(u=0;u<g;u++)_=y[u],b[u]=(_[0]*(d+s-1)-s/2)*n+i,v[u]=_[1];return l.makeColorScaleFunc({domain:b,range:v},{noNumericCheck:!0})}},{"../../components/colorscale":379,"./end_plus":755,"@plotly/d3":58}],761:[function(e,B,V){var f=e("./constants");B.exports=function(x){var t=x[0].z,a=t.length,i=t[0].length,r=a===2||i===2,n,d,s,o,y,g,b,v,_;for(d=0;d<a-1;d++)for(o=[],d===0&&(o=o.concat(f.BOTTOMSTART)),d===a-2&&(o=o.concat(f.TOPSTART)),n=0;n<i-1;n++)for(s=o.slice(),n===0&&(s=s.concat(f.LEFTSTART)),n===i-2&&(s=s.concat(f.RIGHTSTART)),y=n+","+d,g=[[t[d][n],t[d][n+1]],[t[d+1][n],t[d+1][n+1]]],_=0;_<x.length;_++)v=x[_],b=l(v.level,g),b&&(v.crossings[y]=b,s.indexOf(b)!==-1&&(v.starts.push([n,d]),r&&s.indexOf(b,s.indexOf(b)+1)!==-1&&v.starts.push([n,d])))};function l(m,x){var t=(x[0][0]>m?0:1)+(x[0][1]>m?0:2)+(x[1][1]>m?0:4)+(x[1][0]>m?0:8);if(t===5||t===10){var a=(x[0][0]+x[0][1]+x[1][0]+x[1][1])/4;return m>a?t===5?713:1114:t===5?104:208}return t===15?0:t}},{"./constants":748}],762:[function(e,B,V){var f=e("@plotly/d3"),l=e("../../lib"),m=e("../../components/drawing"),x=e("../../components/colorscale"),t=e("../../lib/svg_text_utils"),a=e("../../plots/cartesian/axes"),i=e("../../plots/cartesian/set_convert"),r=e("../heatmap/plot"),n=e("./make_crossings"),d=e("./find_all_paths"),s=e("./empty_pathinfo"),o=e("./convert_to_constraints"),y=e("./close_boundaries"),g=e("./constants"),b=g.LABELOPTIMIZER;V.plot=function(w,h,D,S){var M=h.xaxis,L=h.yaxis;l.makeTraceGroups(S,D,"contour").each(function(R){var z=f.select(this),P=R[0],I=P.trace,U=P.x,O=P.y,G=I.contours,$=s(G,h,P),tt=l.ensureSingle(z,"g","heatmapcoloring"),Z=[];G.coloring==="heatmap"&&(Z=[R]),r(w,h,Z,tt),n($),d($);var X=M.c2p(U[0],!0),J=M.c2p(U[U.length-1],!0),st=L.c2p(O[0],!0),at=L.c2p(O[O.length-1],!0),lt=[[X,at],[J,at],[J,st],[X,st]],F=$;G.type==="constraint"&&(F=o($,G._operation)),v(z,lt,G),_(z,F,lt,G),T(z,$,w,P,G),A(z,h,w,P,lt)})};function v(p,w,h){var D=l.ensureSingle(p,"g","contourbg"),S=D.selectAll("path").data(h.coloring==="fill"?[0]:[]);S.enter().append("path"),S.exit().remove(),S.attr("d","M"+w.join("L")+"Z").style("stroke","none")}function _(p,w,h,D){var S=D.coloring==="fill"||D.type==="constraint"&&D._operation!=="=",M="M"+h.join("L")+"Z";S&&y(w,D);var L=l.ensureSingle(p,"g","contourfill"),R=L.selectAll("path").data(S?w:[]);R.enter().append("path"),R.exit().remove(),R.each(function(z){var P=(z.prefixBoundary?M:"")+u(z,h);P?f.select(this).attr("d",P).style("stroke","none"):f.select(this).remove()})}function u(p,w){var h="",D=0,S=p.edgepaths.map(function(X,J){return J}),M=!0,L,R,z,P,I,U;function O(X){return Math.abs(X[1]-w[0][1])<.01}function G(X){return Math.abs(X[1]-w[2][1])<.01}function $(X){return Math.abs(X[0]-w[0][0])<.01}function tt(X){return Math.abs(X[0]-w[2][0])<.01}for(;S.length;){for(U=m.smoothopen(p.edgepaths[D],p.smoothing),h+=M?U:U.replace(/^M/,"L"),S.splice(S.indexOf(D),1),L=p.edgepaths[D][p.edgepaths[D].length-1],P=-1,z=0;z<4;z++){if(!L){l.log("Missing end?",D,p);break}for(O(L)&&!tt(L)?R=w[1]:$(L)?R=w[0]:G(L)?R=w[3]:tt(L)&&(R=w[2]),I=0;I<p.edgepaths.length;I++){var Z=p.edgepaths[I][0];Math.abs(L[0]-R[0])<.01?Math.abs(L[0]-Z[0])<.01&&(Z[1]-L[1])*(R[1]-Z[1])>=0&&(R=Z,P=I):Math.abs(L[1]-R[1])<.01?Math.abs(L[1]-Z[1])<.01&&(Z[0]-L[0])*(R[0]-Z[0])>=0&&(R=Z,P=I):l.log("endpt to newendpt is not vert. or horz.",L,R,Z)}if(L=R,P>=0)break;h+="L"+R}if(P===p.edgepaths.length){l.log("unclosed perimeter path");break}D=P,M=S.indexOf(D)===-1,M&&(D=S[0],h+="Z")}for(D=0;D<p.paths.length;D++)h+=m.smoothclosed(p.paths[D],p.smoothing);return h}function T(p,w,h,D,S){var M=l.ensureSingle(p,"g","contourlines"),L=S.showlines!==!1,R=S.showlabels,z=L&&R,P=V.createLines(M,L||R,w),I=V.createLineClip(M,z,h,D.trace.uid),U=p.selectAll("g.contourlabels").data(R?[0]:[]);if(U.exit().remove(),U.enter().append("g").classed("contourlabels",!0),R){var O=[],G=[];l.clearLocationCache();var $=V.labelFormatter(h,D),tt=m.tester.append("text").attr("data-notex",1).call(m.font,S.labelfont),Z=w[0].xaxis,X=w[0].yaxis,J=Z._length,st=X._length,at=Z.range,lt=X.range,F=l.aggNums(Math.min,null,D.x),H=l.aggNums(Math.max,null,D.x),et=l.aggNums(Math.min,null,D.y),q=l.aggNums(Math.max,null,D.y),W=Math.max(Z.c2p(F,!0),0),K=Math.min(Z.c2p(H,!0),J),nt=Math.max(X.c2p(q,!0),0),it=Math.min(X.c2p(et,!0),st),ot={};at[0]<at[1]?(ot.left=W,ot.right=K):(ot.left=K,ot.right=W),lt[0]<lt[1]?(ot.top=nt,ot.bottom=it):(ot.top=it,ot.bottom=nt),ot.middle=(ot.top+ot.bottom)/2,ot.center=(ot.left+ot.right)/2,O.push([[ot.left,ot.top],[ot.right,ot.top],[ot.right,ot.bottom],[ot.left,ot.bottom]]);var ct=Math.sqrt(J*J+st*st),bt=g.LABELDISTANCE*ct/Math.max(1,w.length/g.LABELINCREASE);P.each(function(ut){var pt=V.calcTextOpts(ut.level,$,tt,h);f.select(this).selectAll("path").each(function(){var yt=this,Tt=l.getVisibleSegment(yt,ot,pt.height/2);if(!!Tt&&!(Tt.len<(pt.width+pt.height)*g.LABELMIN))for(var kt=Math.min(Math.ceil(Tt.len/bt),g.LABELMAX),zt=0;zt<kt;zt++){var Rt=V.findBestTextLocation(yt,Tt,pt,G,ot);if(!Rt)break;V.addLabelData(Rt,pt,G,O)}})}),tt.remove(),V.drawLabels(U,G,h,I,z?O:null)}R&&!L&&P.remove()}V.createLines=function(p,w,h){var D=h[0].smoothing,S=p.selectAll("g.contourlevel").data(w?h:[]);if(S.exit().remove(),S.enter().append("g").classed("contourlevel",!0),w){var M=S.selectAll("path.openline").data(function(R){return R.pedgepaths||R.edgepaths});M.exit().remove(),M.enter().append("path").classed("openline",!0),M.attr("d",function(R){return m.smoothopen(R,D)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke");var L=S.selectAll("path.closedline").data(function(R){return R.ppaths||R.paths});L.exit().remove(),L.enter().append("path").classed("closedline",!0),L.attr("d",function(R){return m.smoothclosed(R,D)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke")}return S},V.createLineClip=function(p,w,h,D){var S=h._fullLayout._clips,M=w?"clipline"+D:null,L=S.selectAll("#"+M).data(w?[0]:[]);return L.exit().remove(),L.enter().append("clipPath").classed("contourlineclip",!0).attr("id",M),m.setClipUrl(p,M,h),L},V.labelFormatter=function(p,w){var h=p._fullLayout,D=w.trace,S=D.contours,M={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(S.labelformat)M.tickformat=S.labelformat,i(M,h);else{var L=x.extractOpts(D);if(L&&L.colorbar&&L.colorbar._axis)M=L.colorbar._axis;else{if(S.type==="constraint"){var R=S.value;Array.isArray(R)?M.range=[R[0],R[R.length-1]]:M.range=[R,R]}else M.range=[S.start,S.end],M.nticks=(S.end-S.start)/S.size;M.range[0]===M.range[1]&&(M.range[1]+=M.range[0]||1),M.nticks||(M.nticks=1e3),i(M,h),a.prepTicks(M),M._tmin=null,M._tmax=null}}return function(z){return a.tickText(M,z).text}},V.calcTextOpts=function(p,w,h,D){var S=w(p);h.text(S).call(t.convertToTspans,D);var M=h.node(),L=m.bBox(M,!0);return{text:S,width:L.width,height:L.height,fontSize:+M.style["font-size"].replace("px",""),level:p,dy:(L.top+L.bottom)/2}},V.findBestTextLocation=function(p,w,h,D,S){var M=h.width,L,R,z,P,I;w.isClosed?(R=w.len/b.INITIALSEARCHPOINTS,L=w.min+R/2,z=w.max):(R=(w.len-M)/(b.INITIALSEARCHPOINTS+1),L=w.min+R+M/2,z=w.max-(R+M)/2);for(var U=1/0,O=0;O<b.ITERATIONS;O++){for(var G=L;G<z;G+=R){var $=l.getTextLocation(p,w.total,G,M),tt=c($,h,D,S);tt<U&&(U=tt,I=$,P=G)}if(U>b.MAXCOST*2)break;O&&(R/=2),L=P-R/2,z=L+R*1.5}if(U<=b.MAXCOST)return I};function c(p,w,h,D){var S=w.width/2,M=w.height/2,L=p.x,R=p.y,z=p.theta,P=Math.cos(z)*S,I=Math.sin(z)*S,U=(L>D.center?D.right-L:L-D.left)/(P+Math.abs(Math.sin(z)*M)),O=(R>D.middle?D.bottom-R:R-D.top)/(Math.abs(I)+Math.cos(z)*M);if(U<1||O<1)return 1/0;var G=b.EDGECOST*(1/(U-1)+1/(O-1));G+=b.ANGLECOST*z*z;for(var $=L-P,tt=R-I,Z=L+P,X=R+I,J=0;J<h.length;J++){var st=h[J],at=Math.cos(st.theta)*st.width/2,lt=Math.sin(st.theta)*st.width/2,F=l.segmentDistance($,tt,Z,X,st.x-at,st.y-lt,st.x+at,st.y+lt)*2/(w.height+st.height),H=st.level===w.level,et=H?b.SAMELEVELDISTANCE:1;if(F<=et)return 1/0;var q=b.NEIGHBORCOST*(H?b.SAMELEVELFACTOR:1);G+=q/(F-et)}return G}V.addLabelData=function(p,w,h,D){var S=w.fontSize,M=w.width+S/3,L=Math.max(0,w.height-S/3),R=p.x,z=p.y,P=p.theta,I=Math.sin(P),U=Math.cos(P),O=function($,tt){return[R+$*U-tt*I,z+$*I+tt*U]},G=[O(-M/2,-L/2),O(-M/2,L/2),O(M/2,L/2),O(M/2,-L/2)];h.push({text:w.text,x:R,y:z,dy:w.dy,theta:P,level:w.level,width:M,height:L}),D.push(G)},V.drawLabels=function(p,w,h,D,S){var M=p.selectAll("text").data(w,function(P){return P.text+","+P.x+","+P.y+","+P.theta});if(M.exit().remove(),M.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(P){var I=P.x+Math.sin(P.theta)*P.dy,U=P.y-Math.cos(P.theta)*P.dy;f.select(this).text(P.text).attr({x:I,y:U,transform:"rotate("+180*P.theta/Math.PI+" "+I+" "+U+")"}).call(t.convertToTspans,h)}),S){for(var L="",R=0;R<S.length;R++)L+="M"+S[R].join("L")+"Z";var z=l.ensureSingle(D,"path","");z.attr("d",L)}};function A(p,w,h,D,S){var M=D.trace,L=h._fullLayout._clips,R="clip"+M.uid,z=L.selectAll("#"+R).data(M.connectgaps?[]:[0]);if(z.enter().append("clipPath").classed("contourclip",!0).attr("id",R),z.exit().remove(),M.connectgaps===!1){var P={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:w.xaxis,yaxis:w.yaxis,x:D.x,y:D.y,z:k(D),smoothing:0};n([P]),d([P]),y([P],{type:"levels"});var I=l.ensureSingle(z,"path","");I.attr("d",(P.prefixBoundary?"M"+S.join("L")+"Z":"")+u(P,S))}else R=null;m.setClipUrl(p,R,h)}function k(p){var w=p.trace._emptypoints,h=[],D=p.z.length,S=p.z[0].length,M,L=[],R;for(M=0;M<S;M++)L.push(1);for(M=0;M<D;M++)h.push(L.slice());for(M=0;M<w.length;M++)R=w[M],h[R[0]][R[1]]=0;return p.zmask=h,h}},{"../../components/colorscale":379,"../../components/drawing":389,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"../../plots/cartesian/set_convert":585,"../heatmap/plot":813,"./close_boundaries":746,"./constants":748,"./convert_to_constraints":752,"./empty_pathinfo":754,"./find_all_paths":756,"./make_crossings":761,"@plotly/d3":58}],763:[function(e,B,V){var f=e("../../plots/cartesian/axes"),l=e("../../lib");B.exports=function(t,a){var i=t.contours;if(t.autocontour){var r=t.zmin,n=t.zmax;(t.zauto||r===void 0)&&(r=l.aggNums(Math.min,null,a)),(t.zauto||n===void 0)&&(n=l.aggNums(Math.max,null,a));var d=m(r,n,t.ncontours);i.size=d.dtick,i.start=f.tickFirst(d),d.range.reverse(),i.end=f.tickFirst(d),i.start===r&&(i.start+=i.size),i.end===n&&(i.end-=i.size),i.start>i.end&&(i.start=i.end=(i.start+i.end)/2),t._input.contours||(t._input.contours={}),l.extendFlat(t._input.contours,{start:i.start,end:i.end,size:i.size}),t._input.autocontour=!0}else if(i.type!=="constraint"){var s=i.start,o=i.end,y=t._input.contours;if(s>o&&(i.start=y.start=o,o=i.end=y.end=s,s=i.start),!(i.size>0)){var g;s===o?g=1:g=m(s,o,t.ncontours).dtick,y.size=i.size=g}}};function m(x,t,a){var i={type:"linear",range:[x,t]};return f.autoTicks(i,(t-x)/(a||15)),i}},{"../../lib":515,"../../plots/cartesian/axes":566}],764:[function(e,B,V){var f=e("@plotly/d3"),l=e("../../components/drawing"),m=e("../heatmap/style"),x=e("./make_color_map");B.exports=function(a){var i=f.select(a).selectAll("g.contour");i.style("opacity",function(r){return r[0].trace.opacity}),i.each(function(r){var n=f.select(this),d=r[0].trace,s=d.contours,o=d.line,y=s.size||1,g=s.start,b=s.type==="constraint",v=!b&&s.coloring==="lines",_=!b&&s.coloring==="fill",u=v||_?x(d):null;n.selectAll("g.contourlevel").each(function(A){f.select(this).selectAll("path").call(l.lineGroupStyle,o.width,v?u(A.level):o.color,o.dash)});var T=s.labelfont;if(n.selectAll("g.contourlabels text").each(function(A){l.font(f.select(this),{family:T.family,size:T.size,color:T.color||(v?u(A.level):o.color)})}),b)n.selectAll("g.contourfill path").style("fill",d.fillcolor);else if(_){var c;n.selectAll("g.contourfill path").style("fill",function(A){return c===void 0&&(c=A.level),u(A.level+.5*y)}),c===void 0&&(c=g),n.selectAll("g.contourbg path").style("fill",u(c-.5*y))}}),m(a)}},{"../../components/drawing":389,"../heatmap/style":814,"./make_color_map":760,"@plotly/d3":58}],765:[function(e,B,V){var f=e("../../components/colorscale/defaults"),l=e("./label_defaults");B.exports=function(x,t,a,i,r){var n=a("contours.coloring"),d,s="";n==="fill"&&(d=a("contours.showlines")),d!==!1&&(n!=="lines"&&(s=a("line.color","#000")),a("line.width",.5),a("line.dash")),n!=="none"&&(x.showlegend!==!0&&(t.showlegend=!1),t._dfltShowLegend=!1,f(x,t,i,a,{prefix:"",cLetter:"z"})),a("line.smoothing"),l(a,i,s,r)}},{"../../components/colorscale/defaults":377,"./label_defaults":759}],766:[function(e,B,V){var f=e("../heatmap/attributes"),l=e("../contour/attributes"),m=e("../../components/colorscale/attributes"),x=e("../../lib/extend").extendFlat,t=l.contours;B.exports=x({carpet:{valType:"string",editType:"calc"},z:f.z,a:f.x,a0:f.x0,da:f.dx,b:f.y,b0:f.y0,db:f.dy,text:f.text,hovertext:f.hovertext,transpose:f.transpose,atype:f.xtype,btype:f.ytype,fillcolor:l.fillcolor,autocontour:l.autocontour,ncontours:l.ncontours,contours:{type:t.type,start:t.start,end:t.end,size:t.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:t.showlines,showlabels:t.showlabels,labelfont:t.labelfont,labelformat:t.labelformat,operation:t.operation,value:t.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:l.line.color,width:l.line.width,dash:l.line.dash,smoothing:l.line.smoothing,editType:"plot"},transforms:void 0},m("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../contour/attributes":744,"../heatmap/attributes":801}],767:[function(e,B,V){var f=e("../../components/colorscale/calc"),l=e("../../lib"),m=e("../heatmap/convert_column_xyz"),x=e("../heatmap/clean_2d_array"),t=e("../heatmap/interp2d"),a=e("../heatmap/find_empties"),i=e("../heatmap/make_bound_array"),r=e("./defaults"),n=e("../carpet/lookup_carpetid"),d=e("../contour/set_contours");B.exports=function(y,g){var b=g._carpetTrace=n(y,g);if(!(!b||!b.visible||b.visible==="legendonly")){if(!g.a||!g.b){var v=y.data[b.index],_=y.data[g.index];_.a||(_.a=v.a),_.b||(_.b=v.b),r(_,g,g._defaultColor,y._fullLayout)}var u=s(y,g);return d(g,g._z),u}};function s(o,y){var g=y._carpetTrace,b=g.aaxis,v=g.baxis,_,u,T,c,A,k,p;b._minDtick=0,v._minDtick=0,l.isArray1D(y.z)&&m(y,b,v,"a","b",["z"]),_=y._a=y._a||y.a,c=y._b=y._b||y.b,_=_?b.makeCalcdata(y,"_a"):[],c=c?v.makeCalcdata(y,"_b"):[],u=y.a0||0,T=y.da||1,A=y.b0||0,k=y.db||1,p=y._z=x(y._z||y.z,y.transpose),y._emptypoints=a(p),t(p,y._emptypoints);var w=l.maxRowLength(p),h=y.xtype==="scaled"?"":_,D=i(y,h,u,T,w,b),S=y.ytype==="scaled"?"":c,M=i(y,S,A,k,p.length,v),L={a:D,b:M,z:p};return y.contours.type==="levels"&&y.contours.coloring!=="none"&&f(o,y,{vals:p,containerStr:"",cLetter:"z"}),[L]}},{"../../components/colorscale/calc":375,"../../lib":515,"../carpet/lookup_carpetid":717,"../contour/set_contours":763,"../heatmap/clean_2d_array":803,"../heatmap/convert_column_xyz":805,"../heatmap/find_empties":807,"../heatmap/interp2d":810,"../heatmap/make_bound_array":812,"./defaults":768}],768:[function(e,B,V){var f=e("../../lib"),l=e("../heatmap/xyz_defaults"),m=e("./attributes"),x=e("../contour/constraint_defaults"),t=e("../contour/contours_defaults"),a=e("../contour/style_defaults");B.exports=function(r,n,d,s){function o(v,_){return f.coerce(r,n,m,v,_)}function y(v){return f.coerce2(r,n,m,v)}if(o("carpet"),r.a&&r.b){var g=l(r,n,o,s,"a","b");if(!g){n.visible=!1;return}o("text");var b=o("contours.type")==="constraint";b?x(r,n,o,s,d,{hasHover:!1}):(t(r,n,o,y),a(r,n,o,s,{hasHover:!1}))}else n._defaultColor=d,n._length=null}},{"../../lib":515,"../contour/constraint_defaults":749,"../contour/contours_defaults":751,"../contour/style_defaults":765,"../heatmap/xyz_defaults":816,"./attributes":766}],769:[function(e,B,V){B.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../contour/colorbar"),calc:e("./calc"),plot:e("./plot"),style:e("../contour/style"),moduleType:"trace",name:"contourcarpet",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{}}},{"../../plots/cartesian":578,"../contour/colorbar":747,"../contour/style":764,"./attributes":766,"./calc":767,"./defaults":768,"./plot":770}],770:[function(e,B,V){var f=e("@plotly/d3"),l=e("../carpet/map_1d_array"),m=e("../carpet/makepath"),x=e("../../components/drawing"),t=e("../../lib"),a=e("../contour/make_crossings"),i=e("../contour/find_all_paths"),r=e("../contour/plot"),n=e("../contour/constants"),d=e("../contour/convert_to_constraints"),s=e("../contour/empty_pathinfo"),o=e("../contour/close_boundaries"),y=e("../carpet/lookup_carpetid"),g=e("../carpet/axis_aligned_line");B.exports=function(h,D,S,M){var L=D.xaxis,R=D.yaxis;t.makeTraceGroups(M,S,"contour").each(function(z){var P=f.select(this),I=z[0],U=I.trace,O=U._carpetTrace=y(h,U),G=h.calcdata[O.index][0];if(!O.visible||O.visible==="legendonly")return;var $=I.a,tt=I.b,Z=U.contours,X=s(Z,D,I),J=Z.type==="constraint",st=Z._operation,at=J?st==="="?"lines":"fill":Z.coloring;function lt(bt){var ut=O.ab2xy(bt[0],bt[1],!0);return[L.c2p(ut[0]),R.c2p(ut[1])]}var F=[[$[0],tt[tt.length-1]],[$[$.length-1],tt[tt.length-1]],[$[$.length-1],tt[0]],[$[0],tt[0]]];a(X);var H=($[$.length-1]-$[0])*1e-8,et=(tt[tt.length-1]-tt[0])*1e-8;i(X,H,et);var q=X;Z.type==="constraint"&&(q=d(X,st)),b(X,lt);var W,K,nt,it,ot=[];for(it=G.clipsegments.length-1;it>=0;it--)W=G.clipsegments[it],K=l([],W.x,L.c2p),nt=l([],W.y,R.c2p),K.reverse(),nt.reverse(),ot.push(m(K,nt,W.bicubic));var ct="M"+ot.join("L")+"Z";A(P,G.clipsegments,L,R,J,at),k(U,P,L,R,q,F,lt,O,G,at,ct),v(P,X,h,I,Z,D,O),x.setClipUrl(P,O._clipPathId,h)})};function b(w,h){var D,S,M,L,R,z,P,I,U;for(D=0;D<w.length;D++){for(L=w[D],R=L.pedgepaths=[],z=L.ppaths=[],S=0;S<L.edgepaths.length;S++){for(U=L.edgepaths[S],P=[],M=0;M<U.length;M++)P[M]=h(U[M]);R.push(P)}for(S=0;S<L.paths.length;S++){for(U=L.paths[S],I=[],M=0;M<U.length;M++)I[M]=h(U[M]);z.push(I)}}}function v(w,h,D,S,M,L,R){var z=t.ensureSingle(w,"g","contourlines"),P=M.showlines!==!1,I=M.showlabels,U=P&&I,O=r.createLines(z,P||I,h),G=r.createLineClip(z,U,D,S.trace.uid),$=w.selectAll("g.contourlabels").data(I?[0]:[]);if($.exit().remove(),$.enter().append("g").classed("contourlabels",!0),I){var tt=L.xaxis,Z=L.yaxis,X=tt._length,J=Z._length,st=[[[0,0],[X,0],[X,J],[0,J]]],at=[];t.clearLocationCache();var lt=r.labelFormatter(D,S),F=x.tester.append("text").attr("data-notex",1).call(x.font,M.labelfont),H={left:0,right:X,center:X/2,top:0,bottom:J,middle:J/2},et=Math.sqrt(X*X+J*J),q=n.LABELDISTANCE*et/Math.max(1,h.length/n.LABELINCREASE);O.each(function(W){var K=r.calcTextOpts(W.level,lt,F,D);f.select(this).selectAll("path").each(function(nt){var it=this,ot=t.getVisibleSegment(it,H,K.height/2);if(!!ot&&(_(it,nt,W,ot,R,K.height),!(ot.len<(K.width+K.height)*n.LABELMIN)))for(var ct=Math.min(Math.ceil(ot.len/q),n.LABELMAX),bt=0;bt<ct;bt++){var ut=r.findBestTextLocation(it,ot,K,at,H);if(!ut)break;r.addLabelData(ut,K,at,st)}})}),F.remove(),r.drawLabels($,at,D,G,U?st:null)}I&&!P&&O.remove()}function _(w,h,D,S,M,L){for(var R,z=0;z<D.pedgepaths.length;z++)h===D.pedgepaths[z]&&(R=D.edgepaths[z]);if(!R)return;var P=M.a[0],I=M.a[M.a.length-1],U=M.b[0],O=M.b[M.b.length-1];function G(J,st){var at=0,lt,F=.1;return(Math.abs(J[0]-P)<F||Math.abs(J[0]-I)<F)&&(lt=T(M.dxydb_rough(J[0],J[1],F)),at=Math.max(at,L*c(st,lt)/2)),(Math.abs(J[1]-U)<F||Math.abs(J[1]-O)<F)&&(lt=T(M.dxyda_rough(J[0],J[1],F)),at=Math.max(at,L*c(st,lt)/2)),at}var $=u(w,0,1),tt=u(w,S.total,S.total-1),Z=G(R[0],$),X=S.total-G(R[R.length-1],tt);S.min<Z&&(S.min=Z),S.max>X&&(S.max=X),S.len=S.max-S.min}function u(w,h,D){var S=w.getPointAtLength(h),M=w.getPointAtLength(D),L=M.x-S.x,R=M.y-S.y,z=Math.sqrt(L*L+R*R);return[L/z,R/z]}function T(w){var h=Math.sqrt(w[0]*w[0]+w[1]*w[1]);return[w[0]/h,w[1]/h]}function c(w,h){var D=Math.abs(w[0]*h[0]+w[1]*h[1]),S=Math.sqrt(1-D*D);return S/D}function A(w,h,D,S,M,L){var R,z,P,I,U=t.ensureSingle(w,"g","contourbg"),O=U.selectAll("path").data(L==="fill"&&!M?[0]:[]);O.enter().append("path"),O.exit().remove();var G=[];for(I=0;I<h.length;I++)R=h[I],z=l([],R.x,D.c2p),P=l([],R.y,S.c2p),G.push(m(z,P,R.bicubic));O.attr("d","M"+G.join("L")+"Z").style("stroke","none")}function k(w,h,D,S,M,L,R,z,P,I,U){var O=I==="fill";O&&o(M,w.contours);var G=t.ensureSingle(h,"g","contourfill"),$=G.selectAll("path").data(O?M:[]);$.enter().append("path"),$.exit().remove(),$.each(function(tt){var Z=(tt.prefixBoundary?U:"")+p(w,tt,L,R,z,P,D,S);Z?f.select(this).attr("d",Z).style("stroke","none"):f.select(this).remove()})}function p(w,h,D,S,M,L,R,z){var P,I="",U=h.edgepaths.map(function(nt,it){return it}),O=!0,G,$,tt,Z,X,J,st=Math.abs(D[0][0]-D[2][0])*1e-4,at=Math.abs(D[0][1]-D[2][1])*1e-4;function lt(nt){return Math.abs(nt[1]-D[0][1])<at}function F(nt){return Math.abs(nt[1]-D[2][1])<at}function H(nt){return Math.abs(nt[0]-D[0][0])<st}function et(nt){return Math.abs(nt[0]-D[2][0])<st}function q(nt,it){var ot,ct,bt,ut,pt="";for(lt(nt)&&!et(nt)||F(nt)&&!H(nt)?(ut=M.aaxis,bt=g(M,L,[nt[0],it[0]],.5*(nt[1]+it[1]))):(ut=M.baxis,bt=g(M,L,.5*(nt[0]+it[0]),[nt[1],it[1]])),ot=1;ot<bt.length;ot++)for(pt+=ut.smoothing?"C":"L",ct=0;ct<bt[ot].length;ct++){var yt=bt[ot][ct];pt+=[R.c2p(yt[0]),z.c2p(yt[1])]+" "}return pt}for(P=0,G=null;U.length;){var W=h.edgepaths[P][0];for(G&&(I+=q(G,W)),J=x.smoothopen(h.edgepaths[P].map(S),h.smoothing),I+=O?J:J.replace(/^M/,"L"),U.splice(U.indexOf(P),1),G=h.edgepaths[P][h.edgepaths[P].length-1],Z=-1,tt=0;tt<4;tt++){if(!G){t.log("Missing end?",P,h);break}for(lt(G)&&!et(G)?$=D[1]:H(G)?$=D[0]:F(G)?$=D[3]:et(G)&&($=D[2]),X=0;X<h.edgepaths.length;X++){var K=h.edgepaths[X][0];Math.abs(G[0]-$[0])<st?Math.abs(G[0]-K[0])<st&&(K[1]-G[1])*($[1]-K[1])>=0&&($=K,Z=X):Math.abs(G[1]-$[1])<at?Math.abs(G[1]-K[1])<at&&(K[0]-G[0])*($[0]-K[0])>=0&&($=K,Z=X):t.log("endpt to newendpt is not vert. or horz.",G,$,K)}if(Z>=0)break;I+=q(G,$),G=$}if(Z===h.edgepaths.length){t.log("unclosed perimeter path");break}P=Z,O=U.indexOf(P)===-1,O&&(P=U[0],I+=q(G,$)+"Z",G=null)}for(P=0;P<h.paths.length;P++)I+=x.smoothclosed(h.paths[P].map(S),h.smoothing);return I}},{"../../components/drawing":389,"../../lib":515,"../carpet/axis_aligned_line":701,"../carpet/lookup_carpetid":717,"../carpet/makepath":718,"../carpet/map_1d_array":719,"../contour/close_boundaries":746,"../contour/constants":748,"../contour/convert_to_constraints":752,"../contour/empty_pathinfo":754,"../contour/find_all_paths":756,"../contour/make_crossings":761,"../contour/plot":762,"@plotly/d3":58}],771:[function(e,B,V){var f=e("../../components/colorscale/attributes"),l=e("../../plots/template_attributes").hovertemplateAttrs,m=e("../../plots/attributes"),x=e("../scattermapbox/attributes"),t=e("../../lib/extend").extendFlat;B.exports=t({lon:x.lon,lat:x.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:x.text,hovertext:x.hovertext,hoverinfo:t({},m.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:l(),showlegend:t({},m.showlegend,{dflt:!1})},f("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scattermapbox/attributes":1002}],772:[function(e,B,V){var f=e("fast-isnumeric"),l=e("../../lib").isArrayOrTypedArray,m=e("../../constants/numerical").BADNUM,x=e("../../components/colorscale/calc"),t=e("../../lib")._;B.exports=function(i,r){for(var n=r._length,d=new Array(n),s=r.z,o=l(s)&&s.length,y=0;y<n;y++){var g=d[y]={},b=r.lon[y],v=r.lat[y];if(g.lonlat=f(b)&&f(v)?[+b,+v]:[m,m],o){var _=s[y];g.z=f(_)?_:m}}return x(i,r,{vals:o?s:[0,1],containerStr:"",cLetter:"z"}),n&&(d[0].t={labels:{lat:t(i,"lat:")+" ",lon:t(i,"lon:")+" "}}),d}},{"../../components/colorscale/calc":375,"../../constants/numerical":491,"../../lib":515,"fast-isnumeric":190}],773:[function(e,B,V){var f=e("fast-isnumeric"),l=e("../../lib"),m=e("../../components/color"),x=e("../../components/colorscale"),t=e("../../constants/numerical").BADNUM,a=e("../../lib/geojson_utils").makeBlank;B.exports=function(r){var n=r[0].trace,d=n.visible===!0&&n._length!==0,s={layout:{visibility:"none"},paint:{}},o=n._opts={heatmap:s,geojson:a()};if(!d)return o;var y=[],g,b=n.z,v=n.radius,_=l.isArrayOrTypedArray(b)&&b.length,u=l.isArrayOrTypedArray(v);for(g=0;g<r.length;g++){var T=r[g],c=T.lonlat;if(c[0]!==t){var A={};if(_){var k=T.z;A.z=k!==t?k:0}u&&(A.r=f(v[g])&&v[g]>0?+v[g]:0),y.push({type:"Feature",geometry:{type:"Point",coordinates:c},properties:A})}}var p=x.extractOpts(n),w=p.reversescale?x.flipScale(p.colorscale):p.colorscale,h=w[0][1],D=m.opacity(h)<1?h:m.addOpacity(h,0),S=["interpolate",["linear"],["heatmap-density"],0,D];for(g=1;g<w.length;g++)S.push(w[g][0],w[g][1]);var M=["interpolate",["linear"],["get","z"],p.min,0,p.max,1];return l.extendFlat(o.heatmap.paint,{"heatmap-weight":_?M:1/(p.max-p.min),"heatmap-color":S,"heatmap-radius":u?{type:"identity",property:"r"}:n.radius,"heatmap-opacity":n.opacity}),o.geojson={type:"FeatureCollection",features:y},o.heatmap.layout.visibility="visible",o}},{"../../components/color":367,"../../components/colorscale":379,"../../constants/numerical":491,"../../lib":515,"../../lib/geojson_utils":509,"fast-isnumeric":190}],774:[function(e,B,V){var f=e("../../lib"),l=e("../../components/colorscale/defaults"),m=e("./attributes");B.exports=function(t,a,i,r){function n(y,g){return f.coerce(t,a,m,y,g)}var d=n("lon")||[],s=n("lat")||[],o=Math.min(d.length,s.length);if(!o){a.visible=!1;return}a._length=o,n("z"),n("radius"),n("below"),n("text"),n("hovertext"),n("hovertemplate"),l(t,a,r,n,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":377,"../../lib":515,"./attributes":771}],775:[function(e,B,V){B.exports=function(l,m){return l.lon=m.lon,l.lat=m.lat,l.z=m.z,l}},{}],776:[function(e,B,V){var f=e("../../plots/cartesian/axes"),l=e("../scattermapbox/hover").hoverPoints,m=e("../scattermapbox/hover").getExtraText;B.exports=function(t,a,i){var r=l(t,a,i);if(!!r){var n=r[0],d=n.cd,s=d[0].trace,o=d[n.index];if(delete n.color,"z"in o){var y=n.subplot.mockAxis;n.z=o.z,n.zLabel=f.tickText(y,y.c2l(o.z),"hover").text}return n.extraText=m(s,o,d[0].t.labels),[n]}}},{"../../plots/cartesian/axes":566,"../scattermapbox/hover":1007}],777:[function(e,B,V){B.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../heatmap/colorbar"),formatLabels:e("../scattermapbox/format_labels"),calc:e("./calc"),plot:e("./plot"),hoverPoints:e("./hover"),eventData:e("./event_data"),getBelow:function(f,l){for(var m=l.getMapLayers(),x=0;x<m.length;x++){var t=m[x],a=t.id;if(t.type==="symbol"&&typeof a=="string"&&a.indexOf("plotly-")===-1)return a}},moduleType:"trace",name:"densitymapbox",basePlotModule:e("../../plots/mapbox"),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},{"../../plots/mapbox":622,"../heatmap/colorbar":804,"../scattermapbox/format_labels":1006,"./attributes":771,"./calc":772,"./defaults":774,"./event_data":775,"./hover":776,"./plot":778}],778:[function(e,B,V){var f=e("./convert"),l=e("../../plots/mapbox/constants").traceLayerPrefix;function m(t,a){this.type="densitymapbox",this.subplot=t,this.uid=a,this.sourceId="source-"+a,this.layerList=[["heatmap",l+a+"-heatmap"]],this.below=null}var x=m.prototype;x.update=function(t){var a=this.subplot,i=this.layerList,r=f(t),n=a.belowLookup["trace-"+this.uid];a.map.getSource(this.sourceId).setData(r.geojson),n!==this.below&&(this._removeLayers(),this._addLayers(r,n),this.below=n);for(var d=0;d<i.length;d++){var s=i[d],o=s[0],y=s[1],g=r[o];a.setOptions(y,"setLayoutProperty",g.layout),g.layout.visibility==="visible"&&a.setOptions(y,"setPaintProperty",g.paint)}},x._addLayers=function(t,a){for(var i=this.subplot,r=this.layerList,n=this.sourceId,d=0;d<r.length;d++){var s=r[d],o=s[0],y=t[o];i.addLayer({type:o,id:s[1],source:n,layout:y.layout,paint:y.paint},a)}},x._removeLayers=function(){for(var t=this.subplot.map,a=this.layerList,i=a.length-1;i>=0;i--)t.removeLayer(a[i][1])},x.dispose=function(){var t=this.subplot.map;this._removeLayers(),t.removeSource(this.sourceId)},B.exports=function(a,i){var r=i[0].trace,n=new m(a,r.uid),d=n.sourceId,s=f(i),o=n.below=a.belowLookup["trace-"+r.uid];return a.map.addSource(d,{type:"geojson",data:s.geojson}),n._addLayers(s,o),n}},{"../../plots/mapbox/constants":620,"./convert":773}],779:[function(e,B,V){var f=e("../../lib");B.exports=function(m,x){for(var t=0;t<m.length;t++)m[t].i=t;f.mergeArray(x.text,m,"tx"),f.mergeArray(x.hovertext,m,"htx");var a=x.marker;if(a){f.mergeArray(a.opacity,m,"mo"),f.mergeArray(a.color,m,"mc");var i=a.line;i&&(f.mergeArray(i.color,m,"mlc"),f.mergeArrayCastPositive(i.width,m,"mlw"))}}},{"../../lib":515}],780:[function(e,B,V){var f=e("../bar/attributes"),l=e("../scatter/attributes").line,m=e("../../plots/attributes"),x=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,t=e("../../plots/template_attributes").hovertemplateAttrs,a=e("../../plots/template_attributes").texttemplateAttrs,i=e("./constants"),r=e("../../lib/extend").extendFlat,n=e("../../components/color");B.exports={x:f.x,x0:f.x0,dx:f.dx,y:f.y,y0:f.y0,dy:f.dy,xperiod:f.xperiod,yperiod:f.yperiod,xperiod0:f.xperiod0,yperiod0:f.yperiod0,xperiodalignment:f.xperiodalignment,yperiodalignment:f.yperiodalignment,xhoverformat:x("x"),yhoverformat:x("y"),hovertext:f.hovertext,hovertemplate:t({},{keys:i.eventDataKeys}),hoverinfo:r({},m.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:a({editType:"plot"},{keys:i.eventDataKeys.concat(["label","value"])}),text:f.text,textposition:f.textposition,insidetextanchor:r({},f.insidetextanchor,{dflt:"middle"}),textangle:r({},f.textangle,{dflt:0}),textfont:f.textfont,insidetextfont:f.insidetextfont,outsidetextfont:f.outsidetextfont,constraintext:f.constraintext,cliponaxis:f.cliponaxis,orientation:r({},f.orientation,{}),offset:r({},f.offset,{arrayOk:!1}),width:r({},f.width,{arrayOk:!1}),marker:d(),connector:{fillcolor:{valType:"color",editType:"style"},line:{color:r({},l.color,{dflt:n.defaultLine}),width:r({},l.width,{dflt:0,editType:"plot"}),dash:l.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:f.offsetgroup,alignmentgroup:f.alignmentgroup};function d(){var s=r({},f.marker);return delete s.pattern,s}},{"../../components/color":367,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../bar/attributes":657,"../scatter/attributes":936,"./constants":782}],781:[function(e,B,V){var f=e("../../plots/cartesian/axes"),l=e("../../plots/cartesian/align_period"),m=e("./arrays_to_calcdata"),x=e("../scatter/calc_selection"),t=e("../../constants/numerical").BADNUM;B.exports=function(r,n){var d=f.getFromId(r,n.xaxis||"x"),s=f.getFromId(r,n.yaxis||"y"),o,y,g,b,v,_,u,T;n.orientation==="h"?(o=d.makeCalcdata(n,"x"),g=s.makeCalcdata(n,"y"),b=l(n,s,"y",g),v=!!n.yperiodalignment,_="y"):(o=s.makeCalcdata(n,"y"),g=d.makeCalcdata(n,"x"),b=l(n,d,"x",g),v=!!n.xperiodalignment,_="x"),y=b.vals;var c=Math.min(y.length,o.length),A=new Array(c);for(n._base=[],u=0;u<c;u++){o[u]<0&&(o[u]=t);var k=!1;o[u]!==t&&u+1<c&&o[u+1]!==t&&(k=!0),T=A[u]={p:y[u],s:o[u],cNext:k},n._base[u]=-.5*T.s,v&&(A[u].orig_p=g[u],A[u][_+"End"]=b.ends[u],A[u][_+"Start"]=b.starts[u]),n.ids&&(T.id=String(n.ids[u])),u===0&&(A[0].vTotal=0),A[0].vTotal+=a(T.s),T.begR=a(T.s)/a(A[0].s)}var p;for(u=0;u<c;u++)T=A[u],T.s!==t&&(T.sumR=T.s/A[0].vTotal,T.difR=p!==void 0?T.s/p:1,p=T.s);return m(A,n),x(A,n),A};function a(i){return i===t?0:i}},{"../../constants/numerical":491,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"../scatter/calc_selection":938,"./arrays_to_calcdata":779}],782:[function(e,B,V){B.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},{}],783:[function(e,B,V){var f=e("../bar/cross_trace_calc").setGroupPositions;B.exports=function(m,x){var t=m._fullLayout,a=m._fullData,i=m.calcdata,r=x.xaxis,n=x.yaxis,d=[],s=[],o=[],y,g;for(g=0;g<a.length;g++){var b=a[g],v=b.orientation==="h";b.visible===!0&&b.xaxis===r._id&&b.yaxis===n._id&&b.type==="funnel"&&(y=i[g],v?o.push(y):s.push(y),d.push(y))}var _={mode:t.funnelmode,norm:t.funnelnorm,gap:t.funnelgap,groupgap:t.funnelgroupgap};for(f(m,r,n,s,_),f(m,n,r,o,_),g=0;g<d.length;g++){y=d[g];for(var u=0;u<y.length;u++)u+1<y.length&&(y[u].nextP0=y[u+1].p0,y[u].nextS0=y[u+1].s0,y[u].nextP1=y[u+1].p1,y[u].nextS1=y[u+1].s1)}}},{"../bar/cross_trace_calc":660}],784:[function(e,B,V){var f=e("../../lib"),l=e("../bar/defaults").handleGroupingDefaults,m=e("../bar/defaults").handleText,x=e("../scatter/xy_defaults"),t=e("../scatter/period_defaults"),a=e("./attributes"),i=e("../../components/color");function r(s,o,y,g){function b(k,p){return f.coerce(s,o,a,k,p)}var v=x(s,o,g,b);if(!v){o.visible=!1;return}t(s,o,g,b),b("xhoverformat"),b("yhoverformat"),b("orientation",o.y&&!o.x?"v":"h"),b("offset"),b("width");var _=b("text");b("hovertext"),b("hovertemplate");var u=b("textposition");m(s,o,g,b,u,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),o.textposition!=="none"&&!o.texttemplate&&b("textinfo",Array.isArray(_)?"text+value":"value");var T=b("marker.color",y);b("marker.line.color",i.defaultLine),b("marker.line.width");var c=b("connector.visible");if(c){b("connector.fillcolor",n(T));var A=b("connector.line.width");A&&(b("connector.line.color"),b("connector.line.dash"))}}function n(s){var o=f.isArrayOrTypedArray(s)?"#000":s;return i.addOpacity(o,.5*i.opacity(o))}function d(s,o){var y,g;function b(_){return f.coerce(g._input,g,a,_)}if(o.funnelmode==="group")for(var v=0;v<s.length;v++)g=s[v],y=g._input,l(y,g,o,b)}B.exports={supplyDefaults:r,crossTraceDefaults:d}},{"../../components/color":367,"../../lib":515,"../bar/defaults":661,"../scatter/period_defaults":956,"../scatter/xy_defaults":963,"./attributes":780}],785:[function(e,B,V){B.exports=function(l,m){return l.x="xVal"in m?m.xVal:m.x,l.y="yVal"in m?m.yVal:m.y,"percentInitial"in m&&(l.percentInitial=m.percentInitial),"percentPrevious"in m&&(l.percentPrevious=m.percentPrevious),"percentTotal"in m&&(l.percentTotal=m.percentTotal),m.xa&&(l.xaxis=m.xa),m.ya&&(l.yaxis=m.ya),l}},{}],786:[function(e,B,V){var f=e("../../components/color").opacity,l=e("../bar/hover").hoverOnBars,m=e("../../lib").formatPercent;B.exports=function(a,i,r,n,d){var s=l(a,i,r,n,d);if(!!s){var o=s.cd,y=o[0].trace,g=y.orientation==="h",b=s.index,v=o[b],_=g?"x":"y";s[_+"LabelVal"]=v.s,s.percentInitial=v.begR,s.percentInitialLabel=m(v.begR,1),s.percentPrevious=v.difR,s.percentPreviousLabel=m(v.difR,1),s.percentTotal=v.sumR,s.percentTotalLabel=m(v.sumR,1);var u=v.hi||y.hoverinfo,T=[];if(u&&u!=="none"&&u!=="skip"){var c=u==="all",A=u.split("+"),k=function(p){return c||A.indexOf(p)!==-1};k("percent initial")&&T.push(s.percentInitialLabel+" of initial"),k("percent previous")&&T.push(s.percentPreviousLabel+" of previous"),k("percent total")&&T.push(s.percentTotalLabel+" of total")}return s.extraText=T.join("<br>"),s.color=x(y,v),[s]}};function x(t,a){var i=t.marker,r=a.mc||i.color,n=a.mlc||i.line.color,d=a.mlw||i.line.width;if(f(r))return r;if(f(n)&&d)return n}},{"../../components/color":367,"../../lib":515,"../bar/hover":664}],787:[function(e,B,V){B.exports={attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults").supplyDefaults,crossTraceDefaults:e("./defaults").crossTraceDefaults,supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),crossTraceCalc:e("./cross_trace_calc"),plot:e("./plot"),style:e("./style").style,hoverPoints:e("./hover"),eventData:e("./event_data"),selectPoints:e("../bar/select"),moduleType:"trace",name:"funnel",basePlotModule:e("../../plots/cartesian"),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},{"../../plots/cartesian":578,"../bar/select":669,"./attributes":780,"./calc":781,"./cross_trace_calc":783,"./defaults":784,"./event_data":785,"./hover":786,"./layout_attributes":788,"./layout_defaults":789,"./plot":790,"./style":791}],788:[function(e,B,V){B.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],789:[function(e,B,V){var f=e("../../lib"),l=e("./layout_attributes");B.exports=function(m,x,t){var a=!1;function i(d,s){return f.coerce(m,x,l,d,s)}for(var r=0;r<t.length;r++){var n=t[r];if(n.visible&&n.type==="funnel"){a=!0;break}}a&&(i("funnelmode"),i("funnelgap",.2),i("funnelgroupgap"))}},{"../../lib":515,"./layout_attributes":788}],790:[function(e,B,V){var f=e("@plotly/d3"),l=e("../../lib"),m=e("../../components/drawing"),x=e("../../constants/numerical").BADNUM,t=e("../bar/plot"),a=e("../bar/uniform_text").clearMinTextSize;B.exports=function(s,o,y,g){var b=s._fullLayout;a("funnel",b),i(s,o,y,g),r(s,o,y,g),t.plot(s,o,y,g,{mode:b.funnelmode,norm:b.funnelmode,gap:b.funnelgap,groupgap:b.funnelgroupgap})};function i(d,s,o,y){var g=s.xaxis,b=s.yaxis;l.makeTraceGroups(y,o,"trace bars").each(function(v){var _=f.select(this),u=v[0].trace,T=l.ensureSingle(_,"g","regions");if(!u.connector||!u.connector.visible){T.remove();return}var c=u.orientation==="h",A=T.selectAll("g.region").data(l.identity);A.enter().append("g").classed("region",!0),A.exit().remove();var k=A.size();A.each(function(p,w){if(!(w!==k-1&&!p.cNext)){var h=n(p,g,b,c),D=h[0],S=h[1],M="";D[0]!==x&&S[0]!==x&&D[1]!==x&&S[1]!==x&&D[2]!==x&&S[2]!==x&&D[3]!==x&&S[3]!==x&&(c?M+="M"+D[0]+","+S[1]+"L"+D[2]+","+S[2]+"H"+D[3]+"L"+D[1]+","+S[1]+"Z":M+="M"+D[1]+","+S[1]+"L"+D[2]+","+S[3]+"V"+S[2]+"L"+D[1]+","+S[0]+"Z"),M===""&&(M="M0,0Z"),l.ensureSingle(f.select(this),"path").attr("d",M).call(m.setClipUrl,s.layerClipId,d)}})})}function r(d,s,o,y){var g=s.xaxis,b=s.yaxis;l.makeTraceGroups(y,o,"trace bars").each(function(v){var _=f.select(this),u=v[0].trace,T=l.ensureSingle(_,"g","lines");if(!u.connector||!u.connector.visible||!u.connector.line.width){T.remove();return}var c=u.orientation==="h",A=T.selectAll("g.line").data(l.identity);A.enter().append("g").classed("line",!0),A.exit().remove();var k=A.size();A.each(function(p,w){if(!(w!==k-1&&!p.cNext)){var h=n(p,g,b,c),D=h[0],S=h[1],M="";D[3]!==void 0&&S[3]!==void 0&&(c?(M+="M"+D[0]+","+S[1]+"L"+D[2]+","+S[2],M+="M"+D[1]+","+S[1]+"L"+D[3]+","+S[2]):(M+="M"+D[1]+","+S[1]+"L"+D[2]+","+S[3],M+="M"+D[1]+","+S[0]+"L"+D[2]+","+S[2])),M===""&&(M="M0,0Z"),l.ensureSingle(f.select(this),"path").attr("d",M).call(m.setClipUrl,s.layerClipId,d)}})})}function n(d,s,o,y){var g=[],b=[],v=y?s:o,_=y?o:s;return g[0]=v.c2p(d.s0,!0),b[0]=_.c2p(d.p0,!0),g[1]=v.c2p(d.s1,!0),b[1]=_.c2p(d.p1,!0),g[2]=v.c2p(d.nextS0,!0),b[2]=_.c2p(d.nextP0,!0),g[3]=v.c2p(d.nextS1,!0),b[3]=_.c2p(d.nextP1,!0),y?[g,b]:[b,g]}},{"../../components/drawing":389,"../../constants/numerical":491,"../../lib":515,"../bar/plot":668,"../bar/uniform_text":673,"@plotly/d3":58}],791:[function(e,B,V){var f=e("@plotly/d3"),l=e("../../components/drawing"),m=e("../../components/color"),x=e("../../constants/interactions").DESELECTDIM,t=e("../bar/style"),a=e("../bar/uniform_text").resizeText,i=t.styleTextPoints;function r(n,d,s){var o=s||f.select(n).selectAll("g.funnellayer").selectAll("g.trace");a(n,o,"funnel"),o.style("opacity",function(y){return y[0].trace.opacity}),o.each(function(y){var g=f.select(this),b=y[0].trace;g.selectAll(".point > path").each(function(v){if(!v.isBlank){var _=b.marker;f.select(this).call(m.fill,v.mc||_.color).call(m.stroke,v.mlc||_.line.color).call(l.dashLine,_.line.dash,v.mlw||_.line.width).style("opacity",b.selectedpoints&&!v.selected?x:1)}}),i(g,b,n),g.selectAll(".regions").each(function(){f.select(this).selectAll("path").style("stroke-width",0).call(m.fill,b.connector.fillcolor)}),g.selectAll(".lines").each(function(){var v=b.connector.line;l.lineGroupStyle(f.select(this).selectAll("path"),v.width,v.color,v.dash)})})}B.exports={style:r}},{"../../components/color":367,"../../components/drawing":389,"../../constants/interactions":490,"../bar/style":671,"../bar/uniform_text":673,"@plotly/d3":58}],792:[function(e,B,V){var f=e("../pie/attributes"),l=e("../../plots/attributes"),m=e("../../plots/domain").attributes,x=e("../../plots/template_attributes").hovertemplateAttrs,t=e("../../plots/template_attributes").texttemplateAttrs,a=e("../../lib/extend").extendFlat;B.exports={labels:f.labels,label0:f.label0,dlabel:f.dlabel,values:f.values,marker:{colors:f.marker.colors,line:{color:a({},f.marker.line.color,{dflt:null}),width:a({},f.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},text:f.text,hovertext:f.hovertext,scalegroup:a({},f.scalegroup,{}),textinfo:a({},f.textinfo,{flags:["label","text","value","percent"]}),texttemplate:t({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:a({},l.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:x({},{keys:["label","color","value","text","percent"]}),textposition:a({},f.textposition,{values:["inside","none"],dflt:"inside"}),textfont:f.textfont,insidetextfont:f.insidetextfont,title:{text:f.title.text,font:f.title.font,position:a({},f.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:m({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},{"../../lib/extend":505,"../../plots/attributes":562,"../../plots/domain":593,"../../plots/template_attributes":642,"../pie/attributes":910}],793:[function(e,B,V){var f=e("../../plots/plots");V.name="funnelarea",V.plot=function(l,m,x,t){f.plotBasePlot(V.name,l,m,x,t)},V.clean=function(l,m,x,t){f.cleanBasePlot(V.name,l,m,x,t)}},{"../../plots/plots":628}],794:[function(e,B,V){var f=e("../pie/calc");function l(x,t){return f.calc(x,t)}function m(x){f.crossTraceCalc(x,{type:"funnelarea"})}B.exports={calc:l,crossTraceCalc:m}},{"../pie/calc":912}],795:[function(e,B,V){var f=e("../../lib"),l=e("./attributes"),m=e("../../plots/domain").defaults,x=e("../bar/defaults").handleText,t=e("../pie/defaults").handleLabelsAndValues;B.exports=function(i,r,n,d){function s(k,p){return f.coerce(i,r,l,k,p)}var o=s("labels"),y=s("values"),g=t(o,y),b=g.len;if(r._hasLabels=g.hasLabels,r._hasValues=g.hasValues,!r._hasLabels&&r._hasValues&&(s("label0"),s("dlabel")),!b){r.visible=!1;return}r._length=b;var v=s("marker.line.width");v&&s("marker.line.color",d.paper_bgcolor),s("marker.colors"),s("scalegroup");var _=s("text"),u=s("texttemplate"),T;if(u||(T=s("textinfo",Array.isArray(_)?"text+percent":"percent")),s("hovertext"),s("hovertemplate"),u||T&&T!=="none"){var c=s("textposition");x(i,r,d,s,c,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}m(r,d,s);var A=s("title.text");A&&(s("title.position"),f.coerceFont(s,"title.font",d.font)),s("aspectratio"),s("baseratio")}},{"../../lib":515,"../../plots/domain":593,"../bar/defaults":661,"../pie/defaults":913,"./attributes":792}],796:[function(e,B,V){B.exports={moduleType:"trace",name:"funnelarea",basePlotModule:e("./base_plot"),categories:["pie-like","funnelarea","showLegend"],attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults"),supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc").calc,crossTraceCalc:e("./calc").crossTraceCalc,plot:e("./plot"),style:e("./style"),styleOne:e("../pie/style_one"),meta:{}}},{"../pie/style_one":921,"./attributes":792,"./base_plot":793,"./calc":794,"./defaults":795,"./layout_attributes":797,"./layout_defaults":798,"./plot":799,"./style":800}],797:[function(e,B,V){var f=e("../pie/layout_attributes").hiddenlabels;B.exports={hiddenlabels:f,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{"../pie/layout_attributes":917}],798:[function(e,B,V){var f=e("../../lib"),l=e("./layout_attributes");B.exports=function(x,t){function a(i,r){return f.coerce(x,t,l,i,r)}a("hiddenlabels"),a("funnelareacolorway",t.colorway),a("extendfunnelareacolors")}},{"../../lib":515,"./layout_attributes":797}],799:[function(e,B,V){var f=e("@plotly/d3"),l=e("../../components/drawing"),m=e("../../lib"),x=m.strScale,t=m.strTranslate,a=e("../../lib/svg_text_utils"),i=e("../bar/plot"),r=i.toMoveInsideBar,n=e("../bar/uniform_text"),d=n.recordMinTextSize,s=n.clearMinTextSize,o=e("../pie/helpers"),y=e("../pie/plot"),g=y.attachFxHandlers,b=y.determineInsideTextFont,v=y.layoutAreas,_=y.prerenderTitles,u=y.positionTitleOutside,T=y.formatSliceLabel;B.exports=function(w,h){var D=w._fullLayout;s("funnelarea",D),_(h,w),v(h,D._size),m.makeTraceGroups(D._funnelarealayer,h,"trace").each(function(S){var M=f.select(this),L=S[0],R=L.trace;k(S),M.each(function(){var z=f.select(this).selectAll("g.slice").data(S);z.enter().append("g").classed("slice",!0),z.exit().remove(),z.each(function(I,U){if(I.hidden){f.select(this).selectAll("path,g").remove();return}I.pointNumber=I.i,I.curveNumber=R.index;var O=L.cx,G=L.cy,$=f.select(this),tt=$.selectAll("path.surface").data([I]);tt.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),$.call(g,w,S);var Z="M"+(O+I.TR[0])+","+(G+I.TR[1])+c(I.TR,I.BR)+c(I.BR,I.BL)+c(I.BL,I.TL)+"Z";tt.attr("d",Z),T(w,I,L);var X=o.castOption(R.textposition,I.pts),J=$.selectAll("g.slicetext").data(I.text&&X!=="none"?[0]:[]);J.enter().append("g").classed("slicetext",!0),J.exit().remove(),J.each(function(){var st=m.ensureSingle(f.select(this),"text","",function(K){K.attr("data-notex",1)}),at=m.ensureUniformFontSize(w,b(R,I,D.font));st.text(I.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(l.font,at).call(a.convertToTspans,w);var lt=l.bBox(st.node()),F,H,et,q=Math.min(I.BL[1],I.BR[1])+G,W=Math.max(I.TL[1],I.TR[1])+G;H=Math.max(I.TL[0],I.BL[0])+O,et=Math.min(I.TR[0],I.BR[0])+O,F=r(H,et,q,W,lt,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"}),F.fontSize=at.size,d(R.type,F,D),S[U].transform=F,st.attr("transform",m.getTextTransform(F))})});var P=f.select(this).selectAll("g.titletext").data(R.title.text?[0]:[]);P.enter().append("g").classed("titletext",!0),P.exit().remove(),P.each(function(){var I=m.ensureSingle(f.select(this),"text","",function(G){G.attr("data-notex",1)}),U=R.title.text;R._meta&&(U=m.templateString(U,R._meta)),I.text(U).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(l.font,R.title.font).call(a.convertToTspans,w);var O=u(L,D._size);I.attr("transform",t(O.x,O.y)+x(Math.min(1,O.scale))+t(O.tx,O.ty))})})})};function c(p,w){var h=w[0]-p[0],D=w[1]-p[1];return"l"+h+","+D}function A(p,w){return[.5*(p[0]+w[0]),.5*(p[1]+w[1])]}function k(p){if(!p.length)return;var w=p[0],h=w.trace,D=h.aspectratio,S=h.baseratio;S>.999&&(S=.999);var M=Math.pow(S,2),L=w.vTotal,R=L*M/(1-M),z=L,P=R/L;function I(){var it=Math.sqrt(P);return{x:it,y:-it}}function U(){var it=I();return[it.x,it.y]}var O,G=[];G.push(U());var $,tt;for($=p.length-1;$>-1;$--)if(tt=p[$],!tt.hidden){var Z=tt.v/z;P+=Z,G.push(U())}var X=1/0,J=-1/0;for($=0;$<G.length;$++)O=G[$],X=Math.min(X,O[1]),J=Math.max(J,O[1]);for($=0;$<G.length;$++)G[$][1]-=(J+X)/2;var st=G[G.length-1][0],at=w.r,lt=(J-X)/2,F=at/st,H=at/lt*D;for(w.r=H*lt,$=0;$<G.length;$++)G[$][0]*=F,G[$][1]*=H;O=G[0];var et=[-O[0],O[1]],q=[O[0],O[1]],W=0;for($=p.length-1;$>-1;$--)if(tt=p[$],!tt.hidden){W+=1;var K=G[W][0],nt=G[W][1];tt.TL=[-K,nt],tt.TR=[K,nt],tt.BL=et,tt.BR=q,tt.pxmid=A(tt.TR,tt.BR),et=tt.TL,q=tt.TR}}},{"../../components/drawing":389,"../../lib":515,"../../lib/svg_text_utils":541,"../bar/plot":668,"../bar/uniform_text":673,"../pie/helpers":915,"../pie/plot":919,"@plotly/d3":58}],800:[function(e,B,V){var f=e("@plotly/d3"),l=e("../pie/style_one"),m=e("../bar/uniform_text").resizeText;B.exports=function(t){var a=t._fullLayout._funnelarealayer.selectAll(".trace");m(t,a,"funnelarea"),a.each(function(i){var r=i[0],n=r.trace,d=f.select(this);d.style({opacity:n.opacity}),d.selectAll("path.surface").each(function(s){f.select(this).call(l,s,n)})})}},{"../bar/uniform_text":673,"../pie/style_one":921,"@plotly/d3":58}],801:[function(e,B,V){var f=e("../scatter/attributes"),l=e("../../plots/attributes"),m=e("../../plots/font_attributes"),x=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,t=e("../../plots/template_attributes").hovertemplateAttrs,a=e("../../plots/template_attributes").texttemplateAttrs,i=e("../../components/colorscale/attributes"),r=e("../../lib/extend").extendFlat;B.exports=r({z:{valType:"data_array",editType:"calc"},x:r({},f.x,{impliedEdits:{xtype:"array"}}),x0:r({},f.x0,{impliedEdits:{xtype:"scaled"}}),dx:r({},f.dx,{impliedEdits:{xtype:"scaled"}}),y:r({},f.y,{impliedEdits:{ytype:"array"}}),y0:r({},f.y0,{impliedEdits:{ytype:"scaled"}}),dy:r({},f.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:r({},f.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:r({},f.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:r({},f.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:r({},f.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:r({},f.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:r({},f.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:x("x"),yhoverformat:x("y"),zhoverformat:x("z",1),hovertemplate:t(),texttemplate:a({arrayOk:!1,editType:"plot"},{keys:["x","y","z","text"]}),textfont:m({editType:"plot",autoSize:!0,autoColor:!0,colorEditType:"style"}),showlegend:r({},l.showlegend,{dflt:!1})},{transforms:void 0},i("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/font_attributes":594,"../../plots/template_attributes":642,"../scatter/attributes":936}],802:[function(e,B,V){var f=e("../../registry"),l=e("../../lib"),m=e("../../plots/cartesian/axes"),x=e("../../plots/cartesian/align_period"),t=e("../histogram2d/calc"),a=e("../../components/colorscale/calc"),i=e("./convert_column_xyz"),r=e("./clean_2d_array"),n=e("./interp2d"),d=e("./find_empties"),s=e("./make_bound_array"),o=e("../../constants/numerical").BADNUM;B.exports=function(v,_){var u=m.getFromId(v,_.xaxis||"x"),T=m.getFromId(v,_.yaxis||"y"),c=f.traceIs(_,"contour"),A=f.traceIs(_,"histogram"),k=f.traceIs(_,"gl2d"),p=c?"best":_.zsmooth,w,h,D,S,M,L,R,z,P,I,U;if(u._minDtick=0,T._minDtick=0,A)U=t(v,_),S=U.orig_x,w=U.x,h=U.x0,D=U.dx,z=U.orig_y,M=U.y,L=U.y0,R=U.dy,P=U.z;else{var O=_.z;l.isArray1D(O)?(i(_,u,T,"x","y",["z"]),w=_._x,M=_._y,O=_._z):(S=_.x?u.makeCalcdata(_,"x"):[],z=_.y?T.makeCalcdata(_,"y"):[],w=x(_,u,"x",S).vals,M=x(_,T,"y",z).vals,_._x=w,_._y=M),h=_.x0,D=_.dx,L=_.y0,R=_.dy,P=r(O,_,u,T)}(u.rangebreaks||T.rangebreaks)&&(P=g(w,M,P),A||(w=y(w),M=y(M),_._x=w,_._y=M)),!A&&(c||_.connectgaps)&&(_._emptypoints=d(P),n(P,_._emptypoints));function G(q){p=_._input.zsmooth=_.zsmooth=!1,l.warn('cannot use zsmooth: "fast": '+q)}if(p==="fast"){if(u.type==="log"||T.type==="log")G("log axis found");else if(!A){if(w.length){var $=(w[w.length-1]-w[0])/(w.length-1),tt=Math.abs($/100);for(I=0;I<w.length-1;I++)if(Math.abs(w[I+1]-w[I]-$)>tt){G("x scale is not linear");break}}if(M.length&&p==="fast"){var Z=(M[M.length-1]-M[0])/(M.length-1),X=Math.abs(Z/100);for(I=0;I<M.length-1;I++)if(Math.abs(M[I+1]-M[I]-Z)>X){G("y scale is not linear");break}}}}var J=l.maxRowLength(P),st=_.xtype==="scaled"?"":w,at=s(_,st,h,D,J,u),lt=_.ytype==="scaled"?"":M,F=s(_,lt,L,R,P.length,T);k||(_._extremes[u._id]=m.findExtremes(u,at),_._extremes[T._id]=m.findExtremes(T,F));var H={x:at,y:F,z:P,text:_._text||_.text,hovertext:_._hovertext||_.hovertext};if(_.xperiodalignment&&S&&(H.orig_x=S),_.yperiodalignment&&z&&(H.orig_y=z),st&&st.length===at.length-1&&(H.xCenter=st),lt&&lt.length===F.length-1&&(H.yCenter=lt),A&&(H.xRanges=U.xRanges,H.yRanges=U.yRanges,H.pts=U.pts),c||a(v,_,{vals:P,cLetter:"z"}),c&&_.contours&&_.contours.coloring==="heatmap"){var et={type:_.type==="contour"?"heatmap":"histogram2d",xcalendar:_.xcalendar,ycalendar:_.ycalendar};H.xfill=s(et,st,h,D,J,u),H.yfill=s(et,lt,L,R,P.length,T)}return[H]};function y(b){for(var v=[],_=b.length,u=0;u<_;u++){var T=b[u];T!==o&&v.push(T)}return v}function g(b,v,_){for(var u=[],T=-1,c=0;c<_.length;c++)if(v[c]!==o){T++,u[T]=[];for(var A=0;A<_[c].length;A++)b[A]!==o&&u[T].push(_[c][A])}return u}},{"../../components/colorscale/calc":375,"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"../../registry":647,"../histogram2d/calc":835,"./clean_2d_array":803,"./convert_column_xyz":805,"./find_empties":807,"./interp2d":810,"./make_bound_array":812}],803:[function(e,B,V){var f=e("fast-isnumeric"),l=e("../../lib"),m=e("../../constants/numerical").BADNUM;B.exports=function(t,a,i,r){var n,d,s,o,y,g;function b(A){if(!!f(A))return+A}if(a&&a.transpose){for(n=0,y=0;y<t.length;y++)n=Math.max(n,t[y].length);if(n===0)return!1;s=function(A){return A.length},o=function(A,k,p){return(A[p]||[])[k]}}else n=t.length,s=function(A,k){return A[k].length},o=function(A,k,p){return(A[k]||[])[p]};var v=function(A,k,p){return k===m||p===m?m:o(A,k,p)};function _(A){if(a&&a.type!=="carpet"&&a.type!=="contourcarpet"&&A&&A.type==="category"&&a["_"+A._id.charAt(0)].length){var k=A._id.charAt(0),p={},w=a["_"+k+"CategoryMap"]||a[k];for(y=0;y<w.length;y++)p[w[y]]=y;return function(h){var D=p[A._categories[h]];return D+1?D:m}}else return l.identity}var u=_(i),T=_(r);r&&r.type==="category"&&(n=r._categories.length);var c=new Array(n);for(y=0;y<n;y++)for(i&&i.type==="category"?d=i._categories.length:d=s(t,y),c[y]=new Array(d),g=0;g<d;g++)c[y][g]=b(v(t,T(y),u(g)));return c}},{"../../constants/numerical":491,"../../lib":515,"fast-isnumeric":190}],804:[function(e,B,V){B.exports={min:"zmin",max:"zmax"}},{}],805:[function(e,B,V){var f=e("../../lib"),l=e("../../constants/numerical").BADNUM,m=e("../../plots/cartesian/align_period");B.exports=function(t,a,i,r,n,d){var s=t._length,o=a.makeCalcdata(t,r),y=i.makeCalcdata(t,n);o=m(t,a,r,o).vals,y=m(t,i,n,y).vals;var g=t.text,b=g!==void 0&&f.isArray1D(g),v=t.hovertext,_=v!==void 0&&f.isArray1D(v),u,T,c=f.distinctVals(o),A=c.vals,k=f.distinctVals(y),p=k.vals,w=[],h,D,S=p.length,M=A.length;for(u=0;u<d.length;u++)w[u]=f.init2dArray(S,M);b&&(h=f.init2dArray(S,M)),_&&(D=f.init2dArray(S,M));var L=f.init2dArray(S,M);for(u=0;u<s;u++)if(o[u]!==l&&y[u]!==l){var R=f.findBin(o[u]+c.minDiff/2,A),z=f.findBin(y[u]+k.minDiff/2,p);for(T=0;T<d.length;T++){var P=d[T],I=t[P],U=w[T];U[z][R]=I[u],L[z][R]=u}b&&(h[z][R]=g[u]),_&&(D[z][R]=v[u])}for(t["_"+r]=A,t["_"+n]=p,T=0;T<d.length;T++)t["_"+d[T]]=w[T];b&&(t._text=h),_&&(t._hovertext=D),a&&a.type==="category"&&(t["_"+r+"CategoryMap"]=A.map(function(O){return a._categories[O]})),i&&i.type==="category"&&(t["_"+n+"CategoryMap"]=p.map(function(O){return i._categories[O]})),t._after2before=L}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563}],806:[function(e,B,V){var f=e("../../lib"),l=e("./xyz_defaults"),m=e("./label_defaults"),x=e("../scatter/period_defaults"),t=e("./style_defaults"),a=e("../../components/colorscale/defaults"),i=e("./attributes");B.exports=function(n,d,s,o){function y(b,v){return f.coerce(n,d,i,b,v)}var g=l(n,d,y,o);if(!g){d.visible=!1;return}x(n,d,o,y),y("xhoverformat"),y("yhoverformat"),y("text"),y("hovertext"),y("hovertemplate"),m(y,o),t(n,d,y,o),y("hoverongaps"),y("connectgaps",f.isArray1D(d.z)&&d.zsmooth!==!1),a(n,d,o,y,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":377,"../../lib":515,"../scatter/period_defaults":956,"./attributes":801,"./label_defaults":811,"./style_defaults":815,"./xyz_defaults":816}],807:[function(e,B,V){var f=e("../../lib").maxRowLength;B.exports=function(m){var x=[],t={},a=[],i=m[0],r=[],n=[0,0,0],d=f(m),s,o,y,g,b,v,_,u;for(o=0;o<m.length;o++)for(s=r,r=i,i=m[o+1]||[],y=0;y<d;y++)r[y]===void 0&&(v=(r[y-1]!==void 0?1:0)+(r[y+1]!==void 0?1:0)+(s[y]!==void 0?1:0)+(i[y]!==void 0?1:0),v?(o===0&&v++,y===0&&v++,o===m.length-1&&v++,y===r.length-1&&v++,v<4&&(t[[o,y]]=[o,y,v]),x.push([o,y,v])):a.push([o,y]));for(;a.length;){for(_={},u=!1,b=a.length-1;b>=0;b--)g=a[b],o=g[0],y=g[1],v=((t[[o-1,y]]||n)[2]+(t[[o+1,y]]||n)[2]+(t[[o,y-1]]||n)[2]+(t[[o,y+1]]||n)[2])/20,v&&(_[g]=[o,y,v],a.splice(b,1),u=!0);if(!u)throw"findEmpties iterated with no new neighbors";for(g in _)t[g]=_[g],x.push(_[g])}return x.sort(function(T,c){return c[2]-T[2]})}},{"../../lib":515}],808:[function(e,B,V){var f=e("../../components/fx"),l=e("../../lib"),m=e("../../plots/cartesian/axes"),x=e("../../components/colorscale").extractOpts;B.exports=function(a,i,r,n,d){d||(d={});var s=d.isContour,o=a.cd[0],y=o.trace,g=a.xa,b=a.ya,v=o.x,_=o.y,u=o.z,T=o.xCenter,c=o.yCenter,A=o.zmask,k=y.zhoverformat,p=v,w=_,h,D,S,M;if(a.index!==!1){try{S=Math.round(a.index[1]),M=Math.round(a.index[0])}catch{l.error("Error hovering on heatmap, pointNumber must be [row,col], found:",a.index);return}if(S<0||S>=u[0].length||M<0||M>u.length)return}else{if(f.inbox(i-v[0],i-v[v.length-1],0)>0||f.inbox(r-_[0],r-_[_.length-1],0)>0)return;if(s){var L;for(p=[2*v[0]-v[1]],L=1;L<v.length;L++)p.push((v[L]+v[L-1])/2);for(p.push([2*v[v.length-1]-v[v.length-2]]),w=[2*_[0]-_[1]],L=1;L<_.length;L++)w.push((_[L]+_[L-1])/2);w.push([2*_[_.length-1]-_[_.length-2]])}S=Math.max(0,Math.min(p.length-2,l.findBin(i,p))),M=Math.max(0,Math.min(w.length-2,l.findBin(r,w)))}var R=g.c2p(v[S]),z=g.c2p(v[S+1]),P=b.c2p(_[M]),I=b.c2p(_[M+1]),U,O;s?(U=o.orig_x||v,O=o.orig_y||_,z=R,h=U[S],I=P,D=O[M]):(U=o.orig_x||T||v,O=o.orig_y||c||_,h=T?U[S]:(U[S]+U[S+1])/2,D=c?O[M]:(O[M]+O[M+1])/2,g&&g.type==="category"&&(h=v[S]),b&&b.type==="category"&&(D=_[M]),y.zsmooth&&(R=z=g.c2p(h),P=I=b.c2p(D)));var G=u[M][S];if(A&&!A[M][S]&&(G=void 0),!(G===void 0&&!y.hoverongaps)){var $;Array.isArray(o.hovertext)&&Array.isArray(o.hovertext[M])?$=o.hovertext[M][S]:Array.isArray(o.text)&&Array.isArray(o.text[M])&&($=o.text[M][S]);var tt=x(y),Z={type:"linear",range:[tt.min,tt.max],hoverformat:k,_separators:g._separators,_numFormat:g._numFormat},X=m.tickText(Z,G,"hover").text;return[l.extendFlat(a,{index:y._after2before?y._after2before[M][S]:[M,S],distance:a.maxHoverDistance,spikeDistance:a.maxSpikeDistance,x0:R,x1:z,y0:P,y1:I,xLabelVal:h,yLabelVal:D,zLabelVal:G,zLabel:X,text:$})]}}},{"../../components/colorscale":379,"../../components/fx":407,"../../lib":515,"../../plots/cartesian/axes":566}],809:[function(e,B,V){B.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("./plot"),colorbar:e("./colorbar"),style:e("./style"),hoverPoints:e("./hover"),moduleType:"trace",name:"heatmap",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},{"../../plots/cartesian":578,"./attributes":801,"./calc":802,"./colorbar":804,"./defaults":806,"./hover":808,"./plot":813,"./style":814}],810:[function(e,B,V){var f=e("../../lib"),l=.01,m=[[-1,0],[1,0],[0,-1],[0,1]];function x(a){return .5-.25*Math.min(1,a*.5)}B.exports=function(i,r){var n=1,d;for(t(i,r),d=0;d<r.length&&!(r[d][2]<4);d++);for(r=r.slice(d),d=0;d<100&&n>l;d++)n=t(i,r,x(n));return n>l&&f.log("interp2d didn't converge quickly",n),i};function t(a,i,r){var n=0,d,s,o,y,g,b,v,_,u,T,c,A,k;for(y=0;y<i.length;y++){for(d=i[y],s=d[0],o=d[1],c=a[s][o],T=0,u=0,g=0;g<4;g++)b=m[g],v=a[s+b[0]],v&&(_=v[o+b[1]],_!==void 0&&(T===0?A=k=_:(A=Math.min(A,_),k=Math.max(k,_)),u++,T+=_));if(u===0)throw"iterateInterp2d order is wrong: no defined neighbors";a[s][o]=T/u,c===void 0?u<4&&(n=1):(a[s][o]=(1+r)*a[s][o]-r*c,k>A&&(n=Math.max(n,Math.abs(a[s][o]-c)/(k-A))))}return n}},{"../../lib":515}],811:[function(e,B,V){var f=e("../../lib");B.exports=function(m,x){m("texttemplate");var t=f.extendFlat({},x.font,{color:"auto",size:"auto"});f.coerceFont(m,"textfont",t)}},{"../../lib":515}],812:[function(e,B,V){var f=e("../../registry"),l=e("../../lib").isArrayOrTypedArray;B.exports=function(x,t,a,i,r,n){var d=[],s=f.traceIs(x,"contour"),o=f.traceIs(x,"histogram"),y=f.traceIs(x,"gl2d"),g,b,v,_=l(t)&&t.length>1;if(_&&!o&&n.type!=="category"){var u=t.length;if(u<=r){if(s||y)d=t.slice(0,r);else if(r===1)d=[t[0]-.5,t[0]+.5];else{for(d=[1.5*t[0]-.5*t[1]],v=1;v<u;v++)d.push((t[v-1]+t[v])*.5);d.push(1.5*t[u-1]-.5*t[u-2])}if(u<r){var T=d[d.length-1],c=T-d[d.length-2];for(v=u;v<r;v++)T+=c,d.push(T)}}else return s?t.slice(0,r):t.slice(0,r+1)}else{var A=x[n._id.charAt(0)+"calendar"];if(o)g=n.r2c(a,0,A);else if(l(t)&&t.length===1)g=t[0];else if(a===void 0)g=0;else{var k=n.type==="log"?n.d2c:n.r2c;g=k(a,0,A)}for(b=i||1,v=s||y?0:-.5;v<r;v++)d.push(g+b*v)}return d}},{"../../lib":515,"../../registry":647}],813:[function(e,B,V){var f=e("@plotly/d3"),l=e("tinycolor2"),m=e("../../registry"),x=e("../../components/drawing"),t=e("../../plots/cartesian/axes"),a=e("../../lib"),i=e("../../lib/svg_text_utils"),r=e("../scatter/format_labels"),n=e("../../components/color"),d=e("../../components/colorscale").extractOpts,s=e("../../components/colorscale").makeColorScaleFuncFromTrace,o=e("../../constants/xmlns_namespaces"),y=e("../../constants/alignment"),g=y.LINE_SPACING,b="heatmap-label";function v(A){return A.selectAll("g."+b)}function _(A){v(A).remove()}B.exports=function(A,k,p,w){var h=k.xaxis,D=k.yaxis;a.makeTraceGroups(w,p,"hm").each(function(S){var M=f.select(this),L=S[0],R=L.trace,z=R.xgap||0,P=R.ygap||0,I=L.z,U=L.x,O=L.y,G=L.xCenter,$=L.yCenter,tt=m.traceIs(R,"contour"),Z=tt?"best":R.zsmooth,X=I.length,J=a.maxRowLength(I),st=!1,at=!1,lt,F,H,et,q,W,K,nt;for(W=0;lt===void 0&&W<U.length-1;)lt=h.c2p(U[W]),W++;for(W=U.length-1;F===void 0&&W>0;)F=h.c2p(U[W]),W--;for(F<lt&&(H=F,F=lt,lt=H,st=!0),W=0;et===void 0&&W<O.length-1;)et=D.c2p(O[W]),W++;for(W=O.length-1;q===void 0&&W>0;)q=D.c2p(O[W]),W--;if(q<et&&(H=et,et=q,q=H,at=!0),tt&&(G=U,$=O,U=L.xfill,O=L.yfill),Z!=="fast"){var it=Z==="best"?0:.5;lt=Math.max(-it*h._length,lt),F=Math.min((1+it)*h._length,F),et=Math.max(-it*D._length,et),q=Math.min((1+it)*D._length,q)}var ot=Math.round(F-lt),ct=Math.round(q-et),bt=ot<=0||ct<=0;if(bt){var ut=M.selectAll("image").data([]);ut.exit().remove(),_(M);return}var pt,yt;Z==="fast"?(pt=J,yt=X):(pt=ot,yt=ct);var Tt=document.createElement("canvas");Tt.width=pt,Tt.height=yt;var kt=Tt.getContext("2d"),zt=s(R,{noNumericCheck:!0,returnArray:!0}),Rt,Gt;Z==="fast"?(Rt=st?function(Fr){return J-1-Fr}:a.identity,Gt=at?function(Fr){return X-1-Fr}:a.identity):(Rt=function(Fr){return a.constrain(Math.round(h.c2p(U[Fr])-lt),0,ot)},Gt=function(Fr){return a.constrain(Math.round(D.c2p(O[Fr])-et),0,ct)});var wt=Gt(0),It=[wt,wt],$t=st?0:1,Qt=at?0:1,Nt=0,Pt=0,Yt=0,ve=0,Re,ir,Ie,Be,Ye;function ze(Fr,Ar){if(Fr!==void 0){var Xr=zt(Fr);return Xr[0]=Math.round(Xr[0]),Xr[1]=Math.round(Xr[1]),Xr[2]=Math.round(Xr[2]),Nt+=Ar,Pt+=Xr[0]*Ar,Yt+=Xr[1]*Ar,ve+=Xr[2]*Ar,Xr}return[0,0,0,0]}function Ee(Fr,Ar,Xr,Tn){var un=Fr[Xr.bin0];if(un===void 0)return ze(void 0,1);var Un=Fr[Xr.bin1],Dn=Ar[Xr.bin0],Xn=Ar[Xr.bin1],Gn=Un-un||0,yi=Dn-un||0,Pi;return Un===void 0?Xn===void 0?Pi=0:Dn===void 0?Pi=2*(Xn-un):Pi=(2*Xn-Dn-un)*2/3:Xn===void 0?Dn===void 0?Pi=0:Pi=(2*un-Un-Dn)*2/3:Dn===void 0?Pi=(2*Xn-Un-un)*2/3:Pi=Xn+un-Un-Dn,ze(un+Xr.frac*Gn+Tn.frac*(yi+Xr.frac*Pi))}if(Z){var Wt=0,ee;try{ee=new Uint8Array(ot*ct*4)}catch{ee=new Array(ot*ct*4)}if(Z==="best"){var Xt=G||U,St=$||O,Vt=new Array(Xt.length),Zt=new Array(St.length),qt=new Array(ot),Te=G?T:u,me=$?T:u,Ne,Ke,He;for(W=0;W<Xt.length;W++)Vt[W]=Math.round(h.c2p(Xt[W])-lt);for(W=0;W<St.length;W++)Zt[W]=Math.round(D.c2p(St[W])-et);for(W=0;W<ot;W++)qt[W]=Te(W,Vt);for(K=0;K<ct;K++)for(Ne=me(K,Zt),Ke=I[Ne.bin0],He=I[Ne.bin1],W=0;W<ot;W++,Wt+=4)Ye=Ee(Ke,He,qt[W],Ne),c(ee,Wt,Ye)}else for(K=0;K<X;K++)for(Be=I[K],It=Gt(K),W=0;W<ot;W++)Ye=ze(Be[W],1),Wt=(It*ot+Rt(W))*4,c(ee,Wt,Ye);var Xe=kt.createImageData(ot,ct);try{Xe.data.set(ee)}catch{var er=Xe.data,We=er.length;for(K=0;K<We;K++)er[K]=ee[K]}kt.putImageData(Xe,0,0)}else{var hr=Math.floor(z/2),Wr=Math.floor(P/2);for(K=0;K<X;K++)if(Be=I[K],It.reverse(),It[Qt]=Gt(K+1),!(It[0]===It[1]||It[0]===void 0||It[1]===void 0))for(ir=Rt(0),Re=[ir,ir],W=0;W<J;W++)Re.reverse(),Re[$t]=Rt(W+1),!(Re[0]===Re[1]||Re[0]===void 0||Re[1]===void 0)&&(Ie=Be[W],Ye=ze(Ie,(Re[1]-Re[0])*(It[1]-It[0])),kt.fillStyle="rgba("+Ye.join(",")+")",kt.fillRect(Re[0]+hr,It[0]+Wr,Re[1]-Re[0]-z,It[1]-It[0]-P))}Pt=Math.round(Pt/Nt),Yt=Math.round(Yt/Nt),ve=Math.round(ve/Nt);var dn=l("rgb("+Pt+","+Yt+","+ve+")");A._hmpixcount=(A._hmpixcount||0)+Nt,A._hmlumcount=(A._hmlumcount||0)+Nt*dn.getLuminance();var Qr=M.selectAll("image").data(S);Qr.enter().append("svg:image").attr({xmlns:o.svg,preserveAspectRatio:"none"}),Qr.attr({height:ct,width:ot,x:lt,y:et,"xlink:href":Tt.toDataURL("image/png")}),_(M);var le=R.texttemplate;if(le){var Qe=d(R),Ze={type:"linear",range:[Qe.min,Qe.max],_separators:h._separators,_numFormat:h._numFormat},Ve=R.type==="histogram2dcontour",_r=R.type==="contour",oe=_r?1:0,Ht=_r?X-1:X,te=_r?1:0,ne=_r?J-1:J,_e=[];for(W=oe;W<Ht;W++){var Pe;if(_r)Pe=L.y[W];else if(Ve){if(W===0||W===X-1)continue;Pe=L.y[W]}else if(L.yCenter)Pe=L.yCenter[W];else{if(W+1===X&&L.y[W+1]===void 0)continue;Pe=(L.y[W]+L.y[W+1])/2}var Et=Math.round(D.c2p(Pe));if(!(0>Et||Et>D._length))for(K=te;K<ne;K++){var Mt;if(_r)Mt=L.x[K];else if(Ve){if(K===0||K===J-1)continue;Mt=L.x[K]}else if(L.xCenter)Mt=L.xCenter[K];else{if(K+1===J&&L.x[K+1]===void 0)continue;Mt=(L.x[K]+L.x[K+1])/2}var se=Math.round(h.c2p(Mt));if(!(0>se||se>h._length)){var ce=r({x:Mt,y:Pe},R,A._fullLayout);ce.x=Mt,ce.y=Pe;var de=L.z[W][K];de===void 0?(ce.z="",ce.zLabel=""):(ce.z=de,ce.zLabel=t.tickText(Ze,de,"hover").text);var Se=L.text&&L.text[W]&&L.text[W][K];(Se===void 0||Se===!1)&&(Se=""),ce.text=Se;var ye=a.texttemplateString(le,ce,A._fullLayout._d3locale,ce,R._meta||{});if(!!ye){var Ae=ye.split("<br>"),Ge=Ae.length,sr=0;for(nt=0;nt<Ge;nt++)sr=Math.max(sr,Ae[nt].length);_e.push({l:Ge,c:sr,t:ye,x:se,y:Et,z:de})}}}}var Er=R.textfont,kr=Er.family,Mr=Er.size,Gr=A._fullLayout.font.size;if(!Mr||Mr==="auto"){var ar=1/0,xr=1/0,Ir=0,Hr=0;for(nt=0;nt<_e.length;nt++){var Cr=_e[nt];if(Ir=Math.max(Ir,Cr.l),Hr=Math.max(Hr,Cr.c),nt<_e.length-1){var ae=_e[nt+1],Le=Math.abs(ae.x-Cr.x),$e=Math.abs(ae.y-Cr.y);Le&&(ar=Math.min(ar,Le)),$e&&(xr=Math.min(xr,$e))}}!isFinite(ar)||!isFinite(xr)?Mr=Gr:(ar-=z,xr-=P,ar/=Hr,xr/=Ir,ar/=g/2,xr/=g,Mr=Math.min(Math.floor(ar),Math.floor(xr),Gr))}if(Mr<=0||!isFinite(Mr))return;var or=function(Fr){return Fr.x},Dr=function(Fr){return Fr.y-Mr*(Fr.l*g/2-1)},Nr=v(M).data(_e);Nr.enter().append("g").classed(b,1).append("text").attr("text-anchor","middle").each(function(Fr){var Ar=f.select(this),Xr=Er.color;(!Xr||Xr==="auto")&&(Xr=n.contrast("rgba("+zt(Fr.z).join()+")")),Ar.attr("data-notex",1).call(i.positionText,or(Fr),Dr(Fr)).call(x.font,kr,Mr,Xr).text(Fr.t).call(i.convertToTspans,A)})}})};function u(A,k){var p=k.length-2,w=a.constrain(a.findBin(A,k),0,p),h=k[w],D=k[w+1],S=a.constrain(w+(A-h)/(D-h)-.5,0,p),M=Math.round(S),L=Math.abs(S-M);return!S||S===p||!L?{bin0:M,bin1:M,frac:0}:{bin0:M,frac:L,bin1:Math.round(M+L/(S-M))}}function T(A,k){var p=k.length-1,w=a.constrain(a.findBin(A,k),0,p),h=k[w],D=k[w+1],S=(A-h)/(D-h)||0;return S<=0?{bin0:w,bin1:w,frac:0}:S<.5?{bin0:w,bin1:w+1,frac:S}:{bin0:w+1,bin1:w,frac:1-S}}function c(A,k,p){A[k]=p[0],A[k+1]=p[1],A[k+2]=p[2],A[k+3]=Math.round(p[3]*255)}},{"../../components/color":367,"../../components/colorscale":379,"../../components/drawing":389,"../../constants/alignment":483,"../../constants/xmlns_namespaces":492,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"../../registry":647,"../scatter/format_labels":945,"@plotly/d3":58,tinycolor2:313}],814:[function(e,B,V){var f=e("@plotly/d3");B.exports=function(m){f.select(m).selectAll(".hm image").style("opacity",function(x){return x.trace.opacity})}},{"@plotly/d3":58}],815:[function(e,B,V){B.exports=function(l,m,x){var t=x("zsmooth");t===!1&&(x("xgap"),x("ygap")),x("zhoverformat")}},{}],816:[function(e,B,V){var f=e("fast-isnumeric"),l=e("../../lib"),m=e("../../registry");B.exports=function(i,r,n,d,s,o){var y=n("z");s=s||"x",o=o||"y";var g,b;if(y===void 0||!y.length)return 0;if(l.isArray1D(i.z)){g=n(s),b=n(o);var v=l.minRowLength(g),_=l.minRowLength(b);if(v===0||_===0)return 0;r._length=Math.min(v,_,y.length)}else{if(g=x(s,n),b=x(o,n),!t(y))return 0;n("transpose"),r._length=null}if(i.type==="heatmapgl")return!0;var u=m.getComponentMethod("calendars","handleTraceDefaults");return u(i,r,[s,o],d),!0};function x(a,i){var r=i(a),n=r?i(a+"type","array"):"scaled";return n==="scaled"&&(i(a+"0"),i("d"+a)),r}function t(a){for(var i=!0,r=!1,n=!1,d,s=0;s<a.length;s++){if(d=a[s],!l.isArrayOrTypedArray(d)){i=!1;break}d.length>0&&(r=!0);for(var o=0;o<d.length;o++)if(f(d[o])){n=!0;break}}return i&&r&&n}},{"../../lib":515,"../../registry":647,"fast-isnumeric":190}],817:[function(e,B,V){for(var f=e("../heatmap/attributes"),l=e("../../components/colorscale/attributes"),m=e("../../lib/extend").extendFlat,x=e("../../plot_api/edit_types").overrideAll,t=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],a={},i=0;i<t.length;i++){var r=t[i];a[r]=f[r]}a.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"},m(a,l("",{cLetter:"z",autoColorDflt:!1})),B.exports=x(a,"calc","nested")},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/edit_types":548,"../heatmap/attributes":801}],818:[function(e,B,V){var f=e("../../../stackgl_modules").gl_heatmap2d,l=e("../../plots/cartesian/axes"),m=e("../../lib/str2rgbarray");function x(r,n){this.scene=r,this.uid=n,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=f(r.glplot,this.options),this.heatmap._trace=this}var t=x.prototype;t.handlePick=function(r){var n=this.options,d=n.shape,s=r.pointId,o=s%d[0],y=Math.floor(s/d[0]),g=s;return{trace:this,dataCoord:r.dataCoord,traceCoord:[n.x[o],n.y[y],n.z[g]],textLabel:this.textLabels[s],name:this.name,pointIndex:[y,o],hoverinfo:this.hoverinfo}},t.update=function(r,n){var d=n[0];this.index=r.index,this.name=r.name,this.hoverinfo=r.hoverinfo;var s=d.z;this.options.z=[].concat.apply([],s);var o=s[0].length,y=s.length;this.options.shape=[o,y],this.options.x=d.x,this.options.y=d.y,this.options.zsmooth=r.zsmooth;var g=a(r);this.options.colorLevels=g.colorLevels,this.options.colorValues=g.colorValues,this.textLabels=[].concat.apply([],r.text),this.heatmap.update(this.options);var b=this.scene.xaxis,v=this.scene.yaxis,_,u;r.zsmooth===!1&&(_={ppad:d.x[1]-d.x[0]},u={ppad:d.y[1]-d.y[0]}),r._extremes[b._id]=l.findExtremes(b,d.x,_),r._extremes[v._id]=l.findExtremes(v,d.y,u)},t.dispose=function(){this.heatmap.dispose()};function a(r){for(var n=r.colorscale,d=r.zmin,s=r.zmax,o=n.length,y=new Array(o),g=new Array(4*o),b=0;b<o;b++){var v=n[b],_=m(v[1]);y[b]=d+v[0]*(s-d);for(var u=0;u<4;u++)g[4*b+u]=_[u]}return{colorLevels:y,colorValues:g}}function i(r,n,d){var s=new x(r,n.uid);return s.update(n,d),s}B.exports=i},{"../../../stackgl_modules":1133,"../../lib/str2rgbarray":540,"../../plots/cartesian/axes":566}],819:[function(e,B,V){var f=e("../../lib"),l=e("../heatmap/xyz_defaults"),m=e("../../components/colorscale/defaults"),x=e("./attributes");B.exports=function(a,i,r,n){function d(o,y){return f.coerce(a,i,x,o,y)}var s=l(a,i,d,n);if(!s){i.visible=!1;return}d("text"),d("zsmooth"),m(a,i,n,d,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":377,"../../lib":515,"../heatmap/xyz_defaults":816,"./attributes":817}],820:[function(e,B,V){B.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../heatmap/colorbar"),calc:e("../heatmap/calc"),plot:e("./convert"),moduleType:"trace",name:"heatmapgl",basePlotModule:e("../../plots/gl2d"),categories:["gl","gl2d","2dMap"],meta:{}}},{"../../plots/gl2d":605,"../heatmap/calc":802,"../heatmap/colorbar":804,"./attributes":817,"./convert":818,"./defaults":819}],821:[function(e,B,V){var f=e("../bar/attributes"),l=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,m=e("../../plots/template_attributes").hovertemplateAttrs,x=e("../../plots/template_attributes").texttemplateAttrs,t=e("../../plots/font_attributes"),a=e("./bin_attributes"),i=e("./constants"),r=e("../../lib/extend").extendFlat;B.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:l("x"),yhoverformat:l("y"),text:r({},f.text,{}),hovertext:r({},f.hovertext,{}),orientation:f.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:a("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:a("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:m({},{keys:i.eventDataKeys}),texttemplate:x({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:r({},f.textposition,{arrayOk:!1}),textfont:t({arrayOk:!1,editType:"plot",colorEditType:"style"}),outsidetextfont:t({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextfont:t({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextanchor:f.insidetextanchor,textangle:f.textangle,cliponaxis:f.cliponaxis,constraintext:f.constraintext,marker:f.marker,offsetgroup:f.offsetgroup,alignmentgroup:f.alignmentgroup,selected:f.selected,unselected:f.unselected,_deprecated:{bardir:f._deprecated.bardir}}},{"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../../plots/font_attributes":594,"../../plots/template_attributes":642,"../bar/attributes":657,"./bin_attributes":823,"./constants":827}],822:[function(e,B,V){B.exports=function(l,m){for(var x=l.length,t=0,a=0;a<x;a++)m[a]?(l[a]/=m[a],t+=l[a]):l[a]=null;return t}},{}],823:[function(e,B,V){B.exports=function(l,m){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},{}],824:[function(e,B,V){var f=e("fast-isnumeric");B.exports={count:function(l,m,x){return x[l]++,1},sum:function(l,m,x,t){var a=t[m];return f(a)?(a=Number(a),x[l]+=a,a):0},avg:function(l,m,x,t,a){var i=t[m];return f(i)&&(i=Number(i),x[l]+=i,a[l]++),0},min:function(l,m,x,t){var a=t[m];if(f(a))if(a=Number(a),f(x[l])){if(x[l]>a){var i=a-x[l];return x[l]=a,i}}else return x[l]=a,a;return 0},max:function(l,m,x,t){var a=t[m];if(f(a))if(a=Number(a),f(x[l])){if(x[l]<a){var i=a-x[l];return x[l]=a,i}}else return x[l]=a,a;return 0}}},{"fast-isnumeric":190}],825:[function(e,B,V){var f=e("../../constants/numerical"),l=f.ONEAVGYEAR,m=f.ONEAVGMONTH,x=f.ONEDAY,t=f.ONEHOUR,a=f.ONEMIN,i=f.ONESEC,r=e("../../plots/cartesian/axes").tickIncrement;B.exports=function(g,b,v,_,u){var T=-1.1*b,c=-.1*b,A=g-c,k=v[0],p=v[1],w=Math.min(n(k+c,k+A,_,u),n(p+c,p+A,_,u)),h=Math.min(n(k+T,k+c,_,u),n(p+T,p+c,_,u)),D,S;if(w>h&&h<Math.abs(p-k)/4e3?(D=w,S=!1):(D=Math.min(w,h),S=!0),_.type==="date"&&D>x){var M=D===l?1:6,L=D===l?"M12":"M1";return function(R,z){var P=_.c2d(R,l,u),I=P.indexOf("-",M);I>0&&(P=P.substr(0,I));var U=_.d2c(P,0,u);if(U<R){var O=r(U,L,!1,u);(U+O)/2<R+g&&(U=O)}return z&&S?r(U,L,!0,u):U}}return function(R,z){var P=D*Math.round(R/D);return P+D/10<R&&P+D*.9<R+g&&(P+=D),z&&S&&(P-=D),P}};function n(y,g,b,v){if(y*g<=0)return 1/0;for(var _=Math.abs(g-y),u=b.type==="date",T=d(_,u),c=0;c<10;c++){var A=d(T*80,u);if(T===A)break;if(s(A,y,g,u,b,v))T=A;else break}return T}function d(y,g){return g&&y>i?y>x?y>l*1.1?l:y>m*1.1?m:x:y>t?t:y>a?a:i:Math.pow(10,Math.floor(Math.log(y)/Math.LN10))}function s(y,g,b,v,_,u){if(v&&y>x){var T=o(g,_,u),c=o(b,_,u),A=y===l?0:1;return T[A]!==c[A]}return Math.floor(b/y)-Math.floor(g/y)>.1}function o(y,g,b){var v=g.c2d(y,l,b).split("-");return v[0]===""&&(v.unshift(),v[0]="-"+v[0]),v}},{"../../constants/numerical":491,"../../plots/cartesian/axes":566}],826:[function(e,B,V){var f=e("fast-isnumeric"),l=e("../../lib"),m=e("../../registry"),x=e("../../plots/cartesian/axes"),t=e("../bar/arrays_to_calcdata"),a=e("./bin_functions"),i=e("./norm_functions"),r=e("./average"),n=e("./bin_label_vals");function d(b,v){var _=[],u=[],T=v.orientation==="h",c=x.getFromId(b,T?v.yaxis:v.xaxis),A=T?"y":"x",k={x:"y",y:"x"}[A],p=v[A+"calendar"],w=v.cumulative,h,D=s(b,v,c,A),S=D[0],M=D[1],L=typeof S.size=="string",R=[],z=L?R:S,P=[],I=[],U=[],O=0,G=v.histnorm,$=v.histfunc,tt=G.indexOf("density")!==-1,Z,X,J;w.enabled&&tt&&(G=G.replace(/ ?density$/,""),tt=!1);var st=$==="max"||$==="min",at=st?null:0,lt=a.count,F=i[G],H=!1,et=function(Gt){return c.r2c(Gt,0,p)},q;for(l.isArrayOrTypedArray(v[k])&&$!=="count"&&(q=v[k],H=$==="avg",lt=a[$]),h=et(S.start),X=et(S.end)+(h-x.tickIncrement(h,S.size,!1,p))/1e6;h<X&&_.length<1e6&&(Z=x.tickIncrement(h,S.size,!1,p),_.push((h+Z)/2),u.push(at),U.push([]),R.push(h),tt&&P.push(1/(Z-h)),H&&I.push(0),!(Z<=h));)h=Z;R.push(h),!L&&c.type==="date"&&(z={start:et(z.start),end:et(z.end),size:z.size}),b._fullLayout._roundFnOpts||(b._fullLayout._roundFnOpts={});var W=v["_"+A+"bingroup"],K={leftGap:1/0,rightGap:1/0};W&&(b._fullLayout._roundFnOpts[W]||(b._fullLayout._roundFnOpts[W]=K),K=b._fullLayout._roundFnOpts[W]);var nt=u.length,it=!0,ot=K.leftGap,ct=K.rightGap,bt={};for(h=0;h<M.length;h++){var ut=M[h];J=l.findBin(ut,z),J>=0&&J<nt&&(O+=lt(J,h,u,q,I),it&&U[J].length&&ut!==M[U[J][0]]&&(it=!1),U[J].push(h),bt[h]=J,ot=Math.min(ot,ut-R[J]),ct=Math.min(ct,R[J+1]-ut))}K.leftGap=ot,K.rightGap=ct;var pt;it||(pt=function(Gt,wt){return function(){var It=b._fullLayout._roundFnOpts[W];return n(It.leftGap,It.rightGap,R,c,p)(Gt,wt)}}),H&&(O=r(u,I)),F&&F(u,O,P),w.enabled&&g(u,w.direction,w.currentbin);var yt=Math.min(_.length,u.length),Tt=[],kt=0,zt=yt-1;for(h=0;h<yt;h++)if(u[h]){kt=h;break}for(h=yt-1;h>=kt;h--)if(u[h]){zt=h;break}for(h=kt;h<=zt;h++)if(f(_[h])&&f(u[h])){var Rt={p:_[h],s:u[h],b:0};w.enabled||(Rt.pts=U[h],it?Rt.ph0=Rt.ph1=U[h].length?M[U[h][0]]:_[h]:(v._computePh=!0,Rt.ph0=pt(R[h]),Rt.ph1=pt(R[h+1],!0))),Tt.push(Rt)}return Tt.length===1&&(Tt[0].width1=x.tickIncrement(Tt[0].p,S.size,!1,p)-Tt[0].p),t(Tt,v),l.isArrayOrTypedArray(v.selectedpoints)&&l.tagSelected(Tt,v,bt),Tt}function s(b,v,_,u,T){var c=u+"bins",A=b._fullLayout,k=v["_"+u+"bingroup"],p=A._histogramBinOpts[k],w=A.barmode==="overlay",h,D,S,M,L,R,z,P=function(ut){return _.r2c(ut,0,M)},I=function(ut){return _.c2r(ut,0,M)},U=_.type==="date"?function(ut){return ut||ut===0?l.cleanDate(ut,null,M):null}:function(ut){return f(ut)?Number(ut):null};function O(ut,pt,yt){pt[ut+"Found"]?(pt[ut]=U(pt[ut]),pt[ut]===null&&(pt[ut]=yt[ut])):(R[ut]=pt[ut]=yt[ut],l.nestedProperty(D[0],c+"."+ut).set(yt[ut]))}if(v["_"+u+"autoBinFinished"])delete v["_"+u+"autoBinFinished"];else{D=p.traces;var G=[],$=!0,tt=!1,Z=!1;for(h=0;h<D.length;h++)if(S=D[h],S.visible){var X=p.dirs[h];L=S["_"+X+"pos0"]=_.makeCalcdata(S,X),G=l.concat(G,L),delete S["_"+u+"autoBinFinished"],v.visible===!0&&($?$=!1:(delete S._autoBin,S["_"+u+"autoBinFinished"]=1),m.traceIs(S,"2dMap")&&(tt=!0),S.type==="histogram2dcontour"&&(Z=!0))}M=D[0][u+"calendar"];var J=x.autoBin(G,_,p.nbins,tt,M,p.sizeFound&&p.size),st=D[0]._autoBin={};if(R=st[p.dirs[0]]={},Z&&(p.size||(J.start=I(x.tickIncrement(P(J.start),J.size,!0,M))),p.end===void 0&&(J.end=I(x.tickIncrement(P(J.end),J.size,!1,M)))),w&&!m.traceIs(v,"2dMap")&&J._dataSpan===0&&_.type!=="category"&&_.type!=="multicategory"){if(T)return[J,L,!0];J=o(b,v,_,u,c)}z=S.cumulative||{},z.enabled&&z.currentbin!=="include"&&(z.direction==="decreasing"?J.start=I(x.tickIncrement(P(J.start),J.size,!0,M)):J.end=I(x.tickIncrement(P(J.end),J.size,!1,M))),p.size=J.size,p.sizeFound||(R.size=J.size,l.nestedProperty(D[0],c+".size").set(J.size)),O("start",p,J),O("end",p,J)}L=v["_"+u+"pos0"],delete v["_"+u+"pos0"];var at=v._input[c]||{},lt=l.extendFlat({},p),F=p.start,H=_.r2l(at.start),et=H!==void 0;if((p.startFound||et)&&H!==_.r2l(F)){var q=et?H:l.aggNums(Math.min,null,L),W={type:_.type==="category"||_.type==="multicategory"?"linear":_.type,r2l:_.r2l,dtick:p.size,tick0:F,calendar:M,range:[q,x.tickIncrement(q,p.size,!1,M)].map(_.l2r)},K=x.tickFirst(W);K>_.r2l(q)&&(K=x.tickIncrement(K,p.size,!0,M)),lt.start=_.l2r(K),et||l.nestedProperty(v,c+".start").set(lt.start)}var nt=p.end,it=_.r2l(at.end),ot=it!==void 0;if((p.endFound||ot)&&it!==_.r2l(nt)){var ct=ot?it:l.aggNums(Math.max,null,L);lt.end=_.l2r(ct),ot||l.nestedProperty(v,c+".start").set(lt.end)}var bt="autobin"+u;return v._input[bt]===!1&&(v._input[c]=l.extendFlat({},v[c]||{}),delete v._input[bt],delete v[bt]),[lt,L]}function o(b,v,_,u,T){var c=b._fullLayout,A=y(b,v),k=!1,p=1/0,w=[v],h,D,S;for(h=0;h<A.length;h++)if(D=A[h],D===v)k=!0;else if(!k)S=c._histogramBinOpts[D["_"+u+"bingroup"]],p=Math.min(p,S.size||D[T].size);else{var M=s(b,D,_,u,!0),L=M[0],R=M[2];D["_"+u+"autoBinFinished"]=1,D["_"+u+"pos0"]=M[1],R?w.push(D):p=Math.min(p,L.size)}var z=new Array(w.length);for(h=0;h<w.length;h++)for(var P=w[h]["_"+u+"pos0"],I=0;I<P.length;I++)if(P[I]!==void 0){z[h]=P[I];break}for(isFinite(p)||(p=l.distinctVals(z).minDiff),h=0;h<w.length;h++){D=w[h];var U=D[u+"calendar"],O={start:_.c2r(z[h]-p/2,0,U),end:_.c2r(z[h]+p/2,0,U),size:p};D._input[T]=D[T]=O,S=c._histogramBinOpts[D["_"+u+"bingroup"]],S&&l.extendFlat(S,O)}return v[T]}function y(b,v){for(var _=v.xaxis,u=v.yaxis,T=v.orientation,c=[],A=b._fullData,k=0;k<A.length;k++){var p=A[k];p.type==="histogram"&&p.visible===!0&&p.orientation===T&&p.xaxis===_&&p.yaxis===u&&c.push(p)}return c}function g(b,v,_){var u,T,c;function A(p){c=b[p],b[p]/=2}function k(p){T=b[p],b[p]=c+T/2,c+=T}if(_==="half")if(v==="increasing")for(A(0),u=1;u<b.length;u++)k(u);else for(A(b.length-1),u=b.length-2;u>=0;u--)k(u);else if(v==="increasing"){for(u=1;u<b.length;u++)b[u]+=b[u-1];_==="exclude"&&(b.unshift(0),b.pop())}else{for(u=b.length-2;u>=0;u--)b[u]+=b[u+1];_==="exclude"&&(b.push(0),b.shift())}}B.exports={calc:d,calcAllAutoBins:s}},{"../../lib":515,"../../plots/cartesian/axes":566,"../../registry":647,"../bar/arrays_to_calcdata":656,"./average":822,"./bin_functions":824,"./bin_label_vals":825,"./norm_functions":833,"fast-isnumeric":190}],827:[function(e,B,V){B.exports={eventDataKeys:["binNumber"]}},{}],828:[function(e,B,V){var f=e("../../lib"),l=e("../../plots/cartesian/axis_ids"),m=e("../../registry").traceIs,x=e("../bar/defaults").handleGroupingDefaults,t=f.nestedProperty,a=e("../../plots/cartesian/constraints").getAxisGroup,i=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],r=["x","y"];B.exports=function(d,s){var o=s._histogramBinOpts={},y=[],g={},b=[],v,_,u,T,c,A,k;function p(Z,X){return f.coerce(v._input,v,v._module.attributes,Z,X)}function w(Z){return Z.orientation==="v"?"x":"y"}function h(Z,X){var J=l.getFromTrace({_fullLayout:s},Z,X);return J.type}function D(Z,X,J){var st=Z.uid+"__"+J;X||(X=st);var at=h(Z,J),lt=Z[J+"calendar"]||"",F=o[X],H=!0;F&&(at===F.axType&&lt===F.calendar?(H=!1,F.traces.push(Z),F.dirs.push(J)):(X=st,at!==F.axType&&f.warn(["Attempted to group the bins of trace",Z.index,"set on a","type:"+at,"axis","with bins on","type:"+F.axType,"axis."].join(" ")),lt!==F.calendar&&f.warn(["Attempted to group the bins of trace",Z.index,"set with a",lt,"calendar","with bins",F.calendar?"on a "+F.calendar+" calendar":"w/o a set calendar"].join(" ")))),H&&(o[X]={traces:[Z],dirs:[J],axType:at,calendar:Z[J+"calendar"]||""}),Z["_"+J+"bingroup"]=X}for(c=0;c<d.length;c++)v=d[c],m(v,"histogram")&&(y.push(v),delete v._xautoBinFinished,delete v._yautoBinFinished,m(v,"2dMap")||x(v._input,v,s,p));var S=s._alignmentOpts||{};for(c=0;c<y.length;c++){if(v=y[c],u="",!m(v,"2dMap")){if(T=w(v),s.barmode==="group"&&v.alignmentgroup){var M=v[T+"axis"],L=a(s,M)+v.orientation;(S[L]||{})[v.alignmentgroup]&&(u=L)}!u&&s.barmode!=="overlay"&&(u=a(s,v.xaxis)+a(s,v.yaxis)+w(v))}u?(g[u]||(g[u]=[]),g[u].push(v)):b.push(v)}for(u in g){if(_=g[u],_.length===1){b.push(_[0]);continue}var R=!1;for(_.length&&(v=_[0],R=p("bingroup")),u=R||u,c=0;c<_.length;c++){v=_[c];var z=v._input.bingroup;z&&z!==u&&f.warn(["Trace",v.index,"must match","within bingroup",u+".","Ignoring its bingroup:",z,"setting."].join(" ")),v.bingroup=u,D(v,u,w(v))}}for(c=0;c<b.length;c++){v=b[c];var P=p("bingroup");if(m(v,"2dMap"))for(k=0;k<2;k++){T=r[k];var I=p(T+"bingroup",P?P+"__"+T:null);D(v,I,T)}else D(v,P,w(v))}for(u in o){var U=o[u];for(_=U.traces,A=0;A<i.length;A++){var O=i[A],G=O.name,$,tt;if(!(G==="nbins"&&U.sizeFound)){for(c=0;c<_.length;c++){if(v=_[c],T=U.dirs[c],$=O.aStr[T],t(v._input,$).get()!==void 0){U[G]=p($),U[G+"Found"]=!0;break}tt=(v._autoBin||{})[T]||{},tt[G]&&t(v,$).set(tt[G])}if(G==="start"||G==="end")for(;c<_.length;c++)v=_[c],v["_"+T+"bingroup"]&&(tt=(v._autoBin||{})[T]||{},p($,tt[G]));G==="nbins"&&!U.sizeFound&&!U.nbinsFound&&(v=_[0],U[G]=p($))}}}}},{"../../lib":515,"../../plots/cartesian/axis_ids":570,"../../plots/cartesian/constraints":574,"../../registry":647,"../bar/defaults":661}],829:[function(e,B,V){var f=e("../../registry"),l=e("../../lib"),m=e("../../components/color"),x=e("../bar/defaults").handleText,t=e("../bar/style_defaults"),a=e("./attributes");B.exports=function(r,n,d,s){function o(h,D){return l.coerce(r,n,a,h,D)}var y=o("x"),g=o("y"),b=o("cumulative.enabled");b&&(o("cumulative.direction"),o("cumulative.currentbin")),o("text");var v=o("textposition");x(r,n,s,o,v,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),o("hovertext"),o("hovertemplate"),o("xhoverformat"),o("yhoverformat");var _=o("orientation",g&&!y?"h":"v"),u=_==="v"?"x":"y",T=_==="v"?"y":"x",c=y&&g?Math.min(l.minRowLength(y)&&l.minRowLength(g)):l.minRowLength(n[u]||[]);if(!c){n.visible=!1;return}n._length=c;var A=f.getComponentMethod("calendars","handleTraceDefaults");A(r,n,["x","y"],s);var k=n[T];k&&o("histfunc"),o("histnorm"),o("autobin"+u),t(r,n,o,d,s),l.coerceSelectionMarkerOpacity(n,o);var p=(n.marker.line||{}).color,w=f.getComponentMethod("errorbars","supplyDefaults");w(r,n,p||m.defaultLine,{axis:"y"}),w(r,n,p||m.defaultLine,{axis:"x",inherit:"y"})}},{"../../components/color":367,"../../lib":515,"../../registry":647,"../bar/defaults":661,"../bar/style_defaults":672,"./attributes":821}],830:[function(e,B,V){B.exports=function(l,m,x,t,a){if(l.x="xVal"in m?m.xVal:m.x,l.y="yVal"in m?m.yVal:m.y,"zLabelVal"in m&&(l.z=m.zLabelVal),m.xa&&(l.xaxis=m.xa),m.ya&&(l.yaxis=m.ya),!(x.cumulative||{}).enabled){var i=Array.isArray(a)?t[0].pts[a[0]][a[1]]:t[a].pts;l.pointNumbers=i,l.binNumber=l.pointNumber,delete l.pointNumber,delete l.pointIndex;var r;if(x._indexToPoints){r=[];for(var n=0;n<i.length;n++)r=r.concat(x._indexToPoints[i[n]])}else r=i;l.pointIndices=r}return l}},{}],831:[function(e,B,V){var f=e("../bar/hover").hoverPoints,l=e("../../plots/cartesian/axes").hoverLabelText;B.exports=function(x,t,a,i,r){var n=f(x,t,a,i,r);if(!!n){x=n[0];var d=x.cd[x.index],s=x.cd[0].trace;if(!s.cumulative.enabled){var o=s.orientation==="h"?"y":"x";x[o+"Label"]=l(x[o+"a"],[d.ph0,d.ph1],s[o+"hoverformat"])}return n}}},{"../../plots/cartesian/axes":566,"../bar/hover":664}],832:[function(e,B,V){B.exports={attributes:e("./attributes"),layoutAttributes:e("../bar/layout_attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("./cross_trace_defaults"),supplyLayoutDefaults:e("../bar/layout_defaults"),calc:e("./calc").calc,crossTraceCalc:e("../bar/cross_trace_calc").crossTraceCalc,plot:e("../bar/plot").plot,layerName:"barlayer",style:e("../bar/style").style,styleOnSelect:e("../bar/style").styleOnSelect,colorbar:e("../scatter/marker_colorbar"),hoverPoints:e("./hover"),selectPoints:e("../bar/select"),eventData:e("./event_data"),moduleType:"trace",name:"histogram",basePlotModule:e("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},{"../../plots/cartesian":578,"../bar/cross_trace_calc":660,"../bar/layout_attributes":666,"../bar/layout_defaults":667,"../bar/plot":668,"../bar/select":669,"../bar/style":671,"../scatter/marker_colorbar":954,"./attributes":821,"./calc":826,"./cross_trace_defaults":828,"./defaults":829,"./event_data":830,"./hover":831}],833:[function(e,B,V){B.exports={percent:function(f,l){for(var m=f.length,x=100/l,t=0;t<m;t++)f[t]*=x},probability:function(f,l){for(var m=f.length,x=0;x<m;x++)f[x]/=l},density:function(f,l,m,x){var t=f.length;x=x||1;for(var a=0;a<t;a++)f[a]*=m[a]*x},"probability density":function(f,l,m,x){var t=f.length;x&&(l/=x);for(var a=0;a<t;a++)f[a]*=m[a]/l}}},{}],834:[function(e,B,V){var f=e("../histogram/attributes"),l=e("../histogram/bin_attributes"),m=e("../heatmap/attributes"),x=e("../../plots/attributes"),t=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,a=e("../../plots/template_attributes").hovertemplateAttrs,i=e("../../plots/template_attributes").texttemplateAttrs,r=e("../../components/colorscale/attributes"),n=e("../../lib/extend").extendFlat;B.exports=n({x:f.x,y:f.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:f.histnorm,histfunc:f.histfunc,nbinsx:f.nbinsx,xbins:l("x"),nbinsy:f.nbinsy,ybins:l("y"),autobinx:f.autobinx,autobiny:f.autobiny,bingroup:n({},f.bingroup,{}),xbingroup:n({},f.bingroup,{}),ybingroup:n({},f.bingroup,{}),xgap:m.xgap,ygap:m.ygap,zsmooth:m.zsmooth,xhoverformat:t("x"),yhoverformat:t("y"),zhoverformat:t("z",1),hovertemplate:a({},{keys:"z"}),texttemplate:i({arrayOk:!1,editType:"plot"},{keys:"z"}),textfont:m.textfont,showlegend:n({},x.showlegend,{dflt:!1})},r("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../heatmap/attributes":801,"../histogram/attributes":821,"../histogram/bin_attributes":823}],835:[function(e,B,V){var f=e("../../lib"),l=e("../../plots/cartesian/axes"),m=e("../histogram/bin_functions"),x=e("../histogram/norm_functions"),t=e("../histogram/average"),a=e("../histogram/bin_label_vals"),i=e("../histogram/calc").calcAllAutoBins;B.exports=function(o,y){var g=l.getFromId(o,y.xaxis),b=l.getFromId(o,y.yaxis),v=y.xcalendar,_=y.ycalendar,u=function(Wt){return g.r2c(Wt,0,v)},T=function(Wt){return b.r2c(Wt,0,_)},c=function(Wt){return g.c2r(Wt,0,v)},A=function(Wt){return b.c2r(Wt,0,_)},k,p,w,h,D=i(o,y,g,"x"),S=D[0],M=D[1],L=i(o,y,b,"y"),R=L[0],z=L[1],P=y._length;M.length>P&&M.splice(P,M.length-P),z.length>P&&z.splice(P,z.length-P);var I=[],U=[],O=[],G=typeof S.size=="string",$=typeof R.size=="string",tt=[],Z=[],X=G?tt:S,J=$?Z:R,st=0,at=[],lt=[],F=y.histnorm,H=y.histfunc,et=F.indexOf("density")!==-1,q=H==="max"||H==="min",W=q?null:0,K=m.count,nt=x[F],it=!1,ot=[],ct=[],bt="z"in y?y.z:"marker"in y&&Array.isArray(y.marker.color)?y.marker.color:"";bt&&H!=="count"&&(it=H==="avg",K=m[H]);var ut=S.size,pt=u(S.start),yt=u(S.end)+(pt-l.tickIncrement(pt,ut,!1,v))/1e6;for(k=pt;k<yt;k=l.tickIncrement(k,ut,!1,v))U.push(W),tt.push(k),it&&O.push(0);tt.push(k);var Tt=U.length,kt=(k-pt)/Tt,zt=c(pt+kt/2),Rt=R.size,Gt=T(R.start),wt=T(R.end)+(Gt-l.tickIncrement(Gt,Rt,!1,_))/1e6;for(k=Gt;k<wt;k=l.tickIncrement(k,Rt,!1,_)){I.push(U.slice()),Z.push(k);var It=new Array(Tt);for(p=0;p<Tt;p++)It[p]=[];lt.push(It),it&&at.push(O.slice())}Z.push(k);var $t=I.length,Qt=(k-Gt)/$t,Nt=A(Gt+Qt/2);et&&(ot=r(U.length,X,kt,G),ct=r(I.length,J,Qt,$)),!G&&g.type==="date"&&(X=n(u,X)),!$&&b.type==="date"&&(J=n(T,J));var Pt=!0,Yt=!0,ve=new Array(Tt),Re=new Array($t),ir=1/0,Ie=1/0,Be=1/0,Ye=1/0;for(k=0;k<P;k++){var ze=M[k],Ee=z[k];w=f.findBin(ze,X),h=f.findBin(Ee,J),w>=0&&w<Tt&&h>=0&&h<$t&&(st+=K(w,k,I[h],bt,at[h]),lt[h][w].push(k),Pt&&(ve[w]===void 0?ve[w]=ze:ve[w]!==ze&&(Pt=!1)),Yt&&(Re[h]===void 0?Re[h]=Ee:Re[h]!==Ee&&(Yt=!1)),ir=Math.min(ir,ze-tt[w]),Ie=Math.min(Ie,tt[w+1]-ze),Be=Math.min(Be,Ee-Z[h]),Ye=Math.min(Ye,Z[h+1]-Ee))}if(it)for(h=0;h<$t;h++)st+=t(I[h],at[h]);if(nt)for(h=0;h<$t;h++)nt(I[h],st,ot,ct[h]);return{x:M,xRanges:d(tt,Pt&&ve,ir,Ie,g,v),x0:zt,dx:kt,y:z,yRanges:d(Z,Yt&&Re,Be,Ye,b,_),y0:Nt,dy:Qt,z:I,pts:lt}};function r(s,o,y,g){var b=new Array(s),v;if(g)for(v=0;v<s;v++)b[v]=1/(o[v+1]-o[v]);else{var _=1/y;for(v=0;v<s;v++)b[v]=_}return b}function n(s,o){return{start:s(o.start),end:s(o.end),size:o.size}}function d(s,o,y,g,b,v){var _,u=s.length-1,T=new Array(u),c=a(y,g,s,b,v);for(_=0;_<u;_++){var A=(o||[])[_];T[_]=A===void 0?[c(s[_]),c(s[_+1],!0)]:[A,A]}return T}},{"../../lib":515,"../../plots/cartesian/axes":566,"../histogram/average":822,"../histogram/bin_functions":824,"../histogram/bin_label_vals":825,"../histogram/calc":826,"../histogram/norm_functions":833}],836:[function(e,B,V){var f=e("../../lib"),l=e("./sample_defaults"),m=e("../heatmap/style_defaults"),x=e("../../components/colorscale/defaults"),t=e("../heatmap/label_defaults"),a=e("./attributes");B.exports=function(r,n,d,s){function o(y,g){return f.coerce(r,n,a,y,g)}l(r,n,o,s),n.visible!==!1&&(m(r,n,o,s),x(r,n,s,o,{prefix:"",cLetter:"z"}),o("hovertemplate"),t(o,s),o("xhoverformat"),o("yhoverformat"))}},{"../../components/colorscale/defaults":377,"../../lib":515,"../heatmap/label_defaults":811,"../heatmap/style_defaults":815,"./attributes":834,"./sample_defaults":839}],837:[function(e,B,V){var f=e("../heatmap/hover"),l=e("../../plots/cartesian/axes").hoverLabelText;B.exports=function(x,t,a,i,r){var n=f(x,t,a,i,r);if(!!n){x=n[0];var d=x.index,s=d[0],o=d[1],y=x.cd[0],g=y.trace,b=y.xRanges[o],v=y.yRanges[s];return x.xLabel=l(x.xa,[b[0],b[1]],g.xhoverformat),x.yLabel=l(x.ya,[v[0],v[1]],g.yhoverformat),n}}},{"../../plots/cartesian/axes":566,"../heatmap/hover":808}],838:[function(e,B,V){B.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("../histogram/cross_trace_defaults"),calc:e("../heatmap/calc"),plot:e("../heatmap/plot"),layerName:"heatmaplayer",colorbar:e("../heatmap/colorbar"),style:e("../heatmap/style"),hoverPoints:e("./hover"),eventData:e("../histogram/event_data"),moduleType:"trace",name:"histogram2d",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":578,"../heatmap/calc":802,"../heatmap/colorbar":804,"../heatmap/plot":813,"../heatmap/style":814,"../histogram/cross_trace_defaults":828,"../histogram/event_data":830,"./attributes":834,"./defaults":836,"./hover":837}],839:[function(e,B,V){var f=e("../../registry"),l=e("../../lib");B.exports=function(x,t,a,i){var r=a("x"),n=a("y"),d=l.minRowLength(r),s=l.minRowLength(n);if(!d||!s){t.visible=!1;return}t._length=Math.min(d,s);var o=f.getComponentMethod("calendars","handleTraceDefaults");o(x,t,["x","y"],i);var y=a("z")||a("marker.color");y&&a("histfunc"),a("histnorm"),a("autobinx"),a("autobiny")}},{"../../lib":515,"../../registry":647}],840:[function(e,B,V){var f=e("../histogram2d/attributes"),l=e("../contour/attributes"),m=e("../../components/colorscale/attributes"),x=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,t=e("../../lib/extend").extendFlat;B.exports=t({x:f.x,y:f.y,z:f.z,marker:f.marker,histnorm:f.histnorm,histfunc:f.histfunc,nbinsx:f.nbinsx,xbins:f.xbins,nbinsy:f.nbinsy,ybins:f.ybins,autobinx:f.autobinx,autobiny:f.autobiny,bingroup:f.bingroup,xbingroup:f.xbingroup,ybingroup:f.ybingroup,autocontour:l.autocontour,ncontours:l.ncontours,contours:l.contours,line:{color:l.line.color,width:t({},l.line.width,{dflt:.5}),dash:l.line.dash,smoothing:l.line.smoothing,editType:"plot"},xhoverformat:x("x"),yhoverformat:x("y"),zhoverformat:x("z",1),hovertemplate:f.hovertemplate,texttemplate:l.texttemplate,textfont:l.textfont},m("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../contour/attributes":744,"../histogram2d/attributes":834}],841:[function(e,B,V){var f=e("../../lib"),l=e("../histogram2d/sample_defaults"),m=e("../contour/contours_defaults"),x=e("../contour/style_defaults"),t=e("../heatmap/label_defaults"),a=e("./attributes");B.exports=function(r,n,d,s){function o(g,b){return f.coerce(r,n,a,g,b)}function y(g){return f.coerce2(r,n,a,g)}l(r,n,o,s),n.visible!==!1&&(m(r,n,o,y),x(r,n,o,s),o("xhoverformat"),o("yhoverformat"),o("hovertemplate"),n.contours&&n.contours.coloring==="heatmap"&&t(o,s))}},{"../../lib":515,"../contour/contours_defaults":751,"../contour/style_defaults":765,"../heatmap/label_defaults":811,"../histogram2d/sample_defaults":839,"./attributes":840}],842:[function(e,B,V){B.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("../histogram/cross_trace_defaults"),calc:e("../contour/calc"),plot:e("../contour/plot").plot,layerName:"contourlayer",style:e("../contour/style"),colorbar:e("../contour/colorbar"),hoverPoints:e("../contour/hover"),moduleType:"trace",name:"histogram2dcontour",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":578,"../contour/calc":745,"../contour/colorbar":747,"../contour/hover":757,"../contour/plot":762,"../contour/style":764,"../histogram/cross_trace_defaults":828,"./attributes":840,"./defaults":841}],843:[function(e,B,V){var f=e("../../plots/template_attributes").hovertemplateAttrs,l=e("../../plots/template_attributes").texttemplateAttrs,m=e("../../components/colorscale/attributes"),x=e("../../plots/domain").attributes,t=e("../pie/attributes"),a=e("../sunburst/attributes"),i=e("../treemap/attributes"),r=e("../treemap/constants"),n=e("../../lib/extend").extendFlat;B.exports={labels:a.labels,parents:a.parents,values:a.values,branchvalues:a.branchvalues,count:a.count,level:a.level,maxdepth:a.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot"},flip:i.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},marker:n({colors:a.marker.colors,line:a.marker.line,editType:"calc"},m("marker",{colorAttr:"colors",anim:!1})),leaf:a.leaf,pathbar:i.pathbar,text:t.text,textinfo:a.textinfo,texttemplate:l({editType:"plot"},{keys:r.eventDataKeys.concat(["label","value"])}),hovertext:t.hovertext,hoverinfo:a.hoverinfo,hovertemplate:f({},{keys:r.eventDataKeys}),textfont:t.textfont,insidetextfont:t.insidetextfont,outsidetextfont:i.outsidetextfont,textposition:i.textposition,sort:t.sort,root:a.root,domain:x({name:"icicle",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/domain":593,"../../plots/template_attributes":642,"../pie/attributes":910,"../sunburst/attributes":1058,"../treemap/attributes":1084,"../treemap/constants":1087}],844:[function(e,B,V){var f=e("../../plots/plots");V.name="icicle",V.plot=function(l,m,x,t){f.plotBasePlot(V.name,l,m,x,t)},V.clean=function(l,m,x,t){f.cleanBasePlot(V.name,l,m,x,t)}},{"../../plots/plots":628}],845:[function(e,B,V){var f=e("../sunburst/calc");V.calc=function(l,m){return f.calc(l,m)},V.crossTraceCalc=function(l){return f._runCrossTraceCalc("icicle",l)}},{"../sunburst/calc":1060}],846:[function(e,B,V){var f=e("../../lib"),l=e("./attributes"),m=e("../../components/color"),x=e("../../plots/domain").defaults,t=e("../bar/defaults").handleText,a=e("../bar/constants").TEXTPAD,i=e("../../components/colorscale"),r=i.hasColorscale,n=i.handleDefaults;B.exports=function(s,o,y,g){function b(w,h){return f.coerce(s,o,l,w,h)}var v=b("labels"),_=b("parents");if(!v||!v.length||!_||!_.length){o.visible=!1;return}var u=b("values");u&&u.length?b("branchvalues"):b("count"),b("level"),b("maxdepth"),b("tiling.orientation"),b("tiling.flip"),b("tiling.pad");var T=b("text");b("texttemplate"),o.texttemplate||b("textinfo",Array.isArray(T)?"text+label":"label"),b("hovertext"),b("hovertemplate");var c=b("pathbar.visible"),A="auto";t(s,o,g,b,A,{hasPathbar:c,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),b("textposition");var k=b("marker.line.width");k&&b("marker.line.color",g.paper_bgcolor),b("marker.colors");var p=o._hasColorscale=r(s,"marker","colors")||(s.marker||{}).coloraxis;p&&n(s,o,g,b,{prefix:"marker.",cLetter:"c"}),b("leaf.opacity",p?1:.7),o._hovered={marker:{line:{width:2,color:m.contrast(g.paper_bgcolor)}}},c&&(b("pathbar.thickness",o.pathbar.textfont.size+2*a),b("pathbar.side"),b("pathbar.edgeshape")),b("sort"),b("root.color"),x(o,g,b),o._length=null}},{"../../components/color":367,"../../components/colorscale":379,"../../lib":515,"../../plots/domain":593,"../bar/constants":659,"../bar/defaults":661,"./attributes":843}],847:[function(e,B,V){var f=e("@plotly/d3"),l=e("../../lib"),m=e("../../components/drawing"),x=e("../../lib/svg_text_utils"),t=e("./partition"),a=e("./style").styleOne,i=e("../treemap/constants"),r=e("../sunburst/helpers"),n=e("../sunburst/fx"),d=e("../sunburst/plot").formatSliceLabel,s=!1;B.exports=function(y,g,b,v,_){var u=_.width,T=_.height,c=_.viewX,A=_.viewY,k=_.pathSlice,p=_.toMoveInsideSlice,w=_.strTransform,h=_.hasTransition,D=_.handleSlicesExit,S=_.makeUpdateSliceInterpolator,M=_.makeUpdateTextInterpolator,L=_.prevEntry,R={},z=y._fullLayout,P=g[0],I=P.trace,U=I.textposition.indexOf("left")!==-1,O=I.textposition.indexOf("right")!==-1,G=I.textposition.indexOf("bottom")!==-1,$=t(b,[u,T],{flipX:I.tiling.flip.indexOf("x")>-1,flipY:I.tiling.flip.indexOf("y")>-1,orientation:I.tiling.orientation,pad:{inner:I.tiling.pad},maxDepth:I._maxDepth}),tt=$.descendants(),Z=1/0,X=-1/0;tt.forEach(function(F){var H=F.depth;H>=I._maxDepth?(F.x0=F.x1=(F.x0+F.x1)/2,F.y0=F.y1=(F.y0+F.y1)/2):(Z=Math.min(Z,H),X=Math.max(X,H))}),v=v.data(tt,r.getPtId),I._maxVisibleLayers=isFinite(X)?X-Z+1:0,v.enter().append("g").classed("slice",!0),D(v,s,R,[u,T],k),v.order();var J=null;if(h&&L){var st=r.getPtId(L);v.each(function(F){J===null&&r.getPtId(F)===st&&(J={x0:F.x0,x1:F.x1,y0:F.y0,y1:F.y1})})}var at=function(){return J||{x0:0,x1:u,y0:0,y1:T}},lt=v;return h&&(lt=lt.transition().each("end",function(){var F=f.select(this);r.setSliceCursor(F,y,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),lt.each(function(F){F._x0=c(F.x0),F._x1=c(F.x1),F._y0=A(F.y0),F._y1=A(F.y1),F._hoverX=c(F.x1-I.tiling.pad),F._hoverY=A(G?F.y1-I.tiling.pad/2:F.y0+I.tiling.pad/2);var H=f.select(this),et=l.ensureSingle(H,"path","surface",function(nt){nt.style("pointer-events","all")});h?et.transition().attrTween("d",function(nt){var it=S(nt,s,at(),[u,T],{orientation:I.tiling.orientation,flipX:I.tiling.flip.indexOf("x")>-1,flipY:I.tiling.flip.indexOf("y")>-1});return function(ot){return k(it(ot))}}):et.attr("d",k),H.call(n,b,y,g,{styleOne:a,eventDataKeys:i.eventDataKeys,transitionTime:i.CLICK_TRANSITION_TIME,transitionEasing:i.CLICK_TRANSITION_EASING}).call(r.setSliceCursor,y,{isTransitioning:y._transitioning}),et.call(a,F,I,{hovered:!1}),F.x0===F.x1||F.y0===F.y1?F._text="":F._text=d(F,b,I,g,z)||"";var q=l.ensureSingle(H,"g","slicetext"),W=l.ensureSingle(q,"text","",function(nt){nt.attr("data-notex",1)}),K=l.ensureUniformFontSize(y,r.determineTextFont(I,F,z.font));W.text(F._text||" ").classed("slicetext",!0).attr("text-anchor",O?"end":U?"start":"middle").call(m.font,K).call(x.convertToTspans,y),F.textBB=m.bBox(W.node()),F.transform=p(F,{fontSize:K.size}),F.transform.fontSize=K.size,h?W.transition().attrTween("transform",function(nt){var it=M(nt,s,at(),[u,T]);return function(ot){return w(it(ot))}}):W.attr("transform",w(F))}),J}},{"../../components/drawing":389,"../../lib":515,"../../lib/svg_text_utils":541,"../sunburst/fx":1063,"../sunburst/helpers":1064,"../sunburst/plot":1068,"../treemap/constants":1087,"./partition":851,"./style":853,"@plotly/d3":58}],848:[function(e,B,V){B.exports={moduleType:"trace",name:"icicle",basePlotModule:e("./base_plot"),categories:[],animatable:!0,attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults"),supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc").calc,crossTraceCalc:e("./calc").crossTraceCalc,plot:e("./plot"),style:e("./style").style,colorbar:e("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":954,"./attributes":843,"./base_plot":844,"./calc":845,"./defaults":846,"./layout_attributes":849,"./layout_defaults":850,"./plot":852,"./style":853}],849:[function(e,B,V){B.exports={iciclecolorway:{valType:"colorlist",editType:"calc"},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],850:[function(e,B,V){var f=e("../../lib"),l=e("./layout_attributes");B.exports=function(x,t){function a(i,r){return f.coerce(x,t,l,i,r)}a("iciclecolorway",t.colorway),a("extendiciclecolors")}},{"../../lib":515,"./layout_attributes":849}],851:[function(e,B,V){var f=e("d3-hierarchy"),l=e("../treemap/flip_tree");B.exports=function(x,t,a){var i=a.flipX,r=a.flipY,n=a.orientation==="h",d=a.maxDepth,s=t[0],o=t[1];d&&(s=(x.height+1)*t[0]/Math.min(x.height+1,d),o=(x.height+1)*t[1]/Math.min(x.height+1,d));var y=f.partition().padding(a.pad.inner).size(n?[t[1],s]:[t[0],o])(x);return(n||i||r)&&l(y,t,{swapXY:n,flipX:i,flipY:r}),y}},{"../treemap/flip_tree":1092,"d3-hierarchy":115}],852:[function(e,B,V){var f=e("../treemap/draw"),l=e("./draw_descendants");B.exports=function(x,t,a,i){return f(x,t,a,i,{type:"icicle",drawDescendants:l})}},{"../treemap/draw":1089,"./draw_descendants":847}],853:[function(e,B,V){var f=e("@plotly/d3"),l=e("../../components/color"),m=e("../../lib"),x=e("../bar/uniform_text").resizeText;function t(i){var r=i._fullLayout._iciclelayer.selectAll(".trace");x(i,r,"icicle"),r.each(function(n){var d=f.select(this),s=n[0],o=s.trace;d.style("opacity",o.opacity),d.selectAll("path.surface").each(function(y){f.select(this).call(a,y,o)})})}function a(i,r,n){var d=r.data.data,s=!r.children,o=d.i,y=m.castOption(n,o,"marker.line.color")||l.defaultLine,g=m.castOption(n,o,"marker.line.width")||0;i.style("stroke-width",g).call(l.fill,d.color).call(l.stroke,y).style("opacity",s?n.leaf.opacity:null)}B.exports={style:t,styleOne:a}},{"../../components/color":367,"../../lib":515,"../bar/uniform_text":673,"@plotly/d3":58}],854:[function(e,B,V){for(var f=e("../../plots/attributes"),l=e("../../plots/template_attributes").hovertemplateAttrs,m=e("../../lib/extend").extendFlat,x=e("./constants").colormodel,t=["rgb","rgba","rgba256","hsl","hsla"],a=[],i=[],r=0;r<t.length;r++){var n=x[t[r]];a.push("For the `"+t[r]+"` colormodel, it is ["+(n.zminDflt||n.min).join(", ")+"]."),i.push("For the `"+t[r]+"` colormodel, it is ["+(n.zmaxDflt||n.max).join(", ")+"].")}B.exports=m({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:t,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:m({},f.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:l({},{keys:["z","color","colormodel"]}),transforms:void 0})},{"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"./constants":856}],855:[function(e,B,V){var f=e("../../lib"),l=e("./constants"),m=e("fast-isnumeric"),x=e("../../plots/cartesian/axes"),t=e("../../lib").maxRowLength,a=e("./helpers").getImageSize;B.exports=function(s,o){var y,g;if(o._hasZ)y=o.z.length,g=t(o.z);else if(o._hasSource){var b=a(o.source);y=b.height,g=b.width}var v=x.getFromId(s,o.xaxis||"x"),_=x.getFromId(s,o.yaxis||"y"),u=v.d2c(o.x0)-o.dx/2,T=_.d2c(o.y0)-o.dy/2,c,A=[u,u+g*o.dx],k=[T,T+y*o.dy];if(v&&v.type==="log")for(c=0;c<g;c++)A.push(u+c*o.dx);if(_&&_.type==="log")for(c=0;c<y;c++)k.push(T+c*o.dy);o._extremes[v._id]=x.findExtremes(v,A),o._extremes[_._id]=x.findExtremes(_,k),o._scaler=n(o);var p={x0:u,y0:T,z:o.z,w:g,h:y};return[p]};function i(d,s,o,y){return function(g){return f.constrain((g-d)*s,o,y)}}function r(d,s){return function(o){return f.constrain(o,d,s)}}function n(d){var s=l.colormodel[d.colormodel],o=s.colormodel||d.colormodel,y=o.length;d._sArray=[];for(var g=0;g<y;g++)s.min[g]!==d.zmin[g]||s.max[g]!==d.zmax[g]?d._sArray.push(i(d.zmin[g],(s.max[g]-s.min[g])/(d.zmax[g]-d.zmin[g]),s.min[g],s.max[g])):d._sArray.push(r(s.min[g],s.max[g]));return function(b){for(var v=b.slice(0,y),_=0;_<y;_++){var u=v[_];if(!m(u))return!1;v[_]=d._sArray[_](u)}return v}}},{"../../lib":515,"../../plots/cartesian/axes":566,"./constants":856,"./helpers":859,"fast-isnumeric":190}],856:[function(e,B,V){B.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(f){return f.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(f){return f.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(f){return f.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(f){var l=f.slice(0,3);return l[1]=l[1]+"%",l[2]=l[2]+"%",l},suffix:["\xB0","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(f){var l=f.slice(0,4);return l[1]=l[1]+"%",l[2]=l[2]+"%",l},suffix:["\xB0","%","%",""]}},pixelatedStyle:["image-rendering: optimizeSpeed","image-rendering: -moz-crisp-edges","image-rendering: -o-crisp-edges","image-rendering: -webkit-optimize-contrast","image-rendering: optimize-contrast","image-rendering: crisp-edges","image-rendering: pixelated",""].join("; ")}},{}],857:[function(e,B,V){var f=e("../../lib"),l=e("./attributes"),m=e("./constants"),x=e("../../snapshot/helpers").IMAGE_URL_PREFIX;B.exports=function(a,i){function r(s,o){return f.coerce(a,i,l,s,o)}r("source"),i.source&&!i.source.match(x)&&delete i.source,i._hasSource=!!i.source;var n=r("z");if(i._hasZ=!(n===void 0||!n.length||!n[0]||!n[0].length),!i._hasZ&&!i._hasSource){i.visible=!1;return}r("x0"),r("y0"),r("dx"),r("dy");var d;i._hasZ?(r("colormodel","rgb"),d=m.colormodel[i.colormodel],r("zmin",d.zminDflt||d.min),r("zmax",d.zmaxDflt||d.max)):i._hasSource&&(i.colormodel="rgba256",d=m.colormodel[i.colormodel],i.zmin=d.zminDflt,i.zmax=d.zmaxDflt),r("zsmooth"),r("text"),r("hovertext"),r("hovertemplate"),i._length=null}},{"../../lib":515,"../../snapshot/helpers":651,"./attributes":854,"./constants":856}],858:[function(e,B,V){B.exports=function(l,m){return"xVal"in m&&(l.x=m.xVal),"yVal"in m&&(l.y=m.yVal),m.xa&&(l.xaxis=m.xa),m.ya&&(l.yaxis=m.ya),l.color=m.color,l.colormodel=m.trace.colormodel,l.z||(l.z=m.color),l}},{}],859:[function(e,B,V){var f=e("probe-image-size/sync"),l=e("../../snapshot/helpers").IMAGE_URL_PREFIX,m=e("buffer/").Buffer;V.getImageSize=function(x){var t=x.replace(l,""),a=new m(t,"base64");return f(a)}},{"../../snapshot/helpers":651,"buffer/":85,"probe-image-size/sync":277}],860:[function(e,B,V){var f=e("../../components/fx"),l=e("../../lib"),m=e("./constants");B.exports=function(t,a,i){var r=t.cd[0],n=r.trace,d=t.xa,s=t.ya;if(!(f.inbox(a-r.x0,a-(r.x0+r.w*n.dx),0)>0||f.inbox(i-r.y0,i-(r.y0+r.h*n.dy),0)>0)){var o=Math.floor((a-r.x0)/n.dx),y=Math.floor(Math.abs(i-r.y0)/n.dy),g;if(n._hasZ?g=r.z[y][o]:n._hasSource&&(g=n._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(o,y,1,1).data),!!g){var b=r.hi||n.hoverinfo,v;if(b){var _=b.split("+");_.indexOf("all")!==-1&&(_=["color"]),_.indexOf("color")!==-1&&(v=!0)}var u=m.colormodel[n.colormodel],T=u.colormodel||n.colormodel,c=T.length,A=n._scaler(g),k=u.suffix,p=[];(n.hovertemplate||v)&&(p.push("["+[A[0]+k[0],A[1]+k[1],A[2]+k[2]].join(", ")),c===4&&p.push(", "+A[3]+k[3]),p.push("]"),p=p.join(""),t.extraText=T.toUpperCase()+": "+p);var w;Array.isArray(n.hovertext)&&Array.isArray(n.hovertext[y])?w=n.hovertext[y][o]:Array.isArray(n.text)&&Array.isArray(n.text[y])&&(w=n.text[y][o]);var h=s.c2p(r.y0+(y+.5)*n.dy),D=r.x0+(o+.5)*n.dx,S=r.y0+(y+.5)*n.dy,M="["+g.slice(0,n.colormodel.length).join(", ")+"]";return[l.extendFlat(t,{index:[y,o],x0:d.c2p(r.x0+o*n.dx),x1:d.c2p(r.x0+(o+1)*n.dx),y0:h,y1:h,color:A,xVal:D,xLabelVal:D,yVal:S,yLabelVal:S,zLabelVal:M,text:w,hovertemplateLabels:{zLabel:M,colorLabel:p,"color[0]Label":A[0]+k[0],"color[1]Label":A[1]+k[1],"color[2]Label":A[2]+k[2],"color[3]Label":A[3]+k[3]}})]}}}},{"../../components/fx":407,"../../lib":515,"./constants":856}],861:[function(e,B,V){B.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("./plot"),style:e("./style"),hoverPoints:e("./hover"),eventData:e("./event_data"),moduleType:"trace",name:"image",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},{"../../plots/cartesian":578,"./attributes":854,"./calc":855,"./defaults":857,"./event_data":858,"./hover":860,"./plot":862,"./style":863}],862:[function(e,B,V){var f=e("@plotly/d3"),l=e("../../lib"),m=l.strTranslate,x=e("../../constants/xmlns_namespaces"),t=e("./constants"),a=l.isIOS()||l.isSafari()||l.isIE();B.exports=function(r,n,d,s){var o=n.xaxis,y=n.yaxis,g=!(a||r._context._exportedPlot);l.makeTraceGroups(s,d,"im").each(function(b){var v=f.select(this),_=b[0],u=_.trace,T=(u.zsmooth==="fast"||u.zsmooth===!1&&g)&&!u._hasZ&&u._hasSource&&o.type==="linear"&&y.type==="linear";u._realImage=T;var c=_.z,A=_.x0,k=_.y0,p=_.w,w=_.h,h=u.dx,D=u.dy,S,M,L,R,z,P;for(P=0;S===void 0&&P<p;)S=o.c2p(A+P*h),P++;for(P=p;M===void 0&&P>0;)M=o.c2p(A+P*h),P--;for(P=0;R===void 0&&P<w;)R=y.c2p(k+P*D),P++;for(P=w;z===void 0&&P>0;)z=y.c2p(k+P*D),P--;if(M<S&&(L=M,M=S,S=L),z<R&&(L=R,R=z,z=L),!T){var I=.5;S=Math.max(-I*o._length,S),M=Math.min((1+I)*o._length,M),R=Math.max(-I*y._length,R),z=Math.min((1+I)*y._length,z)}var U=Math.round(M-S),O=Math.round(z-R),G=U<=0||O<=0;if(G){var $=v.selectAll("image").data([]);$.exit().remove();return}function tt(q){var W=document.createElement("canvas");W.width=U,W.height=O;var K=W.getContext("2d",{willReadFrequently:!0}),nt=function(Rt){return l.constrain(Math.round(o.c2p(A+Rt*h)-S),0,U)},it=function(Rt){return l.constrain(Math.round(y.c2p(k+Rt*D)-R),0,O)},ot=t.colormodel[u.colormodel],ct=ot.colormodel||u.colormodel,bt=ot.fmt,ut;for(P=0;P<_.w;P++){var pt=nt(P),yt=nt(P+1);if(!(yt===pt||isNaN(yt)||isNaN(pt)))for(var Tt=0;Tt<_.h;Tt++){var kt=it(Tt),zt=it(Tt+1);zt===kt||isNaN(zt)||isNaN(kt)||!q(P,Tt)||(ut=u._scaler(q(P,Tt)),ut?K.fillStyle=ct+"("+bt(ut).join(",")+")":K.fillStyle="rgba(0,0,0,0)",K.fillRect(pt,kt,yt-pt,zt-kt))}}return W}var Z=v.selectAll("image").data([b]);Z.enter().append("svg:image").attr({xmlns:x.svg,preserveAspectRatio:"none"}),Z.exit().remove();var X=u.zsmooth===!1?t.pixelatedStyle:"";if(T){var J=l.simpleMap(o.range,o.r2l),st=l.simpleMap(y.range,y.r2l),at=J[1]<J[0],lt=st[1]>st[0];if(at||lt){var F=S+U/2,H=R+O/2;X+="transform:"+m(F+"px",H+"px")+"scale("+(at?-1:1)+","+(lt?-1:1)+")"+m(-F+"px",-H+"px")+";"}}Z.attr("style",X);var et=new Promise(function(q){if(u._hasZ)q();else if(u._hasSource)if(u._canvas&&u._canvas.el.width===p&&u._canvas.el.height===w&&u._canvas.source===u.source)q();else{var W=document.createElement("canvas");W.width=p,W.height=w;var K=W.getContext("2d",{willReadFrequently:!0});u._image=u._image||new Image;var nt=u._image;nt.onload=function(){K.drawImage(nt,0,0),u._canvas={el:W,source:u.source},q()},nt.setAttribute("src",u.source)}}).then(function(){var q,W;if(u._hasZ)W=tt(function(it,ot){return c[ot][it]}),q=W.toDataURL("image/png");else if(u._hasSource)if(T)q=u.source;else{var K=u._canvas.el.getContext("2d",{willReadFrequently:!0}),nt=K.getImageData(0,0,p,w).data;W=tt(function(it,ot){var ct=4*(ot*p+it);return[nt[ct],nt[ct+1],nt[ct+2],nt[ct+3]]}),q=W.toDataURL("image/png")}Z.attr({"xlink:href":q,height:O,width:U,x:S,y:R})});r._promises.push(et)})}},{"../../constants/xmlns_namespaces":492,"../../lib":515,"./constants":856,"@plotly/d3":58}],863:[function(e,B,V){var f=e("@plotly/d3");B.exports=function(m){f.select(m).selectAll(".im image").style("opacity",function(x){return x[0].trace.opacity})}},{"@plotly/d3":58}],864:[function(e,B,V){var f=e("../../lib/extend").extendFlat,l=e("../../lib/extend").extendDeep,m=e("../../plot_api/edit_types").overrideAll,x=e("../../plots/font_attributes"),t=e("../../components/color/attributes"),a=e("../../plots/domain").attributes,i=e("../../plots/cartesian/layout_attributes"),r=e("../../plot_api/plot_template").templatedArray,n=e("../../constants/delta.js"),d=e("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,s=x({editType:"plot",colorEditType:"plot"}),o={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:t.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},y={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},g=r("step",l({},o,{range:y}));B.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:a({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:f({},s,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:d("value")},font:f({},s,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot",description:d("value")},increasing:{symbol:{valType:"string",dflt:n.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:n.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:n.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:n.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:f({},s,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:l({},o,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:t.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:m({range:y,visible:f({},i.visible,{dflt:!0}),tickmode:i.tickmode,nticks:i.nticks,tick0:i.tick0,dtick:i.dtick,tickvals:i.tickvals,ticktext:i.ticktext,ticks:f({},i.ticks,{dflt:"outside"}),ticklen:i.ticklen,tickwidth:i.tickwidth,tickcolor:i.tickcolor,ticklabelstep:i.ticklabelstep,showticklabels:i.showticklabels,tickfont:x({}),tickangle:i.tickangle,tickformat:i.tickformat,tickformatstops:i.tickformatstops,tickprefix:i.tickprefix,showtickprefix:i.showtickprefix,ticksuffix:i.ticksuffix,showticksuffix:i.showticksuffix,separatethousands:i.separatethousands,exponentformat:i.exponentformat,minexponent:i.minexponent,showexponent:i.showexponent,editType:"plot"},"plot"),steps:g,threshold:{line:{color:f({},o.line.color,{}),width:f({},o.line.width,{dflt:1}),editType:"plot"},thickness:f({},o.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},{"../../components/color/attributes":366,"../../constants/delta.js":485,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../../plots/cartesian/axis_format_attributes":569,"../../plots/cartesian/layout_attributes":579,"../../plots/domain":593,"../../plots/font_attributes":594}],865:[function(e,B,V){var f=e("../../plots/plots");V.name="indicator",V.plot=function(l,m,x,t){f.plotBasePlot(V.name,l,m,x,t)},V.clean=function(l,m,x,t){f.cleanBasePlot(V.name,l,m,x,t)}},{"../../plots/plots":628}],866:[function(e,B,V){function f(l,m){var x=[],t=m.value;typeof m._lastValue!="number"&&(m._lastValue=m.value);var a=m._lastValue,i=a;return m._hasDelta&&typeof m.delta.reference=="number"&&(i=m.delta.reference),x[0]={y:t,lastY:a,delta:t-i,relativeDelta:(t-i)/i},x}B.exports={calc:f}},{}],867:[function(e,B,V){B.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},{}],868:[function(e,B,V){var f=e("../../lib"),l=e("./attributes"),m=e("../../plots/domain").defaults,x=e("../../plot_api/plot_template"),t=e("../../plots/array_container_defaults"),a=e("./constants.js"),i=e("../../plots/cartesian/tick_value_defaults"),r=e("../../plots/cartesian/tick_mark_defaults"),n=e("../../plots/cartesian/tick_label_defaults"),d=e("../../plots/cartesian/prefix_suffix_defaults");function s(y,g,b,v){function _(P,I){return f.coerce(y,g,l,P,I)}m(g,v,_),_("mode"),g._hasNumber=g.mode.indexOf("number")!==-1,g._hasDelta=g.mode.indexOf("delta")!==-1,g._hasGauge=g.mode.indexOf("gauge")!==-1;var u=_("value");g._range=[0,typeof u=="number"?1.5*u:1];var T=new Array(2),c;g._hasNumber&&(_("number.valueformat"),_("number.font.color",v.font.color),_("number.font.family",v.font.family),_("number.font.size"),g.number.font.size===void 0&&(g.number.font.size=a.defaultNumberFontSize,T[0]=!0),_("number.prefix"),_("number.suffix"),c=g.number.font.size);var A;g._hasDelta&&(_("delta.font.color",v.font.color),_("delta.font.family",v.font.family),_("delta.font.size"),g.delta.font.size===void 0&&(g.delta.font.size=(g._hasNumber?.5:1)*(c||a.defaultNumberFontSize),T[1]=!0),_("delta.reference",g.value),_("delta.relative"),_("delta.valueformat",g.delta.relative?"2%":""),_("delta.increasing.symbol"),_("delta.increasing.color"),_("delta.decreasing.symbol"),_("delta.decreasing.color"),_("delta.position"),_("delta.prefix"),_("delta.suffix"),A=g.delta.font.size),g._scaleNumbers=(!g._hasNumber||T[0])&&(!g._hasDelta||T[1])||!1,_("title.font.color",v.font.color),_("title.font.family",v.font.family),_("title.font.size",.25*(c||A||a.defaultNumberFontSize)),_("title.text");var k,p,w,h;function D(P,I){return f.coerce(k,p,l.gauge,P,I)}function S(P,I){return f.coerce(w,h,l.gauge.axis,P,I)}if(g._hasGauge){k=y.gauge,k||(k={}),p=x.newContainer(g,"gauge"),D("shape");var M=g._isBullet=g.gauge.shape==="bullet";M||_("title.align","center");var L=g._isAngular=g.gauge.shape==="angular";L||_("align","center"),D("bgcolor",v.paper_bgcolor),D("borderwidth"),D("bordercolor"),D("bar.color"),D("bar.line.color"),D("bar.line.width");var R=a.valueThickness*(g.gauge.shape==="bullet"?.5:1);D("bar.thickness",R),t(k,p,{name:"steps",handleItemDefaults:o}),D("threshold.value"),D("threshold.thickness"),D("threshold.line.width"),D("threshold.line.color"),w={},k&&(w=k.axis||{}),h=x.newContainer(p,"axis"),S("visible"),g._range=S("range",g._range);var z={outerTicks:!0};i(w,h,S,"linear"),d(w,h,S,"linear",z),n(w,h,S,"linear",z),r(w,h,S,z)}else _("title.align","center"),_("align","center"),g._isAngular=g._isBullet=!1;g._length=null}function o(y,g){function b(v,_){return f.coerce(y,g,l.gauge.steps,v,_)}b("color"),b("line.color"),b("line.width"),b("range"),b("thickness")}B.exports={supplyDefaults:s}},{"../../lib":515,"../../plot_api/plot_template":555,"../../plots/array_container_defaults":561,"../../plots/cartesian/prefix_suffix_defaults":583,"../../plots/cartesian/tick_label_defaults":587,"../../plots/cartesian/tick_mark_defaults":588,"../../plots/cartesian/tick_value_defaults":589,"../../plots/domain":593,"./attributes":864,"./constants.js":867}],869:[function(e,B,V){B.exports={moduleType:"trace",name:"indicator",basePlotModule:e("./base_plot"),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:e("./attributes"),supplyDefaults:e("./defaults").supplyDefaults,calc:e("./calc").calc,plot:e("./plot"),meta:{}}},{"./attributes":864,"./base_plot":865,"./calc":866,"./defaults":868,"./plot":870}],870:[function(e,B,V){var f=e("@plotly/d3"),l=e("d3-interpolate").interpolate,m=e("d3-interpolate").interpolateNumber,x=e("../../lib"),t=x.strScale,a=x.strTranslate,i=x.rad2deg,r=e("../../constants/alignment").MID_SHIFT,n=e("../../components/drawing"),d=e("./constants"),s=e("../../lib/svg_text_utils"),o=e("../../plots/cartesian/axes"),y=e("../../plots/cartesian/axis_defaults"),g=e("../../plots/cartesian/position_defaults"),b=e("../../plots/cartesian/layout_attributes"),v=e("../../components/color"),_={left:"start",center:"middle",right:"end"},u={left:0,center:.5,right:1},T=/[yzafpnµmkMGTPEZY]/;function c(z){return z&&z.duration>0}B.exports=function(P,I,U,O){var G=P._fullLayout,$;c(U)&&O&&($=O()),x.makeTraceGroups(G._indicatorlayer,I,"trace").each(function(tt){var Z=tt[0],X=Z.trace,J=f.select(this),st=X._hasGauge,at=X._isAngular,lt=X._isBullet,F=X.domain,H={w:G._size.w*(F.x[1]-F.x[0]),h:G._size.h*(F.y[1]-F.y[0]),l:G._size.l+G._size.w*F.x[0],r:G._size.r+G._size.w*(1-F.x[1]),t:G._size.t+G._size.h*(1-F.y[1]),b:G._size.b+G._size.h*F.y[0]},et=H.l+H.w/2,q=H.t+H.h/2,W=Math.min(H.w/2,H.h),K=d.innerRadius*W,nt,it,ot,ct=X.align||"center";if(it=q,!st)nt=H.l+u[ct]*H.w,ot=function(wt){return S(wt,H.w,H.h)};else if(at&&(nt=et,it=q+W/2,ot=function(wt){return M(wt,.9*K)}),lt){var bt=d.bulletPadding,ut=1-d.bulletNumberDomainSize+bt;nt=H.l+(ut+(1-ut)*u[ct])*H.w,ot=function(wt){return S(wt,(d.bulletNumberDomainSize-bt)*H.w,H.h)}}p(P,J,tt,{numbersX:nt,numbersY:it,numbersScaler:ot,transitionOpts:U,onComplete:$});var pt,yt;st&&(pt={range:X.gauge.axis.range,color:X.gauge.bgcolor,line:{color:X.gauge.bordercolor,width:0},thickness:1},yt={range:X.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:X.gauge.bordercolor,width:X.gauge.borderwidth},thickness:1});var Tt=J.selectAll("g.angular").data(at?tt:[]);Tt.exit().remove();var kt=J.selectAll("g.angularaxis").data(at?tt:[]);kt.exit().remove(),at&&k(P,J,tt,{radius:W,innerRadius:K,gauge:Tt,layer:kt,size:H,gaugeBg:pt,gaugeOutline:yt,transitionOpts:U,onComplete:$});var zt=J.selectAll("g.bullet").data(lt?tt:[]);zt.exit().remove();var Rt=J.selectAll("g.bulletaxis").data(lt?tt:[]);Rt.exit().remove(),lt&&A(P,J,tt,{gauge:zt,layer:Rt,size:H,gaugeBg:pt,gaugeOutline:yt,transitionOpts:U,onComplete:$});var Gt=J.selectAll("text.title").data(tt);Gt.exit().remove(),Gt.enter().append("text").classed("title",!0),Gt.attr("text-anchor",function(){return lt?_.right:_[X.title.align]}).text(X.title.text).call(n.font,X.title.font).call(s.convertToTspans,P),Gt.attr("transform",function(){var wt=H.l+H.w*u[X.title.align],It,$t=d.titlePadding,Qt=n.bBox(Gt.node());if(st){if(at)if(X.gauge.axis.visible){var Nt=n.bBox(kt.node());It=Nt.top-$t-Qt.bottom}else It=H.t+H.h/2-W/2-Qt.bottom-$t;lt&&(It=it-(Qt.top+Qt.bottom)/2,wt=H.l-d.bulletPadding*H.w)}else It=X._numbersTop-$t-Qt.bottom;return a(wt,It)})})};function A(z,P,I,U){var O=I[0].trace,G=U.gauge,$=U.layer,tt=U.gaugeBg,Z=U.gaugeOutline,X=U.size,J=O.domain,st=U.transitionOpts,at=U.onComplete,lt,F,H,et,q;G.enter().append("g").classed("bullet",!0),G.attr("transform",a(X.l,X.t)),$.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),$.selectAll("g.xbulletaxistick,path,text").remove();var W=X.h,K=O.gauge.bar.thickness*W,nt=J.x[0],it=J.x[0]+(J.x[1]-J.x[0])*(O._hasNumber||O._hasDelta?1-d.bulletNumberDomainSize:1);lt=D(z,O.gauge.axis),lt._id="xbulletaxis",lt.domain=[nt,it],lt.setScale(),F=o.calcTicks(lt),H=o.makeTransTickFn(lt),et=o.getTickSigns(lt)[2],q=X.t+X.h,lt.visible&&(o.drawTicks(z,lt,{vals:lt.ticks==="inside"?o.clipEnds(lt,F):F,layer:$,path:o.makeTickPath(lt,q,et),transFn:H}),o.drawLabels(z,lt,{vals:F,layer:$,transFn:H,labelFns:o.makeLabelFns(lt,q)}));function ot(kt){kt.attr("width",function(zt){return Math.max(0,lt.c2p(zt.range[1])-lt.c2p(zt.range[0]))}).attr("x",function(zt){return lt.c2p(zt.range[0])}).attr("y",function(zt){return .5*(1-zt.thickness)*W}).attr("height",function(zt){return zt.thickness*W})}var ct=[tt].concat(O.gauge.steps),bt=G.selectAll("g.bg-bullet").data(ct);bt.enter().append("g").classed("bg-bullet",!0).append("rect"),bt.select("rect").call(ot).call(w),bt.exit().remove();var ut=G.selectAll("g.value-bullet").data([O.gauge.bar]);ut.enter().append("g").classed("value-bullet",!0).append("rect"),ut.select("rect").attr("height",K).attr("y",(W-K)/2).call(w),c(st)?ut.select("rect").transition().duration(st.duration).ease(st.easing).each("end",function(){at&&at()}).each("interrupt",function(){at&&at()}).attr("width",Math.max(0,lt.c2p(Math.min(O.gauge.axis.range[1],I[0].y)))):ut.select("rect").attr("width",typeof I[0].y=="number"?Math.max(0,lt.c2p(Math.min(O.gauge.axis.range[1],I[0].y))):0),ut.exit().remove();var pt=I.filter(function(){return O.gauge.threshold.value||O.gauge.threshold.value===0}),yt=G.selectAll("g.threshold-bullet").data(pt);yt.enter().append("g").classed("threshold-bullet",!0).append("line"),yt.select("line").attr("x1",lt.c2p(O.gauge.threshold.value)).attr("x2",lt.c2p(O.gauge.threshold.value)).attr("y1",(1-O.gauge.threshold.thickness)/2*W).attr("y2",(1-(1-O.gauge.threshold.thickness)/2)*W).call(v.stroke,O.gauge.threshold.line.color).style("stroke-width",O.gauge.threshold.line.width),yt.exit().remove();var Tt=G.selectAll("g.gauge-outline").data([Z]);Tt.enter().append("g").classed("gauge-outline",!0).append("rect"),Tt.select("rect").call(ot).call(w),Tt.exit().remove()}function k(z,P,I,U){var O=I[0].trace,G=U.size,$=U.radius,tt=U.innerRadius,Z=U.gaugeBg,X=U.gaugeOutline,J=[G.l+G.w/2,G.t+G.h/2+$/2],st=U.gauge,at=U.layer,lt=U.transitionOpts,F=U.onComplete,H=Math.PI/2;function et(Pt){var Yt=O.gauge.axis.range[0],ve=O.gauge.axis.range[1],Re=(Pt-Yt)/(ve-Yt)*Math.PI-H;return Re<-H?-H:Re>H?H:Re}function q(Pt){return f.svg.arc().innerRadius((tt+$)/2-Pt/2*($-tt)).outerRadius((tt+$)/2+Pt/2*($-tt)).startAngle(-H)}function W(Pt){Pt.attr("d",function(Yt){return q(Yt.thickness).startAngle(et(Yt.range[0])).endAngle(et(Yt.range[1]))()})}var K,nt,it,ot;st.enter().append("g").classed("angular",!0),st.attr("transform",a(J[0],J[1])),at.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),at.selectAll("g.xangularaxistick,path,text").remove(),K=D(z,O.gauge.axis),K.type="linear",K.range=O.gauge.axis.range,K._id="xangularaxis",K.ticklabeloverflow="allow",K.setScale();var ct=function(Pt){return(K.range[0]-Pt.x)/(K.range[1]-K.range[0])*Math.PI+Math.PI},bt={},ut=o.makeLabelFns(K,0),pt=ut.labelStandoff;bt.xFn=function(Pt){var Yt=ct(Pt);return Math.cos(Yt)*pt},bt.yFn=function(Pt){var Yt=ct(Pt),ve=Math.sin(Yt)>0?.2:1;return-Math.sin(Yt)*(pt+Pt.fontSize*ve)+Math.abs(Math.cos(Yt))*(Pt.fontSize*r)},bt.anchorFn=function(Pt){var Yt=ct(Pt),ve=Math.cos(Yt);return Math.abs(ve)<.1?"middle":ve>0?"start":"end"},bt.heightFn=function(Pt,Yt,ve){var Re=ct(Pt);return-.5*(1+Math.sin(Re))*ve};var yt=function(Pt){return a(J[0]+$*Math.cos(Pt),J[1]-$*Math.sin(Pt))};it=function(Pt){return yt(ct(Pt))};var Tt=function(Pt){var Yt=ct(Pt);return yt(Yt)+"rotate("+-i(Yt)+")"};if(nt=o.calcTicks(K),ot=o.getTickSigns(K)[2],K.visible){ot=K.ticks==="inside"?-1:1;var kt=(K.linewidth||1)/2;o.drawTicks(z,K,{vals:nt,layer:at,path:"M"+ot*kt+",0h"+ot*K.ticklen,transFn:Tt}),o.drawLabels(z,K,{vals:nt,layer:at,transFn:it,labelFns:bt})}var zt=[Z].concat(O.gauge.steps),Rt=st.selectAll("g.bg-arc").data(zt);Rt.enter().append("g").classed("bg-arc",!0).append("path"),Rt.select("path").call(W).call(w),Rt.exit().remove();var Gt=q(O.gauge.bar.thickness),wt=st.selectAll("g.value-arc").data([O.gauge.bar]);wt.enter().append("g").classed("value-arc",!0).append("path");var It=wt.select("path");c(lt)?(It.transition().duration(lt.duration).ease(lt.easing).each("end",function(){F&&F()}).each("interrupt",function(){F&&F()}).attrTween("d",h(Gt,et(I[0].lastY),et(I[0].y))),O._lastValue=I[0].y):It.attr("d",typeof I[0].y=="number"?Gt.endAngle(et(I[0].y)):"M0,0Z"),It.call(w),wt.exit().remove(),zt=[];var $t=O.gauge.threshold.value;($t||$t===0)&&zt.push({range:[$t,$t],color:O.gauge.threshold.color,line:{color:O.gauge.threshold.line.color,width:O.gauge.threshold.line.width},thickness:O.gauge.threshold.thickness});var Qt=st.selectAll("g.threshold-arc").data(zt);Qt.enter().append("g").classed("threshold-arc",!0).append("path"),Qt.select("path").call(W).call(w),Qt.exit().remove();var Nt=st.selectAll("g.gauge-outline").data([X]);Nt.enter().append("g").classed("gauge-outline",!0).append("path"),Nt.select("path").call(W).call(w),Nt.exit().remove()}function p(z,P,I,U){var O=I[0].trace,G=U.numbersX,$=U.numbersY,tt=O.align||"center",Z=_[tt],X=U.transitionOpts,J=U.onComplete,st=x.ensureSingle(P,"g","numbers"),at,lt,F,H=[];O._hasNumber&&H.push("number"),O._hasDelta&&(H.push("delta"),O.delta.position==="left"&&H.reverse());var et=st.selectAll("text").data(H);et.enter().append("text"),et.attr("text-anchor",function(){return Z}).attr("class",function(yt){return yt}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),et.exit().remove();function q(yt,Tt,kt,zt){if(yt.match("s")&&kt>=0!=zt>=0&&!Tt(kt).slice(-1).match(T)&&!Tt(zt).slice(-1).match(T)){var Rt=yt.slice().replace("s","f").replace(/\d+/,function(wt){return parseInt(wt)-1}),Gt=D(z,{tickformat:Rt});return function(wt){return Math.abs(wt)<1?o.tickText(Gt,wt).text:Tt(wt)}}else return Tt}function W(){var yt=D(z,{tickformat:O.number.valueformat},O._range);yt.setScale(),o.prepTicks(yt);var Tt=function(wt){return o.tickText(yt,wt).text},kt=O.number.suffix,zt=O.number.prefix,Rt=st.select("text.number");function Gt(){var wt=typeof I[0].y=="number"?zt+Tt(I[0].y)+kt:"-";Rt.text(wt).call(n.font,O.number.font).call(s.convertToTspans,z)}return c(X)?Rt.transition().duration(X.duration).ease(X.easing).each("end",function(){Gt(),J&&J()}).each("interrupt",function(){Gt(),J&&J()}).attrTween("text",function(){var wt=f.select(this),It=m(I[0].lastY,I[0].y);O._lastValue=I[0].y;var $t=q(O.number.valueformat,Tt,I[0].lastY,I[0].y);return function(Qt){wt.text(zt+$t(It(Qt))+kt)}}):Gt(),at=L(zt+Tt(I[0].y)+kt,O.number.font,Z,z),Rt}function K(){var yt=D(z,{tickformat:O.delta.valueformat},O._range);yt.setScale(),o.prepTicks(yt);var Tt=function(Qt){return o.tickText(yt,Qt).text},kt=O.delta.suffix,zt=O.delta.prefix,Rt=function(Qt){var Nt=O.delta.relative?Qt.relativeDelta:Qt.delta;return Nt},Gt=function(Qt,Nt){return Qt===0||typeof Qt!="number"||isNaN(Qt)?"-":(Qt>0?O.delta.increasing.symbol:O.delta.decreasing.symbol)+zt+Nt(Qt)+kt},wt=function(Qt){return Qt.delta>=0?O.delta.increasing.color:O.delta.decreasing.color};O._deltaLastValue===void 0&&(O._deltaLastValue=Rt(I[0]));var It=st.select("text.delta");It.call(n.font,O.delta.font).call(v.fill,wt({delta:O._deltaLastValue}));function $t(){It.text(Gt(Rt(I[0]),Tt)).call(v.fill,wt(I[0])).call(s.convertToTspans,z)}return c(X)?It.transition().duration(X.duration).ease(X.easing).tween("text",function(){var Qt=f.select(this),Nt=Rt(I[0]),Pt=O._deltaLastValue,Yt=q(O.delta.valueformat,Tt,Pt,Nt),ve=m(Pt,Nt);return O._deltaLastValue=Nt,function(Re){Qt.text(Gt(ve(Re),Yt)),Qt.call(v.fill,wt({delta:ve(Re)}))}}).each("end",function(){$t(),J&&J()}).each("interrupt",function(){$t(),J&&J()}):$t(),lt=L(Gt(Rt(I[0]),Tt),O.delta.font,Z,z),It}var nt=O.mode+O.align,it;if(O._hasDelta&&(it=K(),nt+=O.delta.position+O.delta.font.size+O.delta.font.family+O.delta.valueformat,nt+=O.delta.increasing.symbol+O.delta.decreasing.symbol,F=lt),O._hasNumber&&(W(),nt+=O.number.font.size+O.number.font.family+O.number.valueformat+O.number.suffix+O.number.prefix,F=at),O._hasDelta&&O._hasNumber){var ot=[(at.left+at.right)/2,(at.top+at.bottom)/2],ct=[(lt.left+lt.right)/2,(lt.top+lt.bottom)/2],bt,ut,pt=.75*O.delta.font.size;O.delta.position==="left"&&(bt=R(O,"deltaPos",0,-1*(at.width*u[O.align]+lt.width*(1-u[O.align])+pt),nt,Math.min),ut=ot[1]-ct[1],F={width:at.width+lt.width+pt,height:Math.max(at.height,lt.height),left:lt.left+bt,right:at.right,top:Math.min(at.top,lt.top+ut),bottom:Math.max(at.bottom,lt.bottom+ut)}),O.delta.position==="right"&&(bt=R(O,"deltaPos",0,at.width*(1-u[O.align])+lt.width*u[O.align]+pt,nt,Math.max),ut=ot[1]-ct[1],F={width:at.width+lt.width+pt,height:Math.max(at.height,lt.height),left:at.left,right:lt.right+bt,top:Math.min(at.top,lt.top+ut),bottom:Math.max(at.bottom,lt.bottom+ut)}),O.delta.position==="bottom"&&(bt=null,ut=lt.height,F={width:Math.max(at.width,lt.width),height:at.height+lt.height,left:Math.min(at.left,lt.left),right:Math.max(at.right,lt.right),top:at.bottom-at.height,bottom:at.bottom+lt.height}),O.delta.position==="top"&&(bt=null,ut=at.top,F={width:Math.max(at.width,lt.width),height:at.height+lt.height,left:Math.min(at.left,lt.left),right:Math.max(at.right,lt.right),top:at.bottom-at.height-lt.height,bottom:at.bottom}),it.attr({dx:bt,dy:ut})}(O._hasNumber||O._hasDelta)&&st.attr("transform",function(){var yt=U.numbersScaler(F);nt+=yt[2];var Tt=R(O,"numbersScale",1,yt[0],nt,Math.min),kt;O._scaleNumbers||(Tt=1),O._isAngular?kt=$-Tt*F.bottom:kt=$-Tt*(F.top+F.bottom)/2,O._numbersTop=Tt*F.top+kt;var zt=F[tt];tt==="center"&&(zt=(F.left+F.right)/2);var Rt=G-Tt*zt;return Rt=R(O,"numbersTranslate",0,Rt,nt,Math.max),a(Rt,kt)+t(Tt)})}function w(z){z.each(function(P){v.stroke(f.select(this),P.line.color)}).each(function(P){v.fill(f.select(this),P.color)}).style("stroke-width",function(P){return P.line.width})}function h(z,P,I){return function(){var U=l(P,I);return function(O){return z.endAngle(U(O))()}}}function D(z,P,I){var U=z._fullLayout,O=x.extendFlat({type:"linear",ticks:"outside",range:I,showline:!0},P),G={type:"linear",_id:"x"+P._id},$={letter:"x",font:U.font,noHover:!0,noTickson:!0};function tt(Z,X){return x.coerce(O,G,b,Z,X)}return y(O,G,tt,$,U),g(O,G,tt,$),G}function S(z,P,I){var U=Math.min(P/z.width,I/z.height);return[U,z,P+"x"+I]}function M(z,P){var I=Math.sqrt(z.width/2*(z.width/2)+z.height*z.height),U=P/I;return[U,z,P]}function L(z,P,I,U){var O=document.createElementNS("http://www.w3.org/2000/svg","text"),G=f.select(O);return G.text(z).attr("x",0).attr("y",0).attr("text-anchor",I).attr("data-unformatted",z).call(s.convertToTspans,U).call(n.font,P),n.bBox(G.node())}function R(z,P,I,U,O,G){var $="_cache"+P;z[$]&&z[$].key===O||(z[$]={key:O,value:I});var tt=x.aggNums(G,null,[z[$].value,U],2);return z[$].value=tt,tt}},{"../../components/color":367,"../../components/drawing":389,"../../constants/alignment":483,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"../../plots/cartesian/axis_defaults":568,"../../plots/cartesian/layout_attributes":579,"../../plots/cartesian/position_defaults":582,"./constants":867,"@plotly/d3":58,"d3-interpolate":116}],871:[function(e,B,V){var f=e("../../components/colorscale/attributes"),l=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,m=e("../../plots/template_attributes").hovertemplateAttrs,x=e("../mesh3d/attributes"),t=e("../../plots/attributes"),a=e("../../lib/extend").extendFlat,i=e("../../plot_api/edit_types").overrideAll;function r(s){return{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}}function n(s){return{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}}var d=B.exports=i(a({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:r(),y:r(),z:r()},caps:{x:n(),y:n(),z:n()},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:m(),xhoverformat:l("x"),yhoverformat:l("y"),zhoverformat:l("z"),valuehoverformat:l("value",1),showlegend:a({},t.showlegend,{dflt:!1})},f("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:x.opacity,lightposition:x.lightposition,lighting:x.lighting,flatshading:x.flatshading,contour:x.contour,hoverinfo:a({},t.hoverinfo)}),"calc","nested");d.flatshading.dflt=!0,d.lighting.facenormalsepsilon.dflt=0,d.x.editType=d.y.editType=d.z.editType=d.value.editType="calc+clearAxisTypes",d.transforms=void 0},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../mesh3d/attributes":876}],872:[function(e,B,V){var f=e("../../components/colorscale/calc"),l=e("../streamtube/calc").processGrid,m=e("../streamtube/calc").filter;B.exports=function(t,a){a._len=Math.min(a.x.length,a.y.length,a.z.length,a.value.length),a._x=m(a.x,a._len),a._y=m(a.y,a._len),a._z=m(a.z,a._len),a._value=m(a.value,a._len);var i=l(a);a._gridFill=i.fill,a._Xs=i.Xs,a._Ys=i.Ys,a._Zs=i.Zs,a._len=i.len;for(var r=1/0,n=-1/0,d=0;d<a._len;d++){var s=a._value[d];r=Math.min(r,s),n=Math.max(n,s)}a._minValues=r,a._maxValues=n,a._vMin=a.isomin===void 0||a.isomin===null?r:a.isomin,a._vMax=a.isomax===void 0||a.isomin===null?n:a.isomax,f(t,a,{vals:[a._vMin,a._vMax],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":375,"../streamtube/calc":1054}],873:[function(e,B,V){var f=e("../../../stackgl_modules").gl_mesh3d,l=e("../../lib/gl_format_color").parseColorScale,m=e("../../lib/str2rgbarray"),x=e("../../components/colorscale").extractOpts,t=e("../../plots/gl3d/zip3"),a=function(o,y){for(var g=y.length-1;g>0;g--){var b=Math.min(y[g],y[g-1]),v=Math.max(y[g],y[g-1]);if(v>b&&b<o&&o<=v)return{id:g,distRatio:(v-o)/(v-b)}}return{id:0,distRatio:0}};function i(o,y,g){this.scene=o,this.uid=g,this.mesh=y,this.name="",this.data=null,this.showContour=!1}var r=i.prototype;r.handlePick=function(o){if(o.object===this.mesh){var y=o.data.index,g=this.data._meshX[y],b=this.data._meshY[y],v=this.data._meshZ[y],_=this.data._Ys.length,u=this.data._Zs.length,T=a(g,this.data._Xs).id,c=a(b,this.data._Ys).id,A=a(v,this.data._Zs).id,k=o.index=A+u*c+u*_*T;o.traceCoordinate=[this.data._meshX[k],this.data._meshY[k],this.data._meshZ[k],this.data._value[k]];var p=this.data.hovertext||this.data.text;return Array.isArray(p)&&p[k]!==void 0?o.textLabel=p[k]:p&&(o.textLabel=p),!0}},r.update=function(o){var y=this.scene,g=y.fullSceneLayout;this.data=d(o);function b(c,A,k,p){return A.map(function(w){return c.d2l(w,0,p)*k})}var v=t(b(g.xaxis,o._meshX,y.dataScale[0],o.xcalendar),b(g.yaxis,o._meshY,y.dataScale[1],o.ycalendar),b(g.zaxis,o._meshZ,y.dataScale[2],o.zcalendar)),_=t(o._meshI,o._meshJ,o._meshK),u={positions:v,cells:_,lightPosition:[o.lightposition.x,o.lightposition.y,o.lightposition.z],ambient:o.lighting.ambient,diffuse:o.lighting.diffuse,specular:o.lighting.specular,roughness:o.lighting.roughness,fresnel:o.lighting.fresnel,vertexNormalsEpsilon:o.lighting.vertexnormalsepsilon,faceNormalsEpsilon:o.lighting.facenormalsepsilon,opacity:o.opacity,contourEnable:o.contour.show,contourColor:m(o.contour.color).slice(0,3),contourWidth:o.contour.width,useFacetNormals:o.flatshading},T=x(o);u.vertexIntensity=o._meshIntensity,u.vertexIntensityBounds=[T.min,T.max],u.colormap=l(o),this.mesh.update(u)},r.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var n=["xyz","xzy","yxz","yzx","zxy","zyx"];function d(o){o._meshI=[],o._meshJ=[],o._meshK=[];var y=o.surface.show,g=o.spaceframe.show,b=o.surface.fill,v=o.spaceframe.fill,_=!1,u=!1,T=0,c,A,k=o._Xs,p=o._Ys,w=o._Zs,h=k.length,D=p.length,S=w.length,M=n.indexOf(o._gridFill.replace(/-/g,"").replace(/\+/g,"")),L=function(ze,Ee,Wt){switch(M){case 5:return Wt+S*Ee+S*D*ze;case 4:return Wt+S*ze+S*h*Ee;case 3:return Ee+D*Wt+D*S*ze;case 2:return Ee+D*ze+D*h*Wt;case 1:return ze+h*Wt+h*S*Ee;default:return ze+h*Ee+h*D*Wt}},R=o._minValues,z=o._maxValues,P=o._vMin,I=o._vMax,U,O,G,$;function tt(ze,Ee,Wt){for(var ee=$.length,Xt=A;Xt<ee;Xt++)if(ze===U[Xt]&&Ee===O[Xt]&&Wt===G[Xt])return Xt;return-1}function Z(){A=c}function X(){U=[],O=[],G=[],$=[],c=0,Z()}function J(ze,Ee,Wt,ee){return U.push(ze),O.push(Ee),G.push(Wt),$.push(ee),c++,c-1}function st(ze,Ee,Wt){return o._meshI.push(ze),o._meshJ.push(Ee),o._meshK.push(Wt),T++,T-1}function at(ze,Ee,Wt){for(var ee=[],Xt=0;Xt<ze.length;Xt++)ee[Xt]=(ze[Xt]+Ee[Xt]+Wt[Xt])/3;return ee}function lt(ze,Ee,Wt){for(var ee=[],Xt=0;Xt<ze.length;Xt++)ee[Xt]=ze[Xt]*(1-Wt)+Wt*Ee[Xt];return ee}var F;function H(ze){F=ze}function et(ze,Ee){var Wt=ze[0],ee=ze[1],Xt=ze[2],St=at(Wt,ee,Xt),Vt=Math.sqrt(1-F),Zt=lt(St,Wt,Vt),qt=lt(St,ee,Vt),Te=lt(St,Xt,Vt),me=Ee[0],Ne=Ee[1],Ke=Ee[2];return{xyzv:[[Wt,ee,qt],[qt,Zt,Wt],[ee,Xt,Te],[Te,qt,ee],[Xt,Wt,Zt],[Zt,Te,Xt]],abc:[[me,Ne,-1],[-1,-1,me],[Ne,Ke,-1],[-1,-1,Ne],[Ke,me,-1],[-1,-1,Ke]]}}function q(ze,Ee){return ze==="all"||ze===null?!0:ze.indexOf(Ee)>-1}function W(ze,Ee){return ze===null?Ee:ze}function K(ze,Ee,Wt){Z();var ee=[Ee],Xt=[Wt];if(F>=1)ee=[Ee],Xt=[Wt];else if(F>0){var St=et(Ee,Wt);ee=St.xyzv,Xt=St.abc}for(var Vt=0;Vt<ee.length;Vt++){Ee=ee[Vt],Wt=Xt[Vt];for(var Zt=[],qt=0;qt<3;qt++){var Te=Ee[qt][0],me=Ee[qt][1],Ne=Ee[qt][2],Ke=Ee[qt][3],He=Wt[qt]>-1?Wt[qt]:tt(Te,me,Ne);He>-1?Zt[qt]=He:Zt[qt]=J(Te,me,Ne,W(ze,Ke))}st(Zt[0],Zt[1],Zt[2])}}function nt(ze,Ee,Wt){var ee=function(Xt,St,Vt){K(ze,[Ee[Xt],Ee[St],Ee[Vt]],[Wt[Xt],Wt[St],Wt[Vt]])};ee(0,1,2),ee(2,3,0)}function it(ze,Ee,Wt){var ee=function(Xt,St,Vt){K(ze,[Ee[Xt],Ee[St],Ee[Vt]],[Wt[Xt],Wt[St],Wt[Vt]])};ee(0,1,2),ee(3,0,1),ee(2,3,0),ee(1,2,3)}function ot(ze,Ee,Wt,ee){var Xt=ze[3];Xt<Wt&&(Xt=Wt),Xt>ee&&(Xt=ee);for(var St=(ze[3]-Xt)/(ze[3]-Ee[3]+1e-9),Vt=[],Zt=0;Zt<4;Zt++)Vt[Zt]=(1-St)*ze[Zt]+St*Ee[Zt];return Vt}function ct(ze,Ee,Wt){return ze>=Ee&&ze<=Wt}function bt(ze){var Ee=.001*(I-P);return ze>=P-Ee&&ze<=I+Ee}function ut(ze){for(var Ee=[],Wt=0;Wt<4;Wt++){var ee=ze[Wt];Ee.push([o._x[ee],o._y[ee],o._z[ee],o._value[ee]])}return Ee}var pt=3;function yt(ze,Ee,Wt,ee,Xt,St){St||(St=1),Wt=[-1,-1,-1];var Vt=!1,Zt=[ct(Ee[0][3],ee,Xt),ct(Ee[1][3],ee,Xt),ct(Ee[2][3],ee,Xt)];if(!Zt[0]&&!Zt[1]&&!Zt[2])return!1;var qt=function(me,Ne,Ke){return bt(Ne[0][3])&&bt(Ne[1][3])&&bt(Ne[2][3])?(K(me,Ne,Ke),!0):St<pt?yt(me,Ne,Ke,P,I,++St):!1};if(Zt[0]&&Zt[1]&&Zt[2])return qt(ze,Ee,Wt)||Vt;var Te=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(me){if(Zt[me[0]]&&Zt[me[1]]&&!Zt[me[2]]){var Ne=Ee[me[0]],Ke=Ee[me[1]],He=Ee[me[2]],Xe=ot(He,Ne,ee,Xt),er=ot(He,Ke,ee,Xt);Vt=qt(ze,[er,Xe,Ne],[-1,-1,Wt[me[0]]])||Vt,Vt=qt(ze,[Ne,Ke,er],[Wt[me[0]],Wt[me[1]],-1])||Vt,Te=!0}}),Te||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(me){if(Zt[me[0]]&&!Zt[me[1]]&&!Zt[me[2]]){var Ne=Ee[me[0]],Ke=Ee[me[1]],He=Ee[me[2]],Xe=ot(Ke,Ne,ee,Xt),er=ot(He,Ne,ee,Xt);Vt=qt(ze,[er,Xe,Ne],[-1,-1,Wt[me[0]]])||Vt,Te=!0}}),Vt}function Tt(ze,Ee,Wt,ee){var Xt=!1,St=ut(Ee),Vt=[ct(St[0][3],Wt,ee),ct(St[1][3],Wt,ee),ct(St[2][3],Wt,ee),ct(St[3][3],Wt,ee)];if(!Vt[0]&&!Vt[1]&&!Vt[2]&&!Vt[3])return Xt;if(Vt[0]&&Vt[1]&&Vt[2]&&Vt[3])return u&&(Xt=it(ze,St,Ee)||Xt),Xt;var Zt=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(qt){if(Vt[qt[0]]&&Vt[qt[1]]&&Vt[qt[2]]&&!Vt[qt[3]]){var Te=St[qt[0]],me=St[qt[1]],Ne=St[qt[2]],Ke=St[qt[3]];if(u)Xt=K(ze,[Te,me,Ne],[Ee[qt[0]],Ee[qt[1]],Ee[qt[2]]])||Xt;else{var He=ot(Ke,Te,Wt,ee),Xe=ot(Ke,me,Wt,ee),er=ot(Ke,Ne,Wt,ee);Xt=K(null,[He,Xe,er],[-1,-1,-1])||Xt}Zt=!0}}),Zt||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(qt){if(Vt[qt[0]]&&Vt[qt[1]]&&!Vt[qt[2]]&&!Vt[qt[3]]){var Te=St[qt[0]],me=St[qt[1]],Ne=St[qt[2]],Ke=St[qt[3]],He=ot(Ne,Te,Wt,ee),Xe=ot(Ne,me,Wt,ee),er=ot(Ke,me,Wt,ee),We=ot(Ke,Te,Wt,ee);u?(Xt=K(ze,[Te,We,He],[Ee[qt[0]],-1,-1])||Xt,Xt=K(ze,[me,Xe,er],[Ee[qt[1]],-1,-1])||Xt):Xt=nt(null,[He,Xe,er,We],[-1,-1,-1,-1])||Xt,Zt=!0}}),Zt)||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(qt){if(Vt[qt[0]]&&!Vt[qt[1]]&&!Vt[qt[2]]&&!Vt[qt[3]]){var Te=St[qt[0]],me=St[qt[1]],Ne=St[qt[2]],Ke=St[qt[3]],He=ot(me,Te,Wt,ee),Xe=ot(Ne,Te,Wt,ee),er=ot(Ke,Te,Wt,ee);u?(Xt=K(ze,[Te,He,Xe],[Ee[qt[0]],-1,-1])||Xt,Xt=K(ze,[Te,Xe,er],[Ee[qt[0]],-1,-1])||Xt,Xt=K(ze,[Te,er,He],[Ee[qt[0]],-1,-1])||Xt):Xt=K(null,[He,Xe,er],[-1,-1,-1])||Xt,Zt=!0}}),Xt}function kt(ze,Ee,Wt,ee,Xt,St,Vt,Zt,qt,Te,me){var Ne=!1;return _&&(q(ze,"A")&&(Ne=Tt(null,[Ee,Wt,ee,St],Te,me)||Ne),q(ze,"B")&&(Ne=Tt(null,[Wt,ee,Xt,qt],Te,me)||Ne),q(ze,"C")&&(Ne=Tt(null,[Wt,St,Vt,qt],Te,me)||Ne),q(ze,"D")&&(Ne=Tt(null,[ee,St,Zt,qt],Te,me)||Ne),q(ze,"E")&&(Ne=Tt(null,[Wt,ee,St,qt],Te,me)||Ne)),u&&(Ne=Tt(ze,[Wt,ee,St,qt],Te,me)||Ne),Ne}function zt(ze,Ee,Wt,ee,Xt,St,Vt,Zt){return[Zt[0]===!0?!0:yt(ze,ut([Ee,Wt,ee]),[Ee,Wt,ee],St,Vt),Zt[1]===!0?!0:yt(ze,ut([ee,Xt,Ee]),[ee,Xt,Ee],St,Vt)]}function Rt(ze,Ee,Wt,ee,Xt,St,Vt,Zt,qt){return Zt?zt(ze,Ee,Wt,Xt,ee,St,Vt,qt):zt(ze,Wt,Xt,ee,Ee,St,Vt,qt)}function Gt(ze,Ee,Wt,ee,Xt,St,Vt){var Zt=!1,qt,Te,me,Ne,Ke=function(){Zt=yt(ze,[qt,Te,me],[-1,-1,-1],Xt,St)||Zt,Zt=yt(ze,[me,Ne,qt],[-1,-1,-1],Xt,St)||Zt},He=Vt[0],Xe=Vt[1],er=Vt[2];return He&&(qt=lt(ut([L(Ee,Wt-0,ee-0)])[0],ut([L(Ee-1,Wt-0,ee-0)])[0],He),Te=lt(ut([L(Ee,Wt-0,ee-1)])[0],ut([L(Ee-1,Wt-0,ee-1)])[0],He),me=lt(ut([L(Ee,Wt-1,ee-1)])[0],ut([L(Ee-1,Wt-1,ee-1)])[0],He),Ne=lt(ut([L(Ee,Wt-1,ee-0)])[0],ut([L(Ee-1,Wt-1,ee-0)])[0],He),Ke()),Xe&&(qt=lt(ut([L(Ee-0,Wt,ee-0)])[0],ut([L(Ee-0,Wt-1,ee-0)])[0],Xe),Te=lt(ut([L(Ee-0,Wt,ee-1)])[0],ut([L(Ee-0,Wt-1,ee-1)])[0],Xe),me=lt(ut([L(Ee-1,Wt,ee-1)])[0],ut([L(Ee-1,Wt-1,ee-1)])[0],Xe),Ne=lt(ut([L(Ee-1,Wt,ee-0)])[0],ut([L(Ee-1,Wt-1,ee-0)])[0],Xe),Ke()),er&&(qt=lt(ut([L(Ee-0,Wt-0,ee)])[0],ut([L(Ee-0,Wt-0,ee-1)])[0],er),Te=lt(ut([L(Ee-0,Wt-1,ee)])[0],ut([L(Ee-0,Wt-1,ee-1)])[0],er),me=lt(ut([L(Ee-1,Wt-1,ee)])[0],ut([L(Ee-1,Wt-1,ee-1)])[0],er),Ne=lt(ut([L(Ee-1,Wt-0,ee)])[0],ut([L(Ee-1,Wt-0,ee-1)])[0],er),Ke()),Zt}function wt(ze,Ee,Wt,ee,Xt,St,Vt,Zt,qt,Te,me,Ne){var Ke=ze;return Ne?(_&&ze==="even"&&(Ke=null),kt(Ke,Ee,Wt,ee,Xt,St,Vt,Zt,qt,Te,me)):(_&&ze==="odd"&&(Ke=null),kt(Ke,qt,Zt,Vt,St,Xt,ee,Wt,Ee,Te,me))}function It(ze,Ee,Wt,ee,Xt){for(var St=[],Vt=0,Zt=0;Zt<Ee.length;Zt++)for(var qt=Ee[Zt],Te=1;Te<S;Te++)for(var me=1;me<D;me++)St.push(Rt(ze,L(qt,me-1,Te-1),L(qt,me-1,Te),L(qt,me,Te-1),L(qt,me,Te),Wt,ee,(qt+me+Te)%2,Xt&&Xt[Vt]?Xt[Vt]:[])),Vt++;return St}function $t(ze,Ee,Wt,ee,Xt){for(var St=[],Vt=0,Zt=0;Zt<Ee.length;Zt++)for(var qt=Ee[Zt],Te=1;Te<h;Te++)for(var me=1;me<S;me++)St.push(Rt(ze,L(Te-1,qt,me-1),L(Te,qt,me-1),L(Te-1,qt,me),L(Te,qt,me),Wt,ee,(Te+qt+me)%2,Xt&&Xt[Vt]?Xt[Vt]:[])),Vt++;return St}function Qt(ze,Ee,Wt,ee,Xt){for(var St=[],Vt=0,Zt=0;Zt<Ee.length;Zt++)for(var qt=Ee[Zt],Te=1;Te<D;Te++)for(var me=1;me<h;me++)St.push(Rt(ze,L(me-1,Te-1,qt),L(me-1,Te,qt),L(me,Te-1,qt),L(me,Te,qt),Wt,ee,(me+Te+qt)%2,Xt&&Xt[Vt]?Xt[Vt]:[])),Vt++;return St}function Nt(ze,Ee,Wt){for(var ee=1;ee<S;ee++)for(var Xt=1;Xt<D;Xt++)for(var St=1;St<h;St++)wt(ze,L(St-1,Xt-1,ee-1),L(St-1,Xt-1,ee),L(St-1,Xt,ee-1),L(St-1,Xt,ee),L(St,Xt-1,ee-1),L(St,Xt-1,ee),L(St,Xt,ee-1),L(St,Xt,ee),Ee,Wt,(St+Xt+ee)%2)}function Pt(ze,Ee,Wt){u=!0,Nt(ze,Ee,Wt),u=!1}function Yt(ze,Ee,Wt){_=!0,Nt(ze,Ee,Wt),_=!1}function ve(ze,Ee,Wt,ee,Xt,St){for(var Vt=[],Zt=0,qt=0;qt<Ee.length;qt++)for(var Te=Ee[qt],me=1;me<S;me++)for(var Ne=1;Ne<D;Ne++)Vt.push(Gt(ze,Te,Ne,me,Wt,ee,Xt[qt],St&&St[Zt]?St[Zt]:[])),Zt++;return Vt}function Re(ze,Ee,Wt,ee,Xt,St){for(var Vt=[],Zt=0,qt=0;qt<Ee.length;qt++)for(var Te=Ee[qt],me=1;me<h;me++)for(var Ne=1;Ne<S;Ne++)Vt.push(Gt(ze,me,Te,Ne,Wt,ee,Xt[qt],St&&St[Zt]?St[Zt]:[])),Zt++;return Vt}function ir(ze,Ee,Wt,ee,Xt,St){for(var Vt=[],Zt=0,qt=0;qt<Ee.length;qt++)for(var Te=Ee[qt],me=1;me<D;me++)for(var Ne=1;Ne<h;Ne++)Vt.push(Gt(ze,Ne,me,Te,Wt,ee,Xt[qt],St&&St[Zt]?St[Zt]:[])),Zt++;return Vt}function Ie(ze,Ee){for(var Wt=[],ee=ze;ee<Ee;ee++)Wt.push(ee);return Wt}function Be(){for(var ze=0;ze<h;ze++)for(var Ee=0;Ee<D;Ee++)for(var Wt=0;Wt<S;Wt++){var ee=L(ze,Ee,Wt);J(o._x[ee],o._y[ee],o._z[ee],o._value[ee])}}function Ye(){X(),Be();var ze=null;if(g&&v&&(H(v),Pt(ze,P,I)),y&&b){H(b);for(var Ee=o.surface.pattern,Wt=o.surface.count,ee=0;ee<Wt;ee++){var Xt=Wt===1?.5:ee/(Wt-1),St=(1-Xt)*P+Xt*I,Vt=Math.abs(St-R),Zt=Math.abs(St-z),qt=Vt>Zt?[R,St]:[St,z];Yt(Ee,qt[0],qt[1])}}var Te=[[Math.min(P,z),Math.max(P,z)],[Math.min(R,I),Math.max(R,I)]];["x","y","z"].forEach(function(me){for(var Ne=[],Ke=0;Ke<Te.length;Ke++){var He=0,Xe=Te[Ke][0],er=Te[Ke][1],We=o.slices[me];if(We.show&&We.fill){H(We.fill);var hr=[],Wr=[],dn=[];if(We.locations.length)for(var Qr=0;Qr<We.locations.length;Qr++){var le=a(We.locations[Qr],me==="x"?k:me==="y"?p:w);le.distRatio===0?hr.push(le.id):le.id>0&&(Wr.push(le.id),me==="x"?dn.push([le.distRatio,0,0]):me==="y"?dn.push([0,le.distRatio,0]):dn.push([0,0,le.distRatio]))}else me==="x"?hr=Ie(1,h-1):me==="y"?hr=Ie(1,D-1):hr=Ie(1,S-1);Wr.length>0&&(me==="x"?Ne[He]=ve(ze,Wr,Xe,er,dn,Ne[He]):me==="y"?Ne[He]=Re(ze,Wr,Xe,er,dn,Ne[He]):Ne[He]=ir(ze,Wr,Xe,er,dn,Ne[He]),He++),hr.length>0&&(me==="x"?Ne[He]=It(ze,hr,Xe,er,Ne[He]):me==="y"?Ne[He]=$t(ze,hr,Xe,er,Ne[He]):Ne[He]=Qt(ze,hr,Xe,er,Ne[He]),He++)}var Qe=o.caps[me];Qe.show&&Qe.fill&&(H(Qe.fill),me==="x"?Ne[He]=It(ze,[0,h-1],Xe,er,Ne[He]):me==="y"?Ne[He]=$t(ze,[0,D-1],Xe,er,Ne[He]):Ne[He]=Qt(ze,[0,S-1],Xe,er,Ne[He]),He++)}}),T===0&&X(),o._meshX=U,o._meshY=O,o._meshZ=G,o._meshIntensity=$,o._Xs=k,o._Ys=p,o._Zs=w}return Ye(),o}function s(o,y){var g=o.glplot.gl,b=f({gl:g}),v=new i(o,b,y.uid);return b._trace=v,v.update(y),o.glplot.add(b),v}B.exports={findNearestOnAxis:a,generateIsoMeshes:d,createIsosurfaceTrace:s}},{"../../../stackgl_modules":1133,"../../components/colorscale":379,"../../lib/gl_format_color":511,"../../lib/str2rgbarray":540,"../../plots/gl3d/zip3":618}],874:[function(e,B,V){var f=e("../../lib"),l=e("../../registry"),m=e("./attributes"),x=e("../../components/colorscale/defaults");function t(i,r,n,d){function s(o,y){return f.coerce(i,r,m,o,y)}a(i,r,n,d,s)}function a(i,r,n,d,s){var o=s("isomin"),y=s("isomax");y!=null&&o!==void 0&&o!==null&&o>y&&(r.isomin=null,r.isomax=null);var g=s("x"),b=s("y"),v=s("z"),_=s("value");if(!g||!g.length||!b||!b.length||!v||!v.length||!_||!_.length){r.visible=!1;return}var u=l.getComponentMethod("calendars","handleTraceDefaults");u(i,r,["x","y","z"],d),s("valuehoverformat"),["x","y","z"].forEach(function(k){s(k+"hoverformat");var p="caps."+k,w=s(p+".show");w&&s(p+".fill");var h="slices."+k,D=s(h+".show");D&&(s(h+".fill"),s(h+".locations"))});var T=s("spaceframe.show");T&&s("spaceframe.fill");var c=s("surface.show");c&&(s("surface.count"),s("surface.fill"),s("surface.pattern"));var A=s("contour.show");A&&(s("contour.color"),s("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(k){s(k)}),x(i,r,d,s,{prefix:"",cLetter:"c"}),r._length=null}B.exports={supplyDefaults:t,supplyIsoDefaults:a}},{"../../components/colorscale/defaults":377,"../../lib":515,"../../registry":647,"./attributes":871}],875:[function(e,B,V){B.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults").supplyDefaults,calc:e("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:e("./convert").createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:e("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":607,"./attributes":871,"./calc":872,"./convert":873,"./defaults":874}],876:[function(e,B,V){var f=e("../../components/colorscale/attributes"),l=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,m=e("../../plots/template_attributes").hovertemplateAttrs,x=e("../surface/attributes"),t=e("../../plots/attributes"),a=e("../../lib/extend").extendFlat;B.exports=a({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:m({editType:"calc"}),xhoverformat:l("x"),yhoverformat:l("y"),zhoverformat:l("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},f("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:x.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:a({},x.contours.x.show,{}),color:x.contours.x.color,width:x.contours.x.width,editType:"calc"},lightposition:{x:a({},x.lightposition.x,{dflt:1e5}),y:a({},x.lightposition.y,{dflt:1e5}),z:a({},x.lightposition.z,{dflt:0}),editType:"calc"},lighting:a({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},x.lighting),hoverinfo:a({},t.hoverinfo,{editType:"calc"}),showlegend:a({},t.showlegend,{dflt:!1})})},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../surface/attributes":1070}],877:[function(e,B,V){var f=e("../../components/colorscale/calc");B.exports=function(m,x){x.intensity&&f(m,x,{vals:x.intensity,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":375}],878:[function(e,B,V){var f=e("../../../stackgl_modules").gl_mesh3d,l=e("../../../stackgl_modules").delaunay_triangulate,m=e("../../../stackgl_modules").alpha_shape,x=e("../../../stackgl_modules").convex_hull,t=e("../../lib/gl_format_color").parseColorScale,a=e("../../lib/str2rgbarray"),i=e("../../components/colorscale").extractOpts,r=e("../../plots/gl3d/zip3");function n(_,u,T){this.scene=_,this.uid=T,this.mesh=u,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var d=n.prototype;d.handlePick=function(_){if(_.object===this.mesh){var u=_.index=_.data.index;_.data._cellCenter?_.traceCoordinate=_.data.dataCoordinate:_.traceCoordinate=[this.data.x[u],this.data.y[u],this.data.z[u]];var T=this.data.hovertext||this.data.text;return Array.isArray(T)&&T[u]!==void 0?_.textLabel=T[u]:T&&(_.textLabel=T),!0}};function s(_){for(var u=[],T=_.length,c=0;c<T;c++)u[c]=a(_[c]);return u}function o(_,u,T,c){for(var A=[],k=u.length,p=0;p<k;p++)A[p]=_.d2l(u[p],0,c)*T;return A}function y(_){for(var u=[],T=_.length,c=0;c<T;c++)u[c]=Math.round(_[c]);return u}function g(_,u){for(var T=["x","y","z"].indexOf(_),c=[],A=u.length,k=0;k<A;k++)c[k]=[u[k][(T+1)%3],u[k][(T+2)%3]];return l(c)}function b(_,u){for(var T=_.length,c=0;c<T;c++)if(_[c]<=-.5||_[c]>=u-.5)return!1;return!0}d.update=function(_){var u=this.scene,T=u.fullSceneLayout;this.data=_;var c=_.x.length,A=r(o(T.xaxis,_.x,u.dataScale[0],_.xcalendar),o(T.yaxis,_.y,u.dataScale[1],_.ycalendar),o(T.zaxis,_.z,u.dataScale[2],_.zcalendar)),k;if(_.i&&_.j&&_.k){if(_.i.length!==_.j.length||_.j.length!==_.k.length||!b(_.i,c)||!b(_.j,c)||!b(_.k,c))return;k=r(y(_.i),y(_.j),y(_.k))}else _.alphahull===0?k=x(A):_.alphahull>0?k=m(_.alphahull,A):k=g(_.delaunayaxis,A);var p={positions:A,cells:k,lightPosition:[_.lightposition.x,_.lightposition.y,_.lightposition.z],ambient:_.lighting.ambient,diffuse:_.lighting.diffuse,specular:_.lighting.specular,roughness:_.lighting.roughness,fresnel:_.lighting.fresnel,vertexNormalsEpsilon:_.lighting.vertexnormalsepsilon,faceNormalsEpsilon:_.lighting.facenormalsepsilon,opacity:_.opacity,contourEnable:_.contour.show,contourColor:a(_.contour.color).slice(0,3),contourWidth:_.contour.width,useFacetNormals:_.flatshading};if(_.intensity){var w=i(_);this.color="#fff";var h=_.intensitymode;p[h+"Intensity"]=_.intensity,p[h+"IntensityBounds"]=[w.min,w.max],p.colormap=t(_)}else _.vertexcolor?(this.color=_.vertexcolor[0],p.vertexColors=s(_.vertexcolor)):_.facecolor?(this.color=_.facecolor[0],p.cellColors=s(_.facecolor)):(this.color=_.color,p.meshColor=a(_.color));this.mesh.update(p)},d.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function v(_,u){var T=_.glplot.gl,c=f({gl:T}),A=new n(_,c,u.uid);return c._trace=A,A.update(u),_.glplot.add(c),A}B.exports=v},{"../../../stackgl_modules":1133,"../../components/colorscale":379,"../../lib/gl_format_color":511,"../../lib/str2rgbarray":540,"../../plots/gl3d/zip3":618}],879:[function(e,B,V){var f=e("../../registry"),l=e("../../lib"),m=e("../../components/colorscale/defaults"),x=e("./attributes");B.exports=function(a,i,r,n){function d(b,v){return l.coerce(a,i,x,b,v)}function s(b){var v=b.map(function(_){var u=d(_);return u&&l.isArrayOrTypedArray(u)?u:null});return v.every(function(_){return _&&_.length===v[0].length})&&v}var o=s(["x","y","z"]);if(!o){i.visible=!1;return}if(s(["i","j","k"]),i.i&&(!i.j||!i.k)||i.j&&(!i.k||!i.i)||i.k&&(!i.i||!i.j)){i.visible=!1;return}var y=f.getComponentMethod("calendars","handleTraceDefaults");y(a,i,["x","y","z"],n),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(b){d(b)});var g=d("contour.show");g&&(d("contour.color"),d("contour.width")),"intensity"in a?(d("intensity"),d("intensitymode"),m(a,i,n,d,{prefix:"",cLetter:"c"})):(i.showscale=!1,"facecolor"in a?d("facecolor"):"vertexcolor"in a?d("vertexcolor"):d("color",r)),d("text"),d("hovertext"),d("hovertemplate"),d("xhoverformat"),d("yhoverformat"),d("zhoverformat"),i._length=null}},{"../../components/colorscale/defaults":377,"../../lib":515,"../../registry":647,"./attributes":876}],880:[function(e,B,V){B.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:e("./convert"),moduleType:"trace",name:"mesh3d",basePlotModule:e("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":607,"./attributes":876,"./calc":877,"./convert":878,"./defaults":879}],881:[function(e,B,V){var f=e("../../lib").extendFlat,l=e("../scatter/attributes"),m=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,x=e("../../components/drawing/attributes").dash,t=e("../../components/fx/attributes"),a=e("../../constants/delta.js"),i=a.INCREASING.COLOR,r=a.DECREASING.COLOR,n=l.line;function d(s){return{line:{color:f({},n.color,{dflt:s}),width:n.width,dash:x,editType:"style"},editType:"style"}}B.exports={xperiod:l.xperiod,xperiod0:l.xperiod0,xperiodalignment:l.xperiodalignment,xhoverformat:m("x"),yhoverformat:m("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:f({},n.width,{}),dash:f({},x,{}),editType:"style"},increasing:d(i),decreasing:d(r),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:f({},t.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}})}},{"../../components/drawing/attributes":388,"../../components/fx/attributes":398,"../../constants/delta.js":485,"../../lib":515,"../../plots/cartesian/axis_format_attributes":569,"../scatter/attributes":936}],882:[function(e,B,V){var f=e("../../lib"),l=f._,m=e("../../plots/cartesian/axes"),x=e("../../plots/cartesian/align_period"),t=e("../../constants/numerical").BADNUM;function a(d,s){var o=m.getFromId(d,s.xaxis),y=m.getFromId(d,s.yaxis),g=n(d,o,s),b=s._minDiff;s._minDiff=null;var v=s._origX;s._origX=null;var _=s._xcalc;s._xcalc=null;var u=r(d,s,v,_,y,i);return s._extremes[o._id]=m.findExtremes(o,_,{vpad:b/2}),u.length?(f.extendFlat(u[0].t,{wHover:b/2,tickLen:g}),u):[{t:{empty:!0}}]}function i(d,s,o,y){return{o:d,h:s,l:o,c:y}}function r(d,s,o,y,g,b){for(var v=g.makeCalcdata(s,"open"),_=g.makeCalcdata(s,"high"),u=g.makeCalcdata(s,"low"),T=g.makeCalcdata(s,"close"),c=Array.isArray(s.text),A=Array.isArray(s.hovertext),k=!0,p=null,w=!!s.xperiodalignment,h=[],D=0;D<y.length;D++){var S=y[D],M=v[D],L=_[D],R=u[D],z=T[D];if(S!==t&&M!==t&&L!==t&&R!==t&&z!==t){z===M?p!==null&&z!==p&&(k=z>p):k=z>M,p=z;var P=b(M,L,R,z);P.pos=S,P.yc=(M+z)/2,P.i=D,P.dir=k?"increasing":"decreasing",P.x=P.pos,P.y=[R,L],w&&(P.orig_p=o[D]),c&&(P.tx=s.text[D]),A&&(P.htx=s.hovertext[D]),h.push(P)}else h.push({pos:S,empty:!0})}return s._extremes[g._id]=m.findExtremes(g,f.concat(u,_),{padded:!0}),h.length&&(h[0].t={labels:{open:l(d,"open:")+" ",high:l(d,"high:")+" ",low:l(d,"low:")+" ",close:l(d,"close:")+" "}}),h}function n(d,s,o){var y=o._minDiff;if(!y){var g=d._fullData,b=[];y=1/0;var v;for(v=0;v<g.length;v++){var _=g[v];if(_.type==="ohlc"&&_.visible===!0&&_.xaxis===s._id){b.push(_);var u=s.makeCalcdata(_,"x");_._origX=u;var T=x(o,s,"x",u).vals;_._xcalc=T;var c=f.distinctVals(T).minDiff;c&&isFinite(c)&&(y=Math.min(y,c))}}for(y===1/0&&(y=1),v=0;v<b.length;v++)b[v]._minDiff=y}return y*o.tickwidth}B.exports={calc:a,calcCommon:r}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566}],883:[function(e,B,V){var f=e("../../lib"),l=e("./ohlc_defaults"),m=e("../scatter/period_defaults"),x=e("./attributes");B.exports=function(i,r,n,d){function s(y,g){return f.coerce(i,r,x,y,g)}var o=l(i,r,s,d);if(!o){r.visible=!1;return}m(i,r,d,s,{x:!0}),s("xhoverformat"),s("yhoverformat"),s("line.width"),s("line.dash"),t(i,r,s,"increasing"),t(i,r,s,"decreasing"),s("text"),s("hovertext"),s("tickwidth"),d._requestRangeslider[r.xaxis]=!0};function t(a,i,r,n){r(n+".line.color"),r(n+".line.width",i.line.width),r(n+".line.dash",i.line.dash)}},{"../../lib":515,"../scatter/period_defaults":956,"./attributes":881,"./ohlc_defaults":886}],884:[function(e,B,V){var f=e("../../plots/cartesian/axes"),l=e("../../lib"),m=e("../../components/fx"),x=e("../../components/color"),t=e("../../lib").fillText,a=e("../../constants/delta.js"),i={increasing:a.INCREASING.SYMBOL,decreasing:a.DECREASING.SYMBOL};function r(o,y,g,b){var v=o.cd,_=v[0].trace;return _.hoverlabel.split?d(o,y,g,b):s(o,y,g,b)}function n(o,y,g,b){var v=o.cd,_=o.xa,u=v[0].trace,T=v[0].t,c=u.type,A=c==="ohlc"?"l":"min",k=c==="ohlc"?"h":"max",p,w,h=T.bPos||0,D=function(tt){return tt.pos+h-y},S=T.bdPos||T.tickLen,M=T.wHover,L=Math.min(1,S/Math.abs(_.r2c(_.range[1])-_.r2c(_.range[0])));p=o.maxHoverDistance-L,w=o.maxSpikeDistance-L;function R(tt){var Z=D(tt);return m.inbox(Z-M,Z+M,p)}function z(tt){var Z=tt[A],X=tt[k];return Z===X||m.inbox(Z-g,X-g,p)}function P(tt){return(R(tt)+z(tt))/2}var I=m.getDistanceFunction(b,R,z,P);if(m.getClosest(v,I,o),o.index===!1)return null;var U=v[o.index];if(U.empty)return null;var O=U.dir,G=u[O],$=G.line.color;return x.opacity($)&&G.line.width?o.color=$:o.color=G.fillcolor,o.x0=_.c2p(U.pos+h-S,!0),o.x1=_.c2p(U.pos+h+S,!0),o.xLabelVal=U.orig_p!==void 0?U.orig_p:U.pos,o.spikeDistance=P(U)*w/p,o.xSpike=_.c2p(U.pos,!0),o}function d(o,y,g,b){var v=o.cd,_=o.ya,u=v[0].trace,T=v[0].t,c=[],A=n(o,y,g,b);if(!A)return[];var k=A.index,p=v[k],w=p.hi||u.hoverinfo,h=w.split("+"),D=w==="all",S=D||h.indexOf("y")!==-1;if(!S)return[];for(var M=["high","open","close","low"],L={},R=0;R<M.length;R++){var z=M[R],P=u[z][A.index],I=_.c2p(P,!0),U;P in L?(U=L[P],U.yLabel+="<br>"+T.labels[z]+f.hoverLabelText(_,P,u.yhoverformat)):(U=l.extendFlat({},A),U.y0=U.y1=I,U.yLabelVal=P,U.yLabel=T.labels[z]+f.hoverLabelText(_,P,u.yhoverformat),U.name="",c.push(U),L[P]=U)}return c}function s(o,y,g,b){var v=o.cd,_=o.ya,u=v[0].trace,T=v[0].t,c=n(o,y,g,b);if(!c)return[];var A=c.index,k=v[A],p=c.index=k.i,w=k.dir;function h(P){return T.labels[P]+f.hoverLabelText(_,u[P][p],u.yhoverformat)}var D=k.hi||u.hoverinfo,S=D.split("+"),M=D==="all",L=M||S.indexOf("y")!==-1,R=M||S.indexOf("text")!==-1,z=L?[h("open"),h("high"),h("low"),h("close")+"  "+i[w]]:[];return R&&t(k,u,z),c.extraText=z.join("<br>"),c.y0=c.y1=_.c2p(k.yc,!0),[c]}B.exports={hoverPoints:r,hoverSplit:d,hoverOnPoints:s}},{"../../components/color":367,"../../components/fx":407,"../../constants/delta.js":485,"../../lib":515,"../../plots/cartesian/axes":566}],885:[function(e,B,V){B.exports={moduleType:"trace",name:"ohlc",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","showLegend"],meta:{},attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc").calc,plot:e("./plot"),style:e("./style"),hoverPoints:e("./hover").hoverPoints,selectPoints:e("./select")}},{"../../plots/cartesian":578,"./attributes":881,"./calc":882,"./defaults":883,"./hover":884,"./plot":887,"./select":888,"./style":889}],886:[function(e,B,V){var f=e("../../registry"),l=e("../../lib");B.exports=function(x,t,a,i){var r=a("x"),n=a("open"),d=a("high"),s=a("low"),o=a("close");a("hoverlabel.split");var y=f.getComponentMethod("calendars","handleTraceDefaults");if(y(x,t,["x"],i),!!(n&&d&&s&&o)){var g=Math.min(n.length,d.length,s.length,o.length);return r&&(g=Math.min(g,l.minRowLength(r))),t._length=g,g}}},{"../../lib":515,"../../registry":647}],887:[function(e,B,V){var f=e("@plotly/d3"),l=e("../../lib");B.exports=function(x,t,a,i){var r=t.yaxis,n=t.xaxis,d=!!n.rangebreaks;l.makeTraceGroups(i,a,"trace ohlc").each(function(s){var o=f.select(this),y=s[0],g=y.t,b=y.trace;if(b.visible!==!0||g.empty){o.remove();return}var v=g.tickLen,_=o.selectAll("path").data(l.identity);_.enter().append("path"),_.exit().remove(),_.attr("d",function(u){if(u.empty)return"M0,0Z";var T=n.c2p(u.pos-v,!0),c=n.c2p(u.pos+v,!0),A=d?(T+c)/2:n.c2p(u.pos,!0),k=r.c2p(u.o,!0),p=r.c2p(u.h,!0),w=r.c2p(u.l,!0),h=r.c2p(u.c,!0);return"M"+T+","+k+"H"+A+"M"+A+","+p+"V"+w+"M"+c+","+h+"H"+A})})}},{"../../lib":515,"@plotly/d3":58}],888:[function(e,B,V){B.exports=function(l,m){var x=l.cd,t=l.xaxis,a=l.yaxis,i=[],r,n=x[0].t.bPos||0;if(m===!1)for(r=0;r<x.length;r++)x[r].selected=0;else for(r=0;r<x.length;r++){var d=x[r];m.contains([t.c2p(d.pos+n),a.c2p(d.yc)],null,d.i,l)?(i.push({pointNumber:d.i,x:t.c2d(d.pos),y:a.c2d(d.yc)}),d.selected=1):d.selected=0}return i}},{}],889:[function(e,B,V){var f=e("@plotly/d3"),l=e("../../components/drawing"),m=e("../../components/color");B.exports=function(t,a,i){var r=i||f.select(t).selectAll("g.ohlclayer").selectAll("g.trace");r.style("opacity",function(n){return n[0].trace.opacity}),r.each(function(n){var d=n[0].trace;f.select(this).selectAll("path").each(function(s){if(!s.empty){var o=d[s.dir].line;f.select(this).style("fill","none").call(m.stroke,o.color).call(l.dashLine,o.dash,o.width).style("opacity",d.selectedpoints&&!s.selected?.3:1)}})})}},{"../../components/color":367,"../../components/drawing":389,"@plotly/d3":58}],890:[function(e,B,V){var f=e("../../lib/extend").extendFlat,l=e("../../plots/attributes"),m=e("../../plots/font_attributes"),x=e("../../components/colorscale/attributes"),t=e("../../plots/template_attributes").hovertemplateAttrs,a=e("../../plots/domain").attributes,i=f({editType:"calc"},x("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:t({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});B.exports={domain:a({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:f({},l.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:t({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"]}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:m({editType:"calc"}),tickfont:m({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:i,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/domain":593,"../../plots/font_attributes":594,"../../plots/template_attributes":642}],891:[function(e,B,V){var f=e("../../plots/get_data").getModuleCalcData,l=e("./plot"),m="parcats";V.name=m,V.plot=function(x,t,a,i){var r=f(x.calcdata,m);if(r.length){var n=r[0];l(x,n,a,i)}},V.clean=function(x,t,a,i){var r=i._has&&i._has("parcats"),n=t._has&&t._has("parcats");r&&!n&&i._paperdiv.selectAll(".parcats").remove()}},{"../../plots/get_data":602,"./plot":896}],892:[function(e,B,V){var f=e("../../lib/gup").wrap,l=e("../../components/colorscale/helpers").hasColorscale,m=e("../../components/colorscale/calc"),x=e("../../lib/filter_unique.js"),t=e("../../components/drawing"),a=e("../../lib"),i=e("fast-isnumeric");B.exports=function(T,c){var A=a.filterVisible(c.dimensions);if(A.length===0)return[];var k=A.map(function(at){var lt;if(at.categoryorder==="trace")lt=null;else if(at.categoryorder==="array")lt=at.categoryarray;else{lt=x(at.values);for(var F=!0,H=0;H<lt.length;H++)if(!i(lt[H])){F=!1;break}lt.sort(F?a.sorterAsc:void 0),at.categoryorder==="category descending"&&(lt=lt.reverse())}return g(at.values,lt)}),p,w,h;a.isArrayOrTypedArray(c.counts)?p=c.counts:p=[c.counts],b(A),A.forEach(function(at,lt){v(at,k[lt])});var D=c.line,S;D?(l(c,"line")&&m(T,c,{vals:c.line.color,containerStr:"line",cLetter:"c"}),S=t.tryColorscale(D)):S=a.identity;function M(at){var lt,F;return a.isArrayOrTypedArray(D.color)?(lt=D.color[at%D.color.length],F=lt):lt=D.color,{color:S(lt),rawColor:F}}var L=A[0].values.length,R={},z=k.map(function(at){return at.inds});h=0;var P,I;for(P=0;P<L;P++){var U=[];for(I=0;I<z.length;I++)U.push(z[I][P]);w=p[P%p.length],h+=w;var O=M(P),G=U+"-"+O.rawColor;R[G]===void 0&&(R[G]=o(U,O.color,O.rawColor)),y(R[G],P,w)}var $=A.map(function(at,lt){return n(lt,at._index,at._displayindex,at.label,h)});for(P=0;P<L;P++)for(w=p[P%p.length],I=0;I<$.length;I++){var tt=$[I].containerInd,Z=k[I].inds[P],X=$[I].categories;if(X[Z]===void 0){var J=c.dimensions[tt]._categoryarray[Z],st=c.dimensions[tt]._ticktext[Z];X[Z]=d(I,Z,J,st)}s(X[Z],P,w)}return f(r($,R,h))};function r(u,T,c){var A=u.map(function(k){return k.categories.length}).reduce(function(k,p){return Math.max(k,p)});return{dimensions:u,paths:T,trace:void 0,maxCats:A,count:c}}function n(u,T,c,A,k){return{dimensionInd:u,containerInd:T,displayInd:c,dimensionLabel:A,count:k,categories:[],dragX:null}}function d(u,T,c,A){return{dimensionInd:u,categoryInd:T,categoryValue:c,displayInd:T,categoryLabel:A,valueInds:[],count:0,dragY:null}}function s(u,T,c){u.valueInds.push(T),u.count+=c}function o(u,T,c){return{categoryInds:u,color:T,rawColor:c,valueInds:[],count:0}}function y(u,T,c){u.valueInds.push(T),u.count+=c}function g(u,T){T==null?T=[]:T=T.map(function(S){return S});var c={},A={},k=[];T.forEach(function(S,M){c[S]=0,A[S]=M});for(var p=0;p<u.length;p++){var w=u[p],h;c[w]===void 0?(c[w]=1,h=T.push(w)-1,A[w]=h):(c[w]++,h=A[w]),k.push(h)}var D=T.map(function(S){return c[S]});return{uniqueValues:T,uniqueCounts:D,inds:k}}function b(u){var T=u.map(function(A){return A.displayindex}),c;if(_(T))for(c=0;c<u.length;c++)u[c]._displayindex=u[c].displayindex;else for(c=0;c<u.length;c++)u[c]._displayindex=c}function v(u,T){u._categoryarray=T.uniqueValues,u.ticktext===null||u.ticktext===void 0?u._ticktext=[]:u._ticktext=u.ticktext.slice();for(var c=u._ticktext.length;c<T.uniqueValues.length;c++)u._ticktext.push(T.uniqueValues[c])}function _(u){for(var T=new Array(u.length),c=0;c<u.length;c++){if(u[c]<0||u[c]>=u.length||T[u[c]]!==void 0)return!1;T[u[c]]=!0}return!0}},{"../../components/colorscale/calc":375,"../../components/colorscale/helpers":378,"../../components/drawing":389,"../../lib":515,"../../lib/filter_unique.js":506,"../../lib/gup":512,"fast-isnumeric":190}],893:[function(e,B,V){var f=e("../../lib"),l=e("../../components/colorscale/helpers").hasColorscale,m=e("../../components/colorscale/defaults"),x=e("../../plots/domain").defaults,t=e("../../plots/array_container_defaults"),a=e("./attributes"),i=e("../parcoords/merge_length");function r(d,s,o,y,g){g("line.shape"),g("line.hovertemplate");var b=g("line.color",y.colorway[0]);if(l(d,"line")&&f.isArrayOrTypedArray(b)){if(b.length)return g("line.colorscale"),m(d,s,y,g,{prefix:"line.",cLetter:"c"}),b.length;s.line.color=o}return 1/0}function n(d,s){function o(T,c){return f.coerce(d,s,a.dimensions,T,c)}var y=o("values"),g=o("visible");if(y&&y.length||(g=s.visible=!1),g){o("label"),o("displayindex",s._index);var b=d.categoryarray,v=Array.isArray(b)&&b.length>0,_;v&&(_="array");var u=o("categoryorder",_);u==="array"?(o("categoryarray"),o("ticktext")):(delete d.categoryarray,delete d.ticktext),!v&&u==="array"&&(s.categoryorder="trace")}}B.exports=function(s,o,y,g){function b(c,A){return f.coerce(s,o,a,c,A)}var v=t(s,o,{name:"dimensions",handleItemDefaults:n}),_=r(s,o,y,g,b);x(o,g,b),(!Array.isArray(v)||!v.length)&&(o.visible=!1),i(o,v,"values",_),b("hoveron"),b("hovertemplate"),b("arrangement"),b("bundlecolors"),b("sortpaths"),b("counts");var u={family:g.font.family,size:Math.round(g.font.size),color:g.font.color};f.coerceFont(b,"labelfont",u);var T={family:g.font.family,size:Math.round(g.font.size/1.2),color:g.font.color};f.coerceFont(b,"tickfont",T)}},{"../../components/colorscale/defaults":377,"../../components/colorscale/helpers":378,"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/domain":593,"../parcoords/merge_length":907,"./attributes":890}],894:[function(e,B,V){B.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("./plot"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:e("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":890,"./base_plot":891,"./calc":892,"./defaults":893,"./plot":896}],895:[function(e,B,V){var f=e("@plotly/d3"),l=e("d3-interpolate").interpolateNumber,m=e("../../plot_api/plot_api"),x=e("../../components/fx"),t=e("../../lib"),a=t.strTranslate,i=e("../../components/drawing"),r=e("tinycolor2"),n=e("../../lib/svg_text_utils");function d(H,et,q,W){var K=H.map(J.bind(0,et,q)),nt=W.selectAll("g.parcatslayer").data([null]);nt.enter().append("g").attr("class","parcatslayer").style("pointer-events","all");var it=nt.selectAll("g.trace.parcats").data(K,s),ot=it.enter().append("g").attr("class","trace parcats");it.attr("transform",function(wt){return a(wt.x,wt.y)}),ot.append("g").attr("class","paths");var ct=it.select("g.paths"),bt=ct.selectAll("path.path").data(function(wt){return wt.paths},s);bt.attr("fill",function(wt){return wt.model.color});var ut=bt.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(wt){return wt.model.color}).attr("fill-opacity",0);T(ut),bt.attr("d",function(wt){return wt.svgD}),ut.empty()||bt.sort(y),bt.exit().remove(),bt.on("mouseover",g).on("mouseout",b).on("click",u),ot.append("g").attr("class","dimensions");var pt=it.select("g.dimensions"),yt=pt.selectAll("g.dimension").data(function(wt){return wt.dimensions},s);yt.enter().append("g").attr("class","dimension"),yt.attr("transform",function(wt){return a(wt.x,0)}),yt.exit().remove();var Tt=yt.selectAll("g.category").data(function(wt){return wt.categories},s),kt=Tt.enter().append("g").attr("class","category");Tt.attr("transform",function(wt){return a(0,wt.y)}),kt.append("rect").attr("class","catrect").attr("pointer-events","none"),Tt.select("rect.catrect").attr("fill","none").attr("width",function(wt){return wt.width}).attr("height",function(wt){return wt.height}),k(kt);var zt=Tt.selectAll("rect.bandrect").data(function(wt){return wt.bands},s);zt.each(function(){t.raiseToTop(this)}),zt.attr("fill",function(wt){return wt.color});var Rt=zt.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(wt){return wt.color}).attr("fill-opacity",0);zt.attr("fill",function(wt){return wt.color}).attr("width",function(wt){return wt.width}).attr("height",function(wt){return wt.height}).attr("y",function(wt){return wt.y}).attr("cursor",function(wt){return wt.parcatsViewModel.arrangement==="fixed"?"default":wt.parcatsViewModel.arrangement==="perpendicular"?"ns-resize":"move"}),w(Rt),zt.exit().remove(),kt.append("text").attr("class","catlabel").attr("pointer-events","none");var Gt=et._fullLayout.paper_bgcolor;Tt.select("text.catlabel").attr("text-anchor",function(wt){return o(wt)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",n.makeTextShadow(Gt)).style("fill","rgb(0, 0, 0)").attr("x",function(wt){return o(wt)?wt.width+5:-5}).attr("y",function(wt){return wt.height/2}).text(function(wt){return wt.model.categoryLabel}).each(function(wt){i.font(f.select(this),wt.parcatsViewModel.categorylabelfont),n.convertToTspans(f.select(this),et)}),kt.append("text").attr("class","dimlabel"),Tt.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(wt){return wt.parcatsViewModel.arrangement==="fixed"?"default":"ew-resize"}).attr("x",function(wt){return wt.width/2}).attr("y",-5).text(function(wt,It){return It===0?wt.parcatsViewModel.model.dimensions[wt.model.dimensionInd].dimensionLabel:null}).each(function(wt){i.font(f.select(this),wt.parcatsViewModel.labelfont)}),Tt.selectAll("rect.bandrect").on("mouseover",I).on("mouseout",U),Tt.exit().remove(),yt.call(f.behavior.drag().origin(function(wt){return{x:wt.x,y:0}}).on("dragstart",O).on("drag",G).on("dragend",$)),it.each(function(wt){wt.traceSelection=f.select(this),wt.pathSelection=f.select(this).selectAll("g.paths").selectAll("path.path"),wt.dimensionSelection=f.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),it.exit().remove()}B.exports=function(H,et,q,W){d(q,H,W,et)};function s(H){return H.key}function o(H){var et=H.parcatsViewModel.dimensions.length,q=H.parcatsViewModel.dimensions[et-1].model.dimensionInd;return H.model.dimensionInd===q}function y(H,et){return H.model.rawColor>et.model.rawColor?1:H.model.rawColor<et.model.rawColor?-1:0}function g(H){if(!H.parcatsViewModel.dragDimension&&H.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){t.raiseToTop(this),c(f.select(this));var et=v(H),q=_(H);if(H.parcatsViewModel.graphDiv.emit("plotly_hover",{points:et,event:f.event,constraints:q}),H.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var W=f.mouse(this)[0],K=H.parcatsViewModel.graphDiv,nt=H.parcatsViewModel.trace,it=K._fullLayout,ot=it._paperdiv.node().getBoundingClientRect(),ct=H.parcatsViewModel.graphDiv.getBoundingClientRect(),bt,ut,pt;for(pt=0;pt<H.leftXs.length-1;pt++)if(H.leftXs[pt]+H.dimWidths[pt]-2<=W&&W<=H.leftXs[pt+1]+2){var yt=H.parcatsViewModel.dimensions[pt],Tt=H.parcatsViewModel.dimensions[pt+1];bt=(yt.x+yt.width+Tt.x)/2,ut=(H.topYs[pt]+H.topYs[pt+1]+H.height)/2;break}var kt=H.parcatsViewModel.x+bt,zt=H.parcatsViewModel.y+ut,Rt=r.mostReadable(H.model.color,["black","white"]),Gt=H.model.count,wt=Gt/H.parcatsViewModel.model.count,It={countLabel:Gt,probabilityLabel:wt.toFixed(3)},$t=[];H.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&$t.push(["Count:",It.countLabel].join(" ")),H.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&$t.push(["P:",It.probabilityLabel].join(" "));var Qt=$t.join("<br>"),Nt=f.mouse(K)[0];x.loneHover({trace:nt,x:kt-ot.left+ct.left,y:zt-ot.top+ct.top,text:Qt,color:H.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:Rt,idealAlign:Nt<kt?"right":"left",hovertemplate:(nt.line||{}).hovertemplate,hovertemplateLabels:It,eventData:[{data:nt._input,fullData:nt,count:Gt,probability:wt}]},{container:it._hoverlayer.node(),outerContainer:it._paper.node(),gd:K})}}}function b(H){if(!H.parcatsViewModel.dragDimension&&(T(f.select(this)),x.loneUnhover(H.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),H.parcatsViewModel.pathSelection.sort(y),H.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1)){var et=v(H),q=_(H);H.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:et,event:f.event,constraints:q})}}function v(H){for(var et=[],q=tt(H.parcatsViewModel),W=0;W<H.model.valueInds.length;W++){var K=H.model.valueInds[W];et.push({curveNumber:q,pointNumber:K})}return et}function _(H){for(var et={},q=H.parcatsViewModel.model.dimensions,W=0;W<q.length;W++){var K=q[W],nt=K.categories[H.model.categoryInds[W]];et[K.containerInd]=nt.categoryValue}return H.model.rawColor!==void 0&&(et.color=H.model.rawColor),et}function u(H){if(H.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var et=v(H),q=_(H);H.parcatsViewModel.graphDiv.emit("plotly_click",{points:et,event:f.event,constraints:q})}}function T(H){H.attr("fill",function(et){return et.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function c(H){H.attr("fill-opacity",.8).attr("stroke",function(et){return r.mostReadable(et.model.color,["black","white"])}).attr("stroke-width",.3)}function A(H){H.select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}function k(H){H.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function p(H){H.attr("stroke","black").attr("stroke-width",1.5)}function w(H){H.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function h(H){var et=H.parcatsViewModel.pathSelection,q=H.categoryViewModel.model.dimensionInd,W=H.categoryViewModel.model.categoryInd;return et.filter(function(K){return K.model.categoryInds[q]===W&&K.model.color===H.color})}function D(H){var et=f.select(H.parentNode).selectAll("rect.bandrect");et.each(function(q){var W=h(q);c(W),W.each(function(){t.raiseToTop(this)})}),A(f.select(H.parentNode))}function S(H){var et=f.select(H).datum(),q=h(et);c(q),q.each(function(){t.raiseToTop(this)}),f.select(H.parentNode).selectAll("rect.bandrect").filter(function(W){return W.color===et.color}).each(function(){t.raiseToTop(this),p(f.select(this))})}function M(H,et,q){var W=f.select(H).datum(),K=W.categoryViewModel.model,nt=W.parcatsViewModel.graphDiv,it=f.select(H.parentNode).selectAll("rect.bandrect"),ot=[];it.each(function(bt){var ut=h(bt);ut.each(function(pt){Array.prototype.push.apply(ot,v(pt))})});var ct={};ct[K.dimensionInd]=K.categoryValue,nt.emit(et,{points:ot,event:q,constraints:ct})}function L(H,et,q){var W=f.select(H).datum(),K=W.categoryViewModel.model,nt=W.parcatsViewModel.graphDiv,it=h(W),ot=[];it.each(function(bt){Array.prototype.push.apply(ot,v(bt))});var ct={};ct[K.dimensionInd]=K.categoryValue,W.rawColor!==void 0&&(ct.color=W.rawColor),nt.emit(et,{points:ot,event:q,constraints:ct})}function R(H,et,q){H._fullLayout._calcInverseTransform(H);var W=H._fullLayout._invScaleX,K=H._fullLayout._invScaleY,nt=f.select(q.parentNode).select("rect.catrect"),it=nt.node().getBoundingClientRect(),ot=nt.datum(),ct=ot.parcatsViewModel,bt=ct.model.dimensions[ot.model.dimensionInd],ut=ct.trace,pt=it.top+it.height/2,yt,Tt;ct.dimensions.length>1&&bt.displayInd===ct.dimensions.length-1?(yt=it.left,Tt="left"):(yt=it.left+it.width,Tt="right");var kt=ot.model.count,zt=ot.model.categoryLabel,Rt=kt/ot.parcatsViewModel.model.count,Gt={countLabel:kt,categoryLabel:zt,probabilityLabel:Rt.toFixed(3)},wt=[];ot.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&wt.push(["Count:",Gt.countLabel].join(" ")),ot.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&wt.push(["P("+Gt.categoryLabel+"):",Gt.probabilityLabel].join(" "));var It=wt.join("<br>");return{trace:ut,x:W*(yt-et.left),y:K*(pt-et.top),text:It,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:Tt,hovertemplate:ut.hovertemplate,hovertemplateLabels:Gt,eventData:[{data:ut._input,fullData:ut,count:kt,category:zt,probability:Rt}]}}function z(H,et,q){var W=[];return f.select(q.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){var K=this;W.push(R(H,et,K))}),W}function P(H,et,q){H._fullLayout._calcInverseTransform(H);var W=H._fullLayout._invScaleX,K=H._fullLayout._invScaleY,nt=q.getBoundingClientRect(),it=f.select(q).datum(),ot=it.categoryViewModel,ct=ot.parcatsViewModel,bt=ct.model.dimensions[ot.model.dimensionInd],ut=ct.trace,pt=nt.y+nt.height/2,yt,Tt;ct.dimensions.length>1&&bt.displayInd===ct.dimensions.length-1?(yt=nt.left,Tt="left"):(yt=nt.left+nt.width,Tt="right");var kt=ot.model.categoryLabel,zt=it.parcatsViewModel.model.count,Rt=0;it.categoryViewModel.bands.forEach(function(Re){Re.color===it.color&&(Rt+=Re.count)});var Gt=ot.model.count,wt=0;ct.pathSelection.each(function(Re){Re.model.color===it.color&&(wt+=Re.model.count)});var It=Rt/zt,$t=Rt/wt,Qt=Rt/Gt,Nt={countLabel:zt,categoryLabel:kt,probabilityLabel:It.toFixed(3)},Pt=[];ot.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&Pt.push(["Count:",Nt.countLabel].join(" ")),ot.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&(Pt.push("P(color \u2229 "+kt+"): "+Nt.probabilityLabel),Pt.push("P("+kt+" | color): "+$t.toFixed(3)),Pt.push("P(color | "+kt+"): "+Qt.toFixed(3)));var Yt=Pt.join("<br>"),ve=r.mostReadable(it.color,["black","white"]);return{trace:ut,x:W*(yt-et.left),y:K*(pt-et.top),text:Yt,color:it.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:ve,fontSize:10,idealAlign:Tt,hovertemplate:ut.hovertemplate,hovertemplateLabels:Nt,eventData:[{data:ut._input,fullData:ut,category:kt,count:zt,probability:It,categorycount:Gt,colorcount:wt,bandcolorcount:Rt}]}}function I(H){if(!H.parcatsViewModel.dragDimension&&H.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var et=f.mouse(this)[1];if(et<-1)return;var q=H.parcatsViewModel.graphDiv,W=q._fullLayout,K=W._paperdiv.node().getBoundingClientRect(),nt=H.parcatsViewModel.hoveron,it=this;if(nt==="color"?(S(it),L(it,"plotly_hover",f.event)):(D(it),M(it,"plotly_hover",f.event)),H.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var ot;nt==="category"?ot=R(q,K,it):nt==="color"?ot=P(q,K,it):nt==="dimension"&&(ot=z(q,K,it)),ot&&x.loneHover(ot,{container:W._hoverlayer.node(),outerContainer:W._paper.node(),gd:q})}}}function U(H){var et=H.parcatsViewModel;if(!et.dragDimension&&(T(et.pathSelection),k(et.dimensionSelection.selectAll("g.category")),w(et.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),x.loneUnhover(et.graphDiv._fullLayout._hoverlayer.node()),et.pathSelection.sort(y),et.hoverinfoItems.indexOf("skip")===-1)){var q=H.parcatsViewModel.hoveron,W=this;q==="color"?L(W,"plotly_unhover",f.event):M(W,"plotly_unhover",f.event)}}function O(H){H.parcatsViewModel.arrangement!=="fixed"&&(H.dragDimensionDisplayInd=H.model.displayInd,H.initialDragDimensionDisplayInds=H.parcatsViewModel.model.dimensions.map(function(et){return et.displayInd}),H.dragHasMoved=!1,H.dragCategoryDisplayInd=null,f.select(this).selectAll("g.category").select("rect.catrect").each(function(et){var q=f.mouse(this)[0],W=f.mouse(this)[1];-2<=q&&q<=et.width+2&&-2<=W&&W<=et.height+2&&(H.dragCategoryDisplayInd=et.model.displayInd,H.initialDragCategoryDisplayInds=H.model.categories.map(function(K){return K.displayInd}),et.model.dragY=et.y,t.raiseToTop(this.parentNode),f.select(this.parentNode).selectAll("rect.bandrect").each(function(K){K.y<W&&W<=K.y+K.height&&(H.potentialClickBand=this)}))}),H.parcatsViewModel.dragDimension=H,x.loneUnhover(H.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function G(H){if(H.parcatsViewModel.arrangement!=="fixed"&&(H.dragHasMoved=!0,H.dragDimensionDisplayInd!==null)){var et=H.dragDimensionDisplayInd,q=et-1,W=et+1,K=H.parcatsViewModel.dimensions[et];if(H.dragCategoryDisplayInd!==null){var nt=K.categories[H.dragCategoryDisplayInd];nt.model.dragY+=f.event.dy;var it=nt.model.dragY,ot=nt.model.displayInd,ct=K.categories,bt=ct[ot-1],ut=ct[ot+1];bt!==void 0&&it<bt.y+bt.height/2&&(nt.model.displayInd=bt.model.displayInd,bt.model.displayInd=ot),ut!==void 0&&it+nt.height>ut.y+ut.height/2&&(nt.model.displayInd=ut.model.displayInd,ut.model.displayInd=ot),H.dragCategoryDisplayInd=nt.model.displayInd}if(H.dragCategoryDisplayInd===null||H.parcatsViewModel.arrangement==="freeform"){K.model.dragX=f.event.x;var pt=H.parcatsViewModel.dimensions[q],yt=H.parcatsViewModel.dimensions[W];pt!==void 0&&K.model.dragX<pt.x+pt.width&&(K.model.displayInd=pt.model.displayInd,pt.model.displayInd=et),yt!==void 0&&K.model.dragX+K.width>yt.x&&(K.model.displayInd=yt.model.displayInd,yt.model.displayInd=H.dragDimensionDisplayInd),H.dragDimensionDisplayInd=K.model.displayInd}lt(H.parcatsViewModel),at(H.parcatsViewModel),X(H.parcatsViewModel),Z(H.parcatsViewModel)}}function $(H){if(H.parcatsViewModel.arrangement!=="fixed"&&H.dragDimensionDisplayInd!==null){f.select(this).selectAll("text").attr("font-weight","normal");var et={},q=tt(H.parcatsViewModel),W=H.parcatsViewModel.model.dimensions.map(function(yt){return yt.displayInd}),K=H.initialDragDimensionDisplayInds.some(function(yt,Tt){return yt!==W[Tt]});K&&W.forEach(function(yt,Tt){var kt=H.parcatsViewModel.model.dimensions[Tt].containerInd;et["dimensions["+kt+"].displayindex"]=yt});var nt=!1;if(H.dragCategoryDisplayInd!==null){var it=H.model.categories.map(function(yt){return yt.displayInd});if(nt=H.initialDragCategoryDisplayInds.some(function(yt,Tt){return yt!==it[Tt]}),nt){var ot=H.model.categories.slice().sort(function(yt,Tt){return yt.displayInd-Tt.displayInd}),ct=ot.map(function(yt){return yt.categoryValue}),bt=ot.map(function(yt){return yt.categoryLabel});et["dimensions["+H.model.containerInd+"].categoryarray"]=[ct],et["dimensions["+H.model.containerInd+"].ticktext"]=[bt],et["dimensions["+H.model.containerInd+"].categoryorder"]="array"}}if(H.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1&&!H.dragHasMoved&&H.potentialClickBand&&(H.parcatsViewModel.hoveron==="color"?L(H.potentialClickBand,"plotly_click",f.event.sourceEvent):M(H.potentialClickBand,"plotly_click",f.event.sourceEvent)),H.model.dragX=null,H.dragCategoryDisplayInd!==null){var ut=H.parcatsViewModel.dimensions[H.dragDimensionDisplayInd].categories[H.dragCategoryDisplayInd];ut.model.dragY=null,H.dragCategoryDisplayInd=null}H.dragDimensionDisplayInd=null,H.parcatsViewModel.dragDimension=null,H.dragHasMoved=null,H.potentialClickBand=null,lt(H.parcatsViewModel),at(H.parcatsViewModel);var pt=f.transition().duration(300).ease("cubic-in-out");pt.each(function(){X(H.parcatsViewModel,!0),Z(H.parcatsViewModel,!0)}).each("end",function(){(K||nt)&&m.restyle(H.parcatsViewModel.graphDiv,et,[q])})}}function tt(H){for(var et,q=H.graphDiv._fullData,W=0;W<q.length;W++)if(H.key===q[W].uid){et=W;break}return et}function Z(H,et){et===void 0&&(et=!1);function q(W){return et?W.transition():W}H.pathSelection.data(function(W){return W.paths},s),q(H.pathSelection).attr("d",function(W){return W.svgD})}function X(H,et){et===void 0&&(et=!1);function q(ct){return et?ct.transition():ct}H.dimensionSelection.data(function(ct){return ct.dimensions},s);var W=H.dimensionSelection.selectAll("g.category").data(function(ct){return ct.categories},s);q(H.dimensionSelection).attr("transform",function(ct){return a(ct.x,0)}),q(W).attr("transform",function(ct){return a(0,ct.y)});var K=W.select(".dimlabel");K.text(function(ct,bt){return bt===0?ct.parcatsViewModel.model.dimensions[ct.model.dimensionInd].dimensionLabel:null});var nt=W.select(".catlabel");nt.attr("text-anchor",function(ct){return o(ct)?"start":"end"}).attr("x",function(ct){return o(ct)?ct.width+5:-5}).each(function(ct){var bt,ut;o(ct)?(bt=ct.width+5,ut="start"):(bt=-5,ut="end"),f.select(this).selectAll("tspan").attr("x",bt).attr("text-anchor",ut)});var it=W.selectAll("rect.bandrect").data(function(ct){return ct.bands},s),ot=it.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(ct){return ct.color}).attr("fill-opacity",0);it.attr("fill",function(ct){return ct.color}).attr("width",function(ct){return ct.width}).attr("height",function(ct){return ct.height}).attr("y",function(ct){return ct.y}),w(ot),it.each(function(){t.raiseToTop(this)}),it.exit().remove()}function J(H,et,q){var W=q[0],K=et.margin||{l:80,r:80,t:100,b:80},nt=W.trace,it=nt.domain,ot=et.width,ct=et.height,bt=Math.floor(ot*(it.x[1]-it.x[0])),ut=Math.floor(ct*(it.y[1]-it.y[0])),pt=it.x[0]*ot+K.l,yt=et.height-it.y[1]*et.height+K.t,Tt=nt.line.shape,kt;nt.hoverinfo==="all"?kt=["count","probability"]:kt=(nt.hoverinfo||"").split("+");var zt={trace:nt,key:nt.uid,model:W,x:pt,y:yt,width:bt,height:ut,hoveron:nt.hoveron,hoverinfoItems:kt,arrangement:nt.arrangement,bundlecolors:nt.bundlecolors,sortpaths:nt.sortpaths,labelfont:nt.labelfont,categorylabelfont:nt.tickfont,pathShape:Tt,dragDimension:null,margin:K,paths:[],dimensions:[],graphDiv:H,traceSelection:null,pathSelection:null,dimensionSelection:null};return W.dimensions&&(lt(zt),at(zt)),zt}function st(H,et,q,W,K){var nt=[],it=[],ot,ct;for(ct=0;ct<q.length-1;ct++)ot=l(q[ct]+H[ct],H[ct+1]),nt.push(ot(K)),it.push(ot(1-K));var bt="M "+H[0]+","+et[0];for(bt+="l"+q[0]+",0 ",ct=1;ct<q.length;ct++)bt+="C"+nt[ct-1]+","+et[ct-1]+" "+it[ct-1]+","+et[ct]+" "+H[ct]+","+et[ct],bt+="l"+q[ct]+",0 ";for(bt+="l0,"+W+" ",bt+="l -"+q[q.length-1]+",0 ",ct=q.length-2;ct>=0;ct--)bt+="C"+it[ct]+","+(et[ct+1]+W)+" "+nt[ct]+","+(et[ct]+W)+" "+(H[ct]+q[ct])+","+(et[ct]+W),bt+="l-"+q[ct]+",0 ";return bt+="Z",bt}function at(H){var et=H.dimensions,q=H.model,W=et.map(function(Be){return Be.categories.map(function(Ye){return Ye.y})}),K=H.model.dimensions.map(function(Be){return Be.categories.map(function(Ye){return Ye.displayInd})}),nt=H.model.dimensions.map(function(Be){return Be.displayInd}),it=H.dimensions.map(function(Be){return Be.model.dimensionInd}),ot=et.map(function(Be){return Be.x}),ct=et.map(function(Be){return Be.width}),bt=[];for(var ut in q.paths)q.paths.hasOwnProperty(ut)&&bt.push(q.paths[ut]);function pt(Be){var Ye=Be.categoryInds.map(function(Ee,Wt){return K[Wt][Ee]}),ze=it.map(function(Ee){return Ye[Ee]});return ze}bt.sort(function(Be,Ye){var ze=pt(Be),Ee=pt(Ye);return H.sortpaths==="backward"&&(ze.reverse(),Ee.reverse()),ze.push(Be.valueInds[0]),Ee.push(Ye.valueInds[0]),H.bundlecolors&&(ze.unshift(Be.rawColor),Ee.unshift(Ye.rawColor)),ze<Ee?-1:ze>Ee?1:0});for(var yt=new Array(bt.length),Tt=et[0].model.count,kt=et[0].categories.map(function(Be){return Be.height}).reduce(function(Be,Ye){return Be+Ye}),zt=0;zt<bt.length;zt++){var Rt=bt[zt],Gt;Tt>0?Gt=kt*(Rt.count/Tt):Gt=0;for(var wt=new Array(W.length),It=0;It<Rt.categoryInds.length;It++){var $t=Rt.categoryInds[It],Qt=K[It][$t],Nt=nt[It];wt[Nt]=W[Nt][Qt],W[Nt][Qt]+=Gt;var Pt=H.dimensions[Nt].categories[Qt],Yt=Pt.bands.length,ve=Pt.bands[Yt-1];if(ve===void 0||Rt.rawColor!==ve.rawColor){var Re=ve===void 0?0:ve.y+ve.height;Pt.bands.push({key:Re,color:Rt.color,rawColor:Rt.rawColor,height:Gt,width:Pt.width,count:Rt.count,y:Re,categoryViewModel:Pt,parcatsViewModel:H})}else{var ir=Pt.bands[Yt-1];ir.height+=Gt,ir.count+=Rt.count}}var Ie;H.pathShape==="hspline"?Ie=st(ot,wt,ct,Gt,.5):Ie=st(ot,wt,ct,Gt,0),yt[zt]={key:Rt.valueInds[0],model:Rt,height:Gt,leftXs:ot,topYs:wt,dimWidths:ct,svgD:Ie,parcatsViewModel:H}}H.paths=yt}function lt(H){var et=H.model.dimensions.map(function(it){return{displayInd:it.displayInd,dimensionInd:it.dimensionInd}});et.sort(function(it,ot){return it.displayInd-ot.displayInd});var q=[];for(var W in et){var K=et[W].dimensionInd,nt=H.model.dimensions[K];q.push(F(H,nt))}H.dimensions=q}function F(H,et){var q=40,W=16,K=H.model.dimensions.length,nt=et.displayInd,it,ot,ct;K>1?it=(H.width-2*q-W)/(K-1):it=0,ot=q,ct=ot+it*nt;var bt=[],ut=H.model.maxCats,pt=et.categories.length,yt=8,Tt=et.count,kt=H.height-yt*(ut-1),zt,Rt,Gt,wt,It,$t=(ut-pt)*yt/2,Qt=et.categories.map(function(Nt){return{displayInd:Nt.displayInd,categoryInd:Nt.categoryInd}});for(Qt.sort(function(Nt,Pt){return Nt.displayInd-Pt.displayInd}),It=0;It<pt;It++)wt=Qt[It].categoryInd,Rt=et.categories[wt],Tt>0?zt=Rt.count/Tt*kt:zt=0,Gt={key:Rt.valueInds[0],model:Rt,width:W,height:zt,y:Rt.dragY!==null?Rt.dragY:$t,bands:[],parcatsViewModel:H},$t=$t+zt+yt,bt.push(Gt);return{key:et.dimensionInd,x:et.dragX!==null?et.dragX:ct,y:0,width:W,model:et,categories:bt,parcatsViewModel:H,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}},{"../../components/drawing":389,"../../components/fx":407,"../../lib":515,"../../lib/svg_text_utils":541,"../../plot_api/plot_api":552,"@plotly/d3":58,"d3-interpolate":116,tinycolor2:313}],896:[function(e,B,V){var f=e("./parcats");B.exports=function(m,x,t,a){var i=m._fullLayout,r=i._paper,n=i._size;f(m,r,x,{width:n.w,height:n.h,margin:{t:n.t,r:n.r,b:n.b,l:n.l}},t,a)}},{"./parcats":895}],897:[function(e,B,V){var f=e("../../components/colorscale/attributes"),l=e("../../plots/cartesian/layout_attributes"),m=e("../../plots/font_attributes"),x=e("../../plots/domain").attributes,t=e("../../lib/extend").extendFlat,a=e("../../plot_api/plot_template").templatedArray;B.exports={domain:x({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:m({editType:"plot"}),tickfont:m({editType:"plot"}),rangefont:m({editType:"plot"}),dimensions:a("dimension",{label:{valType:"string",editType:"plot"},tickvals:t({},l.tickvals,{editType:"plot"}),ticktext:t({},l.ticktext,{editType:"plot"}),tickformat:t({},l.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:t({editType:"calc"},f("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"})),unselected:{line:{color:{valType:"color",dflt:"#7f7f7f",editType:"plot"},opacity:{valType:"number",min:0,max:1,dflt:"auto",editType:"plot"},editType:"plot"},editType:"plot"}}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/plot_template":555,"../../plots/cartesian/layout_attributes":579,"../../plots/domain":593,"../../plots/font_attributes":594}],898:[function(e,B,V){var f=e("./constants"),l=e("@plotly/d3"),m=e("../../lib/gup").keyFun,x=e("../../lib/gup").repeat,t=e("../../lib").sorterAsc,a=e("../../lib").strTranslate,i=f.bar.snapRatio;function r($,tt){return $*(1-i)+tt*i}var n=f.bar.snapClose;function d($,tt){return $*(1-n)+tt*n}function s($,tt,Z,X){if(o(Z,X))return Z;var J=$?-1:1,st=0,at=tt.length-1;if(J<0){var lt=st;st=at,at=lt}for(var F=tt[st],H=F,et=st;J*et<J*at;et+=J){var q=et+J,W=tt[q];if(J*Z<J*d(F,W))return r(F,H);if(J*Z<J*W||q===at)return r(W,F);H=F,F=W}}function o($,tt){for(var Z=0;Z<tt.length;Z++)if($>=tt[Z][0]&&$<=tt[Z][1])return!0;return!1}function y($){$.attr("x",-f.bar.captureWidth/2).attr("width",f.bar.captureWidth)}function g($){$.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function b($){if(!$.brush.filterSpecified)return"0,"+$.height;for(var tt=v($.brush.filter.getConsolidated(),$.height),Z=[0],X,J,st,at=tt.length?tt[0][0]:null,lt=0;lt<tt.length;lt++)X=tt[lt],J=X[1]-X[0],Z.push(at),Z.push(J),st=lt+1,st<tt.length&&(at=tt[st][0]-X[1]);return Z.push($.height),Z}function v($,tt){return $.map(function(Z){return Z.map(function(X){return Math.max(0,X*tt)}).sort(t)})}function _($,tt){var Z=f.bar.handleHeight;if(!(tt>$[1]+Z||tt<$[0]-Z))return tt>=.9*$[1]+.1*$[0]?"n":tt<=.9*$[0]+.1*$[1]?"s":"ns"}function u(){l.select(document.body).style("cursor",null)}function T($){$.attr("stroke-dasharray",b)}function c($,tt){var Z=l.select($).selectAll(".highlight, .highlight-shadow"),X=tt?Z.transition().duration(f.bar.snapDuration).each("end",tt):Z;T(X)}function A($,tt){var Z=$.brush,X=Z.filterSpecified,J=NaN,st={},at;if(X){var lt=$.height,F=Z.filter.getConsolidated(),H=v(F,lt),et=NaN,q=NaN,W=NaN;for(at=0;at<=H.length;at++){var K=H[at];if(K&&K[0]<=tt&&tt<=K[1]){et=at;break}else if(q=at?at-1:NaN,K&&K[0]>tt){W=at;break}}if(J=et,isNaN(J)&&(isNaN(q)||isNaN(W)?J=isNaN(q)?W:q:J=tt-H[q][1]<H[W][0]-tt?q:W),!isNaN(J)){var nt=H[J],it=_(nt,tt);it&&(st.interval=F[J],st.intervalPix=nt,st.region=it)}}if($.ordinal&&!st.region){var ot=$.unitTickvals,ct=$.unitToPaddedPx.invert(tt);for(at=0;at<ot.length;at++){var bt=[ot[Math.max(at-1,0)]*.25+ot[at]*.75,ot[Math.min(at+1,ot.length-1)]*.25+ot[at]*.75];if(ct>=bt[0]&&ct<=bt[1]){st.clickableOrdinalRange=bt;break}}}return st}function k($,tt){l.event.sourceEvent.stopPropagation();var Z=tt.height-l.mouse($)[1]-2*f.verticalPadding,X=tt.unitToPaddedPx.invert(Z),J=tt.brush,st=A(tt,Z),at=st.interval,lt=J.svgBrush;if(lt.wasDragged=!1,lt.grabbingBar=st.region==="ns",lt.grabbingBar){var F=at.map(tt.unitToPaddedPx);lt.grabPoint=Z-F[0]-f.verticalPadding,lt.barLength=F[1]-F[0]}lt.clickableOrdinalRange=st.clickableOrdinalRange,lt.stayingIntervals=tt.multiselect&&J.filterSpecified?J.filter.getConsolidated():[],at&&(lt.stayingIntervals=lt.stayingIntervals.filter(function(H){return H[0]!==at[0]&&H[1]!==at[1]})),lt.startExtent=st.region?at[st.region==="s"?1:0]:X,tt.parent.inBrushDrag=!0,lt.brushStartCallback()}function p($,tt){l.event.sourceEvent.stopPropagation();var Z=tt.height-l.mouse($)[1]-2*f.verticalPadding,X=tt.brush.svgBrush;X.wasDragged=!0,X._dragging=!0,X.grabbingBar?X.newExtent=[Z-X.grabPoint,Z+X.barLength-X.grabPoint].map(tt.unitToPaddedPx.invert):X.newExtent=[X.startExtent,tt.unitToPaddedPx.invert(Z)].sort(t),tt.brush.filterSpecified=!0,X.extent=X.stayingIntervals.concat([X.newExtent]),X.brushCallback(tt),c($.parentNode)}function w($,tt){var Z=tt.brush,X=Z.filter,J=Z.svgBrush;J._dragging||(h($,tt),p($,tt),tt.brush.svgBrush.wasDragged=!1),J._dragging=!1;var st=l.event;st.sourceEvent.stopPropagation();var at=J.grabbingBar;if(J.grabbingBar=!1,J.grabLocation=void 0,tt.parent.inBrushDrag=!1,u(),!J.wasDragged){J.wasDragged=void 0,J.clickableOrdinalRange?Z.filterSpecified&&tt.multiselect?J.extent.push(J.clickableOrdinalRange):(J.extent=[J.clickableOrdinalRange],Z.filterSpecified=!0):at?(J.extent=J.stayingIntervals,J.extent.length===0&&z(Z)):z(Z),J.brushCallback(tt),c($.parentNode),J.brushEndCallback(Z.filterSpecified?X.getConsolidated():[]);return}var lt=function(){X.set(X.getConsolidated())};if(tt.ordinal){var F=tt.unitTickvals;F[F.length-1]<F[0]&&F.reverse(),J.newExtent=[s(0,F,J.newExtent[0],J.stayingIntervals),s(1,F,J.newExtent[1],J.stayingIntervals)];var H=J.newExtent[1]>J.newExtent[0];J.extent=J.stayingIntervals.concat(H?[J.newExtent]:[]),J.extent.length||z(Z),J.brushCallback(tt),H?c($.parentNode,lt):(lt(),c($.parentNode))}else lt();J.brushEndCallback(Z.filterSpecified?X.getConsolidated():[])}function h($,tt){var Z=tt.height-l.mouse($)[1]-2*f.verticalPadding,X=A(tt,Z),J="crosshair";X.clickableOrdinalRange?J="pointer":X.region&&(J=X.region+"-resize"),l.select(document.body).style("cursor",J)}function D($){$.on("mousemove",function(tt){l.event.preventDefault(),tt.parent.inBrushDrag||h(this,tt)}).on("mouseleave",function(tt){tt.parent.inBrushDrag||u()}).call(l.behavior.drag().on("dragstart",function(tt){k(this,tt)}).on("drag",function(tt){p(this,tt)}).on("dragend",function(tt){w(this,tt)}))}function S($,tt){return $[0]-tt[0]}function M($,tt){var Z=$.selectAll(".background").data(x);Z.enter().append("rect").classed("background",!0).call(y).call(g).style("pointer-events","auto").attr("transform",a(0,f.verticalPadding)),Z.call(D).attr("height",function(st){return st.height-f.verticalPadding});var X=$.selectAll(".highlight-shadow").data(x);X.enter().append("line").classed("highlight-shadow",!0).attr("x",-f.bar.width/2).attr("stroke-width",f.bar.width+f.bar.strokeWidth).attr("stroke",tt).attr("opacity",f.bar.strokeOpacity).attr("stroke-linecap","butt"),X.attr("y1",function(st){return st.height}).call(T);var J=$.selectAll(".highlight").data(x);J.enter().append("line").classed("highlight",!0).attr("x",-f.bar.width/2).attr("stroke-width",f.bar.width-f.bar.strokeWidth).attr("stroke",f.bar.fillColor).attr("opacity",f.bar.fillOpacity).attr("stroke-linecap","butt"),J.attr("y1",function(st){return st.height}).call(T)}function L($,tt){var Z=$.selectAll("."+f.cn.axisBrush).data(x,m);Z.enter().append("g").classed(f.cn.axisBrush,!0),M(Z,tt)}function R($){return $.svgBrush.extent.map(function(tt){return tt.slice()})}function z($){$.filterSpecified=!1,$.svgBrush.extent=[[-1/0,1/0]]}function P($){return function(Z){var X=Z.brush,J=R(X),st=J.slice();X.filter.set(st),$()}}function I($){for(var tt=$.slice(),Z=[],X,J=tt.shift();J;){for(X=J.slice();(J=tt.shift())&&J[0]<=X[1];)X[1]=Math.max(X[1],J[1]);Z.push(X)}return Z.length===1&&Z[0][0]>Z[0][1]&&(Z=[]),Z}function U(){var $=[],tt,Z;return{set:function(X){$=X.map(function(J){return J.slice().sort(t)}).sort(S),$.length===1&&$[0][0]===-1/0&&$[0][1]===1/0&&($=[[0,-1]]),tt=I($),Z=$.reduce(function(J,st){return[Math.min(J[0],st[0]),Math.max(J[1],st[1])]},[1/0,-1/0])},get:function(){return $.slice()},getConsolidated:function(){return tt},getBounds:function(){return Z}}}function O($,tt,Z,X,J,st){var at=U();return at.set(Z),{filter:at,filterSpecified:tt,svgBrush:{extent:[],brushStartCallback:X,brushCallback:P(J),brushEndCallback:st}}}function G($,tt){if(Array.isArray($[0])?($=$.map(function(X){return X.sort(t)}),tt.multiselect?$=I($.sort(S)):$=[$[0]]):$=[$.sort(t)],tt.tickvals){var Z=tt.tickvals.slice().sort(t);if($=$.map(function(X){var J=[s(0,Z,X[0],[]),s(1,Z,X[1],[])];if(J[1]>J[0])return J}).filter(function(X){return X}),!$.length)return}return $.length>1?$:$[0]}B.exports={makeBrush:O,ensureAxisBrush:L,cleanRanges:G}},{"../../lib":515,"../../lib/gup":512,"./constants":902,"@plotly/d3":58}],899:[function(e,B,V){B.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:e("./base_plot"),categories:["gl","regl","noOpacity","noHover"],meta:{}}},{"./attributes":897,"./base_plot":900,"./calc":901,"./defaults":903}],900:[function(e,B,V){var f=e("@plotly/d3"),l=e("../../plots/get_data").getModuleCalcData,m=e("./plot"),x=e("../../constants/xmlns_namespaces");V.name="parcoords",V.plot=function(t){var a=l(t.calcdata,"parcoords")[0];a.length&&m(t,a)},V.clean=function(t,a,i,r){var n=r._has&&r._has("parcoords"),d=a._has&&a._has("parcoords");n&&!d&&(r._paperdiv.selectAll(".parcoords").remove(),r._glimages.selectAll("*").remove())},V.toSVG=function(t){var a=t._fullLayout._glimages,i=f.select(t).selectAll(".svg-container"),r=i.filter(function(d,s){return s===i.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function n(){var d=this,s=d.toDataURL("image/png"),o=a.append("svg:image");o.attr({xmlns:x.svg,"xlink:href":s,preserveAspectRatio:"none",x:0,y:0,width:d.style.width,height:d.style.height})}r.each(n),window.setTimeout(function(){f.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},{"../../constants/xmlns_namespaces":492,"../../plots/get_data":602,"./plot":909,"@plotly/d3":58}],901:[function(e,B,V){var f=e("../../lib").isArrayOrTypedArray,l=e("../../components/colorscale"),m=e("../../lib/gup").wrap;B.exports=function(a,i){var r,n;return l.hasColorscale(i,"line")&&f(i.line.color)?(r=i.line.color,n=l.extractOpts(i.line).colorscale,l.calc(a,i,{vals:r,containerStr:"line",cLetter:"c"})):(r=x(i._length),n=[[0,i.line.color],[1,i.line.color]]),m({lineColor:r,cscale:n})};function x(t){for(var a=new Array(t),i=0;i<t;i++)a[i]=.5;return a}},{"../../components/colorscale":379,"../../lib":515,"../../lib/gup":512}],902:[function(e,B,V){B.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},{}],903:[function(e,B,V){var f=e("../../lib"),l=e("../../components/colorscale/helpers").hasColorscale,m=e("../../components/colorscale/defaults"),x=e("../../plots/domain").defaults,t=e("../../plots/array_container_defaults"),a=e("../../plots/cartesian/axes"),i=e("./attributes"),r=e("./axisbrush"),n=e("./constants").maxDimensionCount,d=e("./merge_length");function s(y,g,b,v,_){var u=_("line.color",b);if(l(y,"line")&&f.isArrayOrTypedArray(u)){if(u.length)return _("line.colorscale"),m(y,g,v,_,{prefix:"line.",cLetter:"c"}),u.length;g.line.color=b}return 1/0}function o(y,g,b,v){function _(k,p){return f.coerce(y,g,i.dimensions,k,p)}var u=_("values"),T=_("visible");if(u&&u.length||(T=g.visible=!1),T){_("label"),_("tickvals"),_("ticktext"),_("tickformat");var c=_("range");g._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:c},a.setConvert(g._ax,v.layout),_("multiselect");var A=_("constraintrange");A&&(g.constraintrange=r.cleanRanges(A,g))}}B.exports=function(g,b,v,_){function u(p,w){return f.coerce(g,b,i,p,w)}var T=g.dimensions;Array.isArray(T)&&T.length>n&&(f.log("parcoords traces support up to "+n+" dimensions at the moment"),T.splice(n));var c=t(g,b,{name:"dimensions",layout:_,handleItemDefaults:o}),A=s(g,b,v,_,u);x(b,_,u),(!Array.isArray(c)||!c.length)&&(b.visible=!1),d(b,c,"values",A);var k={family:_.font.family,size:Math.round(_.font.size/1.2),color:_.font.color};f.coerceFont(u,"labelfont",k),f.coerceFont(u,"tickfont",k),f.coerceFont(u,"rangefont",k),u("labelangle"),u("labelside"),u("unselected.line.color"),u("unselected.line.opacity")}},{"../../components/colorscale/defaults":377,"../../components/colorscale/helpers":378,"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/cartesian/axes":566,"../../plots/domain":593,"./attributes":897,"./axisbrush":898,"./constants":902,"./merge_length":907}],904:[function(e,B,V){var f=e("../../lib").isTypedArray;V.convertTypedArray=function(l){return f(l)?Array.prototype.slice.call(l):l},V.isOrdinal=function(l){return!!l.tickvals},V.isVisible=function(l){return l.visible||!("visible"in l)}},{"../../lib":515}],905:[function(e,B,V){var f=e("./base_index");f.plot=e("./plot"),B.exports=f},{"./base_index":899,"./plot":909}],906:[function(e,B,V){var f=e("glslify"),l=f([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

attribute vec4 p01_04, p05_08, p09_12, p13_16,
               p17_20, p21_24, p25_28, p29_32,
               p33_36, p37_40, p41_44, p45_48,
               p49_52, p53_56, p57_60, colors;

uniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,
             loA, hiA, loB, hiB, loC, hiC, loD, hiD;

uniform vec2 resolution, viewBoxPos, viewBoxSize;
uniform float maskHeight;
uniform float drwLayer; // 0: context, 1: focus, 2: pick
uniform vec4 contextColor;
uniform sampler2D maskTexture, palette;

bool isPick    = (drwLayer > 1.5);
bool isContext = (drwLayer < 0.5);

const vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);
const vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);

float val(mat4 p, mat4 v) {
    return dot(matrixCompMult(p, v) * UNITS, UNITS);
}

float axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {
    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);
    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);
    return y1 * (1.0 - ratio) + y2 * ratio;
}

int iMod(int a, int b) {
    return a - b * (a / b);
}

bool fOutside(float p, float lo, float hi) {
    return (lo < hi) && (lo > p || p > hi);
}

bool vOutside(vec4 p, vec4 lo, vec4 hi) {
    return (
        fOutside(p[0], lo[0], hi[0]) ||
        fOutside(p[1], lo[1], hi[1]) ||
        fOutside(p[2], lo[2], hi[2]) ||
        fOutside(p[3], lo[3], hi[3])
    );
}

bool mOutside(mat4 p, mat4 lo, mat4 hi) {
    return (
        vOutside(p[0], lo[0], hi[0]) ||
        vOutside(p[1], lo[1], hi[1]) ||
        vOutside(p[2], lo[2], hi[2]) ||
        vOutside(p[3], lo[3], hi[3])
    );
}

bool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {
    return mOutside(A, loA, hiA) ||
           mOutside(B, loB, hiB) ||
           mOutside(C, loC, hiC) ||
           mOutside(D, loD, hiD);
}

bool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {
    mat4 pnts[4];
    pnts[0] = A;
    pnts[1] = B;
    pnts[2] = C;
    pnts[3] = D;

    for(int i = 0; i < 4; ++i) {
        for(int j = 0; j < 4; ++j) {
            for(int k = 0; k < 4; ++k) {
                if(0 == iMod(
                    int(255.0 * texture2D(maskTexture,
                        vec2(
                            (float(i * 2 + j / 2) + 0.5) / 8.0,
                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight
                        ))[3]
                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),
                    2
                )) return true;
            }
        }
    }
    return false;
}

vec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {
    float x = 0.5 * sign(v) + 0.5;
    float y = axisY(x, A, B, C, D);
    float z = 1.0 - abs(v);

    z += isContext ? 0.0 : 2.0 * float(
        outsideBoundingBox(A, B, C, D) ||
        outsideRasterMask(A, B, C, D)
    );

    return vec4(
        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,
        z,
        1.0
    );
}

void main() {
    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);
    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);
    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);
    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);

    float v = colors[3];

    gl_Position = position(isContext, v, A, B, C, D);

    fragColor =
        isContext ? vec4(contextColor) :
        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));
}
`]),m=f([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
    gl_FragColor = fragColor;
}
`]),x=e("./constants").maxDimensionCount,t=e("../../lib"),a=1e-6,i=2048,r=new Uint8Array(4),n=new Uint8Array(4),d={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function s(h){h.read({x:0,y:0,width:1,height:1,data:r})}function o(h,D,S,M,L){var R=h._gl;R.enable(R.SCISSOR_TEST),R.scissor(D,S,M,L),h.clear({color:[0,0,0,0],depth:1})}function y(h,D,S,M,L,R){var z=R.key;function P(I){var U=Math.min(M,L-I*M);I===0&&(window.cancelAnimationFrame(S.currentRafs[z]),delete S.currentRafs[z],o(h,R.scissorX,R.scissorY,R.scissorWidth,R.viewBoxSize[1])),!S.clearOnly&&(R.count=2*U,R.offset=2*I*M,D(R),I*M+U<L&&(S.currentRafs[z]=window.requestAnimationFrame(function(){P(I+1)})),S.drawCompleted=!1)}S.drawCompleted||(s(h),S.drawCompleted=!0),P(0)}function g(h){return Math.max(a,Math.min(1-a,h))}function b(h,D){for(var S=new Array(256),M=0;M<256;M++)S[M]=h(M/255).concat(D);return S}function v(h,D){return(h>>>8*D)%256/255}function _(h,D,S){for(var M=new Array(h*(x+4)),L=0,R=0;R<h;R++){for(var z=0;z<x;z++)M[L++]=z<D.length?D[z].paddedUnitValues[R]:.5;M[L++]=v(R,2),M[L++]=v(R,1),M[L++]=v(R,0),M[L++]=g(S[R])}return M}function u(h,D,S){for(var M=new Array(D*8),L=0,R=0;R<D;R++)for(var z=0;z<2;z++)for(var P=0;P<4;P++){var I=h*4+P,U=S[R*64+I];I===63&&z===0&&(U*=-1),M[L++]=U}return M}function T(h){var D="0"+h;return D.substr(D.length-2)}function c(h){return h<x?"p"+T(h+1)+"_"+T(h+4):"colors"}function A(h,D,S){for(var M=0;M<=x;M+=4)h[c(M)](u(M/4,D,S))}function k(h){for(var D={},S=0;S<=x;S+=4)D[c(S)]=h.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return D}function p(h,D,S,M,L,R,z,P,I,U,O,G,$,tt){for(var Z=[[],[]],X=0;X<64;X++)Z[0][X]=X===L?1:0,Z[1][X]=X===R?1:0;z*=tt,P*=tt,I*=tt,U*=tt;var J=h.lines.canvasOverdrag*tt,st=h.domain,at=h.canvasWidth*tt,lt=h.canvasHeight*tt,F=h.pad.l*tt,H=h.pad.b*tt,et=h.layoutHeight*tt,q=h.layoutWidth*tt,W=h.deselectedLines.color,K=h.deselectedLines.opacity,nt=t.extendFlat({key:O,resolution:[at,lt],viewBoxPos:[z+J,P],viewBoxSize:[I,U],i0:L,i1:R,dim0A:Z[0].slice(0,16),dim0B:Z[0].slice(16,32),dim0C:Z[0].slice(32,48),dim0D:Z[0].slice(48,64),dim1A:Z[1].slice(0,16),dim1B:Z[1].slice(16,32),dim1C:Z[1].slice(32,48),dim1D:Z[1].slice(48,64),drwLayer:G,contextColor:[W[0]/255,W[1]/255,W[2]/255,K!=="auto"?W[3]*K:Math.max(1/255,Math.pow(1/h.lines.color.length,1/3))],scissorX:(M===D?0:z+J)+(F-J)+q*st.x[0],scissorWidth:(M===S?at-z+J:I+.5)+(M===D?z+J:0),scissorY:P+H+et*st.y[0],scissorHeight:U,viewportX:F-J+q*st.x[0],viewportY:H+et*st.y[0],viewportWidth:at,viewportHeight:lt},$);return nt}function w(h){var D=i-1,S=Math.max(0,Math.floor(h[0]*D),0),M=Math.min(D,Math.ceil(h[1]*D),D);return[Math.min(S,M),Math.max(S,M)]}B.exports=function(h,D){var S=D.context,M=D.pick,L=D.regl,R=L._gl,z=R.getParameter(R.ALIASED_LINE_WIDTH_RANGE),P=Math.max(z[0],Math.min(z[1],D.viewModel.plotGlPixelRatio)),I={currentRafs:{},drawCompleted:!0,clearOnly:!1},U,O,G,$,tt=k(L),Z,X=L.texture(d),J=[];at(D);var st=L({profile:!1,blend:{enable:S,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!S,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:L.prop("scissorX"),y:L.prop("scissorY"),width:L.prop("scissorWidth"),height:L.prop("scissorHeight")}},viewport:{x:L.prop("viewportX"),y:L.prop("viewportY"),width:L.prop("viewportWidth"),height:L.prop("viewportHeight")},dither:!1,vert:l,frag:m,primitive:"lines",lineWidth:P,attributes:tt,uniforms:{resolution:L.prop("resolution"),viewBoxPos:L.prop("viewBoxPos"),viewBoxSize:L.prop("viewBoxSize"),dim0A:L.prop("dim0A"),dim1A:L.prop("dim1A"),dim0B:L.prop("dim0B"),dim1B:L.prop("dim1B"),dim0C:L.prop("dim0C"),dim1C:L.prop("dim1C"),dim0D:L.prop("dim0D"),dim1D:L.prop("dim1D"),loA:L.prop("loA"),hiA:L.prop("hiA"),loB:L.prop("loB"),hiB:L.prop("hiB"),loC:L.prop("loC"),hiC:L.prop("hiC"),loD:L.prop("loD"),hiD:L.prop("hiD"),palette:X,contextColor:L.prop("contextColor"),maskTexture:L.prop("maskTexture"),drwLayer:L.prop("drwLayer"),maskHeight:L.prop("maskHeight")},offset:L.prop("offset"),count:L.prop("count")});function at(W){U=W.model,O=W.viewModel,G=O.dimensions.slice(),$=G[0]?G[0].values.length:0;var K=U.lines,nt=M?K.color.map(function(ot,ct){return ct/K.color.length}):K.color,it=_($,G,nt);A(tt,$,it),!S&&!M&&(X=L.texture(t.extendFlat({data:b(U.unitToColor,255)},d)))}function lt(W){var K,nt,it,ot=[[],[]];for(it=0;it<64;it++){var ct=!W&&it<G.length?G[it].brush.filter.getBounds():[-1/0,1/0];ot[0][it]=ct[0],ot[1][it]=ct[1]}var bt=i*8,ut=new Array(bt);for(K=0;K<bt;K++)ut[K]=255;if(!W)for(K=0;K<G.length;K++){var pt=K%8,yt=(K-pt)/8,Tt=Math.pow(2,pt),kt=G[K],zt=kt.brush.filter.get();if(!(zt.length<2)){var Rt=w(zt[0])[1];for(nt=1;nt<zt.length;nt++){var Gt=w(zt[nt]);for(it=Rt+1;it<Gt[0];it++)ut[it*8+yt]&=~Tt;Rt=Math.max(Rt,Gt[1])}}}var wt={shape:[8,i],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:ut};return Z?Z(wt):Z=L.texture(wt),{maskTexture:Z,maskHeight:i,loA:ot[0].slice(0,16),loB:ot[0].slice(16,32),loC:ot[0].slice(32,48),loD:ot[0].slice(48,64),hiA:ot[1].slice(0,16),hiB:ot[1].slice(16,32),hiC:ot[1].slice(32,48),hiD:ot[1].slice(48,64)}}function F(W,K,nt){var it=W.length,ot,ct,bt,ut=1/0,pt=-1/0;for(ot=0;ot<it;ot++)W[ot].dim0.canvasX<ut&&(ut=W[ot].dim0.canvasX,ct=ot),W[ot].dim1.canvasX>pt&&(pt=W[ot].dim1.canvasX,bt=ot);it===0&&o(L,0,0,U.canvasWidth,U.canvasHeight);var yt=lt(S);for(ot=0;ot<it;ot++){var Tt=W[ot],kt=Tt.dim0.crossfilterDimensionIndex,zt=Tt.dim1.crossfilterDimensionIndex,Rt=Tt.canvasX,Gt=Tt.canvasY,wt=Rt+Tt.panelSizeX,It=Tt.plotGlPixelRatio;if(K||!J[kt]||J[kt][0]!==Rt||J[kt][1]!==wt){J[kt]=[Rt,wt];var $t=p(U,ct,bt,ot,kt,zt,Rt,Gt,Tt.panelSizeX,Tt.panelSizeY,Tt.dim0.crossfilterDimensionIndex,S?0:M?2:1,yt,It);I.clearOnly=nt;var Qt=K?U.lines.blockLineCount:$;y(L,st,I,Qt,$,$t)}}}function H(W,K){return L.read({x:W,y:K,width:1,height:1,data:n}),n}function et(W,K,nt,it){var ot=new Uint8Array(4*nt*it);return L.read({x:W,y:K,width:nt,height:it,data:ot}),ot}function q(){h.style["pointer-events"]="none",X.destroy(),Z&&Z.destroy();for(var W in tt)tt[W].destroy()}return{render:F,readPixel:H,readPixels:et,destroy:q,update:at}}},{"../../lib":515,"./constants":902,glslify:227}],907:[function(e,B,V){B.exports=function(f,l,m,x){x||(x=1/0);var t,a;for(t=0;t<l.length;t++)a=l[t],a.visible&&(x=Math.min(x,a[m].length));for(x===1/0&&(x=0),f._length=x,t=0;t<l.length;t++)a=l[t],a.visible&&(a._length=x);return x}},{}],908:[function(e,B,V){var f=e("@plotly/d3"),l=e("../../lib"),m=l.numberFormat,x=e("color-rgba"),t=e("../../plots/cartesian/axes"),a=l.strRotate,i=l.strTranslate,r=e("../../lib/svg_text_utils"),n=e("../../components/drawing"),d=e("../../components/colorscale"),s=e("../../lib/gup"),o=s.keyFun,y=s.repeat,g=s.unwrap,b=e("./helpers"),v=e("./constants"),_=e("./axisbrush"),u=e("./lines");function T(Z,X,J){return l.aggNums(Z,null,X,J)}function c(Z,X){return k(T(Math.min,Z,X),T(Math.max,Z,X))}function A(Z){var X=Z.range;return X?k(X[0],X[1]):c(Z.values,Z._length)}function k(Z,X){return(isNaN(Z)||!isFinite(Z))&&(Z=0),(isNaN(X)||!isFinite(X))&&(X=0),Z===X&&(Z===0?(Z-=1,X+=1):(Z*=.9,X*=1.1)),[Z,X]}function p(Z,X){return X?function(J,st){var at=X[st];return at==null?Z(J):at}:Z}function w(Z,X,J,st,at){var lt=A(J);return st?f.scale.ordinal().domain(st.map(p(m(J.tickformat),at))).range(st.map(function(F){var H=(F-lt[0])/(lt[1]-lt[0]);return Z-X+H*(2*X-Z)})):f.scale.linear().domain(lt).range([Z-X,X])}function h(Z,X){return f.scale.linear().range([X,Z-X])}function D(Z,X){return f.scale.linear().domain(A(Z)).range([X,1-X])}function S(Z){if(!!Z.tickvals){var X=A(Z);return f.scale.ordinal().domain(Z.tickvals).range(Z.tickvals.map(function(J){return(J-X[0])/(X[1]-X[0])}))}}function M(Z){var X=Z.map(function(lt){return lt[0]}),J=Z.map(function(lt){var F=x(lt[1]);return f.rgb("rgb("+F[0]+","+F[1]+","+F[2]+")")}),st=function(lt){return function(F){return F[lt]}},at="rgb".split("").map(function(lt){return f.scale.linear().clamp(!0).domain(X).range(J.map(st(lt)))});return function(lt){return at.map(function(F){return F(lt)})}}function L(Z){return Z.dimensions.some(function(X){return X.brush.filterSpecified})}function R(Z,X,J){var st=g(X),at=st.trace,lt=b.convertTypedArray(st.lineColor),F=at.line,H={color:x(at.unselected.line.color),opacity:at.unselected.line.opacity},et=d.extractOpts(F),q=et.reversescale?d.flipScale(st.cscale):st.cscale,W=at.domain,K=at.dimensions,nt=Z.width,it=at.labelangle,ot=at.labelside,ct=at.labelfont,bt=at.tickfont,ut=at.rangefont,pt=l.extendDeepNoArrays({},F,{color:lt.map(f.scale.linear().domain(A({values:lt,range:[et.min,et.max],_length:at._length}))),blockLineCount:v.blockLineCount,canvasOverdrag:v.overdrag*v.canvasPixelRatio}),yt=Math.floor(nt*(W.x[1]-W.x[0])),Tt=Math.floor(Z.height*(W.y[1]-W.y[0])),kt=Z.margin||{l:80,r:80,t:100,b:80},zt=yt,Rt=Tt;return{key:J,colCount:K.filter(b.isVisible).length,dimensions:K,tickDistance:v.tickDistance,unitToColor:M(q),lines:pt,deselectedLines:H,labelAngle:it,labelSide:ot,labelFont:ct,tickFont:bt,rangeFont:ut,layoutWidth:nt,layoutHeight:Z.height,domain:W,translateX:W.x[0]*nt,translateY:Z.height-W.y[1]*Z.height,pad:kt,canvasWidth:zt*v.canvasPixelRatio+2*pt.canvasOverdrag,canvasHeight:Rt*v.canvasPixelRatio,width:zt,height:Rt,canvasPixelRatio:v.canvasPixelRatio}}function z(Z,X,J){var st=J.width,at=J.height,lt=J.dimensions,F=J.canvasPixelRatio,H=function(nt){return st*nt/Math.max(1,J.colCount-1)},et=v.verticalPadding/at,q=h(at,v.verticalPadding),W={key:J.key,xScale:H,model:J,inBrushDrag:!1},K={};return W.dimensions=lt.filter(b.isVisible).map(function(nt,it){var ot=D(nt,et),ct=K[nt.label];K[nt.label]=(ct||0)+1;var bt=nt.label+(ct?"__"+ct:""),ut=nt.constraintrange,pt=ut&&ut.length;pt&&!Array.isArray(ut[0])&&(ut=[ut]);var yt=pt?ut.map(function(Nt){return Nt.map(ot)}):[[-1/0,1/0]],Tt=function(){var Nt=W;Nt.focusLayer&&Nt.focusLayer.render(Nt.panels,!0);var Pt=L(Nt);!Z.contextShown()&&Pt?(Nt.contextLayer&&Nt.contextLayer.render(Nt.panels,!0),Z.contextShown(!0)):Z.contextShown()&&!Pt&&(Nt.contextLayer&&Nt.contextLayer.render(Nt.panels,!0,!0),Z.contextShown(!1))},kt=nt.values;kt.length>nt._length&&(kt=kt.slice(0,nt._length));var zt=nt.tickvals,Rt;function Gt(Nt,Pt){return{val:Nt,text:Rt[Pt]}}function wt(Nt,Pt){return Nt.val-Pt.val}if(Array.isArray(zt)&&zt.length){Rt=nt.ticktext,!Array.isArray(Rt)||!Rt.length?Rt=zt.map(m(nt.tickformat)):Rt.length>zt.length?Rt=Rt.slice(0,zt.length):zt.length>Rt.length&&(zt=zt.slice(0,Rt.length));for(var It=1;It<zt.length;It++)if(zt[It]<zt[It-1]){for(var $t=zt.map(Gt).sort(wt),Qt=0;Qt<zt.length;Qt++)zt[Qt]=$t[Qt].val,Rt[Qt]=$t[Qt].text;break}}else zt=void 0;return kt=b.convertTypedArray(kt),{key:bt,label:nt.label,tickFormat:nt.tickformat,tickvals:zt,ticktext:Rt,ordinal:b.isOrdinal(nt),multiselect:nt.multiselect,xIndex:it,crossfilterDimensionIndex:it,visibleIndex:nt._index,height:at,values:kt,paddedUnitValues:kt.map(ot),unitTickvals:zt&&zt.map(ot),xScale:H,x:H(it),canvasX:H(it)*F,unitToPaddedPx:q,domainScale:w(at,v.verticalPadding,nt,zt,Rt),ordinalScale:S(nt),parent:W,model:J,brush:_.makeBrush(Z,pt,yt,function(){Z.linePickActive(!1)},Tt,function(Nt){if(W.focusLayer.render(W.panels,!0),W.pickLayer&&W.pickLayer.render(W.panels,!0),Z.linePickActive(!0),X&&X.filterChanged){var Pt=ot.invert,Yt=Nt.map(function(ve){return ve.map(Pt).sort(l.sorterAsc)}).sort(function(ve,Re){return ve[0]-Re[0]});X.filterChanged(W.key,nt._index,Yt)}})}}),W}function P(Z){Z.classed(v.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function I(){var Z=!0,X=!1;return{linePickActive:function(J){return arguments.length?Z=!!J:Z},contextShown:function(J){return arguments.length?X=!!J:X}}}function U(Z,X){var J=X==="top"?1:-1,st=Z*Math.PI/180,at=Math.sin(st),lt=Math.cos(st);return{dir:J,dx:at,dy:lt,degrees:Z}}function O(Z,X,J){for(var st=X.panels||(X.panels=[]),at=Z.data(),lt=0;lt<at.length-1;lt++){var F=st[lt]||(st[lt]={}),H=at[lt],et=at[lt+1];F.dim0=H,F.dim1=et,F.canvasX=H.canvasX,F.panelSizeX=et.canvasX-H.canvasX,F.panelSizeY=X.model.canvasHeight,F.y=0,F.canvasY=0,F.plotGlPixelRatio=J}}function G(Z){for(var X=0;X<Z.length;X++)for(var J=0;J<Z[X].length;J++)for(var st=Z[X][J].trace,at=st.dimensions,lt=0;lt<at.length;lt++){var F=at[lt].values,H=at[lt]._ax;H&&(H.range?H.range=k(H.range[0],H.range[1]):H.range=c(F,st._length),H.dtick||(H.dtick=.01*(Math.abs(H.range[1]-H.range[0])||1)),H.tickformat=at[lt].tickformat,t.calcTicks(H),H.cleanRange())}}function $(Z,X){return t.tickText(Z._ax,X,!1).text}function tt(Z,X){if(Z.ordinal)return"";var J=Z.domainScale.domain(),st=J[X?J.length-1:0];return $(Z.model.dimensions[Z.visibleIndex],st)}B.exports=function(X,J,st,at){var lt=X._fullLayout,F=lt._toppaper,H=lt._glcontainer,et=X._context.plotGlPixelRatio,q=X._fullLayout.paper_bgcolor;G(J);var W=I(),K=J.filter(function($t){return g($t).trace.visible}).map(R.bind(0,st)).map(z.bind(0,W,at));H.each(function($t,Qt){return l.extendFlat($t,K[Qt])});var nt=H.selectAll(".gl-canvas").each(function($t){$t.viewModel=K[0],$t.viewModel.plotGlPixelRatio=et,$t.viewModel.paperColor=q,$t.model=$t.viewModel?$t.viewModel.model:null}),it=null,ot=nt.filter(function($t){return $t.pick});ot.style("pointer-events","auto").on("mousemove",function($t){if(W.linePickActive()&&$t.lineLayer&&at&&at.hover){var Qt=f.event,Nt=this.width,Pt=this.height,Yt=f.mouse(this),ve=Yt[0],Re=Yt[1];if(ve<0||Re<0||ve>=Nt||Re>=Pt)return;var ir=$t.lineLayer.readPixel(ve,Pt-1-Re),Ie=ir[3]!==0,Be=Ie?ir[2]+256*(ir[1]+256*ir[0]):null,Ye={x:ve,y:Re,clientX:Qt.clientX,clientY:Qt.clientY,dataIndex:$t.model.key,curveNumber:Be};Be!==it&&(Ie?at.hover(Ye):at.unhover&&at.unhover(Ye),it=Be)}}),nt.style("opacity",function($t){return $t.pick?0:1}),F.style("background","rgba(255, 255, 255, 0)");var ct=F.selectAll("."+v.cn.parcoords).data(K,o);ct.exit().remove(),ct.enter().append("g").classed(v.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),ct.attr("transform",function($t){return i($t.model.translateX,$t.model.translateY)});var bt=ct.selectAll("."+v.cn.parcoordsControlView).data(y,o);bt.enter().append("g").classed(v.cn.parcoordsControlView,!0),bt.attr("transform",function($t){return i($t.model.pad.l,$t.model.pad.t)});var ut=bt.selectAll("."+v.cn.yAxis).data(function($t){return $t.dimensions},o);ut.enter().append("g").classed(v.cn.yAxis,!0),bt.each(function($t){O(ut,$t,et)}),nt.each(function($t){if($t.viewModel){!$t.lineLayer||at?$t.lineLayer=u(this,$t):$t.lineLayer.update($t),($t.key||$t.key===0)&&($t.viewModel[$t.key]=$t.lineLayer);var Qt=!$t.context||at;$t.lineLayer.render($t.viewModel.panels,Qt)}}),ut.attr("transform",function($t){return i($t.xScale($t.xIndex),0)}),ut.call(f.behavior.drag().origin(function($t){return $t}).on("drag",function($t){var Qt=$t.parent;W.linePickActive(!1),$t.x=Math.max(-v.overdrag,Math.min($t.model.width+v.overdrag,f.event.x)),$t.canvasX=$t.x*$t.model.canvasPixelRatio,ut.sort(function(Nt,Pt){return Nt.x-Pt.x}).each(function(Nt,Pt){Nt.xIndex=Pt,Nt.x=$t===Nt?Nt.x:Nt.xScale(Nt.xIndex),Nt.canvasX=Nt.x*Nt.model.canvasPixelRatio}),O(ut,Qt,et),ut.filter(function(Nt){return Math.abs($t.xIndex-Nt.xIndex)!==0}).attr("transform",function(Nt){return i(Nt.xScale(Nt.xIndex),0)}),f.select(this).attr("transform",i($t.x,0)),ut.each(function(Nt,Pt,Yt){Yt===$t.parent.key&&(Qt.dimensions[Pt]=Nt)}),Qt.contextLayer&&Qt.contextLayer.render(Qt.panels,!1,!L(Qt)),Qt.focusLayer.render&&Qt.focusLayer.render(Qt.panels)}).on("dragend",function($t){var Qt=$t.parent;$t.x=$t.xScale($t.xIndex),$t.canvasX=$t.x*$t.model.canvasPixelRatio,O(ut,Qt,et),f.select(this).attr("transform",function(Nt){return i(Nt.x,0)}),Qt.contextLayer&&Qt.contextLayer.render(Qt.panels,!1,!L(Qt)),Qt.focusLayer&&Qt.focusLayer.render(Qt.panels),Qt.pickLayer&&Qt.pickLayer.render(Qt.panels,!0),W.linePickActive(!0),at&&at.axesMoved&&at.axesMoved(Qt.key,Qt.dimensions.map(function(Nt){return Nt.crossfilterDimensionIndex}))})),ut.exit().remove();var pt=ut.selectAll("."+v.cn.axisOverlays).data(y,o);pt.enter().append("g").classed(v.cn.axisOverlays,!0),pt.selectAll("."+v.cn.axis).remove();var yt=pt.selectAll("."+v.cn.axis).data(y,o);yt.enter().append("g").classed(v.cn.axis,!0),yt.each(function($t){var Qt=$t.model.height/$t.model.tickDistance,Nt=$t.domainScale,Pt=Nt.domain();f.select(this).call(f.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(Qt,$t.tickFormat).tickValues($t.ordinal?Pt:null).tickFormat(function(Yt){return b.isOrdinal($t)?Yt:$($t.model.dimensions[$t.visibleIndex],Yt)}).scale(Nt)),n.font(yt.selectAll("text"),$t.model.tickFont)}),yt.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),yt.selectAll("text").style("text-shadow",r.makeTextShadow(q)).style("cursor","default");var Tt=pt.selectAll("."+v.cn.axisHeading).data(y,o);Tt.enter().append("g").classed(v.cn.axisHeading,!0);var kt=Tt.selectAll("."+v.cn.axisTitle).data(y,o);kt.enter().append("text").classed(v.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events","auto"),kt.text(function($t){return $t.label}).each(function($t){var Qt=f.select(this);n.font(Qt,$t.model.labelFont),r.convertToTspans(Qt,X)}).attr("transform",function($t){var Qt=U($t.model.labelAngle,$t.model.labelSide),Nt=v.axisTitleOffset;return(Qt.dir>0?"":i(0,2*Nt+$t.model.height))+a(Qt.degrees)+i(-Nt*Qt.dx,-Nt*Qt.dy)}).attr("text-anchor",function($t){var Qt=U($t.model.labelAngle,$t.model.labelSide),Nt=Math.abs(Qt.dx),Pt=Math.abs(Qt.dy);return 2*Nt>Pt?Qt.dir*Qt.dx<0?"start":"end":"middle"});var zt=pt.selectAll("."+v.cn.axisExtent).data(y,o);zt.enter().append("g").classed(v.cn.axisExtent,!0);var Rt=zt.selectAll("."+v.cn.axisExtentTop).data(y,o);Rt.enter().append("g").classed(v.cn.axisExtentTop,!0),Rt.attr("transform",i(0,-v.axisExtentOffset));var Gt=Rt.selectAll("."+v.cn.axisExtentTopText).data(y,o);Gt.enter().append("text").classed(v.cn.axisExtentTopText,!0).call(P),Gt.text(function($t){return tt($t,!0)}).each(function($t){n.font(f.select(this),$t.model.rangeFont)});var wt=zt.selectAll("."+v.cn.axisExtentBottom).data(y,o);wt.enter().append("g").classed(v.cn.axisExtentBottom,!0),wt.attr("transform",function($t){return i(0,$t.model.height+v.axisExtentOffset)});var It=wt.selectAll("."+v.cn.axisExtentBottomText).data(y,o);It.enter().append("text").classed(v.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(P),It.text(function($t){return tt($t,!1)}).each(function($t){n.font(f.select(this),$t.model.rangeFont)}),_.ensureAxisBrush(pt,q)}},{"../../components/colorscale":379,"../../components/drawing":389,"../../lib":515,"../../lib/gup":512,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"./axisbrush":898,"./constants":902,"./helpers":904,"./lines":906,"@plotly/d3":58,"color-rgba":91}],909:[function(e,B,i){var f=e("./parcoords"),l=e("../../lib/prepare_regl"),m=e("./helpers").isVisible,x={};function t(r,n,d){var s=n.indexOf(d),o=r.indexOf(s);return o===-1&&(o+=n.length),o}function a(r,n){return function(s,o){return t(r,n,s)-t(r,n,o)}}var i=B.exports=function(n,d){var s=n._fullLayout,o=l(n,[],x);if(!!o){var y={},g={},b={},v={},_=s._size;d.forEach(function(k,p){var w=k[0].trace;b[p]=w.index;var h=v[p]=w._fullInput.index;y[p]=n.data[h].dimensions,g[p]=n.data[h].dimensions.slice()});var u=function(k,p,w){var h=g[k][p],D=w.map(function(P){return P.slice()}),S="dimensions["+p+"].constraintrange",M=s._tracePreGUI[n._fullData[b[k]]._fullInput.uid];if(M[S]===void 0){var L=h.constraintrange;M[S]=L||null}var R=n._fullData[b[k]].dimensions[p];D.length?(D.length===1&&(D=D[0]),h.constraintrange=D,R.constraintrange=D.slice(),D=[D]):(delete h.constraintrange,delete R.constraintrange,D=null);var z={};z[S]=D,n.emit("plotly_restyle",[z,[v[k]]])},T=function(k){n.emit("plotly_hover",k)},c=function(k){n.emit("plotly_unhover",k)},A=function(k,p){var w=a(p,g[k].filter(m));y[k].sort(w),g[k].filter(function(h){return!m(h)}).sort(function(h){return g[k].indexOf(h)}).forEach(function(h){y[k].splice(y[k].indexOf(h),1),y[k].splice(g[k].indexOf(h),0,h)}),n.emit("plotly_restyle",[{dimensions:[y[k]]},[v[k]]])};f(n,d,{width:_.w,height:_.h,margin:{t:_.t,r:_.r,b:_.b,l:_.l}},{filterChanged:u,hover:T,unhover:c,axesMoved:A})}};i.reglPrecompiled=x},{"../../lib/prepare_regl":528,"./helpers":904,"./parcoords":908}],910:[function(e,B,V){var f=e("../../plots/attributes"),l=e("../../plots/domain").attributes,m=e("../../plots/font_attributes"),x=e("../../components/color/attributes"),t=e("../../plots/template_attributes").hovertemplateAttrs,a=e("../../plots/template_attributes").texttemplateAttrs,i=e("../../lib/extend").extendFlat,r=m({editType:"plot",arrayOk:!0,colorEditType:"plot"});B.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:x.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:i({},f.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:t({},{keys:["label","color","value","percent","text"]}),texttemplate:a({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:i({},r,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:i({},r,{}),outsidetextfont:i({},r,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:i({},r,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:l({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"number",min:-360,max:360,dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:i({},r,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},{"../../components/color/attributes":366,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/domain":593,"../../plots/font_attributes":594,"../../plots/template_attributes":642}],911:[function(e,B,V){var f=e("../../plots/plots");V.name="pie",V.plot=function(l,m,x,t){f.plotBasePlot(V.name,l,m,x,t)},V.clean=function(l,m,x,t){f.cleanBasePlot(V.name,l,m,x,t)}},{"../../plots/plots":628}],912:[function(e,B,V){var f=e("fast-isnumeric"),l=e("tinycolor2"),m=e("../../components/color"),x={};function t(n,d){var s=[],o=n._fullLayout,y=o.hiddenlabels||[],g=d.labels,b=d.marker.colors||[],v=d.values,_=d._length,u=d._hasValues&&_,T,c;if(d.dlabel)for(g=new Array(_),T=0;T<_;T++)g[T]=String(d.label0+T*d.dlabel);var A={},k=a(o["_"+d.type+"colormap"]),p=0,w=!1;for(T=0;T<_;T++){var h,D,S;if(u){if(h=v[T],!f(h))continue;h=+h}else h=1;D=g[T],(D===void 0||D==="")&&(D=T),D=String(D);var M=A[D];M===void 0?(A[D]=s.length,S=y.indexOf(D)!==-1,S||(p+=h),s.push({v:h,label:D,color:k(b[T],D),i:T,pts:[T],hidden:S})):(w=!0,c=s[M],c.v+=h,c.pts.push(T),c.hidden||(p+=h),c.color===!1&&b[T]&&(c.color=k(b[T],D)))}s=s.filter(function(R){return R.v>=0});var L=d.type==="funnelarea"?w:d.sort;return L&&s.sort(function(R,z){return z.v-R.v}),s[0]&&(s[0].vTotal=p),s}function a(n){return function(s,o){return!s||(s=l(s),!s.isValid())?!1:(s=m.addOpacity(s,s.getAlpha()),n[o]||(n[o]=s),s)}}function i(n,d){var s=(d||{}).type;s||(s="pie");var o=n._fullLayout,y=n.calcdata,g=o[s+"colorway"],b=o["_"+s+"colormap"];o["extend"+s+"colors"]&&(g=r(g,x));for(var v=0,_=0;_<y.length;_++){var u=y[_],T=u[0].trace.type;if(T===s)for(var c=0;c<u.length;c++){var A=u[c];A.color===!1&&(b[A.label]?A.color=b[A.label]:(b[A.label]=A.color=g[v%g.length],v++))}}}function r(n,d){var s,o=JSON.stringify(n),y=d[o];if(!y){for(y=n.slice(),s=0;s<n.length;s++)y.push(l(n[s]).lighten(20).toHexString());for(s=0;s<n.length;s++)y.push(l(n[s]).darken(20).toHexString());d[o]=y}return y}B.exports={calc:t,crossTraceCalc:i,makePullColorFn:a,generateExtendedColors:r}},{"../../components/color":367,"fast-isnumeric":190,tinycolor2:313}],913:[function(e,B,V){var f=e("fast-isnumeric"),l=e("../../lib"),m=e("./attributes"),x=e("../../plots/domain").defaults,t=e("../bar/defaults").handleText;function a(r,n){var d=Array.isArray(r),s=l.isArrayOrTypedArray(n),o=Math.min(d?r.length:1/0,s?n.length:1/0);if(isFinite(o)||(o=0),o&&s){for(var y,g=0;g<o;g++){var b=n[g];if(f(b)&&b>0){y=!0;break}}y||(o=0)}return{hasLabels:d,hasValues:s,len:o}}function i(r,n,d,s){function o(S,M){return l.coerce(r,n,m,S,M)}var y=o("labels"),g=o("values"),b=a(y,g),v=b.len;if(n._hasLabels=b.hasLabels,n._hasValues=b.hasValues,!n._hasLabels&&n._hasValues&&(o("label0"),o("dlabel")),!v){n.visible=!1;return}n._length=v;var _=o("marker.line.width");_&&o("marker.line.color"),o("marker.colors"),o("scalegroup");var u=o("text"),T=o("texttemplate"),c;if(T||(c=o("textinfo",Array.isArray(u)?"text+percent":"percent")),o("hovertext"),o("hovertemplate"),T||c&&c!=="none"){var A=o("textposition");t(r,n,s,o,A,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1});var k=Array.isArray(A)||A==="auto",p=k||A==="outside";p&&o("automargin"),(A==="inside"||A==="auto"||Array.isArray(A))&&o("insidetextorientation")}x(n,s,o);var w=o("hole"),h=o("title.text");if(h){var D=o("title.position",w?"middle center":"top center");!w&&D==="middle center"&&(n.title.position="top center"),l.coerceFont(o,"title.font",s.font)}o("sort"),o("direction"),o("rotation"),o("pull")}B.exports={handleLabelsAndValues:a,supplyDefaults:i}},{"../../lib":515,"../../plots/domain":593,"../bar/defaults":661,"./attributes":910,"fast-isnumeric":190}],914:[function(e,B,V){var f=e("../../components/fx/helpers").appendArrayMultiPointValues;B.exports=function(m,x){var t={curveNumber:x.index,pointNumbers:m.pts,data:x._input,fullData:x,label:m.label,color:m.color,value:m.v,percent:m.percent,text:m.text,bbox:m.bbox,v:m.v};return m.pts.length===1&&(t.pointNumber=t.i=m.pts[0]),f(t,x,m.pts),x.type==="funnelarea"&&(delete t.v,delete t.i),t}},{"../../components/fx/helpers":403}],915:[function(e,B,V){var f=e("../../lib");function l(m){return m.indexOf("e")!==-1?m.replace(/[.]?0+e/,"e"):m.indexOf(".")!==-1?m.replace(/[.]?0+$/,""):m}V.formatPiePercent=function(x,t){var a=l((x*100).toPrecision(3));return f.numSeparate(a,t)+"%"},V.formatPieValue=function(x,t){var a=l(x.toPrecision(10));return f.numSeparate(a,t)},V.getFirstFilled=function(x,t){if(!!Array.isArray(x))for(var a=0;a<t.length;a++){var i=x[t[a]];if(i||i===0||i==="")return i}},V.castOption=function(x,t){if(Array.isArray(x))return V.getFirstFilled(x,t);if(x)return x},V.getRotationAngle=function(m){return(m==="auto"?0:m)*Math.PI/180}},{"../../lib":515}],916:[function(e,B,V){B.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults").supplyDefaults,supplyLayoutDefaults:e("./layout_defaults"),layoutAttributes:e("./layout_attributes"),calc:e("./calc").calc,crossTraceCalc:e("./calc").crossTraceCalc,plot:e("./plot").plot,style:e("./style"),styleOne:e("./style_one"),moduleType:"trace",name:"pie",basePlotModule:e("./base_plot"),categories:["pie-like","pie","showLegend"],meta:{}}},{"./attributes":910,"./base_plot":911,"./calc":912,"./defaults":913,"./layout_attributes":917,"./layout_defaults":918,"./plot":919,"./style":920,"./style_one":921}],917:[function(e,B,V){B.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],918:[function(e,B,V){var f=e("../../lib"),l=e("./layout_attributes");B.exports=function(x,t){function a(i,r){return f.coerce(x,t,l,i,r)}a("hiddenlabels"),a("piecolorway",t.colorway),a("extendpiecolors")}},{"../../lib":515,"./layout_attributes":917}],919:[function(e,B,V){var f=e("@plotly/d3"),l=e("../../plots/plots"),m=e("../../components/fx"),x=e("../../components/color"),t=e("../../components/drawing"),a=e("../../lib"),i=a.strScale,r=a.strTranslate,n=e("../../lib/svg_text_utils"),d=e("../bar/uniform_text"),s=d.recordMinTextSize,o=d.clearMinTextSize,y=e("../bar/constants").TEXTPAD,g=e("./helpers"),b=e("./event_data"),v=e("../../lib").isValidTextValue;function _(lt,F){var H=lt._fullLayout,et=H._size;o("pie",H),k(F,lt),tt(F,et);var q=a.makeTraceGroups(H._pielayer,F,"trace").each(function(W){var K=f.select(this),nt=W[0],it=nt.trace;X(W),K.attr("stroke-linejoin","round"),K.each(function(){var ot=f.select(this).selectAll("g.slice").data(W);ot.enter().append("g").classed("slice",!0),ot.exit().remove();var ct=[[[],[]],[[],[]]],bt=!1;ot.each(function(Gt,wt){if(Gt.hidden){f.select(this).selectAll("path,g").remove();return}Gt.pointNumber=Gt.i,Gt.curveNumber=it.index,ct[Gt.pxmid[1]<0?0:1][Gt.pxmid[0]<0?0:1].push(Gt);var It=nt.cx,$t=nt.cy,Qt=f.select(this),Nt=Qt.selectAll("path.surface").data([Gt]);if(Nt.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),Qt.call(T,lt,W),it.pull){var Pt=+g.castOption(it.pull,Gt.pts)||0;Pt>0&&(It+=Pt*Gt.pxmid[0],$t+=Pt*Gt.pxmid[1])}Gt.cxFinal=It,Gt.cyFinal=$t;function Yt(ze,Ee,Wt,ee){var Xt=ee*(Ee[0]-ze[0]),St=ee*(Ee[1]-ze[1]);return"a"+ee*nt.r+","+ee*nt.r+" 0 "+Gt.largeArc+(Wt?" 1 ":" 0 ")+Xt+","+St}var ve=it.hole;if(Gt.v===nt.vTotal){var Re="M"+(It+Gt.px0[0])+","+($t+Gt.px0[1])+Yt(Gt.px0,Gt.pxmid,!0,1)+Yt(Gt.pxmid,Gt.px0,!0,1)+"Z";ve?Nt.attr("d","M"+(It+ve*Gt.px0[0])+","+($t+ve*Gt.px0[1])+Yt(Gt.px0,Gt.pxmid,!1,ve)+Yt(Gt.pxmid,Gt.px0,!1,ve)+"Z"+Re):Nt.attr("d",Re)}else{var ir=Yt(Gt.px0,Gt.px1,!0,1);if(ve){var Ie=1-ve;Nt.attr("d","M"+(It+ve*Gt.px1[0])+","+($t+ve*Gt.px1[1])+Yt(Gt.px1,Gt.px0,!1,ve)+"l"+Ie*Gt.px0[0]+","+Ie*Gt.px0[1]+ir+"Z")}else Nt.attr("d","M"+It+","+$t+"l"+Gt.px0[0]+","+Gt.px0[1]+ir+"Z")}st(lt,Gt,nt);var Be=g.castOption(it.textposition,Gt.pts),Ye=Qt.selectAll("g.slicetext").data(Gt.text&&Be!=="none"?[0]:[]);Ye.enter().append("g").classed("slicetext",!0),Ye.exit().remove(),Ye.each(function(){var ze=a.ensureSingle(f.select(this),"text","",function(qt){qt.attr("data-notex",1)}),Ee=a.ensureUniformFontSize(lt,Be==="outside"?c(it,Gt,H.font):A(it,Gt,H.font));ze.text(Gt.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(t.font,Ee).call(n.convertToTspans,lt);var Wt=t.bBox(ze.node()),ee;if(Be==="outside")ee=z(Wt,Gt);else if(ee=p(Wt,Gt,nt),Be==="auto"&&ee.scale<1){var Xt=a.ensureUniformFontSize(lt,it.outsidetextfont);ze.call(t.font,Xt),Wt=t.bBox(ze.node()),ee=z(Wt,Gt)}var St=ee.textPosAngle,Vt=St===void 0?Gt.pxmid:J(nt.r,St);if(ee.targetX=It+Vt[0]*ee.rCenter+(ee.x||0),ee.targetY=$t+Vt[1]*ee.rCenter+(ee.y||0),at(ee,Wt),ee.outside){var Zt=ee.targetY;Gt.yLabelMin=Zt-Wt.height/2,Gt.yLabelMid=Zt,Gt.yLabelMax=Zt+Wt.height/2,Gt.labelExtraX=0,Gt.labelExtraY=0,bt=!0}ee.fontSize=Ee.size,s(it.type,ee,H),W[wt].transform=ee,ze.attr("transform",a.getTextTransform(ee))})});var ut=f.select(this).selectAll("g.titletext").data(it.title.text?[0]:[]);if(ut.enter().append("g").classed("titletext",!0),ut.exit().remove(),ut.each(function(){var Gt=a.ensureSingle(f.select(this),"text","",function($t){$t.attr("data-notex",1)}),wt=it.title.text;it._meta&&(wt=a.templateString(wt,it._meta)),Gt.text(wt).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(t.font,it.title.font).call(n.convertToTspans,lt);var It;it.title.position==="middle center"?It=P(nt):It=I(nt,et),Gt.attr("transform",r(It.x,It.y)+i(Math.min(1,It.scale))+r(It.tx,It.ty))}),bt&&$(ct,it),u(ot,it),bt&&it.automargin){var pt=t.bBox(K.node()),yt=it.domain,Tt=et.w*(yt.x[1]-yt.x[0]),kt=et.h*(yt.y[1]-yt.y[0]),zt=(.5*Tt-nt.r)/et.w,Rt=(.5*kt-nt.r)/et.h;l.autoMargin(lt,"pie."+it.uid+".automargin",{xl:yt.x[0]-zt,xr:yt.x[1]+zt,yb:yt.y[0]-Rt,yt:yt.y[1]+Rt,l:Math.max(nt.cx-nt.r-pt.left,0),r:Math.max(pt.right-(nt.cx+nt.r),0),b:Math.max(pt.bottom-(nt.cy+nt.r),0),t:Math.max(nt.cy-nt.r-pt.top,0),pad:5})}})});setTimeout(function(){q.selectAll("tspan").each(function(){var W=f.select(this);W.attr("dy")&&W.attr("dy",W.attr("dy"))})},0)}function u(lt,F){lt.each(function(H){var et=f.select(this);if(!H.labelExtraX&&!H.labelExtraY){et.select("path.textline").remove();return}var q=et.select("g.slicetext text");H.transform.targetX+=H.labelExtraX,H.transform.targetY+=H.labelExtraY,q.attr("transform",a.getTextTransform(H.transform));var W=H.cxFinal+H.pxmid[0],K=H.cyFinal+H.pxmid[1],nt="M"+W+","+K,it=(H.yLabelMax-H.yLabelMin)*(H.pxmid[0]<0?-1:1)/4;if(H.labelExtraX){var ot=H.labelExtraX*H.pxmid[1]/H.pxmid[0],ct=H.yLabelMid+H.labelExtraY-(H.cyFinal+H.pxmid[1]);Math.abs(ot)>Math.abs(ct)?nt+="l"+ct*H.pxmid[0]/H.pxmid[1]+","+ct+"H"+(W+H.labelExtraX+it):nt+="l"+H.labelExtraX+","+ot+"v"+(ct-ot)+"h"+it}else nt+="V"+(H.yLabelMid+H.labelExtraY)+"h"+it;a.ensureSingle(et,"path","textline").call(x.stroke,F.outsidetextfont.color).attr({"stroke-width":Math.min(2,F.outsidetextfont.size/8),d:nt,fill:"none"})})}function T(lt,F,H){var et=H[0],q=et.cx,W=et.cy,K=et.trace,nt=K.type==="funnelarea";"_hasHoverLabel"in K||(K._hasHoverLabel=!1),"_hasHoverEvent"in K||(K._hasHoverEvent=!1),lt.on("mouseover",function(it){var ot=F._fullLayout,ct=F._fullData[K.index];if(!(F._dragging||ot.hovermode===!1)){var bt=ct.hoverinfo;if(Array.isArray(bt)&&(bt=m.castHoverinfo({hoverinfo:[g.castOption(bt,it.pts)],_module:K._module},ot,0)),bt==="all"&&(bt="label+text+value+percent+name"),ct.hovertemplate||bt!=="none"&&bt!=="skip"&&bt){var ut=it.rInscribed||0,pt=q+it.pxmid[0]*(1-ut),yt=W+it.pxmid[1]*(1-ut),Tt=ot.separators,kt=[];if(bt&&bt.indexOf("label")!==-1&&kt.push(it.label),it.text=g.castOption(ct.hovertext||ct.text,it.pts),bt&&bt.indexOf("text")!==-1){var zt=it.text;a.isValidTextValue(zt)&&kt.push(zt)}it.value=it.v,it.valueLabel=g.formatPieValue(it.v,Tt),bt&&bt.indexOf("value")!==-1&&kt.push(it.valueLabel),it.percent=it.v/et.vTotal,it.percentLabel=g.formatPiePercent(it.percent,Tt),bt&&bt.indexOf("percent")!==-1&&kt.push(it.percentLabel);var Rt=ct.hoverlabel,Gt=Rt.font,wt=[];m.loneHover({trace:K,x0:pt-ut*et.r,x1:pt+ut*et.r,y:yt,_x0:nt?q+it.TL[0]:pt-ut*et.r,_x1:nt?q+it.TR[0]:pt+ut*et.r,_y0:nt?W+it.TL[1]:yt-ut*et.r,_y1:nt?W+it.BL[1]:yt+ut*et.r,text:kt.join("<br>"),name:ct.hovertemplate||bt.indexOf("name")!==-1?ct.name:void 0,idealAlign:it.pxmid[0]<0?"left":"right",color:g.castOption(Rt.bgcolor,it.pts)||it.color,borderColor:g.castOption(Rt.bordercolor,it.pts),fontFamily:g.castOption(Gt.family,it.pts),fontSize:g.castOption(Gt.size,it.pts),fontColor:g.castOption(Gt.color,it.pts),nameLength:g.castOption(Rt.namelength,it.pts),textAlign:g.castOption(Rt.align,it.pts),hovertemplate:g.castOption(ct.hovertemplate,it.pts),hovertemplateLabels:it,eventData:[b(it,ct)]},{container:ot._hoverlayer.node(),outerContainer:ot._paper.node(),gd:F,inOut_bbox:wt}),it.bbox=wt[0],K._hasHoverLabel=!0}K._hasHoverEvent=!0,F.emit("plotly_hover",{points:[b(it,ct)],event:f.event})}}),lt.on("mouseout",function(it){var ot=F._fullLayout,ct=F._fullData[K.index],bt=f.select(this).datum();K._hasHoverEvent&&(it.originalEvent=f.event,F.emit("plotly_unhover",{points:[b(bt,ct)],event:f.event}),K._hasHoverEvent=!1),K._hasHoverLabel&&(m.loneUnhover(ot._hoverlayer.node()),K._hasHoverLabel=!1)}),lt.on("click",function(it){var ot=F._fullLayout,ct=F._fullData[K.index];F._dragging||ot.hovermode===!1||(F._hoverdata=[b(it,ct)],m.click(F,f.event))})}function c(lt,F,H){var et=g.castOption(lt.outsidetextfont.color,F.pts)||g.castOption(lt.textfont.color,F.pts)||H.color,q=g.castOption(lt.outsidetextfont.family,F.pts)||g.castOption(lt.textfont.family,F.pts)||H.family,W=g.castOption(lt.outsidetextfont.size,F.pts)||g.castOption(lt.textfont.size,F.pts)||H.size;return{color:et,family:q,size:W}}function A(lt,F,H){var et=g.castOption(lt.insidetextfont.color,F.pts);!et&&lt._input.textfont&&(et=g.castOption(lt._input.textfont.color,F.pts));var q=g.castOption(lt.insidetextfont.family,F.pts)||g.castOption(lt.textfont.family,F.pts)||H.family,W=g.castOption(lt.insidetextfont.size,F.pts)||g.castOption(lt.textfont.size,F.pts)||H.size;return{color:et||x.contrast(F.color),family:q,size:W}}function k(lt,F){for(var H,et,q=0;q<lt.length;q++)if(H=lt[q][0],et=H.trace,et.title.text){var W=et.title.text;et._meta&&(W=a.templateString(W,et._meta));var K=t.tester.append("text").attr("data-notex",1).text(W).call(t.font,et.title.font).call(n.convertToTspans,F),nt=t.bBox(K.node(),!0);H.titleBox={width:nt.width,height:nt.height},K.remove()}}function p(lt,F,H){var et=H.r||F.rpx1,q=F.rInscribed,W=F.startangle===F.stopangle;if(W)return{rCenter:1-q,scale:0,rotate:0,textPosAngle:0};var K=F.ring,nt=K===1&&Math.abs(F.startangle-F.stopangle)===Math.PI*2,it=F.halfangle,ot=F.midangle,ct=H.trace.insidetextorientation,bt=ct==="horizontal",ut=ct==="tangential",pt=ct==="radial",yt=ct==="auto",Tt=[],kt;if(!yt){var zt=function(Nt,Pt){if(w(F,Nt)){var Yt=Math.abs(Nt-F.startangle),ve=Math.abs(Nt-F.stopangle),Re=Yt<ve?Yt:ve;Pt==="tan"?kt=D(lt,et,K,Re,0):kt=h(lt,et,K,Re,Math.PI/2),kt.textPosAngle=Nt,Tt.push(kt)}},Rt;if(bt||ut){for(Rt=4;Rt>=-4;Rt-=2)zt(Math.PI*Rt,"tan");for(Rt=4;Rt>=-4;Rt-=2)zt(Math.PI*(Rt+1),"tan")}if(bt||pt){for(Rt=4;Rt>=-4;Rt-=2)zt(Math.PI*(Rt+1.5),"rad");for(Rt=4;Rt>=-4;Rt-=2)zt(Math.PI*(Rt+.5),"rad")}}if(nt||yt||bt){var Gt=Math.sqrt(lt.width*lt.width+lt.height*lt.height);if(kt={scale:q*et*2/Gt,rCenter:1-q,rotate:0},kt.textPosAngle=(F.startangle+F.stopangle)/2,kt.scale>=1)return kt;Tt.push(kt)}(yt||pt)&&(kt=h(lt,et,K,it,ot),kt.textPosAngle=(F.startangle+F.stopangle)/2,Tt.push(kt)),(yt||ut)&&(kt=D(lt,et,K,it,ot),kt.textPosAngle=(F.startangle+F.stopangle)/2,Tt.push(kt));for(var wt=0,It=0,$t=0;$t<Tt.length;$t++){var Qt=Tt[$t].scale;if(It<Qt&&(It=Qt,wt=$t),!yt&&It>=1)break}return Tt[wt]}function w(lt,F){var H=lt.startangle,et=lt.stopangle;return H>F&&F>et||H<F&&F<et}function h(lt,F,H,et,q){F=Math.max(0,F-2*y);var W=lt.width/lt.height,K=L(W,et,F,H);return{scale:K*2/lt.height,rCenter:S(W,K/F),rotate:M(q)}}function D(lt,F,H,et,q){F=Math.max(0,F-2*y);var W=lt.height/lt.width,K=L(W,et,F,H);return{scale:K*2/lt.width,rCenter:S(W,K/F),rotate:M(q+Math.PI/2)}}function S(lt,F){return Math.cos(F)-lt*F}function M(lt){return(180/Math.PI*lt+720)%180-90}function L(lt,F,H,et){var q=lt+1/(2*Math.tan(F));return H*Math.min(1/(Math.sqrt(q*q+.5)+q),et/(Math.sqrt(lt*lt+et/2)+lt))}function R(lt,F){return lt.v===F.vTotal&&!F.trace.hole?1:Math.min(1/(1+1/Math.sin(lt.halfangle)),lt.ring/2)}function z(lt,F){var H=F.pxmid[0],et=F.pxmid[1],q=lt.width/2,W=lt.height/2;return H<0&&(q*=-1),et<0&&(W*=-1),{scale:1,rCenter:1,rotate:0,x:q+Math.abs(W)*(q>0?1:-1)/2,y:W/(1+H*H/(et*et)),outside:!0}}function P(lt){var F=Math.sqrt(lt.titleBox.width*lt.titleBox.width+lt.titleBox.height*lt.titleBox.height);return{x:lt.cx,y:lt.cy,scale:lt.trace.hole*lt.r*2/F,tx:0,ty:-lt.titleBox.height/2+lt.trace.title.font.size}}function I(lt,F){var H=1,et=1,q,W=lt.trace,K={x:lt.cx,y:lt.cy},nt={tx:0,ty:0};nt.ty+=W.title.font.size,q=G(W),W.title.position.indexOf("top")!==-1?(K.y-=(1+q)*lt.r,nt.ty-=lt.titleBox.height):W.title.position.indexOf("bottom")!==-1&&(K.y+=(1+q)*lt.r);var it=U(lt.r,lt.trace.aspectratio),ot=F.w*(W.domain.x[1]-W.domain.x[0])/2;return W.title.position.indexOf("left")!==-1?(ot=ot+it,K.x-=(1+q)*it,nt.tx+=lt.titleBox.width/2):W.title.position.indexOf("center")!==-1?ot*=2:W.title.position.indexOf("right")!==-1&&(ot=ot+it,K.x+=(1+q)*it,nt.tx-=lt.titleBox.width/2),H=ot/lt.titleBox.width,et=O(lt,F)/lt.titleBox.height,{x:K.x,y:K.y,scale:Math.min(H,et),tx:nt.tx,ty:nt.ty}}function U(lt,F){return lt/(F===void 0?1:F)}function O(lt,F){var H=lt.trace,et=F.h*(H.domain.y[1]-H.domain.y[0]);return Math.min(lt.titleBox.height,et/2)}function G(lt){var F=lt.pull;if(!F)return 0;var H;if(Array.isArray(F))for(F=0,H=0;H<lt.pull.length;H++)lt.pull[H]>F&&(F=lt.pull[H]);return F}function $(lt,F){var H,et,q,W,K,nt,it,ot,ct,bt,ut,pt,yt;function Tt(Gt,wt){return Gt.pxmid[1]-wt.pxmid[1]}function kt(Gt,wt){return wt.pxmid[1]-Gt.pxmid[1]}function zt(Gt,wt){wt||(wt={});var It=wt.labelExtraY+(et?wt.yLabelMax:wt.yLabelMin),$t=et?Gt.yLabelMin:Gt.yLabelMax,Qt=et?Gt.yLabelMax:Gt.yLabelMin,Nt=Gt.cyFinal+K(Gt.px0[1],Gt.px1[1]),Pt=It-$t,Yt,ve,Re,ir,Ie,Be;if(Pt*it>0&&(Gt.labelExtraY=Pt),!!Array.isArray(F.pull))for(ve=0;ve<bt.length;ve++)Re=bt[ve],!(Re===Gt||(g.castOption(F.pull,Gt.pts)||0)>=(g.castOption(F.pull,Re.pts)||0))&&((Gt.pxmid[1]-Re.pxmid[1])*it>0?(ir=Re.cyFinal+K(Re.px0[1],Re.px1[1]),Pt=ir-$t-Gt.labelExtraY,Pt*it>0&&(Gt.labelExtraY+=Pt)):(Qt+Gt.labelExtraY-Nt)*it>0&&(Yt=3*nt*Math.abs(ve-bt.indexOf(Gt)),Ie=Re.cxFinal+W(Re.px0[0],Re.px1[0]),Be=Ie+Yt-(Gt.cxFinal+Gt.pxmid[0])-Gt.labelExtraX,Be*nt>0&&(Gt.labelExtraX+=Be)))}for(et=0;et<2;et++)for(q=et?Tt:kt,K=et?Math.max:Math.min,it=et?1:-1,H=0;H<2;H++){for(W=H?Math.max:Math.min,nt=H?1:-1,ot=lt[et][H],ot.sort(q),ct=lt[1-et][H],bt=ct.concat(ot),pt=[],ut=0;ut<ot.length;ut++)ot[ut].yLabelMid!==void 0&&pt.push(ot[ut]);for(yt=!1,ut=0;et&&ut<ct.length;ut++)if(ct[ut].yLabelMid!==void 0){yt=ct[ut];break}for(ut=0;ut<pt.length;ut++){var Rt=ut&&pt[ut-1];yt&&!ut&&(Rt=yt),zt(pt[ut],Rt)}}}function tt(lt,F){for(var H=[],et=0;et<lt.length;et++){var q=lt[et][0],W=q.trace,K=W.domain,nt=F.w*(K.x[1]-K.x[0]),it=F.h*(K.y[1]-K.y[0]);W.title.text&&W.title.position!=="middle center"&&(it-=O(q,F));var ot=nt/2,ct=it/2;W.type==="funnelarea"&&!W.scalegroup&&(ct/=W.aspectratio),q.r=Math.min(ot,ct)/(1+G(W)),q.cx=F.l+F.w*(W.domain.x[1]+W.domain.x[0])/2,q.cy=F.t+F.h*(1-W.domain.y[0])-it/2,W.title.text&&W.title.position.indexOf("bottom")!==-1&&(q.cy-=O(q,F)),W.scalegroup&&H.indexOf(W.scalegroup)===-1&&H.push(W.scalegroup)}Z(lt,H)}function Z(lt,F){for(var H,et,q,W=0;W<F.length;W++){var K=1/0,nt=F[W];for(et=0;et<lt.length;et++)if(H=lt[et][0],q=H.trace,q.scalegroup===nt){var it;if(q.type==="pie")it=H.r*H.r;else if(q.type==="funnelarea"){var ot,ct;q.aspectratio>1?(ot=H.r,ct=ot/q.aspectratio):(ct=H.r,ot=ct*q.aspectratio),ot*=(1+q.baseratio)/2,it=ot*ct}K=Math.min(K,it/H.vTotal)}for(et=0;et<lt.length;et++)if(H=lt[et][0],q=H.trace,q.scalegroup===nt){var bt=K*H.vTotal;q.type==="funnelarea"&&(bt/=(1+q.baseratio)/2,bt/=q.aspectratio),H.r=Math.sqrt(bt)}}}function X(lt){var F=lt[0],H=F.r,et=F.trace,q=g.getRotationAngle(et.rotation),W=2*Math.PI/F.vTotal,K="px0",nt="px1",it,ot,ct;if(et.direction==="counterclockwise"){for(it=0;it<lt.length&&lt[it].hidden;it++);if(it===lt.length)return;q+=W*lt[it].v,W*=-1,K="px1",nt="px0"}for(ct=J(H,q),it=0;it<lt.length;it++)ot=lt[it],!ot.hidden&&(ot[K]=ct,ot.startangle=q,q+=W*ot.v/2,ot.pxmid=J(H,q),ot.midangle=q,q+=W*ot.v/2,ct=J(H,q),ot.stopangle=q,ot[nt]=ct,ot.largeArc=ot.v>F.vTotal/2?1:0,ot.halfangle=Math.PI*Math.min(ot.v/F.vTotal,.5),ot.ring=1-et.hole,ot.rInscribed=R(ot,F))}function J(lt,F){return[lt*Math.sin(F),-lt*Math.cos(F)]}function st(lt,F,H){var et=lt._fullLayout,q=H.trace,W=q.texttemplate,K=q.textinfo;if(!W&&K&&K!=="none"){var nt=K.split("+"),it=function(wt){return nt.indexOf(wt)!==-1},ot=it("label"),ct=it("text"),bt=it("value"),ut=it("percent"),pt=et.separators,yt;if(yt=ot?[F.label]:[],ct){var Tt=g.getFirstFilled(q.text,F.pts);v(Tt)&&yt.push(Tt)}bt&&yt.push(g.formatPieValue(F.v,pt)),ut&&yt.push(g.formatPiePercent(F.v/H.vTotal,pt)),F.text=yt.join("<br>")}function kt(wt){return{label:wt.label,value:wt.v,valueLabel:g.formatPieValue(wt.v,et.separators),percent:wt.v/H.vTotal,percentLabel:g.formatPiePercent(wt.v/H.vTotal,et.separators),color:wt.color,text:wt.text,customdata:a.castOption(q,wt.i,"customdata")}}if(W){var zt=a.castOption(q,F.i,"texttemplate");if(!zt)F.text="";else{var Rt=kt(F),Gt=g.getFirstFilled(q.text,F.pts);(v(Gt)||Gt==="")&&(Rt.text=Gt),F.text=a.texttemplateString(zt,Rt,lt._fullLayout._d3locale,Rt,q._meta||{})}}}function at(lt,F){var H=lt.rotate*Math.PI/180,et=Math.cos(H),q=Math.sin(H),W=(F.left+F.right)/2,K=(F.top+F.bottom)/2;lt.textX=W*et-K*q,lt.textY=W*q+K*et,lt.noCenter=!0}B.exports={plot:_,formatSliceLabel:st,transformInsideText:p,determineInsideTextFont:A,positionTitleOutside:I,prerenderTitles:k,layoutAreas:tt,attachFxHandlers:T,computeTransform:at}},{"../../components/color":367,"../../components/drawing":389,"../../components/fx":407,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/plots":628,"../bar/constants":659,"../bar/uniform_text":673,"./event_data":914,"./helpers":915,"@plotly/d3":58}],920:[function(e,B,V){var f=e("@plotly/d3"),l=e("./style_one"),m=e("../bar/uniform_text").resizeText;B.exports=function(t){var a=t._fullLayout._pielayer.selectAll(".trace");m(t,a,"pie"),a.each(function(i){var r=i[0],n=r.trace,d=f.select(this);d.style({opacity:n.opacity}),d.selectAll("path.surface").each(function(s){f.select(this).call(l,s,n)})})}},{"../bar/uniform_text":673,"./style_one":921,"@plotly/d3":58}],921:[function(e,B,V){var f=e("../../components/color"),l=e("./helpers").castOption;B.exports=function(x,t,a){var i=a.marker.line,r=l(i.color,t.pts)||f.defaultLine,n=l(i.width,t.pts)||0;x.style("stroke-width",n).call(f.fill,t.color).call(f.stroke,r)}},{"../../components/color":367,"./helpers":915}],922:[function(e,B,V){var f=e("../scatter/attributes");B.exports={x:f.x,y:f.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:f.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},{"../scatter/attributes":936}],923:[function(e,B,V){var f=e("../../../stackgl_modules").gl_pointcloud2d,l=e("../../lib/str2rgbarray"),m=e("../../plots/cartesian/autorange").findExtremes,x=e("../scatter/get_trace_color");function t(r,n){this.scene=r,this.uid=n,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=f(r.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var a=t.prototype;a.handlePick=function(r){var n=this.idToIndex[r.pointId];return{trace:this,dataCoord:r.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[n*2],this.pickXYData[n*2+1]]:[this.pickXData[n],this.pickYData[n]],textLabel:Array.isArray(this.textLabels)?this.textLabels[n]:this.textLabels,color:this.color,name:this.name,pointIndex:n,hoverinfo:this.hoverinfo}},a.update=function(r){this.index=r.index,this.textLabels=r.text,this.name=r.name,this.hoverinfo=r.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(r),this.color=x(r,{})},a.updateFast=function(r){var n=this.xData=this.pickXData=r.x,d=this.yData=this.pickYData=r.y,s=this.pickXYData=r.xy,o=r.xbounds&&r.ybounds,y=r.indices,g,b,v,_=this.bounds,u,T,c;if(s){if(v=s,g=s.length>>>1,o)_[0]=r.xbounds[0],_[2]=r.xbounds[1],_[1]=r.ybounds[0],_[3]=r.ybounds[1];else for(c=0;c<g;c++)u=v[c*2],T=v[c*2+1],u<_[0]&&(_[0]=u),u>_[2]&&(_[2]=u),T<_[1]&&(_[1]=T),T>_[3]&&(_[3]=T);if(y)b=y;else for(b=new Int32Array(g),c=0;c<g;c++)b[c]=c}else for(g=n.length,v=new Float32Array(2*g),b=new Int32Array(g),c=0;c<g;c++)u=n[c],T=d[c],b[c]=c,v[c*2]=u,v[c*2+1]=T,u<_[0]&&(_[0]=u),u>_[2]&&(_[2]=u),T<_[1]&&(_[1]=T),T>_[3]&&(_[3]=T);this.idToIndex=b,this.pointcloudOptions.idToIndex=b,this.pointcloudOptions.positions=v;var A=l(r.marker.color),k=l(r.marker.border.color),p=r.opacity*r.marker.opacity;A[3]*=p,this.pointcloudOptions.color=A;var w=r.marker.blend;if(w===null){var h=100;w=n.length<h||d.length<h}this.pointcloudOptions.blend=w,k[3]*=p,this.pointcloudOptions.borderColor=k;var D=r.marker.sizemin,S=Math.max(r.marker.sizemax,r.marker.sizemin);this.pointcloudOptions.sizeMin=D,this.pointcloudOptions.sizeMax=S,this.pointcloudOptions.areaRatio=r.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var M=this.scene.xaxis,L=this.scene.yaxis,R=S/2||.5;r._extremes[M._id]=m(M,[_[0],_[2]],{ppad:R}),r._extremes[L._id]=m(L,[_[1],_[3]],{ppad:R})},a.dispose=function(){this.pointcloud.dispose()};function i(r,n){var d=new t(r,n.uid);return d.update(n),d}B.exports=i},{"../../../stackgl_modules":1133,"../../lib/str2rgbarray":540,"../../plots/cartesian/autorange":565,"../scatter/get_trace_color":946}],924:[function(e,B,V){var f=e("../../lib"),l=e("./attributes");B.exports=function(x,t,a){function i(r,n){return f.coerce(x,t,l,r,n)}i("x"),i("y"),i("xbounds"),i("ybounds"),x.xy&&x.xy instanceof Float32Array&&(t.xy=x.xy),x.indices&&x.indices instanceof Int32Array&&(t.indices=x.indices),i("text"),i("marker.color",a),i("marker.opacity"),i("marker.blend"),i("marker.sizemin"),i("marker.sizemax"),i("marker.border.color",a),i("marker.border.arearatio"),t._length=null}},{"../../lib":515,"./attributes":922}],925:[function(e,B,V){B.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("../scatter3d/calc"),plot:e("./convert"),moduleType:"trace",name:"pointcloud",basePlotModule:e("../../plots/gl2d"),categories:["gl","gl2d","showLegend"],meta:{}}},{"../../plots/gl2d":605,"../scatter3d/calc":965,"./attributes":922,"./convert":923,"./defaults":924}],926:[function(e,B,V){var f=e("../../plots/font_attributes"),l=e("../../plots/attributes"),m=e("../../components/color/attributes"),x=e("../../components/fx/attributes"),t=e("../../plots/domain").attributes,a=e("../../plots/template_attributes").hovertemplateAttrs,i=e("../../components/colorscale/attributes"),r=e("../../plot_api/plot_template").templatedArray,n=e("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,d=e("../../lib/extend").extendFlat,s=e("../../plot_api/edit_types").overrideAll,o=B.exports=s({hoverinfo:d({},l.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:x.hoverlabel,domain:t({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s",description:n("value")},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:f({}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:m.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:x.hoverlabel,hovertemplate:a({},{keys:["value","label"]})},link:{arrowlen:{valType:"number",min:0,dflt:0},label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:m.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:x.hoverlabel,hovertemplate:a({},{keys:["value","label"]}),colorscales:r("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:d(i().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested");o.transforms=void 0},{"../../components/color/attributes":366,"../../components/colorscale/attributes":374,"../../components/fx/attributes":398,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/domain":593,"../../plots/font_attributes":594,"../../plots/template_attributes":642}],927:[function(e,B,V){var f=e("../../plot_api/edit_types").overrideAll,l=e("../../plots/get_data").getModuleCalcData,m=e("./plot"),x=e("../../components/fx/layout_attributes"),t=e("../../lib/setcursor"),a=e("../../components/dragelement"),i=e("../../components/selections").prepSelect,r=e("../../lib"),n=e("../../registry"),d="sankey";V.name=d,V.baseLayoutAttrOverrides=f({hoverlabel:x.hoverlabel},"plot","nested"),V.plot=function(o){var y=l(o.calcdata,d)[0];m(o,y),V.updateFx(o)},V.clean=function(o,y,g,b){var v=b._has&&b._has(d),_=y._has&&y._has(d);v&&!_&&(b._paperdiv.selectAll(".sankey").remove(),b._paperdiv.selectAll(".bgsankey").remove())},V.updateFx=function(o){for(var y=0;y<o._fullData.length;y++)s(o,y)};function s(o,y){var g=o._fullData[y],b=o._fullLayout,v=b.dragmode,_=b.dragmode==="pan"?"move":"crosshair",u=g._bgRect;if(!!u&&!(v==="pan"||v==="zoom")){t(u,_);var T={_id:"x",c2p:r.identity,_offset:g._sankey.translateX,_length:g._sankey.width},c={_id:"y",c2p:r.identity,_offset:g._sankey.translateY,_length:g._sankey.height},A={gd:o,element:u.node(),plotinfo:{id:y,xaxis:T,yaxis:c,fillRangeItems:r.noop},subplot:y,xaxes:[T],yaxes:[c],doneFnCompleted:function(k){var p=o._fullData[y],w,h=p.node.groups.slice(),D=[];function S(z){for(var P=p._sankey.graph.nodes,I=0;I<P.length;I++)if(P[I].pointNumber===z)return P[I]}for(var M=0;M<k.length;M++){var L=S(k[M].pointNumber);if(!!L)if(L.group){for(var R=0;R<L.childrenNodes.length;R++)D.push(L.childrenNodes[R].pointNumber);h[L.pointNumber-p.node._count]=!1}else D.push(L.pointNumber)}w=h.filter(Boolean).concat([D]),n.call("_guiRestyle",o,{"node.groups":[w]},y)}};A.prepFn=function(k,p,w){i(k,p,w,A,v)},a.init(A)}}},{"../../components/dragelement":386,"../../components/fx/layout_attributes":408,"../../components/selections":455,"../../lib":515,"../../lib/setcursor":536,"../../plot_api/edit_types":548,"../../plots/get_data":602,"../../registry":647,"./plot":932}],928:[function(e,B,V){var f=e("strongly-connected-components"),l=e("../../lib"),m=e("../../lib/gup").wrap,x=l.isArrayOrTypedArray,t=l.isIndex,a=e("../../components/colorscale");function i(n){var d=n.node,s=n.link,o=[],y=x(s.color),g=x(s.customdata),b={},v={},_=s.colorscales.length,u;for(u=0;u<_;u++){var T=s.colorscales[u],c=a.extractScale(T,{cLetter:"c"}),A=a.makeColorScaleFunc(c);v[T.label]=A}var k=0;for(u=0;u<s.value.length;u++)s.source[u]>k&&(k=s.source[u]),s.target[u]>k&&(k=s.target[u]);var p=k+1;n.node._count=p;var w,h=n.node.groups,D={};for(u=0;u<h.length;u++){var S=h[u];for(w=0;w<S.length;w++){var M=S[w],L=p+u;D.hasOwnProperty(M)?l.warn("Node "+M+" is already part of a group."):D[M]=L}}var R={source:[],target:[]};for(u=0;u<s.value.length;u++){var z=s.value[u],P=s.source[u],I=s.target[u];if(!!(z>0&&t(P,p)&&t(I,p))&&!(D.hasOwnProperty(P)&&D.hasOwnProperty(I)&&D[P]===D[I])){D.hasOwnProperty(I)&&(I=D[I]),D.hasOwnProperty(P)&&(P=D[P]),P=+P,I=+I,b[P]=b[I]=!0;var U="";s.label&&s.label[u]&&(U=s.label[u]);var O=null;U&&v.hasOwnProperty(U)&&(O=v[U]),o.push({pointNumber:u,label:U,color:y?s.color[u]:s.color,customdata:g?s.customdata[u]:s.customdata,concentrationscale:O,source:P,target:I,value:+z}),R.source.push(P),R.target.push(I)}}var G=p+h.length,$=x(d.color),tt=x(d.customdata),Z=[];for(u=0;u<G;u++)if(!!b[u]){var X=d.label[u];Z.push({group:u>p-1,childrenNodes:[],pointNumber:u,label:X,color:$?d.color[u]:d.color,customdata:tt?d.customdata[u]:d.customdata})}var J=!1;return r(G,R.source,R.target)&&(J=!0),{circular:J,links:o,nodes:Z,groups:h,groupLookup:D}}function r(n,d,s){for(var o=l.init2dArray(n,0),y=0;y<Math.min(d.length,s.length);y++)if(l.isIndex(d[y],n)&&l.isIndex(s[y],n)){if(d[y]===s[y])return!0;o[d[y]].push(s[y])}var g=f(o);return g.components.some(function(b){return b.length>1})}B.exports=function(d,s){var o=i(s);return m({circular:o.circular,_nodes:o.nodes,_links:o.links,_groups:o.groups,_groupLookup:o.groupLookup})}},{"../../components/colorscale":379,"../../lib":515,"../../lib/gup":512,"strongly-connected-components":307}],929:[function(e,B,V){B.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}},{}],930:[function(e,B,V){var f=e("../../lib"),l=e("./attributes"),m=e("../../components/color"),x=e("tinycolor2"),t=e("../../plots/domain").defaults,a=e("../../components/fx/hoverlabel_defaults"),i=e("../../plot_api/plot_template"),r=e("../../plots/array_container_defaults");B.exports=function(s,o,y,g){function b(S,M){return f.coerce(s,o,l,S,M)}var v=f.extendDeep(g.hoverlabel,s.hoverlabel),_=s.node,u=i.newContainer(o,"node");function T(S,M){return f.coerce(_,u,l.node,S,M)}T("label"),T("groups"),T("x"),T("y"),T("pad"),T("thickness"),T("line.color"),T("line.width"),T("hoverinfo",s.hoverinfo),a(_,u,T,v),T("hovertemplate");var c=g.colorway,A=function(S){return c[S%c.length]};T("color",u.label.map(function(S,M){return m.addOpacity(A(M),.8)})),T("customdata");var k=s.link||{},p=i.newContainer(o,"link");function w(S,M){return f.coerce(k,p,l.link,S,M)}w("label"),w("arrowlen"),w("source"),w("target"),w("value"),w("line.color"),w("line.width"),w("hoverinfo",s.hoverinfo),a(k,p,w,v),w("hovertemplate");var h=x(g.paper_bgcolor).getLuminance()<.333?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)";w("color",f.repeat(h,p.value.length)),w("customdata"),r(k,p,{name:"colorscales",handleItemDefaults:n}),t(o,g,b),b("orientation"),b("valueformat"),b("valuesuffix");var D;u.x.length&&u.y.length&&(D="freeform"),b("arrangement",D),f.coerceFont(b,"textfont",f.extendFlat({},g.font)),o._length=null};function n(d,s){function o(y,g){return f.coerce(d,s,l.link.colorscales,y,g)}o("label"),o("cmin"),o("cmax"),o("colorscale")}},{"../../components/color":367,"../../components/fx/hoverlabel_defaults":405,"../../lib":515,"../../plot_api/plot_template":555,"../../plots/array_container_defaults":561,"../../plots/domain":593,"./attributes":926,tinycolor2:313}],931:[function(e,B,V){B.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("./plot"),moduleType:"trace",name:"sankey",basePlotModule:e("./base_plot"),selectPoints:e("./select.js"),categories:["noOpacity"],meta:{}}},{"./attributes":926,"./base_plot":927,"./calc":928,"./defaults":930,"./plot":932,"./select.js":934}],932:[function(e,B,V){var f=e("@plotly/d3"),l=e("../../lib"),m=l.numberFormat,x=e("./render"),t=e("../../components/fx"),a=e("../../components/color"),i=e("./constants").cn,r=l._;function n(c){return c!==""}function d(c,A){return c.filter(function(k){return k.key===A.traceId})}function s(c,A){f.select(c).select("path").style("fill-opacity",A),f.select(c).select("rect").style("fill-opacity",A)}function o(c){f.select(c).select("text.name").style("fill","black")}function y(c){return function(A){return c.node.sourceLinks.indexOf(A.link)!==-1||c.node.targetLinks.indexOf(A.link)!==-1}}function g(c){return function(A){return A.node.sourceLinks.indexOf(c.link)!==-1||A.node.targetLinks.indexOf(c.link)!==-1}}function b(c,A,k){A&&k&&d(k,A).selectAll("."+i.sankeyLink).filter(y(A)).call(_.bind(0,A,k,!1))}function v(c,A,k){A&&k&&d(k,A).selectAll("."+i.sankeyLink).filter(y(A)).call(u.bind(0,A,k,!1))}function _(c,A,k,p){var w=p.datum().link.label;p.style("fill-opacity",function(h){if(!h.link.concentrationscale)return .4}),w&&d(A,c).selectAll("."+i.sankeyLink).filter(function(h){return h.link.label===w}).style("fill-opacity",function(h){if(!h.link.concentrationscale)return .4}),k&&d(A,c).selectAll("."+i.sankeyNode).filter(g(c)).call(b)}function u(c,A,k,p){var w=p.datum().link.label;p.style("fill-opacity",function(h){return h.tinyColorAlpha}),w&&d(A,c).selectAll("."+i.sankeyLink).filter(function(h){return h.link.label===w}).style("fill-opacity",function(h){return h.tinyColorAlpha}),k&&d(A,c).selectAll(i.sankeyNode).filter(g(c)).call(v)}function T(c,A){var k=c.hoverlabel||{},p=l.nestedProperty(k,A).get();return Array.isArray(p)?!1:p}B.exports=function(A,k){for(var p=A._fullLayout,w=p._paper,h=p._size,D=0;D<A._fullData.length;D++)if(!!A._fullData[D].visible&&A._fullData[D].type===i.sankey&&!A._fullData[D]._viewInitial){var S=A._fullData[D].node;A._fullData[D]._viewInitial={node:{groups:S.groups.slice(),x:S.x.slice(),y:S.y.slice()}}}var M=function(J,st){var at=st.link;at.originalEvent=f.event,A._hoverdata=[at],t.click(A,{target:!0})},L=function(J,st,at){A._fullLayout.hovermode!==!1&&(f.select(J).call(_.bind(0,st,at,!0)),st.link.trace.link.hoverinfo!=="skip"&&(st.link.fullData=st.link.trace,A.emit("plotly_hover",{event:f.event,points:[st.link]})))},R=r(A,"source:")+" ",z=r(A,"target:")+" ",P=r(A,"concentration:")+" ",I=r(A,"incoming flow count:")+" ",U=r(A,"outgoing flow count:")+" ",O=function(J,st){if(A._fullLayout.hovermode===!1)return;var at=st.link.trace.link;if(at.hoverinfo==="none"||at.hoverinfo==="skip")return;var lt=[];function F(it){var ot,ct;it.circular?(ot=(it.circularPathData.leftInnerExtent+it.circularPathData.rightInnerExtent)/2,ct=it.circularPathData.verticalFullExtent):(ot=(it.source.x1+it.target.x0)/2,ct=(it.y0+it.y1)/2);var bt=[ot,ct];return it.trace.orientation==="v"&&bt.reverse(),bt[0]+=st.parent.translateX,bt[1]+=st.parent.translateY,bt}for(var H=0,et=0;et<st.flow.links.length;et++){var q=st.flow.links[et];if(!(A._fullLayout.hovermode==="closest"&&st.link.pointNumber!==q.pointNumber)){st.link.pointNumber===q.pointNumber&&(H=et),q.fullData=q.trace,at=st.link.trace.link;var W=F(q),K={valueLabel:m(st.valueFormat)(q.value)+st.valueSuffix};lt.push({x:W[0],y:W[1],name:K.valueLabel,text:[q.label||"",R+q.source.label,z+q.target.label,q.concentrationscale?P+m("%0.2f")(q.flow.labelConcentration):""].filter(n).join("<br>"),color:T(at,"bgcolor")||a.addOpacity(q.color,1),borderColor:T(at,"bordercolor"),fontFamily:T(at,"font.family"),fontSize:T(at,"font.size"),fontColor:T(at,"font.color"),nameLength:T(at,"namelength"),textAlign:T(at,"align"),idealAlign:f.event.x<W[0]?"right":"left",hovertemplate:at.hovertemplate,hovertemplateLabels:K,eventData:[q]})}}var nt=t.loneHover(lt,{container:p._hoverlayer.node(),outerContainer:p._paper.node(),gd:A,anchorIndex:H});nt.each(function(){var it=this;st.link.concentrationscale||s(it,.65),o(it)})},G=function(J,st,at){A._fullLayout.hovermode!==!1&&(f.select(J).call(u.bind(0,st,at,!0)),st.link.trace.link.hoverinfo!=="skip"&&(st.link.fullData=st.link.trace,A.emit("plotly_unhover",{event:f.event,points:[st.link]})),t.loneUnhover(p._hoverlayer.node()))},$=function(J,st,at){var lt=st.node;lt.originalEvent=f.event,A._hoverdata=[lt],f.select(J).call(v,st,at),t.click(A,{target:!0})},tt=function(J,st,at){A._fullLayout.hovermode!==!1&&(f.select(J).call(b,st,at),st.node.trace.node.hoverinfo!=="skip"&&(st.node.fullData=st.node.trace,A.emit("plotly_hover",{event:f.event,points:[st.node]})))},Z=function(J,st){if(A._fullLayout.hovermode!==!1){var at=st.node.trace.node;if(!(at.hoverinfo==="none"||at.hoverinfo==="skip")){var lt=f.select(J).select("."+i.nodeRect),F=A._fullLayout._paperdiv.node().getBoundingClientRect(),H=lt.node().getBoundingClientRect(),et=H.left-2-F.left,q=H.right+2-F.left,W=H.top+H.height/4-F.top,K={valueLabel:m(st.valueFormat)(st.node.value)+st.valueSuffix};st.node.fullData=st.node.trace,A._fullLayout._calcInverseTransform(A);var nt=A._fullLayout._invScaleX,it=A._fullLayout._invScaleY,ot=t.loneHover({x0:nt*et,x1:nt*q,y:it*W,name:m(st.valueFormat)(st.node.value)+st.valueSuffix,text:[st.node.label,I+st.node.targetLinks.length,U+st.node.sourceLinks.length].filter(n).join("<br>"),color:T(at,"bgcolor")||st.tinyColorHue,borderColor:T(at,"bordercolor"),fontFamily:T(at,"font.family"),fontSize:T(at,"font.size"),fontColor:T(at,"font.color"),nameLength:T(at,"namelength"),textAlign:T(at,"align"),idealAlign:"left",hovertemplate:at.hovertemplate,hovertemplateLabels:K,eventData:[st.node]},{container:p._hoverlayer.node(),outerContainer:p._paper.node(),gd:A});s(ot,.85),o(ot)}}},X=function(J,st,at){A._fullLayout.hovermode!==!1&&(f.select(J).call(v,st,at),st.node.trace.node.hoverinfo!=="skip"&&(st.node.fullData=st.node.trace,A.emit("plotly_unhover",{event:f.event,points:[st.node]})),t.loneUnhover(p._hoverlayer.node()))};x(A,w,k,{width:h.w,height:h.h,margin:{t:h.t,r:h.r,b:h.b,l:h.l}},{linkEvents:{hover:L,follow:O,unhover:G,select:M},nodeEvents:{hover:tt,follow:Z,unhover:X,select:$}})}},{"../../components/color":367,"../../components/fx":407,"../../lib":515,"./constants":929,"./render":933,"@plotly/d3":58}],933:[function(e,B,V){var f=e("d3-force"),l=e("d3-interpolate").interpolateNumber,m=e("@plotly/d3"),x=e("@plotly/d3-sankey"),t=e("@plotly/d3-sankey-circular"),a=e("./constants"),i=e("tinycolor2"),r=e("../../components/color"),n=e("../../components/drawing"),d=e("../../lib"),s=d.strTranslate,o=d.strRotate,y=e("../../lib/gup"),g=y.keyFun,b=y.repeat,v=y.unwrap,_=e("../../lib/svg_text_utils"),u=e("../../registry"),T=e("../../constants/alignment"),c=T.CAP_SHIFT,A=T.LINE_SPACING,k=3;function p(F,H,et){var q=v(H),W=q.trace,K=W.domain,nt=W.orientation==="h",it=W.node.pad,ot=W.node.thickness,ct=F.width*(K.x[1]-K.x[0]),bt=F.height*(K.y[1]-K.y[0]),ut=q._nodes,pt=q._links,yt=q.circular,Tt;yt?Tt=t.sankeyCircular().circularLinkGap(0):Tt=x.sankey(),Tt.iterations(a.sankeyIterations).size(nt?[ct,bt]:[bt,ct]).nodeWidth(ot).nodePadding(it).nodeId(function(Ie){return Ie.pointNumber}).nodes(ut).links(pt);var kt=Tt();Tt.nodePadding()<it&&d.warn("node.pad was reduced to ",Tt.nodePadding()," to fit within the figure.");var zt,Rt,Gt;for(var wt in q._groupLookup){var It=parseInt(q._groupLookup[wt]),$t;for(zt=0;zt<kt.nodes.length;zt++)if(kt.nodes[zt].pointNumber===It){$t=kt.nodes[zt];break}if(!!$t){var Qt={pointNumber:parseInt(wt),x0:$t.x0,x1:$t.x1,y0:$t.y0,y1:$t.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};kt.nodes.unshift(Qt),$t.childrenNodes.unshift(Qt)}}function Nt(){for(zt=0;zt<kt.nodes.length;zt++){var Ie=kt.nodes[zt],Be={},Ye,ze;for(Rt=0;Rt<Ie.targetLinks.length;Rt++)ze=Ie.targetLinks[Rt],Ye=ze.source.pointNumber+":"+ze.target.pointNumber,Be.hasOwnProperty(Ye)||(Be[Ye]=[]),Be[Ye].push(ze);var Ee=Object.keys(Be);for(Rt=0;Rt<Ee.length;Rt++){Ye=Ee[Rt];var Wt=Be[Ye],ee=0,Xt={};for(Gt=0;Gt<Wt.length;Gt++)ze=Wt[Gt],Xt[ze.label]||(Xt[ze.label]=0),Xt[ze.label]+=ze.value,ee+=ze.value;for(Gt=0;Gt<Wt.length;Gt++)ze=Wt[Gt],ze.flow={value:ee,labelConcentration:Xt[ze.label]/ee,concentration:ze.value/ee,links:Wt},ze.concentrationscale&&(ze.color=i(ze.concentrationscale(ze.flow.labelConcentration)))}var St=0;for(Rt=0;Rt<Ie.sourceLinks.length;Rt++)St+=Ie.sourceLinks[Rt].value;for(Rt=0;Rt<Ie.sourceLinks.length;Rt++)ze=Ie.sourceLinks[Rt],ze.concentrationOut=ze.value/St;var Vt=0;for(Rt=0;Rt<Ie.targetLinks.length;Rt++)Vt+=Ie.targetLinks[Rt].value;for(Rt=0;Rt<Ie.targetLinks.length;Rt++)ze=Ie.targetLinks[Rt],ze.concenrationIn=ze.value/Vt}}Nt();function Pt(Ie){Ie.forEach(function(Be){var Ye,ze,Ee=0,Wt=Be.length,ee;for(Be.sort(function(Xt,St){return Xt.y0-St.y0}),ee=0;ee<Wt;++ee)Ye=Be[ee],Ye.y0>=Ee||(ze=Ee-Ye.y0,ze>1e-6&&(Ye.y0+=ze,Ye.y1+=ze)),Ee=Ye.y1+it})}function Yt(Ie){var Be=Ie.map(function(St,Vt){return{x0:St.x0,index:Vt}}).sort(function(St,Vt){return St.x0-Vt.x0}),Ye=[],ze=-1,Ee,Wt=-1/0,ee;for(zt=0;zt<Be.length;zt++){var Xt=Ie[Be[zt].index];Xt.x0>Wt+ot&&(ze+=1,Ee=Xt.x0),Wt=Xt.x0,Ye[ze]||(Ye[ze]=[]),Ye[ze].push(Xt),ee=Ee-Xt.x0,Xt.x0+=ee,Xt.x1+=ee}return Ye}if(W.node.x.length&&W.node.y.length){for(zt=0;zt<Math.min(W.node.x.length,W.node.y.length,kt.nodes.length);zt++)if(W.node.x[zt]&&W.node.y[zt]){var ve=[W.node.x[zt]*ct,W.node.y[zt]*bt];kt.nodes[zt].x0=ve[0]-ot/2,kt.nodes[zt].x1=ve[0]+ot/2;var Re=kt.nodes[zt].y1-kt.nodes[zt].y0;kt.nodes[zt].y0=ve[1]-Re/2,kt.nodes[zt].y1=ve[1]+Re/2}if(W.arrangement==="snap"){ut=kt.nodes;var ir=Yt(ut);Pt(ir)}Tt.update(kt)}return{circular:yt,key:et,trace:W,guid:d.randstr(),horizontal:nt,width:ct,height:bt,nodePad:W.node.pad,nodeLineColor:W.node.line.color,nodeLineWidth:W.node.line.width,linkLineColor:W.link.line.color,linkLineWidth:W.link.line.width,linkArrowLength:W.link.arrowlen,valueFormat:W.valueformat,valueSuffix:W.valuesuffix,textFont:W.textfont,translateX:K.x[0]*F.width+F.margin.l,translateY:F.height-K.y[1]*F.height+F.margin.t,dragParallel:nt?bt:ct,dragPerpendicular:nt?ct:bt,arrangement:W.arrangement,sankey:Tt,graph:kt,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function w(F,H,et){var q=i(H.color),W=H.source.label+"|"+H.target.label,K=W+"__"+et;return H.trace=F.trace,H.curveNumber=F.trace.index,{circular:F.circular,key:K,traceId:F.key,pointNumber:H.pointNumber,link:H,tinyColorHue:r.tinyRGB(q),tinyColorAlpha:q.getAlpha(),linkPath:D,linkLineColor:F.linkLineColor,linkLineWidth:F.linkLineWidth,linkArrowLength:F.linkArrowLength,valueFormat:F.valueFormat,valueSuffix:F.valueSuffix,sankey:F.sankey,parent:F,interactionState:F.interactionState,flow:H.flow}}function h(F,H){var et="",q=F.width/2,W=F.circularPathData;return F.circularLinkType==="top"?et="M "+(W.targetX-H)+" "+(W.targetY+q)+" L"+(W.rightInnerExtent-H)+" "+(W.targetY+q)+"A"+(W.rightLargeArcRadius+q)+" "+(W.rightSmallArcRadius+q)+" 0 0 1 "+(W.rightFullExtent-q-H)+" "+(W.targetY-W.rightSmallArcRadius)+"L"+(W.rightFullExtent-q-H)+" "+W.verticalRightInnerExtent+"A"+(W.rightLargeArcRadius+q)+" "+(W.rightLargeArcRadius+q)+" 0 0 1 "+(W.rightInnerExtent-H)+" "+(W.verticalFullExtent-q)+"L"+W.leftInnerExtent+" "+(W.verticalFullExtent-q)+"A"+(W.leftLargeArcRadius+q)+" "+(W.leftLargeArcRadius+q)+" 0 0 1 "+(W.leftFullExtent+q)+" "+W.verticalLeftInnerExtent+"L"+(W.leftFullExtent+q)+" "+(W.sourceY-W.leftSmallArcRadius)+"A"+(W.leftLargeArcRadius+q)+" "+(W.leftSmallArcRadius+q)+" 0 0 1 "+W.leftInnerExtent+" "+(W.sourceY+q)+"L"+W.sourceX+" "+(W.sourceY+q)+"L"+W.sourceX+" "+(W.sourceY-q)+"L"+W.leftInnerExtent+" "+(W.sourceY-q)+"A"+(W.leftLargeArcRadius-q)+" "+(W.leftSmallArcRadius-q)+" 0 0 0 "+(W.leftFullExtent-q)+" "+(W.sourceY-W.leftSmallArcRadius)+"L"+(W.leftFullExtent-q)+" "+W.verticalLeftInnerExtent+"A"+(W.leftLargeArcRadius-q)+" "+(W.leftLargeArcRadius-q)+" 0 0 0 "+W.leftInnerExtent+" "+(W.verticalFullExtent+q)+"L"+(W.rightInnerExtent-H)+" "+(W.verticalFullExtent+q)+"A"+(W.rightLargeArcRadius-q)+" "+(W.rightLargeArcRadius-q)+" 0 0 0 "+(W.rightFullExtent+q-H)+" "+W.verticalRightInnerExtent+"L"+(W.rightFullExtent+q-H)+" "+(W.targetY-W.rightSmallArcRadius)+"A"+(W.rightLargeArcRadius-q)+" "+(W.rightSmallArcRadius-q)+" 0 0 0 "+(W.rightInnerExtent-H)+" "+(W.targetY-q)+"L"+(W.targetX-H)+" "+(W.targetY-q)+(H>0?"L"+W.targetX+" "+W.targetY:"")+"Z":et="M "+(W.targetX-H)+" "+(W.targetY-q)+" L"+(W.rightInnerExtent-H)+" "+(W.targetY-q)+"A"+(W.rightLargeArcRadius+q)+" "+(W.rightSmallArcRadius+q)+" 0 0 0 "+(W.rightFullExtent-q-H)+" "+(W.targetY+W.rightSmallArcRadius)+"L"+(W.rightFullExtent-q-H)+" "+W.verticalRightInnerExtent+"A"+(W.rightLargeArcRadius+q)+" "+(W.rightLargeArcRadius+q)+" 0 0 0 "+(W.rightInnerExtent-H)+" "+(W.verticalFullExtent+q)+"L"+W.leftInnerExtent+" "+(W.verticalFullExtent+q)+"A"+(W.leftLargeArcRadius+q)+" "+(W.leftLargeArcRadius+q)+" 0 0 0 "+(W.leftFullExtent+q)+" "+W.verticalLeftInnerExtent+"L"+(W.leftFullExtent+q)+" "+(W.sourceY+W.leftSmallArcRadius)+"A"+(W.leftLargeArcRadius+q)+" "+(W.leftSmallArcRadius+q)+" 0 0 0 "+W.leftInnerExtent+" "+(W.sourceY-q)+"L"+W.sourceX+" "+(W.sourceY-q)+"L"+W.sourceX+" "+(W.sourceY+q)+"L"+W.leftInnerExtent+" "+(W.sourceY+q)+"A"+(W.leftLargeArcRadius-q)+" "+(W.leftSmallArcRadius-q)+" 0 0 1 "+(W.leftFullExtent-q)+" "+(W.sourceY+W.leftSmallArcRadius)+"L"+(W.leftFullExtent-q)+" "+W.verticalLeftInnerExtent+"A"+(W.leftLargeArcRadius-q)+" "+(W.leftLargeArcRadius-q)+" 0 0 1 "+W.leftInnerExtent+" "+(W.verticalFullExtent-q)+"L"+(W.rightInnerExtent-H)+" "+(W.verticalFullExtent-q)+"A"+(W.rightLargeArcRadius-q)+" "+(W.rightLargeArcRadius-q)+" 0 0 1 "+(W.rightFullExtent+q-H)+" "+W.verticalRightInnerExtent+"L"+(W.rightFullExtent+q-H)+" "+(W.targetY+W.rightSmallArcRadius)+"A"+(W.rightLargeArcRadius-q)+" "+(W.rightSmallArcRadius-q)+" 0 0 1 "+(W.rightInnerExtent-H)+" "+(W.targetY+q)+"L"+(W.targetX-H)+" "+(W.targetY+q)+(H>0?"L"+W.targetX+" "+W.targetY:"")+"Z",et}function D(){var F=.5;function H(et){var q=et.linkArrowLength;if(et.link.circular)return h(et.link,q);var W=Math.abs((et.link.target.x0-et.link.source.x1)/2);q>W&&(q=W);var K=et.link.source.x1,nt=et.link.target.x0-q,it=l(K,nt),ot=it(F),ct=it(1-F),bt=et.link.y0-et.link.width/2,ut=et.link.y0+et.link.width/2,pt=et.link.y1-et.link.width/2,yt=et.link.y1+et.link.width/2,Tt="M"+K+","+bt,kt="C"+ot+","+bt+" "+ct+","+pt+" "+nt+","+pt,zt="C"+ct+","+yt+" "+ot+","+ut+" "+K+","+ut,Rt=q>0?"L"+(nt+q)+","+(pt+et.link.width/2):"";return Rt+="L"+nt+","+yt,Tt+kt+Rt+zt+"Z"}return H}function S(F,H){var et=i(H.color),q=a.nodePadAcross,W=F.nodePad/2;H.dx=H.x1-H.x0,H.dy=H.y1-H.y0;var K=H.dx,nt=Math.max(.5,H.dy),it="node_"+H.pointNumber;return H.group&&(it=d.randstr()),H.trace=F.trace,H.curveNumber=F.trace.index,{index:H.pointNumber,key:it,partOfGroup:H.partOfGroup||!1,group:H.group,traceId:F.key,trace:F.trace,node:H,nodePad:F.nodePad,nodeLineColor:F.nodeLineColor,nodeLineWidth:F.nodeLineWidth,textFont:F.textFont,size:F.horizontal?F.height:F.width,visibleWidth:Math.ceil(K),visibleHeight:nt,zoneX:-q,zoneY:-W,zoneWidth:K+2*q,zoneHeight:nt+2*W,labelY:F.horizontal?H.dy/2+1:H.dx/2+1,left:H.originalLayer===1,sizeAcross:F.width,forceLayouts:F.forceLayouts,horizontal:F.horizontal,darkBackground:et.getBrightness()<=128,tinyColorHue:r.tinyRGB(et),tinyColorAlpha:et.getAlpha(),valueFormat:F.valueFormat,valueSuffix:F.valueSuffix,sankey:F.sankey,graph:F.graph,arrangement:F.arrangement,uniqueNodeLabelPathId:[F.guid,F.key,it].join("_"),interactionState:F.interactionState,figure:F}}function M(F){F.attr("transform",function(H){return s(H.node.x0.toFixed(3),H.node.y0.toFixed(3))})}function L(F){F.call(M)}function R(F,H){F.call(L),H.attr("d",D())}function z(F){F.attr("width",function(H){return H.node.x1-H.node.x0}).attr("height",function(H){return H.visibleHeight})}function P(F){return F.link.width>1||F.linkLineWidth>0}function I(F){var H=s(F.translateX,F.translateY);return H+(F.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function U(F,H,et){F.on(".basic",null).on("mouseover.basic",function(q){!q.interactionState.dragInProgress&&!q.partOfGroup&&(et.hover(this,q,H),q.interactionState.hovered=[this,q])}).on("mousemove.basic",function(q){!q.interactionState.dragInProgress&&!q.partOfGroup&&(et.follow(this,q),q.interactionState.hovered=[this,q])}).on("mouseout.basic",function(q){!q.interactionState.dragInProgress&&!q.partOfGroup&&(et.unhover(this,q,H),q.interactionState.hovered=!1)}).on("click.basic",function(q){q.interactionState.hovered&&(et.unhover(this,q,H),q.interactionState.hovered=!1),!q.interactionState.dragInProgress&&!q.partOfGroup&&et.select(this,q,H)})}function O(F,H,et,q){var W=m.behavior.drag().origin(function(K){return{x:K.node.x0+K.visibleWidth/2,y:K.node.y0+K.visibleHeight/2}}).on("dragstart",function(K){if(K.arrangement!=="fixed"&&(d.ensureSingle(q._fullLayout._infolayer,"g","dragcover",function(it){q._fullLayout._dragCover=it}),d.raiseToTop(this),K.interactionState.dragInProgress=K.node,J(K.node),K.interactionState.hovered&&(et.nodeEvents.unhover.apply(0,K.interactionState.hovered),K.interactionState.hovered=!1),K.arrangement==="snap")){var nt=K.traceId+"|"+K.key;K.forceLayouts[nt]?K.forceLayouts[nt].alpha(1):G(F,nt,K),$(F,H,K,nt,q)}}).on("drag",function(K){if(K.arrangement!=="fixed"){var nt=m.event.x,it=m.event.y;K.arrangement==="snap"?(K.node.x0=nt-K.visibleWidth/2,K.node.x1=nt+K.visibleWidth/2,K.node.y0=it-K.visibleHeight/2,K.node.y1=it+K.visibleHeight/2):(K.arrangement==="freeform"&&(K.node.x0=nt-K.visibleWidth/2,K.node.x1=nt+K.visibleWidth/2),it=Math.max(0,Math.min(K.size-K.visibleHeight/2,it)),K.node.y0=it-K.visibleHeight/2,K.node.y1=it+K.visibleHeight/2),J(K.node),K.arrangement!=="snap"&&(K.sankey.update(K.graph),R(F.filter(st(K)),H))}}).on("dragend",function(K){if(K.arrangement!=="fixed"){K.interactionState.dragInProgress=!1;for(var nt=0;nt<K.node.childrenNodes.length;nt++)K.node.childrenNodes[nt].x=K.node.x,K.node.childrenNodes[nt].y=K.node.y;K.arrangement!=="snap"&&Z(K,q)}});F.on(".drag",null).call(W)}function G(F,H,et,q){at(et.graph.nodes);var W=et.graph.nodes.filter(function(K){return K.originalX===et.node.originalX}).filter(function(K){return!K.partOfGroup});et.forceLayouts[H]=f.forceSimulation(W).alphaDecay(0).force("collide",f.forceCollide().radius(function(K){return K.dy/2+et.nodePad/2}).strength(1).iterations(a.forceIterations)).force("constrain",tt(F,H,W,et)).stop()}function $(F,H,et,q,W){window.requestAnimationFrame(function K(){var nt;for(nt=0;nt<a.forceTicksPerFrame;nt++)et.forceLayouts[q].tick();var it=et.graph.nodes;if(lt(it),et.sankey.update(et.graph),R(F.filter(st(et)),H),et.forceLayouts[q].alpha()>0)window.requestAnimationFrame(K);else{var ot=et.node.originalX;et.node.x0=ot-et.visibleWidth/2,et.node.x1=ot+et.visibleWidth/2,Z(et,W)}})}function tt(F,H,et,q){return function(){for(var K=0,nt=0;nt<et.length;nt++){var it=et[nt];it===q.interactionState.dragInProgress?(it.x=it.lastDraggedX,it.y=it.lastDraggedY):(it.vx=(it.originalX-it.x)/a.forceTicksPerFrame,it.y=Math.min(q.size-it.dy/2,Math.max(it.dy/2,it.y))),K=Math.max(K,Math.abs(it.vx),Math.abs(it.vy))}!q.interactionState.dragInProgress&&K<.1&&q.forceLayouts[H].alpha()>0&&q.forceLayouts[H].alpha(0)}}function Z(F,H){for(var et=[],q=[],W=0;W<F.graph.nodes.length;W++){var K=(F.graph.nodes[W].x0+F.graph.nodes[W].x1)/2,nt=(F.graph.nodes[W].y0+F.graph.nodes[W].y1)/2;et.push(K/F.figure.width),q.push(nt/F.figure.height)}u.call("_guiRestyle",H,{"node.x":[et],"node.y":[q]},F.trace.index).then(function(){H._fullLayout._dragCover&&H._fullLayout._dragCover.remove()})}function X(F){var H=[],et;for(et=0;et<F.length;et++)F[et].originalX=(F[et].x0+F[et].x1)/2,F[et].originalY=(F[et].y0+F[et].y1)/2,H.indexOf(F[et].originalX)===-1&&H.push(F[et].originalX);for(H.sort(function(q,W){return q-W}),et=0;et<F.length;et++)F[et].originalLayerIndex=H.indexOf(F[et].originalX),F[et].originalLayer=F[et].originalLayerIndex/(H.length-1)}function J(F){F.lastDraggedX=F.x0+F.dx/2,F.lastDraggedY=F.y0+F.dy/2}function st(F){return function(H){return H.node.originalX===F.node.originalX}}function at(F){for(var H=0;H<F.length;H++)F[H].y=(F[H].y0+F[H].y1)/2,F[H].x=(F[H].x0+F[H].x1)/2}function lt(F){for(var H=0;H<F.length;H++)F[H].y0=F[H].y-F[H].dy/2,F[H].y1=F[H].y0+F[H].dy,F[H].x0=F[H].x-F[H].dx/2,F[H].x1=F[H].x0+F[H].dx}B.exports=function(F,H,et,q,W){var K=!1;d.ensureSingle(F._fullLayout._infolayer,"g","first-render",function(){K=!0});var nt=F._fullLayout._dragCover,it=et.filter(function(kt){return v(kt).trace.visible}).map(p.bind(null,q)),ot=H.selectAll("."+a.cn.sankey).data(it,g);ot.exit().remove(),ot.enter().append("g").classed(a.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events","auto").attr("transform",I),ot.each(function(kt,zt){F._fullData[zt]._sankey=kt;var Rt="bgsankey-"+kt.trace.uid+"-"+zt;d.ensureSingle(F._fullLayout._draggers,"rect",Rt),F._fullData[zt]._bgRect=m.select("."+Rt),F._fullData[zt]._bgRect.style("pointer-events","all").attr("width",kt.width).attr("height",kt.height).attr("x",kt.translateX).attr("y",kt.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),ot.transition().ease(a.ease).duration(a.duration).attr("transform",I);var ct=ot.selectAll("."+a.cn.sankeyLinks).data(b,g);ct.enter().append("g").classed(a.cn.sankeyLinks,!0).style("fill","none");var bt=ct.selectAll("."+a.cn.sankeyLink).data(function(kt){var zt=kt.graph.links;return zt.filter(function(Rt){return Rt.value}).map(w.bind(null,kt))},g);bt.enter().append("path").classed(a.cn.sankeyLink,!0).call(U,ot,W.linkEvents),bt.style("stroke",function(kt){return P(kt)?r.tinyRGB(i(kt.linkLineColor)):kt.tinyColorHue}).style("stroke-opacity",function(kt){return P(kt)?r.opacity(kt.linkLineColor):kt.tinyColorAlpha}).style("fill",function(kt){return kt.tinyColorHue}).style("fill-opacity",function(kt){return kt.tinyColorAlpha}).style("stroke-width",function(kt){return P(kt)?kt.linkLineWidth:1}).attr("d",D()),bt.style("opacity",function(){return F._context.staticPlot||K||nt?1:0}).transition().ease(a.ease).duration(a.duration).style("opacity",1),bt.exit().transition().ease(a.ease).duration(a.duration).style("opacity",0).remove();var ut=ot.selectAll("."+a.cn.sankeyNodeSet).data(b,g);ut.enter().append("g").classed(a.cn.sankeyNodeSet,!0),ut.style("cursor",function(kt){switch(kt.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var pt=ut.selectAll("."+a.cn.sankeyNode).data(function(kt){var zt=kt.graph.nodes;return X(zt),zt.map(S.bind(null,kt))},g);pt.enter().append("g").classed(a.cn.sankeyNode,!0).call(M).style("opacity",function(kt){return(F._context.staticPlot||K)&&!kt.partOfGroup?1:0}),pt.call(U,ot,W.nodeEvents).call(O,bt,W,F),pt.transition().ease(a.ease).duration(a.duration).call(M).style("opacity",function(kt){return kt.partOfGroup?0:1}),pt.exit().transition().ease(a.ease).duration(a.duration).style("opacity",0).remove();var yt=pt.selectAll("."+a.cn.nodeRect).data(b);yt.enter().append("rect").classed(a.cn.nodeRect,!0).call(z),yt.style("stroke-width",function(kt){return kt.nodeLineWidth}).style("stroke",function(kt){return r.tinyRGB(i(kt.nodeLineColor))}).style("stroke-opacity",function(kt){return r.opacity(kt.nodeLineColor)}).style("fill",function(kt){return kt.tinyColorHue}).style("fill-opacity",function(kt){return kt.tinyColorAlpha}),yt.transition().ease(a.ease).duration(a.duration).call(z);var Tt=pt.selectAll("."+a.cn.nodeLabel).data(b);Tt.enter().append("text").classed(a.cn.nodeLabel,!0).style("cursor","default"),Tt.attr("data-notex",1).text(function(kt){return kt.node.label}).each(function(kt){var zt=m.select(this);n.font(zt,kt.textFont),_.convertToTspans(zt,F)}).style("text-shadow",_.makeTextShadow(F._fullLayout.paper_bgcolor)).attr("text-anchor",function(kt){return kt.horizontal&&kt.left?"end":"start"}).attr("transform",function(kt){var zt=m.select(this),Rt=_.lineCount(zt),Gt=kt.textFont.size*((Rt-1)*A-c),wt=kt.nodeLineWidth/2+k,It=((kt.horizontal?kt.visibleHeight:kt.visibleWidth)-Gt)/2;kt.horizontal&&(kt.left?wt=-wt:wt+=kt.visibleWidth);var $t=kt.horizontal?"":"scale(-1,1)"+o(90);return s(kt.horizontal?wt:It,kt.horizontal?It:wt)+$t}),Tt.transition().ease(a.ease).duration(a.duration)}},{"../../components/color":367,"../../components/drawing":389,"../../constants/alignment":483,"../../lib":515,"../../lib/gup":512,"../../lib/svg_text_utils":541,"../../registry":647,"./constants":929,"@plotly/d3":58,"@plotly/d3-sankey":57,"@plotly/d3-sankey-circular":56,"d3-force":111,"d3-interpolate":116,tinycolor2:313}],934:[function(e,B,V){B.exports=function(l,m){for(var x=l.cd,t=[],a=x[0].trace,i=a._sankey.graph.nodes,r=0;r<i.length;r++){var n=i[r];if(!n.partOfGroup){var d=[(n.x0+n.x1)/2,(n.y0+n.y1)/2];a.orientation==="v"&&d.reverse(),m&&m.contains(d,!1,r,l)&&t.push({pointNumber:n.pointNumber})}}return t}},{}],935:[function(e,B,V){var f=e("../../lib");B.exports=function(m,x){for(var t=0;t<m.length;t++)m[t].i=t;f.mergeArray(x.text,m,"tx"),f.mergeArray(x.texttemplate,m,"txt"),f.mergeArray(x.hovertext,m,"htx"),f.mergeArray(x.customdata,m,"data"),f.mergeArray(x.textposition,m,"tp"),x.textfont&&(f.mergeArrayCastPositive(x.textfont.size,m,"ts"),f.mergeArray(x.textfont.color,m,"tc"),f.mergeArray(x.textfont.family,m,"tf"));var a=x.marker;if(a){f.mergeArrayCastPositive(a.size,m,"ms"),f.mergeArrayCastPositive(a.opacity,m,"mo"),f.mergeArray(a.symbol,m,"mx"),f.mergeArray(a.color,m,"mc");var i=a.line;a.line&&(f.mergeArray(i.color,m,"mlc"),f.mergeArrayCastPositive(i.width,m,"mlw"));var r=a.gradient;r&&r.type!=="none"&&(f.mergeArray(r.type,m,"mgt"),f.mergeArray(r.color,m,"mgc"))}}},{"../../lib":515}],936:[function(e,B,V){var f=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,l=e("../../plots/template_attributes").texttemplateAttrs,m=e("../../plots/template_attributes").hovertemplateAttrs,x=e("../../components/colorscale/attributes"),t=e("../../plots/font_attributes"),a=e("../../components/drawing/attributes").dash,i=e("../../components/drawing/attributes").pattern,r=e("../../components/drawing"),n=e("./constants"),d=e("../../lib/extend").extendFlat;function s(g){return{valType:"any",dflt:0,editType:"calc"}}function o(g){return{valType:"any",editType:"calc"}}function y(g){return{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"}}B.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:s(),yperiod:s(),xperiod0:o(),yperiod0:o(),xperiodalignment:y(),yperiodalignment:y(),xhoverformat:f("x"),yhoverformat:f("y"),stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:l({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:m({},{keys:n.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:d({},a,{editType:"style"}),simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},fillpattern:i,marker:d({symbol:{valType:"enumerated",values:r.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:d({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},x("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},x("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:t({editType:"calc",colorEditType:"style",arrayOk:!0})}},{"../../components/colorscale/attributes":374,"../../components/drawing":389,"../../components/drawing/attributes":388,"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../../plots/font_attributes":594,"../../plots/template_attributes":642,"./constants":940}],937:[function(e,B,V){var f=e("fast-isnumeric"),l=e("../../lib"),m=e("../../plots/cartesian/axes"),x=e("../../plots/cartesian/align_period"),t=e("../../constants/numerical").BADNUM,a=e("./subtypes"),i=e("./colorscale_calc"),r=e("./arrays_to_calcdata"),n=e("./calc_selection");function d(v,_){var u=v._fullLayout,T=m.getFromId(v,_.xaxis||"x"),c=m.getFromId(v,_.yaxis||"y"),A=T.makeCalcdata(_,"x"),k=c.makeCalcdata(_,"y"),p=x(_,T,"x",A),w=x(_,c,"y",k),h=p.vals,D=w.vals,S=_._length,M=new Array(S),L=_.ids,R=b(_,u,T,c),z=!1,P,I,U,O,G,$;y(u,_);var tt="x",Z="y",X;if(R)l.pushUnique(R.traceIndices,_._expandedIndex),P=R.orientation==="v",P?(Z="s",X="x"):(tt="s",X="y"),G=R.stackgaps==="interpolate";else{var J=o(_,S);s(v,_,T,c,h,D,J)}var st=!!_.xperiodalignment,at=!!_.yperiodalignment;for(I=0;I<S;I++){var lt=M[I]={},F=f(h[I]),H=f(D[I]);F&&H?(lt[tt]=h[I],lt[Z]=D[I],st&&(lt.orig_x=A[I],lt.xEnd=p.ends[I],lt.xStart=p.starts[I]),at&&(lt.orig_y=k[I],lt.yEnd=w.ends[I],lt.yStart=w.starts[I])):R&&(P?F:H)?(lt[X]=P?h[I]:D[I],lt.gap=!0,G?(lt.s=t,z=!0):lt.s=0):lt[tt]=lt[Z]=t,L&&(lt.id=String(L[I]))}if(r(M,_),i(v,_),n(M,_),R){for(I=0;I<M.length;)M[I][X]===t?M.splice(I,1):I++;if(l.sort(M,function(K,nt){return K[X]-nt[X]||K.i-nt.i}),z){for(I=0;I<M.length-1&&M[I].gap;)I++;for($=M[I].s,$||($=M[I].s=0),U=0;U<I;U++)M[U].s=$;for(O=M.length-1;O>I&&M[O].gap;)O--;for($=M[O].s,U=M.length-1;U>O;U--)M[U].s=$;for(;I<O;)if(I++,M[I].gap){for(U=I+1;M[U].gap;)U++;for(var et=M[I-1][X],q=M[I-1].s,W=(M[U].s-q)/(M[U][X]-et);I<U;)M[I].s=q+(M[I][X]-et)*W,I++}}}return M}function s(v,_,u,T,c,A,k){var p=_._length,w=v._fullLayout,h=u._id,D=T._id,S=w._firstScatter[g(_)]===_.uid,M=(b(_,w,u,T)||{}).orientation,L=_.fill;u._minDtick=0,T._minDtick=0;var R={padded:!0},z={padded:!0};k&&(R.ppad=z.ppad=k);var P=p<2||c[0]!==c[p-1]||A[0]!==A[p-1];P&&(L==="tozerox"||L==="tonextx"&&(S||M==="h"))?R.tozero=!0:!(_.error_y||{}).visible&&(L==="tonexty"||L==="tozeroy"||!a.hasMarkers(_)&&!a.hasText(_))&&(R.padded=!1,R.ppad=0),P&&(L==="tozeroy"||L==="tonexty"&&(S||M==="v"))?z.tozero=!0:(L==="tonextx"||L==="tozerox")&&(z.padded=!1),h&&(_._extremes[h]=m.findExtremes(u,c,R)),D&&(_._extremes[D]=m.findExtremes(T,A,z))}function o(v,_){if(!!a.hasMarkers(v)){var u=v.marker,T=1.6*(v.marker.sizeref||1),c;if(v.marker.sizemode==="area"?c=function(h){return Math.max(Math.sqrt((h||0)/T),3)}:c=function(h){return Math.max((h||0)/T,3)},l.isArrayOrTypedArray(u.size)){var A={type:"linear"};m.setConvert(A);for(var k=A.makeCalcdata(v.marker,"size"),p=new Array(_),w=0;w<_;w++)p[w]=c(k[w]);return p}else return c(u.size)}}function y(v,_){var u=g(_),T=v._firstScatter;T[u]||(T[u]=_.uid)}function g(v){var _=v.stackgroup;return v.xaxis+v.yaxis+v.type+(_?"-"+_:"")}function b(v,_,u,T){var c=v.stackgroup;if(!!c){var A=_._scatterStackOpts[u._id+T._id][c],k=A.orientation==="v"?T:u;if(k.type==="linear"||k.type==="log")return A}}B.exports={calc:d,calcMarkerSize:o,calcAxisExpansion:s,setFirstScatter:y,getStackOpts:b}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"./arrays_to_calcdata":935,"./calc_selection":938,"./colorscale_calc":939,"./subtypes":961,"fast-isnumeric":190}],938:[function(e,B,V){var f=e("../../lib");B.exports=function(m,x){f.isArrayOrTypedArray(x.selectedpoints)&&f.tagSelected(m,x)}},{"../../lib":515}],939:[function(e,B,V){var f=e("../../components/colorscale/helpers").hasColorscale,l=e("../../components/colorscale/calc"),m=e("./subtypes");B.exports=function(t,a){m.hasLines(a)&&f(a,"line")&&l(t,a,{vals:a.line.color,containerStr:"line",cLetter:"c"}),m.hasMarkers(a)&&(f(a,"marker")&&l(t,a,{vals:a.marker.color,containerStr:"marker",cLetter:"c"}),f(a,"marker.line")&&l(t,a,{vals:a.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},{"../../components/colorscale/calc":375,"../../components/colorscale/helpers":378,"./subtypes":961}],940:[function(e,B,V){B.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},{}],941:[function(e,B,V){var f=e("./calc");B.exports=function(t,a){var i=a.xaxis,r=a.yaxis,n=i._id+r._id,d=t._fullLayout._scatterStackOpts[n];if(!!d){var s=t.calcdata,o,y,g,b,v,_,u,T,c,A,k,p,w,h,D;for(var S in d){A=d[S];var M=A.traceIndices;if(!!M.length){for(k=A.stackgaps==="interpolate",p=A.groupnorm,A.orientation==="v"?(w="x",h="y"):(w="y",h="x"),D=new Array(M.length),o=0;o<D.length;o++)D[o]=!1;_=s[M[0]];var L=new Array(_.length);for(o=0;o<_.length;o++)L[o]=_[o][w];for(o=1;o<M.length;o++){for(v=s[M[o]],y=g=0;y<v.length;y++){for(u=v[y][w];u>L[g]&&g<L.length;g++)l(v,y,L[g],o,D,k,w),y++;if(u!==L[g]){for(b=0;b<o;b++)l(s[M[b]],g,u,b,D,k,w);L.splice(g,0,u)}g++}for(;g<L.length;g++)l(v,y,L[g],o,D,k,w),y++}var R=L.length;for(y=0;y<_.length;y++){for(T=_[y][h]=_[y].s,o=1;o<M.length;o++)v=s[M[o]],v[0].trace._rawLength=v[0].trace._length,v[0].trace._length=R,T+=v[y].s,v[y][h]=T;if(p)for(c=(p==="fraction"?T:T/100)||1,o=0;o<M.length;o++){var z=s[M[o]][y];z[h]/=c,z.sNorm=z.s/c}}for(o=0;o<M.length;o++){v=s[M[o]];var P=v[0].trace,I=f.calcMarkerSize(P,P._rawLength),U=Array.isArray(I);if(I&&D[o]||U){var O=I;for(I=new Array(R),y=0;y<R;y++)I[y]=v[y].gap?0:U?O[v[y].i]:O}var G=new Array(R),$=new Array(R);for(y=0;y<R;y++)G[y]=v[y].x,$[y]=v[y].y;f.calcAxisExpansion(t,P,i,r,G,$,I),v[0].t.orientation=A.orientation}}}}};function l(x,t,a,i,r,n,d){r[i]=!0;var s={i:null,gap:!0,s:0};if(s[d]=a,x.splice(t,0,s),t&&a===x[t-1][d]){var o=x[t-1];s.s=o.s,s.i=o.i,s.gap=o.gap}else n&&(s.s=m(x,t,a,d));t||(x[0].t=x[1].t,x[0].trace=x[1].trace,delete x[1].t,delete x[1].trace)}function m(x,t,a,i){var r=x[t-1],n=x[t+1];return n?r?r.s+(n.s-r.s)*(a-r[i])/(n[i]-r[i]):n.s:r.s}},{"./calc":937}],942:[function(e,B,V){B.exports=function(l){for(var m=0;m<l.length;m++){var x=l[m];if(x.type==="scatter"){var t=x.fill;if(!(t==="none"||t==="toself")&&(x.opacity=void 0,t==="tonexty"||t==="tonextx"))for(var a=m-1;a>=0;a--){var i=l[a];if(i.type==="scatter"&&i.xaxis===x.xaxis&&i.yaxis===x.yaxis){i.opacity=void 0;break}}}}}},{}],943:[function(e,B,V){var f=e("../../lib"),l=e("../../registry"),m=e("./attributes"),x=e("./constants"),t=e("./subtypes"),a=e("./xy_defaults"),i=e("./period_defaults"),r=e("./stack_defaults"),n=e("./marker_defaults"),d=e("./line_defaults"),s=e("./line_shape_defaults"),o=e("./text_defaults"),y=e("./fillcolor_defaults"),g=e("../../lib").coercePattern;B.exports=function(v,_,u,T){function c(M,L){return f.coerce(v,_,m,M,L)}var A=a(v,_,T,c);if(A||(_.visible=!1),!!_.visible){i(v,_,T,c),c("xhoverformat"),c("yhoverformat");var k=r(v,_,T,c),p=!k&&A<x.PTS_LINESONLY?"lines+markers":"lines";c("text"),c("hovertext"),c("mode",p),t.hasLines(_)&&(d(v,_,u,T,c),s(v,_,c),c("connectgaps"),c("line.simplify")),t.hasMarkers(_)&&n(v,_,u,T,c,{gradient:!0}),t.hasText(_)&&(c("texttemplate"),o(v,_,T,c));var w=[];(t.hasMarkers(_)||t.hasText(_))&&(c("cliponaxis"),c("marker.maxdisplayed"),w.push("points")),c("fill",k?k.fillDflt:"none"),_.fill!=="none"&&(y(v,_,u,c),t.hasLines(_)||s(v,_,c),g(c,"fillpattern",_.fillcolor,!1));var h=(_.line||{}).color,D=(_.marker||{}).color;(_.fill==="tonext"||_.fill==="toself")&&w.push("fills"),c("hoveron",w.join("+")||"points"),_.hoveron!=="fills"&&c("hovertemplate");var S=l.getComponentMethod("errorbars","supplyDefaults");S(v,_,h||D||u,{axis:"y"}),S(v,_,h||D||u,{axis:"x",inherit:"y"}),f.coerceSelectionMarkerOpacity(_,c)}}},{"../../lib":515,"../../registry":647,"./attributes":936,"./constants":940,"./fillcolor_defaults":944,"./line_defaults":949,"./line_shape_defaults":951,"./marker_defaults":955,"./period_defaults":956,"./stack_defaults":959,"./subtypes":961,"./text_defaults":962,"./xy_defaults":963}],944:[function(e,B,V){var f=e("../../components/color"),l=e("../../lib").isArrayOrTypedArray;B.exports=function(x,t,a,i){var r=!1;if(t.marker){var n=t.marker.color,d=(t.marker.line||{}).color;n&&!l(n)?r=n:d&&!l(d)&&(r=d)}i("fillcolor",f.addOpacity((t.line||{}).color||r||a,.5))}},{"../../components/color":367,"../../lib":515}],945:[function(e,B,V){var f=e("../../plots/cartesian/axes");B.exports=function(m,x,t){var a={},i={_fullLayout:t},r=f.getFromTrace(i,x,"x"),n=f.getFromTrace(i,x,"y");return a.xLabel=f.tickText(r,r.c2l(m.x),!0).text,a.yLabel=f.tickText(n,n.c2l(m.y),!0).text,a}},{"../../plots/cartesian/axes":566}],946:[function(e,B,V){var f=e("../../components/color"),l=e("./subtypes");B.exports=function(x,t){var a,i;if(x.mode==="lines")return a=x.line.color,a&&f.opacity(a)?a:x.fillcolor;if(x.mode==="none")return x.fill?x.fillcolor:"";var r=t.mcc||(x.marker||{}).color,n=t.mlcc||((x.marker||{}).line||{}).color;return i=r&&f.opacity(r)?r:n&&f.opacity(n)&&(t.mlw||((x.marker||{}).line||{}).width)?n:"",i?f.opacity(i)<.3?f.addOpacity(i,.3):i:(a=(x.line||{}).color,a&&f.opacity(a)&&l.hasLines(x)&&x.line.width?a:x.fillcolor)}},{"../../components/color":367,"./subtypes":961}],947:[function(e,B,V){var f=e("../../lib"),l=e("../../components/fx"),m=e("../../registry"),x=e("./get_trace_color"),t=e("../../components/color"),a=f.fillText;B.exports=function(r,n,d,s){var o=r.cd,y=o[0].trace,g=r.xa,b=r.ya,v=g.c2p(n),_=b.c2p(d),u=[v,_],T=y.hoveron||"",c=y.mode.indexOf("markers")!==-1?3:.5,A=!!y.xperiodalignment,k=!!y.yperiodalignment;if(T.indexOf("points")!==-1){var p=function(ot){if(A){var ct=g.c2p(ot.xStart),bt=g.c2p(ot.xEnd);return v>=Math.min(ct,bt)&&v<=Math.max(ct,bt)?0:1/0}var ut=Math.max(3,ot.mrc||0),pt=1-1/ut,yt=Math.abs(g.c2p(ot.x)-v);return yt<ut?pt*yt/ut:yt-ut+pt},w=function(ot){if(k){var ct=b.c2p(ot.yStart),bt=b.c2p(ot.yEnd);return _>=Math.min(ct,bt)&&_<=Math.max(ct,bt)?0:1/0}var ut=Math.max(3,ot.mrc||0),pt=1-1/ut,yt=Math.abs(b.c2p(ot.y)-_);return yt<ut?pt*yt/ut:yt-ut+pt},h=function(ot){var ct=Math.max(c,ot.mrc||0),bt=g.c2p(ot.x)-v,ut=b.c2p(ot.y)-_;return Math.max(Math.sqrt(bt*bt+ut*ut)-ct,1-c/ct)},D=l.getDistanceFunction(s,p,w,h);if(l.getClosest(o,D,r),r.index!==!1){var S=o[r.index],M=g.c2p(S.x,!0),L=b.c2p(S.y,!0),R=S.mrc||1;r.index=S.i;var z=o[0].t.orientation,P=z&&(S.sNorm||S.s),I=z==="h"?P:S.orig_x!==void 0?S.orig_x:S.x,U=z==="v"?P:S.orig_y!==void 0?S.orig_y:S.y;return f.extendFlat(r,{color:x(y,S),x0:M-R,x1:M+R,xLabelVal:I,y0:L-R,y1:L+R,yLabelVal:U,spikeDistance:h(S),hovertemplate:y.hovertemplate}),a(S,y,r),m.getComponentMethod("errorbars","hoverInfo")(S,y,r),[r]}}if(T.indexOf("fills")!==-1&&y._polygons){var O=y._polygons,G=[],$=!1,tt=1/0,Z=-1/0,X=1/0,J=-1/0,st,at,lt,F,H,et,q,W,K;for(st=0;st<O.length;st++)lt=O[st],lt.contains(u)&&($=!$,G.push(lt),X=Math.min(X,lt.ymin),J=Math.max(J,lt.ymax));if($){X=Math.max(X,0),J=Math.min(J,b._length);var nt=(X+J)/2;for(st=0;st<G.length;st++)for(F=G[st].pts,at=1;at<F.length;at++)W=F[at-1][1],K=F[at][1],W>nt!=K>=nt&&(et=F[at-1][0],q=F[at][0],K-W&&(H=et+(q-et)*(nt-W)/(K-W),tt=Math.min(tt,H),Z=Math.max(Z,H)));tt=Math.max(tt,0),Z=Math.min(Z,g._length);var it=t.defaultLine;return t.opacity(y.fillcolor)?it=y.fillcolor:t.opacity((y.line||{}).color)&&(it=y.line.color),f.extendFlat(r,{distance:r.maxHoverDistance,x0:tt,x1:Z,y0:nt,y1:nt,color:it,hovertemplate:!1}),delete r.index,y.text&&!Array.isArray(y.text)?r.text=String(y.text):r.text=y.name,[r]}}}},{"../../components/color":367,"../../components/fx":407,"../../lib":515,"../../registry":647,"./get_trace_color":946}],948:[function(e,B,V){var f=e("./subtypes");B.exports={hasLines:f.hasLines,hasMarkers:f.hasMarkers,hasText:f.hasText,isBubble:f.isBubble,attributes:e("./attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("./cross_trace_defaults"),calc:e("./calc").calc,crossTraceCalc:e("./cross_trace_calc"),arraysToCalcdata:e("./arrays_to_calcdata"),plot:e("./plot"),colorbar:e("./marker_colorbar"),formatLabels:e("./format_labels"),style:e("./style").style,styleOnSelect:e("./style").styleOnSelect,hoverPoints:e("./hover"),selectPoints:e("./select"),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},{"../../plots/cartesian":578,"./arrays_to_calcdata":935,"./attributes":936,"./calc":937,"./cross_trace_calc":941,"./cross_trace_defaults":942,"./defaults":943,"./format_labels":945,"./hover":947,"./marker_colorbar":954,"./plot":957,"./select":958,"./style":960,"./subtypes":961}],949:[function(e,B,V){var f=e("../../lib").isArrayOrTypedArray,l=e("../../components/colorscale/helpers").hasColorscale,m=e("../../components/colorscale/defaults");B.exports=function(t,a,i,r,n,d){var s=(t.marker||{}).color;if(n("line.color",i),l(t,"line"))m(t,a,r,n,{prefix:"line.",cLetter:"c"});else{var o=(f(s)?!1:s)||i;n("line.color",o)}n("line.width"),(d||{}).noDash||n("line.dash")}},{"../../components/colorscale/defaults":377,"../../components/colorscale/helpers":378,"../../lib":515}],950:[function(e,B,V){var f=e("../../constants/numerical"),l=f.BADNUM,m=f.LOG_CLIP,x=m+.5,t=m-.5,a=e("../../lib"),i=a.segmentsIntersect,r=a.constrain,n=e("./constants");B.exports=function(s,o){var y=o.xaxis,g=o.yaxis,b=y.type==="log",v=g.type==="log",_=y._length,u=g._length,T=o.connectGaps,c=o.baseTolerance,A=o.shape,k=A==="linear",p=o.fill&&o.fill!=="none",w=[],h=n.minTolerance,D=s.length,S=new Array(D),M=0,L,R,z,P,I,U,O,G,$,tt,Z,X,J,st,at,lt;function F(Ie){var Be=s[Ie];if(!Be)return!1;var Ye=o.linearized?y.l2p(Be.x):y.c2p(Be.x),ze=o.linearized?g.l2p(Be.y):g.c2p(Be.y);if(Ye===l){if(b&&(Ye=y.c2p(Be.x,!0)),Ye===l)return!1;v&&ze===l&&(Ye*=Math.abs(y._m*u*(y._m>0?x:t)/(g._m*_*(g._m>0?x:t)))),Ye*=1e3}if(ze===l){if(v&&(ze=g.c2p(Be.y,!0)),ze===l)return!1;ze*=1e3}return[Ye,ze]}function H(Ie,Be,Ye,ze){var Ee=Ye-Ie,Wt=ze-Be,ee=.5-Ie,Xt=.5-Be,St=Ee*Ee+Wt*Wt,Vt=Ee*ee+Wt*Xt;if(Vt>0&&Vt<St){var Zt=ee*Wt-Xt*Ee;if(Zt*Zt<St)return!0}}var et,q;function W(Ie,Be){var Ye=Ie[0]/_,ze=Ie[1]/u,Ee=Math.max(0,-Ye,Ye-1,-ze,ze-1);return Ee&&et!==void 0&&H(Ye,ze,et,q)&&(Ee=0),Ee&&Be&&H(Ye,ze,Be[0]/_,Be[1]/u)&&(Ee=0),(1+n.toleranceGrowth*Ee)*c}function K(Ie,Be){var Ye=Ie[0]-Be[0],ze=Ie[1]-Be[1];return Math.sqrt(Ye*Ye+ze*ze)}var nt=n.maxScreensAway,it=-_*nt,ot=_*(1+nt),ct=-u*nt,bt=u*(1+nt),ut=[[it,ct,ot,ct],[ot,ct,ot,bt],[ot,bt,it,bt],[it,bt,it,ct]],pt,yt,Tt,kt,zt,Rt;function Gt(Ie,Be){for(var Ye=[],ze=0,Ee=0;Ee<4;Ee++){var Wt=ut[Ee],ee=i(Ie[0],Ie[1],Be[0],Be[1],Wt[0],Wt[1],Wt[2],Wt[3]);ee&&(!ze||Math.abs(ee.x-Ye[0][0])>1||Math.abs(ee.y-Ye[0][1])>1)&&(ee=[ee.x,ee.y],ze&&K(ee,Ie)<K(Ye[0],Ie)?Ye.unshift(ee):Ye.push(ee),ze++)}return Ye}function wt(Ie){if(Ie[0]<it||Ie[0]>ot||Ie[1]<ct||Ie[1]>bt)return[r(Ie[0],it,ot),r(Ie[1],ct,bt)]}function It(Ie,Be){if(Ie[0]===Be[0]&&(Ie[0]===it||Ie[0]===ot)||Ie[1]===Be[1]&&(Ie[1]===ct||Ie[1]===bt))return!0}function $t(Ie,Be){var Ye=[],ze=wt(Ie),Ee=wt(Be);return ze&&Ee&&It(ze,Ee)||(ze&&Ye.push(ze),Ee&&Ye.push(Ee)),Ye}function Qt(Ie,Be,Ye){return function(ze,Ee){var Wt=wt(ze),ee=wt(Ee),Xt=[];if(Wt&&ee&&It(Wt,ee))return Xt;Wt&&Xt.push(Wt),ee&&Xt.push(ee);var St=2*a.constrain((ze[Ie]+Ee[Ie])/2,Be,Ye)-((Wt||ze)[Ie]+(ee||Ee)[Ie]);if(St){var Vt;Wt&&ee?Vt=St>0==Wt[Ie]>ee[Ie]?Wt:ee:Vt=Wt||ee,Vt[Ie]+=St}return Xt}}var Nt;A==="linear"||A==="spline"?Nt=Gt:A==="hv"||A==="vh"?Nt=$t:A==="hvh"?Nt=Qt(0,it,ot):A==="vhv"&&(Nt=Qt(1,ct,bt));function Pt(Ie,Be){var Ye=Be[0]-Ie[0],ze=(Be[1]-Ie[1])/Ye,Ee=(Ie[1]*Be[0]-Be[1]*Ie[0])/Ye;return Ee>0?[ze>0?it:ot,bt]:[ze>0?ot:it,ct]}function Yt(Ie){var Be=Ie[0],Ye=Ie[1],ze=Be===S[M-1][0],Ee=Ye===S[M-1][1];if(!(ze&&Ee))if(M>1){var Wt=Be===S[M-2][0],ee=Ye===S[M-2][1];ze&&(Be===it||Be===ot)&&Wt?ee?M--:S[M-1]=Ie:Ee&&(Ye===ct||Ye===bt)&&ee?Wt?M--:S[M-1]=Ie:S[M++]=Ie}else S[M++]=Ie}function ve(Ie){S[M-1][0]!==Ie[0]&&S[M-1][1]!==Ie[1]&&Yt([Tt,kt]),Yt(Ie),zt=null,Tt=kt=0}function Re(Ie){if(et=Ie[0]/_,q=Ie[1]/u,pt=Ie[0]<it?it:Ie[0]>ot?ot:0,yt=Ie[1]<ct?ct:Ie[1]>bt?bt:0,pt||yt){if(!M)S[M++]=[pt||Ie[0],yt||Ie[1]];else if(zt){var Be=Nt(zt,Ie);Be.length>1&&(ve(Be[0]),S[M++]=Be[1])}else Rt=Nt(S[M-1],Ie)[0],S[M++]=Rt;var Ye=S[M-1];pt&&yt&&(Ye[0]!==pt||Ye[1]!==yt)?(zt&&(Tt!==pt&&kt!==yt?Yt(Tt&&kt?Pt(zt,Ie):[Tt||pt,kt||yt]):Tt&&kt&&Yt([Tt,kt])),Yt([pt,yt])):Tt-pt&&kt-yt&&Yt([pt||Tt,yt||kt]),zt=Ie,Tt=pt,kt=yt}else zt&&ve(Nt(zt,Ie)[0]),S[M++]=Ie}for(L=0;L<D;L++)if(R=F(L),!!R){for(M=0,zt=null,Re(R),L++;L<D;L++){if(P=F(L),!P){if(T)continue;break}if(!k||!o.simplify){Re(P);continue}var ir=F(L+1);if(tt=K(P,R),!(!(p&&(M===0||M===D-1))&&tt<W(P,ir)*h)){for(G=[(P[0]-R[0])/tt,(P[1]-R[1])/tt],I=R,Z=tt,X=st=at=0,O=!1,z=P,L++;L<s.length;L++){if(U=ir,ir=F(L+1),!U){if(T)continue;break}if($=[U[0]-R[0],U[1]-R[1]],lt=$[0]*G[1]-$[1]*G[0],st=Math.min(st,lt),at=Math.max(at,lt),at-st>W(U,ir))break;z=U,J=$[0]*G[0]+$[1]*G[1],J>Z?(Z=J,P=U,O=!1):J<X&&(X=J,I=U,O=!0)}if(O?(Re(P),z!==I&&Re(I)):(I!==R&&Re(I),z!==P&&Re(P)),Re(z),L>=s.length||!U)break;Re(U),R=U}}zt&&Yt([Tt||zt[0],kt||zt[1]]),w.push(S.slice(0,M))}return w}},{"../../constants/numerical":491,"../../lib":515,"./constants":940}],951:[function(e,B,V){B.exports=function(l,m,x){var t=x("line.shape");t==="spline"&&x("line.smoothing")}},{}],952:[function(e,B,V){var f={tonextx:1,tonexty:1,tonext:1};B.exports=function(m,x,t){var a,i,r,n,d,s={},o=!1,y=-1,g=0,b=-1;for(i=0;i<t.length;i++)a=t[i][0].trace,r=a.stackgroup||"",r?r in s?d=s[r]:(d=s[r]=g,g++):a.fill in f&&b>=0?d=b:(d=b=g,g++),d<y&&(o=!0),a._groupIndex=y=d;var v=t.slice();o&&v.sort(function(u,T){var c=u[0].trace,A=T[0].trace;return c._groupIndex-A._groupIndex||c.index-A.index});var _={};for(i=0;i<v.length;i++)a=v[i][0].trace,r=a.stackgroup||"",a.visible===!0?(a._nexttrace=null,a.fill in f&&(n=_[r],a._prevtrace=n||null,n&&(n._nexttrace=a)),a._ownfill=a.fill&&(a.fill.substr(0,6)==="tozero"||a.fill==="toself"||a.fill.substr(0,2)==="to"&&!a._prevtrace),_[r]=a):a._prevtrace=a._nexttrace=a._ownfill=null;return v}},{}],953:[function(e,B,V){var f=e("fast-isnumeric");B.exports=function(m,x){x||(x=2);var t=m.marker,a=t.sizeref||1,i=t.sizemin||0,r=t.sizemode==="area"?function(n){return Math.sqrt(n/a)}:function(n){return n/a};return function(n){var d=r(n/x);return f(d)&&d>0?Math.max(d,i):0}}},{"fast-isnumeric":190}],954:[function(e,B,V){B.exports={container:"marker",min:"cmin",max:"cmax"}},{}],955:[function(e,B,V){var f=e("../../components/color"),l=e("../../components/colorscale/helpers").hasColorscale,m=e("../../components/colorscale/defaults"),x=e("./subtypes");B.exports=function(a,i,r,n,d,s){var o=x.isBubble(a),y=(a.line||{}).color,g;if(s=s||{},y&&(r=y),d("marker.symbol"),d("marker.opacity",o?.7:1),d("marker.size"),d("marker.color",r),l(a,"marker")&&m(a,i,n,d,{prefix:"marker.",cLetter:"c"}),s.noSelect||(d("selected.marker.color"),d("unselected.marker.color"),d("selected.marker.size"),d("unselected.marker.size")),s.noLine||(y&&!Array.isArray(y)&&i.marker.color!==y?g=y:o?g=f.background:g=f.defaultLine,d("marker.line.color",g),l(a,"marker.line")&&m(a,i,n,d,{prefix:"marker.line.",cLetter:"c"}),d("marker.line.width",o?1:0)),o&&(d("marker.sizeref"),d("marker.sizemin"),d("marker.sizemode")),s.gradient){var b=d("marker.gradient.type");b!=="none"&&d("marker.gradient.color")}}},{"../../components/color":367,"../../components/colorscale/defaults":377,"../../components/colorscale/helpers":378,"./subtypes":961}],956:[function(e,B,V){var f=e("../../lib").dateTick0,l=e("../../constants/numerical"),m=l.ONEWEEK;function x(t,a){return t%m===0?f(a,1):f(a,0)}B.exports=function(a,i,r,n,d){if(d||(d={x:!0,y:!0}),d.x){var s=n("xperiod");s&&(n("xperiod0",x(s,i.xcalendar)),n("xperiodalignment"))}if(d.y){var o=n("yperiod");o&&(n("yperiod0",x(o,i.ycalendar)),n("yperiodalignment"))}}},{"../../constants/numerical":491,"../../lib":515}],957:[function(e,B,V){var f=e("@plotly/d3"),l=e("../../registry"),m=e("../../lib"),x=m.ensureSingle,t=m.identity,a=e("../../components/drawing"),i=e("./subtypes"),r=e("./line_points"),n=e("./link_traces"),d=e("../../lib/polygon").tester;B.exports=function(b,v,_,u,T,c){var A,k,p=!T,w=!!T&&T.duration>0,h=n(b,v,_);if(A=u.selectAll("g.trace").data(h,function(S){return S[0].trace.uid}),A.enter().append("g").attr("class",function(S){return"trace scatter trace"+S[0].trace.uid}).style("stroke-miterlimit",2),A.order(),s(b,A,v),w){c&&(k=c());var D=f.transition().duration(T.duration).ease(T.easing).each("end",function(){k&&k()}).each("interrupt",function(){k&&k()});D.each(function(){u.selectAll("g.trace").each(function(S,M){o(b,M,v,S,h,this,T)})})}else A.each(function(S,M){o(b,M,v,S,h,this,T)});p&&A.exit().remove(),u.selectAll("path:not([d])").remove()};function s(g,b,v){b.each(function(_){var u=x(f.select(this),"g","fills");a.setClipUrl(u,v.layerClipId,g);var T=_[0].trace,c=[];T._ownfill&&c.push("_ownFill"),T._nexttrace&&c.push("_nextFill");var A=u.selectAll("g").data(c,t);A.enter().append("g"),A.exit().each(function(k){T[k]=null}).remove(),A.order().each(function(k){T[k]=x(f.select(this),"path","js-fill")})})}function o(g,b,v,_,u,T,c){var A;y(g,b,v,_,u);var k=!!c&&c.duration>0;function p(Gt){return k?Gt.transition():Gt}var w=v.xaxis,h=v.yaxis,D=_[0].trace,S=D.line,M=f.select(T),L=x(M,"g","errorbars"),R=x(M,"g","lines"),z=x(M,"g","points"),P=x(M,"g","text");if(l.getComponentMethod("errorbars","plot")(g,L,v,c),D.visible!==!0)return;p(M).style("opacity",D.opacity);var I,U,O=D.fill.charAt(D.fill.length-1);O!=="x"&&O!=="y"&&(O=""),_[0][v.isRangePlot?"nodeRangePlot3":"node3"]=M;var G="",$=[],tt=D._prevtrace;tt&&(G=tt._prevRevpath||"",U=tt._nextFill,$=tt._polygons);var Z,X,J="",st="",at,lt,F,H,et,q,W,K=[],nt=m.noop;if(I=D._ownFill,i.hasLines(D)||D.fill!=="none"){for(U&&U.datum(_),["hv","vh","hvh","vhv"].indexOf(S.shape)!==-1?(at=a.steps(S.shape),lt=a.steps(S.shape.split("").reverse().join(""))):S.shape==="spline"?at=lt=function(Gt){var wt=Gt[Gt.length-1];return Gt.length>1&&Gt[0][0]===wt[0]&&Gt[0][1]===wt[1]?a.smoothclosed(Gt.slice(1),S.smoothing):a.smoothopen(Gt,S.smoothing)}:at=lt=function(Gt){return"M"+Gt.join("L")},F=function(Gt){return lt(Gt.reverse())},K=r(_,{xaxis:w,yaxis:h,connectGaps:D.connectgaps,baseTolerance:Math.max(S.width||1,3)/4,shape:S.shape,simplify:S.simplify,fill:D.fill}),W=D._polygons=new Array(K.length),A=0;A<K.length;A++)D._polygons[A]=d(K[A]);K.length&&(H=K[0][0],et=K[K.length-1],q=et[et.length-1]),nt=function(Gt){return function(wt){if(Z=at(wt),X=F(wt),J?O?(J+="L"+Z.substr(1),st=X+("L"+st.substr(1))):(J+="Z"+Z,st=X+"Z"+st):(J=Z,st=X),i.hasLines(D)&&wt.length>1){var It=f.select(this);if(It.datum(_),Gt)p(It.style("opacity",0).attr("d",Z).call(a.lineGroupStyle)).style("opacity",1);else{var $t=p(It);$t.attr("d",Z),a.singleLineStyle(_,$t)}}}}}var it=R.selectAll(".js-line").data(K);p(it.exit()).style("opacity",0).remove(),it.each(nt(!1)),it.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(a.lineGroupStyle).each(nt(!0)),a.setClipUrl(it,v.layerClipId,g);function ot(Gt){p(Gt).attr("d","M0,0Z")}K.length?(I?(I.datum(_),H&&q&&(O?(O==="y"?H[1]=q[1]=h.c2p(0,!0):O==="x"&&(H[0]=q[0]=w.c2p(0,!0)),p(I).attr("d","M"+q+"L"+H+"L"+J.substr(1)).call(a.singleFillStyle,g)):p(I).attr("d",J+"Z").call(a.singleFillStyle,g))):U&&(D.fill.substr(0,6)==="tonext"&&J&&G?(D.fill==="tonext"?p(U).attr("d",J+"Z"+G+"Z").call(a.singleFillStyle,g):p(U).attr("d",J+"L"+G.substr(1)+"Z").call(a.singleFillStyle,g),D._polygons=D._polygons.concat($)):(ot(U),D._polygons=null)),D._prevRevpath=st,D._prevPolygons=W):(I?ot(I):U&&ot(U),D._polygons=D._prevRevpath=D._prevPolygons=null);function ct(Gt){return Gt.filter(function(wt){return!wt.gap&&wt.vis})}function bt(Gt){return Gt.filter(function(wt){return wt.vis})}function ut(Gt){return Gt.filter(function(wt){return!wt.gap})}function pt(Gt){return Gt.id}function yt(Gt){if(Gt.ids)return pt}function Tt(){return!1}function kt(Gt,wt,It){var $t,Qt,Nt,Pt=It[0].trace,Yt=i.hasMarkers(Pt),ve=i.hasText(Pt),Re=yt(Pt),ir=Tt,Ie=Tt;if(Yt||ve){var Be=t,Ye=Pt.stackgroup,ze=Ye&&g._fullLayout._scatterStackOpts[w._id+h._id][Ye].stackgaps==="infer zero";Pt.marker.maxdisplayed||Pt._needsCull?Be=ze?bt:ct:Ye&&!ze&&(Be=ut),Yt&&(ir=Be),ve&&(Ie=Be)}Qt=Gt.selectAll("path.point"),$t=Qt.data(ir,Re);var Ee=$t.enter().append("path").classed("point",!0);k&&Ee.call(a.pointStyle,Pt,g).call(a.translatePoints,w,h).style("opacity",0).transition().style("opacity",1),$t.order();var Wt;Yt&&(Wt=a.makePointStyleFns(Pt)),$t.each(function(ee){var Xt=f.select(this),St=p(Xt);Nt=a.translatePoint(ee,St,w,h),Nt?(a.singlePointStyle(ee,St,Pt,Wt,g),v.layerClipId&&a.hideOutsideRangePoint(ee,St,w,h,Pt.xcalendar,Pt.ycalendar),Pt.customdata&&Xt.classed("plotly-customdata",ee.data!==null&&ee.data!==void 0)):St.remove()}),k?$t.exit().transition().style("opacity",0).remove():$t.exit().remove(),Qt=wt.selectAll("g"),$t=Qt.data(Ie,Re),$t.enter().append("g").classed("textpoint",!0).append("text"),$t.order(),$t.each(function(ee){var Xt=f.select(this),St=p(Xt.select("text"));Nt=a.translatePoint(ee,St,w,h),Nt?v.layerClipId&&a.hideOutsideRangePoint(ee,Xt,w,h,Pt.xcalendar,Pt.ycalendar):Xt.remove()}),$t.selectAll("text").call(a.textPointStyle,Pt,g).each(function(ee){var Xt=w.c2p(ee.x),St=h.c2p(ee.y);f.select(this).selectAll("tspan.line").each(function(){p(f.select(this)).attr({x:Xt,y:St})})}),$t.exit().remove()}z.datum(_),P.datum(_),kt(z,P,_);var zt=D.cliponaxis===!1,Rt=zt?null:v.layerClipId;a.setClipUrl(z,Rt,g),a.setClipUrl(P,Rt,g)}function y(g,b,v,_,u){var T=v.xaxis,c=v.yaxis,A=f.extent(m.simpleMap(T.range,T.r2c)),k=f.extent(m.simpleMap(c.range,c.r2c)),p=_[0].trace;if(!!i.hasMarkers(p)){var w=p.marker.maxdisplayed;if(w!==0){var h=_.filter(function(L){return L.x>=A[0]&&L.x<=A[1]&&L.y>=k[0]&&L.y<=k[1]}),D=Math.ceil(h.length/w),S=0;u.forEach(function(L,R){var z=L[0].trace;i.hasMarkers(z)&&z.marker.maxdisplayed>0&&R<b&&S++});var M=Math.round(S*D/3+Math.floor(S/3)*D/7.1);_.forEach(function(L){delete L.vis}),h.forEach(function(L,R){Math.round((R+M)%D)===0&&(L.vis=!0)})}}}},{"../../components/drawing":389,"../../lib":515,"../../lib/polygon":527,"../../registry":647,"./line_points":950,"./link_traces":952,"./subtypes":961,"@plotly/d3":58}],958:[function(e,B,V){var f=e("./subtypes");B.exports=function(m,x){var t=m.cd,a=m.xaxis,i=m.yaxis,r=[],n=t[0].trace,d,s,o,y,g=!f.hasMarkers(n)&&!f.hasText(n);if(g)return[];if(x===!1)for(d=0;d<t.length;d++)t[d].selected=0;else for(d=0;d<t.length;d++)s=t[d],o=a.c2p(s.x),y=i.c2p(s.y),s.i!==null&&x.contains([o,y],!1,d,m)?(r.push({pointNumber:s.i,x:a.c2d(s.x),y:i.c2d(s.y)}),s.selected=1):s.selected=0;return r}},{"./subtypes":961}],959:[function(e,B,V){var f=["orientation","groupnorm","stackgaps"];B.exports=function(m,x,t,a){var i=t._scatterStackOpts,r=a("stackgroup");if(r){var n=x.xaxis+x.yaxis,d=i[n];d||(d=i[n]={});var s=d[r],o=!1;s?s.traces.push(x):(s=d[r]={traceIndices:[],traces:[x]},o=!0);for(var y={orientation:x.x&&!x.y?"h":"v"},g=0;g<f.length;g++){var b=f[g],v=b+"Found";if(!s[v]){var _=m[b]!==void 0,u=b==="orientation";if((_||o)&&(s[b]=a(b,y[b]),u&&(s.fillDflt=s[b]==="h"?"tonextx":"tonexty"),_&&(s[v]=!0,!o&&(delete s.traces[0][b],u))))for(var T=0;T<s.traces.length-1;T++){var c=s.traces[T];c._input.fill!==c.fill&&(c.fill=s.fillDflt)}}}return s}}},{}],960:[function(e,B,V){var f=e("@plotly/d3"),l=e("../../components/drawing"),m=e("../../registry");function x(r){var n=f.select(r).selectAll("g.trace.scatter");n.style("opacity",function(d){return d[0].trace.opacity}),n.selectAll("g.points").each(function(d){var s=f.select(this),o=d.trace||d[0].trace;t(s,o,r)}),n.selectAll("g.text").each(function(d){var s=f.select(this),o=d.trace||d[0].trace;a(s,o,r)}),n.selectAll("g.trace path.js-line").call(l.lineGroupStyle),n.selectAll("g.trace path.js-fill").call(l.fillGroupStyle,r),m.getComponentMethod("errorbars","style")(n)}function t(r,n,d){l.pointStyle(r.selectAll("path.point"),n,d)}function a(r,n,d){l.textPointStyle(r.selectAll("text"),n,d)}function i(r,n,d){var s=n[0].trace;s.selectedpoints?(l.selectedPointStyle(d.selectAll("path.point"),s),l.selectedTextStyle(d.selectAll("text"),s)):(t(d,s,r),a(d,s,r))}B.exports={style:x,stylePoints:t,styleText:a,styleOnSelect:i}},{"../../components/drawing":389,"../../registry":647,"@plotly/d3":58}],961:[function(e,B,V){var f=e("../../lib");B.exports={hasLines:function(l){return l.visible&&l.mode&&l.mode.indexOf("lines")!==-1},hasMarkers:function(l){return l.visible&&(l.mode&&l.mode.indexOf("markers")!==-1||l.type==="splom")},hasText:function(l){return l.visible&&l.mode&&l.mode.indexOf("text")!==-1},isBubble:function(l){return f.isPlainObject(l.marker)&&f.isArrayOrTypedArray(l.marker.size)}}},{"../../lib":515}],962:[function(e,B,V){var f=e("../../lib");B.exports=function(l,m,x,t,a){a=a||{},t("textposition"),f.coerceFont(t,"textfont",x.font),a.noSelect||(t("selected.textfont.color"),t("unselected.textfont.color"))}},{"../../lib":515}],963:[function(e,B,V){var f=e("../../lib"),l=e("../../registry");B.exports=function(x,t,a,i){var r=i("x"),n=i("y"),d,s=l.getComponentMethod("calendars","handleTraceDefaults");if(s(x,t,["x","y"],a),r){var o=f.minRowLength(r);n?d=Math.min(o,f.minRowLength(n)):(d=o,i("y0"),i("dy"))}else{if(!n)return 0;d=f.minRowLength(n),i("x0"),i("dx")}return t._length=d,d}},{"../../lib":515,"../../registry":647}],964:[function(e,B,V){var f=e("../scatter/attributes"),l=e("../../components/colorscale/attributes"),m=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,x=e("../../plots/template_attributes").hovertemplateAttrs,t=e("../../plots/template_attributes").texttemplateAttrs,a=e("../../plots/attributes"),i=e("../../constants/gl3d_dashes"),r=e("../../constants/gl3d_markers"),n=e("../../lib/extend").extendFlat,d=e("../../plot_api/edit_types").overrideAll,s=e("../../lib/sort_object_keys"),o=f.line,y=f.marker,g=y.line,b=n({width:o.width,dash:{valType:"enumerated",values:s(i),dflt:"solid"}},l("line"));function v(u){return{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}}var _=B.exports=d({x:f.x,y:f.y,z:{valType:"data_array"},text:n({},f.text,{}),texttemplate:t({},{}),hovertext:n({},f.hovertext,{}),hovertemplate:x(),xhoverformat:m("x"),yhoverformat:m("y"),zhoverformat:m("z"),mode:n({},f.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:v(),y:v(),z:v()},connectgaps:f.connectgaps,line:b,marker:n({symbol:{valType:"enumerated",values:s(r),dflt:"circle",arrayOk:!0},size:n({},y.size,{dflt:8}),sizeref:y.sizeref,sizemin:y.sizemin,sizemode:y.sizemode,opacity:n({},y.opacity,{arrayOk:!1}),colorbar:y.colorbar,line:n({width:n({},g.width,{arrayOk:!1})},l("marker.line"))},l("marker")),textposition:n({},f.textposition,{dflt:"top center"}),textfont:{color:f.textfont.color,size:f.textfont.size,family:n({},f.textfont.family,{arrayOk:!1})},opacity:a.opacity,hoverinfo:n({},a.hoverinfo)},"calc","nested");_.x.editType=_.y.editType=_.z.editType="calc+clearAxisTypes"},{"../../components/colorscale/attributes":374,"../../constants/gl3d_dashes":488,"../../constants/gl3d_markers":489,"../../lib/extend":505,"../../lib/sort_object_keys":538,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../scatter/attributes":936}],965:[function(e,B,V){var f=e("../scatter/arrays_to_calcdata"),l=e("../scatter/colorscale_calc");B.exports=function(x,t){var a=[{x:!1,y:!1,trace:t,t:{}}];return f(a,t),l(x,t),a}},{"../scatter/arrays_to_calcdata":935,"../scatter/colorscale_calc":939}],966:[function(e,B,V){var f=e("../../registry");function l(t,a,i,r){if(!a||!a.visible)return null;for(var n=f.getComponentMethod("errorbars","makeComputeError")(a),d=new Array(t.length),s=0;s<t.length;s++){var o=n(+t[s],s);if(r.type==="log"){var y=r.c2l(t[s]),g=t[s]-o[0],b=t[s]+o[1];if(d[s]=[(r.c2l(g,!0)-y)*i,(r.c2l(b,!0)-y)*i],g>0){var v=r.c2l(g);r._lowerLogErrorBound||(r._lowerLogErrorBound=v),r._lowerErrorBound=Math.min(r._lowerLogErrorBound,v)}}else d[s]=[-o[0]*i,o[1]*i]}return d}function m(t){for(var a=0;a<t.length;a++)if(t[a])return t[a].length;return 0}function x(t,a,i){var r=[l(t.x,t.error_x,a[0],i.xaxis),l(t.y,t.error_y,a[1],i.yaxis),l(t.z,t.error_z,a[2],i.zaxis)],n=m(r);if(n===0)return null;for(var d=new Array(n),s=0;s<n;s++){for(var o=[[0,0,0],[0,0,0]],y=0;y<3;y++)if(r[y])for(var g=0;g<2;g++)o[g][y]=r[y][s][g];d[s]=o}return d}B.exports=x},{"../../registry":647}],967:[function(e,B,V){var f=e("../../../stackgl_modules").gl_line3d,l=e("../../../stackgl_modules").gl_scatter3d,m=e("../../../stackgl_modules").gl_error3d,x=e("../../../stackgl_modules").gl_mesh3d,t=e("../../../stackgl_modules").delaunay_triangulate,a=e("../../lib"),i=e("../../lib/str2rgbarray"),r=e("../../lib/gl_format_color").formatColor,n=e("../scatter/make_bubble_size_func"),d=e("../../constants/gl3d_dashes"),s=e("../../constants/gl3d_markers"),o=e("../../plots/cartesian/axes"),y=e("../../components/fx/helpers").appendArrayPointValue,g=e("./calc_errors");function b(L,R){this.scene=L,this.uid=R,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var v=b.prototype;v.handlePick=function(L){if(L.object&&(L.object===this.linePlot||L.object===this.delaunayMesh||L.object===this.textMarkers||L.object===this.scatterPlot)){var R=L.index=L.data.index;return L.object.highlight&&L.object.highlight(null),this.scatterPlot&&(L.object=this.scatterPlot,this.scatterPlot.highlight(L.data)),L.textLabel="",this.textLabels&&(Array.isArray(this.textLabels)?(this.textLabels[R]||this.textLabels[R]===0)&&(L.textLabel=this.textLabels[R]):L.textLabel=this.textLabels),L.traceCoordinate=[this.data.x[R],this.data.y[R],this.data.z[R]],!0}};function _(L,R,z){var P=(z+1)%3,I=(z+2)%3,U=[],O=[],G;for(G=0;G<L.length;++G){var $=L[G];isNaN($[P])||!isFinite($[P])||isNaN($[I])||!isFinite($[I])||(U.push([$[P],$[I]]),O.push(G))}var tt=t(U);for(G=0;G<tt.length;++G)for(var Z=tt[G],X=0;X<Z.length;++X)Z[X]=O[Z[X]];return{positions:L,cells:tt,meshColor:R}}function u(L){for(var R=[0,0,0],z=[[0,0,0],[0,0,0],[0,0,0]],P=[1,1,1],I=0;I<3;I++){var U=L[I];U&&U.copy_zstyle!==!1&&L[2].visible!==!1&&(U=L[2]),!(!U||!U.visible)&&(R[I]=U.width/2,z[I]=i(U.color),P[I]=U.thickness)}return{capSize:R,color:z,lineWidth:P}}function T(L){return L==null?0:L.indexOf("left")>-1?-1:L.indexOf("right")>-1?1:0}function c(L){return L==null?0:L.indexOf("top")>-1?-1:L.indexOf("bottom")>-1?1:0}function A(L){var R=0,z=0,P=[R,z];if(Array.isArray(L))for(var I=0;I<L.length;I++)P[I]=[R,z],L[I]&&(P[I][0]=T(L[I]),P[I][1]=c(L[I]));else P[0]=T(L),P[1]=c(L);return P}function k(L,R){return R(L*4)}function p(L){return s[L]}function w(L,R,z,P,I){var U=null;if(a.isArrayOrTypedArray(L)){U=[];for(var O=0;O<R;O++)L[O]===void 0?U[O]=P:U[O]=z(L[O],I)}else U=z(L,a.identity);return U}function h(L,R){var z=[],P=L.fullSceneLayout,I=L.dataScale,U=P.xaxis,O=P.yaxis,G=P.zaxis,$=R.marker,tt=R.line,Z=R.x||[],X=R.y||[],J=R.z||[],st=Z.length,at=R.xcalendar,lt=R.ycalendar,F=R.zcalendar,H,et,q,W,K,nt;for(K=0;K<st;K++)H=U.d2l(Z[K],0,at)*I[0],et=O.d2l(X[K],0,lt)*I[1],q=G.d2l(J[K],0,F)*I[2],z[K]=[H,et,q];if(Array.isArray(R.text))nt=R.text;else if(R.text!==void 0)for(nt=new Array(st),K=0;K<st;K++)nt[K]=R.text;function it(Qt,Nt){var Pt=P[Qt];return o.tickText(Pt,Pt.d2l(Nt),!0).text}var ot=R.texttemplate;if(ot){var ct=L.fullLayout,bt=ct._d3locale,ut=Array.isArray(ot),pt=ut?Math.min(ot.length,st):st,yt=ut?function(Qt){return ot[Qt]}:function(){return ot};for(nt=new Array(pt),K=0;K<pt;K++){var Tt={x:Z[K],y:X[K],z:J[K]},kt={xLabel:it("xaxis",Z[K]),yLabel:it("yaxis",X[K]),zLabel:it("zaxis",J[K])},zt={};y(zt,R,K);var Rt=R._meta||{};nt[K]=a.texttemplateString(yt(K),kt,bt,zt,Tt,Rt)}}if(W={position:z,mode:R.mode,text:nt},"line"in R&&(W.lineColor=r(tt,1,st),W.lineWidth=tt.width,W.lineDashes=tt.dash),"marker"in R){var Gt=n(R);W.scatterColor=r($,1,st),W.scatterSize=w($.size,st,k,20,Gt),W.scatterMarker=w($.symbol,st,p,"\u25CF"),W.scatterLineWidth=$.line.width,W.scatterLineColor=r($.line,1,st),W.scatterAngle=0}"textposition"in R&&(W.textOffset=A(R.textposition),W.textColor=r(R.textfont,1,st),W.textSize=w(R.textfont.size,st,a.identity,12),W.textFont=R.textfont.family,W.textAngle=0);var wt=["x","y","z"];for(W.project=[!1,!1,!1],W.projectScale=[1,1,1],W.projectOpacity=[1,1,1],K=0;K<3;++K){var It=R.projection[wt[K]];(W.project[K]=It.show)&&(W.projectOpacity[K]=It.opacity,W.projectScale[K]=It.scale)}W.errorBounds=g(R,I,P);var $t=u([R.error_x,R.error_y,R.error_z]);return W.errorColor=$t.color,W.errorLineWidth=$t.lineWidth,W.errorCapSize=$t.capSize,W.delaunayAxis=R.surfaceaxis,W.delaunayColor=i(R.surfacecolor),W}function D(L){if(a.isArrayOrTypedArray(L)){var R=L[0];return a.isArrayOrTypedArray(R)&&(L=R),"rgb("+L.slice(0,3).map(function(z){return Math.round(z*255)})+")"}return null}function S(L){return a.isArrayOrTypedArray(L)?L.length===4&&typeof L[0]=="number"?D(L):L.map(D):null}v.update=function(L){var R=this.scene.glplot.gl,z,P,I,U,O=d.solid;this.data=L;var G=h(this.scene,L);"mode"in G&&(this.mode=G.mode),"lineDashes"in G&&G.lineDashes in d&&(O=d[G.lineDashes]),this.color=S(G.scatterColor)||S(G.lineColor),this.dataPoints=G.position,z={gl:this.scene.glplot.gl,position:G.position,color:G.lineColor,lineWidth:G.lineWidth||1,dashes:O[0],dashScale:O[1],opacity:L.opacity,connectGaps:L.connectgaps},this.mode.indexOf("lines")!==-1?this.linePlot?this.linePlot.update(z):(this.linePlot=f(z),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var $=L.opacity;if(L.marker&&L.marker.opacity&&($*=L.marker.opacity),P={gl:this.scene.glplot.gl,position:G.position,color:G.scatterColor,size:G.scatterSize,glyph:G.scatterMarker,opacity:$,orthographic:!0,lineWidth:G.scatterLineWidth,lineColor:G.scatterLineColor,project:G.project,projectScale:G.projectScale,projectOpacity:G.projectOpacity},this.mode.indexOf("markers")!==-1?this.scatterPlot?this.scatterPlot.update(P):(this.scatterPlot=l(P),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),U={gl:this.scene.glplot.gl,position:G.position,glyph:G.text,color:G.textColor,size:G.textSize,angle:G.textAngle,alignment:G.textOffset,font:G.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:L.opacity},this.textLabels=L.hovertext||L.text,this.mode.indexOf("text")!==-1?this.textMarkers?this.textMarkers.update(U):(this.textMarkers=l(U),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),I={gl:this.scene.glplot.gl,position:G.position,color:G.errorColor,error:G.errorBounds,lineWidth:G.errorLineWidth,capSize:G.errorCapSize,opacity:L.opacity},this.errorBars?G.errorBounds?this.errorBars.update(I):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):G.errorBounds&&(this.errorBars=m(I),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),G.delaunayAxis>=0){var tt=_(G.position,G.delaunayColor,G.delaunayAxis);tt.opacity=L.opacity,this.delaunayMesh?this.delaunayMesh.update(tt):(tt.gl=R,this.delaunayMesh=x(tt),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},v.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())};function M(L,R){var z=new b(L,R.uid);return z.update(R),z}B.exports=M},{"../../../stackgl_modules":1133,"../../components/fx/helpers":403,"../../constants/gl3d_dashes":488,"../../constants/gl3d_markers":489,"../../lib":515,"../../lib/gl_format_color":511,"../../lib/str2rgbarray":540,"../../plots/cartesian/axes":566,"../scatter/make_bubble_size_func":953,"./calc_errors":966}],968:[function(e,B,V){var f=e("../../registry"),l=e("../../lib"),m=e("../scatter/subtypes"),x=e("../scatter/marker_defaults"),t=e("../scatter/line_defaults"),a=e("../scatter/text_defaults"),i=e("./attributes");B.exports=function(d,s,o,y){function g(k,p){return l.coerce(d,s,i,k,p)}var b=r(d,s,g,y);if(!b){s.visible=!1;return}g("text"),g("hovertext"),g("hovertemplate"),g("xhoverformat"),g("yhoverformat"),g("zhoverformat"),g("mode"),m.hasLines(s)&&(g("connectgaps"),t(d,s,o,y,g)),m.hasMarkers(s)&&x(d,s,o,y,g,{noSelect:!0}),m.hasText(s)&&(g("texttemplate"),a(d,s,y,g,{noSelect:!0}));var v=(s.line||{}).color,_=(s.marker||{}).color;g("surfaceaxis")>=0&&g("surfacecolor",v||_);for(var u=["x","y","z"],T=0;T<3;++T){var c="projection."+u[T];g(c+".show")&&(g(c+".opacity"),g(c+".scale"))}var A=f.getComponentMethod("errorbars","supplyDefaults");A(d,s,v||_||o,{axis:"z"}),A(d,s,v||_||o,{axis:"y",inherit:"z"}),A(d,s,v||_||o,{axis:"x",inherit:"z"})};function r(n,d,s,o){var y=0,g=s("x"),b=s("y"),v=s("z"),_=f.getComponentMethod("calendars","handleTraceDefaults");return _(n,d,["x","y","z"],o),g&&b&&v&&(y=Math.min(g.length,b.length,v.length),d._length=d._xlength=d._ylength=d._zlength=y),y}},{"../../lib":515,"../../registry":647,"../scatter/line_defaults":949,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":964}],969:[function(e,B,V){B.exports={plot:e("./convert"),attributes:e("./attributes"),markerSymbols:e("../../constants/gl3d_markers"),supplyDefaults:e("./defaults"),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:e("./calc"),moduleType:"trace",name:"scatter3d",basePlotModule:e("../../plots/gl3d"),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},{"../../constants/gl3d_markers":489,"../../plots/gl3d":607,"./attributes":964,"./calc":965,"./convert":967,"./defaults":968}],970:[function(e,B,V){var f=e("../scatter/attributes"),l=e("../../plots/attributes"),m=e("../../plots/template_attributes").hovertemplateAttrs,x=e("../../plots/template_attributes").texttemplateAttrs,t=e("../../components/colorscale/attributes"),a=e("../../lib/extend").extendFlat,i=f.marker,r=f.line,n=i.line;B.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:a({},f.mode,{dflt:"markers"}),text:a({},f.text,{}),texttemplate:x({editType:"plot"},{keys:["a","b","text"]}),hovertext:a({},f.hovertext,{}),line:{color:r.color,width:r.width,dash:r.dash,shape:a({},r.shape,{values:["linear","spline"]}),smoothing:r.smoothing,editType:"calc"},connectgaps:f.connectgaps,fill:a({},f.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:f.fillcolor,marker:a({symbol:i.symbol,opacity:i.opacity,maxdisplayed:i.maxdisplayed,size:i.size,sizeref:i.sizeref,sizemin:i.sizemin,sizemode:i.sizemode,line:a({width:n.width,editType:"calc"},t("marker.line")),gradient:i.gradient,editType:"calc"},t("marker")),textfont:f.textfont,textposition:f.textposition,selected:f.selected,unselected:f.unselected,hoverinfo:a({},l.hoverinfo,{flags:["a","b","text","name"]}),hoveron:f.hoveron,hovertemplate:m()}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scatter/attributes":936}],971:[function(e,B,V){var f=e("fast-isnumeric"),l=e("../scatter/colorscale_calc"),m=e("../scatter/arrays_to_calcdata"),x=e("../scatter/calc_selection"),t=e("../scatter/calc").calcMarkerSize,a=e("../carpet/lookup_carpetid");B.exports=function(r,n){var d=n._carpetTrace=a(r,n);if(!(!d||!d.visible||d.visible==="legendonly")){var s;n.xaxis=d.xaxis,n.yaxis=d.yaxis;var o=n._length,y=new Array(o),g,b,v=!1;for(s=0;s<o;s++)if(g=n.a[s],b=n.b[s],f(g)&&f(b)){var _=d.ab2xy(+g,+b,!0),u=d.isVisible(+g,+b);u||(v=!0),y[s]={x:_[0],y:_[1],a:g,b,vis:u}}else y[s]={x:!1,y:!1};return n._needsCull=v,y[0].carpet=d,y[0].trace=n,t(n,o),l(r,n),m(y,n),x(y,n),y}}},{"../carpet/lookup_carpetid":717,"../scatter/arrays_to_calcdata":935,"../scatter/calc":937,"../scatter/calc_selection":938,"../scatter/colorscale_calc":939,"fast-isnumeric":190}],972:[function(e,B,V){var f=e("../../lib"),l=e("../scatter/constants"),m=e("../scatter/subtypes"),x=e("../scatter/marker_defaults"),t=e("../scatter/line_defaults"),a=e("../scatter/line_shape_defaults"),i=e("../scatter/text_defaults"),r=e("../scatter/fillcolor_defaults"),n=e("./attributes");B.exports=function(s,o,y,g){function b(k,p){return f.coerce(s,o,n,k,p)}b("carpet"),o.xaxis="x",o.yaxis="y";var v=b("a"),_=b("b"),u=Math.min(v.length,_.length);if(!u){o.visible=!1;return}o._length=u,b("text"),b("texttemplate"),b("hovertext");var T=u<l.PTS_LINESONLY?"lines+markers":"lines";b("mode",T),m.hasLines(o)&&(t(s,o,y,g,b),a(s,o,b),b("connectgaps")),m.hasMarkers(o)&&x(s,o,y,g,b,{gradient:!0}),m.hasText(o)&&i(s,o,g,b);var c=[];(m.hasMarkers(o)||m.hasText(o))&&(b("marker.maxdisplayed"),c.push("points")),b("fill"),o.fill!=="none"&&(r(s,o,y,b),m.hasLines(o)||a(s,o,b)),(o.fill==="tonext"||o.fill==="toself")&&c.push("fills");var A=b("hoveron",c.join("+")||"points");A!=="fills"&&b("hovertemplate"),f.coerceSelectionMarkerOpacity(o,b)}},{"../../lib":515,"../scatter/constants":940,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/line_shape_defaults":951,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":970}],973:[function(e,B,V){B.exports=function(l,m,x,t,a){var i=t[a];return l.a=i.a,l.b=i.b,l.y=i.y,l}},{}],974:[function(e,B,V){B.exports=function(l,m){var x={},t=m._carpet,a=t.ab2ij([l.a,l.b]),i=Math.floor(a[0]),r=a[0]-i,n=Math.floor(a[1]),d=a[1]-n,s=t.evalxy([],i,n,r,d);return x.yLabel=s[1].toFixed(3),x}},{}],975:[function(e,B,V){var f=e("../scatter/hover"),l=e("../../lib").fillText;B.exports=function(x,t,a,i){var r=f(x,t,a,i);if(!r||r[0].index===!1)return;var n=r[0];if(n.index===void 0){var d=1-n.y0/x.ya._length,s=x.xa._length,o=s*d/2,y=s-o;return n.x0=Math.max(Math.min(n.x0,y),o),n.x1=Math.max(Math.min(n.x1,y),o),r}var g=n.cd[n.index];n.a=g.a,n.b=g.b,n.xLabelVal=void 0,n.yLabelVal=void 0;var b=n.trace,v=b._carpet,_=b._module.formatLabels(g,b);n.yLabel=_.yLabel,delete n.text;var u=[];function T(k,p){var w;k.labelprefix&&k.labelprefix.length>0?w=k.labelprefix.replace(/ = $/,""):w=k._hovertitle,u.push(w+": "+p.toFixed(3)+k.labelsuffix)}if(!b.hovertemplate){var c=g.hi||b.hoverinfo,A=c.split("+");A.indexOf("all")!==-1&&(A=["a","b","text"]),A.indexOf("a")!==-1&&T(v.aaxis,g.a),A.indexOf("b")!==-1&&T(v.baxis,g.b),u.push("y: "+n.yLabel),A.indexOf("text")!==-1&&l(g,b,u),n.extraText=u.join("<br>")}return r}},{"../../lib":515,"../scatter/hover":947}],976:[function(e,B,V){B.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../scatter/marker_colorbar"),formatLabels:e("./format_labels"),calc:e("./calc"),plot:e("./plot"),style:e("../scatter/style").style,styleOnSelect:e("../scatter/style").styleOnSelect,hoverPoints:e("./hover"),selectPoints:e("../scatter/select"),eventData:e("./event_data"),moduleType:"trace",name:"scattercarpet",basePlotModule:e("../../plots/cartesian"),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{}}},{"../../plots/cartesian":578,"../scatter/marker_colorbar":954,"../scatter/select":958,"../scatter/style":960,"./attributes":970,"./calc":971,"./defaults":972,"./event_data":973,"./format_labels":974,"./hover":975,"./plot":977}],977:[function(e,B,V){var f=e("../scatter/plot"),l=e("../../plots/cartesian/axes"),m=e("../../components/drawing");B.exports=function(t,a,i,r){var n,d,s,o=i[0][0].carpet,y={xaxis:l.getFromId(t,o.xaxis||"x"),yaxis:l.getFromId(t,o.yaxis||"y"),plot:a.plot};for(f(t,y,i,r),n=0;n<i.length;n++)d=i[n][0].trace,s=r.selectAll("g.trace"+d.uid+" .js-line"),m.setClipUrl(s,i[n][0].carpet._clipPathId,t)}},{"../../components/drawing":389,"../../plots/cartesian/axes":566,"../scatter/plot":957}],978:[function(e,B,V){var f=e("../../plots/template_attributes").hovertemplateAttrs,l=e("../../plots/template_attributes").texttemplateAttrs,m=e("../scatter/attributes"),x=e("../../plots/attributes"),t=e("../../components/colorscale/attributes"),a=e("../../components/drawing/attributes").dash,i=e("../../lib/extend").extendFlat,r=e("../../plot_api/edit_types").overrideAll,n=m.marker,d=m.line,s=n.line;B.exports=r({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:i({},m.mode,{dflt:"markers"}),text:i({},m.text,{}),texttemplate:l({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:i({},m.hovertext,{}),textfont:m.textfont,textposition:m.textposition,line:{color:d.color,width:d.width,dash:a},connectgaps:m.connectgaps,marker:i({symbol:n.symbol,opacity:n.opacity,size:n.size,sizeref:n.sizeref,sizemin:n.sizemin,sizemode:n.sizemode,colorbar:n.colorbar,line:i({width:s.width},t("marker.line")),gradient:n.gradient},t("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:m.fillcolor,selected:m.selected,unselected:m.unselected,hoverinfo:i({},x.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:f()},"calc","nested")},{"../../components/colorscale/attributes":374,"../../components/drawing/attributes":388,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scatter/attributes":936}],979:[function(e,B,V){var f=e("fast-isnumeric"),l=e("../../constants/numerical").BADNUM,m=e("../scatter/colorscale_calc"),x=e("../scatter/arrays_to_calcdata"),t=e("../scatter/calc_selection"),a=e("../../lib")._;function i(r){return r&&typeof r=="string"}B.exports=function(n,d){var s=Array.isArray(d.locations),o=s?d.locations.length:d._length,y=new Array(o),g;d.geojson?g=function(c){return i(c)||f(c)}:g=i;for(var b=0;b<o;b++){var v=y[b]={};if(s){var _=d.locations[b];v.loc=g(_)?_:null}else{var u=d.lon[b],T=d.lat[b];f(u)&&f(T)?v.lonlat=[+u,+T]:v.lonlat=[l,l]}}return x(y,d),m(n,d),t(y,d),o&&(y[0].t={labels:{lat:a(n,"lat:")+" ",lon:a(n,"lon:")+" "}}),y}},{"../../constants/numerical":491,"../../lib":515,"../scatter/arrays_to_calcdata":935,"../scatter/calc_selection":938,"../scatter/colorscale_calc":939,"fast-isnumeric":190}],980:[function(e,B,V){var f=e("../../lib"),l=e("../scatter/subtypes"),m=e("../scatter/marker_defaults"),x=e("../scatter/line_defaults"),t=e("../scatter/text_defaults"),a=e("../scatter/fillcolor_defaults"),i=e("./attributes");B.exports=function(n,d,s,o){function y(A,k){return f.coerce(n,d,i,A,k)}var g=y("locations"),b;if(g&&g.length){var v=y("geojson"),_;(typeof v=="string"&&v!==""||f.isPlainObject(v))&&(_="geojson-id");var u=y("locationmode",_);u==="geojson-id"&&y("featureidkey"),b=g.length}else{var T=y("lon")||[],c=y("lat")||[];b=Math.min(T.length,c.length)}if(!b){d.visible=!1;return}d._length=b,y("text"),y("hovertext"),y("hovertemplate"),y("mode"),l.hasLines(d)&&(x(n,d,s,o,y),y("connectgaps")),l.hasMarkers(d)&&m(n,d,s,o,y,{gradient:!0}),l.hasText(d)&&(y("texttemplate"),t(n,d,o,y)),y("fill"),d.fill!=="none"&&a(n,d,s,y),f.coerceSelectionMarkerOpacity(d,y)}},{"../../lib":515,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":978}],981:[function(e,B,V){B.exports=function(l,m,x,t,a){l.lon=m.lon,l.lat=m.lat,l.location=m.loc?m.loc:null;var i=t[a];return i.fIn&&i.fIn.properties&&(l.properties=i.fIn.properties),l}},{}],982:[function(e,B,V){var f=e("../../plots/cartesian/axes");B.exports=function(m,x,t){var a={},i=t[x.geo]._subplot,r=i.mockAxis,n=m.lonlat;return a.lonLabel=f.tickText(r,r.c2l(n[0]),!0).text,a.latLabel=f.tickText(r,r.c2l(n[1]),!0).text,a}},{"../../plots/cartesian/axes":566}],983:[function(e,B,V){var f=e("../../components/fx"),l=e("../../constants/numerical").BADNUM,m=e("../scatter/get_trace_color"),x=e("../../lib").fillText,t=e("./attributes");B.exports=function(r,n,d){var s=r.cd,o=s[0].trace,y=r.xa,g=r.ya,b=r.subplot,v=b.projection.isLonLatOverEdges,_=b.project;function u(h){var D=h.lonlat;if(D[0]===l||v(D))return 1/0;var S=_(D),M=_([n,d]),L=Math.abs(S[0]-M[0]),R=Math.abs(S[1]-M[1]),z=Math.max(3,h.mrc||0);return Math.max(Math.sqrt(L*L+R*R)-z,1-3/z)}if(f.getClosest(s,u,r),r.index!==!1){var T=s[r.index],c=T.lonlat,A=[y.c2p(c),g.c2p(c)],k=T.mrc||1;r.x0=A[0]-k,r.x1=A[0]+k,r.y0=A[1]-k,r.y1=A[1]+k,r.loc=T.loc,r.lon=c[0],r.lat=c[1];var p={};p[o.geo]={_subplot:b};var w=o._module.formatLabels(T,o,p);return r.lonLabel=w.lonLabel,r.latLabel=w.latLabel,r.color=m(o,T),r.extraText=a(o,T,r,s[0].t.labels),r.hovertemplate=o.hovertemplate,[r]}};function a(i,r,n,d){if(i.hovertemplate)return;var s=r.hi||i.hoverinfo,o=s==="all"?t.hoverinfo.flags:s.split("+"),y=o.indexOf("location")!==-1&&Array.isArray(i.locations),g=o.indexOf("lon")!==-1,b=o.indexOf("lat")!==-1,v=o.indexOf("text")!==-1,_=[];function u(T){return T+"\xB0"}return y?_.push(r.loc):g&&b?_.push("("+u(n.latLabel)+", "+u(n.lonLabel)+")"):g?_.push(d.lon+u(n.lonLabel)):b&&_.push(d.lat+u(n.latLabel)),v&&x(r,i,_),_.join("<br>")}},{"../../components/fx":407,"../../constants/numerical":491,"../../lib":515,"../scatter/get_trace_color":946,"./attributes":978}],984:[function(e,B,V){B.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../scatter/marker_colorbar"),formatLabels:e("./format_labels"),calc:e("./calc"),calcGeoJSON:e("./plot").calcGeoJSON,plot:e("./plot").plot,style:e("./style"),styleOnSelect:e("../scatter/style").styleOnSelect,hoverPoints:e("./hover"),eventData:e("./event_data"),selectPoints:e("./select"),moduleType:"trace",name:"scattergeo",basePlotModule:e("../../plots/geo"),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/geo":598,"../scatter/marker_colorbar":954,"../scatter/style":960,"./attributes":978,"./calc":979,"./defaults":980,"./event_data":981,"./format_labels":982,"./hover":983,"./plot":985,"./select":986,"./style":987}],985:[function(e,B,V){var f=e("@plotly/d3"),l=e("../../lib"),m=e("../../lib/topojson_utils").getTopojsonFeatures,x=e("../../lib/geojson_utils"),t=e("../../lib/geo_location_utils"),a=e("../../plots/cartesian/autorange").findExtremes,i=e("../../constants/numerical").BADNUM,r=e("../scatter/calc").calcMarkerSize,n=e("../scatter/subtypes"),d=e("./style");function s(y,g,b){var v=g.layers.frontplot.select(".scatterlayer"),_=l.makeTraceGroups(v,b,"trace scattergeo");function u(T,c){T.lonlat[0]===i&&f.select(c).remove()}_.selectAll("*").remove(),_.each(function(T){var c=f.select(this),A=T[0].trace;if(n.hasLines(A)||A.fill!=="none"){var k=x.calcTraceToLineCoords(T),p=A.fill!=="none"?x.makePolygon(k):x.makeLine(k);c.selectAll("path.js-line").data([{geojson:p,trace:A}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}n.hasMarkers(A)&&c.selectAll("path.point").data(l.identity).enter().append("path").classed("point",!0).each(function(w){u(w,this)}),n.hasText(A)&&c.selectAll("g").data(l.identity).enter().append("g").append("text").each(function(w){u(w,this)}),d(y,T)})}function o(y,g){var b=y[0].trace,v=g[b.geo],_=v._subplot,u=b._length,T,c;if(Array.isArray(b.locations)){var A=b.locationmode,k=A==="geojson-id"?t.extractTraceFeature(y):m(b,_.topojson);for(T=0;T<u;T++){c=y[T];var p=A==="geojson-id"?c.fOut:t.locationToFeature(A,c.loc,k);c.lonlat=p?p.properties.ct:[i,i]}}var w={padded:!0},h,D;if(v.fitbounds==="geojson"&&b.locationmode==="geojson-id"){var S=t.computeBbox(t.getTraceGeojson(b));h=[S[0],S[2]],D=[S[1],S[3]]}else{for(h=new Array(u),D=new Array(u),T=0;T<u;T++)c=y[T],h[T]=c.lonlat[0],D[T]=c.lonlat[1];w.ppad=r(b,u)}b._extremes.lon=a(v.lonaxis._ax,h,w),b._extremes.lat=a(v.lataxis._ax,D,w)}B.exports={calcGeoJSON:o,plot:s}},{"../../constants/numerical":491,"../../lib":515,"../../lib/geo_location_utils":508,"../../lib/geojson_utils":509,"../../lib/topojson_utils":544,"../../plots/cartesian/autorange":565,"../scatter/calc":937,"../scatter/subtypes":961,"./style":987,"@plotly/d3":58}],986:[function(e,B,V){var f=e("../scatter/subtypes"),l=e("../../constants/numerical").BADNUM;B.exports=function(x,t){var a=x.cd,i=x.xaxis,r=x.yaxis,n=[],d=a[0].trace,s,o,y,g,b,v=!f.hasMarkers(d)&&!f.hasText(d);if(v)return[];if(t===!1)for(b=0;b<a.length;b++)a[b].selected=0;else for(b=0;b<a.length;b++)s=a[b],o=s.lonlat,o[0]!==l&&(y=i.c2p(o),g=r.c2p(o),t.contains([y,g],null,b,x)?(n.push({pointNumber:b,lon:o[0],lat:o[1]}),s.selected=1):s.selected=0);return n}},{"../../constants/numerical":491,"../scatter/subtypes":961}],987:[function(e,B,V){var f=e("@plotly/d3"),l=e("../../components/drawing"),m=e("../../components/color"),x=e("../scatter/style"),t=x.stylePoints,a=x.styleText;B.exports=function(n,d){d&&i(n,d)};function i(r,n){var d=n[0].trace,s=n[0].node3;s.style("opacity",n[0].trace.opacity),t(s,d,r),a(s,d,r),s.selectAll("path.js-line").style("fill","none").each(function(o){var y=f.select(this),g=o.trace,b=g.line||{};y.call(m.stroke,b.color).call(l.dashLine,b.dash||"",b.width||0),g.fill!=="none"&&y.call(m.fill,g.fillcolor)})}},{"../../components/color":367,"../../components/drawing":389,"../scatter/style":960,"@plotly/d3":58}],988:[function(e,B,V){var f=e("../../plots/attributes"),l=e("../scatter/attributes"),m=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,x=e("../../components/colorscale/attributes"),t=e("../../lib/sort_object_keys"),a=e("../../lib/extend").extendFlat,i=e("../../plot_api/edit_types").overrideAll,r=e("./constants").DASHES,n=l.line,d=l.marker,s=d.line,o=B.exports=i({x:l.x,x0:l.x0,dx:l.dx,y:l.y,y0:l.y0,dy:l.dy,xperiod:l.xperiod,yperiod:l.yperiod,xperiod0:l.xperiod0,yperiod0:l.yperiod0,xperiodalignment:l.xperiodalignment,yperiodalignment:l.yperiodalignment,xhoverformat:m("x"),yhoverformat:m("y"),text:l.text,hovertext:l.hovertext,textposition:l.textposition,textfont:l.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:n.color,width:n.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:t(r),dflt:"solid"}},marker:a({},x("marker"),{symbol:d.symbol,size:d.size,sizeref:d.sizeref,sizemin:d.sizemin,sizemode:d.sizemode,opacity:d.opacity,colorbar:d.colorbar,line:a({},x("marker.line"),{width:s.width})}),connectgaps:l.connectgaps,fill:a({},l.fill,{dflt:"none"}),fillcolor:l.fillcolor,selected:{marker:l.selected.marker,textfont:l.selected.textfont},unselected:{marker:l.unselected.marker,textfont:l.unselected.textfont},opacity:f.opacity},"calc","nested");o.x.editType=o.y.editType=o.x0.editType=o.y0.editType="calc+clearAxisTypes",o.hovertemplate=l.hovertemplate,o.texttemplate=l.texttemplate},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../lib/sort_object_keys":538,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../scatter/attributes":936,"./constants":991}],989:[function(e,B,V){var f=e("./hover");B.exports={moduleType:"trace",name:"scattergl",basePlotModule:e("../../plots/cartesian"),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:e("./attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("../scatter/cross_trace_defaults"),colorbar:e("../scatter/marker_colorbar"),formatLabels:e("./format_labels"),calc:e("./calc"),hoverPoints:f.hoverPoints,selectPoints:e("./select"),meta:{}}},{"../../plots/cartesian":578,"../scatter/cross_trace_defaults":942,"../scatter/marker_colorbar":954,"./attributes":988,"./calc":990,"./defaults":993,"./format_labels":995,"./hover":997,"./select":1001}],990:[function(e,B,V){var f=e("@plotly/point-cluster"),l=e("../../lib"),m=e("../../plots/cartesian/axis_ids"),x=e("../../plots/cartesian/autorange").findExtremes,t=e("../../plots/cartesian/align_period"),a=e("../scatter/calc"),i=a.calcMarkerSize,r=a.calcAxisExpansion,n=a.setFirstScatter,d=e("../scatter/colorscale_calc"),s=e("./convert"),o=e("./scene_update"),y=e("../../constants/numerical").BADNUM,g=e("./constants").TOO_MANY_POINTS;B.exports=function(u,T){var c=u._fullLayout,A=m.getFromId(u,T.xaxis),k=m.getFromId(u,T.yaxis),p=c._plots[T.xaxis+T.yaxis],w=T._length,h=w>=g,D=w*2,S={},M,L=A.makeCalcdata(T,"x"),R=k.makeCalcdata(T,"y"),z=t(T,A,"x",L),P=t(T,k,"y",R),I=z.vals,U=P.vals;T._x=I,T._y=U,T.xperiodalignment&&(T._origX=L,T._xStarts=z.starts,T._xEnds=z.ends),T.yperiodalignment&&(T._origY=R,T._yStarts=P.starts,T._yEnds=P.ends);var O=new Array(D),G=new Array(w);for(M=0;M<w;M++)O[M*2]=I[M]===y?NaN:I[M],O[M*2+1]=U[M]===y?NaN:U[M],G[M]=M;if(A.type==="log")for(M=0;M<D;M+=2)O[M]=A.c2l(O[M]);if(k.type==="log")for(M=1;M<D;M+=2)O[M]=k.c2l(O[M]);h&&A.type!=="log"&&k.type!=="log"?S.tree=f(O):S.ids=G,d(u,T);var $=v(u,p,T,O,I,U),tt=o(u,p);n(c,T);var Z;return h?$.marker&&(Z=$.marker.sizeAvg||Math.max($.marker.size,3)):Z=i(T,w),r(u,T,A,k,I,U,Z),$.errorX&&b(T,A,$.errorX),$.errorY&&b(T,k,$.errorY),$.fill&&!tt.fill2d&&(tt.fill2d=!0),$.marker&&!tt.scatter2d&&(tt.scatter2d=!0),$.line&&!tt.line2d&&(tt.line2d=!0),($.errorX||$.errorY)&&!tt.error2d&&(tt.error2d=!0),$.text&&!tt.glText&&(tt.glText=!0),$.marker&&($.marker.snap=w),tt.lineOptions.push($.line),tt.errorXOptions.push($.errorX),tt.errorYOptions.push($.errorY),tt.fillOptions.push($.fill),tt.markerOptions.push($.marker),tt.markerSelectedOptions.push($.markerSel),tt.markerUnselectedOptions.push($.markerUnsel),tt.textOptions.push($.text),tt.textSelectedOptions.push($.textSel),tt.textUnselectedOptions.push($.textUnsel),tt.selectBatch.push([]),tt.unselectBatch.push([]),S._scene=tt,S.index=tt.count,S.x=I,S.y=U,S.positions=O,tt.count++,[{x:!1,y:!1,t:S,trace:T}]};function b(_,u,T){var c=_._extremes[u._id],A=x(u,T._bnds,{padded:!0});c.min=c.min.concat(A.min),c.max=c.max.concat(A.max)}function v(_,u,T,c,A,k){var p=s.style(_,T);if(p.marker&&(p.marker.positions=c),p.line&&c.length>1&&l.extendFlat(p.line,s.linePositions(_,T,c)),p.errorX||p.errorY){var w=s.errorBarPositions(_,T,c,A,k);p.errorX&&l.extendFlat(p.errorX,w.x),p.errorY&&l.extendFlat(p.errorY,w.y)}return p.text&&(l.extendFlat(p.text,{positions:c},s.textPosition(_,T,p.text,p.marker)),l.extendFlat(p.textSel,{positions:c},s.textPosition(_,T,p.text,p.markerSel)),l.extendFlat(p.textUnsel,{positions:c},s.textPosition(_,T,p.text,p.markerUnsel))),p}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/autorange":565,"../../plots/cartesian/axis_ids":570,"../scatter/calc":937,"../scatter/colorscale_calc":939,"./constants":991,"./convert":992,"./scene_update":1e3,"@plotly/point-cluster":59}],991:[function(e,B,V){var f=20;B.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:f,SYMBOL_STROKE:f/20,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},{}],992:[function(e,B,V){var f=e("fast-isnumeric"),l=e("svg-path-sdf"),m=e("color-normalize"),x=e("../../registry"),t=e("../../lib"),a=e("../../components/drawing"),i=e("../../plots/cartesian/axis_ids"),r=e("../../lib/gl_format_color").formatColor,n=e("../scatter/subtypes"),d=e("../scatter/make_bubble_size_func"),s=e("./helpers"),o=e("./constants"),y=e("../../constants/interactions").DESELECTDIM,g={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},b=e("../../components/fx/helpers").appendArrayPointValue;function v(z,P){var I,U={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},O=z._context.plotGlPixelRatio;if(P.visible!==!0)return U;if(n.hasText(P)&&(U.text=_(z,P),U.textSel=c(z,P,P.selected),U.textUnsel=c(z,P,P.unselected)),n.hasMarkers(P)&&(U.marker=u(P),U.markerSel=T(P,P.selected),U.markerUnsel=T(P,P.unselected),!P.unselected&&t.isArrayOrTypedArray(P.marker.opacity))){var G=P.marker.opacity;for(U.markerUnsel.opacity=new Array(G.length),I=0;I<G.length;I++)U.markerUnsel.opacity[I]=y*G[I]}if(n.hasLines(P)){U.line={overlay:!0,thickness:P.line.width*O,color:P.line.color,opacity:P.opacity};var $=(o.DASHES[P.line.dash]||[1]).slice();for(I=0;I<$.length;++I)$[I]*=P.line.width*O;U.line.dashes=$}return P.error_x&&P.error_x.visible&&(U.errorX=A(P,P.error_x,O)),P.error_y&&P.error_y.visible&&(U.errorY=A(P,P.error_y,O)),!!P.fill&&P.fill!=="none"&&(U.fill={closed:!0,fill:P.fillcolor,thickness:0}),U}function _(z,P){var I=z._fullLayout,U=P._length,O=P.textfont,G=P.textposition,$=Array.isArray(G)?G:[G],tt=O.color,Z=O.size,X=O.family,J={},st,at=z._context.plotGlPixelRatio,lt=P.texttemplate;if(lt){J.text=[];var F=I._d3locale,H=Array.isArray(lt),et=H?Math.min(lt.length,U):U,q=H?function(bt){return lt[bt]}:function(){return lt};for(st=0;st<et;st++){var W={i:st},K=P._module.formatLabels(W,P,I),nt={};b(nt,P,st);var it=P._meta||{};J.text.push(t.texttemplateString(q(st),K,F,nt,W,it))}}else Array.isArray(P.text)&&P.text.length<U?J.text=P.text.slice():J.text=P.text;if(Array.isArray(J.text))for(st=J.text.length;st<U;st++)J.text[st]="";for(J.opacity=P.opacity,J.font={},J.align=[],J.baseline=[],st=0;st<$.length;st++){var ot=$[st].split(/\s+/);switch(ot[1]){case"left":J.align.push("right");break;case"right":J.align.push("left");break;default:J.align.push(ot[1])}switch(ot[0]){case"top":J.baseline.push("bottom");break;case"bottom":J.baseline.push("top");break;default:J.baseline.push(ot[0])}}if(Array.isArray(tt))for(J.color=new Array(U),st=0;st<U;st++)J.color[st]=tt[st];else J.color=tt;if(t.isArrayOrTypedArray(Z)||Array.isArray(X))for(J.font=new Array(U),st=0;st<U;st++){var ct=J.font[st]={};ct.size=(t.isTypedArray(Z)?Z[st]:Array.isArray(Z)?f(Z[st])?Z[st]:0:Z)*at,ct.family=Array.isArray(X)?X[st]:X}else J.font={size:Z*at,family:X};return J}function u(z){var P=z._length,I=z.marker,U={},O,G=t.isArrayOrTypedArray(I.symbol),$=t.isArrayOrTypedArray(I.color),tt=t.isArrayOrTypedArray(I.line.color),Z=t.isArrayOrTypedArray(I.opacity),X=t.isArrayOrTypedArray(I.size),J=t.isArrayOrTypedArray(I.line.width),st;if(G||(st=s.isOpenSymbol(I.symbol)),G||$||tt||Z){U.colors=new Array(P),U.borderColors=new Array(P);var at=r(I,I.opacity,P),lt=r(I.line,I.opacity,P);if(!Array.isArray(lt[0])){var F=lt;for(lt=Array(P),O=0;O<P;O++)lt[O]=F}if(!Array.isArray(at[0])){var H=at;for(at=Array(P),O=0;O<P;O++)at[O]=H}for(U.colors=at,U.borderColors=lt,O=0;O<P;O++){if(G){var et=I.symbol[O];st=s.isOpenSymbol(et)}st&&(lt[O]=at[O].slice(),at[O]=at[O].slice(),at[O][3]=0)}U.opacity=z.opacity}else st?(U.color=m(I.color,"uint8"),U.color[3]=0,U.borderColor=m(I.color,"uint8")):(U.color=m(I.color,"uint8"),U.borderColor=m(I.line.color,"uint8")),U.opacity=z.opacity*I.opacity;if(G)for(U.markers=new Array(P),O=0;O<P;O++)U.markers[O]=S(I.symbol[O]);else U.marker=S(I.symbol);var q=1,W=d(z,q),K;if(X||J){var nt=U.sizes=new Array(P),it=U.borderSizes=new Array(P),ot=0,ct;if(X){for(O=0;O<P;O++)nt[O]=W(I.size[O]),ot+=nt[O];ct=ot/P}else for(K=W(I.size),O=0;O<P;O++)nt[O]=K;if(J)for(O=0;O<P;O++)it[O]=I.line.width[O];else for(K=I.line.width,O=0;O<P;O++)it[O]=K;U.sizeAvg=ct}else U.size=W(I&&I.size||10),U.borderSizes=W(I.line.width);return U}function T(z,P){var I=z.marker,U={};return P&&(P.marker&&P.marker.symbol?U=u(t.extendFlat({},I,P.marker)):P.marker&&(P.marker.size&&(U.size=P.marker.size),P.marker.color&&(U.colors=P.marker.color),P.marker.opacity!==void 0&&(U.opacity=P.marker.opacity))),U}function c(z,P,I){var U={};if(!I)return U;if(I.textfont){var O={opacity:1,text:P.text,texttemplate:P.texttemplate,textposition:P.textposition,textfont:t.extendFlat({},P.textfont)};I.textfont&&t.extendFlat(O.textfont,I.textfont),U=_(z,O)}return U}function A(z,P,I){var U={capSize:P.width*2*I,lineWidth:P.thickness*I,color:P.color};return P.copy_ystyle&&(U=z.error_y),U}var k=o.SYMBOL_SDF_SIZE,p=o.SYMBOL_SIZE,w=o.SYMBOL_STROKE,h={},D=a.symbolFuncs[0](p*.05);function S(z){if(z==="circle")return null;var P,I,U=a.symbolNumber(z),O=a.symbolFuncs[U%100],G=!!a.symbolNoDot[U%100],$=!!a.symbolNoFill[U%100],tt=s.isDotSymbol(z);return h[z]?h[z]:(tt&&!G?P=O(p*1.1)+D:P=O(p),I=l(P,{w:k,h:k,viewBox:[-p,-p,p,p],stroke:$?w:-w}),h[z]=I,I||null)}function M(z,P,I){var U=I.length,O=U/2,G,$;if(n.hasLines(P)&&O)if(P.line.shape==="hv"){for(G=[],$=0;$<O-1;$++)isNaN(I[$*2])||isNaN(I[$*2+1])?G.push(NaN,NaN,NaN,NaN):(G.push(I[$*2],I[$*2+1]),!isNaN(I[$*2+2])&&!isNaN(I[$*2+3])?G.push(I[$*2+2],I[$*2+1]):G.push(NaN,NaN));G.push(I[U-2],I[U-1])}else if(P.line.shape==="hvh"){for(G=[],$=0;$<O-1;$++)if(isNaN(I[$*2])||isNaN(I[$*2+1])||isNaN(I[$*2+2])||isNaN(I[$*2+3]))!isNaN(I[$*2])&&!isNaN(I[$*2+1])?G.push(I[$*2],I[$*2+1]):G.push(NaN,NaN),G.push(NaN,NaN);else{var tt=(I[$*2]+I[$*2+2])/2;G.push(I[$*2],I[$*2+1],tt,I[$*2+1],tt,I[$*2+3])}G.push(I[U-2],I[U-1])}else if(P.line.shape==="vhv"){for(G=[],$=0;$<O-1;$++)if(isNaN(I[$*2])||isNaN(I[$*2+1])||isNaN(I[$*2+2])||isNaN(I[$*2+3]))!isNaN(I[$*2])&&!isNaN(I[$*2+1])?G.push(I[$*2],I[$*2+1]):G.push(NaN,NaN),G.push(NaN,NaN);else{var Z=(I[$*2+1]+I[$*2+3])/2;G.push(I[$*2],I[$*2+1],I[$*2],Z,I[$*2+2],Z)}G.push(I[U-2],I[U-1])}else if(P.line.shape==="vh"){for(G=[],$=0;$<O-1;$++)isNaN(I[$*2])||isNaN(I[$*2+1])?G.push(NaN,NaN,NaN,NaN):(G.push(I[$*2],I[$*2+1]),!isNaN(I[$*2+2])&&!isNaN(I[$*2+3])?G.push(I[$*2],I[$*2+3]):G.push(NaN,NaN));G.push(I[U-2],I[U-1])}else G=I;var X=!1;for($=0;$<G.length;$++)if(isNaN(G[$])){X=!0;break}var J=X||G.length>o.TOO_MANY_POINTS||n.hasMarkers(P)?"rect":"round";if(X&&P.connectgaps){var st=G[0],at=G[1];for($=0;$<G.length;$+=2)isNaN(G[$])||isNaN(G[$+1])?(G[$]=st,G[$+1]=at):(st=G[$],at=G[$+1])}return{join:J,positions:G}}function L(z,P,I,U,O){var G=x.getComponentMethod("errorbars","makeComputeError"),$=i.getFromId(z,P.xaxis),tt=i.getFromId(z,P.yaxis),Z=I.length/2,X={};function J(st,at){var lt=at._id.charAt(0),F=P["error_"+lt];if(F&&F.visible&&(at.type==="linear"||at.type==="log")){for(var H=G(F),et={x:0,y:1}[lt],q={x:[0,1,2,3],y:[2,3,0,1]}[lt],W=new Float64Array(4*Z),K=1/0,nt=-1/0,it=0,ot=0;it<Z;it++,ot+=4){var ct=st[it];if(f(ct)){var bt=I[it*2+et],ut=H(ct,it),pt=ut[0],yt=ut[1];if(f(pt)&&f(yt)){var Tt=ct-pt,kt=ct+yt;W[ot+q[0]]=bt-at.c2l(Tt),W[ot+q[1]]=at.c2l(kt)-bt,W[ot+q[2]]=0,W[ot+q[3]]=0,K=Math.min(K,ct-pt),nt=Math.max(nt,ct+yt)}}}X[lt]={positions:I,errors:W,_bnds:[K,nt]}}}return J(U,$),J(O,tt),X}function R(z,P,I,U){var O=P._length,G={},$;if(n.hasMarkers(P)){var tt=I.font,Z=I.align,X=I.baseline;for(G.offset=new Array(O),$=0;$<O;$++){var J=U.sizes?U.sizes[$]:U.size,st=Array.isArray(tt)?tt[$].size:tt.size,at=Array.isArray(Z)?Z.length>1?Z[$]:Z[0]:Z,lt=Array.isArray(X)?X.length>1?X[$]:X[0]:X,F=g[at],H=g[lt],et=J?J/.8+1:0,q=-H*et-H*.5;G.offset[$]=[F*et/st,q/st]}}return G}B.exports={style:v,markerStyle:u,markerSelection:T,linePositions:M,errorBarPositions:L,textPosition:R}},{"../../components/drawing":389,"../../components/fx/helpers":403,"../../constants/interactions":490,"../../lib":515,"../../lib/gl_format_color":511,"../../plots/cartesian/axis_ids":570,"../../registry":647,"../scatter/make_bubble_size_func":953,"../scatter/subtypes":961,"./constants":991,"./helpers":996,"color-normalize":89,"fast-isnumeric":190,"svg-path-sdf":311}],993:[function(e,B,V){var f=e("../../lib"),l=e("../../registry"),m=e("./helpers"),x=e("./attributes"),t=e("../scatter/constants"),a=e("../scatter/subtypes"),i=e("../scatter/xy_defaults"),r=e("../scatter/period_defaults"),n=e("../scatter/marker_defaults"),d=e("../scatter/line_defaults"),s=e("../scatter/fillcolor_defaults"),o=e("../scatter/text_defaults");B.exports=function(g,b,v,_){function u(D,S){return f.coerce(g,b,x,D,S)}var T=g.marker?m.isOpenSymbol(g.marker.symbol):!1,c=a.isBubble(g),A=i(g,b,_,u);if(!A){b.visible=!1;return}r(g,b,_,u),u("xhoverformat"),u("yhoverformat");var k=A<t.PTS_LINESONLY?"lines+markers":"lines";u("text"),u("hovertext"),u("hovertemplate"),u("mode",k),a.hasLines(b)&&(u("connectgaps"),d(g,b,v,_,u),u("line.shape")),a.hasMarkers(b)&&(n(g,b,v,_,u),u("marker.line.width",T||c?1:0)),a.hasText(b)&&(u("texttemplate"),o(g,b,_,u));var p=(b.line||{}).color,w=(b.marker||{}).color;u("fill"),b.fill!=="none"&&s(g,b,v,u);var h=l.getComponentMethod("errorbars","supplyDefaults");h(g,b,p||w||v,{axis:"y"}),h(g,b,p||w||v,{axis:"x",inherit:"y"}),f.coerceSelectionMarkerOpacity(b,u)}},{"../../lib":515,"../../registry":647,"../scatter/constants":940,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/marker_defaults":955,"../scatter/period_defaults":956,"../scatter/subtypes":961,"../scatter/text_defaults":962,"../scatter/xy_defaults":963,"./attributes":988,"./helpers":996}],994:[function(e,B,V){var f=e("../../lib"),l=e("../../components/color"),m=e("../../constants/interactions").DESELECTDIM;function x(t){var a=t[0],i=a.trace,r=a.t,n=r._scene,d=r.index,s=n.selectBatch[d],o=n.unselectBatch[d],y=n.textOptions[d],g=n.textSelectedOptions[d]||{},b=n.textUnselectedOptions[d]||{},v=f.extendFlat({},y),_,u;if(s.length||o.length){var T=g.color,c=b.color,A=y.color,k=Array.isArray(A);for(v.color=new Array(i._length),_=0;_<s.length;_++)u=s[_],v.color[u]=T||(k?A[u]:A);for(_=0;_<o.length;_++){u=o[_];var p=k?A[u]:A;v.color[u]=c||(T?p:l.addOpacity(p,m))}}n.glText[d].update(v)}B.exports={styleTextSelection:x}},{"../../components/color":367,"../../constants/interactions":490,"../../lib":515}],995:[function(e,B,V){var f=e("../scatter/format_labels");B.exports=function(m,x,t){var a=m.i;return"x"in m||(m.x=x._x[a]),"y"in m||(m.y=x._y[a]),f(m,x,t)}},{"../scatter/format_labels":945}],996:[function(e,B,V){var f=e("./constants");V.isOpenSymbol=function(l){return typeof l=="string"?f.OPEN_RE.test(l):l%200>100},V.isDotSymbol=function(l){return typeof l=="string"?f.DOT_RE.test(l):l>200}},{"./constants":991}],997:[function(e,B,V){var f=e("../../registry"),l=e("../../lib"),m=e("../scatter/get_trace_color");function x(a,i,r,n){var d=a.cd,s=d[0].t,o=d[0].trace,y=a.xa,g=a.ya,b=s.x,v=s.y,_=y.c2p(i),u=g.c2p(r),T=a.distance,c;if(s.tree){var A=y.p2c(_-T),k=y.p2c(_+T),p=g.p2c(u-T),w=g.p2c(u+T);n==="x"?c=s.tree.range(Math.min(A,k),Math.min(g._rl[0],g._rl[1]),Math.max(A,k),Math.max(g._rl[0],g._rl[1])):c=s.tree.range(Math.min(A,k),Math.min(p,w),Math.max(A,k),Math.max(p,w))}else c=s.ids;var h,D,S,M,L,R,z,P,I,U=T;if(n==="x"){var O=!!o.xperiodalignment,G=!!o.yperiodalignment;for(L=0;L<c.length;L++){if(h=c[L],S=b[h],R=Math.abs(y.c2p(S)-_),O){var $=y.c2p(o._xStarts[h]),tt=y.c2p(o._xEnds[h]);R=_>=Math.min($,tt)&&_<=Math.max($,tt)?0:1/0}if(R<U){if(U=R,M=v[h],z=g.c2p(M)-u,G){var Z=g.c2p(o._yStarts[h]),X=g.c2p(o._yEnds[h]);z=u>=Math.min(Z,X)&&u<=Math.max(Z,X)?0:1/0}I=Math.sqrt(R*R+z*z),D=c[L]}}}else for(L=c.length-1;L>-1;L--)h=c[L],S=b[h],M=v[h],R=y.c2p(S)-_,z=g.c2p(M)-u,P=Math.sqrt(R*R+z*z),P<U&&(U=I=P,D=h);return a.index=D,a.distance=U,a.dxy=I,D===void 0?[a]:[t(a,b,v,o)]}function t(a,i,r,n){var d=a.xa,s=a.ya,o=a.distance,y=a.dxy,g=a.index,b={pointNumber:g,x:i[g],y:r[g]};b.tx=Array.isArray(n.text)?n.text[g]:n.text,b.htx=Array.isArray(n.hovertext)?n.hovertext[g]:n.hovertext,b.data=Array.isArray(n.customdata)?n.customdata[g]:n.customdata,b.tp=Array.isArray(n.textposition)?n.textposition[g]:n.textposition;var v=n.textfont;v&&(b.ts=l.isArrayOrTypedArray(v.size)?v.size[g]:v.size,b.tc=Array.isArray(v.color)?v.color[g]:v.color,b.tf=Array.isArray(v.family)?v.family[g]:v.family);var _=n.marker;_&&(b.ms=l.isArrayOrTypedArray(_.size)?_.size[g]:_.size,b.mo=l.isArrayOrTypedArray(_.opacity)?_.opacity[g]:_.opacity,b.mx=l.isArrayOrTypedArray(_.symbol)?_.symbol[g]:_.symbol,b.mc=l.isArrayOrTypedArray(_.color)?_.color[g]:_.color);var u=_&&_.line;u&&(b.mlc=Array.isArray(u.color)?u.color[g]:u.color,b.mlw=l.isArrayOrTypedArray(u.width)?u.width[g]:u.width);var T=_&&_.gradient;T&&T.type!=="none"&&(b.mgt=Array.isArray(T.type)?T.type[g]:T.type,b.mgc=Array.isArray(T.color)?T.color[g]:T.color);var c=d.c2p(b.x,!0),A=s.c2p(b.y,!0),k=b.mrc||1,p=n.hoverlabel;p&&(b.hbg=Array.isArray(p.bgcolor)?p.bgcolor[g]:p.bgcolor,b.hbc=Array.isArray(p.bordercolor)?p.bordercolor[g]:p.bordercolor,b.hts=l.isArrayOrTypedArray(p.font.size)?p.font.size[g]:p.font.size,b.htc=Array.isArray(p.font.color)?p.font.color[g]:p.font.color,b.htf=Array.isArray(p.font.family)?p.font.family[g]:p.font.family,b.hnl=l.isArrayOrTypedArray(p.namelength)?p.namelength[g]:p.namelength);var w=n.hoverinfo;w&&(b.hi=Array.isArray(w)?w[g]:w);var h=n.hovertemplate;h&&(b.ht=Array.isArray(h)?h[g]:h);var D={};D[a.index]=b;var S=n._origX,M=n._origY,L=l.extendFlat({},a,{color:m(n,b),x0:c-k,x1:c+k,xLabelVal:S?S[g]:b.x,y0:A-k,y1:A+k,yLabelVal:M?M[g]:b.y,cd:D,distance:o,spikeDistance:y,hovertemplate:b.ht});return b.htx?L.text=b.htx:b.tx?L.text=b.tx:n.text&&(L.text=n.text),l.fillText(b,n,L),f.getComponentMethod("errorbars","hoverInfo")(b,n,L),L}B.exports={hoverPoints:x,calcHover:t}},{"../../lib":515,"../../registry":647,"../scatter/get_trace_color":946}],998:[function(e,B,V){arguments[4][905][0].apply(V,arguments)},{"./base_index":989,"./plot":999,dup:905}],999:[function(e,B,y){var f=e("regl-scatter2d"),l=e("regl-line2d"),m=e("regl-error2d"),x=e("gl-text"),t=e("../../lib"),a=e("../../components/dragelement/helpers").selectMode,i=e("../../lib/prepare_regl"),r=e("../scatter/subtypes"),n=e("../scatter/link_traces"),d=e("./edit_style").styleTextSelection,s={};function o(g,b,v,_){var u=g._size,T=g.width*_,c=g.height*_,A=u.l*_,k=u.b*_,p=u.r*_,w=u.t*_,h=u.w*_,D=u.h*_;return[A+b.domain[0]*h,k+v.domain[0]*D,T-p-(1-b.domain[1])*h,c-w-(1-v.domain[1])*D]}var y=B.exports=function(b,v,_){if(!!_.length){var u=b._fullLayout,T=v._scene,c=v.xaxis,A=v.yaxis,k,p;if(!!T){var w=i(b,["ANGLE_instanced_arrays","OES_element_index_uint"],s);if(!w){T.init();return}var h=T.count,D=u._glcanvas.data()[0].regl;if(n(b,v,_),T.dirty){if(T.error2d===!0&&(T.error2d=m(D)),T.line2d===!0&&(T.line2d=l(D)),T.scatter2d===!0&&(T.scatter2d=f(D)),T.fill2d===!0&&(T.fill2d=l(D)),T.glText===!0)for(T.glText=new Array(h),k=0;k<h;k++)T.glText[k]=new x(D);if(T.glText){if(h>T.glText.length){var S=h-T.glText.length;for(k=0;k<S;k++)T.glText.push(new x(D))}else if(h<T.glText.length){var M=T.glText.length-h,L=T.glText.splice(h,M);L.forEach(function(W){W.destroy()})}for(k=0;k<h;k++)T.glText[k].update(T.textOptions[k])}if(T.line2d&&(T.line2d.update(T.lineOptions),T.lineOptions=T.lineOptions.map(function(W){if(W&&W.positions){for(var K=W.positions,nt=0;nt<K.length&&(isNaN(K[nt])||isNaN(K[nt+1]));)nt+=2;for(var it=K.length-2;it>nt&&(isNaN(K[it])||isNaN(K[it+1]));)it-=2;W.positions=K.slice(nt,it+2)}return W}),T.line2d.update(T.lineOptions)),T.error2d){var R=(T.errorXOptions||[]).concat(T.errorYOptions||[]);T.error2d.update(R)}T.scatter2d&&T.scatter2d.update(T.markerOptions),T.fillOrder=t.repeat(null,h),T.fill2d&&(T.fillOptions=T.fillOptions.map(function(W,K){var nt=_[K];if(!(!W||!nt||!nt[0]||!nt[0].trace)){var it=nt[0],ot=it.trace,ct=it.t,bt=T.lineOptions[K],ut,pt,yt=[];ot._ownfill&&yt.push(K),ot._nexttrace&&yt.push(K+1),yt.length&&(T.fillOrder[K]=yt);var Tt=[],kt=bt&&bt.positions||ct.positions,zt,Rt;if(ot.fill==="tozeroy"){for(zt=0;zt<kt.length&&isNaN(kt[zt+1]);)zt+=2;for(Rt=kt.length-2;Rt>zt&&isNaN(kt[Rt+1]);)Rt-=2;kt[zt+1]!==0&&(Tt=[kt[zt],0]),Tt=Tt.concat(kt.slice(zt,Rt+2)),kt[Rt+1]!==0&&(Tt=Tt.concat([kt[Rt],0]))}else if(ot.fill==="tozerox"){for(zt=0;zt<kt.length&&isNaN(kt[zt]);)zt+=2;for(Rt=kt.length-2;Rt>zt&&isNaN(kt[Rt]);)Rt-=2;kt[zt]!==0&&(Tt=[0,kt[zt+1]]),Tt=Tt.concat(kt.slice(zt,Rt+2)),kt[Rt]!==0&&(Tt=Tt.concat([0,kt[Rt+1]]))}else if(ot.fill==="toself"||ot.fill==="tonext"){for(Tt=[],ut=0,W.splitNull=!0,pt=0;pt<kt.length;pt+=2)(isNaN(kt[pt])||isNaN(kt[pt+1]))&&(Tt=Tt.concat(kt.slice(ut,pt)),Tt.push(kt[ut],kt[ut+1]),Tt.push(null,null),ut=pt+2);Tt=Tt.concat(kt.slice(ut)),ut&&Tt.push(kt[ut],kt[ut+1])}else{var Gt=ot._nexttrace;if(Gt){var wt=T.lineOptions[K+1];if(wt){var It=wt.positions;if(ot.fill==="tonexty"){for(Tt=kt.slice(),K=Math.floor(It.length/2);K--;){var $t=It[K*2],Qt=It[K*2+1];isNaN($t)||isNaN(Qt)||Tt.push($t,Qt)}W.fill=Gt.fillcolor}}}}if(ot._prevtrace&&ot._prevtrace.fill==="tonext"){var Nt=T.lineOptions[K-1].positions,Pt=Tt.length/2;ut=Pt;var Yt=[ut];for(pt=0;pt<Nt.length;pt+=2)(isNaN(Nt[pt])||isNaN(Nt[pt+1]))&&(Yt.push(pt/2+Pt+1),ut=pt+2);Tt=Tt.concat(Nt),W.hole=Yt}return W.fillmode=ot.fill,W.opacity=ot.opacity,W.positions=Tt,W}}),T.fill2d.update(T.fillOptions))}var z=u.dragmode,P=a(z),I=u.clickmode.indexOf("select")>-1;for(k=0;k<h;k++){var U=_[k][0],O=U.trace,G=U.t,$=G.index,tt=O._length,Z=G.x,X=G.y;if(O.selectedpoints||P||I){if(P||(P=!0),O.selectedpoints){var J=T.selectBatch[$]=t.selIndices2selPoints(O),st={};for(p=0;p<J.length;p++)st[J[p]]=1;var at=[];for(p=0;p<tt;p++)st[p]||at.push(p);T.unselectBatch[$]=at}var lt=G.xpx=new Array(tt),F=G.ypx=new Array(tt);for(p=0;p<tt;p++)lt[p]=c.c2p(Z[p]),F[p]=A.c2p(X[p])}else G.xpx=G.ypx=null}if(P){if(T.select2d||(T.select2d=f(u._glcanvas.data()[1].regl)),T.scatter2d){var H=new Array(h);for(k=0;k<h;k++)H[k]=T.selectBatch[k].length||T.unselectBatch[k].length?T.markerUnselectedOptions[k]:{};T.scatter2d.update(H)}T.select2d&&(T.select2d.update(T.markerOptions),T.select2d.update(T.markerSelectedOptions)),T.glText&&_.forEach(function(W){var K=((W||[])[0]||{}).trace||{};r.hasText(K)&&d(W)})}else T.scatter2d&&T.scatter2d.update(T.markerOptions);var et={viewport:o(u,c,A,b._context.plotGlPixelRatio),range:[(c._rl||c.range)[0],(A._rl||A.range)[0],(c._rl||c.range)[1],(A._rl||A.range)[1]]},q=t.repeat(et,T.count);T.fill2d&&T.fill2d.update(q),T.line2d&&T.line2d.update(q),T.error2d&&T.error2d.update(q.concat(q)),T.scatter2d&&T.scatter2d.update(q),T.select2d&&T.select2d.update(q),T.glText&&T.glText.forEach(function(W){W.update(et)})}}};y.reglPrecompiled=s},{"../../components/dragelement/helpers":385,"../../lib":515,"../../lib/prepare_regl":528,"../scatter/link_traces":952,"../scatter/subtypes":961,"./edit_style":994,"gl-text":225,"regl-error2d":280,"regl-line2d":281,"regl-scatter2d":282}],1e3:[function(e,B,V){var f=e("../../lib");B.exports=function(m,x){var t=x._scene,a={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},i={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return x._scene||(t=x._scene={},t.init=function(){f.extendFlat(t,i,a)},t.init(),t.update=function(n){var d=f.repeat(n,t.count);if(t.fill2d&&t.fill2d.update(d),t.scatter2d&&t.scatter2d.update(d),t.line2d&&t.line2d.update(d),t.error2d&&t.error2d.update(d.concat(d)),t.select2d&&t.select2d.update(d),t.glText)for(var s=0;s<t.count;s++)t.glText[s].update(n)},t.draw=function(){for(var n=t.count,d=t.fill2d,s=t.error2d,o=t.line2d,y=t.scatter2d,g=t.glText,b=t.select2d,v=t.selectBatch,_=t.unselectBatch,u=0;u<n;u++){if(d&&t.fillOrder[u]&&d.draw(t.fillOrder[u]),o&&t.lineOptions[u]&&o.draw(u),s&&(t.errorXOptions[u]&&s.draw(u),t.errorYOptions[u]&&s.draw(u+n)),y&&t.markerOptions[u])if(_[u].length){var T=f.repeat([],t.count);T[u]=_[u],y.draw(T)}else v[u].length||y.draw(u);g[u]&&t.textOptions[u]&&g[u].render()}b&&b.draw(v),t.dirty=!1},t.destroy=function(){t.fill2d&&t.fill2d.destroy&&t.fill2d.destroy(),t.scatter2d&&t.scatter2d.destroy&&t.scatter2d.destroy(),t.error2d&&t.error2d.destroy&&t.error2d.destroy(),t.line2d&&t.line2d.destroy&&t.line2d.destroy(),t.select2d&&t.select2d.destroy&&t.select2d.destroy(),t.glText&&t.glText.forEach(function(n){n.destroy&&n.destroy()}),t.lineOptions=null,t.fillOptions=null,t.markerOptions=null,t.markerSelectedOptions=null,t.markerUnselectedOptions=null,t.errorXOptions=null,t.errorYOptions=null,t.textOptions=null,t.textSelectedOptions=null,t.textUnselectedOptions=null,t.selectBatch=null,t.unselectBatch=null,x._scene=null}),t.dirty||f.extendFlat(t,a),t}},{"../../lib":515}],1001:[function(e,B,V){var f=e("../scatter/subtypes"),l=e("./edit_style").styleTextSelection;B.exports=function(x,t){var a=x.cd,i=x.xaxis,r=x.yaxis,n=[],d=a[0].trace,s=a[0].t,o=d._length,y=s.x,g=s.y,b=s._scene,v=s.index;if(!b)return n;var _=f.hasText(d),u=f.hasMarkers(d),T=!u&&!_;if(d.visible!==!0||T)return n;var c=[],A=[];if(t!==!1&&!t.degenerate)for(var k=0;k<o;k++)t.contains([s.xpx[k],s.ypx[k]],!1,k,x)?(c.push(k),n.push({pointNumber:k,x:i.c2d(y[k]),y:r.c2d(g[k])})):A.push(k);if(u){var p=b.scatter2d;if(!c.length&&!A.length){var w=new Array(b.count);w[v]=b.markerOptions[v],p.update.apply(p,w)}else if(!b.selectBatch[v].length&&!b.unselectBatch[v].length){var h=new Array(b.count);h[v]=b.markerUnselectedOptions[v],p.update.apply(p,h)}}return b.selectBatch[v]=c,b.unselectBatch[v]=A,_&&l(a),n}},{"../scatter/subtypes":961,"./edit_style":994}],1002:[function(e,B,V){var f=e("../../plots/template_attributes").hovertemplateAttrs,l=e("../../plots/template_attributes").texttemplateAttrs,m=e("../scattergeo/attributes"),x=e("../scatter/attributes"),t=e("../../plots/mapbox/layout_attributes"),a=e("../../plots/attributes"),i=e("../../components/colorscale/attributes"),r=e("../../lib/extend").extendFlat,n=e("../../plot_api/edit_types").overrideAll,d=m.line,s=m.marker;B.exports=n({lon:m.lon,lat:m.lat,mode:r({},x.mode,{dflt:"markers"}),text:r({},x.text,{}),texttemplate:l({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:r({},x.hovertext,{}),line:{color:d.color,width:d.width},connectgaps:x.connectgaps,marker:r({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:s.opacity,size:s.size,sizeref:s.sizeref,sizemin:s.sizemin,sizemode:s.sizemode},i("marker")),fill:m.fill,fillcolor:x.fillcolor,textfont:t.layers.symbol.textfont,textposition:t.layers.symbol.textposition,below:{valType:"string"},selected:{marker:x.selected.marker},unselected:{marker:x.unselected.marker},hoverinfo:r({},a.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:f()},"calc","nested")},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../../plots/mapbox/layout_attributes":624,"../../plots/template_attributes":642,"../scatter/attributes":936,"../scattergeo/attributes":978}],1003:[function(e,B,V){var f=e("fast-isnumeric"),l=e("../../lib"),m=e("../../constants/numerical").BADNUM,x=e("../../lib/geojson_utils"),t=e("../../components/colorscale"),a=e("../../components/drawing"),i=e("../scatter/make_bubble_size_func"),r=e("../scatter/subtypes"),n=e("../../plots/mapbox/convert_text_opts"),d=e("../../components/fx/helpers").appendArrayPointValue,s=e("../../lib/svg_text_utils").NEWLINES,o=e("../../lib/svg_text_utils").BR_TAG_ALL;B.exports=function(c,A){var k=A[0].trace,p=k.visible===!0&&k._length!==0,w=k.fill!=="none",h=r.hasLines(k),D=r.hasMarkers(k),S=r.hasText(k),M=D&&k.marker.symbol==="circle",L=D&&k.marker.symbol!=="circle",R=y(),z=y(),P=y(),I=y(),U={fill:R,line:z,circle:P,symbol:I};if(!p)return U;var O;if((w||h)&&(O=x.calcTraceToLineCoords(A)),w&&(R.geojson=x.makePolygon(O),R.layout.visibility="visible",l.extendFlat(R.paint,{"fill-color":k.fillcolor})),h&&(z.geojson=x.makeLine(O),z.layout.visibility="visible",l.extendFlat(z.paint,{"line-width":k.line.width,"line-color":k.line.color,"line-opacity":k.opacity})),M){var G=g(A);P.geojson=G.geojson,P.layout.visibility="visible",l.extendFlat(P.paint,{"circle-color":G.mcc,"circle-radius":G.mrc,"circle-opacity":G.mo})}if((L||S)&&(I.geojson=b(A,c),l.extendFlat(I.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),L&&(l.extendFlat(I.layout,{"icon-size":k.marker.size/10}),"angle"in k.marker&&k.marker.angle!=="auto"&&l.extendFlat(I.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),I.layout["icon-allow-overlap"]=k.marker.allowoverlap,l.extendFlat(I.paint,{"icon-opacity":k.opacity*k.marker.opacity,"icon-color":k.marker.color})),S)){var $=(k.marker||{}).size,tt=n(k.textposition,$);l.extendFlat(I.layout,{"text-size":k.textfont.size,"text-anchor":tt.anchor,"text-offset":tt.offset}),l.extendFlat(I.paint,{"text-color":k.textfont.color,"text-opacity":k.opacity})}return U};function y(){return{geojson:x.makeBlank(),layout:{visibility:"none"},paint:{}}}function g(T){var c=T[0].trace,A=c.marker,k=c.selectedpoints,p=l.isArrayOrTypedArray(A.color),w=l.isArrayOrTypedArray(A.size),h=l.isArrayOrTypedArray(A.opacity),D;function S(tt){return c.opacity*tt}function M(tt){return tt/2}var L;p&&(t.hasColorscale(c,"marker")?L=t.makeColorScaleFuncFromTrace(A):L=l.identity);var R;w&&(R=i(c));var z;h&&(z=function(tt){var Z=f(tt)?+l.constrain(tt,0,1):0;return S(Z)});var P=[];for(D=0;D<T.length;D++){var I=T[D],U=I.lonlat;if(!u(U)){var O={};L&&(O.mcc=I.mcc=L(I.mc)),R&&(O.mrc=I.mrc=R(I.ms)),z&&(O.mo=z(I.mo)),k&&(O.selected=I.selected||0),P.push({type:"Feature",geometry:{type:"Point",coordinates:U},properties:O})}}var G;if(k)for(G=a.makeSelectedPointStyleFns(c),D=0;D<P.length;D++){var $=P[D].properties;G.selectedOpacityFn&&($.mo=S(G.selectedOpacityFn($))),G.selectedColorFn&&($.mcc=G.selectedColorFn($)),G.selectedSizeFn&&($.mrc=G.selectedSizeFn($))}return{geojson:{type:"FeatureCollection",features:P},mcc:p||G&&G.selectedColorFn?{type:"identity",property:"mcc"}:A.color,mrc:w||G&&G.selectedSizeFn?{type:"identity",property:"mrc"}:M(A.size),mo:h||G&&G.selectedOpacityFn?{type:"identity",property:"mo"}:S(A.opacity)}}function b(T,c){for(var A=c._fullLayout,k=T[0].trace,p=k.marker||{},w=p.symbol,h=p.angle,D=w!=="circle"?v(w):_,S=h!=="auto"?v(h,!0):_,M=r.hasText(k)?v(k.text):_,L=[],R=0;R<T.length;R++){var z=T[R];if(!u(z.lonlat)){var P=k.texttemplate,I;if(P){var U=Array.isArray(P)?P[R]||"":P,O=k._module.formatLabels(z,k,A),G={};d(G,k,z.i);var $=k._meta||{};I=l.texttemplateString(U,O,A._d3locale,G,z,$)}else I=M(R);I&&(I=I.replace(s,"").replace(o,`
`)),L.push({type:"Feature",geometry:{type:"Point",coordinates:z.lonlat},properties:{symbol:D(R),angle:S(R),text:I}})}}return{type:"FeatureCollection",features:L}}function v(T,c){return l.isArrayOrTypedArray(T)?c?function(A){return f(T[A])?+T[A]:0}:function(A){return T[A]}:T?function(){return T}:_}function _(){return""}function u(T){return T[0]===m}},{"../../components/colorscale":379,"../../components/drawing":389,"../../components/fx/helpers":403,"../../constants/numerical":491,"../../lib":515,"../../lib/geojson_utils":509,"../../lib/svg_text_utils":541,"../../plots/mapbox/convert_text_opts":621,"../scatter/make_bubble_size_func":953,"../scatter/subtypes":961,"fast-isnumeric":190}],1004:[function(e,B,V){var f=e("../../lib"),l=e("../scatter/subtypes"),m=e("../scatter/marker_defaults"),x=e("../scatter/line_defaults"),t=e("../scatter/text_defaults"),a=e("../scatter/fillcolor_defaults"),i=e("./attributes");B.exports=function(d,s,o,y){function g(_,u){return f.coerce(d,s,i,_,u)}var b=r(d,s,g);if(!b){s.visible=!1;return}if(g("text"),g("texttemplate"),g("hovertext"),g("hovertemplate"),g("mode"),g("below"),l.hasLines(s)&&(x(d,s,o,y,g,{noDash:!0}),g("connectgaps")),l.hasMarkers(s)){m(d,s,o,y,g,{noLine:!0}),g("marker.allowoverlap"),g("marker.angle");var v=s.marker;v.symbol!=="circle"&&(f.isArrayOrTypedArray(v.size)&&(v.size=v.size[0]),f.isArrayOrTypedArray(v.color)&&(v.color=v.color[0]))}l.hasText(s)&&t(d,s,y,g,{noSelect:!0}),g("fill"),s.fill!=="none"&&a(d,s,o,g),f.coerceSelectionMarkerOpacity(s,g)};function r(n,d,s){var o=s("lon")||[],y=s("lat")||[],g=Math.min(o.length,y.length);return d._length=g,g}},{"../../lib":515,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":1002}],1005:[function(e,B,V){B.exports=function(l,m){return l.lon=m.lon,l.lat=m.lat,l}},{}],1006:[function(e,B,V){var f=e("../../plots/cartesian/axes");B.exports=function(m,x,t){var a={},i=t[x.subplot]._subplot,r=i.mockAxis,n=m.lonlat;return a.lonLabel=f.tickText(r,r.c2l(n[0]),!0).text,a.latLabel=f.tickText(r,r.c2l(n[1]),!0).text,a}},{"../../plots/cartesian/axes":566}],1007:[function(e,B,V){var f=e("../../components/fx"),l=e("../../lib"),m=e("../scatter/get_trace_color"),x=l.fillText,t=e("../../constants/numerical").BADNUM;function a(r,n,d){var s=r.cd,o=s[0].trace,y=r.xa,g=r.ya,b=r.subplot,v=n>=0?Math.floor((n+180)/360):Math.ceil((n-180)/360),_=v*360,u=n-_;function T(M){var L=M.lonlat;if(L[0]===t)return 1/0;var R=l.modHalf(L[0],360),z=L[1],P=b.project([R,z]),I=P.x-y.c2p([u,z]),U=P.y-g.c2p([R,d]),O=Math.max(3,M.mrc||0);return Math.max(Math.sqrt(I*I+U*U)-O,1-3/O)}if(f.getClosest(s,T,r),r.index!==!1){var c=s[r.index],A=c.lonlat,k=[l.modHalf(A[0],360)+_,A[1]],p=y.c2p(k),w=g.c2p(k),h=c.mrc||1;r.x0=p-h,r.x1=p+h,r.y0=w-h,r.y1=w+h;var D={};D[o.subplot]={_subplot:b};var S=o._module.formatLabels(c,o,D);return r.lonLabel=S.lonLabel,r.latLabel=S.latLabel,r.color=m(o,c),r.extraText=i(o,c,s[0].t.labels),r.hovertemplate=o.hovertemplate,[r]}}function i(r,n,d){if(r.hovertemplate)return;var s=n.hi||r.hoverinfo,o=s.split("+"),y=o.indexOf("all")!==-1,g=o.indexOf("lon")!==-1,b=o.indexOf("lat")!==-1,v=n.lonlat,_=[];function u(T){return T+"\xB0"}return y||g&&b?_.push("("+u(v[1])+", "+u(v[0])+")"):g?_.push(d.lon+u(v[0])):b&&_.push(d.lat+u(v[1])),(y||o.indexOf("text")!==-1)&&x(n,r,_),_.join("<br>")}B.exports={hoverPoints:a,getExtraText:i}},{"../../components/fx":407,"../../constants/numerical":491,"../../lib":515,"../scatter/get_trace_color":946}],1008:[function(e,B,V){B.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../scatter/marker_colorbar"),formatLabels:e("./format_labels"),calc:e("../scattergeo/calc"),plot:e("./plot"),hoverPoints:e("./hover").hoverPoints,eventData:e("./event_data"),selectPoints:e("./select"),styleOnSelect:function(f,l){if(l){var m=l[0].trace;m._glTrace.update(l)}},moduleType:"trace",name:"scattermapbox",basePlotModule:e("../../plots/mapbox"),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/mapbox":622,"../scatter/marker_colorbar":954,"../scattergeo/calc":979,"./attributes":1002,"./defaults":1004,"./event_data":1005,"./format_labels":1006,"./hover":1007,"./plot":1009,"./select":1010}],1009:[function(e,B,V){var f=e("./convert"),l=e("../../plots/mapbox/constants").traceLayerPrefix,m=["fill","line","circle","symbol"];function x(a,i){this.type="scattermapbox",this.subplot=a,this.uid=i,this.sourceIds={fill:"source-"+i+"-fill",line:"source-"+i+"-line",circle:"source-"+i+"-circle",symbol:"source-"+i+"-symbol"},this.layerIds={fill:l+i+"-fill",line:l+i+"-line",circle:l+i+"-circle",symbol:l+i+"-symbol"},this.below=null}var t=x.prototype;t.addSource=function(a,i){this.subplot.map.addSource(this.sourceIds[a],{type:"geojson",data:i.geojson})},t.setSourceData=function(a,i){this.subplot.map.getSource(this.sourceIds[a]).setData(i.geojson)},t.addLayer=function(a,i,r){this.subplot.addLayer({type:a,id:this.layerIds[a],source:this.sourceIds[a],layout:i.layout,paint:i.paint},r)},t.update=function(i){var r=this.subplot,n=r.map,d=f(r.gd,i),s=r.belowLookup["trace-"+this.uid],o,y,g;if(s!==this.below){for(o=m.length-1;o>=0;o--)y=m[o],n.removeLayer(this.layerIds[y]);for(o=0;o<m.length;o++)y=m[o],g=d[y],this.addLayer(y,g,s);this.below=s}for(o=0;o<m.length;o++)y=m[o],g=d[y],r.setOptions(this.layerIds[y],"setLayoutProperty",g.layout),g.layout.visibility==="visible"&&(this.setSourceData(y,g),r.setOptions(this.layerIds[y],"setPaintProperty",g.paint));i[0].trace._glTrace=this},t.dispose=function(){for(var i=this.subplot.map,r=m.length-1;r>=0;r--){var n=m[r];i.removeLayer(this.layerIds[n]),i.removeSource(this.sourceIds[n])}},B.exports=function(i,r){for(var n=r[0].trace,d=new x(i,n.uid),s=f(i.gd,r),o=d.below=i.belowLookup["trace-"+n.uid],y=0;y<m.length;y++){var g=m[y],b=s[g];d.addSource(g,b),d.addLayer(g,b,o)}return r[0].trace._glTrace=d,d}},{"../../plots/mapbox/constants":620,"./convert":1003}],1010:[function(e,B,V){var f=e("../../lib"),l=e("../scatter/subtypes"),m=e("../../constants/numerical").BADNUM;B.exports=function(t,a){var i=t.cd,r=t.xaxis,n=t.yaxis,d=[],s=i[0].trace,o;if(!l.hasMarkers(s))return[];if(a===!1)for(o=0;o<i.length;o++)i[o].selected=0;else for(o=0;o<i.length;o++){var y=i[o],g=y.lonlat;if(g[0]!==m){var b=[f.modHalf(g[0],360),g[1]],v=[r.c2p(b),n.c2p(b)];a.contains(v,null,o,t)?(d.push({pointNumber:o,lon:g[0],lat:g[1]}),y.selected=1):y.selected=0}}return d}},{"../../constants/numerical":491,"../../lib":515,"../scatter/subtypes":961}],1011:[function(e,B,V){var f=e("../../plots/template_attributes").hovertemplateAttrs,l=e("../../plots/template_attributes").texttemplateAttrs,m=e("../../lib/extend").extendFlat,x=e("../scatter/attributes"),t=e("../../plots/attributes"),a=x.line;B.exports={mode:x.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:x.text,texttemplate:l({editType:"plot"},{keys:["r","theta","text"]}),hovertext:x.hovertext,line:{color:a.color,width:a.width,dash:a.dash,shape:m({},a.shape,{values:["linear","spline"]}),smoothing:a.smoothing,editType:"calc"},connectgaps:x.connectgaps,marker:x.marker,cliponaxis:m({},x.cliponaxis,{dflt:!1}),textposition:x.textposition,textfont:x.textfont,fill:m({},x.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:x.fillcolor,hoverinfo:m({},t.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:x.hoveron,hovertemplate:f(),selected:x.selected,unselected:x.unselected}},{"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scatter/attributes":936}],1012:[function(e,B,V){var f=e("fast-isnumeric"),l=e("../../constants/numerical").BADNUM,m=e("../../plots/cartesian/axes"),x=e("../scatter/colorscale_calc"),t=e("../scatter/arrays_to_calcdata"),a=e("../scatter/calc_selection"),i=e("../scatter/calc").calcMarkerSize;B.exports=function(n,d){for(var s=n._fullLayout,o=d.subplot,y=s[o].radialaxis,g=s[o].angularaxis,b=y.makeCalcdata(d,"r"),v=g.makeCalcdata(d,"theta"),_=d._length,u=new Array(_),T=0;T<_;T++){var c=b[T],A=v[T],k=u[T]={};f(c)&&f(A)?(k.r=c,k.theta=A):k.r=l}var p=i(d,_);return d._extremes.x=m.findExtremes(y,b,{ppad:p}),x(n,d),t(u,d),a(u,d),u}},{"../../constants/numerical":491,"../../plots/cartesian/axes":566,"../scatter/arrays_to_calcdata":935,"../scatter/calc":937,"../scatter/calc_selection":938,"../scatter/colorscale_calc":939,"fast-isnumeric":190}],1013:[function(e,B,V){var f=e("../../lib"),l=e("../scatter/subtypes"),m=e("../scatter/marker_defaults"),x=e("../scatter/line_defaults"),t=e("../scatter/line_shape_defaults"),a=e("../scatter/text_defaults"),i=e("../scatter/fillcolor_defaults"),r=e("../scatter/constants").PTS_LINESONLY,n=e("./attributes");function d(o,y,g,b){function v(T,c){return f.coerce(o,y,n,T,c)}var _=s(o,y,b,v);if(!_){y.visible=!1;return}v("thetaunit"),v("mode",_<r?"lines+markers":"lines"),v("text"),v("hovertext"),y.hoveron!=="fills"&&v("hovertemplate"),l.hasLines(y)&&(x(o,y,g,b,v),t(o,y,v),v("connectgaps")),l.hasMarkers(y)&&m(o,y,g,b,v,{gradient:!0}),l.hasText(y)&&(v("texttemplate"),a(o,y,b,v));var u=[];(l.hasMarkers(y)||l.hasText(y))&&(v("cliponaxis"),v("marker.maxdisplayed"),u.push("points")),v("fill"),y.fill!=="none"&&(i(o,y,g,v),l.hasLines(y)||t(o,y,v)),(y.fill==="tonext"||y.fill==="toself")&&u.push("fills"),v("hoveron",u.join("+")||"points"),f.coerceSelectionMarkerOpacity(y,v)}function s(o,y,g,b){var v=b("r"),_=b("theta"),u;if(v)_?u=Math.min(v.length,_.length):(u=v.length,b("theta0"),b("dtheta"));else{if(!_)return 0;u=y.theta.length,b("r0"),b("dr")}return y._length=u,u}B.exports={handleRThetaDefaults:s,supplyDefaults:d}},{"../../lib":515,"../scatter/constants":940,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/line_shape_defaults":951,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":1011}],1014:[function(e,B,V){var f=e("../../lib"),l=e("../../plots/cartesian/axes");B.exports=function(x,t,a){var i={},r=a[t.subplot]._subplot,n,d;r?(n=r.radialAxis,d=r.angularAxis):(r=a[t.subplot],n=r.radialaxis,d=r.angularaxis);var s=n.c2l(x.r);i.rLabel=l.tickText(n,s,!0).text;var o=d.thetaunit==="degrees"?f.rad2deg(x.theta):x.theta;return i.thetaLabel=l.tickText(d,o,!0).text,i}},{"../../lib":515,"../../plots/cartesian/axes":566}],1015:[function(e,B,V){var f=e("../scatter/hover");function l(x,t,a,i){var r=f(x,t,a,i);if(!(!r||r[0].index===!1)){var n=r[0];if(n.index===void 0)return r;var d=x.subplot,s=n.cd[n.index],o=n.trace;if(!!d.isPtInside(s))return n.xLabelVal=void 0,n.yLabelVal=void 0,m(s,o,d,n),n.hovertemplate=o.hovertemplate,r}}function m(x,t,a,i){var r=a.radialAxis,n=a.angularAxis;r._hovertitle="r",n._hovertitle="\u03B8";var d={};d[t.subplot]={_subplot:a};var s=t._module.formatLabels(x,t,d);i.rLabel=s.rLabel,i.thetaLabel=s.thetaLabel;var o=x.hi||t.hoverinfo,y=[];function g(v,_){y.push(v._hovertitle+": "+_)}if(!t.hovertemplate){var b=o.split("+");b.indexOf("all")!==-1&&(b=["r","theta","text"]),b.indexOf("r")!==-1&&g(r,i.rLabel),b.indexOf("theta")!==-1&&g(n,i.thetaLabel),b.indexOf("text")!==-1&&i.text&&(y.push(i.text),delete i.text),i.extraText=y.join("<br>")}}B.exports={hoverPoints:l,makeHoverPointText:m}},{"../scatter/hover":947}],1016:[function(e,B,V){B.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:e("../../plots/polar"),categories:["polar","symbols","showLegend","scatter-like"],attributes:e("./attributes"),supplyDefaults:e("./defaults").supplyDefaults,colorbar:e("../scatter/marker_colorbar"),formatLabels:e("./format_labels"),calc:e("./calc"),plot:e("./plot"),style:e("../scatter/style").style,styleOnSelect:e("../scatter/style").styleOnSelect,hoverPoints:e("./hover").hoverPoints,selectPoints:e("../scatter/select"),meta:{}}},{"../../plots/polar":631,"../scatter/marker_colorbar":954,"../scatter/select":958,"../scatter/style":960,"./attributes":1011,"./calc":1012,"./defaults":1013,"./format_labels":1014,"./hover":1015,"./plot":1017}],1017:[function(e,B,V){var f=e("../scatter/plot"),l=e("../../constants/numerical").BADNUM;B.exports=function(x,t,a){for(var i=t.layers.frontplot.select("g.scatterlayer"),r={xaxis:t.xaxis,yaxis:t.yaxis,plot:t.framework,layerClipId:t._hasClipOnAxisFalse?t.clipIds.forTraces:null},n=t.radialAxis,d=t.angularAxis,s=0;s<a.length;s++)for(var o=a[s],y=0;y<o.length;y++){var g=o[y],b=g.r;if(b===l)g.x=g.y=l;else{var v=n.c2g(b),_=d.c2g(g.theta);g.x=v*Math.cos(_),g.y=v*Math.sin(_)}}f(x,r,a,i)}},{"../../constants/numerical":491,"../scatter/plot":957}],1018:[function(e,B,V){var f=e("../scatterpolar/attributes"),l=e("../scattergl/attributes"),m=e("../../plots/template_attributes").texttemplateAttrs;B.exports={mode:f.mode,r:f.r,theta:f.theta,r0:f.r0,dr:f.dr,theta0:f.theta0,dtheta:f.dtheta,thetaunit:f.thetaunit,text:f.text,texttemplate:m({editType:"plot"},{keys:["r","theta","text"]}),hovertext:f.hovertext,hovertemplate:f.hovertemplate,line:l.line,connectgaps:l.connectgaps,marker:l.marker,fill:l.fill,fillcolor:l.fillcolor,textposition:l.textposition,textfont:l.textfont,hoverinfo:f.hoverinfo,selected:f.selected,unselected:f.unselected}},{"../../plots/template_attributes":642,"../scattergl/attributes":988,"../scatterpolar/attributes":1011}],1019:[function(e,B,V){B.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:e("../../plots/polar"),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../scatter/marker_colorbar"),formatLabels:e("./format_labels"),calc:e("./calc"),hoverPoints:e("./hover").hoverPoints,selectPoints:e("../scattergl/select"),meta:{}}},{"../../plots/polar":631,"../scatter/marker_colorbar":954,"../scattergl/select":1001,"./attributes":1018,"./calc":1020,"./defaults":1021,"./format_labels":1022,"./hover":1023}],1020:[function(e,B,V){var f=e("../scatter/colorscale_calc"),l=e("../scatter/calc").calcMarkerSize,m=e("../scattergl/convert"),x=e("../../plots/cartesian/axes"),t=e("../scattergl/constants").TOO_MANY_POINTS;B.exports=function(i,r){var n=i._fullLayout,d=r.subplot,s=n[d].radialaxis,o=n[d].angularaxis,y=r._r=s.makeCalcdata(r,"r"),g=r._theta=o.makeCalcdata(r,"theta"),b=r._length,v={};b<y.length&&(y=y.slice(0,b)),b<g.length&&(g=g.slice(0,b)),v.r=y,v.theta=g,f(i,r);var _=v.opts=m.style(i,r),u;return b<t?u=l(r,b):_.marker&&(u=2*(_.marker.sizeAvg||Math.max(_.marker.size,3))),r._extremes.x=x.findExtremes(s,y,{ppad:u}),[{x:!1,y:!1,t:v,trace:r}]}},{"../../plots/cartesian/axes":566,"../scatter/calc":937,"../scatter/colorscale_calc":939,"../scattergl/constants":991,"../scattergl/convert":992}],1021:[function(e,B,V){var f=e("../../lib"),l=e("../scatter/subtypes"),m=e("../scatterpolar/defaults").handleRThetaDefaults,x=e("../scatter/marker_defaults"),t=e("../scatter/line_defaults"),a=e("../scatter/text_defaults"),i=e("../scatter/fillcolor_defaults"),r=e("../scatter/constants").PTS_LINESONLY,n=e("./attributes");B.exports=function(s,o,y,g){function b(_,u){return f.coerce(s,o,n,_,u)}var v=m(s,o,g,b);if(!v){o.visible=!1;return}b("thetaunit"),b("mode",v<r?"lines+markers":"lines"),b("text"),b("hovertext"),o.hoveron!=="fills"&&b("hovertemplate"),l.hasLines(o)&&(t(s,o,y,g,b),b("connectgaps")),l.hasMarkers(o)&&x(s,o,y,g,b),l.hasText(o)&&(b("texttemplate"),a(s,o,g,b)),b("fill"),o.fill!=="none"&&i(s,o,y,b),f.coerceSelectionMarkerOpacity(o,b)}},{"../../lib":515,"../scatter/constants":940,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"../scatterpolar/defaults":1013,"./attributes":1018}],1022:[function(e,B,V){var f=e("../scatterpolar/format_labels");B.exports=function(m,x,t){var a=m.i;return"r"in m||(m.r=x._r[a]),"theta"in m||(m.theta=x._theta[a]),f(m,x,t)}},{"../scatterpolar/format_labels":1014}],1023:[function(e,B,V){var f=e("../scattergl/hover"),l=e("../scatterpolar/hover").makeHoverPointText;function m(x,t,a,i){var r=x.cd,n=r[0].t,d=n.r,s=n.theta,o=f.hoverPoints(x,t,a,i);if(!(!o||o[0].index===!1)){var y=o[0];if(y.index===void 0)return o;var g=x.subplot,b=y.cd[y.index],v=y.trace;if(b.r=d[y.index],b.theta=s[y.index],!!g.isPtInside(b))return y.xLabelVal=void 0,y.yLabelVal=void 0,l(b,v,g,y),o}}B.exports={hoverPoints:m}},{"../scattergl/hover":997,"../scatterpolar/hover":1015}],1024:[function(e,B,V){arguments[4][905][0].apply(V,arguments)},{"./base_index":1019,"./plot":1025,dup:905}],1025:[function(e,B,V){var f=e("@plotly/point-cluster"),l=e("fast-isnumeric"),m=e("../scattergl/plot"),x=e("../scattergl/scene_update"),t=e("../scattergl/convert"),a=e("../../lib"),i=e("../scattergl/constants").TOO_MANY_POINTS,r={};B.exports=function(d,s,o){if(!!o.length){var y=s.radialAxis,g=s.angularAxis,b=x(d,s);return o.forEach(function(v){if(!(!v||!v[0]||!v[0].trace)){var _=v[0],u=_.trace,T=_.t,c=u._length,A=T.r,k=T.theta,p=T.opts,w,h=A.slice(),D=k.slice();for(w=0;w<A.length;w++)s.isPtInside({r:A[w],theta:k[w]})||(h[w]=NaN,D[w]=NaN);var S=new Array(c*2),M=Array(c),L=Array(c);for(w=0;w<c;w++){var R=h[w],z,P;if(l(R)){var I=y.c2g(R),U=g.c2g(D[w],u.thetaunit);z=I*Math.cos(U),P=I*Math.sin(U)}else z=P=NaN;M[w]=S[w*2]=z,L[w]=S[w*2+1]=P}T.tree=f(S),p.marker&&c>=i&&(p.marker.cluster=T.tree),p.marker&&(p.markerSel.positions=p.markerUnsel.positions=p.marker.positions=S),p.line&&S.length>1&&a.extendFlat(p.line,t.linePositions(d,u,S)),p.text&&(a.extendFlat(p.text,{positions:S},t.textPosition(d,u,p.text,p.marker)),a.extendFlat(p.textSel,{positions:S},t.textPosition(d,u,p.text,p.markerSel)),a.extendFlat(p.textUnsel,{positions:S},t.textPosition(d,u,p.text,p.markerUnsel))),p.fill&&!b.fill2d&&(b.fill2d=!0),p.marker&&!b.scatter2d&&(b.scatter2d=!0),p.line&&!b.line2d&&(b.line2d=!0),p.text&&!b.glText&&(b.glText=!0),b.lineOptions.push(p.line),b.fillOptions.push(p.fill),b.markerOptions.push(p.marker),b.markerSelectedOptions.push(p.markerSel),b.markerUnselectedOptions.push(p.markerUnsel),b.textOptions.push(p.text),b.textSelectedOptions.push(p.textSel),b.textUnselectedOptions.push(p.textUnsel),b.selectBatch.push([]),b.unselectBatch.push([]),T.x=M,T.y=L,T.rawx=M,T.rawy=L,T.r=A,T.theta=k,T.positions=S,T._scene=b,T.index=b.count,b.count++}}),m(d,s,o)}},B.exports.reglPrecompiled=r},{"../../lib":515,"../scattergl/constants":991,"../scattergl/convert":992,"../scattergl/plot":999,"../scattergl/scene_update":1e3,"@plotly/point-cluster":59,"fast-isnumeric":190}],1026:[function(e,B,V){var f=e("../../plots/template_attributes").hovertemplateAttrs,l=e("../../plots/template_attributes").texttemplateAttrs,m=e("../../lib/extend").extendFlat,x=e("../scatter/attributes"),t=e("../../plots/attributes"),a=x.line;B.exports={mode:x.mode,real:{valType:"data_array",editType:"calc+clearAxisTypes"},imag:{valType:"data_array",editType:"calc+clearAxisTypes"},text:x.text,texttemplate:l({editType:"plot"},{keys:["real","imag","text"]}),hovertext:x.hovertext,line:{color:a.color,width:a.width,dash:a.dash,shape:m({},a.shape,{values:["linear","spline"]}),smoothing:a.smoothing,editType:"calc"},connectgaps:x.connectgaps,marker:x.marker,cliponaxis:m({},x.cliponaxis,{dflt:!1}),textposition:x.textposition,textfont:x.textfont,fill:m({},x.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:x.fillcolor,hoverinfo:m({},t.hoverinfo,{flags:["real","imag","text","name"]}),hoveron:x.hoveron,hovertemplate:f(),selected:x.selected,unselected:x.unselected}},{"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scatter/attributes":936}],1027:[function(e,B,V){var f=e("fast-isnumeric"),l=e("../../constants/numerical").BADNUM,m=e("../scatter/colorscale_calc"),x=e("../scatter/arrays_to_calcdata"),t=e("../scatter/calc_selection"),a=e("../scatter/calc").calcMarkerSize;B.exports=function(r,n){for(var d=r._fullLayout,s=n.subplot,o=d[s].realaxis,y=d[s].imaginaryaxis,g=o.makeCalcdata(n,"real"),b=y.makeCalcdata(n,"imag"),v=n._length,_=new Array(v),u=0;u<v;u++){var T=g[u],c=b[u],A=_[u]={};f(T)&&f(c)?(A.real=T,A.imag=c):A.real=l}return a(n,v),m(r,n),x(_,n),t(_,n),_}},{"../../constants/numerical":491,"../scatter/arrays_to_calcdata":935,"../scatter/calc":937,"../scatter/calc_selection":938,"../scatter/colorscale_calc":939,"fast-isnumeric":190}],1028:[function(e,B,V){var f=e("../../lib"),l=e("../scatter/subtypes"),m=e("../scatter/marker_defaults"),x=e("../scatter/line_defaults"),t=e("../scatter/line_shape_defaults"),a=e("../scatter/text_defaults"),i=e("../scatter/fillcolor_defaults"),r=e("../scatter/constants").PTS_LINESONLY,n=e("./attributes");B.exports=function(o,y,g,b){function v(T,c){return f.coerce(o,y,n,T,c)}var _=d(o,y,b,v);if(!_){y.visible=!1;return}v("mode",_<r?"lines+markers":"lines"),v("text"),v("hovertext"),y.hoveron!=="fills"&&v("hovertemplate"),l.hasLines(y)&&(x(o,y,g,b,v),t(o,y,v),v("connectgaps")),l.hasMarkers(y)&&m(o,y,g,b,v,{gradient:!0}),l.hasText(y)&&(v("texttemplate"),a(o,y,b,v));var u=[];(l.hasMarkers(y)||l.hasText(y))&&(v("cliponaxis"),v("marker.maxdisplayed"),u.push("points")),v("fill"),y.fill!=="none"&&(i(o,y,g,v),l.hasLines(y)||t(o,y,v)),(y.fill==="tonext"||y.fill==="toself")&&u.push("fills"),v("hoveron",u.join("+")||"points"),f.coerceSelectionMarkerOpacity(y,v)};function d(s,o,y,g){var b=g("real"),v=g("imag"),_;return b&&v&&(_=Math.min(b.length,v.length)),o._length=_,_}},{"../../lib":515,"../scatter/constants":940,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/line_shape_defaults":951,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":1026}],1029:[function(e,B,V){var f=e("../../plots/cartesian/axes");B.exports=function(m,x,t){var a={},i=t[x.subplot]._subplot;return a.realLabel=f.tickText(i.radialAxis,m.real,!0).text,a.imagLabel=f.tickText(i.angularAxis,m.imag,!0).text,a}},{"../../plots/cartesian/axes":566}],1030:[function(e,B,V){var f=e("../scatter/hover");function l(x,t,a,i){var r=f(x,t,a,i);if(!(!r||r[0].index===!1)){var n=r[0];if(n.index===void 0)return r;var d=x.subplot,s=n.cd[n.index],o=n.trace;if(!!d.isPtInside(s))return n.xLabelVal=void 0,n.yLabelVal=void 0,m(s,o,d,n),n.hovertemplate=o.hovertemplate,r}}function m(x,t,a,i){var r=a.radialAxis,n=a.angularAxis;r._hovertitle="real",n._hovertitle="imag";var d={};d[t.subplot]={_subplot:a};var s=t._module.formatLabels(x,t,d);i.realLabel=s.realLabel,i.imagLabel=s.imagLabel;var o=x.hi||t.hoverinfo,y=[];function g(v,_){y.push(v._hovertitle+": "+_)}if(!t.hovertemplate){var b=o.split("+");b.indexOf("all")!==-1&&(b=["real","imag","text"]),b.indexOf("real")!==-1&&g(r,i.realLabel),b.indexOf("imag")!==-1&&g(n,i.imagLabel),b.indexOf("text")!==-1&&i.text&&(y.push(i.text),delete i.text),i.extraText=y.join("<br>")}}B.exports={hoverPoints:l,makeHoverPointText:m}},{"../scatter/hover":947}],1031:[function(e,B,V){B.exports={moduleType:"trace",name:"scattersmith",basePlotModule:e("../../plots/smith"),categories:["smith","symbols","showLegend","scatter-like"],attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../scatter/marker_colorbar"),formatLabels:e("./format_labels"),calc:e("./calc"),plot:e("./plot"),style:e("../scatter/style").style,styleOnSelect:e("../scatter/style").styleOnSelect,hoverPoints:e("./hover").hoverPoints,selectPoints:e("../scatter/select"),meta:{}}},{"../../plots/smith":638,"../scatter/marker_colorbar":954,"../scatter/select":958,"../scatter/style":960,"./attributes":1026,"./calc":1027,"./defaults":1028,"./format_labels":1029,"./hover":1030,"./plot":1032}],1032:[function(e,B,V){var f=e("../scatter/plot"),l=e("../../constants/numerical").BADNUM,m=e("../../plots/smith/helpers"),x=m.smith;B.exports=function(a,i,r){for(var n=i.layers.frontplot.select("g.scatterlayer"),d={xaxis:i.xaxis,yaxis:i.yaxis,plot:i.framework,layerClipId:i._hasClipOnAxisFalse?i.clipIds.forTraces:null},s=0;s<r.length;s++)for(var o=r[s],y=0;y<o.length;y++){var g=o[y],b=g.real;if(b===l)g.x=g.y=l;else{var v=x([b,g.imag]);g.x=v[0],g.y=v[1]}}f(a,d,r,n)}},{"../../constants/numerical":491,"../../plots/smith/helpers":637,"../scatter/plot":957}],1033:[function(e,B,V){var f=e("../../plots/template_attributes").hovertemplateAttrs,l=e("../../plots/template_attributes").texttemplateAttrs,m=e("../scatter/attributes"),x=e("../../plots/attributes"),t=e("../../components/colorscale/attributes"),a=e("../../components/drawing/attributes").dash,i=e("../../lib/extend").extendFlat,r=m.marker,n=m.line,d=r.line;B.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:i({},m.mode,{dflt:"markers"}),text:i({},m.text,{}),texttemplate:l({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:i({},m.hovertext,{}),line:{color:n.color,width:n.width,dash:a,shape:i({},n.shape,{values:["linear","spline"]}),smoothing:n.smoothing,editType:"calc"},connectgaps:m.connectgaps,cliponaxis:m.cliponaxis,fill:i({},m.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:m.fillcolor,marker:i({symbol:r.symbol,opacity:r.opacity,maxdisplayed:r.maxdisplayed,size:r.size,sizeref:r.sizeref,sizemin:r.sizemin,sizemode:r.sizemode,line:i({width:d.width,editType:"calc"},t("marker.line")),gradient:r.gradient,editType:"calc"},t("marker")),textfont:m.textfont,textposition:m.textposition,selected:m.selected,unselected:m.unselected,hoverinfo:i({},x.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:m.hoveron,hovertemplate:f()}},{"../../components/colorscale/attributes":374,"../../components/drawing/attributes":388,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scatter/attributes":936}],1034:[function(e,B,V){var f=e("fast-isnumeric"),l=e("../scatter/colorscale_calc"),m=e("../scatter/arrays_to_calcdata"),x=e("../scatter/calc_selection"),t=e("../scatter/calc").calcMarkerSize,a=["a","b","c"],i={a:["b","c"],b:["a","c"],c:["a","b"]};B.exports=function(n,d){var s=n._fullLayout[d.subplot],o=s.sum,y=d.sum||o,g={a:d.a,b:d.b,c:d.c},b,v,_,u,T,c;for(b=0;b<a.length;b++)if(_=a[b],!g[_]){for(T=g[i[_][0]],c=g[i[_][1]],u=new Array(T.length),v=0;v<T.length;v++)u[v]=y-T[v]-c[v];g[_]=u}var A=d._length,k=new Array(A),p,w,h,D,S,M;for(b=0;b<A;b++)p=g.a[b],w=g.b[b],h=g.c[b],f(p)&&f(w)&&f(h)?(p=+p,w=+w,h=+h,D=o/(p+w+h),D!==1&&(p*=D,w*=D,h*=D),M=p,S=h-w,k[b]={x:S,y:M,a:p,b:w,c:h}):k[b]={x:!1,y:!1};return t(d,A),l(n,d),m(k,d),x(k,d),k}},{"../scatter/arrays_to_calcdata":935,"../scatter/calc":937,"../scatter/calc_selection":938,"../scatter/colorscale_calc":939,"fast-isnumeric":190}],1035:[function(e,B,V){var f=e("../../lib"),l=e("../scatter/constants"),m=e("../scatter/subtypes"),x=e("../scatter/marker_defaults"),t=e("../scatter/line_defaults"),a=e("../scatter/line_shape_defaults"),i=e("../scatter/text_defaults"),r=e("../scatter/fillcolor_defaults"),n=e("./attributes");B.exports=function(s,o,y,g){function b(k,p){return f.coerce(s,o,n,k,p)}var v=b("a"),_=b("b"),u=b("c"),T;if(v?(T=v.length,_?(T=Math.min(T,_.length),u&&(T=Math.min(T,u.length))):u?T=Math.min(T,u.length):T=0):_&&u&&(T=Math.min(_.length,u.length)),!T){o.visible=!1;return}o._length=T,b("sum"),b("text"),b("hovertext"),o.hoveron!=="fills"&&b("hovertemplate");var c=T<l.PTS_LINESONLY?"lines+markers":"lines";b("mode",c),m.hasLines(o)&&(t(s,o,y,g,b),a(s,o,b),b("connectgaps")),m.hasMarkers(o)&&x(s,o,y,g,b,{gradient:!0}),m.hasText(o)&&(b("texttemplate"),i(s,o,g,b));var A=[];(m.hasMarkers(o)||m.hasText(o))&&(b("cliponaxis"),b("marker.maxdisplayed"),A.push("points")),b("fill"),o.fill!=="none"&&(r(s,o,y,b),m.hasLines(o)||a(s,o,b)),(o.fill==="tonext"||o.fill==="toself")&&A.push("fills"),b("hoveron",A.join("+")||"points"),f.coerceSelectionMarkerOpacity(o,b)}},{"../../lib":515,"../scatter/constants":940,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/line_shape_defaults":951,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":1033}],1036:[function(e,B,V){B.exports=function(l,m,x,t,a){if(m.xa&&(l.xaxis=m.xa),m.ya&&(l.yaxis=m.ya),t[a]){var i=t[a];l.a=i.a,l.b=i.b,l.c=i.c}else l.a=m.a,l.b=m.b,l.c=m.c;return l}},{}],1037:[function(e,B,V){var f=e("../../plots/cartesian/axes");B.exports=function(m,x,t){var a={},i=t[x.subplot]._subplot;return a.aLabel=f.tickText(i.aaxis,m.a,!0).text,a.bLabel=f.tickText(i.baxis,m.b,!0).text,a.cLabel=f.tickText(i.caxis,m.c,!0).text,a}},{"../../plots/cartesian/axes":566}],1038:[function(e,B,V){var f=e("../scatter/hover");B.exports=function(m,x,t,a){var i=f(m,x,t,a);if(!i||i[0].index===!1)return;var r=i[0];if(r.index===void 0){var n=1-r.y0/m.ya._length,d=m.xa._length,s=d*n/2,o=d-s;return r.x0=Math.max(Math.min(r.x0,o),s),r.x1=Math.max(Math.min(r.x1,o),s),i}var y=r.cd[r.index],g=r.trace,b=r.subplot;r.a=y.a,r.b=y.b,r.c=y.c,r.xLabelVal=void 0,r.yLabelVal=void 0;var v={};v[g.subplot]={_subplot:b};var _=g._module.formatLabels(y,g,v);r.aLabel=_.aLabel,r.bLabel=_.bLabel,r.cLabel=_.cLabel;var u=y.hi||g.hoverinfo,T=[];function c(k,p){T.push(k._hovertitle+": "+p)}if(!g.hovertemplate){var A=u.split("+");A.indexOf("all")!==-1&&(A=["a","b","c"]),A.indexOf("a")!==-1&&c(b.aaxis,r.aLabel),A.indexOf("b")!==-1&&c(b.baxis,r.bLabel),A.indexOf("c")!==-1&&c(b.caxis,r.cLabel)}return r.extraText=T.join("<br>"),r.hovertemplate=g.hovertemplate,i}},{"../scatter/hover":947}],1039:[function(e,B,V){B.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../scatter/marker_colorbar"),formatLabels:e("./format_labels"),calc:e("./calc"),plot:e("./plot"),style:e("../scatter/style").style,styleOnSelect:e("../scatter/style").styleOnSelect,hoverPoints:e("./hover"),selectPoints:e("../scatter/select"),eventData:e("./event_data"),moduleType:"trace",name:"scatterternary",basePlotModule:e("../../plots/ternary"),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/ternary":643,"../scatter/marker_colorbar":954,"../scatter/select":958,"../scatter/style":960,"./attributes":1033,"./calc":1034,"./defaults":1035,"./event_data":1036,"./format_labels":1037,"./hover":1038,"./plot":1040}],1040:[function(e,B,V){var f=e("../scatter/plot");B.exports=function(m,x,t){var a=x.plotContainer;a.select(".scatterlayer").selectAll("*").remove();var i={xaxis:x.xaxis,yaxis:x.yaxis,plot:a,layerClipId:x._hasClipOnAxisFalse?x.clipIdRelative:null},r=x.layers.frontplot.select("g.scatterlayer");f(m,i,t,r)}},{"../scatter/plot":957}],1041:[function(e,B,V){var f=e("../scatter/attributes"),l=e("../../components/colorscale/attributes"),m=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,x=e("../../plots/template_attributes").hovertemplateAttrs,t=e("../scattergl/attributes"),a=e("../../plots/cartesian/constants").idRegex,i=e("../../plot_api/plot_template").templatedArray,r=e("../../lib/extend").extendFlat,n=f.marker,d=n.line,s=r(l("marker.line",{editTypeOverride:"calc"}),{width:r({},d.width,{editType:"calc"}),editType:"calc"}),o=r(l("marker"),{symbol:n.symbol,size:r({},n.size,{editType:"markerSize"}),sizeref:n.sizeref,sizemin:n.sizemin,sizemode:n.sizemode,opacity:n.opacity,colorbar:n.colorbar,line:s,editType:"calc"});o.color.editType=o.cmin.editType=o.cmax.editType="style";function y(g){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:a[g],editType:"plot"}}}B.exports={dimensions:i("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:r({},t.text,{}),hovertext:r({},t.hovertext,{}),hovertemplate:x(),xhoverformat:m("x"),yhoverformat:m("y"),marker:o,xaxes:y("x"),yaxes:y("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:t.selected.marker,editType:"calc"},unselected:{marker:t.unselected.marker,editType:"calc"},opacity:t.opacity}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/plot_template":555,"../../plots/cartesian/axis_format_attributes":569,"../../plots/cartesian/constants":573,"../../plots/template_attributes":642,"../scatter/attributes":936,"../scattergl/attributes":988}],1042:[function(e,B,V){var f=e("../../registry"),l=e("../../components/grid");B.exports={moduleType:"trace",name:"splom",categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../scatter/marker_colorbar"),calc:e("./calc"),plot:e("./plot"),hoverPoints:e("./hover").hoverPoints,selectPoints:e("./select"),editStyle:e("./edit_style"),meta:{}},f.register(l)},{"../../components/grid":411,"../../registry":647,"../scatter/marker_colorbar":954,"./attributes":1041,"./calc":1044,"./defaults":1045,"./edit_style":1046,"./hover":1048,"./plot":1050,"./select":1052}],1043:[function(e,B,V){var f=e("regl-line2d"),l=e("../../registry"),m=e("../../lib/prepare_regl"),x=e("../../plots/get_data").getModuleCalcData,t=e("../../plots/cartesian"),a=e("../../plots/cartesian/axis_ids").getFromId,i=e("../../plots/cartesian/axes").shouldShowZeroLine,r="splom",n={};function d(v){var _=v._fullLayout,u=l.getModule(r),T=x(v.calcdata,u)[0],c=m(v,["ANGLE_instanced_arrays","OES_element_index_uint"],n);!c||(_._hasOnlyLargeSploms&&y(v),u.plot(v,{},T))}function s(v){var _=v.calcdata,u=v._fullLayout;u._hasOnlyLargeSploms&&y(v);for(var T=0;T<_.length;T++){var c=_[T][0],A=c.trace,k=u._splomScenes[A.uid];A.type==="splom"&&k&&k.matrix&&o(v,A,k)}}function o(v,_,u){for(var T=u.matrixOptions.data.length,c=_._visibleDims,A=u.viewOpts.ranges=new Array(T),k=0;k<c.length;k++){var p=c[k],w=A[k]=new Array(4),h=a(v,_._diag[p][0]);h&&(w[0]=h.r2l(h.range[0]),w[2]=h.r2l(h.range[1]));var D=a(v,_._diag[p][1]);D&&(w[1]=D.r2l(D.range[0]),w[3]=D.r2l(D.range[1]))}u.selectBatch.length||u.unselectBatch.length?u.matrix.update({ranges:A},{ranges:A}):u.matrix.update({ranges:A})}function y(v){var _=v._fullLayout,u=_._glcanvas.data()[0].regl,T=_._splomGrid;T||(T=_._splomGrid=f(u)),T.update(g(v))}function g(v){var _=v._context.plotGlPixelRatio,u=v._fullLayout,T=u._size,c=[0,0,u.width*_,u.height*_],A={},k;function p(tt,Z,X,J,st,at){X*=_,J*=_,st*=_,at*=_;var lt=Z[tt+"color"],F=Z[tt+"width"],H=String(lt+F);H in A?A[H].data.push(NaN,NaN,X,J,st,at):A[H]={data:[X,J,st,at],join:"rect",thickness:F*_,color:lt,viewport:c,range:c,overlay:!1}}for(k in u._splomSubplots){var w=u._plots[k],h=w.xaxis,D=w.yaxis,S=h._gridVals,M=D._gridVals,L=h._offset,R=h._length,z=D._length,P=T.b+D.domain[0]*T.h,I=-D._m,U=-I*D.r2l(D.range[0],D.calendar),O,G;if(h.showgrid)for(k=0;k<S.length;k++)O=L+h.l2p(S[k].x),p("grid",h,O,P,O,P+z);if(D.showgrid)for(k=0;k<M.length;k++)G=P+U+I*M[k].x,p("grid",D,L,G,L+R,G);i(v,h,D)&&(O=L+h.l2p(0),p("zeroline",h,O,P,O,P+z)),i(v,D,h)&&(G=P+U+0,p("zeroline",D,L,G,L+R,G))}var $=[];for(k in A)$.push(A[k]);return $}function b(v,_,u,T){var c={},A;if(T._splomScenes){for(A=0;A<v.length;A++){var k=v[A];k.type==="splom"&&(c[k.uid]=1)}for(A=0;A<u.length;A++){var p=u[A];if(!c[p.uid]){var w=T._splomScenes[p.uid];w&&w.destroy&&w.destroy(),T._splomScenes[p.uid]=null,delete T._splomScenes[p.uid]}}}Object.keys(T._splomScenes||{}).length===0&&delete T._splomScenes,T._splomGrid&&!_._hasOnlyLargeSploms&&T._hasOnlyLargeSploms&&(T._splomGrid.destroy(),T._splomGrid=null,delete T._splomGrid),t.clean(v,_,u,T)}B.exports={name:r,attr:t.attr,attrRegex:t.attrRegex,layoutAttributes:t.layoutAttributes,supplyLayoutDefaults:t.supplyLayoutDefaults,drawFramework:t.drawFramework,plot:d,drag:s,updateGrid:y,clean:b,updateFx:t.updateFx,toSVG:t.toSVG,reglPrecompiled:n}},{"../../lib/prepare_regl":528,"../../plots/cartesian":578,"../../plots/cartesian/axes":566,"../../plots/cartesian/axis_ids":570,"../../plots/get_data":602,"../../registry":647,"regl-line2d":281}],1044:[function(e,B,V){var f=e("../../lib"),l=e("../../plots/cartesian/axis_ids"),m=e("../scatter/calc").calcMarkerSize,x=e("../scatter/calc").calcAxisExpansion,t=e("../scatter/colorscale_calc"),a=e("../scattergl/convert").markerSelection,i=e("../scattergl/convert").markerStyle,r=e("./scene_update"),n=e("../../constants/numerical").BADNUM,d=e("../scattergl/constants").TOO_MANY_POINTS;B.exports=function(o,y){var g=y.dimensions,b=y._length,v={},_=v.cdata=[],u=v.data=[],T=y._visibleDims=[],c,A,k,p,w;function h(R,z){for(var P=R.makeCalcdata({v:z.values,vcalendar:y.calendar},"v"),I=0;I<P.length;I++)P[I]=P[I]===n?NaN:P[I];_.push(P),u.push(R.type==="log"?f.simpleMap(P,R.c2l):P)}for(c=0;c<g.length;c++)if(k=g[c],k.visible){if(p=l.getFromId(o,y._diag[c][0]),w=l.getFromId(o,y._diag[c][1]),p&&w&&p.type!==w.type){f.log("Skipping splom dimension "+c+" with conflicting axis types");continue}p?(h(p,k),w&&w.type==="category"&&(w._categories=p._categories.slice())):h(w,k),T.push(c)}t(o,y),f.extendFlat(v,i(y));var D=_.length,S=D*b>d,M;for(S?M=v.sizeAvg||Math.max(v.size,3):M=m(y,b),A=0;A<T.length;A++)c=T[A],k=g[c],p=l.getFromId(o,y._diag[c][0])||{},w=l.getFromId(o,y._diag[c][1])||{},x(o,y,p,w,_[A],_[A],M);var L=r(o,y);return L.matrix||(L.matrix=!0),L.matrixOptions=v,L.selectedOptions=a(y,y.selected),L.unselectedOptions=a(y,y.unselected),[{x:!1,y:!1,t:{},trace:y}]}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/axis_ids":570,"../scatter/calc":937,"../scatter/colorscale_calc":939,"../scattergl/constants":991,"../scattergl/convert":992,"./scene_update":1051}],1045:[function(e,B,V){var f=e("../../lib"),l=e("../../plots/array_container_defaults"),m=e("./attributes"),x=e("../scatter/subtypes"),t=e("../scatter/marker_defaults"),a=e("../parcoords/merge_length"),i=e("../scattergl/helpers").isOpenSymbol;B.exports=function(s,o,y,g){function b(p,w){return f.coerce(s,o,m,p,w)}var v=l(s,o,{name:"dimensions",handleItemDefaults:r}),_=b("diagonal.visible"),u=b("showupperhalf"),T=b("showlowerhalf"),c=a(o,v,"values");if(!c||!_&&!u&&!T){o.visible=!1;return}b("text"),b("hovertext"),b("hovertemplate"),b("xhoverformat"),b("yhoverformat"),t(s,o,y,g,b);var A=i(o.marker.symbol),k=x.isBubble(o);b("marker.line.width",A||k?1:0),n(s,o,g,b),f.coerceSelectionMarkerOpacity(o,b)};function r(d,s){function o(g,b){return f.coerce(d,s,m.dimensions,g,b)}o("label");var y=o("values");y&&y.length?o("visible"):s.visible=!1,o("axis.type"),o("axis.matches")}function n(d,s,o,y){var g=s.dimensions,b=g.length,v=s.showupperhalf,_=s.showlowerhalf,u=s.diagonal.visible,T,c,A=new Array(b),k=new Array(b);for(T=0;T<b;T++){var p=T?T+1:"";A[T]="x"+p,k[T]="y"+p}var w=y("xaxes",A),h=y("yaxes",k),D=s._diag=new Array(b);s._xaxes={},s._yaxes={};var S=[],M=[];function L(tt,Z,X,J){if(!!tt){var st=tt.charAt(0),at=o._splomAxes[st];if(s["_"+st+"axes"][tt]=1,J.push(tt),!(tt in at)){var lt=at[tt]={};X&&(lt.label=X.label||"",X.visible&&X.axis&&(X.axis.type&&(lt.type=X.axis.type),X.axis.matches&&(lt.matches=Z)))}}}var R=!u&&!_,z=!u&&!v;for(s._axesDim={},T=0;T<b;T++){var P=g[T],I=T===0,U=T===b-1,O=I&&R||U&&z?void 0:w[T],G=I&&z||U&&R?void 0:h[T];L(O,G,P,S),L(G,O,P,M),D[T]=[O,G],s._axesDim[O]=T,s._axesDim[G]=T}for(T=0;T<S.length;T++)for(c=0;c<M.length;c++){var $=S[T]+M[c];(T>c&&v||T<c&&_||T===c&&(u||!_||!v))&&(o._splomSubplots[$]=1)}(!_||!u&&v&&_)&&(o._splomGridDflt.xside="bottom",o._splomGridDflt.yside="left")}},{"../../lib":515,"../../plots/array_container_defaults":561,"../parcoords/merge_length":907,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scattergl/helpers":996,"./attributes":1041}],1046:[function(e,B,V){var f=e("../../lib"),l=e("../scatter/colorscale_calc"),m=e("../scattergl/convert").markerStyle;B.exports=function(t,a){var i=a.trace,r=t._fullLayout._splomScenes[i.uid];if(r){l(t,i),f.extendFlat(r.matrixOptions,m(i));var n=f.extendFlat({},r.matrixOptions,r.viewOpts);r.matrix.update(n,null)}}},{"../../lib":515,"../scatter/colorscale_calc":939,"../scattergl/convert":992}],1047:[function(e,B,V){V.getDimIndex=function(l,m){for(var x=m._id,t=x.charAt(0),a={x:0,y:1}[t],i=l._visibleDims,r=0;r<i.length;r++){var n=i[r];if(l._diag[n][a]===x)return r}return!1}},{}],1048:[function(e,B,V){var f=e("./helpers"),l=e("../scattergl/hover").calcHover;function m(x,t,a){var i=x.cd,r=i[0].trace,n=x.scene,d=n.matrixOptions.cdata,s=x.xa,o=x.ya,y=s.c2p(t),g=o.c2p(a),b=x.distance,v=f.getDimIndex(r,s),_=f.getDimIndex(r,o);if(v===!1||_===!1)return[x];for(var u=d[v],T=d[_],c,A,k=b,p=0;p<u.length;p++){var w=u[p],h=T[p],D=s.c2p(w)-y,S=o.c2p(h)-g,M=Math.sqrt(D*D+S*S);M<k&&(k=A=M,c=p)}return x.index=c,x.distance=k,x.dxy=A,c===void 0?[x]:[l(x,u,T,r)]}B.exports={hoverPoints:m}},{"../scattergl/hover":997,"./helpers":1047}],1049:[function(e,B,V){var f=e("./base_index");f.basePlotModule=e("./base_plot"),B.exports=f},{"./base_index":1042,"./base_plot":1043}],1050:[function(e,B,V){var f=e("regl-splom"),l=e("../../lib"),m=e("../../plots/cartesian/axis_ids"),x=e("../../components/dragelement/helpers").selectMode;B.exports=function(i,r,n){if(!!n.length)for(var d=0;d<n.length;d++)t(i,n[d][0])};function t(a,i){var r=a._fullLayout,n=r._size,d=i.trace,s=i.t,o=r._splomScenes[d.uid],y=o.matrixOptions,g=y.cdata,b=r._glcanvas.data()[0].regl,v=r.dragmode,_,u,T,c,A;if(g.length!==0){y.lower=d.showupperhalf,y.upper=d.showlowerhalf,y.diagonal=d.diagonal.visible;var k=d._visibleDims,p=g.length,w=o.viewOpts={};for(w.ranges=new Array(p),w.domains=new Array(p),A=0;A<k.length;A++){T=k[A];var h=w.ranges[A]=new Array(4),D=w.domains[A]=new Array(4);_=m.getFromId(a,d._diag[T][0]),_&&(h[0]=_._rl[0],h[2]=_._rl[1],D[0]=_.domain[0],D[2]=_.domain[1]),u=m.getFromId(a,d._diag[T][1]),u&&(h[1]=u._rl[0],h[3]=u._rl[1],D[1]=u.domain[0],D[3]=u.domain[1])}var S=a._context.plotGlPixelRatio,M=n.l*S,L=n.b*S,R=n.w*S,z=n.h*S;w.viewport=[M,L,R+M,z+L],o.matrix===!0&&(o.matrix=f(b));var P=r.clickmode.indexOf("select")>-1,I=x(v)||!!d.selectedpoints||P,U=!0;if(I){var O=d._length;if(d.selectedpoints){o.selectBatch=d.selectedpoints;var G=d.selectedpoints,$={};for(T=0;T<G.length;T++)$[G[T]]=!0;var tt=[];for(T=0;T<O;T++)$[T]||tt.push(T);o.unselectBatch=tt}var Z=s.xpx=new Array(p),X=s.ypx=new Array(p);for(A=0;A<k.length;A++){if(T=k[A],_=m.getFromId(a,d._diag[T][0]),_)for(Z[A]=new Array(O),c=0;c<O;c++)Z[A][c]=_.c2p(g[A][c]);if(u=m.getFromId(a,d._diag[T][1]),u)for(X[A]=new Array(O),c=0;c<O;c++)X[A][c]=u.c2p(g[A][c])}if(o.selectBatch.length||o.unselectBatch.length){var J=l.extendFlat({},y,o.unselectedOptions,w),st=l.extendFlat({},y,o.selectedOptions,w);o.matrix.update(J,st),U=!1}}else s.xpx=s.ypx=null;if(U){var at=l.extendFlat({},y,w);o.matrix.update(at,null)}}}},{"../../components/dragelement/helpers":385,"../../lib":515,"../../plots/cartesian/axis_ids":570,"regl-splom":283}],1051:[function(e,B,V){var f=e("../../lib");B.exports=function(m,x){var t=m._fullLayout,a=x.uid,i=t._splomScenes;i||(i=t._splomScenes={});var r={dirty:!0,selectBatch:[],unselectBatch:[]},n={matrix:!1,selectBatch:[],unselectBatch:[]},d=i[x.uid];return d||(d=i[a]=f.extendFlat({},r,n),d.draw=function(){d.matrix&&d.matrix.draw&&(d.selectBatch.length||d.unselectBatch.length?d.matrix.draw(d.unselectBatch,d.selectBatch):d.matrix.draw()),d.dirty=!1},d.destroy=function(){d.matrix&&d.matrix.destroy&&d.matrix.destroy(),d.matrixOptions=null,d.selectBatch=null,d.unselectBatch=null,d=null}),d.dirty||f.extendFlat(d,r),d}},{"../../lib":515}],1052:[function(e,B,V){var f=e("../../lib"),l=f.pushUnique,m=e("../scatter/subtypes"),x=e("./helpers");B.exports=function(a,i){var r=a.cd,n=r[0].trace,d=r[0].t,s=a.scene,o=s.matrixOptions.cdata,y=a.xaxis,g=a.yaxis,b=[];if(!s)return b;var v=!m.hasMarkers(n)&&!m.hasText(n);if(n.visible!==!0||v)return b;var _=x.getDimIndex(n,y),u=x.getDimIndex(n,g);if(_===!1||u===!1)return b;var T=d.xpx[_],c=d.ypx[u],A=o[_],k=o[u],p=(a.scene.selectBatch||[]).slice(),w=[];if(i!==!1&&!i.degenerate)for(var h=0;h<A.length;h++)i.contains([T[h],c[h]],null,h,a)?(b.push({pointNumber:h,x:A[h],y:k[h]}),l(p,h)):p.indexOf(h)!==-1?l(p,h):w.push(h);var D=s.matrixOptions;return!p.length&&!w.length?s.matrix.update(D,null):!s.selectBatch.length&&!s.unselectBatch.length&&s.matrix.update(s.unselectedOptions,f.extendFlat({},D,s.selectedOptions,s.viewOpts)),s.selectBatch=p,s.unselectBatch=w,b}},{"../../lib":515,"../scatter/subtypes":961,"./helpers":1047}],1053:[function(e,B,V){var f=e("../../components/colorscale/attributes"),l=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,m=e("../../plots/template_attributes").hovertemplateAttrs,x=e("../mesh3d/attributes"),t=e("../../plots/attributes"),a=e("../../lib/extend").extendFlat,i={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:m({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:l("u",1),vhoverformat:l("v",1),whoverformat:l("w",1),xhoverformat:l("x"),yhoverformat:l("y"),zhoverformat:l("z"),showlegend:a({},t.showlegend,{dflt:!1})};a(i,f("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}));var r=["opacity","lightposition","lighting"];r.forEach(function(n){i[n]=x[n]}),i.hoverinfo=a({},t.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),i.transforms=void 0,B.exports=i},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../mesh3d/attributes":876}],1054:[function(e,B,V){var f=e("../../lib"),l=e("../../components/colorscale/calc");function m(i,r){r._len=Math.min(r.u.length,r.v.length,r.w.length,r.x.length,r.y.length,r.z.length),r._u=a(r.u,r._len),r._v=a(r.v,r._len),r._w=a(r.w,r._len),r._x=a(r.x,r._len),r._y=a(r.y,r._len),r._z=a(r.z,r._len);var n=x(r);r._gridFill=n.fill,r._Xs=n.Xs,r._Ys=n.Ys,r._Zs=n.Zs,r._len=n.len;var d=0,s,o,y;r.starts&&(s=a(r.starts.x||[]),o=a(r.starts.y||[]),y=a(r.starts.z||[]),d=Math.min(s.length,o.length,y.length)),r._startsX=s||[],r._startsY=o||[],r._startsZ=y||[];var g=0,b=1/0,v;for(v=0;v<r._len;v++){var _=r._u[v],u=r._v[v],T=r._w[v],c=Math.sqrt(_*_+u*u+T*T);g=Math.max(g,c),b=Math.min(b,c)}for(l(i,r,{vals:[b,g],containerStr:"",cLetter:"c"}),v=0;v<d;v++){var A=s[v];n.xMax=Math.max(n.xMax,A),n.xMin=Math.min(n.xMin,A);var k=o[v];n.yMax=Math.max(n.yMax,k),n.yMin=Math.min(n.yMin,k);var p=y[v];n.zMax=Math.max(n.zMax,p),n.zMin=Math.min(n.zMin,p)}r._slen=d,r._normMax=g,r._xbnds=[n.xMin,n.xMax],r._ybnds=[n.yMin,n.yMax],r._zbnds=[n.zMin,n.zMax]}function x(i){var r=i._x,n=i._y,d=i._z,s=i._len,o,y,g,b=-1/0,v=1/0,_=-1/0,u=1/0,T=-1/0,c=1/0,A="",k,p,w,h,D,S,M,L,R;for(s&&(h=r[0],S=n[0],L=d[0]),s>1&&(D=r[s-1],M=n[s-1],R=d[s-1]),o=0;o<s;o++)b=Math.max(b,r[o]),v=Math.min(v,r[o]),_=Math.max(_,n[o]),u=Math.min(u,n[o]),T=Math.max(T,d[o]),c=Math.min(c,d[o]),!k&&r[o]!==h&&(k=!0,A+="x"),!p&&n[o]!==S&&(p=!0,A+="y"),!w&&d[o]!==L&&(w=!0,A+="z");k||(A+="x"),p||(A+="y"),w||(A+="z");var z=t(i._x),P=t(i._y),I=t(i._z);A=A.replace("x",(h>D?"-":"+")+"x"),A=A.replace("y",(S>M?"-":"+")+"y"),A=A.replace("z",(L>R?"-":"+")+"z");var U=function(){s=0,z=[],P=[],I=[]};(!s||s<z.length*P.length*I.length)&&U();var O=function(ot){return ot==="x"?r:ot==="y"?n:d},G=function(ot){return ot==="x"?z:ot==="y"?P:I},$=function(ot){return ot[s-1]<ot[0]?-1:1},tt=O(A[1]),Z=O(A[3]),X=O(A[5]),J=G(A[1]).length,st=G(A[3]).length,at=G(A[5]).length,lt=!1,F=function(ot,ct,bt){return J*(st*ot+ct)+bt},H=$(O(A[1])),et=$(O(A[3])),q=$(O(A[5]));for(o=0;o<at-1;o++){for(y=0;y<st-1;y++){for(g=0;g<J-1;g++){var W=F(o,y,g),K=F(o,y,g+1),nt=F(o,y+1,g),it=F(o+1,y,g);if((!(tt[W]*H<tt[K]*H)||!(Z[W]*et<Z[nt]*et)||!(X[W]*q<X[it]*q))&&(lt=!0),lt)break}if(lt)break}if(lt)break}return lt&&(f.warn("Encountered arbitrary coordinates! Unable to input data grid."),U()),{xMin:v,yMin:u,zMin:c,xMax:b,yMax:_,zMax:T,Xs:z,Ys:P,Zs:I,len:s,fill:A}}function t(i){return f.distinctVals(i).vals}function a(i,r){if(r===void 0&&(r=i.length),f.isTypedArray(i))return i.subarray(0,r);for(var n=[],d=0;d<r;d++)n[d]=+i[d];return n}B.exports={calc:m,filter:a,processGrid:x}},{"../../components/colorscale/calc":375,"../../lib":515}],1055:[function(e,B,V){var f=e("../../../stackgl_modules").gl_streamtube3d,l=f.createTubeMesh,m=e("../../lib"),x=e("../../lib/gl_format_color").parseColorScale,t=e("../../components/colorscale").extractOpts,a=e("../../plots/gl3d/zip3"),i={xaxis:0,yaxis:1,zaxis:2};function r(g,b){this.scene=g,this.uid=b,this.mesh=null,this.data=null}var n=r.prototype;n.handlePick=function(g){var b=this.scene.fullSceneLayout,v=this.scene.dataScale;function _(c,A){var k=b[A],p=v[i[A]];return k.l2c(c)/p}if(g.object===this.mesh){var u=g.data.position,T=g.data.velocity;return g.traceCoordinate=[_(u[0],"xaxis"),_(u[1],"yaxis"),_(u[2],"zaxis"),_(T[0],"xaxis"),_(T[1],"yaxis"),_(T[2],"zaxis"),g.data.intensity*this.data._normMax,g.data.divergence],g.textLabel=this.data.hovertext||this.data.text,!0}};function d(g){var b=g.length,v;return b>2?v=g.slice(1,b-1):b===2?v=[(g[0]+g[1])/2]:v=g,v}function s(g){var b=g.length;return b===1?[.5,.5]:[g[1]-g[0],g[b-1]-g[b-2]]}function o(g,b){var v=g.fullSceneLayout,_=g.dataScale,u=b._len,T={};function c(st,at){var lt=v[at],F=_[i[at]];return m.simpleMap(st,function(H){return lt.d2l(H)*F})}if(T.vectors=a(c(b._u,"xaxis"),c(b._v,"yaxis"),c(b._w,"zaxis"),u),!u)return{positions:[],cells:[]};var A=c(b._Xs,"xaxis"),k=c(b._Ys,"yaxis"),p=c(b._Zs,"zaxis");T.meshgrid=[A,k,p],T.gridFill=b._gridFill;var w=b._slen;if(w)T.startingPositions=a(c(b._startsX,"xaxis"),c(b._startsY,"yaxis"),c(b._startsZ,"zaxis"));else{for(var h=k[0],D=d(A),S=d(p),M=new Array(D.length*S.length),L=0,R=0;R<D.length;R++)for(var z=0;z<S.length;z++)M[L++]=[D[R],h,S[z]];T.startingPositions=M}T.colormap=x(b),T.tubeSize=b.sizeref,T.maxLength=b.maxdisplayed;var P=c(b._xbnds,"xaxis"),I=c(b._ybnds,"yaxis"),U=c(b._zbnds,"zaxis"),O=s(A),G=s(k),$=s(p),tt=[[P[0]-O[0],I[0]-G[0],U[0]-$[0]],[P[1]+O[1],I[1]+G[1],U[1]+$[1]]],Z=f(T,tt),X=t(b);Z.vertexIntensityBounds=[X.min/b._normMax,X.max/b._normMax];var J=b.lightposition;return Z.lightPosition=[J.x,J.y,J.z],Z.ambient=b.lighting.ambient,Z.diffuse=b.lighting.diffuse,Z.specular=b.lighting.specular,Z.roughness=b.lighting.roughness,Z.fresnel=b.lighting.fresnel,Z.opacity=b.opacity,b._pad=Z.tubeScale*b.sizeref*2,Z}n.update=function(g){this.data=g;var b=o(this.scene,g);this.mesh.update(b)},n.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function y(g,b){var v=g.glplot.gl,_=o(g,b),u=l(v,_),T=new r(g,b.uid);return T.mesh=u,T.data=b,u._trace=T,g.glplot.add(u),T}B.exports=y},{"../../../stackgl_modules":1133,"../../components/colorscale":379,"../../lib":515,"../../lib/gl_format_color":511,"../../plots/gl3d/zip3":618}],1056:[function(e,B,V){var f=e("../../lib"),l=e("../../components/colorscale/defaults"),m=e("./attributes");B.exports=function(t,a,i,r){function n(v,_){return f.coerce(t,a,m,v,_)}var d=n("u"),s=n("v"),o=n("w"),y=n("x"),g=n("y"),b=n("z");if(!d||!d.length||!s||!s.length||!o||!o.length||!y||!y.length||!g||!g.length||!b||!b.length){a.visible=!1;return}n("starts.x"),n("starts.y"),n("starts.z"),n("maxdisplayed"),n("sizeref"),n("lighting.ambient"),n("lighting.diffuse"),n("lighting.specular"),n("lighting.roughness"),n("lighting.fresnel"),n("lightposition.x"),n("lightposition.y"),n("lightposition.z"),l(t,a,r,n,{prefix:"",cLetter:"c"}),n("text"),n("hovertext"),n("hovertemplate"),n("uhoverformat"),n("vhoverformat"),n("whoverformat"),n("xhoverformat"),n("yhoverformat"),n("zhoverformat"),a._length=null}},{"../../components/colorscale/defaults":377,"../../lib":515,"./attributes":1053}],1057:[function(e,B,V){B.exports={moduleType:"trace",name:"streamtube",basePlotModule:e("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:e("./calc").calc,plot:e("./convert"),eventData:function(f,l){return f.tubex=f.x,f.tubey=f.y,f.tubez=f.z,f.tubeu=l.traceCoordinate[3],f.tubev=l.traceCoordinate[4],f.tubew=l.traceCoordinate[5],f.norm=l.traceCoordinate[6],f.divergence=l.traceCoordinate[7],delete f.x,delete f.y,delete f.z,f},meta:{}}},{"../../plots/gl3d":607,"./attributes":1053,"./calc":1054,"./convert":1055,"./defaults":1056}],1058:[function(e,B,V){var f=e("../../plots/attributes"),l=e("../../plots/template_attributes").hovertemplateAttrs,m=e("../../plots/template_attributes").texttemplateAttrs,x=e("../../components/colorscale/attributes"),t=e("../../plots/domain").attributes,a=e("../pie/attributes"),i=e("./constants"),r=e("../../lib/extend").extendFlat;B.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:r({colors:{valType:"data_array",editType:"calc"},line:{color:r({},a.marker.line.color,{dflt:null}),width:r({},a.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},x("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:a.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot"},texttemplate:m({editType:"plot"},{keys:i.eventDataKeys.concat(["label","value"])}),hovertext:a.hovertext,hoverinfo:r({},f.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:l({},{keys:i.eventDataKeys}),textfont:a.textfont,insidetextorientation:a.insidetextorientation,insidetextfont:a.insidetextfont,outsidetextfont:r({},a.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:a.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:t({name:"sunburst",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/domain":593,"../../plots/template_attributes":642,"../pie/attributes":910,"./constants":1061}],1059:[function(e,B,V){var f=e("../../plots/plots");V.name="sunburst",V.plot=function(l,m,x,t){f.plotBasePlot(V.name,l,m,x,t)},V.clean=function(l,m,x,t){f.cleanBasePlot(V.name,l,m,x,t)}},{"../../plots/plots":628}],1060:[function(e,B,V){var f=e("d3-hierarchy"),l=e("fast-isnumeric"),m=e("../../lib"),x=e("../../components/colorscale").makeColorScaleFuncFromTrace,t=e("../pie/calc").makePullColorFn,a=e("../pie/calc").generateExtendedColors,i=e("../../components/colorscale").calc,r=e("../../constants/numerical").ALMOST_EQUAL,n={},d={},s={};V.calc=function(y,g){var b=y._fullLayout,v=g.ids,_=m.isArrayOrTypedArray(v),u=g.labels,T=g.parents,c=g.values,A=m.isArrayOrTypedArray(c),k=[],p={},w={},h=function(H,et){p[H]?p[H].push(et):p[H]=[et],w[et]=1},D=function(H){return H||typeof H=="number"},S=function(H){return!A||l(c[H])&&c[H]>=0},M,L,R;_?(M=Math.min(v.length,T.length),L=function(H){return D(v[H])&&S(H)},R=function(H){return String(v[H])}):(M=Math.min(u.length,T.length),L=function(H){return D(u[H])&&S(H)},R=function(H){return String(u[H])}),A&&(M=Math.min(M,c.length));for(var z=0;z<M;z++)if(L(z)){var P=R(z),I=D(T[z])?String(T[z]):"",U={i:z,id:P,pid:I,label:D(u[z])?String(u[z]):""};A&&(U.v=+c[z]),k.push(U),h(I,P)}if(p[""]){if(p[""].length>1){for(var $=m.randstr(),tt=0;tt<k.length;tt++)k[tt].pid===""&&(k[tt].pid=$);k.unshift({hasMultipleRoots:!0,id:$,pid:"",label:""})}}else{var O=[],G;for(G in p)w[G]||O.push(G);if(O.length===1)G=O[0],k.unshift({hasImpliedRoot:!0,id:G,pid:"",label:G});else return m.warn(["Multiple implied roots, cannot build",g.type,"hierarchy of",g.name+".","These roots include:",O.join(", ")].join(" "))}var Z;try{Z=f.stratify().id(function(H){return H.id}).parentId(function(H){return H.pid})(k)}catch(H){return m.warn(["Failed to build",g.type,"hierarchy of",g.name+".","Error:",H.message].join(" "))}var X=f.hierarchy(Z),J=!1;if(A)switch(g.branchvalues){case"remainder":X.sum(function(H){return H.data.v});break;case"total":X.each(function(H){var et=H.data.data,q=et.v;if(H.children){var W=H.children.reduce(function(K,nt){return K+nt.data.data.v},0);if((et.hasImpliedRoot||et.hasMultipleRoots)&&(q=W),q<W*r)return J=!0,m.warn(["Total value for node",H.data.data.id,"of",g.name,"is smaller than the sum of its children.",`
parent value =`,q,`
children sum =`,W].join(" "))}H.value=q});break}else o(X,g,{branches:g.count.indexOf("branches")!==-1,leaves:g.count.indexOf("leaves")!==-1});if(!J){g.sort&&X.sort(function(H,et){return et.value-H.value});var st,at,lt=g.marker.colors||[],F=!!lt.length;return g._hasColorscale?(F||(lt=A?g.values:g._values),i(y,g,{vals:lt,containerStr:"marker",cLetter:"c"}),at=x(g.marker)):st=t(b["_"+g.type+"colormap"]),X.each(function(H){var et=H.data.data;et.color=g._hasColorscale?at(lt[et.i]):st(lt[et.i],et.id)}),k[0].hierarchy=X,k}},V._runCrossTraceCalc=function(y,g){var b=g._fullLayout,v=g.calcdata,_=b[y+"colorway"],u=b["_"+y+"colormap"];b["extend"+y+"colors"]&&(_=a(_,y==="icicle"?s:y==="treemap"?d:n));var T=0,c;function A(h){var D=h.data.data,S=D.id;D.color===!1&&(u[S]?D.color=u[S]:h.parent?h.parent.parent?D.color=h.parent.data.data.color:(u[S]=D.color=_[T%_.length],T++):D.color=c)}for(var k=0;k<v.length;k++){var p=v[k],w=p[0];w.trace.type===y&&w.hierarchy&&(c=w.trace.root.color,w.hierarchy.each(A))}},V.crossTraceCalc=function(y){return V._runCrossTraceCalc("sunburst",y)};function o(y,g,b){var v=0,_=y.children;if(_){for(var u=_.length,T=0;T<u;T++)v+=o(_[T],g,b);b.branches&&v++}else b.leaves&&v++;return y.value=y.data.data.value=v,g._values||(g._values=[]),g._values[y.data.data.i]=v,v}},{"../../components/colorscale":379,"../../constants/numerical":491,"../../lib":515,"../pie/calc":912,"d3-hierarchy":115,"fast-isnumeric":190}],1061:[function(e,B,V){B.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}},{}],1062:[function(e,B,V){var f=e("../../lib"),l=e("./attributes"),m=e("../../plots/domain").defaults,x=e("../bar/defaults").handleText,t=e("../../components/colorscale"),a=t.hasColorscale,i=t.handleDefaults;B.exports=function(n,d,s,o){function y(A,k){return f.coerce(n,d,l,A,k)}var g=y("labels"),b=y("parents");if(!g||!g.length||!b||!b.length){d.visible=!1;return}var v=y("values");v&&v.length?y("branchvalues"):y("count"),y("level"),y("maxdepth");var _=y("marker.line.width");_&&y("marker.line.color",o.paper_bgcolor),y("marker.colors");var u=d._hasColorscale=a(n,"marker","colors")||(n.marker||{}).coloraxis;u&&i(n,d,o,y,{prefix:"marker.",cLetter:"c"}),y("leaf.opacity",u?1:.7);var T=y("text");y("texttemplate"),d.texttemplate||y("textinfo",Array.isArray(T)?"text+label":"label"),y("hovertext"),y("hovertemplate");var c="auto";x(n,d,o,y,c,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),y("insidetextorientation"),y("sort"),y("rotation"),y("root.color"),m(d,o,y),d._length=null}},{"../../components/colorscale":379,"../../lib":515,"../../plots/domain":593,"../bar/defaults":661,"./attributes":1058}],1063:[function(e,B,V){var f=e("@plotly/d3"),l=e("../../registry"),m=e("../../components/fx/helpers").appendArrayPointValue,x=e("../../components/fx"),t=e("../../lib"),a=e("../../lib/events"),i=e("./helpers"),r=e("../pie/helpers"),n=r.formatPieValue;B.exports=function(o,y,g,b,v){var _=b[0],u=_.trace,T=_.hierarchy,c=u.type==="sunburst",A=u.type==="treemap"||u.type==="icicle";"_hasHoverLabel"in u||(u._hasHoverLabel=!1),"_hasHoverEvent"in u||(u._hasHoverEvent=!1);var k=function(h){var D=g._fullLayout;if(!(g._dragging||D.hovermode===!1)){var S=g._fullData[u.index],M=h.data.data,L=M.i,R=i.isHierarchyRoot(h),z=i.getParent(T,h),P=i.getValue(h),I=function(K){return t.castOption(S,L,K)},U=I("hovertemplate"),O=x.castHoverinfo(S,D,L),G=D.separators,$;if(U||O&&O!=="none"&&O!=="skip"){var tt,Z;c&&(tt=_.cx+h.pxmid[0]*(1-h.rInscribed),Z=_.cy+h.pxmid[1]*(1-h.rInscribed)),A&&(tt=h._hoverX,Z=h._hoverY);var X={},J=[],st=[],at=function(K){return J.indexOf(K)!==-1};O&&(J=O==="all"?S._module.attributes.hoverinfo.flags:O.split("+")),X.label=M.label,at("label")&&X.label&&st.push(X.label),M.hasOwnProperty("v")&&(X.value=M.v,X.valueLabel=n(X.value,G),at("value")&&st.push(X.valueLabel)),X.currentPath=h.currentPath=i.getPath(h.data),at("current path")&&!R&&st.push(X.currentPath);var lt,F=[],H=function(){F.indexOf(lt)===-1&&(st.push(lt),F.push(lt))};X.percentParent=h.percentParent=P/i.getValue(z),X.parent=h.parentString=i.getPtLabel(z),at("percent parent")&&(lt=i.formatPercent(X.percentParent,G)+" of "+X.parent,H()),X.percentEntry=h.percentEntry=P/i.getValue(y),X.entry=h.entry=i.getPtLabel(y),at("percent entry")&&!R&&!h.onPathbar&&(lt=i.formatPercent(X.percentEntry,G)+" of "+X.entry,H()),X.percentRoot=h.percentRoot=P/i.getValue(T),X.root=h.root=i.getPtLabel(T),at("percent root")&&!R&&(lt=i.formatPercent(X.percentRoot,G)+" of "+X.root,H()),X.text=I("hovertext")||I("text"),at("text")&&(lt=X.text,t.isValidTextValue(lt)&&st.push(lt)),$=[d(h,S,v.eventDataKeys)];var et={trace:S,y:Z,_x0:h._x0,_x1:h._x1,_y0:h._y0,_y1:h._y1,text:st.join("<br>"),name:U||at("name")?S.name:void 0,color:I("hoverlabel.bgcolor")||M.color,borderColor:I("hoverlabel.bordercolor"),fontFamily:I("hoverlabel.font.family"),fontSize:I("hoverlabel.font.size"),fontColor:I("hoverlabel.font.color"),nameLength:I("hoverlabel.namelength"),textAlign:I("hoverlabel.align"),hovertemplate:U,hovertemplateLabels:X,eventData:$};c&&(et.x0=tt-h.rInscribed*h.rpx1,et.x1=tt+h.rInscribed*h.rpx1,et.idealAlign=h.pxmid[0]<0?"left":"right"),A&&(et.x=tt,et.idealAlign=tt<0?"left":"right");var q=[];x.loneHover(et,{container:D._hoverlayer.node(),outerContainer:D._paper.node(),gd:g,inOut_bbox:q}),$[0].bbox=q[0],u._hasHoverLabel=!0}if(A){var W=o.select("path.surface");v.styleOne(W,h,S,{hovered:!0})}u._hasHoverEvent=!0,g.emit("plotly_hover",{points:$||[d(h,S,v.eventDataKeys)],event:f.event})}},p=function(h){var D=g._fullLayout,S=g._fullData[u.index],M=f.select(this).datum();if(u._hasHoverEvent&&(h.originalEvent=f.event,g.emit("plotly_unhover",{points:[d(M,S,v.eventDataKeys)],event:f.event}),u._hasHoverEvent=!1),u._hasHoverLabel&&(x.loneUnhover(D._hoverlayer.node()),u._hasHoverLabel=!1),A){var L=o.select("path.surface");v.styleOne(L,M,S,{hovered:!1})}},w=function(h){var D=g._fullLayout,S=g._fullData[u.index],M=c&&(i.isHierarchyRoot(h)||i.isLeaf(h)),L=i.getPtId(h),R=i.isEntry(h)?i.findEntryWithChild(T,L):i.findEntryWithLevel(T,L),z=i.getPtId(R),P={points:[d(h,S,v.eventDataKeys)],event:f.event};M||(P.nextLevel=z);var I=a.triggerHandler(g,"plotly_"+u.type+"click",P);if(I!==!1&&D.hovermode&&(g._hoverdata=[d(h,S,v.eventDataKeys)],x.click(g,f.event)),!M&&I!==!1&&!g._dragging&&!g._transitioning){l.call("_storeDirectGUIEdit",S,D._tracePreGUI[S.uid],{level:S.level});var U={data:[{level:z}],traces:[u.index]},O={frame:{redraw:!1,duration:v.transitionTime},transition:{duration:v.transitionTime,easing:v.transitionEasing},mode:"immediate",fromcurrent:!0};x.loneUnhover(D._hoverlayer.node()),l.call("animate",g,U,O)}};o.on("mouseover",k),o.on("mouseout",p),o.on("click",w)};function d(s,o,y){for(var g=s.data.data,b={curveNumber:o.index,pointNumber:g.i,data:o._input,fullData:o},v=0;v<y.length;v++){var _=y[v];_ in s&&(b[_]=s[_])}return"parentString"in s&&!i.isHierarchyRoot(s)&&(b.parent=s.parentString),m(b,o,g.i),b}},{"../../components/fx":407,"../../components/fx/helpers":403,"../../lib":515,"../../lib/events":504,"../../registry":647,"../pie/helpers":915,"./helpers":1064,"@plotly/d3":58}],1064:[function(e,B,V){var f=e("../../lib"),l=e("../../components/color"),m=e("../../lib/setcursor"),x=e("../pie/helpers");V.findEntryWithLevel=function(r,n){var d;return n&&r.eachAfter(function(s){if(V.getPtId(s)===n)return d=s.copy()}),d||r},V.findEntryWithChild=function(r,n){var d;return r.eachAfter(function(s){for(var o=s.children||[],y=0;y<o.length;y++){var g=o[y];if(V.getPtId(g)===n)return d=s.copy()}}),d||r},V.isEntry=function(r){return!r.parent},V.isLeaf=function(r){return!r.children},V.getPtId=function(r){return r.data.data.id},V.getPtLabel=function(r){return r.data.data.label},V.getValue=function(r){return r.value},V.isHierarchyRoot=function(r){return i(r)===""},V.setSliceCursor=function(r,n,d){var s=d.isTransitioning;if(!s){var o=r.datum();s=d.hideOnRoot&&V.isHierarchyRoot(o)||d.hideOnLeaves&&V.isLeaf(o)}m(r,s?null:"pointer")};function t(r,n,d){return{color:V.getOutsideTextFontKey("color",r,n,d),family:V.getOutsideTextFontKey("family",r,n,d),size:V.getOutsideTextFontKey("size",r,n,d)}}function a(r,n,d,s){var o=(s||{}).onPathbar,y=n.data.data,g=y.i,b=f.castOption(r,g,(o?"pathbar.textfont":"insidetextfont")+".color");return!b&&r._input.textfont&&(b=f.castOption(r._input,g,"textfont.color")),{color:b||l.contrast(y.color),family:V.getInsideTextFontKey("family",r,n,d,s),size:V.getInsideTextFontKey("size",r,n,d,s)}}V.getInsideTextFontKey=function(r,n,d,s,o){var y=(o||{}).onPathbar,g=y?"pathbar.textfont":"insidetextfont",b=d.data.data.i;return f.castOption(n,b,g+"."+r)||f.castOption(n,b,"textfont."+r)||s.size},V.getOutsideTextFontKey=function(r,n,d,s){var o=d.data.data.i;return f.castOption(n,o,"outsidetextfont."+r)||f.castOption(n,o,"textfont."+r)||s.size},V.isOutsideText=function(r,n){return!r._hasColorscale&&V.isHierarchyRoot(n)},V.determineTextFont=function(r,n,d,s){return V.isOutsideText(r,n)?t(r,n,d):a(r,n,d,s)},V.hasTransition=function(r){return!!(r&&r.duration>0)},V.getMaxDepth=function(r){return r.maxdepth>=0?r.maxdepth:1/0},V.isHeader=function(r,n){return!(V.isLeaf(r)||r.depth===n._maxDepth-1)};function i(r){return r.data.data.pid}V.getParent=function(r,n){return V.findEntryWithLevel(r,i(n))},V.listPath=function(r,n){var d=r.parent;if(!d)return[];var s=n?[d.data[n]]:[d];return V.listPath(d,n).concat(s)},V.getPath=function(r){return V.listPath(r,"label").join("/")+"/"},V.formatValue=x.formatPieValue,V.formatPercent=function(r,n){var d=f.formatPercent(r,0);return d==="0%"&&(d=x.formatPiePercent(r,n)),d}},{"../../components/color":367,"../../lib":515,"../../lib/setcursor":536,"../pie/helpers":915}],1065:[function(e,B,V){B.exports={moduleType:"trace",name:"sunburst",basePlotModule:e("./base_plot"),categories:[],animatable:!0,attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults"),supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc").calc,crossTraceCalc:e("./calc").crossTraceCalc,plot:e("./plot").plot,style:e("./style").style,colorbar:e("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":954,"./attributes":1058,"./base_plot":1059,"./calc":1060,"./defaults":1062,"./layout_attributes":1066,"./layout_defaults":1067,"./plot":1068,"./style":1069}],1066:[function(e,B,V){B.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1067:[function(e,B,V){var f=e("../../lib"),l=e("./layout_attributes");B.exports=function(x,t){function a(i,r){return f.coerce(x,t,l,i,r)}a("sunburstcolorway",t.colorway),a("extendsunburstcolors")}},{"../../lib":515,"./layout_attributes":1066}],1068:[function(e,B,V){var f=e("@plotly/d3"),l=e("d3-hierarchy"),m=e("d3-interpolate").interpolate,x=e("../../components/drawing"),t=e("../../lib"),a=e("../../lib/svg_text_utils"),i=e("../bar/uniform_text"),r=i.recordMinTextSize,n=i.clearMinTextSize,d=e("../pie/plot"),s=e("../pie/helpers").getRotationAngle,o=d.computeTransform,y=d.transformInsideText,g=e("./style").styleOne,b=e("../bar/style").resizeText,v=e("./fx"),_=e("./constants"),u=e("./helpers");V.plot=function(w,h,D,S){var M=w._fullLayout,L=M._sunburstlayer,R,z,P=!D,I=!M.uniformtext.mode&&u.hasTransition(D);if(n("sunburst",M),R=L.selectAll("g.trace.sunburst").data(h,function(O){return O[0].trace.uid}),R.enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),R.order(),I){S&&(z=S());var U=f.transition().duration(D.duration).ease(D.easing).each("end",function(){z&&z()}).each("interrupt",function(){z&&z()});U.each(function(){L.selectAll("g.trace").each(function(O){T(w,O,this,D)})})}else R.each(function(O){T(w,O,this,D)}),M.uniformtext.mode&&b(w,M._sunburstlayer.selectAll(".trace"),"sunburst");P&&R.exit().remove()};function T(w,h,D,S){var M=w._fullLayout,L=!M.uniformtext.mode&&u.hasTransition(S),R=f.select(D),z=R.selectAll("g.slice"),P=h[0],I=P.trace,U=P.hierarchy,O=u.findEntryWithLevel(U,I.level),G=u.getMaxDepth(I),$=M._size,tt=I.domain,Z=$.w*(tt.x[1]-tt.x[0]),X=$.h*(tt.y[1]-tt.y[0]),J=.5*Math.min(Z,X),st=P.cx=$.l+$.w*(tt.x[1]+tt.x[0])/2,at=P.cy=$.t+$.h*(1-tt.y[0])-X/2;if(!O)return z.remove();var lt=null,F={};L&&z.each(function(wt){F[u.getPtId(wt)]={rpx0:wt.rpx0,rpx1:wt.rpx1,x0:wt.x0,x1:wt.x1,transform:wt.transform},!lt&&u.isEntry(wt)&&(lt=wt)});var H=c(O).descendants(),et=O.height+1,q=0,W=G;P.hasMultipleRoots&&u.isHierarchyRoot(O)&&(H=H.slice(1),et-=1,q=1,W+=1),H=H.filter(function(wt){return wt.y1<=W});var K=s(I.rotation);K&&H.forEach(function(wt){wt.x0+=K,wt.x1+=K});var nt=Math.min(et,G),it=function(wt){return(wt-q)/nt*J},ot=function(wt,It){return[wt*Math.cos(It),-wt*Math.sin(It)]},ct=function(wt){return t.pathAnnulus(wt.rpx0,wt.rpx1,wt.x0,wt.x1,st,at)},bt=function(wt){return st+k(wt)[0]*(wt.transform.rCenter||0)+(wt.transform.x||0)},ut=function(wt){return at+k(wt)[1]*(wt.transform.rCenter||0)+(wt.transform.y||0)};z=z.data(H,u.getPtId),z.enter().append("g").classed("slice",!0),L?z.exit().transition().each(function(){var wt=f.select(this),It=wt.select("path.surface");It.transition().attrTween("d",function(Qt){var Nt=kt(Qt);return function(Pt){return ct(Nt(Pt))}});var $t=wt.select("g.slicetext");$t.attr("opacity",0)}).remove():z.exit().remove(),z.order();var pt=null;if(L&&lt){var yt=u.getPtId(lt);z.each(function(wt){pt===null&&u.getPtId(wt)===yt&&(pt=wt.x1)})}var Tt=z;L&&(Tt=Tt.transition().each("end",function(){var wt=f.select(this);u.setSliceCursor(wt,w,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),Tt.each(function(wt){var It=f.select(this),$t=t.ensureSingle(It,"path","surface",function(Re){Re.style("pointer-events","all")});wt.rpx0=it(wt.y0),wt.rpx1=it(wt.y1),wt.xmid=(wt.x0+wt.x1)/2,wt.pxmid=ot(wt.rpx1,wt.xmid),wt.midangle=-(wt.xmid-Math.PI/2),wt.startangle=-(wt.x0-Math.PI/2),wt.stopangle=-(wt.x1-Math.PI/2),wt.halfangle=.5*Math.min(t.angleDelta(wt.x0,wt.x1)||Math.PI,Math.PI),wt.ring=1-wt.rpx0/wt.rpx1,wt.rInscribed=A(wt),L?$t.transition().attrTween("d",function(Re){var ir=zt(Re);return function(Ie){return ct(ir(Ie))}}):$t.attr("d",ct),It.call(v,O,w,h,{eventDataKeys:_.eventDataKeys,transitionTime:_.CLICK_TRANSITION_TIME,transitionEasing:_.CLICK_TRANSITION_EASING}).call(u.setSliceCursor,w,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:w._transitioning}),$t.call(g,wt,I);var Qt=t.ensureSingle(It,"g","slicetext"),Nt=t.ensureSingle(Qt,"text","",function(Re){Re.attr("data-notex",1)}),Pt=t.ensureUniformFontSize(w,u.determineTextFont(I,wt,M.font));Nt.text(V.formatSliceLabel(wt,O,I,h,M)).classed("slicetext",!0).attr("text-anchor","middle").call(x.font,Pt).call(a.convertToTspans,w);var Yt=x.bBox(Nt.node());wt.transform=y(Yt,wt,P),wt.transform.targetX=bt(wt),wt.transform.targetY=ut(wt);var ve=function(Re,ir){var Ie=Re.transform;return o(Ie,ir),Ie.fontSize=Pt.size,r(I.type,Ie,M),t.getTextTransform(Ie)};L?Nt.transition().attrTween("transform",function(Re){var ir=Rt(Re);return function(Ie){return ve(ir(Ie),Yt)}}):Nt.attr("transform",ve(wt,Yt))});function kt(wt){var It=u.getPtId(wt),$t=F[It],Qt=F[u.getPtId(O)],Nt;if(Qt){var Pt=(wt.x1>Qt.x1?2*Math.PI:0)+K;Nt=wt.rpx1<Qt.rpx1?{x0:wt.x0,x1:wt.x1,rpx0:0,rpx1:0}:{x0:Pt,x1:Pt,rpx0:wt.rpx0,rpx1:wt.rpx1}}else{var Yt,ve=u.getPtId(wt.parent);z.each(function(Ye){if(u.getPtId(Ye)===ve)return Yt=Ye});var Re=Yt.children,ir;Re.forEach(function(Ye,ze){if(u.getPtId(Ye)===It)return ir=ze});var Ie=Re.length,Be=m(Yt.x0,Yt.x1);Nt={rpx0:J,rpx1:J,x0:Be(ir/Ie),x1:Be((ir+1)/Ie)}}return m($t,Nt)}function zt(wt){var It=F[u.getPtId(wt)],$t,Qt={x0:wt.x0,x1:wt.x1,rpx0:wt.rpx0,rpx1:wt.rpx1};if(It)$t=It;else if(lt)if(wt.parent)if(pt){var Nt=(wt.x1>pt?2*Math.PI:0)+K;$t={x0:Nt,x1:Nt}}else $t={rpx0:J,rpx1:J},t.extendFlat($t,Gt(wt));else $t={rpx0:0,rpx1:0};else $t={x0:K,x1:K};return m($t,Qt)}function Rt(wt){var It=F[u.getPtId(wt)],$t,Qt=wt.transform;if(It)$t=It;else if($t={rpx1:wt.rpx1,transform:{textPosAngle:Qt.textPosAngle,scale:0,rotate:Qt.rotate,rCenter:Qt.rCenter,x:Qt.x,y:Qt.y}},lt)if(wt.parent)if(pt){var Nt=wt.x1>pt?2*Math.PI:0;$t.x0=$t.x1=Nt}else t.extendFlat($t,Gt(wt));else $t.x0=$t.x1=K;else $t.x0=$t.x1=K;var Pt=m($t.transform.textPosAngle,wt.transform.textPosAngle),Yt=m($t.rpx1,wt.rpx1),ve=m($t.x0,wt.x0),Re=m($t.x1,wt.x1),ir=m($t.transform.scale,Qt.scale),Ie=m($t.transform.rotate,Qt.rotate),Be=Qt.rCenter===0?3:$t.transform.rCenter===0?1/3:1,Ye=m($t.transform.rCenter,Qt.rCenter),ze=function(Ee){return Ye(Math.pow(Ee,Be))};return function(Ee){var Wt=Yt(Ee),ee=ve(Ee),Xt=Re(Ee),St=ze(Ee),Vt=ot(Wt,(ee+Xt)/2),Zt=Pt(Ee),qt={pxmid:Vt,rpx1:Wt,transform:{textPosAngle:Zt,rCenter:St,x:Qt.x,y:Qt.y}};return r(I.type,Qt,M),{transform:{targetX:bt(qt),targetY:ut(qt),scale:ir(Ee),rotate:Ie(Ee),rCenter:St}}}}function Gt(wt){var It=wt.parent,$t=F[u.getPtId(It)],Qt={};if($t){var Nt=It.children,Pt=Nt.indexOf(wt),Yt=Nt.length,ve=m($t.x0,$t.x1);Qt.x0=ve(Pt/Yt),Qt.x1=ve(Pt/Yt)}else Qt.x0=Qt.x1=0;return Qt}}function c(w){return l.partition().size([2*Math.PI,w.height+1])(w)}V.formatSliceLabel=function(w,h,D,S,M){var L=D.texttemplate,R=D.textinfo;if(!L&&(!R||R==="none"))return"";var z=M.separators,P=S[0],I=w.data.data,U=P.hierarchy,O=u.isHierarchyRoot(w),G=u.getParent(U,w),$=u.getValue(w);if(!L){var tt=R.split("+"),Z=function(W){return tt.indexOf(W)!==-1},X=[],J;if(Z("label")&&I.label&&X.push(I.label),I.hasOwnProperty("v")&&Z("value")&&X.push(u.formatValue(I.v,z)),!O){Z("current path")&&X.push(u.getPath(w.data));var st=0;Z("percent parent")&&st++,Z("percent entry")&&st++,Z("percent root")&&st++;var at=st>1;if(st){var lt,F=function(W){J=u.formatPercent(lt,z),at&&(J+=" of "+W),X.push(J)};Z("percent parent")&&!O&&(lt=$/u.getValue(G),F("parent")),Z("percent entry")&&(lt=$/u.getValue(h),F("entry")),Z("percent root")&&(lt=$/u.getValue(U),F("root"))}}return Z("text")&&(J=t.castOption(D,I.i,"text"),t.isValidTextValue(J)&&X.push(J)),X.join("<br>")}var H=t.castOption(D,I.i,"texttemplate");if(!H)return"";var et={};I.label&&(et.label=I.label),I.hasOwnProperty("v")&&(et.value=I.v,et.valueLabel=u.formatValue(I.v,z)),et.currentPath=u.getPath(w.data),O||(et.percentParent=$/u.getValue(G),et.percentParentLabel=u.formatPercent(et.percentParent,z),et.parent=u.getPtLabel(G)),et.percentEntry=$/u.getValue(h),et.percentEntryLabel=u.formatPercent(et.percentEntry,z),et.entry=u.getPtLabel(h),et.percentRoot=$/u.getValue(U),et.percentRootLabel=u.formatPercent(et.percentRoot,z),et.root=u.getPtLabel(U),I.hasOwnProperty("color")&&(et.color=I.color);var q=t.castOption(D,I.i,"text");return(t.isValidTextValue(q)||q==="")&&(et.text=q),et.customdata=t.castOption(D,I.i,"customdata"),t.texttemplateString(H,et,M._d3locale,et,D._meta||{})};function A(w){return w.rpx0===0&&t.isFullCircle([w.x0,w.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(w.halfangle)),w.ring/2))}function k(w){return p(w.rpx1,w.transform.textPosAngle)}function p(w,h){return[w*Math.sin(h),-w*Math.cos(h)]}},{"../../components/drawing":389,"../../lib":515,"../../lib/svg_text_utils":541,"../bar/style":671,"../bar/uniform_text":673,"../pie/helpers":915,"../pie/plot":919,"./constants":1061,"./fx":1063,"./helpers":1064,"./style":1069,"@plotly/d3":58,"d3-hierarchy":115,"d3-interpolate":116}],1069:[function(e,B,V){var f=e("@plotly/d3"),l=e("../../components/color"),m=e("../../lib"),x=e("../bar/uniform_text").resizeText;function t(i){var r=i._fullLayout._sunburstlayer.selectAll(".trace");x(i,r,"sunburst"),r.each(function(n){var d=f.select(this),s=n[0],o=s.trace;d.style("opacity",o.opacity),d.selectAll("path.surface").each(function(y){f.select(this).call(a,y,o)})})}function a(i,r,n){var d=r.data.data,s=!r.children,o=d.i,y=m.castOption(n,o,"marker.line.color")||l.defaultLine,g=m.castOption(n,o,"marker.line.width")||0;i.style("stroke-width",g).call(l.fill,d.color).call(l.stroke,y).style("opacity",s?n.leaf.opacity:null)}B.exports={style:t,styleOne:a}},{"../../components/color":367,"../../lib":515,"../bar/uniform_text":673,"@plotly/d3":58}],1070:[function(e,B,V){var f=e("../../components/color"),l=e("../../components/colorscale/attributes"),m=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,x=e("../../plots/template_attributes").hovertemplateAttrs,t=e("../../plots/attributes"),a=e("../../lib/extend").extendFlat,i=e("../../plot_api/edit_types").overrideAll;function r(s){return{valType:"boolean",dflt:!1}}function n(s){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:r(),y:r(),z:r()},color:{valType:"color",dflt:f.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:f.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var d=B.exports=i(a({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:x(),xhoverformat:m("x"),yhoverformat:m("y"),zhoverformat:m("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},l("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:n(),y:n(),z:n()},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:a({},l.zauto,{}),zmin:a({},l.zmin,{}),zmax:a({},l.zmax,{})},hoverinfo:a({},t.hoverinfo),showlegend:a({},t.showlegend,{dflt:!1})}),"calc","nested");d.x.editType=d.y.editType=d.z.editType="calc+clearAxisTypes",d.transforms=void 0},{"../../components/color":367,"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642}],1071:[function(e,B,V){var f=e("../../components/colorscale/calc");B.exports=function(m,x){x.surfacecolor?f(m,x,{vals:x.surfacecolor,containerStr:"",cLetter:"c"}):f(m,x,{vals:x.z,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":375}],1072:[function(e,B,V){var f=e("../../../stackgl_modules").gl_surface3d,l=e("../../../stackgl_modules").ndarray,m=e("../../../stackgl_modules").ndarray_linear_interpolate.d2,x=e("../heatmap/interp2d"),t=e("../heatmap/find_empties"),a=e("../../lib").isArrayOrTypedArray,i=e("../../lib/gl_format_color").parseColorScale,r=e("../../lib/str2rgbarray"),n=e("../../components/colorscale").extractOpts;function d(S,M,L){this.scene=S,this.uid=L,this.surface=M,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var s=d.prototype;s.getXat=function(S,M,L,R){var z=a(this.data.x)?a(this.data.x[0])?this.data.x[M][S]:this.data.x[S]:S;return L===void 0?z:R.d2l(z,0,L)},s.getYat=function(S,M,L,R){var z=a(this.data.y)?a(this.data.y[0])?this.data.y[M][S]:this.data.y[M]:M;return L===void 0?z:R.d2l(z,0,L)},s.getZat=function(S,M,L,R){var z=this.data.z[M][S];return z===null&&this.data.connectgaps&&this.data._interpolatedZ&&(z=this.data._interpolatedZ[M][S]),L===void 0?z:R.d2l(z,0,L)},s.handlePick=function(S){if(S.object===this.surface){var M=(S.data.index[0]-1)/this.dataScaleX-1,L=(S.data.index[1]-1)/this.dataScaleY-1,R=Math.max(Math.min(Math.round(M),this.data.z[0].length-1),0),z=Math.max(Math.min(Math.round(L),this.data._ylength-1),0);S.index=[R,z],S.traceCoordinate=[this.getXat(R,z),this.getYat(R,z),this.getZat(R,z)],S.dataCoordinate=[this.getXat(R,z,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(R,z,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(R,z,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var P=0;P<3;P++){var I=S.dataCoordinate[P];I!=null&&(S.dataCoordinate[P]*=this.scene.dataScale[P])}var U=this.data.hovertext||this.data.text;return Array.isArray(U)&&U[z]&&U[z][R]!==void 0?S.textLabel=U[z][R]:U?S.textLabel=U:S.textLabel="",S.data.dataCoordinate=S.dataCoordinate.slice(),this.surface.highlight(S.data),this.scene.glplot.spikes.position=S.dataCoordinate,!0}};function o(S){var M=S[0].rgb,L=S[S.length-1].rgb;return M[0]===L[0]&&M[1]===L[1]&&M[2]===L[2]&&M[3]===L[3]}var y=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function g(S,M){if(S<M)return 0;for(var L=0;Math.floor(S%M)===0;)S/=M,L++;return L}function b(S){for(var M=[],L=0;L<y.length;L++){var R=y[L];M.push(g(S,R))}return M}function v(S){for(var M=b(S),L=S,R=0;R<y.length;R++)if(M[R]>0){L=y[R];break}return L}function _(S,M){if(!(S<1||M<1)){for(var L=b(S),R=b(M),z=1,P=0;P<y.length;P++)z*=Math.pow(y[P],Math.max(L[P],R[P]));return z}}function u(S){if(S.length!==0){for(var M=1,L=0;L<S.length;L++)M=_(M,S[L]);return M}}s.calcXnums=function(S){var M,L=[];for(M=1;M<S;M++){var R=this.getXat(M-1,0),z=this.getXat(M,0);z!==R&&R!==void 0&&R!==null&&z!==void 0&&z!==null?L[M-1]=Math.abs(z-R):L[M-1]=0}var P=0;for(M=1;M<S;M++)P+=L[M-1];for(M=1;M<S;M++)L[M-1]===0?L[M-1]=1:L[M-1]=Math.round(P/L[M-1]);return L},s.calcYnums=function(S){var M,L=[];for(M=1;M<S;M++){var R=this.getYat(0,M-1),z=this.getYat(0,M);z!==R&&R!==void 0&&R!==null&&z!==void 0&&z!==null?L[M-1]=Math.abs(z-R):L[M-1]=0}var P=0;for(M=1;M<S;M++)P+=L[M-1];for(M=1;M<S;M++)L[M-1]===0?L[M-1]=1:L[M-1]=Math.round(P/L[M-1]);return L};var T=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],c=T[9],A=T[13];s.estimateScale=function(S,M){for(var L=M===0?this.calcXnums(S):this.calcYnums(S),R=1+u(L);R<c;)R*=2;for(;R>A;)R--,R/=v(R),R++,R<c&&(R=A);var z=Math.round(R/S);return z>1?z:1};function k(S,M,L){var R=L[8]+L[2]*M[0]+L[5]*M[1];return S[0]=(L[6]+L[0]*M[0]+L[3]*M[1])/R,S[1]=(L[7]+L[1]*M[0]+L[4]*M[1])/R,S}function p(S,M,L){return w(S,M,k,L),S}function w(S,M,L,R){for(var z=[0,0],P=S.shape[0],I=S.shape[1],U=0;U<P;U++)for(var O=0;O<I;O++)L(z,[U,O],R),S.set(U,O,m(M,z[0],z[1]));return S}s.refineCoords=function(S){for(var M=this.dataScaleX,L=this.dataScaleY,R=S[0].shape[0],z=S[0].shape[1],P=Math.floor(S[0].shape[0]*M+1)|0,I=Math.floor(S[0].shape[1]*L+1)|0,U=1+R+1,O=1+z+1,G=l(new Float32Array(U*O),[U,O]),$=[1/M,0,0,0,1/L,0,0,0,1],tt=0;tt<S.length;++tt){this.surface.padField(G,S[tt]);var Z=l(new Float32Array(P*I),[P,I]);p(Z,G,$),S[tt]=Z}};function h(S,M){for(var L=!1,R=0;R<S.length;R++)if(M===S[R]){L=!0;break}L===!1&&S.push(M)}s.setContourLevels=function(){var S=[[],[],[]],M=[!1,!1,!1],L=!1,R,z,P;for(R=0;R<3;++R)if(this.showContour[R]&&(L=!0,this.contourSize[R]>0&&this.contourStart[R]!==null&&this.contourEnd[R]!==null&&this.contourEnd[R]>this.contourStart[R]))for(M[R]=!0,z=this.contourStart[R];z<this.contourEnd[R];z+=this.contourSize[R])P=z*this.scene.dataScale[R],h(S[R],P);if(L){var I=[[],[],[]];for(R=0;R<3;++R)this.showContour[R]&&(I[R]=M[R]?S[R]:this.scene.contourLevels[R]);this.surface.update({levels:I})}},s.update=function(S){var M=this.scene,L=M.fullSceneLayout,R=this.surface,z=i(S),P=M.dataScale,I=S.z[0].length,U=S._ylength,O=M.contourLevels;this.data=S;var G,$,tt,Z,X=[];for(G=0;G<3;G++)for(X[G]=[],$=0;$<I;$++)X[G][$]=[];for($=0;$<I;$++)for(tt=0;tt<U;tt++)X[0][$][tt]=this.getXat($,tt,S.xcalendar,L.xaxis),X[1][$][tt]=this.getYat($,tt,S.ycalendar,L.yaxis),X[2][$][tt]=this.getZat($,tt,S.zcalendar,L.zaxis);if(S.connectgaps)for(S._emptypoints=t(X[2]),x(X[2],S._emptypoints),S._interpolatedZ=[],$=0;$<I;$++)for(S._interpolatedZ[$]=[],tt=0;tt<U;tt++)S._interpolatedZ[$][tt]=X[2][$][tt];for(G=0;G<3;G++)for($=0;$<I;$++)for(tt=0;tt<U;tt++)Z=X[G][$][tt],Z==null?X[G][$][tt]=NaN:Z=X[G][$][tt]*=P[G];for(G=0;G<3;G++)for($=0;$<I;$++)for(tt=0;tt<U;tt++)Z=X[G][$][tt],Z!=null&&(this.minValues[G]>Z&&(this.minValues[G]=Z),this.maxValues[G]<Z&&(this.maxValues[G]=Z));for(G=0;G<3;G++)this.objectOffset[G]=.5*(this.minValues[G]+this.maxValues[G]);for(G=0;G<3;G++)for($=0;$<I;$++)for(tt=0;tt<U;tt++)Z=X[G][$][tt],Z!=null&&(X[G][$][tt]-=this.objectOffset[G]);var J=[l(new Float32Array(I*U),[I,U]),l(new Float32Array(I*U),[I,U]),l(new Float32Array(I*U),[I,U])];for(G=0;G<3;G++)for($=0;$<I;$++)for(tt=0;tt<U;tt++)J[G].set($,tt,X[G][$][tt]);X=[];var st={colormap:z,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!S.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:S.opacityscale,opacity:S.opacity},at=n(S);if(st.intensityBounds=[at.min,at.max],S.surfacecolor){var lt=l(new Float32Array(I*U),[I,U]);for($=0;$<I;$++)for(tt=0;tt<U;tt++)lt.set($,tt,S.surfacecolor[tt][$]);J.push(lt)}else st.intensityBounds[0]*=P[2],st.intensityBounds[1]*=P[2];(A<J[0].shape[0]||A<J[0].shape[1])&&(this.refineData=!1),this.refineData===!0&&(this.dataScaleX=this.estimateScale(J[0].shape[0],0),this.dataScaleY=this.estimateScale(J[0].shape[1],1),(this.dataScaleX!==1||this.dataScaleY!==1)&&this.refineCoords(J)),S.surfacecolor&&(st.intensity=J.pop());var F=[!0,!0,!0],H=["x","y","z"];for(G=0;G<3;++G){var et=S.contours[H[G]];F[G]=et.highlight,st.showContour[G]=et.show||et.highlight,st.showContour[G]&&(st.contourProject[G]=[et.project.x,et.project.y,et.project.z],et.show?(this.showContour[G]=!0,st.levels[G]=O[G],R.highlightColor[G]=st.contourColor[G]=r(et.color),et.usecolormap?R.highlightTint[G]=st.contourTint[G]=0:R.highlightTint[G]=st.contourTint[G]=1,st.contourWidth[G]=et.width,this.contourStart[G]=et.start,this.contourEnd[G]=et.end,this.contourSize[G]=et.size):(this.showContour[G]=!1,this.contourStart[G]=null,this.contourEnd[G]=null,this.contourSize[G]=0),et.highlight&&(st.dynamicColor[G]=r(et.highlightcolor),st.dynamicWidth[G]=et.highlightwidth))}o(z)&&(st.vertexColor=!0),st.objectOffset=this.objectOffset,st.coords=J,R.update(st),R.visible=S.visible,R.enableDynamic=F,R.enableHighlight=F,R.snapToData=!0,"lighting"in S&&(R.ambientLight=S.lighting.ambient,R.diffuseLight=S.lighting.diffuse,R.specularLight=S.lighting.specular,R.roughness=S.lighting.roughness,R.fresnel=S.lighting.fresnel),"lightposition"in S&&(R.lightPosition=[S.lightposition.x,S.lightposition.y,S.lightposition.z])},s.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()};function D(S,M){var L=S.glplot.gl,R=f({gl:L}),z=new d(S,R,M.uid);return R._trace=z,z.update(M),S.glplot.add(R),z}B.exports=D},{"../../../stackgl_modules":1133,"../../components/colorscale":379,"../../lib":515,"../../lib/gl_format_color":511,"../../lib/str2rgbarray":540,"../heatmap/find_empties":807,"../heatmap/interp2d":810}],1073:[function(e,B,V){var f=e("../../registry"),l=e("../../lib"),m=e("../../components/colorscale/defaults"),x=e("./attributes"),t=.1;function a(s,o){for(var y=[],g=32,b=0;b<g;b++){var v=b/(g-1),_=o+(1-o)*(1-Math.pow(Math.sin(s*v*Math.PI),2));y.push([v,Math.max(0,Math.min(1,_))])}return y}function i(s){var o=0;if(!Array.isArray(s)||s.length<2||!s[0]||!s[s.length-1]||+s[0][0]!=0||+s[s.length-1][0]!=1)return!1;for(var y=0;y<s.length;y++){var g=s[y];if(g.length!==2||+g[0]<o)return!1;o=+g[0]}return!0}function r(s,o,y,g){var b,v;function _(S,M){return l.coerce(s,o,x,S,M)}var u=_("x"),T=_("y"),c=_("z");if(!c||!c.length||(u?u.length<1:!1)||(T?T.length<1:!1)){o.visible=!1;return}o._xlength=Array.isArray(u)&&l.isArrayOrTypedArray(u[0])?c.length:c[0].length,o._ylength=c.length;var A=f.getComponentMethod("calendars","handleTraceDefaults");A(s,o,["x","y","z"],g),_("text"),_("hovertext"),_("hovertemplate"),_("xhoverformat"),_("yhoverformat"),_("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(S){_(S)});var k=_("surfacecolor"),p=["x","y","z"];for(b=0;b<3;++b){var w="contours."+p[b],h=_(w+".show"),D=_(w+".highlight");if(h||D)for(v=0;v<3;++v)_(w+".project."+p[v]);h&&(_(w+".color"),_(w+".width"),_(w+".usecolormap")),D&&(_(w+".highlightcolor"),_(w+".highlightwidth")),_(w+".start"),_(w+".end"),_(w+".size")}k||(d(s,"zmin","cmin"),d(s,"zmax","cmax"),d(s,"zauto","cauto")),m(s,o,g,_,{prefix:"",cLetter:"c"}),n(s,o,g,_),o._length=null}function n(s,o,y,g){var b=g("opacityscale");b==="max"?o.opacityscale=[[0,t],[1,1]]:b==="min"?o.opacityscale=[[0,1],[1,t]]:b==="extremes"?o.opacityscale=a(1,t):i(b)||(o.opacityscale=void 0)}function d(s,o,y){o in s&&!(y in s)&&(s[y]=s[o])}B.exports={supplyDefaults:r,opacityscaleDefaults:n}},{"../../components/colorscale/defaults":377,"../../lib":515,"../../registry":647,"./attributes":1070}],1074:[function(e,B,V){B.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults").supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:e("./calc"),plot:e("./convert"),moduleType:"trace",name:"surface",basePlotModule:e("../../plots/gl3d"),categories:["gl3d","2dMap","showLegend"],meta:{}}},{"../../plots/gl3d":607,"./attributes":1070,"./calc":1071,"./convert":1072,"./defaults":1073}],1075:[function(e,B,V){var f=e("../../components/annotations/attributes"),l=e("../../lib/extend").extendFlat,m=e("../../plot_api/edit_types").overrideAll,x=e("../../plots/font_attributes"),t=e("../../plots/domain").attributes,a=e("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,i=B.exports=m({domain:t({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:a("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:l({},f.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:l({},x({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:a("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:l({},f.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:l({},x({arrayOk:!0}))}},"calc","from-root");i.transforms=void 0},{"../../components/annotations/attributes":350,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/cartesian/axis_format_attributes":569,"../../plots/domain":593,"../../plots/font_attributes":594}],1076:[function(e,B,V){var f=e("../../plots/get_data").getModuleCalcData,l=e("./plot"),m="table";V.name=m,V.plot=function(x){var t=f(x.calcdata,m)[0];t.length&&l(x,t)},V.clean=function(x,t,a,i){var r=i._has&&i._has(m),n=t._has&&t._has(m);r&&!n&&i._paperdiv.selectAll(".table").remove()}},{"../../plots/get_data":602,"./plot":1083}],1077:[function(e,B,V){var f=e("../../lib/gup").wrap;B.exports=function(){return f({})}},{"../../lib/gup":512}],1078:[function(e,B,V){B.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},{}],1079:[function(e,B,V){var f=e("./constants"),l=e("../../lib/extend").extendFlat,m=e("fast-isnumeric");B.exports=function(y,g){var b=a(g.cells.values),v=function($){return $.slice(g.header.values.length,$.length)},_=a(g.header.values);_.length&&!_[0].length&&(_[0]=[""],_=a(_));var u=_.concat(v(b).map(function(){return i((_[0]||[""]).length)})),T=g.domain,c=Math.floor(y._fullLayout._size.w*(T.x[1]-T.x[0])),A=Math.floor(y._fullLayout._size.h*(T.y[1]-T.y[0])),k=g.header.values.length?u[0].map(function(){return g.header.height}):[f.emptyHeaderHeight],p=b.length?b[0].map(function(){return g.cells.height}):[],w=k.reduce(t,0),h=A-w,D=h+f.uplift,S=d(p,D),M=d(k,w),L=n(M,[]),R=n(S,L),z={},P=g._fullInput.columnorder.concat(v(b.map(function($,tt){return tt}))),I=u.map(function($,tt){var Z=Array.isArray(g.columnwidth)?g.columnwidth[Math.min(tt,g.columnwidth.length-1)]:g.columnwidth;return m(Z)?Number(Z):1}),U=I.reduce(t,0);I=I.map(function($){return $/U*c});var O=Math.max(x(g.header.line.width),x(g.cells.line.width)),G={key:g.uid+y._context.staticPlot,translateX:T.x[0]*y._fullLayout._size.w,translateY:y._fullLayout._size.h*(1-T.y[1]),size:y._fullLayout._size,width:c,maxLineWidth:O,height:A,columnOrder:P,groupHeight:A,rowBlocks:R,headerRowBlocks:L,scrollY:0,cells:l({},g.cells,{values:b}),headerCells:l({},g.header,{values:u}),gdColumns:u.map(function($){return $[0]}),gdColumnsOriginalOrder:u.map(function($){return $[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:u.map(function($,tt){var Z=z[$];z[$]=(Z||0)+1;var X=$+"__"+z[$];return{key:X,label:$,specIndex:tt,xIndex:P[tt],xScale:r,x:void 0,calcdata:void 0,columnWidth:I[tt]}})};return G.columns.forEach(function($){$.calcdata=G,$.x=r($)}),G};function x(o){if(Array.isArray(o)){for(var y=0,g=0;g<o.length;g++)y=Math.max(y,x(o[g]));return y}return o}function t(o,y){return o+y}function a(o){var y=o.slice(),g=1/0,b=0,v;for(v=0;v<y.length;v++)Array.isArray(y[v])||(y[v]=[y[v]]),g=Math.min(g,y[v].length),b=Math.max(b,y[v].length);if(g!==b)for(v=0;v<y.length;v++){var _=b-y[v].length;_&&(y[v]=y[v].concat(i(_)))}return y}function i(o){for(var y=new Array(o),g=0;g<o;g++)y[g]="";return y}function r(o){return o.calcdata.columns.reduce(function(y,g){return g.xIndex<o.xIndex?y+g.columnWidth:y},0)}function n(o,y){var g=Object.keys(o);return g.map(function(b){return l({},o[b],{auxiliaryBlocks:y})})}function d(o,y){for(var g={},b,v=0,_=0,u=s(),T=0,c=0,A=0;A<o.length;A++)b=o[A],u.rows.push({rowIndex:A,rowHeight:b}),_+=b,(_>=y||A===o.length-1)&&(g[v]=u,u.key=c++,u.firstRowIndex=T,u.lastRowIndex=A,u=s(),v+=_,T=A+1,_=0);return g}function s(){return{firstRowIndex:null,lastRowIndex:null,rows:[]}}},{"../../lib/extend":505,"./constants":1078,"fast-isnumeric":190}],1080:[function(e,B,V){var f=e("../../lib/extend").extendFlat;V.splitToPanels=function(m){var x=[0,0],t=f({},m,{key:"header",type:"header",page:0,prevPages:x,currentRepaint:[null,null],dragHandle:!0,values:m.calcdata.headerCells.values[m.specIndex],rowBlocks:m.calcdata.headerRowBlocks,calcdata:f({},m.calcdata,{cells:m.calcdata.headerCells})}),a=f({},m,{key:"cells1",type:"cells",page:0,prevPages:x,currentRepaint:[null,null],dragHandle:!1,values:m.calcdata.cells.values[m.specIndex],rowBlocks:m.calcdata.rowBlocks}),i=f({},m,{key:"cells2",type:"cells",page:1,prevPages:x,currentRepaint:[null,null],dragHandle:!1,values:m.calcdata.cells.values[m.specIndex],rowBlocks:m.calcdata.rowBlocks});return[a,i,t]},V.splitToCells=function(m){var x=l(m);return(m.values||[]).slice(x[0],x[1]).map(function(t,a){var i=typeof t=="string"&&t.match(/[<$&> ]/)?"_keybuster_"+Math.random():"";return{keyWithinBlock:a+i,key:x[0]+a,column:m,calcdata:m.calcdata,page:m.page,rowBlocks:m.rowBlocks,value:t}})};function l(m){var x=m.rowBlocks[m.page],t=x?x.rows[0].rowIndex:0,a=x?t+x.rows.length:0;return[t,a]}},{"../../lib/extend":505}],1081:[function(e,B,V){var f=e("../../lib"),l=e("./attributes"),m=e("../../plots/domain").defaults;function x(t,a){for(var i=t.columnorder||[],r=t.header.values.length,n=i.slice(0,r),d=n.slice().sort(function(y,g){return y-g}),s=n.map(function(y){return d.indexOf(y)}),o=s.length;o<r;o++)s.push(o);a("columnorder",s)}B.exports=function(a,i,r,n){function d(s,o){return f.coerce(a,i,l,s,o)}m(i,n,d),d("columnwidth"),d("header.values"),d("header.format"),d("header.align"),d("header.prefix"),d("header.suffix"),d("header.height"),d("header.line.width"),d("header.line.color"),d("header.fill.color"),f.coerceFont(d,"header.font",f.extendFlat({},n.font)),x(i,d),d("cells.values"),d("cells.format"),d("cells.align"),d("cells.prefix"),d("cells.suffix"),d("cells.height"),d("cells.line.width"),d("cells.line.color"),d("cells.fill.color"),f.coerceFont(d,"cells.font",f.extendFlat({},n.font)),i._length=null}},{"../../lib":515,"../../plots/domain":593,"./attributes":1075}],1082:[function(e,B,V){B.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("./plot"),moduleType:"trace",name:"table",basePlotModule:e("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":1075,"./base_plot":1076,"./calc":1077,"./defaults":1081,"./plot":1083}],1083:[function(e,B,V){var f=e("./constants"),l=e("@plotly/d3"),m=e("../../lib"),x=m.numberFormat,t=e("../../lib/gup"),a=e("../../components/drawing"),i=e("../../lib/svg_text_utils"),r=e("../../lib").raiseToTop,n=e("../../lib").strTranslate,d=e("../../lib").cancelTransition,s=e("./data_preparation_helper"),o=e("./data_split_helpers"),y=e("../../components/color");B.exports=function(nt,it){var ot=!nt._context.staticPlot,ct=nt._fullLayout._paper.selectAll("."+f.cn.table).data(it.map(function(Nt){var Pt=t.unwrap(Nt),Yt=Pt.trace;return s(nt,Yt)}),t.keyFun);ct.exit().remove(),ct.enter().append("g").classed(f.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),ct.attr("width",function(Nt){return Nt.width+Nt.size.l+Nt.size.r}).attr("height",function(Nt){return Nt.height+Nt.size.t+Nt.size.b}).attr("transform",function(Nt){return n(Nt.translateX,Nt.translateY)});var bt=ct.selectAll("."+f.cn.tableControlView).data(t.repeat,t.keyFun),ut=bt.enter().append("g").classed(f.cn.tableControlView,!0).style("box-sizing","content-box");if(ot){var pt="onwheel"in document?"wheel":"mousewheel";ut.on("mousemove",function(Nt){bt.filter(function(Pt){return Nt===Pt}).call(u,nt)}).on(pt,function(Nt){if(!Nt.scrollbarState.wheeling){Nt.scrollbarState.wheeling=!0;var Pt=Nt.scrollY+l.event.deltaY,Yt=Z(nt,bt,null,Pt)(Nt);Yt||(l.event.stopPropagation(),l.event.preventDefault()),Nt.scrollbarState.wheeling=!1}}).call(u,nt,!0)}bt.attr("transform",function(Nt){return n(Nt.size.l,Nt.size.t)});var yt=bt.selectAll("."+f.cn.scrollBackground).data(t.repeat,t.keyFun);yt.enter().append("rect").classed(f.cn.scrollBackground,!0).attr("fill","none"),yt.attr("width",function(Nt){return Nt.width}).attr("height",function(Nt){return Nt.height}),bt.each(function(Nt){a.setClipUrl(l.select(this),b(nt,Nt),nt)});var Tt=bt.selectAll("."+f.cn.yColumn).data(function(Nt){return Nt.columns},t.keyFun);Tt.enter().append("g").classed(f.cn.yColumn,!0),Tt.exit().remove(),Tt.attr("transform",function(Nt){return n(Nt.x,0)}),ot&&Tt.call(l.behavior.drag().origin(function(Nt){var Pt=l.select(this);return I(Pt,Nt,-f.uplift),r(this),Nt.calcdata.columnDragInProgress=!0,u(bt.filter(function(Yt){return Nt.calcdata.key===Yt.key}),nt),Nt}).on("drag",function(Nt){var Pt=l.select(this),Yt=function(ir){return(Nt===ir?l.event.x:ir.x)+ir.columnWidth/2};Nt.x=Math.max(-f.overdrag,Math.min(Nt.calcdata.width+f.overdrag-Nt.columnWidth,l.event.x));var ve=_(Tt).filter(function(ir){return ir.calcdata.key===Nt.calcdata.key}),Re=ve.sort(function(ir,Ie){return Yt(ir)-Yt(Ie)});Re.forEach(function(ir,Ie){ir.xIndex=Ie,ir.x=Nt===ir?ir.x:ir.xScale(ir)}),Tt.filter(function(ir){return Nt!==ir}).transition().ease(f.transitionEase).duration(f.transitionDuration).attr("transform",function(ir){return n(ir.x,0)}),Pt.call(d).attr("transform",n(Nt.x,-f.uplift))}).on("dragend",function(Nt){var Pt=l.select(this),Yt=Nt.calcdata;Nt.x=Nt.xScale(Nt),Nt.calcdata.columnDragInProgress=!1,I(Pt,Nt,0),z(nt,Yt,Yt.columns.map(function(ve){return ve.xIndex}))})),Tt.each(function(Nt){a.setClipUrl(l.select(this),v(nt,Nt),nt)});var kt=Tt.selectAll("."+f.cn.columnBlock).data(o.splitToPanels,t.keyFun);kt.enter().append("g").classed(f.cn.columnBlock,!0).attr("id",function(Nt){return Nt.key}),kt.style("cursor",function(Nt){return Nt.dragHandle?"ew-resize":Nt.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var zt=kt.filter(O),Rt=kt.filter(U);ot&&Rt.call(l.behavior.drag().origin(function(Nt){return l.event.stopPropagation(),Nt}).on("drag",Z(nt,bt,-1)).on("dragend",function(){})),T(nt,bt,zt,kt),T(nt,bt,Rt,kt);var Gt=bt.selectAll("."+f.cn.scrollAreaClip).data(t.repeat,t.keyFun);Gt.enter().append("clipPath").classed(f.cn.scrollAreaClip,!0).attr("id",function(Nt){return b(nt,Nt)});var wt=Gt.selectAll("."+f.cn.scrollAreaClipRect).data(t.repeat,t.keyFun);wt.enter().append("rect").classed(f.cn.scrollAreaClipRect,!0).attr("x",-f.overdrag).attr("y",-f.uplift).attr("fill","none"),wt.attr("width",function(Nt){return Nt.width+2*f.overdrag}).attr("height",function(Nt){return Nt.height+f.uplift});var It=Tt.selectAll("."+f.cn.columnBoundary).data(t.repeat,t.keyFun);It.enter().append("g").classed(f.cn.columnBoundary,!0);var $t=Tt.selectAll("."+f.cn.columnBoundaryClippath).data(t.repeat,t.keyFun);$t.enter().append("clipPath").classed(f.cn.columnBoundaryClippath,!0),$t.attr("id",function(Nt){return v(nt,Nt)});var Qt=$t.selectAll("."+f.cn.columnBoundaryRect).data(t.repeat,t.keyFun);Qt.enter().append("rect").classed(f.cn.columnBoundaryRect,!0).attr("fill","none"),Qt.attr("width",function(Nt){return Nt.columnWidth+2*g(Nt)}).attr("height",function(Nt){return Nt.calcdata.height+2*g(Nt)+f.uplift}).attr("x",function(Nt){return-g(Nt)}).attr("y",function(Nt){return-g(Nt)}),tt(null,Rt,bt)};function g(K){return Math.ceil(K.calcdata.maxLineWidth/2)}function b(K,nt){return"clip"+K._fullLayout._uid+"_scrollAreaBottomClip_"+nt.key}function v(K,nt){return"clip"+K._fullLayout._uid+"_columnBoundaryClippath_"+nt.calcdata.key+"_"+nt.specIndex}function _(K){return[].concat.apply([],K.map(function(nt){return nt})).map(function(nt){return nt.__data__})}function u(K,nt,it){function ot(Tt){var kt=Tt.rowBlocks;return F(kt,kt.length-1)+(kt.length?H(kt[kt.length-1],1/0):1)}var ct=K.selectAll("."+f.cn.scrollbarKit).data(t.repeat,t.keyFun);ct.enter().append("g").classed(f.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),ct.each(function(Tt){var kt=Tt.scrollbarState;kt.totalHeight=ot(Tt),kt.scrollableAreaHeight=Tt.groupHeight-G(Tt),kt.currentlyVisibleHeight=Math.min(kt.totalHeight,kt.scrollableAreaHeight),kt.ratio=kt.currentlyVisibleHeight/kt.totalHeight,kt.barLength=Math.max(kt.ratio*kt.currentlyVisibleHeight,f.goldenRatio*f.scrollbarWidth),kt.barWiggleRoom=kt.currentlyVisibleHeight-kt.barLength,kt.wiggleRoom=Math.max(0,kt.totalHeight-kt.scrollableAreaHeight),kt.topY=kt.barWiggleRoom===0?0:Tt.scrollY/kt.wiggleRoom*kt.barWiggleRoom,kt.bottomY=kt.topY+kt.barLength,kt.dragMultiplier=kt.wiggleRoom/kt.barWiggleRoom}).attr("transform",function(Tt){var kt=Tt.width+f.scrollbarWidth/2+f.scrollbarOffset;return n(kt,G(Tt))});var bt=ct.selectAll("."+f.cn.scrollbar).data(t.repeat,t.keyFun);bt.enter().append("g").classed(f.cn.scrollbar,!0);var ut=bt.selectAll("."+f.cn.scrollbarSlider).data(t.repeat,t.keyFun);ut.enter().append("g").classed(f.cn.scrollbarSlider,!0),ut.attr("transform",function(Tt){return n(0,Tt.scrollbarState.topY||0)});var pt=ut.selectAll("."+f.cn.scrollbarGlyph).data(t.repeat,t.keyFun);pt.enter().append("line").classed(f.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",f.scrollbarWidth).attr("stroke-linecap","round").attr("y1",f.scrollbarWidth/2),pt.attr("y2",function(Tt){return Tt.scrollbarState.barLength-f.scrollbarWidth/2}).attr("stroke-opacity",function(Tt){return Tt.columnDragInProgress||!Tt.scrollbarState.barWiggleRoom||it?0:.4}),pt.transition().delay(0).duration(0),pt.transition().delay(f.scrollbarHideDelay).duration(f.scrollbarHideDuration).attr("stroke-opacity",0);var yt=bt.selectAll("."+f.cn.scrollbarCaptureZone).data(t.repeat,t.keyFun);yt.enter().append("line").classed(f.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",f.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(Tt){var kt=l.event.y,zt=this.getBoundingClientRect(),Rt=Tt.scrollbarState,Gt=kt-zt.top,wt=l.scale.linear().domain([0,Rt.scrollableAreaHeight]).range([0,Rt.totalHeight]).clamp(!0);Rt.topY<=Gt&&Gt<=Rt.bottomY||Z(nt,K,null,wt(Gt-Rt.barLength/2))(Tt)}).call(l.behavior.drag().origin(function(Tt){return l.event.stopPropagation(),Tt.scrollbarState.scrollbarScrollInProgress=!0,Tt}).on("drag",Z(nt,K)).on("dragend",function(){})),yt.attr("y2",function(Tt){return Tt.scrollbarState.scrollableAreaHeight}),nt._context.staticPlot&&(pt.remove(),yt.remove())}function T(K,nt,it,ot){var ct=c(it),bt=A(ct);h(bt);var ut=k(bt);S(ut);var pt=w(bt),yt=p(pt);D(yt),M(yt,nt,ot,K),lt(bt)}function c(K){var nt=K.selectAll("."+f.cn.columnCells).data(t.repeat,t.keyFun);return nt.enter().append("g").classed(f.cn.columnCells,!0),nt.exit().remove(),nt}function A(K){var nt=K.selectAll("."+f.cn.columnCell).data(o.splitToCells,function(it){return it.keyWithinBlock});return nt.enter().append("g").classed(f.cn.columnCell,!0),nt.exit().remove(),nt}function k(K){var nt=K.selectAll("."+f.cn.cellRect).data(t.repeat,function(it){return it.keyWithinBlock});return nt.enter().append("rect").classed(f.cn.cellRect,!0),nt}function p(K){var nt=K.selectAll("."+f.cn.cellText).data(t.repeat,function(it){return it.keyWithinBlock});return nt.enter().append("text").classed(f.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){l.event.stopPropagation()}),nt}function w(K){var nt=K.selectAll("."+f.cn.cellTextHolder).data(t.repeat,function(it){return it.keyWithinBlock});return nt.enter().append("g").classed(f.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),nt}function h(K){K.each(function(nt,it){var ot=nt.calcdata.cells.font,ct=nt.column.specIndex,bt={size:P(ot.size,ct,it),color:P(ot.color,ct,it),family:P(ot.family,ct,it)};nt.rowNumber=nt.key,nt.align=P(nt.calcdata.cells.align,ct,it),nt.cellBorderWidth=P(nt.calcdata.cells.line.width,ct,it),nt.font=bt})}function D(K){K.each(function(nt){a.font(l.select(this),nt.font)})}function S(K){K.attr("width",function(nt){return nt.column.columnWidth}).attr("stroke-width",function(nt){return nt.cellBorderWidth}).each(function(nt){var it=l.select(this);y.stroke(it,P(nt.calcdata.cells.line.color,nt.column.specIndex,nt.rowNumber)),y.fill(it,P(nt.calcdata.cells.fill.color,nt.column.specIndex,nt.rowNumber))})}function M(K,nt,it,ot){K.text(function(ct){var bt=ct.column.specIndex,ut=ct.rowNumber,pt=ct.value,yt=typeof pt=="string",Tt=yt&&pt.match(/<br>/i),kt=!yt||Tt;ct.mayHaveMarkup=yt&&pt.match(/[<&>]/);var zt=L(pt);ct.latex=zt;var Rt=zt?"":P(ct.calcdata.cells.prefix,bt,ut)||"",Gt=zt?"":P(ct.calcdata.cells.suffix,bt,ut)||"",wt=zt?null:P(ct.calcdata.cells.format,bt,ut)||null,It=Rt+(wt?x(wt)(ct.value):ct.value)+Gt,$t;ct.wrappingNeeded=!ct.wrapped&&!kt&&!zt&&($t=R(It)),ct.cellHeightMayIncrease=Tt||zt||ct.mayHaveMarkup||($t===void 0?R(It):$t),ct.needsConvertToTspans=ct.mayHaveMarkup||ct.wrappingNeeded||ct.latex;var Qt;if(ct.wrappingNeeded){var Nt=f.wrapSplitCharacter===" "?It.replace(/<a href=/ig,"<a_href="):It,Pt=Nt.split(f.wrapSplitCharacter),Yt=f.wrapSplitCharacter===" "?Pt.map(function(ve){return ve.replace(/<a_href=/ig,"<a href=")}):Pt;ct.fragments=Yt.map(function(ve){return{text:ve,width:null}}),ct.fragments.push({fragment:f.wrapSpacer,width:null}),Qt=Yt.join(f.lineBreaker)+f.lineBreaker+f.wrapSpacer}else delete ct.fragments,Qt=It;return Qt}).attr("dy",function(ct){return ct.needsConvertToTspans?0:"0.75em"}).each(function(ct){var bt=this,ut=l.select(bt),pt=ct.wrappingNeeded?J:st;ct.needsConvertToTspans?i.convertToTspans(ut,ot,pt(it,bt,nt,ot,ct)):l.select(bt.parentNode).attr("transform",function(yt){return n(at(yt),f.cellPad)}).attr("text-anchor",function(yt){return{left:"start",center:"middle",right:"end"}[yt.align]})})}function L(K){return typeof K=="string"&&K.match(f.latexCheck)}function R(K){return K.indexOf(f.wrapSplitCharacter)!==-1}function z(K,nt,it){var ot=nt.gdColumnsOriginalOrder;nt.gdColumns.sort(function(ct,bt){return it[ot.indexOf(ct)]-it[ot.indexOf(bt)]}),nt.columnorder=it,K.emit("plotly_restyle")}function P(K,nt,it){if(Array.isArray(K)){var ot=K[Math.min(nt,K.length-1)];return Array.isArray(ot)?ot[Math.min(it,ot.length-1)]:ot}else return K}function I(K,nt,it){K.transition().ease(f.releaseTransitionEase).duration(f.releaseTransitionDuration).attr("transform",n(nt.x,it))}function U(K){return K.type==="cells"}function O(K){return K.type==="header"}function G(K){var nt=K.rowBlocks.length?K.rowBlocks[0].auxiliaryBlocks:[];return nt.reduce(function(it,ot){return it+H(ot,1/0)},0)}function $(K,nt,it){for(var ot=[],ct=0,bt=0;bt<K.length;bt++){for(var ut=K[bt],pt=ut.rows,yt=0,Tt=0;Tt<pt.length;Tt++)yt+=pt[Tt].rowHeight;ut.allRowsHeight=yt;var kt=ct+yt,zt=nt,Rt=zt+it;zt<kt&&Rt>ct&&ot.push(bt),ct+=yt}return ot}function tt(K,nt,it){var ot=_(nt)[0];if(ot!==void 0){var ct=ot.rowBlocks,bt=ot.calcdata,ut=F(ct,ct.length),pt=ot.calcdata.groupHeight-G(ot),yt=bt.scrollY=Math.max(0,Math.min(ut-pt,bt.scrollY)),Tt=$(ct,yt,pt);Tt.length===1&&(Tt[0]===ct.length-1?Tt.unshift(Tt[0]-1):Tt.push(Tt[0]+1)),Tt[0]%2&&Tt.reverse(),nt.each(function(kt,zt){kt.page=Tt[zt],kt.scrollY=yt}),nt.attr("transform",function(kt){var zt=F(kt.rowBlocks,kt.page)-kt.scrollY;return n(0,zt)}),K&&(X(K,it,nt,Tt,ot.prevPages,ot,0),X(K,it,nt,Tt,ot.prevPages,ot,1),u(it,K))}}function Z(K,nt,it,ot){return function(bt){var ut=bt.calcdata?bt.calcdata:bt,pt=nt.filter(function(zt){return ut.key===zt.key}),yt=it||ut.scrollbarState.dragMultiplier,Tt=ut.scrollY;ut.scrollY=ot===void 0?ut.scrollY+yt*l.event.dy:ot;var kt=pt.selectAll("."+f.cn.yColumn).selectAll("."+f.cn.columnBlock).filter(U);return tt(K,kt,pt),ut.scrollY===Tt}}function X(K,nt,it,ot,ct,bt,ut){var pt=ot[ut]!==ct[ut];pt&&(clearTimeout(bt.currentRepaint[ut]),bt.currentRepaint[ut]=setTimeout(function(){var yt=it.filter(function(Tt,kt){return kt===ut&&ot[kt]!==ct[kt]});T(K,nt,yt,it),ct[ut]=ot[ut]}))}function J(K,nt,it,ot){return function(){var bt=l.select(nt.parentNode);bt.each(function(ut){var pt=ut.fragments;bt.selectAll("tspan.line").each(function(It,$t){pt[$t].width=this.getComputedTextLength()});var yt=pt[pt.length-1].width,Tt=pt.slice(0,-1),kt=[],zt,Rt,Gt=0,wt=ut.column.columnWidth-2*f.cellPad;for(ut.value="";Tt.length;)zt=Tt.shift(),Rt=zt.width+yt,Gt+Rt>wt&&(ut.value+=kt.join(f.wrapSpacer)+f.lineBreaker,kt=[],Gt=0),kt.push(zt.text),Gt+=Rt;Gt&&(ut.value+=kt.join(f.wrapSpacer)),ut.wrapped=!0}),bt.selectAll("tspan.line").remove(),M(bt.select("."+f.cn.cellText),it,K,ot),l.select(nt.parentNode.parentNode).call(lt)}}function st(K,nt,it,ot,ct){return function(){if(!ct.settledY){var ut=l.select(nt.parentNode),pt=q(ct),yt=ct.key-pt.firstRowIndex,Tt=pt.rows[yt].rowHeight,kt=ct.cellHeightMayIncrease?nt.parentNode.getBoundingClientRect().height+2*f.cellPad:Tt,zt=Math.max(kt,Tt),Rt=zt-pt.rows[yt].rowHeight;Rt&&(pt.rows[yt].rowHeight=zt,K.selectAll("."+f.cn.columnCell).call(lt),tt(null,K.filter(U),0),u(it,ot,!0)),ut.attr("transform",function(){var Gt=this,wt=Gt.parentNode,It=wt.getBoundingClientRect(),$t=l.select(Gt.parentNode).select("."+f.cn.cellRect).node().getBoundingClientRect(),Qt=Gt.transform.baseVal.consolidate(),Nt=$t.top-It.top+(Qt?Qt.matrix.f:f.cellPad);return n(at(ct,l.select(Gt.parentNode).select("."+f.cn.cellTextHolder).node().getBoundingClientRect().width),Nt)}),ct.settledY=!0}}}function at(K,nt){switch(K.align){case"left":return f.cellPad;case"right":return K.column.columnWidth-(nt||0)-f.cellPad;case"center":return(K.column.columnWidth-(nt||0))/2;default:return f.cellPad}}function lt(K){K.attr("transform",function(nt){var it=nt.rowBlocks[0].auxiliaryBlocks.reduce(function(ut,pt){return ut+H(pt,1/0)},0),ot=q(nt),ct=H(ot,nt.key),bt=ct+it;return n(0,bt)}).selectAll("."+f.cn.cellRect).attr("height",function(nt){return W(q(nt),nt.key).rowHeight})}function F(K,nt){for(var it=0,ot=nt-1;ot>=0;ot--)it+=et(K[ot]);return it}function H(K,nt){for(var it=0,ot=0;ot<K.rows.length&&K.rows[ot].rowIndex<nt;ot++)it+=K.rows[ot].rowHeight;return it}function et(K){var nt=K.allRowsHeight;if(nt!==void 0)return nt;for(var it=0,ot=0;ot<K.rows.length;ot++)it+=K.rows[ot].rowHeight;return K.allRowsHeight=it,it}function q(K){return K.rowBlocks[K.page]}function W(K,nt){return K.rows[nt-K.firstRowIndex]}},{"../../components/color":367,"../../components/drawing":389,"../../lib":515,"../../lib/gup":512,"../../lib/svg_text_utils":541,"./constants":1078,"./data_preparation_helper":1079,"./data_split_helpers":1080,"@plotly/d3":58}],1084:[function(e,B,V){var f=e("../../plots/template_attributes").hovertemplateAttrs,l=e("../../plots/template_attributes").texttemplateAttrs,m=e("../../components/colorscale/attributes"),x=e("../../plots/domain").attributes,t=e("../pie/attributes"),a=e("../sunburst/attributes"),i=e("./constants"),r=e("../../lib/extend").extendFlat;B.exports={labels:a.labels,parents:a.parents,values:a.values,branchvalues:a.branchvalues,count:a.count,level:a.level,maxdepth:a.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:r({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:a.marker.colors,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:a.marker.line,editType:"calc"},m("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:r({},t.textfont,{}),editType:"calc"},text:t.text,textinfo:a.textinfo,texttemplate:l({editType:"plot"},{keys:i.eventDataKeys.concat(["label","value"])}),hovertext:t.hovertext,hoverinfo:a.hoverinfo,hovertemplate:f({},{keys:i.eventDataKeys}),textfont:t.textfont,insidetextfont:t.insidetextfont,outsidetextfont:r({},t.outsidetextfont,{}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot"},sort:t.sort,root:a.root,domain:x({name:"treemap",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/domain":593,"../../plots/template_attributes":642,"../pie/attributes":910,"../sunburst/attributes":1058,"./constants":1087}],1085:[function(e,B,V){var f=e("../../plots/plots");V.name="treemap",V.plot=function(l,m,x,t){f.plotBasePlot(V.name,l,m,x,t)},V.clean=function(l,m,x,t){f.cleanBasePlot(V.name,l,m,x,t)}},{"../../plots/plots":628}],1086:[function(e,B,V){var f=e("../sunburst/calc");V.calc=function(l,m){return f.calc(l,m)},V.crossTraceCalc=function(l){return f._runCrossTraceCalc("treemap",l)}},{"../sunburst/calc":1060}],1087:[function(e,B,V){B.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},{}],1088:[function(e,B,V){var f=e("../../lib"),l=e("./attributes"),m=e("../../components/color"),x=e("../../plots/domain").defaults,t=e("../bar/defaults").handleText,a=e("../bar/constants").TEXTPAD,i=e("../../components/colorscale"),r=i.hasColorscale,n=i.handleDefaults;B.exports=function(s,o,y,g){function b(M,L){return f.coerce(s,o,l,M,L)}var v=b("labels"),_=b("parents");if(!v||!v.length||!_||!_.length){o.visible=!1;return}var u=b("values");u&&u.length?b("branchvalues"):b("count"),b("level"),b("maxdepth");var T=b("tiling.packing");T==="squarify"&&b("tiling.squarifyratio"),b("tiling.flip"),b("tiling.pad");var c=b("text");b("texttemplate"),o.texttemplate||b("textinfo",Array.isArray(c)?"text+label":"label"),b("hovertext"),b("hovertemplate");var A=b("pathbar.visible"),k="auto";t(s,o,g,b,k,{hasPathbar:A,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),b("textposition");var p=o.textposition.indexOf("bottom")!==-1,w=b("marker.line.width");w&&b("marker.line.color",g.paper_bgcolor);var h=b("marker.colors"),D=o._hasColorscale=r(s,"marker","colors")||(s.marker||{}).coloraxis;D?n(s,o,g,b,{prefix:"marker.",cLetter:"c"}):b("marker.depthfade",!(h||[]).length);var S=o.textfont.size*2;b("marker.pad.t",p?S/4:S),b("marker.pad.l",S/4),b("marker.pad.r",S/4),b("marker.pad.b",p?S:S/4),o._hovered={marker:{line:{width:2,color:m.contrast(g.paper_bgcolor)}}},A&&(b("pathbar.thickness",o.pathbar.textfont.size+2*a),b("pathbar.side"),b("pathbar.edgeshape")),b("sort"),b("root.color"),x(o,g,b),o._length=null}},{"../../components/color":367,"../../components/colorscale":379,"../../lib":515,"../../plots/domain":593,"../bar/constants":659,"../bar/defaults":661,"./attributes":1084}],1089:[function(e,B,V){var f=e("@plotly/d3"),l=e("../sunburst/helpers"),m=e("../bar/uniform_text"),x=m.clearMinTextSize,t=e("../bar/style").resizeText,a=e("./plot_one");B.exports=function(r,n,d,s,o){var y=o.type,g=o.drawDescendants,b=r._fullLayout,v=b["_"+y+"layer"],_,u,T=!d;if(x(y,b),_=v.selectAll("g.trace."+y).data(n,function(A){return A[0].trace.uid}),_.enter().append("g").classed("trace",!0).classed(y,!0),_.order(),!b.uniformtext.mode&&l.hasTransition(d)){s&&(u=s());var c=f.transition().duration(d.duration).ease(d.easing).each("end",function(){u&&u()}).each("interrupt",function(){u&&u()});c.each(function(){v.selectAll("g.trace").each(function(A){a(r,A,this,d,g)})})}else _.each(function(A){a(r,A,this,d,g)}),b.uniformtext.mode&&t(r,v.selectAll(".trace"),y);T&&_.exit().remove()}},{"../bar/style":671,"../bar/uniform_text":673,"../sunburst/helpers":1064,"./plot_one":1098,"@plotly/d3":58}],1090:[function(e,B,V){var f=e("@plotly/d3"),l=e("../../lib"),m=e("../../components/drawing"),x=e("../../lib/svg_text_utils"),t=e("./partition"),a=e("./style").styleOne,i=e("./constants"),r=e("../sunburst/helpers"),n=e("../sunburst/fx"),d=!0;B.exports=function(o,y,g,b,v){var _=v.barDifY,u=v.width,T=v.height,c=v.viewX,A=v.viewY,k=v.pathSlice,p=v.toMoveInsideSlice,w=v.strTransform,h=v.hasTransition,D=v.handleSlicesExit,S=v.makeUpdateSliceInterpolator,M=v.makeUpdateTextInterpolator,L={},R=o._fullLayout,z=y[0],P=z.trace,I=z.hierarchy,U=u/P._entryDepth,O=r.listPath(g.data,"id"),G=t(I.copy(),[u,T],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();G=G.filter(function(tt){var Z=O.indexOf(tt.data.id);return Z===-1?!1:(tt.x0=U*Z,tt.x1=U*(Z+1),tt.y0=_,tt.y1=_+T,tt.onPathbar=!0,!0)}),G.reverse(),b=b.data(G,r.getPtId),b.enter().append("g").classed("pathbar",!0),D(b,d,L,[u,T],k),b.order();var $=b;h&&($=$.transition().each("end",function(){var tt=f.select(this);r.setSliceCursor(tt,o,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),$.each(function(tt){tt._x0=c(tt.x0),tt._x1=c(tt.x1),tt._y0=A(tt.y0),tt._y1=A(tt.y1),tt._hoverX=c(tt.x1-Math.min(u,T)/2),tt._hoverY=A(tt.y1-T/2);var Z=f.select(this),X=l.ensureSingle(Z,"path","surface",function(lt){lt.style("pointer-events","all")});h?X.transition().attrTween("d",function(lt){var F=S(lt,d,L,[u,T]);return function(H){return k(F(H))}}):X.attr("d",k),Z.call(n,g,o,y,{styleOne:a,eventDataKeys:i.eventDataKeys,transitionTime:i.CLICK_TRANSITION_TIME,transitionEasing:i.CLICK_TRANSITION_EASING}).call(r.setSliceCursor,o,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:o._transitioning}),X.call(a,tt,P,{hovered:!1}),tt._text=(r.getPtLabel(tt)||"").split("<br>").join(" ")||"";var J=l.ensureSingle(Z,"g","slicetext"),st=l.ensureSingle(J,"text","",function(lt){lt.attr("data-notex",1)}),at=l.ensureUniformFontSize(o,r.determineTextFont(P,tt,R.font,{onPathbar:!0}));st.text(tt._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(m.font,at).call(x.convertToTspans,o),tt.textBB=m.bBox(st.node()),tt.transform=p(tt,{fontSize:at.size,onPathbar:!0}),tt.transform.fontSize=at.size,h?st.transition().attrTween("transform",function(lt){var F=M(lt,d,L,[u,T]);return function(H){return w(F(H))}}):st.attr("transform",w(tt))})}},{"../../components/drawing":389,"../../lib":515,"../../lib/svg_text_utils":541,"../sunburst/fx":1063,"../sunburst/helpers":1064,"./constants":1087,"./partition":1096,"./style":1099,"@plotly/d3":58}],1091:[function(e,B,V){var f=e("@plotly/d3"),l=e("../../lib"),m=e("../../components/drawing"),x=e("../../lib/svg_text_utils"),t=e("./partition"),a=e("./style").styleOne,i=e("./constants"),r=e("../sunburst/helpers"),n=e("../sunburst/fx"),d=e("../sunburst/plot").formatSliceLabel,s=!1;B.exports=function(y,g,b,v,_){var u=_.width,T=_.height,c=_.viewX,A=_.viewY,k=_.pathSlice,p=_.toMoveInsideSlice,w=_.strTransform,h=_.hasTransition,D=_.handleSlicesExit,S=_.makeUpdateSliceInterpolator,M=_.makeUpdateTextInterpolator,L=_.prevEntry,R={},z=y._fullLayout,P=g[0],I=P.trace,U=I.textposition.indexOf("left")!==-1,O=I.textposition.indexOf("right")!==-1,G=I.textposition.indexOf("bottom")!==-1,$=!G&&!I.marker.pad.t||G&&!I.marker.pad.b,tt=t(b,[u,T],{packing:I.tiling.packing,squarifyratio:I.tiling.squarifyratio,flipX:I.tiling.flip.indexOf("x")>-1,flipY:I.tiling.flip.indexOf("y")>-1,pad:{inner:I.tiling.pad,top:I.marker.pad.t,left:I.marker.pad.l,right:I.marker.pad.r,bottom:I.marker.pad.b}}),Z=tt.descendants(),X=1/0,J=-1/0;Z.forEach(function(H){var et=H.depth;et>=I._maxDepth?(H.x0=H.x1=(H.x0+H.x1)/2,H.y0=H.y1=(H.y0+H.y1)/2):(X=Math.min(X,et),J=Math.max(J,et))}),v=v.data(Z,r.getPtId),I._maxVisibleLayers=isFinite(J)?J-X+1:0,v.enter().append("g").classed("slice",!0),D(v,s,R,[u,T],k),v.order();var st=null;if(h&&L){var at=r.getPtId(L);v.each(function(H){st===null&&r.getPtId(H)===at&&(st={x0:H.x0,x1:H.x1,y0:H.y0,y1:H.y1})})}var lt=function(){return st||{x0:0,x1:u,y0:0,y1:T}},F=v;return h&&(F=F.transition().each("end",function(){var H=f.select(this);r.setSliceCursor(H,y,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),F.each(function(H){var et=r.isHeader(H,I);H._x0=c(H.x0),H._x1=c(H.x1),H._y0=A(H.y0),H._y1=A(H.y1),H._hoverX=c(H.x1-I.marker.pad.r),H._hoverY=A(G?H.y1-I.marker.pad.b/2:H.y0+I.marker.pad.t/2);var q=f.select(this),W=l.ensureSingle(q,"path","surface",function(ot){ot.style("pointer-events","all")});h?W.transition().attrTween("d",function(ot){var ct=S(ot,s,lt(),[u,T]);return function(bt){return k(ct(bt))}}):W.attr("d",k),q.call(n,b,y,g,{styleOne:a,eventDataKeys:i.eventDataKeys,transitionTime:i.CLICK_TRANSITION_TIME,transitionEasing:i.CLICK_TRANSITION_EASING}).call(r.setSliceCursor,y,{isTransitioning:y._transitioning}),W.call(a,H,I,{hovered:!1}),H.x0===H.x1||H.y0===H.y1?H._text="":et?H._text=$?"":r.getPtLabel(H)||"":H._text=d(H,b,I,g,z)||"";var K=l.ensureSingle(q,"g","slicetext"),nt=l.ensureSingle(K,"text","",function(ot){ot.attr("data-notex",1)}),it=l.ensureUniformFontSize(y,r.determineTextFont(I,H,z.font));nt.text(H._text||" ").classed("slicetext",!0).attr("text-anchor",O?"end":U||et?"start":"middle").call(m.font,it).call(x.convertToTspans,y),H.textBB=m.bBox(nt.node()),H.transform=p(H,{fontSize:it.size,isHeader:et}),H.transform.fontSize=it.size,h?nt.transition().attrTween("transform",function(ot){var ct=M(ot,s,lt(),[u,T]);return function(bt){return w(ct(bt))}}):nt.attr("transform",w(H))}),st}},{"../../components/drawing":389,"../../lib":515,"../../lib/svg_text_utils":541,"../sunburst/fx":1063,"../sunburst/helpers":1064,"../sunburst/plot":1068,"./constants":1087,"./partition":1096,"./style":1099,"@plotly/d3":58}],1092:[function(e,B,V){B.exports=function f(l,m,x){var t;x.swapXY&&(t=l.x0,l.x0=l.y0,l.y0=t,t=l.x1,l.x1=l.y1,l.y1=t),x.flipX&&(t=l.x0,l.x0=m[0]-l.x1,l.x1=m[0]-t),x.flipY&&(t=l.y0,l.y0=m[1]-l.y1,l.y1=m[1]-t);var a=l.children;if(a)for(var i=0;i<a.length;i++)f(a[i],m,x)}},{}],1093:[function(e,B,V){B.exports={moduleType:"trace",name:"treemap",basePlotModule:e("./base_plot"),categories:[],animatable:!0,attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults"),supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc").calc,crossTraceCalc:e("./calc").crossTraceCalc,plot:e("./plot"),style:e("./style").style,colorbar:e("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":954,"./attributes":1084,"./base_plot":1085,"./calc":1086,"./defaults":1088,"./layout_attributes":1094,"./layout_defaults":1095,"./plot":1097,"./style":1099}],1094:[function(e,B,V){B.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1095:[function(e,B,V){var f=e("../../lib"),l=e("./layout_attributes");B.exports=function(x,t){function a(i,r){return f.coerce(x,t,l,i,r)}a("treemapcolorway",t.colorway),a("extendtreemapcolors")}},{"../../lib":515,"./layout_attributes":1094}],1096:[function(e,B,V){var f=e("d3-hierarchy"),l=e("./flip_tree");B.exports=function(t,a,i){var r=i.flipX,n=i.flipY,d=i.packing==="dice-slice",s=i.pad[n?"bottom":"top"],o=i.pad[r?"right":"left"],y=i.pad[r?"left":"right"],g=i.pad[n?"top":"bottom"],b;d&&(b=o,o=s,s=b,b=y,y=g,g=b);var v=f.treemap().tile(m(i.packing,i.squarifyratio)).paddingInner(i.pad.inner).paddingLeft(o).paddingRight(y).paddingTop(s).paddingBottom(g).size(d?[a[1],a[0]]:a)(t);return(d||r||n)&&l(v,a,{swapXY:d,flipX:r,flipY:n}),v};function m(x,t){switch(x){case"squarify":return f.treemapSquarify.ratio(t);case"binary":return f.treemapBinary;case"dice":return f.treemapDice;case"slice":return f.treemapSlice;default:return f.treemapSliceDice}}},{"./flip_tree":1092,"d3-hierarchy":115}],1097:[function(e,B,V){var f=e("./draw"),l=e("./draw_descendants");B.exports=function(x,t,a,i){return f(x,t,a,i,{type:"treemap",drawDescendants:l})}},{"./draw":1089,"./draw_descendants":1091}],1098:[function(e,B,V){var f=e("@plotly/d3"),l=e("d3-interpolate").interpolate,m=e("../sunburst/helpers"),x=e("../../lib"),t=e("../bar/constants").TEXTPAD,a=e("../bar/plot"),i=a.toMoveInsideBar,r=e("../bar/uniform_text"),n=r.recordMinTextSize,d=e("./constants"),s=e("./draw_ancestors");function o(y){return m.isHierarchyRoot(y)?"":m.getPtId(y)}B.exports=function(g,b,v,_,u){var T=g._fullLayout,c=b[0],A=c.trace,k=A.type,p=k==="icicle",w=c.hierarchy,h=m.findEntryWithLevel(w,A.level),D=f.select(v),S=D.selectAll("g.pathbar"),M=D.selectAll("g.slice");if(!h){S.remove(),M.remove();return}var L=m.isHierarchyRoot(h),R=!T.uniformtext.mode&&m.hasTransition(_),z=m.getMaxDepth(A),P=function(Yt){return Yt.data.depth-h.data.depth<z},I=T._size,U=A.domain,O=I.w*(U.x[1]-U.x[0]),G=I.h*(U.y[1]-U.y[0]),$=O,tt=A.pathbar.thickness,Z=A.marker.line.width+d.gapWithPathbar,X=A.pathbar.visible?A.pathbar.side.indexOf("bottom")>-1?G+Z:-(tt+Z):0,J={x0:$,x1:$,y0:X,y1:X+tt},st=function(Yt,ve,Re){var ir=A.tiling.pad,Ie=function(Ee){return Ee-ir<=ve.x0},Be=function(Ee){return Ee+ir>=ve.x1},Ye=function(Ee){return Ee-ir<=ve.y0},ze=function(Ee){return Ee+ir>=ve.y1};return Yt.x0===ve.x0&&Yt.x1===ve.x1&&Yt.y0===ve.y0&&Yt.y1===ve.y1?{x0:Yt.x0,x1:Yt.x1,y0:Yt.y0,y1:Yt.y1}:{x0:Ie(Yt.x0-ir)?0:Be(Yt.x0-ir)?Re[0]:Yt.x0,x1:Ie(Yt.x1+ir)?0:Be(Yt.x1+ir)?Re[0]:Yt.x1,y0:Ye(Yt.y0-ir)?0:ze(Yt.y0-ir)?Re[1]:Yt.y0,y1:Ye(Yt.y1+ir)?0:ze(Yt.y1+ir)?Re[1]:Yt.y1}},at=null,lt={},F={},H=null,et=function(Yt,ve){return ve?lt[o(Yt)]:F[o(Yt)]},q=function(Yt,ve,Re,ir){if(ve)return lt[o(w)]||J;var Ie=F[A.level]||Re;return P(Yt)?st(Yt,Ie,ir):{}};c.hasMultipleRoots&&L&&z++,A._maxDepth=z,A._backgroundColor=T.paper_bgcolor,A._entryDepth=h.data.depth,A._atRootLevel=L;var W=-O/2+I.l+I.w*(U.x[1]+U.x[0])/2,K=-G/2+I.t+I.h*(1-(U.y[1]+U.y[0])/2),nt=function(Yt){return W+Yt},it=function(Yt){return K+Yt},ot=it(0),ct=nt(0),bt=function(Yt){return ct+Yt},ut=function(Yt){return ot+Yt};function pt(Yt,ve){return Yt+","+ve}var yt=bt(0),Tt=function(Yt){Yt.x=Math.max(yt,Yt.x)},kt=A.pathbar.edgeshape,zt=function(Yt){var ve=bt(Math.max(Math.min(Yt.x0,Yt.x0),0)),Re=bt(Math.min(Math.max(Yt.x1,Yt.x1),$)),ir=ut(Yt.y0),Ie=ut(Yt.y1),Be=tt/2,Ye={},ze={};Ye.x=ve,ze.x=Re,Ye.y=ze.y=(ir+Ie)/2;var Ee={x:ve,y:ir},Wt={x:Re,y:ir},ee={x:Re,y:Ie},Xt={x:ve,y:Ie};return kt===">"?(Ee.x-=Be,Wt.x-=Be,ee.x-=Be,Xt.x-=Be):kt==="/"?(ee.x-=Be,Xt.x-=Be,Ye.x-=Be/2,ze.x-=Be/2):kt==="\\"?(Ee.x-=Be,Wt.x-=Be,Ye.x-=Be/2,ze.x-=Be/2):kt==="<"&&(Ye.x-=Be,ze.x-=Be),Tt(Ee),Tt(Xt),Tt(Ye),Tt(Wt),Tt(ee),Tt(ze),"M"+pt(Ee.x,Ee.y)+"L"+pt(Wt.x,Wt.y)+"L"+pt(ze.x,ze.y)+"L"+pt(ee.x,ee.y)+"L"+pt(Xt.x,Xt.y)+"L"+pt(Ye.x,Ye.y)+"Z"},Rt=function(Yt){var ve=nt(Yt.x0),Re=nt(Yt.x1),ir=it(Yt.y0),Ie=it(Yt.y1),Be=Re-ve,Ye=Ie-ir;if(!Be||!Ye)return"";var ze=0,Ee=Be>2*ze&&Ye>2*ze?ze:0,Wt=function(ee,Xt){return Ee?"a"+pt(Ee,Ee)+" 0 0 1 "+pt(ee,Xt):""};return"M"+pt(ve,ir+Ee)+Wt(Ee,-Ee)+"L"+pt(Re-Ee,ir)+Wt(Ee,Ee)+"L"+pt(Re,Ie-Ee)+Wt(-Ee,Ee)+"L"+pt(ve+Ee,Ie)+Wt(-Ee,-Ee)+"Z"},Gt=function(Yt,ve){var Re=Yt.x0,ir=Yt.x1,Ie=Yt.y0,Be=Yt.y1,Ye=Yt.textBB,ze=function(Ne){return A.textposition.indexOf(Ne)!==-1},Ee=ze("bottom"),Wt=ze("top")||ve.isHeader&&!Ee,ee=Wt?"start":Ee?"end":"middle",Xt=ze("right"),St=ze("left")||ve.onPathbar,Vt=St?-1:Xt?1:0,Zt=A[p?"tiling":"marker"].pad;if(ve.isHeader){if(Re+=(p?Zt:Zt.l)-t,ir-=(p?Zt:Zt.r)-t,Re>=ir){var qt=(Re+ir)/2;Re=qt,ir=qt}var Te;Ee?(Te=Be-(p?Zt:Zt.b),Ie<Te&&Te<Be&&(Ie=Te)):(Te=Ie+(p?Zt:Zt.t),Ie<Te&&Te<Be&&(Be=Te))}var me=i(Re,ir,Ie,Be,Ye,{isHorizontal:!1,constrained:!0,angle:0,anchor:ee,leftToRight:Vt});return me.fontSize=ve.fontSize,me.targetX=nt(me.targetX),me.targetY=it(me.targetY),isNaN(me.targetX)||isNaN(me.targetY)?{}:(Re!==ir&&Ie!==Be&&n(A.type,me,T),{scale:me.scale,rotate:me.rotate,textX:me.textX,textY:me.textY,anchorX:me.anchorX,anchorY:me.anchorY,targetX:me.targetX,targetY:me.targetY})},wt=function(Yt,ve){for(var Re,ir=0,Ie=Yt;!Re&&ir<z;)ir++,Ie=Ie.parent,Ie?Re=et(Ie,ve):ir=z;return Re||{}},It=function(Yt,ve,Re,ir){var Ie=et(Yt,ve),Be;if(ve)Be=J;else{var Ye=et(h,ve);Ye?Be=st(Yt,Ye,ir):Be={}}return l(Ie,Be)},$t=function(Yt,ve,Re,ir,Ie){var Be=et(Yt,ve),Ye;if(Be)Ye=Be;else if(ve)Ye=J;else if(at)if(Yt.parent){var ze=H||Re;ze&&!ve?Ye=st(Yt,ze,ir):(Ye={},x.extendFlat(Ye,wt(Yt,ve)))}else Ye=x.extendFlat({},Yt),p&&(Ie.orientation==="h"?Ie.flipX?Ye.x0=Yt.x1:Ye.x1=0:Ie.flipY?Ye.y0=Yt.y1:Ye.y1=0);else Ye={};return l(Ye,{x0:Yt.x0,x1:Yt.x1,y0:Yt.y0,y1:Yt.y1})},Qt=function(Yt,ve,Re,ir){var Ie=et(Yt,ve),Be={},Ye=q(Yt,ve,Re,ir);x.extendFlat(Be,{transform:Gt({x0:Ye.x0,x1:Ye.x1,y0:Ye.y0,y1:Ye.y1,textBB:Yt.textBB,_text:Yt._text},{isHeader:m.isHeader(Yt,A)})}),Ie?Be=Ie:Yt.parent&&x.extendFlat(Be,wt(Yt,ve));var ze=Yt.transform;return Yt.x0!==Yt.x1&&Yt.y0!==Yt.y1&&n(A.type,ze,T),l(Be,{transform:{scale:ze.scale,rotate:ze.rotate,textX:ze.textX,textY:ze.textY,anchorX:ze.anchorX,anchorY:ze.anchorY,targetX:ze.targetX,targetY:ze.targetY}})},Nt=function(Yt,ve,Re,ir,Ie){var Be=ir[0],Ye=ir[1];R?Yt.exit().transition().each(function(){var ze=f.select(this),Ee=ze.select("path.surface");Ee.transition().attrTween("d",function(ee){var Xt=It(ee,ve,Re,[Be,Ye]);return function(St){return Ie(Xt(St))}});var Wt=ze.select("g.slicetext");Wt.attr("opacity",0)}).remove():Yt.exit().remove()},Pt=function(Yt){var ve=Yt.transform;return Yt.x0!==Yt.x1&&Yt.y0!==Yt.y1&&n(A.type,ve,T),x.getTextTransform({textX:ve.textX,textY:ve.textY,anchorX:ve.anchorX,anchorY:ve.anchorY,targetX:ve.targetX,targetY:ve.targetY,scale:ve.scale,rotate:ve.rotate})};R&&(S.each(function(Yt){lt[o(Yt)]={x0:Yt.x0,x1:Yt.x1,y0:Yt.y0,y1:Yt.y1},Yt.transform&&(lt[o(Yt)].transform={textX:Yt.transform.textX,textY:Yt.transform.textY,anchorX:Yt.transform.anchorX,anchorY:Yt.transform.anchorY,targetX:Yt.transform.targetX,targetY:Yt.transform.targetY,scale:Yt.transform.scale,rotate:Yt.transform.rotate})}),M.each(function(Yt){F[o(Yt)]={x0:Yt.x0,x1:Yt.x1,y0:Yt.y0,y1:Yt.y1},Yt.transform&&(F[o(Yt)].transform={textX:Yt.transform.textX,textY:Yt.transform.textY,anchorX:Yt.transform.anchorX,anchorY:Yt.transform.anchorY,targetX:Yt.transform.targetX,targetY:Yt.transform.targetY,scale:Yt.transform.scale,rotate:Yt.transform.rotate}),!at&&m.isEntry(Yt)&&(at=Yt)})),H=u(g,b,h,M,{width:O,height:G,viewX:nt,viewY:it,pathSlice:Rt,toMoveInsideSlice:Gt,prevEntry:at,makeUpdateSliceInterpolator:$t,makeUpdateTextInterpolator:Qt,handleSlicesExit:Nt,hasTransition:R,strTransform:Pt}),A.pathbar.visible?s(g,b,h,S,{barDifY:X,width:$,height:tt,viewX:bt,viewY:ut,pathSlice:zt,toMoveInsideSlice:Gt,makeUpdateSliceInterpolator:$t,makeUpdateTextInterpolator:Qt,handleSlicesExit:Nt,hasTransition:R,strTransform:Pt}):S.remove()}},{"../../lib":515,"../bar/constants":659,"../bar/plot":668,"../bar/uniform_text":673,"../sunburst/helpers":1064,"./constants":1087,"./draw_ancestors":1090,"@plotly/d3":58,"d3-interpolate":116}],1099:[function(e,B,V){var f=e("@plotly/d3"),l=e("../../components/color"),m=e("../../lib"),x=e("../sunburst/helpers"),t=e("../bar/uniform_text").resizeText;function a(r){var n=r._fullLayout._treemaplayer.selectAll(".trace");t(r,n,"treemap"),n.each(function(d){var s=f.select(this),o=d[0],y=o.trace;s.style("opacity",y.opacity),s.selectAll("path.surface").each(function(g){f.select(this).call(i,g,y,{hovered:!1})})})}function i(r,n,d,s){var o=(s||{}).hovered,y=n.data.data,g=y.i,b,v,_=y.color,u=x.isHierarchyRoot(n),T=1;if(o)b=d._hovered.marker.line.color,v=d._hovered.marker.line.width;else if(u&&_===d.root.color)T=100,b="rgba(0,0,0,0)",v=0;else if(b=m.castOption(d,g,"marker.line.color")||l.defaultLine,v=m.castOption(d,g,"marker.line.width")||0,!d._hasColorscale&&!n.onPathbar){var c=d.marker.depthfade;if(c){var A=l.combine(l.addOpacity(d._backgroundColor,.75),_),k;if(c===!0){var p=x.getMaxDepth(d);isFinite(p)?x.isLeaf(n)?k=0:k=d._maxVisibleLayers-(n.data.depth-d._entryDepth):k=n.data.height+1}else k=n.data.depth-d._entryDepth,d._atRootLevel||k++;if(k>0)for(var w=0;w<k;w++){var h=.5*w/k;_=l.combine(l.addOpacity(A,h),_)}}}r.style("stroke-width",v).call(l.fill,_).call(l.stroke,b).style("opacity",T)}B.exports={style:a,styleOne:i}},{"../../components/color":367,"../../lib":515,"../bar/uniform_text":673,"../sunburst/helpers":1064,"@plotly/d3":58}],1100:[function(e,B,V){var f=e("../box/attributes"),l=e("../../lib/extend").extendFlat,m=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat;B.exports={y:f.y,x:f.x,x0:f.x0,y0:f.y0,xhoverformat:m("x"),yhoverformat:m("y"),name:l({},f.name,{}),orientation:l({},f.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:f.fillcolor,points:l({},f.boxpoints,{}),jitter:l({},f.jitter,{}),pointpos:l({},f.pointpos,{}),width:l({},f.width,{}),marker:f.marker,text:f.text,hovertext:f.hovertext,hovertemplate:f.hovertemplate,quartilemethod:f.quartilemethod,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:f.offsetgroup,alignmentgroup:f.alignmentgroup,selected:f.selected,unselected:f.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},{"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../box/attributes":682}],1101:[function(e,B,V){var f=e("../../lib"),l=e("../../plots/cartesian/axes"),m=e("../box/calc"),x=e("./helpers"),t=e("../../constants/numerical").BADNUM;B.exports=function(d,s){var o=m(d,s);if(o[0].t.empty)return o;for(var y=d._fullLayout,g=l.getFromId(d,s[s.orientation==="h"?"xaxis":"yaxis"]),b=1/0,v=-1/0,_=0,u=0,T=0;T<o.length;T++){var c=o[T],A=c.pts.map(x.extractVal),k=c.bandwidth=i(s,c,A),p=c.span=r(s,c,g,k);if(c.min===c.max&&k===0)p=c.span=[c.min,c.max],c.density=[{v:1,t:p[0]}],c.bandwidth=k,_=Math.max(_,1);else{var w=p[1]-p[0],h=Math.ceil(w/(k/3)),D=w/h;if(!isFinite(D)||!isFinite(h))return f.error("Something went wrong with computing the violin span"),o[0].t.empty=!0,o;var S=x.makeKDE(c,s,A);c.density=new Array(h);for(var M=0,L=p[0];L<p[1]+D/2;M++,L+=D){var R=S(L);c.density[M]={v:R,t:L},_=Math.max(_,R)}}u=Math.max(u,A.length),b=Math.min(b,p[0]),v=Math.max(v,p[1])}var z=l.findExtremes(g,[b,v],{padded:!0});if(s._extremes[g._id]=z,s.width)o[0].t.maxKDE=_;else{var P=y._violinScaleGroupStats,I=s.scalegroup,U=P[I];U?(U.maxKDE=Math.max(U.maxKDE,_),U.maxCount=Math.max(U.maxCount,u)):P[I]={maxKDE:_,maxCount:u}}return o[0].t.labels.kde=f._(d,"kde:"),o};function a(n,d,s){var o=Math.min(d,s/1.349);return 1.059*o*Math.pow(n,-.2)}function i(n,d,s){var o=d.max-d.min;if(!o)return n.bandwidth?n.bandwidth:0;if(n.bandwidth)return Math.max(n.bandwidth,o/1e4);var y=s.length,g=f.stdev(s,y-1,d.mean);return Math.max(a(y,g,d.q3-d.q1),o/100)}function r(n,d,s,o){var y=n.spanmode,g=n.span||[],b=[d.min,d.max],v=[d.min-2*o,d.max+2*o],_;function u(c){var A=g[c],k=s.type==="multicategory"?s.r2c(A):s.d2c(A,0,n[d.valLetter+"calendar"]);return k===t?v[c]:k}y==="soft"?_=v:y==="hard"?_=b:_=[u(0),u(1)];var T={type:"linear",range:_};return l.setConvert(T),T.cleanRange(),_}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/axes":566,"../box/calc":683,"./helpers":1104}],1102:[function(e,B,V){var f=e("../box/cross_trace_calc").setPositionOffset,l=["v","h"];B.exports=function(x,t){for(var a=x.calcdata,i=t.xaxis,r=t.yaxis,n=0;n<l.length;n++){for(var d=l[n],s=d==="h"?r:i,o=[],y=0;y<a.length;y++){var g=a[y],b=g[0].t,v=g[0].trace;v.visible===!0&&v.type==="violin"&&!b.empty&&v.orientation===d&&v.xaxis===i._id&&v.yaxis===r._id&&o.push(y)}f("violin",x,o,s)}}},{"../box/cross_trace_calc":684}],1103:[function(e,B,V){var f=e("../../lib"),l=e("../../components/color"),m=e("../box/defaults"),x=e("./attributes");B.exports=function(a,i,r,n){function d(D,S){return f.coerce(a,i,x,D,S)}function s(D,S){return f.coerce2(a,i,x,D,S)}if(m.handleSampleDefaults(a,i,d,n),i.visible!==!1){d("bandwidth"),d("side");var o=d("width");o||(d("scalegroup",i.name),d("scalemode"));var y=d("span"),g;Array.isArray(y)&&(g="manual"),d("spanmode",g);var b=d("line.color",(a.marker||{}).color||r),v=d("line.width"),_=d("fillcolor",l.addOpacity(i.line.color,.5));m.handlePointsDefaults(a,i,d,{prefix:""});var u=s("box.width"),T=s("box.fillcolor",_),c=s("box.line.color",b),A=s("box.line.width",v),k=d("box.visible",Boolean(u||T||c||A));k||(i.box={visible:!1});var p=s("meanline.color",b),w=s("meanline.width",v),h=d("meanline.visible",Boolean(p||w));h||(i.meanline={visible:!1}),d("quartilemethod")}}},{"../../components/color":367,"../../lib":515,"../box/defaults":685,"./attributes":1100}],1104:[function(e,B,V){var f=e("../../lib"),l={gaussian:function(m){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*m*m)}};V.makeKDE=function(m,x,t){var a=t.length,i=l.gaussian,r=m.bandwidth,n=1/(a*r);return function(d){for(var s=0,o=0;o<a;o++)s+=i((d-t[o])/r);return n*s}},V.getPositionOnKdePath=function(m,x,t){var a,i;x.orientation==="h"?(a="y",i="x"):(a="x",i="y");var r=f.findPointOnPath(m.path,t,i,{pathLength:m.pathLength}),n=m.posCenterPx,d=r[a],s=x.side==="both"?2*n-d:n;return[d,s]},V.getKdeValue=function(m,x,t){var a=m.pts.map(V.extractVal),i=V.makeKDE(m,x,a);return i(t)/m.posDensityScale},V.extractVal=function(m){return m.v}},{"../../lib":515}],1105:[function(e,B,V){var f=e("../../lib"),l=e("../../plots/cartesian/axes"),m=e("../box/hover"),x=e("./helpers");B.exports=function(a,i,r,n,d){d||(d={});var s=d.hoverLayer,o=a.cd,y=o[0].trace,g=y.hoveron,b=g.indexOf("violins")!==-1,v=g.indexOf("kde")!==-1,_=[],u,T;if(b||v){var c=m.hoverOnBoxes(a,i,r,n);if(v&&c.length>0){var A=a.xa,k=a.ya,p,w,h,D,S;y.orientation==="h"?(S=i,p="y",h=k,w="x",D=A):(S=r,p="x",h=A,w="y",D=k);var M=o[a.index];if(S>=M.span[0]&&S<=M.span[1]){var L=f.extendFlat({},a),R=D.c2p(S,!0),z=x.getKdeValue(M,y,S),P=x.getPositionOnKdePath(M,y,R),I=h._offset,U=h._length;L[p+"0"]=P[0],L[p+"1"]=P[1],L[w+"0"]=L[w+"1"]=R,L[w+"Label"]=w+": "+l.hoverLabelText(D,S,y[w+"hoverformat"])+", "+o[0].t.labels.kde+" "+z.toFixed(3);for(var O=0,G=0;G<c.length;G++)if(c[G].attr==="med"){O=G;break}L.spikeDistance=c[O].spikeDistance;var $=p+"Spike";L[$]=c[O][$],c[O].spikeDistance=void 0,c[O][$]=void 0,L.hovertemplate=!1,_.push(L),T={stroke:a.color},T[p+"1"]=f.constrain(I+P[0],I,I+U),T[p+"2"]=f.constrain(I+P[1],I,I+U),T[w+"1"]=T[w+"2"]=D._offset+R}}b&&(_=_.concat(c))}g.indexOf("points")!==-1&&(u=m.hoverOnPoints(a,i,r));var tt=s.selectAll(".violinline-"+y.uid).data(T?[0]:[]);return tt.enter().append("line").classed("violinline-"+y.uid,!0).attr("stroke-width",1.5),tt.exit().remove(),tt.attr(T),n==="closest"?u?[u]:_:(u&&_.push(u),_)}},{"../../lib":515,"../../plots/cartesian/axes":566,"../box/hover":687,"./helpers":1104}],1106:[function(e,B,V){B.exports={attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("../box/defaults").crossTraceDefaults,supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),crossTraceCalc:e("./cross_trace_calc"),plot:e("./plot"),style:e("./style"),styleOnSelect:e("../scatter/style").styleOnSelect,hoverPoints:e("./hover"),selectPoints:e("../box/select"),moduleType:"trace",name:"violin",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":578,"../box/defaults":685,"../box/select":692,"../scatter/style":960,"./attributes":1100,"./calc":1101,"./cross_trace_calc":1102,"./defaults":1103,"./hover":1105,"./layout_attributes":1107,"./layout_defaults":1108,"./plot":1109,"./style":1110}],1107:[function(e,B,V){var f=e("../box/layout_attributes"),l=e("../../lib").extendFlat;B.exports={violinmode:l({},f.boxmode,{}),violingap:l({},f.boxgap,{}),violingroupgap:l({},f.boxgroupgap,{})}},{"../../lib":515,"../box/layout_attributes":689}],1108:[function(e,B,V){var f=e("../../lib"),l=e("./layout_attributes"),m=e("../box/layout_defaults");B.exports=function(t,a,i){function r(n,d){return f.coerce(t,a,l,n,d)}m._supply(t,a,i,r,"violin")}},{"../../lib":515,"../box/layout_defaults":690,"./layout_attributes":1107}],1109:[function(e,B,V){var f=e("@plotly/d3"),l=e("../../lib"),m=e("../../components/drawing"),x=e("../box/plot"),t=e("../scatter/line_points"),a=e("./helpers");B.exports=function(r,n,d,s){var o=r._fullLayout,y=n.xaxis,g=n.yaxis;function b(v){var _=t(v,{xaxis:y,yaxis:g,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return m.smoothopen(_[0],1)}l.makeTraceGroups(s,d,"trace violins").each(function(v){var _=f.select(this),u=v[0],T=u.t,c=u.trace;if(c.visible!==!0||T.empty){_.remove();return}var A=T.bPos,k=T.bdPos,p=n[T.valLetter+"axis"],w=n[T.posLetter+"axis"],h=c.side==="both",D=h||c.side==="positive",S=h||c.side==="negative",M=_.selectAll("path.violin").data(l.identity);M.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","violin"),M.exit().remove(),M.each(function(G){var $=f.select(this),tt=G.density,Z=tt.length,X=w.c2l(G.pos+A,!0),J=w.l2p(X),st;if(c.width)st=T.maxKDE/k;else{var at=o._violinScaleGroupStats[c.scalegroup];st=c.scalemode==="count"?at.maxKDE/k*(at.maxCount/G.pts.length):at.maxKDE/k}var lt,F,H,et,q,W,K;if(D){for(W=new Array(Z),et=0;et<Z;et++)K=W[et]={},K[T.posLetter]=X+tt[et].v/st,K[T.valLetter]=p.c2l(tt[et].t,!0);lt=b(W)}if(S){for(W=new Array(Z),q=0,et=Z-1;q<Z;q++,et--)K=W[q]={},K[T.posLetter]=X-tt[et].v/st,K[T.valLetter]=p.c2l(tt[et].t,!0);F=b(W)}if(h)H=lt+"L"+F.substr(1)+"Z";else{var nt=[J,p.c2p(tt[0].t)],it=[J,p.c2p(tt[Z-1].t)];c.orientation==="h"&&(nt.reverse(),it.reverse()),D?H="M"+nt+"L"+lt.substr(1)+"L"+it:H="M"+it+"L"+F.substr(1)+"L"+nt}$.attr("d",H),G.posCenterPx=J,G.posDensityScale=st*k,G.path=$.node(),G.pathLength=G.path.getTotalLength()/(h?2:1)});var L=c.box,R=L.width,z=(L.line||{}).width,P,I;h?(P=k*R,I=0):D?(P=[0,k*R/2],I=z*{x:1,y:-1}[T.posLetter]):(P=[k*R/2,0],I=z*{x:-1,y:1}[T.posLetter]),x.plotBoxAndWhiskers(_,{pos:w,val:p},c,{bPos:A,bdPos:P,bPosPxOffset:I}),x.plotBoxMean(_,{pos:w,val:p},c,{bPos:A,bdPos:P,bPosPxOffset:I});var U;!c.box.visible&&c.meanline.visible&&(U=l.identity);var O=_.selectAll("path.meanline").data(U||[]);O.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect","non-scaling-stroke"),O.exit().remove(),O.each(function(G){var $=p.c2p(G.mean,!0),tt=a.getPositionOnKdePath(G,c,$);f.select(this).attr("d",c.orientation==="h"?"M"+$+","+tt[0]+"V"+tt[1]:"M"+tt[0]+","+$+"H"+tt[1])}),x.plotPoints(_,{x:y,y:g},c,T)})}},{"../../components/drawing":389,"../../lib":515,"../box/plot":691,"../scatter/line_points":950,"./helpers":1104,"@plotly/d3":58}],1110:[function(e,B,V){var f=e("@plotly/d3"),l=e("../../components/color"),m=e("../scatter/style").stylePoints;B.exports=function(t){var a=f.select(t).selectAll("g.trace.violins");a.style("opacity",function(i){return i[0].trace.opacity}),a.each(function(i){var r=i[0].trace,n=f.select(this),d=r.box||{},s=d.line||{},o=r.meanline||{},y=o.width;n.selectAll("path.violin").style("stroke-width",r.line.width+"px").call(l.stroke,r.line.color).call(l.fill,r.fillcolor),n.selectAll("path.box").style("stroke-width",s.width+"px").call(l.stroke,s.color).call(l.fill,d.fillcolor);var g={"stroke-width":y+"px","stroke-dasharray":2*y+"px,"+y+"px"};n.selectAll("path.mean").style(g).call(l.stroke,o.color),n.selectAll("path.meanline").style(g).call(l.stroke,o.color),m(n,r,t)})}},{"../../components/color":367,"../scatter/style":960,"@plotly/d3":58}],1111:[function(e,B,V){var f=e("../../components/colorscale/attributes"),l=e("../isosurface/attributes"),m=e("../surface/attributes"),x=e("../../plots/attributes"),t=e("../../lib/extend").extendFlat,a=e("../../plot_api/edit_types").overrideAll,i=B.exports=a(t({x:l.x,y:l.y,z:l.z,value:l.value,isomin:l.isomin,isomax:l.isomax,surface:l.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:l.slices,caps:l.caps,text:l.text,hovertext:l.hovertext,xhoverformat:l.xhoverformat,yhoverformat:l.yhoverformat,zhoverformat:l.zhoverformat,valuehoverformat:l.valuehoverformat,hovertemplate:l.hovertemplate},f("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:l.colorbar,opacity:l.opacity,opacityscale:m.opacityscale,lightposition:l.lightposition,lighting:l.lighting,flatshading:l.flatshading,contour:l.contour,hoverinfo:t({},x.hoverinfo),showlegend:t({},x.showlegend,{dflt:!1})}),"calc","nested");i.x.editType=i.y.editType=i.z.editType=i.value.editType="calc+clearAxisTypes",i.transforms=void 0},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../isosurface/attributes":871,"../surface/attributes":1070}],1112:[function(e,B,V){var f=e("../../../stackgl_modules").gl_mesh3d,l=e("../../lib/gl_format_color").parseColorScale,m=e("../../lib/str2rgbarray"),x=e("../../components/colorscale").extractOpts,t=e("../../plots/gl3d/zip3"),a=e("../isosurface/convert").findNearestOnAxis,i=e("../isosurface/convert").generateIsoMeshes;function r(s,o,y){this.scene=s,this.uid=y,this.mesh=o,this.name="",this.data=null,this.showContour=!1}var n=r.prototype;n.handlePick=function(s){if(s.object===this.mesh){var o=s.data.index,y=this.data._meshX[o],g=this.data._meshY[o],b=this.data._meshZ[o],v=this.data._Ys.length,_=this.data._Zs.length,u=a(y,this.data._Xs).id,T=a(g,this.data._Ys).id,c=a(b,this.data._Zs).id,A=s.index=c+_*T+_*v*u;s.traceCoordinate=[this.data._meshX[A],this.data._meshY[A],this.data._meshZ[A],this.data._value[A]];var k=this.data.hovertext||this.data.text;return Array.isArray(k)&&k[A]!==void 0?s.textLabel=k[A]:k&&(s.textLabel=k),!0}},n.update=function(s){var o=this.scene,y=o.fullSceneLayout;this.data=i(s);function g(T,c,A,k){return c.map(function(p){return T.d2l(p,0,k)*A})}var b=t(g(y.xaxis,s._meshX,o.dataScale[0],s.xcalendar),g(y.yaxis,s._meshY,o.dataScale[1],s.ycalendar),g(y.zaxis,s._meshZ,o.dataScale[2],s.zcalendar)),v=t(s._meshI,s._meshJ,s._meshK),_={positions:b,cells:v,lightPosition:[s.lightposition.x,s.lightposition.y,s.lightposition.z],ambient:s.lighting.ambient,diffuse:s.lighting.diffuse,specular:s.lighting.specular,roughness:s.lighting.roughness,fresnel:s.lighting.fresnel,vertexNormalsEpsilon:s.lighting.vertexnormalsepsilon,faceNormalsEpsilon:s.lighting.facenormalsepsilon,opacity:s.opacity,opacityscale:s.opacityscale,contourEnable:s.contour.show,contourColor:m(s.contour.color).slice(0,3),contourWidth:s.contour.width,useFacetNormals:s.flatshading},u=x(s);_.vertexIntensity=s._meshIntensity,_.vertexIntensityBounds=[u.min,u.max],_.colormap=l(s),this.mesh.update(_)},n.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function d(s,o){var y=s.glplot.gl,g=f({gl:y}),b=new r(s,g,o.uid);return g._trace=b,b.update(o),s.glplot.add(g),b}B.exports=d},{"../../../stackgl_modules":1133,"../../components/colorscale":379,"../../lib/gl_format_color":511,"../../lib/str2rgbarray":540,"../../plots/gl3d/zip3":618,"../isosurface/convert":873}],1113:[function(e,B,V){var f=e("../../lib"),l=e("./attributes"),m=e("../isosurface/defaults").supplyIsoDefaults,x=e("../surface/defaults").opacityscaleDefaults;B.exports=function(a,i,r,n){function d(s,o){return f.coerce(a,i,l,s,o)}m(a,i,r,n,d),x(a,i,n,d)}},{"../../lib":515,"../isosurface/defaults":874,"../surface/defaults":1073,"./attributes":1111}],1114:[function(e,B,V){B.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("../isosurface/calc"),colorbar:{min:"cmin",max:"cmax"},plot:e("./convert"),moduleType:"trace",name:"volume",basePlotModule:e("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":607,"../isosurface/calc":872,"./attributes":1111,"./convert":1112,"./defaults":1113}],1115:[function(e,B,V){var f=e("../bar/attributes"),l=e("../scatter/attributes").line,m=e("../../plots/attributes"),x=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,t=e("../../plots/template_attributes").hovertemplateAttrs,a=e("../../plots/template_attributes").texttemplateAttrs,i=e("./constants"),r=e("../../lib/extend").extendFlat,n=e("../../components/color");function d(s){return{marker:{color:r({},f.marker.color,{arrayOk:!1,editType:"style"}),line:{color:r({},f.marker.line.color,{arrayOk:!1,editType:"style"}),width:r({},f.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}B.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:f.x,x0:f.x0,dx:f.dx,y:f.y,y0:f.y0,dy:f.dy,xperiod:f.xperiod,yperiod:f.yperiod,xperiod0:f.xperiod0,yperiod0:f.yperiod0,xperiodalignment:f.xperiodalignment,yperiodalignment:f.yperiodalignment,xhoverformat:x("x"),yhoverformat:x("y"),hovertext:f.hovertext,hovertemplate:t({},{keys:i.eventDataKeys}),hoverinfo:r({},m.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:a({editType:"plot"},{keys:i.eventDataKeys.concat(["label"])}),text:f.text,textposition:f.textposition,insidetextanchor:f.insidetextanchor,textangle:f.textangle,textfont:f.textfont,insidetextfont:f.insidetextfont,outsidetextfont:f.outsidetextfont,constraintext:f.constraintext,cliponaxis:f.cliponaxis,orientation:f.orientation,offset:f.offset,width:f.width,increasing:d(),decreasing:d(),totals:d(),connector:{line:{color:r({},l.color,{dflt:n.defaultLine}),width:r({},l.width,{editType:"plot"}),dash:l.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:f.offsetgroup,alignmentgroup:f.alignmentgroup}},{"../../components/color":367,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../bar/attributes":657,"../scatter/attributes":936,"./constants":1117}],1116:[function(e,B,V){var f=e("../../plots/cartesian/axes"),l=e("../../plots/cartesian/align_period"),m=e("../../lib").mergeArray,x=e("../scatter/calc_selection"),t=e("../../constants/numerical").BADNUM;function a(r){return r==="a"||r==="absolute"}function i(r){return r==="t"||r==="total"}B.exports=function(n,d){var s=f.getFromId(n,d.xaxis||"x"),o=f.getFromId(n,d.yaxis||"y"),y,g,b,v,_,u;d.orientation==="h"?(y=s.makeCalcdata(d,"x"),b=o.makeCalcdata(d,"y"),v=l(d,o,"y",b),_=!!d.yperiodalignment,u="y"):(y=o.makeCalcdata(d,"y"),b=s.makeCalcdata(d,"x"),v=l(d,s,"x",b),_=!!d.xperiodalignment,u="x"),g=v.vals;for(var T=Math.min(g.length,y.length),c=new Array(T),A=0,k,p=!1,w=0;w<T;w++){var h=y[w]||0,D=!1;(y[w]!==t||i(d.measure[w])||a(d.measure[w]))&&w+1<T&&(y[w+1]!==t||i(d.measure[w+1])||a(d.measure[w+1]))&&(D=!0);var S=c[w]={i:w,p:g[w],s:h,rawS:h,cNext:D};a(d.measure[w])?(A=S.s,S.isSum=!0,S.dir="totals",S.s=A):i(d.measure[w])?(S.isSum=!0,S.dir="totals",S.s=A):(S.isSum=!1,S.dir=S.rawS<0?"decreasing":"increasing",k=S.s,S.s=A+k,A+=k),S.dir==="totals"&&(p=!0),_&&(c[w].orig_p=b[w],c[w][u+"End"]=v.ends[w],c[w][u+"Start"]=v.starts[w]),d.ids&&(S.id=String(d.ids[w])),S.v=(d.base||0)+A}return c.length&&(c[0].hasTotals=p),m(d.text,c,"tx"),m(d.hovertext,c,"htx"),x(c,d),c}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"../scatter/calc_selection":938}],1117:[function(e,B,V){B.exports={eventDataKeys:["initial","delta","final"]}},{}],1118:[function(e,B,V){var f=e("../bar/cross_trace_calc").setGroupPositions;B.exports=function(m,x){var t=m._fullLayout,a=m._fullData,i=m.calcdata,r=x.xaxis,n=x.yaxis,d=[],s=[],o=[],y,g;for(g=0;g<a.length;g++){var b=a[g];b.visible===!0&&b.xaxis===r._id&&b.yaxis===n._id&&b.type==="waterfall"&&(y=i[g],b.orientation==="h"?o.push(y):s.push(y),d.push(y))}var v={mode:t.waterfallmode,norm:t.waterfallnorm,gap:t.waterfallgap,groupgap:t.waterfallgroupgap};for(f(m,r,n,s,v),f(m,n,r,o,v),g=0;g<d.length;g++){y=d[g];for(var _=0;_<y.length;_++){var u=y[_];u.isSum===!1&&(u.s0+=_===0?0:y[_-1].s),_+1<y.length&&(y[_].nextP0=y[_+1].p0,y[_].nextS0=y[_+1].s0)}}}},{"../bar/cross_trace_calc":660}],1119:[function(e,B,V){var f=e("../../lib"),l=e("../bar/defaults").handleGroupingDefaults,m=e("../bar/defaults").handleText,x=e("../scatter/xy_defaults"),t=e("../scatter/period_defaults"),a=e("./attributes"),i=e("../../components/color"),r=e("../../constants/delta.js"),n=r.INCREASING.COLOR,d=r.DECREASING.COLOR,s="#4499FF";function o(b,v,_){b(v+".marker.color",_),b(v+".marker.line.color",i.defaultLine),b(v+".marker.line.width")}function y(b,v,_,u){function T(w,h){return f.coerce(b,v,a,w,h)}var c=x(b,v,u,T);if(!c){v.visible=!1;return}t(b,v,u,T),T("xhoverformat"),T("yhoverformat"),T("measure"),T("orientation",v.x&&!v.y?"h":"v"),T("base"),T("offset"),T("width"),T("text"),T("hovertext"),T("hovertemplate");var A=T("textposition");m(b,v,u,T,A,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),v.textposition!=="none"&&(T("texttemplate"),v.texttemplate||T("textinfo")),o(T,"increasing",n),o(T,"decreasing",d),o(T,"totals",s);var k=T("connector.visible");if(k){T("connector.mode");var p=T("connector.line.width");p&&(T("connector.line.color"),T("connector.line.dash"))}}function g(b,v){var _,u;function T(A){return f.coerce(u._input,u,a,A)}if(v.waterfallmode==="group")for(var c=0;c<b.length;c++)u=b[c],_=u._input,l(_,u,v,T)}B.exports={supplyDefaults:y,crossTraceDefaults:g}},{"../../components/color":367,"../../constants/delta.js":485,"../../lib":515,"../bar/defaults":661,"../scatter/period_defaults":956,"../scatter/xy_defaults":963,"./attributes":1115}],1120:[function(e,B,V){B.exports=function(l,m){return l.x="xVal"in m?m.xVal:m.x,l.y="yVal"in m?m.yVal:m.y,"initial"in m&&(l.initial=m.initial),"delta"in m&&(l.delta=m.delta),"final"in m&&(l.final=m.final),m.xa&&(l.xaxis=m.xa),m.ya&&(l.yaxis=m.ya),l}},{}],1121:[function(e,B,V){var f=e("../../plots/cartesian/axes").hoverLabelText,l=e("../../components/color").opacity,m=e("../bar/hover").hoverOnBars,x=e("../../constants/delta.js"),t={increasing:x.INCREASING.SYMBOL,decreasing:x.DECREASING.SYMBOL};B.exports=function(r,n,d,s,o){var y=m(r,n,d,s,o);if(!y)return;var g=y.cd,b=g[0].trace,v=b.orientation==="h",_=v?"x":"y",u=v?r.xa:r.ya;function T(L){return f(u,L,b[_+"hoverformat"])}var c=y.index,A=g[c],k=A.isSum?A.b+A.s:A.rawS;if(!A.isSum){y.initial=A.b+A.s-k,y.delta=k,y.final=y.initial+y.delta;var p=T(Math.abs(y.delta));y.deltaLabel=k<0?"("+p+")":p,y.finalLabel=T(y.final),y.initialLabel=T(y.initial)}var w=A.hi||b.hoverinfo,h=[];if(w&&w!=="none"&&w!=="skip"){var D=w==="all",S=w.split("+"),M=function(L){return D||S.indexOf(L)!==-1};A.isSum||(M("final")&&(v?!M("x"):!M("y"))&&h.push(y.finalLabel),M("delta")&&(k<0?h.push(y.deltaLabel+" "+t.decreasing):h.push(y.deltaLabel+" "+t.increasing)),M("initial")&&h.push("Initial: "+y.initialLabel))}return h.length&&(y.extraText=h.join("<br>")),y.color=a(b,A),[y]};function a(i,r){var n=i[r.dir].marker,d=n.color,s=n.line.color,o=n.line.width;if(l(d))return d;if(l(s)&&o)return s}},{"../../components/color":367,"../../constants/delta.js":485,"../../plots/cartesian/axes":566,"../bar/hover":664}],1122:[function(e,B,V){B.exports={attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults").supplyDefaults,crossTraceDefaults:e("./defaults").crossTraceDefaults,supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),crossTraceCalc:e("./cross_trace_calc"),plot:e("./plot"),style:e("./style").style,hoverPoints:e("./hover"),eventData:e("./event_data"),selectPoints:e("../bar/select"),moduleType:"trace",name:"waterfall",basePlotModule:e("../../plots/cartesian"),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},{"../../plots/cartesian":578,"../bar/select":669,"./attributes":1115,"./calc":1116,"./cross_trace_calc":1118,"./defaults":1119,"./event_data":1120,"./hover":1121,"./layout_attributes":1123,"./layout_defaults":1124,"./plot":1125,"./style":1126}],1123:[function(e,B,V){B.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],1124:[function(e,B,V){var f=e("../../lib"),l=e("./layout_attributes");B.exports=function(m,x,t){var a=!1;function i(d,s){return f.coerce(m,x,l,d,s)}for(var r=0;r<t.length;r++){var n=t[r];if(n.visible&&n.type==="waterfall"){a=!0;break}}a&&(i("waterfallmode"),i("waterfallgap",.2),i("waterfallgroupgap"))}},{"../../lib":515,"./layout_attributes":1123}],1125:[function(e,B,V){var f=e("@plotly/d3"),l=e("../../lib"),m=e("../../components/drawing"),x=e("../../constants/numerical").BADNUM,t=e("../bar/plot"),a=e("../bar/uniform_text").clearMinTextSize;B.exports=function(d,s,o,y){var g=d._fullLayout;a("waterfall",g),t.plot(d,s,o,y,{mode:g.waterfallmode,norm:g.waterfallmode,gap:g.waterfallgap,groupgap:g.waterfallgroupgap}),i(d,s,o,y)};function i(n,d,s,o){var y=d.xaxis,g=d.yaxis;l.makeTraceGroups(o,s,"trace bars").each(function(b){var v=f.select(this),_=b[0].trace,u=l.ensureSingle(v,"g","lines");if(!_.connector||!_.connector.visible){u.remove();return}var T=_.orientation==="h",c=_.connector.mode,A=u.selectAll("g.line").data(l.identity);A.enter().append("g").classed("line",!0),A.exit().remove();var k=A.size();A.each(function(p,w){if(!(w!==k-1&&!p.cNext)){var h=r(p,y,g,T),D=h[0],S=h[1],M="";D[0]!==x&&S[0]!==x&&D[1]!==x&&S[1]!==x&&(c==="spanning"&&!p.isSum&&w>0&&(T?M+="M"+D[0]+","+S[1]+"V"+S[0]:M+="M"+D[1]+","+S[0]+"H"+D[0]),c!=="between"&&(p.isSum||w<k-1)&&(T?M+="M"+D[1]+","+S[0]+"V"+S[1]:M+="M"+D[0]+","+S[1]+"H"+D[1]),D[2]!==x&&S[2]!==x&&(T?M+="M"+D[1]+","+S[1]+"V"+S[2]:M+="M"+D[1]+","+S[1]+"H"+D[2])),M===""&&(M="M0,0Z"),l.ensureSingle(f.select(this),"path").attr("d",M).call(m.setClipUrl,d.layerClipId,n)}})})}function r(n,d,s,o){var y=[],g=[],b=o?d:s,v=o?s:d;return y[0]=b.c2p(n.s0,!0),g[0]=v.c2p(n.p0,!0),y[1]=b.c2p(n.s1,!0),g[1]=v.c2p(n.p1,!0),y[2]=b.c2p(n.nextS0,!0),g[2]=v.c2p(n.nextP0,!0),o?[y,g]:[g,y]}},{"../../components/drawing":389,"../../constants/numerical":491,"../../lib":515,"../bar/plot":668,"../bar/uniform_text":673,"@plotly/d3":58}],1126:[function(e,B,V){var f=e("@plotly/d3"),l=e("../../components/drawing"),m=e("../../components/color"),x=e("../../constants/interactions").DESELECTDIM,t=e("../bar/style"),a=e("../bar/uniform_text").resizeText,i=t.styleTextPoints;function r(n,d,s){var o=s||f.select(n).selectAll("g.waterfalllayer").selectAll("g.trace");a(n,o,"waterfall"),o.style("opacity",function(y){return y[0].trace.opacity}),o.each(function(y){var g=f.select(this),b=y[0].trace;g.selectAll(".point > path").each(function(v){if(!v.isBlank){var _=b[v.dir].marker;f.select(this).call(m.fill,_.color).call(m.stroke,_.line.color).call(l.dashLine,_.line.dash,_.line.width).style("opacity",b.selectedpoints&&!v.selected?x:1)}}),i(g,b,n),g.selectAll(".lines").each(function(){var v=b.connector.line;l.lineGroupStyle(f.select(this).selectAll("path"),v.width,v.color,v.dash)})})}B.exports={style:r}},{"../../components/color":367,"../../components/drawing":389,"../../constants/interactions":490,"../bar/style":671,"../bar/uniform_text":673,"@plotly/d3":58}],1127:[function(e,B,V){var f=e("../plots/cartesian/axes"),l=e("../lib"),m=e("../plot_api/plot_schema"),x=e("./helpers").pointsAccessorFunction,t=e("../constants/numerical").BADNUM;V.moduleType="transform",V.name="aggregate";var a=V.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},i=a.aggregations;V.supplyDefaults=function(y,g){var b={},v;function _(L,R){return l.coerce(y,b,a,L,R)}var u=_("enabled");if(!u)return b;var T=m.findArrayAttributes(g),c={};for(v=0;v<T.length;v++)c[T[v]]=1;var A=_("groups");if(!Array.isArray(A)){if(!c[A])return b.enabled=!1,b;c[A]=0}var k=y.aggregations||[],p=b.aggregations=new Array(k.length),w;function h(L,R){return l.coerce(k[v],w,i,L,R)}for(v=0;v<k.length;v++){w={_index:v};var D=h("target"),S=h("func"),M=h("enabled");M&&D&&(c[D]||S==="count"&&c[D]===void 0)?(S==="stddev"&&h("funcmode"),c[D]=0,p[v]=w):p[v]={enabled:!1,_index:v}}for(v=0;v<T.length;v++)c[T[v]]&&p.push({target:T[v],func:i.func.dflt,enabled:!0,_index:-1});return b},V.calcTransform=function(y,g,b){if(!!b.enabled){var v=b.groups,_=l.getTargetArray(g,{target:v});if(!!_){var u,T,c,A,k={},p={},w=[],h=x(g.transforms,b),D=_.length;for(g._length&&(D=Math.min(D,g._length)),u=0;u<D;u++)T=_[u],c=k[T],c===void 0?(k[T]=w.length,A=[u],w.push(A),p[k[T]]=h(u)):(w[c].push(u),p[k[T]]=(p[k[T]]||[]).concat(h(u)));b._indexToPoints=p;var S=b.aggregations;for(u=0;u<S.length;u++)r(y,g,w,S[u]);typeof v=="string"&&r(y,g,w,{target:v,func:"first",enabled:!0}),g._length=w.length}}};function r(y,g,b,v){if(!!v.enabled){for(var _=v.target,u=l.nestedProperty(g,_),T=u.get(),c=f.getDataConversions(y,g,_,T),A=n(v,c),k=new Array(b.length),p=0;p<b.length;p++)k[p]=A(T,b[p]);u.set(k),v.func==="count"&&l.pushUnique(g._arrayAttrs,_)}}function n(y,g){var b=y.func,v=g.d2c,_=g.c2d;switch(b){case"count":return d;case"first":return s;case"last":return o;case"sum":return function(u,T){for(var c=0,A=0;A<T.length;A++){var k=v(u[T[A]]);k!==t&&(c+=k)}return _(c)};case"avg":return function(u,T){for(var c=0,A=0,k=0;k<T.length;k++){var p=v(u[T[k]]);p!==t&&(c+=p,A++)}return A?_(c/A):t};case"min":return function(u,T){for(var c=1/0,A=0;A<T.length;A++){var k=v(u[T[A]]);k!==t&&(c=Math.min(c,k))}return c===1/0?t:_(c)};case"max":return function(u,T){for(var c=-1/0,A=0;A<T.length;A++){var k=v(u[T[A]]);k!==t&&(c=Math.max(c,k))}return c===-1/0?t:_(c)};case"range":return function(u,T){for(var c=1/0,A=-1/0,k=0;k<T.length;k++){var p=v(u[T[k]]);p!==t&&(c=Math.min(c,p),A=Math.max(A,p))}return A===-1/0||c===1/0?t:_(A-c)};case"change":return function(u,T){var c=v(u[T[0]]),A=v(u[T[T.length-1]]);return c===t||A===t?t:_(A-c)};case"median":return function(u,T){for(var c=[],A=0;A<T.length;A++){var k=v(u[T[A]]);k!==t&&c.push(k)}if(!c.length)return t;c.sort(l.sorterAsc);var p=(c.length-1)/2;return _((c[Math.floor(p)]+c[Math.ceil(p)])/2)};case"mode":return function(u,T){for(var c={},A=0,k=t,p=0;p<T.length;p++){var w=v(u[T[p]]);if(w!==t){var h=c[w]=(c[w]||0)+1;h>A&&(A=h,k=w)}}return A?_(k):t};case"rms":return function(u,T){for(var c=0,A=0,k=0;k<T.length;k++){var p=v(u[T[k]]);p!==t&&(c+=p*p,A++)}return A?_(Math.sqrt(c/A)):t};case"stddev":return function(u,T){var c=0,A=0,k=1,p=t,w;for(w=0;w<T.length&&p===t;w++)p=v(u[T[w]]);if(p===t)return t;for(;w<T.length;w++){var h=v(u[T[w]]);if(h!==t){var D=h-p;c+=D,A+=D*D,k++}}var S=y.funcmode==="sample"?k-1:k;return S?Math.sqrt((A-c*c/k)/S):0}}}function d(y,g){return g.length}function s(y,g){return y[g[0]]}function o(y,g){return y[g[g.length-1]]}},{"../constants/numerical":491,"../lib":515,"../plot_api/plot_schema":554,"../plots/cartesian/axes":566,"./helpers":1130}],1128:[function(e,B,V){var f=e("../lib"),l=e("../registry"),m=e("../plots/cartesian/axes"),x=e("./helpers").pointsAccessorFunction,t=e("../constants/filter_ops"),a=t.COMPARISON_OPS,i=t.INTERVAL_OPS,r=t.SET_OPS;V.moduleType="transform",V.name="filter",V.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(a).concat(i).concat(r),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},V.supplyDefaults=function(d){var s={};function o(v,_){return f.coerce(d,s,V.attributes,v,_)}var y=o("enabled");if(y){var g=o("target");if(f.isArrayOrTypedArray(g)&&g.length===0)return s.enabled=!1,s;o("preservegaps"),o("operation"),o("value");var b=l.getComponentMethod("calendars","handleDefaults");b(d,s,"valuecalendar",null),b(d,s,"targetcalendar",null)}return s},V.calcTransform=function(d,s,o){if(!o.enabled)return;var y=f.getTargetArray(s,o);if(!y)return;var g=o.target,b=y.length;s._length&&(b=Math.min(b,s._length));var v=o.targetcalendar,_=s._arrayAttrs,u=o.preservegaps;if(typeof g=="string"){var T=f.nestedProperty(s,g+"calendar").get();T&&(v=T)}var c=m.getDataToCoordFunc(d,s,g,y),A=n(o,c,v),k={},p={},w=0;function h(z,P){for(var I=0;I<_.length;I++){var U=f.nestedProperty(s,_[I]);z(U,P)}}var D,S;u?(D=function(z){k[z.astr]=f.extendDeep([],z.get()),z.set(new Array(b))},S=function(z,P){var I=k[z.astr][P];z.get()[P]=I}):(D=function(z){k[z.astr]=f.extendDeep([],z.get()),z.set([])},S=function(z,P){var I=k[z.astr][P];z.get().push(I)}),h(D);for(var M=x(s.transforms,o),L=0;L<b;L++){var R=A(y[L]);R?(h(S,L),p[w++]=M(L)):u&&w++}o._indexToPoints=p,s._length=w};function n(d,s,o){var y=d.operation,g=d.value,b=Array.isArray(g);function v(c){return c.indexOf(y)!==-1}var _=function(c){return s(c,0,d.valuecalendar)},u=function(c){return s(c,0,o)},T;switch(v(a)?T=_(b?g[0]:g):v(i)?T=b?[_(g[0]),_(g[1])]:[_(g),_(g)]:v(r)&&(T=b?g.map(_):[_(g)]),y){case"=":return function(c){return u(c)===T};case"!=":return function(c){return u(c)!==T};case"<":return function(c){return u(c)<T};case"<=":return function(c){return u(c)<=T};case">":return function(c){return u(c)>T};case">=":return function(c){return u(c)>=T};case"[]":return function(c){var A=u(c);return A>=T[0]&&A<=T[1]};case"()":return function(c){var A=u(c);return A>T[0]&&A<T[1]};case"[)":return function(c){var A=u(c);return A>=T[0]&&A<T[1]};case"(]":return function(c){var A=u(c);return A>T[0]&&A<=T[1]};case"][":return function(c){var A=u(c);return A<=T[0]||A>=T[1]};case")(":return function(c){var A=u(c);return A<T[0]||A>T[1]};case"](":return function(c){var A=u(c);return A<=T[0]||A>T[1]};case")[":return function(c){var A=u(c);return A<T[0]||A>=T[1]};case"{}":return function(c){return T.indexOf(u(c))!==-1};case"}{":return function(c){return T.indexOf(u(c))===-1}}}},{"../constants/filter_ops":487,"../lib":515,"../plots/cartesian/axes":566,"../registry":647,"./helpers":1130}],1129:[function(e,B,V){var f=e("../lib"),l=e("../plot_api/plot_schema"),m=e("../plots/plots"),x=e("./helpers").pointsAccessorFunction;V.moduleType="transform",V.name="groupby",V.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},V.supplyDefaults=function(a,i,r){var n,d={};function s(_,u){return f.coerce(a,d,V.attributes,_,u)}var o=s("enabled");if(!o)return d;s("groups"),s("nameformat",r._dataLength>1?"%{group} (%{trace})":"%{group}");var y=a.styles,g=d.styles=[];if(y)for(n=0;n<y.length;n++){var b=g[n]={};f.coerce(y[n],g[n],V.attributes.styles,"target");var v=f.coerce(y[n],g[n],V.attributes.styles,"value");f.isPlainObject(v)?b.value=f.extendDeep({},v):v&&delete b.value}return d},V.transform=function(a,i){var r,n,d,s=[];for(n=0;n<a.length;n++)for(r=t(a[n],i),d=0;d<r.length;d++)s.push(r[d]);return s};function t(a,i){var r,n,d,s,o,y,g,b,v,_,u=i.transform,T=i.transformIndex,c=a.transforms[T].groups,A=x(a.transforms,u);if(!f.isArrayOrTypedArray(c)||c.length===0)return[a];var k=f.filterUnique(c),p=new Array(k.length),w=c.length,h=l.findArrayAttributes(a),D=u.styles||[],S={};for(r=0;r<D.length;r++)S[D[r].target]=D[r].value;u.styles&&(_=f.keyedContainer(u,"styles","target","value.name"));var M={},L={};for(r=0;r<k.length;r++){y=k[r],M[y]=r,L[y]=0,g=p[r]=f.extendDeepNoArrays({},a),g._group=y,g.transforms[T]._indexToPoints={};var R=null;for(_&&(R=_.get(y)),R||R===""?g.name=R:g.name=f.templateString(u.nameformat,{trace:a.name,group:y}),b=g.transforms,g.transforms=[],n=0;n<b.length;n++)g.transforms[n]=f.extendDeepNoArrays({},b[n]);for(n=0;n<h.length;n++)f.nestedProperty(g,h[n]).set([])}for(d=0;d<h.length;d++){for(s=h[d],n=0,v=[];n<k.length;n++)v[n]=f.nestedProperty(p[n],s).get();for(o=f.nestedProperty(a,s).get(),n=0;n<w;n++)v[M[c[n]]].push(o[n])}for(n=0;n<w;n++){g=p[M[c[n]]];var z=g.transforms[T]._indexToPoints;z[L[c[n]]]=A(n),L[c[n]]++}for(r=0;r<k.length;r++)y=k[r],g=p[r],m.clearExpandedTraceDefaultColors(g),g=f.extendDeepNoArrays(g,S[y]||{});return p}},{"../lib":515,"../plot_api/plot_schema":554,"../plots/plots":628,"./helpers":1130}],1130:[function(e,B,V){V.pointsAccessorFunction=function(f,l){for(var m,x,t=0;t<f.length&&(m=f[t],m!==l);t++)!m._indexToPoints||m.enabled===!1||(x=m._indexToPoints);var a=x?function(i){return x[i]}:function(i){return[i]};return a}},{}],1131:[function(e,B,V){var f=e("../lib"),l=e("../plots/cartesian/axes"),m=e("./helpers").pointsAccessorFunction,x=e("../constants/numerical").BADNUM;V.moduleType="transform",V.name="sort",V.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},V.supplyDefaults=function(i){var r={};function n(s,o){return f.coerce(i,r,V.attributes,s,o)}var d=n("enabled");return d&&(n("target"),n("order")),r},V.calcTransform=function(i,r,n){if(!!n.enabled){var d=f.getTargetArray(r,n);if(!!d){var s=n.target,o=d.length;r._length&&(o=Math.min(o,r._length));var y=r._arrayAttrs,g=l.getDataToCoordFunc(i,r,s,d),b=t(n,d,g,o),v=m(r.transforms,n),_={},u,T;for(u=0;u<y.length;u++){var c=f.nestedProperty(r,y[u]),A=c.get(),k=new Array(o);for(T=0;T<o;T++)k[T]=A[b[T]];c.set(k)}for(T=0;T<o;T++)_[T]=v(b[T]);n._indexToPoints=_,r._length=o}}};function t(i,r,n,d){var s=new Array(d),o=new Array(d),y;for(y=0;y<d;y++)s[y]={v:r[y],i:y};for(s.sort(a(i,n)),y=0;y<d;y++)o[y]=s[y].i;return o}function a(i,r){switch(i.order){case"ascending":return function(n,d){var s=r(n.v),o=r(d.v);return s===x?1:o===x?-1:s-o};case"descending":return function(n,d){var s=r(n.v),o=r(d.v);return s===x?1:o===x?-1:o-s}}}},{"../constants/numerical":491,"../lib":515,"../plots/cartesian/axes":566,"./helpers":1130}],1132:[function(e,B,V){V.version="2.14.0"},{}],1133:[function(e,B,V){(function(f){(function(){(function(l){if(typeof V=="object"&&typeof B<"u")B.exports=l();else{var m;typeof window<"u"?m=window:typeof f<"u"?m=f:typeof self<"u"?m=self:m=this,m.stackgl=l()}})(function(){return function(){function l(m,x,t){function a(n,d){if(!x[n]){if(!m[n]){var s=typeof e=="function"&&e;if(!d&&s)return s(n,!0);if(i)return i(n,!0);var o=new Error("Cannot find module '"+n+"'");throw o.code="MODULE_NOT_FOUND",o}var y=x[n]={exports:{}};m[n][0].call(y.exports,function(g){var b=m[n][1][g];return a(b||g)},y,y.exports,l,m,x,t)}return x[n].exports}for(var i=typeof e=="function"&&e,r=0;r<t.length;r++)a(t[r]);return a}return l}()({1:[function(l,m,x){x.byteLength=o,x.toByteArray=g,x.fromByteArray=_;for(var t=[],a=[],i=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=0,d=r.length;n<d;++n)t[n]=r[n],a[r.charCodeAt(n)]=n;a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63;function s(u){var T=u.length;if(T%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var c=u.indexOf("=");c===-1&&(c=T);var A=c===T?0:4-c%4;return[c,A]}function o(u){var T=s(u),c=T[0],A=T[1];return(c+A)*3/4-A}function y(u,T,c){return(T+c)*3/4-c}function g(u){var T,c=s(u),A=c[0],k=c[1],p=new i(y(u,A,k)),w=0,h=k>0?A-4:A,D;for(D=0;D<h;D+=4)T=a[u.charCodeAt(D)]<<18|a[u.charCodeAt(D+1)]<<12|a[u.charCodeAt(D+2)]<<6|a[u.charCodeAt(D+3)],p[w++]=T>>16&255,p[w++]=T>>8&255,p[w++]=T&255;return k===2&&(T=a[u.charCodeAt(D)]<<2|a[u.charCodeAt(D+1)]>>4,p[w++]=T&255),k===1&&(T=a[u.charCodeAt(D)]<<10|a[u.charCodeAt(D+1)]<<4|a[u.charCodeAt(D+2)]>>2,p[w++]=T>>8&255,p[w++]=T&255),p}function b(u){return t[u>>18&63]+t[u>>12&63]+t[u>>6&63]+t[u&63]}function v(u,T,c){for(var A,k=[],p=T;p<c;p+=3)A=(u[p]<<16&16711680)+(u[p+1]<<8&65280)+(u[p+2]&255),k.push(b(A));return k.join("")}function _(u){for(var T,c=u.length,A=c%3,k=[],p=16383,w=0,h=c-A;w<h;w+=p)k.push(v(u,w,w+p>h?h:w+p));return A===1?(T=u[c-1],k.push(t[T>>2]+t[T<<4&63]+"==")):A===2&&(T=(u[c-2]<<8)+u[c-1],k.push(t[T>>10]+t[T>>4&63]+t[T<<2&63]+"=")),k.join("")}},{}],2:[function(l,m,x){},{}],3:[function(l,m,x){(function(t){(function(){var a=l("base64-js"),i=l("ieee754");x.Buffer=s,x.SlowBuffer=A,x.INSPECT_MAX_BYTES=50;var r=2147483647;x.kMaxLength=r,s.TYPED_ARRAY_SUPPORT=n(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function n(){try{var ut=new Uint8Array(1);return ut.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},ut.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(!!s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(!!s.isBuffer(this))return this.byteOffset}});function d(ut){if(ut>r)throw new RangeError('The value "'+ut+'" is invalid for option "size"');var pt=new Uint8Array(ut);return pt.__proto__=s.prototype,pt}function s(ut,pt,yt){if(typeof ut=="number"){if(typeof pt=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return b(ut)}return o(ut,pt,yt)}typeof Symbol<"u"&&Symbol.species!=null&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),s.poolSize=8192;function o(ut,pt,yt){if(typeof ut=="string")return v(ut,pt);if(ArrayBuffer.isView(ut))return _(ut);if(ut==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ut);if(ct(ut,ArrayBuffer)||ut&&ct(ut.buffer,ArrayBuffer))return u(ut,pt,yt);if(typeof ut=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var Tt=ut.valueOf&&ut.valueOf();if(Tt!=null&&Tt!==ut)return s.from(Tt,pt,yt);var kt=T(ut);if(kt)return kt;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ut[Symbol.toPrimitive]=="function")return s.from(ut[Symbol.toPrimitive]("string"),pt,yt);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ut)}s.from=function(ut,pt,yt){return o(ut,pt,yt)},s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array;function y(ut){if(typeof ut!="number")throw new TypeError('"size" argument must be of type number');if(ut<0)throw new RangeError('The value "'+ut+'" is invalid for option "size"')}function g(ut,pt,yt){return y(ut),ut<=0?d(ut):pt!==void 0?typeof yt=="string"?d(ut).fill(pt,yt):d(ut).fill(pt):d(ut)}s.alloc=function(ut,pt,yt){return g(ut,pt,yt)};function b(ut){return y(ut),d(ut<0?0:c(ut)|0)}s.allocUnsafe=function(ut){return b(ut)},s.allocUnsafeSlow=function(ut){return b(ut)};function v(ut,pt){if((typeof pt!="string"||pt==="")&&(pt="utf8"),!s.isEncoding(pt))throw new TypeError("Unknown encoding: "+pt);var yt=k(ut,pt)|0,Tt=d(yt),kt=Tt.write(ut,pt);return kt!==yt&&(Tt=Tt.slice(0,kt)),Tt}function _(ut){for(var pt=ut.length<0?0:c(ut.length)|0,yt=d(pt),Tt=0;Tt<pt;Tt+=1)yt[Tt]=ut[Tt]&255;return yt}function u(ut,pt,yt){if(pt<0||ut.byteLength<pt)throw new RangeError('"offset" is outside of buffer bounds');if(ut.byteLength<pt+(yt||0))throw new RangeError('"length" is outside of buffer bounds');var Tt;return pt===void 0&&yt===void 0?Tt=new Uint8Array(ut):yt===void 0?Tt=new Uint8Array(ut,pt):Tt=new Uint8Array(ut,pt,yt),Tt.__proto__=s.prototype,Tt}function T(ut){if(s.isBuffer(ut)){var pt=c(ut.length)|0,yt=d(pt);return yt.length===0||ut.copy(yt,0,0,pt),yt}if(ut.length!==void 0)return typeof ut.length!="number"||bt(ut.length)?d(0):_(ut);if(ut.type==="Buffer"&&Array.isArray(ut.data))return _(ut.data)}function c(ut){if(ut>=r)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return ut|0}function A(ut){return+ut!=ut&&(ut=0),s.alloc(+ut)}s.isBuffer=function(pt){return pt!=null&&pt._isBuffer===!0&&pt!==s.prototype},s.compare=function(pt,yt){if(ct(pt,Uint8Array)&&(pt=s.from(pt,pt.offset,pt.byteLength)),ct(yt,Uint8Array)&&(yt=s.from(yt,yt.offset,yt.byteLength)),!s.isBuffer(pt)||!s.isBuffer(yt))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(pt===yt)return 0;for(var Tt=pt.length,kt=yt.length,zt=0,Rt=Math.min(Tt,kt);zt<Rt;++zt)if(pt[zt]!==yt[zt]){Tt=pt[zt],kt=yt[zt];break}return Tt<kt?-1:kt<Tt?1:0},s.isEncoding=function(pt){switch(String(pt).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(pt,yt){if(!Array.isArray(pt))throw new TypeError('"list" argument must be an Array of Buffers');if(pt.length===0)return s.alloc(0);var Tt;if(yt===void 0)for(yt=0,Tt=0;Tt<pt.length;++Tt)yt+=pt[Tt].length;var kt=s.allocUnsafe(yt),zt=0;for(Tt=0;Tt<pt.length;++Tt){var Rt=pt[Tt];if(ct(Rt,Uint8Array)&&(Rt=s.from(Rt)),!s.isBuffer(Rt))throw new TypeError('"list" argument must be an Array of Buffers');Rt.copy(kt,zt),zt+=Rt.length}return kt};function k(ut,pt){if(s.isBuffer(ut))return ut.length;if(ArrayBuffer.isView(ut)||ct(ut,ArrayBuffer))return ut.byteLength;if(typeof ut!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ut);var yt=ut.length,Tt=arguments.length>2&&arguments[2]===!0;if(!Tt&&yt===0)return 0;for(var kt=!1;;)switch(pt){case"ascii":case"latin1":case"binary":return yt;case"utf8":case"utf-8":return W(ut).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return yt*2;case"hex":return yt>>>1;case"base64":return it(ut).length;default:if(kt)return Tt?-1:W(ut).length;pt=(""+pt).toLowerCase(),kt=!0}}s.byteLength=k;function p(ut,pt,yt){var Tt=!1;if((pt===void 0||pt<0)&&(pt=0),pt>this.length||((yt===void 0||yt>this.length)&&(yt=this.length),yt<=0)||(yt>>>=0,pt>>>=0,yt<=pt))return"";for(ut||(ut="utf8");;)switch(ut){case"hex":return Z(this,pt,yt);case"utf8":case"utf-8":return U(this,pt,yt);case"ascii":return $(this,pt,yt);case"latin1":case"binary":return tt(this,pt,yt);case"base64":return I(this,pt,yt);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return X(this,pt,yt);default:if(Tt)throw new TypeError("Unknown encoding: "+ut);ut=(ut+"").toLowerCase(),Tt=!0}}s.prototype._isBuffer=!0;function w(ut,pt,yt){var Tt=ut[pt];ut[pt]=ut[yt],ut[yt]=Tt}s.prototype.swap16=function(){var pt=this.length;if(pt%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var yt=0;yt<pt;yt+=2)w(this,yt,yt+1);return this},s.prototype.swap32=function(){var pt=this.length;if(pt%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var yt=0;yt<pt;yt+=4)w(this,yt,yt+3),w(this,yt+1,yt+2);return this},s.prototype.swap64=function(){var pt=this.length;if(pt%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var yt=0;yt<pt;yt+=8)w(this,yt,yt+7),w(this,yt+1,yt+6),w(this,yt+2,yt+5),w(this,yt+3,yt+4);return this},s.prototype.toString=function(){var pt=this.length;return pt===0?"":arguments.length===0?U(this,0,pt):p.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(pt){if(!s.isBuffer(pt))throw new TypeError("Argument must be a Buffer");return this===pt?!0:s.compare(this,pt)===0},s.prototype.inspect=function(){var pt="",yt=x.INSPECT_MAX_BYTES;return pt=this.toString("hex",0,yt).replace(/(.{2})/g,"$1 ").trim(),this.length>yt&&(pt+=" ... "),"<Buffer "+pt+">"},s.prototype.compare=function(pt,yt,Tt,kt,zt){if(ct(pt,Uint8Array)&&(pt=s.from(pt,pt.offset,pt.byteLength)),!s.isBuffer(pt))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof pt);if(yt===void 0&&(yt=0),Tt===void 0&&(Tt=pt?pt.length:0),kt===void 0&&(kt=0),zt===void 0&&(zt=this.length),yt<0||Tt>pt.length||kt<0||zt>this.length)throw new RangeError("out of range index");if(kt>=zt&&yt>=Tt)return 0;if(kt>=zt)return-1;if(yt>=Tt)return 1;if(yt>>>=0,Tt>>>=0,kt>>>=0,zt>>>=0,this===pt)return 0;for(var Rt=zt-kt,Gt=Tt-yt,wt=Math.min(Rt,Gt),It=this.slice(kt,zt),$t=pt.slice(yt,Tt),Qt=0;Qt<wt;++Qt)if(It[Qt]!==$t[Qt]){Rt=It[Qt],Gt=$t[Qt];break}return Rt<Gt?-1:Gt<Rt?1:0};function h(ut,pt,yt,Tt,kt){if(ut.length===0)return-1;if(typeof yt=="string"?(Tt=yt,yt=0):yt>2147483647?yt=2147483647:yt<-2147483648&&(yt=-2147483648),yt=+yt,bt(yt)&&(yt=kt?0:ut.length-1),yt<0&&(yt=ut.length+yt),yt>=ut.length){if(kt)return-1;yt=ut.length-1}else if(yt<0)if(kt)yt=0;else return-1;if(typeof pt=="string"&&(pt=s.from(pt,Tt)),s.isBuffer(pt))return pt.length===0?-1:D(ut,pt,yt,Tt,kt);if(typeof pt=="number")return pt=pt&255,typeof Uint8Array.prototype.indexOf=="function"?kt?Uint8Array.prototype.indexOf.call(ut,pt,yt):Uint8Array.prototype.lastIndexOf.call(ut,pt,yt):D(ut,[pt],yt,Tt,kt);throw new TypeError("val must be string, number or Buffer")}function D(ut,pt,yt,Tt,kt){var zt=1,Rt=ut.length,Gt=pt.length;if(Tt!==void 0&&(Tt=String(Tt).toLowerCase(),Tt==="ucs2"||Tt==="ucs-2"||Tt==="utf16le"||Tt==="utf-16le")){if(ut.length<2||pt.length<2)return-1;zt=2,Rt/=2,Gt/=2,yt/=2}function wt(Pt,Yt){return zt===1?Pt[Yt]:Pt.readUInt16BE(Yt*zt)}var It;if(kt){var $t=-1;for(It=yt;It<Rt;It++)if(wt(ut,It)===wt(pt,$t===-1?0:It-$t)){if($t===-1&&($t=It),It-$t+1===Gt)return $t*zt}else $t!==-1&&(It-=It-$t),$t=-1}else for(yt+Gt>Rt&&(yt=Rt-Gt),It=yt;It>=0;It--){for(var Qt=!0,Nt=0;Nt<Gt;Nt++)if(wt(ut,It+Nt)!==wt(pt,Nt)){Qt=!1;break}if(Qt)return It}return-1}s.prototype.includes=function(pt,yt,Tt){return this.indexOf(pt,yt,Tt)!==-1},s.prototype.indexOf=function(pt,yt,Tt){return h(this,pt,yt,Tt,!0)},s.prototype.lastIndexOf=function(pt,yt,Tt){return h(this,pt,yt,Tt,!1)};function S(ut,pt,yt,Tt){yt=Number(yt)||0;var kt=ut.length-yt;Tt?(Tt=Number(Tt),Tt>kt&&(Tt=kt)):Tt=kt;var zt=pt.length;Tt>zt/2&&(Tt=zt/2);for(var Rt=0;Rt<Tt;++Rt){var Gt=parseInt(pt.substr(Rt*2,2),16);if(bt(Gt))return Rt;ut[yt+Rt]=Gt}return Rt}function M(ut,pt,yt,Tt){return ot(W(pt,ut.length-yt),ut,yt,Tt)}function L(ut,pt,yt,Tt){return ot(K(pt),ut,yt,Tt)}function R(ut,pt,yt,Tt){return L(ut,pt,yt,Tt)}function z(ut,pt,yt,Tt){return ot(it(pt),ut,yt,Tt)}function P(ut,pt,yt,Tt){return ot(nt(pt,ut.length-yt),ut,yt,Tt)}s.prototype.write=function(pt,yt,Tt,kt){if(yt===void 0)kt="utf8",Tt=this.length,yt=0;else if(Tt===void 0&&typeof yt=="string")kt=yt,Tt=this.length,yt=0;else if(isFinite(yt))yt=yt>>>0,isFinite(Tt)?(Tt=Tt>>>0,kt===void 0&&(kt="utf8")):(kt=Tt,Tt=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var zt=this.length-yt;if((Tt===void 0||Tt>zt)&&(Tt=zt),pt.length>0&&(Tt<0||yt<0)||yt>this.length)throw new RangeError("Attempt to write outside buffer bounds");kt||(kt="utf8");for(var Rt=!1;;)switch(kt){case"hex":return S(this,pt,yt,Tt);case"utf8":case"utf-8":return M(this,pt,yt,Tt);case"ascii":return L(this,pt,yt,Tt);case"latin1":case"binary":return R(this,pt,yt,Tt);case"base64":return z(this,pt,yt,Tt);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,pt,yt,Tt);default:if(Rt)throw new TypeError("Unknown encoding: "+kt);kt=(""+kt).toLowerCase(),Rt=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function I(ut,pt,yt){return pt===0&&yt===ut.length?a.fromByteArray(ut):a.fromByteArray(ut.slice(pt,yt))}function U(ut,pt,yt){yt=Math.min(ut.length,yt);for(var Tt=[],kt=pt;kt<yt;){var zt=ut[kt],Rt=null,Gt=zt>239?4:zt>223?3:zt>191?2:1;if(kt+Gt<=yt){var wt,It,$t,Qt;switch(Gt){case 1:zt<128&&(Rt=zt);break;case 2:wt=ut[kt+1],(wt&192)===128&&(Qt=(zt&31)<<6|wt&63,Qt>127&&(Rt=Qt));break;case 3:wt=ut[kt+1],It=ut[kt+2],(wt&192)===128&&(It&192)===128&&(Qt=(zt&15)<<12|(wt&63)<<6|It&63,Qt>2047&&(Qt<55296||Qt>57343)&&(Rt=Qt));break;case 4:wt=ut[kt+1],It=ut[kt+2],$t=ut[kt+3],(wt&192)===128&&(It&192)===128&&($t&192)===128&&(Qt=(zt&15)<<18|(wt&63)<<12|(It&63)<<6|$t&63,Qt>65535&&Qt<1114112&&(Rt=Qt))}}Rt===null?(Rt=65533,Gt=1):Rt>65535&&(Rt-=65536,Tt.push(Rt>>>10&1023|55296),Rt=56320|Rt&1023),Tt.push(Rt),kt+=Gt}return G(Tt)}var O=4096;function G(ut){var pt=ut.length;if(pt<=O)return String.fromCharCode.apply(String,ut);for(var yt="",Tt=0;Tt<pt;)yt+=String.fromCharCode.apply(String,ut.slice(Tt,Tt+=O));return yt}function $(ut,pt,yt){var Tt="";yt=Math.min(ut.length,yt);for(var kt=pt;kt<yt;++kt)Tt+=String.fromCharCode(ut[kt]&127);return Tt}function tt(ut,pt,yt){var Tt="";yt=Math.min(ut.length,yt);for(var kt=pt;kt<yt;++kt)Tt+=String.fromCharCode(ut[kt]);return Tt}function Z(ut,pt,yt){var Tt=ut.length;(!pt||pt<0)&&(pt=0),(!yt||yt<0||yt>Tt)&&(yt=Tt);for(var kt="",zt=pt;zt<yt;++zt)kt+=q(ut[zt]);return kt}function X(ut,pt,yt){for(var Tt=ut.slice(pt,yt),kt="",zt=0;zt<Tt.length;zt+=2)kt+=String.fromCharCode(Tt[zt]+Tt[zt+1]*256);return kt}s.prototype.slice=function(pt,yt){var Tt=this.length;pt=~~pt,yt=yt===void 0?Tt:~~yt,pt<0?(pt+=Tt,pt<0&&(pt=0)):pt>Tt&&(pt=Tt),yt<0?(yt+=Tt,yt<0&&(yt=0)):yt>Tt&&(yt=Tt),yt<pt&&(yt=pt);var kt=this.subarray(pt,yt);return kt.__proto__=s.prototype,kt};function J(ut,pt,yt){if(ut%1!==0||ut<0)throw new RangeError("offset is not uint");if(ut+pt>yt)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUIntLE=function(pt,yt,Tt){pt=pt>>>0,yt=yt>>>0,Tt||J(pt,yt,this.length);for(var kt=this[pt],zt=1,Rt=0;++Rt<yt&&(zt*=256);)kt+=this[pt+Rt]*zt;return kt},s.prototype.readUIntBE=function(pt,yt,Tt){pt=pt>>>0,yt=yt>>>0,Tt||J(pt,yt,this.length);for(var kt=this[pt+--yt],zt=1;yt>0&&(zt*=256);)kt+=this[pt+--yt]*zt;return kt},s.prototype.readUInt8=function(pt,yt){return pt=pt>>>0,yt||J(pt,1,this.length),this[pt]},s.prototype.readUInt16LE=function(pt,yt){return pt=pt>>>0,yt||J(pt,2,this.length),this[pt]|this[pt+1]<<8},s.prototype.readUInt16BE=function(pt,yt){return pt=pt>>>0,yt||J(pt,2,this.length),this[pt]<<8|this[pt+1]},s.prototype.readUInt32LE=function(pt,yt){return pt=pt>>>0,yt||J(pt,4,this.length),(this[pt]|this[pt+1]<<8|this[pt+2]<<16)+this[pt+3]*16777216},s.prototype.readUInt32BE=function(pt,yt){return pt=pt>>>0,yt||J(pt,4,this.length),this[pt]*16777216+(this[pt+1]<<16|this[pt+2]<<8|this[pt+3])},s.prototype.readIntLE=function(pt,yt,Tt){pt=pt>>>0,yt=yt>>>0,Tt||J(pt,yt,this.length);for(var kt=this[pt],zt=1,Rt=0;++Rt<yt&&(zt*=256);)kt+=this[pt+Rt]*zt;return zt*=128,kt>=zt&&(kt-=Math.pow(2,8*yt)),kt},s.prototype.readIntBE=function(pt,yt,Tt){pt=pt>>>0,yt=yt>>>0,Tt||J(pt,yt,this.length);for(var kt=yt,zt=1,Rt=this[pt+--kt];kt>0&&(zt*=256);)Rt+=this[pt+--kt]*zt;return zt*=128,Rt>=zt&&(Rt-=Math.pow(2,8*yt)),Rt},s.prototype.readInt8=function(pt,yt){return pt=pt>>>0,yt||J(pt,1,this.length),this[pt]&128?(255-this[pt]+1)*-1:this[pt]},s.prototype.readInt16LE=function(pt,yt){pt=pt>>>0,yt||J(pt,2,this.length);var Tt=this[pt]|this[pt+1]<<8;return Tt&32768?Tt|4294901760:Tt},s.prototype.readInt16BE=function(pt,yt){pt=pt>>>0,yt||J(pt,2,this.length);var Tt=this[pt+1]|this[pt]<<8;return Tt&32768?Tt|4294901760:Tt},s.prototype.readInt32LE=function(pt,yt){return pt=pt>>>0,yt||J(pt,4,this.length),this[pt]|this[pt+1]<<8|this[pt+2]<<16|this[pt+3]<<24},s.prototype.readInt32BE=function(pt,yt){return pt=pt>>>0,yt||J(pt,4,this.length),this[pt]<<24|this[pt+1]<<16|this[pt+2]<<8|this[pt+3]},s.prototype.readFloatLE=function(pt,yt){return pt=pt>>>0,yt||J(pt,4,this.length),i.read(this,pt,!0,23,4)},s.prototype.readFloatBE=function(pt,yt){return pt=pt>>>0,yt||J(pt,4,this.length),i.read(this,pt,!1,23,4)},s.prototype.readDoubleLE=function(pt,yt){return pt=pt>>>0,yt||J(pt,8,this.length),i.read(this,pt,!0,52,8)},s.prototype.readDoubleBE=function(pt,yt){return pt=pt>>>0,yt||J(pt,8,this.length),i.read(this,pt,!1,52,8)};function st(ut,pt,yt,Tt,kt,zt){if(!s.isBuffer(ut))throw new TypeError('"buffer" argument must be a Buffer instance');if(pt>kt||pt<zt)throw new RangeError('"value" argument is out of bounds');if(yt+Tt>ut.length)throw new RangeError("Index out of range")}s.prototype.writeUIntLE=function(pt,yt,Tt,kt){if(pt=+pt,yt=yt>>>0,Tt=Tt>>>0,!kt){var zt=Math.pow(2,8*Tt)-1;st(this,pt,yt,Tt,zt,0)}var Rt=1,Gt=0;for(this[yt]=pt&255;++Gt<Tt&&(Rt*=256);)this[yt+Gt]=pt/Rt&255;return yt+Tt},s.prototype.writeUIntBE=function(pt,yt,Tt,kt){if(pt=+pt,yt=yt>>>0,Tt=Tt>>>0,!kt){var zt=Math.pow(2,8*Tt)-1;st(this,pt,yt,Tt,zt,0)}var Rt=Tt-1,Gt=1;for(this[yt+Rt]=pt&255;--Rt>=0&&(Gt*=256);)this[yt+Rt]=pt/Gt&255;return yt+Tt},s.prototype.writeUInt8=function(pt,yt,Tt){return pt=+pt,yt=yt>>>0,Tt||st(this,pt,yt,1,255,0),this[yt]=pt&255,yt+1},s.prototype.writeUInt16LE=function(pt,yt,Tt){return pt=+pt,yt=yt>>>0,Tt||st(this,pt,yt,2,65535,0),this[yt]=pt&255,this[yt+1]=pt>>>8,yt+2},s.prototype.writeUInt16BE=function(pt,yt,Tt){return pt=+pt,yt=yt>>>0,Tt||st(this,pt,yt,2,65535,0),this[yt]=pt>>>8,this[yt+1]=pt&255,yt+2},s.prototype.writeUInt32LE=function(pt,yt,Tt){return pt=+pt,yt=yt>>>0,Tt||st(this,pt,yt,4,4294967295,0),this[yt+3]=pt>>>24,this[yt+2]=pt>>>16,this[yt+1]=pt>>>8,this[yt]=pt&255,yt+4},s.prototype.writeUInt32BE=function(pt,yt,Tt){return pt=+pt,yt=yt>>>0,Tt||st(this,pt,yt,4,4294967295,0),this[yt]=pt>>>24,this[yt+1]=pt>>>16,this[yt+2]=pt>>>8,this[yt+3]=pt&255,yt+4},s.prototype.writeIntLE=function(pt,yt,Tt,kt){if(pt=+pt,yt=yt>>>0,!kt){var zt=Math.pow(2,8*Tt-1);st(this,pt,yt,Tt,zt-1,-zt)}var Rt=0,Gt=1,wt=0;for(this[yt]=pt&255;++Rt<Tt&&(Gt*=256);)pt<0&&wt===0&&this[yt+Rt-1]!==0&&(wt=1),this[yt+Rt]=(pt/Gt>>0)-wt&255;return yt+Tt},s.prototype.writeIntBE=function(pt,yt,Tt,kt){if(pt=+pt,yt=yt>>>0,!kt){var zt=Math.pow(2,8*Tt-1);st(this,pt,yt,Tt,zt-1,-zt)}var Rt=Tt-1,Gt=1,wt=0;for(this[yt+Rt]=pt&255;--Rt>=0&&(Gt*=256);)pt<0&&wt===0&&this[yt+Rt+1]!==0&&(wt=1),this[yt+Rt]=(pt/Gt>>0)-wt&255;return yt+Tt},s.prototype.writeInt8=function(pt,yt,Tt){return pt=+pt,yt=yt>>>0,Tt||st(this,pt,yt,1,127,-128),pt<0&&(pt=255+pt+1),this[yt]=pt&255,yt+1},s.prototype.writeInt16LE=function(pt,yt,Tt){return pt=+pt,yt=yt>>>0,Tt||st(this,pt,yt,2,32767,-32768),this[yt]=pt&255,this[yt+1]=pt>>>8,yt+2},s.prototype.writeInt16BE=function(pt,yt,Tt){return pt=+pt,yt=yt>>>0,Tt||st(this,pt,yt,2,32767,-32768),this[yt]=pt>>>8,this[yt+1]=pt&255,yt+2},s.prototype.writeInt32LE=function(pt,yt,Tt){return pt=+pt,yt=yt>>>0,Tt||st(this,pt,yt,4,2147483647,-2147483648),this[yt]=pt&255,this[yt+1]=pt>>>8,this[yt+2]=pt>>>16,this[yt+3]=pt>>>24,yt+4},s.prototype.writeInt32BE=function(pt,yt,Tt){return pt=+pt,yt=yt>>>0,Tt||st(this,pt,yt,4,2147483647,-2147483648),pt<0&&(pt=4294967295+pt+1),this[yt]=pt>>>24,this[yt+1]=pt>>>16,this[yt+2]=pt>>>8,this[yt+3]=pt&255,yt+4};function at(ut,pt,yt,Tt,kt,zt){if(yt+Tt>ut.length)throw new RangeError("Index out of range");if(yt<0)throw new RangeError("Index out of range")}function lt(ut,pt,yt,Tt,kt){return pt=+pt,yt=yt>>>0,kt||at(ut,pt,yt,4),i.write(ut,pt,yt,Tt,23,4),yt+4}s.prototype.writeFloatLE=function(pt,yt,Tt){return lt(this,pt,yt,!0,Tt)},s.prototype.writeFloatBE=function(pt,yt,Tt){return lt(this,pt,yt,!1,Tt)};function F(ut,pt,yt,Tt,kt){return pt=+pt,yt=yt>>>0,kt||at(ut,pt,yt,8),i.write(ut,pt,yt,Tt,52,8),yt+8}s.prototype.writeDoubleLE=function(pt,yt,Tt){return F(this,pt,yt,!0,Tt)},s.prototype.writeDoubleBE=function(pt,yt,Tt){return F(this,pt,yt,!1,Tt)},s.prototype.copy=function(pt,yt,Tt,kt){if(!s.isBuffer(pt))throw new TypeError("argument should be a Buffer");if(Tt||(Tt=0),!kt&&kt!==0&&(kt=this.length),yt>=pt.length&&(yt=pt.length),yt||(yt=0),kt>0&&kt<Tt&&(kt=Tt),kt===Tt||pt.length===0||this.length===0)return 0;if(yt<0)throw new RangeError("targetStart out of bounds");if(Tt<0||Tt>=this.length)throw new RangeError("Index out of range");if(kt<0)throw new RangeError("sourceEnd out of bounds");kt>this.length&&(kt=this.length),pt.length-yt<kt-Tt&&(kt=pt.length-yt+Tt);var zt=kt-Tt;if(this===pt&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(yt,Tt,kt);else if(this===pt&&Tt<yt&&yt<kt)for(var Rt=zt-1;Rt>=0;--Rt)pt[Rt+yt]=this[Rt+Tt];else Uint8Array.prototype.set.call(pt,this.subarray(Tt,kt),yt);return zt},s.prototype.fill=function(pt,yt,Tt,kt){if(typeof pt=="string"){if(typeof yt=="string"?(kt=yt,yt=0,Tt=this.length):typeof Tt=="string"&&(kt=Tt,Tt=this.length),kt!==void 0&&typeof kt!="string")throw new TypeError("encoding must be a string");if(typeof kt=="string"&&!s.isEncoding(kt))throw new TypeError("Unknown encoding: "+kt);if(pt.length===1){var zt=pt.charCodeAt(0);(kt==="utf8"&&zt<128||kt==="latin1")&&(pt=zt)}}else typeof pt=="number"&&(pt=pt&255);if(yt<0||this.length<yt||this.length<Tt)throw new RangeError("Out of range index");if(Tt<=yt)return this;yt=yt>>>0,Tt=Tt===void 0?this.length:Tt>>>0,pt||(pt=0);var Rt;if(typeof pt=="number")for(Rt=yt;Rt<Tt;++Rt)this[Rt]=pt;else{var Gt=s.isBuffer(pt)?pt:s.from(pt,kt),wt=Gt.length;if(wt===0)throw new TypeError('The value "'+pt+'" is invalid for argument "value"');for(Rt=0;Rt<Tt-yt;++Rt)this[Rt+yt]=Gt[Rt%wt]}return this};var H=/[^+/0-9A-Za-z-_]/g;function et(ut){if(ut=ut.split("=")[0],ut=ut.trim().replace(H,""),ut.length<2)return"";for(;ut.length%4!==0;)ut=ut+"=";return ut}function q(ut){return ut<16?"0"+ut.toString(16):ut.toString(16)}function W(ut,pt){pt=pt||1/0;for(var yt,Tt=ut.length,kt=null,zt=[],Rt=0;Rt<Tt;++Rt){if(yt=ut.charCodeAt(Rt),yt>55295&&yt<57344){if(!kt){if(yt>56319){(pt-=3)>-1&&zt.push(239,191,189);continue}else if(Rt+1===Tt){(pt-=3)>-1&&zt.push(239,191,189);continue}kt=yt;continue}if(yt<56320){(pt-=3)>-1&&zt.push(239,191,189),kt=yt;continue}yt=(kt-55296<<10|yt-56320)+65536}else kt&&(pt-=3)>-1&&zt.push(239,191,189);if(kt=null,yt<128){if((pt-=1)<0)break;zt.push(yt)}else if(yt<2048){if((pt-=2)<0)break;zt.push(yt>>6|192,yt&63|128)}else if(yt<65536){if((pt-=3)<0)break;zt.push(yt>>12|224,yt>>6&63|128,yt&63|128)}else if(yt<1114112){if((pt-=4)<0)break;zt.push(yt>>18|240,yt>>12&63|128,yt>>6&63|128,yt&63|128)}else throw new Error("Invalid code point")}return zt}function K(ut){for(var pt=[],yt=0;yt<ut.length;++yt)pt.push(ut.charCodeAt(yt)&255);return pt}function nt(ut,pt){for(var yt,Tt,kt,zt=[],Rt=0;Rt<ut.length&&!((pt-=2)<0);++Rt)yt=ut.charCodeAt(Rt),Tt=yt>>8,kt=yt%256,zt.push(kt),zt.push(Tt);return zt}function it(ut){return a.toByteArray(et(ut))}function ot(ut,pt,yt,Tt){for(var kt=0;kt<Tt&&!(kt+yt>=pt.length||kt>=ut.length);++kt)pt[kt+yt]=ut[kt];return kt}function ct(ut,pt){return ut instanceof pt||ut!=null&&ut.constructor!=null&&ut.constructor.name!=null&&ut.constructor.name===pt.name}function bt(ut){return ut!==ut}}).call(this)}).call(this,l("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:4}],4:[function(l,m,x){x.read=function(t,a,i,r,n){var d,s,o=n*8-r-1,y=(1<<o)-1,g=y>>1,b=-7,v=i?n-1:0,_=i?-1:1,u=t[a+v];for(v+=_,d=u&(1<<-b)-1,u>>=-b,b+=o;b>0;d=d*256+t[a+v],v+=_,b-=8);for(s=d&(1<<-b)-1,d>>=-b,b+=r;b>0;s=s*256+t[a+v],v+=_,b-=8);if(d===0)d=1-g;else{if(d===y)return s?NaN:(u?-1:1)*(1/0);s=s+Math.pow(2,r),d=d-g}return(u?-1:1)*s*Math.pow(2,d-r)},x.write=function(t,a,i,r,n,d){var s,o,y,g=d*8-n-1,b=(1<<g)-1,v=b>>1,_=n===23?Math.pow(2,-24)-Math.pow(2,-77):0,u=r?0:d-1,T=r?1:-1,c=a<0||a===0&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(o=isNaN(a)?1:0,s=b):(s=Math.floor(Math.log(a)/Math.LN2),a*(y=Math.pow(2,-s))<1&&(s--,y*=2),s+v>=1?a+=_/y:a+=_*Math.pow(2,1-v),a*y>=2&&(s++,y/=2),s+v>=b?(o=0,s=b):s+v>=1?(o=(a*y-1)*Math.pow(2,n),s=s+v):(o=a*Math.pow(2,v-1)*Math.pow(2,n),s=0));n>=8;t[i+u]=o&255,u+=T,o/=256,n-=8);for(s=s<<n|o,g+=n;g>0;t[i+u]=s&255,u+=T,s/=256,g-=8);t[i+u-T]|=c*128}},{}],5:[function(l,m,x){var t=m.exports={},a,i;function r(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?a=setTimeout:a=r}catch{a=r}try{typeof clearTimeout=="function"?i=clearTimeout:i=n}catch{i=n}})();function d(c){if(a===setTimeout)return setTimeout(c,0);if((a===r||!a)&&setTimeout)return a=setTimeout,setTimeout(c,0);try{return a(c,0)}catch{try{return a.call(null,c,0)}catch{return a.call(this,c,0)}}}function s(c){if(i===clearTimeout)return clearTimeout(c);if((i===n||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(c);try{return i(c)}catch{try{return i.call(null,c)}catch{return i.call(this,c)}}}var o=[],y=!1,g,b=-1;function v(){!y||!g||(y=!1,g.length?o=g.concat(o):b=-1,o.length&&_())}function _(){if(!y){var c=d(v);y=!0;for(var A=o.length;A;){for(g=o,o=[];++b<A;)g&&g[b].run();b=-1,A=o.length}g=null,y=!1,s(c)}}t.nextTick=function(c){var A=new Array(arguments.length-1);if(arguments.length>1)for(var k=1;k<arguments.length;k++)A[k-1]=arguments[k];o.push(new u(c,A)),o.length===1&&!y&&d(_)};function u(c,A){this.fun=c,this.array=A}u.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={};function T(){}t.on=T,t.addListener=T,t.once=T,t.off=T,t.removeListener=T,t.removeAllListeners=T,t.emit=T,t.prependListener=T,t.prependOnceListener=T,t.listeners=function(c){return[]},t.binding=function(c){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(c){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},{}],6:[function(l,m,x){m.exports={alpha_shape:l("alpha-shape"),convex_hull:l("convex-hull"),delaunay_triangulate:l("delaunay-triangulate"),gl_cone3d:l("gl-cone3d"),gl_error3d:l("gl-error3d"),gl_heatmap2d:l("gl-heatmap2d"),gl_line3d:l("gl-line3d"),gl_mesh3d:l("gl-mesh3d"),gl_plot2d:l("gl-plot2d"),gl_plot3d:l("gl-plot3d"),gl_pointcloud2d:l("gl-pointcloud2d"),gl_scatter3d:l("gl-scatter3d"),gl_select_box:l("gl-select-box"),gl_spikes2d:l("gl-spikes2d"),gl_streamtube3d:l("gl-streamtube3d"),gl_surface3d:l("gl-surface3d"),ndarray:l("ndarray"),ndarray_linear_interpolate:l("ndarray-linear-interpolate")}},{"alpha-shape":12,"convex-hull":58,"delaunay-triangulate":63,"gl-cone3d":79,"gl-error3d":84,"gl-heatmap2d":88,"gl-line3d":91,"gl-mesh3d":112,"gl-plot2d":118,"gl-plot3d":121,"gl-pointcloud2d":123,"gl-scatter3d":128,"gl-select-box":130,"gl-spikes2d":139,"gl-streamtube3d":143,"gl-surface3d":145,ndarray:259,"ndarray-linear-interpolate":253}],7:[function(l,m,x){m.exports=d;var t=l("turntable-camera-controller"),a=l("orbit-camera-controller"),i=l("matrix-camera-controller");function r(s,o){this._controllerNames=Object.keys(s),this._controllerList=this._controllerNames.map(function(y){return s[y]}),this._mode=o,this._active=s[o],this._active||(this._mode="turntable",this._active=s.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var n=r.prototype;n.flush=function(s){for(var o=this._controllerList,y=0;y<o.length;++y)o[y].flush(s)},n.idle=function(s){for(var o=this._controllerList,y=0;y<o.length;++y)o[y].idle(s)},n.lookAt=function(s,o,y,g){for(var b=this._controllerList,v=0;v<b.length;++v)b[v].lookAt(s,o,y,g)},n.rotate=function(s,o,y,g){for(var b=this._controllerList,v=0;v<b.length;++v)b[v].rotate(s,o,y,g)},n.pan=function(s,o,y,g){for(var b=this._controllerList,v=0;v<b.length;++v)b[v].pan(s,o,y,g)},n.translate=function(s,o,y,g){for(var b=this._controllerList,v=0;v<b.length;++v)b[v].translate(s,o,y,g)},n.setMatrix=function(s,o){for(var y=this._controllerList,g=0;g<y.length;++g)y[g].setMatrix(s,o)},n.setDistanceLimits=function(s,o){for(var y=this._controllerList,g=0;g<y.length;++g)y[g].setDistanceLimits(s,o)},n.setDistance=function(s,o){for(var y=this._controllerList,g=0;g<y.length;++g)y[g].setDistance(s,o)},n.recalcMatrix=function(s){this._active.recalcMatrix(s)},n.getDistance=function(s){return this._active.getDistance(s)},n.getDistanceLimits=function(s){return this._active.getDistanceLimits(s)},n.lastT=function(){return this._active.lastT()},n.setMode=function(s){if(s!==this._mode){var o=this._controllerNames.indexOf(s);if(!(o<0)){var y=this._active,g=this._controllerList[o],b=Math.max(y.lastT(),g.lastT());y.recalcMatrix(b),g.setMatrix(b,y.computedMatrix),this._active=g,this._mode=s,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},n.getMode=function(){return this._mode};function d(s){s=s||{};var o=s.eye||[0,0,1],y=s.center||[0,0,0],g=s.up||[0,1,0],b=s.distanceLimits||[0,1/0],v=s.mode||"turntable",_=t(),u=a(),T=i();return _.setDistanceLimits(b[0],b[1]),_.lookAt(0,o,y,g),u.setDistanceLimits(b[0],b[1]),u.lookAt(0,o,y,g),T.setDistanceLimits(b[0],b[1]),T.lookAt(0,o,y,g),new r({turntable:_,orbit:u,matrix:T},v)}},{"matrix-camera-controller":245,"orbit-camera-controller":263,"turntable-camera-controller":305}],8:[function(l,m,x){var t=typeof WeakMap>"u"?l("weak-map"):WeakMap,a=l("gl-buffer"),i=l("gl-vao"),r=new t;function n(d){var s=r.get(d),o=s&&(s._triangleBuffer.handle||s._triangleBuffer.buffer);if(!o||!d.isBuffer(o)){var y=a(d,new Float32Array([-1,-1,-1,4,4,-1]));s=i(d,[{buffer:y,type:d.FLOAT,size:2}]),s._triangleBuffer=y,r.set(d,s)}s.bind(),d.drawArrays(d.TRIANGLES,0,3),s.unbind()}m.exports=n},{"gl-buffer":78,"gl-vao":150,"weak-map":313}],9:[function(l,m,x){var t=l("pad-left");m.exports=a;function a(i,r,n){r=typeof r=="number"?r:1,n=n||": ";var d=i.split(/\r?\n/),s=String(d.length+r-1).length;return d.map(function(o,y){var g=y+r,b=String(g).length,v=t(g,s-b);return v+n+o}).join(`
`)}},{"pad-left":264}],10:[function(l,m,x){m.exports=i;var t=l("robust-orientation");function a(r,n){for(var d=new Array(n+1),s=0;s<r.length;++s)d[s]=r[s];for(var s=0;s<=r.length;++s){for(var o=r.length;o<=n;++o){for(var y=new Array(n),g=0;g<n;++g)y[g]=Math.pow(o+1-s,g);d[o]=y}var b=t.apply(void 0,d);if(b)return!0}return!1}function i(r){var n=r.length;if(n===0)return[];if(n===1)return[0];for(var d=r[0].length,s=[r[0]],o=[0],y=1;y<n;++y){if(s.push(r[y]),!a(s,d)){s.pop();continue}if(o.push(y),o.length===d+1)return o}return o}},{"robust-orientation":284}],11:[function(l,m,x){m.exports=i;var t=l("delaunay-triangulate"),a=l("circumradius");function i(r,n){return t(n).filter(function(d){for(var s=new Array(d.length),o=0;o<d.length;++o)s[o]=n[d[o]];return a(s)*r<1})}},{circumradius:49,"delaunay-triangulate":63}],12:[function(l,m,x){m.exports=i;var t=l("alpha-complex"),a=l("simplicial-complex-boundary");function i(r,n){return a(t(r,n))}},{"alpha-complex":11,"simplicial-complex-boundary":290}],13:[function(l,m,x){m.exports=function(a){return atob(a)}},{}],14:[function(l,m,x){m.exports=i;var t=l("robust-linear-solve");function a(r){for(var n=0,d=0;d<r.length;++d)n+=r[d];return n}function i(r,n){for(var d=n.length,s=new Array(d+1),o=0;o<d;++o){for(var y=new Array(d+1),g=0;g<=d;++g)y[g]=r[g][o];s[o]=y}s[d]=new Array(d+1);for(var o=0;o<=d;++o)s[d][o]=1;for(var b=new Array(d+1),o=0;o<d;++o)b[o]=n[o];b[d]=1;var v=t(s,b),_=a(v[d+1]);_===0&&(_=1);for(var u=new Array(d+1),o=0;o<=d;++o)u[o]=a(v[o])/_;return u}},{"robust-linear-solve":283}],15:[function(l,m,x){var t=l("./lib/rationalize");m.exports=a;function a(i,r){return t(i[0].mul(r[1]).add(r[0].mul(i[1])),i[1].mul(r[1]))}},{"./lib/rationalize":25}],16:[function(l,m,x){m.exports=t;function t(a,i){return a[0].mul(i[1]).cmp(i[0].mul(a[1]))}},{}],17:[function(l,m,x){var t=l("./lib/rationalize");m.exports=a;function a(i,r){return t(i[0].mul(r[1]),i[1].mul(r[0]))}},{"./lib/rationalize":25}],18:[function(l,m,x){var t=l("./is-rat"),a=l("./lib/is-bn"),i=l("./lib/num-to-bn"),r=l("./lib/str-to-bn"),n=l("./lib/rationalize"),d=l("./div");m.exports=s;function s(o,y){if(t(o))return y?d(o,s(y)):[o[0].clone(),o[1].clone()];var g=0,b,v;if(a(o))b=o.clone();else if(typeof o=="string")b=r(o);else{if(o===0)return[i(0),i(1)];if(o===Math.floor(o))b=i(o);else{for(;o!==Math.floor(o);)o=o*Math.pow(2,256),g-=256;b=i(o)}}if(t(y))b.mul(y[1]),v=y[0].clone();else if(a(y))v=y.clone();else if(typeof y=="string")v=r(y);else if(!y)v=i(1);else if(y===Math.floor(y))v=i(y);else{for(;y!==Math.floor(y);)y=y*Math.pow(2,256),g+=256;v=i(y)}return g>0?b=b.ushln(g):g<0&&(v=v.ushln(-g)),n(b,v)}},{"./div":17,"./is-rat":19,"./lib/is-bn":23,"./lib/num-to-bn":24,"./lib/rationalize":25,"./lib/str-to-bn":26}],19:[function(l,m,x){var t=l("./lib/is-bn");m.exports=a;function a(i){return Array.isArray(i)&&i.length===2&&t(i[0])&&t(i[1])}},{"./lib/is-bn":23}],20:[function(l,m,x){var t=l("bn.js");m.exports=a;function a(i){return i.cmp(new t(0))}},{"bn.js":33}],21:[function(l,m,x){var t=l("./bn-sign");m.exports=a;function a(i){var r=i.length,n=i.words,d=0;if(r===1)d=n[0];else if(r===2)d=n[0]+n[1]*67108864;else for(var s=0;s<r;s++){var o=n[s];d+=o*Math.pow(67108864,s)}return t(i)*d}},{"./bn-sign":20}],22:[function(l,m,x){var t=l("double-bits"),a=l("bit-twiddle").countTrailingZeros;m.exports=i;function i(r){var n=a(t.lo(r));if(n<32)return n;var d=a(t.hi(r));return d>20?52:d+32}},{"bit-twiddle":32,"double-bits":64}],23:[function(l,m,x){l("bn.js"),m.exports=t;function t(a){return a&&typeof a=="object"&&Boolean(a.words)}},{"bn.js":33}],24:[function(l,m,x){var t=l("bn.js"),a=l("double-bits");m.exports=i;function i(r){var n=a.exponent(r);return n<52?new t(r):new t(r*Math.pow(2,52-n)).ushln(n-52)}},{"bn.js":33,"double-bits":64}],25:[function(l,m,x){var t=l("./num-to-bn"),a=l("./bn-sign");m.exports=i;function i(r,n){var d=a(r),s=a(n);if(d===0)return[t(0),t(1)];if(s===0)return[t(0),t(0)];s<0&&(r=r.neg(),n=n.neg());var o=r.gcd(n);return o.cmpn(1)?[r.div(o),n.div(o)]:[r,n]}},{"./bn-sign":20,"./num-to-bn":24}],26:[function(l,m,x){var t=l("bn.js");m.exports=a;function a(i){return new t(i)}},{"bn.js":33}],27:[function(l,m,x){var t=l("./lib/rationalize");m.exports=a;function a(i,r){return t(i[0].mul(r[0]),i[1].mul(r[1]))}},{"./lib/rationalize":25}],28:[function(l,m,x){var t=l("./lib/bn-sign");m.exports=a;function a(i){return t(i[0])*t(i[1])}},{"./lib/bn-sign":20}],29:[function(l,m,x){var t=l("./lib/rationalize");m.exports=a;function a(i,r){return t(i[0].mul(r[1]).sub(i[1].mul(r[0])),i[1].mul(r[1]))}},{"./lib/rationalize":25}],30:[function(l,m,x){var t=l("./lib/bn-to-num"),a=l("./lib/ctz");m.exports=i;function i(r){var n=r[0],d=r[1];if(n.cmpn(0)===0)return 0;var s=n.abs().divmod(d.abs()),o=s.div,y=t(o),g=s.mod,b=n.negative!==d.negative?-1:1;if(g.cmpn(0)===0)return b*y;if(y){var v=a(y)+4,_=t(g.ushln(v).divRound(d));return b*(y+_*Math.pow(2,-v))}else{var u=d.bitLength()-g.bitLength()+53,_=t(g.ushln(u).divRound(d));return u<1023?b*_*Math.pow(2,-u):(_*=Math.pow(2,-1023),b*_*Math.pow(2,1023-u))}}},{"./lib/bn-to-num":21,"./lib/ctz":22}],31:[function(l,m,x){function t(s,o,y,g,b){for(var v=b+1;g<=b;){var _=g+b>>>1,u=s[_],T=y!==void 0?y(u,o):u-o;T>=0?(v=_,b=_-1):g=_+1}return v}function a(s,o,y,g,b){for(var v=b+1;g<=b;){var _=g+b>>>1,u=s[_],T=y!==void 0?y(u,o):u-o;T>0?(v=_,b=_-1):g=_+1}return v}function i(s,o,y,g,b){for(var v=g-1;g<=b;){var _=g+b>>>1,u=s[_],T=y!==void 0?y(u,o):u-o;T<0?(v=_,g=_+1):b=_-1}return v}function r(s,o,y,g,b){for(var v=g-1;g<=b;){var _=g+b>>>1,u=s[_],T=y!==void 0?y(u,o):u-o;T<=0?(v=_,g=_+1):b=_-1}return v}function n(s,o,y,g,b){for(;g<=b;){var v=g+b>>>1,_=s[v],u=y!==void 0?y(_,o):_-o;if(u===0)return v;u<=0?g=v+1:b=v-1}return-1}function d(s,o,y,g,b,v){return typeof y=="function"?v(s,o,y,g===void 0?0:g|0,b===void 0?s.length-1:b|0):v(s,o,void 0,y===void 0?0:y|0,g===void 0?s.length-1:g|0)}m.exports={ge:function(s,o,y,g,b){return d(s,o,y,g,b,t)},gt:function(s,o,y,g,b){return d(s,o,y,g,b,a)},lt:function(s,o,y,g,b){return d(s,o,y,g,b,i)},le:function(s,o,y,g,b){return d(s,o,y,g,b,r)},eq:function(s,o,y,g,b){return d(s,o,y,g,b,n)}}},{}],32:[function(l,m,x){var t=32;x.INT_BITS=t,x.INT_MAX=2147483647,x.INT_MIN=-1<<t-1,x.sign=function(r){return(r>0)-(r<0)},x.abs=function(r){var n=r>>t-1;return(r^n)-n},x.min=function(r,n){return n^(r^n)&-(r<n)},x.max=function(r,n){return r^(r^n)&-(r<n)},x.isPow2=function(r){return!(r&r-1)&&!!r},x.log2=function(r){var n,d;return n=(r>65535)<<4,r>>>=n,d=(r>255)<<3,r>>>=d,n|=d,d=(r>15)<<2,r>>>=d,n|=d,d=(r>3)<<1,r>>>=d,n|=d,n|r>>1},x.log10=function(r){return r>=1e9?9:r>=1e8?8:r>=1e7?7:r>=1e6?6:r>=1e5?5:r>=1e4?4:r>=1e3?3:r>=100?2:r>=10?1:0},x.popCount=function(r){return r=r-(r>>>1&1431655765),r=(r&858993459)+(r>>>2&858993459),(r+(r>>>4)&252645135)*16843009>>>24};function a(r){var n=32;return r&=-r,r&&n--,r&65535&&(n-=16),r&16711935&&(n-=8),r&252645135&&(n-=4),r&858993459&&(n-=2),r&1431655765&&(n-=1),n}x.countTrailingZeros=a,x.nextPow2=function(r){return r+=r===0,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r+1},x.prevPow2=function(r){return r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r-(r>>>1)},x.parity=function(r){return r^=r>>>16,r^=r>>>8,r^=r>>>4,r&=15,27030>>>r&1};var i=new Array(256);(function(r){for(var n=0;n<256;++n){var d=n,s=n,o=7;for(d>>>=1;d;d>>>=1)s<<=1,s|=d&1,--o;r[n]=s<<o&255}})(i),x.reverse=function(r){return i[r&255]<<24|i[r>>>8&255]<<16|i[r>>>16&255]<<8|i[r>>>24&255]},x.interleave2=function(r,n){return r&=65535,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,n&=65535,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,r|n<<1},x.deinterleave2=function(r,n){return r=r>>>n&1431655765,r=(r|r>>>1)&858993459,r=(r|r>>>2)&252645135,r=(r|r>>>4)&16711935,r=(r|r>>>16)&65535,r<<16>>16},x.interleave3=function(r,n,d){return r&=1023,r=(r|r<<16)&4278190335,r=(r|r<<8)&251719695,r=(r|r<<4)&3272356035,r=(r|r<<2)&1227133513,n&=1023,n=(n|n<<16)&4278190335,n=(n|n<<8)&251719695,n=(n|n<<4)&3272356035,n=(n|n<<2)&1227133513,r|=n<<1,d&=1023,d=(d|d<<16)&4278190335,d=(d|d<<8)&251719695,d=(d|d<<4)&3272356035,d=(d|d<<2)&1227133513,r|d<<2},x.deinterleave3=function(r,n){return r=r>>>n&1227133513,r=(r|r>>>2)&3272356035,r=(r|r>>>4)&251719695,r=(r|r>>>8)&4278190335,r=(r|r>>>16)&1023,r<<22>>22},x.nextCombination=function(r){var n=r|r-1;return n+1|(~n&-~n)-1>>>a(r)+1}},{}],33:[function(l,m,x){(function(t,a){function i(z,P){if(!z)throw new Error(P||"Assertion failed")}function r(z,P){z.super_=P;var I=function(){};I.prototype=P.prototype,z.prototype=new I,z.prototype.constructor=z}function n(z,P,I){if(n.isBN(z))return z;this.negative=0,this.words=null,this.length=0,this.red=null,z!==null&&((P==="le"||P==="be")&&(I=P,P=10),this._init(z||0,P||10,I||"be"))}typeof t=="object"?t.exports=n:a.BN=n,n.BN=n,n.wordSize=26;var d;try{typeof window<"u"&&typeof window.Buffer<"u"?d=window.Buffer:d=l("buffer").Buffer}catch{}n.isBN=function(P){return P instanceof n?!0:P!==null&&typeof P=="object"&&P.constructor.wordSize===n.wordSize&&Array.isArray(P.words)},n.max=function(P,I){return P.cmp(I)>0?P:I},n.min=function(P,I){return P.cmp(I)<0?P:I},n.prototype._init=function(P,I,U){if(typeof P=="number")return this._initNumber(P,I,U);if(typeof P=="object")return this._initArray(P,I,U);I==="hex"&&(I=16),i(I===(I|0)&&I>=2&&I<=36),P=P.toString().replace(/\s+/g,"");var O=0;P[0]==="-"&&(O++,this.negative=1),O<P.length&&(I===16?this._parseHex(P,O,U):(this._parseBase(P,I,O),U==="le"&&this._initArray(this.toArray(),I,U)))},n.prototype._initNumber=function(P,I,U){P<0&&(this.negative=1,P=-P),P<67108864?(this.words=[P&67108863],this.length=1):P<4503599627370496?(this.words=[P&67108863,P/67108864&67108863],this.length=2):(i(P<9007199254740992),this.words=[P&67108863,P/67108864&67108863,1],this.length=3),U==="le"&&this._initArray(this.toArray(),I,U)},n.prototype._initArray=function(P,I,U){if(i(typeof P.length=="number"),P.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(P.length/3),this.words=new Array(this.length);for(var O=0;O<this.length;O++)this.words[O]=0;var G,$,tt=0;if(U==="be")for(O=P.length-1,G=0;O>=0;O-=3)$=P[O]|P[O-1]<<8|P[O-2]<<16,this.words[G]|=$<<tt&67108863,this.words[G+1]=$>>>26-tt&67108863,tt+=24,tt>=26&&(tt-=26,G++);else if(U==="le")for(O=0,G=0;O<P.length;O+=3)$=P[O]|P[O+1]<<8|P[O+2]<<16,this.words[G]|=$<<tt&67108863,this.words[G+1]=$>>>26-tt&67108863,tt+=24,tt>=26&&(tt-=26,G++);return this.strip()};function s(z,P){var I=z.charCodeAt(P);return I>=65&&I<=70?I-55:I>=97&&I<=102?I-87:I-48&15}function o(z,P,I){var U=s(z,I);return I-1>=P&&(U|=s(z,I-1)<<4),U}n.prototype._parseHex=function(P,I,U){this.length=Math.ceil((P.length-I)/6),this.words=new Array(this.length);for(var O=0;O<this.length;O++)this.words[O]=0;var G=0,$=0,tt;if(U==="be")for(O=P.length-1;O>=I;O-=2)tt=o(P,I,O)<<G,this.words[$]|=tt&67108863,G>=18?(G-=18,$+=1,this.words[$]|=tt>>>26):G+=8;else{var Z=P.length-I;for(O=Z%2===0?I+1:I;O<P.length;O+=2)tt=o(P,I,O)<<G,this.words[$]|=tt&67108863,G>=18?(G-=18,$+=1,this.words[$]|=tt>>>26):G+=8}this.strip()};function y(z,P,I,U){for(var O=0,G=Math.min(z.length,I),$=P;$<G;$++){var tt=z.charCodeAt($)-48;O*=U,tt>=49?O+=tt-49+10:tt>=17?O+=tt-17+10:O+=tt}return O}n.prototype._parseBase=function(P,I,U){this.words=[0],this.length=1;for(var O=0,G=1;G<=67108863;G*=I)O++;O--,G=G/I|0;for(var $=P.length-U,tt=$%O,Z=Math.min($,$-tt)+U,X=0,J=U;J<Z;J+=O)X=y(P,J,J+O,I),this.imuln(G),this.words[0]+X<67108864?this.words[0]+=X:this._iaddn(X);if(tt!==0){var st=1;for(X=y(P,J,P.length,I),J=0;J<tt;J++)st*=I;this.imuln(st),this.words[0]+X<67108864?this.words[0]+=X:this._iaddn(X)}this.strip()},n.prototype.copy=function(P){P.words=new Array(this.length);for(var I=0;I<this.length;I++)P.words[I]=this.words[I];P.length=this.length,P.negative=this.negative,P.red=this.red},n.prototype.clone=function(){var P=new n(null);return this.copy(P),P},n.prototype._expand=function(P){for(;this.length<P;)this.words[this.length++]=0;return this},n.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},n.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},n.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var g=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],b=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],v=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];n.prototype.toString=function(P,I){P=P||10,I=I|0||1;var U;if(P===16||P==="hex"){U="";for(var O=0,G=0,$=0;$<this.length;$++){var tt=this.words[$],Z=((tt<<O|G)&16777215).toString(16);G=tt>>>24-O&16777215,G!==0||$!==this.length-1?U=g[6-Z.length]+Z+U:U=Z+U,O+=2,O>=26&&(O-=26,$--)}for(G!==0&&(U=G.toString(16)+U);U.length%I!==0;)U="0"+U;return this.negative!==0&&(U="-"+U),U}if(P===(P|0)&&P>=2&&P<=36){var X=b[P],J=v[P];U="";var st=this.clone();for(st.negative=0;!st.isZero();){var at=st.modn(J).toString(P);st=st.idivn(J),st.isZero()?U=at+U:U=g[X-at.length]+at+U}for(this.isZero()&&(U="0"+U);U.length%I!==0;)U="0"+U;return this.negative!==0&&(U="-"+U),U}i(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var P=this.words[0];return this.length===2?P+=this.words[1]*67108864:this.length===3&&this.words[2]===1?P+=4503599627370496+this.words[1]*67108864:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-P:P},n.prototype.toJSON=function(){return this.toString(16)},n.prototype.toBuffer=function(P,I){return i(typeof d<"u"),this.toArrayLike(d,P,I)},n.prototype.toArray=function(P,I){return this.toArrayLike(Array,P,I)},n.prototype.toArrayLike=function(P,I,U){var O=this.byteLength(),G=U||Math.max(1,O);i(O<=G,"byte array longer than desired length"),i(G>0,"Requested array length <= 0"),this.strip();var $=I==="le",tt=new P(G),Z,X,J=this.clone();if($){for(X=0;!J.isZero();X++)Z=J.andln(255),J.iushrn(8),tt[X]=Z;for(;X<G;X++)tt[X]=0}else{for(X=0;X<G-O;X++)tt[X]=0;for(X=0;!J.isZero();X++)Z=J.andln(255),J.iushrn(8),tt[G-X-1]=Z}return tt},Math.clz32?n.prototype._countBits=function(P){return 32-Math.clz32(P)}:n.prototype._countBits=function(P){var I=P,U=0;return I>=4096&&(U+=13,I>>>=13),I>=64&&(U+=7,I>>>=7),I>=8&&(U+=4,I>>>=4),I>=2&&(U+=2,I>>>=2),U+I},n.prototype._zeroBits=function(P){if(P===0)return 26;var I=P,U=0;return(I&8191)===0&&(U+=13,I>>>=13),(I&127)===0&&(U+=7,I>>>=7),(I&15)===0&&(U+=4,I>>>=4),(I&3)===0&&(U+=2,I>>>=2),(I&1)===0&&U++,U},n.prototype.bitLength=function(){var P=this.words[this.length-1],I=this._countBits(P);return(this.length-1)*26+I};function _(z){for(var P=new Array(z.bitLength()),I=0;I<P.length;I++){var U=I/26|0,O=I%26;P[I]=(z.words[U]&1<<O)>>>O}return P}n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var P=0,I=0;I<this.length;I++){var U=this._zeroBits(this.words[I]);if(P+=U,U!==26)break}return P},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(P){return this.negative!==0?this.abs().inotn(P).iaddn(1):this.clone()},n.prototype.fromTwos=function(P){return this.testn(P-1)?this.notn(P).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return this.negative!==0},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(P){for(;this.length<P.length;)this.words[this.length++]=0;for(var I=0;I<P.length;I++)this.words[I]=this.words[I]|P.words[I];return this.strip()},n.prototype.ior=function(P){return i((this.negative|P.negative)===0),this.iuor(P)},n.prototype.or=function(P){return this.length>P.length?this.clone().ior(P):P.clone().ior(this)},n.prototype.uor=function(P){return this.length>P.length?this.clone().iuor(P):P.clone().iuor(this)},n.prototype.iuand=function(P){var I;this.length>P.length?I=P:I=this;for(var U=0;U<I.length;U++)this.words[U]=this.words[U]&P.words[U];return this.length=I.length,this.strip()},n.prototype.iand=function(P){return i((this.negative|P.negative)===0),this.iuand(P)},n.prototype.and=function(P){return this.length>P.length?this.clone().iand(P):P.clone().iand(this)},n.prototype.uand=function(P){return this.length>P.length?this.clone().iuand(P):P.clone().iuand(this)},n.prototype.iuxor=function(P){var I,U;this.length>P.length?(I=this,U=P):(I=P,U=this);for(var O=0;O<U.length;O++)this.words[O]=I.words[O]^U.words[O];if(this!==I)for(;O<I.length;O++)this.words[O]=I.words[O];return this.length=I.length,this.strip()},n.prototype.ixor=function(P){return i((this.negative|P.negative)===0),this.iuxor(P)},n.prototype.xor=function(P){return this.length>P.length?this.clone().ixor(P):P.clone().ixor(this)},n.prototype.uxor=function(P){return this.length>P.length?this.clone().iuxor(P):P.clone().iuxor(this)},n.prototype.inotn=function(P){i(typeof P=="number"&&P>=0);var I=Math.ceil(P/26)|0,U=P%26;this._expand(I),U>0&&I--;for(var O=0;O<I;O++)this.words[O]=~this.words[O]&67108863;return U>0&&(this.words[O]=~this.words[O]&67108863>>26-U),this.strip()},n.prototype.notn=function(P){return this.clone().inotn(P)},n.prototype.setn=function(P,I){i(typeof P=="number"&&P>=0);var U=P/26|0,O=P%26;return this._expand(U+1),I?this.words[U]=this.words[U]|1<<O:this.words[U]=this.words[U]&~(1<<O),this.strip()},n.prototype.iadd=function(P){var I;if(this.negative!==0&&P.negative===0)return this.negative=0,I=this.isub(P),this.negative^=1,this._normSign();if(this.negative===0&&P.negative!==0)return P.negative=0,I=this.isub(P),P.negative=1,I._normSign();var U,O;this.length>P.length?(U=this,O=P):(U=P,O=this);for(var G=0,$=0;$<O.length;$++)I=(U.words[$]|0)+(O.words[$]|0)+G,this.words[$]=I&67108863,G=I>>>26;for(;G!==0&&$<U.length;$++)I=(U.words[$]|0)+G,this.words[$]=I&67108863,G=I>>>26;if(this.length=U.length,G!==0)this.words[this.length]=G,this.length++;else if(U!==this)for(;$<U.length;$++)this.words[$]=U.words[$];return this},n.prototype.add=function(P){var I;return P.negative!==0&&this.negative===0?(P.negative=0,I=this.sub(P),P.negative^=1,I):P.negative===0&&this.negative!==0?(this.negative=0,I=P.sub(this),this.negative=1,I):this.length>P.length?this.clone().iadd(P):P.clone().iadd(this)},n.prototype.isub=function(P){if(P.negative!==0){P.negative=0;var I=this.iadd(P);return P.negative=1,I._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(P),this.negative=1,this._normSign();var U=this.cmp(P);if(U===0)return this.negative=0,this.length=1,this.words[0]=0,this;var O,G;U>0?(O=this,G=P):(O=P,G=this);for(var $=0,tt=0;tt<G.length;tt++)I=(O.words[tt]|0)-(G.words[tt]|0)+$,$=I>>26,this.words[tt]=I&67108863;for(;$!==0&&tt<O.length;tt++)I=(O.words[tt]|0)+$,$=I>>26,this.words[tt]=I&67108863;if($===0&&tt<O.length&&O!==this)for(;tt<O.length;tt++)this.words[tt]=O.words[tt];return this.length=Math.max(this.length,tt),O!==this&&(this.negative=1),this.strip()},n.prototype.sub=function(P){return this.clone().isub(P)};function u(z,P,I){I.negative=P.negative^z.negative;var U=z.length+P.length|0;I.length=U,U=U-1|0;var O=z.words[0]|0,G=P.words[0]|0,$=O*G,tt=$&67108863,Z=$/67108864|0;I.words[0]=tt;for(var X=1;X<U;X++){for(var J=Z>>>26,st=Z&67108863,at=Math.min(X,P.length-1),lt=Math.max(0,X-z.length+1);lt<=at;lt++){var F=X-lt|0;O=z.words[F]|0,G=P.words[lt]|0,$=O*G+st,J+=$/67108864|0,st=$&67108863}I.words[X]=st|0,Z=J|0}return Z!==0?I.words[X]=Z|0:I.length--,I.strip()}var T=function(P,I,U){var O=P.words,G=I.words,$=U.words,tt=0,Z,X,J,st=O[0]|0,at=st&8191,lt=st>>>13,F=O[1]|0,H=F&8191,et=F>>>13,q=O[2]|0,W=q&8191,K=q>>>13,nt=O[3]|0,it=nt&8191,ot=nt>>>13,ct=O[4]|0,bt=ct&8191,ut=ct>>>13,pt=O[5]|0,yt=pt&8191,Tt=pt>>>13,kt=O[6]|0,zt=kt&8191,Rt=kt>>>13,Gt=O[7]|0,wt=Gt&8191,It=Gt>>>13,$t=O[8]|0,Qt=$t&8191,Nt=$t>>>13,Pt=O[9]|0,Yt=Pt&8191,ve=Pt>>>13,Re=G[0]|0,ir=Re&8191,Ie=Re>>>13,Be=G[1]|0,Ye=Be&8191,ze=Be>>>13,Ee=G[2]|0,Wt=Ee&8191,ee=Ee>>>13,Xt=G[3]|0,St=Xt&8191,Vt=Xt>>>13,Zt=G[4]|0,qt=Zt&8191,Te=Zt>>>13,me=G[5]|0,Ne=me&8191,Ke=me>>>13,He=G[6]|0,Xe=He&8191,er=He>>>13,We=G[7]|0,hr=We&8191,Wr=We>>>13,dn=G[8]|0,Qr=dn&8191,le=dn>>>13,Qe=G[9]|0,Ze=Qe&8191,Ve=Qe>>>13;U.negative=P.negative^I.negative,U.length=19,Z=Math.imul(at,ir),X=Math.imul(at,Ie),X=X+Math.imul(lt,ir)|0,J=Math.imul(lt,Ie);var _r=(tt+Z|0)+((X&8191)<<13)|0;tt=(J+(X>>>13)|0)+(_r>>>26)|0,_r&=67108863,Z=Math.imul(H,ir),X=Math.imul(H,Ie),X=X+Math.imul(et,ir)|0,J=Math.imul(et,Ie),Z=Z+Math.imul(at,Ye)|0,X=X+Math.imul(at,ze)|0,X=X+Math.imul(lt,Ye)|0,J=J+Math.imul(lt,ze)|0;var oe=(tt+Z|0)+((X&8191)<<13)|0;tt=(J+(X>>>13)|0)+(oe>>>26)|0,oe&=67108863,Z=Math.imul(W,ir),X=Math.imul(W,Ie),X=X+Math.imul(K,ir)|0,J=Math.imul(K,Ie),Z=Z+Math.imul(H,Ye)|0,X=X+Math.imul(H,ze)|0,X=X+Math.imul(et,Ye)|0,J=J+Math.imul(et,ze)|0,Z=Z+Math.imul(at,Wt)|0,X=X+Math.imul(at,ee)|0,X=X+Math.imul(lt,Wt)|0,J=J+Math.imul(lt,ee)|0;var Ht=(tt+Z|0)+((X&8191)<<13)|0;tt=(J+(X>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,Z=Math.imul(it,ir),X=Math.imul(it,Ie),X=X+Math.imul(ot,ir)|0,J=Math.imul(ot,Ie),Z=Z+Math.imul(W,Ye)|0,X=X+Math.imul(W,ze)|0,X=X+Math.imul(K,Ye)|0,J=J+Math.imul(K,ze)|0,Z=Z+Math.imul(H,Wt)|0,X=X+Math.imul(H,ee)|0,X=X+Math.imul(et,Wt)|0,J=J+Math.imul(et,ee)|0,Z=Z+Math.imul(at,St)|0,X=X+Math.imul(at,Vt)|0,X=X+Math.imul(lt,St)|0,J=J+Math.imul(lt,Vt)|0;var te=(tt+Z|0)+((X&8191)<<13)|0;tt=(J+(X>>>13)|0)+(te>>>26)|0,te&=67108863,Z=Math.imul(bt,ir),X=Math.imul(bt,Ie),X=X+Math.imul(ut,ir)|0,J=Math.imul(ut,Ie),Z=Z+Math.imul(it,Ye)|0,X=X+Math.imul(it,ze)|0,X=X+Math.imul(ot,Ye)|0,J=J+Math.imul(ot,ze)|0,Z=Z+Math.imul(W,Wt)|0,X=X+Math.imul(W,ee)|0,X=X+Math.imul(K,Wt)|0,J=J+Math.imul(K,ee)|0,Z=Z+Math.imul(H,St)|0,X=X+Math.imul(H,Vt)|0,X=X+Math.imul(et,St)|0,J=J+Math.imul(et,Vt)|0,Z=Z+Math.imul(at,qt)|0,X=X+Math.imul(at,Te)|0,X=X+Math.imul(lt,qt)|0,J=J+Math.imul(lt,Te)|0;var ne=(tt+Z|0)+((X&8191)<<13)|0;tt=(J+(X>>>13)|0)+(ne>>>26)|0,ne&=67108863,Z=Math.imul(yt,ir),X=Math.imul(yt,Ie),X=X+Math.imul(Tt,ir)|0,J=Math.imul(Tt,Ie),Z=Z+Math.imul(bt,Ye)|0,X=X+Math.imul(bt,ze)|0,X=X+Math.imul(ut,Ye)|0,J=J+Math.imul(ut,ze)|0,Z=Z+Math.imul(it,Wt)|0,X=X+Math.imul(it,ee)|0,X=X+Math.imul(ot,Wt)|0,J=J+Math.imul(ot,ee)|0,Z=Z+Math.imul(W,St)|0,X=X+Math.imul(W,Vt)|0,X=X+Math.imul(K,St)|0,J=J+Math.imul(K,Vt)|0,Z=Z+Math.imul(H,qt)|0,X=X+Math.imul(H,Te)|0,X=X+Math.imul(et,qt)|0,J=J+Math.imul(et,Te)|0,Z=Z+Math.imul(at,Ne)|0,X=X+Math.imul(at,Ke)|0,X=X+Math.imul(lt,Ne)|0,J=J+Math.imul(lt,Ke)|0;var _e=(tt+Z|0)+((X&8191)<<13)|0;tt=(J+(X>>>13)|0)+(_e>>>26)|0,_e&=67108863,Z=Math.imul(zt,ir),X=Math.imul(zt,Ie),X=X+Math.imul(Rt,ir)|0,J=Math.imul(Rt,Ie),Z=Z+Math.imul(yt,Ye)|0,X=X+Math.imul(yt,ze)|0,X=X+Math.imul(Tt,Ye)|0,J=J+Math.imul(Tt,ze)|0,Z=Z+Math.imul(bt,Wt)|0,X=X+Math.imul(bt,ee)|0,X=X+Math.imul(ut,Wt)|0,J=J+Math.imul(ut,ee)|0,Z=Z+Math.imul(it,St)|0,X=X+Math.imul(it,Vt)|0,X=X+Math.imul(ot,St)|0,J=J+Math.imul(ot,Vt)|0,Z=Z+Math.imul(W,qt)|0,X=X+Math.imul(W,Te)|0,X=X+Math.imul(K,qt)|0,J=J+Math.imul(K,Te)|0,Z=Z+Math.imul(H,Ne)|0,X=X+Math.imul(H,Ke)|0,X=X+Math.imul(et,Ne)|0,J=J+Math.imul(et,Ke)|0,Z=Z+Math.imul(at,Xe)|0,X=X+Math.imul(at,er)|0,X=X+Math.imul(lt,Xe)|0,J=J+Math.imul(lt,er)|0;var Pe=(tt+Z|0)+((X&8191)<<13)|0;tt=(J+(X>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,Z=Math.imul(wt,ir),X=Math.imul(wt,Ie),X=X+Math.imul(It,ir)|0,J=Math.imul(It,Ie),Z=Z+Math.imul(zt,Ye)|0,X=X+Math.imul(zt,ze)|0,X=X+Math.imul(Rt,Ye)|0,J=J+Math.imul(Rt,ze)|0,Z=Z+Math.imul(yt,Wt)|0,X=X+Math.imul(yt,ee)|0,X=X+Math.imul(Tt,Wt)|0,J=J+Math.imul(Tt,ee)|0,Z=Z+Math.imul(bt,St)|0,X=X+Math.imul(bt,Vt)|0,X=X+Math.imul(ut,St)|0,J=J+Math.imul(ut,Vt)|0,Z=Z+Math.imul(it,qt)|0,X=X+Math.imul(it,Te)|0,X=X+Math.imul(ot,qt)|0,J=J+Math.imul(ot,Te)|0,Z=Z+Math.imul(W,Ne)|0,X=X+Math.imul(W,Ke)|0,X=X+Math.imul(K,Ne)|0,J=J+Math.imul(K,Ke)|0,Z=Z+Math.imul(H,Xe)|0,X=X+Math.imul(H,er)|0,X=X+Math.imul(et,Xe)|0,J=J+Math.imul(et,er)|0,Z=Z+Math.imul(at,hr)|0,X=X+Math.imul(at,Wr)|0,X=X+Math.imul(lt,hr)|0,J=J+Math.imul(lt,Wr)|0;var Et=(tt+Z|0)+((X&8191)<<13)|0;tt=(J+(X>>>13)|0)+(Et>>>26)|0,Et&=67108863,Z=Math.imul(Qt,ir),X=Math.imul(Qt,Ie),X=X+Math.imul(Nt,ir)|0,J=Math.imul(Nt,Ie),Z=Z+Math.imul(wt,Ye)|0,X=X+Math.imul(wt,ze)|0,X=X+Math.imul(It,Ye)|0,J=J+Math.imul(It,ze)|0,Z=Z+Math.imul(zt,Wt)|0,X=X+Math.imul(zt,ee)|0,X=X+Math.imul(Rt,Wt)|0,J=J+Math.imul(Rt,ee)|0,Z=Z+Math.imul(yt,St)|0,X=X+Math.imul(yt,Vt)|0,X=X+Math.imul(Tt,St)|0,J=J+Math.imul(Tt,Vt)|0,Z=Z+Math.imul(bt,qt)|0,X=X+Math.imul(bt,Te)|0,X=X+Math.imul(ut,qt)|0,J=J+Math.imul(ut,Te)|0,Z=Z+Math.imul(it,Ne)|0,X=X+Math.imul(it,Ke)|0,X=X+Math.imul(ot,Ne)|0,J=J+Math.imul(ot,Ke)|0,Z=Z+Math.imul(W,Xe)|0,X=X+Math.imul(W,er)|0,X=X+Math.imul(K,Xe)|0,J=J+Math.imul(K,er)|0,Z=Z+Math.imul(H,hr)|0,X=X+Math.imul(H,Wr)|0,X=X+Math.imul(et,hr)|0,J=J+Math.imul(et,Wr)|0,Z=Z+Math.imul(at,Qr)|0,X=X+Math.imul(at,le)|0,X=X+Math.imul(lt,Qr)|0,J=J+Math.imul(lt,le)|0;var Mt=(tt+Z|0)+((X&8191)<<13)|0;tt=(J+(X>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,Z=Math.imul(Yt,ir),X=Math.imul(Yt,Ie),X=X+Math.imul(ve,ir)|0,J=Math.imul(ve,Ie),Z=Z+Math.imul(Qt,Ye)|0,X=X+Math.imul(Qt,ze)|0,X=X+Math.imul(Nt,Ye)|0,J=J+Math.imul(Nt,ze)|0,Z=Z+Math.imul(wt,Wt)|0,X=X+Math.imul(wt,ee)|0,X=X+Math.imul(It,Wt)|0,J=J+Math.imul(It,ee)|0,Z=Z+Math.imul(zt,St)|0,X=X+Math.imul(zt,Vt)|0,X=X+Math.imul(Rt,St)|0,J=J+Math.imul(Rt,Vt)|0,Z=Z+Math.imul(yt,qt)|0,X=X+Math.imul(yt,Te)|0,X=X+Math.imul(Tt,qt)|0,J=J+Math.imul(Tt,Te)|0,Z=Z+Math.imul(bt,Ne)|0,X=X+Math.imul(bt,Ke)|0,X=X+Math.imul(ut,Ne)|0,J=J+Math.imul(ut,Ke)|0,Z=Z+Math.imul(it,Xe)|0,X=X+Math.imul(it,er)|0,X=X+Math.imul(ot,Xe)|0,J=J+Math.imul(ot,er)|0,Z=Z+Math.imul(W,hr)|0,X=X+Math.imul(W,Wr)|0,X=X+Math.imul(K,hr)|0,J=J+Math.imul(K,Wr)|0,Z=Z+Math.imul(H,Qr)|0,X=X+Math.imul(H,le)|0,X=X+Math.imul(et,Qr)|0,J=J+Math.imul(et,le)|0,Z=Z+Math.imul(at,Ze)|0,X=X+Math.imul(at,Ve)|0,X=X+Math.imul(lt,Ze)|0,J=J+Math.imul(lt,Ve)|0;var se=(tt+Z|0)+((X&8191)<<13)|0;tt=(J+(X>>>13)|0)+(se>>>26)|0,se&=67108863,Z=Math.imul(Yt,Ye),X=Math.imul(Yt,ze),X=X+Math.imul(ve,Ye)|0,J=Math.imul(ve,ze),Z=Z+Math.imul(Qt,Wt)|0,X=X+Math.imul(Qt,ee)|0,X=X+Math.imul(Nt,Wt)|0,J=J+Math.imul(Nt,ee)|0,Z=Z+Math.imul(wt,St)|0,X=X+Math.imul(wt,Vt)|0,X=X+Math.imul(It,St)|0,J=J+Math.imul(It,Vt)|0,Z=Z+Math.imul(zt,qt)|0,X=X+Math.imul(zt,Te)|0,X=X+Math.imul(Rt,qt)|0,J=J+Math.imul(Rt,Te)|0,Z=Z+Math.imul(yt,Ne)|0,X=X+Math.imul(yt,Ke)|0,X=X+Math.imul(Tt,Ne)|0,J=J+Math.imul(Tt,Ke)|0,Z=Z+Math.imul(bt,Xe)|0,X=X+Math.imul(bt,er)|0,X=X+Math.imul(ut,Xe)|0,J=J+Math.imul(ut,er)|0,Z=Z+Math.imul(it,hr)|0,X=X+Math.imul(it,Wr)|0,X=X+Math.imul(ot,hr)|0,J=J+Math.imul(ot,Wr)|0,Z=Z+Math.imul(W,Qr)|0,X=X+Math.imul(W,le)|0,X=X+Math.imul(K,Qr)|0,J=J+Math.imul(K,le)|0,Z=Z+Math.imul(H,Ze)|0,X=X+Math.imul(H,Ve)|0,X=X+Math.imul(et,Ze)|0,J=J+Math.imul(et,Ve)|0;var ce=(tt+Z|0)+((X&8191)<<13)|0;tt=(J+(X>>>13)|0)+(ce>>>26)|0,ce&=67108863,Z=Math.imul(Yt,Wt),X=Math.imul(Yt,ee),X=X+Math.imul(ve,Wt)|0,J=Math.imul(ve,ee),Z=Z+Math.imul(Qt,St)|0,X=X+Math.imul(Qt,Vt)|0,X=X+Math.imul(Nt,St)|0,J=J+Math.imul(Nt,Vt)|0,Z=Z+Math.imul(wt,qt)|0,X=X+Math.imul(wt,Te)|0,X=X+Math.imul(It,qt)|0,J=J+Math.imul(It,Te)|0,Z=Z+Math.imul(zt,Ne)|0,X=X+Math.imul(zt,Ke)|0,X=X+Math.imul(Rt,Ne)|0,J=J+Math.imul(Rt,Ke)|0,Z=Z+Math.imul(yt,Xe)|0,X=X+Math.imul(yt,er)|0,X=X+Math.imul(Tt,Xe)|0,J=J+Math.imul(Tt,er)|0,Z=Z+Math.imul(bt,hr)|0,X=X+Math.imul(bt,Wr)|0,X=X+Math.imul(ut,hr)|0,J=J+Math.imul(ut,Wr)|0,Z=Z+Math.imul(it,Qr)|0,X=X+Math.imul(it,le)|0,X=X+Math.imul(ot,Qr)|0,J=J+Math.imul(ot,le)|0,Z=Z+Math.imul(W,Ze)|0,X=X+Math.imul(W,Ve)|0,X=X+Math.imul(K,Ze)|0,J=J+Math.imul(K,Ve)|0;var de=(tt+Z|0)+((X&8191)<<13)|0;tt=(J+(X>>>13)|0)+(de>>>26)|0,de&=67108863,Z=Math.imul(Yt,St),X=Math.imul(Yt,Vt),X=X+Math.imul(ve,St)|0,J=Math.imul(ve,Vt),Z=Z+Math.imul(Qt,qt)|0,X=X+Math.imul(Qt,Te)|0,X=X+Math.imul(Nt,qt)|0,J=J+Math.imul(Nt,Te)|0,Z=Z+Math.imul(wt,Ne)|0,X=X+Math.imul(wt,Ke)|0,X=X+Math.imul(It,Ne)|0,J=J+Math.imul(It,Ke)|0,Z=Z+Math.imul(zt,Xe)|0,X=X+Math.imul(zt,er)|0,X=X+Math.imul(Rt,Xe)|0,J=J+Math.imul(Rt,er)|0,Z=Z+Math.imul(yt,hr)|0,X=X+Math.imul(yt,Wr)|0,X=X+Math.imul(Tt,hr)|0,J=J+Math.imul(Tt,Wr)|0,Z=Z+Math.imul(bt,Qr)|0,X=X+Math.imul(bt,le)|0,X=X+Math.imul(ut,Qr)|0,J=J+Math.imul(ut,le)|0,Z=Z+Math.imul(it,Ze)|0,X=X+Math.imul(it,Ve)|0,X=X+Math.imul(ot,Ze)|0,J=J+Math.imul(ot,Ve)|0;var Se=(tt+Z|0)+((X&8191)<<13)|0;tt=(J+(X>>>13)|0)+(Se>>>26)|0,Se&=67108863,Z=Math.imul(Yt,qt),X=Math.imul(Yt,Te),X=X+Math.imul(ve,qt)|0,J=Math.imul(ve,Te),Z=Z+Math.imul(Qt,Ne)|0,X=X+Math.imul(Qt,Ke)|0,X=X+Math.imul(Nt,Ne)|0,J=J+Math.imul(Nt,Ke)|0,Z=Z+Math.imul(wt,Xe)|0,X=X+Math.imul(wt,er)|0,X=X+Math.imul(It,Xe)|0,J=J+Math.imul(It,er)|0,Z=Z+Math.imul(zt,hr)|0,X=X+Math.imul(zt,Wr)|0,X=X+Math.imul(Rt,hr)|0,J=J+Math.imul(Rt,Wr)|0,Z=Z+Math.imul(yt,Qr)|0,X=X+Math.imul(yt,le)|0,X=X+Math.imul(Tt,Qr)|0,J=J+Math.imul(Tt,le)|0,Z=Z+Math.imul(bt,Ze)|0,X=X+Math.imul(bt,Ve)|0,X=X+Math.imul(ut,Ze)|0,J=J+Math.imul(ut,Ve)|0;var ye=(tt+Z|0)+((X&8191)<<13)|0;tt=(J+(X>>>13)|0)+(ye>>>26)|0,ye&=67108863,Z=Math.imul(Yt,Ne),X=Math.imul(Yt,Ke),X=X+Math.imul(ve,Ne)|0,J=Math.imul(ve,Ke),Z=Z+Math.imul(Qt,Xe)|0,X=X+Math.imul(Qt,er)|0,X=X+Math.imul(Nt,Xe)|0,J=J+Math.imul(Nt,er)|0,Z=Z+Math.imul(wt,hr)|0,X=X+Math.imul(wt,Wr)|0,X=X+Math.imul(It,hr)|0,J=J+Math.imul(It,Wr)|0,Z=Z+Math.imul(zt,Qr)|0,X=X+Math.imul(zt,le)|0,X=X+Math.imul(Rt,Qr)|0,J=J+Math.imul(Rt,le)|0,Z=Z+Math.imul(yt,Ze)|0,X=X+Math.imul(yt,Ve)|0,X=X+Math.imul(Tt,Ze)|0,J=J+Math.imul(Tt,Ve)|0;var Ae=(tt+Z|0)+((X&8191)<<13)|0;tt=(J+(X>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,Z=Math.imul(Yt,Xe),X=Math.imul(Yt,er),X=X+Math.imul(ve,Xe)|0,J=Math.imul(ve,er),Z=Z+Math.imul(Qt,hr)|0,X=X+Math.imul(Qt,Wr)|0,X=X+Math.imul(Nt,hr)|0,J=J+Math.imul(Nt,Wr)|0,Z=Z+Math.imul(wt,Qr)|0,X=X+Math.imul(wt,le)|0,X=X+Math.imul(It,Qr)|0,J=J+Math.imul(It,le)|0,Z=Z+Math.imul(zt,Ze)|0,X=X+Math.imul(zt,Ve)|0,X=X+Math.imul(Rt,Ze)|0,J=J+Math.imul(Rt,Ve)|0;var Ge=(tt+Z|0)+((X&8191)<<13)|0;tt=(J+(X>>>13)|0)+(Ge>>>26)|0,Ge&=67108863,Z=Math.imul(Yt,hr),X=Math.imul(Yt,Wr),X=X+Math.imul(ve,hr)|0,J=Math.imul(ve,Wr),Z=Z+Math.imul(Qt,Qr)|0,X=X+Math.imul(Qt,le)|0,X=X+Math.imul(Nt,Qr)|0,J=J+Math.imul(Nt,le)|0,Z=Z+Math.imul(wt,Ze)|0,X=X+Math.imul(wt,Ve)|0,X=X+Math.imul(It,Ze)|0,J=J+Math.imul(It,Ve)|0;var sr=(tt+Z|0)+((X&8191)<<13)|0;tt=(J+(X>>>13)|0)+(sr>>>26)|0,sr&=67108863,Z=Math.imul(Yt,Qr),X=Math.imul(Yt,le),X=X+Math.imul(ve,Qr)|0,J=Math.imul(ve,le),Z=Z+Math.imul(Qt,Ze)|0,X=X+Math.imul(Qt,Ve)|0,X=X+Math.imul(Nt,Ze)|0,J=J+Math.imul(Nt,Ve)|0;var Er=(tt+Z|0)+((X&8191)<<13)|0;tt=(J+(X>>>13)|0)+(Er>>>26)|0,Er&=67108863,Z=Math.imul(Yt,Ze),X=Math.imul(Yt,Ve),X=X+Math.imul(ve,Ze)|0,J=Math.imul(ve,Ve);var kr=(tt+Z|0)+((X&8191)<<13)|0;return tt=(J+(X>>>13)|0)+(kr>>>26)|0,kr&=67108863,$[0]=_r,$[1]=oe,$[2]=Ht,$[3]=te,$[4]=ne,$[5]=_e,$[6]=Pe,$[7]=Et,$[8]=Mt,$[9]=se,$[10]=ce,$[11]=de,$[12]=Se,$[13]=ye,$[14]=Ae,$[15]=Ge,$[16]=sr,$[17]=Er,$[18]=kr,tt!==0&&($[19]=tt,U.length++),U};Math.imul||(T=u);function c(z,P,I){I.negative=P.negative^z.negative,I.length=z.length+P.length;for(var U=0,O=0,G=0;G<I.length-1;G++){var $=O;O=0;for(var tt=U&67108863,Z=Math.min(G,P.length-1),X=Math.max(0,G-z.length+1);X<=Z;X++){var J=G-X,st=z.words[J]|0,at=P.words[X]|0,lt=st*at,F=lt&67108863;$=$+(lt/67108864|0)|0,F=F+tt|0,tt=F&67108863,$=$+(F>>>26)|0,O+=$>>>26,$&=67108863}I.words[G]=tt,U=$,$=O}return U!==0?I.words[G]=U:I.length--,I.strip()}function A(z,P,I){var U=new k;return U.mulp(z,P,I)}n.prototype.mulTo=function(P,I){var U,O=this.length+P.length;return this.length===10&&P.length===10?U=T(this,P,I):O<63?U=u(this,P,I):O<1024?U=c(this,P,I):U=A(this,P,I),U};function k(z,P){this.x=z,this.y=P}k.prototype.makeRBT=function(P){for(var I=new Array(P),U=n.prototype._countBits(P)-1,O=0;O<P;O++)I[O]=this.revBin(O,U,P);return I},k.prototype.revBin=function(P,I,U){if(P===0||P===U-1)return P;for(var O=0,G=0;G<I;G++)O|=(P&1)<<I-G-1,P>>=1;return O},k.prototype.permute=function(P,I,U,O,G,$){for(var tt=0;tt<$;tt++)O[tt]=I[P[tt]],G[tt]=U[P[tt]]},k.prototype.transform=function(P,I,U,O,G,$){this.permute($,P,I,U,O,G);for(var tt=1;tt<G;tt<<=1)for(var Z=tt<<1,X=Math.cos(2*Math.PI/Z),J=Math.sin(2*Math.PI/Z),st=0;st<G;st+=Z)for(var at=X,lt=J,F=0;F<tt;F++){var H=U[st+F],et=O[st+F],q=U[st+F+tt],W=O[st+F+tt],K=at*q-lt*W;W=at*W+lt*q,q=K,U[st+F]=H+q,O[st+F]=et+W,U[st+F+tt]=H-q,O[st+F+tt]=et-W,F!==Z&&(K=X*at-J*lt,lt=X*lt+J*at,at=K)}},k.prototype.guessLen13b=function(P,I){var U=Math.max(I,P)|1,O=U&1,G=0;for(U=U/2|0;U;U=U>>>1)G++;return 1<<G+1+O},k.prototype.conjugate=function(P,I,U){if(!(U<=1))for(var O=0;O<U/2;O++){var G=P[O];P[O]=P[U-O-1],P[U-O-1]=G,G=I[O],I[O]=-I[U-O-1],I[U-O-1]=-G}},k.prototype.normalize13b=function(P,I){for(var U=0,O=0;O<I/2;O++){var G=Math.round(P[2*O+1]/I)*8192+Math.round(P[2*O]/I)+U;P[O]=G&67108863,G<67108864?U=0:U=G/67108864|0}return P},k.prototype.convert13b=function(P,I,U,O){for(var G=0,$=0;$<I;$++)G=G+(P[$]|0),U[2*$]=G&8191,G=G>>>13,U[2*$+1]=G&8191,G=G>>>13;for($=2*I;$<O;++$)U[$]=0;i(G===0),i((G&-8192)===0)},k.prototype.stub=function(P){for(var I=new Array(P),U=0;U<P;U++)I[U]=0;return I},k.prototype.mulp=function(P,I,U){var O=2*this.guessLen13b(P.length,I.length),G=this.makeRBT(O),$=this.stub(O),tt=new Array(O),Z=new Array(O),X=new Array(O),J=new Array(O),st=new Array(O),at=new Array(O),lt=U.words;lt.length=O,this.convert13b(P.words,P.length,tt,O),this.convert13b(I.words,I.length,J,O),this.transform(tt,$,Z,X,O,G),this.transform(J,$,st,at,O,G);for(var F=0;F<O;F++){var H=Z[F]*st[F]-X[F]*at[F];X[F]=Z[F]*at[F]+X[F]*st[F],Z[F]=H}return this.conjugate(Z,X,O),this.transform(Z,X,lt,$,O,G),this.conjugate(lt,$,O),this.normalize13b(lt,O),U.negative=P.negative^I.negative,U.length=P.length+I.length,U.strip()},n.prototype.mul=function(P){var I=new n(null);return I.words=new Array(this.length+P.length),this.mulTo(P,I)},n.prototype.mulf=function(P){var I=new n(null);return I.words=new Array(this.length+P.length),A(this,P,I)},n.prototype.imul=function(P){return this.clone().mulTo(P,this)},n.prototype.imuln=function(P){i(typeof P=="number"),i(P<67108864);for(var I=0,U=0;U<this.length;U++){var O=(this.words[U]|0)*P,G=(O&67108863)+(I&67108863);I>>=26,I+=O/67108864|0,I+=G>>>26,this.words[U]=G&67108863}return I!==0&&(this.words[U]=I,this.length++),this},n.prototype.muln=function(P){return this.clone().imuln(P)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(P){var I=_(P);if(I.length===0)return new n(1);for(var U=this,O=0;O<I.length&&I[O]===0;O++,U=U.sqr());if(++O<I.length)for(var G=U.sqr();O<I.length;O++,G=G.sqr())I[O]!==0&&(U=U.mul(G));return U},n.prototype.iushln=function(P){i(typeof P=="number"&&P>=0);var I=P%26,U=(P-I)/26,O=67108863>>>26-I<<26-I,G;if(I!==0){var $=0;for(G=0;G<this.length;G++){var tt=this.words[G]&O,Z=(this.words[G]|0)-tt<<I;this.words[G]=Z|$,$=tt>>>26-I}$&&(this.words[G]=$,this.length++)}if(U!==0){for(G=this.length-1;G>=0;G--)this.words[G+U]=this.words[G];for(G=0;G<U;G++)this.words[G]=0;this.length+=U}return this.strip()},n.prototype.ishln=function(P){return i(this.negative===0),this.iushln(P)},n.prototype.iushrn=function(P,I,U){i(typeof P=="number"&&P>=0);var O;I?O=(I-I%26)/26:O=0;var G=P%26,$=Math.min((P-G)/26,this.length),tt=67108863^67108863>>>G<<G,Z=U;if(O-=$,O=Math.max(0,O),Z){for(var X=0;X<$;X++)Z.words[X]=this.words[X];Z.length=$}if($!==0)if(this.length>$)for(this.length-=$,X=0;X<this.length;X++)this.words[X]=this.words[X+$];else this.words[0]=0,this.length=1;var J=0;for(X=this.length-1;X>=0&&(J!==0||X>=O);X--){var st=this.words[X]|0;this.words[X]=J<<26-G|st>>>G,J=st&tt}return Z&&J!==0&&(Z.words[Z.length++]=J),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},n.prototype.ishrn=function(P,I,U){return i(this.negative===0),this.iushrn(P,I,U)},n.prototype.shln=function(P){return this.clone().ishln(P)},n.prototype.ushln=function(P){return this.clone().iushln(P)},n.prototype.shrn=function(P){return this.clone().ishrn(P)},n.prototype.ushrn=function(P){return this.clone().iushrn(P)},n.prototype.testn=function(P){i(typeof P=="number"&&P>=0);var I=P%26,U=(P-I)/26,O=1<<I;if(this.length<=U)return!1;var G=this.words[U];return!!(G&O)},n.prototype.imaskn=function(P){i(typeof P=="number"&&P>=0);var I=P%26,U=(P-I)/26;if(i(this.negative===0,"imaskn works only with positive numbers"),this.length<=U)return this;if(I!==0&&U++,this.length=Math.min(U,this.length),I!==0){var O=67108863^67108863>>>I<<I;this.words[this.length-1]&=O}return this.strip()},n.prototype.maskn=function(P){return this.clone().imaskn(P)},n.prototype.iaddn=function(P){return i(typeof P=="number"),i(P<67108864),P<0?this.isubn(-P):this.negative!==0?this.length===1&&(this.words[0]|0)<P?(this.words[0]=P-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(P),this.negative=1,this):this._iaddn(P)},n.prototype._iaddn=function(P){this.words[0]+=P;for(var I=0;I<this.length&&this.words[I]>=67108864;I++)this.words[I]-=67108864,I===this.length-1?this.words[I+1]=1:this.words[I+1]++;return this.length=Math.max(this.length,I+1),this},n.prototype.isubn=function(P){if(i(typeof P=="number"),i(P<67108864),P<0)return this.iaddn(-P);if(this.negative!==0)return this.negative=0,this.iaddn(P),this.negative=1,this;if(this.words[0]-=P,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var I=0;I<this.length&&this.words[I]<0;I++)this.words[I]+=67108864,this.words[I+1]-=1;return this.strip()},n.prototype.addn=function(P){return this.clone().iaddn(P)},n.prototype.subn=function(P){return this.clone().isubn(P)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(P,I,U){var O=P.length+U,G;this._expand(O);var $,tt=0;for(G=0;G<P.length;G++){$=(this.words[G+U]|0)+tt;var Z=(P.words[G]|0)*I;$-=Z&67108863,tt=($>>26)-(Z/67108864|0),this.words[G+U]=$&67108863}for(;G<this.length-U;G++)$=(this.words[G+U]|0)+tt,tt=$>>26,this.words[G+U]=$&67108863;if(tt===0)return this.strip();for(i(tt===-1),tt=0,G=0;G<this.length;G++)$=-(this.words[G]|0)+tt,tt=$>>26,this.words[G]=$&67108863;return this.negative=1,this.strip()},n.prototype._wordDiv=function(P,I){var U=this.length-P.length,O=this.clone(),G=P,$=G.words[G.length-1]|0,tt=this._countBits($);U=26-tt,U!==0&&(G=G.ushln(U),O.iushln(U),$=G.words[G.length-1]|0);var Z=O.length-G.length,X;if(I!=="mod"){X=new n(null),X.length=Z+1,X.words=new Array(X.length);for(var J=0;J<X.length;J++)X.words[J]=0}var st=O.clone()._ishlnsubmul(G,1,Z);st.negative===0&&(O=st,X&&(X.words[Z]=1));for(var at=Z-1;at>=0;at--){var lt=(O.words[G.length+at]|0)*67108864+(O.words[G.length+at-1]|0);for(lt=Math.min(lt/$|0,67108863),O._ishlnsubmul(G,lt,at);O.negative!==0;)lt--,O.negative=0,O._ishlnsubmul(G,1,at),O.isZero()||(O.negative^=1);X&&(X.words[at]=lt)}return X&&X.strip(),O.strip(),I!=="div"&&U!==0&&O.iushrn(U),{div:X||null,mod:O}},n.prototype.divmod=function(P,I,U){if(i(!P.isZero()),this.isZero())return{div:new n(0),mod:new n(0)};var O,G,$;return this.negative!==0&&P.negative===0?($=this.neg().divmod(P,I),I!=="mod"&&(O=$.div.neg()),I!=="div"&&(G=$.mod.neg(),U&&G.negative!==0&&G.iadd(P)),{div:O,mod:G}):this.negative===0&&P.negative!==0?($=this.divmod(P.neg(),I),I!=="mod"&&(O=$.div.neg()),{div:O,mod:$.mod}):(this.negative&P.negative)!==0?($=this.neg().divmod(P.neg(),I),I!=="div"&&(G=$.mod.neg(),U&&G.negative!==0&&G.isub(P)),{div:$.div,mod:G}):P.length>this.length||this.cmp(P)<0?{div:new n(0),mod:this}:P.length===1?I==="div"?{div:this.divn(P.words[0]),mod:null}:I==="mod"?{div:null,mod:new n(this.modn(P.words[0]))}:{div:this.divn(P.words[0]),mod:new n(this.modn(P.words[0]))}:this._wordDiv(P,I)},n.prototype.div=function(P){return this.divmod(P,"div",!1).div},n.prototype.mod=function(P){return this.divmod(P,"mod",!1).mod},n.prototype.umod=function(P){return this.divmod(P,"mod",!0).mod},n.prototype.divRound=function(P){var I=this.divmod(P);if(I.mod.isZero())return I.div;var U=I.div.negative!==0?I.mod.isub(P):I.mod,O=P.ushrn(1),G=P.andln(1),$=U.cmp(O);return $<0||G===1&&$===0?I.div:I.div.negative!==0?I.div.isubn(1):I.div.iaddn(1)},n.prototype.modn=function(P){i(P<=67108863);for(var I=(1<<26)%P,U=0,O=this.length-1;O>=0;O--)U=(I*U+(this.words[O]|0))%P;return U},n.prototype.idivn=function(P){i(P<=67108863);for(var I=0,U=this.length-1;U>=0;U--){var O=(this.words[U]|0)+I*67108864;this.words[U]=O/P|0,I=O%P}return this.strip()},n.prototype.divn=function(P){return this.clone().idivn(P)},n.prototype.egcd=function(P){i(P.negative===0),i(!P.isZero());var I=this,U=P.clone();I.negative!==0?I=I.umod(P):I=I.clone();for(var O=new n(1),G=new n(0),$=new n(0),tt=new n(1),Z=0;I.isEven()&&U.isEven();)I.iushrn(1),U.iushrn(1),++Z;for(var X=U.clone(),J=I.clone();!I.isZero();){for(var st=0,at=1;(I.words[0]&at)===0&&st<26;++st,at<<=1);if(st>0)for(I.iushrn(st);st-- >0;)(O.isOdd()||G.isOdd())&&(O.iadd(X),G.isub(J)),O.iushrn(1),G.iushrn(1);for(var lt=0,F=1;(U.words[0]&F)===0&&lt<26;++lt,F<<=1);if(lt>0)for(U.iushrn(lt);lt-- >0;)($.isOdd()||tt.isOdd())&&($.iadd(X),tt.isub(J)),$.iushrn(1),tt.iushrn(1);I.cmp(U)>=0?(I.isub(U),O.isub($),G.isub(tt)):(U.isub(I),$.isub(O),tt.isub(G))}return{a:$,b:tt,gcd:U.iushln(Z)}},n.prototype._invmp=function(P){i(P.negative===0),i(!P.isZero());var I=this,U=P.clone();I.negative!==0?I=I.umod(P):I=I.clone();for(var O=new n(1),G=new n(0),$=U.clone();I.cmpn(1)>0&&U.cmpn(1)>0;){for(var tt=0,Z=1;(I.words[0]&Z)===0&&tt<26;++tt,Z<<=1);if(tt>0)for(I.iushrn(tt);tt-- >0;)O.isOdd()&&O.iadd($),O.iushrn(1);for(var X=0,J=1;(U.words[0]&J)===0&&X<26;++X,J<<=1);if(X>0)for(U.iushrn(X);X-- >0;)G.isOdd()&&G.iadd($),G.iushrn(1);I.cmp(U)>=0?(I.isub(U),O.isub(G)):(U.isub(I),G.isub(O))}var st;return I.cmpn(1)===0?st=O:st=G,st.cmpn(0)<0&&st.iadd(P),st},n.prototype.gcd=function(P){if(this.isZero())return P.abs();if(P.isZero())return this.abs();var I=this.clone(),U=P.clone();I.negative=0,U.negative=0;for(var O=0;I.isEven()&&U.isEven();O++)I.iushrn(1),U.iushrn(1);do{for(;I.isEven();)I.iushrn(1);for(;U.isEven();)U.iushrn(1);var G=I.cmp(U);if(G<0){var $=I;I=U,U=$}else if(G===0||U.cmpn(1)===0)break;I.isub(U)}while(!0);return U.iushln(O)},n.prototype.invm=function(P){return this.egcd(P).a.umod(P)},n.prototype.isEven=function(){return(this.words[0]&1)===0},n.prototype.isOdd=function(){return(this.words[0]&1)===1},n.prototype.andln=function(P){return this.words[0]&P},n.prototype.bincn=function(P){i(typeof P=="number");var I=P%26,U=(P-I)/26,O=1<<I;if(this.length<=U)return this._expand(U+1),this.words[U]|=O,this;for(var G=O,$=U;G!==0&&$<this.length;$++){var tt=this.words[$]|0;tt+=G,G=tt>>>26,tt&=67108863,this.words[$]=tt}return G!==0&&(this.words[$]=G,this.length++),this},n.prototype.isZero=function(){return this.length===1&&this.words[0]===0},n.prototype.cmpn=function(P){var I=P<0;if(this.negative!==0&&!I)return-1;if(this.negative===0&&I)return 1;this.strip();var U;if(this.length>1)U=1;else{I&&(P=-P),i(P<=67108863,"Number is too big");var O=this.words[0]|0;U=O===P?0:O<P?-1:1}return this.negative!==0?-U|0:U},n.prototype.cmp=function(P){if(this.negative!==0&&P.negative===0)return-1;if(this.negative===0&&P.negative!==0)return 1;var I=this.ucmp(P);return this.negative!==0?-I|0:I},n.prototype.ucmp=function(P){if(this.length>P.length)return 1;if(this.length<P.length)return-1;for(var I=0,U=this.length-1;U>=0;U--){var O=this.words[U]|0,G=P.words[U]|0;if(O!==G){O<G?I=-1:O>G&&(I=1);break}}return I},n.prototype.gtn=function(P){return this.cmpn(P)===1},n.prototype.gt=function(P){return this.cmp(P)===1},n.prototype.gten=function(P){return this.cmpn(P)>=0},n.prototype.gte=function(P){return this.cmp(P)>=0},n.prototype.ltn=function(P){return this.cmpn(P)===-1},n.prototype.lt=function(P){return this.cmp(P)===-1},n.prototype.lten=function(P){return this.cmpn(P)<=0},n.prototype.lte=function(P){return this.cmp(P)<=0},n.prototype.eqn=function(P){return this.cmpn(P)===0},n.prototype.eq=function(P){return this.cmp(P)===0},n.red=function(P){return new L(P)},n.prototype.toRed=function(P){return i(!this.red,"Already a number in reduction context"),i(this.negative===0,"red works only with positives"),P.convertTo(this)._forceRed(P)},n.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(P){return this.red=P,this},n.prototype.forceRed=function(P){return i(!this.red,"Already a number in reduction context"),this._forceRed(P)},n.prototype.redAdd=function(P){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,P)},n.prototype.redIAdd=function(P){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,P)},n.prototype.redSub=function(P){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,P)},n.prototype.redISub=function(P){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,P)},n.prototype.redShl=function(P){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,P)},n.prototype.redMul=function(P){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,P),this.red.mul(this,P)},n.prototype.redIMul=function(P){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,P),this.red.imul(this,P)},n.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(P){return i(this.red&&!P.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,P)};var p={k256:null,p224:null,p192:null,p25519:null};function w(z,P){this.name=z,this.p=new n(P,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}w.prototype._tmp=function(){var P=new n(null);return P.words=new Array(Math.ceil(this.n/13)),P},w.prototype.ireduce=function(P){var I=P,U;do this.split(I,this.tmp),I=this.imulK(I),I=I.iadd(this.tmp),U=I.bitLength();while(U>this.n);var O=U<this.n?-1:I.ucmp(this.p);return O===0?(I.words[0]=0,I.length=1):O>0?I.isub(this.p):I.strip!==void 0?I.strip():I._strip(),I},w.prototype.split=function(P,I){P.iushrn(this.n,0,I)},w.prototype.imulK=function(P){return P.imul(this.k)};function h(){w.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}r(h,w),h.prototype.split=function(P,I){for(var U=4194303,O=Math.min(P.length,9),G=0;G<O;G++)I.words[G]=P.words[G];if(I.length=O,P.length<=9){P.words[0]=0,P.length=1;return}var $=P.words[9];for(I.words[I.length++]=$&U,G=10;G<P.length;G++){var tt=P.words[G]|0;P.words[G-10]=(tt&U)<<4|$>>>22,$=tt}$>>>=22,P.words[G-10]=$,$===0&&P.length>10?P.length-=10:P.length-=9},h.prototype.imulK=function(P){P.words[P.length]=0,P.words[P.length+1]=0,P.length+=2;for(var I=0,U=0;U<P.length;U++){var O=P.words[U]|0;I+=O*977,P.words[U]=I&67108863,I=O*64+(I/67108864|0)}return P.words[P.length-1]===0&&(P.length--,P.words[P.length-1]===0&&P.length--),P};function D(){w.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}r(D,w);function S(){w.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}r(S,w);function M(){w.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}r(M,w),M.prototype.imulK=function(P){for(var I=0,U=0;U<P.length;U++){var O=(P.words[U]|0)*19+I,G=O&67108863;O>>>=26,P.words[U]=G,I=O}return I!==0&&(P.words[P.length++]=I),P},n._prime=function(P){if(p[P])return p[P];var I;if(P==="k256")I=new h;else if(P==="p224")I=new D;else if(P==="p192")I=new S;else if(P==="p25519")I=new M;else throw new Error("Unknown prime "+P);return p[P]=I,I};function L(z){if(typeof z=="string"){var P=n._prime(z);this.m=P.p,this.prime=P}else i(z.gtn(1),"modulus must be greater than 1"),this.m=z,this.prime=null}L.prototype._verify1=function(P){i(P.negative===0,"red works only with positives"),i(P.red,"red works only with red numbers")},L.prototype._verify2=function(P,I){i((P.negative|I.negative)===0,"red works only with positives"),i(P.red&&P.red===I.red,"red works only with red numbers")},L.prototype.imod=function(P){return this.prime?this.prime.ireduce(P)._forceRed(this):P.umod(this.m)._forceRed(this)},L.prototype.neg=function(P){return P.isZero()?P.clone():this.m.sub(P)._forceRed(this)},L.prototype.add=function(P,I){this._verify2(P,I);var U=P.add(I);return U.cmp(this.m)>=0&&U.isub(this.m),U._forceRed(this)},L.prototype.iadd=function(P,I){this._verify2(P,I);var U=P.iadd(I);return U.cmp(this.m)>=0&&U.isub(this.m),U},L.prototype.sub=function(P,I){this._verify2(P,I);var U=P.sub(I);return U.cmpn(0)<0&&U.iadd(this.m),U._forceRed(this)},L.prototype.isub=function(P,I){this._verify2(P,I);var U=P.isub(I);return U.cmpn(0)<0&&U.iadd(this.m),U},L.prototype.shl=function(P,I){return this._verify1(P),this.imod(P.ushln(I))},L.prototype.imul=function(P,I){return this._verify2(P,I),this.imod(P.imul(I))},L.prototype.mul=function(P,I){return this._verify2(P,I),this.imod(P.mul(I))},L.prototype.isqr=function(P){return this.imul(P,P.clone())},L.prototype.sqr=function(P){return this.mul(P,P)},L.prototype.sqrt=function(P){if(P.isZero())return P.clone();var I=this.m.andln(3);if(i(I%2===1),I===3){var U=this.m.add(new n(1)).iushrn(2);return this.pow(P,U)}for(var O=this.m.subn(1),G=0;!O.isZero()&&O.andln(1)===0;)G++,O.iushrn(1);i(!O.isZero());var $=new n(1).toRed(this),tt=$.redNeg(),Z=this.m.subn(1).iushrn(1),X=this.m.bitLength();for(X=new n(2*X*X).toRed(this);this.pow(X,Z).cmp(tt)!==0;)X.redIAdd(tt);for(var J=this.pow(X,O),st=this.pow(P,O.addn(1).iushrn(1)),at=this.pow(P,O),lt=G;at.cmp($)!==0;){for(var F=at,H=0;F.cmp($)!==0;H++)F=F.redSqr();i(H<lt);var et=this.pow(J,new n(1).iushln(lt-H-1));st=st.redMul(et),J=et.redSqr(),at=at.redMul(J),lt=H}return st},L.prototype.invm=function(P){var I=P._invmp(this.m);return I.negative!==0?(I.negative=0,this.imod(I).redNeg()):this.imod(I)},L.prototype.pow=function(P,I){if(I.isZero())return new n(1).toRed(this);if(I.cmpn(1)===0)return P.clone();var U=4,O=new Array(1<<U);O[0]=new n(1).toRed(this),O[1]=P;for(var G=2;G<O.length;G++)O[G]=this.mul(O[G-1],P);var $=O[0],tt=0,Z=0,X=I.bitLength()%26;for(X===0&&(X=26),G=I.length-1;G>=0;G--){for(var J=I.words[G],st=X-1;st>=0;st--){var at=J>>st&1;if($!==O[0]&&($=this.sqr($)),at===0&&tt===0){Z=0;continue}tt<<=1,tt|=at,Z++,!(Z!==U&&(G!==0||st!==0))&&($=this.mul($,O[tt]),Z=0,tt=0)}X=26}return $},L.prototype.convertTo=function(P){var I=P.umod(this.m);return I===P?I.clone():I},L.prototype.convertFrom=function(P){var I=P.clone();return I.red=null,I},n.mont=function(P){return new R(P)};function R(z){L.call(this,z),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}r(R,L),R.prototype.convertTo=function(P){return this.imod(P.ushln(this.shift))},R.prototype.convertFrom=function(P){var I=this.imod(P.mul(this.rinv));return I.red=null,I},R.prototype.imul=function(P,I){if(P.isZero()||I.isZero())return P.words[0]=0,P.length=1,P;var U=P.imul(I),O=U.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),G=U.isub(O).iushrn(this.shift),$=G;return G.cmp(this.m)>=0?$=G.isub(this.m):G.cmpn(0)<0&&($=G.iadd(this.m)),$._forceRed(this)},R.prototype.mul=function(P,I){if(P.isZero()||I.isZero())return new n(0)._forceRed(this);var U=P.mul(I),O=U.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),G=U.isub(O).iushrn(this.shift),$=G;return G.cmp(this.m)>=0?$=G.isub(this.m):G.cmpn(0)<0&&($=G.iadd(this.m)),$._forceRed(this)},R.prototype.invm=function(P){var I=this.imod(P._invmp(this.m).mul(this.r2));return I._forceRed(this)}})(typeof m>"u"||m,this)},{buffer:2}],34:[function(l,m,x){m.exports=t;function t(a){var i,r,n,d=a.length,s=0;for(i=0;i<d;++i)s+=a[i].length;var o=new Array(s),y=0;for(i=0;i<d;++i){var g=a[i],b=g.length;for(r=0;r<b;++r){var v=o[y++]=new Array(b-1),_=0;for(n=0;n<b;++n)n!==r&&(v[_++]=g[n]);if(r&1){var u=v[1];v[1]=v[0],v[0]=u}}}return o}},{}],35:[function(l,m,x){m.exports=b;var t=l("typedarray-pool"),a=l("./lib/sweep"),i=l("./lib/intersect");function r(v,_){for(var u=0;u<v;++u)if(!(_[u]<=_[u+v]))return!0;return!1}function n(v,_,u,T){for(var c=0,A=0,k=0,p=v.length;k<p;++k){var w=v[k];if(!r(_,w)){for(var h=0;h<2*_;++h)u[c++]=w[h];T[A++]=k}}return A}function d(v,_,u,T){var c=v.length,A=_.length;if(!(c<=0||A<=0)){var k=v[0].length>>>1;if(!(k<=0)){var p,w=t.mallocDouble(2*k*c),h=t.mallocInt32(c);if(c=n(v,k,w,h),c>0){if(k===1&&T)a.init(c),p=a.sweepComplete(k,u,0,c,w,h,0,c,w,h);else{var D=t.mallocDouble(2*k*A),S=t.mallocInt32(A);A=n(_,k,D,S),A>0&&(a.init(c+A),k===1?p=a.sweepBipartite(k,u,0,c,w,h,0,A,D,S):p=i(k,u,T,c,w,h,A,D,S),t.free(D),t.free(S))}t.free(w),t.free(h)}return p}}}var s;function o(v,_){s.push([v,_])}function y(v){return s=[],d(v,v,o,!0),s}function g(v,_){return s=[],d(v,_,o,!1),s}function b(v,_,u){switch(arguments.length){case 1:return y(v);case 2:return typeof _=="function"?d(v,v,_,!0):g(v,_);case 3:return d(v,_,u,!1);default:throw new Error("box-intersect: Invalid arguments")}}},{"./lib/intersect":37,"./lib/sweep":41,"typedarray-pool":308}],36:[function(l,m,x){function t(){function r(s,o,y,g,b,v,_,u,T,c,A){for(var k=2*s,p=g,w=k*g;p<b;++p,w+=k){var h=v[o+w],D=v[o+w+s],S=_[p];t:for(var M=u,L=k*u;M<T;++M,L+=k){var R=c[o+L],z=c[o+L+s],P=A[M];if(!(z<h||D<R)){for(var I=o+1;I<s;++I){var U=v[I+w],O=v[I+s+w],G=c[I+L],$=c[I+s+L];if(O<G||$<U)continue t}var tt=y(S,P);if(tt!==void 0)return tt}}}}function n(s,o,y,g,b,v,_,u,T,c,A){for(var k=2*s,p=u,w=k*u;p<T;++p,w+=k){var h=c[o+w],D=c[o+w+s],S=A[p];t:for(var M=g,L=k*g;M<b;++M,L+=k){var R=v[o+L],z=v[o+L+s],P=_[M];if(!(D<R||z<h)){for(var I=o+1;I<s;++I){var U=v[I+L],O=v[I+s+L],G=c[I+w],$=c[I+s+w];if(O<G||$<U)continue t}var tt=y(P,S);if(tt!==void 0)return tt}}}}function d(s,o,y,g,b,v,_,u,T,c,A){return b-g>T-u?r(s,o,y,g,b,v,_,u,T,c,A):n(s,o,y,g,b,v,_,u,T,c,A)}return d}function a(){function r(y,g,b,v,_,u,T,c,A,k,p){for(var w=2*y,h=v,D=w*v;h<_;++h,D+=w){var S=u[g+D],M=u[g+D+y],L=T[h];t:for(var R=c,z=w*c;R<A;++R,z+=w){var P=k[g+z],I=p[R];if(!(P<=S||M<P)){for(var U=g+1;U<y;++U){var O=u[U+D],G=u[U+y+D],$=k[U+z],tt=k[U+y+z];if(G<$||tt<O)continue t}var Z=b(I,L);if(Z!==void 0)return Z}}}}function n(y,g,b,v,_,u,T,c,A,k,p){for(var w=2*y,h=v,D=w*v;h<_;++h,D+=w){var S=u[g+D],M=u[g+D+y],L=T[h];t:for(var R=c,z=w*c;R<A;++R,z+=w){var P=k[g+z],I=p[R];if(!(P<S||M<P)){for(var U=g+1;U<y;++U){var O=u[U+D],G=u[U+y+D],$=k[U+z],tt=k[U+y+z];if(G<$||tt<O)continue t}var Z=b(L,I);if(Z!==void 0)return Z}}}}function d(y,g,b,v,_,u,T,c,A,k,p){for(var w=2*y,h=c,D=w*c;h<A;++h,D+=w){var S=k[g+D],M=p[h];t:for(var L=v,R=w*v;L<_;++L,R+=w){var z=u[g+R],P=u[g+R+y],I=T[L];if(!(S<=z||P<S)){for(var U=g+1;U<y;++U){var O=u[U+R],G=u[U+y+R],$=k[U+D],tt=k[U+y+D];if(G<$||tt<O)continue t}var Z=b(M,I);if(Z!==void 0)return Z}}}}function s(y,g,b,v,_,u,T,c,A,k,p){for(var w=2*y,h=c,D=w*c;h<A;++h,D+=w){var S=k[g+D],M=p[h];t:for(var L=v,R=w*v;L<_;++L,R+=w){var z=u[g+R],P=u[g+R+y],I=T[L];if(!(S<z||P<S)){for(var U=g+1;U<y;++U){var O=u[U+R],G=u[U+y+R],$=k[U+D],tt=k[U+y+D];if(G<$||tt<O)continue t}var Z=b(I,M);if(Z!==void 0)return Z}}}}function o(y,g,b,v,_,u,T,c,A,k,p,w){return u-_>k-A?v?r(y,g,b,_,u,T,c,A,k,p,w):n(y,g,b,_,u,T,c,A,k,p,w):v?d(y,g,b,_,u,T,c,A,k,p,w):s(y,g,b,_,u,T,c,A,k,p,w)}return o}function i(r){return r?t():a()}x.partial=i(!1),x.full=i(!0)},{}],37:[function(l,m,x){m.exports=z;var t=l("typedarray-pool"),a=l("bit-twiddle"),i=l("./brute"),r=i.partial,n=i.full,d=l("./sweep"),s=l("./median"),o=l("./partition"),y=128,g=1<<22,b=1<<22,v=o("!(lo>=p0)&&!(p1>=hi)"),_=o("lo===p0"),u=o("lo<p0"),T=o("hi<=p0"),c=o("lo<=p0&&p0<=hi"),A=o("lo<p0&&p0<=hi"),k=6,p=2,w=1024,h=t.mallocInt32(w),D=t.mallocDouble(w);function S(P,I){var U=8*a.log2(I+1)*(P+1)|0,O=a.nextPow2(k*U);h.length<O&&(t.free(h),h=t.mallocInt32(O));var G=a.nextPow2(p*U);D.length<G&&(t.free(D),D=t.mallocDouble(G))}function M(P,I,U,O,G,$,tt,Z,X){var J=k*P;h[J]=I,h[J+1]=U,h[J+2]=O,h[J+3]=G,h[J+4]=$,h[J+5]=tt;var st=p*P;D[st]=Z,D[st+1]=X}function L(P,I,U,O,G,$,tt,Z,X,J,st){var at=2*P,lt=X*at,F=J[lt+I];t:for(var H=G,et=G*at;H<$;++H,et+=at){var q=tt[et+I],W=tt[et+I+P];if(!(F<q||W<F)&&!(O&&F===q)){for(var K=Z[H],nt=I+1;nt<P;++nt){var q=tt[et+nt],W=tt[et+nt+P],it=J[lt+nt],ot=J[lt+nt+P];if(W<it||ot<q)continue t}var ct;if(O?ct=U(st,K):ct=U(K,st),ct!==void 0)return ct}}}function R(P,I,U,O,G,$,tt,Z,X,J){var st=2*P,at=Z*st,lt=X[at+I];t:for(var F=O,H=O*st;F<G;++F,H+=st){var et=tt[F];if(et!==J){var q=$[H+I],W=$[H+I+P];if(!(lt<q||W<lt)){for(var K=I+1;K<P;++K){var q=$[H+K],W=$[H+K+P],nt=X[at+K],it=X[at+K+P];if(W<nt||it<q)continue t}var ot=U(et,J);if(ot!==void 0)return ot}}}}function z(P,I,U,O,G,$,tt,Z,X){S(P,O+tt);var J=0,st=2*P,at;for(M(J++,0,0,O,0,tt,U?16:0,-1/0,1/0),U||M(J++,0,0,tt,0,O,1,-1/0,1/0);J>0;){J-=1;var lt=J*k,F=h[lt],H=h[lt+1],et=h[lt+2],q=h[lt+3],W=h[lt+4],K=h[lt+5],nt=J*p,it=D[nt],ot=D[nt+1],ct=K&1,bt=!!(K&16),ut=G,pt=$,yt=Z,Tt=X;if(ct&&(ut=Z,pt=X,yt=G,Tt=$),!(K&2&&(et=u(P,F,H,et,ut,pt,ot),H>=et))&&!(K&4&&(H=T(P,F,H,et,ut,pt,it),H>=et))){var kt=et-H,zt=W-q;if(bt){if(P*kt*(kt+zt)<b){if(at=d.scanComplete(P,F,I,H,et,ut,pt,q,W,yt,Tt),at!==void 0)return at;continue}}else if(P*Math.min(kt,zt)<y){if(at=r(P,F,I,ct,H,et,ut,pt,q,W,yt,Tt),at!==void 0)return at;continue}else if(P*kt*zt<g){if(at=d.scanBipartite(P,F,I,ct,H,et,ut,pt,q,W,yt,Tt),at!==void 0)return at;continue}var Rt=v(P,F,H,et,ut,pt,it,ot);if(H<Rt)if(P*(Rt-H)<y){if(at=n(P,F+1,I,H,Rt,ut,pt,q,W,yt,Tt),at!==void 0)return at}else if(F===P-2){if(ct?at=d.sweepBipartite(P,I,q,W,yt,Tt,H,Rt,ut,pt):at=d.sweepBipartite(P,I,H,Rt,ut,pt,q,W,yt,Tt),at!==void 0)return at}else M(J++,F+1,H,Rt,q,W,ct,-1/0,1/0),M(J++,F+1,q,W,H,Rt,ct^1,-1/0,1/0);if(Rt<et){var Gt=s(P,F,q,W,yt,Tt),wt=yt[st*Gt+F],It=_(P,F,Gt,W,yt,Tt,wt);if(It<W&&M(J++,F,Rt,et,It,W,(ct|4)+(bt?16:0),wt,ot),q<Gt&&M(J++,F,Rt,et,q,Gt,(ct|2)+(bt?16:0),it,wt),Gt+1===It){if(bt?at=R(P,F,I,Rt,et,ut,pt,Gt,yt,Tt[Gt]):at=L(P,F,I,ct,Rt,et,ut,pt,Gt,yt,Tt[Gt]),at!==void 0)return at}else if(Gt<It){var $t;if(bt){if($t=c(P,F,Rt,et,ut,pt,wt),Rt<$t){var Qt=_(P,F,Rt,$t,ut,pt,wt);if(F===P-2){if(Rt<Qt&&(at=d.sweepComplete(P,I,Rt,Qt,ut,pt,Gt,It,yt,Tt),at!==void 0)||Qt<$t&&(at=d.sweepBipartite(P,I,Qt,$t,ut,pt,Gt,It,yt,Tt),at!==void 0))return at}else Rt<Qt&&M(J++,F+1,Rt,Qt,Gt,It,16,-1/0,1/0),Qt<$t&&(M(J++,F+1,Qt,$t,Gt,It,0,-1/0,1/0),M(J++,F+1,Gt,It,Qt,$t,1,-1/0,1/0))}}else ct?$t=A(P,F,Rt,et,ut,pt,wt):$t=c(P,F,Rt,et,ut,pt,wt),Rt<$t&&(F===P-2?ct?at=d.sweepBipartite(P,I,Gt,It,yt,Tt,Rt,$t,ut,pt):at=d.sweepBipartite(P,I,Rt,$t,ut,pt,Gt,It,yt,Tt):(M(J++,F+1,Rt,$t,Gt,It,ct,-1/0,1/0),M(J++,F+1,Gt,It,Rt,$t,ct^1,-1/0,1/0)))}}}}}},{"./brute":36,"./median":38,"./partition":39,"./sweep":41,"bit-twiddle":32,"typedarray-pool":308}],38:[function(l,m,x){m.exports=n;var t=l("./partition"),a=t("lo<p0"),i=8;function r(d,s,o,y,g,b){for(var v=2*d,_=v*(o+1)+s,u=o+1;u<y;++u,_+=v)for(var T=g[_],c=u,A=v*(u-1);c>o&&g[A+s]>T;--c,A-=v){for(var k=A,p=A+v,w=0;w<v;++w,++k,++p){var h=g[k];g[k]=g[p],g[p]=h}var D=b[c];b[c]=b[c-1],b[c-1]=D}}function n(d,s,o,y,g,b){if(y<=o+1)return o;for(var v=o,_=y,u=y+o>>>1,T=2*d,c=u,A=g[T*u+s];v<_;){if(_-v<i){r(d,s,v,_,g,b),A=g[T*u+s];break}var k=_-v,p=Math.random()*k+v|0,w=g[T*p+s],h=Math.random()*k+v|0,D=g[T*h+s],S=Math.random()*k+v|0,M=g[T*S+s];w<=D?M>=D?(c=h,A=D):w>=M?(c=p,A=w):(c=S,A=M):D>=M?(c=h,A=D):M>=w?(c=p,A=w):(c=S,A=M);for(var z=T*(_-1),P=T*c,L=0;L<T;++L,++z,++P){var R=g[z];g[z]=g[P],g[P]=R}var I=b[_-1];b[_-1]=b[c],b[c]=I,c=a(d,s,v,_-1,g,b,A);for(var z=T*(_-1),P=T*c,L=0;L<T;++L,++z,++P){var R=g[z];g[z]=g[P],g[P]=R}var I=b[_-1];if(b[_-1]=b[c],b[c]=I,u<c){for(_=c-1;v<_&&g[T*(_-1)+s]===A;)_-=1;_+=1}else if(c<u)for(v=c+1;v<_&&g[T*v+s]===A;)v+=1;else break}return a(d,s,o,u,g,b,g[T*u+s])}},{"./partition":39}],39:[function(l,m,x){m.exports=a;var t={"lo===p0":i,"lo<p0":r,"lo<=p0":n,"hi<=p0":d,"lo<p0&&p0<=hi":o,"lo<=p0&&p0<=hi":s,"!(lo>=p0)&&!(p1>=hi)":y};function a(g){return t[g]}function i(g,b,v,_,u,T,c){for(var A=2*g,k=A*v,p=k,w=v,h=b,D=g+b,S=v;_>S;++S,k+=A){var M=u[k+h];if(M===c)if(w===S)w+=1,p+=A;else{for(var L=0;A>L;++L){var R=u[k+L];u[k+L]=u[p],u[p++]=R}var z=T[S];T[S]=T[w],T[w++]=z}}return w}function r(g,b,v,_,u,T,c){for(var A=2*g,k=A*v,p=k,w=v,h=b,D=g+b,S=v;_>S;++S,k+=A){var M=u[k+h];if(M<c)if(w===S)w+=1,p+=A;else{for(var L=0;A>L;++L){var R=u[k+L];u[k+L]=u[p],u[p++]=R}var z=T[S];T[S]=T[w],T[w++]=z}}return w}function n(g,b,v,_,u,T,c){for(var A=2*g,k=A*v,p=k,w=v,h=b,D=g+b,S=v;_>S;++S,k+=A){var M=u[k+D];if(M<=c)if(w===S)w+=1,p+=A;else{for(var L=0;A>L;++L){var R=u[k+L];u[k+L]=u[p],u[p++]=R}var z=T[S];T[S]=T[w],T[w++]=z}}return w}function d(g,b,v,_,u,T,c){for(var A=2*g,k=A*v,p=k,w=v,h=b,D=g+b,S=v;_>S;++S,k+=A){var M=u[k+D];if(M<=c)if(w===S)w+=1,p+=A;else{for(var L=0;A>L;++L){var R=u[k+L];u[k+L]=u[p],u[p++]=R}var z=T[S];T[S]=T[w],T[w++]=z}}return w}function s(g,b,v,_,u,T,c){for(var A=2*g,k=A*v,p=k,w=v,h=b,D=g+b,S=v;_>S;++S,k+=A){var M=u[k+h],L=u[k+D];if(M<=c&&c<=L)if(w===S)w+=1,p+=A;else{for(var R=0;A>R;++R){var z=u[k+R];u[k+R]=u[p],u[p++]=z}var P=T[S];T[S]=T[w],T[w++]=P}}return w}function o(g,b,v,_,u,T,c){for(var A=2*g,k=A*v,p=k,w=v,h=b,D=g+b,S=v;_>S;++S,k+=A){var M=u[k+h],L=u[k+D];if(M<c&&c<=L)if(w===S)w+=1,p+=A;else{for(var R=0;A>R;++R){var z=u[k+R];u[k+R]=u[p],u[p++]=z}var P=T[S];T[S]=T[w],T[w++]=P}}return w}function y(g,b,v,_,u,T,c,A){for(var k=2*g,p=k*v,w=p,h=v,D=b,S=g+b,M=v;_>M;++M,p+=k){var L=u[p+D],R=u[p+S];if(!(L>=c)&&!(A>=R))if(h===M)h+=1,w+=k;else{for(var z=0;k>z;++z){var P=u[p+z];u[p+z]=u[w],u[w++]=P}var I=T[M];T[M]=T[h],T[h++]=I}}return h}},{}],40:[function(l,m,x){m.exports=a;var t=32;function a(b,v){v<=4*t?i(0,v-1,b):g(0,v-1,b)}function i(b,v,_){for(var u=2*(b+1),T=b+1;T<=v;++T){for(var c=_[u++],A=_[u++],k=T,p=u-2;k-- >b;){var w=_[p-2],h=_[p-1];if(w<c)break;if(w===c&&h<A)break;_[p]=w,_[p+1]=h,p-=2}_[p]=c,_[p+1]=A}}function r(b,v,_){b*=2,v*=2;var u=_[b],T=_[b+1];_[b]=_[v],_[b+1]=_[v+1],_[v]=u,_[v+1]=T}function n(b,v,_){b*=2,v*=2,_[b]=_[v],_[b+1]=_[v+1]}function d(b,v,_,u){b*=2,v*=2,_*=2;var T=u[b],c=u[b+1];u[b]=u[v],u[b+1]=u[v+1],u[v]=u[_],u[v+1]=u[_+1],u[_]=T,u[_+1]=c}function s(b,v,_,u,T){b*=2,v*=2,T[b]=T[v],T[v]=_,T[b+1]=T[v+1],T[v+1]=u}function o(b,v,_){b*=2,v*=2;var u=_[b],T=_[v];return u<T?!1:u===T?_[b+1]>_[v+1]:!0}function y(b,v,_,u){b*=2;var T=u[b];return T<v?!0:T===v?u[b+1]<_:!1}function g(b,v,_){var u=(v-b+1)/6|0,T=b+u,c=v-u,A=b+v>>1,k=A-u,p=A+u,w=T,h=k,D=A,S=p,M=c,L=b+1,R=v-1,z=0;o(w,h,_)&&(z=w,w=h,h=z),o(S,M,_)&&(z=S,S=M,M=z),o(w,D,_)&&(z=w,w=D,D=z),o(h,D,_)&&(z=h,h=D,D=z),o(w,S,_)&&(z=w,w=S,S=z),o(D,S,_)&&(z=D,D=S,S=z),o(h,M,_)&&(z=h,h=M,M=z),o(h,D,_)&&(z=h,h=D,D=z),o(S,M,_)&&(z=S,S=M,M=z);for(var P=_[2*h],I=_[2*h+1],U=_[2*S],O=_[2*S+1],G=2*w,$=2*D,tt=2*M,Z=2*T,X=2*A,J=2*c,st=0;st<2;++st){var at=_[G+st],lt=_[$+st],F=_[tt+st];_[Z+st]=at,_[X+st]=lt,_[J+st]=F}n(k,b,_),n(p,v,_);for(var H=L;H<=R;++H)if(y(H,P,I,_))H!==L&&r(H,L,_),++L;else if(!y(H,U,O,_))for(;;)if(y(R,U,O,_)){y(R,P,I,_)?(d(H,L,R,_),++L,--R):(r(H,R,_),--R);break}else{if(--R<H)break;continue}s(b,L-1,P,I,_),s(v,R+1,U,O,_),L-2-b<=t?i(b,L-2,_):g(b,L-2,_),v-(R+2)<=t?i(R+2,v,_):g(R+2,v,_),R-L<=t?i(L,R,_):g(L,R,_)}},{}],41:[function(l,m,x){m.exports={init:_,sweepBipartite:c,sweepComplete:A,scanBipartite:k,scanComplete:p};var t=l("typedarray-pool"),a=l("bit-twiddle"),i=l("./sort"),r=1<<28,n=1024,d=t.mallocInt32(n),s=t.mallocInt32(n),o=t.mallocInt32(n),y=t.mallocInt32(n),g=t.mallocInt32(n),b=t.mallocInt32(n),v=t.mallocDouble(n*8);function _(w){var h=a.nextPow2(w);d.length<h&&(t.free(d),d=t.mallocInt32(h)),s.length<h&&(t.free(s),s=t.mallocInt32(h)),o.length<h&&(t.free(o),o=t.mallocInt32(h)),y.length<h&&(t.free(y),y=t.mallocInt32(h)),g.length<h&&(t.free(g),g=t.mallocInt32(h)),b.length<h&&(t.free(b),b=t.mallocInt32(h));var D=8*h;v.length<D&&(t.free(v),v=t.mallocDouble(D))}function u(w,h,D,S){var M=h[S],L=w[D-1];w[M]=L,h[L]=M}function T(w,h,D,S){w[D]=S,h[S]=D}function c(w,h,D,S,M,L,R,z,P,I){for(var U=0,O=2*w,G=w-1,$=O-1,tt=D;tt<S;++tt){var Z=L[tt],X=O*tt;v[U++]=M[X+G],v[U++]=-(Z+1),v[U++]=M[X+$],v[U++]=Z}for(var tt=R;tt<z;++tt){var Z=I[tt]+r,J=O*tt;v[U++]=P[J+G],v[U++]=-Z,v[U++]=P[J+$],v[U++]=Z}var st=U>>>1;i(v,st);for(var at=0,lt=0,tt=0;tt<st;++tt){var F=v[2*tt+1]|0;if(F>=r)F=F-r|0,u(o,y,lt--,F);else if(F>=0)u(d,s,at--,F);else if(F<=-r){F=-F-r|0;for(var H=0;H<at;++H){var et=h(d[H],F);if(et!==void 0)return et}T(o,y,lt++,F)}else{F=-F-1|0;for(var H=0;H<lt;++H){var et=h(F,o[H]);if(et!==void 0)return et}T(d,s,at++,F)}}}function A(w,h,D,S,M,L,R,z,P,I){for(var U=0,O=2*w,G=w-1,$=O-1,tt=D;tt<S;++tt){var Z=L[tt]+1<<1,X=O*tt;v[U++]=M[X+G],v[U++]=-Z,v[U++]=M[X+$],v[U++]=Z}for(var tt=R;tt<z;++tt){var Z=I[tt]+1<<1,J=O*tt;v[U++]=P[J+G],v[U++]=-Z|1,v[U++]=P[J+$],v[U++]=Z|1}var st=U>>>1;i(v,st);for(var at=0,lt=0,F=0,tt=0;tt<st;++tt){var H=v[2*tt+1]|0,et=H&1;if(tt<st-1&&H>>1===v[2*tt+3]>>1&&(et=2,tt+=1),H<0){for(var q=-(H>>1)-1,W=0;W<F;++W){var K=h(g[W],q);if(K!==void 0)return K}if(et!==0)for(var W=0;W<at;++W){var K=h(d[W],q);if(K!==void 0)return K}if(et!==1)for(var W=0;W<lt;++W){var K=h(o[W],q);if(K!==void 0)return K}et===0?T(d,s,at++,q):et===1?T(o,y,lt++,q):et===2&&T(g,b,F++,q)}else{var q=(H>>1)-1;et===0?u(d,s,at--,q):et===1?u(o,y,lt--,q):et===2&&u(g,b,F--,q)}}}function k(w,h,D,S,M,L,R,z,P,I,U,O){var G=0,$=2*w,tt=h,Z=h+w,X=1,J=1;S?J=r:X=r;for(var st=M;st<L;++st){var at=st+X,lt=$*st;v[G++]=R[lt+tt],v[G++]=-at,v[G++]=R[lt+Z],v[G++]=at}for(var st=P;st<I;++st){var at=st+J,F=$*st;v[G++]=U[F+tt],v[G++]=-at}var H=G>>>1;i(v,H);for(var et=0,st=0;st<H;++st){var q=v[2*st+1]|0;if(q<0){var at=-q,W=!1;if(at>=r?(W=!S,at-=r):(W=!!S,at-=1),W)T(d,s,et++,at);else{var K=O[at],nt=$*at,it=U[nt+h+1],ot=U[nt+h+1+w];t:for(var ct=0;ct<et;++ct){var bt=d[ct],ut=$*bt;if(!(ot<R[ut+h+1]||R[ut+h+1+w]<it)){for(var pt=h+2;pt<w;++pt)if(U[nt+pt+w]<R[ut+pt]||R[ut+pt+w]<U[nt+pt])continue t;var yt=z[bt],Tt;if(S?Tt=D(K,yt):Tt=D(yt,K),Tt!==void 0)return Tt}}}}else u(d,s,et--,q-X)}}function p(w,h,D,S,M,L,R,z,P,I,U){for(var O=0,G=2*w,$=h,tt=h+w,Z=S;Z<M;++Z){var X=Z+r,J=G*Z;v[O++]=L[J+$],v[O++]=-X,v[O++]=L[J+tt],v[O++]=X}for(var Z=z;Z<P;++Z){var X=Z+1,st=G*Z;v[O++]=I[st+$],v[O++]=-X}var at=O>>>1;i(v,at);for(var lt=0,Z=0;Z<at;++Z){var F=v[2*Z+1]|0;if(F<0){var X=-F;if(X>=r)d[lt++]=X-r;else{X-=1;var H=U[X],et=G*X,q=I[et+h+1],W=I[et+h+1+w];t:for(var K=0;K<lt;++K){var nt=d[K],it=R[nt];if(it===H)break;var ot=G*nt;if(!(W<L[ot+h+1]||L[ot+h+1+w]<q)){for(var ct=h+2;ct<w;++ct)if(I[et+ct+w]<L[ot+ct]||L[ot+ct+w]<I[et+ct])continue t;var bt=D(it,H);if(bt!==void 0)return bt}}}}else{for(var X=F-r,K=lt-1;K>=0;--K)if(d[K]===X){for(var ct=K+1;ct<lt;++ct)d[ct-1]=d[ct];break}--lt}}}},{"./sort":40,"bit-twiddle":32,"typedarray-pool":308}],42:[function(l,m,x){var t=l("./lib/monotone"),a=l("./lib/triangulation"),i=l("./lib/delaunay"),r=l("./lib/filter");m.exports=y;function n(g){return[Math.min(g[0],g[1]),Math.max(g[0],g[1])]}function d(g,b){return g[0]-b[0]||g[1]-b[1]}function s(g){return g.map(n).sort(d)}function o(g,b,v){return b in g?g[b]:v}function y(g,b,v){Array.isArray(b)?(v=v||{},b=b||[]):(v=b||{},b=[]);var _=!!o(v,"delaunay",!0),u=!!o(v,"interior",!0),T=!!o(v,"exterior",!0),c=!!o(v,"infinity",!1);if(!u&&!T||g.length===0)return[];var A=t(g,b);if(_||u!==T||c){for(var k=a(g.length,s(b)),p=0;p<A.length;++p){var w=A[p];k.addTriangle(w[0],w[1],w[2])}return _&&i(g,k),T?u?c?r(k,0,c):k.cells():r(k,1,c):r(k,-1)}else return A}},{"./lib/delaunay":43,"./lib/filter":44,"./lib/monotone":45,"./lib/triangulation":46}],43:[function(l,m,x){var t=l("robust-in-sphere")[4];l("binary-search-bounds"),m.exports=i;function a(r,n,d,s,o,y){var g=n.opposite(s,o);if(!(g<0)){if(o<s){var b=s;s=o,o=b,b=y,y=g,g=b}n.isConstraint(s,o)||t(r[s],r[o],r[y],r[g])<0&&d.push(s,o)}}function i(r,n){for(var d=[],s=r.length,o=n.stars,y=0;y<s;++y)for(var g=o[y],b=1;b<g.length;b+=2){var v=g[b];if(!(v<y)&&!n.isConstraint(y,v)){for(var _=g[b-1],u=-1,T=1;T<g.length;T+=2)if(g[T-1]===v){u=g[T];break}u<0||t(r[y],r[v],r[_],r[u])<0&&d.push(y,v)}}for(;d.length>0;){for(var v=d.pop(),y=d.pop(),_=-1,u=-1,g=o[y],c=1;c<g.length;c+=2){var A=g[c-1],k=g[c];A===v?u=k:k===v&&(_=A)}_<0||u<0||t(r[y],r[v],r[_],r[u])>=0||(n.flip(y,v),a(r,n,d,_,y,u),a(r,n,d,y,u,_),a(r,n,d,u,v,_),a(r,n,d,v,_,u))}}},{"binary-search-bounds":31,"robust-in-sphere":282}],44:[function(l,m,x){var t=l("binary-search-bounds");m.exports=s;function a(o,y,g,b,v,_,u){this.cells=o,this.neighbor=y,this.flags=b,this.constraint=g,this.active=v,this.next=_,this.boundary=u}var i=a.prototype;function r(o,y){return o[0]-y[0]||o[1]-y[1]||o[2]-y[2]}i.locate=function(){var o=[0,0,0];return function(y,g,b){var v=y,_=g,u=b;return g<b?g<y&&(v=g,_=b,u=y):b<y&&(v=b,_=y,u=g),v<0?-1:(o[0]=v,o[1]=_,o[2]=u,t.eq(this.cells,o,r))}}();function n(o,y){for(var g=o.cells(),b=g.length,v=0;v<b;++v){var _=g[v],u=_[0],T=_[1],c=_[2];T<c?T<u&&(_[0]=T,_[1]=c,_[2]=u):c<u&&(_[0]=c,_[1]=u,_[2]=T)}g.sort(r);for(var A=new Array(b),v=0;v<A.length;++v)A[v]=0;var k=[],p=[],w=new Array(3*b),h=new Array(3*b),D=null;y&&(D=[]);for(var S=new a(g,w,h,A,k,p,D),v=0;v<b;++v)for(var _=g[v],M=0;M<3;++M){var u=_[M],T=_[(M+1)%3],L=w[3*v+M]=S.locate(T,u,o.opposite(T,u)),R=h[3*v+M]=o.isConstraint(u,T);L<0&&(R?p.push(v):(k.push(v),A[v]=1),y&&D.push([T,u,-1]))}return S}function d(o,y,g){for(var b=0,v=0;v<o.length;++v)y[v]===g&&(o[b++]=o[v]);return o.length=b,o}function s(o,y,g){var b=n(o,g);if(y===0)return g?b.cells.concat(b.boundary):b.cells;for(var v=1,_=b.active,u=b.next,T=b.flags,c=b.cells,A=b.constraint,k=b.neighbor;_.length>0||u.length>0;){for(;_.length>0;){var p=_.pop();if(T[p]!==-v){T[p]=v,c[p];for(var w=0;w<3;++w){var h=k[3*p+w];h>=0&&T[h]===0&&(A[3*p+w]?u.push(h):(_.push(h),T[h]=v))}}}var D=u;u=_,_=D,u.length=0,v=-v}var S=d(c,T,y);return g?S.concat(b.boundary):S}},{"binary-search-bounds":31}],45:[function(l,m,x){var t=l("binary-search-bounds"),a=l("robust-orientation")[3],i=0,r=1,n=2;m.exports=u;function d(T,c,A,k,p){this.a=T,this.b=c,this.idx=A,this.lowerIds=k,this.upperIds=p}function s(T,c,A,k){this.a=T,this.b=c,this.type=A,this.idx=k}function o(T,c){var A=T.a[0]-c.a[0]||T.a[1]-c.a[1]||T.type-c.type;return A||T.type!==i&&(A=a(T.a,T.b,c.b),A)?A:T.idx-c.idx}function y(T,c){return a(T.a,T.b,c)}function g(T,c,A,k,p){for(var w=t.lt(c,k,y),h=t.gt(c,k,y),D=w;D<h;++D){for(var S=c[D],M=S.lowerIds,R=M.length;R>1&&a(A[M[R-2]],A[M[R-1]],k)>0;)T.push([M[R-1],M[R-2],p]),R-=1;M.length=R,M.push(p);for(var L=S.upperIds,R=L.length;R>1&&a(A[L[R-2]],A[L[R-1]],k)<0;)T.push([L[R-2],L[R-1],p]),R-=1;L.length=R,L.push(p)}}function b(T,c){var A;return T.a[0]<c.a[0]?A=a(T.a,T.b,c.a):A=a(c.b,c.a,T.a),A||(c.b[0]<T.b[0]?A=a(T.a,T.b,c.b):A=a(c.b,c.a,T.b),A||T.idx-c.idx)}function v(T,c,A){var k=t.le(T,A,b),p=T[k],w=p.upperIds,h=w[w.length-1];p.upperIds=[h],T.splice(k+1,0,new d(A.a,A.b,A.idx,[h],w))}function _(T,c,A){var k=A.a;A.a=A.b,A.b=k;var p=t.eq(T,A,b),w=T[p],h=T[p-1];h.upperIds=w.upperIds,T.splice(p,1)}function u(T,c){for(var A=T.length,k=c.length,p=[],w=0;w<A;++w)p.push(new s(T[w],null,i,w));for(var w=0;w<k;++w){var h=c[w],D=T[h[0]],S=T[h[1]];D[0]<S[0]?p.push(new s(D,S,n,w),new s(S,D,r,w)):D[0]>S[0]&&p.push(new s(S,D,n,w),new s(D,S,r,w))}p.sort(o);for(var M=p[0].a[0]-(1+Math.abs(p[0].a[0]))*Math.pow(2,-52),L=[new d([M,1],[M,0],-1,[],[])],R=[],w=0,z=p.length;w<z;++w){var P=p[w],I=P.type;I===i?g(R,L,T,P.a,P.idx):I===n?v(L,T,P):_(L,T,P)}return R}},{"binary-search-bounds":31,"robust-orientation":284}],46:[function(l,m,x){var t=l("binary-search-bounds");m.exports=n;function a(d,s){this.stars=d,this.edges=s}var i=a.prototype;function r(d,s,o){for(var y=1,g=d.length;y<g;y+=2)if(d[y-1]===s&&d[y]===o){d[y-1]=d[g-2],d[y]=d[g-1],d.length=g-2;return}}i.isConstraint=function(){var d=[0,0];function s(o,y){return o[0]-y[0]||o[1]-y[1]}return function(o,y){return d[0]=Math.min(o,y),d[1]=Math.max(o,y),t.eq(this.edges,d,s)>=0}}(),i.removeTriangle=function(d,s,o){var y=this.stars;r(y[d],s,o),r(y[s],o,d),r(y[o],d,s)},i.addTriangle=function(d,s,o){var y=this.stars;y[d].push(s,o),y[s].push(o,d),y[o].push(d,s)},i.opposite=function(d,s){for(var o=this.stars[s],y=1,g=o.length;y<g;y+=2)if(o[y]===d)return o[y-1];return-1},i.flip=function(d,s){var o=this.opposite(d,s),y=this.opposite(s,d);this.removeTriangle(d,s,o),this.removeTriangle(s,d,y),this.addTriangle(d,y,o),this.addTriangle(s,o,y)},i.edges=function(){for(var d=this.stars,s=[],o=0,y=d.length;o<y;++o)for(var g=d[o],b=0,v=g.length;b<v;b+=2)s.push([g[b],g[b+1]]);return s},i.cells=function(){for(var d=this.stars,s=[],o=0,y=d.length;o<y;++o)for(var g=d[o],b=0,v=g.length;b<v;b+=2){var _=g[b],u=g[b+1];o<Math.min(_,u)&&s.push([o,_,u])}return s};function n(d,s){for(var o=new Array(d),y=0;y<d;++y)o[y]=[];return new a(o,s)}},{"binary-search-bounds":31}],47:[function(l,m,x){m.exports=t;function t(a){for(var i=1,r=1;r<a.length;++r)for(var n=0;n<r;++n)if(a[r]<a[n])i=-i;else if(a[n]===a[r])return 0;return i}},{}],48:[function(l,m,x){var t=l("dup"),a=l("robust-linear-solve");function i(d,s){for(var o=0,y=d.length,g=0;g<y;++g)o+=d[g]*s[g];return o}function r(d){var s=d.length;if(s===0)return[];d[0].length;var o=t([d.length+1,d.length+1],1),y=t([d.length+1],1);o[s][s]=0;for(var g=0;g<s;++g){for(var b=0;b<=g;++b)o[b][g]=o[g][b]=2*i(d[g],d[b]);y[g]=i(d[g],d[g])}for(var v=a(o,y),_=0,u=v[s+1],g=0;g<u.length;++g)_+=u[g];for(var T=new Array(s),g=0;g<s;++g){for(var u=v[g],c=0,b=0;b<u.length;++b)c+=u[b];T[g]=c/_}return T}function n(d){if(d.length===0)return[];for(var s=d[0].length,o=t([s]),y=r(d),g=0;g<d.length;++g)for(var b=0;b<s;++b)o[b]+=d[g][b]*y[g];return o}n.barycenetric=r,m.exports=n},{dup:65,"robust-linear-solve":283}],49:[function(l,m,x){m.exports=a;var t=l("circumcenter");function a(i){for(var r=t(i),n=0,d=0;d<i.length;++d)for(var s=i[d],o=0;o<r.length;++o)n+=Math.pow(s[o]-r[o],2);return Math.sqrt(n/i.length)}},{circumcenter:48}],50:[function(l,m,x){m.exports=D;var t=l("union-find"),a=l("box-intersect"),i=l("robust-segment-intersect"),r=l("big-rat"),n=l("big-rat/cmp"),d=l("big-rat/to-float"),s=l("rat-vec"),o=l("nextafter"),y=l("./lib/rat-seg-intersect");function g(S){var M=d(S);return[o(M,-1/0),o(M,1/0)]}function b(S,M){for(var L=new Array(M.length),R=0;R<M.length;++R){var z=M[R],P=S[z[0]],I=S[z[1]];L[R]=[o(Math.min(P[0],I[0]),-1/0),o(Math.min(P[1],I[1]),-1/0),o(Math.max(P[0],I[0]),1/0),o(Math.max(P[1],I[1]),1/0)]}return L}function v(S){for(var M=new Array(S.length),L=0;L<S.length;++L){var R=S[L];M[L]=[o(R[0],-1/0),o(R[1],-1/0),o(R[0],1/0),o(R[1],1/0)]}return M}function _(S,M,L){var R=[];return a(L,function(z,P){var I=M[z],U=M[P];if(!(I[0]===U[0]||I[0]===U[1]||I[1]===U[0]||I[1]===U[1])){var O=S[I[0]],G=S[I[1]],$=S[U[0]],tt=S[U[1]];i(O,G,$,tt)&&R.push([z,P])}}),R}function u(S,M,L,R){var z=[];return a(L,R,function(P,I){var U=M[P];if(!(U[0]===I||U[1]===I)){var O=S[I],G=S[U[0]],$=S[U[1]];i(G,$,O,O)&&z.push([P,I])}}),z}function T(S,M,L,R,z){var P,I,U=S.map(function(nt){return[r(nt[0]),r(nt[1])]});for(P=0;P<L.length;++P){var O=L[P];I=O[0];var G=O[1],$=M[I],tt=M[G],Z=y(s(S[$[0]]),s(S[$[1]]),s(S[tt[0]]),s(S[tt[1]]));if(!!Z){var X=S.length;S.push([d(Z[0]),d(Z[1])]),U.push(Z),R.push([I,X],[G,X])}}for(R.sort(function(nt,it){if(nt[0]!==it[0])return nt[0]-it[0];var ot=U[nt[1]],ct=U[it[1]];return n(ot[0],ct[0])||n(ot[1],ct[1])}),P=R.length-1;P>=0;--P){var J=R[P];I=J[0];var st=M[I],at=st[0],lt=st[1],F=S[at],H=S[lt];if((F[0]-H[0]||F[1]-H[1])<0){var et=at;at=lt,lt=et}st[0]=at;var q=st[1]=J[1],W;for(z&&(W=st[2]);P>0&&R[P-1][0]===I;){var J=R[--P],K=J[1];z?M.push([q,K,W]):M.push([q,K]),q=K}z?M.push([q,lt,W]):M.push([q,lt])}return U}function c(S,M,L){for(var R=M.length,z=new t(R),P=[],I=0;I<M.length;++I){var U=M[I],O=g(U[0]),G=g(U[1]);P.push([o(O[0],-1/0),o(G[0],-1/0),o(O[1],1/0),o(G[1],1/0)])}a(P,function(J,st){z.link(J,st)});for(var $=!0,tt=new Array(R),I=0;I<R;++I){var Z=z.find(I);Z!==I&&($=!1,S[Z]=[Math.min(S[I][0],S[Z][0]),Math.min(S[I][1],S[Z][1])])}if($)return null;for(var X=0,I=0;I<R;++I){var Z=z.find(I);Z===I?(tt[I]=X,S[X++]=S[I]):tt[I]=-1}S.length=X;for(var I=0;I<R;++I)tt[I]<0&&(tt[I]=tt[z.find(I)]);return tt}function A(S,M){return S[0]-M[0]||S[1]-M[1]}function k(S,M){var L=S[0]-M[0]||S[1]-M[1];return L||(S[2]<M[2]?-1:S[2]>M[2]?1:0)}function p(S,M,L){if(S.length!==0){if(M)for(var R=0;R<S.length;++R){var z=S[R],P=M[z[0]],I=M[z[1]];z[0]=Math.min(P,I),z[1]=Math.max(P,I)}else for(var R=0;R<S.length;++R){var z=S[R],P=z[0],I=z[1];z[0]=Math.min(P,I),z[1]=Math.max(P,I)}L?S.sort(k):S.sort(A);for(var U=1,R=1;R<S.length;++R){var O=S[R-1],G=S[R];G[0]===O[0]&&G[1]===O[1]&&(!L||G[2]===O[2])||(S[U++]=G)}S.length=U}}function w(S,M,L){var R=c(S,[],v(S));return p(M,R,L),!!R}function h(S,M,L){var R=b(S,M),z=_(S,M,R),P=v(S),I=u(S,M,R,P),U=T(S,M,z,I,L),O=c(S,U);return p(M,O,L),O?!0:z.length>0||I.length>0}function D(S,M,L){var R;if(L){R=M;for(var z=new Array(M.length),P=0;P<M.length;++P){var I=M[P];z[P]=[I[0],I[1],L[P]]}M=z}for(var U=w(S,M,!!L);h(S,M,!!L);)U=!0;if(!!L&&U){R.length=0,L.length=0;for(var P=0;P<M.length;++P){var I=M[P];R.push([I[0],I[1]]),L.push(I[2])}}return U}},{"./lib/rat-seg-intersect":51,"big-rat":18,"big-rat/cmp":16,"big-rat/to-float":30,"box-intersect":35,nextafter:260,"rat-vec":273,"robust-segment-intersect":287,"union-find":309}],51:[function(l,m,x){m.exports=y;var t=l("big-rat/mul"),a=l("big-rat/div"),i=l("big-rat/sub"),r=l("big-rat/sign"),n=l("rat-vec/sub"),d=l("rat-vec/add"),s=l("rat-vec/muls");function o(g,b){return i(t(g[0],b[1]),t(g[1],b[0]))}function y(g,b,v,_){var u=n(b,g),T=n(_,v),c=o(u,T);if(r(c)===0)return null;var A=n(g,v),k=o(T,A),p=a(k,c),w=s(u,p),h=d(g,w);return h}},{"big-rat/div":17,"big-rat/mul":27,"big-rat/sign":28,"big-rat/sub":29,"rat-vec/add":272,"rat-vec/muls":274,"rat-vec/sub":275}],52:[function(l,m,x){m.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},{}],53:[function(l,m,x){var t=l("./colorScale"),a=l("lerp");m.exports=i;function i(s){var o,y,g,b,v,_,u,T,p,c,A;if(s||(s={}),T=(s.nshades||72)-1,u=s.format||"hex",_=s.colormap,_||(_="jet"),typeof _=="string"){if(_=_.toLowerCase(),!t[_])throw Error(_+" not a supported colorscale");v=t[_]}else if(Array.isArray(_))v=_.slice();else throw Error("unsupported colormap option",_);if(v.length>T+1)throw new Error(_+" map requires nshades to be at least size "+v.length);Array.isArray(s.alpha)?s.alpha.length!==2?c=[1,1]:c=s.alpha.slice():typeof s.alpha=="number"?c=[s.alpha,s.alpha]:c=[1,1],o=v.map(function(D){return Math.round(D.index*T)}),c[0]=Math.min(Math.max(c[0],0),1),c[1]=Math.min(Math.max(c[1],0),1);var k=v.map(function(D,S){var M=v[S].index,L=v[S].rgb.slice();return L.length===4&&L[3]>=0&&L[3]<=1||(L[3]=c[0]+(c[1]-c[0])*M),L}),p=[];for(A=0;A<o.length-1;++A){b=o[A+1]-o[A],y=k[A],g=k[A+1];for(var w=0;w<b;w++){var h=w/b;p.push([Math.round(a(y[0],g[0],h)),Math.round(a(y[1],g[1],h)),Math.round(a(y[2],g[2],h)),a(y[3],g[3],h)])}}return p.push(v[v.length-1].rgb.concat(c[1])),u==="hex"?p=p.map(n):u==="rgbaString"?p=p.map(d):u==="float"&&(p=p.map(r)),p}function r(s){return[s[0]/255,s[1]/255,s[2]/255,s[3]]}function n(s){for(var o,y="#",g=0;g<3;++g)o=s[g],o=o.toString(16),y+=("00"+o).substr(o.length);return y}function d(s){return"rgba("+s.join(",")+")"}},{"./colorScale":52,lerp:240}],54:[function(l,m,x){m.exports=s;var t=l("robust-orientation"),a=l("signum"),i=l("two-sum"),r=l("robust-product"),n=l("robust-sum");function d(o,y,g){var b=i(o[0],-y[0]),v=i(o[1],-y[1]),_=i(g[0],-y[0]),u=i(g[1],-y[1]),T=n(r(b,_),r(v,u));return T[T.length-1]>=0}function s(o,y,g,b){var v=t(y,g,b);if(v===0){var _=a(t(o,y,g)),u=a(t(o,y,b));if(_===u){if(_===0){var T=d(o,y,g),c=d(o,y,b);return T===c?0:T?1:-1}return 0}else{if(u===0)return _>0||d(o,y,b)?-1:1;if(_===0)return u>0||d(o,y,g)?1:-1}return a(u-_)}var A=t(o,y,g);if(A>0)return v>0&&t(o,y,b)>0?1:-1;if(A<0)return v>0||t(o,y,b)>0?1:-1;var k=t(o,y,b);return k>0||d(o,y,g)?1:-1}},{"robust-orientation":284,"robust-product":285,"robust-sum":289,signum:55,"two-sum":307}],55:[function(l,m,x){m.exports=function(a){return a<0?-1:a>0?1:0}},{}],56:[function(l,m,x){m.exports=i;var t=Math.min;function a(r,n){return r-n}function i(r,n){var d=r.length,s=r.length-n.length;if(s)return s;switch(d){case 0:return 0;case 1:return r[0]-n[0];case 2:return r[0]+r[1]-n[0]-n[1]||t(r[0],r[1])-t(n[0],n[1]);case 3:var o=r[0]+r[1],y=n[0]+n[1];if(s=o+r[2]-(y+n[2]),s)return s;var g=t(r[0],r[1]),b=t(n[0],n[1]);return t(g,r[2])-t(b,n[2])||t(g+r[2],o)-t(b+n[2],y);case 4:var v=r[0],_=r[1],u=r[2],T=r[3],c=n[0],A=n[1],k=n[2],p=n[3];return v+_+u+T-(c+A+k+p)||t(v,_,u,T)-t(c,A,k,p,c)||t(v+_,v+u,v+T,_+u,_+T,u+T)-t(c+A,c+k,c+p,A+k,A+p,k+p)||t(v+_+u,v+_+T,v+u+T,_+u+T)-t(c+A+k,c+A+p,c+k+p,A+k+p);default:for(var w=r.slice().sort(a),h=n.slice().sort(a),D=0;D<d;++D)if(s=w[D]-h[D],s)return s;return 0}}},{}],57:[function(l,m,x){var t=l("compare-cell"),a=l("cell-orientation");m.exports=i;function i(r,n){return t(r,n)||a(r)-a(n)}},{"cell-orientation":47,"compare-cell":56}],58:[function(l,m,x){var t=l("./lib/ch1d"),a=l("./lib/ch2d"),i=l("./lib/chnd");m.exports=r;function r(n){var d=n.length;if(d===0)return[];if(d===1)return[[0]];var s=n[0].length;return s===0?[]:s===1?t(n):s===2?a(n):i(n,s)}},{"./lib/ch1d":59,"./lib/ch2d":60,"./lib/chnd":61}],59:[function(l,m,x){m.exports=t;function t(a){for(var i=0,r=0,n=1;n<a.length;++n)a[n][0]<a[i][0]&&(i=n),a[n][0]>a[r][0]&&(r=n);return i<r?[[i],[r]]:i>r?[[r],[i]]:[[i]]}},{}],60:[function(l,m,x){m.exports=a;var t=l("monotone-convex-hull-2d");function a(i){var r=t(i),n=r.length;if(n<=2)return[];for(var d=new Array(n),s=r[n-1],o=0;o<n;++o){var y=r[o];d[o]=[s,y],s=y}return d}},{"monotone-convex-hull-2d":246}],61:[function(l,m,x){m.exports=n;var t=l("incremental-convex-hull"),a=l("affine-hull");function i(d,s){for(var o=d.length,y=new Array(o),g=0;g<s.length;++g)y[g]=d[s[g]];for(var b=s.length,g=0;g<o;++g)s.indexOf(g)<0&&(y[b++]=d[g]);return y}function r(d,s){for(var o=d.length,y=s.length,g=0;g<o;++g)for(var b=d[g],v=0;v<b.length;++v){var _=b[v];if(_<y)b[v]=s[_];else{_=_-y;for(var u=0;u<y;++u)_>=s[u]&&(_+=1);b[v]=_}}return d}function n(d,s){try{return t(d,!0)}catch{var o=a(d);if(o.length<=s)return[];var y=i(d,o),g=t(y,!0);return r(g,o)}}},{"affine-hull":10,"incremental-convex-hull":233}],62:[function(l,m,x){function t(i,r,n,d,s,o){var y=6*s*s-6*s,g=3*s*s-4*s+1,b=-6*s*s+6*s,v=3*s*s-2*s;if(i.length){o||(o=new Array(i.length));for(var _=i.length-1;_>=0;--_)o[_]=y*i[_]+g*r[_]+b*n[_]+v*d[_];return o}return y*i+g*r+b*n[_]+v*d}function a(i,r,n,d,s,o){var y=s-1,g=s*s,b=y*y,v=(1+2*s)*b,_=s*b,u=g*(3-2*s),T=g*y;if(i.length){o||(o=new Array(i.length));for(var c=i.length-1;c>=0;--c)o[c]=v*i[c]+_*r[c]+u*n[c]+T*d[c];return o}return v*i+_*r+u*n+T*d}m.exports=a,m.exports.derivative=t},{}],63:[function(l,m,x){var t=l("incremental-convex-hull"),a=l("uniq");m.exports=d;function i(s,o){this.point=s,this.index=o}function r(s,o){for(var y=s.point,g=o.point,b=y.length,v=0;v<b;++v){var _=g[v]-y[v];if(_)return _}return 0}function n(s,o,y){if(s===1)return y?[[-1,0]]:[];var g=o.map(function(T,c){return[T[0],c]});g.sort(function(T,c){return T[0]-c[0]});for(var b=new Array(s-1),v=1;v<s;++v){var _=g[v-1],u=g[v];b[v-1]=[_[1],u[1]]}return y&&b.push([-1,b[0][1]],[b[s-1][1],-1]),b}function d(s,o){var y=s.length;if(y===0)return[];var g=s[0].length;if(g<1)return[];if(g===1)return n(y,s,o);for(var b=new Array(y),v=1,_=0;_<y;++_){for(var u=s[_],T=new Array(g+1),c=0,A=0;A<g;++A){var k=u[A];T[A]=k,c+=k*k}T[g]=c,b[_]=new i(T,_),v=Math.max(c,v)}a(b,r),y=b.length;for(var p=new Array(y+g+1),w=new Array(y+g+1),h=(g+1)*(g+1)*v,D=new Array(g+1),_=0;_<=g;++_)D[_]=0;D[g]=h,p[0]=D.slice(),w[0]=-1;for(var _=0;_<=g;++_){var T=D.slice();T[_]=1,p[_+1]=T,w[_+1]=-1}for(var _=0;_<y;++_){var S=b[_];p[_+g+1]=S.point,w[_+g+1]=S.index}var M=t(p,!1);if(o?M=M.filter(function(L){for(var R=0,z=0;z<=g;++z){var P=w[L[z]];if(P<0&&++R>=2)return!1;L[z]=P}return!0}):M=M.filter(function(L){for(var R=0;R<=g;++R){var z=w[L[R]];if(z<0)return!1;L[R]=z}return!0}),g&1)for(var _=0;_<M.length;++_){var S=M[_],T=S[0];S[0]=S[1],S[1]=T}return M}},{"incremental-convex-hull":233,uniq:310}],64:[function(l,m,x){(function(t){(function(){var a=!1;if(typeof Float64Array<"u"){var i=new Float64Array(1),r=new Uint32Array(i.buffer);if(i[0]=1,a=!0,r[1]===1072693248){let T=function(k,p){return r[0]=k,r[1]=p,i[0]},c=function(k){return i[0]=k,r[0]},A=function(k){return i[0]=k,r[1]};var d=T,s=c,o=A;m.exports=function(p){return i[0]=p,[r[0],r[1]]},m.exports.pack=T,m.exports.lo=c,m.exports.hi=A}else if(r[0]===1072693248){let T=function(k,p){return r[1]=k,r[0]=p,i[0]},c=function(k){return i[0]=k,r[1]},A=function(k){return i[0]=k,r[0]};var y=T,g=c,b=A;m.exports=function(p){return i[0]=p,[r[1],r[0]]},m.exports.pack=T,m.exports.lo=c,m.exports.hi=A}else a=!1}if(!a){let T=function(k,p){return n.writeUInt32LE(k,0,!0),n.writeUInt32LE(p,4,!0),n.readDoubleLE(0,!0)},c=function(k){return n.writeDoubleLE(k,0,!0),n.readUInt32LE(0,!0)},A=function(k){return n.writeDoubleLE(k,0,!0),n.readUInt32LE(4,!0)};var v=T,_=c,u=A,n=new t(8);m.exports=function(p){return n.writeDoubleLE(p,0,!0),[n.readUInt32LE(0,!0),n.readUInt32LE(4,!0)]},m.exports.pack=T,m.exports.lo=c,m.exports.hi=A}m.exports.sign=function(T){return m.exports.hi(T)>>>31},m.exports.exponent=function(T){var c=m.exports.hi(T);return(c<<1>>>21)-1023},m.exports.fraction=function(T){var c=m.exports.lo(T),A=m.exports.hi(T),k=A&(1<<20)-1;return A&2146435072&&(k+=1<<20),[c,k]},m.exports.denormalized=function(T){var c=m.exports.hi(T);return!(c&2146435072)}}).call(this)}).call(this,l("buffer").Buffer)},{buffer:3}],65:[function(l,m,x){function t(r,n,d){var s=r[d]|0;if(s<=0)return[];var o=new Array(s),y;if(d===r.length-1)for(y=0;y<s;++y)o[y]=n;else for(y=0;y<s;++y)o[y]=t(r,n,d+1);return o}function a(r,n){var d,s;for(d=new Array(r),s=0;s<r;++s)d[s]=n;return d}function i(r,n){switch(typeof n>"u"&&(n=0),typeof r){case"number":if(r>0)return a(r|0,n);break;case"object":if(typeof r.length=="number")return t(r,n,0);break}return[]}m.exports=i},{}],66:[function(l,m,x){m.exports=a;var t=l("uniq");function a(i,r){var n=i.length;if(typeof r!="number"){r=0;for(var d=0;d<n;++d){var s=i[d];r=Math.max(r,s[0],s[1])}r=(r|0)+1}r=r|0;for(var o=new Array(r),d=0;d<r;++d)o[d]=[];for(var d=0;d<n;++d){var s=i[d];o[s[0]].push(s[1]),o[s[1]].push(s[0])}for(var y=0;y<r;++y)t(o[y],function(g,b){return g-b});return o}},{uniq:310}],67:[function(l,m,x){m.exports=t;function t(a,i,r){var n=i||0,d=r||1;return[[a[12]+a[0],a[13]+a[1],a[14]+a[2],a[15]+a[3]],[a[12]-a[0],a[13]-a[1],a[14]-a[2],a[15]-a[3]],[a[12]+a[4],a[13]+a[5],a[14]+a[6],a[15]+a[7]],[a[12]-a[4],a[13]-a[5],a[14]-a[6],a[15]-a[7]],[n*a[12]+a[8],n*a[13]+a[9],n*a[14]+a[10],n*a[15]+a[11]],[d*a[12]-a[8],d*a[13]-a[9],d*a[14]-a[10],d*a[15]-a[11]]]}},{}],68:[function(l,m,x){m.exports=s;var t=l("cubic-hermite"),a=l("binary-search-bounds");function i(o,y,g){return Math.min(y,Math.max(o,g))}function r(o,y,g){this.dimension=o.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var b=0;b<this.dimension;++b)this.bounds[0][b]=-1/0,this.bounds[1][b]=1/0;this._state=o.slice().reverse(),this._velocity=y.slice().reverse(),this._time=[g],this._scratch=[o.slice(),o.slice(),o.slice(),o.slice(),o.slice()]}var n=r.prototype;n.flush=function(o){var y=a.gt(this._time,o)-1;y<=0||(this._time.splice(0,y),this._state.splice(0,y*this.dimension),this._velocity.splice(0,y*this.dimension))},n.curve=function(o){var y=this._time,g=y.length,b=a.le(y,o),v=this._scratch[0],_=this._state,u=this._velocity,T=this.dimension,c=this.bounds;if(b<0)for(var A=T-1,k=0;k<T;++k,--A)v[k]=_[A];else if(b>=g-1)for(var A=_.length-1,p=o-y[g-1],k=0;k<T;++k,--A)v[k]=_[A]+p*u[A];else{for(var A=T*(b+1)-1,w=y[b],h=y[b+1],D=h-w||1,S=this._scratch[1],M=this._scratch[2],L=this._scratch[3],R=this._scratch[4],z=!0,k=0;k<T;++k,--A)S[k]=_[A],L[k]=u[A]*D,M[k]=_[A+T],R[k]=u[A+T]*D,z=z&&S[k]===M[k]&&L[k]===R[k]&&L[k]===0;if(z)for(var k=0;k<T;++k)v[k]=S[k];else t(S,L,M,R,(o-w)/D,v)}for(var P=c[0],I=c[1],k=0;k<T;++k)v[k]=i(P[k],I[k],v[k]);return v},n.dcurve=function(o){var y=this._time,g=y.length,b=a.le(y,o),v=this._scratch[0],_=this._state,u=this._velocity,T=this.dimension;if(b>=g-1){var c=_.length-1;o-y[g-1];for(var A=0;A<T;++A,--c)v[A]=u[c]}else{for(var c=T*(b+1)-1,k=y[b],p=y[b+1],w=p-k||1,h=this._scratch[1],D=this._scratch[2],S=this._scratch[3],M=this._scratch[4],L=!0,A=0;A<T;++A,--c)h[A]=_[c],S[A]=u[c]*w,D[A]=_[c+T],M[A]=u[c+T]*w,L=L&&h[A]===D[A]&&S[A]===M[A]&&S[A]===0;if(L)for(var A=0;A<T;++A)v[A]=0;else{t.derivative(h,S,D,M,(o-k)/w,v);for(var A=0;A<T;++A)v[A]/=w}}return v},n.lastT=function(){var o=this._time;return o[o.length-1]},n.stable=function(){for(var o=this._velocity,y=o.length,g=this.dimension-1;g>=0;--g)if(o[--y])return!1;return!0},n.jump=function(o){var y=this.lastT(),g=this.dimension;if(!(o<y||arguments.length!==g+1)){var b=this._state,v=this._velocity,_=b.length-this.dimension,u=this.bounds,T=u[0],c=u[1];this._time.push(y,o);for(var A=0;A<2;++A)for(var k=0;k<g;++k)b.push(b[_++]),v.push(0);this._time.push(o);for(var k=g;k>0;--k)b.push(i(T[k-1],c[k-1],arguments[k])),v.push(0)}},n.push=function(o){var y=this.lastT(),g=this.dimension;if(!(o<y||arguments.length!==g+1)){var b=this._state,v=this._velocity,_=b.length-this.dimension,u=o-y,T=this.bounds,c=T[0],A=T[1],k=u>1e-6?1/u:0;this._time.push(o);for(var p=g;p>0;--p){var w=i(c[p-1],A[p-1],arguments[p]);b.push(w),v.push((w-b[_++])*k)}}},n.set=function(o){var y=this.dimension;if(!(o<this.lastT()||arguments.length!==y+1)){var g=this._state,b=this._velocity,v=this.bounds,_=v[0],u=v[1];this._time.push(o);for(var T=y;T>0;--T)g.push(i(_[T-1],u[T-1],arguments[T])),b.push(0)}},n.move=function(o){var y=this.lastT(),g=this.dimension;if(!(o<=y||arguments.length!==g+1)){var b=this._state,v=this._velocity,_=b.length-this.dimension,u=this.bounds,T=u[0],c=u[1],A=o-y,k=A>1e-6?1/A:0;this._time.push(o);for(var p=g;p>0;--p){var w=arguments[p];b.push(i(T[p-1],c[p-1],b[_++]+w)),v.push(w*k)}}},n.idle=function(o){var y=this.lastT();if(!(o<y)){var g=this.dimension,b=this._state,v=this._velocity,_=b.length-g,u=this.bounds,T=u[0],c=u[1],A=o-y;this._time.push(o);for(var k=g-1;k>=0;--k)b.push(i(T[k],c[k],b[_]+A*v[_])),v.push(0),_+=1}};function d(o){for(var y=new Array(o),g=0;g<o;++g)y[g]=0;return y}function s(o,y,g){switch(arguments.length){case 0:return new r([0],[0],0);case 1:if(typeof o=="number"){var b=d(o);return new r(b,b,0)}else return new r(o,d(o.length),0);case 2:if(typeof y=="number"){var b=d(o.length);return new r(o,b,+y)}else g=0;case 3:if(o.length!==y.length)throw new Error("state and velocity lengths must match");return new r(o,y,g)}}},{"binary-search-bounds":31,"cubic-hermite":62}],69:[function(l,m,x){m.exports=A;var t=0,a=1;function i(k,p,w,h,D,S){this._color=k,this.key=p,this.value=w,this.left=h,this.right=D,this._count=S}function r(k){return new i(k._color,k.key,k.value,k.left,k.right,k._count)}function n(k,p){return new i(k,p.key,p.value,p.left,p.right,p._count)}function d(k){k._count=1+(k.left?k.left._count:0)+(k.right?k.right._count:0)}function s(k,p){this._compare=k,this.root=p}var o=s.prototype;Object.defineProperty(o,"keys",{get:function(){var k=[];return this.forEach(function(p,w){k.push(p)}),k}}),Object.defineProperty(o,"values",{get:function(){var k=[];return this.forEach(function(p,w){k.push(w)}),k}}),Object.defineProperty(o,"length",{get:function(){return this.root?this.root._count:0}}),o.insert=function(k,p){for(var w=this._compare,h=this.root,D=[],S=[];h;){var M=w(k,h.key);D.push(h),S.push(M),M<=0?h=h.left:h=h.right}D.push(new i(t,k,p,null,null,1));for(var L=D.length-2;L>=0;--L){var h=D[L];S[L]<=0?D[L]=new i(h._color,h.key,h.value,D[L+1],h.right,h._count+1):D[L]=new i(h._color,h.key,h.value,h.left,D[L+1],h._count+1)}for(var L=D.length-1;L>1;--L){var R=D[L-1],h=D[L];if(R._color===a||h._color===a)break;var z=D[L-2];if(z.left===R)if(R.left===h){var P=z.right;if(P&&P._color===t)R._color=a,z.right=n(a,P),z._color=t,L-=1;else{if(z._color=t,z.left=R.right,R._color=a,R.right=z,D[L-2]=R,D[L-1]=h,d(z),d(R),L>=3){var I=D[L-3];I.left===z?I.left=R:I.right=R}break}}else{var P=z.right;if(P&&P._color===t)R._color=a,z.right=n(a,P),z._color=t,L-=1;else{if(R.right=h.left,z._color=t,z.left=h.right,h._color=a,h.left=R,h.right=z,D[L-2]=h,D[L-1]=R,d(z),d(R),d(h),L>=3){var I=D[L-3];I.left===z?I.left=h:I.right=h}break}}else if(R.right===h){var P=z.left;if(P&&P._color===t)R._color=a,z.left=n(a,P),z._color=t,L-=1;else{if(z._color=t,z.right=R.left,R._color=a,R.left=z,D[L-2]=R,D[L-1]=h,d(z),d(R),L>=3){var I=D[L-3];I.right===z?I.right=R:I.left=R}break}}else{var P=z.left;if(P&&P._color===t)R._color=a,z.left=n(a,P),z._color=t,L-=1;else{if(R.left=h.right,z._color=t,z.right=h.left,h._color=a,h.right=R,h.left=z,D[L-2]=h,D[L-1]=R,d(z),d(R),d(h),L>=3){var I=D[L-3];I.right===z?I.right=h:I.left=h}break}}}return D[0]._color=a,new s(w,D[0])};function y(k,p){if(p.left){var w=y(k,p.left);if(w)return w}var w=k(p.key,p.value);if(w)return w;if(p.right)return y(k,p.right)}function g(k,p,w,h){var D=p(k,h.key);if(D<=0){if(h.left){var S=g(k,p,w,h.left);if(S)return S}var S=w(h.key,h.value);if(S)return S}if(h.right)return g(k,p,w,h.right)}function b(k,p,w,h,D){var S=w(k,D.key),M=w(p,D.key),L;if(S<=0&&(D.left&&(L=b(k,p,w,h,D.left),L)||M>0&&(L=h(D.key,D.value),L)))return L;if(M>0&&D.right)return b(k,p,w,h,D.right)}o.forEach=function(p,w,h){if(!!this.root)switch(arguments.length){case 1:return y(p,this.root);case 2:return g(w,this._compare,p,this.root);case 3:return this._compare(w,h)>=0?void 0:b(w,h,this._compare,p,this.root)}},Object.defineProperty(o,"begin",{get:function(){for(var k=[],p=this.root;p;)k.push(p),p=p.left;return new v(this,k)}}),Object.defineProperty(o,"end",{get:function(){for(var k=[],p=this.root;p;)k.push(p),p=p.right;return new v(this,k)}}),o.at=function(k){if(k<0)return new v(this,[]);for(var p=this.root,w=[];;){if(w.push(p),p.left){if(k<p.left._count){p=p.left;continue}k-=p.left._count}if(!k)return new v(this,w);if(k-=1,p.right){if(k>=p.right._count)break;p=p.right}else break}return new v(this,[])},o.ge=function(k){for(var p=this._compare,w=this.root,h=[],D=0;w;){var S=p(k,w.key);h.push(w),S<=0&&(D=h.length),S<=0?w=w.left:w=w.right}return h.length=D,new v(this,h)},o.gt=function(k){for(var p=this._compare,w=this.root,h=[],D=0;w;){var S=p(k,w.key);h.push(w),S<0&&(D=h.length),S<0?w=w.left:w=w.right}return h.length=D,new v(this,h)},o.lt=function(k){for(var p=this._compare,w=this.root,h=[],D=0;w;){var S=p(k,w.key);h.push(w),S>0&&(D=h.length),S<=0?w=w.left:w=w.right}return h.length=D,new v(this,h)},o.le=function(k){for(var p=this._compare,w=this.root,h=[],D=0;w;){var S=p(k,w.key);h.push(w),S>=0&&(D=h.length),S<0?w=w.left:w=w.right}return h.length=D,new v(this,h)},o.find=function(k){for(var p=this._compare,w=this.root,h=[];w;){var D=p(k,w.key);if(h.push(w),D===0)return new v(this,h);D<=0?w=w.left:w=w.right}return new v(this,[])},o.remove=function(k){var p=this.find(k);return p?p.remove():this},o.get=function(k){for(var p=this._compare,w=this.root;w;){var h=p(k,w.key);if(h===0)return w.value;h<=0?w=w.left:w=w.right}};function v(k,p){this.tree=k,this._stack=p}var _=v.prototype;Object.defineProperty(_,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(_,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),_.clone=function(){return new v(this.tree,this._stack.slice())};function u(k,p){k.key=p.key,k.value=p.value,k.left=p.left,k.right=p.right,k._color=p._color,k._count=p._count}function T(k){for(var p,w,h,D,S=k.length-1;S>=0;--S){if(p=k[S],S===0){p._color=a;return}if(w=k[S-1],w.left===p){if(h=w.right,h.right&&h.right._color===t){if(h=w.right=r(h),D=h.right=r(h.right),w.right=h.left,h.left=w,h.right=D,h._color=w._color,p._color=a,w._color=a,D._color=a,d(w),d(h),S>1){var M=k[S-2];M.left===w?M.left=h:M.right=h}k[S-1]=h;return}else if(h.left&&h.left._color===t){if(h=w.right=r(h),D=h.left=r(h.left),w.right=D.left,h.left=D.right,D.left=w,D.right=h,D._color=w._color,w._color=a,h._color=a,p._color=a,d(w),d(h),d(D),S>1){var M=k[S-2];M.left===w?M.left=D:M.right=D}k[S-1]=D;return}if(h._color===a)if(w._color===t){w._color=a,w.right=n(t,h);return}else{w.right=n(t,h);continue}else{if(h=r(h),w.right=h.left,h.left=w,h._color=w._color,w._color=t,d(w),d(h),S>1){var M=k[S-2];M.left===w?M.left=h:M.right=h}k[S-1]=h,k[S]=w,S+1<k.length?k[S+1]=p:k.push(p),S=S+2}}else{if(h=w.left,h.left&&h.left._color===t){if(h=w.left=r(h),D=h.left=r(h.left),w.left=h.right,h.right=w,h.left=D,h._color=w._color,p._color=a,w._color=a,D._color=a,d(w),d(h),S>1){var M=k[S-2];M.right===w?M.right=h:M.left=h}k[S-1]=h;return}else if(h.right&&h.right._color===t){if(h=w.left=r(h),D=h.right=r(h.right),w.left=D.right,h.right=D.left,D.right=w,D.left=h,D._color=w._color,w._color=a,h._color=a,p._color=a,d(w),d(h),d(D),S>1){var M=k[S-2];M.right===w?M.right=D:M.left=D}k[S-1]=D;return}if(h._color===a)if(w._color===t){w._color=a,w.left=n(t,h);return}else{w.left=n(t,h);continue}else{if(h=r(h),w.left=h.right,h.right=w,h._color=w._color,w._color=t,d(w),d(h),S>1){var M=k[S-2];M.right===w?M.right=h:M.left=h}k[S-1]=h,k[S]=w,S+1<k.length?k[S+1]=p:k.push(p),S=S+2}}}}_.remove=function(){var k=this._stack;if(k.length===0)return this.tree;var p=new Array(k.length),w=k[k.length-1];p[p.length-1]=new i(w._color,w.key,w.value,w.left,w.right,w._count);for(var h=k.length-2;h>=0;--h){var w=k[h];w.left===k[h+1]?p[h]=new i(w._color,w.key,w.value,p[h+1],w.right,w._count):p[h]=new i(w._color,w.key,w.value,w.left,p[h+1],w._count)}if(w=p[p.length-1],w.left&&w.right){var D=p.length;for(w=w.left;w.right;)p.push(w),w=w.right;var S=p[D-1];p.push(new i(w._color,S.key,S.value,w.left,w.right,w._count)),p[D-1].key=w.key,p[D-1].value=w.value;for(var h=p.length-2;h>=D;--h)w=p[h],p[h]=new i(w._color,w.key,w.value,w.left,p[h+1],w._count);p[D-1].left=p[D]}if(w=p[p.length-1],w._color===t){var M=p[p.length-2];M.left===w?M.left=null:M.right===w&&(M.right=null),p.pop();for(var h=0;h<p.length;++h)p[h]._count--;return new s(this.tree._compare,p[0])}else if(w.left||w.right){w.left?u(w,w.left):w.right&&u(w,w.right),w._color=a;for(var h=0;h<p.length-1;++h)p[h]._count--;return new s(this.tree._compare,p[0])}else{if(p.length===1)return new s(this.tree._compare,null);for(var h=0;h<p.length;++h)p[h]._count--;var L=p[p.length-2];T(p),L.left===w?L.left=null:L.right=null}return new s(this.tree._compare,p[0])},Object.defineProperty(_,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(_,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(_,"index",{get:function(){var k=0,p=this._stack;if(p.length===0){var w=this.tree.root;return w?w._count:0}else p[p.length-1].left&&(k=p[p.length-1].left._count);for(var h=p.length-2;h>=0;--h)p[h+1]===p[h].right&&(++k,p[h].left&&(k+=p[h].left._count));return k},enumerable:!0}),_.next=function(){var k=this._stack;if(k.length!==0){var p=k[k.length-1];if(p.right)for(p=p.right;p;)k.push(p),p=p.left;else for(k.pop();k.length>0&&k[k.length-1].right===p;)p=k[k.length-1],k.pop()}},Object.defineProperty(_,"hasNext",{get:function(){var k=this._stack;if(k.length===0)return!1;if(k[k.length-1].right)return!0;for(var p=k.length-1;p>0;--p)if(k[p-1].left===k[p])return!0;return!1}}),_.update=function(k){var p=this._stack;if(p.length===0)throw new Error("Can't update empty node!");var w=new Array(p.length),h=p[p.length-1];w[w.length-1]=new i(h._color,h.key,k,h.left,h.right,h._count);for(var D=p.length-2;D>=0;--D)h=p[D],h.left===p[D+1]?w[D]=new i(h._color,h.key,h.value,w[D+1],h.right,h._count):w[D]=new i(h._color,h.key,h.value,h.left,w[D+1],h._count);return new s(this.tree._compare,w[0])},_.prev=function(){var k=this._stack;if(k.length!==0){var p=k[k.length-1];if(p.left)for(p=p.left;p;)k.push(p),p=p.right;else for(k.pop();k.length>0&&k[k.length-1].left===p;)p=k[k.length-1],k.pop()}},Object.defineProperty(_,"hasPrev",{get:function(){var k=this._stack;if(k.length===0)return!1;if(k[k.length-1].left)return!0;for(var p=k.length-1;p>0;--p)if(k[p-1].right===k[p])return!0;return!1}});function c(k,p){return k<p?-1:k>p?1:0}function A(k){return new s(k||c,null)}},{}],70:[function(l,m,x){m.exports=p;var t=l("./lib/text.js"),a=l("./lib/lines.js"),i=l("./lib/background.js"),r=l("./lib/cube.js"),n=l("./lib/ticks.js"),d=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function s(w,h){return w[0]=h[0],w[1]=h[1],w[2]=h[2],w}function o(w){this.gl=w,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=i(w)}var y=o.prototype;y.update=function(w){w=w||{};function h($,tt,Z){if(Z in w){var X=w[Z],J=this[Z],st;($?Array.isArray(X)&&Array.isArray(X[0]):Array.isArray(X))?this[Z]=st=[tt(X[0]),tt(X[1]),tt(X[2])]:this[Z]=st=[tt(X),tt(X),tt(X)];for(var at=0;at<3;++at)if(st[at]!==J[at])return!0}return!1}var D=h.bind(this,!1,Number),S=h.bind(this,!1,Boolean),M=h.bind(this,!1,String),L=h.bind(this,!0,function($){if(Array.isArray($)){if($.length===3)return[+$[0],+$[1],+$[2],1];if($.length===4)return[+$[0],+$[1],+$[2],+$[3]]}return[0,0,0,1]}),R,z=!1,P=!1;if("bounds"in w)for(var I=w.bounds,U=0;U<2;++U)for(var O=0;O<3;++O)I[U][O]!==this.bounds[U][O]&&(P=!0),this.bounds[U][O]=I[U][O];if("ticks"in w){R=w.ticks,z=!0,this.autoTicks=!1;for(var U=0;U<3;++U)this.tickSpacing[U]=0}else D("tickSpacing")&&(this.autoTicks=!0,P=!0);if(this._firstInit&&("ticks"in w||"tickSpacing"in w||(this.autoTicks=!0),P=!0,z=!0,this._firstInit=!1),P&&this.autoTicks&&(R=n.create(this.bounds,this.tickSpacing),z=!0),z){for(var U=0;U<3;++U)R[U].sort(function(tt,Z){return tt.x-Z.x});n.equal(R,this.ticks)?z=!1:this.ticks=R}S("tickEnable"),M("tickFont")&&(z=!0),D("tickSize"),D("tickAngle"),D("tickPad"),L("tickColor");var G=M("labels");M("labelFont")&&(G=!0),S("labelEnable"),D("labelSize"),D("labelPad"),L("labelColor"),S("lineEnable"),S("lineMirror"),D("lineWidth"),L("lineColor"),S("lineTickEnable"),S("lineTickMirror"),D("lineTickLength"),D("lineTickWidth"),L("lineTickColor"),S("gridEnable"),D("gridWidth"),L("gridColor"),S("zeroEnable"),L("zeroLineColor"),D("zeroLineWidth"),S("backgroundEnable"),L("backgroundColor"),this._text?this._text&&(G||z)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=t(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&z&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=a(this.gl,this.bounds,this.ticks))};function g(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}var b=[new g,new g,new g];function v(w,h,D,S,M){for(var L=w.primalOffset,R=w.primalMinor,z=w.mirrorOffset,P=w.mirrorMinor,I=S[h],U=0;U<3;++U)if(h!==U){var O=L,G=z,$=R,tt=P;I&1<<U&&(O=z,G=L,$=P,tt=R),O[U]=D[0][U],G[U]=D[1][U],M[U]>0?($[U]=-1,tt[U]=0):($[U]=0,tt[U]=1)}}var _=[0,0,0],u={model:d,view:d,projection:d,_ortho:!1};y.isOpaque=function(){return!0},y.isTransparent=function(){return!1},y.drawTransparent=function(w){};var T=0,c=[0,0,0],A=[0,0,0],k=[0,0,0];y.draw=function(w){w=w||u;for(var J=this.gl,h=w.model||d,D=w.view||d,S=w.projection||d,M=this.bounds,L=w._ortho||!1,R=r(h,D,S,M,L),z=R.cubeEdges,P=R.axis,I=D[12],U=D[13],O=D[14],G=D[15],$=L?2:1,tt=$*this.pixelRatio*(S[3]*I+S[7]*U+S[11]*O+S[15]*G)/J.drawingBufferHeight,Z=0;Z<3;++Z)this.lastCubeProps.cubeEdges[Z]=z[Z],this.lastCubeProps.axis[Z]=P[Z];for(var X=b,Z=0;Z<3;++Z)v(b[Z],Z,this.bounds,z,P);for(var J=this.gl,st=_,Z=0;Z<3;++Z)this.backgroundEnable[Z]?st[Z]=P[Z]:st[Z]=0;this._background.draw(h,D,S,M,st,this.backgroundColor),this._lines.bind(h,D,S,this);for(var Z=0;Z<3;++Z){var at=[0,0,0];P[Z]>0?at[Z]=M[1][Z]:at[Z]=M[0][Z];for(var lt=0;lt<2;++lt){var F=(Z+1+lt)%3,H=(Z+1+(lt^1))%3;this.gridEnable[F]&&this._lines.drawGrid(F,H,this.bounds,at,this.gridColor[F],this.gridWidth[F]*this.pixelRatio)}for(var lt=0;lt<2;++lt){var F=(Z+1+lt)%3,H=(Z+1+(lt^1))%3;this.zeroEnable[H]&&Math.min(M[0][H],M[1][H])<=0&&Math.max(M[0][H],M[1][H])>=0&&this._lines.drawZero(F,H,this.bounds,at,this.zeroLineColor[H],this.zeroLineWidth[H]*this.pixelRatio)}}for(var Z=0;Z<3;++Z){this.lineEnable[Z]&&this._lines.drawAxisLine(Z,this.bounds,X[Z].primalOffset,this.lineColor[Z],this.lineWidth[Z]*this.pixelRatio),this.lineMirror[Z]&&this._lines.drawAxisLine(Z,this.bounds,X[Z].mirrorOffset,this.lineColor[Z],this.lineWidth[Z]*this.pixelRatio);for(var et=s(c,X[Z].primalMinor),q=s(A,X[Z].mirrorMinor),W=this.lineTickLength,lt=0;lt<3;++lt){var K=tt/h[5*lt];et[lt]*=W[lt]*K,q[lt]*=W[lt]*K}this.lineTickEnable[Z]&&this._lines.drawAxisTicks(Z,X[Z].primalOffset,et,this.lineTickColor[Z],this.lineTickWidth[Z]*this.pixelRatio),this.lineTickMirror[Z]&&this._lines.drawAxisTicks(Z,X[Z].mirrorOffset,q,this.lineTickColor[Z],this.lineTickWidth[Z]*this.pixelRatio)}this._lines.unbind(),this._text.bind(h,D,S,this.pixelRatio);var nt,it=.5,ot,ct;function bt(zt){ct=[0,0,0],ct[zt]=1}function ut(zt,Rt,Gt){var wt=(zt+1)%3,It=(zt+2)%3,$t=Rt[wt],Qt=Rt[It],Nt=Gt[wt],Pt=Gt[It];if($t>0&&Pt>0){bt(wt);return}else if($t>0&&Pt<0){bt(wt);return}else if($t<0&&Pt>0){bt(wt);return}else if($t<0&&Pt<0){bt(wt);return}else if(Qt>0&&Nt>0){bt(It);return}else if(Qt>0&&Nt<0){bt(It);return}else if(Qt<0&&Nt>0){bt(It);return}else if(Qt<0&&Nt<0){bt(It);return}}for(var Z=0;Z<3;++Z){for(var pt=X[Z].primalMinor,yt=X[Z].mirrorMinor,Tt=s(k,X[Z].primalOffset),lt=0;lt<3;++lt)this.lineTickEnable[Z]&&(Tt[lt]+=tt*pt[lt]*Math.max(this.lineTickLength[lt],0)/h[5*lt]);var kt=[0,0,0];if(kt[Z]=1,this.tickEnable[Z]){this.tickAngle[Z]===-3600?(this.tickAngle[Z]=0,this.tickAlign[Z]="auto"):this.tickAlign[Z]=-1,ot=1,nt=[this.tickAlign[Z],it,ot],nt[0]==="auto"?nt[0]=T:nt[0]=parseInt(""+nt[0]),ct=[0,0,0],ut(Z,pt,yt);for(var lt=0;lt<3;++lt)Tt[lt]+=tt*pt[lt]*this.tickPad[lt]/h[5*lt];this._text.drawTicks(Z,this.tickSize[Z],this.tickAngle[Z],Tt,this.tickColor[Z],kt,ct,nt)}if(this.labelEnable[Z]){ot=0,ct=[0,0,0],this.labels[Z].length>4&&(bt(Z),ot=1),nt=[this.labelAlign[Z],it,ot],nt[0]==="auto"?nt[0]=T:nt[0]=parseInt(""+nt[0]);for(var lt=0;lt<3;++lt)Tt[lt]+=tt*pt[lt]*this.labelPad[lt]/h[5*lt];Tt[Z]+=.5*(M[0][Z]+M[1][Z]),this._text.drawLabel(Z,this.labelSize[Z],this.labelAngle[Z],Tt,this.labelColor[Z],[0,0,0],ct,nt)}}this._text.unbind()},y.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null};function p(w,h){var D=new o(w);return D.update(h),D}},{"./lib/background.js":71,"./lib/cube.js":72,"./lib/lines.js":73,"./lib/text.js":75,"./lib/ticks.js":76}],71:[function(l,m,x){m.exports=d;var t=l("gl-buffer"),a=l("gl-vao"),i=l("./shaders").bg;function r(s,o,y,g){this.gl=s,this.buffer=o,this.vao=y,this.shader=g}var n=r.prototype;n.draw=function(s,o,y,g,b,v){for(var _=!1,u=0;u<3;++u)_=_||b[u];if(!!_){var T=this.gl;T.enable(T.POLYGON_OFFSET_FILL),T.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:s,view:o,projection:y,bounds:g,enable:b,colors:v},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),T.disable(T.POLYGON_OFFSET_FILL)}},n.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()};function d(s){for(var o=[],y=[],g=0,b=0;b<3;++b)for(var v=(b+1)%3,_=(b+2)%3,u=[0,0,0],T=[0,0,0],c=-1;c<=1;c+=2){y.push(g,g+2,g+1,g+1,g+2,g+3),u[b]=c,T[b]=c;for(var A=-1;A<=1;A+=2){u[v]=A;for(var k=-1;k<=1;k+=2)u[_]=k,o.push(u[0],u[1],u[2],T[0],T[1],T[2]),g+=1}var p=v;v=_,_=p}var w=t(s,new Float32Array(o)),h=t(s,new Uint16Array(y),s.ELEMENT_ARRAY_BUFFER),D=a(s,[{buffer:w,type:s.FLOAT,size:3,offset:0,stride:24},{buffer:w,type:s.FLOAT,size:3,offset:12,stride:24}],h),S=i(s);return S.attributes.position.location=0,S.attributes.normal.location=1,new r(s,w,D,S)}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],72:[function(l,m,x){m.exports=c;var t=l("bit-twiddle"),a=l("gl-mat4/multiply"),i=l("split-polygon"),r=l("robust-orientation"),n=new Array(16),d=new Array(8),s=new Array(8),o=new Array(3),y=[0,0,0];(function(){for(var A=0;A<8;++A)d[A]=[1,1,1,1],s[A]=[1,1,1]})();function g(A,k,p){for(var w=0;w<4;++w){A[w]=p[12+w];for(var h=0;h<3;++h)A[w]+=k[h]*p[4*h+w]}}var b=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function v(A){for(var k=0;k<b.length;++k)if(A=i.positive(A,b[k]),A.length<3)return 0;for(var p=A[0],w=p[0]/p[3],h=p[1]/p[3],D=0,k=1;k+1<A.length;++k){var S=A[k],M=A[k+1],L=S[0]/S[3],R=S[1]/S[3],z=M[0]/M[3],P=M[1]/M[3],I=L-w,U=R-h,O=z-w,G=P-h;D+=Math.abs(I*G-U*O)}return D}var _=[1,1,1],u=[0,0,0],T={cubeEdges:_,axis:u};function c(A,k,p,w,h){a(n,k,A),a(n,p,n);for(var D=0,S=0;S<2;++S){o[2]=w[S][2];for(var M=0;M<2;++M){o[1]=w[M][1];for(var L=0;L<2;++L)o[0]=w[L][0],g(d[D],o,n),D+=1}}for(var R=-1,S=0;S<8;++S){for(var z=d[S][3],P=0;P<3;++P)s[S][P]=d[S][P]/z;h&&(s[S][2]*=-1),z<0&&(R<0||s[S][2]<s[R][2])&&(R=S)}if(R<0){R=0;for(var I=0;I<3;++I){for(var U=(I+2)%3,O=(I+1)%3,G=-1,$=-1,tt=0;tt<2;++tt){var Z=tt<<I,X=Z+(tt<<U)+(1-tt<<O),J=Z+(1-tt<<U)+(tt<<O);r(s[Z],s[X],s[J],y)<0||(tt?G=1:$=1)}if(G<0||$<0){$>G&&(R|=1<<I);continue}for(var tt=0;tt<2;++tt){var Z=tt<<I,X=Z+(tt<<U)+(1-tt<<O),J=Z+(1-tt<<U)+(tt<<O),st=v([d[Z],d[X],d[J],d[Z+(1<<U)+(1<<O)]]);tt?G=st:$=st}if($>G){R|=1<<I;continue}}}for(var at=7^R,lt=-1,S=0;S<8;++S)S===R||S===at||(lt<0||s[lt][1]>s[S][1])&&(lt=S);for(var F=-1,S=0;S<3;++S){var H=lt^1<<S;if(!(H===R||H===at)){F<0&&(F=H);var O=s[H];O[0]<s[F][0]&&(F=H)}}for(var et=-1,S=0;S<3;++S){var H=lt^1<<S;if(!(H===R||H===at||H===F)){et<0&&(et=H);var O=s[H];O[0]>s[et][0]&&(et=H)}}var q=_;q[0]=q[1]=q[2]=0,q[t.log2(F^lt)]=lt&F,q[t.log2(lt^et)]=lt&et;var W=et^7;W===R||W===at?(W=F^7,q[t.log2(et^W)]=W&et):q[t.log2(F^W)]=W&F;for(var K=u,nt=R,I=0;I<3;++I)nt&1<<I?K[I]=-1:K[I]=1;return T}},{"bit-twiddle":32,"gl-mat4/multiply":100,"robust-orientation":284,"split-polygon":300}],73:[function(l,m,x){m.exports=_;var t=l("gl-buffer"),a=l("gl-vao"),i=l("./shaders").line,r=[0,0,0],n=[0,0,0],d=[0,0,0],s=[0,0,0],o=[1,1];function y(u){return u[0]=u[1]=u[2]=0,u}function g(u,T){return u[0]=T[0],u[1]=T[1],u[2]=T[2],u}function b(u,T,c,A,k,p,w,h){this.gl=u,this.vertBuffer=T,this.vao=c,this.shader=A,this.tickCount=k,this.tickOffset=p,this.gridCount=w,this.gridOffset=h}var v=b.prototype;v.bind=function(u,T,c){this.shader.bind(),this.shader.uniforms.model=u,this.shader.uniforms.view=T,this.shader.uniforms.projection=c,o[0]=this.gl.drawingBufferWidth,o[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=o,this.vao.bind()},v.unbind=function(){this.vao.unbind()},v.drawAxisLine=function(u,T,c,A,k){var p=y(n);this.shader.uniforms.majorAxis=n,p[u]=T[1][u]-T[0][u],this.shader.uniforms.minorAxis=p;var w=g(s,c);w[u]+=T[0][u],this.shader.uniforms.offset=w,this.shader.uniforms.lineWidth=k,this.shader.uniforms.color=A;var h=y(d);h[(u+2)%3]=1,this.shader.uniforms.screenAxis=h,this.vao.draw(this.gl.TRIANGLES,6);var h=y(d);h[(u+1)%3]=1,this.shader.uniforms.screenAxis=h,this.vao.draw(this.gl.TRIANGLES,6)},v.drawAxisTicks=function(u,T,c,A,k){if(!!this.tickCount[u]){var p=y(r);p[u]=1,this.shader.uniforms.majorAxis=p,this.shader.uniforms.offset=T,this.shader.uniforms.minorAxis=c,this.shader.uniforms.color=A,this.shader.uniforms.lineWidth=k;var w=y(d);w[u]=1,this.shader.uniforms.screenAxis=w,this.vao.draw(this.gl.TRIANGLES,this.tickCount[u],this.tickOffset[u])}},v.drawGrid=function(u,T,c,A,k,p){if(!!this.gridCount[u]){var w=y(n);w[T]=c[1][T]-c[0][T],this.shader.uniforms.minorAxis=w;var h=g(s,A);h[T]+=c[0][T],this.shader.uniforms.offset=h;var D=y(r);D[u]=1,this.shader.uniforms.majorAxis=D;var S=y(d);S[u]=1,this.shader.uniforms.screenAxis=S,this.shader.uniforms.lineWidth=p,this.shader.uniforms.color=k,this.vao.draw(this.gl.TRIANGLES,this.gridCount[u],this.gridOffset[u])}},v.drawZero=function(u,T,c,A,k,p){var w=y(n);this.shader.uniforms.majorAxis=w,w[u]=c[1][u]-c[0][u],this.shader.uniforms.minorAxis=w;var h=g(s,A);h[u]+=c[0][u],this.shader.uniforms.offset=h;var D=y(d);D[T]=1,this.shader.uniforms.screenAxis=D,this.shader.uniforms.lineWidth=p,this.shader.uniforms.color=k,this.vao.draw(this.gl.TRIANGLES,6)},v.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()};function _(u,T,c){var A=[],k=[0,0,0],p=[0,0,0],w=[0,0,0],h=[0,0,0];A.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var D=0;D<3;++D){for(var L=A.length/3|0,S=0;S<c[D].length;++S){var M=+c[D][S].x;A.push(M,0,1,M,1,1,M,0,-1,M,0,-1,M,1,1,M,1,-1)}var z=A.length/3|0;k[D]=L,p[D]=z-L;for(var L=A.length/3|0,R=0;R<c[D].length;++R){var M=+c[D][R].x;A.push(M,0,1,M,1,1,M,0,-1,M,0,-1,M,1,1,M,1,-1)}var z=A.length/3|0;w[D]=L,h[D]=z-L}var P=t(u,new Float32Array(A)),I=a(u,[{buffer:P,type:u.FLOAT,size:3,stride:0,offset:0}]),U=i(u);return U.attributes.position.location=0,new b(u,P,I,U,p,k,h,w)}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],74:[function(l,m,x){var t=l("glslify"),a=l("gl-shader"),i=t([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, majorAxis, minorAxis, screenAxis;
uniform float lineWidth;
uniform vec2 screenShape;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

void main() {
  vec3 major = position.x * majorAxis;
  vec3 minor = position.y * minorAxis;

  vec3 vPosition = major + minor + offset;
  vec3 pPosition = project(vPosition);
  vec3 offset = project(vPosition + screenAxis * position.z);

  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;

  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);
}
`]),r=t([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);x.line=function(y){return a(y,i,r,null,[{name:"position",type:"vec3"}])};var n=t([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, axis, alignDir, alignOpt;
uniform float scale, angle, pixelScale;
uniform vec2 resolution;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

float computeViewAngle(vec3 a, vec3 b) {
  vec3 A = project(a);
  vec3 B = project(b);

  return atan(
    (B.y - A.y) * resolution.y,
    (B.x - A.x) * resolution.x
  );
}

const float PI = 3.141592;
const float TWO_PI = 2.0 * PI;
const float HALF_PI = 0.5 * PI;
const float ONE_AND_HALF_PI = 1.5 * PI;

int option = int(floor(alignOpt.x + 0.001));
float hv_ratio =       alignOpt.y;
bool enableAlign =    (alignOpt.z != 0.0);

float mod_angle(float a) {
  return mod(a, PI);
}

float positive_angle(float a) {
  return mod_angle((a < 0.0) ?
    a + TWO_PI :
    a
  );
}

float look_upwards(float a) {
  float b = positive_angle(a);
  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?
    b - PI :
    b;
}

float look_horizontal_or_vertical(float a, float ratio) {
  // ratio controls the ratio between being horizontal to (vertical + horizontal)
  // if ratio is set to 0.5 then it is 50%, 50%.
  // when using a higher ratio e.g. 0.75 the result would
  // likely be more horizontal than vertical.

  float b = positive_angle(a);

  return
    (b < (      ratio) * HALF_PI) ? 0.0 :
    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :
    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :
    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :
                                    0.0;
}

float roundTo(float a, float b) {
  return float(b * floor((a + 0.5 * b) / b));
}

float look_round_n_directions(float a, int n) {
  float b = positive_angle(a);
  float div = TWO_PI / float(n);
  float c = roundTo(b, div);
  return look_upwards(c);
}

float applyAlignOption(float rawAngle, float delta) {
  return
    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions
    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical
    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis
    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards
    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal
                    rawAngle;                // otherwise return back raw input angle
}

bool isAxisTitle = (axis.x == 0.0) &&
                   (axis.y == 0.0) &&
                   (axis.z == 0.0);

void main() {
  //Compute world offset
  float axisDistance = position.z;
  vec3 dataPosition = axisDistance * axis + offset;

  float beta = angle; // i.e. user defined attributes for each tick

  float axisAngle;
  float clipAngle;
  float flip;

  if (enableAlign) {
    axisAngle = (isAxisTitle) ? HALF_PI :
                      computeViewAngle(dataPosition, dataPosition + axis);
    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);

    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;
    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;

    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),
                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;

    beta += applyAlignOption(clipAngle, flip * PI);
  }

  //Compute plane offset
  vec2 planeCoord = position.xy * pixelScale;

  mat2 planeXform = scale * mat2(
     cos(beta), sin(beta),
    -sin(beta), cos(beta)
  );

  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;

  //Compute clip position
  vec3 clipPosition = project(dataPosition);

  //Apply text offset in clip coordinates
  clipPosition += vec3(viewOffset, 0.0);

  //Done
  gl_Position = vec4(clipPosition, 1.0);
}`]),d=t([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);x.text=function(y){return a(y,n,d,null,[{name:"position",type:"vec3"}])};var s=t([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec3 normal;

uniform mat4 model, view, projection;
uniform vec3 enable;
uniform vec3 bounds[2];

varying vec3 colorChannel;

void main() {

  vec3 signAxis = sign(bounds[1] - bounds[0]);

  vec3 realNormal = signAxis * normal;

  if(dot(realNormal, enable) > 0.0) {
    vec3 minRange = min(bounds[0], bounds[1]);
    vec3 maxRange = max(bounds[0], bounds[1]);
    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));
    gl_Position = projection * view * model * vec4(nPosition, 1.0);
  } else {
    gl_Position = vec4(0,0,0,0);
  }

  colorChannel = abs(realNormal);
}`]),o=t([`precision highp float;
#define GLSLIFY 1

uniform vec4 colors[3];

varying vec3 colorChannel;

void main() {
  gl_FragColor = colorChannel.x * colors[0] +
                 colorChannel.y * colors[1] +
                 colorChannel.z * colors[2];
}`]);x.bg=function(y){return a(y,s,o,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},{"gl-shader":132,glslify:231}],75:[function(l,m,x){(function(t){(function(){m.exports=_;var a=l("gl-buffer"),i=l("gl-vao"),r=l("vectorize-text"),n=l("./shaders").text,d=window||t.global||{},s=d.__TEXT_CACHE||{};d.__TEXT_CACHE={};var o=3;function y(u,T,c,A){this.gl=u,this.shader=T,this.buffer=c,this.vao=A,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}var g=y.prototype,b=[0,0];g.bind=function(u,T,c,A){this.vao.bind(),this.shader.bind();var k=this.shader.uniforms;k.model=u,k.view=T,k.projection=c,k.pixelScale=A,b[0]=this.gl.drawingBufferWidth,b[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=b},g.unbind=function(){this.vao.unbind()},g.update=function(u,T,c,A,k){var p=[];function w(I,U,O,G,$,tt){var Z=s[O];Z||(Z=s[O]={});var X=Z[U];X||(X=Z[U]=v(U,{triangles:!0,font:O,textAlign:"center",textBaseline:"middle",lineSpacing:$,styletags:tt}));for(var J=(G||12)/12,st=X.positions,at=X.cells,lt=0,F=at.length;lt<F;++lt)for(var H=at[lt],et=2;et>=0;--et){var q=st[H[et]];p.push(J*q[0],-J*q[1],I)}}for(var h=[0,0,0],D=[0,0,0],S=[0,0,0],M=[0,0,0],L=1.25,R={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},z=0;z<3;++z){S[z]=p.length/o|0,w(.5*(u[0][z]+u[1][z]),T[z],c[z],12,L,R),M[z]=(p.length/o|0)-S[z],h[z]=p.length/o|0;for(var P=0;P<A[z].length;++P)!A[z][P].text||w(A[z][P].x,A[z][P].text,A[z][P].font||k,A[z][P].fontSize||12,L,R);D[z]=(p.length/o|0)-h[z]}this.buffer.update(p),this.tickOffset=h,this.tickCount=D,this.labelOffset=S,this.labelCount=M},g.drawTicks=function(u,T,c,A,k,p,w,h){!this.tickCount[u]||(this.shader.uniforms.axis=p,this.shader.uniforms.color=k,this.shader.uniforms.angle=c,this.shader.uniforms.scale=T,this.shader.uniforms.offset=A,this.shader.uniforms.alignDir=w,this.shader.uniforms.alignOpt=h,this.vao.draw(this.gl.TRIANGLES,this.tickCount[u],this.tickOffset[u]))},g.drawLabel=function(u,T,c,A,k,p,w,h){!this.labelCount[u]||(this.shader.uniforms.axis=p,this.shader.uniforms.color=k,this.shader.uniforms.angle=c,this.shader.uniforms.scale=T,this.shader.uniforms.offset=A,this.shader.uniforms.alignDir=w,this.shader.uniforms.alignOpt=h,this.vao.draw(this.gl.TRIANGLES,this.labelCount[u],this.labelOffset[u]))},g.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()};function v(u,T){try{return r(u,T)}catch(c){return console.warn('error vectorizing text:"'+u+'" error:',c),{cells:[],positions:[]}}}function _(u,T,c,A,k,p){var w=a(u),h=i(u,[{buffer:w,size:3}]),D=n(u);D.attributes.position.location=0;var S=new y(u,D,w,h);return S.update(T,c,A,k,p),S}}).call(this)}).call(this,l("_process"))},{"./shaders":74,_process:5,"gl-buffer":78,"gl-vao":150,"vectorize-text":311}],76:[function(l,m,x){x.create=a,x.equal=i;function t(r,n){var d=r+"",s=d.indexOf("."),o=0;s>=0&&(o=d.length-s-1);var y=Math.pow(10,o),g=Math.round(r*n*y),b=g+"";if(b.indexOf("e")>=0)return b;var v=g/y,_=g%y;g<0?(v=-Math.ceil(v)|0,_=-_|0):(v=Math.floor(v)|0,_=_|0);var u=""+v;if(g<0&&(u="-"+u),o){for(var T=""+_;T.length<o;)T="0"+T;return u+"."+T}else return u}function a(r,n){for(var d=[],s=0;s<3;++s){var o=[];.5*(r[0][s]+r[1][s]);for(var y=0;y*n[s]<=r[1][s];++y)o.push({x:y*n[s],text:t(n[s],y)});for(var y=-1;y*n[s]>=r[0][s];--y)o.push({x:y*n[s],text:t(n[s],y)});d.push(o)}return d}function i(r,n){for(var d=0;d<3;++d){if(r[d].length!==n[d].length)return!1;for(var s=0;s<r[d].length;++s){var o=r[d][s],y=n[d][s];if(o.x!==y.x||o.text!==y.text||o.font!==y.font||o.fontColor!==y.fontColor||o.fontSize!==y.fontSize||o.dx!==y.dx||o.dy!==y.dy)return!1}}return!0}},{}],77:[function(l,m,x){m.exports=T;var t=l("extract-frustum-planes"),a=l("split-polygon"),i=l("./lib/cube.js"),r=l("gl-mat4/multiply"),n=l("gl-mat4/transpose"),d=l("gl-vec4/transformMat4"),s=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),o=new Float32Array(16);function y(c,A,k){this.lo=c,this.hi=A,this.pixelsPerDataUnit=k}var g=[0,0,0,1],b=[0,0,0,1];function v(c,A,k,p,w){for(var h=0;h<3;++h){for(var D=g,S=b,M=0;M<3;++M)S[M]=D[M]=k[M];S[3]=D[3]=1,S[h]+=1,d(S,S,A),S[3]<0&&(c[h]=1/0),D[h]-=1,d(D,D,A),D[3]<0&&(c[h]=1/0);var L=(D[0]/D[3]-S[0]/S[3])*p,R=(D[1]/D[3]-S[1]/S[3])*w;c[h]=.25*Math.sqrt(L*L+R*R)}return c}var _=[new y(1/0,-1/0,1/0),new y(1/0,-1/0,1/0),new y(1/0,-1/0,1/0)],u=[0,0,0];function T(c,A,k,p,R){var h=A.model||s,D=A.view||s,S=A.projection||s,M=A._ortho||!1,L=c.bounds,R=R||i(h,D,S,L,M),z=R.axis;r(o,D,h),r(o,S,o);for(var P=_,I=0;I<3;++I)P[I].lo=1/0,P[I].hi=-1/0,P[I].pixelsPerDataUnit=1/0;var U=t(n(o,o));n(o,o);for(var O=0;O<3;++O){var G=(O+1)%3,$=(O+2)%3,tt=u;t:for(var I=0;I<2;++I){var Z=[];if(z[O]<0!=!!I){tt[O]=L[I][O];for(var X=0;X<2;++X){tt[G]=L[X^I][G];for(var J=0;J<2;++J)tt[$]=L[J^X^I][$],Z.push(tt.slice())}for(var st=M?5:4,X=st;X===st;++X){if(Z.length===0)continue t;Z=a.positive(Z,U[X])}for(var X=0;X<Z.length;++X)for(var $=Z[X],at=v(u,o,$,k,p),J=0;J<3;++J)P[J].lo=Math.min(P[J].lo,$[J]),P[J].hi=Math.max(P[J].hi,$[J]),J!==O&&(P[J].pixelsPerDataUnit=Math.min(P[J].pixelsPerDataUnit,Math.abs(at[J])))}}}return P}},{"./lib/cube.js":72,"extract-frustum-planes":67,"gl-mat4/multiply":100,"gl-mat4/transpose":109,"gl-vec4/transformMat4":221,"split-polygon":300}],78:[function(l,m,x){var t=l("typedarray-pool"),a=l("ndarray-ops"),i=l("ndarray"),r=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function n(b,v,_,u,T){this.gl=b,this.type=v,this.handle=_,this.length=u,this.usage=T}var d=n.prototype;d.bind=function(){this.gl.bindBuffer(this.type,this.handle)},d.unbind=function(){this.gl.bindBuffer(this.type,null)},d.dispose=function(){this.gl.deleteBuffer(this.handle)};function s(b,v,_,u,T,c){var A=T.length*T.BYTES_PER_ELEMENT;if(c<0)return b.bufferData(v,T,u),A;if(A+c>_)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return b.bufferSubData(v,c,T),_}function o(b,v){for(var _=t.malloc(b.length,v),u=b.length,T=0;T<u;++T)_[T]=b[T];return _}function y(b,v){for(var _=1,u=v.length-1;u>=0;--u){if(v[u]!==_)return!1;_*=b[u]}return!0}d.update=function(b,v){if(typeof v!="number"&&(v=-1),this.bind(),typeof b=="object"&&typeof b.shape<"u"){var _=b.dtype;if(r.indexOf(_)<0&&(_="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER){var u=gl.getExtension("OES_element_index_uint");u&&_!=="uint16"?_="uint32":_="uint16"}if(_===b.dtype&&y(b.shape,b.stride))b.offset===0&&b.data.length===b.shape[0]?this.length=s(this.gl,this.type,this.length,this.usage,b.data,v):this.length=s(this.gl,this.type,this.length,this.usage,b.data.subarray(b.offset,b.shape[0]),v);else{var T=t.malloc(b.size,_),c=i(T,b.shape);a.assign(c,b),v<0?this.length=s(this.gl,this.type,this.length,this.usage,T,v):this.length=s(this.gl,this.type,this.length,this.usage,T.subarray(0,b.size),v),t.free(T)}}else if(Array.isArray(b)){var A;this.type===this.gl.ELEMENT_ARRAY_BUFFER?A=o(b,"uint16"):A=o(b,"float32"),v<0?this.length=s(this.gl,this.type,this.length,this.usage,A,v):this.length=s(this.gl,this.type,this.length,this.usage,A.subarray(0,b.length),v),t.free(A)}else if(typeof b=="object"&&typeof b.length=="number")this.length=s(this.gl,this.type,this.length,this.usage,b,v);else if(typeof b=="number"||b===void 0){if(v>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");b=b|0,b<=0&&(b=1),this.gl.bufferData(this.type,b|0,this.usage),this.length=b}else throw new Error("gl-buffer: Invalid data type")};function g(b,v,_,u){if(_=_||b.ARRAY_BUFFER,u=u||b.DYNAMIC_DRAW,_!==b.ARRAY_BUFFER&&_!==b.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(u!==b.DYNAMIC_DRAW&&u!==b.STATIC_DRAW&&u!==b.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var T=b.createBuffer(),c=new n(b,_,T,0,u);return c.update(v),c}m.exports=g},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],79:[function(l,m,x){var t=l("gl-vec3");m.exports=function(i,r){var n=i.positions,d=i.vectors,s={positions:[],vertexIntensity:[],vertexIntensityBounds:i.vertexIntensityBounds,vectors:[],cells:[],coneOffset:i.coneOffset,colormap:i.colormap};if(i.positions.length===0)return r&&(r[0]=[0,0,0],r[1]=[0,0,0]),s;for(var o=0,y=1/0,g=-1/0,b=1/0,v=-1/0,_=1/0,u=-1/0,T=null,c=null,A=[],k=1/0,p=!1,w=0;w<n.length;w++){var h=n[w];y=Math.min(h[0],y),g=Math.max(h[0],g),b=Math.min(h[1],b),v=Math.max(h[1],v),_=Math.min(h[2],_),u=Math.max(h[2],u);var D=d[w];if(t.length(D)>o&&(o=t.length(D)),w){var S=2*t.distance(T,h)/(t.length(c)+t.length(D));S?(k=Math.min(k,S),p=!1):p=!0}p||(T=h,c=D),A.push(D)}var M=[y,b,_],L=[g,v,u];r&&(r[0]=M,r[1]=L),o===0&&(o=1);var R=1/o;isFinite(k)||(k=1),s.vectorScale=k;var z=i.coneSize||.5;i.absoluteConeSize&&(z=i.absoluteConeSize*R),s.coneScale=z;for(var w=0,P=0;w<n.length;w++)for(var h=n[w],I=h[0],U=h[1],O=h[2],G=A[w],$=t.length(G)*R,tt=0,Z=8;tt<Z;tt++){s.positions.push([I,U,O,P++]),s.positions.push([I,U,O,P++]),s.positions.push([I,U,O,P++]),s.positions.push([I,U,O,P++]),s.positions.push([I,U,O,P++]),s.positions.push([I,U,O,P++]),s.vectors.push(G),s.vectors.push(G),s.vectors.push(G),s.vectors.push(G),s.vectors.push(G),s.vectors.push(G),s.vertexIntensity.push($,$,$),s.vertexIntensity.push($,$,$);var X=s.positions.length;s.cells.push([X-6,X-5,X-4],[X-3,X-2,X-1])}return s};var a=l("./lib/shaders");m.exports.createMesh=l("./create_mesh"),m.exports.createConeMesh=function(i,r){return m.exports.createMesh(i,r,{shaders:a,traceType:"cone"})}},{"./create_mesh":80,"./lib/shaders":81,"gl-vec3":169}],80:[function(l,m,x){var t=l("gl-shader"),a=l("gl-buffer"),i=l("gl-vao"),r=l("gl-texture2d"),n=l("gl-mat4/multiply"),d=l("gl-mat4/invert"),s=l("ndarray"),o=l("colormap"),y=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function g(A,k,p,w,h,D,S,M,L,R,z){this.gl=A,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=k,this.dirty=!0,this.triShader=p,this.pickShader=w,this.trianglePositions=h,this.triangleVectors=D,this.triangleColors=M,this.triangleUVs=L,this.triangleIds=S,this.triangleVAO=R,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=z,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=y,this._view=y,this._projection=y,this._resolution=[1,1]}var b=g.prototype;b.isOpaque=function(){return this.opacity>=1},b.isTransparent=function(){return this.opacity<1},b.pickSlots=1,b.setPickBase=function(A){this.pickId=A};function v(A){for(var k=o({colormap:A,nshades:256,format:"rgba"}),p=new Uint8Array(256*4),w=0;w<256;++w){for(var h=k[w],D=0;D<3;++D)p[4*w+D]=h[D];p[4*w+3]=h[3]*255}return s(p,[256,256,4],[4,0,1])}function _(A){for(var k=A.length,p=new Array(k),w=0;w<k;++w)p[w]=A[w][2];return p}b.update=function(A){A=A||{};var k=this.gl;this.dirty=!0,"lightPosition"in A&&(this.lightPosition=A.lightPosition),"opacity"in A&&(this.opacity=A.opacity),"ambient"in A&&(this.ambientLight=A.ambient),"diffuse"in A&&(this.diffuseLight=A.diffuse),"specular"in A&&(this.specularLight=A.specular),"roughness"in A&&(this.roughness=A.roughness),"fresnel"in A&&(this.fresnel=A.fresnel),A.tubeScale!==void 0&&(this.tubeScale=A.tubeScale),A.vectorScale!==void 0&&(this.vectorScale=A.vectorScale),A.coneScale!==void 0&&(this.coneScale=A.coneScale),A.coneOffset!==void 0&&(this.coneOffset=A.coneOffset),A.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=k.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=k.LINEAR,this.texture.setPixels(v(A.colormap)),this.texture.generateMipmap());var p=A.cells,w=A.positions,h=A.vectors;if(!w||!p||!h)return;var D=[],S=[],M=[],L=[],R=[];this.cells=p,this.positions=w,this.vectors=h;var z=A.meshColor||[1,1,1,1],P=A.vertexIntensity,I=1/0,U=-1/0;if(P)if(A.vertexIntensityBounds)I=+A.vertexIntensityBounds[0],U=+A.vertexIntensityBounds[1];else for(var O=0;O<P.length;++O){var G=P[O];I=Math.min(I,G),U=Math.max(U,G)}else for(var O=0;O<w.length;++O){var G=w[O][2];I=Math.min(I,G),U=Math.max(U,G)}P?this.intensity=P:this.intensity=_(w),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var O=0;O<w.length;++O)for(var $=w[O],tt=0;tt<3;++tt)isNaN($[tt])||!isFinite($[tt])||(this.bounds[0][tt]=Math.min(this.bounds[0][tt],$[tt]),this.bounds[1][tt]=Math.max(this.bounds[1][tt],$[tt]));var Z=0;t:for(var O=0;O<p.length;++O){var X=p[O];switch(X.length){case 3:for(var tt=0;tt<3;++tt)for(var J=X[tt],$=w[J],st=0;st<3;++st)if(isNaN($[st])||!isFinite($[st]))continue t;for(var tt=0;tt<3;++tt){var J=X[2-tt],$=w[J];D.push($[0],$[1],$[2],$[3]);var at=h[J];S.push(at[0],at[1],at[2],at[3]||0);var lt=z;lt.length===3?M.push(lt[0],lt[1],lt[2],1):M.push(lt[0],lt[1],lt[2],lt[3]);var F;P?F=[(P[J]-I)/(U-I),0]:F=[($[2]-I)/(U-I),0],L.push(F[0],F[1]),R.push(O)}Z+=1;break}}this.triangleCount=Z,this.trianglePositions.update(D),this.triangleVectors.update(S),this.triangleColors.update(M),this.triangleUVs.update(L),this.triangleIds.update(new Uint32Array(R))},b.drawTransparent=b.draw=function(A){A=A||{};for(var k=this.gl,p=A.model||y,w=A.view||y,h=A.projection||y,D=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],S=0;S<3;++S)D[0][S]=Math.max(D[0][S],this.clipBounds[0][S]),D[1][S]=Math.min(D[1][S],this.clipBounds[1][S]);var M={model:p,view:w,projection:h,inverseModel:y.slice(),clipBounds:D,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};M.inverseModel=d(M.inverseModel,M.model),k.disable(k.CULL_FACE),this.texture.bind(0);var L=new Array(16);n(L,M.view,M.model),n(L,M.projection,L),d(L,L);for(var S=0;S<3;++S)M.eyePosition[S]=L[12+S]/L[15];for(var R=L[15],S=0;S<3;++S)R+=this.lightPosition[S]*L[4*S+3];for(var S=0;S<3;++S){for(var z=L[12+S],P=0;P<3;++P)z+=L[4*P+S]*this.lightPosition[P];M.lightPosition[S]=z/R}if(this.triangleCount>0){var I=this.triShader;I.bind(),I.uniforms=M,this.triangleVAO.bind(),k.drawArrays(k.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()}},b.drawPick=function(A){A=A||{};for(var k=this.gl,p=A.model||y,w=A.view||y,h=A.projection||y,D=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],S=0;S<3;++S)D[0][S]=Math.max(D[0][S],this.clipBounds[0][S]),D[1][S]=Math.min(D[1][S],this.clipBounds[1][S]);this._model=[].slice.call(p),this._view=[].slice.call(w),this._projection=[].slice.call(h),this._resolution=[k.drawingBufferWidth,k.drawingBufferHeight];var M={model:p,view:w,projection:h,clipBounds:D,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},L=this.pickShader;L.bind(),L.uniforms=M,this.triangleCount>0&&(this.triangleVAO.bind(),k.drawArrays(k.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind())},b.pick=function(A){if(!A||A.id!==this.pickId)return null;var k=A.value[0]+256*A.value[1]+65536*A.value[2],p=this.cells[k],w=this.positions[p[1]].slice(0,3),h={position:w,dataCoordinate:w,index:Math.floor(p[1]/48)};return this.traceType==="cone"?h.index=Math.floor(p[1]/48):this.traceType==="streamtube"&&(h.intensity=this.intensity[p[1]],h.velocity=this.vectors[p[1]].slice(0,3),h.divergence=this.vectors[p[1]][3],h.index=k),h},b.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()};function u(A,k){var p=t(A,k.meshShader.vertex,k.meshShader.fragment,null,k.meshShader.attributes);return p.attributes.position.location=0,p.attributes.color.location=2,p.attributes.uv.location=3,p.attributes.vector.location=4,p}function T(A,k){var p=t(A,k.pickShader.vertex,k.pickShader.fragment,null,k.pickShader.attributes);return p.attributes.position.location=0,p.attributes.id.location=1,p.attributes.vector.location=4,p}function c(A,k,p){var w=p.shaders;arguments.length===1&&(k=A,A=k.gl);var h=u(A,w),D=T(A,w),S=r(A,s(new Uint8Array([255,255,255,255]),[1,1,4]));S.generateMipmap(),S.minFilter=A.LINEAR_MIPMAP_LINEAR,S.magFilter=A.LINEAR;var M=a(A),L=a(A),R=a(A),z=a(A),P=a(A),I=i(A,[{buffer:M,type:A.FLOAT,size:4},{buffer:P,type:A.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:R,type:A.FLOAT,size:4},{buffer:z,type:A.FLOAT,size:2},{buffer:L,type:A.FLOAT,size:4}]),U=new g(A,S,h,D,M,L,P,R,z,I,p.traceType||"cone");return U.update(k),U}m.exports=c},{colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259}],81:[function(l,m,x){var t=l("glslify"),a=t([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec3 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, coneScale, coneOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * conePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(conePosition, 1.0);
  vec4 t_position  = view * conePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = conePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),i=t([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),r=t([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float vectorScale, coneScale, coneOffset;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);
  gl_Position = projection * view * conePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),n=t([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);x.meshShader={vertex:a,fragment:i,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},x.pickShader={vertex:r,fragment:n,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},{glslify:231}],82:[function(l,m,x){m.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},{}],83:[function(l,m,x){var t=l("./1.0/numbers");m.exports=function(i){return t[i]}},{"./1.0/numbers":82}],84:[function(l,m,x){m.exports=g;var t=l("gl-buffer"),a=l("gl-vao"),i=l("./shaders/index"),r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function n(b,v,_,u){this.gl=b,this.shader=u,this.buffer=v,this.vao=_,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var d=n.prototype;d.isOpaque=function(){return!this.hasAlpha},d.isTransparent=function(){return this.hasAlpha},d.drawTransparent=d.draw=function(b){var v=this.gl,_=this.shader.uniforms;this.shader.bind();var u=_.view=b.view||r,T=_.projection=b.projection||r;_.model=b.model||r,_.clipBounds=this.clipBounds,_.opacity=this.opacity;var c=u[12],A=u[13],k=u[14],p=u[15],w=b._ortho||!1,h=w?2:1,D=h*this.pixelRatio*(T[3]*c+T[7]*A+T[11]*k+T[15]*p)/v.drawingBufferHeight;this.vao.bind();for(var S=0;S<3;++S)v.lineWidth(this.lineWidth[S]*this.pixelRatio),_.capSize=this.capSize[S]*D,this.lineCount[S]&&v.drawArrays(v.LINES,this.lineOffset[S],this.lineCount[S]);this.vao.unbind()};function s(b,v){for(var _=0;_<3;++_)b[0][_]=Math.min(b[0][_],v[_]),b[1][_]=Math.max(b[1][_],v[_])}var o=function(){for(var b=new Array(3),v=0;v<3;++v){for(var _=[],u=1;u<=2;++u)for(var T=-1;T<=1;T+=2){var c=(u+v)%3,A=[0,0,0];A[c]=T,_.push(A)}b[v]=_}return b}();function y(b,v,_,u){for(var T=o[u],c=0;c<T.length;++c){var A=T[c];b.push(v[0],v[1],v[2],_[0],_[1],_[2],_[3],A[0],A[1],A[2])}return T.length}d.update=function(b){b=b||{},"lineWidth"in b&&(this.lineWidth=b.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in b&&(this.capSize=b.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in b&&(this.opacity=+b.opacity,this.opacity<1&&(this.hasAlpha=!0));var v=b.color||[[0,0,0],[0,0,0],[0,0,0]],_=b.position,u=b.error;if(Array.isArray(v[0])||(v=[v,v,v]),_&&u){var T=[],c=_.length,A=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var k=0;k<3;++k){this.lineOffset[k]=A;t:for(var p=0;p<c;++p){for(var w=_[p],h=0;h<3;++h)if(isNaN(w[h])||!isFinite(w[h]))continue t;var D=u[p],S=v[k];if(Array.isArray(S[0])&&(S=v[p]),S.length===3?S=[S[0],S[1],S[2],1]:S.length===4&&(S=[S[0],S[1],S[2],S[3]],!this.hasAlpha&&S[3]<1&&(this.hasAlpha=!0)),!(isNaN(D[0][k])||isNaN(D[1][k]))){if(D[0][k]<0){var M=w.slice();M[k]+=D[0][k],T.push(w[0],w[1],w[2],S[0],S[1],S[2],S[3],0,0,0,M[0],M[1],M[2],S[0],S[1],S[2],S[3],0,0,0),s(this.bounds,M),A+=2+y(T,M,S,k)}if(D[1][k]>0){var M=w.slice();M[k]+=D[1][k],T.push(w[0],w[1],w[2],S[0],S[1],S[2],S[3],0,0,0,M[0],M[1],M[2],S[0],S[1],S[2],S[3],0,0,0),s(this.bounds,M),A+=2+y(T,M,S,k)}}}this.lineCount[k]=A-this.lineOffset[k]}this.buffer.update(T)}},d.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()};function g(b){var v=b.gl,_=t(v),u=a(v,[{buffer:_,type:v.FLOAT,size:3,offset:0,stride:40},{buffer:_,type:v.FLOAT,size:4,offset:12,stride:40},{buffer:_,type:v.FLOAT,size:3,offset:28,stride:40}]),T=i(v);T.attributes.position.location=0,T.attributes.color.location=1,T.attributes.offset.location=2;var c=new n(v,_,u,T);return c.update(b),c}},{"./shaders/index":85,"gl-buffer":78,"gl-vao":150}],85:[function(l,m,x){var t=l("glslify"),a=l("gl-shader"),i=t([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, offset;
attribute vec4 color;
uniform mat4 model, view, projection;
uniform float capSize;
varying vec4 fragColor;
varying vec3 fragPosition;

void main() {
  vec4 worldPosition  = model * vec4(position, 1.0);
  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);
  gl_Position         = projection * view * worldPosition;
  fragColor           = color;
  fragPosition        = position;
}`]),r=t([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float opacity;
varying vec3 fragPosition;
varying vec4 fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  gl_FragColor = opacity * fragColor;
}`]);m.exports=function(n){return a(n,i,r,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},{"gl-shader":132,glslify:231}],86:[function(l,m,x){var t=l("gl-texture2d");m.exports=A;var a=null,i,r,n,d;function s(k){var p=k.getParameter(k.FRAMEBUFFER_BINDING),w=k.getParameter(k.RENDERBUFFER_BINDING),h=k.getParameter(k.TEXTURE_BINDING_2D);return[p,w,h]}function o(k,p){k.bindFramebuffer(k.FRAMEBUFFER,p[0]),k.bindRenderbuffer(k.RENDERBUFFER,p[1]),k.bindTexture(k.TEXTURE_2D,p[2])}function y(k,p){var w=k.getParameter(p.MAX_COLOR_ATTACHMENTS_WEBGL);a=new Array(w+1);for(var h=0;h<=w;++h){for(var D=new Array(w),S=0;S<h;++S)D[S]=k.COLOR_ATTACHMENT0+S;for(var S=h;S<w;++S)D[S]=k.NONE;a[h]=D}}function g(k){switch(k){case i:throw new Error("gl-fbo: Framebuffer unsupported");case r:throw new Error("gl-fbo: Framebuffer incomplete attachment");case n:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case d:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function b(k,p,w,h,D,S){if(!h)return null;var M=t(k,p,w,D,h);return M.magFilter=k.NEAREST,M.minFilter=k.NEAREST,M.mipSamples=1,M.bind(),k.framebufferTexture2D(k.FRAMEBUFFER,S,k.TEXTURE_2D,M.handle,0),M}function v(k,p,w,h,D){var S=k.createRenderbuffer();return k.bindRenderbuffer(k.RENDERBUFFER,S),k.renderbufferStorage(k.RENDERBUFFER,h,p,w),k.framebufferRenderbuffer(k.FRAMEBUFFER,D,k.RENDERBUFFER,S),S}function _(k){var p=s(k.gl),w=k.gl,h=k.handle=w.createFramebuffer(),D=k._shape[0],S=k._shape[1],M=k.color.length,L=k._ext,R=k._useStencil,z=k._useDepth,P=k._colorType;w.bindFramebuffer(w.FRAMEBUFFER,h);for(var I=0;I<M;++I)k.color[I]=b(w,D,S,P,w.RGBA,w.COLOR_ATTACHMENT0+I);M===0?(k._color_rb=v(w,D,S,w.RGBA4,w.COLOR_ATTACHMENT0),L&&L.drawBuffersWEBGL(a[0])):M>1&&L.drawBuffersWEBGL(a[M]);var U=w.getExtension("WEBGL_depth_texture");U?R?k.depth=b(w,D,S,U.UNSIGNED_INT_24_8_WEBGL,w.DEPTH_STENCIL,w.DEPTH_STENCIL_ATTACHMENT):z&&(k.depth=b(w,D,S,w.UNSIGNED_SHORT,w.DEPTH_COMPONENT,w.DEPTH_ATTACHMENT)):z&&R?k._depth_rb=v(w,D,S,w.DEPTH_STENCIL,w.DEPTH_STENCIL_ATTACHMENT):z?k._depth_rb=v(w,D,S,w.DEPTH_COMPONENT16,w.DEPTH_ATTACHMENT):R&&(k._depth_rb=v(w,D,S,w.STENCIL_INDEX,w.STENCIL_ATTACHMENT));var O=w.checkFramebufferStatus(w.FRAMEBUFFER);if(O!==w.FRAMEBUFFER_COMPLETE){k._destroyed=!0,w.bindFramebuffer(w.FRAMEBUFFER,null),w.deleteFramebuffer(k.handle),k.handle=null,k.depth&&(k.depth.dispose(),k.depth=null),k._depth_rb&&(w.deleteRenderbuffer(k._depth_rb),k._depth_rb=null);for(var I=0;I<k.color.length;++I)k.color[I].dispose(),k.color[I]=null;k._color_rb&&(w.deleteRenderbuffer(k._color_rb),k._color_rb=null),o(w,p),g(O)}o(w,p)}function u(k,p,w,h,D,S,M,L){this.gl=k,this._shape=[p|0,w|0],this._destroyed=!1,this._ext=L,this.color=new Array(D);for(var R=0;R<D;++R)this.color[R]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=h,this._useDepth=S,this._useStencil=M;var z=this,P=[p|0,w|0];Object.defineProperties(P,{0:{get:function(){return z._shape[0]},set:function(I){return z.width=I}},1:{get:function(){return z._shape[1]},set:function(I){return z.height=I}}}),this._shapeVector=P,_(this)}var T=u.prototype;function c(k,p,w){if(k._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(!(k._shape[0]===p&&k._shape[1]===w)){var h=k.gl,D=h.getParameter(h.MAX_RENDERBUFFER_SIZE);if(p<0||p>D||w<0||w>D)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");k._shape[0]=p,k._shape[1]=w;for(var S=s(h),M=0;M<k.color.length;++M)k.color[M].shape=k._shape;k._color_rb&&(h.bindRenderbuffer(h.RENDERBUFFER,k._color_rb),h.renderbufferStorage(h.RENDERBUFFER,h.RGBA4,k._shape[0],k._shape[1])),k.depth&&(k.depth.shape=k._shape),k._depth_rb&&(h.bindRenderbuffer(h.RENDERBUFFER,k._depth_rb),k._useDepth&&k._useStencil?h.renderbufferStorage(h.RENDERBUFFER,h.DEPTH_STENCIL,k._shape[0],k._shape[1]):k._useDepth?h.renderbufferStorage(h.RENDERBUFFER,h.DEPTH_COMPONENT16,k._shape[0],k._shape[1]):k._useStencil&&h.renderbufferStorage(h.RENDERBUFFER,h.STENCIL_INDEX,k._shape[0],k._shape[1])),h.bindFramebuffer(h.FRAMEBUFFER,k.handle);var L=h.checkFramebufferStatus(h.FRAMEBUFFER);L!==h.FRAMEBUFFER_COMPLETE&&(k.dispose(),o(h,S),g(L)),o(h,S)}}Object.defineProperties(T,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(k){if(Array.isArray(k)||(k=[k|0,k|0]),k.length!==2)throw new Error("gl-fbo: Shape vector must be length 2");var p=k[0]|0,w=k[1]|0;return c(this,p,w),[p,w]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(k){return k=k|0,c(this,k,this._shape[1]),k},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(k){return k=k|0,c(this,this._shape[0],k),k},enumerable:!1}}),T.bind=function(){if(!this._destroyed){var k=this.gl;k.bindFramebuffer(k.FRAMEBUFFER,this.handle),k.viewport(0,0,this._shape[0],this._shape[1])}},T.dispose=function(){if(!this._destroyed){this._destroyed=!0;var k=this.gl;k.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(k.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var p=0;p<this.color.length;++p)this.color[p].dispose(),this.color[p]=null;this._color_rb&&(k.deleteRenderbuffer(this._color_rb),this._color_rb=null)}};function A(k,p,w,h){i||(i=k.FRAMEBUFFER_UNSUPPORTED,r=k.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,n=k.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,d=k.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var D=k.getExtension("WEBGL_draw_buffers");if(!a&&D&&y(k,D),Array.isArray(p)&&(h=w,w=p[1]|0,p=p[0]|0),typeof p!="number")throw new Error("gl-fbo: Missing shape parameter");var S=k.getParameter(k.MAX_RENDERBUFFER_SIZE);if(p<0||p>S||w<0||w>S)throw new Error("gl-fbo: Parameters are too large for FBO");h=h||{};var M=1;if("color"in h){if(M=Math.max(h.color|0,0),M<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(M>1)if(D){if(M>k.getParameter(D.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+M+" draw buffers")}else throw new Error("gl-fbo: Multiple draw buffer extension not supported")}var L=k.UNSIGNED_BYTE,R=k.getExtension("OES_texture_float");if(h.float&&M>0){if(!R)throw new Error("gl-fbo: Context does not support floating point textures");L=k.FLOAT}else h.preferFloat&&M>0&&R&&(L=k.FLOAT);var z=!0;"depth"in h&&(z=!!h.depth);var P=!1;return"stencil"in h&&(P=!!h.stencil),new u(k,p,w,L,M,z,P,D)}},{"gl-texture2d":146}],87:[function(l,m,x){var t=l("sprintf-js").sprintf,a=l("gl-constants/lookup"),i=l("glsl-shader-name"),r=l("add-line-numbers");m.exports=n;function n(d,s,o){var y=i(s)||"of unknown name (see npm glsl-shader-name)",g="unknown type";o!==void 0&&(g=o===a.FRAGMENT_SHADER?"fragment":"vertex");for(var b=t(`Error compiling %s shader %s:
`,g,y),v=t("%s%s",b,d),_=d.split(`
`),u={},T=0;T<_.length;T++){var c=_[T];if(!(c===""||c==="\0")){var A=parseInt(c.split(":")[2]);if(isNaN(A))throw new Error(t("Could not parse error: %s",c));u[A]=c}}for(var k=r(s).split(`
`),T=0;T<k.length;T++)if(!(!u[T+3]&&!u[T+2]&&!u[T+1])){var p=k[T];if(b+=p+`
`,u[T+1]){var w=u[T+1];w=w.substr(w.split(":",3).join(":").length+1).trim(),b+=t(`^^^ %s

`,w)}}return{long:b.trim(),short:v.trim()}}},{"add-line-numbers":9,"gl-constants/lookup":83,"glsl-shader-name":223,"sprintf-js":301}],88:[function(l,m,x){m.exports=g;var t=l("binary-search-bounds"),a=l("iota-array"),i=l("typedarray-pool"),r=l("gl-shader"),n=l("gl-buffer"),d=l("./lib/shaders");function s(b,v,_,u,T,c,A){this.plot=b,this.shader=v,this.pickShader=_,this.positionBuffer=u,this.weightBuffer=T,this.colorBuffer=c,this.idBuffer=A,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var o=s.prototype,y=[0,0,1,0,0,1,1,0,1,1,0,1];o.draw=function(){var b=[1,0,0,0,1,0,0,0,1];return function(){var v=this.plot,_=this.shader,u=this.bounds,T=this.numVertices;if(!(T<=0)){var c=v.gl,A=v.dataBox,k=u[2]-u[0],p=u[3]-u[1],w=A[2]-A[0],h=A[3]-A[1];b[0]=2*k/w,b[4]=2*p/h,b[6]=2*(u[0]-A[0])/w-1,b[7]=2*(u[1]-A[1])/h-1,_.bind();var D=_.uniforms;D.viewTransform=b,D.shape=this.shape;var S=_.attributes;this.positionBuffer.bind(),S.position.pointer(),this.weightBuffer.bind(),S.weight.pointer(c.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),S.color.pointer(c.UNSIGNED_BYTE,!0),c.drawArrays(c.TRIANGLES,0,T)}}}(),o.drawPick=function(){var b=[1,0,0,0,1,0,0,0,1],v=[0,0,0,0];return function(_){var u=this.plot,T=this.pickShader,c=this.bounds,A=this.numVertices;if(!(A<=0)){var k=u.gl,p=u.dataBox,w=c[2]-c[0],h=c[3]-c[1],D=p[2]-p[0],S=p[3]-p[1];b[0]=2*w/D,b[4]=2*h/S,b[6]=2*(c[0]-p[0])/D-1,b[7]=2*(c[1]-p[1])/S-1;for(var M=0;M<4;++M)v[M]=_>>M*8&255;this.pickOffset=_,T.bind();var L=T.uniforms;L.viewTransform=b,L.pickOffset=v,L.shape=this.shape;var R=T.attributes;return this.positionBuffer.bind(),R.position.pointer(),this.weightBuffer.bind(),R.weight.pointer(k.UNSIGNED_BYTE,!1),this.idBuffer.bind(),R.pickId.pointer(k.UNSIGNED_BYTE,!1),k.drawArrays(k.TRIANGLES,0,A),_+this.shape[0]*this.shape[1]}}}(),o.pick=function(b,v,_){var u=this.pickOffset,T=this.shape[0]*this.shape[1];if(_<u||_>=u+T)return null;var c=_-u,A=this.xData,k=this.yData;return{object:this,pointId:c,dataCoord:[A[c%this.shape[0]],k[c/this.shape[0]|0]]}},o.update=function(b){b=b||{};var v=b.shape||[0,0],_=b.x||a(v[0]),u=b.y||a(v[1]),T=b.z||new Float32Array(v[0]*v[1]),c=b.zsmooth!==!1;this.xData=_,this.yData=u;var A=b.colorLevels||[0],k=b.colorValues||[0,0,0,1],p=A.length,w=this.bounds,h,D,S,M;c?(h=w[0]=_[0],D=w[1]=u[0],S=w[2]=_[_.length-1],M=w[3]=u[u.length-1]):(h=w[0]=_[0]+(_[1]-_[0])/2,D=w[1]=u[0]+(u[1]-u[0])/2,S=w[2]=_[_.length-1]+(_[_.length-1]-_[_.length-2])/2,M=w[3]=u[u.length-1]+(u[u.length-1]-u[u.length-2])/2);var L=1/(S-h),R=1/(M-D),z=v[0],P=v[1];this.shape=[z,P];var I=(c?(z-1)*(P-1):z*P)*(y.length>>>1);this.numVertices=I;for(var U=i.mallocUint8(I*4),O=i.mallocFloat32(I*2),G=i.mallocUint8(I*2),$=i.mallocUint32(I),tt=0,Z=c?z-1:z,X=c?P-1:P,J=0;J<X;++J){var st,at;c?(st=R*(u[J]-D),at=R*(u[J+1]-D)):(st=J<P-1?R*(u[J]-(u[J+1]-u[J])/2-D):R*(u[J]-(u[J]-u[J-1])/2-D),at=J<P-1?R*(u[J]+(u[J+1]-u[J])/2-D):R*(u[J]+(u[J]-u[J-1])/2-D));for(var lt=0;lt<Z;++lt){var F,H;c?(F=L*(_[lt]-h),H=L*(_[lt+1]-h)):(F=lt<z-1?L*(_[lt]-(_[lt+1]-_[lt])/2-h):L*(_[lt]-(_[lt]-_[lt-1])/2-h),H=lt<z-1?L*(_[lt]+(_[lt+1]-_[lt])/2-h):L*(_[lt]+(_[lt]-_[lt-1])/2-h));for(var et=0;et<y.length;et+=2){var q=y[et],W=y[et+1],K=c?(J+W)*z+(lt+q):J*z+lt,nt=T[K],it=t.le(A,nt),ot,ct,bt,ut;if(it<0)ot=k[0],ct=k[1],bt=k[2],ut=k[3];else if(it===p-1)ot=k[4*p-4],ct=k[4*p-3],bt=k[4*p-2],ut=k[4*p-1];else{var pt=(nt-A[it])/(A[it+1]-A[it]),yt=1-pt,Tt=4*it,kt=4*(it+1);ot=yt*k[Tt]+pt*k[kt],ct=yt*k[Tt+1]+pt*k[kt+1],bt=yt*k[Tt+2]+pt*k[kt+2],ut=yt*k[Tt+3]+pt*k[kt+3]}U[4*tt]=255*ot,U[4*tt+1]=255*ct,U[4*tt+2]=255*bt,U[4*tt+3]=255*ut,O[2*tt]=F*.5+H*.5,O[2*tt+1]=st*.5+at*.5,G[2*tt]=q,G[2*tt+1]=W,$[tt]=J*z+lt,tt+=1}}}this.positionBuffer.update(O),this.weightBuffer.update(G),this.colorBuffer.update(U),this.idBuffer.update($),i.free(O),i.free(U),i.free(G),i.free($)},o.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)};function g(b,v){var _=b.gl,u=r(_,d.vertex,d.fragment),T=r(_,d.pickVertex,d.pickFragment),c=n(_),A=n(_),k=n(_),p=n(_),w=new s(b,u,T,c,A,k,p);return w.update(v),b.addObject(w),w}},{"./lib/shaders":89,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"iota-array":235,"typedarray-pool":308}],89:[function(l,m,x){var t=l("glslify");m.exports={fragment:t([`precision lowp float;
#define GLSLIFY 1
varying vec4 fragColor;
void main() {
  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);
}
`]),vertex:t([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 color;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragColor;

void main() {
  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  fragColor = color;
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`]),pickFragment:t([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;
varying vec2 vWeight;

uniform vec2 shape;
uniform vec4 pickOffset;

void main() {
  vec2 d = step(.5, vWeight);
  vec4 id = fragId + pickOffset;
  id.x += d.x + d.y*shape.x;

  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  gl_FragColor = id/255.;
}
`]),pickVertex:t([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragId;
varying vec2 vWeight;

void main() {
  vWeight = weight;

  fragId = pickId;

  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`])}},{glslify:231}],90:[function(l,m,x){var t=l("glslify"),a=l("gl-shader"),i=t([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, nextPosition;
attribute float arcLength, lineWidth;
attribute vec4 color;

uniform vec2 screenShape;
uniform float pixelRatio;
uniform mat4 model, view, projection;

varying vec4 fragColor;
varying vec3 worldPosition;
varying float pixelArcLength;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  vec4 startPoint = project(position);
  vec4 endPoint   = project(nextPosition);

  vec2 A = startPoint.xy / startPoint.w;
  vec2 B =   endPoint.xy /   endPoint.w;

  float clipAngle = atan(
    (B.y - A.y) * screenShape.y,
    (B.x - A.x) * screenShape.x
  );

  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(
    sin(clipAngle),
    -cos(clipAngle)
  ) / screenShape;

  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);

  worldPosition = position;
  pixelArcLength = arcLength;
  fragColor = color;
}
`]),r=t([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3      clipBounds[2];
uniform sampler2D dashTexture;
uniform float     dashScale;
uniform float     opacity;

varying vec3    worldPosition;
varying float   pixelArcLength;
varying vec4    fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;
  if(dashWeight < 0.5) {
    discard;
  }
  gl_FragColor = fragColor * opacity;
}
`]),n=t([`precision highp float;
#define GLSLIFY 1

#define FLOAT_MAX  1.70141184e38
#define FLOAT_MIN  1.17549435e-38

// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl
vec4 packFloat(float v) {
  float av = abs(v);

  //Handle special cases
  if(av < FLOAT_MIN) {
    return vec4(0.0, 0.0, 0.0, 0.0);
  } else if(v > FLOAT_MAX) {
    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;
  } else if(v < -FLOAT_MAX) {
    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;
  }

  vec4 c = vec4(0,0,0,0);

  //Compute exponent and mantissa
  float e = floor(log2(av));
  float m = av * pow(2.0, -e) - 1.0;

  //Unpack mantissa
  c[1] = floor(128.0 * m);
  m -= c[1] / 128.0;
  c[2] = floor(32768.0 * m);
  m -= c[2] / 32768.0;
  c[3] = floor(8388608.0 * m);

  //Unpack exponent
  float ebias = e + 127.0;
  c[0] = floor(ebias / 2.0);
  ebias -= c[0] * 2.0;
  c[1] += floor(ebias) * 128.0;

  //Unpack sign bit
  c[0] += 128.0 * step(0.0, -v);

  //Scale back to range
  return c / 255.0;
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform float pickId;
uniform vec3 clipBounds[2];

varying vec3 worldPosition;
varying float pixelArcLength;
varying vec4 fragColor;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;

  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);
}`]),d=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];x.createShader=function(s){return a(s,i,r,null,d)},x.createPickShader=function(s){return a(s,i,n,null,d)}},{"gl-shader":132,glslify:231}],91:[function(l,m,x){m.exports=k;var t=l("gl-buffer"),a=l("gl-vao"),i=l("gl-texture2d"),r=new Uint8Array(4),n=new Float32Array(r.buffer);function d(p,w,h,D){return r[0]=D,r[1]=h,r[2]=w,r[3]=p,n[0]}var s=l("binary-search-bounds"),o=l("ndarray"),y=l("./lib/shaders"),g=y.createShader,b=y.createPickShader,v=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function _(p,w){for(var h=0,D=0;D<3;++D){var S=p[D]-w[D];h+=S*S}return Math.sqrt(h)}function u(p){for(var w=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],h=0;h<3;++h)w[0][h]=Math.max(p[0][h],w[0][h]),w[1][h]=Math.min(p[1][h],w[1][h]);return w}function T(p,w,h,D){this.arcLength=p,this.position=w,this.index=h,this.dataCoordinate=D}function c(p,w,h,D,S,M){this.gl=p,this.shader=w,this.pickShader=h,this.buffer=D,this.vao=S,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=M,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var A=c.prototype;A.isTransparent=function(){return this.hasAlpha},A.isOpaque=function(){return!this.hasAlpha},A.pickSlots=1,A.setPickBase=function(p){this.pickId=p},A.drawTransparent=A.draw=function(p){if(!!this.vertexCount){var w=this.gl,h=this.shader,D=this.vao;h.bind(),h.uniforms={model:p.model||v,view:p.view||v,projection:p.projection||v,clipBounds:u(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[w.drawingBufferWidth,w.drawingBufferHeight],pixelRatio:this.pixelRatio},D.bind(),D.draw(w.TRIANGLE_STRIP,this.vertexCount),D.unbind()}},A.drawPick=function(p){if(!!this.vertexCount){var w=this.gl,h=this.pickShader,D=this.vao;h.bind(),h.uniforms={model:p.model||v,view:p.view||v,projection:p.projection||v,pickId:this.pickId,clipBounds:u(this.clipBounds),screenShape:[w.drawingBufferWidth,w.drawingBufferHeight],pixelRatio:this.pixelRatio},D.bind(),D.draw(w.TRIANGLE_STRIP,this.vertexCount),D.unbind()}},A.update=function(p){var w,h;this.dirty=!0;var D=!!p.connectGaps;"dashScale"in p&&(this.dashScale=p.dashScale),this.hasAlpha=!1,"opacity"in p&&(this.opacity=+p.opacity,this.opacity<1&&(this.hasAlpha=!0));var S=[],M=[],L=[],R=0,z=0,P=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],I=p.position||p.positions;if(I){var U=p.color||p.colors||[0,0,0,1],O=p.lineWidth||1,G=!1;t:for(w=1;w<I.length;++w){var $=I[w-1],tt=I[w];for(M.push(R),L.push($.slice()),h=0;h<3;++h){if(isNaN($[h])||isNaN(tt[h])||!isFinite($[h])||!isFinite(tt[h])){if(!D&&S.length>0){for(var Z=0;Z<24;++Z)S.push(S[S.length-12]);z+=2,G=!0}continue t}P[0][h]=Math.min(P[0][h],$[h],tt[h]),P[1][h]=Math.max(P[1][h],$[h],tt[h])}var X,J;Array.isArray(U[0])?(X=U.length>w-1?U[w-1]:U.length>0?U[U.length-1]:[0,0,0,1],J=U.length>w?U[w]:U.length>0?U[U.length-1]:[0,0,0,1]):X=J=U,X.length===3&&(X=[X[0],X[1],X[2],1]),J.length===3&&(J=[J[0],J[1],J[2],1]),!this.hasAlpha&&X[3]<1&&(this.hasAlpha=!0);var st;Array.isArray(O)?st=O.length>w-1?O[w-1]:O.length>0?O[O.length-1]:[0,0,0,1]:st=O;var at=R;if(R+=_($,tt),G){for(h=0;h<2;++h)S.push($[0],$[1],$[2],tt[0],tt[1],tt[2],at,st,X[0],X[1],X[2],X[3]);z+=2,G=!1}S.push($[0],$[1],$[2],tt[0],tt[1],tt[2],at,st,X[0],X[1],X[2],X[3],$[0],$[1],$[2],tt[0],tt[1],tt[2],at,-st,X[0],X[1],X[2],X[3],tt[0],tt[1],tt[2],$[0],$[1],$[2],R,-st,J[0],J[1],J[2],J[3],tt[0],tt[1],tt[2],$[0],$[1],$[2],R,st,J[0],J[1],J[2],J[3]),z+=4}}if(this.buffer.update(S),M.push(R),L.push(I[I.length-1].slice()),this.bounds=P,this.vertexCount=z,this.points=L,this.arcLength=M,"dashes"in p){var lt=p.dashes,F=lt.slice();for(F.unshift(0),w=1;w<F.length;++w)F[w]=F[w-1]+F[w];var H=o(new Array(256*4),[256,1,4]);for(w=0;w<256;++w){for(h=0;h<4;++h)H.set(w,0,h,0);s.le(F,F[F.length-1]*w/255)&1?H.set(w,0,0,0):H.set(w,0,0,255)}this.texture.setPixels(H)}},A.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},A.pick=function(p){if(!p||p.id!==this.pickId)return null;var w=d(p.value[0],p.value[1],p.value[2],0),h=s.le(this.arcLength,w);if(h<0)return null;if(h===this.arcLength.length-1)return new T(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),h);for(var D=this.points[h],S=this.points[Math.min(h+1,this.points.length-1)],M=(w-this.arcLength[h])/(this.arcLength[h+1]-this.arcLength[h]),L=1-M,R=[0,0,0],z=0;z<3;++z)R[z]=L*D[z]+M*S[z];var P=Math.min(M<.5?h:h+1,this.points.length-1);return new T(w,R,P,this.points[P])};function k(p){var w=p.gl||p.scene&&p.scene.gl,h=g(w);h.attributes.position.location=0,h.attributes.nextPosition.location=1,h.attributes.arcLength.location=2,h.attributes.lineWidth.location=3,h.attributes.color.location=4;var D=b(w);D.attributes.position.location=0,D.attributes.nextPosition.location=1,D.attributes.arcLength.location=2,D.attributes.lineWidth.location=3,D.attributes.color.location=4;for(var S=t(w),M=a(w,[{buffer:S,size:3,offset:0,stride:48},{buffer:S,size:3,offset:12,stride:48},{buffer:S,size:1,offset:24,stride:48},{buffer:S,size:1,offset:28,stride:48},{buffer:S,size:4,offset:32,stride:48}]),L=o(new Array(256*4),[256,1,4]),R=0;R<256*4;++R)L.data[R]=255;var z=i(w,L);z.wrap=w.REPEAT;var P=new c(w,h,D,S,M,z);return P.update(p),P}},{"./lib/shaders":90,"binary-search-bounds":31,"gl-buffer":78,"gl-texture2d":146,"gl-vao":150,ndarray:259}],92:[function(l,m,x){m.exports=t;function t(a){var i=new Float32Array(16);return i[0]=a[0],i[1]=a[1],i[2]=a[2],i[3]=a[3],i[4]=a[4],i[5]=a[5],i[6]=a[6],i[7]=a[7],i[8]=a[8],i[9]=a[9],i[10]=a[10],i[11]=a[11],i[12]=a[12],i[13]=a[13],i[14]=a[14],i[15]=a[15],i}},{}],93:[function(l,m,x){m.exports=t;function t(){var a=new Float32Array(16);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}},{}],94:[function(l,m,x){m.exports=t;function t(a){var i=a[0],r=a[1],n=a[2],d=a[3],s=a[4],o=a[5],y=a[6],g=a[7],b=a[8],v=a[9],_=a[10],u=a[11],T=a[12],c=a[13],A=a[14],k=a[15],p=i*o-r*s,w=i*y-n*s,h=i*g-d*s,D=r*y-n*o,S=r*g-d*o,M=n*g-d*y,L=b*c-v*T,R=b*A-_*T,z=b*k-u*T,P=v*A-_*c,I=v*k-u*c,U=_*k-u*A;return p*U-w*I+h*P+D*z-S*R+M*L}},{}],95:[function(l,m,x){m.exports=t;function t(a,i){var r=i[0],n=i[1],d=i[2],s=i[3],o=r+r,y=n+n,g=d+d,b=r*o,v=n*o,_=n*y,u=d*o,T=d*y,c=d*g,A=s*o,k=s*y,p=s*g;return a[0]=1-_-c,a[1]=v+p,a[2]=u-k,a[3]=0,a[4]=v-p,a[5]=1-b-c,a[6]=T+A,a[7]=0,a[8]=u+k,a[9]=T-A,a[10]=1-b-_,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}},{}],96:[function(l,m,x){m.exports=t;function t(a,i,r){var n=i[0],d=i[1],s=i[2],o=i[3],y=n+n,g=d+d,b=s+s,v=n*y,_=n*g,u=n*b,T=d*g,c=d*b,A=s*b,k=o*y,p=o*g,w=o*b;return a[0]=1-(T+A),a[1]=_+w,a[2]=u-p,a[3]=0,a[4]=_-w,a[5]=1-(v+A),a[6]=c+k,a[7]=0,a[8]=u+p,a[9]=c-k,a[10]=1-(v+T),a[11]=0,a[12]=r[0],a[13]=r[1],a[14]=r[2],a[15]=1,a}},{}],97:[function(l,m,x){m.exports=t;function t(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}},{}],98:[function(l,m,x){m.exports=t;function t(a,i){var r=i[0],n=i[1],d=i[2],s=i[3],o=i[4],y=i[5],g=i[6],b=i[7],v=i[8],_=i[9],u=i[10],T=i[11],c=i[12],A=i[13],k=i[14],p=i[15],w=r*y-n*o,h=r*g-d*o,D=r*b-s*o,S=n*g-d*y,M=n*b-s*y,L=d*b-s*g,R=v*A-_*c,z=v*k-u*c,P=v*p-T*c,I=_*k-u*A,U=_*p-T*A,O=u*p-T*k,G=w*O-h*U+D*I+S*P-M*z+L*R;return G?(G=1/G,a[0]=(y*O-g*U+b*I)*G,a[1]=(d*U-n*O-s*I)*G,a[2]=(A*L-k*M+p*S)*G,a[3]=(u*M-_*L-T*S)*G,a[4]=(g*P-o*O-b*z)*G,a[5]=(r*O-d*P+s*z)*G,a[6]=(k*D-c*L-p*h)*G,a[7]=(v*L-u*D+T*h)*G,a[8]=(o*U-y*P+b*R)*G,a[9]=(n*P-r*U-s*R)*G,a[10]=(c*M-A*D+p*w)*G,a[11]=(_*D-v*M-T*w)*G,a[12]=(y*z-o*I-g*R)*G,a[13]=(r*I-n*z+d*R)*G,a[14]=(A*h-c*S-k*w)*G,a[15]=(v*S-_*h+u*w)*G,a):null}},{}],99:[function(l,m,x){var t=l("./identity");m.exports=a;function a(i,r,n,d){var s,o,y,g,b,v,_,u,T,c,A=r[0],k=r[1],p=r[2],w=d[0],h=d[1],D=d[2],S=n[0],M=n[1],L=n[2];return Math.abs(A-S)<1e-6&&Math.abs(k-M)<1e-6&&Math.abs(p-L)<1e-6?t(i):(_=A-S,u=k-M,T=p-L,c=1/Math.sqrt(_*_+u*u+T*T),_*=c,u*=c,T*=c,s=h*T-D*u,o=D*_-w*T,y=w*u-h*_,c=Math.sqrt(s*s+o*o+y*y),c?(c=1/c,s*=c,o*=c,y*=c):(s=0,o=0,y=0),g=u*y-T*o,b=T*s-_*y,v=_*o-u*s,c=Math.sqrt(g*g+b*b+v*v),c?(c=1/c,g*=c,b*=c,v*=c):(g=0,b=0,v=0),i[0]=s,i[1]=g,i[2]=_,i[3]=0,i[4]=o,i[5]=b,i[6]=u,i[7]=0,i[8]=y,i[9]=v,i[10]=T,i[11]=0,i[12]=-(s*A+o*k+y*p),i[13]=-(g*A+b*k+v*p),i[14]=-(_*A+u*k+T*p),i[15]=1,i)}},{"./identity":97}],100:[function(l,m,x){m.exports=t;function t(a,i,r){var n=i[0],d=i[1],s=i[2],o=i[3],y=i[4],g=i[5],b=i[6],v=i[7],_=i[8],u=i[9],T=i[10],c=i[11],A=i[12],k=i[13],p=i[14],w=i[15],h=r[0],D=r[1],S=r[2],M=r[3];return a[0]=h*n+D*y+S*_+M*A,a[1]=h*d+D*g+S*u+M*k,a[2]=h*s+D*b+S*T+M*p,a[3]=h*o+D*v+S*c+M*w,h=r[4],D=r[5],S=r[6],M=r[7],a[4]=h*n+D*y+S*_+M*A,a[5]=h*d+D*g+S*u+M*k,a[6]=h*s+D*b+S*T+M*p,a[7]=h*o+D*v+S*c+M*w,h=r[8],D=r[9],S=r[10],M=r[11],a[8]=h*n+D*y+S*_+M*A,a[9]=h*d+D*g+S*u+M*k,a[10]=h*s+D*b+S*T+M*p,a[11]=h*o+D*v+S*c+M*w,h=r[12],D=r[13],S=r[14],M=r[15],a[12]=h*n+D*y+S*_+M*A,a[13]=h*d+D*g+S*u+M*k,a[14]=h*s+D*b+S*T+M*p,a[15]=h*o+D*v+S*c+M*w,a}},{}],101:[function(l,m,x){m.exports=t;function t(a,i,r,n,d,s,o){var y=1/(i-r),g=1/(n-d),b=1/(s-o);return a[0]=-2*y,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*g,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*b,a[11]=0,a[12]=(i+r)*y,a[13]=(d+n)*g,a[14]=(o+s)*b,a[15]=1,a}},{}],102:[function(l,m,x){m.exports=t;function t(a,i,r,n,d){var s=1/Math.tan(i/2),o=1/(n-d);return a[0]=s/r,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=s,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=(d+n)*o,a[11]=-1,a[12]=0,a[13]=0,a[14]=2*d*n*o,a[15]=0,a}},{}],103:[function(l,m,x){m.exports=t;function t(a,i,r,n){var d=n[0],s=n[1],o=n[2],y=Math.sqrt(d*d+s*s+o*o),g,b,v,_,u,T,c,A,k,p,w,h,D,S,M,L,R,z,P,I,U,O,G,$;return Math.abs(y)<1e-6?null:(y=1/y,d*=y,s*=y,o*=y,g=Math.sin(r),b=Math.cos(r),v=1-b,_=i[0],u=i[1],T=i[2],c=i[3],A=i[4],k=i[5],p=i[6],w=i[7],h=i[8],D=i[9],S=i[10],M=i[11],L=d*d*v+b,R=s*d*v+o*g,z=o*d*v-s*g,P=d*s*v-o*g,I=s*s*v+b,U=o*s*v+d*g,O=d*o*v+s*g,G=s*o*v-d*g,$=o*o*v+b,a[0]=_*L+A*R+h*z,a[1]=u*L+k*R+D*z,a[2]=T*L+p*R+S*z,a[3]=c*L+w*R+M*z,a[4]=_*P+A*I+h*U,a[5]=u*P+k*I+D*U,a[6]=T*P+p*I+S*U,a[7]=c*P+w*I+M*U,a[8]=_*O+A*G+h*$,a[9]=u*O+k*G+D*$,a[10]=T*O+p*G+S*$,a[11]=c*O+w*G+M*$,i!==a&&(a[12]=i[12],a[13]=i[13],a[14]=i[14],a[15]=i[15]),a)}},{}],104:[function(l,m,x){m.exports=t;function t(a,i,r){var n=Math.sin(r),d=Math.cos(r),s=i[4],o=i[5],y=i[6],g=i[7],b=i[8],v=i[9],_=i[10],u=i[11];return i!==a&&(a[0]=i[0],a[1]=i[1],a[2]=i[2],a[3]=i[3],a[12]=i[12],a[13]=i[13],a[14]=i[14],a[15]=i[15]),a[4]=s*d+b*n,a[5]=o*d+v*n,a[6]=y*d+_*n,a[7]=g*d+u*n,a[8]=b*d-s*n,a[9]=v*d-o*n,a[10]=_*d-y*n,a[11]=u*d-g*n,a}},{}],105:[function(l,m,x){m.exports=t;function t(a,i,r){var n=Math.sin(r),d=Math.cos(r),s=i[0],o=i[1],y=i[2],g=i[3],b=i[8],v=i[9],_=i[10],u=i[11];return i!==a&&(a[4]=i[4],a[5]=i[5],a[6]=i[6],a[7]=i[7],a[12]=i[12],a[13]=i[13],a[14]=i[14],a[15]=i[15]),a[0]=s*d-b*n,a[1]=o*d-v*n,a[2]=y*d-_*n,a[3]=g*d-u*n,a[8]=s*n+b*d,a[9]=o*n+v*d,a[10]=y*n+_*d,a[11]=g*n+u*d,a}},{}],106:[function(l,m,x){m.exports=t;function t(a,i,r){var n=Math.sin(r),d=Math.cos(r),s=i[0],o=i[1],y=i[2],g=i[3],b=i[4],v=i[5],_=i[6],u=i[7];return i!==a&&(a[8]=i[8],a[9]=i[9],a[10]=i[10],a[11]=i[11],a[12]=i[12],a[13]=i[13],a[14]=i[14],a[15]=i[15]),a[0]=s*d+b*n,a[1]=o*d+v*n,a[2]=y*d+_*n,a[3]=g*d+u*n,a[4]=b*d-s*n,a[5]=v*d-o*n,a[6]=_*d-y*n,a[7]=u*d-g*n,a}},{}],107:[function(l,m,x){m.exports=t;function t(a,i,r){var n=r[0],d=r[1],s=r[2];return a[0]=i[0]*n,a[1]=i[1]*n,a[2]=i[2]*n,a[3]=i[3]*n,a[4]=i[4]*d,a[5]=i[5]*d,a[6]=i[6]*d,a[7]=i[7]*d,a[8]=i[8]*s,a[9]=i[9]*s,a[10]=i[10]*s,a[11]=i[11]*s,a[12]=i[12],a[13]=i[13],a[14]=i[14],a[15]=i[15],a}},{}],108:[function(l,m,x){m.exports=t;function t(a,i,r){var n=r[0],d=r[1],s=r[2],o,y,g,b,v,_,u,T,c,A,k,p;return i===a?(a[12]=i[0]*n+i[4]*d+i[8]*s+i[12],a[13]=i[1]*n+i[5]*d+i[9]*s+i[13],a[14]=i[2]*n+i[6]*d+i[10]*s+i[14],a[15]=i[3]*n+i[7]*d+i[11]*s+i[15]):(o=i[0],y=i[1],g=i[2],b=i[3],v=i[4],_=i[5],u=i[6],T=i[7],c=i[8],A=i[9],k=i[10],p=i[11],a[0]=o,a[1]=y,a[2]=g,a[3]=b,a[4]=v,a[5]=_,a[6]=u,a[7]=T,a[8]=c,a[9]=A,a[10]=k,a[11]=p,a[12]=o*n+v*d+c*s+i[12],a[13]=y*n+_*d+A*s+i[13],a[14]=g*n+u*d+k*s+i[14],a[15]=b*n+T*d+p*s+i[15]),a}},{}],109:[function(l,m,x){m.exports=t;function t(a,i){if(a===i){var r=i[1],n=i[2],d=i[3],s=i[6],o=i[7],y=i[11];a[1]=i[4],a[2]=i[8],a[3]=i[12],a[4]=r,a[6]=i[9],a[7]=i[13],a[8]=n,a[9]=s,a[11]=i[14],a[12]=d,a[13]=o,a[14]=y}else a[0]=i[0],a[1]=i[4],a[2]=i[8],a[3]=i[12],a[4]=i[1],a[5]=i[5],a[6]=i[9],a[7]=i[13],a[8]=i[2],a[9]=i[6],a[10]=i[10],a[11]=i[14],a[12]=i[3],a[13]=i[7],a[14]=i[11],a[15]=i[15];return a}},{}],110:[function(l,m,x){var t=l("barycentric"),a=l("polytope-closest-point/lib/closest_point_2d.js");m.exports=s;function i(o,y){for(var g=[0,0,0,0],b=0;b<4;++b)for(var v=0;v<4;++v)g[v]+=o[4*b+v]*y[b];return g}function r(o,y,g,b,v){for(var _=i(b,i(g,i(y,[o[0],o[1],o[2],1]))),u=0;u<3;++u)_[u]/=_[3];return[.5*v[0]*(1+_[0]),.5*v[1]*(1-_[1])]}function n(o,y){if(o.length===2){for(var g=0,b=0,v=0;v<2;++v)g+=Math.pow(y[v]-o[0][v],2),b+=Math.pow(y[v]-o[1][v],2);return g=Math.sqrt(g),b=Math.sqrt(b),g+b<1e-6?[1,0]:[b/(g+b),g/(b+g)]}else if(o.length===3){var _=[0,0];return a(o[0],o[1],o[2],y,_),t(o,_)}return[]}function d(o,y){for(var g=[0,0,0],b=0;b<o.length;++b)for(var v=o[b],_=y[b],u=0;u<3;++u)g[u]+=_*v[u];return g}function s(o,y,g,b,v,_){if(o.length===1)return[0,o[0].slice()];for(var u=new Array(o.length),T=0;T<o.length;++T)u[T]=r(o[T],g,b,v,_);for(var c=0,A=1/0,T=0;T<u.length;++T){for(var k=0,p=0;p<2;++p)k+=Math.pow(u[T][p]-y[p],2);k<A&&(A=k,c=T)}for(var w=n(u,y),h=0,T=0;T<3;++T){if(w[T]<-.001||w[T]>1.0001)return null;h+=w[T]}return Math.abs(h-1)>.001?null:[c,d(o,w),w]}},{barycentric:14,"polytope-closest-point/lib/closest_point_2d.js":270}],111:[function(l,m,x){var t=l("glslify"),a=t([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, normal;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model
           , view
           , projection
           , inverseModel;
uniform vec3 eyePosition
           , lightPosition;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  gl_Position      = project(position);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * vec4(position , 1.0);
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  f_color          = color;
  f_data           = position;
  f_uv             = uv;
}
`]),i=t([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness
            , fresnel
            , kambient
            , kdiffuse
            , kspecular;
uniform sampler2D texture;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (f_color.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], f_data)
  ) discard;

  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d

  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * f_color.a;
}
`]),r=t([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model, view, projection;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_color = color;
  f_data  = position;
  f_uv    = uv;
}`]),n=t([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;

  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),d=t([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;
attribute float pointSize;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);
  } else {
    gl_Position = projection * view * model * vec4(position, 1.0);
  }
  gl_PointSize = pointSize;
  f_color = color;
  f_uv = uv;
}`]),s=t([`precision highp float;
#define GLSLIFY 1

uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);
  if(dot(pointR, pointR) > 0.25) {
    discard;
  }
  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),o=t([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 id;

uniform mat4 model, view, projection;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_id        = id;
  f_position  = position;
}`]),y=t([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]),g=t([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3  position;
attribute float pointSize;
attribute vec4  id;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);
  } else {
    gl_Position  = projection * view * model * vec4(position, 1.0);
    gl_PointSize = pointSize;
  }
  f_id         = id;
  f_position   = position;
}`]),b=t([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
}`]),v=t([`precision highp float;
#define GLSLIFY 1

uniform vec3 contourColor;

void main() {
  gl_FragColor = vec4(contourColor, 1.0);
}
`]);x.meshShader={vertex:a,fragment:i,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},x.wireShader={vertex:r,fragment:n,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},x.pointShader={vertex:d,fragment:s,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},x.pickShader={vertex:o,fragment:y,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},x.pointPickShader={vertex:g,fragment:y,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},x.contourShader={vertex:b,fragment:v,attributes:[{name:"position",type:"vec3"}]}},{glslify:231}],112:[function(l,m,x){var t=1e-6,a=1e-6,i=l("gl-shader"),r=l("gl-buffer"),n=l("gl-vao"),d=l("gl-texture2d"),s=l("normals"),o=l("gl-mat4/multiply"),y=l("gl-mat4/invert"),g=l("ndarray"),b=l("colormap"),v=l("simplicial-complex-contour"),_=l("typedarray-pool"),u=l("./lib/shaders"),T=l("./lib/closest-point"),c=u.meshShader,A=u.wireShader,k=u.pointShader,p=u.pickShader,w=u.pointPickShader,h=u.contourShader,D=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function S(Z,X,J,st,at,lt,F,H,et,q,W,K,nt,it,ot,ct,bt,ut,pt,yt,Tt,kt,zt,Rt,Gt,wt,It){this.gl=Z,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=X,this.dirty=!0,this.triShader=J,this.lineShader=st,this.pointShader=at,this.pickShader=lt,this.pointPickShader=F,this.contourShader=H,this.trianglePositions=et,this.triangleColors=W,this.triangleNormals=nt,this.triangleUVs=K,this.triangleIds=q,this.triangleVAO=it,this.triangleCount=0,this.lineWidth=1,this.edgePositions=ot,this.edgeColors=bt,this.edgeUVs=ut,this.edgeIds=ct,this.edgeVAO=pt,this.edgeCount=0,this.pointPositions=yt,this.pointColors=kt,this.pointUVs=zt,this.pointSizes=Rt,this.pointIds=Tt,this.pointVAO=Gt,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=wt,this.contourVAO=It,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=D,this._view=D,this._projection=D,this._resolution=[1,1]}var M=S.prototype;M.isOpaque=function(){return!this.hasAlpha},M.isTransparent=function(){return this.hasAlpha},M.pickSlots=1,M.setPickBase=function(Z){this.pickId=Z};function L(Z,X){if(!X||!X.length)return 1;for(var J=0;J<X.length;++J){if(X.length<2)return 1;if(X[J][0]===Z)return X[J][1];if(X[J][0]>Z&&J>0){var st=(X[J][0]-Z)/(X[J][0]-X[J-1][0]);return X[J][1]*(1-st)+st*X[J-1][1]}}return 1}function R(Z,X){for(var J=b({colormap:Z,nshades:256,format:"rgba"}),st=new Uint8Array(256*4),at=0;at<256;++at){for(var lt=J[at],F=0;F<3;++F)st[4*at+F]=lt[F];X?st[4*at+3]=255*L(at/255,X):st[4*at+3]=255*lt[3]}return g(st,[256,256,4],[4,0,1])}function z(Z){for(var X=Z.length,J=new Array(X),st=0;st<X;++st)J[st]=Z[st][2];return J}M.highlight=function(Z){if(!Z||!this.contourEnable){this.contourCount=0;return}for(var X=v(this.cells,this.intensity,Z.intensity),J=X.cells,st=X.vertexIds,at=X.vertexWeights,lt=J.length,F=_.mallocFloat32(2*3*lt),H=0,et=0;et<lt;++et)for(var q=J[et],W=0;W<2;++W){var K=q[0];q.length===2&&(K=q[W]);for(var nt=st[K][0],it=st[K][1],ot=at[K],ct=1-ot,bt=this.positions[nt],ut=this.positions[it],pt=0;pt<3;++pt)F[H++]=ot*bt[pt]+ct*ut[pt]}this.contourCount=H/3|0,this.contourPositions.update(F.subarray(0,H)),_.free(F)},M.update=function(Z){Z=Z||{};var X=this.gl;this.dirty=!0,"contourEnable"in Z&&(this.contourEnable=Z.contourEnable),"contourColor"in Z&&(this.contourColor=Z.contourColor),"lineWidth"in Z&&(this.lineWidth=Z.lineWidth),"lightPosition"in Z&&(this.lightPosition=Z.lightPosition),this.hasAlpha=!1,"opacity"in Z&&(this.opacity=Z.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in Z&&(this.opacityscale=Z.opacityscale,this.hasAlpha=!0),"ambient"in Z&&(this.ambientLight=Z.ambient),"diffuse"in Z&&(this.diffuseLight=Z.diffuse),"specular"in Z&&(this.specularLight=Z.specular),"roughness"in Z&&(this.roughness=Z.roughness),"fresnel"in Z&&(this.fresnel=Z.fresnel),Z.texture?(this.texture.dispose(),this.texture=d(X,Z.texture)):Z.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=X.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=X.LINEAR,this.texture.setPixels(R(Z.colormap,this.opacityscale)),this.texture.generateMipmap());var J=Z.cells,st=Z.positions;if(!st||!J)return;var at=[],lt=[],F=[],H=[],et=[],q=[],W=[],K=[],nt=[],it=[],ot=[],ct=[],bt=[],ut=[];this.cells=J,this.positions=st;var pt=Z.vertexNormals,yt=Z.cellNormals,Tt=Z.vertexNormalsEpsilon===void 0?t:Z.vertexNormalsEpsilon,kt=Z.faceNormalsEpsilon===void 0?a:Z.faceNormalsEpsilon;Z.useFacetNormals&&!yt&&(yt=s.faceNormals(J,st,kt)),!yt&&!pt&&(pt=s.vertexNormals(J,st,Tt));var zt=Z.vertexColors,Rt=Z.cellColors,Gt=Z.meshColor||[1,1,1,1],wt=Z.vertexUVs,It=Z.vertexIntensity,$t=Z.cellUVs,Qt=Z.cellIntensity,Nt=1/0,Pt=-1/0;if(!wt&&!$t)if(It)if(Z.vertexIntensityBounds)Nt=+Z.vertexIntensityBounds[0],Pt=+Z.vertexIntensityBounds[1];else for(var Yt=0;Yt<It.length;++Yt){var ve=It[Yt];Nt=Math.min(Nt,ve),Pt=Math.max(Pt,ve)}else if(Qt)if(Z.cellIntensityBounds)Nt=+Z.cellIntensityBounds[0],Pt=+Z.cellIntensityBounds[1];else for(var Yt=0;Yt<Qt.length;++Yt){var ve=Qt[Yt];Nt=Math.min(Nt,ve),Pt=Math.max(Pt,ve)}else for(var Yt=0;Yt<st.length;++Yt){var ve=st[Yt][2];Nt=Math.min(Nt,ve),Pt=Math.max(Pt,ve)}It?this.intensity=It:Qt?this.intensity=Qt:this.intensity=z(st),this.pickVertex=!(Qt||Rt);var Re=Z.pointSizes,ir=Z.pointSize||1;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var Yt=0;Yt<st.length;++Yt)for(var Ie=st[Yt],Be=0;Be<3;++Be)isNaN(Ie[Be])||!isFinite(Ie[Be])||(this.bounds[0][Be]=Math.min(this.bounds[0][Be],Ie[Be]),this.bounds[1][Be]=Math.max(this.bounds[1][Be],Ie[Be]));var Ye=0,ze=0,Ee=0;t:for(var Yt=0;Yt<J.length;++Yt){var Wt=J[Yt];switch(Wt.length){case 1:for(var ee=Wt[0],Ie=st[ee],Be=0;Be<3;++Be)if(isNaN(Ie[Be])||!isFinite(Ie[Be]))continue t;it.push(Ie[0],Ie[1],Ie[2]);var Xt;zt?Xt=zt[ee]:Rt?Xt=Rt[Yt]:Xt=Gt,this.opacityscale&&It?lt.push(Xt[0],Xt[1],Xt[2],this.opacity*L((It[ee]-Nt)/(Pt-Nt),this.opacityscale)):Xt.length===3?ot.push(Xt[0],Xt[1],Xt[2],this.opacity):(ot.push(Xt[0],Xt[1],Xt[2],Xt[3]*this.opacity),Xt[3]<1&&(this.hasAlpha=!0));var St;wt?St=wt[ee]:It?St=[(It[ee]-Nt)/(Pt-Nt),0]:$t?St=$t[Yt]:Qt?St=[(Qt[Yt]-Nt)/(Pt-Nt),0]:St=[(Ie[2]-Nt)/(Pt-Nt),0],ct.push(St[0],St[1]),Re?bt.push(Re[ee]):bt.push(ir),ut.push(Yt),Ee+=1;break;case 2:for(var Be=0;Be<2;++Be)for(var ee=Wt[Be],Ie=st[ee],Vt=0;Vt<3;++Vt)if(isNaN(Ie[Vt])||!isFinite(Ie[Vt]))continue t;for(var Be=0;Be<2;++Be){var ee=Wt[Be],Ie=st[ee];q.push(Ie[0],Ie[1],Ie[2]);var Xt;zt?Xt=zt[ee]:Rt?Xt=Rt[Yt]:Xt=Gt,this.opacityscale&&It?lt.push(Xt[0],Xt[1],Xt[2],this.opacity*L((It[ee]-Nt)/(Pt-Nt),this.opacityscale)):Xt.length===3?W.push(Xt[0],Xt[1],Xt[2],this.opacity):(W.push(Xt[0],Xt[1],Xt[2],Xt[3]*this.opacity),Xt[3]<1&&(this.hasAlpha=!0));var St;wt?St=wt[ee]:It?St=[(It[ee]-Nt)/(Pt-Nt),0]:$t?St=$t[Yt]:Qt?St=[(Qt[Yt]-Nt)/(Pt-Nt),0]:St=[(Ie[2]-Nt)/(Pt-Nt),0],K.push(St[0],St[1]),nt.push(Yt)}ze+=1;break;case 3:for(var Be=0;Be<3;++Be)for(var ee=Wt[Be],Ie=st[ee],Vt=0;Vt<3;++Vt)if(isNaN(Ie[Vt])||!isFinite(Ie[Vt]))continue t;for(var Be=0;Be<3;++Be){var ee=Wt[2-Be],Ie=st[ee];at.push(Ie[0],Ie[1],Ie[2]);var Xt;zt?Xt=zt[ee]:Rt?Xt=Rt[Yt]:Xt=Gt,Xt?this.opacityscale&&It?lt.push(Xt[0],Xt[1],Xt[2],this.opacity*L((It[ee]-Nt)/(Pt-Nt),this.opacityscale)):Xt.length===3?lt.push(Xt[0],Xt[1],Xt[2],this.opacity):(lt.push(Xt[0],Xt[1],Xt[2],Xt[3]*this.opacity),Xt[3]<1&&(this.hasAlpha=!0)):lt.push(.5,.5,.5,1);var St;wt?St=wt[ee]:It?St=[(It[ee]-Nt)/(Pt-Nt),0]:$t?St=$t[Yt]:Qt?St=[(Qt[Yt]-Nt)/(Pt-Nt),0]:St=[(Ie[2]-Nt)/(Pt-Nt),0],H.push(St[0],St[1]);var Zt;pt?Zt=pt[ee]:Zt=yt[Yt],F.push(Zt[0],Zt[1],Zt[2]),et.push(Yt)}Ye+=1;break}}this.pointCount=Ee,this.edgeCount=ze,this.triangleCount=Ye,this.pointPositions.update(it),this.pointColors.update(ot),this.pointUVs.update(ct),this.pointSizes.update(bt),this.pointIds.update(new Uint32Array(ut)),this.edgePositions.update(q),this.edgeColors.update(W),this.edgeUVs.update(K),this.edgeIds.update(new Uint32Array(nt)),this.trianglePositions.update(at),this.triangleColors.update(lt),this.triangleUVs.update(H),this.triangleNormals.update(F),this.triangleIds.update(new Uint32Array(et))},M.drawTransparent=M.draw=function(Z){Z=Z||{};for(var X=this.gl,J=Z.model||D,st=Z.view||D,at=Z.projection||D,lt=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],F=0;F<3;++F)lt[0][F]=Math.max(lt[0][F],this.clipBounds[0][F]),lt[1][F]=Math.min(lt[1][F],this.clipBounds[1][F]);var H={model:J,view:st,projection:at,inverseModel:D.slice(),clipBounds:lt,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};H.inverseModel=y(H.inverseModel,H.model),X.disable(X.CULL_FACE),this.texture.bind(0);var et=new Array(16);o(et,H.view,H.model),o(et,H.projection,et),y(et,et);for(var F=0;F<3;++F)H.eyePosition[F]=et[12+F]/et[15];for(var q=et[15],F=0;F<3;++F)q+=this.lightPosition[F]*et[4*F+3];for(var F=0;F<3;++F){for(var W=et[12+F],K=0;K<3;++K)W+=et[4*K+F]*this.lightPosition[K];H.lightPosition[F]=W/q}if(this.triangleCount>0){var nt=this.triShader;nt.bind(),nt.uniforms=H,this.triangleVAO.bind(),X.drawArrays(X.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()}if(this.edgeCount>0&&this.lineWidth>0){var nt=this.lineShader;nt.bind(),nt.uniforms=H,this.edgeVAO.bind(),X.lineWidth(this.lineWidth*this.pixelRatio),X.drawArrays(X.LINES,0,this.edgeCount*2),this.edgeVAO.unbind()}if(this.pointCount>0){var nt=this.pointShader;nt.bind(),nt.uniforms=H,this.pointVAO.bind(),X.drawArrays(X.POINTS,0,this.pointCount),this.pointVAO.unbind()}if(this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0){var nt=this.contourShader;nt.bind(),nt.uniforms=H,this.contourVAO.bind(),X.drawArrays(X.LINES,0,this.contourCount),this.contourVAO.unbind()}},M.drawPick=function(Z){Z=Z||{};for(var X=this.gl,J=Z.model||D,st=Z.view||D,at=Z.projection||D,lt=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],F=0;F<3;++F)lt[0][F]=Math.max(lt[0][F],this.clipBounds[0][F]),lt[1][F]=Math.min(lt[1][F],this.clipBounds[1][F]);this._model=[].slice.call(J),this._view=[].slice.call(st),this._projection=[].slice.call(at),this._resolution=[X.drawingBufferWidth,X.drawingBufferHeight];var H={model:J,view:st,projection:at,clipBounds:lt,pickId:this.pickId/255},et=this.pickShader;if(et.bind(),et.uniforms=H,this.triangleCount>0&&(this.triangleVAO.bind(),X.drawArrays(X.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),X.lineWidth(this.lineWidth*this.pixelRatio),X.drawArrays(X.LINES,0,this.edgeCount*2),this.edgeVAO.unbind()),this.pointCount>0){var et=this.pointPickShader;et.bind(),et.uniforms=H,this.pointVAO.bind(),X.drawArrays(X.POINTS,0,this.pointCount),this.pointVAO.unbind()}},M.pick=function(Z){if(!Z||Z.id!==this.pickId)return null;for(var X=Z.value[0]+256*Z.value[1]+65536*Z.value[2],J=this.cells[X],st=this.positions,at=new Array(J.length),lt=0;lt<J.length;++lt)at[lt]=st[J[lt]];var F=Z.coord[0],H=Z.coord[1];if(!this.pickVertex){var et=this.positions[J[0]],q=this.positions[J[1]],W=this.positions[J[2]],K=[(et[0]+q[0]+W[0])/3,(et[1]+q[1]+W[1])/3,(et[2]+q[2]+W[2])/3];return{_cellCenter:!0,position:[F,H],index:X,cell:J,cellId:X,intensity:this.intensity[X],dataCoordinate:K}}var nt=T(at,[F*this.pixelRatio,this._resolution[1]-H*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!nt)return null;for(var it=nt[2],ot=0,lt=0;lt<J.length;++lt)ot+=it[lt]*this.intensity[J[lt]];return{position:nt[1],index:J[nt[0]],cell:J,cellId:X,intensity:ot,dataCoordinate:this.positions[J[nt[0]]]}},M.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()};function P(Z){var X=i(Z,c.vertex,c.fragment);return X.attributes.position.location=0,X.attributes.color.location=2,X.attributes.uv.location=3,X.attributes.normal.location=4,X}function I(Z){var X=i(Z,A.vertex,A.fragment);return X.attributes.position.location=0,X.attributes.color.location=2,X.attributes.uv.location=3,X}function U(Z){var X=i(Z,k.vertex,k.fragment);return X.attributes.position.location=0,X.attributes.color.location=2,X.attributes.uv.location=3,X.attributes.pointSize.location=4,X}function O(Z){var X=i(Z,p.vertex,p.fragment);return X.attributes.position.location=0,X.attributes.id.location=1,X}function G(Z){var X=i(Z,w.vertex,w.fragment);return X.attributes.position.location=0,X.attributes.id.location=1,X.attributes.pointSize.location=4,X}function $(Z){var X=i(Z,h.vertex,h.fragment);return X.attributes.position.location=0,X}function tt(Z,X){arguments.length===1&&(X=Z,Z=X.gl);var J=Z.getExtension("OES_standard_derivatives")||Z.getExtension("MOZ_OES_standard_derivatives")||Z.getExtension("WEBKIT_OES_standard_derivatives");if(!J)throw new Error("derivatives not supported");var st=P(Z),at=I(Z),lt=U(Z),F=O(Z),H=G(Z),et=$(Z),q=d(Z,g(new Uint8Array([255,255,255,255]),[1,1,4]));q.generateMipmap(),q.minFilter=Z.LINEAR_MIPMAP_LINEAR,q.magFilter=Z.LINEAR;var W=r(Z),K=r(Z),nt=r(Z),it=r(Z),ot=r(Z),ct=n(Z,[{buffer:W,type:Z.FLOAT,size:3},{buffer:ot,type:Z.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:K,type:Z.FLOAT,size:4},{buffer:nt,type:Z.FLOAT,size:2},{buffer:it,type:Z.FLOAT,size:3}]),bt=r(Z),ut=r(Z),pt=r(Z),yt=r(Z),Tt=n(Z,[{buffer:bt,type:Z.FLOAT,size:3},{buffer:yt,type:Z.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:ut,type:Z.FLOAT,size:4},{buffer:pt,type:Z.FLOAT,size:2}]),kt=r(Z),zt=r(Z),Rt=r(Z),Gt=r(Z),wt=r(Z),It=n(Z,[{buffer:kt,type:Z.FLOAT,size:3},{buffer:wt,type:Z.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:zt,type:Z.FLOAT,size:4},{buffer:Rt,type:Z.FLOAT,size:2},{buffer:Gt,type:Z.FLOAT,size:1}]),$t=r(Z),Qt=n(Z,[{buffer:$t,type:Z.FLOAT,size:3}]),Nt=new S(Z,q,st,at,lt,F,H,et,W,ot,K,nt,it,ct,bt,yt,ut,pt,Tt,kt,wt,zt,Rt,Gt,It,$t,Qt);return Nt.update(X),Nt}m.exports=tt},{"./lib/closest-point":110,"./lib/shaders":111,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259,normals:261,"simplicial-complex-contour":291,"typedarray-pool":308}],113:[function(l,m,x){m.exports=d;var t=l("gl-buffer"),a=l("gl-shader"),i=l("./shaders");function r(s,o,y){this.plot=s,this.vbo=o,this.shader=y}var n=r.prototype;n.bind=function(){var s=this.shader;this.vbo.bind(),this.shader.bind(),s.attributes.coord.pointer(),s.uniforms.screenBox=this.plot.screenBox},n.drawBox=function(){var s=[0,0],o=[0,0];return function(y,g,b,v,_){var u=this.plot,T=this.shader,c=u.gl;s[0]=y,s[1]=g,o[0]=b,o[1]=v,T.uniforms.lo=s,T.uniforms.hi=o,T.uniforms.color=_,c.drawArrays(c.TRIANGLE_STRIP,0,4)}}(),n.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function d(s){var o=s.gl,y=t(o,[0,0,0,1,1,0,1,1]),g=a(o,i.boxVert,i.lineFrag);return new r(s,y,g)}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],114:[function(l,m,x){m.exports=o;var t=l("gl-buffer"),a=l("gl-shader"),i=l("binary-search-bounds"),r=l("./shaders");function n(y,g,b,v){this.plot=y,this.vbo=g,this.shader=b,this.tickShader=v,this.ticks=[[],[]]}function d(y,g){return y-g}var s=n.prototype;s.draw=function(){var y=[0,0],g=[0,0],b=[0,0];return function(){for(var v=this.plot,_=this.vbo,u=this.shader,T=this.ticks,c=v.gl,A=v._tickBounds,k=v.dataBox,p=v.viewBox,w=v.gridLineWidth,h=v.gridLineColor,D=v.gridLineEnable,S=v.pixelRatio,M=0;M<2;++M){var L=A[M],R=A[M+2],z=R-L,P=.5*(k[M+2]+k[M]),I=k[M+2]-k[M];g[M]=2*z/I,y[M]=2*(L-P)/I}u.bind(),_.bind(),u.attributes.dataCoord.pointer(),u.uniforms.dataShift=y,u.uniforms.dataScale=g;for(var U=0,M=0;M<2;++M){b[0]=b[1]=0,b[M]=1,u.uniforms.dataAxis=b,u.uniforms.lineWidth=w[M]/(p[M+2]-p[M])*S,u.uniforms.color=h[M];var O=T[M].length*6;D[M]&&O&&c.drawArrays(c.TRIANGLES,U,O),U+=O}}}(),s.drawTickMarks=function(){var y=[0,0],g=[0,0],b=[1,0],v=[0,1],_=[0,0],u=[0,0];return function(){for(var T=this.plot,c=this.vbo,A=this.tickShader,k=this.ticks,p=T.gl,w=T._tickBounds,h=T.dataBox,D=T.viewBox,S=T.pixelRatio,M=T.screenBox,L=M[2]-M[0],R=M[3]-M[1],z=D[2]-D[0],P=D[3]-D[1],I=0;I<2;++I){var U=w[I],O=w[I+2],G=O-U,$=.5*(h[I+2]+h[I]),tt=h[I+2]-h[I];g[I]=2*G/tt,y[I]=2*(U-$)/tt}g[0]*=z/L,y[0]*=z/L,g[1]*=P/R,y[1]*=P/R,A.bind(),c.bind(),A.attributes.dataCoord.pointer();var Z=A.uniforms;Z.dataShift=y,Z.dataScale=g;var X=T.tickMarkLength,J=T.tickMarkWidth,st=T.tickMarkColor,at=0,lt=k[0].length*6,F=Math.min(i.ge(k[0],(h[0]-w[0])/(w[2]-w[0]),d),k[0].length),H=Math.min(i.gt(k[0],(h[2]-w[0])/(w[2]-w[0]),d),k[0].length),et=at+6*F,q=6*Math.max(0,H-F),W=Math.min(i.ge(k[1],(h[1]-w[1])/(w[3]-w[1]),d),k[1].length),K=Math.min(i.gt(k[1],(h[3]-w[1])/(w[3]-w[1]),d),k[1].length),nt=lt+6*W,it=6*Math.max(0,K-W);_[0]=2*(D[0]-X[1])/L-1,_[1]=(D[3]+D[1])/R-1,u[0]=X[1]*S/L,u[1]=J[1]*S/R,it&&(Z.color=st[1],Z.tickScale=u,Z.dataAxis=v,Z.screenOffset=_,p.drawArrays(p.TRIANGLES,nt,it)),_[0]=(D[2]+D[0])/L-1,_[1]=2*(D[1]-X[0])/R-1,u[0]=J[0]*S/L,u[1]=X[0]*S/R,q&&(Z.color=st[0],Z.tickScale=u,Z.dataAxis=b,Z.screenOffset=_,p.drawArrays(p.TRIANGLES,et,q)),_[0]=2*(D[2]+X[3])/L-1,_[1]=(D[3]+D[1])/R-1,u[0]=X[3]*S/L,u[1]=J[3]*S/R,it&&(Z.color=st[3],Z.tickScale=u,Z.dataAxis=v,Z.screenOffset=_,p.drawArrays(p.TRIANGLES,nt,it)),_[0]=(D[2]+D[0])/L-1,_[1]=2*(D[3]+X[2])/R-1,u[0]=J[2]*S/L,u[1]=X[2]*S/R,q&&(Z.color=st[2],Z.tickScale=u,Z.dataAxis=b,Z.screenOffset=_,p.drawArrays(p.TRIANGLES,et,q))}}(),s.update=function(){var y=[1,1,-1,-1,1,-1],g=[1,-1,1,1,-1,-1];return function(b){var v=b.ticks,_=b.bounds,u=new Float32Array(6*3*(v[0].length+v[1].length));this.plot.zeroLineEnable;for(var T=0,c=[[],[]],A=0;A<2;++A)for(var k=c[A],p=v[A],w=_[A],h=_[A+2],D=0;D<p.length;++D){var S=(p[D].x-w)/(h-w);k.push(S);for(var M=0;M<6;++M)u[T++]=S,u[T++]=y[M],u[T++]=g[M]}this.ticks=c,this.vbo.update(u)}}(),s.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()};function o(y){var g=y.gl,b=t(g),v=a(g,r.gridVert,r.gridFrag),_=a(g,r.tickVert,r.gridFrag),u=new n(y,b,v,_);return u}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132}],115:[function(l,m,x){m.exports=d;var t=l("gl-buffer"),a=l("gl-shader"),i=l("./shaders");function r(s,o,y){this.plot=s,this.vbo=o,this.shader=y}var n=r.prototype;n.bind=function(){var s=this.shader;this.vbo.bind(),this.shader.bind(),s.attributes.coord.pointer(),s.uniforms.screenBox=this.plot.screenBox},n.drawLine=function(){var s=[0,0],o=[0,0];return function(y,g,b,v,_,u){var T=this.plot,c=this.shader,A=T.gl;s[0]=y,s[1]=g,o[0]=b,o[1]=v,c.uniforms.start=s,c.uniforms.end=o,c.uniforms.width=_*T.pixelRatio,c.uniforms.color=u,A.drawArrays(A.TRIANGLE_STRIP,0,4)}}(),n.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function d(s){var o=s.gl,y=t(o,[-1,-1,-1,1,1,-1,1,1]),g=a(o,i.lineVert,i.lineFrag),b=new r(s,y,g);return b}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],116:[function(l,m,x){var t=l("glslify"),a=t([`precision lowp float;
#define GLSLIFY 1
uniform vec4 color;
void main() {
  gl_FragColor = vec4(color.xyz * color.w, color.w);
}
`]);m.exports={lineVert:t([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 start, end;
uniform float width;

vec2 perp(vec2 v) {
  return vec2(v.y, -v.x);
}

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  vec2 delta = normalize(perp(start - end));
  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));
  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);
}
`]),lineFrag:a,textVert:t([`#define GLSLIFY 1
attribute vec3 textCoordinate;

uniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;
uniform float angle;

void main() {
  float dataOffset  = textCoordinate.z;
  vec2 glyphOffset  = textCoordinate.xy;
  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));
  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +
    glyphMatrix * glyphOffset * textScale + screenOffset;
  gl_Position = vec4(screenCoordinate, 0, 1);
}
`]),textFrag:a,gridVert:t([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale;
uniform float lineWidth;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;
  gl_Position = vec4(pos, 0, 1);
}
`]),gridFrag:a,boxVert:t([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 lo, hi;

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);
}
`]),tickVert:t([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);
}
`])}},{glslify:231}],117:[function(l,m,x){m.exports=o;var t=l("gl-buffer"),a=l("gl-shader"),i=l("text-cache"),r=l("binary-search-bounds"),n=l("./shaders");function d(y,g,b){this.plot=y,this.vbo=g,this.shader=b,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var s=d.prototype;s.drawTicks=function(){var y=[0,0],g=[0,0],b=[0,0];return function(v){var _=this.plot,u=this.shader,T=this.tickX[v],c=this.tickOffset[v],A=_.gl,k=_.viewBox,p=_.dataBox,w=_.screenBox,h=_.pixelRatio,D=_.tickEnable,S=_.tickPad,M=_.tickColor,L=_.tickAngle,R=_.labelEnable,z=_.labelPad,P=_.labelColor,I=_.labelAngle,U=this.labelOffset[v],O=this.labelCount[v],G=r.lt(T,p[v]),$=r.le(T,p[v+2]);y[0]=y[1]=0,y[v]=1,g[v]=(k[2+v]+k[v])/(w[2+v]-w[v])-1;var tt=2/w[2+(v^1)]-w[v^1];g[v^1]=tt*k[v^1]-1,D[v]&&(g[v^1]-=tt*h*S[v],G<$&&c[$]>c[G]&&(u.uniforms.dataAxis=y,u.uniforms.screenOffset=g,u.uniforms.color=M[v],u.uniforms.angle=L[v],A.drawArrays(A.TRIANGLES,c[G],c[$]-c[G]))),R[v]&&O&&(g[v^1]-=tt*h*z[v],u.uniforms.dataAxis=b,u.uniforms.screenOffset=g,u.uniforms.color=P[v],u.uniforms.angle=I[v],A.drawArrays(A.TRIANGLES,U,O)),g[v^1]=tt*k[2+(v^1)]-1,D[v+2]&&(g[v^1]+=tt*h*S[v+2],G<$&&c[$]>c[G]&&(u.uniforms.dataAxis=y,u.uniforms.screenOffset=g,u.uniforms.color=M[v+2],u.uniforms.angle=L[v+2],A.drawArrays(A.TRIANGLES,c[G],c[$]-c[G]))),R[v+2]&&O&&(g[v^1]+=tt*h*z[v+2],u.uniforms.dataAxis=b,u.uniforms.screenOffset=g,u.uniforms.color=P[v+2],u.uniforms.angle=I[v+2],A.drawArrays(A.TRIANGLES,U,O))}}(),s.drawTitle=function(){var y=[0,0],g=[0,0];return function(){var b=this.plot,v=this.shader,_=b.gl,u=b.screenBox,T=b.titleCenter,c=b.titleAngle,A=b.titleColor,k=b.pixelRatio;if(!!this.titleCount){for(var p=0;p<2;++p)g[p]=2*(T[p]*k-u[p])/(u[2+p]-u[p])-1;v.bind(),v.uniforms.dataAxis=y,v.uniforms.screenOffset=g,v.uniforms.angle=c,v.uniforms.color=A,_.drawArrays(_.TRIANGLES,this.titleOffset,this.titleCount)}}}(),s.bind=function(){var y=[0,0],g=[0,0],b=[0,0];return function(){var v=this.plot,_=this.shader,u=v._tickBounds,T=v.dataBox,c=v.screenBox,A=v.viewBox;_.bind();for(var k=0;k<2;++k){var p=u[k],w=u[k+2],h=w-p,D=.5*(T[k+2]+T[k]),S=T[k+2]-T[k],M=A[k],L=A[k+2],R=L-M,z=c[k],P=c[k+2],I=P-z;g[k]=2*h/S*R/I,y[k]=2*(p-D)/S*R/I}b[1]=2*v.pixelRatio/(c[3]-c[1]),b[0]=b[1]*(c[3]-c[1])/(c[2]-c[0]),_.uniforms.dataScale=g,_.uniforms.dataShift=y,_.uniforms.textScale=b,this.vbo.bind(),_.attributes.textCoordinate.pointer()}}(),s.update=function(y){var g=[],b=y.ticks,v=y.bounds,_,u,T,c,A;for(A=0;A<2;++A){var k=[Math.floor(g.length/3)],p=[-1/0],w=b[A];for(_=0;_<w.length;++_){var h=w[_],D=h.x,S=h.text,M=h.font||"sans-serif";c=h.fontSize||12;for(var L=1/(v[A+2]-v[A]),R=v[A],z=S.split(`
`),P=0;P<z.length;P++)for(T=i(M,z[P]).data,u=0;u<T.length;u+=2)g.push(T[u]*c,-T[u+1]*c-P*c*1.2,(D-R)*L);k.push(Math.floor(g.length/3)),p.push(D)}this.tickOffset[A]=k,this.tickX[A]=p}for(A=0;A<2;++A){for(this.labelOffset[A]=Math.floor(g.length/3),T=i(y.labelFont[A],y.labels[A],{textAlign:"center"}).data,c=y.labelSize[A],_=0;_<T.length;_+=2)g.push(T[_]*c,-T[_+1]*c,0);this.labelCount[A]=Math.floor(g.length/3)-this.labelOffset[A]}for(this.titleOffset=Math.floor(g.length/3),T=i(y.titleFont,y.title).data,c=y.titleSize,_=0;_<T.length;_+=2)g.push(T[_]*c,-T[_+1]*c,0);this.titleCount=Math.floor(g.length/3)-this.titleOffset,this.vbo.update(g)},s.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function o(y){var g=y.gl,b=t(g),v=a(g,n.textVert,n.textFrag),_=new d(y,b,v);return _}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"text-cache":303}],118:[function(l,m,x){m.exports=g;var t=l("gl-select-static"),a=l("./lib/grid"),i=l("./lib/text"),r=l("./lib/line"),n=l("./lib/box");function d(b,v){this.gl=b,this.pickBuffer=v,this.screenBox=[0,0,b.drawingBufferWidth,b.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var s=d.prototype;s.setDirty=function(){this.dirty=this.pickDirty=!0},s.setOverlayDirty=function(){this.dirty=!0},s.nextDepthValue=function(){return this._depthCounter++/65536},s.draw=function(){return function(){var b=this.gl,v=this.screenBox,_=this.viewBox,u=this.dataBox,T=this.pixelRatio,c=this.grid,A=this.line,k=this.text,p=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),!!this.dirty){if(this.dirty=!1,b.bindFramebuffer(b.FRAMEBUFFER,null),b.enable(b.SCISSOR_TEST),b.disable(b.DEPTH_TEST),b.depthFunc(b.LESS),b.depthMask(!1),b.enable(b.BLEND),b.blendEquation(b.FUNC_ADD,b.FUNC_ADD),b.blendFunc(b.ONE,b.ONE_MINUS_SRC_ALPHA),this.borderColor){b.scissor(v[0],v[1],v[2]-v[0],v[3]-v[1]);var w=this.borderColor;b.clearColor(w[0]*w[3],w[1]*w[3],w[2]*w[3],w[3]),b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT)}b.scissor(_[0],_[1],_[2]-_[0],_[3]-_[1]),b.viewport(_[0],_[1],_[2]-_[0],_[3]-_[1]);var h=this.backgroundColor;b.clearColor(h[0]*h[3],h[1]*h[3],h[2]*h[3],h[3]),b.clear(b.COLOR_BUFFER_BIT),c.draw();var D=this.zeroLineEnable,S=this.zeroLineColor,M=this.zeroLineWidth;if(D[0]||D[1]){A.bind();for(var L=0;L<2;++L)if(!(!D[L]||!(u[L]<=0&&u[L+2]>=0))){var R=v[L]-u[L]*(v[L+2]-v[L])/(u[L+2]-u[L]);L===0?A.drawLine(R,v[1],R,v[3],M[L],S[L]):A.drawLine(v[0],R,v[2],R,M[L],S[L])}}for(var L=0;L<p.length;++L)p[L].draw();b.viewport(v[0],v[1],v[2]-v[0],v[3]-v[1]),b.scissor(v[0],v[1],v[2]-v[0],v[3]-v[1]),this.grid.drawTickMarks(),A.bind();var z=this.borderLineEnable,P=this.borderLineWidth,I=this.borderLineColor;z[1]&&A.drawLine(_[0],_[1]-.5*P[1]*T,_[0],_[3]+.5*P[3]*T,P[1],I[1]),z[0]&&A.drawLine(_[0]-.5*P[0]*T,_[1],_[2]+.5*P[2]*T,_[1],P[0],I[0]),z[3]&&A.drawLine(_[2],_[1]-.5*P[1]*T,_[2],_[3]+.5*P[3]*T,P[3],I[3]),z[2]&&A.drawLine(_[0]-.5*P[0]*T,_[3],_[2]+.5*P[2]*T,_[3],P[2],I[2]),k.bind();for(var L=0;L<2;++L)k.drawTicks(L);this.titleEnable&&k.drawTitle();for(var U=this.overlays,L=0;L<U.length;++L)U[L].draw();b.disable(b.SCISSOR_TEST),b.disable(b.BLEND),b.depthMask(!0)}}}(),s.drawPick=function(){return function(){if(!this.static){var b=this.pickBuffer;this.gl,this._pickTimeout=null,b.begin();for(var v=1,_=this.objects,u=0;u<_.length;++u)v=_[u].drawPick(v);b.end()}}}(),s.pick=function(){return function(b,v){if(!this.static){var _=this.pixelRatio,u=this.pickPixelRatio,T=this.viewBox,c=Math.round((b-T[0]/_)*u)|0,A=Math.round((v-T[1]/_)*u)|0,k=this.pickBuffer.query(c,A,this.pickRadius);if(!k)return null;for(var p=k.id+(k.value[0]<<8)+(k.value[1]<<16)+(k.value[2]<<24),w=this.objects,h=0;h<w.length;++h){var D=w[h].pick(c,A,p);if(D)return D}return null}}}();function o(b){for(var v=b.slice(),_=0;_<v.length;++_)v[_]=v[_].slice();return v}function y(b,v){return b.x-v.x}s.setScreenBox=function(b){var v=this.screenBox,_=this.pixelRatio;v[0]=Math.round(b[0]*_)|0,v[1]=Math.round(b[1]*_)|0,v[2]=Math.round(b[2]*_)|0,v[3]=Math.round(b[3]*_)|0,this.setDirty()},s.setDataBox=function(b){var v=this.dataBox,_=v[0]!==b[0]||v[1]!==b[1]||v[2]!==b[2]||v[3]!==b[3];_&&(v[0]=b[0],v[1]=b[1],v[2]=b[2],v[3]=b[3],this.setDirty())},s.setViewBox=function(b){var v=this.pixelRatio,_=this.viewBox;_[0]=Math.round(b[0]*v)|0,_[1]=Math.round(b[1]*v)|0,_[2]=Math.round(b[2]*v)|0,_[3]=Math.round(b[3]*v)|0;var u=this.pickPixelRatio;this.pickBuffer.shape=[Math.round((b[2]-b[0])*u)|0,Math.round((b[3]-b[1])*u)|0],this.setDirty()},s.update=function(b){b=b||{};var v=this.gl;this.pixelRatio=b.pixelRatio||1;var _=this.pixelRatio;this.pickPixelRatio=Math.max(_,1),this.setScreenBox(b.screenBox||[0,0,v.drawingBufferWidth/_,v.drawingBufferHeight/_]),this.screenBox,this.setViewBox(b.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/_,.125*(this.screenBox[3]-this.screenBox[1])/_,.875*(this.screenBox[2]-this.screenBox[0])/_,.875*(this.screenBox[3]-this.screenBox[1])/_]);var u=this.viewBox,T=(u[2]-u[0])/(u[3]-u[1]);this.setDataBox(b.dataBox||[-10,-10/T,10,10/T]),this.borderColor=b.borderColor!==!1?(b.borderColor||[0,0,0,0]).slice():!1,this.backgroundColor=(b.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(b.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(b.gridLineWidth||[1,1]).slice(),this.gridLineColor=o(b.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(b.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(b.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=o(b.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(b.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(b.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=o(b.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(b.titleCenter||[.5*(u[0]+u[2])/_,(u[3]+120)/_]).slice(),this.titleEnable=!("titleEnable"in b)||!!b.titleEnable,this.titleAngle=b.titleAngle||0,this.titleColor=(b.titleColor||[0,0,0,1]).slice(),this.labelPad=(b.labelPad||[15,15,15,15]).slice(),this.labelAngle=(b.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(b.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=o(b.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(b.tickPad||[15,15,15,15]).slice(),this.tickAngle=(b.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(b.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=o(b.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(b.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(b.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=o(b.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var c=b.ticks||[[],[]],A=this._tickBounds;A[0]=A[1]=1/0,A[2]=A[3]=-1/0;for(var k=0;k<2;++k){var p=c[k].slice(0);p.length!==0&&(p.sort(y),A[k]=Math.min(A[k],p[0].x),A[k+2]=Math.max(A[k+2],p[p.length-1].x))}this.grid.update({bounds:A,ticks:c}),this.text.update({bounds:A,ticks:c,labels:b.labels||["x","y"],labelSize:b.labelSize||[12,12],labelFont:b.labelFont||["sans-serif","sans-serif"],title:b.title||"",titleSize:b.titleSize||18,titleFont:b.titleFont||"sans-serif"}),this.static=!!b.static,this.setDirty()},s.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var b=this.objects.length-1;b>=0;--b)this.objects[b].dispose();this.objects.length=0;for(var b=this.overlays.length-1;b>=0;--b)this.overlays[b].dispose();this.overlays.length=0,this.gl=null},s.addObject=function(b){this.objects.indexOf(b)<0&&(this.objects.push(b),this.setDirty())},s.removeObject=function(b){for(var v=this.objects,_=0;_<v.length;++_)if(v[_]===b){v.splice(_,1),this.setDirty();break}},s.addOverlay=function(b){this.overlays.indexOf(b)<0&&(this.overlays.push(b),this.setOverlayDirty())},s.removeOverlay=function(b){for(var v=this.overlays,_=0;_<v.length;++_)if(v[_]===b){v.splice(_,1),this.setOverlayDirty();break}};function g(b){var v=b.gl,_=t(v,[v.drawingBufferWidth,v.drawingBufferHeight]),u=new d(v,_);return u.grid=a(u),u.text=i(u),u.line=r(u),u.box=n(u),u.update(b),u}},{"./lib/box":113,"./lib/grid":114,"./lib/line":115,"./lib/text":117,"gl-select-static":131}],119:[function(l,m,x){m.exports=s;var t=l("right-now"),a=l("3d-view"),i=l("mouse-change"),r=l("mouse-wheel"),n=l("mouse-event-offset"),d=l("has-passive-events");function s(o,y){o=o||document.body,y=y||{};var g=[.01,1/0];"distanceLimits"in y&&(g[0]=y.distanceLimits[0],g[1]=y.distanceLimits[1]),"zoomMin"in y&&(g[0]=y.zoomMin),"zoomMax"in y&&(g[1]=y.zoomMax);var b=a({center:y.center||[0,0,0],up:y.up||[0,1,0],eye:y.eye||[0,0,10],mode:y.mode||"orbit",distanceLimits:g}),v=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],_=0,u=o.clientWidth,T=o.clientHeight,c={keyBindingMode:"rotate",enableWheel:!0,view:b,element:o,delay:y.delay||16,rotateSpeed:y.rotateSpeed||1,zoomSpeed:y.zoomSpeed||1,translateSpeed:y.translateSpeed||1,flipX:!!y.flipX,flipY:!!y.flipY,modes:b.modes,_ortho:y._ortho||y.projection&&y.projection.type==="orthographic"||!1,tick:function(){var A=t(),k=this.delay,p=A-2*k;b.idle(A-k),b.recalcMatrix(p),b.flush(A-(100+k*2));for(var w=!0,h=b.computedMatrix,D=0;D<16;++D)w=w&&v[D]===h[D],v[D]=h[D];var S=o.clientWidth===u&&o.clientHeight===T;return u=o.clientWidth,T=o.clientHeight,w?!S:(_=Math.exp(b.computedRadius[0]),!0)},lookAt:function(A,k,p){b.lookAt(b.lastT(),A,k,p)},rotate:function(A,k,p){b.rotate(b.lastT(),A,k,p)},pan:function(A,k,p){b.pan(b.lastT(),A,k,p)},translate:function(A,k,p){b.translate(b.lastT(),A,k,p)}};return Object.defineProperties(c,{matrix:{get:function(){return b.computedMatrix},set:function(A){return b.setMatrix(b.lastT(),A),b.computedMatrix},enumerable:!0},mode:{get:function(){return b.getMode()},set:function(A){var k=b.computedUp.slice(),p=b.computedEye.slice(),w=b.computedCenter.slice();if(b.setMode(A),A==="turntable"){var h=t();b._active.lookAt(h,p,w,k),b._active.lookAt(h+500,p,w,[0,0,1]),b._active.flush(h)}return b.getMode()},enumerable:!0},center:{get:function(){return b.computedCenter},set:function(A){return b.lookAt(b.lastT(),null,A),b.computedCenter},enumerable:!0},eye:{get:function(){return b.computedEye},set:function(A){return b.lookAt(b.lastT(),A),b.computedEye},enumerable:!0},up:{get:function(){return b.computedUp},set:function(A){return b.lookAt(b.lastT(),null,null,A),b.computedUp},enumerable:!0},distance:{get:function(){return _},set:function(A){return b.setDistance(b.lastT(),A),A},enumerable:!0},distanceLimits:{get:function(){return b.getDistanceLimits(g)},set:function(A){return b.setDistanceLimits(A),A},enumerable:!0}}),o.addEventListener("contextmenu",function(A){return A.preventDefault(),!1}),c._lastX=-1,c._lastY=-1,c._lastMods={shift:!1,control:!1,alt:!1,meta:!1},c.enableMouseListeners=function(){c.mouseListener=i(o,A),o.addEventListener("touchstart",function(k){var p=n(k.changedTouches[0],o);A(0,p[0],p[1],c._lastMods),A(1,p[0],p[1],c._lastMods)},d?{passive:!0}:!1),o.addEventListener("touchmove",function(k){var p=n(k.changedTouches[0],o);A(1,p[0],p[1],c._lastMods),k.preventDefault()},d?{passive:!1}:!1),o.addEventListener("touchend",function(k){A(0,c._lastX,c._lastY,c._lastMods)},d?{passive:!0}:!1);function A(k,p,w,h){var D=c.keyBindingMode;if(D!==!1){var S=D==="rotate",M=D==="pan",L=D==="zoom",R=!!h.control,z=!!h.alt,P=!!h.shift,I=!!(k&1),U=!!(k&2),O=!!(k&4),G=1/o.clientHeight,$=G*(p-c._lastX),tt=G*(w-c._lastY),Z=c.flipX?1:-1,X=c.flipY?1:-1,J=Math.PI*c.rotateSpeed,st=t();if(c._lastX!==-1&&c._lastY!==-1&&((S&&I&&!R&&!z&&!P||I&&!R&&!z&&P)&&b.rotate(st,Z*J*$,-X*J*tt,0),(M&&I&&!R&&!z&&!P||U||I&&R&&!z&&!P)&&b.pan(st,-c.translateSpeed*$*_,c.translateSpeed*tt*_,0),L&&I&&!R&&!z&&!P||O||I&&!R&&z&&!P)){var at=-c.zoomSpeed*tt/window.innerHeight*(st-b.lastT())*100;b.pan(st,0,0,_*(Math.exp(at)-1))}return c._lastX=p,c._lastY=w,c._lastMods=h,!0}}c.wheelListener=r(o,function(k,p){if(c.keyBindingMode!==!1&&!!c.enableWheel){var w=c.flipX?1:-1,h=c.flipY?1:-1,D=t();if(Math.abs(k)>Math.abs(p))b.rotate(D,0,0,-k*w*Math.PI*c.rotateSpeed/window.innerWidth);else if(!c._ortho){var S=-c.zoomSpeed*h*p/window.innerHeight*(D-b.lastT())/20;b.pan(D,0,0,_*(Math.exp(S)-1))}}},!0)},c.enableMouseListeners(),c}},{"3d-view":7,"has-passive-events":232,"mouse-change":247,"mouse-event-offset":248,"mouse-wheel":250,"right-now":278}],120:[function(l,m,x){var t=l("glslify"),a=l("gl-shader"),i=t([`precision mediump float;
#define GLSLIFY 1
attribute vec2 position;
varying vec2 uv;
void main() {
  uv = position;
  gl_Position = vec4(position, 0, 1);
}`]),r=t([`precision mediump float;
#define GLSLIFY 1

uniform sampler2D accumBuffer;
varying vec2 uv;

void main() {
  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));
  gl_FragColor = min(vec4(1,1,1,1), accum);
}`]);m.exports=function(n){return a(n,i,r,null,[{name:"position",type:"vec2"}])}},{"gl-shader":132,glslify:231}],121:[function(l,m,x){var t=l("./camera.js"),a=l("gl-axes3d"),i=l("gl-axes3d/properties"),r=l("gl-spikes3d"),n=l("gl-select-static"),d=l("gl-fbo"),s=l("a-big-triangle"),o=l("mouse-change"),y=l("gl-mat4/perspective"),g=l("gl-mat4/ortho"),b=l("./lib/shader"),v=l("is-mobile")({tablet:!0,featureDetect:!0});m.exports={createScene:A,createCamera:t};function _(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function u(p,w){var h=null;try{h=p.getContext("webgl",w),h||(h=p.getContext("experimental-webgl",w))}catch{return null}return h}function T(p){var w=Math.round(Math.log(Math.abs(p))/Math.log(10));if(w<0){var h=Math.round(Math.pow(10,-w));return Math.ceil(p*h)/h}else if(w>0){var h=Math.round(Math.pow(10,w));return Math.ceil(p/h)*h}return Math.ceil(p)}function c(p){return typeof p=="boolean"?p:!0}function A(p){p=p||{},p.camera=p.camera||{};var w=p.canvas;if(!w)if(w=document.createElement("canvas"),p.container){var h=p.container;h.appendChild(w)}else document.body.appendChild(w);var D=p.gl;if(D||(p.glOptions&&(v=!!p.glOptions.preserveDrawingBuffer),D=u(w,p.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:v})),!D)throw new Error("webgl not supported");var S=p.bounds||[[-10,-10,-10],[10,10,10]],M=new _,L=d(D,D.drawingBufferWidth,D.drawingBufferHeight,{preferFloat:!v}),R=b(D),z=p.cameraObject&&p.cameraObject._ortho===!0||p.camera.projection&&p.camera.projection.type==="orthographic"||!1,P={eye:p.camera.eye||[2,0,0],center:p.camera.center||[0,0,0],up:p.camera.up||[0,1,0],zoomMin:p.camera.zoomMax||.1,zoomMax:p.camera.zoomMin||100,mode:p.camera.mode||"turntable",_ortho:z},I=p.axes||{},U=a(D,I);U.enable=!I.disable;var O=p.spikes||{},G=r(D,O),$=[],tt=[],Z=[],X=[],J=!0,F=!0,st=new Array(16),at=new Array(16),lt={view:null,projection:st,model:at,_ortho:!1},F=!0,H=[D.drawingBufferWidth,D.drawingBufferHeight],et=p.cameraObject||t(w,P),q={gl:D,contextLost:!1,pixelRatio:p.pixelRatio||1,canvas:w,selection:M,camera:et,axes:U,axesPixels:null,spikes:G,bounds:S,objects:$,shape:H,aspect:p.aspectRatio||[1,1,1],pickRadius:p.pickRadius||10,zNear:p.zNear||.01,zFar:p.zFar||1e3,fovy:p.fovy||Math.PI/4,clearColor:p.clearColor||[0,0,0,0],autoResize:c(p.autoResize),autoBounds:c(p.autoBounds),autoScale:!!p.autoScale,autoCenter:c(p.autoCenter),clipToBounds:c(p.clipToBounds),snapToData:!!p.snapToData,onselect:p.onselect||null,onrender:p.onrender||null,onclick:p.onclick||null,cameraParams:lt,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(yt){this.aspect[0]=yt.x,this.aspect[1]=yt.y,this.aspect[2]=yt.z,F=!0},setBounds:function(yt,Tt){this.bounds[0][yt]=Tt.min,this.bounds[1][yt]=Tt.max},setClearColor:function(yt){this.clearColor=yt},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},W=[D.drawingBufferWidth/q.pixelRatio|0,D.drawingBufferHeight/q.pixelRatio|0];function K(){if(!q._stopped&&!!q.autoResize){var yt=w.parentNode,Tt=1,kt=1;yt&&yt!==document.body?(Tt=yt.clientWidth,kt=yt.clientHeight):(Tt=window.innerWidth,kt=window.innerHeight);var zt=Math.ceil(Tt*q.pixelRatio)|0,Rt=Math.ceil(kt*q.pixelRatio)|0;if(zt!==w.width||Rt!==w.height){w.width=zt,w.height=Rt;var Gt=w.style;Gt.position=Gt.position||"absolute",Gt.left="0px",Gt.top="0px",Gt.width=Tt+"px",Gt.height=kt+"px",J=!0}}}q.autoResize&&K(),window.addEventListener("resize",K);function nt(){for(var yt=$.length,Tt=X.length,kt=0;kt<Tt;++kt)Z[kt]=0;t:for(var kt=0;kt<yt;++kt){var zt=$[kt],Rt=zt.pickSlots;if(!Rt){tt[kt]=-1;continue}for(var Gt=0;Gt<Tt;++Gt)if(Z[Gt]+Rt<255){tt[kt]=Gt,zt.setPickBase(Z[Gt]+1),Z[Gt]+=Rt;continue t}var wt=n(D,H);tt[kt]=Tt,X.push(wt),Z.push(Rt),zt.setPickBase(1),Tt+=1}for(;Tt>0&&Z[Tt-1]===0;)Z.pop(),X.pop().dispose()}q.update=function(yt){q._stopped||(J=!0,F=!0)},q.add=function(yt){q._stopped||(yt.axes=U,$.push(yt),tt.push(-1),J=!0,F=!0,nt())},q.remove=function(yt){if(!q._stopped){var Tt=$.indexOf(yt);Tt<0||($.splice(Tt,1),tt.pop(),J=!0,F=!0,nt())}},q.dispose=function(){if(!q._stopped&&(q._stopped=!0,window.removeEventListener("resize",K),w.removeEventListener("webglcontextlost",it),q.mouseListener.enabled=!1,!q.contextLost)){U.dispose(),G.dispose();for(var yt=0;yt<$.length;++yt)$[yt].dispose();L.dispose();for(var yt=0;yt<X.length;++yt)X[yt].dispose();R.dispose(),D=null,U=null,G=null,$=[]}},q._mouseRotating=!1,q._prevButtons=0,q.enableMouseListeners=function(){q.mouseListener=o(w,function(yt,Tt,kt){if(!q._stopped){var zt=X.length,Rt=$.length,Gt=M.object;M.distance=1/0,M.mouse[0]=Tt,M.mouse[1]=kt,M.object=null,M.screen=null,M.dataCoordinate=M.dataPosition=null;var wt=!1;if(yt&&q._prevButtons)q._mouseRotating=!0;else{q._mouseRotating&&(F=!0),q._mouseRotating=!1;for(var It=0;It<zt;++It){var $t=X[It].query(Tt,W[1]-kt-1,q.pickRadius);if($t){if($t.distance>M.distance)continue;for(var Qt=0;Qt<Rt;++Qt){var Nt=$[Qt];if(tt[Qt]===It){var Pt=Nt.pick($t);Pt&&(M.buttons=yt,M.screen=$t.coord,M.distance=$t.distance,M.object=Nt,M.index=Pt.distance,M.dataPosition=Pt.position,M.dataCoordinate=Pt.dataCoordinate,M.data=Pt,wt=!0)}}}}}Gt&&Gt!==M.object&&(Gt.highlight&&Gt.highlight(null),J=!0),M.object&&(M.object.highlight&&M.object.highlight(M.data),J=!0),wt=wt||M.object!==Gt,wt&&q.onselect&&q.onselect(M),yt&1&&!(q._prevButtons&1)&&q.onclick&&q.onclick(M),q._prevButtons=yt}})};function it(){if(q.contextLost)return!0;D.isContextLost()&&(q.contextLost=!0,q.mouseListener.enabled=!1,q.selection.object=null,q.oncontextloss&&q.oncontextloss())}w.addEventListener("webglcontextlost",it);function ot(){if(!it()){D.colorMask(!0,!0,!0,!0),D.depthMask(!0),D.disable(D.BLEND),D.enable(D.DEPTH_TEST),D.depthFunc(D.LEQUAL);for(var yt=$.length,Tt=X.length,kt=0;kt<Tt;++kt){var zt=X[kt];zt.shape=W,zt.begin();for(var Rt=0;Rt<yt;++Rt)if(tt[Rt]===kt){var Gt=$[Rt];Gt.drawPick&&(Gt.pixelRatio=1,Gt.drawPick(lt))}zt.end()}}}var ct=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],bt=[ct[0].slice(),ct[1].slice()];function ut(){if(!it()){K();var yt=q.camera.tick();lt.view=q.camera.matrix,J=J||yt,F=F||yt,U.pixelRatio=q.pixelRatio,G.pixelRatio=q.pixelRatio;var Tt=$.length,kt=ct[0],zt=ct[1];kt[0]=kt[1]=kt[2]=1/0,zt[0]=zt[1]=zt[2]=-1/0;for(var Rt=0;Rt<Tt;++Rt){var Gt=$[Rt];Gt.pixelRatio=q.pixelRatio,Gt.axes=q.axes,J=J||!!Gt.dirty,F=F||!!Gt.dirty;var wt=Gt.bounds;if(wt)for(var It=wt[0],$t=wt[1],Qt=0;Qt<3;++Qt)kt[Qt]=Math.min(kt[Qt],It[Qt]),zt[Qt]=Math.max(zt[Qt],$t[Qt])}var Nt=q.bounds;if(q.autoBounds)for(var Qt=0;Qt<3;++Qt){if(zt[Qt]<kt[Qt])kt[Qt]=-1,zt[Qt]=1;else{kt[Qt]===zt[Qt]&&(kt[Qt]-=1,zt[Qt]+=1);var Pt=.05*(zt[Qt]-kt[Qt]);kt[Qt]=kt[Qt]-Pt,zt[Qt]=zt[Qt]+Pt}Nt[0][Qt]=kt[Qt],Nt[1][Qt]=zt[Qt]}for(var Yt=!1,Qt=0;Qt<3;++Qt)Yt=Yt||bt[0][Qt]!==Nt[0][Qt]||bt[1][Qt]!==Nt[1][Qt],bt[0][Qt]=Nt[0][Qt],bt[1][Qt]=Nt[1][Qt];if(F=F||Yt,J=J||Yt,!!J){if(Yt){for(var ve=[0,0,0],Rt=0;Rt<3;++Rt)ve[Rt]=T((Nt[1][Rt]-Nt[0][Rt])/10);U.autoTicks?U.update({bounds:Nt,tickSpacing:ve}):U.update({bounds:Nt})}var Re=D.drawingBufferWidth,ir=D.drawingBufferHeight;H[0]=Re,H[1]=ir,W[0]=Math.max(Re/q.pixelRatio,1)|0,W[1]=Math.max(ir/q.pixelRatio,1)|0,k(q,z);for(var Rt=0;Rt<Tt;++Rt){var Gt=$[Rt];Gt.axesBounds=Nt,q.clipToBounds&&(Gt.clipBounds=Nt)}M.object&&(q.snapToData?G.position=M.dataCoordinate:G.position=M.dataPosition,G.bounds=Nt),F&&(F=!1,ot()),q.axesPixels=i(q.axes,lt,Re,ir),q.onrender&&q.onrender(),D.bindFramebuffer(D.FRAMEBUFFER,null),D.viewport(0,0,Re,ir),q.clearRGBA(),D.depthMask(!0),D.colorMask(!0,!0,!0,!0),D.enable(D.DEPTH_TEST),D.depthFunc(D.LEQUAL),D.disable(D.BLEND),D.disable(D.CULL_FACE);var Ie=!1;U.enable&&(Ie=Ie||U.isTransparent(),U.draw(lt)),G.axes=U,M.object&&G.draw(lt),D.disable(D.CULL_FACE);for(var Rt=0;Rt<Tt;++Rt){var Gt=$[Rt];Gt.axes=U,Gt.pixelRatio=q.pixelRatio,Gt.isOpaque&&Gt.isOpaque()&&Gt.draw(lt),Gt.isTransparent&&Gt.isTransparent()&&(Ie=!0)}if(Ie){L.shape=H,L.bind(),D.clear(D.DEPTH_BUFFER_BIT),D.colorMask(!1,!1,!1,!1),D.depthMask(!0),D.depthFunc(D.LESS),U.enable&&U.isTransparent()&&U.drawTransparent(lt);for(var Rt=0;Rt<Tt;++Rt){var Gt=$[Rt];Gt.isOpaque&&Gt.isOpaque()&&Gt.draw(lt)}D.enable(D.BLEND),D.blendEquation(D.FUNC_ADD),D.blendFunc(D.ONE,D.ONE_MINUS_SRC_ALPHA),D.colorMask(!0,!0,!0,!0),D.depthMask(!1),D.clearColor(0,0,0,0),D.clear(D.COLOR_BUFFER_BIT),U.isTransparent()&&U.drawTransparent(lt);for(var Rt=0;Rt<Tt;++Rt){var Gt=$[Rt];Gt.isTransparent&&Gt.isTransparent()&&Gt.drawTransparent(lt)}D.bindFramebuffer(D.FRAMEBUFFER,null),D.blendFunc(D.ONE,D.ONE_MINUS_SRC_ALPHA),D.disable(D.DEPTH_TEST),R.bind(),L.color[0].bind(0),R.uniforms.accumBuffer=0,s(D),D.disable(D.BLEND)}J=!1;for(var Rt=0;Rt<Tt;++Rt)$[Rt].dirty=!1}}}function pt(){q._stopped||q.contextLost||(ut(),requestAnimationFrame(pt))}return q.enableMouseListeners(),pt(),q.redraw=function(){q._stopped||(J=!0,ut())},q}function k(p,w){var h=p.bounds,D=p.cameraParams,S=D.projection,M=D.model,L=p.gl.drawingBufferWidth,R=p.gl.drawingBufferHeight,z=p.zNear,P=p.zFar,I=p.fovy,U=L/R;w?(g(S,-U,U,-1,1,z,P),D._ortho=!0):(y(S,I,U,z,P),D._ortho=!1);for(var O=0;O<16;++O)M[O]=0;M[15]=1;for(var G=0,O=0;O<3;++O)G=Math.max(G,h[1][O]-h[0][O]);for(var O=0;O<3;++O)p.autoScale?M[5*O]=p.aspect[O]/(h[1][O]-h[0][O]):M[5*O]=1/G,p.autoCenter&&(M[12+O]=-M[5*O]*.5*(h[0][O]+h[1][O]))}},{"./camera.js":119,"./lib/shader":120,"a-big-triangle":8,"gl-axes3d":70,"gl-axes3d/properties":77,"gl-fbo":86,"gl-mat4/ortho":101,"gl-mat4/perspective":102,"gl-select-static":131,"gl-spikes3d":141,"is-mobile":238,"mouse-change":247}],122:[function(l,m,x){var t=l("glslify");x.pointVertex=t([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;

uniform mat3 matrix;
uniform float pointSize;
uniform float pointCloud;

highp float rand(vec2 co) {
  highp float a = 12.9898;
  highp float b = 78.233;
  highp float c = 43758.5453;
  highp float d = dot(co.xy, vec2(a, b));
  highp float e = mod(d, 3.14);
  return fract(sin(e) * c);
}

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
    // if we don't jitter the point size a bit, overall point cloud
    // saturation 'jumps' on zooming, which is disturbing and confusing
  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);
  if(pointCloud != 0.0) { // pointCloud is truthy
    // get the same square surface as circle would be
    gl_PointSize *= 0.886;
  }
}`]),x.pointFragment=t([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color, borderColor;
uniform float centerFraction;
uniform float pointCloud;

void main() {
  float radius;
  vec4 baseColor;
  if(pointCloud != 0.0) { // pointCloud is truthy
    if(centerFraction == 1.0) {
      gl_FragColor = color;
    } else {
      gl_FragColor = mix(borderColor, color, centerFraction);
    }
  } else {
    radius = length(2.0 * gl_PointCoord.xy - 1.0);
    if(radius > 1.0) {
      discard;
    }
    baseColor = mix(borderColor, color, step(radius, centerFraction));
    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);
  }
}
`]),x.pickVertex=t([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;

uniform mat3 matrix;
uniform float pointSize;
uniform vec4 pickOffset;

varying vec4 fragId;

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
  gl_PointSize = pointSize;

  vec4 id = pickId + pickOffset;
  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  fragId = id;
}
`]),x.pickFragment=t([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;

void main() {
  float radius = length(2.0 * gl_PointCoord.xy - 1.0);
  if(radius > 1.0) {
    discard;
  }
  gl_FragColor = fragId / 255.0;
}
`])},{glslify:231}],123:[function(l,m,x){var t=l("gl-shader"),a=l("gl-buffer"),i=l("typedarray-pool"),r=l("./lib/shader");m.exports=o;function n(y,g,b,v,_){this.plot=y,this.offsetBuffer=g,this.pickBuffer=b,this.shader=v,this.pickShader=_,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}var d=n.prototype;d.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},d.update=function(y){var g;y=y||{};function b(k,p){return k in y?y[k]:p}this.sizeMin=b("sizeMin",.5),this.sizeMax=b("sizeMax",20),this.color=b("color",[1,0,0,1]).slice(),this.areaRatio=b("areaRatio",1),this.borderColor=b("borderColor",[0,0,0,1]).slice(),this.blend=b("blend",!1);var v=y.positions.length>>>1,_=y.positions instanceof Float32Array,u=y.idToIndex instanceof Int32Array&&y.idToIndex.length>=v,T=y.positions,c=_?T:i.mallocFloat32(T.length),A=u?y.idToIndex:i.mallocInt32(v);if(_||c.set(T),!u)for(c.set(T),g=0;g<v;g++)A[g]=g;this.points=T,this.offsetBuffer.update(c),this.pickBuffer.update(A),_||i.free(c),u||i.free(A),this.pointCount=v,this.pickOffset=0};function s(y,g){var b=0,v=y.length>>>1,_;for(_=0;_<v;_++){var u=y[_*2],T=y[_*2+1];u>=g[0]&&u<=g[2]&&T>=g[1]&&T<=g[3]&&b++}return b}d.unifiedDraw=function(){var y=[1,0,0,0,1,0,0,0,1],g=[0,0,0,0];return function(b){var v=b!==void 0,_=v?this.pickShader:this.shader,u=this.plot.gl,T=this.plot.dataBox;if(this.pointCount===0)return b;var c=T[2]-T[0],A=T[3]-T[1],k=s(this.points,T),p=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(k,.33333)));y[0]=2/c,y[4]=2/A,y[6]=-2*T[0]/c-1,y[7]=-2*T[1]/A-1,this.offsetBuffer.bind(),_.bind(),_.attributes.position.pointer(),_.uniforms.matrix=y,_.uniforms.color=this.color,_.uniforms.borderColor=this.borderColor,_.uniforms.pointCloud=p<5,_.uniforms.pointSize=p,_.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),v&&(g[0]=b&255,g[1]=b>>8&255,g[2]=b>>16&255,g[3]=b>>24&255,this.pickBuffer.bind(),_.attributes.pickId.pointer(u.UNSIGNED_BYTE),_.uniforms.pickOffset=g,this.pickOffset=b);var w=u.getParameter(u.BLEND),h=u.getParameter(u.DITHER);return w&&!this.blend&&u.disable(u.BLEND),h&&u.disable(u.DITHER),u.drawArrays(u.POINTS,0,this.pointCount),w&&!this.blend&&u.enable(u.BLEND),h&&u.enable(u.DITHER),b+this.pointCount}}(),d.draw=d.unifiedDraw,d.drawPick=d.unifiedDraw,d.pick=function(y,g,b){var v=this.pickOffset,_=this.pointCount;if(b<v||b>=v+_)return null;var u=b-v,T=this.points;return{object:this,pointId:u,dataCoord:[T[2*u],T[2*u+1]]}};function o(y,g){var b=y.gl,v=a(b),_=a(b),u=t(b,r.pointVertex,r.pointFragment),T=t(b,r.pickVertex,r.pickFragment),c=new n(y,v,_,u,T);return c.update(g),y.addObject(c),c}},{"./lib/shader":122,"gl-buffer":78,"gl-shader":132,"typedarray-pool":308}],124:[function(l,m,x){m.exports=t;function t(a,i,r,n){var d=i[0],s=i[1],o=i[2],y=i[3],g=r[0],b=r[1],v=r[2],_=r[3],u,T,c,A,k;return T=d*g+s*b+o*v+y*_,T<0&&(T=-T,g=-g,b=-b,v=-v,_=-_),1-T>1e-6?(u=Math.acos(T),c=Math.sin(u),A=Math.sin((1-n)*u)/c,k=Math.sin(n*u)/c):(A=1-n,k=n),a[0]=A*d+k*g,a[1]=A*s+k*b,a[2]=A*o+k*v,a[3]=A*y+k*_,a}},{}],125:[function(l,m,x){m.exports=function(t){return!t&&t!==0?"":t.toString()}},{}],126:[function(l,m,x){var t=l("vectorize-text");m.exports=i;var a={};function i(r,n,d){var s=a[n];if(s||(s=a[n]={}),r in s)return s[r];var o={textAlign:"center",textBaseline:"middle",lineHeight:1,font:n,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}};o.triangles=!0;var y=t(r,o);o.triangles=!1;var g=t(r,o),b,v;if(d&&d!==1){for(b=0;b<y.positions.length;++b)for(v=0;v<y.positions[b].length;++v)y.positions[b][v]/=d;for(b=0;b<g.positions.length;++b)for(v=0;v<g.positions[b].length;++v)g.positions[b][v]/=d}var _=[[1/0,1/0],[-1/0,-1/0]],u=g.positions.length;for(b=0;b<u;++b){var T=g.positions[b];for(v=0;v<2;++v)_[0][v]=Math.min(_[0][v],T[v]),_[1][v]=Math.max(_[1][v],T[v])}return s[r]=[y,g,_]}},{"vectorize-text":311}],127:[function(l,m,x){var t=l("gl-shader"),a=l("glslify"),i=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform vec4 highlightId;
uniform float highlightScale;
uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = 1.0;
    if(distance(highlightId, id) < 0.0001) {
      scale = highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1);
    vec4 viewPosition = view * worldPosition;
    viewPosition = viewPosition / viewPosition.w;
    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),r=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float highlightScale, pixelRatio;
uniform vec4 highlightId;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = pixelRatio;
    if(distance(highlightId.bgr, id.bgr) < 0.001) {
      scale *= highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1.0);
    vec4 viewPosition = view * worldPosition;
    vec4 clipPosition = projection * viewPosition;
    clipPosition /= clipPosition.w;

    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),n=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform float highlightScale;
uniform vec4 highlightId;
uniform vec3 axes[2];
uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float scale, pixelRatio;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float lscale = pixelRatio * scale;
    if(distance(highlightId, id) < 0.0001) {
      lscale *= highlightScale;
    }

    vec4 clipCenter   = projection * view * model * vec4(position, 1);
    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;
    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = dataPosition;
  }
}
`]),d=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float opacity;

varying vec4 interpColor;
varying vec3 dataCoordinate;

void main() {
  if (
    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||
    interpColor.a * opacity == 0.
  ) discard;
  gl_FragColor = interpColor * opacity;
}
`]),s=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float pickGroup;

varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;

  gl_FragColor = vec4(pickGroup, pickId.bgr);
}`]),o=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],y={vertex:i,fragment:d,attributes:o},g={vertex:r,fragment:d,attributes:o},b={vertex:n,fragment:d,attributes:o},v={vertex:i,fragment:s,attributes:o},_={vertex:r,fragment:s,attributes:o},u={vertex:n,fragment:s,attributes:o};function T(c,A){var k=t(c,A),p=k.attributes;return p.position.location=0,p.color.location=1,p.glyph.location=2,p.id.location=3,k}x.createPerspective=function(c){return T(c,y)},x.createOrtho=function(c){return T(c,g)},x.createProject=function(c){return T(c,b)},x.createPickPerspective=function(c){return T(c,v)},x.createPickOrtho=function(c){return T(c,_)},x.createPickProject=function(c){return T(c,u)}},{"gl-shader":132,glslify:231}],128:[function(l,m,x){var t=l("is-string-blank"),a=l("gl-buffer"),i=l("gl-vao"),r=l("typedarray-pool"),n=l("gl-mat4/multiply"),d=l("./lib/shaders"),s=l("./lib/glyphs"),o=l("./lib/get-simple-string"),y=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];m.exports=tt;function g(Z,X){var J=Z[0],st=Z[1],at=Z[2],lt=Z[3];return Z[0]=X[0]*J+X[4]*st+X[8]*at+X[12]*lt,Z[1]=X[1]*J+X[5]*st+X[9]*at+X[13]*lt,Z[2]=X[2]*J+X[6]*st+X[10]*at+X[14]*lt,Z[3]=X[3]*J+X[7]*st+X[11]*at+X[15]*lt,Z}function b(Z,X,J,st){return g(st,st),g(st,st),g(st,st)}function v(Z,X){this.index=Z,this.dataCoordinate=this.position=X}function _(Z){return Z===!0||Z>1?1:Z}function u(Z,X,J,st,at,lt,F,H,et,q,W,K){this.gl=Z,this.pixelRatio=1,this.shader=X,this.orthoShader=J,this.projectShader=st,this.pointBuffer=at,this.colorBuffer=lt,this.glyphBuffer=F,this.idBuffer=H,this.vao=et,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[2/3,2/3,2/3],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=q,this.pickOrthoShader=W,this.pickProjectShader=K,this.points=[],this._selectResult=new v(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}var T=u.prototype;T.pickSlots=1,T.setPickBase=function(Z){this.pickId=Z},T.isTransparent=function(){if(this.hasAlpha)return!0;for(var Z=0;Z<3;++Z)if(this.axesProject[Z]&&this.projectHasAlpha)return!0;return!1},T.isOpaque=function(){if(!this.hasAlpha)return!0;for(var Z=0;Z<3;++Z)if(this.axesProject[Z]&&!this.projectHasAlpha)return!0;return!1};var c=[0,0],A=[0,0,0],k=[0,0,0],p=[0,0,0,1],w=[0,0,0,1],h=y.slice(),D=[0,0,0],S=[[0,0,0],[0,0,0]];function M(Z){return Z[0]=Z[1]=Z[2]=0,Z}function L(Z,X){return Z[0]=X[0],Z[1]=X[1],Z[2]=X[2],Z[3]=1,Z}function R(Z,X,J,st){return Z[0]=X[0],Z[1]=X[1],Z[2]=X[2],Z[J]=st,Z}function z(Z){for(var X=S,J=0;J<2;++J)for(var st=0;st<3;++st)X[J][st]=Math.max(Math.min(Z[J][st],1e8),-1e8);return X}function P(Z,X,J,st){var at=X.axesProject,lt=X.gl,F=Z.uniforms,H=J.model||y,et=J.view||y,q=J.projection||y,W=X.axesBounds,K=z(X.clipBounds),nt;X.axes&&X.axes.lastCubeProps?nt=X.axes.lastCubeProps.axis:nt=[1,1,1],c[0]=2/lt.drawingBufferWidth,c[1]=2/lt.drawingBufferHeight,Z.bind(),F.view=et,F.projection=q,F.screenSize=c,F.highlightId=X.highlightId,F.highlightScale=X.highlightScale,F.clipBounds=K,F.pickGroup=X.pickId/255,F.pixelRatio=st;for(var it=0;it<3;++it)if(!!at[it]){F.scale=X.projectScale[it],F.opacity=X.projectOpacity[it];for(var ot=h,ct=0;ct<16;++ct)ot[ct]=0;for(var ct=0;ct<4;++ct)ot[5*ct]=1;ot[5*it]=0,nt[it]<0?ot[12+it]=W[0][it]:ot[12+it]=W[1][it],n(ot,H,ot),F.model=ot;var bt=(it+1)%3,ut=(it+2)%3,pt=M(A),yt=M(k);pt[bt]=1,yt[ut]=1;var Tt=b(q,et,H,L(p,pt)),kt=b(q,et,H,L(w,yt));if(Math.abs(Tt[1])>Math.abs(kt[1])){var zt=Tt;Tt=kt,kt=zt,zt=pt,pt=yt,yt=zt;var Rt=bt;bt=ut,ut=Rt}Tt[0]<0&&(pt[bt]=-1),kt[1]>0&&(yt[ut]=-1);for(var Gt=0,wt=0,ct=0;ct<4;++ct)Gt+=Math.pow(H[4*bt+ct],2),wt+=Math.pow(H[4*ut+ct],2);pt[bt]/=Math.sqrt(Gt),yt[ut]/=Math.sqrt(wt),F.axes[0]=pt,F.axes[1]=yt,F.fragClipBounds[0]=R(D,K[0],it,-1e8),F.fragClipBounds[1]=R(D,K[1],it,1e8),X.vao.bind(),X.vao.draw(lt.TRIANGLES,X.vertexCount),X.lineWidth>0&&(lt.lineWidth(X.lineWidth*st),X.vao.draw(lt.LINES,X.lineVertexCount,X.vertexCount)),X.vao.unbind()}}var I=[-1e8,-1e8,-1e8],U=[1e8,1e8,1e8],O=[I,U];function G(Z,X,J,st,at,lt,F){var H=J.gl;if((lt===J.projectHasAlpha||F)&&P(X,J,st,at),lt===J.hasAlpha||F){Z.bind();var et=Z.uniforms;et.model=st.model||y,et.view=st.view||y,et.projection=st.projection||y,c[0]=2/H.drawingBufferWidth,c[1]=2/H.drawingBufferHeight,et.screenSize=c,et.highlightId=J.highlightId,et.highlightScale=J.highlightScale,et.fragClipBounds=O,et.clipBounds=J.axes.bounds,et.opacity=J.opacity,et.pickGroup=J.pickId/255,et.pixelRatio=at,J.vao.bind(),J.vao.draw(H.TRIANGLES,J.vertexCount),J.lineWidth>0&&(H.lineWidth(J.lineWidth*at),J.vao.draw(H.LINES,J.lineVertexCount,J.vertexCount)),J.vao.unbind()}}T.draw=function(Z){var X=this.useOrtho?this.orthoShader:this.shader;G(X,this.projectShader,this,Z,this.pixelRatio,!1,!1)},T.drawTransparent=function(Z){var X=this.useOrtho?this.orthoShader:this.shader;G(X,this.projectShader,this,Z,this.pixelRatio,!0,!1)},T.drawPick=function(Z){var X=this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader;G(X,this.pickProjectShader,this,Z,1,!0,!0)},T.pick=function(Z){if(!Z||Z.id!==this.pickId)return null;var X=Z.value[2]+(Z.value[1]<<8)+(Z.value[0]<<16);if(X>=this.pointCount||X<0)return null;var J=this.points[X],st=this._selectResult;st.index=X;for(var at=0;at<3;++at)st.position[at]=st.dataCoordinate[at]=J[at];return st},T.highlight=function(Z){if(!Z)this.highlightId=[1,1,1,1];else{var X=Z.index,J=X&255,st=X>>8&255,at=X>>16&255;this.highlightId=[J/255,st/255,at/255,0]}};function $(Z,X,J,st){var at;Array.isArray(Z)?X<Z.length?at=Z[X]:at=void 0:at=Z,at=o(at);var lt=!0;t(at)&&(at="\u25BC",lt=!1);var F=s(at,J,st);return{mesh:F[0],lines:F[1],bounds:F[2],visible:lt}}T.update=function(Z){if(Z=Z||{},"perspective"in Z&&(this.useOrtho=!Z.perspective),"orthographic"in Z&&(this.useOrtho=!!Z.orthographic),"lineWidth"in Z&&(this.lineWidth=Z.lineWidth),"project"in Z)if(Array.isArray(Z.project))this.axesProject=Z.project;else{var X=!!Z.project;this.axesProject=[X,X,X]}if("projectScale"in Z)if(Array.isArray(Z.projectScale))this.projectScale=Z.projectScale.slice();else{var J=+Z.projectScale;this.projectScale=[J,J,J]}if(this.projectHasAlpha=!1,"projectOpacity"in Z){if(Array.isArray(Z.projectOpacity))this.projectOpacity=Z.projectOpacity.slice();else{var J=+Z.projectOpacity;this.projectOpacity=[J,J,J]}for(var st=0;st<3;++st)this.projectOpacity[st]=_(this.projectOpacity[st]),this.projectOpacity[st]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in Z&&(this.opacity=_(Z.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var at=Z.position,lt=Z.font||"normal",F=Z.alignment||[0,0],H,et;if(F.length===2)H=F[0],et=F[1];else{H=[],et=[];for(var st=0;st<F.length;++st)H[st]=F[st][0],et[st]=F[st][1]}var q=[1/0,1/0,1/0],W=[-1/0,-1/0,-1/0],K=Z.glyph,nt=Z.color,it=Z.size,ot=Z.angle,ct=Z.lineColor,bt=-1,ut=0,pt=0,yt=0;if(at.length){yt=at.length;t:for(var st=0;st<yt;++st){for(var Tt=at[st],kt=0;kt<3;++kt)if(isNaN(Tt[kt])||!isFinite(Tt[kt]))continue t;var zt=$(K,st,lt,this.pixelRatio),Rt=zt.mesh,Gt=zt.lines,wt=zt.bounds;ut+=Rt.cells.length*3,pt+=Gt.edges.length*2}}var It=ut+pt,$t=r.mallocFloat(3*It),Qt=r.mallocFloat(4*It),Nt=r.mallocFloat(2*It),Pt=r.mallocUint32(It);if(It>0){var Yt=0,ve=ut,Re=[0,0,0,1],ir=[0,0,0,1],Ie=Array.isArray(nt)&&Array.isArray(nt[0]),Be=Array.isArray(ct)&&Array.isArray(ct[0]);t:for(var st=0;st<yt;++st){bt+=1;for(var Tt=at[st],kt=0;kt<3;++kt){if(isNaN(Tt[kt])||!isFinite(Tt[kt]))continue t;W[kt]=Math.max(W[kt],Tt[kt]),q[kt]=Math.min(q[kt],Tt[kt])}var zt=$(K,st,lt,this.pixelRatio),Rt=zt.mesh,Gt=zt.lines,wt=zt.bounds,Ye=zt.visible;if(!Ye)Re=[1,1,1,0];else if(Array.isArray(nt)){var ze;if(Ie?st<nt.length?ze=nt[st]:ze=[0,0,0,0]:ze=nt,ze.length===3){for(var kt=0;kt<3;++kt)Re[kt]=ze[kt];Re[3]=1}else if(ze.length===4){for(var kt=0;kt<4;++kt)Re[kt]=ze[kt];!this.hasAlpha&&ze[3]<1&&(this.hasAlpha=!0)}}else Re[0]=Re[1]=Re[2]=0,Re[3]=1;if(!Ye)ir=[1,1,1,0];else if(Array.isArray(ct)){var ze;if(Be?st<ct.length?ze=ct[st]:ze=[0,0,0,0]:ze=ct,ze.length===3){for(var kt=0;kt<3;++kt)ir[kt]=ze[kt];ir[kt]=1}else if(ze.length===4){for(var kt=0;kt<4;++kt)ir[kt]=ze[kt];!this.hasAlpha&&ze[3]<1&&(this.hasAlpha=!0)}}else ir[0]=ir[1]=ir[2]=0,ir[3]=1;var Ee=.5;Ye?Array.isArray(it)?st<it.length?Ee=+it[st]:Ee=12:it?Ee=+it:this.useOrtho&&(Ee=12):Ee=0;var Wt=0;Array.isArray(ot)?st<ot.length?Wt=+ot[st]:Wt=0:ot&&(Wt=+ot);for(var ee=Math.cos(Wt),Xt=Math.sin(Wt),Tt=at[st],kt=0;kt<3;++kt)W[kt]=Math.max(W[kt],Tt[kt]),q[kt]=Math.min(q[kt],Tt[kt]);var St=H,Vt=et,St=0;Array.isArray(H)?st<H.length?St=H[st]:St=0:H&&(St=H);var Vt=0;Array.isArray(et)?st<et.length?Vt=et[st]:Vt=0:et&&(Vt=et),St*=St>0?1-wt[0][0]:St<0?1+wt[1][0]:1,Vt*=Vt>0?1-wt[0][1]:Vt<0?1+wt[1][1]:1;for(var Zt=[St,Vt],Ke=Rt.cells||[],He=Rt.positions||[],kt=0;kt<Ke.length;++kt)for(var qt=Ke[kt],Te=0;Te<3;++Te){for(var me=0;me<3;++me)$t[3*Yt+me]=Tt[me];for(var me=0;me<4;++me)Qt[4*Yt+me]=Re[me];Pt[Yt]=bt;var Ne=He[qt[Te]];Nt[2*Yt]=Ee*(ee*Ne[0]-Xt*Ne[1]+Zt[0]),Nt[2*Yt+1]=Ee*(Xt*Ne[0]+ee*Ne[1]+Zt[1]),Yt+=1}for(var Ke=Gt.edges,He=Gt.positions,kt=0;kt<Ke.length;++kt)for(var qt=Ke[kt],Te=0;Te<2;++Te){for(var me=0;me<3;++me)$t[3*ve+me]=Tt[me];for(var me=0;me<4;++me)Qt[4*ve+me]=ir[me];Pt[ve]=bt;var Ne=He[qt[Te]];Nt[2*ve]=Ee*(ee*Ne[0]-Xt*Ne[1]+Zt[0]),Nt[2*ve+1]=Ee*(Xt*Ne[0]+ee*Ne[1]+Zt[1]),ve+=1}}}this.bounds=[q,W],this.points=at,this.pointCount=at.length,this.vertexCount=ut,this.lineVertexCount=pt,this.pointBuffer.update($t),this.colorBuffer.update(Qt),this.glyphBuffer.update(Nt),this.idBuffer.update(Pt),r.free($t),r.free(Qt),r.free(Nt),r.free(Pt)},T.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()};function tt(Z){var X=Z.gl,J=d.createPerspective(X),st=d.createOrtho(X),at=d.createProject(X),lt=d.createPickPerspective(X),F=d.createPickOrtho(X),H=d.createPickProject(X),et=a(X),q=a(X),W=a(X),K=a(X),nt=i(X,[{buffer:et,size:3,type:X.FLOAT},{buffer:q,size:4,type:X.FLOAT},{buffer:W,size:2,type:X.FLOAT},{buffer:K,size:4,type:X.UNSIGNED_BYTE,normalized:!0}]),it=new u(X,J,st,at,et,q,W,K,nt,lt,F,H);return it.update(Z),it}},{"./lib/get-simple-string":125,"./lib/glyphs":126,"./lib/shaders":127,"gl-buffer":78,"gl-mat4/multiply":100,"gl-vao":150,"is-string-blank":239,"typedarray-pool":308}],129:[function(l,m,x){var t=l("glslify");x.boxVertex=t([`precision mediump float;
#define GLSLIFY 1

attribute vec2 vertex;

uniform vec2 cornerA, cornerB;

void main() {
  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);
}
`]),x.boxFragment=t([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color;

void main() {
  gl_FragColor = color;
}
`])},{glslify:231}],130:[function(l,m,x){var t=l("gl-shader"),a=l("gl-buffer"),i=l("./lib/shaders");m.exports=d;function r(s,o,y){this.plot=s,this.boxBuffer=o,this.boxShader=y,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}var n=r.prototype;n.draw=function(){if(!!this.enabled){var s=this.plot,o=this.selectBox,y=this.borderWidth;this.innerFill;var g=this.innerColor;this.outerFill;var b=this.outerColor,v=this.borderColor,_=s.box,u=s.screenBox,T=s.dataBox,c=s.viewBox,A=s.pixelRatio,k=(o[0]-T[0])*(c[2]-c[0])/(T[2]-T[0])+c[0],p=(o[1]-T[1])*(c[3]-c[1])/(T[3]-T[1])+c[1],w=(o[2]-T[0])*(c[2]-c[0])/(T[2]-T[0])+c[0],h=(o[3]-T[1])*(c[3]-c[1])/(T[3]-T[1])+c[1];if(k=Math.max(k,c[0]),p=Math.max(p,c[1]),w=Math.min(w,c[2]),h=Math.min(h,c[3]),!(w<k||h<p)){_.bind();var D=u[2]-u[0],S=u[3]-u[1];if(this.outerFill&&(_.drawBox(0,0,D,p,b),_.drawBox(0,p,k,h,b),_.drawBox(0,h,D,S,b),_.drawBox(w,p,D,h,b)),this.innerFill&&_.drawBox(k,p,w,h,g),y>0){var M=y*A;_.drawBox(k-M,p-M,w+M,p+M,v),_.drawBox(k-M,h-M,w+M,h+M,v),_.drawBox(k-M,p-M,k+M,h+M,v),_.drawBox(w-M,p-M,w+M,h+M,v)}}}},n.update=function(s){s=s||{},this.innerFill=!!s.innerFill,this.outerFill=!!s.outerFill,this.innerColor=(s.innerColor||[0,0,0,.5]).slice(),this.outerColor=(s.outerColor||[0,0,0,.5]).slice(),this.borderColor=(s.borderColor||[0,0,0,1]).slice(),this.borderWidth=s.borderWidth||0,this.selectBox=(s.selectBox||this.selectBox).slice()},n.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)};function d(s,o){var y=s.gl,g=a(y,[0,0,0,1,1,0,1,1]),b=t(y,i.boxVertex,i.boxFragment),v=new r(s,g,b);return v.update(o),s.addOverlay(v),v}},{"./lib/shaders":129,"gl-buffer":78,"gl-shader":132}],131:[function(l,m,x){m.exports=y;var t=l("gl-fbo"),a=l("typedarray-pool"),i=l("ndarray"),r=l("bit-twiddle").nextPow2,n=function(g,b,v){for(var _=1e8,u=-1,T=-1,c=g.shape[0],A=g.shape[1],k=0;k<c;k++)for(var p=0;p<A;p++){var w=g.get(k,p,0),h=g.get(k,p,1),D=g.get(k,p,2),S=g.get(k,p,3);if(w<255||h<255||D<255||S<255){var M=b-k,L=v-p,R=M*M+L*L;R<_&&(_=R,u=k,T=p)}}return[u,T,_]};function d(g,b,v,_,u){this.coord=[g,b],this.id=v,this.value=_,this.distance=u}function s(g,b,v){this.gl=g,this.fbo=b,this.buffer=v,this._readTimeout=null;var _=this;this._readCallback=function(){!_.gl||(b.bind(),g.readPixels(0,0,b.shape[0],b.shape[1],g.RGBA,g.UNSIGNED_BYTE,_.buffer),_._readTimeout=null)}}var o=s.prototype;Object.defineProperty(o,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(g){if(!!this.gl){this.fbo.shape=g;var b=this.fbo.shape[0],v=this.fbo.shape[1];if(v*b*4>this.buffer.length){a.free(this.buffer);for(var _=this.buffer=a.mallocUint8(r(v*b*4)),u=0;u<v*b*4;++u)_[u]=255}return g}}}),o.begin=function(){var g=this.gl;this.shape,g&&(this.fbo.bind(),g.clearColor(1,1,1,1),g.clear(g.COLOR_BUFFER_BIT|g.DEPTH_BUFFER_BIT))},o.end=function(){var g=this.gl;!g||(g.bindFramebuffer(g.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},o.query=function(g,b,v){if(!this.gl)return null;var _=this.fbo.shape.slice();g=g|0,b=b|0,typeof v!="number"&&(v=1);var u=Math.min(Math.max(g-v,0),_[0])|0,T=Math.min(Math.max(g+v,0),_[0])|0,c=Math.min(Math.max(b-v,0),_[1])|0,A=Math.min(Math.max(b+v,0),_[1])|0;if(T<=u||A<=c)return null;var k=[T-u,A-c],p=i(this.buffer,[k[0],k[1],4],[4,_[0]*4,1],4*(u+_[0]*c)),w=n(p.hi(k[0],k[1],1),v,v),h=w[0],D=w[1];if(h<0||Math.pow(this.radius,2)<w[2])return null;var S=p.get(h,D,0),M=p.get(h,D,1),L=p.get(h,D,2),R=p.get(h,D,3);return new d(h+u|0,D+c|0,S,[M,L,R],Math.sqrt(w[2]))},o.dispose=function(){!this.gl||(this.fbo.dispose(),a.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))};function y(g,b){var v=b[0],_=b[1],u={},T=t(g,v,_,u),c=a.mallocUint8(v*_*4);return new s(g,T,c)}},{"bit-twiddle":32,"gl-fbo":86,ndarray:259,"typedarray-pool":308}],132:[function(l,m,x){var t=l("./lib/create-uniforms"),a=l("./lib/create-attributes"),i=l("./lib/reflect"),r=l("./lib/shader-cache"),n=l("./lib/runtime-reflect"),d=l("./lib/GLError");function s(b){this.gl=b,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var o=s.prototype;o.bind=function(){this.program||this._relink();var b,v=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),_=this.gl.lastAttribCount;if(v>_)for(b=_;b<v;b++)this.gl.enableVertexAttribArray(b);else if(_>v)for(b=v;b<_;b++)this.gl.disableVertexAttribArray(b);this.gl.lastAttribCount=v,this.gl.useProgram(this.program)},o.dispose=function(){for(var b=this.gl.lastAttribCount,v=0;v<b;v++)this.gl.disableVertexAttribArray(v);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null};function y(b,v){return b.name<v.name?-1:1}o.update=function(b,v,_,u){if(!v||arguments.length===1){var T=b;b=T.vertex,v=T.fragment,_=T.uniforms,u=T.attributes}var c=this,A=c.gl,k=c._vref;c._vref=r.shader(A,A.VERTEX_SHADER,b),k&&k.dispose(),c.vertShader=c._vref.shader;var p=this._fref;if(c._fref=r.shader(A,A.FRAGMENT_SHADER,v),p&&p.dispose(),c.fragShader=c._fref.shader,!_||!u){var w=A.createProgram();if(A.attachShader(w,c.fragShader),A.attachShader(w,c.vertShader),A.linkProgram(w),!A.getProgramParameter(w,A.LINK_STATUS)){var h=A.getProgramInfoLog(w);throw new d(h,"Error linking program:"+h)}_=_||n.uniforms(A,w),u=u||n.attributes(A,w),A.deleteProgram(w)}u=u.slice(),u.sort(y);var D=[],S=[],M=[],L;for(L=0;L<u.length;++L){var R=u[L];if(R.type.indexOf("mat")>=0){for(var z=R.type.charAt(R.type.length-1)|0,P=new Array(z),I=0;I<z;++I)P[I]=M.length,S.push(R.name+"["+I+"]"),typeof R.location=="number"?M.push(R.location+I):Array.isArray(R.location)&&R.location.length===z&&typeof R.location[I]=="number"?M.push(R.location[I]|0):M.push(-1);D.push({name:R.name,type:R.type,locations:P})}else D.push({name:R.name,type:R.type,locations:[M.length]}),S.push(R.name),typeof R.location=="number"?M.push(R.location|0):M.push(-1)}var U=0;for(L=0;L<M.length;++L)if(M[L]<0){for(;M.indexOf(U)>=0;)U+=1;M[L]=U}var O=new Array(_.length);function G(){c.program=r.program(A,c._vref,c._fref,S,M);for(var $=0;$<_.length;++$)O[$]=A.getUniformLocation(c.program,_[$].name)}G(),c._relink=G,c.types={uniforms:i(_),attributes:i(u)},c.attributes=a(A,c,D,M),Object.defineProperty(c,"uniforms",t(A,c,_,O))};function g(b,v,_,u,T){var c=new s(b);return c.update(v,_,u,T),c}m.exports=g},{"./lib/GLError":133,"./lib/create-attributes":134,"./lib/create-uniforms":135,"./lib/reflect":136,"./lib/runtime-reflect":137,"./lib/shader-cache":138}],133:[function(l,m,x){function t(a,i,r){this.shortMessage=i||"",this.longMessage=r||"",this.rawError=a||"",this.message="gl-shader: "+(i||a||"")+(r?`
`+r:""),this.stack=new Error().stack}t.prototype=new Error,t.prototype.name="GLError",t.prototype.constructor=t,m.exports=t},{}],134:[function(l,m,x){m.exports=s;var t=l("./GLError");function a(o,y,g,b,v,_){this._gl=o,this._wrapper=y,this._index=g,this._locations=b,this._dimension=v,this._constFunc=_}var i=a.prototype;i.pointer=function(y,g,b,v){var _=this,u=_._gl,T=_._locations[_._index];u.vertexAttribPointer(T,_._dimension,y||u.FLOAT,!!g,b||0,v||0),u.enableVertexAttribArray(T)},i.set=function(o,y,g,b){return this._constFunc(this._locations[this._index],o,y,g,b)},Object.defineProperty(i,"location",{get:function(){return this._locations[this._index]},set:function(o){return o!==this._locations[this._index]&&(this._locations[this._index]=o|0,this._wrapper.program=null),o|0}});var r=[function(o,y,g){return g.length===void 0?o.vertexAttrib1f(y,g):o.vertexAttrib1fv(y,g)},function(o,y,g,b){return g.length===void 0?o.vertexAttrib2f(y,g,b):o.vertexAttrib2fv(y,g)},function(o,y,g,b,v){return g.length===void 0?o.vertexAttrib3f(y,g,b,v):o.vertexAttrib3fv(y,g)},function(o,y,g,b,v,_){return g.length===void 0?o.vertexAttrib4f(y,g,b,v,_):o.vertexAttrib4fv(y,g)}];function n(o,y,g,b,v,_,u){var T=r[v],c=new a(o,y,g,b,v,T);Object.defineProperty(_,u,{set:function(A){return o.disableVertexAttribArray(b[g]),T(o,b[g],A),A},get:function(){return c},enumerable:!0})}function d(o,y,g,b,v,_,u){for(var T=new Array(v),c=new Array(v),A=0;A<v;++A)n(o,y,g[A],b,v,T,A),c[A]=T[A];Object.defineProperty(T,"location",{set:function(w){if(Array.isArray(w))for(var h=0;h<v;++h)c[h].location=w[h];else for(var h=0;h<v;++h)c[h].location=w+h;return w},get:function(){for(var w=new Array(v),h=0;h<v;++h)w[h]=b[g[h]];return w},enumerable:!0}),T.pointer=function(w,h,D,S){w=w||o.FLOAT,h=!!h,D=D||v*v,S=S||0;for(var M=0;M<v;++M){var L=b[g[M]];o.vertexAttribPointer(L,v,w,h,D,S+M*v),o.enableVertexAttribArray(L)}};var k=new Array(v),p=o["vertexAttrib"+v+"fv"];Object.defineProperty(_,u,{set:function(w){for(var h=0;h<v;++h){var D=b[g[h]];if(o.disableVertexAttribArray(D),Array.isArray(w[0]))p.call(o,D,w[h]);else{for(var S=0;S<v;++S)k[S]=w[v*h+S];p.call(o,D,k)}}return w},get:function(){return T},enumerable:!0})}function s(o,y,g,b){for(var v={},_=0,u=g.length;_<u;++_){var T=g[_],c=T.name,A=T.type,k=T.locations;switch(A){case"bool":case"int":case"float":n(o,y,k[0],b,1,v,c);break;default:if(A.indexOf("vec")>=0){var p=A.charCodeAt(A.length-1)-48;if(p<2||p>4)throw new t("","Invalid data type for attribute "+c+": "+A);n(o,y,k[0],b,p,v,c)}else if(A.indexOf("mat")>=0){var p=A.charCodeAt(A.length-1)-48;if(p<2||p>4)throw new t("","Invalid data type for attribute "+c+": "+A);d(o,y,k,b,p,v,c)}else throw new t("","Unknown data type for attribute "+c+": "+A);break}}return v}},{"./GLError":133}],135:[function(l,m,x){var t=l("./reflect"),a=l("./GLError");m.exports=n;function i(d){return function(){return d}}function r(d,s){for(var o=new Array(d),y=0;y<d;++y)o[y]=s;return o}function n(d,s,o,y){function g(A){return function(k,p,w){return k.getUniform(p.program,w[A])}}function b(A){return function(p){for(var w=v("",A),h=0;h<w.length;++h){var D=w[h],S=D[0],M=D[1];if(y[M]){var L=p;if(typeof S=="string"&&(S.indexOf(".")===0||S.indexOf("[")===0)){var R=S;if(S.indexOf(".")===0&&(R=S.slice(1)),R.indexOf("]")===R.length-1){var z=R.indexOf("["),P=R.slice(0,z),I=R.slice(z+1,R.length-1);L=P?p[P][I]:p[I]}else L=p[R]}var U=o[M].type,O;switch(U){case"bool":case"int":case"sampler2D":case"samplerCube":d.uniform1i(y[M],L);break;case"float":d.uniform1f(y[M],L);break;default:var G=U.indexOf("vec");if(0<=G&&G<=1&&U.length===4+G){if(O=U.charCodeAt(U.length-1)-48,O<2||O>4)throw new a("","Invalid data type");switch(U.charAt(0)){case"b":case"i":d["uniform"+O+"iv"](y[M],L);break;case"v":d["uniform"+O+"fv"](y[M],L);break;default:throw new a("","Unrecognized data type for vector "+name+": "+U)}}else if(U.indexOf("mat")===0&&U.length===4){if(O=U.charCodeAt(U.length-1)-48,O<2||O>4)throw new a("","Invalid uniform dimension type for matrix "+name+": "+U);d["uniformMatrix"+O+"fv"](y[M],!1,L);break}else throw new a("","Unknown uniform data type for "+name+": "+U)}}}}}function v(A,k){if(typeof k!="object")return[[A,k]];var p=[];for(var w in k){var h=k[w],D=A;parseInt(w)+""===w?D+="["+w+"]":D+="."+w,typeof h=="object"?p.push.apply(p,v(D,h)):p.push([D,h])}return p}function _(A){switch(A){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":return 0;case"float":return 0;default:var k=A.indexOf("vec");if(0<=k&&k<=1&&A.length===4+k){var p=A.charCodeAt(A.length-1)-48;if(p<2||p>4)throw new a("","Invalid data type");return A.charAt(0)==="b"?r(p,!1):r(p,0)}else if(A.indexOf("mat")===0&&A.length===4){var p=A.charCodeAt(A.length-1)-48;if(p<2||p>4)throw new a("","Invalid uniform dimension type for matrix "+name+": "+A);return r(p*p,0)}else throw new a("","Unknown uniform data type for "+name+": "+A)}}function u(A,k,p){if(typeof p=="object"){var w=T(p);Object.defineProperty(A,k,{get:i(w),set:b(p),enumerable:!0,configurable:!1})}else y[p]?Object.defineProperty(A,k,{get:g(p),set:b(p),enumerable:!0,configurable:!1}):A[k]=_(o[p].type)}function T(A){var k;if(Array.isArray(A)){k=new Array(A.length);for(var p=0;p<A.length;++p)u(k,p,A[p])}else{k={};for(var w in A)u(k,w,A[w])}return k}var c=t(o,!0);return{get:i(T(c)),set:b(c),enumerable:!0,configurable:!0}}},{"./GLError":133,"./reflect":136}],136:[function(l,m,x){m.exports=t;function t(a,i){for(var r={},n=0;n<a.length;++n)for(var d=a[n].name,s=d.split("."),o=r,y=0;y<s.length;++y){var g=s[y].split("[");if(g.length>1){g[0]in o||(o[g[0]]=[]),o=o[g[0]];for(var b=1;b<g.length;++b){var v=parseInt(g[b]);b<g.length-1||y<s.length-1?(v in o||(b<g.length-1?o[v]=[]:o[v]={}),o=o[v]):i?o[v]=n:o[v]=a[n].type}}else y<s.length-1?(g[0]in o||(o[g[0]]={}),o=o[g[0]]):i?o[g[0]]=n:o[g[0]]=a[n].type}return r}},{}],137:[function(l,m,x){x.uniforms=r,x.attributes=n;var t={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},a=null;function i(d,s){if(!a){var o=Object.keys(t);a={};for(var y=0;y<o.length;++y){var g=o[y];a[d[g]]=t[g]}}return a[s]}function r(d,s){for(var o=d.getProgramParameter(s,d.ACTIVE_UNIFORMS),y=[],g=0;g<o;++g){var b=d.getActiveUniform(s,g);if(b){var v=i(d,b.type);if(b.size>1)for(var _=0;_<b.size;++_)y.push({name:b.name.replace("[0]","["+_+"]"),type:v});else y.push({name:b.name,type:v})}}return y}function n(d,s){for(var o=d.getProgramParameter(s,d.ACTIVE_ATTRIBUTES),y=[],g=0;g<o;++g){var b=d.getActiveAttrib(s,g);b&&y.push({name:b.name,type:i(d,b.type)})}return y}},{}],138:[function(l,m,x){x.shader=v,x.program=_;var t=l("./GLError"),a=l("gl-format-compiler-error"),i=typeof WeakMap>"u"?l("weakmap-shim"):WeakMap,r=new i,n=0;function d(u,T,c,A,k,p,w){this.id=u,this.src=T,this.type=c,this.shader=A,this.count=p,this.programs=[],this.cache=w}d.prototype.dispose=function(){if(--this.count===0){for(var u=this.cache,T=u.gl,c=this.programs,A=0,k=c.length;A<k;++A){var p=u.programs[c[A]];p&&(delete u.programs[A],T.deleteProgram(p))}T.deleteShader(this.shader),delete u.shaders[this.type===T.FRAGMENT_SHADER|0][this.src]}};function s(u){this.gl=u,this.shaders=[{},{}],this.programs={}}var o=s.prototype;function y(u,T,c){var A=u.createShader(T);if(u.shaderSource(A,c),u.compileShader(A),!u.getShaderParameter(A,u.COMPILE_STATUS)){var k=u.getShaderInfoLog(A);try{var p=a(k,c,T)}catch(w){throw console.warn("Failed to format compiler error: "+w),new t(k,`Error compiling shader:
`+k)}throw new t(k,p.short,p.long)}return A}o.getShaderReference=function(u,T){var c=this.gl,A=this.shaders[u===c.FRAGMENT_SHADER|0],k=A[T];if(!k||!c.isShader(k.shader)){var p=y(c,u,T);k=A[T]=new d(n++,T,u,p,[],1,this)}else k.count+=1;return k};function g(u,T,c,A,k){var p=u.createProgram();u.attachShader(p,T),u.attachShader(p,c);for(var w=0;w<A.length;++w)u.bindAttribLocation(p,k[w],A[w]);if(u.linkProgram(p),!u.getProgramParameter(p,u.LINK_STATUS)){var h=u.getProgramInfoLog(p);throw new t(h,"Error linking program: "+h)}return p}o.getProgram=function(u,T,c,A){var k=[u.id,T.id,c.join(":"),A.join(":")].join("@"),p=this.programs[k];return(!p||!this.gl.isProgram(p))&&(this.programs[k]=p=g(this.gl,u.shader,T.shader,c,A),u.programs.push(k),T.programs.push(k)),p};function b(u){var T=r.get(u);return T||(T=new s(u),r.set(u,T)),T}function v(u,T,c){return b(u).getShaderReference(T,c)}function _(u,T,c,A,k){return b(u).getProgram(T,c,A,k)}},{"./GLError":133,"gl-format-compiler-error":87,"weakmap-shim":316}],139:[function(l,m,x){m.exports=i;function t(r){this.plot=r,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}var a=t.prototype;a.update=function(r){r=r||{},this.enable=(r.enable||[!0,!0,!1,!1]).slice(),this.width=(r.width||[1,1,1,1]).slice(),this.color=(r.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(n){return n.slice()}),this.center=(r.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},a.draw=function(){var r=this.enable,n=this.width,d=this.color,s=this.center,o=this.plot,y=o.line,g=o.dataBox,b=o.viewBox;if(y.bind(),g[0]<=s[0]&&s[0]<=g[2]&&g[1]<=s[1]&&s[1]<=g[3]){var v=b[0]+(s[0]-g[0])/(g[2]-g[0])*(b[2]-b[0]),_=b[1]+(s[1]-g[1])/(g[3]-g[1])*(b[3]-b[1]);r[0]&&y.drawLine(v,_,b[0],_,n[0],d[0]),r[1]&&y.drawLine(v,_,v,b[1],n[1],d[1]),r[2]&&y.drawLine(v,_,b[2],_,n[2],d[2]),r[3]&&y.drawLine(v,_,v,b[3],n[3],d[3])}},a.dispose=function(){this.plot.removeOverlay(this)};function i(r,n){var d=new t(r);return d.update(n),r.addOverlay(d),d}},{}],140:[function(l,m,x){var t=l("glslify"),a=l("gl-shader"),i=t([`precision mediump float;
#define GLSLIFY 1

attribute vec3 position, color;
attribute float weight;

uniform mat4 model, view, projection;
uniform vec3 coordinates[3];
uniform vec4 colors[3];
uniform vec2 screenShape;
uniform float lineWidth;

varying vec4 fragColor;

void main() {
  vec3 vertexPosition = mix(coordinates[0],
    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));

  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);
  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;
  vec2 delta = weight * clipOffset * screenShape;
  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;

  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);
  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];
}
`]),r=t([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
  gl_FragColor = fragColor;
}`]);m.exports=function(n){return a(n,i,r,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},{"gl-shader":132,glslify:231}],141:[function(l,m,x){var t=l("gl-buffer"),a=l("gl-vao"),i=l("./shaders/index");m.exports=g;var r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function n(b,v,_,u){this.gl=b,this.buffer=v,this.vao=_,this.shader=u,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var d=n.prototype,s=[0,0,0],o=[0,0,0],y=[0,0];d.isTransparent=function(){return!1},d.drawTransparent=function(b){},d.draw=function(b){var v=this.gl,_=this.vao,u=this.shader;_.bind(),u.bind();var T=b.model||r,c=b.view||r,A=b.projection||r,k;this.axes&&(k=this.axes.lastCubeProps.axis);for(var p=s,w=o,h=0;h<3;++h)k&&k[h]<0?(p[h]=this.bounds[0][h],w[h]=this.bounds[1][h]):(p[h]=this.bounds[1][h],w[h]=this.bounds[0][h]);y[0]=v.drawingBufferWidth,y[1]=v.drawingBufferHeight,u.uniforms.model=T,u.uniforms.view=c,u.uniforms.projection=A,u.uniforms.coordinates=[this.position,p,w],u.uniforms.colors=this.colors,u.uniforms.screenShape=y;for(var h=0;h<3;++h)u.uniforms.lineWidth=this.lineWidth[h]*this.pixelRatio,this.enabled[h]&&(_.draw(v.TRIANGLES,6,6*h),this.drawSides[h]&&_.draw(v.TRIANGLES,12,18+12*h));_.unbind()},d.update=function(b){!b||("bounds"in b&&(this.bounds=b.bounds),"position"in b&&(this.position=b.position),"lineWidth"in b&&(this.lineWidth=b.lineWidth),"colors"in b&&(this.colors=b.colors),"enabled"in b&&(this.enabled=b.enabled),"drawSides"in b&&(this.drawSides=b.drawSides))},d.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()};function g(b,v){var _=[];function u(p,w,h,D,S,M){var L=[p,w,h,0,0,0,1];L[D+3]=1,L[D]=S,_.push.apply(_,L),L[6]=-1,_.push.apply(_,L),L[D]=M,_.push.apply(_,L),_.push.apply(_,L),L[6]=1,_.push.apply(_,L),L[D]=S,_.push.apply(_,L)}u(0,0,0,0,0,1),u(0,0,0,1,0,1),u(0,0,0,2,0,1),u(1,0,0,1,-1,1),u(1,0,0,2,-1,1),u(0,1,0,0,-1,1),u(0,1,0,2,-1,1),u(0,0,1,0,-1,1),u(0,0,1,1,-1,1);var T=t(b,_),c=a(b,[{type:b.FLOAT,buffer:T,size:3,offset:0,stride:28},{type:b.FLOAT,buffer:T,size:3,offset:12,stride:28},{type:b.FLOAT,buffer:T,size:1,offset:24,stride:28}]),A=i(b);A.attributes.position.location=0,A.attributes.color.location=1,A.attributes.weight.location=2;var k=new n(b,T,c,A);return k.update(v),k}},{"./shaders/index":140,"gl-buffer":78,"gl-vao":150}],142:[function(l,m,x){var t=l("glslify"),a=t([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, tubeScale;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * tubePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(tubePosition, 1.0);
  vec4 t_position  = view * tubePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = tubePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),i=t([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),r=t([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float tubeScale;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  gl_Position = projection * view * tubePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),n=t([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);x.meshShader={vertex:a,fragment:i,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},x.pickShader={vertex:r,fragment:n,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},{glslify:231}],143:[function(l,m,x){var t=l("gl-vec3"),a=l("gl-vec4"),i=["xyz","xzy","yxz","yzx","zxy","zyx"],r=function(_,u,T,c){for(var A=_.points,k=_.velocities,p=_.divergences,w=[],h=[],D=[],S=[],M=[],L=[],R=0,z=0,P=a.create(),I=a.create(),U=8,O=0;O<A.length;O++){var G=A[O],$=k[O],tt=p[O];u===0&&(tt=T*.05),z=t.length($)/c,P=a.create(),t.copy(P,$),P[3]=tt;for(var Z=0;Z<U;Z++)M[Z]=[G[0],G[1],G[2],Z];if(S.length>0)for(var Z=0;Z<U;Z++){var X=(Z+1)%U;w.push(S[Z],M[Z],M[X],M[X],S[X],S[Z]),D.push(I,P,P,P,I,I),L.push(R,z,z,z,R,R);var J=w.length;h.push([J-6,J-5,J-4],[J-3,J-2,J-1])}var st=S;S=M,M=st;var at=I;I=P,P=at;var lt=R;R=z,z=lt}return{positions:w,cells:h,vectors:D,vertexIntensity:L}},n=function(_,u,T,c){for(var A=0,k=0;k<_.length;k++)for(var p=_[k].velocities,w=0;w<p.length;w++)A=Math.max(A,t.length(p[w]));for(var h=_.map(function(O){return r(O,T,c,A)}),D=[],S=[],M=[],L=[],k=0;k<h.length;k++){var R=h[k],z=D.length;D=D.concat(R.positions),M=M.concat(R.vectors),L=L.concat(R.vertexIntensity);for(var w=0;w<R.cells.length;w++){var P=R.cells[w],I=[];S.push(I);for(var U=0;U<P.length;U++)I.push(P[U]+z)}}return{positions:D,cells:S,vectors:M,vertexIntensity:L,colormap:u}},d=function(_,u){var T=_.length,c;for(c=0;c<T;c++){var A=_[c];if(A===u)return c;if(A>u)return c-1}return c},s=function(_,u,T){return _<u?u:_>T?T:_},o=function(_,u,T){var c=u.vectors,A=u.meshgrid,k=_[0],p=_[1],w=_[2],h=A[0].length,D=A[1].length,S=A[2].length,M=d(A[0],k),L=d(A[1],p),R=d(A[2],w),z=M+1,P=L+1,I=R+1;if(M=s(M,0,h-1),z=s(z,0,h-1),L=s(L,0,D-1),P=s(P,0,D-1),R=s(R,0,S-1),I=s(I,0,S-1),M<0||L<0||R<0||z>h-1||P>D-1||I>S-1)return t.create();var U=A[0][M],O=A[0][z],G=A[1][L],$=A[1][P],tt=A[2][R],Z=A[2][I],X=(k-U)/(O-U),J=(p-G)/($-G),st=(w-tt)/(Z-tt);isFinite(X)||(X=.5),isFinite(J)||(J=.5),isFinite(st)||(st=.5);var at,lt,F,H,et,q;switch(T.reversedX&&(M=h-1-M,z=h-1-z),T.reversedY&&(L=D-1-L,P=D-1-P),T.reversedZ&&(R=S-1-R,I=S-1-I),T.filled){case 5:et=R,q=I,F=L*S,H=P*S,at=M*S*D,lt=z*S*D;break;case 4:et=R,q=I,at=M*S,lt=z*S,F=L*S*h,H=P*S*h;break;case 3:F=L,H=P,et=R*D,q=I*D,at=M*D*S,lt=z*D*S;break;case 2:F=L,H=P,at=M*D,lt=z*D,et=R*D*h,q=I*D*h;break;case 1:at=M,lt=z,et=R*h,q=I*h,F=L*h*S,H=P*h*S;break;default:at=M,lt=z,F=L*h,H=P*h,et=R*h*D,q=I*h*D;break}var W=c[at+F+et],K=c[at+F+q],nt=c[at+H+et],it=c[at+H+q],ot=c[lt+F+et],ct=c[lt+F+q],bt=c[lt+H+et],ut=c[lt+H+q],pt=t.create(),yt=t.create(),Tt=t.create(),kt=t.create();t.lerp(pt,W,ot,X),t.lerp(yt,K,ct,X),t.lerp(Tt,nt,bt,X),t.lerp(kt,it,ut,X);var zt=t.create(),Rt=t.create();t.lerp(zt,pt,Tt,J),t.lerp(Rt,yt,kt,J);var Gt=t.create();return t.lerp(Gt,zt,Rt,st),Gt},y=function(_){var u=1/0;_.sort(function(k,p){return k-p});for(var T=_.length,c=1;c<T;c++){var A=Math.abs(_[c]-_[c-1]);A<u&&(u=A)}return u},g=function(_){for(var u=[],T=[],c=[],A={},k={},p={},w=_.length,h=0;h<w;h++){var D=_[h],S=D[0],M=D[1],L=D[2];A[S]||(u.push(S),A[S]=!0),k[M]||(T.push(M),k[M]=!0),p[L]||(c.push(L),p[L]=!0)}var R=y(u),z=y(T),P=y(c),I=Math.min(R,z,P);return isFinite(I)?I:1};m.exports=function(_,u){var T=_.startingPositions,c=_.maxLength||1e3,A=_.tubeSize||1,k=_.absoluteTubeSize,p=_.gridFill||"+x+y+z",w={};p.indexOf("-x")!==-1&&(w.reversedX=!0),p.indexOf("-y")!==-1&&(w.reversedY=!0),p.indexOf("-z")!==-1&&(w.reversedZ=!0),w.filled=i.indexOf(p.replace(/-/g,"").replace(/\+/g,""));var h=_.getVelocity||function(ct){return o(ct,_,w)},D=_.getDivergence||function(ct,bt){var ut=t.create(),pt=1e-4;t.add(ut,ct,[pt,0,0]);var yt=h(ut);t.subtract(yt,yt,bt),t.scale(yt,yt,1/pt),t.add(ut,ct,[0,pt,0]);var Tt=h(ut);t.subtract(Tt,Tt,bt),t.scale(Tt,Tt,1/pt),t.add(ut,ct,[0,0,pt]);var kt=h(ut);return t.subtract(kt,kt,bt),t.scale(kt,kt,1/pt),t.add(ut,yt,Tt),t.add(ut,ut,kt),ut},S=[],M=u[0][0],L=u[0][1],R=u[0][2],z=u[1][0],P=u[1][1],I=u[1][2],U=function(ct){var bt=ct[0],ut=ct[1],pt=ct[2];return!(bt<M||bt>z||ut<L||ut>P||pt<R||pt>I)},O=t.distance(u[0],u[1]),G=10*O/c,$=G*G,tt=1,Z=0,X=T.length;X>1&&(tt=g(T));for(var J=0;J<X;J++){var st=t.create();t.copy(st,T[J]);var at=[st],lt=[],F=h(st),H=st;lt.push(F);var et=[],q=D(st,F),W=t.length(q);isFinite(W)&&W>Z&&(Z=W),et.push(W),S.push({points:at,velocities:lt,divergences:et});for(var K=0;K<c*100&&at.length<c&&U(st);){K++;var nt=t.clone(F),it=t.squaredLength(nt);if(it===0)break;if(it>$&&t.scale(nt,nt,G/Math.sqrt(it)),t.add(nt,nt,st),F=h(nt),t.squaredDistance(H,nt)-$>-1e-4*$){at.push(nt),H=nt,lt.push(F);var q=D(nt,F),W=t.length(q);isFinite(W)&&W>Z&&(Z=W),et.push(W)}st=nt}}var ot=n(S,_.colormap,Z,tt);return k?ot.tubeScale=k:(Z===0&&(Z=1),ot.tubeScale=A*.5*tt/Z),ot};var b=l("./lib/shaders"),v=l("gl-cone3d").createMesh;m.exports.createTubeMesh=function(_,u){return v(_,u,{shaders:b,traceType:"streamtube"})}},{"./lib/shaders":142,"gl-cone3d":79,"gl-vec3":169,"gl-vec4":205}],144:[function(l,m,x){var t=l("gl-shader"),a=l("glslify"),i=a([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute vec3 f;
attribute vec3 normal;

uniform vec3 objectOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 lightPosition, eyePosition;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 localCoordinate = vec3(uv.zw, f.x);
  worldCoordinate = objectOffset + localCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);
  vec4 clipPosition = projection * view * worldPosition;
  gl_Position = clipPosition;
  kill = f.y;
  value = f.z;
  planeCoordinate = uv.xy;

  vColor = texture2D(colormap, vec2(value, value));

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * worldPosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  lightDirection = lightPosition - cameraCoordinate.xyz;
  eyeDirection   = eyePosition - cameraCoordinate.xyz;
  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);
}
`]),r=a([`precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float beckmannSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness) {
  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 lowerBound, upperBound;
uniform float contourTint;
uniform vec4 contourColor;
uniform sampler2D colormap;
uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform float vertexColor;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  if (
    kill > 0.0 ||
    vColor.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)
  ) discard;

  vec3 N = normalize(surfaceNormal);
  vec3 V = normalize(eyeDirection);
  vec3 L = normalize(lightDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  //decide how to interpolate color \u2014 in vertex or in fragment
  vec4 surfaceColor =
    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +
    step(.5, vertexColor) * vColor;

  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;
}
`]),n=a([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute float f;

uniform vec3 objectOffset;
uniform mat3 permutation;
uniform mat4 model, view, projection;
uniform float height, zOffset;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 dataCoordinate = permutation * vec3(uv.xy, height);
  worldCoordinate = objectOffset + dataCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);

  vec4 clipPosition = projection * view * worldPosition;
  clipPosition.z += zOffset;

  gl_Position = clipPosition;
  value = f + objectOffset.z;
  kill = -1.0;
  planeCoordinate = uv.zw;

  vColor = texture2D(colormap, vec2(value, value));

  //Don't do lighting for contours
  surfaceNormal   = vec3(1,0,0);
  eyeDirection    = vec3(0,1,0);
  lightDirection  = vec3(0,0,1);
}
`]),d=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec2 shape;
uniform vec3 clipBounds[2];
uniform float pickId;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 surfaceNormal;

vec2 splitFloat(float v) {
  float vh = 255.0 * v;
  float upper = floor(vh);
  float lower = fract(vh);
  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);
}

void main() {
  if ((kill > 0.0) ||
      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;

  vec2 ux = splitFloat(planeCoordinate.x / shape.x);
  vec2 uy = splitFloat(planeCoordinate.y / shape.y);
  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));
}
`]);x.createShader=function(s){var o=t(s,i,r,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return o.attributes.uv.location=0,o.attributes.f.location=1,o.attributes.normal.location=2,o},x.createPickShader=function(s){var o=t(s,i,d,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return o.attributes.uv.location=0,o.attributes.f.location=1,o.attributes.normal.location=2,o},x.createContourShader=function(s){var o=t(s,n,r,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return o.attributes.uv.location=0,o.attributes.f.location=1,o},x.createPickContourShader=function(s){var o=t(s,n,d,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return o.attributes.uv.location=0,o.attributes.f.location=1,o}},{"gl-shader":132,glslify:231}],145:[function(l,m,x){m.exports=lt;var t=l("bit-twiddle"),a=l("gl-buffer"),i=l("gl-vao"),r=l("gl-texture2d"),n=l("typedarray-pool"),d=l("colormap"),s=l("ndarray-ops"),o=l("ndarray-pack"),y=l("ndarray"),g=l("surface-nets"),b=l("gl-mat4/multiply"),v=l("gl-mat4/invert"),_=l("binary-search-bounds"),u=l("ndarray-gradient"),T=l("./lib/shaders"),c=T.createShader,A=T.createContourShader,k=T.createPickShader,p=T.createPickContourShader,w=4*(4+3+3),h=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],D=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],S=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];(function(){for(var F=0;F<3;++F){var H=S[F],et=(F+1)%3,q=(F+2)%3;H[et+0]=1,H[q+3]=1,H[F+6]=1}})();function M(F,H,et,q,W){this.position=F,this.index=H,this.uv=et,this.level=q,this.dataCoordinate=W}var L=256;function R(F,H,et,q,W,K,nt,it,ot,ct,bt,ut,pt,yt,Tt){this.gl=F,this.shape=H,this.bounds=et,this.objectOffset=Tt,this.intensityBounds=[],this._shader=q,this._pickShader=W,this._coordinateBuffer=K,this._vao=nt,this._colorMap=it,this._contourShader=ot,this._contourPickShader=ct,this._contourBuffer=bt,this._contourVAO=ut,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new M([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=pt,this._dynamicVAO=yt,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[y(n.mallocFloat(1024),[0,0]),y(n.mallocFloat(1024),[0,0]),y(n.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}var z=R.prototype;z.genColormap=function(F,H){var et=!1,q=o([d({colormap:F,nshades:L,format:"rgba"}).map(function(W,K){var nt=H?P(K/255,H):W[3];return nt<1&&(et=!0),[W[0],W[1],W[2],255*nt]})]);return s.divseq(q,255),this.hasAlphaScale=et,q},z.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},z.isOpaque=function(){return!this.isTransparent()},z.pickSlots=1,z.setPickBase=function(F){this.pickId=F};function P(F,H){if(!H||!H.length)return 1;for(var et=0;et<H.length;++et){if(H.length<2)return 1;if(H[et][0]===F)return H[et][1];if(H[et][0]>F&&et>0){var q=(H[et][0]-F)/(H[et][0]-H[et-1][0]);return H[et][1]*(1-q)+q*H[et-1][1]}}return 1}var I=[0,0,0],U={showSurface:!1,showContour:!1,projections:[h.slice(),h.slice(),h.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function O(F,H){var et,q,W,K=H.axes&&H.axes.lastCubeProps.axis||I,nt=H.showSurface,it=H.showContour;for(et=0;et<3;++et)for(nt=nt||H.surfaceProject[et],q=0;q<3;++q)it=it||H.contourProject[et][q];for(et=0;et<3;++et){var ot=U.projections[et];for(q=0;q<16;++q)ot[q]=0;for(q=0;q<4;++q)ot[5*q]=1;ot[5*et]=0,ot[12+et]=H.axesBounds[+(K[et]>0)][et],b(ot,F.model,ot);var ct=U.clipBounds[et];for(W=0;W<2;++W)for(q=0;q<3;++q)ct[W][q]=F.clipBounds[W][q];ct[0][et]=-1e8,ct[1][et]=1e8}return U.showSurface=nt,U.showContour=it,U}var G={model:h,view:h,projection:h,inverseModel:h.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},$=h.slice(),tt=[1,0,0,0,1,0,0,0,1];function Z(F,H){F=F||{};var et=this.gl;et.disable(et.CULL_FACE),this._colorMap.bind(0);var q=G;q.model=F.model||h,q.view=F.view||h,q.projection=F.projection||h,q.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],q.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],q.objectOffset=this.objectOffset,q.contourColor=this.contourColor[0],q.inverseModel=v(q.inverseModel,q.model);for(var W=0;W<2;++W)for(var K=q.clipBounds[W],nt=0;nt<3;++nt)K[nt]=Math.min(Math.max(this.clipBounds[W][nt],-1e8),1e8);q.kambient=this.ambientLight,q.kdiffuse=this.diffuseLight,q.kspecular=this.specularLight,q.roughness=this.roughness,q.fresnel=this.fresnel,q.opacity=this.opacity,q.height=0,q.permutation=tt,q.vertexColor=this.vertexColor;var it=$;for(b(it,q.view,q.model),b(it,q.projection,it),v(it,it),W=0;W<3;++W)q.eyePosition[W]=it[12+W]/it[15];var ot=it[15];for(W=0;W<3;++W)ot+=this.lightPosition[W]*it[4*W+3];for(W=0;W<3;++W){var ct=it[12+W];for(nt=0;nt<3;++nt)ct+=it[4*nt+W]*this.lightPosition[nt];q.lightPosition[W]=ct/ot}var bt=O(q,this);if(bt.showSurface){for(this._shader.bind(),this._shader.uniforms=q,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(et.TRIANGLES,this._vertexCount),W=0;W<3;++W)!this.surfaceProject[W]||!this.vertexCount||(this._shader.uniforms.model=bt.projections[W],this._shader.uniforms.clipBounds=bt.clipBounds[W],this._vao.draw(et.TRIANGLES,this._vertexCount));this._vao.unbind()}if(bt.showContour){var ut=this._contourShader;q.kambient=1,q.kdiffuse=0,q.kspecular=0,q.opacity=1,ut.bind(),ut.uniforms=q;var pt=this._contourVAO;for(pt.bind(),W=0;W<3;++W)for(ut.uniforms.permutation=S[W],et.lineWidth(this.contourWidth[W]*this.pixelRatio),nt=0;nt<this.contourLevels[W].length;++nt)nt===this.highlightLevel[W]?(ut.uniforms.contourColor=this.highlightColor[W],ut.uniforms.contourTint=this.highlightTint[W]):(nt===0||nt-1===this.highlightLevel[W])&&(ut.uniforms.contourColor=this.contourColor[W],ut.uniforms.contourTint=this.contourTint[W]),this._contourCounts[W][nt]&&(ut.uniforms.height=this.contourLevels[W][nt],pt.draw(et.LINES,this._contourCounts[W][nt],this._contourOffsets[W][nt]));for(W=0;W<3;++W)for(ut.uniforms.model=bt.projections[W],ut.uniforms.clipBounds=bt.clipBounds[W],nt=0;nt<3;++nt)if(!!this.contourProject[W][nt]){ut.uniforms.permutation=S[nt],et.lineWidth(this.contourWidth[nt]*this.pixelRatio);for(var yt=0;yt<this.contourLevels[nt].length;++yt)yt===this.highlightLevel[nt]?(ut.uniforms.contourColor=this.highlightColor[nt],ut.uniforms.contourTint=this.highlightTint[nt]):(yt===0||yt-1===this.highlightLevel[nt])&&(ut.uniforms.contourColor=this.contourColor[nt],ut.uniforms.contourTint=this.contourTint[nt]),this._contourCounts[nt][yt]&&(ut.uniforms.height=this.contourLevels[nt][yt],pt.draw(et.LINES,this._contourCounts[nt][yt],this._contourOffsets[nt][yt]))}for(pt.unbind(),pt=this._dynamicVAO,pt.bind(),W=0;W<3;++W)if(this._dynamicCounts[W]!==0)for(ut.uniforms.model=q.model,ut.uniforms.clipBounds=q.clipBounds,ut.uniforms.permutation=S[W],et.lineWidth(this.dynamicWidth[W]*this.pixelRatio),ut.uniforms.contourColor=this.dynamicColor[W],ut.uniforms.contourTint=this.dynamicTint[W],ut.uniforms.height=this.dynamicLevel[W],pt.draw(et.LINES,this._dynamicCounts[W],this._dynamicOffsets[W]),nt=0;nt<3;++nt)!this.contourProject[nt][W]||(ut.uniforms.model=bt.projections[nt],ut.uniforms.clipBounds=bt.clipBounds[nt],pt.draw(et.LINES,this._dynamicCounts[W],this._dynamicOffsets[W]));pt.unbind()}}z.draw=function(F){return Z.call(this,F,!1)},z.drawTransparent=function(F){return Z.call(this,F,!0)};var X={model:h,view:h,projection:h,inverseModel:h,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};z.drawPick=function(F){F=F||{};var H=this.gl;H.disable(H.CULL_FACE);var et=X;et.model=F.model||h,et.view=F.view||h,et.projection=F.projection||h,et.shape=this._field[2].shape,et.pickId=this.pickId/255,et.lowerBound=this.bounds[0],et.upperBound=this.bounds[1],et.objectOffset=this.objectOffset,et.permutation=tt;for(var q=0;q<2;++q)for(var W=et.clipBounds[q],K=0;K<3;++K)W[K]=Math.min(Math.max(this.clipBounds[q][K],-1e8),1e8);var nt=O(et,this);if(nt.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=et,this._vao.bind(),this._vao.draw(H.TRIANGLES,this._vertexCount),q=0;q<3;++q)!this.surfaceProject[q]||(this._pickShader.uniforms.model=nt.projections[q],this._pickShader.uniforms.clipBounds=nt.clipBounds[q],this._vao.draw(H.TRIANGLES,this._vertexCount));this._vao.unbind()}if(nt.showContour){var it=this._contourPickShader;it.bind(),it.uniforms=et;var ot=this._contourVAO;for(ot.bind(),K=0;K<3;++K)for(H.lineWidth(this.contourWidth[K]*this.pixelRatio),it.uniforms.permutation=S[K],q=0;q<this.contourLevels[K].length;++q)this._contourCounts[K][q]&&(it.uniforms.height=this.contourLevels[K][q],ot.draw(H.LINES,this._contourCounts[K][q],this._contourOffsets[K][q]));for(q=0;q<3;++q)for(it.uniforms.model=nt.projections[q],it.uniforms.clipBounds=nt.clipBounds[q],K=0;K<3;++K)if(!!this.contourProject[q][K]){it.uniforms.permutation=S[K],H.lineWidth(this.contourWidth[K]*this.pixelRatio);for(var ct=0;ct<this.contourLevels[K].length;++ct)this._contourCounts[K][ct]&&(it.uniforms.height=this.contourLevels[K][ct],ot.draw(H.LINES,this._contourCounts[K][ct],this._contourOffsets[K][ct]))}ot.unbind()}},z.pick=function(F){if(!F||F.id!==this.pickId)return null;var H=this._field[2].shape,et=this._pickResult,q=H[0]*(F.value[0]+(F.value[2]>>4)/16)/255,W=Math.floor(q),K=q-W,nt=H[1]*(F.value[1]+(F.value[2]&15)/16)/255,it=Math.floor(nt),ot=nt-it;W+=1,it+=1;var ct=et.position;ct[0]=ct[1]=ct[2]=0;for(var bt=0;bt<2;++bt)for(var ut=bt?K:1-K,pt=0;pt<2;++pt)for(var yt=pt?ot:1-ot,Tt=W+bt,kt=it+pt,zt=ut*yt,Rt=0;Rt<3;++Rt)ct[Rt]+=this._field[Rt].get(Tt,kt)*zt;for(var Gt=this._pickResult.level,wt=0;wt<3;++wt)if(Gt[wt]=_.le(this.contourLevels[wt],ct[wt]),Gt[wt]<0)this.contourLevels[wt].length>0&&(Gt[wt]=0);else if(Gt[wt]<this.contourLevels[wt].length-1){var It=this.contourLevels[wt][Gt[wt]],$t=this.contourLevels[wt][Gt[wt]+1];Math.abs(It-ct[wt])>Math.abs($t-ct[wt])&&(Gt[wt]+=1)}for(et.index[0]=K<.5?W:W+1,et.index[1]=ot<.5?it:it+1,et.uv[0]=q/H[0],et.uv[1]=nt/H[1],Rt=0;Rt<3;++Rt)et.dataCoordinate[Rt]=this._field[Rt].get(et.index[0],et.index[1]);return et},z.padField=function(F,H){var et=H.shape.slice(),q=F.shape.slice();s.assign(F.lo(1,1).hi(et[0],et[1]),H),s.assign(F.lo(1).hi(et[0],1),H.hi(et[0],1)),s.assign(F.lo(1,q[1]-1).hi(et[0],1),H.lo(0,et[1]-1).hi(et[0],1)),s.assign(F.lo(0,1).hi(1,et[1]),H.hi(1)),s.assign(F.lo(q[0]-1,1).hi(1,et[1]),H.lo(et[0]-1)),F.set(0,0,H.get(0,0)),F.set(0,q[1]-1,H.get(0,et[1]-1)),F.set(q[0]-1,0,H.get(et[0]-1,0)),F.set(q[0]-1,q[1]-1,H.get(et[0]-1,et[1]-1))};function J(F,H){return Array.isArray(F)?[H(F[0]),H(F[1]),H(F[2])]:[H(F),H(F),H(F)]}function st(F){return Array.isArray(F)?F.length===3?[F[0],F[1],F[2],1]:[F[0],F[1],F[2],F[3]]:[0,0,0,1]}function at(F){if(Array.isArray(F)){if(Array.isArray(F))return[st(F[0]),st(F[1]),st(F[2])];var H=st(F);return[H.slice(),H.slice(),H.slice()]}}z.update=function(F){F=F||{},this.objectOffset=F.objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in F&&(this.contourWidth=J(F.contourWidth,Number)),"showContour"in F&&(this.showContour=J(F.showContour,Boolean)),"showSurface"in F&&(this.showSurface=!!F.showSurface),"contourTint"in F&&(this.contourTint=J(F.contourTint,Boolean)),"contourColor"in F&&(this.contourColor=at(F.contourColor)),"contourProject"in F&&(this.contourProject=J(F.contourProject,function(ce){return J(ce,Boolean)})),"surfaceProject"in F&&(this.surfaceProject=F.surfaceProject),"dynamicColor"in F&&(this.dynamicColor=at(F.dynamicColor)),"dynamicTint"in F&&(this.dynamicTint=J(F.dynamicTint,Number)),"dynamicWidth"in F&&(this.dynamicWidth=J(F.dynamicWidth,Number)),"opacity"in F&&(this.opacity=F.opacity),"opacityscale"in F&&(this.opacityscale=F.opacityscale),"colorBounds"in F&&(this.colorBounds=F.colorBounds),"vertexColor"in F&&(this.vertexColor=F.vertexColor?1:0),"colormap"in F&&this._colorMap.setPixels(this.genColormap(F.colormap,this.opacityscale));var H=F.field||F.coords&&F.coords[2]||null,et=!1;if(H||(this._field[2].shape[0]||this._field[2].shape[2]?H=this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):H=this._field[2].hi(0,0)),"field"in F||"coords"in F){var q=(H.shape[0]+2)*(H.shape[1]+2);q>this._field[2].data.length&&(n.freeFloat(this._field[2].data),this._field[2].data=n.mallocFloat(t.nextPow2(q))),this._field[2]=y(this._field[2].data,[H.shape[0]+2,H.shape[1]+2]),this.padField(this._field[2],H),this.shape=H.shape.slice();for(var W=this.shape,K=0;K<2;++K)this._field[2].size>this._field[K].data.length&&(n.freeFloat(this._field[K].data),this._field[K].data=n.mallocFloat(this._field[2].size)),this._field[K]=y(this._field[K].data,[W[0]+2,W[1]+2]);if(F.coords){var nt=F.coords;if(!Array.isArray(nt)||nt.length!==3)throw new Error("gl-surface: invalid coordinates for x/y");for(K=0;K<2;++K){var it=nt[K];for(pt=0;pt<2;++pt)if(it.shape[pt]!==W[pt])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[K],it)}}else if(F.ticks){var ot=F.ticks;if(!Array.isArray(ot)||ot.length!==2)throw new Error("gl-surface: invalid ticks");for(K=0;K<2;++K){var ct=ot[K];if((Array.isArray(ct)||ct.length)&&(ct=y(ct)),ct.shape[0]!==W[K])throw new Error("gl-surface: invalid tick length");var bt=y(ct.data,W);bt.stride[K]=ct.stride[0],bt.stride[K^1]=0,this.padField(this._field[K],bt)}}else{for(K=0;K<2;++K){var ut=[0,0];ut[K]=1,this._field[K]=y(this._field[K].data,[W[0]+2,W[1]+2],ut,0)}this._field[0].set(0,0,0);for(var pt=0;pt<W[0];++pt)this._field[0].set(pt+1,0,pt);for(this._field[0].set(W[0]+1,0,W[0]-1),this._field[1].set(0,0,0),pt=0;pt<W[1];++pt)this._field[1].set(0,pt+1,pt);this._field[1].set(0,W[1]+1,W[1]-1)}var yt=this._field,Tt=y(n.mallocFloat(yt[2].size*3*2),[3,W[0]+2,W[1]+2,2]);for(K=0;K<3;++K)u(Tt.pick(K),yt[K],"mirror");var kt=y(n.mallocFloat(yt[2].size*3),[W[0]+2,W[1]+2,3]);for(K=0;K<W[0]+2;++K)for(pt=0;pt<W[1]+2;++pt){var zt=Tt.get(0,K,pt,0),Rt=Tt.get(0,K,pt,1),Gt=Tt.get(1,K,pt,0),wt=Tt.get(1,K,pt,1),It=Tt.get(2,K,pt,0),$t=Tt.get(2,K,pt,1),Qt=Gt*$t-wt*It,Nt=It*Rt-$t*zt,Pt=zt*wt-Rt*Gt,Yt=Math.sqrt(Qt*Qt+Nt*Nt+Pt*Pt);Yt<1e-8?(Yt=Math.max(Math.abs(Qt),Math.abs(Nt),Math.abs(Pt)),Yt<1e-8?(Pt=1,Nt=Qt=0,Yt=1):Yt=1/Yt):Yt=1/Math.sqrt(Yt),kt.set(K,pt,0,Qt*Yt),kt.set(K,pt,1,Nt*Yt),kt.set(K,pt,2,Pt*Yt)}n.free(Tt.data);var ve=[1/0,1/0,1/0],Re=[-1/0,-1/0,-1/0],ir=1/0,Ie=-1/0,Be=(W[0]-1)*(W[1]-1)*6,Ye=n.mallocFloat(t.nextPow2(10*Be)),ze=0,Ee=0;for(K=0;K<W[0]-1;++K){t:for(pt=0;pt<W[1]-1;++pt){for(var Wt=0;Wt<2;++Wt)for(var ee=0;ee<2;++ee)for(var Xt=0;Xt<3;++Xt){var St=this._field[Xt].get(1+K+Wt,1+pt+ee);if(isNaN(St)||!isFinite(St))continue t}for(Xt=0;Xt<6;++Xt){var Vt=K+D[Xt][0],Zt=pt+D[Xt][1],qt=this._field[0].get(Vt+1,Zt+1),Te=this._field[1].get(Vt+1,Zt+1);St=this._field[2].get(Vt+1,Zt+1),Qt=kt.get(Vt+1,Zt+1,0),Nt=kt.get(Vt+1,Zt+1,1),Pt=kt.get(Vt+1,Zt+1,2),F.intensity&&(me=F.intensity.get(Vt,Zt));var me=F.intensity?F.intensity.get(Vt,Zt):St+this.objectOffset[2];Ye[ze++]=Vt,Ye[ze++]=Zt,Ye[ze++]=qt,Ye[ze++]=Te,Ye[ze++]=St,Ye[ze++]=0,Ye[ze++]=me,Ye[ze++]=Qt,Ye[ze++]=Nt,Ye[ze++]=Pt,ve[0]=Math.min(ve[0],qt+this.objectOffset[0]),ve[1]=Math.min(ve[1],Te+this.objectOffset[1]),ve[2]=Math.min(ve[2],St+this.objectOffset[2]),ir=Math.min(ir,me),Re[0]=Math.max(Re[0],qt+this.objectOffset[0]),Re[1]=Math.max(Re[1],Te+this.objectOffset[1]),Re[2]=Math.max(Re[2],St+this.objectOffset[2]),Ie=Math.max(Ie,me),Ee+=1}}}for(F.intensityBounds&&(ir=+F.intensityBounds[0],Ie=+F.intensityBounds[1]),K=6;K<ze;K+=10)Ye[K]=(Ye[K]-ir)/(Ie-ir);this._vertexCount=Ee,this._coordinateBuffer.update(Ye.subarray(0,ze)),n.freeFloat(Ye),n.free(kt.data),this.bounds=[ve,Re],this.intensity=F.intensity||this._field[2],(this.intensityBounds[0]!==ir||this.intensityBounds[1]!==Ie)&&(et=!0),this.intensityBounds=[ir,Ie]}if("levels"in F){var Ne=F.levels;for(Array.isArray(Ne[0])?Ne=Ne.slice():Ne=[[],[],Ne],K=0;K<3;++K)Ne[K]=Ne[K].slice(),Ne[K].sort(function(ce,de){return ce-de});for(K=0;K<3;++K)for(pt=0;pt<Ne[K].length;++pt)Ne[K][pt]-=this.objectOffset[K];t:for(K=0;K<3;++K){if(Ne[K].length!==this.contourLevels[K].length){et=!0;break}for(pt=0;pt<Ne[K].length;++pt)if(Ne[K][pt]!==this.contourLevels[K][pt]){et=!0;break t}}this.contourLevels=Ne}if(et){yt=this._field,W=this.shape;for(var Ke=[],He=0;He<3;++He){var Xe=this.contourLevels[He],er=[],We=[],hr=[0,0,0];for(K=0;K<Xe.length;++K){var Wr=g(this._field[He],Xe[K]);er.push(Ke.length/5|0),Ee=0;t:for(pt=0;pt<Wr.cells.length;++pt){var dn=Wr.cells[pt];for(Xt=0;Xt<2;++Xt){var Qr=Wr.positions[dn[Xt]],le=Qr[0],Qe=Math.floor(le)|0,Ze=le-Qe,Ve=Qr[1],_r=Math.floor(Ve)|0,oe=Ve-_r,Ht=!1;e:for(var te=0;te<3;++te){hr[te]=0;var ne=(He+te+1)%3;for(Wt=0;Wt<2;++Wt){var _e=Wt?Ze:1-Ze;for(Vt=Math.min(Math.max(Qe+Wt,0),W[0])|0,ee=0;ee<2;++ee){var Pe=ee?oe:1-oe;if(Zt=Math.min(Math.max(_r+ee,0),W[1])|0,te<2?St=this._field[ne].get(Vt,Zt):St=(this.intensity.get(Vt,Zt)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(St)||isNaN(St)){Ht=!0;break e}var Et=_e*Pe;hr[te]+=Et*St}}}if(!Ht)Ke.push(hr[0],hr[1],Qr[0],Qr[1],hr[2]),Ee+=1;else{if(Xt>0){for(var Mt=0;Mt<5;++Mt)Ke.pop();Ee-=1}continue t}}}We.push(Ee)}this._contourOffsets[He]=er,this._contourCounts[He]=We}var se=n.mallocFloat(Ke.length);for(K=0;K<Ke.length;++K)se[K]=Ke[K];this._contourBuffer.update(se),n.freeFloat(se)}},z.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var F=0;F<3;++F)n.freeFloat(this._field[F].data)},z.highlight=function(F){var H;if(!F){this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],this.highlightLevel=[-1,-1,-1];return}for(H=0;H<3;++H)this.enableHighlight[H]?this.highlightLevel[H]=F.level[H]:this.highlightLevel[H]=-1;var et;for(this.snapToData?et=F.dataCoordinate:et=F.position,H=0;H<3;++H)et[H]-=this.objectOffset[H];if(!((!this.enableDynamic[0]||et[0]===this.dynamicLevel[0])&&(!this.enableDynamic[1]||et[1]===this.dynamicLevel[1])&&(!this.enableDynamic[2]||et[2]===this.dynamicLevel[2]))){for(var q=0,W=this.shape,K=n.mallocFloat(12*W[0]*W[1]),nt=0;nt<3;++nt){if(!this.enableDynamic[nt]){this.dynamicLevel[nt]=NaN,this._dynamicCounts[nt]=0;continue}this.dynamicLevel[nt]=et[nt];var it=(nt+1)%3,ot=(nt+2)%3,ct=this._field[nt],bt=this._field[it],ut=this._field[ot],pt=g(ct,et[nt]),yt=pt.cells,Tt=pt.positions;for(this._dynamicOffsets[nt]=q,H=0;H<yt.length;++H)for(var kt=yt[H],zt=0;zt<2;++zt){var Rt=Tt[kt[zt]],Gt=+Rt[0],wt=Gt|0,It=Math.min(wt+1,W[0])|0,$t=Gt-wt,Qt=1-$t,Nt=+Rt[1],Pt=Nt|0,Yt=Math.min(Pt+1,W[1])|0,ve=Nt-Pt,Re=1-ve,ir=Qt*Re,Ie=Qt*ve,Be=$t*Re,Ye=$t*ve,ze=ir*bt.get(wt,Pt)+Ie*bt.get(wt,Yt)+Be*bt.get(It,Pt)+Ye*bt.get(It,Yt),Ee=ir*ut.get(wt,Pt)+Ie*ut.get(wt,Yt)+Be*ut.get(It,Pt)+Ye*ut.get(It,Yt);if(isNaN(ze)||isNaN(Ee)){zt&&(q-=1);break}K[2*q+0]=ze,K[2*q+1]=Ee,q+=1}this._dynamicCounts[nt]=q-this._dynamicOffsets[nt]}this._dynamicBuffer.update(K.subarray(0,2*q)),n.freeFloat(K)}};function lt(F){var H=F.gl,et=c(H),q=k(H),W=A(H),K=p(H),nt=a(H),it=i(H,[{buffer:nt,size:4,stride:w,offset:0},{buffer:nt,size:3,stride:w,offset:16},{buffer:nt,size:3,stride:w,offset:28}]),ot=a(H),ct=i(H,[{buffer:ot,size:4,stride:20,offset:0},{buffer:ot,size:1,stride:20,offset:16}]),bt=a(H),ut=i(H,[{buffer:bt,size:2,type:H.FLOAT}]),pt=r(H,1,L,H.RGBA,H.UNSIGNED_BYTE);pt.minFilter=H.LINEAR,pt.magFilter=H.LINEAR;var yt=new R(H,[0,0],[[0,0,0],[0,0,0]],et,q,nt,it,pt,W,K,ot,ct,bt,ut,[0,0,0]),Tt={levels:[[],[],[]]};for(var kt in F)Tt[kt]=F[kt];return Tt.colormap=Tt.colormap||"jet",yt.update(Tt),yt}},{"./lib/shaders":144,"binary-search-bounds":31,"bit-twiddle":32,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-texture2d":146,"gl-vao":150,ndarray:259,"ndarray-gradient":252,"ndarray-ops":254,"ndarray-pack":255,"surface-nets":302,"typedarray-pool":308}],146:[function(l,m,x){var t=l("ndarray"),a=l("ndarray-ops"),i=l("typedarray-pool");m.exports=p;var r=null,n=null,d=null;function s(w){r=[w.LINEAR,w.NEAREST_MIPMAP_LINEAR,w.LINEAR_MIPMAP_NEAREST,w.LINEAR_MIPMAP_NEAREST],n=[w.NEAREST,w.LINEAR,w.NEAREST_MIPMAP_NEAREST,w.NEAREST_MIPMAP_LINEAR,w.LINEAR_MIPMAP_NEAREST,w.LINEAR_MIPMAP_LINEAR],d=[w.REPEAT,w.CLAMP_TO_EDGE,w.MIRRORED_REPEAT]}function o(w){return typeof HTMLCanvasElement<"u"&&w instanceof HTMLCanvasElement||typeof HTMLImageElement<"u"&&w instanceof HTMLImageElement||typeof HTMLVideoElement<"u"&&w instanceof HTMLVideoElement||typeof ImageData<"u"&&w instanceof ImageData}var y=function(w,h){a.muls(w,h,255)};function g(w,h,D){var S=w.gl,M=S.getParameter(S.MAX_TEXTURE_SIZE);if(h<0||h>M||D<0||D>M)throw new Error("gl-texture2d: Invalid texture size");return w._shape=[h,D],w.bind(),S.texImage2D(S.TEXTURE_2D,0,w.format,h,D,0,w.format,w.type,null),w._mipLevels=[0],w}function b(w,h,D,S,M,L){this.gl=w,this.handle=h,this.format=M,this.type=L,this._shape=[D,S],this._mipLevels=[0],this._magFilter=w.NEAREST,this._minFilter=w.NEAREST,this._wrapS=w.CLAMP_TO_EDGE,this._wrapT=w.CLAMP_TO_EDGE,this._anisoSamples=1;var R=this,z=[this._wrapS,this._wrapT];Object.defineProperties(z,[{get:function(){return R._wrapS},set:function(I){return R.wrapS=I}},{get:function(){return R._wrapT},set:function(I){return R.wrapT=I}}]),this._wrapVector=z;var P=[this._shape[0],this._shape[1]];Object.defineProperties(P,[{get:function(){return R._shape[0]},set:function(I){return R.width=I}},{get:function(){return R._shape[1]},set:function(I){return R.height=I}}]),this._shapeVector=P}var v=b.prototype;Object.defineProperties(v,{minFilter:{get:function(){return this._minFilter},set:function(w){this.bind();var h=this.gl;if(this.type===h.FLOAT&&r.indexOf(w)>=0&&(h.getExtension("OES_texture_float_linear")||(w=h.NEAREST)),n.indexOf(w)<0)throw new Error("gl-texture2d: Unknown filter mode "+w);return h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,w),this._minFilter=w}},magFilter:{get:function(){return this._magFilter},set:function(w){this.bind();var h=this.gl;if(this.type===h.FLOAT&&r.indexOf(w)>=0&&(h.getExtension("OES_texture_float_linear")||(w=h.NEAREST)),n.indexOf(w)<0)throw new Error("gl-texture2d: Unknown filter mode "+w);return h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,w),this._magFilter=w}},mipSamples:{get:function(){return this._anisoSamples},set:function(w){var h=this._anisoSamples;if(this._anisoSamples=Math.max(w,1)|0,h!==this._anisoSamples){var D=this.gl.getExtension("EXT_texture_filter_anisotropic");D&&this.gl.texParameterf(this.gl.TEXTURE_2D,D.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(w){if(this.bind(),d.indexOf(w)<0)throw new Error("gl-texture2d: Unknown wrap mode "+w);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,w),this._wrapS=w}},wrapT:{get:function(){return this._wrapT},set:function(w){if(this.bind(),d.indexOf(w)<0)throw new Error("gl-texture2d: Unknown wrap mode "+w);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,w),this._wrapT=w}},wrap:{get:function(){return this._wrapVector},set:function(w){if(Array.isArray(w)||(w=[w,w]),w.length!==2)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var h=0;h<2;++h)if(d.indexOf(w[h])<0)throw new Error("gl-texture2d: Unknown wrap mode "+w);this._wrapS=w[0],this._wrapT=w[1];var D=this.gl;return this.bind(),D.texParameteri(D.TEXTURE_2D,D.TEXTURE_WRAP_S,this._wrapS),D.texParameteri(D.TEXTURE_2D,D.TEXTURE_WRAP_T,this._wrapT),w}},shape:{get:function(){return this._shapeVector},set:function(w){if(!Array.isArray(w))w=[w|0,w|0];else if(w.length!==2)throw new Error("gl-texture2d: Invalid texture shape");return g(this,w[0]|0,w[1]|0),[w[0]|0,w[1]|0]}},width:{get:function(){return this._shape[0]},set:function(w){return w=w|0,g(this,w,this._shape[1]),w}},height:{get:function(){return this._shape[1]},set:function(w){return w=w|0,g(this,this._shape[0],w),w}}}),v.bind=function(w){var h=this.gl;return w!==void 0&&h.activeTexture(h.TEXTURE0+(w|0)),h.bindTexture(h.TEXTURE_2D,this.handle),w!==void 0?w|0:h.getParameter(h.ACTIVE_TEXTURE)-h.TEXTURE0},v.dispose=function(){this.gl.deleteTexture(this.handle)},v.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var w=Math.min(this._shape[0],this._shape[1]),h=0;w>0;++h,w>>>=1)this._mipLevels.indexOf(h)<0&&this._mipLevels.push(h)},v.setPixels=function(w,h,D,S){var M=this.gl;this.bind(),Array.isArray(h)?(S=D,D=h[1]|0,h=h[0]|0):(h=h||0,D=D||0),S=S||0;var L=o(w)?w:w.raw;if(L){var R=this._mipLevels.indexOf(S)<0;R?(M.texImage2D(M.TEXTURE_2D,0,this.format,this.format,this.type,L),this._mipLevels.push(S)):M.texSubImage2D(M.TEXTURE_2D,S,h,D,this.format,this.type,L)}else if(w.shape&&w.stride&&w.data){if(w.shape.length<2||h+w.shape[1]>this._shape[1]>>>S||D+w.shape[0]>this._shape[0]>>>S||h<0||D<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");u(M,h,D,S,this.format,this.type,this._mipLevels,w)}else throw new Error("gl-texture2d: Unsupported data type")};function _(w,h){return w.length===3?h[2]===1&&h[1]===w[0]*w[2]&&h[0]===w[2]:h[0]===1&&h[1]===w[0]}function u(w,h,D,S,M,L,R,z){var P=z.dtype,I=z.shape.slice();if(I.length<2||I.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var U=0,O=0,G=_(I,z.stride.slice());if(P==="float32"?U=w.FLOAT:P==="float64"?(U=w.FLOAT,G=!1,P="float32"):P==="uint8"?U=w.UNSIGNED_BYTE:(U=w.UNSIGNED_BYTE,G=!1,P="uint8"),I.length===2)O=w.LUMINANCE,I=[I[0],I[1],1],z=t(z.data,I,[z.stride[0],z.stride[1],1],z.offset);else if(I.length===3){if(I[2]===1)O=w.ALPHA;else if(I[2]===2)O=w.LUMINANCE_ALPHA;else if(I[2]===3)O=w.RGB;else if(I[2]===4)O=w.RGBA;else throw new Error("gl-texture2d: Invalid shape for pixel coords");I[2]}else throw new Error("gl-texture2d: Invalid shape for texture");if((O===w.LUMINANCE||O===w.ALPHA)&&(M===w.LUMINANCE||M===w.ALPHA)&&(O=M),O!==M)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var $=z.size,tt=R.indexOf(S)<0;if(tt&&R.push(S),U===L&&G)z.offset===0&&z.data.length===$?tt?w.texImage2D(w.TEXTURE_2D,S,M,I[0],I[1],0,M,L,z.data):w.texSubImage2D(w.TEXTURE_2D,S,h,D,I[0],I[1],M,L,z.data):tt?w.texImage2D(w.TEXTURE_2D,S,M,I[0],I[1],0,M,L,z.data.subarray(z.offset,z.offset+$)):w.texSubImage2D(w.TEXTURE_2D,S,h,D,I[0],I[1],M,L,z.data.subarray(z.offset,z.offset+$));else{var Z;L===w.FLOAT?Z=i.mallocFloat32($):Z=i.mallocUint8($);var X=t(Z,I,[I[2],I[2]*I[0],1]);U===w.FLOAT&&L===w.UNSIGNED_BYTE?y(X,z):a.assign(X,z),tt?w.texImage2D(w.TEXTURE_2D,S,M,I[0],I[1],0,M,L,Z.subarray(0,$)):w.texSubImage2D(w.TEXTURE_2D,S,h,D,I[0],I[1],M,L,Z.subarray(0,$)),L===w.FLOAT?i.freeFloat32(Z):i.freeUint8(Z)}}function T(w){var h=w.createTexture();return w.bindTexture(w.TEXTURE_2D,h),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MIN_FILTER,w.NEAREST),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MAG_FILTER,w.NEAREST),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_S,w.CLAMP_TO_EDGE),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_T,w.CLAMP_TO_EDGE),h}function c(w,h,D,S,M){var L=w.getParameter(w.MAX_TEXTURE_SIZE);if(h<0||h>L||D<0||D>L)throw new Error("gl-texture2d: Invalid texture shape");if(M===w.FLOAT&&!w.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var R=T(w);return w.texImage2D(w.TEXTURE_2D,0,S,h,D,0,S,M,null),new b(w,R,h,D,S,M)}function A(w,h,D,S,M,L){var R=T(w);return w.texImage2D(w.TEXTURE_2D,0,M,M,L,h),new b(w,R,D,S,M,L)}function k(w,h){var D=h.dtype,S=h.shape.slice(),M=w.getParameter(w.MAX_TEXTURE_SIZE);if(S[0]<0||S[0]>M||S[1]<0||S[1]>M)throw new Error("gl-texture2d: Invalid texture size");var L=_(S,h.stride.slice()),R=0;D==="float32"?R=w.FLOAT:D==="float64"?(R=w.FLOAT,L=!1,D="float32"):D==="uint8"?R=w.UNSIGNED_BYTE:(R=w.UNSIGNED_BYTE,L=!1,D="uint8");var z=0;if(S.length===2)z=w.LUMINANCE,S=[S[0],S[1],1],h=t(h.data,S,[h.stride[0],h.stride[1],1],h.offset);else if(S.length===3)if(S[2]===1)z=w.ALPHA;else if(S[2]===2)z=w.LUMINANCE_ALPHA;else if(S[2]===3)z=w.RGB;else if(S[2]===4)z=w.RGBA;else throw new Error("gl-texture2d: Invalid shape for pixel coords");else throw new Error("gl-texture2d: Invalid shape for texture");R===w.FLOAT&&!w.getExtension("OES_texture_float")&&(R=w.UNSIGNED_BYTE,L=!1);var P,I,U=h.size;if(L)h.offset===0&&h.data.length===U?P=h.data:P=h.data.subarray(h.offset,h.offset+U);else{var O=[S[2],S[2]*S[0],1];I=i.malloc(U,D);var G=t(I,S,O,0);(D==="float32"||D==="float64")&&R===w.UNSIGNED_BYTE?y(G,h):a.assign(G,h),P=I.subarray(0,U)}var $=T(w);return w.texImage2D(w.TEXTURE_2D,0,z,S[0],S[1],0,z,R,P),L||i.free(I),new b(w,$,S[0],S[1],z,R)}function p(w){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(r||s(w),typeof arguments[1]=="number")return c(w,arguments[1],arguments[2],arguments[3]||w.RGBA,arguments[4]||w.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return c(w,arguments[1][0]|0,arguments[1][1]|0,arguments[2]||w.RGBA,arguments[3]||w.UNSIGNED_BYTE);if(typeof arguments[1]=="object"){var h=arguments[1],D=o(h)?h:h.raw;if(D)return A(w,D,h.width|0,h.height|0,arguments[2]||w.RGBA,arguments[3]||w.UNSIGNED_BYTE);if(h.shape&&h.data&&h.stride)return k(w,h)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")}},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],147:[function(l,m,x){function t(a,i,r){i?i.bind():a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,null);var n=a.getParameter(a.MAX_VERTEX_ATTRIBS)|0;if(r){if(r.length>n)throw new Error("gl-vao: Too many vertex attributes");for(var d=0;d<r.length;++d){var s=r[d];if(s.buffer){var o=s.buffer,y=s.size||4,g=s.type||a.FLOAT,b=!!s.normalized,v=s.stride||0,_=s.offset||0;o.bind(),a.enableVertexAttribArray(d),a.vertexAttribPointer(d,y,g,b,v,_)}else{if(typeof s=="number")a.vertexAttrib1f(d,s);else if(s.length===1)a.vertexAttrib1f(d,s[0]);else if(s.length===2)a.vertexAttrib2f(d,s[0],s[1]);else if(s.length===3)a.vertexAttrib3f(d,s[0],s[1],s[2]);else if(s.length===4)a.vertexAttrib4f(d,s[0],s[1],s[2],s[3]);else throw new Error("gl-vao: Invalid vertex attribute");a.disableVertexAttribArray(d)}}for(;d<n;++d)a.disableVertexAttribArray(d)}else{a.bindBuffer(a.ARRAY_BUFFER,null);for(var d=0;d<n;++d)a.disableVertexAttribArray(d)}}m.exports=t},{}],148:[function(l,m,x){var t=l("./do-bind.js");function a(r){this.gl=r,this._elements=null,this._attributes=null,this._elementsType=r.UNSIGNED_SHORT}a.prototype.bind=function(){t(this.gl,this._elements,this._attributes)},a.prototype.update=function(r,n,d){this._elements=n,this._attributes=r,this._elementsType=d||this.gl.UNSIGNED_SHORT},a.prototype.dispose=function(){},a.prototype.unbind=function(){},a.prototype.draw=function(r,n,d){d=d||0;var s=this.gl;this._elements?s.drawElements(r,n,this._elementsType,d):s.drawArrays(r,d,n)};function i(r){return new a(r)}m.exports=i},{"./do-bind.js":147}],149:[function(l,m,x){var t=l("./do-bind.js");function a(n,d,s,o,y,g){this.location=n,this.dimension=d,this.a=s,this.b=o,this.c=y,this.d=g}a.prototype.bind=function(n){switch(this.dimension){case 1:n.vertexAttrib1f(this.location,this.a);break;case 2:n.vertexAttrib2f(this.location,this.a,this.b);break;case 3:n.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:n.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d);break}};function i(n,d,s){this.gl=n,this._ext=d,this.handle=s,this._attribs=[],this._useElements=!1,this._elementsType=n.UNSIGNED_SHORT}i.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var n=0;n<this._attribs.length;++n)this._attribs[n].bind(this.gl)},i.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},i.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},i.prototype.update=function(n,d,s){if(this.bind(),t(this.gl,d,n),this.unbind(),this._attribs.length=0,n)for(var o=0;o<n.length;++o){var y=n[o];typeof y=="number"?this._attribs.push(new a(o,1,y)):Array.isArray(y)&&this._attribs.push(new a(o,y.length,y[0],y[1],y[2],y[3]))}this._useElements=!!d,this._elementsType=s||this.gl.UNSIGNED_SHORT},i.prototype.draw=function(n,d,s){s=s||0;var o=this.gl;this._useElements?o.drawElements(n,d,this._elementsType,s):o.drawArrays(n,s,d)};function r(n,d){return new i(n,d,d.createVertexArrayOES())}m.exports=r},{"./do-bind.js":147}],150:[function(l,m,x){var t=l("./lib/vao-native.js"),a=l("./lib/vao-emulated.js");function i(n){this.bindVertexArrayOES=n.bindVertexArray.bind(n),this.createVertexArrayOES=n.createVertexArray.bind(n),this.deleteVertexArrayOES=n.deleteVertexArray.bind(n)}function r(n,d,s,o){var y=n.createVertexArray?new i(n):n.getExtension("OES_vertex_array_object"),g;return y?g=t(n,y):g=a(n),g.update(d,s,o),g}m.exports=r},{"./lib/vao-emulated.js":148,"./lib/vao-native.js":149}],151:[function(l,m,x){m.exports=t;function t(a,i,r){return a[0]=i[0]+r[0],a[1]=i[1]+r[1],a[2]=i[2]+r[2],a}},{}],152:[function(l,m,x){m.exports=r;var t=l("./fromValues"),a=l("./normalize"),i=l("./dot");function r(n,d){var s=t(n[0],n[1],n[2]),o=t(d[0],d[1],d[2]);a(s,s),a(o,o);var y=i(s,o);return y>1?0:Math.acos(y)}},{"./dot":162,"./fromValues":168,"./normalize":179}],153:[function(l,m,x){m.exports=t;function t(a,i){return a[0]=Math.ceil(i[0]),a[1]=Math.ceil(i[1]),a[2]=Math.ceil(i[2]),a}},{}],154:[function(l,m,x){m.exports=t;function t(a){var i=new Float32Array(3);return i[0]=a[0],i[1]=a[1],i[2]=a[2],i}},{}],155:[function(l,m,x){m.exports=t;function t(a,i){return a[0]=i[0],a[1]=i[1],a[2]=i[2],a}},{}],156:[function(l,m,x){m.exports=t;function t(){var a=new Float32Array(3);return a[0]=0,a[1]=0,a[2]=0,a}},{}],157:[function(l,m,x){m.exports=t;function t(a,i,r){var n=i[0],d=i[1],s=i[2],o=r[0],y=r[1],g=r[2];return a[0]=d*g-s*y,a[1]=s*o-n*g,a[2]=n*y-d*o,a}},{}],158:[function(l,m,x){m.exports=l("./distance")},{"./distance":159}],159:[function(l,m,x){m.exports=t;function t(a,i){var r=i[0]-a[0],n=i[1]-a[1],d=i[2]-a[2];return Math.sqrt(r*r+n*n+d*d)}},{}],160:[function(l,m,x){m.exports=l("./divide")},{"./divide":161}],161:[function(l,m,x){m.exports=t;function t(a,i,r){return a[0]=i[0]/r[0],a[1]=i[1]/r[1],a[2]=i[2]/r[2],a}},{}],162:[function(l,m,x){m.exports=t;function t(a,i){return a[0]*i[0]+a[1]*i[1]+a[2]*i[2]}},{}],163:[function(l,m,x){m.exports=1e-6},{}],164:[function(l,m,x){m.exports=a;var t=l("./epsilon");function a(i,r){var n=i[0],d=i[1],s=i[2],o=r[0],y=r[1],g=r[2];return Math.abs(n-o)<=t*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(d-y)<=t*Math.max(1,Math.abs(d),Math.abs(y))&&Math.abs(s-g)<=t*Math.max(1,Math.abs(s),Math.abs(g))}},{"./epsilon":163}],165:[function(l,m,x){m.exports=t;function t(a,i){return a[0]===i[0]&&a[1]===i[1]&&a[2]===i[2]}},{}],166:[function(l,m,x){m.exports=t;function t(a,i){return a[0]=Math.floor(i[0]),a[1]=Math.floor(i[1]),a[2]=Math.floor(i[2]),a}},{}],167:[function(l,m,x){m.exports=a;var t=l("./create")();function a(i,r,n,d,s,o){var y,g;for(r||(r=3),n||(n=0),d?g=Math.min(d*r+n,i.length):g=i.length,y=n;y<g;y+=r)t[0]=i[y],t[1]=i[y+1],t[2]=i[y+2],s(t,t,o),i[y]=t[0],i[y+1]=t[1],i[y+2]=t[2];return i}},{"./create":156}],168:[function(l,m,x){m.exports=t;function t(a,i,r){var n=new Float32Array(3);return n[0]=a,n[1]=i,n[2]=r,n}},{}],169:[function(l,m,x){m.exports={EPSILON:l("./epsilon"),create:l("./create"),clone:l("./clone"),angle:l("./angle"),fromValues:l("./fromValues"),copy:l("./copy"),set:l("./set"),equals:l("./equals"),exactEquals:l("./exactEquals"),add:l("./add"),subtract:l("./subtract"),sub:l("./sub"),multiply:l("./multiply"),mul:l("./mul"),divide:l("./divide"),div:l("./div"),min:l("./min"),max:l("./max"),floor:l("./floor"),ceil:l("./ceil"),round:l("./round"),scale:l("./scale"),scaleAndAdd:l("./scaleAndAdd"),distance:l("./distance"),dist:l("./dist"),squaredDistance:l("./squaredDistance"),sqrDist:l("./sqrDist"),length:l("./length"),len:l("./len"),squaredLength:l("./squaredLength"),sqrLen:l("./sqrLen"),negate:l("./negate"),inverse:l("./inverse"),normalize:l("./normalize"),dot:l("./dot"),cross:l("./cross"),lerp:l("./lerp"),random:l("./random"),transformMat4:l("./transformMat4"),transformMat3:l("./transformMat3"),transformQuat:l("./transformQuat"),rotateX:l("./rotateX"),rotateY:l("./rotateY"),rotateZ:l("./rotateZ"),forEach:l("./forEach")}},{"./add":151,"./angle":152,"./ceil":153,"./clone":154,"./copy":155,"./create":156,"./cross":157,"./dist":158,"./distance":159,"./div":160,"./divide":161,"./dot":162,"./epsilon":163,"./equals":164,"./exactEquals":165,"./floor":166,"./forEach":167,"./fromValues":168,"./inverse":170,"./len":171,"./length":172,"./lerp":173,"./max":174,"./min":175,"./mul":176,"./multiply":177,"./negate":178,"./normalize":179,"./random":180,"./rotateX":181,"./rotateY":182,"./rotateZ":183,"./round":184,"./scale":185,"./scaleAndAdd":186,"./set":187,"./sqrDist":188,"./sqrLen":189,"./squaredDistance":190,"./squaredLength":191,"./sub":192,"./subtract":193,"./transformMat3":194,"./transformMat4":195,"./transformQuat":196}],170:[function(l,m,x){m.exports=t;function t(a,i){return a[0]=1/i[0],a[1]=1/i[1],a[2]=1/i[2],a}},{}],171:[function(l,m,x){m.exports=l("./length")},{"./length":172}],172:[function(l,m,x){m.exports=t;function t(a){var i=a[0],r=a[1],n=a[2];return Math.sqrt(i*i+r*r+n*n)}},{}],173:[function(l,m,x){m.exports=t;function t(a,i,r,n){var d=i[0],s=i[1],o=i[2];return a[0]=d+n*(r[0]-d),a[1]=s+n*(r[1]-s),a[2]=o+n*(r[2]-o),a}},{}],174:[function(l,m,x){m.exports=t;function t(a,i,r){return a[0]=Math.max(i[0],r[0]),a[1]=Math.max(i[1],r[1]),a[2]=Math.max(i[2],r[2]),a}},{}],175:[function(l,m,x){m.exports=t;function t(a,i,r){return a[0]=Math.min(i[0],r[0]),a[1]=Math.min(i[1],r[1]),a[2]=Math.min(i[2],r[2]),a}},{}],176:[function(l,m,x){m.exports=l("./multiply")},{"./multiply":177}],177:[function(l,m,x){m.exports=t;function t(a,i,r){return a[0]=i[0]*r[0],a[1]=i[1]*r[1],a[2]=i[2]*r[2],a}},{}],178:[function(l,m,x){m.exports=t;function t(a,i){return a[0]=-i[0],a[1]=-i[1],a[2]=-i[2],a}},{}],179:[function(l,m,x){m.exports=t;function t(a,i){var r=i[0],n=i[1],d=i[2],s=r*r+n*n+d*d;return s>0&&(s=1/Math.sqrt(s),a[0]=i[0]*s,a[1]=i[1]*s,a[2]=i[2]*s),a}},{}],180:[function(l,m,x){m.exports=t;function t(a,i){i=i||1;var r=Math.random()*2*Math.PI,n=Math.random()*2-1,d=Math.sqrt(1-n*n)*i;return a[0]=Math.cos(r)*d,a[1]=Math.sin(r)*d,a[2]=n*i,a}},{}],181:[function(l,m,x){m.exports=t;function t(a,i,r,n){var d=r[1],s=r[2],o=i[1]-d,y=i[2]-s,g=Math.sin(n),b=Math.cos(n);return a[0]=i[0],a[1]=d+o*b-y*g,a[2]=s+o*g+y*b,a}},{}],182:[function(l,m,x){m.exports=t;function t(a,i,r,n){var d=r[0],s=r[2],o=i[0]-d,y=i[2]-s,g=Math.sin(n),b=Math.cos(n);return a[0]=d+y*g+o*b,a[1]=i[1],a[2]=s+y*b-o*g,a}},{}],183:[function(l,m,x){m.exports=t;function t(a,i,r,n){var d=r[0],s=r[1],o=i[0]-d,y=i[1]-s,g=Math.sin(n),b=Math.cos(n);return a[0]=d+o*b-y*g,a[1]=s+o*g+y*b,a[2]=i[2],a}},{}],184:[function(l,m,x){m.exports=t;function t(a,i){return a[0]=Math.round(i[0]),a[1]=Math.round(i[1]),a[2]=Math.round(i[2]),a}},{}],185:[function(l,m,x){m.exports=t;function t(a,i,r){return a[0]=i[0]*r,a[1]=i[1]*r,a[2]=i[2]*r,a}},{}],186:[function(l,m,x){m.exports=t;function t(a,i,r,n){return a[0]=i[0]+r[0]*n,a[1]=i[1]+r[1]*n,a[2]=i[2]+r[2]*n,a}},{}],187:[function(l,m,x){m.exports=t;function t(a,i,r,n){return a[0]=i,a[1]=r,a[2]=n,a}},{}],188:[function(l,m,x){m.exports=l("./squaredDistance")},{"./squaredDistance":190}],189:[function(l,m,x){m.exports=l("./squaredLength")},{"./squaredLength":191}],190:[function(l,m,x){m.exports=t;function t(a,i){var r=i[0]-a[0],n=i[1]-a[1],d=i[2]-a[2];return r*r+n*n+d*d}},{}],191:[function(l,m,x){m.exports=t;function t(a){var i=a[0],r=a[1],n=a[2];return i*i+r*r+n*n}},{}],192:[function(l,m,x){m.exports=l("./subtract")},{"./subtract":193}],193:[function(l,m,x){m.exports=t;function t(a,i,r){return a[0]=i[0]-r[0],a[1]=i[1]-r[1],a[2]=i[2]-r[2],a}},{}],194:[function(l,m,x){m.exports=t;function t(a,i,r){var n=i[0],d=i[1],s=i[2];return a[0]=n*r[0]+d*r[3]+s*r[6],a[1]=n*r[1]+d*r[4]+s*r[7],a[2]=n*r[2]+d*r[5]+s*r[8],a}},{}],195:[function(l,m,x){m.exports=t;function t(a,i,r){var n=i[0],d=i[1],s=i[2],o=r[3]*n+r[7]*d+r[11]*s+r[15];return o=o||1,a[0]=(r[0]*n+r[4]*d+r[8]*s+r[12])/o,a[1]=(r[1]*n+r[5]*d+r[9]*s+r[13])/o,a[2]=(r[2]*n+r[6]*d+r[10]*s+r[14])/o,a}},{}],196:[function(l,m,x){m.exports=t;function t(a,i,r){var n=i[0],d=i[1],s=i[2],o=r[0],y=r[1],g=r[2],b=r[3],v=b*n+y*s-g*d,_=b*d+g*n-o*s,u=b*s+o*d-y*n,T=-o*n-y*d-g*s;return a[0]=v*b+T*-o+_*-g-u*-y,a[1]=_*b+T*-y+u*-o-v*-g,a[2]=u*b+T*-g+v*-y-_*-o,a}},{}],197:[function(l,m,x){m.exports=t;function t(a,i,r){return a[0]=i[0]+r[0],a[1]=i[1]+r[1],a[2]=i[2]+r[2],a[3]=i[3]+r[3],a}},{}],198:[function(l,m,x){m.exports=t;function t(a){var i=new Float32Array(4);return i[0]=a[0],i[1]=a[1],i[2]=a[2],i[3]=a[3],i}},{}],199:[function(l,m,x){m.exports=t;function t(a,i){return a[0]=i[0],a[1]=i[1],a[2]=i[2],a[3]=i[3],a}},{}],200:[function(l,m,x){m.exports=t;function t(){var a=new Float32Array(4);return a[0]=0,a[1]=0,a[2]=0,a[3]=0,a}},{}],201:[function(l,m,x){m.exports=t;function t(a,i){var r=i[0]-a[0],n=i[1]-a[1],d=i[2]-a[2],s=i[3]-a[3];return Math.sqrt(r*r+n*n+d*d+s*s)}},{}],202:[function(l,m,x){m.exports=t;function t(a,i,r){return a[0]=i[0]/r[0],a[1]=i[1]/r[1],a[2]=i[2]/r[2],a[3]=i[3]/r[3],a}},{}],203:[function(l,m,x){m.exports=t;function t(a,i){return a[0]*i[0]+a[1]*i[1]+a[2]*i[2]+a[3]*i[3]}},{}],204:[function(l,m,x){m.exports=t;function t(a,i,r,n){var d=new Float32Array(4);return d[0]=a,d[1]=i,d[2]=r,d[3]=n,d}},{}],205:[function(l,m,x){m.exports={create:l("./create"),clone:l("./clone"),fromValues:l("./fromValues"),copy:l("./copy"),set:l("./set"),add:l("./add"),subtract:l("./subtract"),multiply:l("./multiply"),divide:l("./divide"),min:l("./min"),max:l("./max"),scale:l("./scale"),scaleAndAdd:l("./scaleAndAdd"),distance:l("./distance"),squaredDistance:l("./squaredDistance"),length:l("./length"),squaredLength:l("./squaredLength"),negate:l("./negate"),inverse:l("./inverse"),normalize:l("./normalize"),dot:l("./dot"),lerp:l("./lerp"),random:l("./random"),transformMat4:l("./transformMat4"),transformQuat:l("./transformQuat")}},{"./add":197,"./clone":198,"./copy":199,"./create":200,"./distance":201,"./divide":202,"./dot":203,"./fromValues":204,"./inverse":206,"./length":207,"./lerp":208,"./max":209,"./min":210,"./multiply":211,"./negate":212,"./normalize":213,"./random":214,"./scale":215,"./scaleAndAdd":216,"./set":217,"./squaredDistance":218,"./squaredLength":219,"./subtract":220,"./transformMat4":221,"./transformQuat":222}],206:[function(l,m,x){m.exports=t;function t(a,i){return a[0]=1/i[0],a[1]=1/i[1],a[2]=1/i[2],a[3]=1/i[3],a}},{}],207:[function(l,m,x){m.exports=t;function t(a){var i=a[0],r=a[1],n=a[2],d=a[3];return Math.sqrt(i*i+r*r+n*n+d*d)}},{}],208:[function(l,m,x){m.exports=t;function t(a,i,r,n){var d=i[0],s=i[1],o=i[2],y=i[3];return a[0]=d+n*(r[0]-d),a[1]=s+n*(r[1]-s),a[2]=o+n*(r[2]-o),a[3]=y+n*(r[3]-y),a}},{}],209:[function(l,m,x){m.exports=t;function t(a,i,r){return a[0]=Math.max(i[0],r[0]),a[1]=Math.max(i[1],r[1]),a[2]=Math.max(i[2],r[2]),a[3]=Math.max(i[3],r[3]),a}},{}],210:[function(l,m,x){m.exports=t;function t(a,i,r){return a[0]=Math.min(i[0],r[0]),a[1]=Math.min(i[1],r[1]),a[2]=Math.min(i[2],r[2]),a[3]=Math.min(i[3],r[3]),a}},{}],211:[function(l,m,x){m.exports=t;function t(a,i,r){return a[0]=i[0]*r[0],a[1]=i[1]*r[1],a[2]=i[2]*r[2],a[3]=i[3]*r[3],a}},{}],212:[function(l,m,x){m.exports=t;function t(a,i){return a[0]=-i[0],a[1]=-i[1],a[2]=-i[2],a[3]=-i[3],a}},{}],213:[function(l,m,x){m.exports=t;function t(a,i){var r=i[0],n=i[1],d=i[2],s=i[3],o=r*r+n*n+d*d+s*s;return o>0&&(o=1/Math.sqrt(o),a[0]=r*o,a[1]=n*o,a[2]=d*o,a[3]=s*o),a}},{}],214:[function(l,m,x){var t=l("./normalize"),a=l("./scale");m.exports=i;function i(r,n){return n=n||1,r[0]=Math.random(),r[1]=Math.random(),r[2]=Math.random(),r[3]=Math.random(),t(r,r),a(r,r,n),r}},{"./normalize":213,"./scale":215}],215:[function(l,m,x){m.exports=t;function t(a,i,r){return a[0]=i[0]*r,a[1]=i[1]*r,a[2]=i[2]*r,a[3]=i[3]*r,a}},{}],216:[function(l,m,x){m.exports=t;function t(a,i,r,n){return a[0]=i[0]+r[0]*n,a[1]=i[1]+r[1]*n,a[2]=i[2]+r[2]*n,a[3]=i[3]+r[3]*n,a}},{}],217:[function(l,m,x){m.exports=t;function t(a,i,r,n,d){return a[0]=i,a[1]=r,a[2]=n,a[3]=d,a}},{}],218:[function(l,m,x){m.exports=t;function t(a,i){var r=i[0]-a[0],n=i[1]-a[1],d=i[2]-a[2],s=i[3]-a[3];return r*r+n*n+d*d+s*s}},{}],219:[function(l,m,x){m.exports=t;function t(a){var i=a[0],r=a[1],n=a[2],d=a[3];return i*i+r*r+n*n+d*d}},{}],220:[function(l,m,x){m.exports=t;function t(a,i,r){return a[0]=i[0]-r[0],a[1]=i[1]-r[1],a[2]=i[2]-r[2],a[3]=i[3]-r[3],a}},{}],221:[function(l,m,x){m.exports=t;function t(a,i,r){var n=i[0],d=i[1],s=i[2],o=i[3];return a[0]=r[0]*n+r[4]*d+r[8]*s+r[12]*o,a[1]=r[1]*n+r[5]*d+r[9]*s+r[13]*o,a[2]=r[2]*n+r[6]*d+r[10]*s+r[14]*o,a[3]=r[3]*n+r[7]*d+r[11]*s+r[15]*o,a}},{}],222:[function(l,m,x){m.exports=t;function t(a,i,r){var n=i[0],d=i[1],s=i[2],o=r[0],y=r[1],g=r[2],b=r[3],v=b*n+y*s-g*d,_=b*d+g*n-o*s,u=b*s+o*d-y*n,T=-o*n-y*d-g*s;return a[0]=v*b+T*-o+_*-g-u*-y,a[1]=_*b+T*-y+u*-o-v*-g,a[2]=u*b+T*-g+v*-y-_*-o,a[3]=i[3],a}},{}],223:[function(l,m,x){var t=l("glsl-tokenizer"),a=l("atob-lite");m.exports=i;function i(r){for(var n=Array.isArray(r)?r:t(r),d=0;d<n.length;d++){var s=n[d];if(s.type==="preprocessor"){var o=s.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(!!o&&!!o[2]){var y=o[1],g=o[2];return(y?a(g):g).trim()}}}}},{"atob-lite":13,"glsl-tokenizer":230}],224:[function(l,m,x){m.exports=h;var t=l("./lib/literals"),a=l("./lib/operators"),i=l("./lib/builtins"),r=l("./lib/literals-300es"),n=l("./lib/builtins-300es"),d=999,s=9999,o=0,y=1,g=2,b=3,v=4,_=5,u=6,T=7,c=8,A=9,k=10,p=11,w=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];function h(D){var S=0,M=0,L=d,R,z,P=[],I=[],U=1,O=0,G=0,$=!1,tt=!1,Z="",X;D=D||{};var J=i,st=t;D.version==="300 es"&&(J=n,st=r);for(var at={},lt={},S=0;S<J.length;S++)at[J[S]]=!0;for(var S=0;S<st.length;S++)lt[st[S]]=!0;return function(Tt){return I=[],Tt!==null?H(Tt):et()};function F(Tt){Tt.length&&I.push({type:w[L],data:Tt,position:G,line:U,column:O})}function H(Tt){S=0,Tt.toString&&(Tt=Tt.toString()),Z+=Tt.replace(/\r\n/g,`
`),X=Z.length;for(var kt;R=Z[S],S<X;){switch(kt=S,L){case o:S=it();break;case y:S=nt();break;case g:S=K();break;case b:S=ot();break;case v:S=ut();break;case p:S=bt();break;case _:S=pt();break;case s:S=yt();break;case A:S=W();break;case d:S=q();break}if(kt!==S)switch(Z[kt]){case`
`:O=0,++U;break;default:++O;break}}return M+=S,Z=Z.slice(S),I}function et(Tt){return P.length&&F(P.join("")),L=k,F("(eof)"),I}function q(){return P=P.length?[]:P,z==="/"&&R==="*"?(G=M+S-1,L=o,z=R,S+1):z==="/"&&R==="/"?(G=M+S-1,L=y,z=R,S+1):R==="#"?(L=g,G=M+S,S):/\s/.test(R)?(L=A,G=M+S,S):($=/\d/.test(R),tt=/[^\w_]/.test(R),G=M+S,L=$?v:tt?b:s,S)}function W(){return/[^\s]/g.test(R)?(F(P.join("")),L=d,S):(P.push(R),z=R,S+1)}function K(){return(R==="\r"||R===`
`)&&z!=="\\"?(F(P.join("")),L=d,S):(P.push(R),z=R,S+1)}function nt(){return K()}function it(){return R==="/"&&z==="*"?(P.push(R),F(P.join("")),L=d,S+1):(P.push(R),z=R,S+1)}function ot(){if(z==="."&&/\d/.test(R))return L=_,S;if(z==="/"&&R==="*")return L=o,S;if(z==="/"&&R==="/")return L=y,S;if(R==="."&&P.length){for(;ct(P););return L=_,S}if(R===";"||R===")"||R==="("){if(P.length)for(;ct(P););return F(R),L=d,S+1}var Tt=P.length===2&&R!=="=";if(/[\w_\d\s]/.test(R)||Tt){for(;ct(P););return L=d,S}return P.push(R),z=R,S+1}function ct(Tt){var kt=0,zt,Rt;do{if(zt=a.indexOf(Tt.slice(0,Tt.length+kt).join("")),Rt=a[zt],zt===-1){if(kt--+Tt.length>0)continue;Rt=Tt.slice(0,1).join("")}return F(Rt),G+=Rt.length,P=P.slice(Rt.length),P.length}while(1)}function bt(){return/[^a-fA-F0-9]/.test(R)?(F(P.join("")),L=d,S):(P.push(R),z=R,S+1)}function ut(){return R==="."||/[eE]/.test(R)?(P.push(R),L=_,z=R,S+1):R==="x"&&P.length===1&&P[0]==="0"?(L=p,P.push(R),z=R,S+1):/[^\d]/.test(R)?(F(P.join("")),L=d,S):(P.push(R),z=R,S+1)}function pt(){return R==="f"&&(P.push(R),z=R,S+=1),/[eE]/.test(R)||(R==="-"||R==="+")&&/[eE]/.test(z)?(P.push(R),z=R,S+1):/[^\d]/.test(R)?(F(P.join("")),L=d,S):(P.push(R),z=R,S+1)}function yt(){if(/[^\d\w_]/.test(R)){var Tt=P.join("");return lt[Tt]?L=c:at[Tt]?L=T:L=u,F(P.join("")),L=d,S}return P.push(R),z=R,S+1}}},{"./lib/builtins":226,"./lib/builtins-300es":225,"./lib/literals":228,"./lib/literals-300es":227,"./lib/operators":229}],225:[function(l,m,x){var t=l("./builtins");t=t.slice().filter(function(a){return!/^(gl\_|texture)/.test(a)}),m.exports=t.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},{"./builtins":226}],226:[function(l,m,x){m.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},{}],227:[function(l,m,x){var t=l("./literals");m.exports=t.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},{"./literals":228}],228:[function(l,m,x){m.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},{}],229:[function(l,m,x){m.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},{}],230:[function(l,m,x){var t=l("./index");m.exports=a;function a(i,r){var n=t(r),d=[];return d=d.concat(n(i)),d=d.concat(n(null)),d}},{"./index":224}],231:[function(l,m,x){m.exports=function(t){typeof t=="string"&&(t=[t]);for(var a=[].slice.call(arguments,1),i=[],r=0;r<t.length-1;r++)i.push(t[r],a[r]||"");return i.push(t[r]),i.join("")}},{}],232:[function(l,m,x){var t=l("is-browser");function a(){var i=!1;try{var r=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("test",null,r),window.removeEventListener("test",null,r)}catch{i=!1}return i}m.exports=t&&a()},{"is-browser":236}],233:[function(l,m,x){m.exports=b;var t=l("robust-orientation"),a=l("simplicial-complex").compareCells;function i(v,_,u){this.vertices=v,this.adjacent=_,this.boundary=u,this.lastVisited=-1}i.prototype.flip=function(){var v=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=v;var _=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=_};function r(v,_,u){this.vertices=v,this.cell=_,this.index=u}function n(v,_){return a(v.vertices,_.vertices)}function d(v){return function(){var _=this.tuple;return v.apply(this,_)}}function s(v){var _=t[v+1];return _||(_=t),d(_)}var o=[];function y(v,_,u){this.dimension=v,this.vertices=_,this.simplices=u,this.interior=u.filter(function(A){return!A.boundary}),this.tuple=new Array(v+1);for(var T=0;T<=v;++T)this.tuple[T]=this.vertices[T];var c=o[v];c||(c=o[v]=s(v)),this.orient=c}var g=y.prototype;g.handleBoundaryDegeneracy=function(v,_){var u=this.dimension,T=this.vertices.length-1,c=this.tuple,A=this.vertices,k=[v];for(v.lastVisited=-T;k.length>0;){v=k.pop();for(var p=v.adjacent,w=0;w<=u;++w){var h=p[w];if(!(!h.boundary||h.lastVisited<=-T)){for(var D=h.vertices,S=0;S<=u;++S){var M=D[S];M<0?c[S]=_:c[S]=A[M]}var L=this.orient();if(L>0)return h;h.lastVisited=-T,L===0&&k.push(h)}}}return null},g.walk=function(v,_){var u=this.vertices.length-1,T=this.dimension,c=this.vertices,A=this.tuple,k=_?this.interior.length*Math.random()|0:this.interior.length-1,p=this.interior[k];t:for(;!p.boundary;){for(var w=p.vertices,h=p.adjacent,D=0;D<=T;++D)A[D]=c[w[D]];p.lastVisited=u;for(var D=0;D<=T;++D){var S=h[D];if(!(S.lastVisited>=u)){var M=A[D];A[D]=v;var L=this.orient();if(A[D]=M,L<0){p=S;continue t}else S.boundary?S.lastVisited=-u:S.lastVisited=u}}return}return p},g.addPeaks=function(v,_){var u=this.vertices.length-1,T=this.dimension,c=this.vertices,A=this.tuple,k=this.interior,p=this.simplices,w=[_];_.lastVisited=u,_.vertices[_.vertices.indexOf(-1)]=u,_.boundary=!1,k.push(_);for(var h=[];w.length>0;){var _=w.pop(),D=_.vertices,S=_.adjacent,M=D.indexOf(u);if(!(M<0)){for(var L=0;L<=T;++L)if(L!==M){var R=S[L];if(!(!R.boundary||R.lastVisited>=u)){var z=R.vertices;if(R.lastVisited!==-u){for(var P=0,I=0;I<=T;++I)z[I]<0?(P=I,A[I]=v):A[I]=c[z[I]];var U=this.orient();if(U>0){z[P]=u,R.boundary=!1,k.push(R),w.push(R),R.lastVisited=u;continue}else R.lastVisited=-u}var O=R.adjacent,G=D.slice(),$=S.slice(),tt=new i(G,$,!0);p.push(tt);var Z=O.indexOf(_);if(!(Z<0)){O[Z]=tt,$[M]=R,G[L]=-1,$[L]=_,S[L]=tt,tt.flip();for(var I=0;I<=T;++I){var X=G[I];if(!(X<0||X===u)){for(var J=new Array(T-1),st=0,at=0;at<=T;++at){var lt=G[at];lt<0||at===I||(J[st++]=lt)}h.push(new r(J,tt,I))}}}}}}}h.sort(n);for(var L=0;L+1<h.length;L+=2){var F=h[L],H=h[L+1],et=F.index,q=H.index;et<0||q<0||(F.cell.adjacent[F.index]=H.cell,H.cell.adjacent[H.index]=F.cell)}},g.insert=function(v,_){var u=this.vertices;u.push(v);var T=this.walk(v,_);if(!!T){for(var c=this.dimension,A=this.tuple,k=0;k<=c;++k){var p=T.vertices[k];p<0?A[k]=v:A[k]=u[p]}var w=this.orient(A);w<0||w===0&&(T=this.handleBoundaryDegeneracy(T,v),!T)||this.addPeaks(v,T)}},g.boundary=function(){for(var v=this.dimension,_=[],u=this.simplices,T=u.length,c=0;c<T;++c){var A=u[c];if(A.boundary){for(var k=new Array(v),p=A.vertices,w=0,h=0,D=0;D<=v;++D)p[D]>=0?k[w++]=p[D]:h=D&1;if(h===(v&1)){var S=k[0];k[0]=k[1],k[1]=S}_.push(k)}}return _};function b(v,_){var u=v.length;if(u===0)throw new Error("Must have at least d+1 points");var T=v[0].length;if(u<=T)throw new Error("Must input at least d+1 points");var c=v.slice(0,T+1),A=t.apply(void 0,c);if(A===0)throw new Error("Input not in general position");for(var k=new Array(T+1),p=0;p<=T;++p)k[p]=p;A<0&&(k[0]=1,k[1]=0);for(var w=new i(k,new Array(T+1),!1),h=w.adjacent,D=new Array(T+2),p=0;p<=T;++p){for(var S=k.slice(),M=0;M<=T;++M)M===p&&(S[M]=-1);var L=S[0];S[0]=S[1],S[1]=L;var R=new i(S,new Array(T+1),!0);h[p]=R,D[p]=R}D[T+1]=w;for(var p=0;p<=T;++p)for(var S=h[p].vertices,z=h[p].adjacent,M=0;M<=T;++M){var P=S[M];if(P<0){z[M]=w;continue}for(var I=0;I<=T;++I)h[I].vertices.indexOf(P)<0&&(z[M]=h[I])}for(var U=new y(T,c,D),O=!!_,p=T+1;p<u;++p)U.insert(v[p],O);return U.boundary()}},{"robust-orientation":284,"simplicial-complex":293}],234:[function(l,m,x){var t=l("binary-search-bounds"),a=0,i=1,r=2;m.exports=w;function n(h,D,S,M,L){this.mid=h,this.left=D,this.right=S,this.leftPoints=M,this.rightPoints=L,this.count=(D?D.count:0)+(S?S.count:0)+M.length}var d=n.prototype;function s(h,D){h.mid=D.mid,h.left=D.left,h.right=D.right,h.leftPoints=D.leftPoints,h.rightPoints=D.rightPoints,h.count=D.count}function o(h,D){var S=A(D);h.mid=S.mid,h.left=S.left,h.right=S.right,h.leftPoints=S.leftPoints,h.rightPoints=S.rightPoints,h.count=S.count}function y(h,D){var S=h.intervals([]);S.push(D),o(h,S)}function g(h,D){var S=h.intervals([]),M=S.indexOf(D);return M<0?a:(S.splice(M,1),o(h,S),i)}d.intervals=function(h){return h.push.apply(h,this.leftPoints),this.left&&this.left.intervals(h),this.right&&this.right.intervals(h),h},d.insert=function(h){var D=this.count-this.leftPoints.length;if(this.count+=1,h[1]<this.mid)this.left?4*(this.left.count+1)>3*(D+1)?y(this,h):this.left.insert(h):this.left=A([h]);else if(h[0]>this.mid)this.right?4*(this.right.count+1)>3*(D+1)?y(this,h):this.right.insert(h):this.right=A([h]);else{var S=t.ge(this.leftPoints,h,T),M=t.ge(this.rightPoints,h,c);this.leftPoints.splice(S,0,h),this.rightPoints.splice(M,0,h)}},d.remove=function(h){var D=this.count-this.leftPoints;if(h[1]<this.mid){if(!this.left)return a;var S=this.right?this.right.count:0;if(4*S>3*(D-1))return g(this,h);var M=this.left.remove(h);return M===r?(this.left=null,this.count-=1,i):(M===i&&(this.count-=1),M)}else if(h[0]>this.mid){if(!this.right)return a;var L=this.left?this.left.count:0;if(4*L>3*(D-1))return g(this,h);var M=this.right.remove(h);return M===r?(this.right=null,this.count-=1,i):(M===i&&(this.count-=1),M)}else{if(this.count===1)return this.leftPoints[0]===h?r:a;if(this.leftPoints.length===1&&this.leftPoints[0]===h){if(this.left&&this.right){for(var R=this,z=this.left;z.right;)R=z,z=z.right;if(R===this)z.right=this.right;else{var P=this.left,M=this.right;R.count-=z.count,R.right=z.left,z.left=P,z.right=M}s(this,z),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?s(this,this.left):s(this,this.right);return i}for(var P=t.ge(this.leftPoints,h,T);P<this.leftPoints.length&&this.leftPoints[P][0]===h[0];++P)if(this.leftPoints[P]===h){this.count-=1,this.leftPoints.splice(P,1);for(var M=t.ge(this.rightPoints,h,c);M<this.rightPoints.length&&this.rightPoints[M][1]===h[1];++M)if(this.rightPoints[M]===h)return this.rightPoints.splice(M,1),i}return a}};function b(h,D,S){for(var M=0;M<h.length&&h[M][0]<=D;++M){var L=S(h[M]);if(L)return L}}function v(h,D,S){for(var M=h.length-1;M>=0&&h[M][1]>=D;--M){var L=S(h[M]);if(L)return L}}function _(h,D){for(var S=0;S<h.length;++S){var M=D(h[S]);if(M)return M}}d.queryPoint=function(h,D){if(h<this.mid){if(this.left){var S=this.left.queryPoint(h,D);if(S)return S}return b(this.leftPoints,h,D)}else if(h>this.mid){if(this.right){var S=this.right.queryPoint(h,D);if(S)return S}return v(this.rightPoints,h,D)}else return _(this.leftPoints,D)},d.queryInterval=function(h,D,S){if(h<this.mid&&this.left){var M=this.left.queryInterval(h,D,S);if(M)return M}if(D>this.mid&&this.right){var M=this.right.queryInterval(h,D,S);if(M)return M}return D<this.mid?b(this.leftPoints,D,S):h>this.mid?v(this.rightPoints,h,S):_(this.leftPoints,S)};function u(h,D){return h-D}function T(h,D){var S=h[0]-D[0];return S||h[1]-D[1]}function c(h,D){var S=h[1]-D[1];return S||h[0]-D[0]}function A(h){if(h.length===0)return null;for(var D=[],S=0;S<h.length;++S)D.push(h[S][0],h[S][1]);D.sort(u);for(var M=D[D.length>>1],L=[],R=[],z=[],S=0;S<h.length;++S){var P=h[S];P[1]<M?L.push(P):M<P[0]?R.push(P):z.push(P)}var I=z,U=z.slice();return I.sort(T),U.sort(c),new n(M,A(L),A(R),I,U)}function k(h){this.root=h}var p=k.prototype;p.insert=function(h){this.root?this.root.insert(h):this.root=new n(h[0],null,null,[h],[h])},p.remove=function(h){if(this.root){var D=this.root.remove(h);return D===r&&(this.root=null),D!==a}return!1},p.queryPoint=function(h,D){if(this.root)return this.root.queryPoint(h,D)},p.queryInterval=function(h,D,S){if(h<=D&&this.root)return this.root.queryInterval(h,D,S)},Object.defineProperty(p,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(p,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});function w(h){return!h||h.length===0?new k(null):new k(A(h))}},{"binary-search-bounds":31}],235:[function(l,m,x){function t(a){for(var i=new Array(a),r=0;r<a;++r)i[r]=r;return i}m.exports=t},{}],236:[function(l,m,x){m.exports=!0},{}],237:[function(l,m,x){/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */m.exports=function(i){return i!=null&&(t(i)||a(i)||!!i._isBuffer)};function t(i){return!!i.constructor&&typeof i.constructor.isBuffer=="function"&&i.constructor.isBuffer(i)}function a(i){return typeof i.readFloatLE=="function"&&typeof i.slice=="function"&&t(i.slice(0,0))}},{}],238:[function(l,m,x){m.exports=i,m.exports.isMobile=i,m.exports.default=i;var t=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,a=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function i(r){r||(r={});var n=r.ua;if(!n&&typeof navigator<"u"&&(n=navigator.userAgent),n&&n.headers&&typeof n.headers["user-agent"]=="string"&&(n=n.headers["user-agent"]),typeof n!="string")return!1;var d=r.tablet?a.test(n):t.test(n);return!d&&r.tablet&&r.featureDetect&&navigator&&navigator.maxTouchPoints>1&&n.indexOf("Macintosh")!==-1&&n.indexOf("Safari")!==-1&&(d=!0),d}},{}],239:[function(l,m,x){m.exports=function(t){for(var a=t.length,i,r=0;r<a;r++)if(i=t.charCodeAt(r),(i<9||i>13)&&i!==32&&i!==133&&i!==160&&i!==5760&&i!==6158&&(i<8192||i>8205)&&i!==8232&&i!==8233&&i!==8239&&i!==8287&&i!==8288&&i!==12288&&i!==65279)return!1;return!0}},{}],240:[function(l,m,x){function t(a,i,r){return a*(1-r)+i*r}m.exports=t},{}],241:[function(l,m,x){var t=l("./normalize"),a=l("gl-mat4/create"),i=l("gl-mat4/clone"),r=l("gl-mat4/determinant"),n=l("gl-mat4/invert"),d=l("gl-mat4/transpose"),s={length:l("gl-vec3/length"),normalize:l("gl-vec3/normalize"),dot:l("gl-vec3/dot"),cross:l("gl-vec3/cross")},o=a(),y=a(),g=[0,0,0,0],b=[[0,0,0],[0,0,0],[0,0,0]],v=[0,0,0];m.exports=function(A,k,p,w,h,D){if(k||(k=[0,0,0]),p||(p=[0,0,0]),w||(w=[0,0,0]),h||(h=[0,0,0,1]),D||(D=[0,0,0,1]),!t(o,A)||(i(y,o),y[3]=0,y[7]=0,y[11]=0,y[15]=1,Math.abs(r(y)<1e-8)))return!1;var S=o[3],M=o[7],L=o[11],R=o[12],z=o[13],P=o[14],I=o[15];if(S!==0||M!==0||L!==0){g[0]=S,g[1]=M,g[2]=L,g[3]=I;var U=n(y,y);if(!U)return!1;d(y,y),_(h,g,y)}else h[0]=h[1]=h[2]=0,h[3]=1;if(k[0]=R,k[1]=z,k[2]=P,u(b,o),p[0]=s.length(b[0]),s.normalize(b[0],b[0]),w[0]=s.dot(b[0],b[1]),T(b[1],b[1],b[0],1,-w[0]),p[1]=s.length(b[1]),s.normalize(b[1],b[1]),w[0]/=p[1],w[1]=s.dot(b[0],b[2]),T(b[2],b[2],b[0],1,-w[1]),w[2]=s.dot(b[1],b[2]),T(b[2],b[2],b[1],1,-w[2]),p[2]=s.length(b[2]),s.normalize(b[2],b[2]),w[1]/=p[2],w[2]/=p[2],s.cross(v,b[1],b[2]),s.dot(b[0],v)<0)for(var O=0;O<3;O++)p[O]*=-1,b[O][0]*=-1,b[O][1]*=-1,b[O][2]*=-1;return D[0]=.5*Math.sqrt(Math.max(1+b[0][0]-b[1][1]-b[2][2],0)),D[1]=.5*Math.sqrt(Math.max(1-b[0][0]+b[1][1]-b[2][2],0)),D[2]=.5*Math.sqrt(Math.max(1-b[0][0]-b[1][1]+b[2][2],0)),D[3]=.5*Math.sqrt(Math.max(1+b[0][0]+b[1][1]+b[2][2],0)),b[2][1]>b[1][2]&&(D[0]=-D[0]),b[0][2]>b[2][0]&&(D[1]=-D[1]),b[1][0]>b[0][1]&&(D[2]=-D[2]),!0};function _(c,A,k){var p=A[0],w=A[1],h=A[2],D=A[3];return c[0]=k[0]*p+k[4]*w+k[8]*h+k[12]*D,c[1]=k[1]*p+k[5]*w+k[9]*h+k[13]*D,c[2]=k[2]*p+k[6]*w+k[10]*h+k[14]*D,c[3]=k[3]*p+k[7]*w+k[11]*h+k[15]*D,c}function u(c,A){c[0][0]=A[0],c[0][1]=A[1],c[0][2]=A[2],c[1][0]=A[4],c[1][1]=A[5],c[1][2]=A[6],c[2][0]=A[8],c[2][1]=A[9],c[2][2]=A[10]}function T(c,A,k,p,w){c[0]=A[0]*p+k[0]*w,c[1]=A[1]*p+k[1]*w,c[2]=A[2]*p+k[2]*w}},{"./normalize":242,"gl-mat4/clone":92,"gl-mat4/create":93,"gl-mat4/determinant":94,"gl-mat4/invert":98,"gl-mat4/transpose":109,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/length":172,"gl-vec3/normalize":179}],242:[function(l,m,x){m.exports=function(a,i){var r=i[15];if(r===0)return!1;for(var n=1/r,d=0;d<16;d++)a[d]=i[d]*n;return!0}},{}],243:[function(l,m,x){var t=l("gl-vec3/lerp"),a=l("mat4-recompose"),i=l("mat4-decompose"),r=l("gl-mat4/determinant"),n=l("quat-slerp"),d=g(),s=g(),o=g();m.exports=y;function y(_,u,T,c){if(r(u)===0||r(T)===0)return!1;var A=i(u,d.translate,d.scale,d.skew,d.perspective,d.quaternion),k=i(T,s.translate,s.scale,s.skew,s.perspective,s.quaternion);return!A||!k?!1:(t(o.translate,d.translate,s.translate,c),t(o.skew,d.skew,s.skew,c),t(o.scale,d.scale,s.scale,c),t(o.perspective,d.perspective,s.perspective,c),n(o.quaternion,d.quaternion,s.quaternion,c),a(_,o.translate,o.scale,o.skew,o.perspective,o.quaternion),!0)}function g(){return{translate:b(),scale:b(1),skew:b(),perspective:v(),quaternion:v()}}function b(_){return[_||0,_||0,_||0]}function v(){return[0,0,0,1]}},{"gl-mat4/determinant":94,"gl-vec3/lerp":173,"mat4-decompose":241,"mat4-recompose":244,"quat-slerp":271}],244:[function(l,m,x){var t={identity:l("gl-mat4/identity"),translate:l("gl-mat4/translate"),multiply:l("gl-mat4/multiply"),create:l("gl-mat4/create"),scale:l("gl-mat4/scale"),fromRotationTranslation:l("gl-mat4/fromRotationTranslation")};t.create();var a=t.create();m.exports=function(r,n,d,s,o,y){return t.identity(r),t.fromRotationTranslation(r,y,n),r[3]=o[0],r[7]=o[1],r[11]=o[2],r[15]=o[3],t.identity(a),s[2]!==0&&(a[9]=s[2],t.multiply(r,r,a)),s[1]!==0&&(a[9]=0,a[8]=s[1],t.multiply(r,r,a)),s[0]!==0&&(a[8]=0,a[4]=s[0],t.multiply(r,r,a)),t.scale(r,r,d),r}},{"gl-mat4/create":93,"gl-mat4/fromRotationTranslation":96,"gl-mat4/identity":97,"gl-mat4/multiply":100,"gl-mat4/scale":107,"gl-mat4/translate":108}],245:[function(l,m,x){var t=l("binary-search-bounds"),a=l("mat4-interpolate"),i=l("gl-mat4/invert"),r=l("gl-mat4/rotateX"),n=l("gl-mat4/rotateY"),d=l("gl-mat4/rotateZ"),s=l("gl-mat4/lookAt"),o=l("gl-mat4/translate");l("gl-mat4/scale");var y=l("gl-vec3/normalize"),g=[0,0,0];m.exports=u;function b(T){this._components=T.slice(),this._time=[0],this.prevMatrix=T.slice(),this.nextMatrix=T.slice(),this.computedMatrix=T.slice(),this.computedInverse=T.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}var v=b.prototype;v.recalcMatrix=function(T){var c=this._time,A=t.le(c,T),k=this.computedMatrix;if(!(A<0)){var p=this._components;if(A===c.length-1)for(var w=16*A,h=0;h<16;++h)k[h]=p[w++];else{for(var D=c[A+1]-c[A],w=16*A,S=this.prevMatrix,M=!0,h=0;h<16;++h)S[h]=p[w++];for(var L=this.nextMatrix,h=0;h<16;++h)L[h]=p[w++],M=M&&S[h]===L[h];if(D<1e-6||M)for(var h=0;h<16;++h)k[h]=S[h];else a(k,S,L,(T-c[A])/D)}var R=this.computedUp;R[0]=k[1],R[1]=k[5],R[2]=k[9],y(R,R);var z=this.computedInverse;i(z,k);var P=this.computedEye,I=z[15];P[0]=z[12]/I,P[1]=z[13]/I,P[2]=z[14]/I;for(var U=this.computedCenter,O=Math.exp(this.computedRadius[0]),h=0;h<3;++h)U[h]=P[h]-k[2+4*h]*O}},v.idle=function(T){if(!(T<this.lastT())){for(var c=this._components,A=c.length-16,k=0;k<16;++k)c.push(c[A++]);this._time.push(T)}},v.flush=function(T){var c=t.gt(this._time,T)-2;c<0||(this._time.splice(0,c),this._components.splice(0,16*c))},v.lastT=function(){return this._time[this._time.length-1]},v.lookAt=function(T,c,A,k){this.recalcMatrix(T),c=c||this.computedEye,A=A||g,k=k||this.computedUp,this.setMatrix(T,s(this.computedMatrix,c,A,k));for(var p=0,w=0;w<3;++w)p+=Math.pow(A[w]-c[w],2);p=Math.log(Math.sqrt(p)),this.computedRadius[0]=p},v.rotate=function(T,c,A,k){this.recalcMatrix(T);var p=this.computedInverse;c&&n(p,p,c),A&&r(p,p,A),k&&d(p,p,k),this.setMatrix(T,i(this.computedMatrix,p))};var _=[0,0,0];v.pan=function(T,c,A,k){_[0]=-(c||0),_[1]=-(A||0),_[2]=-(k||0),this.recalcMatrix(T);var p=this.computedInverse;o(p,p,_),this.setMatrix(T,i(p,p))},v.translate=function(T,c,A,k){_[0]=c||0,_[1]=A||0,_[2]=k||0,this.recalcMatrix(T);var p=this.computedMatrix;o(p,p,_),this.setMatrix(T,p)},v.setMatrix=function(T,c){if(!(T<this.lastT())){this._time.push(T);for(var A=0;A<16;++A)this._components.push(c[A])}},v.setDistance=function(T,c){this.computedRadius[0]=c},v.setDistanceLimits=function(T,c){var A=this._limits;A[0]=T,A[1]=c},v.getDistanceLimits=function(T){var c=this._limits;return T?(T[0]=c[0],T[1]=c[1],T):c};function u(T){T=T||{};var c=T.matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return new b(c)}},{"binary-search-bounds":31,"gl-mat4/invert":98,"gl-mat4/lookAt":99,"gl-mat4/rotateX":104,"gl-mat4/rotateY":105,"gl-mat4/rotateZ":106,"gl-mat4/scale":107,"gl-mat4/translate":108,"gl-vec3/normalize":179,"mat4-interpolate":243}],246:[function(l,m,x){m.exports=a;var t=l("robust-orientation")[3];function a(i){var r=i.length;if(r<3){for(var v=new Array(r),n=0;n<r;++n)v[n]=n;return r===2&&i[0][0]===i[1][0]&&i[0][1]===i[1][1]?[0]:v}for(var d=new Array(r),n=0;n<r;++n)d[n]=n;d.sort(function(c,A){var k=i[c][0]-i[A][0];return k||i[c][1]-i[A][1]});for(var s=[d[0],d[1]],o=[d[0],d[1]],n=2;n<r;++n){for(var y=d[n],g=i[y],b=s.length;b>1&&t(i[s[b-2]],i[s[b-1]],g)<=0;)b-=1,s.pop();for(s.push(y),b=o.length;b>1&&t(i[o[b-2]],i[o[b-1]],g)>=0;)b-=1,o.pop();o.push(y)}for(var v=new Array(o.length+s.length-2),_=0,n=0,u=s.length;n<u;++n)v[_++]=s[n];for(var T=o.length-2;T>0;--T)v[_++]=o[T];return v}},{"robust-orientation":284}],247:[function(l,m,x){m.exports=a;var t=l("mouse-event");function a(i,r){r||(r=i,i=window);var n=0,d=0,s=0,o={shift:!1,alt:!1,control:!1,meta:!1},y=!1;function g(h){var D=!1;return"altKey"in h&&(D=D||h.altKey!==o.alt,o.alt=!!h.altKey),"shiftKey"in h&&(D=D||h.shiftKey!==o.shift,o.shift=!!h.shiftKey),"ctrlKey"in h&&(D=D||h.ctrlKey!==o.control,o.control=!!h.ctrlKey),"metaKey"in h&&(D=D||h.metaKey!==o.meta,o.meta=!!h.metaKey),D}function b(h,D){var S=t.x(D),M=t.y(D);"buttons"in D&&(h=D.buttons|0),(h!==n||S!==d||M!==s||g(D))&&(n=h|0,d=S||0,s=M||0,r&&r(n,d,s,o))}function v(h){b(0,h)}function _(){(n||d||s||o.shift||o.alt||o.meta||o.control)&&(d=s=0,n=0,o.shift=o.alt=o.control=o.meta=!1,r&&r(0,0,0,o))}function u(h){g(h)&&r&&r(n,d,s,o)}function T(h){t.buttons(h)===0?b(0,h):b(n,h)}function c(h){b(n|t.buttons(h),h)}function A(h){b(n&~t.buttons(h),h)}function k(){y||(y=!0,i.addEventListener("mousemove",T),i.addEventListener("mousedown",c),i.addEventListener("mouseup",A),i.addEventListener("mouseleave",v),i.addEventListener("mouseenter",v),i.addEventListener("mouseout",v),i.addEventListener("mouseover",v),i.addEventListener("blur",_),i.addEventListener("keyup",u),i.addEventListener("keydown",u),i.addEventListener("keypress",u),i!==window&&(window.addEventListener("blur",_),window.addEventListener("keyup",u),window.addEventListener("keydown",u),window.addEventListener("keypress",u)))}function p(){!y||(y=!1,i.removeEventListener("mousemove",T),i.removeEventListener("mousedown",c),i.removeEventListener("mouseup",A),i.removeEventListener("mouseleave",v),i.removeEventListener("mouseenter",v),i.removeEventListener("mouseout",v),i.removeEventListener("mouseover",v),i.removeEventListener("blur",_),i.removeEventListener("keyup",u),i.removeEventListener("keydown",u),i.removeEventListener("keypress",u),i!==window&&(window.removeEventListener("blur",_),window.removeEventListener("keyup",u),window.removeEventListener("keydown",u),window.removeEventListener("keypress",u)))}k();var w={element:i};return Object.defineProperties(w,{enabled:{get:function(){return y},set:function(h){h?k():p()},enumerable:!0},buttons:{get:function(){return n},enumerable:!0},x:{get:function(){return d},enumerable:!0},y:{get:function(){return s},enumerable:!0},mods:{get:function(){return o},enumerable:!0}}),w}},{"mouse-event":249}],248:[function(l,m,x){var t={left:0,top:0};m.exports=a;function a(r,n,d){n=n||r.currentTarget||r.srcElement,Array.isArray(d)||(d=[0,0]);var s=r.clientX||0,o=r.clientY||0,y=i(n);return d[0]=s-y.left,d[1]=o-y.top,d}function i(r){return r===window||r===document||r===document.body?t:r.getBoundingClientRect()}},{}],249:[function(l,m,x){function t(n){if(typeof n=="object"){if("buttons"in n)return n.buttons;if("which"in n){var d=n.which;if(d===2)return 4;if(d===3)return 2;if(d>0)return 1<<d-1}else if("button"in n){var d=n.button;if(d===1)return 4;if(d===2)return 2;if(d>=0)return 1<<d}}return 0}x.buttons=t;function a(n){return n.target||n.srcElement||window}x.element=a;function i(n){if(typeof n=="object"){if("offsetX"in n)return n.offsetX;var d=a(n),s=d.getBoundingClientRect();return n.clientX-s.left}return 0}x.x=i;function r(n){if(typeof n=="object"){if("offsetY"in n)return n.offsetY;var d=a(n),s=d.getBoundingClientRect();return n.clientY-s.top}return 0}x.y=r},{}],250:[function(l,m,x){var t=l("to-px");m.exports=a;function a(i,r,n){typeof i=="function"&&(n=!!r,r=i,i=window);var d=t("ex",i),s=function(o){n&&o.preventDefault();var y=o.deltaX||0,g=o.deltaY||0,b=o.deltaZ||0,v=o.deltaMode,_=1;switch(v){case 1:_=d;break;case 2:_=window.innerHeight;break}if(y*=_,g*=_,b*=_,y||g||b)return r(y,g,b,o)};return i.addEventListener("wheel",s),s}},{"to-px":304}],251:[function(l,m,x){var t=l("typedarray-pool");m.exports=r;var a={"false,0,1":function(d,s,o,y,g){return function(v,_,u,T){var c=v.shape[0]|0,A=v.shape[1]|0,k=v.data,p=v.offset|0,w=v.stride[0]|0,h=v.stride[1]|0,D=p,S,M=-w|0,L=0,R=-h|0,z=0,P=-w-h|0,I=0,U=w|0,O=h-w*c|0,G=0,$=0,tt=0,Z=2*c|0,X=y(Z),J=y(Z),st=0,at=0,lt=-1,F=-1,H=0,et=-c|0,q=c|0,W=0,K=-c-1|0,nt=c-1|0,it=0,ot=0,ct=0;for(G=0;G<c;++G)X[st++]=o(k[D],_,u,T),D+=U;if(D+=O,A>0){if($=1,X[st++]=o(k[D],_,u,T),D+=U,c>0)for(G=1,S=k[D],at=X[st]=o(S,_,u,T),H=X[st+lt],W=X[st+et],it=X[st+K],(at!==H||at!==W||at!==it)&&(L=k[D+M],z=k[D+R],I=k[D+P],d(G,$,S,L,z,I,at,H,W,it,_,u,T),ot=J[st]=tt++),st+=1,D+=U,G=2;G<c;++G)S=k[D],at=X[st]=o(S,_,u,T),H=X[st+lt],W=X[st+et],it=X[st+K],(at!==H||at!==W||at!==it)&&(L=k[D+M],z=k[D+R],I=k[D+P],d(G,$,S,L,z,I,at,H,W,it,_,u,T),ot=J[st]=tt++,it!==H&&s(J[st+lt],ot,I,L,it,H,_,u,T)),st+=1,D+=U;for(D+=O,st=0,ct=lt,lt=F,F=ct,ct=et,et=q,q=ct,ct=K,K=nt,nt=ct,$=2;$<A;++$){if(X[st++]=o(k[D],_,u,T),D+=U,c>0)for(G=1,S=k[D],at=X[st]=o(S,_,u,T),H=X[st+lt],W=X[st+et],it=X[st+K],(at!==H||at!==W||at!==it)&&(L=k[D+M],z=k[D+R],I=k[D+P],d(G,$,S,L,z,I,at,H,W,it,_,u,T),ot=J[st]=tt++,it!==W&&s(J[st+et],ot,z,I,W,it,_,u,T)),st+=1,D+=U,G=2;G<c;++G)S=k[D],at=X[st]=o(S,_,u,T),H=X[st+lt],W=X[st+et],it=X[st+K],(at!==H||at!==W||at!==it)&&(L=k[D+M],z=k[D+R],I=k[D+P],d(G,$,S,L,z,I,at,H,W,it,_,u,T),ot=J[st]=tt++,it!==W&&s(J[st+et],ot,z,I,W,it,_,u,T),it!==H&&s(J[st+lt],ot,I,L,it,H,_,u,T)),st+=1,D+=U;$&1&&(st=0),ct=lt,lt=F,F=ct,ct=et,et=q,q=ct,ct=K,K=nt,nt=ct,D+=O}}g(J),g(X)}},"false,1,0":function(d,s,o,y,g){return function(v,_,u,T){var c=v.shape[0]|0,A=v.shape[1]|0,k=v.data,p=v.offset|0,w=v.stride[0]|0,h=v.stride[1]|0,D=p,S,M=-w|0,L=0,R=-h|0,z=0,P=-w-h|0,I=0,U=h|0,O=w-h*A|0,G=0,$=0,tt=0,Z=2*A|0,X=y(Z),J=y(Z),st=0,at=0,lt=-1,F=-1,H=0,et=-A|0,q=A|0,W=0,K=-A-1|0,nt=A-1|0,it=0,ot=0,ct=0;for($=0;$<A;++$)X[st++]=o(k[D],_,u,T),D+=U;if(D+=O,c>0){if(G=1,X[st++]=o(k[D],_,u,T),D+=U,A>0)for($=1,S=k[D],at=X[st]=o(S,_,u,T),W=X[st+et],H=X[st+lt],it=X[st+K],(at!==W||at!==H||at!==it)&&(L=k[D+M],z=k[D+R],I=k[D+P],d(G,$,S,L,z,I,at,W,H,it,_,u,T),ot=J[st]=tt++),st+=1,D+=U,$=2;$<A;++$)S=k[D],at=X[st]=o(S,_,u,T),W=X[st+et],H=X[st+lt],it=X[st+K],(at!==W||at!==H||at!==it)&&(L=k[D+M],z=k[D+R],I=k[D+P],d(G,$,S,L,z,I,at,W,H,it,_,u,T),ot=J[st]=tt++,it!==H&&s(J[st+lt],ot,z,I,H,it,_,u,T)),st+=1,D+=U;for(D+=O,st=0,ct=et,et=q,q=ct,ct=lt,lt=F,F=ct,ct=K,K=nt,nt=ct,G=2;G<c;++G){if(X[st++]=o(k[D],_,u,T),D+=U,A>0)for($=1,S=k[D],at=X[st]=o(S,_,u,T),W=X[st+et],H=X[st+lt],it=X[st+K],(at!==W||at!==H||at!==it)&&(L=k[D+M],z=k[D+R],I=k[D+P],d(G,$,S,L,z,I,at,W,H,it,_,u,T),ot=J[st]=tt++,it!==W&&s(J[st+et],ot,I,L,it,W,_,u,T)),st+=1,D+=U,$=2;$<A;++$)S=k[D],at=X[st]=o(S,_,u,T),W=X[st+et],H=X[st+lt],it=X[st+K],(at!==W||at!==H||at!==it)&&(L=k[D+M],z=k[D+R],I=k[D+P],d(G,$,S,L,z,I,at,W,H,it,_,u,T),ot=J[st]=tt++,it!==H&&s(J[st+lt],ot,z,I,H,it,_,u,T),it!==W&&s(J[st+et],ot,I,L,it,W,_,u,T)),st+=1,D+=U;G&1&&(st=0),ct=et,et=q,q=ct,ct=lt,lt=F,F=ct,ct=K,K=nt,nt=ct,D+=O}}g(J),g(X)}}};function i(n,d,s,o,y,g){var b=[g,y].join(","),v=a[b];return v(n,d,s,t.mallocUint32,t.freeUint32)}function r(n){function d(_){throw new Error("ndarray-extract-contour: "+_)}typeof n!="object"&&d("Must specify arguments");var s=n.order;Array.isArray(s)||d("Must specify order");var o=n.arrayArguments||1;o<1&&d("Must have at least one array argument");var y=n.scalarArguments||0;y<0&&d("Scalar arg count must be > 0"),typeof n.vertex!="function"&&d("Must specify vertex creation function"),typeof n.cell!="function"&&d("Must specify cell creation function"),typeof n.phase!="function"&&d("Must specify phase function");for(var g=n.getters||[],b=new Array(o),v=0;v<o;++v)g.indexOf(v)>=0?b[v]=!0:b[v]=!1;return i(n.vertex,n.cell,n.phase,y,s,b)}},{"typedarray-pool":308}],252:[function(l,m,x){var t=l("dup"),a={zero:function(u,T,c,A){var k=u[0],p=c[0];A|=0;var w=0,h=p;for(w=0;w<k;++w)T[A]=0,A+=h},fdTemplate1:function(u,T,c,A,k,p,w){var h=u[0],D=c[0],S=p[0],M=-1*D,L=D;A|=0,w|=0;var R=0,z=D,P=S;for(R=0;R<h;++R)k[w]=.5*(T[A+M]-T[A+L]),A+=z,w+=P},fdTemplate2:function(u,T,c,A,k,p,w,h,D,S){var M=u[0],L=u[1],R=c[0],z=c[1],P=p[0],I=p[1],U=D[0],O=D[1],G=-1*R,$=R,tt=-1*z,Z=z;A|=0,w|=0,S|=0;var X=0,J=0,st=z,at=R-L*z,lt=I,F=P-L*I,H=O,et=U-L*O;for(J=0;J<M;++J){for(X=0;X<L;++X)k[w]=.5*(T[A+G]-T[A+$]),h[S]=.5*(T[A+tt]-T[A+Z]),A+=st,w+=lt,S+=H;A+=at,w+=F,S+=et}}},i={cdiff:function(u){var T={};return function(A,k,p){var w=A.dtype,h=A.order,D=k.dtype,S=k.order,M=p.dtype,L=p.order,R=[w,h.join(),D,S.join(),M,L.join()].join(),z=T[R];return z||(T[R]=z=u([w,h,D,S,M,L])),z(A.shape.slice(0),A.data,A.stride,A.offset|0,k.data,k.stride,k.offset|0,p.data,p.stride,p.offset|0)}},zero:function(u){var T={};return function(A){var k=A.dtype,p=A.order,w=[k,p.join()].join(),h=T[w];return h||(T[w]=h=u([k,p])),h(A.shape.slice(0),A.data,A.stride,A.offset|0)}},fdTemplate1:function(u){var T={};return function(A,k){var p=A.dtype,w=A.order,h=k.dtype,D=k.order,S=[p,w.join(),h,D.join()].join(),M=T[S];return M||(T[S]=M=u([p,w,h,D])),M(A.shape.slice(0),A.data,A.stride,A.offset|0,k.data,k.stride,k.offset|0)}},fdTemplate2:function(u){var T={};return function(A,k,p){var w=A.dtype,h=A.order,D=k.dtype,S=k.order,M=p.dtype,L=p.order,R=[w,h.join(),D,S.join(),M,L.join()].join(),z=T[R];return z||(T[R]=z=u([w,h,D,S,M,L])),z(A.shape.slice(0),A.data,A.stride,A.offset|0,k.data,k.stride,k.offset|0,p.data,p.stride,p.offset|0)}}};function r(u){var T=i[u.funcName];return T(n.bind(void 0,u))}function n(u){return a[u.funcName]}function d(u){return r({funcName:u.funcName})}var s={},o={},y=d({funcName:"cdiff"}),g=d({funcName:"zero"});function b(u){return u in s?s[u]:s[u]=d({funcName:"fdTemplate"+u})}function v(u,T,c,A){return function(k,p){var w=p.shape.slice();return w[0]>2&&w[1]>2&&A(p.pick(-1,-1).lo(1,1).hi(w[0]-2,w[1]-2),k.pick(-1,-1,0).lo(1,1).hi(w[0]-2,w[1]-2),k.pick(-1,-1,1).lo(1,1).hi(w[0]-2,w[1]-2)),w[1]>2&&(c(p.pick(0,-1).lo(1).hi(w[1]-2),k.pick(0,-1,1).lo(1).hi(w[1]-2)),T(k.pick(0,-1,0).lo(1).hi(w[1]-2))),w[1]>2&&(c(p.pick(w[0]-1,-1).lo(1).hi(w[1]-2),k.pick(w[0]-1,-1,1).lo(1).hi(w[1]-2)),T(k.pick(w[0]-1,-1,0).lo(1).hi(w[1]-2))),w[0]>2&&(c(p.pick(-1,0).lo(1).hi(w[0]-2),k.pick(-1,0,0).lo(1).hi(w[0]-2)),T(k.pick(-1,0,1).lo(1).hi(w[0]-2))),w[0]>2&&(c(p.pick(-1,w[1]-1).lo(1).hi(w[0]-2),k.pick(-1,w[1]-1,0).lo(1).hi(w[0]-2)),T(k.pick(-1,w[1]-1,1).lo(1).hi(w[0]-2))),k.set(0,0,0,0),k.set(0,0,1,0),k.set(w[0]-1,0,0,0),k.set(w[0]-1,0,1,0),k.set(0,w[1]-1,0,0),k.set(0,w[1]-1,1,0),k.set(w[0]-1,w[1]-1,0,0),k.set(w[0]-1,w[1]-1,1,0),k}}function _(u){var T=u.join(),w=o[T];if(w)return w;for(var c=u.length,A=[y,g],k=1;k<=c;++k)A.push(b(k));var p=v,w=p.apply(void 0,A);return o[T]=w,w}m.exports=function(T,c,A){if(Array.isArray(A)||(typeof A=="string"?A=t(c.dimension,A):A=t(c.dimension,"clamp")),c.size===0)return T;if(c.dimension===0)return T.set(0),T;var k=_(A);return k(T,c)}},{dup:65}],253:[function(l,m,x){function t(d,s){var o=Math.floor(s),y=s-o,g=0<=o&&o<d.shape[0],b=0<=o+1&&o+1<d.shape[0],v=g?+d.get(o):0,_=b?+d.get(o+1):0;return(1-y)*v+y*_}function a(d,s,o){var y=Math.floor(s),g=s-y,b=0<=y&&y<d.shape[0],v=0<=y+1&&y+1<d.shape[0],_=Math.floor(o),u=o-_,T=0<=_&&_<d.shape[1],c=0<=_+1&&_+1<d.shape[1],A=b&&T?d.get(y,_):0,k=b&&c?d.get(y,_+1):0,p=v&&T?d.get(y+1,_):0,w=v&&c?d.get(y+1,_+1):0;return(1-u)*((1-g)*A+g*p)+u*((1-g)*k+g*w)}function i(d,s,o,y){var g=Math.floor(s),b=s-g,v=0<=g&&g<d.shape[0],_=0<=g+1&&g+1<d.shape[0],u=Math.floor(o),T=o-u,c=0<=u&&u<d.shape[1],A=0<=u+1&&u+1<d.shape[1],k=Math.floor(y),p=y-k,w=0<=k&&k<d.shape[2],h=0<=k+1&&k+1<d.shape[2],D=v&&c&&w?d.get(g,u,k):0,S=v&&A&&w?d.get(g,u+1,k):0,M=_&&c&&w?d.get(g+1,u,k):0,L=_&&A&&w?d.get(g+1,u+1,k):0,R=v&&c&&h?d.get(g,u,k+1):0,z=v&&A&&h?d.get(g,u+1,k+1):0,P=_&&c&&h?d.get(g+1,u,k+1):0,I=_&&A&&h?d.get(g+1,u+1,k+1):0;return(1-p)*((1-T)*((1-b)*D+b*M)+T*((1-b)*S+b*L))+p*((1-T)*((1-b)*R+b*P)+T*((1-b)*z+b*I))}function r(d){var s=d.shape.length|0,o=new Array(s),y=new Array(s),g=new Array(s),b=new Array(s),v,_;for(v=0;v<s;++v)_=+arguments[v+1],o[v]=Math.floor(_),y[v]=_-o[v],g[v]=0<=o[v]&&o[v]<d.shape[v],b[v]=0<=o[v]+1&&o[v]+1<d.shape[v];var u=0,T,c,A;t:for(v=0;v<1<<s;++v){for(c=1,A=d.offset,T=0;T<s;++T)if(v&1<<T){if(!b[T])continue t;c*=y[T],A+=d.stride[T]*(o[T]+1)}else{if(!g[T])continue t;c*=1-y[T],A+=d.stride[T]*o[T]}u+=c*d.data[A]}return u}function n(d,s,o,y){switch(d.shape.length){case 0:return 0;case 1:return t(d,s);case 2:return a(d,s,o);case 3:return i(d,s,o,y);default:return r.apply(void 0,arguments)}}m.exports=n,m.exports.d1=t,m.exports.d2=a,m.exports.d3=i},{}],254:[function(l,m,x){var t={"float64,2,1,0":function(){return function(y,g,b,v,_){var u=y[0],T=y[1],c=y[2],A=b[0],k=b[1],p=b[2];v|=0;var w=0,h=0,D=0,S=p,M=k-c*p,L=A-T*k;for(D=0;D<u;++D){for(h=0;h<T;++h){for(w=0;w<c;++w)g[v]/=_,v+=S;v+=M}v+=L}}},"uint8,2,0,1,float64,2,1,0":function(){return function(y,g,b,v,_,u,T,c){var A=y[0],k=y[1],p=y[2],w=b[0],h=b[1],D=b[2],S=u[0],M=u[1],L=u[2];v|=0,T|=0;for(var R=v,z=T,P=y[0]|0;P>0;){P<64?(A=P,P=0):(A=64,P-=64);for(var I=y[1]|0;I>0;){I<64?(k=I,I=0):(k=64,I-=64),v=R+P*w+I*h,T=z+P*S+I*M;var U=0,O=0,G=0,$=D,tt=w-p*D,Z=h-A*w,X=L,J=S-p*L,st=M-A*S;for(G=0;G<k;++G){for(O=0;O<A;++O){for(U=0;U<p;++U)g[v]=_[T]*c,v+=$,T+=X;v+=tt,T+=J}v+=Z,T+=st}}}}},"float32,1,0,float32,1,0":function(){return function(y,g,b,v,_,u,T){var c=y[0],A=y[1],k=b[0],p=b[1],w=u[0],h=u[1];v|=0,T|=0;var D=0,S=0,M=p,L=k-A*p,R=h,z=w-A*h;for(S=0;S<c;++S){for(D=0;D<A;++D)g[v]=_[T],v+=M,T+=R;v+=L,T+=z}}},"float32,1,0,float32,0,1":function(){return function(y,g,b,v,_,u,T){var c=y[0],A=y[1],k=b[0],p=b[1],w=u[0],h=u[1];v|=0,T|=0;for(var D=v,S=T,M=y[1]|0;M>0;){M<64?(A=M,M=0):(A=64,M-=64);for(var L=y[0]|0;L>0;){L<64?(c=L,L=0):(c=64,L-=64),v=D+M*p+L*k,T=S+M*h+L*w;var R=0,z=0,P=p,I=k-A*p,U=h,O=w-A*h;for(z=0;z<c;++z){for(R=0;R<A;++R)g[v]=_[T],v+=P,T+=U;v+=I,T+=O}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(y,g,b,v,_,u,T){var c=y[0],A=y[1],k=y[2],p=b[0],w=b[1],h=b[2],D=u[0],S=u[1],M=u[2];v|=0,T|=0;for(var L=v,R=T,z=y[2]|0;z>0;){z<64?(k=z,z=0):(k=64,z-=64);for(var P=y[0]|0;P>0;){P<64?(c=P,P=0):(c=64,P-=64);for(var I=y[1]|0;I>0;){I<64?(A=I,I=0):(A=64,I-=64),v=L+z*h+P*p+I*w,T=R+z*M+P*D+I*S;var U=0,O=0,G=0,$=h,tt=p-k*h,Z=w-c*p,X=M,J=D-k*M,st=S-c*D;for(G=0;G<A;++G){for(O=0;O<c;++O){for(U=0;U<k;++U)g[v]=_[T],v+=$,T+=X;v+=tt,T+=J}v+=Z,T+=st}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(y,g,b,v,_,u,T){var c=y[0],A=y[1],k=y[2],p=b[0],w=b[1],h=b[2],D=u[0],S=u[1],M=u[2];v|=0,T|=0;var L=0,R=0,z=0,P=h,I=p-k*h,U=w-c*p,O=M,G=D-k*M,$=S-c*D;for(z=0;z<A;++z){for(R=0;R<c;++R){for(L=0;L<k;++L)g[v]=_[T],v+=P,T+=O;v+=I,T+=G}v+=U,T+=$}}}};function a(o,y){var g=y.join(","),b=t[g];return b()}var i=a,r={mul:function(o){var y={};return function(b,v,_){var u=b.dtype,T=b.order,c=v.dtype,A=v.order,k=_.dtype,p=_.order,w=[u,T.join(),c,A.join(),k,p.join()].join(),h=y[w];return h||(y[w]=h=o([u,T,c,A,k,p])),h(b.shape.slice(0),b.data,b.stride,b.offset|0,v.data,v.stride,v.offset|0,_.data,_.stride,_.offset|0)}},muls:function(o){var y={};return function(b,v,_){var u=b.dtype,T=b.order,c=v.dtype,A=v.order,k=[u,T.join(),c,A.join()].join(),p=y[k];return p||(y[k]=p=o([u,T,c,A])),p(b.shape.slice(0),b.data,b.stride,b.offset|0,v.data,v.stride,v.offset|0,_)}},mulseq:function(o){var y={};return function(b,v){var _=b.dtype,u=b.order,T=[_,u.join()].join(),c=y[T];return c||(y[T]=c=o([_,u])),c(b.shape.slice(0),b.data,b.stride,b.offset|0,v)}},div:function(o){var y={};return function(b,v,_){var u=b.dtype,T=b.order,c=v.dtype,A=v.order,k=_.dtype,p=_.order,w=[u,T.join(),c,A.join(),k,p.join()].join(),h=y[w];return h||(y[w]=h=o([u,T,c,A,k,p])),h(b.shape.slice(0),b.data,b.stride,b.offset|0,v.data,v.stride,v.offset|0,_.data,_.stride,_.offset|0)}},divs:function(o){var y={};return function(b,v,_){var u=b.dtype,T=b.order,c=v.dtype,A=v.order,k=[u,T.join(),c,A.join()].join(),p=y[k];return p||(y[k]=p=o([u,T,c,A])),p(b.shape.slice(0),b.data,b.stride,b.offset|0,v.data,v.stride,v.offset|0,_)}},divseq:function(o){var y={};return function(b,v){var _=b.dtype,u=b.order,T=[_,u.join()].join(),c=y[T];return c||(y[T]=c=o([_,u])),c(b.shape.slice(0),b.data,b.stride,b.offset|0,v)}},assign:function(o){var y={};return function(b,v){var _=b.dtype,u=b.order,T=v.dtype,c=v.order,A=[_,u.join(),T,c.join()].join(),k=y[A];return k||(y[A]=k=o([_,u,T,c])),k(b.shape.slice(0),b.data,b.stride,b.offset|0,v.data,v.stride,v.offset|0)}}};function n(o){var y=r[o.funcName];return y(i.bind(void 0,o))}function d(o){return n({funcName:o.funcName})}var s={mul:"*",div:"/"};(function(){for(var o in s)x[o]=d({funcName:o}),x[o+"s"]=d({funcName:o+"s"}),x[o+"seq"]=d({funcName:o+"seq"})})(),x.assign=d({funcName:"assign"})},{}],255:[function(l,m,x){var t=l("ndarray"),a=l("./doConvert.js");m.exports=function(r,n){for(var d=[],s=r,o=1;Array.isArray(s);)d.push(s.length),o*=s.length,s=s[0];return d.length===0?t():(n||(n=t(new Float64Array(o),d)),a(n,r),n)}},{"./doConvert.js":256,ndarray:259}],256:[function(l,m,x){function t(){return function(s,o,y,g,b){var v=s[0],_=s[1],u=s[2],T=y[0],c=y[1],A=y[2],k=[0,0,0];g|=0;var p=0,w=0,h=0,D=A,S=c-u*A,M=T-_*c;for(h=0;h<v;++h){for(w=0;w<_;++w){for(p=0;p<u;++p){{var L=b,R;for(R=0;R<k.length-1;++R)L=L[k[R]];o[g]=L[k[k.length-1]]}g+=D,++k[2]}g+=S,k[2]-=u,++k[1]}g+=M,k[1]-=_,++k[0]}}}function a(){return t()}var i=a;function r(s){var o={};return function(g,b){var v=g.dtype,_=g.order,u=[v,_.join()].join(),T=o[u];return T||(o[u]=T=s([v,_])),T(g.shape.slice(0),g.data,g.stride,g.offset|0,b)}}function n(s){return r(i.bind(void 0,s))}function d(s){return n({funcName:s.funcName})}m.exports=d({funcName:"convert"})},{}],257:[function(l,m,x){var t=l("typedarray-pool");function a(y){switch(y){case"uint32":return[t.mallocUint32,t.freeUint32];default:return null}}var i={"uint32,1,0":function(y,g){return function(v,_,u,T,c,A,k,p,w,h,D){var S,M,L,R=v*c+T,z,P=y(p),I,U,O,G;for(S=v+1;S<=_;++S){for(M=S,R+=c,L=R,I=0,U=R,z=0;z<p;++z)P[I++]=u[U],U+=w;t:for(;M-- >v;){I=0,U=L-c;e:for(z=0;z<p;++z){if(O=u[U],G=P[I],O<G)break t;if(O>G)break e;U+=h,I+=D}for(I=L,U=L-c,z=0;z<p;++z)u[I]=u[U],I+=w,U+=w;L-=c}for(I=L,U=0,z=0;z<p;++z)u[I]=P[U++],I+=w}g(P)}}};function r(y,g){var b=a(g),v=[g,y].join(","),_=i[v];return b?_(b[0],b[1]):_()}var n={"uint32,1,0":function(y,g,b){return function v(_,u,T,c,A,k,p,w,h,D,S){var M=(u-_+1)/6|0,L=_+M,R=u-M,z=_+u>>1,P=z-M,I=z+M,U=L,O=P,G=z,$=I,tt=R,Z=_+1,X=u-1,J=!0,st,at,lt,F,H,et,q,W,K,nt=0,it=0,ot=0,ct,bt,ut,pt,yt,Tt,kt,zt,Rt,Gt,wt,It,$t,Qt,Nt,Pt,Yt=w,ve=g(Yt),Re=g(Yt);bt=A*U,ut=A*O,Pt=c;t:for(ct=0;ct<w;++ct){if(q=bt+Pt,W=ut+Pt,ot=T[q]-T[W],ot>0){at=U,U=O,O=at;break t}if(ot<0)break t;Pt+=D}bt=A*$,ut=A*tt,Pt=c;t:for(ct=0;ct<w;++ct){if(q=bt+Pt,W=ut+Pt,ot=T[q]-T[W],ot>0){at=$,$=tt,tt=at;break t}if(ot<0)break t;Pt+=D}bt=A*U,ut=A*G,Pt=c;t:for(ct=0;ct<w;++ct){if(q=bt+Pt,W=ut+Pt,ot=T[q]-T[W],ot>0){at=U,U=G,G=at;break t}if(ot<0)break t;Pt+=D}bt=A*O,ut=A*G,Pt=c;t:for(ct=0;ct<w;++ct){if(q=bt+Pt,W=ut+Pt,ot=T[q]-T[W],ot>0){at=O,O=G,G=at;break t}if(ot<0)break t;Pt+=D}bt=A*U,ut=A*$,Pt=c;t:for(ct=0;ct<w;++ct){if(q=bt+Pt,W=ut+Pt,ot=T[q]-T[W],ot>0){at=U,U=$,$=at;break t}if(ot<0)break t;Pt+=D}bt=A*G,ut=A*$,Pt=c;t:for(ct=0;ct<w;++ct){if(q=bt+Pt,W=ut+Pt,ot=T[q]-T[W],ot>0){at=G,G=$,$=at;break t}if(ot<0)break t;Pt+=D}bt=A*O,ut=A*tt,Pt=c;t:for(ct=0;ct<w;++ct){if(q=bt+Pt,W=ut+Pt,ot=T[q]-T[W],ot>0){at=O,O=tt,tt=at;break t}if(ot<0)break t;Pt+=D}bt=A*O,ut=A*G,Pt=c;t:for(ct=0;ct<w;++ct){if(q=bt+Pt,W=ut+Pt,ot=T[q]-T[W],ot>0){at=O,O=G,G=at;break t}if(ot<0)break t;Pt+=D}bt=A*$,ut=A*tt,Pt=c;t:for(ct=0;ct<w;++ct){if(q=bt+Pt,W=ut+Pt,ot=T[q]-T[W],ot>0){at=$,$=tt,tt=at;break t}if(ot<0)break t;Pt+=D}for(bt=A*U,ut=A*O,pt=A*G,yt=A*$,Tt=A*tt,kt=A*L,zt=A*z,Rt=A*R,Nt=0,Pt=c,ct=0;ct<w;++ct)q=bt+Pt,W=ut+Pt,K=pt+Pt,Gt=yt+Pt,wt=Tt+Pt,It=kt+Pt,$t=zt+Pt,Qt=Rt+Pt,ve[Nt]=T[W],Re[Nt]=T[Gt],J=J&&ve[Nt]===Re[Nt],lt=T[q],F=T[K],H=T[wt],T[It]=lt,T[$t]=F,T[Qt]=H,++Nt,Pt+=h;for(bt=A*P,ut=A*_,Pt=c,ct=0;ct<w;++ct)q=bt+Pt,W=ut+Pt,T[q]=T[W],Pt+=h;for(bt=A*I,ut=A*u,Pt=c,ct=0;ct<w;++ct)q=bt+Pt,W=ut+Pt,T[q]=T[W],Pt+=h;if(J)for(et=Z;et<=X;++et){q=c+et*A,Nt=0;t:for(ct=0;ct<w;++ct){if(ot=T[q]-ve[Nt],ot!==0)break t;Nt+=S,q+=D}if(ot!==0)if(ot<0){if(et!==Z)for(bt=A*et,ut=A*Z,Pt=c,ct=0;ct<w;++ct)q=bt+Pt,W=ut+Pt,st=T[q],T[q]=T[W],T[W]=st,Pt+=h;++Z}else for(;;){q=c+X*A,Nt=0;t:for(ct=0;ct<w;++ct){if(ot=T[q]-ve[Nt],ot!==0)break t;Nt+=S,q+=D}if(ot>0)X--;else if(ot<0){for(bt=A*et,ut=A*Z,pt=A*X,Pt=c,ct=0;ct<w;++ct)q=bt+Pt,W=ut+Pt,K=pt+Pt,st=T[q],T[q]=T[W],T[W]=T[K],T[K]=st,Pt+=h;++Z,--X;break}else{for(bt=A*et,ut=A*X,Pt=c,ct=0;ct<w;++ct)q=bt+Pt,W=ut+Pt,st=T[q],T[q]=T[W],T[W]=st,Pt+=h;--X;break}}}else for(et=Z;et<=X;++et){q=c+et*A,Nt=0;t:for(ct=0;ct<w;++ct){if(nt=T[q]-ve[Nt],nt!==0)break t;Nt+=S,q+=D}if(nt<0){if(et!==Z)for(bt=A*et,ut=A*Z,Pt=c,ct=0;ct<w;++ct)q=bt+Pt,W=ut+Pt,st=T[q],T[q]=T[W],T[W]=st,Pt+=h;++Z}else{q=c+et*A,Nt=0;t:for(ct=0;ct<w;++ct){if(it=T[q]-Re[Nt],it!==0)break t;Nt+=S,q+=D}if(it>0)for(;;){q=c+X*A,Nt=0;t:for(ct=0;ct<w;++ct){if(ot=T[q]-Re[Nt],ot!==0)break t;Nt+=S,q+=D}if(ot>0){if(--X<et)break;continue}else{q=c+X*A,Nt=0;t:for(ct=0;ct<w;++ct){if(ot=T[q]-ve[Nt],ot!==0)break t;Nt+=S,q+=D}if(ot<0){for(bt=A*et,ut=A*Z,pt=A*X,Pt=c,ct=0;ct<w;++ct)q=bt+Pt,W=ut+Pt,K=pt+Pt,st=T[q],T[q]=T[W],T[W]=T[K],T[K]=st,Pt+=h;++Z,--X}else{for(bt=A*et,ut=A*X,Pt=c,ct=0;ct<w;++ct)q=bt+Pt,W=ut+Pt,st=T[q],T[q]=T[W],T[W]=st,Pt+=h;--X}break}}}}for(bt=A*_,ut=A*(Z-1),Nt=0,Pt=c,ct=0;ct<w;++ct)q=bt+Pt,W=ut+Pt,T[q]=T[W],T[W]=ve[Nt],++Nt,Pt+=h;for(bt=A*u,ut=A*(X+1),Nt=0,Pt=c,ct=0;ct<w;++ct)q=bt+Pt,W=ut+Pt,T[q]=T[W],T[W]=Re[Nt],++Nt,Pt+=h;if(Z-2-_<=32?y(_,Z-2,T,c,A,k,p,w,h,D,S):v(_,Z-2,T,c,A,k,p,w,h,D,S),u-(X+2)<=32?y(X+2,u,T,c,A,k,p,w,h,D,S):v(X+2,u,T,c,A,k,p,w,h,D,S),J){b(ve),b(Re);return}if(Z<L&&X>R){t:for(;;){for(q=c+Z*A,Nt=0,Pt=c,ct=0;ct<w;++ct){if(T[q]!==ve[Nt])break t;++Nt,q+=h}++Z}t:for(;;){for(q=c+X*A,Nt=0,Pt=c,ct=0;ct<w;++ct){if(T[q]!==Re[Nt])break t;++Nt,q+=h}--X}for(et=Z;et<=X;++et){q=c+et*A,Nt=0;t:for(ct=0;ct<w;++ct){if(nt=T[q]-ve[Nt],nt!==0)break t;Nt+=S,q+=D}if(nt===0){if(et!==Z)for(bt=A*et,ut=A*Z,Pt=c,ct=0;ct<w;++ct)q=bt+Pt,W=ut+Pt,st=T[q],T[q]=T[W],T[W]=st,Pt+=h;++Z}else{q=c+et*A,Nt=0;t:for(ct=0;ct<w;++ct){if(it=T[q]-Re[Nt],it!==0)break t;Nt+=S,q+=D}if(it===0)for(;;){q=c+X*A,Nt=0;t:for(ct=0;ct<w;++ct){if(ot=T[q]-Re[Nt],ot!==0)break t;Nt+=S,q+=D}if(ot===0){if(--X<et)break;continue}else{q=c+X*A,Nt=0;t:for(ct=0;ct<w;++ct){if(ot=T[q]-ve[Nt],ot!==0)break t;Nt+=S,q+=D}if(ot<0){for(bt=A*et,ut=A*Z,pt=A*X,Pt=c,ct=0;ct<w;++ct)q=bt+Pt,W=ut+Pt,K=pt+Pt,st=T[q],T[q]=T[W],T[W]=T[K],T[K]=st,Pt+=h;++Z,--X}else{for(bt=A*et,ut=A*X,Pt=c,ct=0;ct<w;++ct)q=bt+Pt,W=ut+Pt,st=T[q],T[q]=T[W],T[W]=st,Pt+=h;--X}break}}}}}b(ve),b(Re),X-Z<=32?y(Z,X,T,c,A,k,p,w,h,D,S):v(Z,X,T,c,A,k,p,w,h,D,S)}}};function d(y,g,b){var v=a(g),_=[g,y].join(","),u=n[_];return y.length>1&&v?u(b,v[0],v[1]):u(b)}var s={"uint32,1,0":function(y,g){return function(b){var v=b.data,_=b.offset|0,u=b.shape,T=b.stride,c=T[0]|0,A=u[0]|0,k=T[1]|0,p=u[1]|0,w=k,h=k,D=1;A<=32?y(0,A-1,v,_,c,k,A,p,w,h,D):g(0,A-1,v,_,c,k,A,p,w,h,D)}}};function o(y,g){var b=[g,y].join(","),v=s[b],_=r(y,g),u=d(y,g,_);return v(_,u)}m.exports=o},{"typedarray-pool":308}],258:[function(l,m,x){var t=l("./lib/compile_sort.js"),a={};function i(r){var n=r.order,d=r.dtype,s=[n,d],o=s.join(":"),y=a[o];return y||(a[o]=y=t(n,d)),y(r),r}m.exports=i},{"./lib/compile_sort.js":257}],259:[function(l,m,x){var t=l("is-buffer"),a=typeof Float64Array<"u";function i(g,b){return g[0]-b[0]}function r(){var g=this.stride,b=new Array(g.length),v;for(v=0;v<b.length;++v)b[v]=[Math.abs(g[v]),v];b.sort(i);var _=new Array(b.length);for(v=0;v<_.length;++v)_[v]=b[v][1];return _}var n={T:function(g){function b(_){this.data=_}var v=b.prototype;return v.dtype=g,v.index=function(){return-1},v.size=0,v.dimension=-1,v.shape=v.stride=v.order=[],v.lo=v.hi=v.transpose=v.step=function(){return new b(this.data)},v.get=v.set=function(){},v.pick=function(){return null},function(u){return new b(u)}},0:function(g,b){function v(u,T){this.data=u,this.offset=T}var _=v.prototype;return _.dtype=g,_.index=function(){return this.offset},_.dimension=0,_.size=1,_.shape=_.stride=_.order=[],_.lo=_.hi=_.transpose=_.step=function(){return new v(this.data,this.offset)},_.pick=function(){return b(this.data)},_.valueOf=_.get=function(){return g==="generic"?this.data.get(this.offset):this.data[this.offset]},_.set=function(T){return g==="generic"?this.data.set(this.offset,T):this.data[this.offset]=T},function(T,c,A,k){return new v(T,k)}},1:function(g,b,v){function _(T,c,A,k){this.data=T,this.shape=[c],this.stride=[A],this.offset=k|0}var u=_.prototype;return u.dtype=g,u.dimension=1,Object.defineProperty(u,"size",{get:function(){return this.shape[0]}}),u.order=[0],u.set=function(c,A){return g==="generic"?this.data.set(this.offset+this.stride[0]*c,A):this.data[this.offset+this.stride[0]*c]=A},u.get=function(c){return g==="generic"?this.data.get(this.offset+this.stride[0]*c):this.data[this.offset+this.stride[0]*c]},u.index=function(c){return this.offset+this.stride[0]*c},u.hi=function(c){return new _(this.data,typeof c!="number"||c<0?this.shape[0]:c|0,this.stride[0],this.offset)},u.lo=function(c){var A=this.offset,k=0,p=this.shape[0],w=this.stride[0];return typeof c=="number"&&c>=0&&(k=c|0,A+=w*k,p-=k),new _(this.data,p,w,A)},u.step=function(c){var A=this.shape[0],k=this.stride[0],p=this.offset,w=0,h=Math.ceil;return typeof c=="number"&&(w=c|0,w<0?(p+=k*(A-1),A=h(-A/w)):A=h(A/w),k*=w),new _(this.data,A,k,p)},u.transpose=function(c){c=c===void 0?0:c|0;var A=this.shape,k=this.stride;return new _(this.data,A[c],k[c],this.offset)},u.pick=function(c){var A=[],k=[],p=this.offset;typeof c=="number"&&c>=0?p=p+this.stride[0]*c|0:(A.push(this.shape[0]),k.push(this.stride[0]));var w=b[A.length+1];return w(this.data,A,k,p)},function(c,A,k,p){return new _(c,A[0],k[0],p)}},2:function(g,b,v){function _(T,c,A,k,p,w){this.data=T,this.shape=[c,A],this.stride=[k,p],this.offset=w|0}var u=_.prototype;return u.dtype=g,u.dimension=2,Object.defineProperty(u,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(u,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),u.set=function(c,A,k){return g==="generic"?this.data.set(this.offset+this.stride[0]*c+this.stride[1]*A,k):this.data[this.offset+this.stride[0]*c+this.stride[1]*A]=k},u.get=function(c,A){return g==="generic"?this.data.get(this.offset+this.stride[0]*c+this.stride[1]*A):this.data[this.offset+this.stride[0]*c+this.stride[1]*A]},u.index=function(c,A){return this.offset+this.stride[0]*c+this.stride[1]*A},u.hi=function(c,A){return new _(this.data,typeof c!="number"||c<0?this.shape[0]:c|0,typeof A!="number"||A<0?this.shape[1]:A|0,this.stride[0],this.stride[1],this.offset)},u.lo=function(c,A){var k=this.offset,p=0,w=this.shape[0],h=this.shape[1],D=this.stride[0],S=this.stride[1];return typeof c=="number"&&c>=0&&(p=c|0,k+=D*p,w-=p),typeof A=="number"&&A>=0&&(p=A|0,k+=S*p,h-=p),new _(this.data,w,h,D,S,k)},u.step=function(c,A){var k=this.shape[0],p=this.shape[1],w=this.stride[0],h=this.stride[1],D=this.offset,S=0,M=Math.ceil;return typeof c=="number"&&(S=c|0,S<0?(D+=w*(k-1),k=M(-k/S)):k=M(k/S),w*=S),typeof A=="number"&&(S=A|0,S<0?(D+=h*(p-1),p=M(-p/S)):p=M(p/S),h*=S),new _(this.data,k,p,w,h,D)},u.transpose=function(c,A){c=c===void 0?0:c|0,A=A===void 0?1:A|0;var k=this.shape,p=this.stride;return new _(this.data,k[c],k[A],p[c],p[A],this.offset)},u.pick=function(c,A){var k=[],p=[],w=this.offset;typeof c=="number"&&c>=0?w=w+this.stride[0]*c|0:(k.push(this.shape[0]),p.push(this.stride[0])),typeof A=="number"&&A>=0?w=w+this.stride[1]*A|0:(k.push(this.shape[1]),p.push(this.stride[1]));var h=b[k.length+1];return h(this.data,k,p,w)},function(c,A,k,p){return new _(c,A[0],A[1],k[0],k[1],p)}},3:function(g,b,v){function _(T,c,A,k,p,w,h,D){this.data=T,this.shape=[c,A,k],this.stride=[p,w,h],this.offset=D|0}var u=_.prototype;return u.dtype=g,u.dimension=3,Object.defineProperty(u,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(u,"order",{get:function(){var c=Math.abs(this.stride[0]),A=Math.abs(this.stride[1]),k=Math.abs(this.stride[2]);return c>A?A>k?[2,1,0]:c>k?[1,2,0]:[1,0,2]:c>k?[2,0,1]:k>A?[0,1,2]:[0,2,1]}}),u.set=function(c,A,k,p){return g==="generic"?this.data.set(this.offset+this.stride[0]*c+this.stride[1]*A+this.stride[2]*k,p):this.data[this.offset+this.stride[0]*c+this.stride[1]*A+this.stride[2]*k]=p},u.get=function(c,A,k){return g==="generic"?this.data.get(this.offset+this.stride[0]*c+this.stride[1]*A+this.stride[2]*k):this.data[this.offset+this.stride[0]*c+this.stride[1]*A+this.stride[2]*k]},u.index=function(c,A,k){return this.offset+this.stride[0]*c+this.stride[1]*A+this.stride[2]*k},u.hi=function(c,A,k){return new _(this.data,typeof c!="number"||c<0?this.shape[0]:c|0,typeof A!="number"||A<0?this.shape[1]:A|0,typeof k!="number"||k<0?this.shape[2]:k|0,this.stride[0],this.stride[1],this.stride[2],this.offset)},u.lo=function(c,A,k){var p=this.offset,w=0,h=this.shape[0],D=this.shape[1],S=this.shape[2],M=this.stride[0],L=this.stride[1],R=this.stride[2];return typeof c=="number"&&c>=0&&(w=c|0,p+=M*w,h-=w),typeof A=="number"&&A>=0&&(w=A|0,p+=L*w,D-=w),typeof k=="number"&&k>=0&&(w=k|0,p+=R*w,S-=w),new _(this.data,h,D,S,M,L,R,p)},u.step=function(c,A,k){var p=this.shape[0],w=this.shape[1],h=this.shape[2],D=this.stride[0],S=this.stride[1],M=this.stride[2],L=this.offset,R=0,z=Math.ceil;return typeof c=="number"&&(R=c|0,R<0?(L+=D*(p-1),p=z(-p/R)):p=z(p/R),D*=R),typeof A=="number"&&(R=A|0,R<0?(L+=S*(w-1),w=z(-w/R)):w=z(w/R),S*=R),typeof k=="number"&&(R=k|0,R<0?(L+=M*(h-1),h=z(-h/R)):h=z(h/R),M*=R),new _(this.data,p,w,h,D,S,M,L)},u.transpose=function(c,A,k){c=c===void 0?0:c|0,A=A===void 0?1:A|0,k=k===void 0?2:k|0;var p=this.shape,w=this.stride;return new _(this.data,p[c],p[A],p[k],w[c],w[A],w[k],this.offset)},u.pick=function(c,A,k){var p=[],w=[],h=this.offset;typeof c=="number"&&c>=0?h=h+this.stride[0]*c|0:(p.push(this.shape[0]),w.push(this.stride[0])),typeof A=="number"&&A>=0?h=h+this.stride[1]*A|0:(p.push(this.shape[1]),w.push(this.stride[1])),typeof k=="number"&&k>=0?h=h+this.stride[2]*k|0:(p.push(this.shape[2]),w.push(this.stride[2]));var D=b[p.length+1];return D(this.data,p,w,h)},function(c,A,k,p){return new _(c,A[0],A[1],A[2],k[0],k[1],k[2],p)}},4:function(g,b,v){function _(T,c,A,k,p,w,h,D,S,M){this.data=T,this.shape=[c,A,k,p],this.stride=[w,h,D,S],this.offset=M|0}var u=_.prototype;return u.dtype=g,u.dimension=4,Object.defineProperty(u,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(u,"order",{get:v}),u.set=function(c,A,k,p,w){return g==="generic"?this.data.set(this.offset+this.stride[0]*c+this.stride[1]*A+this.stride[2]*k+this.stride[3]*p,w):this.data[this.offset+this.stride[0]*c+this.stride[1]*A+this.stride[2]*k+this.stride[3]*p]=w},u.get=function(c,A,k,p){return g==="generic"?this.data.get(this.offset+this.stride[0]*c+this.stride[1]*A+this.stride[2]*k+this.stride[3]*p):this.data[this.offset+this.stride[0]*c+this.stride[1]*A+this.stride[2]*k+this.stride[3]*p]},u.index=function(c,A,k,p){return this.offset+this.stride[0]*c+this.stride[1]*A+this.stride[2]*k+this.stride[3]*p},u.hi=function(c,A,k,p){return new _(this.data,typeof c!="number"||c<0?this.shape[0]:c|0,typeof A!="number"||A<0?this.shape[1]:A|0,typeof k!="number"||k<0?this.shape[2]:k|0,typeof p!="number"||p<0?this.shape[3]:p|0,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},u.lo=function(c,A,k,p){var w=this.offset,h=0,D=this.shape[0],S=this.shape[1],M=this.shape[2],L=this.shape[3],R=this.stride[0],z=this.stride[1],P=this.stride[2],I=this.stride[3];return typeof c=="number"&&c>=0&&(h=c|0,w+=R*h,D-=h),typeof A=="number"&&A>=0&&(h=A|0,w+=z*h,S-=h),typeof k=="number"&&k>=0&&(h=k|0,w+=P*h,M-=h),typeof p=="number"&&p>=0&&(h=p|0,w+=I*h,L-=h),new _(this.data,D,S,M,L,R,z,P,I,w)},u.step=function(c,A,k,p){var w=this.shape[0],h=this.shape[1],D=this.shape[2],S=this.shape[3],M=this.stride[0],L=this.stride[1],R=this.stride[2],z=this.stride[3],P=this.offset,I=0,U=Math.ceil;return typeof c=="number"&&(I=c|0,I<0?(P+=M*(w-1),w=U(-w/I)):w=U(w/I),M*=I),typeof A=="number"&&(I=A|0,I<0?(P+=L*(h-1),h=U(-h/I)):h=U(h/I),L*=I),typeof k=="number"&&(I=k|0,I<0?(P+=R*(D-1),D=U(-D/I)):D=U(D/I),R*=I),typeof p=="number"&&(I=p|0,I<0?(P+=z*(S-1),S=U(-S/I)):S=U(S/I),z*=I),new _(this.data,w,h,D,S,M,L,R,z,P)},u.transpose=function(c,A,k,p){c=c===void 0?0:c|0,A=A===void 0?1:A|0,k=k===void 0?2:k|0,p=p===void 0?3:p|0;var w=this.shape,h=this.stride;return new _(this.data,w[c],w[A],w[k],w[p],h[c],h[A],h[k],h[p],this.offset)},u.pick=function(c,A,k,p){var w=[],h=[],D=this.offset;typeof c=="number"&&c>=0?D=D+this.stride[0]*c|0:(w.push(this.shape[0]),h.push(this.stride[0])),typeof A=="number"&&A>=0?D=D+this.stride[1]*A|0:(w.push(this.shape[1]),h.push(this.stride[1])),typeof k=="number"&&k>=0?D=D+this.stride[2]*k|0:(w.push(this.shape[2]),h.push(this.stride[2])),typeof p=="number"&&p>=0?D=D+this.stride[3]*p|0:(w.push(this.shape[3]),h.push(this.stride[3]));var S=b[w.length+1];return S(this.data,w,h,D)},function(c,A,k,p){return new _(c,A[0],A[1],A[2],A[3],k[0],k[1],k[2],k[3],p)}},5:function(b,v,_){function u(c,A,k,p,w,h,D,S,M,L,R,z){this.data=c,this.shape=[A,k,p,w,h],this.stride=[D,S,M,L,R],this.offset=z|0}var T=u.prototype;return T.dtype=b,T.dimension=5,Object.defineProperty(T,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(T,"order",{get:_}),T.set=function(A,k,p,w,h,D){return b==="generic"?this.data.set(this.offset+this.stride[0]*A+this.stride[1]*k+this.stride[2]*p+this.stride[3]*w+this.stride[4]*h,D):this.data[this.offset+this.stride[0]*A+this.stride[1]*k+this.stride[2]*p+this.stride[3]*w+this.stride[4]*h]=D},T.get=function(A,k,p,w,h){return b==="generic"?this.data.get(this.offset+this.stride[0]*A+this.stride[1]*k+this.stride[2]*p+this.stride[3]*w+this.stride[4]*h):this.data[this.offset+this.stride[0]*A+this.stride[1]*k+this.stride[2]*p+this.stride[3]*w+this.stride[4]*h]},T.index=function(A,k,p,w,h){return this.offset+this.stride[0]*A+this.stride[1]*k+this.stride[2]*p+this.stride[3]*w+this.stride[4]*h},T.hi=function(A,k,p,w,h){return new u(this.data,typeof A!="number"||A<0?this.shape[0]:A|0,typeof k!="number"||k<0?this.shape[1]:k|0,typeof p!="number"||p<0?this.shape[2]:p|0,typeof w!="number"||w<0?this.shape[3]:w|0,typeof h!="number"||h<0?this.shape[4]:h|0,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},T.lo=function(A,k,p,w,h){var D=this.offset,S=0,M=this.shape[0],L=this.shape[1],R=this.shape[2],z=this.shape[3],P=this.shape[4],I=this.stride[0],U=this.stride[1],O=this.stride[2],G=this.stride[3],$=this.stride[4];return typeof A=="number"&&A>=0&&(S=A|0,D+=I*S,M-=S),typeof k=="number"&&k>=0&&(S=k|0,D+=U*S,L-=S),typeof p=="number"&&p>=0&&(S=p|0,D+=O*S,R-=S),typeof w=="number"&&w>=0&&(S=w|0,D+=G*S,z-=S),typeof h=="number"&&h>=0&&(S=h|0,D+=$*S,P-=S),new u(this.data,M,L,R,z,P,I,U,O,G,$,D)},T.step=function(A,k,p,w,h){var D=this.shape[0],S=this.shape[1],M=this.shape[2],L=this.shape[3],R=this.shape[4],z=this.stride[0],P=this.stride[1],I=this.stride[2],U=this.stride[3],O=this.stride[4],G=this.offset,$=0,tt=Math.ceil;return typeof A=="number"&&($=A|0,$<0?(G+=z*(D-1),D=tt(-D/$)):D=tt(D/$),z*=$),typeof k=="number"&&($=k|0,$<0?(G+=P*(S-1),S=tt(-S/$)):S=tt(S/$),P*=$),typeof p=="number"&&($=p|0,$<0?(G+=I*(M-1),M=tt(-M/$)):M=tt(M/$),I*=$),typeof w=="number"&&($=w|0,$<0?(G+=U*(L-1),L=tt(-L/$)):L=tt(L/$),U*=$),typeof h=="number"&&($=h|0,$<0?(G+=O*(R-1),R=tt(-R/$)):R=tt(R/$),O*=$),new u(this.data,D,S,M,L,R,z,P,I,U,O,G)},T.transpose=function(A,k,p,w,h){A=A===void 0?0:A|0,k=k===void 0?1:k|0,p=p===void 0?2:p|0,w=w===void 0?3:w|0,h=h===void 0?4:h|0;var D=this.shape,S=this.stride;return new u(this.data,D[A],D[k],D[p],D[w],D[h],S[A],S[k],S[p],S[w],S[h],this.offset)},T.pick=function(A,k,p,w,h){var D=[],S=[],M=this.offset;typeof A=="number"&&A>=0?M=M+this.stride[0]*A|0:(D.push(this.shape[0]),S.push(this.stride[0])),typeof k=="number"&&k>=0?M=M+this.stride[1]*k|0:(D.push(this.shape[1]),S.push(this.stride[1])),typeof p=="number"&&p>=0?M=M+this.stride[2]*p|0:(D.push(this.shape[2]),S.push(this.stride[2])),typeof w=="number"&&w>=0?M=M+this.stride[3]*w|0:(D.push(this.shape[3]),S.push(this.stride[3])),typeof h=="number"&&h>=0?M=M+this.stride[4]*h|0:(D.push(this.shape[4]),S.push(this.stride[4]));var L=v[D.length+1];return L(this.data,D,S,M)},function(A,k,p,w){return new u(A,k[0],k[1],k[2],k[3],k[4],p[0],p[1],p[2],p[3],p[4],w)}}};function d(g,b){var v=b===-1?"T":String(b),_=n[v];return b===-1?_(g):b===0?_(g,o[g][0]):_(g,o[g],r)}function s(g){if(t(g))return"buffer";if(a)switch(Object.prototype.toString.call(g)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(g)?"array":"generic"}var o={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};function y(g,b,v,_){if(g===void 0){var p=o.array[0];return p([])}else typeof g=="number"&&(g=[g]);b===void 0&&(b=[g.length]);var u=b.length;if(v===void 0){v=new Array(u);for(var T=u-1,c=1;T>=0;--T)v[T]=c,c*=b[T]}if(_===void 0){_=0;for(var T=0;T<u;++T)v[T]<0&&(_-=(b[T]-1)*v[T])}for(var A=s(g),k=o[A];k.length<=u+1;)k.push(d(A,k.length-1));var p=k[u+1];return p(g,b,v,_)}m.exports=y},{"is-buffer":237}],260:[function(l,m,x){var t=l("double-bits"),a=Math.pow(2,-1074),i=-1>>>0;m.exports=r;function r(n,d){if(isNaN(n)||isNaN(d))return NaN;if(n===d)return n;if(n===0)return d<0?-a:a;var s=t.hi(n),o=t.lo(n);return d>n==n>0?o===i?(s+=1,o=0):o+=1:o===0?(o=i,s-=1):o-=1,t.pack(o,s)}},{"double-bits":64}],261:[function(l,m,x){var t=1e-6,a=1e-6;x.vertexNormals=function(i,r,n){for(var d=r.length,s=new Array(d),o=n===void 0?t:n,y=0;y<d;++y)s[y]=[0,0,0];for(var y=0;y<i.length;++y)for(var g=i[y],b=0,v=g[g.length-1],_=g[0],u=0;u<g.length;++u){b=v,v=_,_=g[(u+1)%g.length];for(var T=r[b],c=r[v],A=r[_],k=new Array(3),p=0,w=new Array(3),h=0,D=0;D<3;++D)k[D]=T[D]-c[D],p+=k[D]*k[D],w[D]=A[D]-c[D],h+=w[D]*w[D];if(p*h>o)for(var S=s[v],M=1/Math.sqrt(p*h),D=0;D<3;++D){var L=(D+1)%3,R=(D+2)%3;S[D]+=M*(w[L]*k[R]-w[R]*k[L])}}for(var y=0;y<d;++y){for(var S=s[y],z=0,D=0;D<3;++D)z+=S[D]*S[D];if(z>o)for(var M=1/Math.sqrt(z),D=0;D<3;++D)S[D]*=M;else for(var D=0;D<3;++D)S[D]=0}return s},x.faceNormals=function(i,r,n){for(var d=i.length,s=new Array(d),o=n===void 0?a:n,y=0;y<d;++y){for(var g=i[y],b=new Array(3),v=0;v<3;++v)b[v]=r[g[v]];for(var _=new Array(3),u=new Array(3),v=0;v<3;++v)_[v]=b[1][v]-b[0][v],u[v]=b[2][v]-b[0][v];for(var T=new Array(3),c=0,v=0;v<3;++v){var A=(v+1)%3,k=(v+2)%3;T[v]=_[A]*u[k]-_[k]*u[A],c+=T[v]*T[v]}c>o?c=1/Math.sqrt(c):c=0;for(var v=0;v<3;++v)T[v]*=c;s[y]=T}return s}},{}],262:[function(l,m,x){m.exports=t;function t(a,i,r,n,d,s,o,y,g,b){var v=i+s+b;if(_>0){var _=Math.sqrt(v+1);a[0]=.5*(o-g)/_,a[1]=.5*(y-n)/_,a[2]=.5*(r-s)/_,a[3]=.5*_}else{var u=Math.max(i,s,b),_=Math.sqrt(2*u-v+1);i>=u?(a[0]=.5*_,a[1]=.5*(d+r)/_,a[2]=.5*(y+n)/_,a[3]=.5*(o-g)/_):s>=u?(a[0]=.5*(r+d)/_,a[1]=.5*_,a[2]=.5*(g+o)/_,a[3]=.5*(y-n)/_):(a[0]=.5*(n+y)/_,a[1]=.5*(o+g)/_,a[2]=.5*_,a[3]=.5*(r-d)/_)}return a}},{}],263:[function(l,m,x){m.exports=b;var t=l("filtered-vector"),a=l("gl-mat4/lookAt"),i=l("gl-mat4/fromQuat"),r=l("gl-mat4/invert"),n=l("./lib/quatFromFrame");function d(v,_,u){return Math.sqrt(Math.pow(v,2)+Math.pow(_,2)+Math.pow(u,2))}function s(v,_,u,T){return Math.sqrt(Math.pow(v,2)+Math.pow(_,2)+Math.pow(u,2)+Math.pow(T,2))}function o(v,_){var u=_[0],T=_[1],c=_[2],A=_[3],k=s(u,T,c,A);k>1e-6?(v[0]=u/k,v[1]=T/k,v[2]=c/k,v[3]=A/k):(v[0]=v[1]=v[2]=0,v[3]=1)}function y(v,_,u){this.radius=t([u]),this.center=t(_),this.rotation=t(v),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var g=y.prototype;g.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},g.recalcMatrix=function(v){this.radius.curve(v),this.center.curve(v),this.rotation.curve(v);var _=this.computedRotation;o(_,_);var u=this.computedMatrix;i(u,_);var T=this.computedCenter,c=this.computedEye,A=this.computedUp,k=Math.exp(this.computedRadius[0]);c[0]=T[0]+k*u[2],c[1]=T[1]+k*u[6],c[2]=T[2]+k*u[10],A[0]=u[1],A[1]=u[5],A[2]=u[9];for(var p=0;p<3;++p){for(var w=0,h=0;h<3;++h)w+=u[p+4*h]*c[h];u[12+p]=-w}},g.getMatrix=function(v,_){this.recalcMatrix(v);var u=this.computedMatrix;if(_){for(var T=0;T<16;++T)_[T]=u[T];return _}return u},g.idle=function(v){this.center.idle(v),this.radius.idle(v),this.rotation.idle(v)},g.flush=function(v){this.center.flush(v),this.radius.flush(v),this.rotation.flush(v)},g.pan=function(v,_,u,T){_=_||0,u=u||0,T=T||0,this.recalcMatrix(v);var c=this.computedMatrix,A=c[1],k=c[5],p=c[9],w=d(A,k,p);A/=w,k/=w,p/=w;var h=c[0],D=c[4],S=c[8],M=h*A+D*k+S*p;h-=A*M,D-=k*M,S-=p*M;var L=d(h,D,S);h/=L,D/=L,S/=L,c[2],c[6],c[10];var R=h*_+A*u,z=D*_+k*u,P=S*_+p*u;this.center.move(v,R,z,P);var I=Math.exp(this.computedRadius[0]);I=Math.max(1e-4,I+T),this.radius.set(v,Math.log(I))},g.rotate=function(v,_,u,T){this.recalcMatrix(v),_=_||0,u=u||0;var c=this.computedMatrix,A=c[0],k=c[4],p=c[8],w=c[1],h=c[5],D=c[9],S=c[2],M=c[6],L=c[10],R=_*A+u*w,z=_*k+u*h,P=_*p+u*D,I=-(M*P-L*z),U=-(L*R-S*P),O=-(S*z-M*R),G=Math.sqrt(Math.max(0,1-Math.pow(I,2)-Math.pow(U,2)-Math.pow(O,2))),$=s(I,U,O,G);$>1e-6?(I/=$,U/=$,O/=$,G/=$):(I=U=O=0,G=1);var tt=this.computedRotation,Z=tt[0],X=tt[1],J=tt[2],st=tt[3],at=Z*G+st*I+X*O-J*U,lt=X*G+st*U+J*I-Z*O,F=J*G+st*O+Z*U-X*I,H=st*G-Z*I-X*U-J*O;if(T){I=S,U=M,O=L;var et=Math.sin(T)/d(I,U,O);I*=et,U*=et,O*=et,G=Math.cos(_),at=at*G+H*I+lt*O-F*U,lt=lt*G+H*U+F*I-at*O,F=F*G+H*O+at*U-lt*I,H=H*G-at*I-lt*U-F*O}var q=s(at,lt,F,H);q>1e-6?(at/=q,lt/=q,F/=q,H/=q):(at=lt=F=0,H=1),this.rotation.set(v,at,lt,F,H)},g.lookAt=function(v,_,u,T){this.recalcMatrix(v),u=u||this.computedCenter,_=_||this.computedEye,T=T||this.computedUp;var c=this.computedMatrix;a(c,_,u,T);var A=this.computedRotation;n(A,c[0],c[1],c[2],c[4],c[5],c[6],c[8],c[9],c[10]),o(A,A),this.rotation.set(v,A[0],A[1],A[2],A[3]);for(var k=0,p=0;p<3;++p)k+=Math.pow(u[p]-_[p],2);this.radius.set(v,.5*Math.log(Math.max(k,1e-6))),this.center.set(v,u[0],u[1],u[2])},g.translate=function(v,_,u,T){this.center.move(v,_||0,u||0,T||0)},g.setMatrix=function(v,_){var u=this.computedRotation;n(u,_[0],_[1],_[2],_[4],_[5],_[6],_[8],_[9],_[10]),o(u,u),this.rotation.set(v,u[0],u[1],u[2],u[3]);var T=this.computedMatrix;r(T,_);var c=T[15];if(Math.abs(c)>1e-6){var A=T[12]/c,k=T[13]/c,p=T[14]/c;this.recalcMatrix(v);var w=Math.exp(this.computedRadius[0]);this.center.set(v,A-T[2]*w,k-T[6]*w,p-T[10]*w),this.radius.idle(v)}else this.center.idle(v),this.radius.idle(v)},g.setDistance=function(v,_){_>0&&this.radius.set(v,Math.log(_))},g.setDistanceLimits=function(v,_){v>0?v=Math.log(v):v=-1/0,_>0?_=Math.log(_):_=1/0,_=Math.max(_,v),this.radius.bounds[0][0]=v,this.radius.bounds[1][0]=_},g.getDistanceLimits=function(v){var _=this.radius.bounds;return v?(v[0]=Math.exp(_[0][0]),v[1]=Math.exp(_[1][0]),v):[Math.exp(_[0][0]),Math.exp(_[1][0])]},g.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},g.fromJSON=function(v){var _=this.lastT(),u=v.center;u&&this.center.set(_,u[0],u[1],u[2]);var T=v.rotation;T&&this.rotation.set(_,T[0],T[1],T[2],T[3]);var c=v.distance;c&&c>0&&this.radius.set(_,Math.log(c)),this.setDistanceLimits(v.zoomMin,v.zoomMax)};function b(v){v=v||{};var _=v.center||[0,0,0],u=v.rotation||[0,0,0,1],T=v.radius||1;_=[].slice.call(_,0,3),u=[].slice.call(u,0,4),o(u,u);var c=new y(u,_,Math.log(T));return c.setDistanceLimits(v.zoomMin,v.zoomMax),("eye"in v||"up"in v)&&c.lookAt(0,v.eye,v.center,v.up),c}},{"./lib/quatFromFrame":262,"filtered-vector":68,"gl-mat4/fromQuat":95,"gl-mat4/invert":98,"gl-mat4/lookAt":99}],264:[function(l,m,x){var t=l("repeat-string");m.exports=function(i,r,n){return n=typeof n<"u"?n+"":" ",t(n,r)+i}},{"repeat-string":277}],265:[function(l,m,x){m.exports=function(a,i){i||(i=[0,""]),a=String(a);var r=parseFloat(a,10);return i[0]=r,i[1]=a.match(/[\d.\-\+]*\s*(.*)/)[1]||"",i}},{}],266:[function(l,m,x){m.exports=a;var t=l("compare-angle");function a(i,r){for(var n=r.length|0,d=i.length,s=[new Array(n),new Array(n)],o=0;o<n;++o)s[0][o]=[],s[1][o]=[];for(var o=0;o<d;++o){var y=i[o];s[0][y[0]].push(y),s[1][y[1]].push(y)}for(var g=[],o=0;o<n;++o)s[0][o].length+s[1][o].length===0&&g.push([o]);function b(k,p){var w=s[p][k[p]];w.splice(w.indexOf(k),1)}function v(k,p,w){for(var h,D,S,M=0;M<2;++M)if(s[M][p].length>0){h=s[M][p][0],S=M;break}D=h[S^1];for(var L=0;L<2;++L)for(var R=s[L][p],z=0;z<R.length;++z){var P=R[z],I=P[L^1],U=t(r[k],r[p],r[D],r[I]);U>0&&(h=P,D=I,S=L)}return w||h&&b(h,S),D}function _(k,p){var w=s[p][k][0],h=[k];b(w,p);for(var D=w[p^1];;){for(;D!==k;)h.push(D),D=v(h[h.length-2],D,!1);if(s[0][k].length+s[1][k].length===0)break;var S=h[h.length-1],M=k,L=h[1],R=v(S,M,!0);if(t(r[S],r[M],r[L],r[R])<0)break;h.push(k),D=v(S,M)}return h}function u(k,p){return p[1]===p[p.length-1]}for(var o=0;o<n;++o)for(var T=0;T<2;++T){for(var c=[];s[T][o].length>0;){s[0][o].length;var A=_(o,T);u(c,A)?c.push.apply(c,A):(c.length>0&&g.push(c),c=A)}c.length>0&&g.push(c)}return g}},{"compare-angle":54}],267:[function(l,m,x){m.exports=a;var t=l("edges-to-adjacency-list");function a(i,r){for(var n=t(i,r.length),d=new Array(r.length),s=new Array(r.length),o=[],y=0;y<r.length;++y){var g=n[y].length;s[y]=g,d[y]=!0,g<=1&&o.push(y)}for(;o.length>0;){var b=o.pop();d[b]=!1;for(var v=n[b],y=0;y<v.length;++y){var _=v[y];--s[_]===0&&o.push(_)}}for(var u=new Array(r.length),T=[],y=0;y<r.length;++y)if(d[y]){var b=T.length;u[y]=b,T.push(r[y])}else u[y]=-1;for(var c=[],y=0;y<i.length;++y){var A=i[y];d[A[0]]&&d[A[1]]&&c.push([u[A[0]],u[A[1]]])}return[c,T]}},{"edges-to-adjacency-list":66}],268:[function(l,m,x){m.exports=g;var t=l("edges-to-adjacency-list"),a=l("planar-dual"),i=l("point-in-big-polygon"),r=l("two-product"),n=l("robust-sum"),d=l("uniq"),s=l("./lib/trim-leaves");function o(b,v){for(var _=new Array(b),u=0;u<b;++u)_[u]=v;return _}function y(b){for(var v=new Array(b),_=0;_<b;++_)v[_]=[];return v}function g(b,v){var H=s(b,v);b=H[0],v=H[1];var _=v.length;b.length;for(var u=t(b,v.length),T=0;T<_;++T)if(u[T].length%2===1)throw new Error("planar-graph-to-polyline: graph must be manifold");var c=a(b,v);function A(ot){for(var ct=ot.length,bt=[0],ut=0;ut<ct;++ut){var pt=v[ot[ut]],yt=v[ot[(ut+1)%ct]],Tt=r(-pt[0],pt[1]),kt=r(-pt[0],yt[1]),zt=r(yt[0],pt[1]),Rt=r(yt[0],yt[1]);bt=n(bt,n(n(Tt,kt),n(zt,Rt)))}return bt[bt.length-1]>0}c=c.filter(A);for(var k=c.length,p=new Array(k),w=new Array(k),T=0;T<k;++T){p[T]=T;var h=new Array(k),D=c[T].map(function(ct){return v[ct]}),S=i([D]),M=0;t:for(var L=0;L<k;++L)if(h[L]=0,T!==L){for(var R=c[L],z=R.length,P=0;P<z;++P){var I=S(v[R[P]]);if(I!==0){I<0&&(h[L]=1,M+=1);continue t}}h[L]=1,M+=1}w[T]=[M,T,h]}w.sort(function(ot,ct){return ct[0]-ot[0]});for(var T=0;T<k;++T)for(var h=w[T],U=h[1],O=h[2],L=0;L<k;++L)O[L]&&(p[L]=U);for(var G=y(k),T=0;T<k;++T)G[T].push(p[T]),G[p[T]].push(T);for(var $={},tt=o(_,!1),T=0;T<k;++T)for(var R=c[T],z=R.length,L=0;L<z;++L){var Z=R[L],X=R[(L+1)%z],J=Math.min(Z,X)+":"+Math.max(Z,X);if(J in $){var st=$[J];G[st].push(T),G[T].push(st),tt[Z]=tt[X]=!0}else $[J]=T}function at(ot){for(var ct=ot.length,bt=0;bt<ct;++bt)if(!tt[ot[bt]])return!1;return!0}for(var lt=[],F=o(k,-1),T=0;T<k;++T)p[T]===T&&!at(c[T])?(lt.push(T),F[T]=0):F[T]=-1;for(var H=[];lt.length>0;){var et=lt.pop(),q=G[et];d(q,function(ot,ct){return ot-ct});var W=q.length,K=F[et],nt;if(K===0){var R=c[et];nt=[R]}for(var T=0;T<W;++T){var it=q[T];if(!(F[it]>=0)&&(F[it]=K^1,lt.push(it),K===0)){var R=c[it];at(R)||(R.reverse(),nt.push(R))}}K===0&&H.push(nt)}return H}},{"./lib/trim-leaves":267,"edges-to-adjacency-list":66,"planar-dual":266,"point-in-big-polygon":269,"robust-sum":289,"two-product":306,uniq:310}],269:[function(l,m,x){m.exports=v;var t=l("robust-orientation")[3],a=l("slab-decomposition"),i=l("interval-tree-1d"),r=l("binary-search-bounds");function n(){return!0}function d(_){return function(u,T){var c=_[u];return c?!!c.queryPoint(T,n):!1}}function s(_){for(var u={},T=0;T<_.length;++T){var c=_[T],A=c[0][0],k=c[0][1],p=c[1][1],w=[Math.min(k,p),Math.max(k,p)];A in u?u[A].push(w):u[A]=[w]}for(var h={},D=Object.keys(u),T=0;T<D.length;++T){var S=u[D[T]];h[D[T]]=i(S)}return d(h)}function o(_,u){return function(T){var c=r.le(u,T[0]);if(c<0)return 1;var A=_[c];if(!A)if(c>0&&u[c]===T[0])A=_[c-1];else return 1;for(var k=1;A;){var p=A.key,w=t(T,p[0],p[1]);if(p[0][0]<p[1][0])if(w<0)A=A.left;else if(w>0)k=-1,A=A.right;else return 0;else if(w>0)A=A.left;else if(w<0)k=1,A=A.right;else return 0}return k}}function y(_){return 1}function g(_){return function(T){return _(T[0],T[1])?0:1}}function b(_,u){return function(c){return _(c[0],c[1])?0:u(c)}}function v(_){for(var u=_.length,T=[],c=[],A=0;A<u;++A)for(var k=_[A],p=k.length,w=p-1,h=0;h<p;w=h++){var D=k[w],S=k[h];D[0]===S[0]?c.push([D,S]):T.push([D,S])}if(T.length===0)return c.length===0?y:g(s(c));var M=a(T),L=o(M.slabs,M.coordinates);return c.length===0?L:b(s(c),L)}},{"binary-search-bounds":31,"interval-tree-1d":234,"robust-orientation":284,"slab-decomposition":299}],270:[function(l,m,x){var t=new Float64Array(4),a=new Float64Array(4),i=new Float64Array(4);function r(n,d,s,o,y){t.length<o.length&&(t=new Float64Array(o.length),a=new Float64Array(o.length),i=new Float64Array(o.length));for(var g=0;g<o.length;++g)t[g]=n[g]-o[g],a[g]=d[g]-n[g],i[g]=s[g]-n[g];for(var b=0,v=0,_=0,u=0,T=0,c=0,g=0;g<o.length;++g){var A=a[g],k=i[g],p=t[g];b+=A*A,v+=A*k,_+=k*k,u+=p*A,T+=p*k,c+=p*p}var w=Math.abs(b*_-v*v),h=v*T-_*u,D=v*u-b*T,S;if(h+D<=w)if(h<0)D<0&&u<0?(D=0,-u>=b?(h=1,S=b+2*u+c):(h=-u/b,S=u*h+c)):(h=0,T>=0?(D=0,S=c):-T>=_?(D=1,S=_+2*T+c):(D=-T/_,S=T*D+c));else if(D<0)D=0,u>=0?(h=0,S=c):-u>=b?(h=1,S=b+2*u+c):(h=-u/b,S=u*h+c);else{var M=1/w;h*=M,D*=M,S=h*(b*h+v*D+2*u)+D*(v*h+_*D+2*T)+c}else{var L,R,z,P;h<0?(L=v+u,R=_+T,R>L?(z=R-L,P=b-2*v+_,z>=P?(h=1,D=0,S=b+2*u+c):(h=z/P,D=1-h,S=h*(b*h+v*D+2*u)+D*(v*h+_*D+2*T)+c)):(h=0,R<=0?(D=1,S=_+2*T+c):T>=0?(D=0,S=c):(D=-T/_,S=T*D+c))):D<0?(L=v+T,R=b+u,R>L?(z=R-L,P=b-2*v+_,z>=P?(D=1,h=0,S=_+2*T+c):(D=z/P,h=1-D,S=h*(b*h+v*D+2*u)+D*(v*h+_*D+2*T)+c)):(D=0,R<=0?(h=1,S=b+2*u+c):u>=0?(h=0,S=c):(h=-u/b,S=u*h+c))):(z=_+T-v-u,z<=0?(h=0,D=1,S=_+2*T+c):(P=b-2*v+_,z>=P?(h=1,D=0,S=b+2*u+c):(h=z/P,D=1-h,S=h*(b*h+v*D+2*u)+D*(v*h+_*D+2*T)+c)))}for(var I=1-h-D,g=0;g<o.length;++g)y[g]=I*n[g]+h*d[g]+D*s[g];return S<0?0:S}m.exports=r},{}],271:[function(l,m,x){m.exports=l("gl-quat/slerp")},{"gl-quat/slerp":124}],272:[function(l,m,x){var t=l("big-rat/add");m.exports=a;function a(i,r){for(var n=i.length,d=new Array(n),s=0;s<n;++s)d[s]=t(i[s],r[s]);return d}},{"big-rat/add":15}],273:[function(l,m,x){m.exports=a;var t=l("big-rat");function a(i){for(var r=new Array(i.length),n=0;n<i.length;++n)r[n]=t(i[n]);return r}},{"big-rat":18}],274:[function(l,m,x){var t=l("big-rat"),a=l("big-rat/mul");m.exports=i;function i(r,n){for(var d=t(n),s=r.length,o=new Array(s),y=0;y<s;++y)o[y]=a(r[y],d);return o}},{"big-rat":18,"big-rat/mul":27}],275:[function(l,m,x){var t=l("big-rat/sub");m.exports=a;function a(i,r){for(var n=i.length,d=new Array(n),s=0;s<n;++s)d[s]=t(i[s],r[s]);return d}},{"big-rat/sub":29}],276:[function(l,m,x){var t=l("compare-cell"),a=l("compare-oriented-cell"),i=l("cell-orientation");m.exports=r;function r(n){n.sort(a);for(var d=n.length,s=0,o=0;o<d;++o){var y=n[o],g=i(y);if(g!==0){if(s>0){var b=n[s-1];if(t(y,b)===0&&i(b)!==g){s-=1;continue}}n[s++]=y}}return n.length=s,n}},{"cell-orientation":47,"compare-cell":56,"compare-oriented-cell":57}],277:[function(l,m,x){var t="",a;m.exports=i;function i(r,n){if(typeof r!="string")throw new TypeError("expected a string");if(n===1)return r;if(n===2)return r+r;var d=r.length*n;if(a!==r||typeof a>"u")a=r,t="";else if(t.length>=d)return t.substr(0,d);for(;d>t.length&&n>1;)n&1&&(t+=r),n>>=1,r+=r;return t+=r,t=t.substr(0,d),t}},{}],278:[function(l,m,x){(function(t){(function(){m.exports=t.performance&&t.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this)}).call(this,typeof f<"u"?f:typeof self<"u"?self:typeof window<"u"?window:{})},{}],279:[function(l,m,x){m.exports=t;function t(a){for(var i=a.length,r=a[a.length-1],n=i,d=i-2;d>=0;--d){var s=r,o=a[d];r=s+o;var y=r-s,g=o-y;g&&(a[--n]=r,r=g)}for(var b=0,d=n;d<i;++d){var s=a[d],o=r;r=s+o;var y=r-s,g=o-y;g&&(a[b++]=g)}return a[b++]=r,a.length=b,a}},{}],280:[function(l,m,x){var t=l("two-product"),a=l("robust-sum"),i=l("robust-scale"),r=l("robust-compress"),n=6;function d(u,T,c,A){return function(p){return A(u(c(p[0][0],p[1][1]),c(-p[0][1],p[1][0])))}}function s(u,T,c,A){return function(p){return A(u(T(u(c(p[1][1],p[2][2]),c(-p[1][2],p[2][1])),p[0][0]),u(T(u(c(p[1][0],p[2][2]),c(-p[1][2],p[2][0])),-p[0][1]),T(u(c(p[1][0],p[2][1]),c(-p[1][1],p[2][0])),p[0][2]))))}}function o(u,T,c,A){return function(p){return A(u(u(T(u(T(u(c(p[2][2],p[3][3]),c(-p[2][3],p[3][2])),p[1][1]),u(T(u(c(p[2][1],p[3][3]),c(-p[2][3],p[3][1])),-p[1][2]),T(u(c(p[2][1],p[3][2]),c(-p[2][2],p[3][1])),p[1][3]))),p[0][0]),T(u(T(u(c(p[2][2],p[3][3]),c(-p[2][3],p[3][2])),p[1][0]),u(T(u(c(p[2][0],p[3][3]),c(-p[2][3],p[3][0])),-p[1][2]),T(u(c(p[2][0],p[3][2]),c(-p[2][2],p[3][0])),p[1][3]))),-p[0][1])),u(T(u(T(u(c(p[2][1],p[3][3]),c(-p[2][3],p[3][1])),p[1][0]),u(T(u(c(p[2][0],p[3][3]),c(-p[2][3],p[3][0])),-p[1][1]),T(u(c(p[2][0],p[3][1]),c(-p[2][1],p[3][0])),p[1][3]))),p[0][2]),T(u(T(u(c(p[2][1],p[3][2]),c(-p[2][2],p[3][1])),p[1][0]),u(T(u(c(p[2][0],p[3][2]),c(-p[2][2],p[3][0])),-p[1][1]),T(u(c(p[2][0],p[3][1]),c(-p[2][1],p[3][0])),p[1][2]))),-p[0][3]))))}}function y(u,T,c,A){return function(p){return A(u(u(T(u(u(T(u(T(u(c(p[3][3],p[4][4]),c(-p[3][4],p[4][3])),p[2][2]),u(T(u(c(p[3][2],p[4][4]),c(-p[3][4],p[4][2])),-p[2][3]),T(u(c(p[3][2],p[4][3]),c(-p[3][3],p[4][2])),p[2][4]))),p[1][1]),T(u(T(u(c(p[3][3],p[4][4]),c(-p[3][4],p[4][3])),p[2][1]),u(T(u(c(p[3][1],p[4][4]),c(-p[3][4],p[4][1])),-p[2][3]),T(u(c(p[3][1],p[4][3]),c(-p[3][3],p[4][1])),p[2][4]))),-p[1][2])),u(T(u(T(u(c(p[3][2],p[4][4]),c(-p[3][4],p[4][2])),p[2][1]),u(T(u(c(p[3][1],p[4][4]),c(-p[3][4],p[4][1])),-p[2][2]),T(u(c(p[3][1],p[4][2]),c(-p[3][2],p[4][1])),p[2][4]))),p[1][3]),T(u(T(u(c(p[3][2],p[4][3]),c(-p[3][3],p[4][2])),p[2][1]),u(T(u(c(p[3][1],p[4][3]),c(-p[3][3],p[4][1])),-p[2][2]),T(u(c(p[3][1],p[4][2]),c(-p[3][2],p[4][1])),p[2][3]))),-p[1][4]))),p[0][0]),T(u(u(T(u(T(u(c(p[3][3],p[4][4]),c(-p[3][4],p[4][3])),p[2][2]),u(T(u(c(p[3][2],p[4][4]),c(-p[3][4],p[4][2])),-p[2][3]),T(u(c(p[3][2],p[4][3]),c(-p[3][3],p[4][2])),p[2][4]))),p[1][0]),T(u(T(u(c(p[3][3],p[4][4]),c(-p[3][4],p[4][3])),p[2][0]),u(T(u(c(p[3][0],p[4][4]),c(-p[3][4],p[4][0])),-p[2][3]),T(u(c(p[3][0],p[4][3]),c(-p[3][3],p[4][0])),p[2][4]))),-p[1][2])),u(T(u(T(u(c(p[3][2],p[4][4]),c(-p[3][4],p[4][2])),p[2][0]),u(T(u(c(p[3][0],p[4][4]),c(-p[3][4],p[4][0])),-p[2][2]),T(u(c(p[3][0],p[4][2]),c(-p[3][2],p[4][0])),p[2][4]))),p[1][3]),T(u(T(u(c(p[3][2],p[4][3]),c(-p[3][3],p[4][2])),p[2][0]),u(T(u(c(p[3][0],p[4][3]),c(-p[3][3],p[4][0])),-p[2][2]),T(u(c(p[3][0],p[4][2]),c(-p[3][2],p[4][0])),p[2][3]))),-p[1][4]))),-p[0][1])),u(T(u(u(T(u(T(u(c(p[3][3],p[4][4]),c(-p[3][4],p[4][3])),p[2][1]),u(T(u(c(p[3][1],p[4][4]),c(-p[3][4],p[4][1])),-p[2][3]),T(u(c(p[3][1],p[4][3]),c(-p[3][3],p[4][1])),p[2][4]))),p[1][0]),T(u(T(u(c(p[3][3],p[4][4]),c(-p[3][4],p[4][3])),p[2][0]),u(T(u(c(p[3][0],p[4][4]),c(-p[3][4],p[4][0])),-p[2][3]),T(u(c(p[3][0],p[4][3]),c(-p[3][3],p[4][0])),p[2][4]))),-p[1][1])),u(T(u(T(u(c(p[3][1],p[4][4]),c(-p[3][4],p[4][1])),p[2][0]),u(T(u(c(p[3][0],p[4][4]),c(-p[3][4],p[4][0])),-p[2][1]),T(u(c(p[3][0],p[4][1]),c(-p[3][1],p[4][0])),p[2][4]))),p[1][3]),T(u(T(u(c(p[3][1],p[4][3]),c(-p[3][3],p[4][1])),p[2][0]),u(T(u(c(p[3][0],p[4][3]),c(-p[3][3],p[4][0])),-p[2][1]),T(u(c(p[3][0],p[4][1]),c(-p[3][1],p[4][0])),p[2][3]))),-p[1][4]))),p[0][2]),u(T(u(u(T(u(T(u(c(p[3][2],p[4][4]),c(-p[3][4],p[4][2])),p[2][1]),u(T(u(c(p[3][1],p[4][4]),c(-p[3][4],p[4][1])),-p[2][2]),T(u(c(p[3][1],p[4][2]),c(-p[3][2],p[4][1])),p[2][4]))),p[1][0]),T(u(T(u(c(p[3][2],p[4][4]),c(-p[3][4],p[4][2])),p[2][0]),u(T(u(c(p[3][0],p[4][4]),c(-p[3][4],p[4][0])),-p[2][2]),T(u(c(p[3][0],p[4][2]),c(-p[3][2],p[4][0])),p[2][4]))),-p[1][1])),u(T(u(T(u(c(p[3][1],p[4][4]),c(-p[3][4],p[4][1])),p[2][0]),u(T(u(c(p[3][0],p[4][4]),c(-p[3][4],p[4][0])),-p[2][1]),T(u(c(p[3][0],p[4][1]),c(-p[3][1],p[4][0])),p[2][4]))),p[1][2]),T(u(T(u(c(p[3][1],p[4][2]),c(-p[3][2],p[4][1])),p[2][0]),u(T(u(c(p[3][0],p[4][2]),c(-p[3][2],p[4][0])),-p[2][1]),T(u(c(p[3][0],p[4][1]),c(-p[3][1],p[4][0])),p[2][2]))),-p[1][4]))),-p[0][3]),T(u(u(T(u(T(u(c(p[3][2],p[4][3]),c(-p[3][3],p[4][2])),p[2][1]),u(T(u(c(p[3][1],p[4][3]),c(-p[3][3],p[4][1])),-p[2][2]),T(u(c(p[3][1],p[4][2]),c(-p[3][2],p[4][1])),p[2][3]))),p[1][0]),T(u(T(u(c(p[3][2],p[4][3]),c(-p[3][3],p[4][2])),p[2][0]),u(T(u(c(p[3][0],p[4][3]),c(-p[3][3],p[4][0])),-p[2][2]),T(u(c(p[3][0],p[4][2]),c(-p[3][2],p[4][0])),p[2][3]))),-p[1][1])),u(T(u(T(u(c(p[3][1],p[4][3]),c(-p[3][3],p[4][1])),p[2][0]),u(T(u(c(p[3][0],p[4][3]),c(-p[3][3],p[4][0])),-p[2][1]),T(u(c(p[3][0],p[4][1]),c(-p[3][1],p[4][0])),p[2][3]))),p[1][2]),T(u(T(u(c(p[3][1],p[4][2]),c(-p[3][2],p[4][1])),p[2][0]),u(T(u(c(p[3][0],p[4][2]),c(-p[3][2],p[4][0])),-p[2][1]),T(u(c(p[3][0],p[4][1]),c(-p[3][1],p[4][0])),p[2][2]))),-p[1][3]))),p[0][4])))))}}function g(u){var T=u===2?d:u===3?s:u===4?o:u===5?y:void 0;return T(a,i,t,r)}var b=[function(){return[0]},function(T){return[T[0][0]]}];function v(u,T,c,A,k,p,w,h){return function(S){switch(S.length){case 0:return u(S);case 1:return T(S);case 2:return c(S);case 3:return A(S);case 4:return k(S);case 5:return p(S)}var M=w[S.length];return M||(M=w[S.length]=h(S.length)),M(S)}}function _(){for(;b.length<n;)b.push(g(b.length));m.exports=v.apply(void 0,b.concat([b,g]));for(var u=0;u<b.length;++u)m.exports[u]=b[u]}_()},{"robust-compress":279,"robust-scale":286,"robust-sum":289,"two-product":306}],281:[function(l,m,x){var t=l("two-product"),a=l("robust-sum");m.exports=i;function i(r,n){for(var d=t(r[0],n[0]),s=1;s<r.length;++s)d=a(d,t(r[s],n[s]));return d}},{"robust-sum":289,"two-product":306}],282:[function(l,m,x){var t=l("two-product"),a=l("robust-sum"),i=l("robust-subtract"),r=l("robust-scale"),n=6;function d(k){var p=k===3?g:k===4?b:k===5?v:_;return p(a,i,t,r)}function s(){return 0}function o(){return 0}function y(){return 0}function g(k,p,w,h){function D(S,M,L){var R=w(S[0],S[0]),z=h(R,M[0]),P=h(R,L[0]),I=w(M[0],M[0]),U=h(I,S[0]),O=h(I,L[0]),G=w(L[0],L[0]),$=h(G,S[0]),tt=h(G,M[0]),Z=k(p(tt,O),p(U,z)),X=p($,P),J=p(Z,X);return J[J.length-1]}return D}function b(k,p,w,h){function D(S,M,L,R){var z=k(w(S[0],S[0]),w(S[1],S[1])),P=h(z,M[0]),I=h(z,L[0]),U=h(z,R[0]),O=k(w(M[0],M[0]),w(M[1],M[1])),G=h(O,S[0]),$=h(O,L[0]),tt=h(O,R[0]),Z=k(w(L[0],L[0]),w(L[1],L[1])),X=h(Z,S[0]),J=h(Z,M[0]),st=h(Z,R[0]),at=k(w(R[0],R[0]),w(R[1],R[1])),lt=h(at,S[0]),F=h(at,M[0]),H=h(at,L[0]),et=k(k(h(p(H,st),M[1]),k(h(p(F,tt),-L[1]),h(p(J,$),R[1]))),k(h(p(F,tt),S[1]),k(h(p(lt,U),-M[1]),h(p(G,P),R[1])))),q=k(k(h(p(H,st),S[1]),k(h(p(lt,U),-L[1]),h(p(X,I),R[1]))),k(h(p(J,$),S[1]),k(h(p(X,I),-M[1]),h(p(G,P),L[1])))),W=p(et,q);return W[W.length-1]}return D}function v(k,p,w,h){function D(S,M,L,R,z){var P=k(w(S[0],S[0]),k(w(S[1],S[1]),w(S[2],S[2]))),I=h(P,M[0]),U=h(P,L[0]),O=h(P,R[0]),G=h(P,z[0]),$=k(w(M[0],M[0]),k(w(M[1],M[1]),w(M[2],M[2]))),tt=h($,S[0]),Z=h($,L[0]),X=h($,R[0]),J=h($,z[0]),st=k(w(L[0],L[0]),k(w(L[1],L[1]),w(L[2],L[2]))),at=h(st,S[0]),lt=h(st,M[0]),F=h(st,R[0]),H=h(st,z[0]),et=k(w(R[0],R[0]),k(w(R[1],R[1]),w(R[2],R[2]))),q=h(et,S[0]),W=h(et,M[0]),K=h(et,L[0]),nt=h(et,z[0]),it=k(w(z[0],z[0]),k(w(z[1],z[1]),w(z[2],z[2]))),ot=h(it,S[0]),ct=h(it,M[0]),bt=h(it,L[0]),ut=h(it,R[0]),pt=k(k(k(h(k(h(p(ut,nt),L[1]),k(h(p(bt,H),-R[1]),h(p(K,F),z[1]))),M[2]),k(h(k(h(p(ut,nt),M[1]),k(h(p(ct,J),-R[1]),h(p(W,X),z[1]))),-L[2]),h(k(h(p(bt,H),M[1]),k(h(p(ct,J),-L[1]),h(p(lt,Z),z[1]))),R[2]))),k(h(k(h(p(K,F),M[1]),k(h(p(W,X),-L[1]),h(p(lt,Z),R[1]))),-z[2]),k(h(k(h(p(ut,nt),M[1]),k(h(p(ct,J),-R[1]),h(p(W,X),z[1]))),S[2]),h(k(h(p(ut,nt),S[1]),k(h(p(ot,G),-R[1]),h(p(q,O),z[1]))),-M[2])))),k(k(h(k(h(p(ct,J),S[1]),k(h(p(ot,G),-M[1]),h(p(tt,I),z[1]))),R[2]),k(h(k(h(p(W,X),S[1]),k(h(p(q,O),-M[1]),h(p(tt,I),R[1]))),-z[2]),h(k(h(p(K,F),M[1]),k(h(p(W,X),-L[1]),h(p(lt,Z),R[1]))),S[2]))),k(h(k(h(p(K,F),S[1]),k(h(p(q,O),-L[1]),h(p(at,U),R[1]))),-M[2]),k(h(k(h(p(W,X),S[1]),k(h(p(q,O),-M[1]),h(p(tt,I),R[1]))),L[2]),h(k(h(p(lt,Z),S[1]),k(h(p(at,U),-M[1]),h(p(tt,I),L[1]))),-R[2]))))),yt=k(k(k(h(k(h(p(ut,nt),L[1]),k(h(p(bt,H),-R[1]),h(p(K,F),z[1]))),S[2]),h(k(h(p(ut,nt),S[1]),k(h(p(ot,G),-R[1]),h(p(q,O),z[1]))),-L[2])),k(h(k(h(p(bt,H),S[1]),k(h(p(ot,G),-L[1]),h(p(at,U),z[1]))),R[2]),h(k(h(p(K,F),S[1]),k(h(p(q,O),-L[1]),h(p(at,U),R[1]))),-z[2]))),k(k(h(k(h(p(bt,H),M[1]),k(h(p(ct,J),-L[1]),h(p(lt,Z),z[1]))),S[2]),h(k(h(p(bt,H),S[1]),k(h(p(ot,G),-L[1]),h(p(at,U),z[1]))),-M[2])),k(h(k(h(p(ct,J),S[1]),k(h(p(ot,G),-M[1]),h(p(tt,I),z[1]))),L[2]),h(k(h(p(lt,Z),S[1]),k(h(p(at,U),-M[1]),h(p(tt,I),L[1]))),-z[2])))),Tt=p(pt,yt);return Tt[Tt.length-1]}return D}function _(k,p,w,h){function D(S,M,L,R,z,P){var I=k(k(w(S[0],S[0]),w(S[1],S[1])),k(w(S[2],S[2]),w(S[3],S[3]))),U=h(I,M[0]),O=h(I,L[0]),G=h(I,R[0]),$=h(I,z[0]),tt=h(I,P[0]),Z=k(k(w(M[0],M[0]),w(M[1],M[1])),k(w(M[2],M[2]),w(M[3],M[3]))),X=h(Z,S[0]),J=h(Z,L[0]),st=h(Z,R[0]),at=h(Z,z[0]),lt=h(Z,P[0]),F=k(k(w(L[0],L[0]),w(L[1],L[1])),k(w(L[2],L[2]),w(L[3],L[3]))),H=h(F,S[0]),et=h(F,M[0]),q=h(F,R[0]),W=h(F,z[0]),K=h(F,P[0]),nt=k(k(w(R[0],R[0]),w(R[1],R[1])),k(w(R[2],R[2]),w(R[3],R[3]))),it=h(nt,S[0]),ot=h(nt,M[0]),ct=h(nt,L[0]),bt=h(nt,z[0]),ut=h(nt,P[0]),pt=k(k(w(z[0],z[0]),w(z[1],z[1])),k(w(z[2],z[2]),w(z[3],z[3]))),yt=h(pt,S[0]),Tt=h(pt,M[0]),kt=h(pt,L[0]),zt=h(pt,R[0]),Rt=h(pt,P[0]),Gt=k(k(w(P[0],P[0]),w(P[1],P[1])),k(w(P[2],P[2]),w(P[3],P[3]))),wt=h(Gt,S[0]),It=h(Gt,M[0]),$t=h(Gt,L[0]),Qt=h(Gt,R[0]),Nt=h(Gt,z[0]),Pt=k(k(k(h(k(k(h(k(h(p(Nt,Rt),R[1]),k(h(p(Qt,ut),-z[1]),h(p(zt,bt),P[1]))),L[2]),h(k(h(p(Nt,Rt),L[1]),k(h(p($t,K),-z[1]),h(p(kt,W),P[1]))),-R[2])),k(h(k(h(p(Qt,ut),L[1]),k(h(p($t,K),-R[1]),h(p(ct,q),P[1]))),z[2]),h(k(h(p(zt,bt),L[1]),k(h(p(kt,W),-R[1]),h(p(ct,q),z[1]))),-P[2]))),M[3]),k(h(k(k(h(k(h(p(Nt,Rt),R[1]),k(h(p(Qt,ut),-z[1]),h(p(zt,bt),P[1]))),M[2]),h(k(h(p(Nt,Rt),M[1]),k(h(p(It,lt),-z[1]),h(p(Tt,at),P[1]))),-R[2])),k(h(k(h(p(Qt,ut),M[1]),k(h(p(It,lt),-R[1]),h(p(ot,st),P[1]))),z[2]),h(k(h(p(zt,bt),M[1]),k(h(p(Tt,at),-R[1]),h(p(ot,st),z[1]))),-P[2]))),-L[3]),h(k(k(h(k(h(p(Nt,Rt),L[1]),k(h(p($t,K),-z[1]),h(p(kt,W),P[1]))),M[2]),h(k(h(p(Nt,Rt),M[1]),k(h(p(It,lt),-z[1]),h(p(Tt,at),P[1]))),-L[2])),k(h(k(h(p($t,K),M[1]),k(h(p(It,lt),-L[1]),h(p(et,J),P[1]))),z[2]),h(k(h(p(kt,W),M[1]),k(h(p(Tt,at),-L[1]),h(p(et,J),z[1]))),-P[2]))),R[3]))),k(k(h(k(k(h(k(h(p(Qt,ut),L[1]),k(h(p($t,K),-R[1]),h(p(ct,q),P[1]))),M[2]),h(k(h(p(Qt,ut),M[1]),k(h(p(It,lt),-R[1]),h(p(ot,st),P[1]))),-L[2])),k(h(k(h(p($t,K),M[1]),k(h(p(It,lt),-L[1]),h(p(et,J),P[1]))),R[2]),h(k(h(p(ct,q),M[1]),k(h(p(ot,st),-L[1]),h(p(et,J),R[1]))),-P[2]))),-z[3]),h(k(k(h(k(h(p(zt,bt),L[1]),k(h(p(kt,W),-R[1]),h(p(ct,q),z[1]))),M[2]),h(k(h(p(zt,bt),M[1]),k(h(p(Tt,at),-R[1]),h(p(ot,st),z[1]))),-L[2])),k(h(k(h(p(kt,W),M[1]),k(h(p(Tt,at),-L[1]),h(p(et,J),z[1]))),R[2]),h(k(h(p(ct,q),M[1]),k(h(p(ot,st),-L[1]),h(p(et,J),R[1]))),-z[2]))),P[3])),k(h(k(k(h(k(h(p(Nt,Rt),R[1]),k(h(p(Qt,ut),-z[1]),h(p(zt,bt),P[1]))),M[2]),h(k(h(p(Nt,Rt),M[1]),k(h(p(It,lt),-z[1]),h(p(Tt,at),P[1]))),-R[2])),k(h(k(h(p(Qt,ut),M[1]),k(h(p(It,lt),-R[1]),h(p(ot,st),P[1]))),z[2]),h(k(h(p(zt,bt),M[1]),k(h(p(Tt,at),-R[1]),h(p(ot,st),z[1]))),-P[2]))),S[3]),h(k(k(h(k(h(p(Nt,Rt),R[1]),k(h(p(Qt,ut),-z[1]),h(p(zt,bt),P[1]))),S[2]),h(k(h(p(Nt,Rt),S[1]),k(h(p(wt,tt),-z[1]),h(p(yt,$),P[1]))),-R[2])),k(h(k(h(p(Qt,ut),S[1]),k(h(p(wt,tt),-R[1]),h(p(it,G),P[1]))),z[2]),h(k(h(p(zt,bt),S[1]),k(h(p(yt,$),-R[1]),h(p(it,G),z[1]))),-P[2]))),-M[3])))),k(k(k(h(k(k(h(k(h(p(Nt,Rt),M[1]),k(h(p(It,lt),-z[1]),h(p(Tt,at),P[1]))),S[2]),h(k(h(p(Nt,Rt),S[1]),k(h(p(wt,tt),-z[1]),h(p(yt,$),P[1]))),-M[2])),k(h(k(h(p(It,lt),S[1]),k(h(p(wt,tt),-M[1]),h(p(X,U),P[1]))),z[2]),h(k(h(p(Tt,at),S[1]),k(h(p(yt,$),-M[1]),h(p(X,U),z[1]))),-P[2]))),R[3]),h(k(k(h(k(h(p(Qt,ut),M[1]),k(h(p(It,lt),-R[1]),h(p(ot,st),P[1]))),S[2]),h(k(h(p(Qt,ut),S[1]),k(h(p(wt,tt),-R[1]),h(p(it,G),P[1]))),-M[2])),k(h(k(h(p(It,lt),S[1]),k(h(p(wt,tt),-M[1]),h(p(X,U),P[1]))),R[2]),h(k(h(p(ot,st),S[1]),k(h(p(it,G),-M[1]),h(p(X,U),R[1]))),-P[2]))),-z[3])),k(h(k(k(h(k(h(p(zt,bt),M[1]),k(h(p(Tt,at),-R[1]),h(p(ot,st),z[1]))),S[2]),h(k(h(p(zt,bt),S[1]),k(h(p(yt,$),-R[1]),h(p(it,G),z[1]))),-M[2])),k(h(k(h(p(Tt,at),S[1]),k(h(p(yt,$),-M[1]),h(p(X,U),z[1]))),R[2]),h(k(h(p(ot,st),S[1]),k(h(p(it,G),-M[1]),h(p(X,U),R[1]))),-z[2]))),P[3]),h(k(k(h(k(h(p(Qt,ut),L[1]),k(h(p($t,K),-R[1]),h(p(ct,q),P[1]))),M[2]),h(k(h(p(Qt,ut),M[1]),k(h(p(It,lt),-R[1]),h(p(ot,st),P[1]))),-L[2])),k(h(k(h(p($t,K),M[1]),k(h(p(It,lt),-L[1]),h(p(et,J),P[1]))),R[2]),h(k(h(p(ct,q),M[1]),k(h(p(ot,st),-L[1]),h(p(et,J),R[1]))),-P[2]))),S[3]))),k(k(h(k(k(h(k(h(p(Qt,ut),L[1]),k(h(p($t,K),-R[1]),h(p(ct,q),P[1]))),S[2]),h(k(h(p(Qt,ut),S[1]),k(h(p(wt,tt),-R[1]),h(p(it,G),P[1]))),-L[2])),k(h(k(h(p($t,K),S[1]),k(h(p(wt,tt),-L[1]),h(p(H,O),P[1]))),R[2]),h(k(h(p(ct,q),S[1]),k(h(p(it,G),-L[1]),h(p(H,O),R[1]))),-P[2]))),-M[3]),h(k(k(h(k(h(p(Qt,ut),M[1]),k(h(p(It,lt),-R[1]),h(p(ot,st),P[1]))),S[2]),h(k(h(p(Qt,ut),S[1]),k(h(p(wt,tt),-R[1]),h(p(it,G),P[1]))),-M[2])),k(h(k(h(p(It,lt),S[1]),k(h(p(wt,tt),-M[1]),h(p(X,U),P[1]))),R[2]),h(k(h(p(ot,st),S[1]),k(h(p(it,G),-M[1]),h(p(X,U),R[1]))),-P[2]))),L[3])),k(h(k(k(h(k(h(p($t,K),M[1]),k(h(p(It,lt),-L[1]),h(p(et,J),P[1]))),S[2]),h(k(h(p($t,K),S[1]),k(h(p(wt,tt),-L[1]),h(p(H,O),P[1]))),-M[2])),k(h(k(h(p(It,lt),S[1]),k(h(p(wt,tt),-M[1]),h(p(X,U),P[1]))),L[2]),h(k(h(p(et,J),S[1]),k(h(p(H,O),-M[1]),h(p(X,U),L[1]))),-P[2]))),-R[3]),h(k(k(h(k(h(p(ct,q),M[1]),k(h(p(ot,st),-L[1]),h(p(et,J),R[1]))),S[2]),h(k(h(p(ct,q),S[1]),k(h(p(it,G),-L[1]),h(p(H,O),R[1]))),-M[2])),k(h(k(h(p(ot,st),S[1]),k(h(p(it,G),-M[1]),h(p(X,U),R[1]))),L[2]),h(k(h(p(et,J),S[1]),k(h(p(H,O),-M[1]),h(p(X,U),L[1]))),-R[2]))),P[3]))))),Yt=k(k(k(h(k(k(h(k(h(p(Nt,Rt),R[1]),k(h(p(Qt,ut),-z[1]),h(p(zt,bt),P[1]))),L[2]),h(k(h(p(Nt,Rt),L[1]),k(h(p($t,K),-z[1]),h(p(kt,W),P[1]))),-R[2])),k(h(k(h(p(Qt,ut),L[1]),k(h(p($t,K),-R[1]),h(p(ct,q),P[1]))),z[2]),h(k(h(p(zt,bt),L[1]),k(h(p(kt,W),-R[1]),h(p(ct,q),z[1]))),-P[2]))),S[3]),k(h(k(k(h(k(h(p(Nt,Rt),R[1]),k(h(p(Qt,ut),-z[1]),h(p(zt,bt),P[1]))),S[2]),h(k(h(p(Nt,Rt),S[1]),k(h(p(wt,tt),-z[1]),h(p(yt,$),P[1]))),-R[2])),k(h(k(h(p(Qt,ut),S[1]),k(h(p(wt,tt),-R[1]),h(p(it,G),P[1]))),z[2]),h(k(h(p(zt,bt),S[1]),k(h(p(yt,$),-R[1]),h(p(it,G),z[1]))),-P[2]))),-L[3]),h(k(k(h(k(h(p(Nt,Rt),L[1]),k(h(p($t,K),-z[1]),h(p(kt,W),P[1]))),S[2]),h(k(h(p(Nt,Rt),S[1]),k(h(p(wt,tt),-z[1]),h(p(yt,$),P[1]))),-L[2])),k(h(k(h(p($t,K),S[1]),k(h(p(wt,tt),-L[1]),h(p(H,O),P[1]))),z[2]),h(k(h(p(kt,W),S[1]),k(h(p(yt,$),-L[1]),h(p(H,O),z[1]))),-P[2]))),R[3]))),k(k(h(k(k(h(k(h(p(Qt,ut),L[1]),k(h(p($t,K),-R[1]),h(p(ct,q),P[1]))),S[2]),h(k(h(p(Qt,ut),S[1]),k(h(p(wt,tt),-R[1]),h(p(it,G),P[1]))),-L[2])),k(h(k(h(p($t,K),S[1]),k(h(p(wt,tt),-L[1]),h(p(H,O),P[1]))),R[2]),h(k(h(p(ct,q),S[1]),k(h(p(it,G),-L[1]),h(p(H,O),R[1]))),-P[2]))),-z[3]),h(k(k(h(k(h(p(zt,bt),L[1]),k(h(p(kt,W),-R[1]),h(p(ct,q),z[1]))),S[2]),h(k(h(p(zt,bt),S[1]),k(h(p(yt,$),-R[1]),h(p(it,G),z[1]))),-L[2])),k(h(k(h(p(kt,W),S[1]),k(h(p(yt,$),-L[1]),h(p(H,O),z[1]))),R[2]),h(k(h(p(ct,q),S[1]),k(h(p(it,G),-L[1]),h(p(H,O),R[1]))),-z[2]))),P[3])),k(h(k(k(h(k(h(p(Nt,Rt),L[1]),k(h(p($t,K),-z[1]),h(p(kt,W),P[1]))),M[2]),h(k(h(p(Nt,Rt),M[1]),k(h(p(It,lt),-z[1]),h(p(Tt,at),P[1]))),-L[2])),k(h(k(h(p($t,K),M[1]),k(h(p(It,lt),-L[1]),h(p(et,J),P[1]))),z[2]),h(k(h(p(kt,W),M[1]),k(h(p(Tt,at),-L[1]),h(p(et,J),z[1]))),-P[2]))),S[3]),h(k(k(h(k(h(p(Nt,Rt),L[1]),k(h(p($t,K),-z[1]),h(p(kt,W),P[1]))),S[2]),h(k(h(p(Nt,Rt),S[1]),k(h(p(wt,tt),-z[1]),h(p(yt,$),P[1]))),-L[2])),k(h(k(h(p($t,K),S[1]),k(h(p(wt,tt),-L[1]),h(p(H,O),P[1]))),z[2]),h(k(h(p(kt,W),S[1]),k(h(p(yt,$),-L[1]),h(p(H,O),z[1]))),-P[2]))),-M[3])))),k(k(k(h(k(k(h(k(h(p(Nt,Rt),M[1]),k(h(p(It,lt),-z[1]),h(p(Tt,at),P[1]))),S[2]),h(k(h(p(Nt,Rt),S[1]),k(h(p(wt,tt),-z[1]),h(p(yt,$),P[1]))),-M[2])),k(h(k(h(p(It,lt),S[1]),k(h(p(wt,tt),-M[1]),h(p(X,U),P[1]))),z[2]),h(k(h(p(Tt,at),S[1]),k(h(p(yt,$),-M[1]),h(p(X,U),z[1]))),-P[2]))),L[3]),h(k(k(h(k(h(p($t,K),M[1]),k(h(p(It,lt),-L[1]),h(p(et,J),P[1]))),S[2]),h(k(h(p($t,K),S[1]),k(h(p(wt,tt),-L[1]),h(p(H,O),P[1]))),-M[2])),k(h(k(h(p(It,lt),S[1]),k(h(p(wt,tt),-M[1]),h(p(X,U),P[1]))),L[2]),h(k(h(p(et,J),S[1]),k(h(p(H,O),-M[1]),h(p(X,U),L[1]))),-P[2]))),-z[3])),k(h(k(k(h(k(h(p(kt,W),M[1]),k(h(p(Tt,at),-L[1]),h(p(et,J),z[1]))),S[2]),h(k(h(p(kt,W),S[1]),k(h(p(yt,$),-L[1]),h(p(H,O),z[1]))),-M[2])),k(h(k(h(p(Tt,at),S[1]),k(h(p(yt,$),-M[1]),h(p(X,U),z[1]))),L[2]),h(k(h(p(et,J),S[1]),k(h(p(H,O),-M[1]),h(p(X,U),L[1]))),-z[2]))),P[3]),h(k(k(h(k(h(p(zt,bt),L[1]),k(h(p(kt,W),-R[1]),h(p(ct,q),z[1]))),M[2]),h(k(h(p(zt,bt),M[1]),k(h(p(Tt,at),-R[1]),h(p(ot,st),z[1]))),-L[2])),k(h(k(h(p(kt,W),M[1]),k(h(p(Tt,at),-L[1]),h(p(et,J),z[1]))),R[2]),h(k(h(p(ct,q),M[1]),k(h(p(ot,st),-L[1]),h(p(et,J),R[1]))),-z[2]))),S[3]))),k(k(h(k(k(h(k(h(p(zt,bt),L[1]),k(h(p(kt,W),-R[1]),h(p(ct,q),z[1]))),S[2]),h(k(h(p(zt,bt),S[1]),k(h(p(yt,$),-R[1]),h(p(it,G),z[1]))),-L[2])),k(h(k(h(p(kt,W),S[1]),k(h(p(yt,$),-L[1]),h(p(H,O),z[1]))),R[2]),h(k(h(p(ct,q),S[1]),k(h(p(it,G),-L[1]),h(p(H,O),R[1]))),-z[2]))),-M[3]),h(k(k(h(k(h(p(zt,bt),M[1]),k(h(p(Tt,at),-R[1]),h(p(ot,st),z[1]))),S[2]),h(k(h(p(zt,bt),S[1]),k(h(p(yt,$),-R[1]),h(p(it,G),z[1]))),-M[2])),k(h(k(h(p(Tt,at),S[1]),k(h(p(yt,$),-M[1]),h(p(X,U),z[1]))),R[2]),h(k(h(p(ot,st),S[1]),k(h(p(it,G),-M[1]),h(p(X,U),R[1]))),-z[2]))),L[3])),k(h(k(k(h(k(h(p(kt,W),M[1]),k(h(p(Tt,at),-L[1]),h(p(et,J),z[1]))),S[2]),h(k(h(p(kt,W),S[1]),k(h(p(yt,$),-L[1]),h(p(H,O),z[1]))),-M[2])),k(h(k(h(p(Tt,at),S[1]),k(h(p(yt,$),-M[1]),h(p(X,U),z[1]))),L[2]),h(k(h(p(et,J),S[1]),k(h(p(H,O),-M[1]),h(p(X,U),L[1]))),-z[2]))),-R[3]),h(k(k(h(k(h(p(ct,q),M[1]),k(h(p(ot,st),-L[1]),h(p(et,J),R[1]))),S[2]),h(k(h(p(ct,q),S[1]),k(h(p(it,G),-L[1]),h(p(H,O),R[1]))),-M[2])),k(h(k(h(p(ot,st),S[1]),k(h(p(it,G),-M[1]),h(p(X,U),R[1]))),L[2]),h(k(h(p(et,J),S[1]),k(h(p(H,O),-M[1]),h(p(X,U),L[1]))),-R[2]))),z[3]))))),ve=p(Pt,Yt);return ve[ve.length-1]}return D}var u=[s,o,y];function T(k){var p=u[k.length];return p||(p=u[k.length]=d(k.length)),p.apply(void 0,k)}function c(k,p,w,h,D,S,M,L){function R(z,P,I,U,O,G){switch(arguments.length){case 0:case 1:return 0;case 2:return h(z,P);case 3:return D(z,P,I);case 4:return S(z,P,I,U);case 5:return M(z,P,I,U,O);case 6:return L(z,P,I,U,O,G)}for(var $=new Array(arguments.length),tt=0;tt<arguments.length;++tt)$[tt]=arguments[tt];return k($)}return R}function A(){for(;u.length<=n;)u.push(d(u.length));m.exports=c.apply(void 0,[T].concat(u));for(var k=0;k<=n;++k)m.exports[k]=u[k]}A()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],283:[function(l,m,x){var t=l("robust-determinant"),a=6;function i(u){var T=u===2?d:u===3?s:u===4?o:u===5?y:g;return u<6?T(t[u]):T(t)}function r(){return[[0]]}function n(u,T){return[[T[0]],[u[0][0]]]}function d(u){return function(c,A){return[u([[+A[0],+c[0][1]],[+A[1],+c[1][1]]]),u([[+c[0][0],+A[0]],[+c[1][0],+A[1]]]),u(c)]}}function s(u){return function(c,A){return[u([[+A[0],+c[0][1],+c[0][2]],[+A[1],+c[1][1],+c[1][2]],[+A[2],+c[2][1],+c[2][2]]]),u([[+c[0][0],+A[0],+c[0][2]],[+c[1][0],+A[1],+c[1][2]],[+c[2][0],+A[2],+c[2][2]]]),u([[+c[0][0],+c[0][1],+A[0]],[+c[1][0],+c[1][1],+A[1]],[+c[2][0],+c[2][1],+A[2]]]),u(c)]}}function o(u){return function(c,A){return[u([[+A[0],+c[0][1],+c[0][2],+c[0][3]],[+A[1],+c[1][1],+c[1][2],+c[1][3]],[+A[2],+c[2][1],+c[2][2],+c[2][3]],[+A[3],+c[3][1],+c[3][2],+c[3][3]]]),u([[+c[0][0],+A[0],+c[0][2],+c[0][3]],[+c[1][0],+A[1],+c[1][2],+c[1][3]],[+c[2][0],+A[2],+c[2][2],+c[2][3]],[+c[3][0],+A[3],+c[3][2],+c[3][3]]]),u([[+c[0][0],+c[0][1],+A[0],+c[0][3]],[+c[1][0],+c[1][1],+A[1],+c[1][3]],[+c[2][0],+c[2][1],+A[2],+c[2][3]],[+c[3][0],+c[3][1],+A[3],+c[3][3]]]),u([[+c[0][0],+c[0][1],+c[0][2],+A[0]],[+c[1][0],+c[1][1],+c[1][2],+A[1]],[+c[2][0],+c[2][1],+c[2][2],+A[2]],[+c[3][0],+c[3][1],+c[3][2],+A[3]]]),u(c)]}}function y(u){return function(c,A){return[u([[+A[0],+c[0][1],+c[0][2],+c[0][3],+c[0][4]],[+A[1],+c[1][1],+c[1][2],+c[1][3],+c[1][4]],[+A[2],+c[2][1],+c[2][2],+c[2][3],+c[2][4]],[+A[3],+c[3][1],+c[3][2],+c[3][3],+c[3][4]],[+A[4],+c[4][1],+c[4][2],+c[4][3],+c[4][4]]]),u([[+c[0][0],+A[0],+c[0][2],+c[0][3],+c[0][4]],[+c[1][0],+A[1],+c[1][2],+c[1][3],+c[1][4]],[+c[2][0],+A[2],+c[2][2],+c[2][3],+c[2][4]],[+c[3][0],+A[3],+c[3][2],+c[3][3],+c[3][4]],[+c[4][0],+A[4],+c[4][2],+c[4][3],+c[4][4]]]),u([[+c[0][0],+c[0][1],+A[0],+c[0][3],+c[0][4]],[+c[1][0],+c[1][1],+A[1],+c[1][3],+c[1][4]],[+c[2][0],+c[2][1],+A[2],+c[2][3],+c[2][4]],[+c[3][0],+c[3][1],+A[3],+c[3][3],+c[3][4]],[+c[4][0],+c[4][1],+A[4],+c[4][3],+c[4][4]]]),u([[+c[0][0],+c[0][1],+c[0][2],+A[0],+c[0][4]],[+c[1][0],+c[1][1],+c[1][2],+A[1],+c[1][4]],[+c[2][0],+c[2][1],+c[2][2],+A[2],+c[2][4]],[+c[3][0],+c[3][1],+c[3][2],+A[3],+c[3][4]],[+c[4][0],+c[4][1],+c[4][2],+A[4],+c[4][4]]]),u([[+c[0][0],+c[0][1],+c[0][2],+c[0][3],+A[0]],[+c[1][0],+c[1][1],+c[1][2],+c[1][3],+A[1]],[+c[2][0],+c[2][1],+c[2][2],+c[2][3],+A[2]],[+c[3][0],+c[3][1],+c[3][2],+c[3][3],+A[3]],[+c[4][0],+c[4][1],+c[4][2],+c[4][3],+A[4]]]),u(c)]}}function g(u){return function(c,A){return[u([[+A[0],+c[0][1],+c[0][2],+c[0][3],+c[0][4],+c[0][5]],[+A[1],+c[1][1],+c[1][2],+c[1][3],+c[1][4],+c[1][5]],[+A[2],+c[2][1],+c[2][2],+c[2][3],+c[2][4],+c[2][5]],[+A[3],+c[3][1],+c[3][2],+c[3][3],+c[3][4],+c[3][5]],[+A[4],+c[4][1],+c[4][2],+c[4][3],+c[4][4],+c[4][5]],[+A[5],+c[5][1],+c[5][2],+c[5][3],+c[5][4],+c[5][5]]]),u([[+c[0][0],+A[0],+c[0][2],+c[0][3],+c[0][4],+c[0][5]],[+c[1][0],+A[1],+c[1][2],+c[1][3],+c[1][4],+c[1][5]],[+c[2][0],+A[2],+c[2][2],+c[2][3],+c[2][4],+c[2][5]],[+c[3][0],+A[3],+c[3][2],+c[3][3],+c[3][4],+c[3][5]],[+c[4][0],+A[4],+c[4][2],+c[4][3],+c[4][4],+c[4][5]],[+c[5][0],+A[5],+c[5][2],+c[5][3],+c[5][4],+c[5][5]]]),u([[+c[0][0],+c[0][1],+A[0],+c[0][3],+c[0][4],+c[0][5]],[+c[1][0],+c[1][1],+A[1],+c[1][3],+c[1][4],+c[1][5]],[+c[2][0],+c[2][1],+A[2],+c[2][3],+c[2][4],+c[2][5]],[+c[3][0],+c[3][1],+A[3],+c[3][3],+c[3][4],+c[3][5]],[+c[4][0],+c[4][1],+A[4],+c[4][3],+c[4][4],+c[4][5]],[+c[5][0],+c[5][1],+A[5],+c[5][3],+c[5][4],+c[5][5]]]),u([[+c[0][0],+c[0][1],+c[0][2],+A[0],+c[0][4],+c[0][5]],[+c[1][0],+c[1][1],+c[1][2],+A[1],+c[1][4],+c[1][5]],[+c[2][0],+c[2][1],+c[2][2],+A[2],+c[2][4],+c[2][5]],[+c[3][0],+c[3][1],+c[3][2],+A[3],+c[3][4],+c[3][5]],[+c[4][0],+c[4][1],+c[4][2],+A[4],+c[4][4],+c[4][5]],[+c[5][0],+c[5][1],+c[5][2],+A[5],+c[5][4],+c[5][5]]]),u([[+c[0][0],+c[0][1],+c[0][2],+c[0][3],+A[0],+c[0][5]],[+c[1][0],+c[1][1],+c[1][2],+c[1][3],+A[1],+c[1][5]],[+c[2][0],+c[2][1],+c[2][2],+c[2][3],+A[2],+c[2][5]],[+c[3][0],+c[3][1],+c[3][2],+c[3][3],+A[3],+c[3][5]],[+c[4][0],+c[4][1],+c[4][2],+c[4][3],+A[4],+c[4][5]],[+c[5][0],+c[5][1],+c[5][2],+c[5][3],+A[5],+c[5][5]]]),u([[+c[0][0],+c[0][1],+c[0][2],+c[0][3],+c[0][4],+A[0]],[+c[1][0],+c[1][1],+c[1][2],+c[1][3],+c[1][4],+A[1]],[+c[2][0],+c[2][1],+c[2][2],+c[2][3],+c[2][4],+A[2]],[+c[3][0],+c[3][1],+c[3][2],+c[3][3],+c[3][4],+A[3]],[+c[4][0],+c[4][1],+c[4][2],+c[4][3],+c[4][4],+A[4]],[+c[5][0],+c[5][1],+c[5][2],+c[5][3],+c[5][4],+A[5]]]),u(c)]}}var b=[r,n];function v(u,T,c,A,k,p,w,h){return function(S,M){switch(S.length){case 0:return u(S,M);case 1:return T(S,M);case 2:return c(S,M);case 3:return A(S,M);case 4:return k(S,M);case 5:return p(S,M)}var L=w[S.length];return L||(L=w[S.length]=h(S.length)),L(S,M)}}function _(){for(;b.length<a;)b.push(i(b.length));m.exports=v.apply(void 0,b.concat([b,i]));for(var u=0;u<a;++u)m.exports[u]=b[u]}_()},{"robust-determinant":280}],284:[function(l,m,x){var t=l("two-product"),a=l("robust-sum"),i=l("robust-scale"),r=l("robust-subtract"),n=5,d=11102230246251565e-32,s=(3+16*d)*d,o=(7+56*d)*d;function y(p,w,h,D){return function(M,L,R){var z=p(p(w(L[1],R[0]),w(-R[1],L[0])),p(w(M[1],L[0]),w(-L[1],M[0]))),P=p(w(M[1],R[0]),w(-R[1],M[0])),I=D(z,P);return I[I.length-1]}}function g(p,w,h,D){return function(M,L,R,z){var P=p(p(h(p(w(R[1],z[0]),w(-z[1],R[0])),L[2]),p(h(p(w(L[1],z[0]),w(-z[1],L[0])),-R[2]),h(p(w(L[1],R[0]),w(-R[1],L[0])),z[2]))),p(h(p(w(L[1],z[0]),w(-z[1],L[0])),M[2]),p(h(p(w(M[1],z[0]),w(-z[1],M[0])),-L[2]),h(p(w(M[1],L[0]),w(-L[1],M[0])),z[2])))),I=p(p(h(p(w(R[1],z[0]),w(-z[1],R[0])),M[2]),p(h(p(w(M[1],z[0]),w(-z[1],M[0])),-R[2]),h(p(w(M[1],R[0]),w(-R[1],M[0])),z[2]))),p(h(p(w(L[1],R[0]),w(-R[1],L[0])),M[2]),p(h(p(w(M[1],R[0]),w(-R[1],M[0])),-L[2]),h(p(w(M[1],L[0]),w(-L[1],M[0])),R[2])))),U=D(P,I);return U[U.length-1]}}function b(p,w,h,D){return function(M,L,R,z,P){var I=p(p(p(h(p(h(p(w(z[1],P[0]),w(-P[1],z[0])),R[2]),p(h(p(w(R[1],P[0]),w(-P[1],R[0])),-z[2]),h(p(w(R[1],z[0]),w(-z[1],R[0])),P[2]))),L[3]),p(h(p(h(p(w(z[1],P[0]),w(-P[1],z[0])),L[2]),p(h(p(w(L[1],P[0]),w(-P[1],L[0])),-z[2]),h(p(w(L[1],z[0]),w(-z[1],L[0])),P[2]))),-R[3]),h(p(h(p(w(R[1],P[0]),w(-P[1],R[0])),L[2]),p(h(p(w(L[1],P[0]),w(-P[1],L[0])),-R[2]),h(p(w(L[1],R[0]),w(-R[1],L[0])),P[2]))),z[3]))),p(h(p(h(p(w(R[1],z[0]),w(-z[1],R[0])),L[2]),p(h(p(w(L[1],z[0]),w(-z[1],L[0])),-R[2]),h(p(w(L[1],R[0]),w(-R[1],L[0])),z[2]))),-P[3]),p(h(p(h(p(w(z[1],P[0]),w(-P[1],z[0])),L[2]),p(h(p(w(L[1],P[0]),w(-P[1],L[0])),-z[2]),h(p(w(L[1],z[0]),w(-z[1],L[0])),P[2]))),M[3]),h(p(h(p(w(z[1],P[0]),w(-P[1],z[0])),M[2]),p(h(p(w(M[1],P[0]),w(-P[1],M[0])),-z[2]),h(p(w(M[1],z[0]),w(-z[1],M[0])),P[2]))),-L[3])))),p(p(h(p(h(p(w(L[1],P[0]),w(-P[1],L[0])),M[2]),p(h(p(w(M[1],P[0]),w(-P[1],M[0])),-L[2]),h(p(w(M[1],L[0]),w(-L[1],M[0])),P[2]))),z[3]),p(h(p(h(p(w(L[1],z[0]),w(-z[1],L[0])),M[2]),p(h(p(w(M[1],z[0]),w(-z[1],M[0])),-L[2]),h(p(w(M[1],L[0]),w(-L[1],M[0])),z[2]))),-P[3]),h(p(h(p(w(R[1],z[0]),w(-z[1],R[0])),L[2]),p(h(p(w(L[1],z[0]),w(-z[1],L[0])),-R[2]),h(p(w(L[1],R[0]),w(-R[1],L[0])),z[2]))),M[3]))),p(h(p(h(p(w(R[1],z[0]),w(-z[1],R[0])),M[2]),p(h(p(w(M[1],z[0]),w(-z[1],M[0])),-R[2]),h(p(w(M[1],R[0]),w(-R[1],M[0])),z[2]))),-L[3]),p(h(p(h(p(w(L[1],z[0]),w(-z[1],L[0])),M[2]),p(h(p(w(M[1],z[0]),w(-z[1],M[0])),-L[2]),h(p(w(M[1],L[0]),w(-L[1],M[0])),z[2]))),R[3]),h(p(h(p(w(L[1],R[0]),w(-R[1],L[0])),M[2]),p(h(p(w(M[1],R[0]),w(-R[1],M[0])),-L[2]),h(p(w(M[1],L[0]),w(-L[1],M[0])),R[2]))),-z[3]))))),U=p(p(p(h(p(h(p(w(z[1],P[0]),w(-P[1],z[0])),R[2]),p(h(p(w(R[1],P[0]),w(-P[1],R[0])),-z[2]),h(p(w(R[1],z[0]),w(-z[1],R[0])),P[2]))),M[3]),h(p(h(p(w(z[1],P[0]),w(-P[1],z[0])),M[2]),p(h(p(w(M[1],P[0]),w(-P[1],M[0])),-z[2]),h(p(w(M[1],z[0]),w(-z[1],M[0])),P[2]))),-R[3])),p(h(p(h(p(w(R[1],P[0]),w(-P[1],R[0])),M[2]),p(h(p(w(M[1],P[0]),w(-P[1],M[0])),-R[2]),h(p(w(M[1],R[0]),w(-R[1],M[0])),P[2]))),z[3]),h(p(h(p(w(R[1],z[0]),w(-z[1],R[0])),M[2]),p(h(p(w(M[1],z[0]),w(-z[1],M[0])),-R[2]),h(p(w(M[1],R[0]),w(-R[1],M[0])),z[2]))),-P[3]))),p(p(h(p(h(p(w(R[1],P[0]),w(-P[1],R[0])),L[2]),p(h(p(w(L[1],P[0]),w(-P[1],L[0])),-R[2]),h(p(w(L[1],R[0]),w(-R[1],L[0])),P[2]))),M[3]),h(p(h(p(w(R[1],P[0]),w(-P[1],R[0])),M[2]),p(h(p(w(M[1],P[0]),w(-P[1],M[0])),-R[2]),h(p(w(M[1],R[0]),w(-R[1],M[0])),P[2]))),-L[3])),p(h(p(h(p(w(L[1],P[0]),w(-P[1],L[0])),M[2]),p(h(p(w(M[1],P[0]),w(-P[1],M[0])),-L[2]),h(p(w(M[1],L[0]),w(-L[1],M[0])),P[2]))),R[3]),h(p(h(p(w(L[1],R[0]),w(-R[1],L[0])),M[2]),p(h(p(w(M[1],R[0]),w(-R[1],M[0])),-L[2]),h(p(w(M[1],L[0]),w(-L[1],M[0])),R[2]))),-P[3])))),O=D(I,U);return O[O.length-1]}}function v(p){var w=p===3?y:p===4?g:b;return w(a,t,i,r)}var _=v(3),u=v(4),T=[function(){return 0},function(){return 0},function(w,h){return h[0]-w[0]},function(w,h,D){var S=(w[1]-D[1])*(h[0]-D[0]),M=(w[0]-D[0])*(h[1]-D[1]),L=S-M,R;if(S>0){if(M<=0)return L;R=S+M}else if(S<0){if(M>=0)return L;R=-(S+M)}else return L;var z=s*R;return L>=z||L<=-z?L:_(w,h,D)},function(w,h,D,S){var M=w[0]-S[0],L=h[0]-S[0],R=D[0]-S[0],z=w[1]-S[1],P=h[1]-S[1],I=D[1]-S[1],U=w[2]-S[2],O=h[2]-S[2],G=D[2]-S[2],$=L*I,tt=R*P,Z=R*z,X=M*I,J=M*P,st=L*z,at=U*($-tt)+O*(Z-X)+G*(J-st),lt=(Math.abs($)+Math.abs(tt))*Math.abs(U)+(Math.abs(Z)+Math.abs(X))*Math.abs(O)+(Math.abs(J)+Math.abs(st))*Math.abs(G),F=o*lt;return at>F||-at>F?at:u(w,h,D,S)}];function c(p){var w=T[p.length];return w||(w=T[p.length]=v(p.length)),w.apply(void 0,p)}function A(p,w,h,D,S,M,L){return function(z,P,I,U,O){switch(arguments.length){case 0:case 1:return 0;case 2:return D(z,P);case 3:return S(z,P,I);case 4:return M(z,P,I,U);case 5:return L(z,P,I,U,O)}for(var G=new Array(arguments.length),$=0;$<arguments.length;++$)G[$]=arguments[$];return p(G)}}function k(){for(;T.length<=n;)T.push(v(T.length));m.exports=A.apply(void 0,[c].concat(T));for(var p=0;p<=n;++p)m.exports[p]=T[p]}k()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],285:[function(l,m,x){var t=l("robust-sum"),a=l("robust-scale");m.exports=i;function i(r,n){if(r.length===1)return a(n,r[0]);if(n.length===1)return a(r,n[0]);if(r.length===0||n.length===0)return[0];var d=[0];if(r.length<n.length)for(var s=0;s<r.length;++s)d=t(d,a(n,r[s]));else for(var s=0;s<n.length;++s)d=t(d,a(r,n[s]));return d}},{"robust-scale":286,"robust-sum":289}],286:[function(l,m,x){var t=l("two-product"),a=l("two-sum");m.exports=i;function i(r,n){var d=r.length;if(d===1){var s=t(r[0],n);return s[0]?s:[s[1]]}var o=new Array(2*d),y=[.1,.1],g=[.1,.1],b=0;t(r[0],n,y),y[0]&&(o[b++]=y[0]);for(var v=1;v<d;++v){t(r[v],n,g);var _=y[1];a(_,g[0],y),y[0]&&(o[b++]=y[0]);var u=g[1],T=y[1],c=u+T,A=c-u,k=T-A;y[1]=c,k&&(o[b++]=k)}return y[1]&&(o[b++]=y[1]),b===0&&(o[b++]=0),o.length=b,o}},{"two-product":306,"two-sum":307}],287:[function(l,m,x){m.exports=i;var t=l("robust-orientation")[3];function a(r,n,d,s){for(var o=0;o<2;++o){var y=r[o],g=n[o],b=Math.min(y,g),v=Math.max(y,g),_=d[o],u=s[o],T=Math.min(_,u),c=Math.max(_,u);if(c<b||v<T)return!1}return!0}function i(r,n,d,s){var o=t(r,d,s),y=t(n,d,s);if(o>0&&y>0||o<0&&y<0)return!1;var g=t(d,r,n),b=t(s,r,n);return g>0&&b>0||g<0&&b<0?!1:o===0&&y===0&&g===0&&b===0?a(r,n,d,s):!0}},{"robust-orientation":284}],288:[function(l,m,x){m.exports=a;function t(i,r){var n=i+r,d=n-i,s=n-d,o=r-d,y=i-s,g=y+o;return g?[g,n]:[n]}function a(i,r){var n=i.length|0,d=r.length|0;if(n===1&&d===1)return t(i[0],-r[0]);var s=n+d,o=new Array(s),y=0,g=0,b=0,v=Math.abs,_=i[g],u=v(_),T=-r[b],c=v(T),A,k;u<c?(k=_,g+=1,g<n&&(_=i[g],u=v(_))):(k=T,b+=1,b<d&&(T=-r[b],c=v(T))),g<n&&u<c||b>=d?(A=_,g+=1,g<n&&(_=i[g],u=v(_))):(A=T,b+=1,b<d&&(T=-r[b],c=v(T)));for(var p=A+k,w=p-A,h=k-w,D=h,S=p,M,L,R,z,P;g<n&&b<d;)u<c?(A=_,g+=1,g<n&&(_=i[g],u=v(_))):(A=T,b+=1,b<d&&(T=-r[b],c=v(T))),k=D,p=A+k,w=p-A,h=k-w,h&&(o[y++]=h),M=S+p,L=M-S,R=M-L,z=p-L,P=S-R,D=P+z,S=M;for(;g<n;)A=_,k=D,p=A+k,w=p-A,h=k-w,h&&(o[y++]=h),M=S+p,L=M-S,R=M-L,z=p-L,P=S-R,D=P+z,S=M,g+=1,g<n&&(_=i[g]);for(;b<d;)A=T,k=D,p=A+k,w=p-A,h=k-w,h&&(o[y++]=h),M=S+p,L=M-S,R=M-L,z=p-L,P=S-R,D=P+z,S=M,b+=1,b<d&&(T=-r[b]);return D&&(o[y++]=D),S&&(o[y++]=S),y||(o[y++]=0),o.length=y,o}},{}],289:[function(l,m,x){m.exports=a;function t(i,r){var n=i+r,d=n-i,s=n-d,o=r-d,y=i-s,g=y+o;return g?[g,n]:[n]}function a(i,r){var n=i.length|0,d=r.length|0;if(n===1&&d===1)return t(i[0],r[0]);var s=n+d,o=new Array(s),y=0,g=0,b=0,v=Math.abs,_=i[g],u=v(_),T=r[b],c=v(T),A,k;u<c?(k=_,g+=1,g<n&&(_=i[g],u=v(_))):(k=T,b+=1,b<d&&(T=r[b],c=v(T))),g<n&&u<c||b>=d?(A=_,g+=1,g<n&&(_=i[g],u=v(_))):(A=T,b+=1,b<d&&(T=r[b],c=v(T)));for(var p=A+k,w=p-A,h=k-w,D=h,S=p,M,L,R,z,P;g<n&&b<d;)u<c?(A=_,g+=1,g<n&&(_=i[g],u=v(_))):(A=T,b+=1,b<d&&(T=r[b],c=v(T))),k=D,p=A+k,w=p-A,h=k-w,h&&(o[y++]=h),M=S+p,L=M-S,R=M-L,z=p-L,P=S-R,D=P+z,S=M;for(;g<n;)A=_,k=D,p=A+k,w=p-A,h=k-w,h&&(o[y++]=h),M=S+p,L=M-S,R=M-L,z=p-L,P=S-R,D=P+z,S=M,g+=1,g<n&&(_=i[g]);for(;b<d;)A=T,k=D,p=A+k,w=p-A,h=k-w,h&&(o[y++]=h),M=S+p,L=M-S,R=M-L,z=p-L,P=S-R,D=P+z,S=M,b+=1,b<d&&(T=r[b]);return D&&(o[y++]=D),S&&(o[y++]=S),y||(o[y++]=0),o.length=y,o}},{}],290:[function(l,m,x){m.exports=i;var t=l("boundary-cells"),a=l("reduce-simplicial-complex");function i(r){return a(t(r))}},{"boundary-cells":34,"reduce-simplicial-complex":276}],291:[function(l,m,x){m.exports=b;var t=l("ndarray"),a=l("typedarray-pool"),i=l("ndarray-sort"),r=l("./lib/codegen");function n(v){for(var _=v.length,u=0,T=0;T<_;++T)u=Math.max(u,v[T].length)|0;return u-1}function d(v,_){for(var u=v.length,T=a.mallocUint8(u),c=0;c<u;++c)T[c]=v[c]<_|0;return T}function s(v,_){for(var u=v.length,T=_*(_+1)/2*u|0,c=a.mallocUint32(T*2),A=0,k=0;k<u;++k)for(var p=v[k],_=p.length,w=0;w<_;++w)for(var h=0;h<w;++h){var D=p[h],S=p[w];c[A++]=Math.min(D,S)|0,c[A++]=Math.max(D,S)|0}var M=A/2|0;i(t(c,[M,2]));for(var L=2,k=2;k<A;k+=2)c[k-2]===c[k]&&c[k-1]===c[k+1]||(c[L++]=c[k],c[L++]=c[k+1]);return t(c,[L/2|0,2])}function o(v,_,u,T){for(var c=v.data,A=v.shape[0],k=a.mallocDouble(A),p=0,w=0;w<A;++w){var h=c[2*w],D=c[2*w+1];if(u[h]!==u[D]){var S=_[h],M=_[D];c[2*p]=h,c[2*p+1]=D,k[p++]=(M-T)/(M-S)}}return v.shape[0]=p,t(k,[p])}function y(v,_){var u=a.mallocInt32(_*2),T=v.shape[0],c=v.data;u[0]=0;for(var A=0,k=0;k<T;++k){var p=c[2*k];if(p!==A){for(u[2*A+1]=k;++A<p;)u[2*A]=k,u[2*A+1]=k;u[2*A]=k}}for(u[2*A+1]=T;++A<_;)u[2*A]=u[2*A+1]=T;return u}function g(v){for(var _=v.shape[0]|0,u=v.data,T=new Array(_),c=0;c<_;++c)T[c]=[u[2*c],u[2*c+1]];return T}function b(v,_,u,T){u=u||0,typeof T>"u"&&(T=n(v));var c=v.length;if(c===0||T<1)return{cells:[],vertexIds:[],vertexWeights:[]};var A=d(_,+u),k=s(v,T),p=o(k,_,A,+u),w=y(k,_.length|0),h=r(T)(v,k.data,w,A),D=g(k),S=[].slice.call(p.data,0,p.shape[0]);return a.free(A),a.free(k.data),a.free(p.data),a.free(w),{cells:h,vertexIds:D,vertexWeights:S}}},{"./lib/codegen":292,ndarray:259,"ndarray-sort":258,"typedarray-pool":308}],292:[function(l,m,x){m.exports=a;var t=[function(){function r(n,d,s,o){for(var y=n.length,g=[],b=0;b<y;++b){var v=n[b];v.length}return g}return r},function(){function r(d,s,o,y){for(var g=Math.min(o,y)|0,b=Math.max(o,y)|0,v=d[2*g],_=d[2*g+1];v<_;){var u=v+_>>1,T=s[2*u+1];if(T===b)return u;b<T?_=u:v=u+1}return v}function n(d,s,o,y){for(var g=d.length,b=[],v=0;v<g;++v){var _=d[v],u=_.length;if(u===2){var T=(y[_[0]]<<0)+(y[_[1]]<<1);if(T===0||T===3)continue;switch(T){case 0:break;case 1:b.push([r(o,s,_[0],_[1])]);break;case 2:b.push([r(o,s,_[1],_[0])]);break}}}return b}return n},function(){function r(d,s,o,y){for(var g=Math.min(o,y)|0,b=Math.max(o,y)|0,v=d[2*g],_=d[2*g+1];v<_;){var u=v+_>>1,T=s[2*u+1];if(T===b)return u;b<T?_=u:v=u+1}return v}function n(d,s,o,y){for(var g=d.length,b=[],v=0;v<g;++v){var _=d[v],u=_.length;if(u===3){var T=(y[_[0]]<<0)+(y[_[1]]<<1)+(y[_[2]]<<2);if(T===0||T===7)continue;switch(T){case 0:break;case 1:b.push([r(o,s,_[0],_[2]),r(o,s,_[0],_[1])]);break;case 2:b.push([r(o,s,_[1],_[0]),r(o,s,_[1],_[2])]);break;case 3:b.push([r(o,s,_[0],_[2]),r(o,s,_[1],_[2])]);break;case 4:b.push([r(o,s,_[2],_[1]),r(o,s,_[2],_[0])]);break;case 5:b.push([r(o,s,_[2],_[1]),r(o,s,_[0],_[1])]);break;case 6:b.push([r(o,s,_[1],_[0]),r(o,s,_[2],_[0])]);break}}else if(u===2){var T=(y[_[0]]<<0)+(y[_[1]]<<1);if(T===0||T===3)continue;switch(T){case 0:break;case 1:b.push([r(o,s,_[0],_[1])]);break;case 2:b.push([r(o,s,_[1],_[0])]);break}}}return b}return n},function(){function r(d,s,o,y){for(var g=Math.min(o,y)|0,b=Math.max(o,y)|0,v=d[2*g],_=d[2*g+1];v<_;){var u=v+_>>1,T=s[2*u+1];if(T===b)return u;b<T?_=u:v=u+1}return v}function n(d,s,o,y){for(var g=d.length,b=[],v=0;v<g;++v){var _=d[v],u=_.length;if(u===4){var T=(y[_[0]]<<0)+(y[_[1]]<<1)+(y[_[2]]<<2)+(y[_[3]]<<3);if(T===0||T===15)continue;switch(T){case 0:break;case 1:b.push([r(o,s,_[0],_[1]),r(o,s,_[0],_[2]),r(o,s,_[0],_[3])]);break;case 2:b.push([r(o,s,_[1],_[2]),r(o,s,_[1],_[0]),r(o,s,_[1],_[3])]);break;case 3:b.push([r(o,s,_[1],_[2]),r(o,s,_[0],_[2]),r(o,s,_[0],_[3])],[r(o,s,_[1],_[3]),r(o,s,_[1],_[2]),r(o,s,_[0],_[3])]);break;case 4:b.push([r(o,s,_[2],_[0]),r(o,s,_[2],_[1]),r(o,s,_[2],_[3])]);break;case 5:b.push([r(o,s,_[0],_[1]),r(o,s,_[2],_[1]),r(o,s,_[0],_[3])],[r(o,s,_[2],_[1]),r(o,s,_[2],_[3]),r(o,s,_[0],_[3])]);break;case 6:b.push([r(o,s,_[2],_[0]),r(o,s,_[1],_[0]),r(o,s,_[1],_[3])],[r(o,s,_[2],_[3]),r(o,s,_[2],_[0]),r(o,s,_[1],_[3])]);break;case 7:b.push([r(o,s,_[0],_[3]),r(o,s,_[1],_[3]),r(o,s,_[2],_[3])]);break;case 8:b.push([r(o,s,_[3],_[1]),r(o,s,_[3],_[0]),r(o,s,_[3],_[2])]);break;case 9:b.push([r(o,s,_[3],_[1]),r(o,s,_[0],_[1]),r(o,s,_[0],_[2])],[r(o,s,_[3],_[2]),r(o,s,_[3],_[1]),r(o,s,_[0],_[2])]);break;case 10:b.push([r(o,s,_[1],_[0]),r(o,s,_[3],_[0]),r(o,s,_[1],_[2])],[r(o,s,_[3],_[0]),r(o,s,_[3],_[2]),r(o,s,_[1],_[2])]);break;case 11:b.push([r(o,s,_[1],_[2]),r(o,s,_[0],_[2]),r(o,s,_[3],_[2])]);break;case 12:b.push([r(o,s,_[3],_[0]),r(o,s,_[2],_[0]),r(o,s,_[2],_[1])],[r(o,s,_[3],_[1]),r(o,s,_[3],_[0]),r(o,s,_[2],_[1])]);break;case 13:b.push([r(o,s,_[0],_[1]),r(o,s,_[2],_[1]),r(o,s,_[3],_[1])]);break;case 14:b.push([r(o,s,_[2],_[0]),r(o,s,_[1],_[0]),r(o,s,_[3],_[0])]);break}}else if(u===3){var T=(y[_[0]]<<0)+(y[_[1]]<<1)+(y[_[2]]<<2);if(T===0||T===7)continue;switch(T){case 0:break;case 1:b.push([r(o,s,_[0],_[2]),r(o,s,_[0],_[1])]);break;case 2:b.push([r(o,s,_[1],_[0]),r(o,s,_[1],_[2])]);break;case 3:b.push([r(o,s,_[0],_[2]),r(o,s,_[1],_[2])]);break;case 4:b.push([r(o,s,_[2],_[1]),r(o,s,_[2],_[0])]);break;case 5:b.push([r(o,s,_[2],_[1]),r(o,s,_[0],_[1])]);break;case 6:b.push([r(o,s,_[1],_[0]),r(o,s,_[2],_[0])]);break}}else if(u===2){var T=(y[_[0]]<<0)+(y[_[1]]<<1);if(T===0||T===3)continue;switch(T){case 0:break;case 1:b.push([r(o,s,_[0],_[1])]);break;case 2:b.push([r(o,s,_[1],_[0])]);break}}}return b}return n}];function a(i){return t[i]()}},{}],293:[function(l,m,x){var t=l("bit-twiddle"),a=l("union-find");function i(p){for(var w=0,h=Math.max,D=0,S=p.length;D<S;++D)w=h(w,p[D].length);return w-1}x.dimension=i;function r(p){for(var w=-1,h=Math.max,D=0,S=p.length;D<S;++D)for(var M=p[D],L=0,R=M.length;L<R;++L)w=h(w,M[L]);return w+1}x.countVertices=r;function n(p){for(var w=new Array(p.length),h=0,D=p.length;h<D;++h)w[h]=p[h].slice(0);return w}x.cloneCells=n;function d(p,w){var h=p.length,D=p.length-w.length,S=Math.min;if(D)return D;switch(h){case 0:return 0;case 1:return p[0]-w[0];case 2:var P=p[0]+p[1]-w[0]-w[1];return P||S(p[0],p[1])-S(w[0],w[1]);case 3:var M=p[0]+p[1],L=w[0]+w[1];if(P=M+p[2]-(L+w[2]),P)return P;var R=S(p[0],p[1]),z=S(w[0],w[1]),P=S(R,p[2])-S(z,w[2]);return P||S(R+p[2],M)-S(z+w[2],L);default:var I=p.slice(0);I.sort();var U=w.slice(0);U.sort();for(var O=0;O<h;++O)if(D=I[O]-U[O],D)return D;return 0}}x.compareCells=d;function s(p,w){return d(p[0],w[0])}function o(p,w){if(w){for(var h=p.length,D=new Array(h),S=0;S<h;++S)D[S]=[p[S],w[S]];D.sort(s);for(var S=0;S<h;++S)p[S]=D[S][0],w[S]=D[S][1];return p}else return p.sort(d),p}x.normalize=o;function y(p){if(p.length===0)return[];for(var w=1,h=p.length,D=1;D<h;++D){var S=p[D];if(d(S,p[D-1])){if(D===w){w++;continue}p[w++]=S}}return p.length=w,p}x.unique=y;function g(p,w){for(var h=0,D=p.length-1,S=-1;h<=D;){var M=h+D>>1,L=d(p[M],w);L<=0?(L===0&&(S=M),h=M+1):L>0&&(D=M-1)}return S}x.findCell=g;function b(p,w){for(var h=new Array(p.length),D=0,S=h.length;D<S;++D)h[D]=[];for(var M=[],D=0,L=w.length;D<L;++D)for(var R=w[D],z=R.length,P=1,I=1<<z;P<I;++P){M.length=t.popCount(P);for(var U=0,O=0;O<z;++O)P&1<<O&&(M[U++]=R[O]);var G=g(p,M);if(!(G<0))for(;h[G++].push(D),!(G>=p.length||d(p[G],M)!==0););}return h}x.incidence=b;function v(p,w){if(!w)return b(y(u(p,0)),p);for(var h=new Array(w),D=0;D<w;++D)h[D]=[];for(var D=0,S=p.length;D<S;++D)for(var M=p[D],L=0,R=M.length;L<R;++L)h[M[L]].push(D);return h}x.dual=v;function _(p){for(var w=[],h=0,D=p.length;h<D;++h)for(var S=p[h],M=S.length|0,L=1,R=1<<M;L<R;++L){for(var z=[],P=0;P<M;++P)L>>>P&1&&z.push(S[P]);w.push(z)}return o(w)}x.explode=_;function u(p,w){if(w<0)return[];for(var h=[],D=(1<<w+1)-1,S=0;S<p.length;++S)for(var M=p[S],L=D;L<1<<M.length;L=t.nextCombination(L)){for(var R=new Array(w+1),z=0,P=0;P<M.length;++P)L&1<<P&&(R[z++]=M[P]);h.push(R)}return o(h)}x.skeleton=u;function T(p){for(var w=[],h=0,D=p.length;h<D;++h)for(var S=p[h],M=0,L=S.length;M<L;++M){for(var R=new Array(S.length-1),z=0,P=0;z<L;++z)z!==M&&(R[P++]=S[z]);w.push(R)}return o(w)}x.boundary=T;function c(p,w){for(var h=new a(w),D=0;D<p.length;++D)for(var S=p[D],M=0;M<S.length;++M)for(var L=M+1;L<S.length;++L)h.link(S[M],S[L]);for(var R=[],z=h.ranks,D=0;D<z.length;++D)z[D]=-1;for(var D=0;D<p.length;++D){var P=h.find(p[D][0]);z[P]<0?(z[P]=R.length,R.push([p[D].slice(0)])):R[z[P]].push(p[D].slice(0))}return R}function A(p){for(var w=y(o(u(p,0))),h=new a(w.length),D=0;D<p.length;++D)for(var S=p[D],M=0;M<S.length;++M)for(var L=g(w,[S[M]]),R=M+1;R<S.length;++R)h.link(L,g(w,[S[R]]));for(var z=[],P=h.ranks,D=0;D<P.length;++D)P[D]=-1;for(var D=0;D<p.length;++D){var I=h.find(g(w,[p[D][0]]));P[I]<0?(P[I]=z.length,z.push([p[D].slice(0)])):z[P[I]].push(p[D].slice(0))}return z}function k(p,w){return w?c(p,w):A(p)}x.connectedComponents=k},{"bit-twiddle":32,"union-find":309}],294:[function(l,m,x){arguments[4][32][0].apply(x,arguments)},{dup:32}],295:[function(l,m,x){arguments[4][293][0].apply(x,arguments)},{"bit-twiddle":294,dup:293,"union-find":296}],296:[function(l,m,x){m.exports=t;function t(a){this.roots=new Array(a),this.ranks=new Array(a);for(var i=0;i<a;++i)this.roots[i]=i,this.ranks[i]=0}t.prototype.length=function(){return this.roots.length},t.prototype.makeSet=function(){var a=this.roots.length;return this.roots.push(a),this.ranks.push(0),a},t.prototype.find=function(a){for(var i=this.roots;i[a]!==a;){var r=i[a];i[a]=i[r],a=r}return a},t.prototype.link=function(a,i){var r=this.find(a),n=this.find(i);if(r!==n){var d=this.ranks,s=this.roots,o=d[r],y=d[n];o<y?s[r]=n:y<o?s[n]=r:(s[n]=r,++d[r])}}},{}],297:[function(l,m,x){m.exports=r;var t=l("robust-orientation"),a=l("simplicial-complex");function i(n,d,s){var o=Math.abs(t(n,d,s)),y=Math.sqrt(Math.pow(d[0]-s[0],2)+Math.pow(d[1]-s[1],2));return o/y}function r(n,d,s){for(var o=d.length,y=n.length,g=new Array(o),b=new Array(o),v=new Array(o),_=new Array(o),u=0;u<o;++u)g[u]=b[u]=-1,v[u]=1/0,_[u]=!1;for(var u=0;u<y;++u){var T=n[u];if(T.length!==2)throw new Error("Input must be a graph");var c=T[1],A=T[0];b[A]!==-1?b[A]=-2:b[A]=c,g[c]!==-1?g[c]=-2:g[c]=A}function k(Z){if(_[Z])return 1/0;var X=g[Z],J=b[Z];return X<0||J<0?1/0:i(d[Z],d[X],d[J])}function p(Z,X){var J=z[Z],st=z[X];z[Z]=st,z[X]=J,P[J]=X,P[st]=Z}function w(Z){return v[z[Z]]}function h(Z){return Z&1?Z-1>>1:(Z>>1)-1}function D(Z){for(var X=w(Z);;){var J=X,st=2*Z+1,at=2*(Z+1),lt=Z;if(st<U){var F=w(st);F<J&&(lt=st,J=F)}if(at<U){var H=w(at);H<J&&(lt=at)}if(lt===Z)return Z;p(Z,lt),Z=lt}}function S(Z){for(var X=w(Z);Z>0;){var J=h(Z);if(J>=0){var st=w(J);if(X<st){p(Z,J),Z=J;continue}}return Z}}function M(){if(U>0){var Z=z[0];return p(0,U-1),U-=1,D(0),Z}return-1}function L(Z,X){var J=z[Z];return v[J]===X?Z:(v[J]=-1/0,S(Z),M(),v[J]=X,U+=1,S(U-1))}function R(Z){if(!_[Z]){_[Z]=!0;var X=g[Z],J=b[Z];g[J]>=0&&(g[J]=X),b[X]>=0&&(b[X]=J),P[X]>=0&&L(P[X],k(X)),P[J]>=0&&L(P[J],k(J))}}for(var z=[],P=new Array(o),u=0;u<o;++u){var I=v[u]=k(u);I<1/0?(P[u]=z.length,z.push(u)):P[u]=-1}for(var U=z.length,u=U>>1;u>=0;--u)D(u);for(;;){var O=M();if(O<0||v[O]>s)break;R(O)}for(var G=[],u=0;u<o;++u)_[u]||(P[u]=G.length,G.push(d[u].slice()));G.length;function $(Z,X){if(Z[X]<0)return X;var J=X,st=X;do{var at=Z[st];if(!_[st]||at<0||at===st||(st=at,at=Z[st],!_[st]||at<0||at===st))break;st=at,J=Z[J]}while(J!==st);for(var lt=X;lt!==st;lt=Z[lt])Z[lt]=st;return st}var tt=[];return n.forEach(function(Z){var X=$(g,Z[0]),J=$(b,Z[1]);if(X>=0&&J>=0&&X!==J){var st=P[X],at=P[J];st!==at&&tt.push([st,at])}}),a.unique(a.normalize(tt)),{positions:G,edges:tt}}},{"robust-orientation":284,"simplicial-complex":295}],298:[function(l,m,x){m.exports=i;var t=l("robust-orientation");function a(r,n){var d,s;if(n[0][0]<n[1][0])d=n[0],s=n[1];else if(n[0][0]>n[1][0])d=n[1],s=n[0];else{var o=Math.min(r[0][1],r[1][1]),y=Math.max(r[0][1],r[1][1]),g=Math.min(n[0][1],n[1][1]),b=Math.max(n[0][1],n[1][1]);return y<g?y-g:o>b?o-b:y-b}var v,_;r[0][1]<r[1][1]?(v=r[0],_=r[1]):(v=r[1],_=r[0]);var u=t(s,d,v);return u||(u=t(s,d,_),u)?u:_-s}function i(r,n){var d,s;if(n[0][0]<n[1][0])d=n[0],s=n[1];else if(n[0][0]>n[1][0])d=n[1],s=n[0];else return a(n,r);var o,y;if(r[0][0]<r[1][0])o=r[0],y=r[1];else if(r[0][0]>r[1][0])o=r[1],y=r[0];else return-a(r,n);var g=t(d,s,y),b=t(d,s,o);if(g<0){if(b<=0)return g}else if(g>0){if(b>=0)return g}else if(b)return b;if(g=t(y,o,s),b=t(y,o,d),g<0){if(b<=0)return g}else if(g>0){if(b>=0)return g}else if(b)return b;return s[0]-y[0]}},{"robust-orientation":284}],299:[function(l,m,x){m.exports=b;var t=l("binary-search-bounds"),a=l("functional-red-black-tree"),i=l("robust-orientation"),r=l("./lib/order-segments");function n(v,_,u){this.slabs=v,this.coordinates=_,this.horizontal=u}var d=n.prototype;function s(v,_){return v.y-_}function o(v,_){for(var u=null;v;){var T=v.key,c,A;T[0][0]<T[1][0]?(c=T[0],A=T[1]):(c=T[1],A=T[0]);var k=i(c,A,_);if(k<0)v=v.left;else if(k>0)if(_[0]!==T[1][0])u=v,v=v.right;else{var p=o(v.right,_);if(p)return p;v=v.left}else{if(_[0]!==T[1][0])return v;var p=o(v.right,_);if(p)return p;v=v.left}}return u}d.castUp=function(v){var _=t.le(this.coordinates,v[0]);if(_<0)return-1;this.slabs[_];var u=o(this.slabs[_],v),T=-1;if(u&&(T=u.value),this.coordinates[_]===v[0]){var c=null;if(u&&(c=u.key),_>0){var A=o(this.slabs[_-1],v);A&&(c?r(A.key,c)>0&&(c=A.key,T=A.value):(T=A.value,c=A.key))}var k=this.horizontal[_];if(k.length>0){var p=t.ge(k,v[1],s);if(p<k.length){var w=k[p];if(v[1]===w.y){if(w.closed)return w.index;for(;p<k.length-1&&k[p+1].y===v[1];)if(p=p+1,w=k[p],w.closed)return w.index;if(w.y===v[1]&&!w.start){if(p=p+1,p>=k.length)return T;w=k[p]}}if(w.start)if(c){var h=i(c[0],c[1],[v[0],w.y]);c[0][0]>c[1][0]&&(h=-h),h>0&&(T=w.index)}else T=w.index;else w.y!==v[1]&&(T=w.index)}}}return T};function y(v,_,u,T){this.y=v,this.index=_,this.start=u,this.closed=T}function g(v,_,u,T){this.x=v,this.segment=_,this.create=u,this.index=T}function b(v){for(var _=v.length,u=2*_,T=new Array(u),c=0;c<_;++c){var A=v[c],k=A[0][0]<A[1][0];T[2*c]=new g(A[0][0],A,k,c),T[2*c+1]=new g(A[1][0],A,!k,c)}T.sort(function(R,z){var P=R.x-z.x;return P||(P=R.create-z.create,P)?P:Math.min(R.segment[0][1],R.segment[1][1])-Math.min(z.segment[0][1],z.segment[1][1])});for(var p=a(r),w=[],h=[],D=[],c=0;c<u;){for(var S=T[c].x,M=[];c<u;){var L=T[c];if(L.x!==S)break;c+=1,L.segment[0][0]===L.x&&L.segment[1][0]===L.x?L.create&&(L.segment[0][1]<L.segment[1][1]?(M.push(new y(L.segment[0][1],L.index,!0,!0)),M.push(new y(L.segment[1][1],L.index,!1,!1))):(M.push(new y(L.segment[1][1],L.index,!0,!1)),M.push(new y(L.segment[0][1],L.index,!1,!0)))):L.create?p=p.insert(L.segment,L.index):p=p.remove(L.segment)}w.push(p.root),h.push(S),D.push(M)}return new n(w,h,D)}},{"./lib/order-segments":298,"binary-search-bounds":31,"functional-red-black-tree":69,"robust-orientation":284}],300:[function(l,m,x){var t=l("robust-dot-product"),a=l("robust-sum");m.exports=n,m.exports.positive=d,m.exports.negative=s;function i(o,y){var g=a(t(o,y),[y[y.length-1]]);return g[g.length-1]}function r(o,y,g,b){var v=b-y,_=-y/v;_<0?_=0:_>1&&(_=1);for(var u=1-_,T=o.length,c=new Array(T),A=0;A<T;++A)c[A]=_*o[A]+u*g[A];return c}function n(o,y){for(var g=[],b=[],v=i(o[o.length-1],y),_=o[o.length-1],u=o[0],T=0;T<o.length;++T,_=u){u=o[T];var c=i(u,y);if(v<0&&c>0||v>0&&c<0){var A=r(_,c,u,v);g.push(A),b.push(A.slice())}c<0?b.push(u.slice()):c>0?g.push(u.slice()):(g.push(u.slice()),b.push(u.slice())),v=c}return{positive:g,negative:b}}function d(o,y){for(var g=[],b=i(o[o.length-1],y),v=o[o.length-1],_=o[0],u=0;u<o.length;++u,v=_){_=o[u];var T=i(_,y);(b<0&&T>0||b>0&&T<0)&&g.push(r(v,T,_,b)),T>=0&&g.push(_.slice()),b=T}return g}function s(o,y){for(var g=[],b=i(o[o.length-1],y),v=o[o.length-1],_=o[0],u=0;u<o.length;++u,v=_){_=o[u];var T=i(_,y);(b<0&&T>0||b>0&&T<0)&&g.push(r(v,T,_,b)),T<=0&&g.push(_.slice()),b=T}return g}},{"robust-dot-product":281,"robust-sum":289}],301:[function(l,m,x){(function(){var t={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function a(s){return r(d(s),arguments)}function i(s,o){return a.apply(null,[s].concat(o||[]))}function r(s,o){var y=1,g=s.length,b,v="",_,u,T,c,A,k,p,w;for(_=0;_<g;_++)if(typeof s[_]=="string")v+=s[_];else if(typeof s[_]=="object"){if(T=s[_],T.keys)for(b=o[y],u=0;u<T.keys.length;u++){if(b==null)throw new Error(a('[sprintf] Cannot access property "%s" of undefined value "%s"',T.keys[u],T.keys[u-1]));b=b[T.keys[u]]}else T.param_no?b=o[T.param_no]:b=o[y++];if(t.not_type.test(T.type)&&t.not_primitive.test(T.type)&&b instanceof Function&&(b=b()),t.numeric_arg.test(T.type)&&typeof b!="number"&&isNaN(b))throw new TypeError(a("[sprintf] expecting number but found %T",b));switch(t.number.test(T.type)&&(p=b>=0),T.type){case"b":b=parseInt(b,10).toString(2);break;case"c":b=String.fromCharCode(parseInt(b,10));break;case"d":case"i":b=parseInt(b,10);break;case"j":b=JSON.stringify(b,null,T.width?parseInt(T.width):0);break;case"e":b=T.precision?parseFloat(b).toExponential(T.precision):parseFloat(b).toExponential();break;case"f":b=T.precision?parseFloat(b).toFixed(T.precision):parseFloat(b);break;case"g":b=T.precision?String(Number(b.toPrecision(T.precision))):parseFloat(b);break;case"o":b=(parseInt(b,10)>>>0).toString(8);break;case"s":b=String(b),b=T.precision?b.substring(0,T.precision):b;break;case"t":b=String(!!b),b=T.precision?b.substring(0,T.precision):b;break;case"T":b=Object.prototype.toString.call(b).slice(8,-1).toLowerCase(),b=T.precision?b.substring(0,T.precision):b;break;case"u":b=parseInt(b,10)>>>0;break;case"v":b=b.valueOf(),b=T.precision?b.substring(0,T.precision):b;break;case"x":b=(parseInt(b,10)>>>0).toString(16);break;case"X":b=(parseInt(b,10)>>>0).toString(16).toUpperCase();break}t.json.test(T.type)?v+=b:(t.number.test(T.type)&&(!p||T.sign)?(w=p?"+":"-",b=b.toString().replace(t.sign,"")):w="",A=T.pad_char?T.pad_char==="0"?"0":T.pad_char.charAt(1):" ",k=T.width-(w+b).length,c=T.width&&k>0?A.repeat(k):"",v+=T.align?w+b+c:A==="0"?w+c+b:c+w+b)}return v}var n=Object.create(null);function d(s){if(n[s])return n[s];for(var o=s,y,g=[],b=0;o;){if((y=t.text.exec(o))!==null)g.push(y[0]);else if((y=t.modulo.exec(o))!==null)g.push("%");else if((y=t.placeholder.exec(o))!==null){if(y[2]){b|=1;var v=[],_=y[2],u=[];if((u=t.key.exec(_))!==null)for(v.push(u[1]);(_=_.substring(u[0].length))!=="";)if((u=t.key_access.exec(_))!==null)v.push(u[1]);else if((u=t.index_access.exec(_))!==null)v.push(u[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");y[2]=v}else b|=2;if(b===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");g.push({placeholder:y[0],param_no:y[1],keys:y[2],sign:y[3],pad_char:y[4],align:y[5],width:y[6],precision:y[7],type:y[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");o=o.substring(y[0].length)}return n[s]=g}typeof x<"u"&&(x.sprintf=a,x.vsprintf=i),typeof window<"u"&&(window.sprintf=a,window.vsprintf=i)})()},{}],302:[function(l,m,x){m.exports=s;var t=l("ndarray-extract-contour"),a=l("zero-crossings"),i={"2d":function(o,y,g){var b=o({order:y,scalarArguments:3,getters:g==="generic"?[0]:void 0,phase:function(_,u,T,c){return _>c|0},vertex:function(_,u,T,c,A,k,p,w,h,D,S,M,L){var R=(p<<0)+(w<<1)+(h<<2)+(D<<3)|0;if(!(R===0||R===15))switch(R){case 0:S.push([_-.5,u-.5]);break;case 1:S.push([_-.25-.25*(c+T-2*L)/(T-c),u-.25-.25*(A+T-2*L)/(T-A)]);break;case 2:S.push([_-.75-.25*(-c-T+2*L)/(c-T),u-.25-.25*(k+c-2*L)/(c-k)]);break;case 3:S.push([_-.5,u-.5-.5*(A+T+k+c-4*L)/(T-A+c-k)]);break;case 4:S.push([_-.25-.25*(k+A-2*L)/(A-k),u-.75-.25*(-A-T+2*L)/(A-T)]);break;case 5:S.push([_-.5-.5*(c+T+k+A-4*L)/(T-c+A-k),u-.5]);break;case 6:S.push([_-.5-.25*(-c-T+k+A)/(c-T+A-k),u-.5-.25*(-A-T+k+c)/(A-T+c-k)]);break;case 7:S.push([_-.75-.25*(k+A-2*L)/(A-k),u-.75-.25*(k+c-2*L)/(c-k)]);break;case 8:S.push([_-.75-.25*(-k-A+2*L)/(k-A),u-.75-.25*(-k-c+2*L)/(k-c)]);break;case 9:S.push([_-.5-.25*(c+T+-k-A)/(T-c+k-A),u-.5-.25*(A+T+-k-c)/(T-A+k-c)]);break;case 10:S.push([_-.5-.5*(-c-T+-k-A+4*L)/(c-T+k-A),u-.5]);break;case 11:S.push([_-.25-.25*(-k-A+2*L)/(k-A),u-.75-.25*(A+T-2*L)/(T-A)]);break;case 12:S.push([_-.5,u-.5-.5*(-A-T+-k-c+4*L)/(A-T+k-c)]);break;case 13:S.push([_-.75-.25*(c+T-2*L)/(T-c),u-.25-.25*(-k-c+2*L)/(k-c)]);break;case 14:S.push([_-.25-.25*(-c-T+2*L)/(c-T),u-.25-.25*(-A-T+2*L)/(A-T)]);break;case 15:S.push([_-.5,u-.5]);break}},cell:function(_,u,T,c,A,k,p,w,h){A?w.push([_,u]):w.push([u,_])}});return function(v,_){var u=[],T=[];return b(v,u,T,_),{positions:u,cells:T}}}};function r(o,y){var g=o.length+"d",b=i[g];if(b)return b(t,o,y)}function n(o,y){for(var g=a(o,y),b=g.length,v=new Array(b),_=new Array(b),u=0;u<b;++u)v[u]=[g[u]],_[u]=[u];return{positions:v,cells:_}}var d={};function s(o,v){if(o.dimension<=0)return{positions:[],cells:[]};if(o.dimension===1)return n(o,v);var g=o.order.join()+"-"+o.dtype,b=d[g],v=+v||0;return b||(b=d[g]=r(o.order,o.dtype)),b(o,v)}},{"ndarray-extract-contour":251,"zero-crossings":318}],303:[function(l,m,x){(function(t){(function(){m.exports=d;var a=l("vectorize-text"),i=window||t.global||{},r=i.__TEXT_CACHE||{};i.__TEXT_CACHE={};function n(s){for(var o=s.cells,y=s.positions,g=new Float32Array(o.length*6),b=0,v=0,_=0;_<o.length;++_)for(var u=o[_],T=0;T<3;++T){var c=y[u[T]];g[b++]=c[0],g[b++]=c[1]+1.4,v=Math.max(c[0],v)}return{data:g,shape:v}}function d(s,o,g){var g=g||{},b=r[s];b||(b=r[s]={" ":{data:new Float32Array(0),shape:.2}});var v=b[o];if(!v)if(o.length<=1||!/\d/.test(o))v=b[o]=n(a(o,{triangles:!0,font:s,textAlign:g.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var _=o.split(/(\d|\s)/),u=new Array(_.length),T=0,c=0,A=0;A<_.length;++A)u[A]=d(s,_[A]),T+=u[A].data.length,c+=u[A].shape,A>0&&(c+=.02);for(var k=new Float32Array(T),p=0,w=-.5*c,A=0;A<u.length;++A){for(var h=u[A].data,D=0;D<h.length;D+=2)k[p++]=h[D]+w,k[p++]=h[D+1];w+=u[A].shape+.02}v=b[o]={data:k,shape:c}}return v}}).call(this)}).call(this,l("_process"))},{_process:5,"vectorize-text":311}],304:[function(l,m,x){var t=l("parse-unit");m.exports=n;var a=96;function i(d,s){var o=t(getComputedStyle(d).getPropertyValue(s));return o[0]*n(o[1],d)}function r(d,s){var o=document.createElement("div");o.style["font-size"]="128"+d,s.appendChild(o);var y=i(o,"font-size")/128;return s.removeChild(o),y}function n(d,s){switch(s=s||document.body,d=(d||"px").trim().toLowerCase(),(s===window||s===document)&&(s=document.body),d){case"%":return s.clientHeight/100;case"ch":case"ex":return r(d,s);case"em":return i(s,"font-size");case"rem":return i(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return a;case"cm":return a/2.54;case"mm":return a/25.4;case"pt":return a/72;case"pc":return a/6}return 1}},{"parse-unit":265}],305:[function(l,m,x){m.exports=_;var t=l("filtered-vector"),a=l("gl-mat4/invert"),i=l("gl-mat4/rotate"),r=l("gl-vec3/cross"),n=l("gl-vec3/normalize"),d=l("gl-vec3/dot");function s(u,T,c){return Math.sqrt(Math.pow(u,2)+Math.pow(T,2)+Math.pow(c,2))}function o(u){return Math.min(1,Math.max(-1,u))}function y(u){var T=Math.abs(u[0]),c=Math.abs(u[1]),A=Math.abs(u[2]),k=[0,0,0];T>Math.max(c,A)?k[2]=1:c>Math.max(T,A)?k[0]=1:k[1]=1;for(var p=0,w=0,h=0;h<3;++h)p+=u[h]*u[h],w+=k[h]*u[h];for(var h=0;h<3;++h)k[h]-=w/p*u[h];return n(k,k),k}function g(u,T,c,A,k,p,w,h){this.center=t(c),this.up=t(A),this.right=t(k),this.radius=t([p]),this.angle=t([w,h]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(u,T),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var D=0;D<16;++D)this.computedMatrix[D]=.5;this.recalcMatrix(0)}var b=g.prototype;b.setDistanceLimits=function(u,T){u>0?u=Math.log(u):u=-1/0,T>0?T=Math.log(T):T=1/0,T=Math.max(T,u),this.radius.bounds[0][0]=u,this.radius.bounds[1][0]=T},b.getDistanceLimits=function(u){var T=this.radius.bounds[0];return u?(u[0]=Math.exp(T[0][0]),u[1]=Math.exp(T[1][0]),u):[Math.exp(T[0][0]),Math.exp(T[1][0])]},b.recalcMatrix=function(u){this.center.curve(u),this.up.curve(u),this.right.curve(u),this.radius.curve(u),this.angle.curve(u);for(var T=this.computedUp,c=this.computedRight,A=0,k=0,p=0;p<3;++p)k+=T[p]*c[p],A+=T[p]*T[p];for(var w=Math.sqrt(A),h=0,p=0;p<3;++p)c[p]-=T[p]*k/A,h+=c[p]*c[p],T[p]/=w;for(var D=Math.sqrt(h),p=0;p<3;++p)c[p]/=D;var S=this.computedToward;r(S,T,c),n(S,S);for(var M=Math.exp(this.computedRadius[0]),L=this.computedAngle[0],R=this.computedAngle[1],z=Math.cos(L),P=Math.sin(L),I=Math.cos(R),U=Math.sin(R),O=this.computedCenter,G=z*I,$=P*I,tt=U,Z=-z*U,X=-P*U,J=I,st=this.computedEye,at=this.computedMatrix,p=0;p<3;++p){var lt=G*c[p]+$*S[p]+tt*T[p];at[4*p+1]=Z*c[p]+X*S[p]+J*T[p],at[4*p+2]=lt,at[4*p+3]=0}var F=at[1],H=at[5],et=at[9],q=at[2],W=at[6],K=at[10],nt=H*K-et*W,it=et*q-F*K,ot=F*W-H*q,ct=s(nt,it,ot);nt/=ct,it/=ct,ot/=ct,at[0]=nt,at[4]=it,at[8]=ot;for(var p=0;p<3;++p)st[p]=O[p]+at[2+4*p]*M;for(var p=0;p<3;++p){for(var h=0,bt=0;bt<3;++bt)h+=at[p+4*bt]*st[bt];at[12+p]=-h}at[15]=1},b.getMatrix=function(u,T){this.recalcMatrix(u);var c=this.computedMatrix;if(T){for(var A=0;A<16;++A)T[A]=c[A];return T}return c};var v=[0,0,0];b.rotate=function(u,T,c,A){if(this.angle.move(u,T,c),A){this.recalcMatrix(u);var k=this.computedMatrix;v[0]=k[2],v[1]=k[6],v[2]=k[10];for(var p=this.computedUp,w=this.computedRight,h=this.computedToward,D=0;D<3;++D)k[4*D]=p[D],k[4*D+1]=w[D],k[4*D+2]=h[D];i(k,k,A,v);for(var D=0;D<3;++D)p[D]=k[4*D],w[D]=k[4*D+1];this.up.set(u,p[0],p[1],p[2]),this.right.set(u,w[0],w[1],w[2])}},b.pan=function(u,T,c,A){T=T||0,c=c||0,A=A||0,this.recalcMatrix(u);var k=this.computedMatrix;Math.exp(this.computedRadius[0]);var p=k[1],w=k[5],h=k[9],D=s(p,w,h);p/=D,w/=D,h/=D;var S=k[0],M=k[4],L=k[8],R=S*p+M*w+L*h;S-=p*R,M-=w*R,L-=h*R;var z=s(S,M,L);S/=z,M/=z,L/=z;var P=S*T+p*c,I=M*T+w*c,U=L*T+h*c;this.center.move(u,P,I,U);var O=Math.exp(this.computedRadius[0]);O=Math.max(1e-4,O+A),this.radius.set(u,Math.log(O))},b.translate=function(u,T,c,A){this.center.move(u,T||0,c||0,A||0)},b.setMatrix=function(u,T,c,A){var k=1;typeof c=="number"&&(k=c|0),(k<0||k>3)&&(k=1);var p=(k+2)%3;T||(this.recalcMatrix(u),T=this.computedMatrix);var w=T[k],h=T[k+4],D=T[k+8];if(A){var M=Math.abs(w),L=Math.abs(h),R=Math.abs(D),z=Math.max(M,L,R);M===z?(w=w<0?-1:1,h=D=0):R===z?(D=D<0?-1:1,w=h=0):(h=h<0?-1:1,w=D=0)}else{var S=s(w,h,D);w/=S,h/=S,D/=S}var P=T[p],I=T[p+4],U=T[p+8],O=P*w+I*h+U*D;P-=w*O,I-=h*O,U-=D*O;var G=s(P,I,U);P/=G,I/=G,U/=G;var $=h*U-D*I,tt=D*P-w*U,Z=w*I-h*P,X=s($,tt,Z);$/=X,tt/=X,Z/=X,this.center.jump(u,Tt,kt,zt),this.radius.idle(u),this.up.jump(u,w,h,D),this.right.jump(u,P,I,U);var J,st;if(k===2){var at=T[1],lt=T[5],F=T[9],H=at*P+lt*I+F*U,et=at*$+lt*tt+F*Z;nt<0?J=-Math.PI/2:J=Math.PI/2,st=Math.atan2(et,H)}else{var q=T[2],W=T[6],K=T[10],nt=q*w+W*h+K*D,it=q*P+W*I+K*U,ot=q*$+W*tt+K*Z;J=Math.asin(o(nt)),st=Math.atan2(ot,it)}this.angle.jump(u,st,J),this.recalcMatrix(u);var ct=T[2],bt=T[6],ut=T[10],pt=this.computedMatrix;a(pt,T);var yt=pt[15],Tt=pt[12]/yt,kt=pt[13]/yt,zt=pt[14]/yt,Rt=Math.exp(this.computedRadius[0]);this.center.jump(u,Tt-ct*Rt,kt-bt*Rt,zt-ut*Rt)},b.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},b.idle=function(u){this.center.idle(u),this.up.idle(u),this.right.idle(u),this.radius.idle(u),this.angle.idle(u)},b.flush=function(u){this.center.flush(u),this.up.flush(u),this.right.flush(u),this.radius.flush(u),this.angle.flush(u)},b.setDistance=function(u,T){T>0&&this.radius.set(u,Math.log(T))},b.lookAt=function(u,T,c,A){this.recalcMatrix(u),T=T||this.computedEye,c=c||this.computedCenter,A=A||this.computedUp;var k=A[0],p=A[1],w=A[2],h=s(k,p,w);if(!(h<1e-6)){k/=h,p/=h,w/=h;var D=T[0]-c[0],S=T[1]-c[1],M=T[2]-c[2],L=s(D,S,M);if(!(L<1e-6)){D/=L,S/=L,M/=L;var R=this.computedRight,z=R[0],P=R[1],I=R[2],U=k*z+p*P+w*I;z-=U*k,P-=U*p,I-=U*w;var O=s(z,P,I);if(!(O<.01&&(z=p*M-w*S,P=w*D-k*M,I=k*S-p*D,O=s(z,P,I),O<1e-6))){z/=O,P/=O,I/=O,this.up.set(u,k,p,w),this.right.set(u,z,P,I),this.center.set(u,c[0],c[1],c[2]),this.radius.set(u,Math.log(L));var G=p*I-w*P,$=w*z-k*I,tt=k*P-p*z,Z=s(G,$,tt);G/=Z,$/=Z,tt/=Z;var X=k*D+p*S+w*M,J=z*D+P*S+I*M,st=G*D+$*S+tt*M,at=Math.asin(o(X)),lt=Math.atan2(st,J),F=this.angle._state,H=F[F.length-1],et=F[F.length-2];H=H%(2*Math.PI);var q=Math.abs(H+2*Math.PI-lt),W=Math.abs(H-lt),K=Math.abs(H-2*Math.PI-lt);q<W&&(H+=2*Math.PI),K<W&&(H-=2*Math.PI),this.angle.jump(this.angle.lastT(),H,et),this.angle.set(u,lt,at)}}}};function _(u){u=u||{};var T=u.center||[0,0,0],c=u.up||[0,1,0],A=u.right||y(c),k=u.radius||1,p=u.theta||0,w=u.phi||0;if(T=[].slice.call(T,0,3),c=[].slice.call(c,0,3),n(c,c),A=[].slice.call(A,0,3),n(A,A),"eye"in u){var h=u.eye,D=[h[0]-T[0],h[1]-T[1],h[2]-T[2]];r(A,D,c),s(A[0],A[1],A[2])<1e-6?A=y(c):n(A,A),k=s(D[0],D[1],D[2]);var S=d(c,D)/k,M=d(A,D)/k;w=Math.acos(S),p=Math.acos(M)}return k=Math.log(k),new g(u.zoomMin,u.zoomMax,T,c,A,k,p,w)}},{"filtered-vector":68,"gl-mat4/invert":98,"gl-mat4/rotate":103,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/normalize":179}],306:[function(l,m,x){m.exports=a;var t=+(Math.pow(2,27)+1);function a(i,r,n){var d=i*r,s=t*i,o=s-i,y=s-o,g=i-y,b=t*r,v=b-r,_=b-v,u=r-_,T=d-y*_,c=T-g*_,A=c-y*u,k=g*u-A;return n?(n[0]=k,n[1]=d,n):[k,d]}},{}],307:[function(l,m,x){m.exports=t;function t(a,i,r){var n=a+i,d=n-a,s=n-d,o=i-d,y=a-s;return r?(r[0]=y+o,r[1]=n,r):[y+o,n]}},{}],308:[function(l,m,x){(function(t){(function(){var a=l("bit-twiddle"),i=l("dup"),r=l("buffer").Buffer;t.__TYPEDARRAY_POOL||(t.__TYPEDARRAY_POOL={UINT8:i([32,0]),UINT16:i([32,0]),UINT32:i([32,0]),BIGUINT64:i([32,0]),INT8:i([32,0]),INT16:i([32,0]),INT32:i([32,0]),BIGINT64:i([32,0]),FLOAT:i([32,0]),DOUBLE:i([32,0]),DATA:i([32,0]),UINT8C:i([32,0]),BUFFER:i([32,0])});var n=typeof Uint8ClampedArray<"u",d=typeof BigUint64Array<"u",s=typeof BigInt64Array<"u",o=t.__TYPEDARRAY_POOL;o.UINT8C||(o.UINT8C=i([32,0])),o.BIGUINT64||(o.BIGUINT64=i([32,0])),o.BIGINT64||(o.BIGINT64=i([32,0])),o.BUFFER||(o.BUFFER=i([32,0]));var y=o.DATA,g=o.BUFFER;x.free=function(P){if(r.isBuffer(P))g[a.log2(P.length)].push(P);else{if(Object.prototype.toString.call(P)!=="[object ArrayBuffer]"&&(P=P.buffer),!P)return;var I=P.length||P.byteLength,U=a.log2(I)|0;y[U].push(P)}};function b(z){if(!!z){var P=z.length||z.byteLength,I=a.log2(P);y[I].push(z)}}function v(z){b(z.buffer)}x.freeUint8=x.freeUint16=x.freeUint32=x.freeBigUint64=x.freeInt8=x.freeInt16=x.freeInt32=x.freeBigInt64=x.freeFloat32=x.freeFloat=x.freeFloat64=x.freeDouble=x.freeUint8Clamped=x.freeDataView=v,x.freeArrayBuffer=b,x.freeBuffer=function(P){g[a.log2(P.length)].push(P)},x.malloc=function(P,I){if(I===void 0||I==="arraybuffer")return _(P);switch(I){case"uint8":return u(P);case"uint16":return T(P);case"uint32":return c(P);case"int8":return A(P);case"int16":return k(P);case"int32":return p(P);case"float":case"float32":return w(P);case"double":case"float64":return h(P);case"uint8_clamped":return D(P);case"bigint64":return M(P);case"biguint64":return S(P);case"buffer":return R(P);case"data":case"dataview":return L(P);default:return null}return null};function _(P){var P=a.nextPow2(P),I=a.log2(P),U=y[I];return U.length>0?U.pop():new ArrayBuffer(P)}x.mallocArrayBuffer=_;function u(z){return new Uint8Array(_(z),0,z)}x.mallocUint8=u;function T(z){return new Uint16Array(_(2*z),0,z)}x.mallocUint16=T;function c(z){return new Uint32Array(_(4*z),0,z)}x.mallocUint32=c;function A(z){return new Int8Array(_(z),0,z)}x.mallocInt8=A;function k(z){return new Int16Array(_(2*z),0,z)}x.mallocInt16=k;function p(z){return new Int32Array(_(4*z),0,z)}x.mallocInt32=p;function w(z){return new Float32Array(_(4*z),0,z)}x.mallocFloat32=x.mallocFloat=w;function h(z){return new Float64Array(_(8*z),0,z)}x.mallocFloat64=x.mallocDouble=h;function D(z){return n?new Uint8ClampedArray(_(z),0,z):u(z)}x.mallocUint8Clamped=D;function S(z){return d?new BigUint64Array(_(8*z),0,z):null}x.mallocBigUint64=S;function M(z){return s?new BigInt64Array(_(8*z),0,z):null}x.mallocBigInt64=M;function L(z){return new DataView(_(z),0,z)}x.mallocDataView=L;function R(z){z=a.nextPow2(z);var P=a.log2(z),I=g[P];return I.length>0?I.pop():new r(z)}x.mallocBuffer=R,x.clearCache=function(){for(var P=0;P<32;++P)o.UINT8[P].length=0,o.UINT16[P].length=0,o.UINT32[P].length=0,o.INT8[P].length=0,o.INT16[P].length=0,o.INT32[P].length=0,o.FLOAT[P].length=0,o.DOUBLE[P].length=0,o.BIGUINT64[P].length=0,o.BIGINT64[P].length=0,o.UINT8C[P].length=0,y[P].length=0,g[P].length=0}}).call(this)}).call(this,typeof f<"u"?f:typeof self<"u"?self:typeof window<"u"?window:{})},{"bit-twiddle":32,buffer:3,dup:65}],309:[function(l,m,x){m.exports=t;function t(i){this.roots=new Array(i),this.ranks=new Array(i);for(var r=0;r<i;++r)this.roots[r]=r,this.ranks[r]=0}var a=t.prototype;Object.defineProperty(a,"length",{get:function(){return this.roots.length}}),a.makeSet=function(){var i=this.roots.length;return this.roots.push(i),this.ranks.push(0),i},a.find=function(i){for(var r=i,n=this.roots;n[i]!==i;)i=n[i];for(;n[r]!==i;){var d=n[r];n[r]=i,r=d}return i},a.link=function(i,r){var n=this.find(i),d=this.find(r);if(n!==d){var s=this.ranks,o=this.roots,y=s[n],g=s[d];y<g?o[n]=d:g<y?o[d]=n:(o[d]=n,++s[n])}}},{}],310:[function(l,m,x){function t(r,n){for(var d=1,s=r.length,o=r[0],y=r[0],g=1;g<s;++g)if(y=o,o=r[g],n(o,y)){if(g===d){d++;continue}r[d++]=o}return r.length=d,r}function a(r){for(var n=1,d=r.length,s=r[0],o=r[0],y=1;y<d;++y,o=s)if(o=s,s=r[y],s!==o){if(y===n){n++;continue}r[n++]=s}return r.length=n,r}function i(r,n,d){return r.length===0?r:n?(d||r.sort(n),t(r,n)):(d||r.sort(),a(r))}m.exports=i},{}],311:[function(l,m,x){m.exports=r;var t=l("./lib/vtext"),a=null,i=null;typeof document<"u"&&(a=document.createElement("canvas"),a.width=8192,a.height=1024,i=a.getContext("2d"));function r(n,d){return(typeof d!="object"||d===null)&&(d={}),t(n,d.canvas||a,d.context||i,d)}},{"./lib/vtext":312}],312:[function(l,m,x){m.exports=S,m.exports.processPixels=D;var t=l("surface-nets"),a=l("ndarray"),i=l("simplify-planar-graph"),r=l("clean-pslg"),n=l("cdt2d"),d=l("planar-graph-to-polyline"),s="b",o="b|",y="i",g="i|",b="sup",v="+",_="+1",u="sub",T="-",c="-1";function A(M,L,R,z){for(var P="<"+M+">",I="</"+M+">",U=P.length,O=I.length,G=L[0]===v||L[0]===T,$=0,tt=-O;$>-1&&($=R.indexOf(P,$),!($===-1||(tt=R.indexOf(I,$+U),tt===-1)||tt<=$));){for(var Z=$;Z<tt+O;++Z)if(Z<$+U||Z>=tt)z[Z]=null,R=R.substr(0,Z)+" "+R.substr(Z+1);else if(z[Z]!==null){var X=z[Z].indexOf(L[0]);X===-1?z[Z]+=L:G&&(z[Z]=z[Z].substr(0,X+1)+(1+parseInt(z[Z][X+1]))+z[Z].substr(X+2))}var J=$+U,st=R.substr(J,tt-J),at=st.indexOf(P);at!==-1?$=at:$=tt+O}return z}function k(M,L,R){for(var z=L.textAlign||"start",P=L.textBaseline||"alphabetic",I=[1<<30,1<<30],U=[0,0],O=M.length,G=0;G<O;++G)for(var $=M[G],tt=0;tt<2;++tt)I[tt]=Math.min(I[tt],$[tt])|0,U[tt]=Math.max(U[tt],$[tt])|0;var Z=0;switch(z){case"center":Z=-.5*(I[0]+U[0]);break;case"right":case"end":Z=-U[0];break;case"left":case"start":Z=-I[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+z+"'")}var X=0;switch(P){case"hanging":case"top":X=-I[1];break;case"middle":X=-.5*(I[1]+U[1]);break;case"alphabetic":case"ideographic":X=-3*R;break;case"bottom":X=-U[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+P+"'")}var J=1/R;return"lineHeight"in L?J*=+L.lineHeight:"width"in L?J=L.width/(U[0]-I[0]):"height"in L&&(J=L.height/(U[1]-I[1])),M.map(function(st){return[J*(st[0]+Z),J*(st[1]+X)]})}function p(M,L,R,z,P,I){R=R.replace(/\n/g,""),I.breaklines===!0?R=R.replace(/\<br\>/g,`
`):R=R.replace(/\<br\>/g," ");var U="",O=[];for(H=0;H<R.length;++H)O[H]=U;I.bolds===!0&&(O=A(s,o,R,O)),I.italics===!0&&(O=A(y,g,R,O)),I.superscripts===!0&&(O=A(b,_,R,O)),I.subscripts===!0&&(O=A(u,c,R,O));var G=[],$="";for(H=0;H<R.length;++H)O[H]!==null&&($+=R[H],G.push(O[H]));var tt=$.split(`
`),Z=tt.length,X=Math.round(P*z),J=z,st=z*2,at=0,lt=Z*X+st;M.height<lt&&(M.height=lt),L.fillStyle="#000",L.fillRect(0,0,M.width,M.height),L.fillStyle="#fff";var F,H,et,q,W,K=0,nt="";function it(){if(nt!==""){var zt=L.measureText(nt).width;L.fillText(nt,J+et,st+q),et+=zt}}function ot(){return""+Math.round(W)+"px "}function ct(zt,Rt){var Gt=""+L.font;if(I.subscripts===!0){var wt=zt.indexOf(T),It=Rt.indexOf(T),$t=wt>-1?parseInt(zt[1+wt]):0,Qt=It>-1?parseInt(Rt[1+It]):0;$t!==Qt&&(Gt=Gt.replace(ot(),"?px "),W*=Math.pow(.75,Qt-$t),Gt=Gt.replace("?px ",ot())),q+=.25*X*(Qt-$t)}if(I.superscripts===!0){var Nt=zt.indexOf(v),Pt=Rt.indexOf(v),Yt=Nt>-1?parseInt(zt[1+Nt]):0,ve=Pt>-1?parseInt(Rt[1+Pt]):0;Yt!==ve&&(Gt=Gt.replace(ot(),"?px "),W*=Math.pow(.75,ve-Yt),Gt=Gt.replace("?px ",ot())),q-=.25*X*(ve-Yt)}if(I.bolds===!0){var Re=zt.indexOf(o)>-1,ir=Rt.indexOf(o)>-1;!Re&&ir&&(Ie?Gt=Gt.replace("italic ","italic bold "):Gt="bold "+Gt),Re&&!ir&&(Gt=Gt.replace("bold ",""))}if(I.italics===!0){var Ie=zt.indexOf(g)>-1,Be=Rt.indexOf(g)>-1;!Ie&&Be&&(Gt="italic "+Gt),Ie&&!Be&&(Gt=Gt.replace("italic ",""))}L.font=Gt}for(F=0;F<Z;++F){var bt=tt[F]+`
`;for(et=0,q=F*X,W=z,nt="",H=0;H<bt.length;++H){var ut=H+K<G.length?G[H+K]:G[G.length-1];U===ut?nt+=bt[H]:(it(),nt=bt[H],ut!==void 0&&(ct(U,ut),U=ut))}it(),K+=bt.length;var pt=Math.round(et+2*J)|0;at<pt&&(at=pt)}var yt=at,Tt=st+X*Z,kt=a(L.getImageData(0,0,yt,Tt).data,[Tt,yt,4]);return kt.pick(-1,-1,0).transpose(1,0)}function w(M,L){var R=t(M,128);return L?i(R.cells,R.positions,.25):{edges:R.cells,positions:R.positions}}function h(M,L,R,z){var P=w(M,z),I=k(P.positions,L,R),U=P.edges,O=L.orientation==="ccw";if(r(I,U),L.polygons||L.polygon||L.polyline){for(var G=d(U,I),$=new Array(G.length),tt=0;tt<G.length;++tt){for(var Z=G[tt],X=new Array(Z.length),J=0;J<Z.length;++J){for(var st=Z[J],at=new Array(st.length),lt=0;lt<st.length;++lt)at[lt]=I[st[lt]].slice();O&&at.reverse(),X[J]=at}$[tt]=X}return $}else return L.triangles||L.triangulate||L.triangle?{cells:n(I,U,{delaunay:!1,exterior:!1,interior:!0}),positions:I}:{edges:U,positions:I}}function D(M,L,R){try{return h(M,L,R,!0)}catch{}try{return h(M,L,R,!1)}catch{}return L.polygons||L.polyline||L.polygon?[]:L.triangles||L.triangulate||L.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}function S(M,L,R,z){var P=64,I=1.25,U={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};z&&(z.size&&z.size>0&&(P=z.size),z.lineSpacing&&z.lineSpacing>0&&(I=z.lineSpacing),z.styletags&&z.styletags.breaklines&&(U.breaklines=!!z.styletags.breaklines),z.styletags&&z.styletags.bolds&&(U.bolds=!!z.styletags.bolds),z.styletags&&z.styletags.italics&&(U.italics=!!z.styletags.italics),z.styletags&&z.styletags.subscripts&&(U.subscripts=!!z.styletags.subscripts),z.styletags&&z.styletags.superscripts&&(U.superscripts=!!z.styletags.superscripts)),R.font=[z.fontStyle,z.fontVariant,z.fontWeight,P+"px",z.font].filter(function(G){return G}).join(" "),R.textAlign="start",R.textBaseline="alphabetic",R.direction="ltr";var O=p(L,R,M,P,I,U);return D(O,z,P)}},{cdt2d:42,"clean-pslg":50,ndarray:259,"planar-graph-to-polyline":268,"simplify-planar-graph":297,"surface-nets":302}],313:[function(l,m,x){(function(){if(typeof ses<"u"&&ses.ok&&!ses.ok())return;function a(D){D.permitHostObjects___&&D.permitHostObjects___(a)}typeof ses<"u"&&(ses.weakMapPermitHostObjects=a);var i=!1;if(typeof WeakMap=="function"){var r=WeakMap;if(!(typeof navigator<"u"&&/Firefox/.test(navigator.userAgent))){var n=new r,d=Object.freeze({});if(n.set(d,1),n.get(d)!==1)i=!0;else{m.exports=WeakMap;return}}}var s=Object.getOwnPropertyNames,o=Object.defineProperty,y=Object.isExtensible,g="weakmap:",b=g+"ident:"+Math.random()+"___";if(typeof crypto<"u"&&typeof crypto.getRandomValues=="function"&&typeof ArrayBuffer=="function"&&typeof Uint8Array=="function"){var v=new ArrayBuffer(25),_=new Uint8Array(v);crypto.getRandomValues(_),b=g+"rand:"+Array.prototype.map.call(_,function(D){return(D%36).toString(36)}).join("")+"___"}function u(D){return!(D.substr(0,g.length)==g&&D.substr(D.length-3)==="___")}if(o(Object,"getOwnPropertyNames",{value:function(S){return s(S).filter(u)}}),"getPropertyNames"in Object){var T=Object.getPropertyNames;o(Object,"getPropertyNames",{value:function(S){return T(S).filter(u)}})}function c(D){if(D!==Object(D))throw new TypeError("Not an object: "+D);var S=D[b];if(S&&S.key===D)return S;if(!!y(D)){S={key:D};try{return o(D,b,{value:S,writable:!1,enumerable:!1,configurable:!1}),S}catch{return}}}(function(){var D=Object.freeze;o(Object,"freeze",{value:function(R){return c(R),D(R)}});var S=Object.seal;o(Object,"seal",{value:function(R){return c(R),S(R)}});var M=Object.preventExtensions;o(Object,"preventExtensions",{value:function(R){return c(R),M(R)}})})();function A(D){return D.prototype=null,Object.freeze(D)}var k=!1;function p(){!k&&typeof console<"u"&&(k=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}var w=0,h=function(){this instanceof h||p();var D=[],S=[],M=w++;function L(I,U){var O,G=c(I);return G?M in G?G[M]:U:(O=D.indexOf(I),O>=0?S[O]:U)}function R(I){var U=c(I);return U?M in U:D.indexOf(I)>=0}function z(I,U){var O,G=c(I);return G?G[M]=U:(O=D.indexOf(I),O>=0?S[O]=U:(O=D.length,S[O]=U,D[O]=I)),this}function P(I){var U=c(I),O,G;return U?M in U&&delete U[M]:(O=D.indexOf(I),O<0?!1:(G=D.length-1,D[O]=void 0,S[O]=S[G],D[O]=D[G],D.length=G,S.length=G,!0))}return Object.create(h.prototype,{get___:{value:A(L)},has___:{value:A(R)},set___:{value:A(z)},delete___:{value:A(P)}})};h.prototype=Object.create(Object.prototype,{get:{value:function(S,M){return this.get___(S,M)},writable:!0,configurable:!0},has:{value:function(S){return this.has___(S)},writable:!0,configurable:!0},set:{value:function(S,M){return this.set___(S,M)},writable:!0,configurable:!0},delete:{value:function(S){return this.delete___(S)},writable:!0,configurable:!0}}),typeof r=="function"?function(){i&&typeof Proxy<"u"&&(Proxy=void 0);function D(){this instanceof h||p();var S=new r,M=void 0,L=!1;function R(U,O){return M?S.has(U)?S.get(U):M.get___(U,O):S.get(U,O)}function z(U){return S.has(U)||(M?M.has___(U):!1)}var P;i?P=function(U,O){return S.set(U,O),S.has(U)||(M||(M=new h),M.set(U,O)),this}:P=function(U,O){if(L)try{S.set(U,O)}catch{M||(M=new h),M.set___(U,O)}else S.set(U,O);return this};function I(U){var O=!!S.delete(U);return M&&M.delete___(U)||O}return Object.create(h.prototype,{get___:{value:A(R)},has___:{value:A(z)},set___:{value:A(P)},delete___:{value:A(I)},permitHostObjects___:{value:A(function(U){if(U===a)L=!0;else throw new Error("bogus call to permitHostObjects___")})}})}D.prototype=h.prototype,m.exports=D,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():(typeof Proxy<"u"&&(Proxy=void 0),m.exports=h)})()},{}],314:[function(l,m,x){var t=l("./hidden-store.js");m.exports=a;function a(){var i={};return function(r){if((typeof r!="object"||r===null)&&typeof r!="function")throw new Error("Weakmap-shim: Key must be object");var n=r.valueOf(i);return n&&n.identity===i?n:t(r,i)}}},{"./hidden-store.js":315}],315:[function(l,m,x){m.exports=t;function t(a,i){var r={identity:i},n=a.valueOf;return Object.defineProperty(a,"valueOf",{value:function(d){return d!==i?n.apply(this,arguments):r},writable:!0}),r}},{}],316:[function(l,m,x){var t=l("./create-store.js");m.exports=a;function a(){var i=t();return{get:function(r,n){var d=i(r);return d.hasOwnProperty("value")?d.value:n},set:function(r,n){return i(r).value=n,this},has:function(r){return"value"in i(r)},delete:function(r){return delete i(r).value}}}},{"./create-store.js":314}],317:[function(l,m,x){function t(){return function(s,o,y,g,b,v){var _=s[0],u=y[0],T=[0],c=u;g|=0;var A=0,k=u;for(A=0;A<_;++A){{var p=o[g]-v,w=o[g+c]-v;p>=0!=w>=0&&b.push(T[0]+.5+.5*(p+w)/(p-w))}g+=k,++T[0]}}}function a(){return t()}var i=a;function r(s){var o={};return function(g,b,v){var _=g.dtype,u=g.order,T=[_,u.join()].join(),c=o[T];return c||(o[T]=c=s([_,u])),c(g.shape.slice(0),g.data,g.stride,g.offset|0,b,v)}}function n(s){return r(i.bind(void 0,s))}function d(s){return n({funcName:s.funcName})}m.exports=d({funcName:"zeroCrossings"})},{}],318:[function(l,m,x){m.exports=a;var t=l("./lib/zc-core");function a(i,r){var n=[];return r=+r||0,t(i.hi(i.shape[0]-1),n,r),n}},{"./lib/zc-core":317}]},{},[6])(6)})}).call(this)}).call(this,typeof zo<"u"?zo:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[27])(27)})})(kb);const qv=O4(kb.exports),B4=Qp({__name:"Plot",props:{data:null,layout:null,config:null,autoRefresh:null},setup(j){const ht=j;let e,B;const V=Gf(),f=()=>{qv.Plots.resize(qa(V))},l=(m=!0)=>{var x;if(m){const t=(x=ht.layout)!=null?x:{};t.datarevision=Math.random()}qv.react(qa(V),ht.data,ht.layout,ht.config)};return s1(()=>{e=A_(()=>l(!!qa(ht.autoRefresh))),B=new ResizeObserver(()=>f),B.observe(qa(V))}),l1(()=>{e(),B.unobserve(qa(V)),qv.purge(qa(V))}),(m,x)=>(ou(),c3("div",{ref_key:"plotDiv",ref:V},null,512))}});const N4=(j,ht)=>{const e=j.__vccOpts||j;for(const[B,V]of ht)e[B]=V;return e},U4=K0("Set"),H4={__name:"App",setup(j){const ht=F4(),e=Gf(0),B=Gf(!1);function V(t){let a=window.location;return(a.protocol==="https:"?"wss://":"ws://")+a.host+a.pathname+t}let f=new WebSocket(V("channel"));f.onopen=()=>{f.readyState===1&&(B.value=!0)},f.onclose=async()=>{B.value=!1,await(await s4.create({header:"WS connection closed",message:"Refresh page to reconnect.",buttons:["OK"]})).present()};function l(t){f.send(JSON.stringify({type:"command",command_type:"set_voltage",block:"1",voltage:Number(t)}))}f.onmessage=t=>{let a=JSON.parse(t.data);ht.putMessage(a)};const m=Dp(()=>ht.messages.map((t,a)=>({idx:a,...t})).reverse()),x=Dp(()=>{const t=ht.messages.filter(a=>a.message.type==="answer"&&a.message.answer_type==="get_voltage"&&a.message.block===1);return[{x:t.map(a=>a.time),y:t.map(a=>a.message.voltage),type:"scatter"}]});return(t,a)=>(ou(),Ru(qa(r4),null,{default:es(()=>[Ya(qa(XA),{fullscreen:!0},{default:es(()=>[Ya(qa(jA),null,{default:es(()=>[Ya(qa(gp),null,{default:es(()=>[Ya(qa(zf),{size:"2"},{default:es(()=>[Lp("h3",null,ip(B.value?"\u{1F7E2} (Online)":"\u{1F534} (Offline)"),1)]),_:1}),Ya(qa(zf),{size:"10"})]),_:1}),Ya(qa(gp),null,{default:es(()=>[Ya(qa(zf),{size:"12"},{default:es(()=>[Ya(qa(B4),{data:qa(x),layout:{autosize:!0,margin:{l:60,r:10,b:50,t:10,pad:4}},config:{},"auto-refresh":""},null,8,["data"])]),_:1})]),_:1}),Ya(qa(gp),null,{default:es(()=>[Ya(qa(zf),null,{default:es(()=>[Lp("h3",null,ip(qa(x)[0].y.length===0?"---":qa(x)[0].y[[qa(x)[0].y.length-1]].toFixed(5))+" V ",1)]),_:1}),Ya(qa(zf),null,{default:es(()=>[Ya(qa(Ty),null,{default:es(()=>[Ya(qa(ZA),{modelValue:e.value,"onUpdate:modelValue":a[0]||(a[0]=i=>e.value=i)},null,8,["modelValue"]),Ya(qa($A),{disabled:isNaN(e.value),onClick:a[1]||(a[1]=i=>l(e.value))},{default:es(()=>[U4]),_:1},8,["disabled"])]),_:1})]),_:1}),Ya(qa(zf))]),_:1}),Ya(qa(gp),null,{default:es(()=>[Ya(qa(zf),null,{default:es(()=>[Ya(qa(JA),null,{default:es(()=>[Ya(qa(Nh),{class:"scroller",items:qa(m),"item-size":56,"key-field":"idx"},{default:es(({item:i})=>[Ya(qa(Ty),null,{default:es(()=>[Ya(qa(KA),null,{default:es(()=>[K0(ip(i.time.toISOString())+": "+ip(i.message),1)]),_:2},1024)]),_:2},1024)]),_:1},8,["items"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}},V4=N4(H4,[["__scopeId","data-v-9ee9acc2"]]);const sv=G3(V4);sv.use($3());sv.use(e4);sv.use(R4);sv.mount("#app");
